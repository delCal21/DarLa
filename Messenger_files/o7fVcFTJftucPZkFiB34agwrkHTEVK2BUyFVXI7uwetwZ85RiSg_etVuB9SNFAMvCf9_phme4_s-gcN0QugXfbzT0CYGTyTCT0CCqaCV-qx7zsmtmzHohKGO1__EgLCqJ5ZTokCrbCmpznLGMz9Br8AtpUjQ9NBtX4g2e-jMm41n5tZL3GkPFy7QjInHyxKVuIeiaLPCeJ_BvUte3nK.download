;/*FB_PKG_DELIM*/

__d("WebBloksClearCachedAsyncComponents",[],(function(t,n,r,o,a,i){function e(e){e.objectSet.componentQueryStore.clear()}i.default=e}),66);
__d("WebBloksDummy",[],(function(t,n,r,o,a,i){function e(){}i.default=e}),66);
__d("WebBloksFetchAsyncComponent",[],(function(t,n,r,o,a,i){function e(e,t,n,r,o){e.objectSet.componentQueryStore.fetch(t,n,r,"FETCH")}i.default=e}),66);
__d("WebBloksInvalidateCachedAsyncComponents",[],(function(t,n,r,o,a,i){function e(e,t,n){e.bloksContext.objectSet.componentQueryStore.invalidate(t,n)}i.default=e}),66);
__d("AcqWebBloksActions",["WebBloksClearCachedAsyncComponents","WebBloksDummy","WebBloksFetchAsyncComponent","WebBloksInvalidateCachedAsyncComponents"],(function(t,n,r,o,a,i,l){var e,s={"bk.action.bloks.ClearCachedAsyncComponents":r("WebBloksClearCachedAsyncComponents"),"bk.action.bloks.FetchAsyncComponents":r("WebBloksFetchAsyncComponent"),"bk.action.bloks.InvalidateCachedAsyncComponents":r("WebBloksInvalidateCachedAsyncComponents"),"bk.versioning.bloks.AsyncComponentAppIdExpression":e=r("WebBloksDummy"),"bk.versioning.bloks.AsyncComponentCacheTtlExpression":e,"bk.versioning.bloks.AsyncComponentClientParams":e,"bk.versioning.bloks.AsyncComponentDependencies":e,"bk.versioning.bloks.AsyncComponentReleaseV1":e,"bk.versioning.bloks.AsyncComponentScoping":e};l.ACTIONS=s}),98);
__d("acqTraversalKeys",[],(function(t,n,r,o,a,i){var e={},l=e;i.default=l}),66);
__d("ACQWebBloksEnvironmentConfigDynamic",["AcqWebBloksActions","acqTraversalKeys"],(function(t,n,r,o,a,i,l){var e={actions:o("AcqWebBloksActions").ACTIONS,traversalKeys:r("acqTraversalKeys")};l.ACQ_ENVIRONMENT_CONFIG=e}),98);
__d("ClientAjaxIdsUpdater",["CurrentUserInitialData","MRequestConfig","cr:8959","cr:8960"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){if(t.ajaxUpdateAfterLogin){var o=t.ajaxUpdateAfterLogin;(e||(e=r("CurrentUserInitialData"))).USER_ID=o.currentUser,n("cr:8959").setToken(o.dtsgToken),n("cr:8960").setToken(o.dtsgAsyncGetToken),r("MRequestConfig").ajaxResponseToken=o.ajaxResponseToken}}l.default=s}),98);
__d("WebBloksIsUnitTest",[],(function(t,n,r,o,a,i){"use strict";function e(){var e;return typeof process!="undefined"&&((e=process)==null||(e=e.env)==null?void 0:e.NODE_ENV)==="test"}i.default=e}),66);
__d("WebBloksAppLoaderConsoleDebugger",["WebBloksIsUnitTest"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){}function s(e,t){}function u(e,t){}var c={onStart:e,onSuccess:s,onError:u};l.default=c}),98);
__d("WebBloksErrors",[],(function(t,n,r,o,a,i){var e=(function(e){function t(t,n,r){var o;return o=e.call(this)||this,o.message=(r===!0?"[DEV Only]":"")+"[WebBloks] "+t+(n?": "+n.toString():""),o.name=o.constructor.name,n&&(o.cause=n,n.stack&&(o.stack=n.stack)),o.stack||(typeof process=="undefined"||process.env.JEST_WORKER_ID===void 0)&&(o.stack=new Error(o.message).stack),o}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error)),l=(function(e){function t(t,n){return e.call(this,"Unable to find component with id="+t,null,n)||this}return babelHelpers.inheritsLoose(t,e),t})(e),s=(function(e){function t(t,n,r){return e.call(this,"Error while fetching data: "+t,n,r)||this}return babelHelpers.inheritsLoose(t,e),t})(e),u=(function(e){function t(t,n,r){var o,a;return a=e.call(this,"Script error: "+t,null,r)||this,a.stackFrame=n==null||(o=n.getSourceMapNode())==null?void 0:o.getBloksStackFrame(),a.stackFrame=c(a.stackFrame),a}return babelHelpers.inheritsLoose(t,e),t})(e);function c(e){for(var t=e;t!=null;){var n;if(t.offset===((n=t.nextFrame)==null?void 0:n.offset)){var r;t.nextFrame=(r=t.nextFrame)==null?void 0:r.nextFrame}else t=t.nextFrame}return e}var d=(function(e){function t(t,n,r){return e.call(this,"Script parse error at position "+t+": "+n,null,r)||this}return babelHelpers.inheritsLoose(t,e),t})(e),m=(function(e){function t(t,n){return e.call(this,'Action for "'+t+'" was not registered.',null,n)||this}return babelHelpers.inheritsLoose(t,e),t})(e),p=(function(e){function t(t,n){return e.call(this,'Component for "'+t+'" was not registered.',null,n)||this}return babelHelpers.inheritsLoose(t,e),t})(e),_=(function(e){function t(t,n){return e.call(this,"Unsupported feature: "+t,null,n)||this}return babelHelpers.inheritsLoose(t,e),t})(e),f=(function(e){function t(t,n){return e.call(this,'Container config for "'+t+'" was not registered.',null,n)||this}return babelHelpers.inheritsLoose(t,e),t})(e);i.WebBloksError=e,i.WebBloksComponentIdNotFoundError=l,i.WebBloksNetworkError=s,i.WebBloksScriptError=u,i.WebBloksScriptParseError=d,i.WebBloksUnknownActionError=m,i.WebBloksUnknownComponentError=p,i.WebBloksUnsupportedFeatureError=_,i.WebBloksUnknownContainerConfigError=f}),66);
__d("WebBloksFalcoPolicyData",[],(function(t,n,r,o,a,i){"use strict";var e={};function l(t){Object.keys(t).forEach(function(n){e[n]==null&&(e[n]=t[n])})}function s(t){var n=e[t];return n==null?{r:1}:n}var u={add:l,get:s};i.default=u}),66);
__d("WebBloksServerData",["WebBloksFalcoPolicyData"],(function(t,n,r,o,a,i,l){"use strict";function e(e){(e==null?void 0:e.falco_log_policy_map)!=null&&r("WebBloksFalcoPolicyData").add(e.falco_log_policy_map)}l.handleWebBloksServerData=e}),98);
__d("WebBloksAsyncActions",["WebBloksScriptDebuggingUtils","WebBloksUtils"],(function(t,n,r,o,a,i,l){async function e(e,t,n,r){var a=o("WebBloksUtils").nullthrows(e.bloksContext.objectSet.environment.appLoader),i=null;return i=await a.fetchAction(t,n),e.executeActionPayload(i,r)}async function s(t,n,r){try{return await e(t,n,r)}catch(e){o("WebBloksScriptDebuggingUtils").logScriptError(t.objectSet,e,null,t)}}l.executeAsyncAction=e,l.executeAsyncActionCatch=s}),98);
__d("WebBloksScript",[],(function(t,n,r,o,a,i){var e=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.getValue=function(){return this.$1},t.getSourceMapNode=function(){return this.$2},e})();i.WebBloksScript=e}),66);
__d("WebBloksComponentContext",["Promise","WebBloksInterpreterEnvironment","WebBloksScript","WebBloksScriptDebuggingUtils","WebBloksScriptExecutor","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=o("react")),c=s,d=c.createContext,m=c.useContext,p=function(a,i,l){var t=this;i===void 0&&(i=null),l===void 0&&(l=!1),this.execute=function(e,n,a){var i,l=new(r("WebBloksInterpreterEnvironment"))(t.bloksContext);l.scope=(i=e.keyPath)!=null?i:o("WebBloksUtils").EMPTY_KEY_PATH;try{if(t.bloksContext.treeManager.beginUpdates(),n instanceof o("WebBloksScript").WebBloksScript){var s=n==null?void 0:n.getSourceMapNode();return s!=null&&l.setBaseSourceMapNode(s),o("WebBloksScriptExecutor").execute(l,n.getValue(),a)}else return o("WebBloksScriptExecutor").execute(l,n,a)}finally{l.setBaseSourceMapNode(null),t.bloksContext.treeManager.endUpdates()}},this.executeCatch=function(e,n,a){try{return t.execute(e,n,a)}catch(a){var i,l=new(r("WebBloksInterpreterEnvironment"))(t.bloksContext);l.scope=(i=e.keyPath)!=null?i:o("WebBloksUtils").EMPTY_KEY_PATH,o("WebBloksScriptDebuggingUtils").logScriptError(t.objectSet,a,n.getValue(),l)}},this.executeOnNextTickCatch=function(a,i,l){(e||(e=n("Promise"))).resolve().then(function(){t.execute(a,i,l)}).catch(function(e){var n,l=new(r("WebBloksInterpreterEnvironment"))(t.bloksContext);l.scope=(n=a.keyPath)!=null?n:o("WebBloksUtils").EMPTY_KEY_PATH,o("WebBloksScriptDebuggingUtils").logScriptError(t.objectSet,e,i==null?void 0:i.getValue(),l)})},this.renderNode=function(e,n){if(!e)return null;var r=t.objectSet.getComponentForName(e.styleId),o=e.get("visibility");return o==="gone"?null:u.jsx(r,{node:e,externalStyle:n},e.clientId)},this.renderChildren=function(e){return e?e.map(function(e){return t.renderNode(e)}):null},this.bloksContext=a,this.ownerContext=i,this.isLoadingNode=l};Object.defineProperties(p.prototype,{objectSet:{get:function(){return this.bloksContext.objectSet},enumerable:!1},treeManager:{get:function(){return this.bloksContext.treeManager},enumerable:!1}});var _=d(null);function f(){var e=o("react-compiler-runtime").c(2),t=m(_),n;return e[0]!==t?(n=o("WebBloksUtils").nullthrows(t),e[0]=t,e[1]=n):n=e[1],n}l.WebBloksComponentContext=p,l.WebBloksComponentContextContext=_,l.useWebBloksContext=f}),98);
__d("WebBloksEnvironmentContext",["WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext(null);function d(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.environment,a;return t[0]!==n||t[1]!==r?(a=s.jsx(c.Provider,{value:r,children:n}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}function m(){var e=o("react-compiler-runtime").c(2),t=u(c),n;return e[0]!==t?(n=o("WebBloksUtils").nullthrows(t),e[0]=t,e[1]=n):n=e[1],n}l.WebBloksEnvironmentContext=c,l.WebBloksEnvironmentProvider=d,l.useWebBloksEnvironment=m}),98);
__d("WebBloksSourceMapNodeTypes",[],(function(t,n,r,o,a,i){var e=(function(){function e(e,t,n){this.offset="",this.offset=e,this.nextFrame=t,this.loggingID=n}var t=e.prototype;return t.toArray=function(){for(var e=[],t=this;t!=null;){var n;e.push(t.offset),t=(n=t)==null?void 0:n.nextFrame}return e},e})();function l(e){for(var t=null,n=e;n!=null;){var r;t==null&&(t=[]),(r=t)==null||r.push(n.offset),n=n.nextFrame}return t}i.WebBloksStackFrame=e,i.getBloksStackTrace=l}),66);
__d("WebBloksSourceMapNode",["WebBloksSourceMapNodeTypes"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){t===void 0&&(t=[]),this.$1=e,this.$2=t}var t=e.prototype;return t.getLoggingID=function(){var e;return(e=this.$1)==null?void 0:e.getLoggingID()},t.getSourceMapID=function(){var e;return(e=this.$1)==null?void 0:e.getSourceMapID()},t.getParent=function(){return this.$1},t.getTreePath=function(){return this.$2},t.makeCopyWithNewParent=function(n){return new e(n,this.$2)},t.getBloksStackFrame=function(){var e,t=(e=this.getParent())==null?void 0:e.getBloksStackFrame();if(t==null)return null;var n=this.getTreePath(),r;return n!=null&&(n==null?void 0:n.length)>0?r=[t.offset].concat(n).join(":"):r=t.offset,new(o("WebBloksSourceMapNodeTypes")).WebBloksStackFrame(r,t.nextFrame)},t.getBloksStackTrace=function(){return o("WebBloksSourceMapNodeTypes").getBloksStackTrace(this.getBloksStackFrame())},t.addToTreePath=function(t){var e;return this.$2=(e=this.$2)==null?void 0:e.concat([t]),this},e})();l.default=e}),98);
__d("WebBloksSourceMapPayloadMetadata",[],(function(t,n,r,o,a,i){var e=function(t,n,r){this.payloadPath=t!=null?t:[],this.sourceMapID=n,this.loggingID=r};i.default=e}),66);
__d("WebBloksSourceMapRootNode",["WebBloksSourceMapNodeTypes"],(function(t,n,r,o,a,i,l){var e="null",s=(function(){function t(e,t){this.$1=e,this.$2=t}var n=t.prototype;return n.getLoggingID=function(){var e,t,n;return(e=(t=this.$2)==null?void 0:t.loggingID)!=null?e:(n=this.getParent())==null?void 0:n.getLoggingID()},n.getSourceMapID=function(){var e,t,n;return(e=(t=this.$2)==null?void 0:t.sourceMapID)!=null?e:(n=this.getParent())==null?void 0:n.getSourceMapID()},n.getParent=function(){var e,t;return(e=(t=this.$1).getParent)==null?void 0:e.call(t)},n.getTreePath=function(){var e;return(e=this.$1)==null?void 0:e.getTreePath()},n.getPayloadPath=function(){var e;return(e=this.$2)==null?void 0:e.payloadPath},n.makeCopyWithNewParent=function(n){return new t(this.$1.makeCopyWithNewParent(n),this.$2)},n.getBloksStackFrame=function(){var t,n,r,a=[],i=this.getTreePath(),l=(t=this.$2)==null?void 0:t.payloadPath;l!=null&&a.push.apply(a,l),i!=null&&i.length&&a.push.apply(a,i);var s=((n=(r=this.$2)==null?void 0:r.sourceMapID)!=null?n:e)+"|"+a.join(":"),u=this.getParent();return new(o("WebBloksSourceMapNodeTypes")).WebBloksStackFrame(s,u!=null?u.getBloksStackFrame():null)},n.getBloksStackTrace=function(){return o("WebBloksSourceMapNodeTypes").getBloksStackTrace(this.getBloksStackFrame())},n.addToTreePath=function(t){return this.$1=this.$1.addToTreePath(t),this},t})();l.default=s}),98);
__d("WebBloksFunctionTableManager",["WebBloksScriptParser","WebBloksSourceMapNode","WebBloksSourceMapPayloadMetadata","WebBloksSourceMapRootNode","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){e===void 0&&(e=o("WebBloksUtils").EMPTY_OBJECT),this.$1=new Map;for(var t in e)this.$1.set(t,e[t])}e.getKnownFt=function(t){var e=this.$2.get(t);return e!=null&&this.$3.has(e)?e:null},e.cacheFunctionTable=function(t,n){var e=t.split(":"),r=e[0],o=e[1];o!=null&&(this.$2.set(r,t),this.$3.set(t,n))},e.getFunctionTableFromCache=function(t){return this.$3.get(t)};var t=e.prototype;return t.get=function(t){var e=this.$1.get(t);if(typeof e=="string"){var n=o("WebBloksScriptParser").parse(e),r=function(r){var e=s(r,t);e!=null&&r.setBaseSourceMapNode(e);for(var o=arguments.length,a=new Array(o>1?o-1:0),i=1;i<o;i++)a[i-1]=arguments[i];var l=r.execute(n,a);return e!=null&&r.setBaseSourceMapNode(null),l};return this.$1.set(t,r),r}return o("WebBloksUtils").nullthrows(e,"Script not found in FunctionTable: "+t)},t.entries=function(){return this.$1.entries()},t.isEmpty=function(){return this.$1.size===0},t.combine=function(n){return new e().loadEntries(n.$1).loadEntries(this.$1)},t.loadEntries=function(t){var e=this;return t.forEach(function(t,n){e.$1.set(n,t)}),this},t.equalsTo=function(t){return o("WebBloksUtils").deepEquals(Array.from(this.$1.keys()),Array.from(t.$1.keys()))},e})();e.$2=new Map,e.$3=new Map;function s(e,t){var n=e.getSourceMapNode();return null}l.WebBloksFunctionTableManager=e}),98);
__d("WebBloksConstants",[],(function(t,n,r,o,a,i){var e="bk.components.internal.Merge",l="bk.components.internal.MergeWithBind",s="bk.components.internal.Shadow",u="bk.components.internal.Action",c="bk.components.Flexbox",d="flex",m="bk.components.Image",p="bk.components.Collection",_="bk.components.Slider",f="bk.components.screen.Wrapper",g="bk.components.screen.ScreenWrapper",h="_style",y="child_templates",C="$DESCENDANT_HAS_BIND",b="on_bind",v="on_reflow",S=13,R=32,L=37,E=39,k="bkContextKeyControllerAssociatedObject",I="textInputAssociatedObject",T="tooltipVisibilityAssociatedObject",D='system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif';i.BK_INTERNAL_MERGE=e,i.BK_INTERNAL_MERGE_WITH_BIND=l,i.BK_INTERNAL_SHADOW=s,i.BK_INTERNAL_ACTION=u,i.BK_FLEXBOX=c,i.BK_FLEX=d,i.BK_IMAGE=m,i.BK_COLLECTION=p,i.BK_SLIDER=_,i.BK_SCREEN_WRAPPER_LEGACY=f,i.BK_SCREEN_WRAPPER=g,i.BK_STYLE_ATTR=h,i.CHILD_TEMPLATES=y,i.DESCENDANT_HAS_BIND=C,i.ON_BIND=b,i.ON_REFLOW=v,i.KEY_RETURN=S,i.KEY_SPACE=R,i.KEY_LEFT=L,i.KEY_RIGHT=E,i.CONTROLLER_ASSOCIATED_OBJECT=k,i.TEXT_INPUT_ASSOCIATED_OBJECT=I,i.TOOLTIP_VISIBILITY_ASSOCIATED_OBJECT=T,i.WEBBLOKS_DEFAULT_FONT_FAMILY=D}),66);
__d("WebBloksExternalVariables",[],(function(t,n,r,o,a,i){function e(e){var t=e.dataPropsEntries,n=new Map;for(var r of t){var o=r.id,a=r.name;n.set(a,o)}return n}function l(e,t){var n=new Map;if(!e)return n;for(var r of e.entries()){var o=r[0],a=r[1],i=t.get(o);i!=null&&n.set(i,a)}return n}i.getProcessedDataPropEntries=e,i.getProcessedExternalVariables=l}),66);
__d("WebBloksInterpreterEnvironment",["Promise","WebBloksConstants","WebBloksErrors","WebBloksExternalVariables","WebBloksPayloadParser","WebBloksScopedIds","WebBloksScriptDebuggingUtils","WebBloksScriptExecutor","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e,s=(function(){function t(t,r,a){var i=this;this.callArgsStack=[],this.splicesStack=[],this.scope=o("WebBloksUtils").EMPTY_KEY_PATH,this.execute=function(e,t){try{return i.bloksContext.treeManager.beginUpdates(),o("WebBloksScriptExecutor").execute(i,e,t)}finally{i.bloksContext.treeManager.endUpdates()}},this.executeCatch=function(e,t){try{return i.execute(e,t)}catch(t){o("WebBloksScriptDebuggingUtils").logScriptError(i.objectSet,t,e,i)}},this.executeOnNextTick=function(t,r){(e||(e=n("Promise"))).resolve().then(function(){i.execute(t,r)}).catch(function(e){return o("WebBloksScriptDebuggingUtils").logScriptError(i.objectSet,e,t,i)})},this.bloksContext=t,this.$1=r,this.$3=a}var r=t.prototype;return r.getResources=function(){var e;return(e=this.resources)!=null?e:this.bloksContext.treeManager.getCommittedTreeResources()},r.getScriptMode=function(){return this.$3},r.requireResources=function(){return o("WebBloksUtils").nullthrows(this.getResources())},r.readVariable=function(t){var e,n=this.requireResources().variables.get(t);return(e=this.variableAccessLog)==null||e.add(t),n},r.readExpandedVariable=function(t){var e,n=this.getExpandedVariablesFromEnvOrTree(),r=n.get(t);return(e=this.variableAccessLog)==null||e.add(t),r},r.readParameter=function(t){return this.requireResources().parameters[t]},r.readValue=function(t){var e=this.requireResources().values.get(t);if(!e)throw new(o("WebBloksErrors")).WebBloksError("Value for referenced id "+t+" not found!");return this.execute(e.expression,o("WebBloksUtils").EMPTY_ARRAY)},r.getExpandedVariablesFromEnvOrTree=function(){var e;return(e=this.expandedVariablesOverride)!=null?e:this.bloksContext.treeManager.getExpandedVariables()},r.readManifestEntry=function(t){var e=this.requireResources().variableDefinitions.get(t);if(e==null)throw new(o("WebBloksErrors")).WebBloksError("Data manifest for referenced internal variable id "+t+" not found!");return e},r.readPayload=function(t){var e=this.requireResources().payloads.get(t);if(e==null)throw new(o("WebBloksErrors")).WebBloksError("Payload for referenced embedded payload id "+t+" not found!");return e},r.executeActionPayload=function(t,n){var e=this.bloksContext,r=e.objectSet,a=e.treeManager,i=t.action,l=t.tree,s={layout:{bloks_payload:t}};a.beginUpdates();try{var u,c;if(i!=null){u=i;var d=null;c=o("WebBloksPayloadParser").parseAction(s,r.environment.traversalKeys,d)}else if(l!=null){var m=l[o("WebBloksConstants").BK_INTERNAL_ACTION];u=m.handler,c=o("WebBloksPayloadParser").parseTree(s,r.environment.traversalKeys)}else throw new(o("WebBloksErrors")).WebBloksError("No bloks action found in response");var p=o("WebBloksExternalVariables").getProcessedDataPropEntries(c.resources),_=o("WebBloksExternalVariables").getProcessedExternalVariables(n,p);a.synchronouslyAddTreeResources(c,_);var f=this.createBloksModelScopedContext(o("WebBloksUtils").EMPTY_KEY_PATH);return f.execute(u,[this.bloksContext])}finally{a.endUpdates()}},r.$4=function(){var e=null,n=new t(this.bloksContext,e);return n.callArgsStack=this.callArgsStack,n.resources=this.resources,n.expandedVariablesOverride=this.expandedVariablesOverride,n.variableAccessLog=this.variableAccessLog,n},r.createBloksModelScopedContext=function(t){if(t===this.scope)return this;var e=this.$4();return e.scope=t!=null?t:o("WebBloksUtils").EMPTY_KEY_PATH,e},r.createScopedContext=function(){var e=this.$4();return e.scope=o("WebBloksScopedIds").extendKeyPath(this.scope),e},r.getBaseSourceMapNode=function(){var e,t;return(e=this.$1)==null?void 0:e.makeCopyWithNewParent((t=this.$1)==null?void 0:t.getParent())},r.setBaseSourceMapNode=function(t){this.$1=t},r.getSourceMapNode=function(){return this.$2},r.setSourceMapNode=function(t){this.$2=t},t})();Object.defineProperties(s.prototype,{actions:{get:function(){return this.bloksContext.objectSet.environment.actions},enumerable:!1},objectSet:{get:function(){return this.bloksContext.objectSet},enumerable:!1},treeManager:{get:function(){return this.bloksContext.treeManager},enumerable:!1}}),l.default=s}),98);
__d("WebBloksLegacyTraverser",["WebBloksConstants","WebBloksErrors","WebBloksMutations","WebBloksUpdateTraversal","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){return s(e.snapshotPendingComponent(),new(o("WebBloksMutations")).ServerIdTarget(t),n)}function s(e,t,n){var r;return e.traverse(function(e){return t.targets(e)?(r=e,!0):!1},n),r}function u(e,t,n,r){var a=e.snapshotPendingComponent(),i=null,l=o("WebBloksUpdateTraversal").runUpdateTraversal(a,{apply:function(r){if(r.getId()===t&&(i=r),d(r,t)&&(i=r),i){var e=r.get(o("WebBloksConstants").ON_REFLOW);e!=null&&n(e,[r])}return r},onUpdatesApplied:function(t){i===t&&(i=null)}},r);if(l!==a)throw new(o("WebBloksErrors")).WebBloksError("Reflow traversal produced an updated componnent")}function c(e,t,n,r){var a=e.snapshotPendingComponent(),i=null,l=o("WebBloksUpdateTraversal").runUpdateTraversal(a,{apply:function(r){if(r.getId()===t&&(i=r),r.shadowParents)for(var e of r.shadowParents)e.id===t&&(i=r),i&&e.reduce&&n(e.reduce,o("WebBloksUtils").EMPTY_ARRAY);return r},onUpdatesApplied:function(t){i===t&&(i=null)}},r);if(l!==a)throw new(o("WebBloksErrors")).WebBloksError("Reduce traversal produced an updated componnent")}function d(e,t){var n,r;return(n=(r=e.shadowParents)==null?void 0:r.find(function(e){return e.id===t}))!=null?n:null}function m(e,t,n){var r;return t.snapshotPendingComponent().traverse(function(e){var t=d(e,n);return t?(r=t.init_state,!0):!1},e),r}l.findComponentByServerId=e,l.findComponent=s,l.reflow=u,l.reduce=c,l.getStateInitializer=m}),98);
__d("WebBloksExpressionParser",["WebBloksScript","WebBloksSourceMapNode","WebBloksSourceMapPayloadMetadata","WebBloksSourceMapRootNode"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=null;return new(o("WebBloksScript")).WebBloksScript(e,r)}function s(e){for(var t=e==null?void 0:e.getSourceMapID(),n=e==null?void 0:e.getLoggingID(),o=e,a=null,i=[];o!=null;){if(i.push(o.getTreePath()),o instanceof r("WebBloksSourceMapRootNode")){a=o.getPayloadPath();break}o=o.getParent()}var l=i.toReversed().flat(1);return null}l.makeWebBloksExpression=e}),98);
__d("WebBloksScriptString",[],(function(t,n,r,o,a,i){function e(e){return e}function l(e){return e}function s(e){return typeof e=="string"}i.castWebBloksScriptStringFromString=e,i.castWebBloksScriptStringToString=l,i.isWebBloksScriptString=s}),66);
__d("WebBloksModel",["WebBloksConstants","WebBloksErrors","WebBloksExpressionParser","WebBloksScript","WebBloksScriptParser","WebBloksScriptString","WebBloksUpdateTraversal","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t,n){n===void 0&&(n=o("WebBloksUtils").getNextGlobalBloksClientId()),this.$isBloksModel=!0,this.clientId=n,this.styleId=e,this.$1=t,this.uiMutableContainer={}}var t=e.prototype;return t.getId=function(){var e=this.$1.id;return e==null?null:String(e)},t.get=function(t){return this.$1[t]},t.set=function(t,n){this.$1[t]=n},t.getSubNode=function(t){var e=this.get(t);return e},t.getExpression=function(t){var e=this.get(t),n=e;if(e==null||e instanceof o("WebBloksScript").WebBloksScript)return e;if(o("WebBloksScriptString").isWebBloksScriptString(e)&&(e=o("WebBloksScriptParser").parse(e)),Array.isArray(e)||typeof e=="function"){if(e=o("WebBloksExpressionParser").makeWebBloksExpression(e,this,[this.styleId,t]),this.set(t,e),this.sourceModel&&n===this.sourceModel.get(t)){var r;(r=this.sourceModel)==null||r.set(t,e)}return e}return null},t.getSubNodes=function(t){var e;return(e=this.get(t))!=null?e:o("WebBloksUtils").EMPTY_ARRAY},t.getChildren_DEPRECATED=function(t){t===void 0&&(t="children");var e=this.getSubNodes(t);return e},t.getStyle=function(t){var e=this.getSubNode(o("WebBloksConstants").BK_STYLE_ATTR);return s(e)&&(e==null?void 0:e.styleId)===t?e:null},t.getValues=function(){return this.$1},t.cloneValues=function(){var e=babelHelpers.extends({},this.$1),t=this.getSubNodes("children");return Array.isArray(t)&&t.length!==0&&(e.children=t.slice()),e},t.makeCopy=function(n){var t=new e(this.styleId,this.cloneValues(),this.clientId);return n&&Object.assign(t.$1,n),t.uiMutableContainer=this.uiMutableContainer,t.shadowParents=this.shadowParents,t.keyPath=this.keyPath,t.sourceModel=this.sourceModel,t.sourceMapNode=this.sourceMapNode,t},t.makeBoundCopy=function(){var e=this.makeCopy();return e.sourceModel=this,e},t.makeCopyWithKeypath=function(t,n){var e=this.makeCopy();return e.clientId!==t&&(e.uiMutableContainer={}),e.clientId=t,e.keyPath=n,e},t.makeDeepCopyWithNewClientIds=function(n,r){return o("WebBloksUpdateTraversal").runUpdateTraversal(this,{apply:function(r){return e.makeCopyWithNewClientId(r,n)},onUpdatesApplied:function(t){}},r)},e.makeCopyWithNewClientId=function(n,r){var t=new e(n.styleId,n.cloneValues());return t.shadowParents=n.shadowParents,t.keyPath=r,t.sourceMapNode=n.sourceMapNode,t},t.traverse=function(t,n){if(t(this))return!0;var e=n[this.styleId];if(e==null)return!1;var r=e.subnodes,o=e.plural_subnodes;if(r)for(var a of r){var i=this.getSubNode(a);if(s(i)&&i.traverse(t,n))return!0}if(o)for(var l of o){var u=this.getSubNodes(l);if(Array.isArray(u)){for(var c of u)if(s(c)&&c.traverse(t,n))return!0}}return!1},t.toJSON=function(){var e,t=Object.entries(this.$1).filter(function(e){var t=e[0];return t[0]!=="$"}).map(function(e){var t=e[0],n=e[1];return s(n)?[t,n.toJSON()]:Array.isArray(n)&&n[0]&&s(n[0])?[t,n.map(function(e){return e.toJSON()})]:[t,n]});return e={},e[this.styleId]=Object.fromEntries(t),e},e})();function s(e){return e!=null&&(e==null?void 0:e.$isBloksModel)===!0}l.WebBloksModel=e,l.isWebBloksModel=s}),98);
__d("WebBloksParseResult",[],(function(t,n,r,o,a,i){var e=function(t,n,r){this.unboundModel=t,this.resources=n,this.loggingID=r};i.default=e}),66);
__d("WebBloksPayloadParser",["WebBloksErrors","WebBloksModel","WebBloksModelParser","WebBloksParseResult","WebBloksSourceMapNode","WebBloksSourceMapPayloadMetadata","WebBloksSourceMapRootNode","WebBloksUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var a,i,l,s=e==null||(a=e.layout)==null?void 0:a.bloks_payload,u=(i=s.error_attribution)==null?void 0:i.logging_id,c=(l=s.error_attribution)==null?void 0:l.source_map_id;if(s.action==null)throw new(o("WebBloksErrors")).WebBloksError("Invalid Bloks payload received from server. Action is expected but is missing:\n\n"+JSON.stringify(s));var d=new(o("WebBloksModel")).WebBloksModel("-1",{}),m=o("WebBloksModelParser").parseBloksTreeResources(s,d,t);return new(r("WebBloksParseResult"))(d,m,u)}function s(e,t,n){var a,i,l,s=e==null||(a=e.layout)==null?void 0:a.bloks_payload,u=o("WebBloksUtils").cast(s.tree),c=(i=s.error_attribution)==null?void 0:i.logging_id,d=(l=s.error_attribution)==null?void 0:l.source_map_id;if(u==null)throw new(o("WebBloksErrors")).WebBloksError("Invalid Bloks payload received from server. Tree is expected but is missing:\n\n"+JSON.stringify(s));var m=null,p=o("WebBloksModelParser").parseBloksModelFromJSON(u,t,m),_=o("WebBloksModelParser").parseBloksTreeResources(s,p,t);return new(r("WebBloksParseResult"))(p,_,c)}l.parseAction=e,l.parseTree=s}),98);
__d("WebBloksScopedIds",["WebBloksUtils"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){this.scopedClientIdToClientIdMap=new Map}var t=e.prototype;return t.createScopedClientId=function(t,n){return t+"/"+n},t.registerOrGetClientIdForScopedId=function(t,n){var e=this.createScopedClientId(t,n),r=this.scopedClientIdToClientIdMap.get(e);if(r!==void 0)return r;var a=o("WebBloksUtils").getNextGlobalBloksClientId();return this.scopedClientIdToClientIdMap.set(e,a),a},t.getScopedClientId=function(t,n){return this.registerOrGetClientIdForScopedId(t.clientId,n)},t.copyModelWithKeyPath=function(t,n,r){return t.makeCopyWithKeypath(this.getScopedClientId(t,r),n)},e})();function s(e,t,n,r){return c(t,u(e.slice(0,n),r))}function u(e,t){var n=t==="INTERNAL_VARIABLE"?"/":"|",r=[];for(var o of e)r.push(n),r.push(o);return r.join("")}function c(e,t){return e+"#"+t}function d(e,t){t===void 0&&(t=null);var n=e!=null?e.slice():[];return n.push(t!=null?t:o("WebBloksUtils").getNextGlobalBloksClientId()),n}l.ClientIdToScopedIdMapper=e,l.getScopedVariableIdAtDepth=s,l.buildKeypathBase=u,l.buildScopedVariableIdentifier=c,l.extendKeyPath=d}),98);
__d("WebBloksTreeResources",["WebBloksFunctionTableManager","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t,n,r,o,a,i,l,s){this.$1=!0,this.variableDefinitions=e!=null?e:[],this.payloads=t!=null?t:new Map,this.dataPropsEntries=n!=null?n:[],this.componentQueries=r!=null?r:[],this.functionTable=o,this.ftDeclare=a,this.ftInclude=i,this.values=s!=null?s:[],this.templates=l!=null?l:new Map}var t=e.prototype;return t.setShouldCommitPublishStateUpdates=function(t){t===void 0&&(t=!0),this.$1=t},t.shouldCommitPublishStateUpdates=function(){return this.$1},t.clone=function(){return new e(this.variableDefinitions,this.payloads,this.dataPropsEntries,this.componentQueries,this.functionTable,this.ftDeclare,this.ftInclude,this.templates,this.values)},e.empty=function(){return new e},e})(),s=(function(){function e(e,t,n,r,a,i,l){e===void 0&&(e=new Map),t===void 0&&(t=new Map),n===void 0&&(n=new Map),r===void 0&&(r=o("WebBloksUtils").EMPTY_OBJECT),a===void 0&&(a=new(o("WebBloksFunctionTableManager")).WebBloksFunctionTableManager),i===void 0&&(i=new Map),l===void 0&&(l=new Map),this.variableDefinitions=e,this.payloads=t,this.variables=n,this.parameters=r,this.functionTable=a,this.values=i,this.templates=l}var t=e.prototype;return t.withUpdatedEntries=function(n,r){return!n&&!r?this:new e(n!=null?n:this.variableDefinitions,this.payloads,r!=null?r:this.variables,this.parameters,this.functionTable,this.values,this.templates)},t.withUpdatedParameters=function(n){return!n||o("WebBloksUtils").isEmptyObject(n)&&o("WebBloksUtils").isEmptyObject(this.parameters)?this:new e(this.variableDefinitions,this.payloads,this.variables,n,this.functionTable,this.values,this.templates)},t.withVariableUpdates=function(n){var t=new Map(this.variables);return o("WebBloksUtils").putAll(t,n),new e(this.variableDefinitions,this.payloads,t,this.parameters,this.functionTable,this.values,this.templates)},t.withPayloadUpdates=function(n){if(n.size===0)return this;var t=new Map(this.payloads);return o("WebBloksUtils").putAll(t,n),new e(this.variableDefinitions,t,this.variables,this.parameters,this.functionTable,this.values,this.templates)},t.withFunctionTableUpdates=function(n,r,a){var t=new(o("WebBloksFunctionTableManager")).WebBloksFunctionTableManager(n!=null?n:o("WebBloksUtils").EMPTY_OBJECT);return r!=null&&o("WebBloksFunctionTableManager").WebBloksFunctionTableManager.cacheFunctionTable(r,t),a!=null&&(t=t.combine(o("WebBloksUtils").nullthrows(o("WebBloksFunctionTableManager").WebBloksFunctionTableManager.getFunctionTableFromCache(a),"Shared bundle not found: "+a))),t=t.combine(this.functionTable),new e(this.variableDefinitions,this.payloads,this.variables,this.parameters,t,this.values,this.templates)},t.withValueUpdates=function(n){if(n.length===0)return this;var t=new Map;return n.forEach(function(e){t.set(e.id,e)}),new e(this.variableDefinitions,this.payloads,this.variables,this.parameters,this.functionTable,t,this.templates)},t.withTemplateUpdates=function(n){if(n.size===0)return this;var t=new Map(this.templates);return o("WebBloksUtils").putAll(t,n),new e(this.variableDefinitions,this.payloads,this.variables,this.parameters,this.functionTable,this.values,t)},t.equalsTo=function(t){return this.payloads===t.payloads&&this.parameters===t.parameters&&this.variableDefinitions===t.variableDefinitions&&o("WebBloksUtils").shallowMapEqual(this.variables,t.variables)&&this.functionTable.equalsTo(t.functionTable)&&o("WebBloksUtils").shallowMapEqual(this.values,t.values)&&o("WebBloksUtils").shallowMapEqual(this.templates,t.templates)},e})();l.WebBloksTreeResources=e,l.WebBloksTreeResourcesState=s}),98);
__d("WebBloksScopedComponentQueryDefinition",["WebBloksErrors","WebBloksLegacyTraverser","WebBloksMutations","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){return t.map(function(t){return s(e,t,n)})}function s(e,t,n){var r=new Map;for(var a of Object.entries(t.targets)){var i=a[0],l=a[1],s=o("WebBloksLegacyTraverser").findComponent(e,new(o("WebBloksMutations")).ServerIdTarget(l),n);if(s!=null){var u,c={serverId:o("WebBloksUtils").nullthrows(s.getId()),clientId:s.clientId,keyPath:(u=s.keyPath)!=null?u:[]};r.set(i,c)}else throw new(o("WebBloksErrors")).WebBloksError("Failed to find async component container for "+t.id)}return{id:t.id,appIdExpression:t.app_id_expr,paramsExpression:t.params,clientParamsExpression:t.client_params,dependencies:t.deps,targets:r,cacheTTLExpression:t.cache_ttl_expr,isScoped:t.is_scoped}}function u(e,t,n){var r=new Map;for(var a of(i=(l=t.targets)==null?void 0:l.entries())!=null?i:[]){var i,l,s=a[0],u=a[1],c=o("WebBloksLegacyTraverser").findComponent(e,new(o("WebBloksMutations")).ServerIdTarget(u.serverId),n);if(c!=null){var d={serverId:o("WebBloksUtils").nullthrows(c.getId()),clientId:c.clientId,keyPath:c.keyPath};r.set(s,d)}else throw new(o("WebBloksErrors")).WebBloksError("Failed to find async component container for "+t.id)}return babelHelpers.extends({},t,{targets:r})}l.generateTreeScopedComponentQueryDefs=e,l.generateTreeScopedComponentQueryDefFromScopedDef=u}),98);
__d("WebBloksMutations",["WebBloksConstants","WebBloksModel"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.id=e}var t=e.prototype;return t.targets=function(t){return t.clientId===this.id},e})(),s=(function(){function e(e){this.id=e}var t=e.prototype;return t.targets=function(t){return t.getId()===this.id},e})(),u=(function(){function e(e,t){this.id=e,this.traversalKeys=t}var t=e.prototype;return t.targets=function(t){var e=t.getChildren_DEPRECATED();for(var n of e)if(n.getId()===this.id)return!0;var r=this.traversalKeys[t.styleId];if(!r)return!1;var a=r.subnodes,i=r.plural_subnodes;if(i){for(var l of i)for(var s of t.getChildren_DEPRECATED(l))if((s==null?void 0:s.getId())===this.id)return!0;if(a)for(var u of a){var c=t.getSubNode(u);if(c instanceof o("WebBloksModel").WebBloksModel&&(c==null?void 0:c.getId())===this.id)return!0}}return!1},e})();function c(t,n,r,o){t.enqueueUpdateOperation(new e(n.clientId),{update:function(t){t.set(r,o)},shouldUpdate:function(t){return t.get(r)!==o}})}function d(e,t,n,r){typeof r!="number"&&p(e,"addChildToContainer expected number, got %s: %s",typeof r,r);var a=n.styleId===o("WebBloksConstants").BK_INTERNAL_MERGE?n.getChildren_DEPRECATED():[n];a.forEach(function(n,o){m(e,t,n,r>=0?r+o:r)})}function m(t,n,r,o){t.enqueueUpdateOperation(new e(n.clientId),{update:function(t){var e=o===-1?t.getChildren_DEPRECATED().length:o;t.getChildren_DEPRECATED().splice(e,0,r)}})}function p(e,t){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(n=e.bloksContext.objectSet.environment.logger).warn.apply(n,[t].concat(o))}l.ClientIdTarget=e,l.ServerIdTarget=s,l.ChildServerIdTarget=u,l.updateProperty=c,l.addChildToContainer=d,l.warn=p}),98);
__d("WebBloksUpdateTraversal",["WebBloksConstants","WebBloksModel"],(function(t,n,r,o,a,i,l){"use strict";function e(t,n,r){var a=n.apply(t),i=!!a.get(o("WebBloksConstants").ON_BIND),l=r[a.styleId];if(l){if(l.subnodes)for(var s of l.subnodes){var u=a.getSubNode(s);if(u instanceof o("WebBloksModel").WebBloksModel){var c=e(u,n,r);c!==u&&(a===t&&(a=t.makeCopy()),a.set(s,c)),i=i||c.get(o("WebBloksConstants").DESCENDANT_HAS_BIND)!==!1}}if(l.plural_subnodes)for(var d of l.plural_subnodes){for(var m=a.getChildren_DEPRECATED(d),p=m,_=0;_<m.length;_++){var f=m[_];if(f){var g=e(f,n,r);g!==f&&(p===m&&(p=m.slice()),p[_]=g),i=i||g.get(o("WebBloksConstants").DESCENDANT_HAS_BIND)!==!1}}p!==m&&(a===t&&(a=t.makeCopy()),a.set(d,p))}}return a!==t&&a.set(o("WebBloksConstants").DESCENDANT_HAS_BIND,i),n.onUpdatesApplied(a),a}l.runUpdateTraversal=e}),98);
__d("WebBloksModelParser",["WebBloksConstants","WebBloksModel","WebBloksScopedComponentQueryDefinition","WebBloksScriptParser","WebBloksSourceMapNode","WebBloksSourceMapPayloadMetadata","WebBloksSourceMapRootNode","WebBloksTreeResources","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e=["child"];function s(t,n,r){var a=o("WebBloksUtils").nullthrows(o("WebBloksUtils").getFirstKey(t),"not a valid bloksmodel"),i=babelHelpers.extends({},t[a]),l=new(o("WebBloksModel")).WebBloksModel(a,i),u=l.getExpression(o("WebBloksConstants").ON_BIND)!=null;if(a===o("WebBloksConstants").BK_INTERNAL_SHADOW){var c=i.child,d=babelHelpers.objectWithoutPropertiesLoose(i,e);d.id=String(d.id);var m=null,p=s(o("WebBloksUtils").cast(c),n,m);return p.shadowParents?p.shadowParents.unshift(d):p.shadowParents=[d],u=u||p.get(o("WebBloksConstants").DESCENDANT_HAS_BIND),p}var _=n[a];if(_!=null){var f=_.subnodes,g=_.plural_subnodes;if(f){for(var h of f)if(i[h]!=null){var y=null,C=s(i[h],n,y);i[h]=C,u=u||C.get(o("WebBloksConstants").DESCENDANT_HAS_BIND)}}if(g){var b=function(t){i[t]!=null&&(i[t]=i[t].map(function(e,t){var r=null,a=s(e,n,r);return u=u||a.get(o("WebBloksConstants").DESCENDANT_HAS_BIND),a}))};for(var v of g)b(v)}}return i[o("WebBloksConstants").DESCENDANT_HAS_BIND]=u,l}function u(e,t,n){var r=e.component_queries,a=r===void 0?[]:r,i=e.embedded_payloads,l=i===void 0?[]:i,u=e.data,c=u===void 0?[]:u,d=e.props,m=d===void 0?[]:d,p=e.ft,_=p===void 0?{}:p,f=e.values,g=f===void 0?[]:f,h=e.templates,y=h===void 0?{}:h,C=e.ft_declare,b=e.ft_include;return new(o("WebBloksTreeResources")).WebBloksTreeResources(c,new Map(l.map(function(e){return[e.id,e]})),m,o("WebBloksScopedComponentQueryDefinition").generateTreeScopedComponentQueryDefs(t,a,n),_,C,b,new Map(Object.entries(y).map(function(e){var r=e[0],a=e[1];return[r,s(o("WebBloksUtils").cast(a),n,t.sourceMapNode)]})),g.map(function(e){return babelHelpers.extends({},e,{expression:o("WebBloksScriptParser").parse(e.expression)})}))}l.parseBloksModelFromJSON=s,l.parseBloksTreeResources=u}),98);
__d("WebBloksScriptDebuggingUtils",["WebBloksAsyncActions","WebBloksScriptPrinter","WebDriverConfig"],(function(t,n,r,o,a,i,l){function e(e,t,n,o){var a=t==null?void 0:t.stackFrame;r("WebDriverConfig").isJestE2ETestRun&&e.toastManager.enqueueSimpleToast(t.toString()),e.environment.logger.scriptError(t)}var s="com.bloks.www.bloks.error.report_to_sandbox";function u(e,t,n){e&&o("WebBloksAsyncActions").executeAsyncAction(e,s,{message:t,bloks_raw_stack_trace:n}).catch(function(){return null})}function c(e){var t=e.slice();function n(e,t){t===void 0&&(t=-1);var r=t+1;for(var o of e)Array.isArray(o)?r=n(o,r):o.lispyOffset=r;return r}return n(t),t}l.logScriptError=e,l.sendErrorToSandboxLogs=u,l.attachLispyOffsetsForWebBloksScriptNode=c}),98);
__d("WebBloksScriptTokens",[],(function(t,n,r,o,a,i){var e=function(t){this.lispyOffset=t!=null?t:0},l=(function(e){function t(t,n){var r;return r=e.call(this,n)||this,r.type="number",r.value=t,r}return babelHelpers.inheritsLoose(t,e),t})(e),s=(function(e){function t(t,n){var r;return r=e.call(this,n)||this,r.type="string",r.value=t,r}return babelHelpers.inheritsLoose(t,e),t})(e),u=(function(e){function t(t,n){var r;return r=e.call(this,n)||this,r.type="boolean",r.value=t,r}return babelHelpers.inheritsLoose(t,e),t})(e),c=(function(e){function t(t,n){var r;return r=e.call(this,n)||this,r.type="identifier",r.value=t,r}return babelHelpers.inheritsLoose(t,e),t})(e);i.WebBloksNumberToken=l,i.WebBloksStringToken=s,i.WebBloksBooleanToken=u,i.WebBloksIdentifierToken=c}),66);
__d("WebBloksBooleanUtils",[],(function(t,n,r,o,a,i){function e(e){return e===!0||e===1}function l(e){return e===!1||e===0}i.isTrue=e,i.isFalse=l}),66);
__d("WebBloksWhile",["WebBloksBooleanUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){for(;o("WebBloksBooleanUtils").isTrue(t());)n()}l.default=e}),98);
__d("WebBloksScriptExecutor",["Promise","WebBloksErrors","WebBloksScriptParser","WebBloksScriptTokens","WebBloksUtils","WebBloksWhile"],(function(t,n,r,o,a,i,l){var e;function s(e,t){var n=e.actions.get(t);if(n==null)throw new(o("WebBloksErrors")).WebBloksUnknownActionError(t);return n}var u={"bk.action.core.FuncConst":function(t,n){var e;if(n.length!==1)throw new(o("WebBloksErrors")).WebBloksScriptError("FuncConst supports only single args",t);var r=(e=t.splicesStack.at(-1))!=null?e:[];return function(e){try{for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];return e.callArgsStack.push(o),e.splicesStack.push(r),m(e,n[0])}finally{e.callArgsStack.pop(),e.splicesStack.pop()}}},"bk.action.core.Coalesce":function(t,n){for(var e of n){var r=m(t,e);if(r!=null)return r}return null},"bk.action.core.If":function(t,n){if(n.length!==2&&n.length!==3)throw new(o("WebBloksErrors")).WebBloksScriptError("If supports 2 or 3 args",t);var e=m(t,n[0]);return e?m(t,n[1]):n.length===3?m(t,n[2]):null},"bk.action.core.Pattern":function(t,n){if(n.length!==2)throw new(o("WebBloksErrors")).WebBloksScriptError("Pattern supports only two args",t);var e=m(t,n[0]),r=function(t){return m(t,p(t,n[1]))};return{case:e,expression:r}},"bk.action.core.Default":function(t,n){if(n.length!==1)throw new(o("WebBloksErrors")).WebBloksScriptError("Default supports only one arg",t);return function(e){return m(e,p(e,n[0]))}},"bk.action.core.While":function(t,n){if(n.length!==2)throw new(o("WebBloksErrors")).WebBloksScriptError("While supports only two arg",t);var e=function(){return m(t,p(t,n[0]))},a=function(){return m(t,p(t,n[1]))};return r("WebBloksWhile")(t,e,a)},"bk.action.core.GetArg":function(t,n){var e=t.callArgsStack;if(n.length!==1)throw new(o("WebBloksErrors")).WebBloksScriptError("GetArg supports only single args",t);if(e.length===0)throw new(o("WebBloksErrors")).WebBloksScriptError("GetArg received no callArgs",t);var r=o("WebBloksUtils").peek(e),a=Number(n[0].value);return a>=r.length?null:r[a]},"bk.action.core.SetArg":function(t,n){var e=t.callArgsStack;if(n.length!==2)throw new(o("WebBloksErrors")).WebBloksScriptError("SetArg supports only two args",t);if(e.length===0)throw new(o("WebBloksErrors")).WebBloksScriptError("SetArg received no callArgs",t);var r=o("WebBloksUtils").peek(e),a=Number(n[0].value),i=m(t,n[1]);return r[a]=i,null},"bk.action.splice.Apply":function(t,n){t.splicesStack.push(n.slice(1));try{return _(t,m(t,n[0]),[])}finally{t.splicesStack.pop()}},"bk.action.splice.Get":function(t,n){var e=n[0].value,r=o("WebBloksUtils").nullthrows(t.splicesStack.at(-1))[e];return m(t,r)}};function c(e,t){var n=t[0],r=babelHelpers.arrayLikeToArray(t).slice(1);if(Array.isArray(n)||!(n instanceof o("WebBloksScriptTokens").WebBloksIdentifierToken))throw new(o("WebBloksErrors")).WebBloksScriptError("First arg of calls must be a token",e);var a=n.value,i=u[a];if(i)return i(e,r);if(a[0]==="@")return u["bk.action.splice.Apply"](e,[[new(o("WebBloksScriptTokens")).WebBloksIdentifierToken("bk.action.bloks.GetScript"),new(o("WebBloksScriptTokens")).WebBloksStringToken(a.slice(1))]].concat(r));var l=s(e,a),c=d(e,r),m=l.apply(void 0,[e].concat(c));return m}function d(e,t){return t.map(function(t){return m(e,t)})}function m(e,t){if(Array.isArray(t))return c(e,t);if(t instanceof o("WebBloksScriptTokens").WebBloksIdentifierToken){var n=t.value;if(n==="null")return null;if(n[0]==="&")return u["bk.action.splice.Get"](e,[new(o("WebBloksScriptTokens")).WebBloksNumberToken(parseInt(n.slice(1),10))]);throw new(o("WebBloksErrors")).WebBloksScriptError('Unexpected identifier "'+n+'" in argument list')}return t.value}function p(e,t){var n=t[0],r=t[1];if(n.value!=="bk.action.core.FuncConst")throw new(o("WebBloksErrors")).WebBloksScriptError("Expected FuncConst",e);return r}function _(e,t,n){if(typeof t=="function")return t.apply(void 0,[e].concat(n));var r=typeof t=="string"?o("WebBloksScriptParser").parse(t):o("WebBloksUtils").cast(t);try{return e.callArgsStack.push(n),c(e,r)}finally{e.callArgsStack.pop()}}function f(e,t,n){var r=n.slice();return _(e,t,r)}l.execute=f}),98);
__d("WebBloksScriptParser",["WebBloksErrors","WebBloksScriptDebuggingUtils","WebBloksScriptString","WebBloksScriptTokens"],(function(t,n,r,o,a,i,l){var e=new(o("WebBloksScriptTokens")).WebBloksBooleanToken(!0),s=new(o("WebBloksScriptTokens")).WebBloksBooleanToken(!1),u=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function c(e){switch(e){case" ":case"\n":case"\r":case"	":case",":return!0;default:return!1}}function d(e){var t=o("WebBloksScriptString").castWebBloksScriptStringToString(e),n=[],r=[n],a=0;function i(){for(;c(t[a]);)a++}for(;a<t.length;){i();var l=t[a];switch(l){case"(":n=[],r.push(n),a++;break;case")":{var s=r.pop();if(n=r[r.length-1],!n)throw new(o("WebBloksErrors")).WebBloksScriptParseError(a,"Unexpected ')'");n.push(s),a++;break}case'"':{for(var u=++a,d=!1;;){var _=t.indexOf('"',a);if(_===-1)throw new(o("WebBloksErrors")).WebBloksScriptParseError(u,"Unterminated string");var f=t.indexOf("\\",a);if(_<f||f===-1){a=_;break}a=f+2,d=!0}var g=t.substring(u,a);n.push(new(o("WebBloksScriptTokens")).WebBloksStringToken(d?m(u,g):g)),a++;break}default:for(var h=a;;){var y=t[++a];if(c(y)||y===")"||y==="("||y===void 0){n.push(p(t.substring(h,a)));break}}}if(r.length===1)break}var C=n[0];return C=o("WebBloksScriptDebuggingUtils").attachLispyOffsetsForWebBloksScriptNode(C),C}function m(e,t){return JSON.parse('"'+t+'"')}function p(t){if(t==="true")return e;if(t==="false")return s;if(u.test(t)){var n=parseFloat(t);return t.indexOf(".")===-1&&(n>=Number.MAX_SAFE_INTEGER||n<=Number.MIN_SAFE_INTEGER)?new(o("WebBloksScriptTokens")).WebBloksStringToken(t):new(o("WebBloksScriptTokens")).WebBloksNumberToken(n)}return new(o("WebBloksScriptTokens")).WebBloksIdentifierToken(t)}l.parse=d}),98);
__d("WebBloksScriptPrinter",["WebBloksScriptParser"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return typeof e=="string"&&(e.startsWith("(")||e.startsWith(" (")||e.startsWith("	("))&&e.endsWith(")")}function s(e){if(typeof e=="function")return"<function>";var t=Array.isArray(e)?e:o("WebBloksScriptParser").parse(e);return u(0,t)}function u(e,t){if(Array.isArray(t)){var n=t.every(function(e){return!Array.isArray(e)});if(n)return"("+t.map(function(e){return u(0,e)}).join(", ")+")";var r="("+String(t[0].value);return t.slice(1).forEach(function(t){r+="\n"+"".padEnd(e+2)+u(e+2,t)}),r+="\n"+"".padEnd(e)+")",r}return typeof t=="object"&&t!=null?t.type==="string"?JSON.stringify(t.value):String(t.value):String(t)}l.looksLikeAScript=e,l.prettyPrint=s}),98);
__d("WebBloksLayout",["WebBloksCSSUtils","WebBloksEnvironmentContext","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(7),n=o("WebBloksEnvironmentContext").useWebBloksEnvironment().isRtl,r;t[0]!==e._style?(r=o("WebBloksUtils").isStyle(e._style,"flex"),t[0]=e._style,t[1]=r):r=t[1];var a=r,i;if(t[2]!==n||t[3]!==e._style||t[4]!==e.alpha||t[5]!==a){if(i={},e.alpha!=null&&(i.opacity=e.alpha),a){var l=o("WebBloksUtils").nullthrows(e._style).getValues();for(var s of Object.entries(l)){var u=s[0],d=s[1];if(!c(u)){var m=o("WebBloksCSSUtils").getRtlAwareCssAttr(o("WebBloksUtils").toCamel(u),n);e:switch(m){case"grow":{i.flexGrow=String(d);break e}case"shrink":{i.flexShrink=String(d);break e}case"alignSelf":{i.alignSelf=o("WebBloksUtils").toHyphen(String(d));break e}case"justifyContent":{i.justifyContent=o("WebBloksUtils").toHyphen(String(d));break e}case"position_type":case"positionType":{i.position=String(d);break e}case"bottom":case"left":case"right":case"top":{i[m]=o("WebBloksUtils").toPx(String(d)),i.position="absolute";break e}case"aspectRatio":break e;case"ntDebugMetadataV2":break e;case"width":case"height":case"minHeight":case"maxHeight":case"minWidth":case"maxWidth":case"marginTop":case"marginRight":case"marginBottom":case"marginLeft":case"paddingTop":case"paddingRight":case"paddingBottom":case"paddingLeft":{i[m]=o("WebBloksUtils").toPx(o("WebBloksUtils").toHyphen(String(d)));break e}case"transform":{i[m]=String(d);break e}default:i[m]=o("WebBloksUtils").toPx(o("WebBloksUtils").toHyphen(String(d)))}}}}var p=o("WebBloksUtils").isStyle(e._style,"collection");if(p){var _=o("WebBloksUtils").nullthrows(e._style).getValues();for(var f of Object.entries(_)){var g=f[0],h=f[1];if(!c(g)){var y=o("WebBloksUtils").toCamel(g);e:switch(y){case"isSticky":{h===!0&&(i.position="sticky");break e}case"onAppear":case"onDisappear":break e;case"height":{i.height=o("WebBloksUtils").toPx(String(h));break e}case"width":{i.width=o("WebBloksUtils").toPx(String(h));break e}case"ntDebugMetadataV2":break e;default:i[y]=o("WebBloksUtils").toPx(o("WebBloksUtils").toHyphen(String(h)))}}}}o("WebBloksUtils").isStyle(e._style,"ig.style.SearchStyle")&&(i.width="100%"),t[2]=n,t[3]=e._style,t[4]=e.alpha,t[5]=a,t[6]=i}else i=t[6];return i}function c(e){return e[0]==="$"||e==="id"||e==="on_bind"}l.default=u}),98);
__d("WebBloksStyle",["WebBloksCSSUtils","WebBloksLayout","WebBloksWrapper","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useRef;function c(e,t,n){n===void 0&&(n=!1);var o=e.getValues(),a=u(null);e.uiMutableContainer.domNode=a;var i=n===!0?{pointerEvents:"auto",cursor:"pointer",WebkitTapHighlightColor:"transparent"}:void 0,l=babelHelpers.extends({},r("WebBloksLayout")(o),i,t),s=r("WebBloksWrapper")(e,l,a),c=s.hasWrapper,m=s.wrapper,p=s.wrapperProps,_=s.stylesFromExtensions;return _&&Object.assign(l,_),{ref:a,style:c?d:l,wrapper:m,wrapperProps:p}}var d={height:"100%",width:"100%",pointerEvents:"inherit"};function m(e){return{className:v.container,style:e}}var p;typeof p!="number"&&(p=0);function _(){return typeof p!="number"&&(p=0),++p}function f(e,t){return typeof t=="object"?[["."+e,o("WebBloksCSSUtils").styleObjectToCSS(t)]]:Object.entries(t("."+e)).map(function(e){var t=e[0],n=e[1];return[t,o("WebBloksCSSUtils").styleObjectToCSS(n)]})}function g(e){return Object.fromEntries(Object.entries(e).map(function(e){var t=e[0],n=e[1],r="wbloks_"+_();return f(r,n).forEach(function(e){var t=e[0],n=e[1];return o("WebBloksCSSUtils").insertCssRule(t+" {\n"+n+"\n}")}),[t,r]}))}function h(e){var t="wbloks_"+_()+" ";return o("WebBloksCSSUtils").insertCssRule("@keyframes "+t+" {\n"+Object.entries(e).map(function(e){var t=e[0],n=e[1];return t+" {\n"+o("WebBloksCSSUtils").styleObjectToCSS(n)+"\n }"}).join("\n")+"\n}"),t}function y(e,t){var n={};return o("WebBloksCSSUtils").insertCssRule("@supports "+C(e)+" {\n"+Object.entries(t).map(function(e){var t=e[0],r=e[1],o="wbloks_"+_();return n[t]=o,f(o,r).map(function(e){var t=e[0],n=e[1];return t+" {\n"+n+"\n}"}).join("\n")}).join("\n")+"}"),n}function C(e){var t=e.negate===!0?"not ":"";return e.type==="selector"?t+("selector("+e.selector+")"):t+("("+e.key+": "+e.value+")")}function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}var v=g({container:{boxSizing:"border-box",display:"flex",flex:"0 1 auto",flexDirection:"row",pointerEvents:"auto",position:"relative",minHeight:0,minWidth:0}});l.useStyle=c,l.getStyleProps=m,l.createStyles=g,l.keyframes=h,l.createStylesIfSupported=y,l.classNames=b,l.WebBloksStyles=v}),98);
__d("WebBloksTheme",["WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useEffect,m=u.useMemo,p={light:"light",dark:"dark"};function _(e){var t=document.documentElement;if(t!=null)switch(t.classList.remove(C,b),e){case"dark":t.classList.add(b);break;case"light":t.classList.add(C);break}}var f={getTheme:function(){return p.light}},g=s.createContext(f);function h(e){var t=o("react-compiler-runtime").c(8),n=e.children,r=e.initialTheme,a=r!=null?r:p.light,i,l;t[0]!==a?(i=function(){_(a)},l=[a],t[0]=a,t[1]=i,t[2]=l):(i=t[1],l=t[2]),d(i,l);var u;t[3]!==a?(u={getTheme:function(){return a}},t[3]=a,t[4]=u):u=t[4];var c=u,m;return t[5]!==n||t[6]!==c?(m=s.jsx(g.Provider,{value:c,children:n}),t[5]=n,t[6]=c,t[7]=m):m=t[7],m}function y(){return c(g)}var C,b,v={"error-or-destructive":["rgb(237, 73, 86)","rgb(237, 73, 86)"],"navbar-bg":["#ffffff","#000000"],"screen-wrapper-bg":["#ffffff","#000000"],separator:["rgb(219, 219, 219)","rgb(54, 54, 54)"],"primary-bg":["#ffffff","#000000"],"primary-text":["rgb(38, 38, 38)","rgb(250, 250, 250)"],"fds-gray-65":"#A4A7AB","fds-white":"#FFFFFF","fig-blue-tint-90":"#ecf0f7","fig-blue-tint-10":"#3776ff","switch-active":["hsl(214, 89%, 52%)","hsl(214, 100%, 59%)"],"media-inner-border":["rgba(0, 0, 0, 0.1)","rgba(255, 255, 255, 0.05)"],divider:["#CED0D4","#3E4042"],"always-white":"#ffffff","shadow-5":"rgba(0, 0, 0, 0.5)","fds-animation-move-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-move-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-duration-extra-short-in":"200ms","fds-duration-extra-short-out":"150ms","cds-close-handle":["#748695","#647685"],"cds-overlay-alpha-80":"rgba(28, 43, 51, 0.80)","cds-surface-background":["rgba(255, 255, 255)","rgb(28, 43, 51)"]},S=R(v);function R(e){var t={},n={},r={};Object.entries(e).forEach(function(e){var o=e[0],a=e[1],i="--wbloks-"+o;r[o]="var("+i+")",t[i]=Array.isArray(a)?a[0]:a,n[i]=Array.isArray(a)?a[1]:a});var a=o("WebBloksStyle").createStyles({lightTheme:t,darkTheme:n});return C=a.lightTheme,b=a.darkTheme,r}l.THEME=p,l.WebBloksThemeProvider=h,l.useTheme=y,l.WebBloksThemeVars=S}),98);
__d("WebBloksExtensions",[],(function(t,n,r,o,a,i){function e(e,t){if(e==null)return null;var n=[],r={};for(var o of e){var a=o.styleId,i=t.get(a);if(i&&i.reduce){var l=r[a],s=i.reduce(l,o);r[a]=s}else n.push(o)}return n.push.apply(n,Object.values(r)),n}i.processExtensions=e}),66);
__d("WebBloksViewpointContext",["react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).createContext,u=s(null),c=u;l.default=c}),98);
__d("WebBloksViewpoint",["WebBloksViewpointContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext,d=s.useEffect,m=s.useRef,p=function(t){this.element=null,this.percentVisible=null,this.state=null,Object.assign(this,t)};function _(e){var t=o("react-compiler-runtime").c(6),n=e.action,r=e.id,a=e.suppressWarnings,i=f(r),l=f(r),s;t[0]!==n||t[1]!==r||t[2]!==l||t[3]!==i||t[4]!==a?(s=function(){var e=i!==r},t[0]=n,t[1]=r,t[2]=l,t[3]=i,t[4]=a,t[5]=s):s=t[5],d(s,void 0)}function f(e){var t=m(null);return d(function(){t.current=e},void 0),t.current}function g(e){var t=o("react-compiler-runtime").c(9),n=c(r("WebBloksViewpointContext")),a=e.action,i=e.id,l=e.untrackAfterFirstAppear,s=m(null);_(e);var u;t[0]!==a||t[1]!==l||t[2]!==n?(u=function(t){a(t);var e=s.current;e&&t.state==="entered"&&l===!0&&(n==null||n.untrackElement(e))},t[0]=a,t[1]=l,t[2]=n,t[3]=u):u=t[3];var p=u,f,g;return t[4]!==p||t[5]!==i||t[6]!==n?(f=function(){var e=s.current;e&&n&&n.track(e,p,i)},g=[p,i,n],t[4]=p,t[5]=i,t[6]=n,t[7]=f,t[8]=g):(f=t[7],g=t[8]),d(f,g),s}l.ViewpointSnapshot=p,l.useViewpoint=g}),98);
__d("WebBloksWrapper",["WebBloksComponentContext","WebBloksEnvironmentContext","WebBloksExtensions","WebBloksSSRUtils","WebBloksStyle","WebBloksTheme","WebBloksViewpoint","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useLayoutEffect,m=u.useMemo,p=u.useRef,_=function(t){return t};function f(e,t,n){var r=o("WebBloksEnvironmentContext").useWebBloksEnvironment().extensionHandlers,a=o("WebBloksComponentContext").useWebBloksContext(),i=o("WebBloksTheme").useTheme().getTheme(),l=e.getValues(),u=e.getStyle("flex"),d=u==null?void 0:u.get("aspect_ratio"),f=null,g=e.getStyle("collection"),C=(g==null?void 0:g.get("on_appear"))!=null||(g==null?void 0:g.get("on_disappear"))!=null,b=e.get("extensions"),v=m(function(){return o("WebBloksExtensions").processExtensions(b,r)},[r,b]),S=p(e);S.current=e,c(function(){if(!(!v||v.length===0)){var e=[],t=function(n){var t=r.get(n.styleId),o=t==null?void 0:t.onMount;if(o!=null){var i=function(){return o(n,S,a)};e.push(i)}};for(var n of v)t(n);if(e.length!==0)return a.bloksContext.objectSet.mountEffectsQueue.enqueue(S.current.clientId,e),function(){a.bloksContext.objectSet.mountEffectsQueue.dispose(S.current.clientId)}}},[]);var R=d!=null||C||!!(v&&v.length>0),L={"data-bloks-name":e.styleId,ref:n,id:e.get("html_id")};if(!R)return{hasWrapper:!1,wrapper:_,wrapperProps:L,stylesFromExtensions:f};var E=d!=null;if(v)for(var k of v){var I=r.get(k.styleId);I&&(I.hasLayoutWrapper!=null&&I.hasLayoutWrapper(k)&&(E=!0),I.getStyles&&(f=babelHelpers.extends({},f,I.getStyles(k,i))),Object.assign(L,I.getProps==null?void 0:I.getProps(k,e,a)))}var T=function(i){var a=i;if(d!=null&&(a=s.jsx(h,{aspectRatio:d,children:a})),C&&l._style!=null&&(a=s.jsx(y,{style:l._style,contextNode:e,elementRef:n,children:a})),v)for(var u of v){var c=r.get(u.styleId);if(c){var m=c.wrap;m&&(a=m(u,a,e,n))}}return E?s.jsx("div",{className:o("WebBloksStyle").WebBloksStyles.container,style:babelHelpers.extends({},t,{aspectRatio:d}),children:a}):a};return{hasWrapper:E,wrapper:T,wrapperProps:L,stylesFromExtensions:f}}var g=o("WebBloksStyle").createStyles({aspectRatioContainer:{width:"100%",pointerEvents:"none",overflow:"hidden"},aspectRatioContent:{bottom:0,left:0,overflow:"hidden",position:"absolute",right:0,top:0,padding:"inherit"},aspectRatioSVG:{height:"100%",width:"100%",display:"flex"}});function h(e){var t=o("react-compiler-runtime").c(7),n=e.aspectRatio,r=e.children,a;t[0]!==n?(a=s.jsx("div",{"data-bloks-name":"bk.components.AspectRatio",className:g.aspectRatioContainer,style:{aspectRatio:n},children:s.jsx("svg",{"aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",height:1,width:n,className:g.aspectRatioSVG})}),t[0]=n,t[1]=a):a=t[1];var i;t[2]!==r?(i=s.jsx("div",{"data-bloks-name":"bk.components.AspectRatio",className:g.aspectRatioContent,children:r}),t[2]=r,t[3]=i):i=t[3];var l;return t[4]!==a||t[5]!==i?(l=s.jsxs(s.Fragment,{children:[a,i]}),t[4]=a,t[5]=i,t[6]=l):l=t[6],l}function y(e){var t=e.contextNode,n=e.children,r=e.style,a=e.elementRef;return o("WebBloksSSRUtils").canUseDOM?C({contextNode:t,children:n,style:r,elementRef:a}):n}function C(e){var t=o("react-compiler-runtime").c(14),n=e.children,r=e.contextNode,a=e.elementRef,i=e.style,l=o("WebBloksComponentContext").useWebBloksContext(),s=l.executeCatch,u=l.bloksContext,c;t[0]!==u||t[1]!==r||t[2]!==s||t[3]!==i?(c=function(t){var e=i==null?void 0:i.getExpression("on_appear"),n=i==null?void 0:i.getExpression("on_disappear");e:switch(t.state){case"entered":{e!=null&&s(r,e,[u]);break e}case"exited":n!=null&&s(r,n,[u])}},t[0]=u,t[1]=r,t[2]=s,t[3]=i,t[4]=c):c=t[4];var m=c,p;t[5]!==i.clientId?(p=i.clientId.toString(),t[5]=i.clientId,t[6]=p):p=t[6];var _;t[7]!==m||t[8]!==p?(_={id:p,action:m},t[7]=m,t[8]=p,t[9]=_):_=t[9];var f=o("WebBloksViewpoint").useViewpoint(_),g,h;return t[10]!==a||t[11]!==f?(g=function(){f.current=a.current},h=[a,f],t[10]=a,t[11]=f,t[12]=g,t[13]=h):(g=t[12],h=t[13]),d(g,h),n}l.default=f}),98);
__d("WebBloksCSSUtils",["WebBloksIsUnitTest","WebBloksSSRUtils","WebBloksUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s="";function u(e,t){switch(e){case"start":return t?"right":"left";case"end":return t?"left":"right";case"marginStart":return t?"marginRight":"marginLeft";case"marginEnd":return t?"marginLeft":"marginRight";case"paddingStart":return t?"paddingRight":"paddingLeft";case"paddingEnd":return t?"paddingLeft":"paddingRight"}return e}function c(){return s}function d(t){var n;if(!(r("WebBloksIsUnitTest")()||t==null)){if(!o("WebBloksSSRUtils").canUseDOM){s+=t;return}e||(e=m());var a=o("WebBloksUtils").nullthrows((n=e)==null?void 0:n.sheet);try{a.insertRule(o("WebBloksUtils").nullthrows(t),a.cssRules.length)}catch(e){}}}function m(){var e=document.createElement("style");e.setAttribute("type","text/css"),e.setAttribute("data-styled","true");var t=document.head||document.getElementsByTagName("head")[0];return o("WebBloksUtils").nullthrows(t,"Unexpected null: head"),t.appendChild(e),e}function p(e){return Object.entries(e).map(function(e){var t=e[0],n=e[1],r=n==null||typeof n=="boolean"||n==="";return r?"":(typeof n=="number"&&n!==0&&!_[t]&&(n+="px"),C(t)+": "+String(n).trim()+";")}).join("\n	")}var _={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0};function f(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var g=["Webkit","ms","Moz","O"];Object.keys(_).forEach(function(e){g.forEach(function(t){_[f(t,e)]=_[e]})});var h=/([A-Z])/g,y=/^ms-/;function C(e){return e.replace(h,"-$1").toLowerCase().replace(y,"-ms-")}l.getRtlAwareCssAttr=u,l.getSSRStyles=c,l.insertCssRule=d,l.styleObjectToCSS=p}),98);
__d("WebBloksDimensionUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.endsWith("%")?"%":e.endsWith("dp")||e.endsWith("sp")?"dp":e.endsWith("px")?"px":null}function l(t){if(t==null)return null;var n=e(t);return n?{value:parseFloat(t),type:n}:null}i.parseDimension=l}),66);
__d("WebBloksURLSearchParams",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){var t=this;this.params=new Map,e!=null&&e.slice(1).split("&").forEach(function(e){var n=e.split("="),r=n[0],o=n[1],a=decodeURIComponent(r);t.params.set(a,decodeURIComponent(o))})}var t=e.prototype;return t.append=function(t,n){this.params.set(t,n)},t.delete=function(t){this.params.delete(t)},t.get=function(t){return this.params.get(t)||null},t.set=function(t,n){this.params.set(t,n)},e})();i.default=e}),66);
__d("WebBloksUtils",["Promise","WebBloksBooleanUtils","WebBloksConstants","WebBloksDimensionUtils","WebBloksErrors","WebBloksSSRUtils","WebBloksTheme","WebBloksURLSearchParams","react"],(function(t,n,r,o,a,i,l){var e=["data","layout","status"],s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useLayoutEffect,p=[];Object.freeze(p);var _=p,f=Object.create(null);Object.freeze(f);var g=new Map;g.set=function(){throw new(o("WebBloksErrors")).WebBloksError("Map is immutable")};var h=0;function y(){h=0}function C(){return++h}function b(e){return typeof e=="string"?e.replace("_","-"):e}function v(e){if(typeof e=="string"){for(var t=e.replace(/-/g,"_").split(/_/),n=t[0],r=1;r<t.length;r++){var o=t[r];n+=o[0].toUpperCase()+o.slice(1)}return n}return e}function S(e){return e==null?{}:{paddingTop:R(e==null?void 0:e.get("top")),paddingRight:R(e==null?void 0:e.get("end")),paddingBottom:R(e==null?void 0:e.get("bottom")),paddingLeft:R(e==null?void 0:e.get("start"))}}function R(e){if(typeof e=="string"){var t=o("WebBloksDimensionUtils").parseDimension(e);return t==null?e:t.type==="%"?t.value+"%":t.value+"px"}return e}function L(e){var t;return((t=o("WebBloksDimensionUtils").parseDimension(e))==null?void 0:t.type)==="%"}function E(e){return L(e)?parseFloat(e)/100:null}function k(e){if(e.startsWith("rgba(")){var t=e.slice(5,e.indexOf(")")),n=t.split(",").map(function(e){return Number(e)}),r=n[0],o=n[1],a=n[2],i=n[3];return[r,o,a,i]}else if(e.startsWith("rgb(")){var l=e.slice(4,e.indexOf(")")),s=l.split(",").map(function(e){return Number(e)}),u=s[0],c=s[1],d=s[2];return[u,c,d,1]}else if(e.length===9){var m=parseInt(e.slice(1,3),16)/255,p=parseInt(e.slice(3,5),16),_=parseInt(e.slice(5,7),16),f=parseInt(e.slice(7,9),16);return[p,_,f,m]}else{var g=parseInt(e.slice(1,3),16),h=parseInt(e.slice(3,5),16),y=parseInt(e.slice(5,7),16);return[g,h,y,1]}}function I(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=o===void 0?1:o;return"rgba("+t+","+n+","+r+","+a.toFixed(4)+")"}function T(e,t){var n=t===o("WebBloksTheme").THEME.dark?e.get("dark_color"):e.get("light_color");return I(k(n))}function D(e){var t,n={translate_x:"translateX",translate_y:"translateY",scale_x:"scaleX",scale_y:"scaleY",alpha:"",rotation:"rotate"};return(t=n[e])!=null?t:""}function x(e,t){return e!=null&&e.styleId===t}function $(e,t){return e==null?null:e.find(function(e){return e.styleId===t})}function P(e){return e}function N(e){if(!e.length)throw new(o("WebBloksErrors")).WebBloksError("Empty collection");return e[e.length-1]}function M(e,t){if(t!=null)for(var n of t){var r=n[0],o=n[1];e.set(r,o)}}function w(e){for(var t in e)return t}var A=(function(){function e(){this.listeners=new Set}var t=e.prototype;return t.on=function(t){this.listeners.add(t)},t.off=function(t){this.listeners.delete(t)},t.emit=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.listeners.forEach(function(e){return e.apply(void 0,t)})},t.clear=function(){this.listeners.clear()},e})();function F(e){return new(s||(s=n("Promise")))(function(t){window.setTimeout(t,e)})}var O={passive:!0},B=10;function W(e,t,n,r){if(!r)return!0;var o=e.getBoundingClientRect();if(Math.abs(o.left-t)>B||Math.abs(o.top-n)>B)return!0;var a=document.elementFromPoint(r.clientX,r.clientY);return a?!e.contains(a):!0}function q(e){return/^[0-9]*(\.[0-9]+)?\%$/.test(e)}function U(e){return/^[0-9]*(\.[0-9]+)?(dp|px)$/.test(e)}function V(e){var t,n=e;return function(){return n&&(t=n.apply(this,arguments),n=null),t}}function H(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}function G(e,t){if(t===void 0&&(t="Got unexpected null or undefined"),e!=null)return e;var n=new(o("WebBloksErrors")).WebBloksError(t);throw n.framesToPop=1,n}function z(e){for(var t in e)return!1;return!0}function j(e,t){if(e===t)return!0;if(e==null||t==null||e.size!==t.size)return!1;for(var n of e){var r=n[0],o=n[1],a=t.get(r);if(o!==a)return!1}return!0}function K(e,t){var n=!1;return function(){if(!n){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];e.apply(this,o),n=!0,window.setTimeout(function(){n=!1},t)}}}function Q(e,t){var n;return function(){for(var r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];var i=this;window.clearTimeout(n),n=window.setTimeout(function(){e.apply(i,o)},t)}}var X=o("WebBloksSSRUtils").canUseDOM?m:d,Y=Object.prototype.toString;function J(e){switch(Y.call(e)){case"[object String]":case"[object Number]":case"[object Boolean]":case"[object Null]":case"[object Undefined]":return!0}return!1}function Z(e,t){var n=function(t){return function(e,n){return Z(e,t[n])}},r=function(t,n){return function(e){return e in t&&e in n&&Z(t[e],n[e])}};if(Y.call(e)!==Y.call(t))return!1;if(J(e))return e===t;if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&e.every(n(t));if(typeof e=="object"&&typeof t=="object"&&!Array.isArray(e)&&e!==null&&t!==null){var o=Object.keys(e),a=Object.keys(t);return o.length!==a.length?!1:o.every(r(e,t))}return!1}function ee(e){return e!==null&&Object.prototype.toString.call(e)==="[object Object]"}function te(e){return!o("WebBloksBooleanUtils").isFalse(e.get("enabled"))}function ne(){return new(r("WebBloksURLSearchParams"))(window.location.search)}function re(e){var t;if(e==null)return o("WebBloksConstants").WEBBLOKS_DEFAULT_FONT_FAMILY;var n=(t=e.__default)==null?void 0:t.webFontName;return n===null?"inherit":n!=null?n:o("WebBloksConstants").WEBBLOKS_DEFAULT_FONT_FAMILY}function oe(t){var n,r=t==null?void 0:t.server_data;if(((n=t.layout)==null?void 0:n.bloks_payload)!=null)return babelHelpers.extends({},t.layout.bloks_payload,{server_data:r});var o=t.data,a=t.layout,i=t.status,l=babelHelpers.objectWithoutPropertiesLoose(t,e);return babelHelpers.extends({data:o||[],server_data:r,tree:t.layout},l)}l.EMPTY_ARRAY=p,l.EMPTY_KEY_PATH=_,l.EMPTY_OBJECT=f,l.EMPTY_MAP=g,l.resetGlobalBloksClientIdForTest=y,l.getNextGlobalBloksClientId=C,l.toHyphen=b,l.toCamel=v,l.insetToPadding=S,l.toPx=R,l.isPercentage=L,l.toPercentageValue=E,l.convertRGBOrHexStringToArr=k,l.convertRGBArrToString=I,l.getRGBColorWithTheme=T,l.viewTransformKeyToTransformFunction=D,l.isStyle=x,l.findExtension=$,l.cast=P,l.peek=N,l.putAll=M,l.getFirstKey=w,l.EventEmitter=A,l.sleep=F,l.passiveTouchEventOptions=O,l.shouldCancelTouchEvent=W,l.isBloksDimensionPercentage=q,l.isBloksDimensionPixel=U,l.once=V,l.removeFromArray=H,l.nullthrows=G,l.isEmptyObject=z,l.shallowMapEqual=j,l.throttle=K,l.debounce=Q,l.useLayoutEffect_SAFE_FOR_SSR=X,l.deepEquals=Z,l.isObject=ee,l.isBloksModelEnabled=te,l.getQueryParams=ne,l.getWrapperFontFamily=re,l.normaliseBloksPayload=oe}),98);
__d("AbstractWebBloksAppLoader",["ClientAjaxIdsUpdater","WebBloksAppLoaderConsoleDebugger","WebBloksErrors","WebBloksServerData","WebBloksUtils","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.fetchAppByUrl=async function(t){return r("WebBloksAppLoaderConsoleDebugger").onStart(t),o("WebBloksUtils").normaliseBloksPayload(await this.$1(t,this.makePostRequest(t,{type:"app"})))},t.fetchApp=async function(t,n){return o("WebBloksUtils").normaliseBloksPayload(await this.$2(t,n,"app"))},t.fetchAction=async function(t,n){return o("WebBloksUtils").normaliseBloksPayload(await this.$2(t,n,"action"))},t.fetchComponentQuery=async function(t,n){var e=await this.$2(t,n,"app");return{components:e.components}},t.$2=function(t,n,o){r("WebBloksAppLoaderConsoleDebugger").onStart(t,n);var e=this.getAsyncFetchData(t,n,o);return this.$1(t,this.makePostRequest(this.getAsyncFetchURI(t,n,o),e))},t.$1=async function(t,n){try{var e,a=await n;r("WebBloksAppLoaderConsoleDebugger").onSuccess(t,a),r("ClientAjaxIdsUpdater")(a);var i=(e=a.payload)!=null?e:a;return o("WebBloksServerData").handleWebBloksServerData(i.server_data),i}catch(e){var l=r("getErrorSafe")(e);throw r("WebBloksAppLoaderConsoleDebugger").onError(t,l),l instanceof o("WebBloksErrors").WebBloksError?l:new(o("WebBloksErrors")).WebBloksError("Fetch failed: "+l.message,l)}},t.makePostRequest=function(t,n){throw new(o("WebBloksErrors")).WebBloksError("Abstract")},t.getAsyncFetchURI=function(t,n,r){throw new(o("WebBloksErrors")).WebBloksError("Abstract")},t.getAsyncFetchData=function(t,n,r){throw new(o("WebBloksErrors")).WebBloksError("Abstract")},e})();l.AbstractWebBloksAppLoader=e}),98);
__d("AcqWebBloksComponents",[],(function(t,n,r,o,a,i){var e={};i.COMPONENTS=e}),66);
__d("CometEventPermalinkTab",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ABOUT:"about",DISCUSSION:"discussion",BRACKETS:"brackets",BROADCASTS:"broadcasts",PARTICIPANTS:"participants",STANDINGS:"standings",VIDEOS:"videos",PAID_ACCESS:"paid_access"}),l=e;i.default=l}),66);
__d("WebBloksAccessibilityAnnouncement",[],(function(t,n,r,o,a,i){function e(e,t){var n,r=document.createElement("div");r.setAttribute("aria-live","polite"),r.style.position="absolute",r.style.top="-10000px",r.style.left="-10000px",r.style.width="500px",r.textContent=t,(n=document.body)==null||n.appendChild(r),window.setTimeout(function(){var e;(e=document.body)==null||e.removeChild(r)},100)}i.default=e}),66);
__d("WebBloksAccessibilitySetFocus",[],(function(t,n,r,o,a,i){function e(e,t){var n,r=(n=t.uiMutableContainer)==null||(n=n.domNode)==null?void 0:n.current,o=r==null?void 0:r.getAttribute("tabindex");o==null&&(r==null||r.setAttribute("tabindex","-1")),r==null||r.focus()}i.default=e}),66);
__d("WebBloksAddChild",["WebBloksMutations"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("WebBloksMutations").addChildToContainer(e.treeManager,t,n,r)}l.default=e}),98);
__d("WebBloksChildrenOperationsHelper",["WebBloksConstants","WebBloksMutations","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=e.bloksContext.objectSet.environment.traversalKeys;e.enqueueUpdateOperation(new(o("WebBloksMutations")).ChildServerIdTarget(t,n),{update:function(a){var r=x(a,t,n),i=r[0],l=r[1];if(l<0){o("WebBloksMutations").warn(e,"removeChildById: No existing child found with specified ID in parent. No child has been removed from the parent.");return}i.splice(l,1)}})}function s(e,t,n,r){e.enqueueUpdateOperation(new(o("WebBloksMutations")).ClientIdTarget(t.clientId),{update:function(a){var t=x(a,n,e.bloksContext.objectSet.environment.traversalKeys),i=t[0],l=t[1],s=i.findIndex(function(e){return e.getId()===r});if(l===-1){o("WebBloksMutations").warn(e,"removeChildren: The starting id doesn't exist. No children have been removed.");return}if(s===-1){o("WebBloksMutations").warn(e,"removeChildren: The ending id doesn't exist. No children have been removed.");return}if(l>s){o("WebBloksMutations").warn(e,"removeChildren: The starting index is larger than the ending index. No children have been removed.");return}i.splice(l+1,s-l-1)}})}function u(e,t,n){var r=e.bloksContext.objectSet.environment.traversalKeys;e.enqueueUpdateOperation(new(o("WebBloksMutations")).ChildServerIdTarget(t,r),{update:function(i){var a=x(i,t,r),l=a[0],s=a[1];if(s<0){o("WebBloksMutations").warn(e,"replaceChildrenAfter: No existing child found with specified ID in parent. New children have not been added to parent.");return}l.splice.apply(l,[s+1,l.length-1-s].concat(T(n)))}})}function c(e,t,n){var r=D(e,n);u(e,t,r)}function d(e,t,n,r,a,i){i===void 0&&(i=0);var l=e.bloksContext.objectSet.environment.traversalKeys;e.enqueueUpdateOperation(new(o("WebBloksMutations")).ChildServerIdTarget(t,l),m(e,t,n,r,a,i))}function m(e,t,n,r,a,i){i===void 0&&(i=0);var l=e.bloksContext.objectSet.environment.traversalKeys;return{update:function(u){var s=x(u,t,l),c=s[0],d=s[1];if(d<0){o("WebBloksMutations").warn(e,a+": No existing child found with specified ID in parent. New children have not been added to parent.");return}c.splice.apply(c,[d+i,r].concat(T(n)))}}}function p(e,t,n){d(e,t,n,0,"prependChildren")}function _(e,t,n){d(e,t,n,1,"replaceChild")}function f(e,t,n,r){d(e,n,t,0,"insertChildrenRelativeToId",r)}function g(e,t,n){return m(e,t,n,1,"replaceChild")}function h(e,t,n){e.enqueueUpdateOperation(new(o("WebBloksMutations")).ServerIdTarget(t),{update:function(t){var e;(e=t.getChildren_DEPRECATED()).splice.apply(e,[0,t.getChildren_DEPRECATED().length].concat(T(n)))}})}function y(e,t,n){var r=D(e,n);_(e,t,r)}function C(e,t,n){var r=D(e,n);h(e,t,r)}function b(e,t,n){e.enqueueUpdateOperation(new(o("WebBloksMutations")).ServerIdTarget(t),{update:function(t){var e,r=[];for(var o of T(n))r.push(o);(e=t.getChildren_DEPRECATED()).unshift.apply(e,r)}})}function v(e,t,n){var r=D(e,n);b(e,t,r)}function S(e,t,n){e.enqueueUpdateOperation(new(o("WebBloksMutations")).ServerIdTarget(t),{update:function(t){for(var e of T(n))t.getChildren_DEPRECATED().push(e)}})}function R(e,t,n){var r=D(e,n);S(e,t,r)}function L(e,t,n){f(e,t,n,0)}function E(e,t,n){var r=D(e,t);L(e,r,n)}function k(e,t,n){f(e,t,n,1)}function I(e,t,n){var r=D(e,t);k(e,r,n)}function T(e){var t=[];for(var n of e)n.styleId===o("WebBloksConstants").BK_INTERNAL_MERGE?t.push.apply(t,n.getChildren_DEPRECATED()):t.push(n);return t}function D(e,t){var n=[];for(var r of t)e.enqueueResourcesUpdateOperation(r),n.push(r.unboundModel);return n}function x(e,t,n){var r,a=e.getChildren_DEPRECATED(),i=a.findIndex(function(e){return e.getId()===t});if(i>=0)return[a,i];var l=(r=n[e.styleId])==null?void 0:r.plural_subnodes;if(l)for(var s of l){var u=e.getChildren_DEPRECATED(s).findIndex(function(e){return e.getId()===t});if(u>=0)return[e.getChildren_DEPRECATED(s),u]}return[o("WebBloksUtils").cast(o("WebBloksUtils").EMPTY_ARRAY),-1]}l.removeModelById=e,l.removeChildren=s,l.replaceChildrenAfter=u,l.replaceEmbeddedChildrenAfter=c,l.prependChildren=p,l.replaceChild=_,l.insertChildrenRelativeToId=f,l.getReplaceChildUpdateOperation=g,l.replaceLayoutChildren=h,l.replaceEmbeddedChild=y,l.replaceEmbeddedLayoutChildren=C,l.prependEmbeddedLayoutChildren=v,l.appendEmbeddedLayoutChildren=R,l.insertEmbeddedChildrenBefore=E,l.insertChildrenAfter=k,l.insertEmbeddedChildrenAfter=I}),98);
__d("WebBloksAppendEmbeddedChildren",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("WebBloksChildrenOperationsHelper").appendEmbeddedLayoutChildren(e.treeManager,t,n)}l.default=e}),98);
__d("WebBloksApply",[],(function(t,n,r,o,a,i){function e(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t.apply(void 0,[e].concat(r))}i.default=e}),66);
__d("WebBloksArrayAppend",[],(function(t,n,r,o,a,i){function e(e,t,n){return[].concat(t,[n])}i.default=e}),66);
__d("WebBloksArrayClone",[],(function(t,n,r,o,a,i){function e(e,t){return[].concat(t)}i.default=e}),66);
__d("WebBloksArrayConcat",[],(function(t,n,r,o,a,i){function e(e,t,n){return t.concat(n)}i.default=e}),66);
__d("WebBloksArrayFilter",["WebBloksBooleanUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){for(var r=[],a=0;a<t.length;a++){var i=n(e,t[a]);o("WebBloksBooleanUtils").isTrue(i)&&r.push(t[a])}return r}l.default=e}),98);
__d("WebBloksArrayGet",[],(function(t,n,r,o,a,i){function e(e,t,n){return t[n]}i.default=e}),66);
__d("WebBloksArrayLength",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e,t){if(Array.isArray(t)||typeof t=="string")return t.length;if(t!=null&&typeof t=="object")return Object.keys(t).length;throw new(o("WebBloksErrors")).WebBloksScriptError("bk.action.array.Length expects an array, string or map",e)}l.default=e}),98);
__d("WebBloksArrayMake",[],(function(t,n,r,o,a,i){function e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n}i.default=e}),66);
__d("WebBloksArrayMap",[],(function(t,n,r,o,a,i){function e(e,t,n){for(var r=[],o=0;o<t.length;o++){var a=t[o],i=n(e,o,a);r.push(i)}return r}i.default=e}),66);
__d("WebBloksArrayPut",[],(function(t,n,r,o,a,i){function e(e,t,n,r){n===t.length?t.push(r):t[n]=r}i.default=e}),66);
__d("WebBloksArrayPutAndGet",["WebBloksArrayPut"],(function(t,n,r,o,a,i,l){function e(e,t,n,o){return r("WebBloksArrayPut")(e,t,n,o),t}l.default=e}),98);
__d("WebBloksArrayReduce",[],(function(t,n,r,o,a,i){function e(e,t,n,r){return t==null?r:t.reduce(function(t,r,o){return n(e,t,r,o)},r)}i.default=e}),66);
__d("WebBloksArrayRemove",[],(function(t,n,r,o,a,i){function e(e,t,n){t.splice(n,1)}i.default=e}),66);
__d("WebBloksArrayRemoveAndGet",["WebBloksArrayRemove"],(function(t,n,r,o,a,i,l){function e(e,t,n){return r("WebBloksArrayRemove")(e,t,n),t}l.default=e}),98);
__d("WebBloksArraySlice",[],(function(t,n,r,o,a,i){function e(e,t,n,r){return typeof r=="number"?t.slice(n,n+r):t.slice(n)}i.default=e}),66);
__d("WebBloksArraySortedArray",[],(function(t,n,r,o,a,i){function e(e,t,n){var r=Array.from(t);return r.sort(function(t,r){var o=n(e,t,r);return o}),r}i.default=e}),66);
__d("WebBloksArrayUpdate",[],(function(t,n,r,o,a,i){function e(e,t,n,r){for(var o=0;o<n.length;o++){var a=n[o];t[a]=r[o]}}i.default=e}),66);
__d("webBloksPerformanceUtils",[],(function(t,n,r,o,a,i){function e(e,t){var n,r=(n=window)==null?void 0:n.performance;r==null||r.mark==null||r.mark(String(e),t)}i.addWebBloksPerformanceMark=e}),66);
__d("WebBloksAsyncAction",["WebBloksAsyncActions","WebBloksScriptDebuggingUtils","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a,i){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-start",{detail:{appId:t}}),o("WebBloksAsyncActions").executeAsyncAction(e,t,n).then(function(){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-success"),e.executeCatch(r,[])}).catch(function(t){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-error"),o("WebBloksScriptDebuggingUtils").logScriptError(e.objectSet,t,null,e),e.executeCatch(a,[])})}l.default=e}),98);
__d("WebBloksAsyncActionWithDataManifest",["WebBloksAsyncActions","WebBloksScriptDebuggingUtils","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a,i){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-start",{detail:{appId:t}}),o("WebBloksAsyncActions").executeAsyncAction(e,t,n).then(function(t){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-success"),e.execute(r,[t,e.bloksContext])}).catch(function(t){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-error"),o("WebBloksScriptDebuggingUtils").logScriptError(e.objectSet,t,null,e),e.execute(a,[e.bloksContext])}).catch(function(t){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-error"),e.objectSet.environment.logger.mustfix("AsyncAction: failed to run error handler",t)})}l.default=e}),98);
__d("WebBloksContainerConfig",["WebBloksErrors"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.mergeWith=function(t){return t},e.fromBloksModel=function(t){throw new(o("WebBloksErrors")).WebBloksError("Abstract")},t.getIsOverlay=function(){return!1},e})();function s(e,t){var n=t.styleId,r=e.objectSet.getContainerConfigModuleForName(n);return r.ContainerConfig.fromBloksModel(t)}l.WebBloksContainerConfig=e,l.getContainerConfig=s}),98);
__d("WebBloksDataModule",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e,t){if(t==="ls")return e.localStateDataModule;if(t==="gs")return e.objectSet.globalStateDataModule;var n=e.objectSet.environment.dataModulesStore.get(t);if(n!=null)return n;throw new(o("WebBloksErrors")).WebBloksError("Unsupported data source type found: "+t)}function s(e,t){var n=e.data,r=n.initial_lispy;return r!=null?t(r):n.initial}function u(e,t){return{id:e,type:"ls",data:{initial:t}}}l.getDataModuleFromContext=e,l.getDataEntryInitialValue=s,l.dangerouslyCreateLocalStateDataManifestEntry_DO_NOT_USE=u}),98);
__d("WebBloksLocalState",["WebBloksDataModule"],(function(t,n,r,o,a,i,l){var e=(function(){function e(){}var t=e.prototype;return t.setup=function(t,n,r,a){var e=o("WebBloksDataModule").getDataEntryInitialValue(n,a);return{initialValue:e}},e})();l.WebBloksLocalStateDataModule=e}),98);
__d("WebBloksContext",["WebBloksErrors","WebBloksLocalState","WebBloksScopedIds"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){this.treeManager=e,this.objectSet=t,this.associatedObjectsByClientId={},this.bkContextKeyStates=new Map,this.bkContextKeyAnimations=new Map,this.localStateDataModule=new(o("WebBloksLocalState")).WebBloksLocalStateDataModule,this.scopedClientIdMapper=new(o("WebBloksScopedIds")).ClientIdToScopedIdMapper}var t=e.prototype;return t.initAssociatedObject_INTERNAL=function(t,n,r){var e=t.clientId,a=this.getAssociatedObject_INTERNAL(t,n);if(a!=null)return a;if(this.$1(e)||(this.associatedObjectsByClientId[e]={}),this.associatedObjectsByClientId[e][n]=r,this.associatedObjectsByClientId[e][n]==null)throw new(o("WebBloksErrors")).WebBloksError("Failed to initialize associated object for clientId: "+e+" and assocObjId: "+n,null,!0);return this.associatedObjectsByClientId[e][n]},t.getAssociatedObject_INTERNAL=function(t,n){var e,r=t.clientId,o=(e=this.associatedObjectsByClientId)==null?void 0:e[r];return o==null?void 0:o[n]},t.updateAssociatedObject_INTERNAL=function(t,n,r){var e=t.clientId;if(this.associatedObjectsByClientId[e][n]==null)throw new(o("WebBloksErrors")).WebBloksError("Attempted to update a associated object which has not been initialized",null,!0);if(this.associatedObjectsByClientId[e][n]=babelHelpers.extends({},this.associatedObjectsByClientId[e][n],r),this.associatedObjectsByClientId[e][n]==null)throw new(o("WebBloksErrors")).WebBloksError("Failed to update associated object for clientId: "+e+" and assocObjId: "+n,null,!0);return this.associatedObjectsByClientId[e][n]},t.$1=function(t){return Object.prototype.hasOwnProperty.call(this.associatedObjectsByClientId,t)},e})();l.WebBloksContext=e}),98);
__d("WebBloksComponentQueryManager",["WebBloksChildrenOperationsHelper","WebBloksMutations","WebBloksParseResult","WebBloksScopedComponentQueryDefinition","WebBloksScopedIds","WebBloksScriptExecutor","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e="query_info_",s=(function(){function t(e,t){this.$3=new Map,this.$4=new Map,this.$5=new Map,this.$1=e,this.$2=t}var n=t.prototype;return n.setup=function(t,n){var e=this,r=[],a=function(t){return o("WebBloksScriptExecutor").execute(n,t,[])},i=[],l=function(i){var t=o("WebBloksUtils").cast(a(i.appIdExpression)),l=i.paramsExpression!=null?o("WebBloksUtils").cast(a(i.paramsExpression)):{},s=i.cacheTTLExpression!=null?o("WebBloksUtils").cast(a(i.cacheTTLExpression)):null;if(s==null)return 1;var u=e.$2.getCachedComponentsOrSubscribeToQuery(t,l,s,function(t,r){e.$6(i,r,n)});u.value==null||r.push([i,u.value])};for(var s of t)l(s);for(var u of r){var c=u[0],d=u[1],m=this.$7(c,d,n,"resolved_sync");for(var p of m)i.push(p)}return i},n.$6=function(t,n,r){var e=this,o=this.$7(t,n,r,"resolved_async");o.forEach(function(t){e.$1.enqueueTreeUpdateOperation(t)})},n.$7=function(t,n,r,o){var e=n.success?o:"failed",a=!1;for(var i of(l=t.dependencies)!=null?l:new Set){var l;if(!this.$4.has(i)){var s=this.$5.get(i);s==null&&(s=new Set,this.$5.set(i,s)),s.add(t.id),a=!0}if(a)return this.$3.set(t.id,{queryDefinition:t,response:n}),[]}this.$4.set(t.id,n),this.$3.delete(t.id);var u=this.$8(t,n,r,e);for(var c of(d=this.$5.get(t.id))!=null?d:new Set){var d,m=this.$3.get(c);m!=null&&(u=u.concat(this.$7(m.queryDefinition,m.response,r,e)),this.$5.delete(t.id))}return u},n.$8=function(t,n,r,a){var e,i=this,l={resolution_type:a,response_summary:{}};if(!n.success)return[{treeModification:null,variableUpdate:{variableIdentifier:this.$9(t.id),value:l}}];var s=this.$10((e=t.targets)!=null?e:new Map,n.result.components),u=t.isScoped?o("WebBloksScopedIds").extendKeyPath():null,c=[],d=function(){var e=m[0],n=m[1],a=i.$11(n,e.serverId,u),s=function(n){var t=r.createBloksModelScopedContext(e.keyPath);return o("WebBloksScriptExecutor").execute(t,n,[])},d=t.clientParamsExpression!=null?o("WebBloksUtils").cast(s(t.clientParamsExpression)):{};for(var p of Object.entries(d)){var _=p[0],f=p[1];c.push({treeModification:null,variableUpdate:{variableIdentifier:i.$12(_,u),value:f}})}c.push({treeModification:a,variableUpdate:{variableIdentifier:i.$12(i.$9(t.id),e.keyPath),value:l}})};for(var m of s.entries())d();return c},n.$11=function(t,n,a){var e=this.$1.bloksContext.objectSet.environment.traversalKeys,i=t.unboundModel.makeDeepCopyWithNewClientIds(a,e),l=t.resources.clone();l.componentQueries=l.componentQueries.map(function(t){return o("WebBloksScopedComponentQueryDefinition").generateTreeScopedComponentQueryDefFromScopedDef(i,t,e)});var s=o("WebBloksChildrenOperationsHelper").getReplaceChildUpdateOperation(this.$1,n,[i]);return{target:new(o("WebBloksMutations")).ChildServerIdTarget(n,e),updateOperation:s,parseResult:new(r("WebBloksParseResult"))(i,l)}},n.$10=function(t,n){var e=new Map;for(var r of t.entries()){var o=r[0],a=r[1],i=n.get(o);i!=null&&e.set(a,i)}return e},n.$12=function(t,n){if(n==null||n.length===0)return t;var e=o("WebBloksScopedIds").buildKeypathBase(n,"INTERNAL_VARIABLE");return o("WebBloksScopedIds").buildScopedVariableIdentifier(t,e)},n.$9=function(n){return""+e+n},t})();l.default=s}),98);
__d("WebBloksTreeManager",["Promise","WebBloksComponentQueryManager","WebBloksDataModule","WebBloksErrors","WebBloksInterpreterEnvironment","WebBloksParseResult","WebBloksScriptExecutor","WebBloksTreeResources","WebBloksUpdateTraversal","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e,s=(function(){function t(e){var t;if(this.id=o("WebBloksUtils").getNextGlobalBloksClientId(),this.treeResourcesState=new(o("WebBloksTreeResources")).WebBloksTreeResourcesState,this.committedVariables=new Map,this.$1=0,this.updateOperationList=[],this.updateVariableOperations=new Map,this.updateResourcesOperations=[],this.$2=!1,this.$3=!1,this.$4=!1,this.onNewTreeAndVariablesListener=new(o("WebBloksUtils")).EventEmitter,!e.unboundModel)throw new(o("WebBloksErrors")).WebBloksError("Missing unboundModel");this.unboundModel=e.unboundModel,this.initialTreeResources=e.resources,this.loggingIDForInternalFrameworkUseOnly=e==null?void 0:e.loggingID,(t=window.WebBloksPreHydrationInteractionsRecorder)==null||t.replayIfNeeded()}var a=t.prototype;return a.getBoundTree=function(){var e;return(e=this.bindResult)==null?void 0:e.boundModel},a.getExpandedVariables=function(){var e,t;return(e=(t=this.bindResult)==null?void 0:t.expandedVariables)!=null?e:o("WebBloksUtils").EMPTY_MAP},a.getCommittedTreeResources=function(){return this.treeResourcesState.withUpdatedEntries(null,this.committedVariables)},a.setCommittedBoundTree=function(t){this.bindResult=t,this.committedVariables=t.variables,this.$7()},a.waitForCommittedTree=function(){var t;return(t=this.$5)!=null?t:(e||(e=n("Promise"))).resolve()},a.$7=function(){var e;(e=this.$6)==null||e.call(this),this.$5=void 0,this.$6=void 0},a.initVariablesAndObserver=function(t,n){this.treeResourcesState=this.treeResourcesState.withUpdatedParameters(n),this.bloksContext=t,this.bloksContext.loggingIDForInternalFrameworkUseOnly=this==null?void 0:this.loggingIDForInternalFrameworkUseOnly,this.subscriptions=new Set;var e=this.processResources([new(r("WebBloksParseResult"))(this.unboundModel,this.initialTreeResources)]);if(e[1].length>0){for(var o of e[1])this.updateOperationList.push(o);this.$3=!0}return this.$2=!0,this.$3&&this.flushUpdates(),{unboundModel:this.unboundModel,treeResourcesState:this.treeResourcesState}},a.processAsyncComponents=function(t,n){if(t.length===0)return[];if(this.componentQueryManager==null){var e=this.bloksContext.objectSet.componentQueryStore;this.componentQueryManager=new(r("WebBloksComponentQueryManager"))(this,e)}return this.componentQueryManager.setup(t,n)},a.processResources=function(t){for(var e=this,n=[].concat(t),a=[],i=this.treeResourcesState,l=function(){var t,i,l,u=n[s],c=u.unboundModel,d=u.resources;e.treeResourcesState=e.treeResourcesState.withPayloadUpdates(d.payloads),e.treeResourcesState=e.treeResourcesState.withFunctionTableUpdates(d.functionTable,d.ftDeclare,d.ftInclude),e.treeResourcesState=e.treeResourcesState.withTemplateUpdates(d.templates),e.treeResourcesState=e.treeResourcesState.withValueUpdates(d.values);var m=null,p=null;for(var _ of d.variableDefinitions){var f=_.id,g=p!=null?p:e.treeResourcesState.variableDefinitions;g.has(f)||(p||(p=new Map(e.treeResourcesState.variableDefinitions)),p.set(f,_));var h=m!=null?m:new Map(e.treeResourcesState.variables);if(!h.has(f)){var y=_.type,C=o("WebBloksDataModule").getDataModuleFromContext(e.bloksContext,y);if(!C)throw new(o("WebBloksErrors")).WebBloksError("Missing variable module with type: "+y);var b=babelHelpers.extends({},_);e.initialTreeResources.shouldCommitPublishStateUpdates()===!1&&b.data.key!=null&&b.data.mode==="p"&&(b=babelHelpers.extends({},b,{data:babelHelpers.extends({},b.data,{mode:"d"})}));var v=function(n){var t,a=r("WebBloksInterpreterEnvironment"),i=new a(e.bloksContext);i.expandedVariablesOverride=(t=e.bindResult)==null?void 0:t.expandedVariables,i.resources=e.treeResourcesState;var l=i.createBloksModelScopedContext(c.keyPath);return o("WebBloksScriptExecutor").execute(l,n,[])},S=C.setup(e.bloksContext,b,e,v),R=S.cancelToken,L=S.initialValue;m||(m=new Map(e.treeResourcesState.variables)),m.set(f,L),R!=null&&e.subscriptions.add(R)}}e.initialTreeResources.setShouldCommitPublishStateUpdates(!1),e.treeResourcesState=e.treeResourcesState.withUpdatedEntries(p,m),(t=m)!=null&&t.size&&(e.committedVariables.forEach(function(e,t){var n;(n=m)==null||n.set(t,e)}),e.committedVariables=m);var E=new(r("WebBloksInterpreterEnvironment"))(e.bloksContext);E.expandedVariablesOverride=(i=e.bindResult)==null?void 0:i.expandedVariables,E.scope=(l=c.keyPath)!=null?l:o("WebBloksUtils").EMPTY_KEY_PATH,E.resources=e.treeResourcesState;var k=e.processAsyncComponents(d.componentQueries,E);for(var I of k){var T=I.treeModification,D=I.variableUpdate;if(T!=null&&(T.parseResult!=null&&n.push(T.parseResult),a.push([T.target,T.updateOperation])),D!=null){var x=new Map;x.set(D.variableIdentifier,D.value),e.treeResourcesState=e.treeResourcesState.withVariableUpdates(x)}}},s=0;s<n.length;s++)l();return[!this.treeResourcesState.equalsTo(i),a]},a.synchronouslyAddTreeResources=function(t,n){if(!this.$4){this.initialTreeResources.setShouldCommitPublishStateUpdates(!0);var e=this.processResources([t]);for(var r of e[1])this.updateOperationList.push(r);var a=new Map;if(o("WebBloksUtils").putAll(a,this.treeResourcesState.variables),n!=null&&o("WebBloksUtils").putAll(a,n),a.size>0){this.treeResourcesState=this.treeResourcesState.withVariableUpdates(a);var i=new Map(this.committedVariables);o("WebBloksUtils").putAll(i,a),this.committedVariables=i}}},a.enqueueVariableUpdateOperation=function(t,n){if(!this.$4){if(this.updateVariableOperations.set(t,n),!this.$2){this.$3=!0;return}this.$1===0&&this.$8()}},a.enqueueUpdateOperation=function(t,n){this.updateOperationList.push([t,n])},a.enqueueResourcesUpdateOperation=function(t){this.updateResourcesOperations.push(t),this.$1===0&&this.$8()},a.enqueueUpdateOperationWithResources=function(t){t.parseResult!=null&&this.enqueueResourcesUpdateOperation(t.parseResult),this.enqueueUpdateOperation(t.target,t.updateOperation)},a.enqueueTreeUpdateOperation=function(t){t.variableUpdate!=null&&this.enqueueVariableUpdateOperation(t.variableUpdate.variableIdentifier,t.variableUpdate.value),t.treeModification!=null&&this.enqueueUpdateOperationWithResources(t.treeModification)},a.beginUpdates=function(){var t=this;this.$1++,this.$5||(this.$5=new(e||(e=n("Promise")))(function(e){t.$6=e}))},a.endUpdates=function(){this.$1===1&&this.flushUpdates(),this.$1--},a.flushUpdates=function(){if(!this.$4){var e=!1;if(this.updateVariableOperations.size&&(this.treeResourcesState=this.treeResourcesState.withVariableUpdates(this.updateVariableOperations),e=!0,this.updateVariableOperations=new Map),this.updateResourcesOperations.length){var t=this.processResources(this.updateResourcesOperations);e=e||t[0];for(var n of t[1])this.updateOperationList.push(n);this.updateResourcesOperations=[]}var r=this.snapshotPendingComponent();e=e||this.unboundModel!==r,this.unboundModel=r,this.updateOperationList=[],this.pendingUnboundTree=null,e?(this.$4&&this.bloksContext.objectSet.environment.logger.warn("Received model updates for a TreeManager that was already destroyed"),this.onNewTreeAndVariablesListener.emit({unboundModel:this.unboundModel,treeResourcesState:this.treeResourcesState})):this.$7()}},a.$8=function(){var t=this;this.beginUpdates(),(e||(e=n("Promise"))).resolve().then(function(){t.endUpdates()}).catch(function(e){t.bloksContext.objectSet.environment.logger.mustfix("Unexpected error when flushing updates",e)})},a.snapshotPendingComponent=function(){var e,t=(e=this.pendingUnboundTree)!=null?e:this.unboundModel,n=new Set(this.updateOperationList.splice(0));return n.size===0?t:o("WebBloksUpdateTraversal").runUpdateTraversal(t,{apply:function(t){var e,r=t,o;for(var a of n){var i=a[0],l=a[1],s=l.update,u=l.shouldUpdate;i.targets(r)&&(o?o.push(a):o=[a],(!u||u(r))&&(r===t&&(r=t.makeCopy()),s(r)))}return(e=o)==null||e.forEach(function(e){n.delete(e)}),r},onUpdatesApplied:function(){}},this.bloksContext.objectSet.environment.traversalKeys)},a.destroy=function(){this.$4=!0,this.onNewTreeAndVariablesListener.clear(),this.subscriptions.forEach(function(e){return e()}),this.subscriptions.clear()},t})();l.default=s}),98);
__d("WebBloksScreen",["WebBloksComponentContext","WebBloksConstants","WebBloksContainerConfig","WebBloksContext","WebBloksErrors","WebBloksInterpreterEnvironment","WebBloksParseResult","WebBloksPayloadParser","WebBloksScriptDebuggingUtils","WebBloksTreeManager","WebBloksURLUtils","WebBloksUtils","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=0,c={isModal:!1,addToBackStack:!0,isEmbedded:!1},d="[wbloks] Missing AppLoader",m="WEBBLOKS_INFRA_SCREEN_",p=(function(){function e(e,t,n,r,a){var i;n===void 0&&(n=o("WebBloksUtils").EMPTY_OBJECT),this.value={state:"loading"},this.stateChangeListener=new(o("WebBloksUtils")).EventEmitter,this.dismissed=!1,this.objectSet=e,this.options=t,this.params=n,r!=null&&(this.uri=o("WebBloksURLUtils").removeQueryParams(r,["_rdr","wtsid"])),this.appId=a,t.screenId!=null?this.screenId=t.screenId:this.screenId=m+(++u).toString(),this.container=t.initialContainer,this.controllerName=(i=e.environment.controllerNavigationLogger)==null?void 0:i.getCurrentController()}var t=e.prototype;return t.getTreeManager=function(){return o("WebBloksUtils").nullthrows(this.treeManager)},t.getIsOverlay=function(){var e;return(e=this.container)==null||(e=e.config)==null?void 0:e.getIsOverlay()},t.setState=function(t){if(this.value=t,t.state==="ready"){var e=this.treeManager=new(r("WebBloksTreeManager"))(t.parseResult),n=new(o("WebBloksContext")).WebBloksContext(e,this.objectSet);if(e.initVariablesAndObserver(n,this.params),t.parseResult.unboundModel.styleId===o("WebBloksConstants").BK_INTERNAL_ACTION){var a=t.parseResult.unboundModel.getExpression("handler");if(a!=null){var i=new(o("WebBloksComponentContext")).WebBloksComponentContext(n);i.executeCatch(t.parseResult.unboundModel,a,[])}}}this.options.isEmbedded!==!0&&this.objectSet.navigationManager.notifyChanged(),this.stateChangeListener.emit(t)},t.setContainerConfigModel=function(t,n){var e,r,a,i=o("WebBloksContainerConfig").getContainerConfig(t,n);this.container==null?this.container={model:n,config:i}:(this.container.model=n,this.container.config=this.container.config.mergeWith(i)),(e=this.onContainerUpdate)==null||e.call(this,(r=this.container)==null?void 0:r.model,(a=this.container)==null?void 0:a.config)},t.setOnContainerUpdate=function(t){this.onContainerUpdate=t},t.setDismissCallback=function(t){this.$1=t},t.clearDismissCallback=function(){this.$1=null},t.dismiss=function(){var e=this;if(!this.dismissed){this.dismissed=!0;var t=this.$1;if(t!=null){var n=o("WebBloksUtils").nullthrows(this.options.ownerContext);n.treeManager.waitForCommittedTree().then(function(){n.execute(t.getValue(),[n])}).catch(function(r){o("WebBloksScriptDebuggingUtils").logScriptError(e.objectSet,r,t.getValue(),n)})}}},t.setOnExitCallback=function(t){this.$2=t},t.onExit=function(t){var e=this.$2;if(e!=null){var n=this.getTreeManager().bloksContext,o=new(r("WebBloksInterpreterEnvironment"))(n);o.executeOnNextTick(e,[n,t])}},t.destroy=function(){var e;(e=this.treeManager)==null||e.destroy(),this.setState({state:"destroyed"})},e.fromBloksAppResponse=function(n,r,a,i,l){a===void 0&&(a=c);var t=o("WebBloksPayloadParser").parseTree(r,n.environment.traversalKeys);return e.fromBloksParseResult(n,t,a,i,l)},e.fromBloksParseResult=function(n,r,o,a,i){o===void 0&&(o=c);var t=new e(n,o,a,i);return t.setState({state:"ready",parseResult:r}),t},e.fromBloksModel=function(n,a,i,l,s){l===void 0&&(l=c);var t=new e(n,babelHelpers.extends({initialTreeResources:i},l),s);return t.setState({state:"ready",parseResult:new(r("WebBloksParseResult"))(a,o("WebBloksUtils").nullthrows(i))}),t},e.fromURI=function(n,r,a,i,l){l===void 0&&(l=c);var t=new e(n,l,i,r,a);if(a!=null){var s;(s=n.environment.navigationTrackingUtils)==null||s.startNavigationCallback(a)}return _(n,t,o("WebBloksUtils").nullthrows(n.environment.appLoader,d).fetchAppByUrl(r)),t},e.fromAppId=function(n,r,a,i,l){i===void 0&&(i=c),l===void 0&&(l=null);var t=new e(n,i,a,l,r);if(r!=null){var s;(s=n.environment.navigationTrackingUtils)==null||s.startNavigationCallback(r)}return _(n,t,o("WebBloksUtils").nullthrows(n.environment.appLoader,d).fetchApp(r,a)),t},e.getExternalVariablesFromBloksScript=function(t,n){if(n==null)return null;var e=t.executeCatch(n,[]);return new Map(Object.entries(o("WebBloksUtils").cast(e)))},e})();function _(e,t,n){n.then(function(n){if(t.value.state!=="destroyed"){var r=babelHelpers.extends({},n);if(r.action!=null){var a;r.tree=(a={},a[o("WebBloksConstants").BK_INTERNAL_ACTION]={handler:r.action},a)}var i=r.server_data;if(i!=null&&(i.url_relative_path!=null&&e.navigationManager.replaceState(i.url_relative_path),i.page_title!=null&&e.navigationManager.replacePageTitle(i.page_title),i.controller_name!=null)){var l;t.controllerName=i.controller_name,(l=e.environment.controllerNavigationLogger)==null||l.setCurrentController(i.controller_name)}var s=o("WebBloksPayloadParser").parseTree({layout:{bloks_payload:r}},e.environment.traversalKeys);t.setState({state:"ready",parseResult:s})}}).catch(function(n){if(n instanceof o("WebBloksErrors").WebBloksNetworkError){var r;e.environment.logger.warn("Network error: "+String((r=t.uri)!=null?r:t.appId)+": ",n)}else{var a;e.environment.logger.mustfix("Failed to fetch app "+String((a=t.uri)!=null?a:t.appId)+": ",n)}t.setState({state:"error",error:n})})}l.WebBloksScreen=p}),98);
__d("WebBloksAsyncActionWithDataManifestV2",["WebBloksAsyncActions","WebBloksScreen","WebBloksScriptDebuggingUtils","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-start",{detail:{appId:t}});var a=r==null?void 0:r.get("on_success_with_result"),i=r==null?void 0:r.get("on_failure"),l=r==null?void 0:r.get("props"),s;l!=null&&(s=o("WebBloksScreen").WebBloksScreen.getExternalVariablesFromBloksScript(e,l)),o("WebBloksAsyncActions").executeAsyncAction(e,t,n,s).then(function(t){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-success"),a!=null&&e.execute(a,[t,e.bloksContext])}).catch(function(t){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-error"),o("WebBloksScriptDebuggingUtils").logScriptError(e.objectSet,t,null,e),i!=null&&e.execute(i,[e.bloksContext])}).catch(function(t){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-async-action-error"),e.objectSet.environment.logger.mustfix("AsyncAction: failed to run error handler",t)})}l.default=e}),98);
__d("WebBloksAsyncLoadV2",["WebBloksPayloadParser","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a){var i=o("WebBloksUtils").nullthrows(e.objectSet.environment.appLoader);i.fetchApp(t,n).then(function(t){var n=o("WebBloksPayloadParser").parseTree({layout:{bloks_payload:t}},e.objectSet.environment.traversalKeys);e.treeManager.processResources([n]),e.execute(r,[n.unboundModel])}).catch(function(t){a(e,t)})}l.default=e}),98);
__d("WebBloksBindWithArrayV2",[],(function(t,n,r,o,a,i){function e(e,t,n){return function(e){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return t.apply(void 0,[e].concat(n,o))}}i.default=e}),66);
__d("WebBloksBoolAnd",["WebBloksBooleanUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){return o("WebBloksBooleanUtils").isTrue(t)&&o("WebBloksBooleanUtils").isTrue(n)?1:0}l.default=e}),98);
__d("WebBloksBoolConst",["WebBloksBooleanUtils"],(function(t,n,r,o,a,i,l){function e(e,t){return o("WebBloksBooleanUtils").isTrue(t)}l.default=e}),98);
__d("WebBloksBoolNot",[],(function(t,n,r,o,a,i){function e(e,t){return!t}i.default=e}),66);
__d("WebBloksBoolOr",[],(function(t,n,r,o,a,i){function e(e,t,n){return t||n?1:0}i.default=e}),66);
__d("WebBloksCallbackApply",[],(function(t,n,r,o,a,i){function e(e,t){if(t==null)return null;for(var n=arguments.length,r=new Array(n>2?n-2:0),o=2;o<n;o++)r[o-2]=arguments[o];return t.invoke.apply(t,[e].concat(r))}i.default=e}),66);
__d("WebBloksCallback",["WebBloksErrors"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t,n,r){this.$1=e,this.$2=t,this.$4=n,this.$3=r}var t=e.prototype;return t.invoke=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(this.$3!=null)return this.$3.apply(this,n);var a=this.$2;if(a!=null){if(this.$1!=null)return a.apply(void 0,[this.$1].concat(n));if(this.$4!=null&&t!=null){var i=t.createBloksModelScopedContext(this.$4);return a.apply(void 0,[i].concat(n))}}throw new(o("WebBloksErrors")).WebBloksError("WebBloksCallback: An attempt to invoke an invalid callback.")},e})();l.WebBloksCallback=e}),98);
__d("WebBloksCallbackMake",["WebBloksCallback"],(function(t,n,r,o,a,i,l){function e(e,t){return new(o("WebBloksCallback")).WebBloksCallback(e,t)}l.default=e}),98);
__d("WebBloksCallbackMakeWithScopeOnly",["WebBloksCallback"],(function(t,n,r,o,a,i,l){function e(e,t){return new(o("WebBloksCallback")).WebBloksCallback(null,t,e.scope)}l.default=e}),98);
__d("WebBloksChildAtIndex",[],(function(t,n,r,o,a,i){function e(e,t,n){return t.getChildren_DEPRECATED()[n]}i.default=e}),66);
__d("WebBloksClipboardSetString",[],(function(t,n,r,o,a,i){function e(e,t){var n=window.navigator;n&&n.clipboard&&typeof n.clipboard.writeText=="function"?n.clipboard.writeText(t):l(t)||e.bloksContext.objectSet.environment.logger.warn("clipboard.SetString not supported on this browser")}function l(e){var t=document.body;if(!t)return!1;var n=document.activeElement,r=!0,o=document.createElement("textarea");if(t.appendChild(o),o.value=e,navigator.userAgent.match(/ipad|ipod|iphone/i)){var a=document.createRange();a.selectNodeContents(o);var i=window.getSelection();i.removeAllRanges(),i.addRange(a),o.setSelectionRange(0,999999)}else o.select();try{r=document.execCommand("copy")}catch(e){r=!1}return t.removeChild(o),n!=null&&n.focus(),r}i.default=e}),66);
__d("WebBloksConstNumber",[],(function(t,n,r,o,a,i){function e(e,t){return Number(t)}i.default=e}),66);
__d("WebBloksContextGet",[],(function(t,n,r,o,a,i){function e(e){return e.bloksContext}i.default=e}),66);
__d("WebBloksCurrentTimeMillis",[],(function(t,n,r,o,a,i){function e(e){return Date.now()}i.default=e}),66);
__d("WebBloksDangerouslyGetTreeFromParseResult",[],(function(t,n,r,o,a,i){function e(e,t){return t.unboundModel}i.default=e}),66);
__d("WebBloksDelay",[],(function(t,n,r,o,a,i){function e(e,t,n){window.setTimeout(function(){e.executeCatch(n,[e])},t)}i.default=e}),66);
__d("WebBloksDeviceLog",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=n==null?void 0:n.get("tag"),o=r!==void 0?"["+r+"] "+t:t;switch(n==null?void 0:n.get("priority")){case"debug":break;case"error":break;case"info":break;case"warn":break;case"verbose":default:}}i.default=e}),66);
__d("WebBloksDismissBottomSheet",[],(function(t,n,r,o,a,i){function e(e,t){return e.objectSet.navigationManager.popAllModals(),e.executeCatch(t,[])}i.default=e}),66);
__d("WebBloksDismissToast",[],(function(t,n,r,o,a,i){function e(e,t,n,r){e.objectSet.toastManager.dismissToastWithID(t,n)}i.default=e}),66);
__d("WebBloksFindComponentContext",["WebBloksLegacyTraverser","WebBloksMutations"],(function(t,n,r,o,a,i,l){function e(e,t){var n=e.treeManager,r=e.objectSet,a=n.getBoundTree();if(a){var i=o("WebBloksLegacyTraverser").findComponent(a,new(o("WebBloksMutations")).ServerIdTarget(""+t),r.environment.traversalKeys);if(i)return i}return null}l.default=e}),98);
__d("WebBloksGetAttr",[],(function(t,n,r,o,a,i){function e(e,t,n){return t.get(n)}i.default=e}),66);
__d("WebBloksI18nUtils",[],(function(t,n,r,o,a,i){"use strict";var e=["fb-AR","fb-RL"],l=["ar","he","ur","fa","sy","yi","ps","cb"];function s(e){var t,n,r=e.split(/[_-]/),o=((t=r[0])!=null?t:"").toLowerCase(),a=((n=r[1])!=null?n:"").toUpperCase();return{language:o,country:a}}function u(e){var t=s(e);return t.country!==""?t.language+"-"+t.country:t.language}function c(t){var n;Array.isArray(t)?n=t[0]:n=t;var r=s(n);return l.includes(r.language)||e.includes(r.language+"-"+r.country)}i.parseLocale=s,i.toBrowserLocaleFormat=u,i.isLocaleRtl=c}),66);
__d("WebBloksDateUtils",["WebBloksI18nUtils"],(function(t,n,r,o,a,i,l){var e={short:{year:"2-digit",month:"numeric",day:"numeric"},medium:{year:"numeric",month:"short",day:"numeric"},long:{year:"numeric",month:"long",day:"numeric"},full:{weekday:"long",year:"numeric",month:"long",day:"numeric"}},s={short:{hour:"numeric",minute:"2-digit"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"long"}};function u(t,n,r){return t==="date"?babelHelpers.extends({},e[n]):t==="time"?babelHelpers.extends({},s[r!=null?r:n]):babelHelpers.extends({},e[n],s[r!=null?r:n])}function c(e,t,n,r,a,i){var l=e*1e3;if(!Number.isFinite(l))return null;var s;return Array.isArray(t)?s=[].concat(t):s=o("WebBloksI18nUtils").toBrowserLocaleFormat(t),new Intl.DateTimeFormat(s,babelHelpers.extends({},u(n,r,a),{timezone:i})).format(e*1e3)}l.getDateTimeText=c}),98);
__d("WebBloksGetDatetimeText",["WebBloksDateUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a,i,l){var c=u(r,"medium"),d=u(a,"long"),m=s(n,"datetime");return o("WebBloksDateUtils").getDateTimeText(t,e.bloksContext.objectSet.environment.locale,m,c,d,l)}function s(e,t){return e!=="date"&&e!=="datetime"&&e!=="time"?t:e}function u(e,t){return e!=="short"&&e!=="medium"&&e!=="long"&&e!=="full"?t:e}l.default=e}),98);
__d("WebBloksGetDeserializedEmbeddedPayload",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e,t){var n,r=(n=e.getResources())==null||(n=n.payloads.get(t))==null?void 0:n.payload;if(r==null)throw new(o("WebBloksErrors")).WebBloksError("Could not find embedded payload for ID: "+t);return r}l.default=e}),98);
__d("WebBloksGetHeightV2",[],(function(t,n,r,o,a,i){function e(e,t,n){var r,o,a=(r=t.uiMutableContainer.domNode)==null?void 0:r.current;return(o=a==null?void 0:a.clientHeight)!=null?o:0}i.default=e}),66);
__d("WebBloksGetParameter",[],(function(t,n,r,o,a,i){function e(e,t){return e.readParameter(t)}i.default=e}),66);
__d("WebBloksInflate",["WebBloksDataModule","WebBloksModelParser","WebBloksParseResult","WebBloksScopedIds","WebBloksSourceMapNode","WebBloksSourceMapPayloadMetadata","WebBloksSourceMapRootNode","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,a,i,l){var s,u,c=e.referenced,d=e.referenced_external,m=e.referenced_embedded_payloads,p=[],_=[];if(c)for(var f of c)p.push(t.readManifestEntry(f));if(d)for(var g of d)p.push(o("WebBloksDataModule").dangerouslyCreateLocalStateDataManifestEntry_DO_NOT_USE(g,t.readVariable(g)));if(l!=null)for(var h of Object.entries(l)){var y=h[0],C=h[1],b=o("WebBloksScopedIds").getScopedVariableIdAtDepth(t.scope,y,t.scope.length,"INTERNAL_VARIABLE"),v=o("WebBloksDataModule").dangerouslyCreateLocalStateDataManifestEntry_DO_NOT_USE(b,C);p.push(v)}if(m)for(var S of m)_.push(t.readPayload(S));var R=t.objectSet.environment.traversalKeys,L=t.getBaseSourceMapNode(),E=L==null?void 0:L.getSourceMapID(),k=L==null?void 0:L.getLoggingID(),I=null,T=o("WebBloksModelParser").parseBloksModelFromJSON(o("WebBloksUtils").cast(e.tree),R,I);a&&(T=T.makeDeepCopyWithNewClientIds(i?t.scope.slice():null,R));var D=o("WebBloksModelParser").parseBloksTreeResources(babelHelpers.extends({},e,{data:[].concat((s=e.data)!=null?s:[],p),embedded_payloads:[].concat((u=e.embedded_payloads)!=null?u:[],_)}),T,R);return new(r("WebBloksParseResult"))(T,D,k)}l.inflateBloksDataFromBloksPayloadToBloksParseResult=e}),98);
__d("WebBloksGetPayload",["WebBloksInflate"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=e.createScopedContext(),a=e.readPayload(t),i=o("WebBloksInflate").inflateBloksDataFromBloksPayloadToBloksParseResult(a.payload.layout.bloks_payload,r,t,!0,!0,n);return i}l.default=e}),98);
__d("WebBloksGetScript",[],(function(t,n,r,o,a,i){function e(e,t){return e.treeManager.getCommittedTreeResources().functionTable.get(t)}i.default=e}),66);
__d("WebBloksGetState",["WebBloksLegacyTraverser","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=String(t),r=e.bloksContext.bkContextKeyStates.get(n);if(!r){var a=o("WebBloksUtils").nullthrows(o("WebBloksLegacyTraverser").getStateInitializer(e.objectSet.environment.traversalKeys,e.treeManager,n),"No state initializer available for id "+n);r=e.executeCatch(a,o("WebBloksUtils").EMPTY_ARRAY),e.bloksContext.bkContextKeyStates.set(n,r)}return r}l.default=e}),98);
__d("WebBloksGetTemplateArg",["WebBloksErrors","WebBloksScopedIds"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=e.scope;if(n===0)return e.readExpandedVariable(t);if(!r)throw new(o("WebBloksErrors")).WebBloksError("Keypath must be set on environment if trying to GetTemplateArg on a depth larger than 0.");if(n>r.length)throw new(o("WebBloksErrors")).WebBloksError("Depth supplied should never exceed the size of the key path.");var a=o("WebBloksScopedIds").getScopedVariableIdAtDepth(r,t,n,"EXPANDED_VARIABLE");return e.readExpandedVariable(a)}l.default=e}),98);
__d("WebBloksGetValue",[],(function(t,n,r,o,a,i){function e(e,t){return e.readValue(t)}i.default=e}),66);
__d("WebBloksGetVariable2",[],(function(t,n,r,o,a,i){function e(e,t){return e.readVariable(t)}i.default=e}),66);
__d("WebBloksGetVariableWithScope",["WebBloksErrors","WebBloksScopedIds"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=e.scope;if(n===0)return e.readVariable(t);if(r==null)throw new(o("WebBloksErrors")).WebBloksError("Keypath must be set on environment if trying to WriteLocalState on a depth larger than 0.");if(n>r.length)throw new(o("WebBloksErrors")).WebBloksError("Depth supplied should never exceed the size of the key path.");var a=o("WebBloksScopedIds").getScopedVariableIdAtDepth(r,t,n,"INTERNAL_VARIABLE"),i=e.readVariable(a);return i==null&&(i=e.readVariable(t)),i}l.default=e}),98);
__d("WebBloksGetWidthV2",[],(function(t,n,r,o,a,i){function e(e,t,n){var r,o,a=(r=t.uiMutableContainer.domNode)==null?void 0:r.current;return(o=a==null?void 0:a.clientWidth)!=null?o:0}i.default=e}),66);
__d("WebBloksIndexOfChild",["WebBloksLegacyTraverser"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r,a,i=t;if(i==null||i.getId()==null)return e.objectSet.environment.logger.warn("bk.action.bloks.IndexOfChild called on a container without an ID"),-1;var l=o("WebBloksLegacyTraverser").findComponentByServerId(e.treeManager,i.getId(),e.objectSet.environment.traversalKeys),s=String(n);return(r=l==null||(a=l.getChildren_DEPRECATED())==null?void 0:a.findIndex(function(e){return e.getId()===s}))!=null?r:-1}l.default=e}),98);
__d("WebBloksInflateSync",["WebBloksModelParser","WebBloksSourceMapNode","WebBloksSourceMapPayloadMetadata","WebBloksSourceMapRootNode"],(function(t,n,r,o,a,i,l){function e(e,t){var n=null;return o("WebBloksModelParser").parseBloksModelFromJSON(t,e.objectSet.environment.traversalKeys,n)}l.default=e}),98);
__d("WebBloksInsertChildrenAfter",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("WebBloksChildrenOperationsHelper").insertChildrenAfter(e.treeManager,n,""+r)}l.default=e}),98);
__d("WebBloksInsertEmbeddedChildrenAfter",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a){o("WebBloksChildrenOperationsHelper").insertEmbeddedChildrenAfter(e.treeManager,n,""+r)}l.default=e}),98);
__d("WebBloksInsertEmbeddedChildrenBefore",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a){o("WebBloksChildrenOperationsHelper").insertEmbeddedChildrenBefore(e.treeManager,n,""+r)}l.default=e}),98);
__d("WebBloksJsonDecode",[],(function(t,n,r,o,a,i){function e(e,t){return JSON.parse(t)}i.default=e}),66);
__d("WebBloksJsonEncode",[],(function(t,n,r,o,a,i){function e(e,t){return JSON.stringify(t,function(e,t){return typeof t=="boolean"?t?1:0:t})}i.default=e}),66);
__d("WebBloksJsonEncodeV3",[],(function(t,n,r,o,a,i){function e(e,t){return JSON.stringify(t)}i.default=e}),66);
__d("WebBloksMakeFlat",[],(function(t,n,r,o,a,i){function e(e){for(var t={},n=0;n<(arguments.length<=1?0:arguments.length-1)-1;n+=2){var r=String(n+1<1||arguments.length<=n+1?void 0:arguments[n+1]);t[r]=n+1+1<1||arguments.length<=n+1+1?void 0:arguments[n+1+1]}return t}i.default=e}),66);
__d("WebBloksMapClone",[],(function(t,n,r,o,a,i){function e(e,t){return babelHelpers.extends({},t)}i.default=e}),66);
__d("WebBloksMapFilter",["WebBloksBooleanUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r={};for(var a of Object.entries(t)){var i=a[0],l=a[1],s=n(e,i,l);o("WebBloksBooleanUtils").isTrue(s)&&(r[i]=l)}return r}l.default=e}),98);
__d("WebBloksMapGet",[],(function(t,n,r,o,a,i){function e(e,t,n){return t[n]}i.default=e}),66);
__d("WebBloksMapKeys",[],(function(t,n,r,o,a,i){function e(e,t){return Object.keys(t)}i.default=e}),66);
__d("WebBloksMapMake",[],(function(t,n,r,o,a,i){function e(e,t,n){for(var r={},o=0;o<t.length;o++)r[t[o]]=n[o];return r}i.default=e}),66);
__d("WebBloksMapMerge",[],(function(t,n,r,o,a,i){function e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Object.assign.apply(Object,[{}].concat(n))}i.default=e}),66);
__d("WebBloksMapRemove",[],(function(t,n,r,o,a,i){function e(e,t,n){delete t[n]}i.default=e}),66);
__d("WebBloksMapUpdate",[],(function(t,n,r,o,a,i){function e(e,t,n){Object.assign(t,n)}i.default=e}),66);
__d("WebBloksMapValues",[],(function(t,n,r,o,a,i){function e(e,t){return Array.from(Object.values(t))}i.default=e}),66);
__d("WebBloksEqual",["WebBloksBooleanUtils"],(function(t,n,r,o,a,i,l){function e(e,t){return e===t||e==null&&t==null||o("WebBloksBooleanUtils").isTrue(e)&&o("WebBloksBooleanUtils").isTrue(t)||o("WebBloksBooleanUtils").isFalse(e)&&o("WebBloksBooleanUtils").isFalse(t)}l.isEqual=e}),98);
__d("WebBloksMatch",["WebBloksEqual"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){for(var a of n)if(o("WebBloksEqual").isEqual(a.case,t))return a.expression(e);return r(e)}l.default=e}),98);
__d("WebBloksRegexUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.match(/\(\?([imsuy]+)\)/);if(!t)return{normalizedPattern:e};var n=t[1],r=t.index,o=r+t[0].length,a=e.slice(0,r)+e.slice(o);return{normalizedPattern:a,flags:n}}i.extractPatternAndFlags=e}),66);
__d("WebBloksMatchesRegex",["WebBloksRegexUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=o("WebBloksRegexUtils").extractPatternAndFlags(n),a=r.normalizedPattern,i=r.flags,l=new RegExp(a,i);return!!t.match(l)}l.default=e}),98);
__d("WebBloksMinsTypeOf",[],(function(t,n,r,o,a,i){function e(e,t){if(t==null)return 0;if(Array.isArray(t))return 6;switch(typeof t){case"boolean":return 1;case"string":return 2;case"number":return 4;case"function":return 8;case"object":return 7}return-1}i.default=e}),66);
__d("WebBloksNavigationCloseScreen",[],(function(t,n,r,o,a,i){function e(e){e.objectSet.navigationManager.pop()}i.default=e}),66);
__d("WebBloksNumberAnd",[],(function(t,n,r,o,a,i){function e(e,t,n){return t&n}i.default=e}),66);
__d("WebBloksNumberEq",["WebBloksEqual"],(function(t,n,r,o,a,i,l){function e(e,t,n){return o("WebBloksEqual").isEqual(t,n)}l.default=e}),98);
__d("WebBloksNumberGt",[],(function(t,n,r,o,a,i){function e(e,t,n){return t>n}i.default=e}),66);
__d("WebBloksNumberLt",[],(function(t,n,r,o,a,i){function e(e,t,n){return t<n}i.default=e}),66);
__d("WebBloksNumberMod",[],(function(t,n,r,o,a,i){function e(e,t,n){return t%n}i.default=e}),66);
__d("WebBloksNumberOr",[],(function(t,n,r,o,a,i){function e(e,t,n){return t|n}i.default=e}),66);
__d("WebBloksNumberRand",[],(function(t,n,r,o,a,i){function e(e,t,n){return Math.floor(Math.random()*(n-t))+t}i.default=e}),66);
__d("WebBloksCollectionHelpers",["WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=e==="column",n=t?"height":"width",r=t?"width":"height",o=t?"marginTop":"marginLeft",a=t?"marginBottom":"marginRight",i=t?"top":"left",l=t?"bottom":"right";return{mainAxisSize:n,crossAxisSize:r,mainAxisMarginStart:o,mainAxisMarginEnd:a,start:i,end:l}}function s(e,t){var n,r=(n=e.getStyle("collection"))==null?void 0:n.get(t);return o("WebBloksUtils").isPercentage(r)}function u(t){var n,r=t.getValues(),o=r.children,a=r.direction,i=e(a),l=i.mainAxisSize,u=(n=o&&o.some(function(e){return s(e,l)}))!=null?n:!1;return u?a==="column"?"size":"inline-size":"normal"}function c(e){return e.get("measurement_version_internal_use_only")==="v2"}l.getDirectionPropNames=e,l.hasCollectionDimensionInPct=s,l.getContainerType=u,l.shouldUseWebBloksCollectionV2=c}),98);
__d("WebBloksNormaliseYogaDimension",["WebBloksCollectionHelpers","WebBloksConstants","WebBloksModel"],(function(t,n,r,o,a,i,l){"use strict";var e,s=!0,u=new Set([(e=o("WebBloksConstants")).BK_FLEXBOX,e.BK_IMAGE,e.BK_COLLECTION,e.BK_SLIDER]),c="$GROW_WIDTH",d="$GROW_HEIGHT";function m(e,t){if(!(!s||!u.has(e.styleId))){var n=e.getSubNode("_style"),r=n==null?void 0:n.get("width"),a=n==null?void 0:n.get("height"),i=n==null?void 0:n.get("position_type"),l=t[t.length-2];if(r===void 0&&S(e)&&!e.get("use_correct_measure")?(l!=null&&y(l,"width")?v(e,"grow",1):v(e,"width","100%"),f(t,t.length-1,"width","100%")):e.styleId===o("WebBloksConstants").BK_SLIDER?f(t,t.length-1,"width","100%"):typeof r=="string"&&r.endsWith("%")&&f(t,t.length-1,"width",r),!(r!=null&&n!=null&&n.get("aspect_ratio"))){if(a===void 0&&e.styleId===o("WebBloksConstants").BK_COLLECTION&&!e.get("use_correct_measure"))l!=null&&y(l,"height")?v(e,"grow",1):v(e,"height","100%"),f(t,t.length-1,"height","100%");else if(typeof a=="string"&&a.endsWith("%")&&i!=="absolute")if(b(l,"height")==null){var m=p(t,"height");m?v(l,"height","100%"):f(t,t.length-1,"height",a)}else f(t,t.length-1,"height",a)}e.set(c,void 0),e.set(d,void 0)}}function p(e,t){for(var n=e.length-2;n>=0;n--){var r=e[n];if(!C(e[n+1],r)||!_(r))return null;if(b(r,t)!=null)return r}}function _(e){var t;return e!=null&&((t=e.get("children"))==null?void 0:t.length)===1}function f(e,t,n,r){var a,i=e[t],l=e[t-1];if(l&&e[t-2]!=null&&(l.styleId===o("WebBloksConstants").BK_SCREEN_WRAPPER_LEGACY||l.styleId===o("WebBloksConstants").BK_SCREEN_WRAPPER))return f(e,t-2,n,r);if(l&&l.styleId==="bk.components.Collection"&&o("WebBloksCollectionHelpers").shouldUseWebBloksCollectionV2(l)){var s=l.getValues().direction;return!(s==="row"&&n==="height"||s==="column"&&n==="width")}if(!l||l.styleId!==o("WebBloksConstants").BK_FLEXBOX||b(l,n)!=null||b(l,"grow")===0)return v(i,n,r),!0;var u=((a=l.get("children"))==null?void 0:a.length)===1,c=y(l,n);if(u){var d=f(e,t-1,n,r);return d?(b(i,n)!=null&&v(i,n,void 0),c&&b(i,"grow")==null&&v(i,"grow",1)):v(i,n,r),!0}return c?(v(i,n,r),g(e,t-1,n),!0):C(i,l)?(g(e,t-1,n),!1):(v(i,n,r),g(e,t-1,n),!0)}function g(e,t,n){for(var r=t;r>=0;r--){var a=e[r];if(a.styleId!==o("WebBloksConstants").BK_FLEXBOX||b(a,n)!==null||b(a,"grow")===0||a.get(n==="width"?c:d))break;a.set(n==="width"?c:d,!0);var i=e[r-1];if(i){if(y(i,n)){b(a,"grow")==null&&(v(a,"grow",1),v(a,"justifyContent","inherit"));continue}else if(C(a,i))continue}v(a,n,"100%")}}function h(e){return e.styleId!==o("WebBloksConstants").BK_FLEXBOX?!1:e.get("flex_direction")==="column"||e.get("flex_direction")==="column_reverse"}function y(e,t){var n=h(e);return n&&t==="height"||!n&&t==="width"}function C(e,t){var n,r,a;return!t||t.styleId!==o("WebBloksConstants").BK_FLEXBOX?!1:((n=(r=(a=e.getStyle("flex"))==null?void 0:a.get("align_self"))!=null?r:t.get("align_items"))!=null?n:"stretch")==="stretch"}function b(e,t){var n,r;return(n=e==null||(r=e.getSubNode(o("WebBloksConstants").BK_STYLE_ATTR))==null?void 0:r.get(t))!=null?n:null}function v(e,t,n){var r=e.get(o("WebBloksConstants").BK_STYLE_ATTR);if(r){var a=r.getValues()[t];if(a!==n){var i=r.makeCopy();i.getValues()[t]=n,e.set(o("WebBloksConstants").BK_STYLE_ATTR,i)}}else{var l,s=(l={},l[t]=n,l);e.getValues()[o("WebBloksConstants").BK_STYLE_ATTR]=new(o("WebBloksModel")).WebBloksModel(o("WebBloksConstants").BK_FLEX,s)}}function S(e){return e.styleId===o("WebBloksConstants").BK_COLLECTION}function R(e,t,n){n===void 0&&(n=[]),n.push(e);var r=e.styleId,a=t[r];if(a!=null){var i=a.subnodes,l=a.plural_subnodes;if(i)for(var s of i){var u=e.getSubNode(s);if(u!=null){var c=R(u,t,n);e.set(s,c)}}if(l){for(var d of l)if(d!==o("WebBloksConstants").CHILD_TEMPLATES){var p=e.getSubNodes(d);p!=null&&e.set(d,p.map(function(e){return R(e,t,n)}))}}}return m(e,n),n.pop(),e}l.normaliseYogaDimensions=m,l.normaliseBoundModel=R}),98);
__d("WebBloksBind",["WebBloksConstants","WebBloksErrors","WebBloksInterpreterEnvironment","WebBloksModel","WebBloksNormaliseYogaDimension","WebBloksScopedIds","WebBloksScriptExecutor","WebBloksUpdateTraversal","WebBloksUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="$DESCENDANT_BIND_VARIABLE_DEPENDENCIES",s="$DESCENDANT_EXPANDED_VARIABLES",u=(function(){function e(e,t,n,r){if(this.previousVariableDependencies=o("WebBloksUtils").EMPTY_MAP,this.expandedVariables=new Map,this.bloksContext=e,this.resources=t,this.clientIdToScopedIdMapper=n,r)if(this.nextCache=new c(r.bindCache),this.cache=r.bindCache,this.previousExpandedVariables=r.expandedVariables,this.variablesChanged=new Set,r.dependencies){this.previousVariableDependencies=r.dependencies;for(var a of r.dependencies){var i=a[0],l=a[1];l!==t.variables.get(i)&&this.variablesChanged.add(i)}}else this.previousVariableDependencies=o("WebBloksUtils").EMPTY_MAP;else this.nextCache=new c(null),this.cache=new c(null),this.previousExpandedVariables=o("WebBloksUtils").EMPTY_MAP,this.previousVariableDependencies=o("WebBloksUtils").EMPTY_MAP,this.variablesChanged=void 0}var t=e.prototype;return t.apply=function(n,a,i,l,s){var t,u,c=n,d=c.getExpression(o("WebBloksConstants").ON_BIND);if(d==null)return c;var m=new(r("WebBloksInterpreterEnvironment"))(this.bloksContext,d.getSourceMapNode(),"BIND");m.expandedVariablesOverride=this.expandedVariables,m.scope=(t=c.keyPath)!=null?t:o("WebBloksUtils").EMPTY_KEY_PATH,m.variableAccessLog=l,m.resources=this.resources;for(var p=o("WebBloksScriptExecutor").execute(m,d.getValue(),o("WebBloksUtils").EMPTY_ARRAY),_=null,f=c.getId(),g=(u=c.keyPath)!=null?u:[],v=this.bloksContext.objectSet.environment.traversalKeys,S=p.length>0&&!Array.isArray(p[0]),R=0;R<p.length;R++){var L=null,E=void 0,k=void 0;if(S)k=p[R],E=p[++R];else{var I=p[R];L=I[0]==null?null:""+I[0],k=""+I[1],E=I[2]}var T=void 0;if(h(k,c.styleId,v)){var D=C(this,c,i,g,s,E,v);for(var x of D)_=this.addToTemplateCache(_,x);T=D}else if(y(k,c.styleId,v)){var $=b(this,c,i,g,s,E,v);T=$,$!=null&&(_=this.addToTemplateCache(_,$))}else T=E;if(S||L===f)c=e.applyOperation(c,a,k,T);else throw new(o("WebBloksErrors")).WebBloksError('Encountered binding targeted for a descendant from bind script "'+k+'"')}return this.nextCache.cacheUnboundChildTemplates(c,_),c},t.addToTemplateCache=function(t,n){var e=t!=null?t:new Map;return e.set(n.clientId,n),e},t.addExpandedVariable=function(t,n){if(this.expandedVariables.set(t,n),this.variablesChanged){var e=this.previousExpandedVariables.get(t);if(e!==n){var r;(r=this.variablesChanged)==null||r.add(t)}}},e.applyOperation=function(n,r,o,a){return e.applyAttribute(n,r,o,a)},e.applyAttribute=function(n,r,o,a){if(n!==r||r.get(o)!==a){var t=e.ensureUnique(n,r);return t.set(o,a),t}return n},e.ensureUnique=function(t,n){return t===n?n.makeBoundCopy():t},e})(),c=(function(){function e(e){var t,n,r;this.expandedVariables=(t=e==null?void 0:e.expandedVariables)!=null?t:new Map,this.unboundChildTemplates=(n=e==null?void 0:e.unboundChildTemplates)!=null?n:new Map,this.variableDependencies=(r=e==null?void 0:e.variableDependencies)!=null?r:new Map}var t=e.prototype;return t.transferCache=function(t,n,r){var e=this;t.traverse(function(t){return e.$1(t,n),!1},r)},t.cacheUnboundChildTemplates=function(t,n){n&&this.unboundChildTemplates.set(t.clientId,n)},t.cacheVariableDependencies=function(t,n){this.variableDependencies.set(t.clientId,n)},t.cacheExpandedVariables=function(t,n){n.size>0&&this.expandedVariables.set(t.clientId,n)},t.getVariableDependencies=function(t){return this.variableDependencies.get(t.clientId)},t.getExpandedVariables=function(t){return this.expandedVariables.get(t.clientId)},t.getUnboundChildTemplates=function(t){return t?this.unboundChildTemplates.get(t.clientId):null},t.$1=function(t,n){var e=t.clientId,r=this.expandedVariables.get(e);r&&n.expandedVariables.set(e,r);var o=this.unboundChildTemplates.get(e);o&&n.unboundChildTemplates.set(e,o);var a=this.variableDependencies.get(e);a&&n.variableDependencies.set(e,a)},e})();function d(e,t,n,r,a){var i=r!=null?n.withVariableUpdates(r):n,l=m(e,t,i,a);return l.boundModel=o("WebBloksNormaliseYogaDimension").normaliseBoundModel(l.boundModel,e.objectSet.environment.traversalKeys),l}function m(e,t,n,r){var o=new u(e,n,e.scopedClientIdMapper,r);return p(t,r,o)}function p(e,t,n){var r=new Set,a=new Map,i=_(e,t==null?void 0:t.boundModel,n,r,a),l=new Map;for(var s of r)l.set(s,n.resources.variables.get(s));return o("WebBloksUtils").putAll(l,n.expandedVariables),{unboundModel:e,boundModel:i,variables:n.resources.variables,expandedVariables:n.expandedVariables,dependencies:l,bindCache:n.nextCache}}function _(t,n,r,a,i){if(t.get(o("WebBloksConstants").DESCENDANT_HAS_BIND)===!1)return t;var l=t,c=new Set,d=new Map;l=r.apply(l,t,n,c,d),l=f(l,t,n,r,c,d),d.size>0&&(l=u.applyAttribute(l,t,s,d)),l!==t&&(l=u.applyAttribute(l,t,e,c));for(var m of c)a.add(m);return o("WebBloksUtils").putAll(i,d),l}function f(e,t,n,r,a,i){var l=e,s=r.bloksContext.objectSet.environment.traversalKeys[l.styleId];if(s==null)return l;var c=s.subnodes,d=s.plural_subnodes;if(c)for(var m of c){var p=l.getSubNode(m);if(p instanceof o("WebBloksModel").WebBloksModel){var f=n==null?void 0:n.getSubNode(m);if(f instanceof o("WebBloksModel").WebBloksModel||f==null){var h=_(p,f,r,a,i);l=u.applyAttribute(l,t,m,h)}}}if(d){for(var y of d)if(y!==o("WebBloksConstants").CHILD_TEMPLATES){for(var C=l.getChildren_DEPRECATED(y),b=C,v=n==null?void 0:n.getChildren_DEPRECATED(y),S=0,R=0;R<C.length;R++){var L=C[R];if(L){var E=g(L,v,R),k=_(L,E,r,a,i);if(k!==L)if(b===C&&(b=C.slice()),k.styleId===o("WebBloksConstants").BK_INTERNAL_MERGE_WITH_BIND){var I,T=k.getChildren_DEPRECATED();(I=b).splice.apply(I,[R+S,1].concat(T)),S+=T.length-1}else b[R+S]=k}}b!==C&&(l=u.applyAttribute(l,t,y,b))}}return l}function g(e,t,n){var r;if(t)return((r=t[n])==null?void 0:r.clientId)===e.clientId?t[n]:t.find(function(t){return t.clientId===e.clientId})}function h(e,t,n){var r;return!!((r=n[t])!=null&&(r=r.plural_subnodes)!=null&&r.includes(e))}function y(e,t,n){var r;return!!((r=n[t])!=null&&(r=r.subnodes)!=null&&r.includes(e))}function C(e,t,n,r,o,a,i){return a.map(function(a){return b(e,t,n,r,o,a,i)}).filter(Boolean)}function b(e,t,n,r,a,i,l){if(i==null)return null;var s;Array.isArray(i)?s={templateId:i[0],expandedVariables:new Map(Object.entries(i[1])),scopeKey:i[2],keyPathBase:r}:s=i;var u;if(typeof s.templateId=="number"){var c=s.templateId,d=t.getChildren_DEPRECATED(o("WebBloksConstants").CHILD_TEMPLATES);if(c<0||c>=d.length)throw new(o("WebBloksErrors")).WebBloksError("Invalid child template index "+c+" for "+s.scopeKey);u=d[c]}else{var m=e.resources.templates.get(s.templateId);if(m==null)throw new(o("WebBloksErrors")).WebBloksError("No such template in tree resources: "+s.templateId);u=m}var p=e.clientIdToScopedIdMapper.getScopedClientId(u,s.scopeKey),_=o("WebBloksScopedIds").extendKeyPath(s.keyPathBase,p),f=o("WebBloksScopedIds").buildKeypathBase(_,"EXPANDED_VARIABLE");s.expandedVariables.size>0&&v(e,s.expandedVariables,f,a);var g=e.cache.getUnboundChildTemplates(n);if(g){var h=g.get(p);if(h)return h}return o("WebBloksUpdateTraversal").runUpdateTraversal(u,{apply:function(n){return e.clientIdToScopedIdMapper.copyModelWithKeyPath(n,_,s.scopeKey)},onUpdatesApplied:function(){}},l)}function v(e,t,n,r){for(var a of t.entries()){var i=a[0],l=a[1],s=o("WebBloksScopedIds").buildScopedVariableIdentifier(i,n);e.addExpandedVariable(s,l),r.set(s,l)}}l.bind=d}),98);
__d("WebBloksOneTimeBind",["WebBloksBind"],(function(t,n,r,o,a,i,l){function e(e,t){var n=e.treeManager,r=n.getCommittedTreeResources(),a=o("WebBloksBind").bind(e.bloksContext,t,r);return a.boundModel}l.default=e}),98);
__d("WebBloksOpenBottomSheet",["WebBloksScreen"],(function(t,n,r,o,a,i,l){function e(e,t,n){e.objectSet.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromBloksModel(e.objectSet,t,e.treeManager.initialTreeResources,{isModal:!0,ownerContext:e}))}l.default=e}),98);
__d("WebBloksOpenBottomSheetV2",["WebBloksScreen"],(function(t,n,r,o,a,i,l){function e(e,t,n){e.objectSet.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromBloksParseResult(e.objectSet,t,{isModal:!0,ownerContext:e}))}l.default=e}),98);
__d("WebBloksOpenDialog",["WebBloksScreen"],(function(t,n,r,o,a,i,l){function e(e,t,n){e.objectSet.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromBloksModel(e.objectSet,t,e.treeManager.initialTreeResources,{isModal:!0,ownerContext:e}))}l.default=e}),98);
__d("WebBloksOpenDialogV2",["WebBloksScreen"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){e.treeManager.synchronouslyAddTreeResources(t),e.objectSet.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromBloksParseResult(e.objectSet,t,{isModal:!0,ownerContext:e}))}l.default=e}),98);
__d("WebBloksOpenFullScreenV4",["WebBloksScreen","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a){var i=t.get("navbar_data"),l=t.get("loading_screen"),s=r?r.get("presentation_mode")==="modal":!1,u=t.get("url_relative_path"),c=t.get("ttrc_marker_id"),d={isModal:s,loadingNavbar:i,loadingScreen:l,initialTreeResources:e.bloksContext.treeManager.initialTreeResources,ownerContext:e},m=t.get("app_id");o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-ttrc-start",{detail:{appId:m,markerId:c}}),e.objectSet.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromAppId(e.objectSet,m,n,d,u))}l.default=e}),98);
__d("WebBloksOpenScreen",["WebBloksScreen","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-ttrc-start",{detail:{appId:t}}),e.objectSet.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromAppId(e.objectSet,t,n))}l.default=e}),98);
__d("WebBloksOpenScreenByRoute",["WebBloksScreen","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-ttrc-start",{detail:{appId:n}}),e.objectSet.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromAppId(e.objectSet,n,void 0,{ownerContext:e},t))}l.default=e}),98);
__d("WebBloksOpenUniversalLink",["WebBloksURLUtils"],(function(t,n,r,o,a,i,l){function e(e,t){o("WebBloksURLUtils").openURL(o("WebBloksURLUtils").qualify(t),!0)}l.default=e}),98);
__d("WebBloksOpenUrl",["WebBloksURLUtils"],(function(t,n,r,o,a,i,l){function e(e,t){o("WebBloksURLUtils").openURL(o("WebBloksURLUtils").qualify(t))}l.default=e}),98);
__d("WebBloksOpenUrlV2",["WebBloksBooleanUtils","WebBloksURLUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=o("WebBloksURLUtils").qualify(t),a=n==null?void 0:n.get("url_params");a!=null&&(r=o("WebBloksURLUtils").addQueryParamsToUrl(r,a)),o("WebBloksURLUtils").openURL(r,o("WebBloksBooleanUtils").isTrue(n==null?void 0:n.get("open_in_new_tab")))}l.default=e}),98);
__d("WebBloksParseEmbeddedV2",["WebBloksInflate"],(function(t,n,r,o,a,i,l){function e(e,t){var n=t.layout.bloks_payload;return o("WebBloksInflate").inflateBloksDataFromBloksPayloadToBloksParseResult(n,e,null,!0,!1,null)}l.default=e}),98);
__d("WebBloksParseEmbedded",["WebBloksParseEmbeddedV2"],(function(t,n,r,o,a,i,l){function e(e,t){var n=JSON.parse(t);return r("WebBloksParseEmbeddedV2")(e,n)}l.default=e}),98);
__d("WebBloksParseHoistedPayload",["WebBloksErrors","WebBloksInflate"],(function(t,n,r,o,a,i,l){function e(e,t){var n,r=(n=e.getResources())==null||(n=n.payloads.get(t))==null?void 0:n.payload;if(r==null)throw new(o("WebBloksErrors")).WebBloksError("Could not find embedded payload for ID: "+t);var a=r.layout.bloks_payload;return o("WebBloksInflate").inflateBloksDataFromBloksPayloadToBloksParseResult(a,e,t,!0,!1,null)}l.default=e}),98);
__d("WebBloksPopBottomSheet",[],(function(t,n,r,o,a,i){function e(e,t,n){e.objectSet.navigationManager.pop()}i.default=e}),66);
__d("WebBloksPrependChildren",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n){o("WebBloksChildrenOperationsHelper").prependChildren(e.treeManager,t.toString(),n)}l.default=e}),98);
__d("WebBloksPrependEmbeddedChildren",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("WebBloksChildrenOperationsHelper").prependEmbeddedLayoutChildren(e.treeManager,t,n)}l.default=e}),98);
__d("WebBloksPushBottomSheetV2",["WebBloksScreen"],(function(t,n,r,o,a,i,l){function e(e,t){e.objectSet.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromBloksParseResult(e.objectSet,t,{isModal:!0,ownerContext:e}))}l.default=e}),98);
__d("WebBloksReduce",["WebBloksLegacyTraverser"],(function(t,n,r,o,a,i,l){function e(e,t){o("WebBloksLegacyTraverser").reduce(e.treeManager,""+t,e.executeCatch,e.objectSet.environment.traversalKeys)}l.default=e}),98);
__d("WebBloksRef",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.$1=e}var t=e.prototype;return t.get=function(){return this.$1},t.set=function(t){this.$1=t},e})();i.default=e}),66);
__d("WebBloksRefMake",["WebBloksRef"],(function(t,n,r,o,a,i,l){function e(e,t){return new(r("WebBloksRef"))(t)}l.default=e}),98);
__d("WebBloksRefRead",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e,t){if(e.getScriptMode()==="BIND")throw new(o("WebBloksErrors")).WebBloksScriptError("Cannot read ref value during bind");return t.get()}l.default=e}),98);
__d("WebBloksRefWrite",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e,t,n){if(e.getScriptMode()==="BIND")throw new(o("WebBloksErrors")).WebBloksScriptError("Cannot write to ref value during bind");t.set(n)}l.default=e}),98);
__d("WebBloksReflow",["WebBloksLegacyTraverser"],(function(t,n,r,o,a,i,l){function e(e,t){o("WebBloksLegacyTraverser").reflow(e.treeManager,""+t,e.executeCatch,e.objectSet.environment.traversalKeys)}l.default=e}),98);
__d("WebBloksRefresh",[],(function(t,n,r,o,a,i){function e(e,t){e.objectSet.navigationManager.refresh()}i.default=e}),66);
__d("WebBloksRemoveChild",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n){o("WebBloksChildrenOperationsHelper").removeModelById(e.treeManager,""+n)}l.default=e}),98);
__d("WebBloksRemoveChildrenBetween",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("WebBloksChildrenOperationsHelper").removeChildren(e.treeManager,t,""+n,""+r)}l.default=e}),98);
__d("WebBloksReplaceChild",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("WebBloksChildrenOperationsHelper").replaceChild(e.treeManager,""+r,n)}l.default=e}),98);
__d("WebBloksReplaceChildren",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n){o("WebBloksChildrenOperationsHelper").replaceLayoutChildren(e.treeManager,""+t,n)}l.default=e}),98);
__d("WebBloksReplaceChildrenAfter",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a){o("WebBloksChildrenOperationsHelper").replaceChildrenAfter(e.treeManager,String(r),n)}l.default=e}),98);
__d("WebBloksReplaceEmbeddedChild",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("WebBloksChildrenOperationsHelper").replaceEmbeddedChild(e.treeManager,""+r,n)}l.default=e}),98);
__d("WebBloksReplaceEmbeddedChildren",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("WebBloksChildrenOperationsHelper").replaceEmbeddedLayoutChildren(e.treeManager,t,n)}l.default=e}),98);
__d("WebBloksReplaceEmbeddedChildrenAfter",["WebBloksChildrenOperationsHelper"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a){o("WebBloksChildrenOperationsHelper").replaceEmbeddedChildrenAfter(e.treeManager,String(r),n)}l.default=e}),98);
__d("WebBloksRequestFocus",["WebBloksConstants"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r,a=e.bloksContext.getAssociatedObject_INTERNAL(t,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT);a==null||(r=a.ref)==null||(r=r.current)==null||r.requestFocus()}l.default=e}),98);
__d("WebBloksRotate3D",[],(function(t,n,r,o,a,i){function e(e,t,n,r,o,a){return t.rotate3D(n,r,o,a),t}i.default=e}),66);
__d("WebBloksScale3D",[],(function(t,n,r,o,a,i){function e(e,t,n,r,o){return t.scale(n,r,o),t}i.default=e}),66);
__d("WebBloksSessionStoreGet",[],(function(t,n,r,o,a,i){var e=Object.create(null);function l(t){return e}i.default=l}),66);
__d("Transform3DForWebBloks",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.matrix=[[e[0],e[1],e[2],e[3]],[e[4],e[5],e[6],e[7]],[e[8],e[9],e[10],e[11]],[e[12],e[13],e[14],e[15]]]}var t=e.prototype;return t.toString=function(){return this.matrix.flat().join(",")},t.translate=function(t,n,r){var e=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[t,n,r,1]];return this.matrix=u(e,this.matrix),this},t.scale=function(t,n,r){var e=[[t,0,0,0],[0,n,0,0],[0,0,r,0],[0,0,0,1]];return this.matrix=u(e,this.matrix),this},t.rotate3D=function(t,n,r,o){for(var e=s(n,r,o),a=e.x_norm,i=e.y_norm,c=e.z_norm,d=l(),m=[[0,c,-i,0],[-c,0,a,0],[i,-a,0,0],[0,0,0,0]],p=m.map(function(e){return e.map(function(e){return Math.sin(t)*e})}),_=u(m,m).map(function(e){return e.map(function(e){return(1-Math.cos(t))*e})}),f=l(),g=0;g<4;g++)for(var h=0;h<4;h++)f[g][h]=d[g][h]+p[g][h]+_[g][h];return this.matrix=u(f,this.matrix),this},e})();function l(){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]}function s(e,t,n){var r=e*e,o=t*t,a=n*n,i=r+o+a;return{x_norm:e/i,y_norm:t/i,z_norm:n/i}}function u(e,t){for(var n=e.length,r=e[0].length,o=t[0].length,a=new Array(n),i=0;i<n;i++){a[i]=new Array(o);for(var l=0;l<o;l++){a[i][l]=0;for(var s=0;s<r;s++)a[i][l]+=e[i][s]*t[s][l]}}return a}i.default=e}),66);
__d("WebBloksSetAttr",["Transform3DForWebBloks","WebBloksConstants","WebBloksModel","WebBloksMutations","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,a){o("WebBloksUtils").nullthrows(t,"No model passed to setAttr");var i=n,l=a;if(n==="transform3d"&&a instanceof r("Transform3DForWebBloks")){var s=t.getSubNode("_style"),u={transform:"matrix3d("+a.toString()+")"},c=s!=null?s.makeCopy(u):new(o("WebBloksModel")).WebBloksModel(o("WebBloksConstants").BK_FLEX,u);i="_style",l=c}o("WebBloksMutations").updateProperty(e.treeManager,t,i,l)}l.default=e}),98);
__d("WebBloksShareText",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){navigator.share&&navigator.share({text:t})}i.default=e}),66);
__d("WebBloksShowToast",[],(function(t,n,r,o,a,i){function e(e,t,n,r){e.objectSet.toastManager.enqueueBloksModelToast(e,t,n)}i.default=e}),66);
__d("WebBloksShowToastV2",[],(function(t,n,r,o,a,i){function e(e,t,n,r){e.objectSet.toastManager.enqueueBloksParseResultToast(e,t,n)}i.default=e}),66);
__d("WebBloksSliderSetPosition",["WebBloksMutations"],(function(t,n,r,o,a,i,l){function e(e,t,n){o("WebBloksMutations").updateProperty(e.treeManager,t,"progress",n)}l.default=e}),98);
__d("WebBloksStringAsInteger",[],(function(t,n,r,o,a,i){function e(e,t){var n=parseInt(t,10);return Number.isNaN(n)?0:n}i.default=e}),66);
__d("WebBloksInt64",["WebBloksErrors"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){this.$1=e,this.$2=t}e.fromInt=function(n){if(-128<=n&&n<128){var t=e.$3[n];if(t)return t}var r=new e(n|0,n<0?-1:0);return-128<=n&&n<128&&(e.$3[n]=r),r},e.fromNumber=function(n){return Number.isNaN(n)||!Number.isFinite(n)?e.ZERO:n<=-e.$4?e.MIN_VALUE:n+1>=e.$4?e.MAX_VALUE:n<0?e.fromNumber(-n).negate():new e(n%e.$5|0,n/e.$5|0)},e.fromBits=function(n,r){return new e(n,r)},e.fromString=function(n,r){if(n.length==0)throw new(o("WebBloksErrors")).WebBloksError("number format error: empty string");var t=r||10;if(t<2||36<t)throw new(o("WebBloksErrors")).WebBloksError("radix out of range: "+t);if(n.charAt(0)=="-")return e.fromString(n.substring(1),t).negate();if(n.indexOf("-")>=0)throw new(o("WebBloksErrors")).WebBloksError('number format error: interior "-" character: '+n);for(var a=e.fromNumber(Math.pow(t,8)),i=e.ZERO,l=0;l<n.length;l+=8){var s=Math.min(8,n.length-l),u=parseInt(n.substring(l,l+s),t);if(s<8){var c=e.fromNumber(Math.pow(t,s));i=i.multiply(c).add(e.fromNumber(u))}else i=i.multiply(a),i=i.add(e.fromNumber(u))}return i};var t=e.prototype;return t.toInt=function(){return this.$1},t.toNumber=function(){return this.$2*e.$5+this.getLowBitsUnsigned()},t.toString=function(n){var t=n||10;if(t<2||36<t)throw new(o("WebBloksErrors")).WebBloksError("radix out of range: "+t);if(this.isZero())return"0";if(this.isNegative())if(this.equals(e.MIN_VALUE)){var r=e.fromNumber(t),a=this.div(r),i=a.multiply(r).subtract(this);return a.toString(t)+i.toInt().toString(t)}else return"-"+this.negate().toString(t);for(var l=e.fromNumber(Math.pow(t,6)),s=this,u="";;){var c=s.div(l),d=s.subtract(c.multiply(l)).toInt(),m=d.toString(t);if(s=c,s.isZero())return m+u;for(;m.length<6;)m="0"+m;u=""+m+u}},t.getLowBitsUnsigned=function(){return this.$1>=0?this.$1:e.$5+this.$1},t.getNumBitsAbs=function(){if(this.isNegative())return this.equals(e.MIN_VALUE)?64:this.negate().getNumBitsAbs();for(var t=this.$2!=0?this.$2:this.$1,n=31;n>0&&(t&1<<n)==0;n--);return this.$2!=0?n+33:n+1},t.isZero=function(){return this.$2==0&&this.$1==0},t.isNegative=function(){return this.$2<0},t.isOdd=function(){return(this.$1&1)==1},t.equals=function(t){return this.$2==t.$2&&this.$1==t.$1},t.lessThan=function(t){return this.compare(t)<0},t.greaterThan=function(t){return this.compare(t)>0},t.greaterThanOrEqual=function(t){return this.compare(t)>=0},t.compare=function(t){if(this.equals(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.subtract(t).isNegative()?-1:1},t.negate=function(){return this.equals(e.MIN_VALUE)?e.MIN_VALUE:this.not().add(e.ONE)},t.add=function(n){var t=this.$2>>>16,r=this.$2&65535,o=this.$1>>>16,a=this.$1&65535,i=n.$2>>>16,l=n.$2&65535,s=n.$1>>>16,u=n.$1&65535,c=0,d=0,m=0,p=0;return p+=a+u,m+=p>>>16,p&=65535,m+=o+s,d+=m>>>16,m&=65535,d+=r+l,c+=d>>>16,d&=65535,c+=t+i,c&=65535,e.fromBits(m<<16|p,c<<16|d)},t.subtract=function(t){return this.add(t.negate())},t.multiply=function(n){if(this.isZero())return e.ZERO;if(n.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE))return n.isOdd()?e.MIN_VALUE:e.ZERO;if(n.equals(e.MIN_VALUE))return this.isOdd()?e.MIN_VALUE:e.ZERO;if(this.isNegative())return n.isNegative()?this.negate().multiply(n.negate()):this.negate().multiply(n).negate();if(n.isNegative())return this.multiply(n.negate()).negate();if(this.lessThan(e.$8)&&n.lessThan(e.$8))return e.fromNumber(this.toNumber()*n.toNumber());var t=this.$2>>>16,r=this.$2&65535,o=this.$1>>>16,a=this.$1&65535,i=n.$2>>>16,l=n.$2&65535,s=n.$1>>>16,u=n.$1&65535,c=0,d=0,m=0,p=0;return p+=a*u,m+=p>>>16,p&=65535,m+=o*u,d+=m>>>16,m&=65535,m+=a*s,d+=m>>>16,m&=65535,d+=r*u,c+=d>>>16,d&=65535,d+=o*s,c+=d>>>16,d&=65535,d+=a*l,c+=d>>>16,d&=65535,c+=t*u+r*s+o*l+a*i,c&=65535,e.fromBits(m<<16|p,c<<16|d)},t.div=function(n){if(n.isZero())throw new(o("WebBloksErrors")).WebBloksError("division by zero");if(this.isZero())return e.ZERO;if(this.equals(e.MIN_VALUE)){if(n.equals(e.ONE)||n.equals(e.NEG_ONE))return e.MIN_VALUE;if(n.equals(e.MIN_VALUE))return e.ONE;var t=this.shiftRight(1),r=t.div(n).shiftLeft(1);if(r.equals(e.ZERO))return n.isNegative()?e.ONE:e.NEG_ONE;var a=this.subtract(n.multiply(r)),i=r.add(a.div(n));return i}else if(n.equals(e.MIN_VALUE))return e.ZERO;if(this.isNegative())return n.isNegative()?this.negate().div(n.negate()):this.negate().div(n).negate();if(n.isNegative())return this.div(n.negate()).negate();for(var l=e.ZERO,s=this;s.greaterThanOrEqual(n);){for(var u=Math.max(1,Math.floor(s.toNumber()/n.toNumber())),c=Math.ceil(Math.log(u)/Math.LN2),d=c<=48?1:Math.pow(2,c-48),m=e.fromNumber(u),p=m.multiply(n);p.isNegative()||p.greaterThan(s);)u-=d,m=e.fromNumber(u),p=m.multiply(n);m.isZero()&&(m=e.ONE),l=l.add(m),s=s.subtract(p)}return l},t.modulo=function(t){return this.subtract(this.div(t).multiply(t))},t.not=function(){return e.fromBits(~this.$1,~this.$2)},t.shiftLeft=function(n){var t=n;if(t&=63,t==0)return this;var r=this.$1;if(t<32){var o=this.$2;return e.fromBits(r<<t,o<<t|r>>>32-t)}else return e.fromBits(0,r<<t-32)},t.shiftRight=function(n){var t=n;if(t&=63,t==0)return this;var r=this.$2;if(t<32){var o=this.$1;return e.fromBits(o>>>t|r<<32-t,r>>t)}else return e.fromBits(r>>t-32,r>=0?0:-1)},e})();e.$3={},e.$6=65536,e.$5=e.$6*e.$6,e.$7=e.$5*e.$5,e.$4=e.$7/2,e.ZERO=e.fromInt(0),e.ONE=e.fromInt(1),e.NEG_ONE=e.fromInt(-1),e.MAX_VALUE=e.fromBits(-1,2147483647),e.MIN_VALUE=e.fromBits(0,-2147483648),e.$8=e.fromInt(1<<24),l.default=e}),98);
__d("WebBloksStringAsLong",["WebBloksErrors","WebBloksInt64"],(function(t,n,r,o,a,i,l){function e(e,t){try{var n=r("WebBloksInt64").fromString(String(t));return n.toString()}catch(t){throw new(o("WebBloksErrors")).WebBloksScriptError(t.message,e)}}l.default=e}),98);
__d("WebBloksStringConcat",[],(function(t,n,r,o,a,i){function e(e,t,n){return t+n}i.default=e}),66);
__d("WebBloksStringContains",[],(function(t,n,r,o,a,i){function e(e,t,n){return t.includes(n)}i.default=e}),66);
__d("WebBloksStringGetURLLastPathComponent",[],(function(t,n,r,o,a,i){function e(e,t){var n=t.split("/");return n[n.length-1]}i.default=e}),66);
__d("WebBloksStringJoin",[],(function(t,n,r,o,a,i){function e(e,t,n){return n.join(t)}i.default=e}),66);
__d("WebBloksStringLength",[],(function(t,n,r,o,a,i){function e(e,t){return t.length}i.default=e}),66);
__d("WebBloksStringReplace",["WebBloksRegexUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a){var i,l=o("WebBloksRegexUtils").extractPatternAndFlags(n),s=(i=l.flags)!=null?i:"";!a&&!s.includes("g")&&(s+="g");var u=new RegExp(l.normalizedPattern,s);return t.replace(u,r)}l.default=e}),98);
__d("WebBloksStringSlice",["WebBloksErrors","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){o("WebBloksUtils").nullthrows(n,"Unexpected null: offset");var a=n<0?n+t.length:n;if(a<0)throw new(o("WebBloksErrors")).WebBloksError("string.Slice: index start < 0");var i;if(r==null)i=t.length;else{if(r<0)throw new(o("WebBloksErrors")).WebBloksError("string.Slice: length < 0");i=a+r}if(i>t.length)throw new(o("WebBloksErrors")).WebBloksError("string.Slice: index end > len(str)");return t.slice(a,i)}l.default=e}),98);
__d("WebBloksStringSplitWithString",[],(function(t,n,r,o,a,i){function e(e,t,n){return t.split(n)}i.default=e}),66);
__d("WebBloksStringStartsWith",[],(function(t,n,r,o,a,i){function e(e,t,n){return t.startsWith(n)}i.default=e}),66);
__d("WebBloksStringToLowerCase",[],(function(t,n,r,o,a,i){function e(e,t){return t.toLowerCase()}i.default=e}),66);
__d("WebBloksStringToUpperCase",[],(function(t,n,r,o,a,i){function e(e,t){return t.toUpperCase()}i.default=e}),66);
__d("WebBloksStringTrim",[],(function(t,n,r,o,a,i){function e(e,t){return t.trim()}i.default=e}),66);
__d("WebBloksStringValueOfNumber",[],(function(t,n,r,o,a,i){function e(e,t){return String(t)}i.default=e}),66);
__d("WebBloksStringValueOfNumberInBase",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e,t,n){if(n<2||n>36)throw new(o("WebBloksErrors")).WebBloksScriptError("radix parameter of string.ValueOfNumberInBase must be between 2 and 36",e);return Math.floor(t).toString(n)}l.default=e}),98);
__d("WebBloksT3DFromArray",["Transform3DForWebBloks"],(function(t,n,r,o,a,i,l){function e(e,t){return new(r("Transform3DForWebBloks"))(t.map(function(e){return parseFloat(e)}))}l.default=e}),98);
__d("WebBloksTakeLast",[],(function(t,n,r,o,a,i){function e(e){var t;return t=(arguments.length<=1?0:arguments.length-1)-1+1,t<1||arguments.length<=t?void 0:arguments[t]}i.default=e}),66);
__d("WebBloksTemplateMake",[],(function(t,n,r,o,a,i){function e(e,t,n,r){return{templateId:t,expandedVariables:new Map(Object.entries(n)),scopeKey:r,keyPathBase:e.scope}}i.default=e}),66);
__d("WebBloksTextGetText",["WebBloksErrors","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n,r,a=t.uiMutableContainer.domNode;o("WebBloksUtils").nullthrows(a,"Not a valid Text model, uiMutableContainer not set");var i=a==null||(n=a.current)==null?void 0:n.dataset.bloksName;if(i!=="bk.components.Text")throw new(o("WebBloksErrors")).WebBloksError("Not bk.component.Text");var l=a==null||(r=a.current)==null?void 0:r.innerText;return l!=null?l:""}l.default=e}),98);
__d("WebBloksTextInputSetText",["WebBloksConstants"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r,a=e.bloksContext.updateAssociatedObject_INTERNAL(t,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT,{text:n!=null?n:""});(r=a.ref)==null||(r=r.current)==null||r.onExternalUpdate(a.text)}l.default=e}),98);
__d("WebBloksTextInputAppendText",["WebBloksConstants","WebBloksTextInputSetText"],(function(t,n,r,o,a,i,l){function e(e,t,n){var a,i,l=e.bloksContext.getAssociatedObject_INTERNAL(t,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT),s=((a=l==null?void 0:l.text)!=null?a:"")+n,u=l==null||(i=l.ref)==null||(i=i.current)==null?void 0:i.appendText;u!=null?(e.bloksContext.updateAssociatedObject_INTERNAL(t,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT,{text:s}),u(n)):r("WebBloksTextInputSetText")(e,t,s)}l.default=e}),98);
__d("WebBloksTextInputClearText",["WebBloksTextInputSetText"],(function(t,n,r,o,a,i,l){function e(e,t,n){r("WebBloksTextInputSetText")(e,t,"")}l.default=e}),98);
__d("WebBloksTextInputGetSelectionEnd",["WebBloksConstants"],(function(t,n,r,o,a,i,l){function e(e,t){var n,r=e.bloksContext.getAssociatedObject_INTERNAL(t,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT);return r==null||(n=r.ref)==null||(n=n.current)==null||(n=n.getSelection())==null?void 0:n.end}l.default=e}),98);
__d("WebBloksTextInputGetSelectionStart",["WebBloksConstants"],(function(t,n,r,o,a,i,l){function e(e,t){var n,r=e.bloksContext.getAssociatedObject_INTERNAL(t,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT);return r==null||(n=r.ref)==null||(n=n.current)==null||(n=n.getSelection())==null?void 0:n.start}l.default=e}),98);
__d("WebBloksTextInputGetText",["WebBloksConstants"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r,a,i=e.bloksContext.getAssociatedObject_INTERNAL(t,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT);return(r=(a=i==null?void 0:i.text)!=null?a:t.get("text"))!=null?r:""}l.default=e}),98);
__d("WebBloksTextInputUnfocus",["WebBloksConstants"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r,a=e.bloksContext.getAssociatedObject_INTERNAL(t,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT);a==null||(r=a.ref)==null||(r=r.current)==null||r.requestBlur()}l.default=e}),98);
__d("WebBloksTextIsTruncated",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n,r=(n=t.uiMutableContainer.domNode)==null?void 0:n.current;return r!=null&&r.scrollHeight>r.clientHeight}i.default=e}),66);
__d("WebBloksTimerCancel",[],(function(t,n,r,o,a,i){function e(e,t,n){var r=t.objectSet.environment.timeoutIDS,o=r.get(n);window.clearTimeout(o),r.delete(n)}i.default=e}),66);
__d("WebBloksTimerStart",[],(function(t,n,r,o,a,i){function e(e,t,n,r,o,a){var i=Number(n),l=null,s=t.objectSet.environment.timeoutIDS,u=function(){e.executeCatch(o,[a,t]),r?s.has(a)&&(l=window.setTimeout(u,i),s.set(a,l)):s.delete(a)};l=window.setTimeout(u,i),s.set(a,l)}i.default=e}),66);
__d("WebBloksToastComponent",[],(function(t,n,r,o,a,i){function e(e,t){e.objectSet.toastManager.enqueueSimpleToast(t)}i.default=e}),66);
__d("WebBloksTranslate3D",[],(function(t,n,r,o,a,i){function e(e,t,n,r,o){return t.translate(n,r,o),t}i.default=e}),66);
__d("WebBloksTreeMake",["WebBloksErrors","WebBloksModel"],(function(t,n,r,o,a,i,l){function e(e,t){for(var n={},r=arguments.length,a=new Array(r>2?r-2:0),i=2;i<r;i++)a[i-2]=arguments[i];for(var l=0;l<a.length;l+=2){var s=a[l];if(typeof s=="string")n[s]=a[l+1];else throw new(o("WebBloksErrors")).WebBloksError("Invalid key type in `bk.action.tree.Make`.")}var u=new(o("WebBloksModel")).WebBloksModel(t,n);return u.keyPath=e.scope,u}l.default=e}),98);
__d("WebBloksVisibilityContextGetTimeSinceLastImpressionInMS",[],(function(t,n,r,o,a,i){function e(e,t){return Date.now()-t.lastImpressionTimeMS}i.default=e}),66);
__d("WebBloksVisibilityContextHasSeenBefore",["WebBloksBooleanUtils"],(function(t,n,r,o,a,i,l){function e(e,t){return o("WebBloksBooleanUtils").isTrue(t.hasSeenBefore)}l.default=e}),98);
__d("WebBloksVisibilityContextPercentVisible",[],(function(t,n,r,o,a,i){function e(e,t){var n;return(n=t.percentVisible)!=null?n:null}i.default=e}),66);
__d("WebBloksWithScope",[],(function(t,n,r,o,a,i){function e(e,t){var n=e.createScopedContext();return n.executeCatch(t,[])}i.default=e}),66);
__d("WebBloksWriteGlobalConsistencyStore",[],(function(t,n,r,o,a,i){function e(e,t,n){var r=e.objectSet.globalStateDataModule;r&&r.publish(t,n)}i.default=e}),66);
__d("WebBloksWriteLocalState",["WebBloksErrors","WebBloksScopedIds"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){var a=e.scope,i=e.bloksContext.treeManager;if(r===0){i.enqueueVariableUpdateOperation(t,n);return}if(a==null)throw new(o("WebBloksErrors")).WebBloksError("Keypath must be set on environment if trying to WriteLocalState on a depth larger than 0.");if(r>a.length)throw new(o("WebBloksErrors")).WebBloksError("Depth supplied should never exceed the size of the key path.");var l=o("WebBloksScopedIds").getScopedVariableIdAtDepth(a,t,r,"INTERNAL_VARIABLE");i.enqueueVariableUpdateOperation(l,n)}l.default=e}),98);
__d("WebBloksf32Convert",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e,t){if(t===!0)return 1;if(t===!1)return 0;var n=parseFloat(t);if(Number.isNaN(n))throw new(o("WebBloksErrors")).WebBloksScriptError("Failed to convert value to `f32`",e);return n}l.default=e}),98);
__d("WebBloksNumberUtils",[],(function(t,n,r,o,a,i){function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=((""+t[0]).split(".")[1]||"").length,o=t.reduce(function(e,t){var n=((""+t).split(".")[1]||"").length;return Math.max(e,n)},r);return Math.pow(10,o)}i.getConversionFactor=e}),66);
__d("WebBloksf32NumberAdd",["WebBloksNumberUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=o("WebBloksNumberUtils").getConversionFactor(t,n);return Math.round(t*r+n*r)/r}l.default=e}),98);
__d("WebBloksf32NumberDiv",["WebBloksNumberUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=o("WebBloksNumberUtils").getConversionFactor(t,n);return Math.round(r*t)/Math.round(r*n)}l.default=e}),98);
__d("WebBloksf32NumberLog",[],(function(t,n,r,o,a,i){function e(e,t){return Math.log(t)}i.default=e}),66);
__d("WebBloksf32NumberMul",["WebBloksNumberUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=o("WebBloksNumberUtils").getConversionFactor(t,n);return Math.round(t*r*(n*r))/(r*r)}l.default=e}),98);
__d("WebBloksf32NumberPow",[],(function(t,n,r,o,a,i){function e(e,t,n){return Math.pow(t,n)}i.default=e}),66);
__d("WebBloksf32NumberSqrt",[],(function(t,n,r,o,a,i){function e(e,t){return Math.sqrt(t)}i.default=e}),66);
__d("WebBloksf32NumberSub",["WebBloksNumberUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=o("WebBloksNumberUtils").getConversionFactor(t,n);return Math.round(t*r-n*r)/r}l.default=e}),98);
__d("WebBloksi32Convert",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e,t){var n=parseInt(t,10);if(Number.isNaN(n))throw new(o("WebBloksErrors")).WebBloksScriptError("Failed to convert value to `i32`",e);return n}l.default=e}),98);
__d("WebBloksi32NumberAdd",[],(function(t,n,r,o,a,i){function e(e,t,n){return t+n}i.default=e}),66);
__d("WebBloksi32NumberDiv",[],(function(t,n,r,o,a,i){function e(e,t,n){return parseInt(t/n,10)}i.default=e}),66);
__d("WebBloksi32NumberMul",[],(function(t,n,r,o,a,i){function e(e,t,n){return t*n}i.default=e}),66);
__d("WebBloksi32NumberSub",[],(function(t,n,r,o,a,i){function e(e,t,n){return t-n}i.default=e}),66);
__d("WebBloksi64ConstNumber",["WebBloksErrors","WebBloksInt64"],(function(t,n,r,o,a,i,l){function e(e,t){try{var n=r("WebBloksInt64").fromString(String(t));return n.toString()}catch(t){throw new(o("WebBloksErrors")).WebBloksScriptError(t.message,e)}}l.default=e}),98);
__d("WebBloksi64NumberAdd",["WebBloksErrors","WebBloksInt64"],(function(t,n,r,o,a,i,l){function e(e,t,n){try{var a=r("WebBloksInt64").fromString(String(t)),i=r("WebBloksInt64").fromString(String(n));return a.add(i).toString()}catch(t){throw new(o("WebBloksErrors")).WebBloksScriptError(t.message,e)}}l.default=e}),98);
__d("WebBloksi64NumberDiv",["WebBloksErrors","WebBloksInt64"],(function(t,n,r,o,a,i,l){function e(e,t,n){try{var a=r("WebBloksInt64").fromString(String(t)),i=r("WebBloksInt64").fromString(String(n));return a.div(i).toString()}catch(t){throw new(o("WebBloksErrors")).WebBloksScriptError(t.message,e)}}l.default=e}),98);
__d("WebBloksi64NumberEq",["WebBloksErrors","WebBloksInt64"],(function(t,n,r,o,a,i,l){function e(e,t,n){try{var a=r("WebBloksInt64").fromString(String(t)),i=r("WebBloksInt64").fromString(String(n));return a.equals(i)}catch(t){throw new(o("WebBloksErrors")).WebBloksScriptError(t.message,e)}}l.default=e}),98);
__d("WebBloksi64NumberGt",["WebBloksErrors","WebBloksInt64"],(function(t,n,r,o,a,i,l){function e(e,t,n){try{var a=r("WebBloksInt64").fromString(String(t)),i=r("WebBloksInt64").fromString(String(n));return a.greaterThan(i)}catch(t){throw new(o("WebBloksErrors")).WebBloksScriptError(t.message,e)}}l.default=e}),98);
__d("WebBloksi64NumberLt",["WebBloksErrors","WebBloksInt64"],(function(t,n,r,o,a,i,l){function e(e,t,n){try{var a=r("WebBloksInt64").fromString(String(t)),i=r("WebBloksInt64").fromString(String(n));return a.lessThan(i)}catch(t){throw new(o("WebBloksErrors")).WebBloksScriptError(t.message,e)}}l.default=e}),98);
__d("WebBloksi64NumberSub",["WebBloksErrors","WebBloksInt64"],(function(t,n,r,o,a,i,l){function e(e,t,n){try{var a=r("WebBloksInt64").fromString(String(t)),i=r("WebBloksInt64").fromString(String(n));return a.subtract(i).toString()}catch(t){throw new(o("WebBloksErrors")).WebBloksScriptError(t.message,e)}}l.default=e}),98);
__d("CoreWebBloksActions",["WebBloksAccessibilityAnnouncement","WebBloksAccessibilitySetFocus","WebBloksAddChild","WebBloksAppendEmbeddedChildren","WebBloksApply","WebBloksArrayAppend","WebBloksArrayClone","WebBloksArrayConcat","WebBloksArrayFilter","WebBloksArrayGet","WebBloksArrayLength","WebBloksArrayMake","WebBloksArrayMap","WebBloksArrayPut","WebBloksArrayPutAndGet","WebBloksArrayReduce","WebBloksArrayRemove","WebBloksArrayRemoveAndGet","WebBloksArraySlice","WebBloksArraySortedArray","WebBloksArrayUpdate","WebBloksAsyncAction","WebBloksAsyncActionWithDataManifest","WebBloksAsyncActionWithDataManifestV2","WebBloksAsyncLoadV2","WebBloksBindWithArrayV2","WebBloksBoolAnd","WebBloksBoolConst","WebBloksBoolNot","WebBloksBoolOr","WebBloksCallbackApply","WebBloksCallbackMake","WebBloksCallbackMakeWithScopeOnly","WebBloksChildAtIndex","WebBloksClipboardSetString","WebBloksConstNumber","WebBloksContextGet","WebBloksCurrentTimeMillis","WebBloksDangerouslyGetTreeFromParseResult","WebBloksDelay","WebBloksDeviceLog","WebBloksDismissBottomSheet","WebBloksDismissToast","WebBloksDummy","WebBloksFindComponentContext","WebBloksGetAttr","WebBloksGetDatetimeText","WebBloksGetDeserializedEmbeddedPayload","WebBloksGetHeightV2","WebBloksGetParameter","WebBloksGetPayload","WebBloksGetScript","WebBloksGetState","WebBloksGetTemplateArg","WebBloksGetValue","WebBloksGetVariable2","WebBloksGetVariableWithScope","WebBloksGetWidthV2","WebBloksIndexOfChild","WebBloksInflateSync","WebBloksInsertChildrenAfter","WebBloksInsertEmbeddedChildrenAfter","WebBloksInsertEmbeddedChildrenBefore","WebBloksJsonDecode","WebBloksJsonEncode","WebBloksJsonEncodeV3","WebBloksMakeFlat","WebBloksMapClone","WebBloksMapFilter","WebBloksMapGet","WebBloksMapKeys","WebBloksMapMake","WebBloksMapMerge","WebBloksMapRemove","WebBloksMapUpdate","WebBloksMapValues","WebBloksMatch","WebBloksMatchesRegex","WebBloksMinsTypeOf","WebBloksNavigationCloseScreen","WebBloksNumberAnd","WebBloksNumberEq","WebBloksNumberGt","WebBloksNumberLt","WebBloksNumberMod","WebBloksNumberOr","WebBloksNumberRand","WebBloksOneTimeBind","WebBloksOpenBottomSheet","WebBloksOpenBottomSheetV2","WebBloksOpenDialog","WebBloksOpenDialogV2","WebBloksOpenFullScreenV4","WebBloksOpenScreen","WebBloksOpenScreenByRoute","WebBloksOpenUniversalLink","WebBloksOpenUrl","WebBloksOpenUrlV2","WebBloksParseEmbedded","WebBloksParseEmbeddedV2","WebBloksParseHoistedPayload","WebBloksPopBottomSheet","WebBloksPrependChildren","WebBloksPrependEmbeddedChildren","WebBloksPushBottomSheetV2","WebBloksReduce","WebBloksRefMake","WebBloksRefRead","WebBloksRefWrite","WebBloksReflow","WebBloksRefresh","WebBloksRemoveChild","WebBloksRemoveChildrenBetween","WebBloksReplaceChild","WebBloksReplaceChildren","WebBloksReplaceChildrenAfter","WebBloksReplaceEmbeddedChild","WebBloksReplaceEmbeddedChildren","WebBloksReplaceEmbeddedChildrenAfter","WebBloksRequestFocus","WebBloksRotate3D","WebBloksScale3D","WebBloksSessionStoreGet","WebBloksSetAttr","WebBloksShareText","WebBloksShowToast","WebBloksShowToastV2","WebBloksSliderSetPosition","WebBloksStringAsInteger","WebBloksStringAsLong","WebBloksStringConcat","WebBloksStringContains","WebBloksStringGetURLLastPathComponent","WebBloksStringJoin","WebBloksStringLength","WebBloksStringReplace","WebBloksStringSlice","WebBloksStringSplitWithString","WebBloksStringStartsWith","WebBloksStringToLowerCase","WebBloksStringToUpperCase","WebBloksStringTrim","WebBloksStringValueOfNumber","WebBloksStringValueOfNumberInBase","WebBloksT3DFromArray","WebBloksTakeLast","WebBloksTemplateMake","WebBloksTextGetText","WebBloksTextInputAppendText","WebBloksTextInputClearText","WebBloksTextInputGetSelectionEnd","WebBloksTextInputGetSelectionStart","WebBloksTextInputGetText","WebBloksTextInputSetText","WebBloksTextInputUnfocus","WebBloksTextIsTruncated","WebBloksTimerCancel","WebBloksTimerStart","WebBloksToastComponent","WebBloksTranslate3D","WebBloksTreeMake","WebBloksVisibilityContextGetTimeSinceLastImpressionInMS","WebBloksVisibilityContextHasSeenBefore","WebBloksVisibilityContextPercentVisible","WebBloksWithScope","WebBloksWriteGlobalConsistencyStore","WebBloksWriteLocalState","WebBloksf32Convert","WebBloksf32NumberAdd","WebBloksf32NumberDiv","WebBloksf32NumberLog","WebBloksf32NumberMul","WebBloksf32NumberPow","WebBloksf32NumberSqrt","WebBloksf32NumberSub","WebBloksi32Convert","WebBloksi32NumberAdd","WebBloksi32NumberDiv","WebBloksi32NumberMul","WebBloksi32NumberSub","WebBloksi64ConstNumber","WebBloksi64NumberAdd","WebBloksi64NumberDiv","WebBloksi64NumberEq","WebBloksi64NumberGt","WebBloksi64NumberLt","WebBloksi64NumberSub"],(function(t,n,r,o,a,i,l){var e,s={"bk.action.GetDatetimeText":r("WebBloksGetDatetimeText"),"bk.action.OpenUniversalLink":r("WebBloksOpenUniversalLink"),"bk.action.accessibility.Announcement":r("WebBloksAccessibilityAnnouncement"),"bk.action.accessibility.SetFocus":r("WebBloksAccessibilitySetFocus"),"bk.action.array.Append":r("WebBloksArrayAppend"),"bk.action.array.Clone":r("WebBloksArrayClone"),"bk.action.array.Concat":r("WebBloksArrayConcat"),"bk.action.array.Filter":r("WebBloksArrayFilter"),"bk.action.array.Get":r("WebBloksArrayGet"),"bk.action.array.Length":r("WebBloksArrayLength"),"bk.action.array.Make":r("WebBloksArrayMake"),"bk.action.array.Map":r("WebBloksArrayMap"),"bk.action.array.Put":r("WebBloksArrayPut"),"bk.action.array.PutAndGet":r("WebBloksArrayPutAndGet"),"bk.action.array.Reduce":r("WebBloksArrayReduce"),"bk.action.array.Remove":r("WebBloksArrayRemove"),"bk.action.array.RemoveAndGet":r("WebBloksArrayRemoveAndGet"),"bk.action.array.Slice":r("WebBloksArraySlice"),"bk.action.array.SortedArray":r("WebBloksArraySortedArray"),"bk.action.array.Update":r("WebBloksArrayUpdate"),"bk.action.bloks.AddChild":r("WebBloksAddChild"),"bk.action.bloks.AppendEmbeddedChildren":r("WebBloksAppendEmbeddedChildren"),"bk.action.bloks.AsyncAction":r("WebBloksAsyncAction"),"bk.action.bloks.AsyncActionWithDataManifest":r("WebBloksAsyncActionWithDataManifest"),"bk.action.bloks.AsyncActionWithDataManifestV2":r("WebBloksAsyncActionWithDataManifestV2"),"bk.action.bloks.AsyncLoadV2":r("WebBloksAsyncLoadV2"),"bk.action.bloks.ChildAtIndex":r("WebBloksChildAtIndex"),"bk.action.bloks.DangerouslyGetTreeFromParseResult":r("WebBloksDangerouslyGetTreeFromParseResult"),"bk.action.bloks.DismissBottomSheet":r("WebBloksDismissBottomSheet"),"bk.action.bloks.DismissKeyboard":e=r("WebBloksDummy"),"bk.action.bloks.Find":r("WebBloksFindComponentContext"),"bk.action.bloks.FindContainer":r("WebBloksFindComponentContext"),"bk.action.bloks.GetDeserializedEmbeddedPayload":r("WebBloksGetDeserializedEmbeddedPayload"),"bk.action.bloks.GetParameter":r("WebBloksGetParameter"),"bk.action.bloks.GetPayload":r("WebBloksGetPayload"),"bk.action.bloks.GetScript":r("WebBloksGetScript"),"bk.action.bloks.GetState":r("WebBloksGetState"),"bk.action.bloks.GetValue":r("WebBloksGetValue"),"bk.action.bloks.GetVariable2":r("WebBloksGetVariable2"),"bk.action.bloks.GetVariableWithScope":r("WebBloksGetVariableWithScope"),"bk.action.bloks.IndexOfChild":r("WebBloksIndexOfChild"),"bk.action.bloks.InflateSync":r("WebBloksInflateSync"),"bk.action.bloks.InsertChildrenAfter":r("WebBloksInsertChildrenAfter"),"bk.action.bloks.InsertEmbeddedChildrenAfter":r("WebBloksInsertEmbeddedChildrenAfter"),"bk.action.bloks.InsertEmbeddedChildrenBefore":r("WebBloksInsertEmbeddedChildrenBefore"),"bk.action.bloks.OneTimeBind":r("WebBloksOneTimeBind"),"bk.action.bloks.OpenBottomSheet":r("WebBloksOpenBottomSheet"),"bk.action.bloks.OpenBottomSheetV2":r("WebBloksOpenBottomSheetV2"),"bk.action.bloks.OpenFullScreenV4":r("WebBloksOpenFullScreenV4"),"bk.action.bloks.OpenScreen":r("WebBloksOpenScreen"),"bk.action.bloks.ParseEmbedded":r("WebBloksParseEmbedded"),"bk.action.bloks.ParseEmbeddedV2":r("WebBloksParseEmbeddedV2"),"bk.action.bloks.ParseHoistedPayload":r("WebBloksParseHoistedPayload"),"bk.action.bloks.PopBottomSheet":r("WebBloksPopBottomSheet"),"bk.action.bloks.PrependChildren":r("WebBloksPrependChildren"),"bk.action.bloks.PrependEmbeddedChildren":r("WebBloksPrependEmbeddedChildren"),"bk.action.bloks.PushBottomSheetV2":r("WebBloksPushBottomSheetV2"),"bk.action.bloks.Reduce":r("WebBloksReduce"),"bk.action.bloks.Reflow":r("WebBloksReflow"),"bk.action.bloks.RemoveChild":r("WebBloksRemoveChild"),"bk.action.bloks.RemoveChildrenBetween":r("WebBloksRemoveChildrenBetween"),"bk.action.bloks.ReplaceChild":r("WebBloksReplaceChild"),"bk.action.bloks.ReplaceChildren":r("WebBloksReplaceChildren"),"bk.action.bloks.ReplaceChildrenAfter":r("WebBloksReplaceChildrenAfter"),"bk.action.bloks.ReplaceEmbeddedChildV2":r("WebBloksReplaceEmbeddedChild"),"bk.action.bloks.ReplaceEmbeddedChildren":r("WebBloksReplaceEmbeddedChildren"),"bk.action.bloks.ReplaceEmbeddedChildrenAfter":r("WebBloksReplaceEmbeddedChildrenAfter"),"bk.action.bloks.RequestFocus":r("WebBloksRequestFocus"),"bk.action.bloks.WithScope":r("WebBloksWithScope"),"bk.action.bloks.WriteGlobalConsistencyStore":r("WebBloksWriteGlobalConsistencyStore"),"bk.action.bloks.WriteLocalState":r("WebBloksWriteLocalState"),"bk.action.bool.And":r("WebBloksBoolAnd"),"bk.action.bool.Const":r("WebBloksBoolConst"),"bk.action.bool.Not":r("WebBloksBoolNot"),"bk.action.bool.Or":r("WebBloksBoolOr"),"bk.action.callback.Apply":r("WebBloksCallbackApply"),"bk.action.callback.Make":r("WebBloksCallbackMake"),"bk.action.callback.MakeWithScopeOnly":r("WebBloksCallbackMakeWithScopeOnly"),"bk.action.component.GetAttr":r("WebBloksGetAttr"),"bk.action.component.GetHeight":r("WebBloksGetHeightV2"),"bk.action.component.GetHeight2":r("WebBloksGetHeightV2"),"bk.action.component.GetWidth":r("WebBloksGetWidthV2"),"bk.action.component.GetWidth2":r("WebBloksGetWidthV2"),"bk.action.component.SetAttr":r("WebBloksSetAttr"),"bk.action.context.Get":r("WebBloksContextGet"),"bk.action.core.Apply":r("WebBloksApply"),"bk.action.core.Coalesce":e,"bk.action.core.Default":e,"bk.action.core.Delay":r("WebBloksDelay"),"bk.action.core.FuncConst":e,"bk.action.core.GetArg":e,"bk.action.core.GetTemplateArg":r("WebBloksGetTemplateArg"),"bk.action.core.If":e,"bk.action.core.Match":r("WebBloksMatch"),"bk.action.core.Pattern":e,"bk.action.core.SetArg":e,"bk.action.core.TakeLast":r("WebBloksTakeLast"),"bk.action.core.While":e,"bk.action.debug.internal.DeviceLog":r("WebBloksDeviceLog"),"bk.action.debug.internal.DeviceLogV2":r("WebBloksDeviceLog"),"bk.action.dialog.OpenDialog":r("WebBloksOpenDialog"),"bk.action.dialog.OpenDialogV2":r("WebBloksOpenDialogV2"),"bk.action.f32.Add":r("WebBloksf32NumberAdd"),"bk.action.f32.Const":r("WebBloksConstNumber"),"bk.action.f32.Convert":r("WebBloksf32Convert"),"bk.action.f32.Div":r("WebBloksf32NumberDiv"),"bk.action.f32.Eq":r("WebBloksNumberEq"),"bk.action.f32.Gt":r("WebBloksNumberGt"),"bk.action.f32.Log":r("WebBloksf32NumberLog"),"bk.action.f32.Lt":r("WebBloksNumberLt"),"bk.action.f32.Mul":r("WebBloksf32NumberMul"),"bk.action.f32.Pow":r("WebBloksf32NumberPow"),"bk.action.f32.Sqrt":r("WebBloksf32NumberSqrt"),"bk.action.f32.Sub":r("WebBloksf32NumberSub"),"bk.action.f64.Const":r("WebBloksConstNumber"),"bk.action.function.BindWithArrayV2":r("WebBloksBindWithArrayV2"),"bk.action.i32.Add":r("WebBloksi32NumberAdd"),"bk.action.i32.And":r("WebBloksNumberAnd"),"bk.action.i32.Const":r("WebBloksConstNumber"),"bk.action.i32.Convert":r("WebBloksi32Convert"),"bk.action.i32.Div":r("WebBloksi32NumberDiv"),"bk.action.i32.Eq":r("WebBloksNumberEq"),"bk.action.i32.Gt":r("WebBloksNumberGt"),"bk.action.i32.Lt":r("WebBloksNumberLt"),"bk.action.i32.Mod":r("WebBloksNumberMod"),"bk.action.i32.Mul":r("WebBloksi32NumberMul"),"bk.action.i32.Or":r("WebBloksNumberOr"),"bk.action.i32.Rand":r("WebBloksNumberRand"),"bk.action.i32.Sub":r("WebBloksi32NumberSub"),"bk.action.i64.Add":r("WebBloksi64NumberAdd"),"bk.action.i64.Const":r("WebBloksi64ConstNumber"),"bk.action.i64.Div":r("WebBloksi64NumberDiv"),"bk.action.i64.Eq":r("WebBloksi64NumberEq"),"bk.action.i64.Gt":r("WebBloksi64NumberGt"),"bk.action.i64.Lt":r("WebBloksi64NumberLt"),"bk.action.i64.Sub":r("WebBloksi64NumberSub"),"bk.action.internal.Refresh":r("WebBloksRefresh"),"bk.action.io.CurrentTimeMillis":r("WebBloksCurrentTimeMillis"),"bk.action.io.Toast":r("WebBloksToastComponent"),"bk.action.io.clipboard.SetString":r("WebBloksClipboardSetString"),"bk.action.map.Append":e,"bk.action.map.Clone":r("WebBloksMapClone"),"bk.action.map.Filter":r("WebBloksMapFilter"),"bk.action.map.Get":r("WebBloksMapGet"),"bk.action.map.Keys":r("WebBloksMapKeys"),"bk.action.map.Make":r("WebBloksMapMake"),"bk.action.map.MakeFlat":r("WebBloksMakeFlat"),"bk.action.map.Merge":r("WebBloksMapMerge"),"bk.action.map.Remove":r("WebBloksMapRemove"),"bk.action.map.Update":r("WebBloksMapUpdate"),"bk.action.map.Values":r("WebBloksMapValues"),"bk.action.mins.TypeOf":r("WebBloksMinsTypeOf"),"bk.action.navigation.CloseScreen":r("WebBloksNavigationCloseScreen"),"bk.action.navigation.OpenUrl":r("WebBloksOpenUrl"),"bk.action.navigation.OpenUrlV2":r("WebBloksOpenUrlV2"),"bk.action.navigation.SetNavBar":e,"bk.action.payload.Make":e,"bk.action.ref.Make":r("WebBloksRefMake"),"bk.action.ref.Read":r("WebBloksRefRead"),"bk.action.ref.Write":r("WebBloksRefWrite"),"bk.action.session_store.Get":r("WebBloksSessionStoreGet"),"bk.action.share.Text":r("WebBloksShareText"),"bk.action.slider.SetPosition":r("WebBloksSliderSetPosition"),"bk.action.splice.Apply":e,"bk.action.splice.Get":e,"bk.action.string.AsInteger":r("WebBloksStringAsInteger"),"bk.action.string.AsLong":r("WebBloksStringAsLong"),"bk.action.string.Concat":r("WebBloksStringConcat"),"bk.action.string.Contains":r("WebBloksStringContains"),"bk.action.string.GetURLLastPathComponent":r("WebBloksStringGetURLLastPathComponent"),"bk.action.string.Join":r("WebBloksStringJoin"),"bk.action.string.JsonDecode":r("WebBloksJsonDecode"),"bk.action.string.JsonEncode":r("WebBloksJsonEncode"),"bk.action.string.JsonEncodeV2":r("WebBloksJsonEncode"),"bk.action.string.JsonEncodeV3":r("WebBloksJsonEncodeV3"),"bk.action.string.Length":r("WebBloksStringLength"),"bk.action.string.MatchesRegex":r("WebBloksMatchesRegex"),"bk.action.string.Replace":r("WebBloksStringReplace"),"bk.action.string.Slice":r("WebBloksStringSlice"),"bk.action.string.SplitWithString":r("WebBloksStringSplitWithString"),"bk.action.string.StartsWith":r("WebBloksStringStartsWith"),"bk.action.string.ToLowerCase":r("WebBloksStringToLowerCase"),"bk.action.string.ToUpperCase":r("WebBloksStringToUpperCase"),"bk.action.string.Trim":r("WebBloksStringTrim"),"bk.action.string.ValueOfNumber":r("WebBloksStringValueOfNumber"),"bk.action.string.ValueOfNumberInBase":r("WebBloksStringValueOfNumberInBase"),"bk.action.t3d.FromArray":r("WebBloksT3DFromArray"),"bk.action.t3d.Rotate":r("WebBloksRotate3D"),"bk.action.t3d.Scale":r("WebBloksScale3D"),"bk.action.t3d.Translate":r("WebBloksTranslate3D"),"bk.action.template.Make":r("WebBloksTemplateMake"),"bk.action.text.GetText":r("WebBloksTextGetText"),"bk.action.text.IsTruncated":r("WebBloksTextIsTruncated"),"bk.action.text_input.AppendText":r("WebBloksTextInputAppendText"),"bk.action.text_input.ClearText":r("WebBloksTextInputClearText"),"bk.action.text_input.Unfocus":r("WebBloksTextInputUnfocus"),"bk.action.textinput.GetSelectionEnd":r("WebBloksTextInputGetSelectionEnd"),"bk.action.textinput.GetSelectionStart":r("WebBloksTextInputGetSelectionStart"),"bk.action.textinput.GetText":r("WebBloksTextInputGetText"),"bk.action.textinput.SetText":r("WebBloksTextInputSetText"),"bk.action.textinput.SetTextV2":r("WebBloksTextInputSetText"),"bk.action.timer.Cancel":r("WebBloksTimerCancel"),"bk.action.timer.Start":r("WebBloksTimerStart"),"bk.action.toast.DismissToast":r("WebBloksDismissToast"),"bk.action.toast.ShowToast":r("WebBloksShowToast"),"bk.action.toast.ShowToastV2":r("WebBloksShowToastV2"),"bk.action.tree.Make":r("WebBloksTreeMake"),"bk.action.visibility_context.GetTimeSinceLastImpressionInMS":r("WebBloksVisibilityContextGetTimeSinceLastImpressionInMS"),"bk.action.visibility_context.HasSeenBefore":r("WebBloksVisibilityContextHasSeenBefore"),"bk.action.visibility_context.PercentVisible":r("WebBloksVisibilityContextPercentVisible"),"bk.action.webbloks.OpenScreenByRoute":r("WebBloksOpenScreenByRoute"),"bk.versioning.bind.Interleaved":e,"bk.versioning.bloks.GlobalStateWithInitialLispy":e,"bk.versioning.bloks.HoistedTemplates":e,"bk.versioning.bloks.NamedSplices":e,"bk.versioning.bloks.ScreenQueryContainerConfigIDServerParam":e,"bk.versioning.bloks.ViewportDimensionsDataModule":e,"bk.versioning.lispy.NumericLiterals":e};l.ACTIONS=s}),98);
__d("WebBloksCDSScreenModeContext.react",["react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).createContext,u=s(null),c=u;l.default=c}),98);
__d("WebBloksCDSWrapperImpl.react",["WebBloksCDSScreenModeContext.react","WebBloksStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(18),n=e.backgroundOverlayColor,a=e.content,i=e.header,l=e.shouldRenderGradient,c=e.topBanner,m=o("WebBloksTheme").useTheme(),p;if(t[0]!==n||t[1]!==m){var _=m.getTheme();if(n!=null){var f=o("WebBloksUtils").getRGBColorWithTheme(n,_),g;t[3]!==f?(g=s.jsx("div",{className:C.backgroundOverlayColor,style:{backgroundColor:f}}),t[3]=f,t[4]=g):g=t[4],p=g}t[0]=n,t[1]=m,t[2]=p}else p=t[2];var h=u(r("WebBloksCDSScreenModeContext.react")),y;t[5]!==l?(y=l?s.jsx(d,{}):null,t[5]=l,t[6]=y):y=t[6];var b;t[7]!==p||t[8]!==y?(b=s.jsxs("div",{className:C.gradientContainer,children:[y,p]}),t[7]=p,t[8]=y,t[9]=b):b=t[9];var v;t[10]!==a||t[11]!==i||t[12]!==b||t[13]!==c?(v=s.jsxs(s.Fragment,{children:[b,c,i,a]}),t[10]=a,t[11]=i,t[12]=b,t[13]=c,t[14]=v):v=t[14];var S=v,R;if(t[15]!==S||t[16]!==h){var L=h==="full_screen"||h==null?s.jsx("div",{className:C.minHeight,children:S}):S;R=s.jsx("div",{className:C.root,children:L}),t[15]=S,t[16]=h,t[17]=R}else R=t[17];return R}function d(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",{className:C.gradient,children:s.jsx("div",{className:C.canvas})}),e[0]=t):t=e[0],t}var m="hsla(44, 100%, 66%, 1)",p="hsla(338, 68%, 65%, 1)",_="hsla(338, 68%, 65%, 0.4)",f="hsla(272, 100%, 60%, 1)",g="hsla(142, 70%, 49%, 1)",h="hsla(209, 100%, 53%, 1)",y="hsla(213, 100%, 44%, 1)",C=o("WebBloksStyle").createStyles({root:{boxSizing:"border-box",display:"flex",flexDirection:"column",height:"100%",overflow:"scroll",paddingLeft:"env(safe-area-inset-left)",paddingRight:"env(safe-area-inset-right)",width:"100%"},minHeight:{height:"100%",minHeight:"600px",display:"flex",flexDirection:"column"},gradientContainer:{bottom:0,clipPath:"inset(0 0 0 0)",right:0,pointerEvents:"none",position:"absolute",backgroundColor:o("WebBloksTheme").WebBloksThemeVars["cds-surface-background"],left:0,top:0},gradient:{backgroundColor:o("WebBloksTheme").WebBloksThemeVars["cds-surface-background"],borderRadius:"inherit",clipPath:"inset(0 0 0 0)",height:"100%",position:"relative",width:"100%",zIndex:0},canvas:{backgroundImage:"radial-gradient(rgba(255,255,255,.25), rgba(255,255,255,0) 40%), radial-gradient("+m+" 30%, "+p+", "+_+" 41%, transparent 52%), radial-gradient("+f+" 37%, transparent 46%), linear-gradient(155deg, transparent 65%, "+g+" 95%), linear-gradient(45deg, "+y+", "+h+")",backgroundPosition:"bottom left, 109% 68%, 109% 68%, center, center",backgroundRepeat:"no-repeat",backgroundSize:"200% 200%, 285% 500%, 285% 500%, cover, cover",bottom:0,right:0,opacity:.08,pointerEvents:"none",position:"absolute",left:0,top:0},backgroundOverlayColor:{height:"100%",width:"100%",position:"absolute",top:0}});l.default=c}),98);
__d("WebBloksCDSBottomSheetWrapper",["WebBloksCDSWrapperImpl.react","WebBloksComponentContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),n=e.node,a=n.get("content"),i=n.get("header"),l=n.get("top_banner"),u=o("WebBloksComponentContext").useWebBloksContext(),c=u.renderNode,d;t[0]!==n?(d=n.get("web_background_overlay_color"),t[0]=n,t[1]=d):d=t[1];var m=d,p=r("WebBloksCDSWrapperImpl.react"),_=c(a),f=i!=null?c(i):null,g=l!=null?c(l):null,h;return t[2]!==p||t[3]!==_||t[4]!==f||t[5]!==g||t[6]!==m?(h=s.jsx(p,{backgroundOverlayColor:m,content:_,header:f,topBanner:g,shouldRenderGradient:!1}),t[2]=p,t[3]=_,t[4]=f,t[5]=g,t[6]=m,t[7]=h):h=t[7],h}l.default=u}),98);
__d("WebBloksCanvasUtils",["WebBloksErrors","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n){switch(e.styleId){case"bk.types.CanvasShadow":{var r=f(e.get("dx"),t),a=g(e.get("dy"),t),i=f(e.get("radius"),t),l=o("WebBloksUtils").getRGBColorWithTheme(e.get("themed_color"),n);t.shadowBlur=i*2,t.shadowOffsetX=r*2,t.shadowOffsetY=a*2,t.shadowColor=l;break}default:throw new(o("WebBloksErrors")).WebBloksError(e.styleId+" is not yet implemented. Add missing signature in `bk.component.Canvas`")}}function s(e,t,n){switch(e.styleId){case"bk.types.CanvasShadingColor":{var r=o("WebBloksUtils").getRGBColorWithTheme(e.get("themed_color"),n);t.fillStyle=r,t.strokeStyle=r;break}case"bk.types.CanvasShadingGradientLinear":{var a=d(e,t,n);t.fillStyle=a,t.strokeStyle=a;break}case"bk.types.CanvasShadingGradientRadial":{var i=m(e,t,n);t.fillStyle=i,t.strokeStyle=i;break}default:throw new(o("WebBloksErrors")).WebBloksError(e.styleId+" is not yet implemented. Add missing signature in `bk.component.Canvas`")}}function u(e,t){switch(e.styleId){case"bk.types.CanvasBlendingMode":{t.globalCompositeOperation=c(e.get("mode"));break}default:throw new(o("WebBloksErrors")).WebBloksError(e.styleId+" is not yet implemented. Add missing signature in `bk.component.Canvas`")}}function c(e){switch(e){case"dst_atop":return"destination-atop";case"dst_in":return"destination-in";case"dst_out":return"destination-out";case"dst_over":return"destination-over";case"src":case"src_over":return"source-over";case"src_atop":return"source-atop";case"src_in":return"source-in";case"src_out":return"source-out";default:return e}}function d(e,t,n){for(var r=f(e.get("start_x"),t),a=g(e.get("start_y"),t),i=f(e.get("end_x"),t),l=g(e.get("end_y"),t),s=t.createLinearGradient(r,a,i,l),u=e.get("gradient"),c=u.get("positions"),d=u.get("themed_colors"),m=0;m<c.length;m++){var p=c[m],_=d[m];s.addColorStop(p,o("WebBloksUtils").getRGBColorWithTheme(_,n))}return s}function m(e,t,n){for(var r=f(e.get("center_x"),t),a=g(e.get("center_y"),t),i=parseFloat(e.get("radius")),l=t.createRadialGradient(r,a,0,r,a,i),s=e.get("gradient"),u=s.get("positions"),c=s.get("themed_colors"),d=0;d<u.length;d++){var m=u[d],p=c[d];l.addColorStop(m,o("WebBloksUtils").getRGBColorWithTheme(p,n))}return l}function p(e,t){var n,r=document.createElement("canvas");return r.style.position="absolute",r.style.top="0",r.style.visibility="hidden",(n=document.body)==null||n.appendChild(r),r.width=e,r.height=t,r}function _(e,t){return t!=null&&typeof e=="string"&&e.includes("%")?parseFloat(e)/100*t:parseFloat(e)}function f(e,t){return _(e,t.canvas.clientWidth)}function g(e,t){return _(e,t.canvas.clientHeight)}l.drawShadowToCanvas=e,l.drawShadingToCanvas=s,l.drawBlendingModeToCanvas=u,l.getCompositeOperation=c,l.createLinearGradient=d,l.createRadialGradient=m,l.createSecondaryCanvasElement=p,l.getCanvasSizePixelValue=_,l.getCanvasPixelValRelativeToWidth=f,l.getCanvasPixelValRelativeToHeight=g}),98);
__d("WebBloksCanvasDrawToContext",["WebBloksCanvasUtils","WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(t,n,r){switch(t.styleId){case"bk.types.CanvasGroup":{var a=t.getSubNode("transform");a!=null&&d(a,n,r);var i=t.get("clip");i!=null&&(e(i,n,r),n.clip());var l=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(t.get("width"),n),m=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(t.get("height"),n);if(l>0&&m>0){var p=o("WebBloksCanvasUtils").createSecondaryCanvasElement(l,m),_=p.getContext("2d");d(t,_,r),n.drawImage(p,0,0),p.remove()}else d(t,n,r);break}case"bk.types.CanvasLayer":{var f=t.getSubNode("transform");f!=null&&d(f,n,r);var g=t.get("blending_mode");g!=null&&o("WebBloksCanvasUtils").drawBlendingModeToCanvas(g,n);var h=t.get("clip");h!=null&&(e(h,n,r),n.clip());var y=t.get("alpha");y!=null&&(n.globalAlpha=parseFloat(y));var C=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(t.get("width"),n),b=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(t.get("height"),n);if(C>0&&b>0){var v=o("WebBloksCanvasUtils").createSecondaryCanvasElement(C,b),S=v.getContext("2d");d(t,S,r),n.drawImage(v,0,0),v.remove()}else d(t,n,r);break}case"bk.types.CanvasTransform":{var R=t.get("a"),L=t.get("b"),E=t.get("c"),k=t.get("d"),I=t.get("tx"),T=t.get("ty");if(R!=null&&L!=null&&E!=null&&k!=null&&I!=null&&T!=null){var D;n.setTransform((D=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(R,n),D.getCanvasPixelValRelativeToHeight(L,n),D.getCanvasPixelValRelativeToWidth(E,n),D.getCanvasPixelValRelativeToHeight(k,n),D.getCanvasPixelValRelativeToWidth(I,n),D.getCanvasPixelValRelativeToHeight(T,n))}d(t,n,r);break}case"bk.types.CanvasFill":{var x=t.getSubNode("shape"),$=t.getSubNode("shading"),P=t.getSubNode("shadow"),N=t.getSubNode("blending_mode");x!=null&&e(x,n,r),$!=null&&o("WebBloksCanvasUtils").drawShadingToCanvas($,n,r),N!=null&&o("WebBloksCanvasUtils").drawBlendingModeToCanvas(N,n),P!=null&&o("WebBloksCanvasUtils").drawShadowToCanvas(P,n,r),n.fill();break}case"bk.types.CanvasPath":{n.beginPath(),d(t,n,r);break}case"bk.types.CanvasPathAdd":case"bk.types.CanvasPathArc":case"bk.types.CanvasPathCircle":case"bk.types.CanvasPathClose":case"bk.types.CanvasPathCubicTo":case"bk.types.CanvasPathEllipse":case"bk.types.CanvasPathLineTo":case"bk.types.CanvasPathMoveTo":case"bk.types.CanvasPathQuadTo":case"bk.types.CanvasPathRect":{u(t,n,r);break}case"bk.types.CanvasShapeCircle":case"bk.types.CanvasShapeLine":case"bk.types.CanvasShapeArc":case"bk.types.CanvasShapeRect":case"bk.types.CanvasShapeEllipse":{s(t,n);break}case"bk.types.CanvasTransformInverseV2":case"bk.types.CanvasTransformRotate":case"bk.types.CanvasTransformScale":case"bk.types.CanvasTransformSkew":case"bk.types.CanvasTransformSkewV2":case"bk.types.CanvasTransformTranslate":{c(t,n);break}case"bk.types.CanvasStroke":{n.beginPath();var M=t.get("dash_lengths");if(M!=null&&n.setLineDash(M.map(parseFloat)),n!=null){var w,A,F,O;n.lineWidth=parseFloat(t.get("line_width")),n.lineCap=(w=t.get("line_cap"))!=null?w:"butt",n.lineJoin=(A=t.get("line_join"))!=null?A:"miter",n.miterLimit=parseFloat((F=t.get("miter_limit"))!=null?F:0),n.lineDashOffset=parseFloat((O=t.get("dash_phase"))!=null?O:0)}var B=t.getSubNode("shape"),W=t.getSubNode("shading"),q=t.getSubNode("shadow"),U=t.getSubNode("blending_mode");B!=null&&e(B,n,r),W!=null&&o("WebBloksCanvasUtils").drawShadingToCanvas(W,n,r),U!=null&&o("WebBloksCanvasUtils").drawBlendingModeToCanvas(U,n),q!=null&&o("WebBloksCanvasUtils").drawShadowToCanvas(q,n,r),n.stroke();break}default:throw new(o("WebBloksErrors")).WebBloksError(t.styleId+" is not yet implemented. Add missing signature in `bk.component.Canvas`")}}function s(e,t){var n;switch(e.styleId){case"bk.types.CanvasShapeArc":{var r,a;t.beginPath();var i=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(e.get("center_x"),t),l=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(e.get("center_y"),t),s=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(e.get("radius"),t),u=parseFloat((r=e.get("start_angle"))!=null?r:0),c=parseFloat((a=e.get("end_angle"))!=null?a:360),d=e.get("clockwise")!=null?!e.get("clockwise"):!1;t.arc(i,l,s,u/180*Math.PI,c/180*Math.PI,d);break}case"bk.types.CanvasShapeCircle":t.beginPath(),t.arc(o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(e.get("center_x"),t),o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(e.get("center_y"),t),o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(e.get("radius"),t),0,2*Math.PI);break;case"bk.types.CanvasShapeLine":{var m;t.beginPath(),t.moveTo((m=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(e.get("start_x"),t),m.getCanvasPixelValRelativeToHeight(e.get("start_y"),t)),t.lineTo(m.getCanvasPixelValRelativeToWidth(e.get("end_x"),t),m.getCanvasPixelValRelativeToHeight(e.get("end_y"),t));break}case"bk.types.CanvasShapeRect":t.beginPath(),t.roundRect(o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(e.get("x"),t),o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(e.get("y"),t),o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(e.get("width"),t),o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(e.get("height"),t),parseFloat((n=e.get("corner_radius"))!=null?n:0));break;case"bk.types.CanvasShapeEllipse":{var m;t.beginPath();var p=(m=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(e.get("width"),t)/2,_=m.getCanvasPixelValRelativeToHeight(e.get("height"),t)/2;t.ellipse(m.getCanvasPixelValRelativeToWidth(e.get("x"),t)+p,m.getCanvasPixelValRelativeToHeight(e.get("y"),t)+_,p,_,0,0,2*Math.PI);break}default:throw new(o("WebBloksErrors")).WebBloksError(e.styleId+" is not yet implemented. Add missing signature in `bk.component.Canvas`")}}function u(t,n,r){switch(t.styleId){case"bk.types.CanvasPathAdd":{var a=t.getSubNode("transform"),i=t.getSubNode("path");a!=null&&d(a,n,r),i!=null&&e(i,n,r);break}case"bk.types.CanvasPathArc":{var l,s,u=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(t.get("center_x"),n),c=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(t.get("center_y"),n),m=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(t.get("radius"),n),p=parseFloat((l=t.get("start_angle"))!=null?l:0),_=parseFloat((s=t.get("end_angle"))!=null?s:360),f=t.get("clockwise")!=null?!t.get("clockwise"):!1;n.arc(u,c,m,p/180*Math.PI,_/180*Math.PI,f);break}case"bk.types.CanvasPathCircle":{var g=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(t.get("center_x"),n),h=o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(t.get("center_y"),n),y=parseFloat(t.get("radius"));n.moveTo(g+y,h),n.arc(g,h,y,0,2*Math.PI),n.restore();break}case"bk.types.CanvasPathClose":{n.closePath();break}case"bk.types.CanvasPathCubicTo":{var C;n.bezierCurveTo((C=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(t.get("control_a_x"),n),C.getCanvasPixelValRelativeToHeight(t.get("control_a_y"),n),C.getCanvasPixelValRelativeToWidth(t.get("control_b_x"),n),C.getCanvasPixelValRelativeToHeight(t.get("control_b_y"),n),C.getCanvasPixelValRelativeToWidth(t.get("end_x"),n),C.getCanvasPixelValRelativeToHeight(t.get("end_y"),n));break}case"bk.types.CanvasPathEllipse":{var C,b=(C=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(t.get("width"),n),v=C.getCanvasPixelValRelativeToHeight(t.get("height"),n),S=b/2,R=v/2,L=C.getCanvasPixelValRelativeToWidth(t.get("x"),n),E=C.getCanvasPixelValRelativeToHeight(t.get("y"),n),k=L+S,I=E+R;n.moveTo(L+b,E+R),n.ellipse(k,I,S,R,0,0,2*Math.PI);break}case"bk.types.CanvasPathLineTo":{n.lineTo(o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(t.get("x"),n),o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(t.get("y"),n));break}case"bk.types.CanvasPathMoveTo":{n.moveTo(o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(t.get("x"),n),o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(t.get("y"),n));break}case"bk.types.CanvasPathQuadTo":{var C;n.quadraticCurveTo((C=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(t.get("control_x"),n),C.getCanvasPixelValRelativeToHeight(t.get("control_y"),n),C.getCanvasPixelValRelativeToWidth(t.get("end_x"),n),C.getCanvasPixelValRelativeToHeight(t.get("end_y"),n));break}case"bk.types.CanvasPathRect":{var T,C;n.roundRect((C=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(t.get("x"),n),C.getCanvasPixelValRelativeToHeight(t.get("y"),n),C.getCanvasPixelValRelativeToWidth(t.get("width"),n),C.getCanvasPixelValRelativeToHeight(t.get("height"),n),parseFloat((T=t.get("corner_radius"))!=null?T:0));break}default:throw new(o("WebBloksErrors")).WebBloksError(t.styleId+" is not yet implemented. Please override in renderer")}}function c(e,t){switch(e.styleId){case"bk.types.CanvasTransformInverseV2":{var n=window.devicePixelRatio;t.scale(1/n,1/n),t.setTransform(t.getTransform().invertSelf()),t.scale(n,n);break}case"bk.types.CanvasTransformRotate":{var r;t.translate((r=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(e.get("pivot_x"),t),r.getCanvasPixelValRelativeToHeight(e.get("pivot_y"),t)),t.rotate(parseFloat(e.get("degrees"))*Math.PI/180),t.translate(-r.getCanvasPixelValRelativeToWidth(e.get("pivot_x"),t),-r.getCanvasPixelValRelativeToHeight(e.get("pivot_y"),t));break}case"bk.types.CanvasTransformScale":{var r;t.translate((r=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(e.get("pivot_x"),t),r.getCanvasPixelValRelativeToHeight(e.get("pivot_y"),t)),t.scale(r.getCanvasPixelValRelativeToWidth(e.get("x"),t),r.getCanvasPixelValRelativeToHeight(e.get("y"),t)),t.translate(-r.getCanvasPixelValRelativeToWidth(e.get("pivot_x"),t),-r.getCanvasPixelValRelativeToHeight(e.get("pivot_y"),t));break}case"bk.types.CanvasTransformSkew":case"bk.types.CanvasTransformSkewV2":{var r;t.translate((r=o("WebBloksCanvasUtils")).getCanvasPixelValRelativeToWidth(e.get("pivot_x"),t),r.getCanvasPixelValRelativeToHeight(e.get("pivot_y"),t)),t.transform(1,r.getCanvasPixelValRelativeToWidth(e.get("x"),t),r.getCanvasPixelValRelativeToHeight(e.get("y"),t),1,0,0),t.translate(-r.getCanvasPixelValRelativeToWidth(e.get("pivot_x"),t),-r.getCanvasPixelValRelativeToHeight(e.get("pivot_y"),t));break}case"bk.types.CanvasTransformTranslate":{t.translate(o("WebBloksCanvasUtils").getCanvasPixelValRelativeToWidth(e.get("x"),t),o("WebBloksCanvasUtils").getCanvasPixelValRelativeToHeight(e.get("y"),t));break}default:throw new(o("WebBloksErrors")).WebBloksError(e.styleId+" is not yet implemented. Add missing signature in `bk.component.Canvas`")}}function d(t,n,r){var o=t.getSubNodes("children");if(o!=null)for(var a of o)e(a,n,r)}l.default=e}),98);
__d("WebBloksCanvas",["WebBloksCanvasDrawToContext","WebBloksStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useLayoutEffect,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(17),n=e.node,a=e.externalStyle,i=o("WebBloksStyle").useStyle(n,a),l=i.style,u=i.wrapper,m=i.wrapperProps,_=o("WebBloksTheme").useTheme(),f;t[0]!==_?(f=_.getTheme(),t[0]=_,t[1]=f):f=t[1];var g=f,h=d(null),y,C;t[2]!==n?(y=function(){var e=h.current,t=e==null?void 0:e.getContext("2d");if(!(e==null||t==null)){var r=o("WebBloksUtils").toPx(n.get("width")),a=o("WebBloksUtils").toPx(n.get("height"));if(!(r==null||a==null)){e.style.width=r,e.style.height=a;var i=window.devicePixelRatio;e.width=p(r,t.canvas.clientWidth,i),e.height=p(a,t.canvas.clientHeight,i),t.scale(i,i)}}},C=[n],t[2]=n,t[3]=y,t[4]=C):(y=t[3],C=t[4]),c(y,C);var b,v;t[5]!==n||t[6]!==g?(b=function(){var e,t=(e=h.current)==null?void 0:e.getContext("2d");if(t!=null){var o=n.getSubNodes("children");if(o!=null)for(var a of o)t.save(),r("WebBloksCanvasDrawToContext")(a,t,g),t.restore()}},v=[n,g],t[5]=n,t[6]=g,t[7]=b,t[8]=v):(b=t[7],v=t[8]),c(b,v);var S;t[9]!==l?(S=babelHelpers.extends({},l),t[9]=l,t[10]=S):S=t[10];var R;t[11]!==S||t[12]!==m?(R=s.jsx("canvas",babelHelpers.extends({},m,{ref:h,style:S})),t[11]=S,t[12]=m,t[13]=R):R=t[13];var L;return t[14]!==R||t[15]!==u?(L=u(R),t[14]=R,t[15]=u,t[16]=L):L=t[16],L}function p(e,t,n){return n===void 0&&(n=1),t!=null&&e.includes("%")?parseFloat(e)/100*t*n:parseFloat(e)*n}l.default=m}),98);
__d("WebBloksCollectionChildSizesLayoutReady",[],(function(t,n,r,o,a,i){"use strict";var e="layout_ready",l=new Event(e);i.LAYOUT_READY_EVENT_NAME=e,i.LAYOUT_READY_EVENT=l}),66);
__d("useWebBloksCollectionChildSizes",["WebBloksCollectionChildSizesLayoutReady","WebBloksCollectionHelpers","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useMemo,p=c.useState,_=(e=(s=window.CSS)==null||s.supports==null?void 0:s.supports("width","100cqw"))!=null?e:!1;function f(e){var t=o("react-compiler-runtime").c(28),n=e.node,r=e.collectionNode,a=e.scrollerRef,i,l,s;if(t[0]!==r||t[1]!==n){var u=r.getValues();i=u.direction;var c;if(t[5]!==n){var m,f,h,y;c=(m=(f=(h=n.getStyle("collection"))==null?void 0:h.getValues())!=null?f:(y=n.getStyle("flex"))==null?void 0:y.getValues())!=null?m:{},t[5]=n,t[6]=c}else c=t[6];l=c,s=o("WebBloksCollectionHelpers").getDirectionPropNames(i),t[0]=r,t[1]=n,t[2]=i,t[3]=l,t[4]=s}else i=t[2],l=t[3],s=t[4];var C=s,b=C.crossAxisSize,v=C.mainAxisSize,S;t[7]!==i||t[8]!==n||t[9]!==l.height||t[10]!==l.width?(S=g({width:l.width,height:l.height,direction:i,node:n}),t[7]=i,t[8]=n,t[9]=l.height,t[10]=l.width,t[11]=S):S=t[11];var R=S,L=p(null),E=L[0],k=L[1],I;t[12]!==R.__MainAxisCqUnitBasis||t[13]!==v||t[14]!==a?(I=function(){var e;if(!_&&R.__MainAxisCqUnitBasis!=null){var t=(e=a.current)==null?void 0:e.getBoundingClientRect()[v],n=R.__MainAxisCqUnitBasis;t!=null&&n!=null&&k(t*n)}},t[12]=R.__MainAxisCqUnitBasis,t[13]=v,t[14]=a,t[15]=I):I=t[15];var T;t[16]!==R||t[17]!==v||t[18]!==a?(T=[R,v,a],t[16]=R,t[17]=v,t[18]=a,t[19]=T):T=t[19],d(I,T);var D;t[20]!==E||t[21]!==a?(D=function(){if(E!=null){var e;(e=a.current)==null||e.dispatchEvent(o("WebBloksCollectionChildSizesLayoutReady").LAYOUT_READY_EVENT)}},t[20]=E,t[21]=a,t[22]=D):D=t[22],d(D,void 0);var x=b,$=R[b],P=v,N=E!=null?E:R[v],M;if(t[23]!==x||t[24]!==$||t[25]!==P||t[26]!==N){var w;M=(w={},w[x]=$,w[P]=N,w),t[23]=x,t[24]=$,t[25]=P,t[26]=N,t[27]=M}else M=t[27];return M}var g=function(t){var e,n,r=t.width,a=t.height,i=t.direction,l=t.node,s=o("WebBloksCollectionHelpers").getDirectionPropNames(i),u=s.crossAxisSize,c=s.mainAxisSize,d=(e={},e[c]="auto",e[u]="auto",e),m=c==="width"?r:a,p=u==="width"?r:a;if(p!=null&&(d[u]=o("WebBloksUtils").toPx(p)),m==null)return d;if(!o("WebBloksCollectionHelpers").hasCollectionDimensionInPct(l,c))return m!=null&&(d[c]=o("WebBloksUtils").toPx(m)),d;var _=(n=o("WebBloksUtils").toPercentageValue(m))!=null?n:1,f=c==="width"?"cqw":"cqh";return d[c]=""+_*100+f,d.__MainAxisCqUnitBasis=_,d};l.default=f}),98);
__d("useWebBloksCollectionStickyChildStyle",["WebBloksCollectionHelpers","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=o("react-compiler-runtime").c(6),r=e.node,a=e.direction,i=r.getStyle("collection"),l=i==null||(t=i.getValues().sticky_item_config)==null?void 0:t.getValues();if(l==null){var s;return n[0]===Symbol.for("react.memo_cache_sentinel")?(s={},n[0]=s):s=n[0],s}var u=l.is_sticky,c=l.position;if(u!==!0||c==null){var d;return n[1]===Symbol.for("react.memo_cache_sentinel")?(d={},n[1]=d):d=n[1],d}var m;n[2]!==a?(m=o("WebBloksCollectionHelpers").getDirectionPropNames(a),n[2]=a,n[3]=m):m=n[3];var p=m,_=p[c],f;if(n[4]!==_){var g;f=(g={position:"sticky",zIndex:1},g[_]=0,g),n[4]=_,n[5]=f}else f=n[5];return f}l.default=e}),98);
__d("WebBloksCollectionChildBase",["WebBloksComponentContext","react-compiler-runtime","useWebBloksCollectionChildSizes","useWebBloksCollectionStickyChildStyle"],(function(t,n,r,o,a,i,l){function e(e){var t=o("react-compiler-runtime").c(4),n=e.collectionNode,a=e.extraStyles,i=e.node,l=e.scrollerRef,s=o("WebBloksComponentContext").useWebBloksContext(),u=s.renderNode,c=n.getValues(),d=c.snap,m=c.snap_style,p=c.direction,_;t[0]!==n||t[1]!==i||t[2]!==l?(_={node:i,collectionNode:n,scrollerRef:l},t[0]=n,t[1]=i,t[2]=l,t[3]=_):_=t[3];var f=babelHelpers.extends({display:"inline-flex",width:"auto",height:"auto",overflow:"hidden"},r("useWebBloksCollectionStickyChildStyle")({node:i,direction:p}),r("useWebBloksCollectionChildSizes")(_),a),g;return m==null||m==="pager"?g="always":g="normal",u(i,babelHelpers.extends({},f,{scrollSnapAlign:d,scrollSnapStop:g}))}l.default=e}),98);
__d("WebBloksCollectionScrollRefs",["react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useRef;function u(e){var t=s();return e.uiMutableContainer.extraRefs={containerElementRef:t},t}function c(e){var t,n=(t=e.uiMutableContainer.extraRefs)==null?void 0:t.containerElementRef,r=e.uiMutableContainer.domNode;return{containerElementRef:n,scrollableElementRef:r}}l.useWebbloksCollectionScrollContainerRef=u,l.findWebbloksCollectionScrollRefs=c}),98);
__d("WebBloksCollectionScrollTo",["WebBloksCollectionScrollRefs","WebDriverConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return t==="column"};function s(e){return r("WebDriverConfig").isJestE2ETestRun?"auto":e===!0?"smooth":"auto"}function u(t,n){var r=n.index,a=n.isAnimated,i=o("WebBloksCollectionScrollRefs").findWebbloksCollectionScrollRefs(t),l=i.containerElementRef,u=i.scrollableElementRef,c=t.getValues(),d=c.direction,m=e(d),p=l==null?void 0:l.current,_=u==null?void 0:u.current;if(!(p==null||_==null)){var f=p.children.item(r),g=m?{top:f==null?void 0:f.offsetTop}:{left:f==null?void 0:f.offsetLeft};_.scrollTo(babelHelpers.extends({},g,{behavior:s(a)}))}}function c(t,n){var r=n.isAnimated,a=o("WebBloksCollectionScrollRefs").findWebbloksCollectionScrollRefs(t),i=a.scrollableElementRef,l=t.getValues(),u=l.direction,c=e(u);if((i==null?void 0:i.current)!=null){var d=c?{top:i.current.scrollHeight}:{left:i.current.scrollWidth};i.current.scrollTo(babelHelpers.extends({},d,{behavior:s(r)}))}}l.scrollWebBloksCollectionToIndex=u,l.scrollWebBloksCollectionToEnd=c}),98);
__d("useOnScrollSnap",["WebBloksCollectionScrollRefs","WebBloksUtils","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e,t,n){var r=e.getBoundingClientRect(),o=t.getBoundingClientRect();return n==="column"?o.top>=r.top&&o.bottom<=r.bottom:o.left>=r.left&&o.right<=r.right}function m(e,t,n){var r=e.getBoundingClientRect();if(t==="column")switch(n){case"center":return r.top+r.height/2;case"start":return r.top;case"end":return r.bottom;default:return-1}else switch(n){case"center":return r.left+r.width/2;case"start":return r.left;case"end":return r.right;default:return-1}}function p(e,t){if(!e)return[[],[]];var n=Array.from(e.querySelectorAll(":scope > *")),r=n.map(function(e){return t==="column"?e.offsetTop:e.offsetLeft});return[n,r]}function _(e,t,n){var r=e.scrollableElement,o=e.containerElement,a=Array.from(o.querySelectorAll(":scope > *"));if(a.length===0)return null;if(n==="center"){if(d(r,a[0],t))return 0;if(d(r,a[a.length-1],t))return a.length-1}for(var i=m(r,t,n),l=-1,s=Number.MAX_VALUE,u=0;u<a.length;u++){var c=m(a[u],t,n),p=Math.abs(i-c);p<s&&(s=p,l=u)}return l}function f(e,t){var n=t.onScroll,r=t.onScrollSnap,a=t.onPageScroll,i=e.getValues(),l=i.snap,s=i.direction,d=i.starting_index,m=c(d),f=s==="column",g=o("WebBloksCollectionScrollRefs").findWebbloksCollectionScrollRefs(e),h=g.containerElementRef,y=g.scrollableElementRef;u(function(){var e=h==null?void 0:h.current,t=y==null?void 0:y.current;if(!(e==null||t==null||r==null&&n==null&&a==null)){var i=p(e,s),u=i[0],c=i[1],d=function(){if(n&&n(),t!=null&&a){var o=f?t.scrollTop:t.scrollLeft,i=Math.max(c.findIndex(function(e){return e>o}),1),u=i-1,d=o-c[u],p=d/(c[i]-c[u]);a(u,d,p)}if(t!=null&&l!=null&&l!=="none"&&r){var g=_({containerElement:e,scrollableElement:t},s,l);g!==m.current&&(m.current=g,r(g))}};return t.addEventListener("scroll",d,o("WebBloksUtils").passiveTouchEventOptions),t.addEventListener("touchend",d,o("WebBloksUtils").passiveTouchEventOptions),function(){t.removeEventListener("scroll",d),t.removeEventListener("touchend",d)}}},[s,l,r,n])}l.default=f}),98);
__d("useWebBloksCollectionScrollHandlers",["WebBloksCollectionChildSizesLayoutReady","WebBloksCollectionScrollTo","WebBloksComponentContext","react","react-compiler-runtime","useOnScrollSnap"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useCallback,c=s.useLayoutEffect;function d(e){var t=o("react-compiler-runtime").c(25),n;t[0]!==e?(n=e.getExpression("on_scroll_snap"),t[0]=e,t[1]=n):n=t[1];var a=n,i;t[2]!==e?(i=e.getExpression("on_scroll_callback"),t[2]=e,t[3]=i):i=t[3];var l=i,s;t[4]!==e?(s=e.getExpression("on_page_scroll"),t[4]=e,t[5]=s):s=t[5];var u=s,c=o("WebBloksComponentContext").useWebBloksContext(),d=c.bloksContext,p=c.executeCatch,_;t[6]!==d||t[7]!==p||t[8]!==e||t[9]!==a?(_=function(n){n!=null&&a!=null&&p(e,a,[n,d])},t[6]=d,t[7]=p,t[8]=e,t[9]=a,t[10]=_):_=t[10];var f=_,g;t[11]!==d||t[12]!==p||t[13]!==e||t[14]!==u?(g=function(n,r,o){u!=null&&p(e,u,[d,n,o,r])},t[11]=d,t[12]=p,t[13]=e,t[14]=u,t[15]=g):g=t[15];var h=g,y;t[16]!==d||t[17]!==p||t[18]!==e||t[19]!==l?(y=function(){l!=null&&p(e,l,[d])},t[16]=d,t[17]=p,t[18]=e,t[19]=l,t[20]=y):y=t[20];var C=y,b=a!=null?f:void 0,v=l!=null?C:void 0,S=u!=null?h:void 0,R;t[21]!==b||t[22]!==v||t[23]!==S?(R={onScrollSnap:b,onScroll:v,onPageScroll:S},t[21]=b,t[22]=v,t[23]=S,t[24]=R):R=t[24],r("useOnScrollSnap")(e,R),m(e)}function m(e){var t=e.getValues(),n=t.stack_from_end,r=t.starting_index;c(function(){var t,a=r,i=function(){a!=null&&a>0?o("WebBloksCollectionScrollTo").scrollWebBloksCollectionToIndex(e,{index:a,isAnimated:!1}):n===!0&&o("WebBloksCollectionScrollTo").scrollWebBloksCollectionToEnd(e,{isAnimated:!1})};i(),(t=e.uiMutableContainer)==null||(t=t.domNode)==null||(t=t.current)==null||t.addEventListener(o("WebBloksCollectionChildSizesLayoutReady").LAYOUT_READY_EVENT_NAME,function(){i()},{once:!0})},[r,n,e.clientId])}l.default=d}),98);
__d("useWebBloksCollectionScrollingElementStyle",["WebBloksStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(25),n=e.snap,r=e.background_themed_color,a=e.is_scroll_enabled,i=e.fading_edge_length,l=e.direction,s=e.shows_scroll_indicator,u=o("WebBloksTheme").useTheme(),p;t[0]!==u?(p=u.getTheme(),t[0]=u,t[1]=p):p=t[1];var _=p,f=l==="column",g;if(t[2]!==r||t[3]!==i||t[4]!==f||t[5]!==a||t[6]!==s||t[7]!==n||t[8]!==_){var h=[],y;t[10]===Symbol.for("react.memo_cache_sentinel")?(y={},t[10]=y):y=t[10];var C=y;if(n==null||n==="none"?h.push(d.none):f?h.push(d.y):h.push(d.x),a===!1?h.push(c.none):f?h.push(c.y):h.push(c.x),i!=null){var b;t[11]!==i?(b=o("WebBloksUtils").toPx(i),t[11]=i,t[12]=b):b=t[12];var v;t[13]!==i?(v=o("WebBloksUtils").toPx(i),t[13]=i,t[14]=v):v=t[14];var S="linear-gradient(\n        to "+(f?"bottom":"right")+",\n        transparent 0,\n        black "+b+",\n        black calc(100% - "+v+"),\n        transparent\n      )",R;t[15]!==S?(R=babelHelpers.extends({},C,{maskImage:S,WebkitMaskImage:S}),t[15]=S,t[16]=R):R=t[16],C=R}if(!f){var L;t[17]!==C?(L=babelHelpers.extends({},C,{whiteSpace:"nowrap"}),t[17]=C,t[18]=L):L=t[18],C=L}if(r){var E=C,k;t[19]!==r||t[20]!==_?(k=o("WebBloksUtils").getRGBColorWithTheme(r,_),t[19]=r,t[20]=_,t[21]=k):k=t[21];var I;t[22]!==C||t[23]!==k?(I=babelHelpers.extends({},E,{backgroundColor:k}),t[22]=C,t[23]=k,t[24]=I):I=t[24],C=I}s===!1&&h.push(m.noScrollbar),g={scrollingElementStyle:C,scrollingElementClassNames:h},t[2]=r,t[3]=i,t[4]=f,t[5]=a,t[6]=s,t[7]=n,t[8]=_,t[9]=g}else g=t[9];return g}var c=o("WebBloksStyle").createStyles({none:{overflowY:"hidden",overflowX:"hidden"},y:{overflowY:"auto",overflowX:"hidden"},x:{overflowY:"hidden",overflowX:"auto"}}),d=o("WebBloksStyle").createStyles({none:{scrollSnapType:"none"},y:{scrollSnapType:"y mandatory"},x:{scrollSnapType:"x mandatory"}}),m=o("WebBloksStyle").createStyles({noScrollbar:function(t){var e;return e={},e[t]={scrollbarWidth:"none"},e[t+"::-webkit-scrollbar"]={display:"none"},e}});l.default=u}),98);
__d("useWebBloksCollectionStopPropagation",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(4),n;t[0]!==e?(n=function(n){var t=e.current;if(t!=null){var r=t.scrollTop===0,o=t.scrollHeight-t.scrollTop===t.clientHeight;!r&&!o&&n.stopPropagation()}},t[0]=e,t[1]=n):n=t[1];var r=n,a;return t[2]!==r?(a={onTouchStart:r,onTouchMove:r,onTouchEnd:r},t[2]=r,t[3]=a):a=t[3],a}l.default=u}),98);
__d("WebBloksCollectionV2",["WebBloksCollectionChildBase","WebBloksCollectionHelpers","WebBloksCollectionScrollRefs","WebBloksStyle","WebBloksUtils","react","react-compiler-runtime","useWebBloksCollectionScrollHandlers","useWebBloksCollectionScrollingElementStyle","useWebBloksCollectionStopPropagation"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t,n=o("react-compiler-runtime").c(8),a=e.node,i=e.externalStyle,l=a.getValues(),u=l.children,d=l.direction,m=l.item_spacing,p=l.spacing_after,_=l.spacing_before,f=o("WebBloksStyle").useStyle(a,i),g=f.style,h=f.wrapper,y=f.wrapperProps,C=f.ref,b=r("useWebBloksCollectionScrollingElementStyle")(l),v=b.scrollingElementStyle,S=b.scrollingElementClassNames,R=o("WebBloksCollectionScrollRefs").useWebbloksCollectionScrollContainerRef(a);r("useWebBloksCollectionScrollHandlers")(a);var L=r("useWebBloksCollectionStopPropagation")(C),E=o("WebBloksCollectionHelpers").getDirectionPropNames(d),k=E.crossAxisSize,I=E.mainAxisSize,T=E.mainAxisMarginStart,D=E.mainAxisMarginEnd,x;n[0]!==S?(x=o("WebBloksStyle").classNames.apply(void 0,[o("WebBloksStyle").WebBloksStyles.container].concat(S)),n[0]=S,n[1]=x):x=n[1];var $;n[2]!==a?($=o("WebBloksCollectionHelpers").getContainerType(a),n[2]=a,n[3]=$):$=n[3];var P;return n[4]!==v||n[5]!==g||n[6]!==$?(P=babelHelpers.extends({},v,g,{display:"block",pointerEvents:"auto",containerType:$}),n[4]=v,n[5]=g,n[6]=$,n[7]=P):P=n[7],h(s.jsx("div",babelHelpers.extends({},y,{ref:C,className:x,style:P},L,{children:s.jsx("div",{ref:R,style:(t={display:"flex",flexDirection:d,gap:o("WebBloksUtils").toPx(m)},t[I]="max-content",t[k]="100%",t[T]=_!=null?o("WebBloksUtils").toPx(_):void 0,t[D]=p!=null?o("WebBloksUtils").toPx(p):void 0,t),children:u&&u.map(function(e){return s.jsx(c,{scrollerRef:C,node:e,collectionNode:a},e.clientId)})})})))}function c(e){var t=o("react-compiler-runtime").c(4),n=e.collectionNode,a=e.node,i=e.scrollerRef,l;return t[0]!==n||t[1]!==a||t[2]!==i?(l=s.jsx(r("WebBloksCollectionChildBase"),{collectionNode:n,node:a,scrollerRef:i}),t[0]=n,t[1]=a,t[2]=i,t[3]=l):l=t[3],l}l.default=u}),98);
__d("useWebBloksCollectionGridAspectRatioProps",["WebBloksCollectionChildSizesLayoutReady","WebBloksCollectionHelpers","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useMemo,p=c.useState,_=(e=(s=window.CSS)==null||s.supports==null?void 0:s.supports("width","100cqw"))!=null?e:!1;function f(e,t,n){var r=o("react-compiler-runtime").c(24),a,i;if(r[0]!==t){var l=t.getValues();a=l.direction,i=o("WebBloksCollectionHelpers").getDirectionPropNames(a),r[0]=t,r[1]=a,r[2]=i}else a=r[1],i=r[2];var s=i,u=s.crossAxisSize,c=s.mainAxisSize,m;e:{var f=e.cell_aspect_ratio;if(f==null){m=null;break e}if(a==="column"){m="1 / "+f;break e}m=" "+f+" / 1"}var g=m,h=p(null),y=h[0],C=h[1],b;r[3]!==g||r[4]!==u||r[5]!==e.cell_aspect_ratio||r[6]!==e.span_count||r[7]!==n?(b=function(){var t,r,o;if(!_&&g!=null){var a=parseInt((t=n.current)==null?void 0:t.getBoundingClientRect()[u],10)/((r=e.span_count)!=null?r:1);C(a*((o=e.cell_aspect_ratio)!=null?o:1))}},r[3]=g,r[4]=u,r[5]=e.cell_aspect_ratio,r[6]=e.span_count,r[7]=n,r[8]=b):b=r[8];var v;r[9]!==g||r[10]!==u||r[11]!==e.cell_aspect_ratio||r[12]!==e.span_count||r[13]!==c||r[14]!==n?(v=[g,u,e.cell_aspect_ratio,e.span_count,c,n],r[9]=g,r[10]=u,r[11]=e.cell_aspect_ratio,r[12]=e.span_count,r[13]=c,r[14]=n,r[15]=v):v=r[15],d(b,v);var S;if(r[16]!==y||r[17]!==n?(S=function(){if(y!=null){var e;(e=n.current)==null||e.dispatchEvent(o("WebBloksCollectionChildSizesLayoutReady").LAYOUT_READY_EVENT)}},r[16]=y,r[17]=n,r[18]=S):S=r[18],d(S,void 0),g==null){var R;return r[19]===Symbol.for("react.memo_cache_sentinel")?(R={},r[19]=R):R=r[19],R}var L=y!=null?void 0:g,E=c,k;if(r[20]!==y||r[21]!==L||r[22]!==E){var I;k=(I={aspectRatio:L},I[E]=y,I),r[20]=y,r[21]=L,r[22]=E,r[23]=k}else k=r[23];return k}l.default=f}),98);
__d("WebBloksCollectionGrid_EXPERIMENTAL",["WebBloksCollectionChildBase","WebBloksCollectionHelpers","WebBloksCollectionScrollRefs","WebBloksCollectionV2","WebBloksStyle","WebBloksUtils","react","react-compiler-runtime","useWebBloksCollectionGridAspectRatioProps","useWebBloksCollectionScrollHandlers","useWebBloksCollectionScrollingElementStyle","useWebBloksCollectionStopPropagation"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t,n,a=o("react-compiler-runtime").c(18),i=e.layoutConfig,l=e.node,u=e.externalStyle,c=l.getValues(),d=c.children,m=c.direction,f=c.item_spacing,g=c.spacing_after,h=c.spacing_before,y=o("WebBloksStyle").useStyle(l,u),C=y.style,b=y.wrapper,v=y.wrapperProps,S=y.ref,R=r("useWebBloksCollectionScrollingElementStyle")(c),L=R.scrollingElementStyle,E=R.scrollingElementClassNames,k=o("WebBloksCollectionScrollRefs").useWebbloksCollectionScrollContainerRef(l);r("useWebBloksCollectionScrollHandlers")(l);var I=r("useWebBloksCollectionStopPropagation")(S),T=o("WebBloksCollectionHelpers").getDirectionPropNames(m),D=T.crossAxisSize,x=T.mainAxisSize,$=T.mainAxisMarginStart,P=T.mainAxisMarginEnd,N;a[0]!==i.main_axis_span_spacing?(N=o("WebBloksUtils").toPx(i.main_axis_span_spacing),a[0]=i.main_axis_span_spacing,a[1]=N):N=a[1];var M;a[2]!==i.cross_axis_span_spacing?(M=o("WebBloksUtils").toPx(i.cross_axis_span_spacing),a[2]=i.cross_axis_span_spacing,a[3]=M):M=a[3];var w;a[4]!==N||a[5]!==M?(w={main:N,cross:M},a[4]=N,a[5]=M,a[6]=w):w=a[6];var A=w,F;a[7]!==E?(F=o("WebBloksStyle").classNames.apply(void 0,[o("WebBloksStyle").WebBloksStyles.container].concat(E)),a[7]=E,a[8]=F):F=a[8];var O;a[9]!==i.padding?(O=o("WebBloksUtils").insetToPadding(i.padding),a[9]=i.padding,a[10]=O):O=a[10];var B;a[11]!==l?(B=o("WebBloksCollectionHelpers").getContainerType(l),a[11]=l,a[12]=B):B=a[12];var W;return a[13]!==L||a[14]!==C||a[15]!==O||a[16]!==B?(W=babelHelpers.extends({},L,C,O,{display:"block",pointerEvents:"auto",containerType:B}),a[13]=L,a[14]=C,a[15]=O,a[16]=B,a[17]=W):W=a[17],b(s.jsx("div",babelHelpers.extends({},v,{ref:S,className:F,style:W},I,{children:s.jsx("div",{ref:k,style:babelHelpers.extends({display:"grid",flexDirection:m,gap:o("WebBloksUtils").toPx(f)},p(m,(t=i.span_count)!=null?t:1,A),(n={},n[x]="max-content",n[D]="100%",n[$]=h!=null?o("WebBloksUtils").toPx(h):void 0,n[P]=g!=null?o("WebBloksUtils").toPx(g):void 0,n)),children:d&&d.map(function(e){return s.jsx(_,{scrollerRef:S,node:e,layoutConfig:i,collectionNode:l},e.clientId)})})})))}function d(e){var t=o("react-compiler-runtime").c(9),n=e.node,a=e.externalStyle,i;if(t[0]!==n){var l=n.getValues(),u=l.layout_config;i=u==null?void 0:u.getValues(),t[0]=n,t[1]=i}else i=t[1];var d=i;if(!d){var m;return t[2]!==a||t[3]!==n?(m=s.jsx(r("WebBloksCollectionV2"),{node:n,externalStyle:a}),t[2]=a,t[3]=n,t[4]=m):m=t[4],m}var p;return t[5]!==a||t[6]!==d||t[7]!==n?(p=s.jsx(c,{node:n,externalStyle:a,layoutConfig:d}),t[5]=a,t[6]=d,t[7]=n,t[8]=p):p=t[8],p}function m(e,t){var n,r=(n=e.getStyle("bk.style.GridCollectionStyle"))==null?void 0:n.getValues();if(!r)return{};var o=r.span_count,a=r.is_full_span,i=t.getValues(),l=i.direction,s=i.layout_config,u=l==="column"?"gridColumn":"gridRow",c=s==null?void 0:s.getValues();if(a!=null&&c){var d;return d={},d[u]="span "+c.span_count,d}if(o!=null){var m;return m={},m[u]="span "+o,m}return{}}function p(e,t,n){return e==="row"?{gridTemplateRows:"repeat("+t+", 1fr)",gridAutoColumns:"max-content",gridAutoFlow:"column",rowGap:n.cross,columnGap:n.main}:{gridTemplateColumns:"repeat("+t+", 1fr)",gridAutoRows:"max-content",gridAutoFlow:"row",rowGap:n.main,columnGap:n.cross}}function _(e){var t=o("react-compiler-runtime").c(11),n=e.collectionNode,a=e.layoutConfig,i=e.node,l=e.scrollerRef,u;t[0]!==n||t[1]!==i?(u=m(i,n),t[0]=n,t[1]=i,t[2]=u):u=t[2];var c=r("useWebBloksCollectionGridAspectRatioProps")(a,n,l),d;t[3]!==u||t[4]!==c?(d=babelHelpers.extends({},u,c),t[3]=u,t[4]=c,t[5]=d):d=t[5];var p=d,_;return t[6]!==n||t[7]!==p||t[8]!==i||t[9]!==l?(_=s.jsx(r("WebBloksCollectionChildBase"),{collectionNode:n,node:i,scrollerRef:l,extraStyles:p}),t[6]=n,t[7]=p,t[8]=i,t[9]=l,t[10]=_):_=t[10],_}l.default=d}),98);
__d("WebBloksCollectionV1",["WebBloksCollectionScrollRefs","WebBloksComponentContext","WebBloksStyle","WebBloksUtils","react","react-compiler-runtime","useWebBloksCollectionScrollHandlers","useWebBloksCollectionScrollingElementStyle","useWebBloksCollectionStickyChildStyle","useWebBloksCollectionStopPropagation"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(18),n=e.node,a=e.externalStyle,i=n.getValues(),l=i.children,u=o("WebBloksStyle").useStyle(n,a),d=u.style,m=u.wrapper,p=u.wrapperProps,_=u.ref,f=r("useWebBloksCollectionScrollingElementStyle")(i),g=f.scrollingElementStyle,h=f.scrollingElementClassNames,y=o("WebBloksCollectionScrollRefs").useWebbloksCollectionScrollContainerRef(n);r("useWebBloksCollectionScrollHandlers")(n);var C=r("useWebBloksCollectionStopPropagation")(_),b;t[0]!==y||t[1]!==_?(b=function(t){y.current=t,_.current=t},t[0]=y,t[1]=_,t[2]=b):b=t[2];var v;t[3]!==h?(v=o("WebBloksStyle").classNames.apply(void 0,[o("WebBloksStyle").WebBloksStyles.container].concat(h)),t[3]=h,t[4]=v):v=t[4];var S;t[5]!==g||t[6]!==d?(S=babelHelpers.extends({},g,d,{display:"block",pointerEvents:"auto"}),t[5]=g,t[6]=d,t[7]=S):S=t[7];var R=l&&l.map(function(e,t){return s.jsx(c,{node:e,collectionNode:n,isFirstItem:t===0,isLastItem:t===l.length-1},e.clientId)}),L;t[8]!==C||t[9]!==b||t[10]!==v||t[11]!==S||t[12]!==R||t[13]!==p?(L=s.jsx("div",babelHelpers.extends({},p,{ref:b,className:v,style:S},C,{children:R})),t[8]=C,t[9]=b,t[10]=v,t[11]=S,t[12]=R,t[13]=p,t[14]=L):L=t[14];var E;return t[15]!==L||t[16]!==m?(E=m(L),t[15]=L,t[16]=m,t[17]=E):E=t[17],E}function c(e){var t=e.collectionNode,n=e.isFirstItem,a=e.isLastItem,i=e.node,l=o("WebBloksComponentContext").useWebBloksContext(),s=l.renderNode,u=t.getValues(),c=u.snap,m=u.spacing_after,p=u.snap_style,_=u.item_spacing,f=u.spacing_before,g=u.direction,h=g==="column",y=a?m!=null?o("WebBloksUtils").toPx(m):0:o("WebBloksUtils").toPx(_),C=n&&f!=null?o("WebBloksUtils").toPx(f):void 0,b;h?(b={marginTop:C,marginBottom:y,width:"100%"},d(i,"height")&&(b.height="auto")):(b={marginLeft:C,marginRight:y,display:"inline-flex",verticalAlign:"bottom",height:"100%"},d(i,"width")&&(b.width="auto"));var v;return p==null||p==="pager"?v="always":v="normal",s(i,babelHelpers.extends({},b,r("useWebBloksCollectionStickyChildStyle")({node:i,direction:g}),{scrollSnapAlign:c,scrollSnapStop:v}))}function d(e,t){var n,r;return(n=(r=e.getStyle("flex"))==null||(r=r.get(t))==null?void 0:r.endsWith("%"))!=null?n:!1}l.default=u}),98);
__d("WebBloksCollection",["WebBloksCollectionGrid_EXPERIMENTAL","WebBloksCollectionHelpers","WebBloksCollectionV1","WebBloksCollectionV2","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.node.get("layout_config_type");if(n==="grid"){var a;return t[0]!==e?(a=s.jsx(r("WebBloksCollectionGrid_EXPERIMENTAL"),babelHelpers.extends({},e)),t[0]=e,t[1]=a):a=t[1],a}if(o("WebBloksCollectionHelpers").shouldUseWebBloksCollectionV2(e.node)){var i;return t[2]!==e?(i=s.jsx(r("WebBloksCollectionV2"),babelHelpers.extends({},e)),t[2]=e,t[3]=i):i=t[3],i}var l;return t[4]!==e?(l=s.jsx(r("WebBloksCollectionV1"),babelHelpers.extends({},e)),t[4]=e,t[5]=l):l=t[5],l}l.default=u}),98);
__d("WebBloksDatetimeTextProvider",["WebBloksComponentContext","WebBloksDateUtils"],(function(t,n,r,o,a,i,l){function e(e){var t=e.node,n=t.get("timestamp"),r=t.get("type"),a=t.get("format"),i=o("WebBloksComponentContext").useWebBloksContext();return o("WebBloksDateUtils").getDateTimeText(n,i.bloksContext.objectSet.environment.locale,r,a)}l.default=e}),98);
__d("WebBloksDialog",["WebBloksComponentContext","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useRef;function p(e){var t=o("react-compiler-runtime").c(24),n=e.node,r=n.styleId,a=n.getValues(),i=a.title,l=a.message,u=a.primary_button,c=a.secondary_button,d=a.tertiary_button,m=o("WebBloksComponentContext").useWebBloksContext(),p;t[0]!==m.objectSet.navigationManager?(p=function(t){t.target===t.currentTarget&&m.objectSet.navigationManager.pop()},t[0]=m.objectSet.navigationManager,t[1]=p):p=t[1];var g=p,h=i!=null?i:l,y=i!=null?l:null,C=_(),b;t[2]!==m.objectSet.navigationManager?(b=function(t){t.key==="Escape"&&(t.stopPropagation(),m.objectSet.navigationManager.pop())},t[2]=m.objectSet.navigationManager,t[3]=b):b=t[3];var v=b,S=f,R="presentation",L=f,E=-1,k=h!=null&&s.jsx("div",{className:f.title,children:h}),I=y!=null&&s.jsx("div",{className:f.message,children:y}),T;t[4]!==k||t[5]!==I?(T=s.jsxs("div",{className:f.header,children:[k,I]}),t[4]=k,t[5]=I,t[6]=T):T=t[6];var D=f,x=m.renderNode(u),$=m.renderNode(c),P=m.renderNode(d),N;t[7]!==D.buttons||t[8]!==x||t[9]!==$||t[10]!==P?(N=s.jsxs("div",{className:D.buttons,children:[x,$,P]}),t[7]=D.buttons,t[8]=x,t[9]=$,t[10]=P,t[11]=N):N=t[11];var M;t[12]!==C||t[13]!==h||t[14]!==N||t[15]!==L.container||t[16]!==T?(M=s.jsxs("div",{className:L.container,ref:C,tabIndex:E,"aria-label":h,children:[T,N]}),t[12]=C,t[13]=h,t[14]=N,t[15]=L.container,t[16]=T,t[17]=M):M=t[17];var w;return t[18]!==g||t[19]!==r||t[20]!==v||t[21]!==M||t[22]!==S.background?(w=s.jsx("div",{"data-bloks-name":r,className:S.background,onClick:g,onKeyDown:v,role:R,children:M}),t[18]=g,t[19]=r,t[20]=v,t[21]=M,t[22]=S.background,t[23]=w):w=t[23],w}function _(){var e=o("react-compiler-runtime").c(2),t=m(null),n,r;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=function(){t.current&&(t.current.contains(document.activeElement)||t.current&&t.current.focus())},r=[],e[0]=n,e[1]=r):(n=e[0],r=e[1]),d(n,r),t}var f=o("WebBloksStyle").createStyles({background:{alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.5)",bottom:0,display:"flex",justifyContent:"space-around",left:0,position:"fixed",right:0,top:0,zIndex:1e3},buttons:{},container:{backgroundColor:"white",borderRadius:12,margin:32,maxWidth:"100%",textAlign:"center",width:400,outline:"none"},header:{padding:32},message:{color:"#65676B",fontSize:14,marginTop:12},title:{color:"#1C1E21",fontSize:18,fontWeight:600}});l.default=p}),98);
__d("WebBloksAbstractButton",["WebBloksComponentContext","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["accessibility_label","badge_count","className","icon","role","tabIndex","title","trailing"],s,u=s||(s=o("react"));function c(t){var n,r=o("react-compiler-runtime").c(33),a,i,l,s,c,m,p,_,f;r[0]!==t?(a=t.accessibility_label,i=t.badge_count,l=t.className,s=t.icon,m=t.role,p=t.tabIndex,_=t.title,f=t.trailing,c=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l,r[4]=s,r[5]=c,r[6]=m,r[7]=p,r[8]=_,r[9]=f):(a=r[1],i=r[2],l=r[3],s=r[4],c=r[5],m=r[6],p=r[7],_=r[8],f=r[9]);var g=m===void 0?"button":m,h=p===void 0?0:p,y=o("WebBloksComponentContext").useWebBloksContext(),C=y.objectSet;if(s==null&&_==null)return null;var b=d.abstractButton,v=_==null,S=(n=_!=null?_:a)!=null?n:"",R=null;if(s!=null){var L=C.environment,E=L.AssetRenderer,k=L.logger;if(!E)k.mustfix("Trying to render an asset, but AssetRenderer is not defined for %s",JSON.stringify(s));else{var I;r[10]!==S||r[11]!==v?(I={},S&&(I.alt="",v||(I.className=d.marginRight4)),r[10]=S,r[11]=v,r[12]=I):I=r[12];var T;r[13]!==E||r[14]!==s||r[15]!==I?(T=u.jsx(E,babelHelpers.extends({src:s},I)),r[13]=E,r[14]=s,r[15]=I,r[16]=T):T=r[16],R=T}}var D=f===!0?d.TrailingButton:"",x;r[17]!==l||r[18]!==D?(x=o("WebBloksStyle").classNames(D,b,l),r[17]=l,r[18]=D,r[19]=x):x=r[19];var $;r[20]!==S||r[21]!==v?($=v?u.jsx("span",{className:d.abstractButton+"_accessible_elem",children:S}):S,r[20]=S,r[21]=v,r[22]=$):$=r[22];var P;r[23]!==R||r[24]!==c||r[25]!==g||r[26]!==x||r[27]!==$||r[28]!==h?(P=u.jsxs("div",babelHelpers.extends({role:g,tabIndex:h},c,{className:x,children:[R,$]})),r[23]=R,r[24]=c,r[25]=g,r[26]=x,r[27]=$,r[28]=h,r[29]=P):P=r[29];var N=i!=null&&i>0?i:void 0,M;return r[30]!==P||r[31]!==N?(M=u.jsxs(u.Fragment,{children:[P,N]}),r[30]=P,r[31]=N,r[32]=M):M=r[32],M}var d=o("WebBloksStyle").createStyles({TrailingButton:{backgroundColor:"transparent",border:"none",color:"rgb(23, 99, 207)"},marginRight4:{marginRight:4},abstractButton:function(t){var e;return e={},e[t]={cursor:"pointer",display:"inline-block",textDecoration:"none",whiteSpace:"nowrap",padding:"1px 6px"},e[".gecko "+t+":focus"]={outline:"1px dotted #3b5998",outlineColor:"invert"},e[t+":hover"]={textDecoration:"none"},e[t+" + "+t]={marginLeft:4},e[t+"_accessible_elem"]={clip:"rect(1px, 1px, 1px, 1px)",height:1,overflow:"hidden",position:"absolute",whiteSpace:"nowrap",width:1},e}});l.default=c}),98);
__d("WebBloksDialogButton",["WebBloksAbstractButton","WebBloksComponentContext","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(18),n=e.node,a;t[0]!==n?(a=n.getValues(),t[0]=n,t[1]=a):a=t[1];var i=a,l=i.appearance,u=i.text,d=i.testing_id,m;t[2]!==n?(m=n.getExpression("on_click"),t[2]=n,t[3]=m):m=t[3];var p=m,_=o("WebBloksComponentContext").useWebBloksContext(),f=_.objectSet,g=_.executeCatch,h=_.bloksContext,y=_.ownerContext,C;t[4]!==h||t[5]!==g||t[6]!==n||t[7]!==f.navigationManager||t[8]!==p||t[9]!==y?(C=function(t){t.preventDefault(),t.stopPropagation(),f.navigationManager.pop(),p!=null&&(y?y.executeCatch(p.getValue(),[n,h]):g(n,p,[n,h]))},t[4]=h,t[5]=g,t[6]=n,t[7]=f.navigationManager,t[8]=p,t[9]=y,t[10]=C):C=t[10];var b=C,v;e:switch(l){case"destructive":{v=c.destructive;break e}case"cancel":{v=c.cancel;break e}case"default":default:v=c.default}var S;t[11]!==v?(S=o("WebBloksStyle").classNames(c.button,v),t[11]=v,t[12]=S):S=t[12];var R;return t[13]!==b||t[14]!==S||t[15]!==d||t[16]!==u?(R=s.jsx(r("WebBloksAbstractButton"),{className:S,accessibility_label:u,onClick:b,title:u,"data-testid":void 0}),t[13]=b,t[14]=S,t[15]=d,t[16]=u,t[17]=R):R=t[17],R}var c=o("WebBloksStyle").createStyles({button:function(t){var e;return e={},e["div"+t]={display:"block",borderTop:"1px solid #CED0D4",cursor:"pointer",fontSize:16,lineHeight:24/16,padding:"12px 10px",pointerEvents:"auto !important",marginLeft:"0px !important"},e},cancel:{color:"#1C1E21"},destructive:{color:"hsl(350, 87%, 55%)"},default:{color:"#0064E0"}});l.default=u}),98);
__d("WebBloksDummyComponent",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e){var t,n=(t=e.node.styleId)!=null?t:"This component";throw new(o("WebBloksErrors")).WebBloksError(n+" is not yet implemented. Please override in renderer")}l.default=e}),98);
__d("WebBloksFieldset",["WebBloksComponentContext","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.node,r=o("WebBloksComponentContext").useWebBloksContext(),a=r.renderChildren,i;t[0]!==n||t[1]!==a?(i=a(n.getSubNodes("children")),t[0]=n,t[1]=a,t[2]=i):i=t[2];var l;return t[3]!==i?(l=s.jsx("fieldset",{className:c.fieldset,children:i}),t[3]=i,t[4]=l):l=t[4],l}var c=o("WebBloksStyle").createStyles({fieldset:{border:"none",margin:0,padding:0}});l.default=u}),98);
__d("WebBloksAnchorTagExtensionHandlerUtils",["WebBloksUtils","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(5),n,r;if(t[0]!==e){r=Symbol.for("react.early_return_sentinel");e:{var a=e.getValues(),i=o("WebBloksUtils").findExtension(a.extensions,"bk.components.AnchorTagExtension");if(!i){r=null;break e}n=i.getValues()}t[0]=e,t[1]=n,t[2]=r}else n=t[1],r=t[2];if(r!==Symbol.for("react.early_return_sentinel"))return r;var l=n,s=l.href,u;return t[3]!==s?(u={href:s,tabIndex:0},t[3]=s,t[4]=u):u=t[4],u}l.useWebBloksAnchorTagExtensionProps=e}),98);
__d("WebBloksDrawable",["WebBloksTheme","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo,d=s.useState;function m(e){return[1,void 0,!0].includes(e)}function p(e,t,n){var r=o("react-compiler-runtime").c(5),a;r[0]!==n?(a=n===void 0?{}:n,r[0]=n,r[1]=a):a=r[1];var i=a,l=_(e),s=f(e,t,i),u;return r[2]!==s||r[3]!==l?(u=babelHelpers.extends({},l,s),r[2]=s,r[3]=l,r[4]=u):u=r[4],u}function _(e){var t=o("react-compiler-runtime").c(9),n=o("WebBloksTheme").useTheme(),r;t[0]!==n?(r=n.getTheme(),t[0]=n,t[1]=r):r=t[1];var a=r,i;e:{if(!e){var l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l={},t[2]=l):l=t[2],i=l;break e}var s;t[3]!==e||t[4]!==a?(s=h(a,e),t[3]=e,t[4]=a,t[5]=s):s=t[5];var u=s;if(u==null){var c;t[6]===Symbol.for("react.memo_cache_sentinel")?(c={},t[6]=c):c=t[6],i=c;break e}var d;t[7]!==u?(d={background:u},t[7]=u,t[8]=d):d=t[8],i=d}return i}function f(e,t,n){var r=o("react-compiler-runtime").c(19),a;r[0]!==n?(a=n===void 0?{}:n,r[0]=n,r[1]=a):a=r[1];var i=a,l=o("WebBloksTheme").useTheme(),s;r[2]!==l?(s=l.getTheme(),r[2]=l,r[3]=s):s=r[3];var c=s,p=d(m(i.enabled)?"default":"disabled"),_=p[0],f=p[1],g,h;r[4]!==i.enabled?(g=function(){f(m(i.enabled)?"default":"disabled")},h=[i.enabled],r[4]=i.enabled,r[5]=g,r[6]=h):(g=r[5],h=r[6]),u(g,h);var b,v;r[7]!==e||r[8]!==i.enabled||r[9]!==t?(b=function(){var n=t.current;if(n!=null){var r=function(){f("pressed");function e(){f("default"),document.removeEventListener("mouseup",e),document.removeEventListener("touchend",e)}document.addEventListener("mouseup",e),document.addEventListener("touchend",e)};return m(i.enabled)&&(e==null?void 0:e.styleId)==="bk.components.StateDrawable"&&y(e,"pressed")&&(n.addEventListener("mousedown",r),n.addEventListener("touchstart",r)),(function(){n.removeEventListener("mousedown",r),n.removeEventListener("touchstart",r)})}},v=[e,i.enabled,t],r[7]=e,r[8]=i.enabled,r[9]=t,r[10]=b,r[11]=v):(b=r[10],v=r[11]),u(b,v);var S;e:{if((e==null?void 0:e.styleId)==="bk.components.StateDrawable"){var R;r[12]!==e||r[13]!==_||r[14]!==c?(R=C(c,e,_),r[12]=e,r[13]=_,r[14]=c,r[15]=R):R=r[15];var L=R,E=L!=null?L:void 0,k;r[16]!==E?(k={background:E},r[16]=E,r[17]=k):k=r[17],S=k;break e}var I;r[18]===Symbol.for("react.memo_cache_sentinel")?(I={},r[18]=I):I=r[18],S=I}return S}var g={top_to_bottom:"180deg",left_to_right:"90deg",bottom_left_to_top_right:"45deg",top_left_to_bottom_right:"135deg"};function h(e,t){switch(t.styleId){case"bk.components.ColorDrawable":{var n=t.get("color");if(n==null)break;return o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr(n))}case"bk.components.ThemedColorDrawable":{var r=t.get("color");if(r==null)break;return o("WebBloksUtils").getRGBColorWithTheme(r,e)}case"bk.components.GradientDrawable":{var a=t.get("orientation"),i=t.get("begin_color"),l=t.get("middle_color"),s=t.get("end_color"),u="";return a!=null&&(u+=g[a]+","),i!=null&&(u+=o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr(i))+","),l!=null&&(u+=o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr(l))+","),s!=null&&(u+=o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr(s))),"linear-gradient("+u+")"}case"bk.components.GradientThemedColorDrawable":{var c=t.get("orientation"),d=t.get("begin_color"),m=t.get("middle_color"),p=t.get("end_color"),_="";return c!=null&&(_+=g[c]+","),d!=null&&(_+=o("WebBloksUtils").getRGBColorWithTheme(d,e)+","),m!=null&&(_+=o("WebBloksUtils").getRGBColorWithTheme(m,e)+","),p!=null&&(_+=o("WebBloksUtils").getRGBColorWithTheme(p,e)),"linear-gradient("+_+")"}default:return null}}function y(e,t){var n,r=(n=e==null?void 0:e.get("state_items"))!=null?n:[];return r.some(function(e){return e.get("state")===t})}function C(e,t,n){var r=t.get("state_items");for(var o of r)if(o.get("state")===n)return h(e,o.get("drawable"));return null}l.default=p}),98);
__d("WebBloksDecoration",["WebBloksBooleanUtils","WebBloksDrawable","WebBloksTheme","WebBloksUtils","react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useMemo,u=0,c=3,d=6,m="#000000";function p(e,t){var n=o("WebBloksTheme").useTheme().getTheme(),a=e.decoration,i=e.enabled,l=a==null?void 0:a.get("background"),p=r("WebBloksDrawable")(l,t,e),_=a==null?void 0:a.get("border_width"),f=s(function(){var e=a==null?void 0:a.get("border_themed_color"),t=a==null?void 0:a.get("border_color");return e!=null?o("WebBloksUtils").getRGBColorWithTheme(e,n):t!=null?o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr(t)):null},[a,n]);if(_!=null&&f!=null){var g=o("WebBloksUtils").toPx(_);p.border=g+" solid "+f}var h=a==null?void 0:a.get("shadow_opacity"),y=a==null?void 0:a.get("shadow_themed_color");if(y!=null||h!=null){var C,b,v,S=m;if(y!=null){var R=o("WebBloksUtils").getRGBColorWithTheme(y,n),L=o("WebBloksUtils").convertRGBOrHexStringToArr(R),E=L[0],k=L[1],I=L[2],T=L[3],D=T*(h!=null?h:1);S=o("WebBloksUtils").convertRGBArrToString([E,k,I,D])}var x=(C=a==null?void 0:a.get("shadow_offset_width"))!=null?C:u,$=(b=a==null?void 0:a.get("shadow_offset_height"))!=null?b:c,P=(v=a==null?void 0:a.get("shadow_radius"))!=null?v:d;p.boxShadow=x+"px "+$+"px "+P+"px "+S}var N=a==null?void 0:a.get("clipping");o("WebBloksBooleanUtils").isTrue(N)&&(p.overflow="hidden"),Object.prototype.hasOwnProperty.call(e,"on_click")&&!o("WebBloksBooleanUtils").isFalse(i)&&(p.cursor="pointer",p.pointerEvents="auto");var M=a==null?void 0:a.get("corner_radius");if(M!=null){var w=a==null?void 0:a.get("corners_to_apply_radius");if(w!=null&&w.length>0)for(var A of w)switch(A){case"top_left":p.borderTopLeftRadius=o("WebBloksUtils").toPx(M);break;case"top_right":p.borderTopRightRadius=o("WebBloksUtils").toPx(M);break;case"bottom_right":p.borderBottomRightRadius=o("WebBloksUtils").toPx(M);break;case"bottom_left":p.borderBottomLeftRadius=o("WebBloksUtils").toPx(M);break;default:break}else p.borderRadius=o("WebBloksUtils").toPx(M)}return p}l.default=p}),98);
__d("useClickablePropsForWebBloks",["WebBloksBooleanUtils","WebBloksComponentContext","WebBloksConstants","react-compiler-runtime"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){var a=o("react-compiler-runtime").c(18),i=o("WebBloksComponentContext").useWebBloksContext(),l=i.executeCatch,u=i.bloksContext,c=r===!0?s:void 0;if(t==null){var d;return a[0]!==c?(d={onClickCapture:c},a[0]=c,a[1]=d):d=a[1],d}var m;a[2]!==u||a[3]!==n||a[4]!==l||a[5]!==r||a[6]!==t||a[7]!==e?(m=function(i){r===!0&&i.preventDefault(),!o("WebBloksBooleanUtils").isFalse(n)&&t!=null&&(i.preventDefault(),i.stopPropagation(),l(e,t,[e,u]))},a[2]=u,a[3]=n,a[4]=l,a[5]=r,a[6]=t,a[7]=e,a[8]=m):m=a[8];var p=m,_=p,f;a[9]!==p?(f=function(t){t.keyCode===o("WebBloksConstants").KEY_RETURN?p(t):t.keyCode===o("WebBloksConstants").KEY_SPACE&&t.preventDefault()},a[9]=p,a[10]=f):f=a[10];var g=f,h;a[11]!==p?(h=function(t){t.keyCode===o("WebBloksConstants").KEY_SPACE&&p(t)},a[11]=p,a[12]=h):h=a[12];var y=h,C;return a[13]!==_||a[14]!==c||a[15]!==g||a[16]!==y?(C={onClick:_,onClickCapture:c,onKeyDown:g,onKeyUp:y},a[13]=_,a[14]=c,a[15]=g,a[16]=y,a[17]=C):C=a[17],C}function s(e){e.preventDefault()}l.default=e}),98);
__d("useWebBloksDrawableNode",["WebBloksComponentContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=o("WebBloksComponentContext").useWebBloksContext(),r=n.objectSet;if(e!=null){var a;t[0]!==e.styleId||t[1]!==r?(a=r.getNullableComponentForName(e.styleId),t[0]=e.styleId,t[1]=r,t[2]=a):a=t[2];var i=a,l;return t[3]!==i||t[4]!==e?(l=i!=null?s.jsx(i,{node:e}):null,t[3]=i,t[4]=e,t[5]=l):l=t[5],l}return null}l.default=u}),98);
__d("WebBloksFlexbox",["WebBloksAnchorTagExtensionHandlerUtils","WebBloksComponentContext","WebBloksDecoration","WebBloksDrawable","WebBloksStyle","WebBloksUtils","react","react-compiler-runtime","useClickablePropsForWebBloks","useWebBloksDrawableNode"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef;function m(e){var t=e.node,n=e.externalStyle,a=t.getExpression("on_click"),i=t.getSubNodes("children"),l=t.getSubNode("decoration"),u=t.get("visibility"),d=t.get("align_content"),m=t.get("align_items"),_=t.get("flex_direction"),g=t.get("flex_wrap"),h=t.get("justify_content"),y=t.getExpression("on_mount"),C=o("WebBloksUtils").isBloksModelEnabled(t),b=o("WebBloksStyle").useStyle(t,n,a!=null&&C),v=b.style,S=b.wrapper,R=b.wrapperProps,L=b.ref,E=r("WebBloksDecoration")(t.getValues(),L),k=o("WebBloksAnchorTagExtensionHandlerUtils").useWebBloksAnchorTagExtensionProps(t),I=k!==null,T=I?"a":"div",D=r("useClickablePropsForWebBloks")(t,a,R.disabled===!0?!1:C,I),x=o("WebBloksComponentContext").useWebBloksContext(),$=x.executeOnNextTickCatch,P=x.renderChildren,N=x.bloksContext;c(function(){y!=null&&$(t,y,[t,N])},[y]);var M=l==null?void 0:l.get("foreground"),w=babelHelpers.extends({pointerEvents:"none"},v,f(u),E,{alignContent:o("WebBloksUtils").toHyphen(d),alignItems:o("WebBloksUtils").toHyphen(m),flexDirection:o("WebBloksUtils").toHyphen(_),flexWrap:o("WebBloksUtils").toHyphen(g),justifyContent:o("WebBloksUtils").toHyphen(h!=null?h:v.justifyContent)});return S(s.jsxs(T,babelHelpers.extends({},R,{className:o("WebBloksStyle").WebBloksStyles.container,style:w},D,k,{children:[P(i),M?s.jsx(p,{drawable:M}):null]})))}m.displayName=m.name+" [from "+i.id+"]";function p(e){var t=o("react-compiler-runtime").c(2),n=e.drawable,a=d(null),i=r("WebBloksDrawable")(n,a),l=r("useWebBloksDrawableNode")(n);if(l!=null)return l;var u;return t[0]!==i?(u=s.jsx("div",{"data-bloks-name":"bk.components.BoxDecoration",ref:a,className:_.foreground,style:i}),t[0]=i,t[1]=u):u=t[1],u}var _=o("WebBloksStyle").createStyles({foreground:{position:"absolute",top:0,bottom:0,left:0,right:0,pointerEvents:"none"}});function f(e){switch(e){case"gone":return{display:"none"};case"invisible":return{visibility:"hidden"}}}l.default=m}),98);
__d("WebBloksGlimmer",["WebBloksStyle","WebBloksTheme","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=100;function c(e){var t,n,r=o("react-compiler-runtime").c(17),a=e.node,i=e.externalStyle,l=a.get("shape"),c;r[0]!==a?(c=a.get("corner_radius"),r[0]=a,r[1]=c):c=r[1];var f=c,g=o("WebBloksStyle").useStyle(a,i),h=g.wrapperProps,y=g.wrapper,C=g.style,b;if(r[2]!==a){var v;b=(v=a.get("index"))!=null?v:1,r[2]=a,r[3]=b}else b=r[3];var S=b,R=(t=a.get("component_style"))!=null?t:"default",L=(n=a.get("surface_background_color"))!=null?n:"default",E=o("WebBloksTheme").WebBloksThemeVars["fds-gray-65"],k=d;L==="default"&&R==="background"?k=m:L==="wash"&&R==="background"&&(E=o("WebBloksTheme").WebBloksThemeVars["fds-white"],k=p);var I=f;l==="circle"&&(I="50%");var T;r[4]===Symbol.for("react.memo_cache_sentinel")?(T=o("WebBloksStyle").classNames(o("WebBloksStyle").WebBloksStyles.container,_.root),r[4]=T):T=r[4];var D=S*u+"ms",x;r[5]!==k||r[6]!==E||r[7]!==I||r[8]!==C||r[9]!==D?(x=babelHelpers.extends({},C,{borderRadius:I,animationDelay:D,background:E,animationName:k}),r[5]=k,r[6]=E,r[7]=I,r[8]=C,r[9]=D,r[10]=x):x=r[10];var $;r[11]!==x||r[12]!==h?($=s.jsx("div",babelHelpers.extends({},h,{"data-visualcompletion":"loading-state",className:T,style:x})),r[11]=x,r[12]=h,r[13]=$):$=r[13];var P;return r[14]!==$||r[15]!==y?(P=y($),r[14]=$,r[15]=y,r[16]=P):P=r[16],P}var d=o("WebBloksStyle").keyframes({"0%":{opacity:.04},"50%":{opacity:.17},"100%":{opacity:.04}}),m=o("WebBloksStyle").keyframes({"0%":{opacity:.04},"50%":{opacity:.07},"100%":{opacity:.04}}),p=o("WebBloksStyle").keyframes({"0%":{opacity:.65},"50%":{opacity:1},"100%":{opacity:.65}}),_=o("WebBloksStyle").createStyles({root:{animationDuration:"2s",animationIterationCount:"infinite",animationTimingFunction:"cubic-bezier(0.5, 0, 0.5, 1)"}});l.default=c}),98);
__d("WebBloksImage",["WebBloksComponentContext","WebBloksStyle","WebBloksTheme","WebBloksUtils","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useEffect;function c(e){switch(e){case"contain":return"contain";case"stretch":return"fill";case"cover":default:return"cover"}}function d(e){var t,n=e.node,r=e.externalStyle,a=n.get("dark_url"),i=n.get("scale_type"),l=n.get("url"),d=n.get("color_filter"),m=n.getExpression("on_image_perf_update"),p=o("WebBloksComponentContext").useWebBloksContext(),_=p.bloksContext,f=p.executeCatch,g=o("WebBloksStyle").useStyle(n,r),h=g.style,y=g.wrapper,C=g.wrapperProps,b=o("WebBloksTheme").useTheme().getTheme(),v=n.getValues(),S=v.contrib;h.position==="absolute"&&(h.top==="0px"&&h.bottom==="0px"&&(h.height="100%"),h.left==="0px"&&h.right==="0px"&&(h.width="100%"));var R=c(i),L={};if(d!=null&&l!=null){var E=R==="fill"?"100% 100%":R;L={WebkitMaskImage:"url("+l+")",WebkitMaskSize:E,maskImage:"url("+l+")",maskSize:E,backgroundColor:o("WebBloksUtils").getRGBColorWithTheme(d,b),objectPosition:"10000px 10000px"}}var k=function(t){m!=null&&f(n,m,[t,Date.now(),_])};u(function(){k("ImageRequested")},[]);var I=S==null?void 0:S.get("base_sixty_four_encoded_image");if(I!=null){var T=I.charAt(0),D="";switch(T){case"/":D="jpg";break;case"i":D="png";break;case"R":D="gif";break;case"U":D="webp";break;case"P":D="svg";break}I="data:image/"+D+";base64,"+I}var x=b===o("WebBloksTheme").THEME.light||a==null?l:a,$=typeof x=="string"&&x?x.replace(/\\/g,""):null,P=I!=null?I:$,N=babelHelpers.extends({},C,{"aria-label":null,alt:(t=C==null?void 0:C["aria-label"])!=null?t:""});return y(s.jsx("img",babelHelpers.extends({},N,{src:P,onLoad:function(){return k("ImageFinalRendered")},onError:function(){return k("ImageFailed")}},o("WebBloksStyle").getStyleProps(babelHelpers.extends({},h,L,{objectFit:R,overflow:"hidden"})))))}d.displayName=d.name+" [from "+i.id+"]",l.default=d}),98);
__d("WebBloksInternalAction",[],(function(t,n,r,o,a,i){"use strict";function e(e){return null}i.default=e}),66);
__d("WebBloksMergeWithBind",["WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e){throw new(o("WebBloksErrors")).WebBloksError("Should not be called")}l.default=e}),98);
__d("WebBloksNavbarBackButton",["WebBloksAbstractButton","WebBloksComponentContext","WebBloksStyle","WebBloksTheme","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=o("WebBloksStyle").createStyles({backButton:{display:"flex",alignItems:"center",flexShrink:0,flexGrow:0,flexDirection:"row",justifyContent:"center"}});function c(e){var t=o("react-compiler-runtime").c(8),n=e.onClick,a=o("WebBloksTheme").useTheme(),i;t[0]!==a?(i=a.getTheme(),t[0]=a,t[1]=i):i=t[1];var l=i,c=o("WebBloksComponentContext").useWebBloksContext(),d=c.objectSet,m;t[2]!==d||t[3]!==l?(m=l===o("WebBloksTheme").THEME.light?d.getAsset("chevronLeft"):d.getAsset("chevronLeftDark"),t[2]=d,t[3]=l,t[4]=m):m=t[4];var p=m,_;return t[5]!==p||t[6]!==n?(_=s.jsx("div",{className:u.backButton,children:s.jsx(r("WebBloksAbstractButton"),{trailing:!0,icon:p,accessibility_label:"Back",onClick:n})}),t[5]=p,t[6]=n,t[7]=_):_=t[7],_}l.default=c}),98);
__d("WebBloksScreenHost",["WebBloksBind","WebBloksComponentContext","WebBloksExternalVariables","WebBloksUtils","react","react-compiler-runtime","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useLayoutEffect,m=u.useMemo,p=u.useState;function _(e){var t,n,r=o("react-compiler-runtime").c(49),a=e.externalVariables,i=e.isLoadingNode,l=e.screen,u=i===void 0?!1:i,m;r[0]!==u||r[1]!==l?(m=function(){return new(o("WebBloksComponentContext")).WebBloksComponentContext(l.getTreeManager().bloksContext,l.options.ownerContext,u)},r[0]=u,r[1]=l,r[2]=m):m=r[2];var _=p(m),g=_[0],h=g.renderNode,y;r[3]!==l?(y=function(){return o("WebBloksExternalVariables").getProcessedDataPropEntries(l.getTreeManager().initialTreeResources)},r[3]=l,r[4]=y):y=r[4];var C=p(y),b=C[0],v;r[5]!==b||r[6]!==a||r[7]!==l.options.externalVariables?(v=function(){var e=new Map;return o("WebBloksUtils").putAll(e,a),o("WebBloksUtils").putAll(e,l.options.externalVariables),o("WebBloksExternalVariables").getProcessedExternalVariables(e,b)},r[5]=b,r[6]=a,r[7]=l.options.externalVariables,r[8]=v):v=r[8];var S=p(v),R=S[0],L=S[1],E;r[9]!==R||r[10]!==l?(E=function(){var e=l.getTreeManager();return o("WebBloksBind").bind(e.bloksContext,e.unboundModel,e.treeResourcesState,R)},r[9]=R,r[10]=l,r[11]=E):E=r[11];var k=p(E),I=k[0],T=k[1],D=p((t=l.options.initialContainer)==null?void 0:t.model),x=D[0],$=D[1],P=p((n=l.options.initialContainer)==null?void 0:n.config),N=P[0],M=P[1],w,A;r[12]!==l?(w=function(){l.setOnContainerUpdate(function(e,t){$(e),M(t)})},A=[l],r[12]=l,r[13]=w,r[14]=A):(w=r[13],A=r[14]),d(w,A);var F,O;r[15]!==b||r[16]!==a||r[17]!==R||r[18]!==l?(F=function(){var e=f(R,a,b),t=e.needsUpdate,n=e.updatedExternalVariables;if(t){L(n);var r=l.getTreeManager();T(o("WebBloksBind").bind(r.bloksContext,r.unboundModel,r.treeResourcesState,n))}},O=[b,a,R,l],r[15]=b,r[16]=a,r[17]=R,r[18]=l,r[19]=F,r[20]=O):(F=r[19],O=r[20]),c(F,O);var B,W;r[21]!==I||r[22]!==l?(B=function(){l.getTreeManager().setCommittedBoundTree(I)},W=[l,I],r[21]=I,r[22]=l,r[23]=B,r[24]=W):(B=r[23],W=r[24]),c(B,W);var q,U;r[25]!==R||r[26]!==l?(q=function(){var e=l.getTreeManager(),t=function(n){T(o("WebBloksBind").bind(e.bloksContext,n.unboundModel,n.treeResourcesState,R,e.bindResult))};return e.onNewTreeAndVariablesListener.on(t),(function(){return e.onNewTreeAndVariablesListener.off(t)})},U=[R,l],r[25]=R,r[26]=l,r[27]=q,r[28]=U):(q=r[27],U=r[28]),c(q,U);var V,H;r[29]!==u?(V=function(){u||o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-ttrc-end")},H=[u],r[29]=u,r[30]=V,r[31]=H):(V=r[30],H=r[31]),c(V,H);var G;r[32]!==x||r[33]!==l.objectSet?(G=x!=null?l.objectSet.getContainerConfigModuleForName(x.styleId).ContainerComponent:null,r[32]=x,r[33]=l.objectSet,r[34]=G):G=r[34];var z=G,j,K;r[35]!==I.boundModel||r[36]!==h?(K=h(I.boundModel),r[35]=I.boundModel,r[36]=h,r[37]=K):K=r[37];var Q=K;if(z!=null&&N!=null){var X;r[38]!==z||r[39]!==N||r[40]!==Q?(X=s.jsx(z,{containerConfig:N,children:Q}),r[38]=z,r[39]=N,r[40]=Q,r[41]=X):X=r[41],j=X}else j=Q;var Y=j,J=l.objectSet.mountEffectsQueue,Z,ee;r[42]!==Y||r[43]!==J?(Z=function(){Y!=null&&!J.isEmpty()&&J.runEffects()},ee=[J,Y],r[42]=Y,r[43]=J,r[44]=Z,r[45]=ee):(Z=r[44],ee=r[45]),c(Z,ee);var te;return r[46]!==g||r[47]!==Y?(te=s.jsx(o("WebBloksComponentContext").WebBloksComponentContextContext.Provider,{value:g,children:Y}),r[46]=g,r[47]=Y,r[48]=te):te=r[48],te}function f(e,t,n){var r=!1;if(!t)return{needsUpdate:r,updatedExternalVariables:e};var o=e;for(var a of t.entries()){var i=a[0],l=a[1],s=n.get(i);s!=null&&o.get(s)!==l&&(r=!0,o.set(s,l))}return{needsUpdate:r,updatedExternalVariables:o}}l.default=_}),98);
__d("WebBloksNavbar",["WebBloksAbstractButton","WebBloksComponentContext","WebBloksNavbarBackButton","WebBloksScreen","WebBloksScreenHost","WebBloksStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime","useClickablePropsForWebBloks"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useMemo,c=o("WebBloksStyle").createStyles({root:{height:52,width:"100%",zIndex:1,backgroundColor:o("WebBloksTheme").WebBloksThemeVars["navbar-bg"],padding:8,borderBottomStyle:"solid",borderBottomColor:o("WebBloksTheme").WebBloksThemeVars.separator,borderBottomWidth:1,justifyContent:"center"},backButton:{display:"flex",alignItems:"center",flexShrink:0,flexGrow:0,flexDirection:"row",justifyContent:"center"},titleContainer:{alignItems:"center",flexGrow:1,fontWeight:600,justifyContent:"center"},titleContainerMargin:{marginRight:28},title:{flexGrow:1,alignItems:"center",justifyContent:"center",margin:"0 0px",textAlign:"center"},trailingButtons:{display:"flex",flexShrink:0,alignItems:"center",flexDirection:"row-reverse",justifyContent:"center"}});function d(e){var t=o("react-compiler-runtime").c(32),n=e.node,a=o("WebBloksComponentContext").useWebBloksContext(),i=a.objectSet,l=a.executeCatch,u=a.renderNode,d=a.ownerContext,p=a.isLoadingNode,_=i.navigationManager,f;t[0]!==n?(f=n.getValues(),t[0]=n,t[1]=f):f=t[1];var g=f,h=g.contribs,y=g.hide_navbar,C=g.title,b;if(t[2]!==h||t[3]!==l||t[4]!==p||t[5]!==n||t[6]!==i||t[7]!==d||t[8]!==u){e:{var v=[],S=null;if(h==null){b={titleBloksNode:null,trailingButtons:v};break e}for(var R of h){var L=R.getValues(),E=R.getExpression("custom_title_parseresult");if(E!=null){var k=void 0;p&&d?k=d.executeCatch(E.getValue(),[]):k=l(n,E,[]);var I=o("WebBloksScreen").WebBloksScreen.fromBloksParseResult(i,o("WebBloksUtils").cast(k),{isModal:!1,isEmbedded:!0});S=s.jsx(r("WebBloksScreenHost"),{screen:I})}if(L.trailing_buttons!==void 0)for(var T of L.trailing_buttons)v.push(s.jsx(m,{node:T},T.clientId));if(L.right_buttons!==void 0)for(var D of L.right_buttons)v.push(u(D))}var x;t[10]!==S||t[11]!==v?(x={titleBloksNode:S,trailingButtons:v},t[10]=S,t[11]=v,t[12]=x):x=t[12],b=x}t[2]=h,t[3]=l,t[4]=p,t[5]=n,t[6]=i,t[7]=d,t[8]=u,t[9]=b}else b=t[9];var $=b,P=$.titleBloksNode,N=$.trailingButtons;if(y===!0)return null;var M=_.getScreenCount()>1,w=M&&N.length===0,A=n.styleId,F;t[13]===Symbol.for("react.memo_cache_sentinel")?(F=o("WebBloksStyle").classNames(o("WebBloksStyle").WebBloksStyles.container,c.root),t[13]=F):F=t[13];var O=w?c.titleContainerMargin:null,B;t[14]!==O?(B=o("WebBloksStyle").classNames(o("WebBloksStyle").WebBloksStyles.container,c.titleContainer,O),t[14]=O,t[15]=B):B=t[15];var W;t[16]!==_||t[17]!==M?(W=M?s.jsx(r("WebBloksNavbarBackButton"),{onClick:function(){return _.pop()}}):null,t[16]=_,t[17]=M,t[18]=W):W=t[18];var q=P!=null?P:C,U;t[19]!==q?(U=s.jsx("div",{className:c.title,children:q}),t[19]=q,t[20]=U):U=t[20];var V;t[21]!==B||t[22]!==W||t[23]!==U?(V=s.jsxs("div",{className:B,children:[W,U]}),t[21]=B,t[22]=W,t[23]=U,t[24]=V):V=t[24];var H;t[25]===Symbol.for("react.memo_cache_sentinel")?(H=o("WebBloksStyle").classNames(o("WebBloksStyle").WebBloksStyles.container,c.trailingButtons),t[25]=H):H=t[25];var G;t[26]!==N?(G=s.jsx("div",{className:H,children:N}),t[26]=N,t[27]=G):G=t[27];var z;return t[28]!==n.styleId||t[29]!==V||t[30]!==G?(z=s.jsxs("div",{"data-bloks-name":A,className:F,children:[V,G]}),t[28]=n.styleId,t[29]=V,t[30]=G,t[31]=z):z=t[31],z}function m(e){var t=e.node,n=t.getExpression("on_click"),a=t.get("icon"),i=t.get("title"),l=t.get("accessibility_label"),u=t.get("badge_count"),c=o("WebBloksComponentContext").useWebBloksContext(),d=c.objectSet,m=r("useClickablePropsForWebBloks")(t,n);if(m.onClick===void 0||!a&&(i==null||i===""))return null;var _=p(d,a);return s.jsx(r("WebBloksAbstractButton"),babelHelpers.extends({trailing:!0,"data-bloks-name":t.styleId,icon:_,title:i,accessibility_label:l,badge_count:u},m))}m.displayName=m.name+" [from "+i.id+"]";function p(e,t){if(!t)return null;switch(t){case"nav-app-messenger":return e.getAsset("appMessenger");case"nav-navicon":return e.getAsset("navIcon");case"nav-shopping-cart":return e.getAsset("navShoppingCart");case"nav-info-circle":return e.getAsset("navInfoCircle")}}l.default=d}),98);
__d("WebBloksOnMountExtensionHandlerUtils",["WebBloksConstants"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=n.bloksContext,a=n.executeOnNextTickCatch,i=r.initAssociatedObject_INTERNAL(e,o("WebBloksConstants").CONTROLLER_ASSOCIATED_OBJECT,{firstMountRecorded:!1}),l=e.getExpression("on_first_mount"),s=e.getExpression("on_mount"),u=e.getExpression("on_unmount");return i.firstMountRecorded!==!0&&(r.updateAssociatedObject_INTERNAL(e,o("WebBloksConstants").CONTROLLER_ASSOCIATED_OBJECT,{firstMountRecorded:!0}),l!=null&&a(t.current,l,[t.current,n])),s!=null&&a(t.current,s,[t.current,n]),function(){u!=null&&a(t.current,u,[t.current])}}l.runMountEffects=e}),98);
__d("WebBloksOnMount",["WebBloksComponentContext","WebBloksOnMountExtensionHandlerUtils","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=e.children,n=e.node,r=o("WebBloksComponentContext").useWebBloksContext();return u(function(){return r.bloksContext.objectSet.mountEffectsQueue.enqueue(n.clientId,[function(){return o("WebBloksOnMountExtensionHandlerUtils").runMountEffects(n,{current:n},r)}]),function(){r.bloksContext.objectSet.mountEffectsQueue.dispose(n.clientId)}},[]),t!=null?t:null}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("WebBloksPullToRefreshContainer",["WebBloksComponentContext","react-compiler-runtime"],(function(t,n,r,o,a,i,l){function e(e){var t=o("react-compiler-runtime").c(3),n=e.node,r=o("WebBloksComponentContext").useWebBloksContext(),a=r.renderNode,i;return t[0]!==n||t[1]!==a?(i=a(n.getSubNode("child")),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=e}),98);
__d("WebBloksRichTextContext",["react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.createContext({maxNumberOfLines:1,isRootFontSizeEnabled:!1,setIsRootFontSizeEnabled:function(t){}});l.default=u}),98);
__d("WebBloksTextStyle",["WebBloksSSRUtils","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e=o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr("#0000000")),s=1.3;function u(t,n,r){return t!=null?{color:o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr(t))}:n&&r?{color:o("WebBloksUtils").getRGBColorWithTheme(n,r)}:{color:e}}function c(e){var t,n;switch(e){case"normal":t=400;break;case"heavy":t=900;break;case"bold":t=700;break;case"italic":n="italic";break;case"bold_italic":t=700,n="italic";break;case"light":t=300;break;case"medium":t=500;break;case"semibold":t=600;break}return{fontWeight:t,fontStyle:n}}function d(e){var t="";switch(e){case"top_to_bottom":t="180deg";break;case"left_to_right":t="90deg";break;case"bottom_left_to_top_right":t="45deg";break;case"top_left_to_bottom_right":t="135deg";break}return t}function m(e,t){return e.map(function(e){return o("WebBloksUtils").getRGBColorWithTheme(e,t)}).join(", ")}function p(e,t,n){if(e==null||e.length===0||t==null)return{};var r=d(t),a=m(e,n);return{backgroundColor:o("WebBloksUtils").getRGBColorWithTheme(e[0],n),background:"linear-gradient("+r+", "+a+")",backgroundSize:"100%",textFillColor:"transparent",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}}function _(e,t,n){var r=0,o=0;if(n){var a,i;r=f(e,t,(a=n.cap_spacing)!=null?a:void 0),o=f(e,t,(i=n.baseline_spacing)!=null?i:void 0)}function l(e){if(typeof e=="string")return"translateY(calc(calc("+e+" - 1em) / 2)";if(!(e<=s)){var t="calc(1em * "+e+")",n="calc(1em * "+s+")";return"translateY(calc(("+t+" - "+n+")/2))"}}return{paddingTop:r,paddingBottom:o,transform:l(e)}}function f(e,t,n){if(n==null)return 0;if(t!=null){var r=t*.8,o=typeof e=="string"?parseInt(e,10):t*e,a=(o-r)/2,i=n-a;if(Math.abs(i)>.3)return i}return 0}function g(e,t){return t===void 0&&(t=!0),e==null||e<1?{}:{display:t?"-webkit-inline-box":"-webkit-box",overflow:"hidden",textOverflow:"ellipsis",WebkitBoxOrient:"vertical",WebkitLineClamp:e,wordBreak:"break-word",maxHeight:"999999px"}}var h=12;function y(e){if(e==null)return 0;var t=h;for(var n of e){var r=h;switch(n.styleId){case"bk.components.TextSpan":{var a=o("WebBloksUtils").toPx(n.get("text_size"));o("WebBloksSSRUtils").canUseDOM?r=parseFloat(a!=null?a:window.getComputedStyle(document.body).fontSize):r=parseFloat(a);break}case"bk.data.ComposableTextSpan":case"bk.data.TextSpan":{var i,l=(i=n.get("styles"))==null?void 0:i.find(function(e){return e.styleId==="bk.style.textspan.TextStyle"});if(l==null||l.styleId!=="bk.style.textspan.TextStyle")break;var s=o("WebBloksUtils").toPx(l.get("text_size"));o("WebBloksSSRUtils").canUseDOM?r=parseFloat(s!=null?s:window.getComputedStyle(document.body).fontSize):r=parseFloat(s);break}case"bk.data.ImageSpan":{var u,c=n.get("image_height");r=(u=parseFloat(c))!=null?u:h;break}default:continue}r>t&&(t=r)}return t}function C(e){return e===void 0&&(e=1),s*e}function b(e,t){if(e==="AvenyT")return"Instagram Sans Condensed";if(e!=null&&t!=null&&t[e]){var n=t[e].webFontName;return n==null?void 0:n}return e}function v(e,t){var n,r,a,i=(n=e.shadow_offset_dx)==null?void 0:n.toString(),l=(r=e.shadow_offset_dy)==null?void 0:r.toString(),s=(a=e.shadow_radius)==null?void 0:a.toString(),u=e.shadow_color?o("WebBloksUtils").getRGBColorWithTheme(e.shadow_color,t):null,c;return i!=null&&l!=null&&(c=i+"px "+l+"px"),c!=null&&(s!=null&&(c=c+" "+s+"px"),u!=null&&(c=c+" "+u)),c}l.getTextColor=u,l.getTextStyle=c,l.getGradientColors=m,l.getGradientTextStyle=p,l.getVerticalSpacingStyles=_,l.getLineClampStyle=g,l.getMaxTextSizePx=y,l.getLineHeight=C,l.getFontFamily=b,l.getTextShadow=v}),98);
__d("WebBloksRichTextTruncationCustom",["WebBloksComponentContext","WebBloksStyle","WebBloksTextStyle","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useLayoutEffect,d=u.useRef,m=u.useState;function p(e){var t=e.children,n=e.dimensions,r=e.node,a=e.truncationSpans,i=o("WebBloksComponentContext").useWebBloksContext(),l=i.renderChildren,u=d(null),p=m(!1),f=p[0],g=p[1],h=r.get("max_number_of_lines"),y=n.lineHeight,C=n.textSizePx,b=C*y,v=b*(h!=null?h:1);if(c(function(){var e,t;g(((e=(t=u.current)==null?void 0:t.clientHeight)!=null?e:0)>v+b/2)},[v,b]),h==null)return null;var S=u.current!=null?window.getComputedStyle(u.current).direction==="rtl":!1,R=S?"left":"right",L=o("WebBloksTextStyle").getMaxTextSizePx(a)*y,E={fontSize:C,maxHeight:v+"px",wordBreak:h===1?"break-all":"break-word"},k=l(a);return s.jsxs("div",{style:E,className:_.container,children:[f&&s.jsxs(s.Fragment,{children:[s.jsx("div",{style:{float:R,height:v-L+"px"}}),s.jsx("div",{dir:S?"rtl":"ltr",style:{float:R,clear:R},children:k})]}),s.jsx("div",{className:_.content,dir:"auto",ref:u,children:t})]})}p.displayName=p.name+" [from "+i.id+"]";var _=o("WebBloksStyle").createStyles({container:{overflow:"hidden"},content:{float:"none"}});l.default=p}),98);
__d("WebBloksRichTextTruncation",["WebBloksRichTextTruncationCustom","WebBloksStyle","WebBloksTextStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(12),n=e.children,a=e.dimensions,i=e.node,l=i.get("max_number_of_lines"),u;t[0]!==i?(u=i.getSubNodes("truncation_spans"),t[0]=i,t[1]=u):u=t[1];var d=u,m;t[2]!==i?(m=i.getSubNodes("spans_for_truncation"),t[2]=i,t[3]=m):m=t[3];var p=m,_=l,f=d!=null&&d.length?d:p;if(_==null||_===0)return n;if(f==null||f.length<1){var g;return t[4]!==n||t[5]!==i?(g=s.jsx(c,{children:n,node:i}),t[4]=n,t[5]=i,t[6]=g):g=t[6],g}var h;return t[7]!==n||t[8]!==a||t[9]!==i||t[10]!==f?(h=s.jsx(r("WebBloksRichTextTruncationCustom"),{dimensions:a,node:i,truncationSpans:f,children:n}),t[7]=n,t[8]=a,t[9]=i,t[10]=f,t[11]=h):h=t[11],h}function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,r=e.node,a;if(t[0]!==r){var i=r.get("max_number_of_lines");a=o("WebBloksTextStyle").getLineClampStyle(i,!1),t[0]=r,t[1]=a}else a=t[1];var l=a,u;return t[2]!==n||t[3]!==l?(u=s.jsx("div",{className:d.container,style:l,children:n}),t[2]=n,t[3]=l,t[4]=u):u=t[4],u}var d=o("WebBloksStyle").createStyles({container:{overflow:"hidden"}});l.default=u}),98);
__d("WebBloksRichTextVerticalAlign",["WebBloksTextStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(15),n=e.children,r=e.dimensions,a=e.node,i;t[0]!==a?(i=a.get("baseline_spacing"),t[0]=a,t[1]=i):i=t[1];var l=i,u;t[2]!==a?(u=a.get("cap_spacing"),t[2]=a,t[3]=u):u=t[3];var c=u,d;t[4]!==l||t[5]!==c||t[6]!==r.lineHeight||t[7]!==r.textSizePx?(d=o("WebBloksTextStyle").getVerticalSpacingStyles(r.lineHeight,r.textSizePx,{baseline_spacing:l,cap_spacing:c}),t[4]=l,t[5]=c,t[6]=r.lineHeight,t[7]=r.textSizePx,t[8]=d):d=t[8];var m=d;if(m.transform==null&&m.paddingBottom===0&&m.paddingTop===0)return n;var p;t[9]!==r.textSizePx||t[10]!==m?(p=babelHelpers.extends({fontSize:r.textSizePx},m),t[9]=r.textSizePx,t[10]=m,t[11]=p):p=t[11];var _;return t[12]!==n||t[13]!==p?(_=s.jsx("div",{style:p,children:n}),t[12]=n,t[13]=p,t[14]=_):_=t[14],_}l.default=c}),98);
__d("useWebBloksRichTextDimensions",["WebBloksTextStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useMemo;function u(e){var t=o("react-compiler-runtime").c(32),n;t[0]!==e?(n=e.get("line_height_multiplier"),t[0]=e,t[1]=n):n=t[1];var r=n,a;t[2]!==e?(a=e.get("use_composable_and_extensible_spans"),t[2]=e,t[3]=a):a=t[3];var i=a,l;t[4]!==e?(l=e.getSubNodes("spans"),t[4]=e,t[5]=l):l=t[5];var s=l,u;t[6]!==e?(u=e.getSubNodes("children"),t[6]=e,t[7]=u):u=t[7];var c=u,d;t[8]!==e?(d=e.getSubNodes("spans_for_truncation"),t[8]=e,t[9]=d):d=t[9];var m=d,p;t[10]!==e?(p=e.getSubNodes("truncation_spans"),t[10]=e,t[11]=p):p=t[11];var _=p,f;t[12]!==r?(f=o("WebBloksTextStyle").getLineHeight(r),t[12]=r,t[13]=f):f=t[13];var g=f,h;if(t[14]!==c||t[15]!==s||t[16]!==i){var y;h=(y=i===!0?s:c)!=null?y:[],t[14]=c,t[15]=s,t[16]=i,t[17]=h}else h=t[17];var C=h,b;if(t[18]!==m||t[19]!==_||t[20]!==i){var v;b=(v=i===!0?m:_)!=null?v:[],t[18]=m,t[19]=_,t[20]=i,t[21]=b}else b=t[21];var S=b,R;t[22]!==C?(R=C!=null?C:[],t[22]=C,t[23]=R):R=t[23];var L;if(t[24]!==R||t[25]!==S){var E;t[27]!==S?(E=S!=null?S:[],t[27]=S,t[28]=E):E=t[28],L=o("WebBloksTextStyle").getMaxTextSizePx(R.concat(E)),t[24]=R,t[25]=S,t[26]=L}else L=t[26];var k=L,I;return t[29]!==g||t[30]!==k?(I={lineHeight:g,textSizePx:k},t[29]=g,t[30]=k,t[31]=I):I=t[31],I}l.default=u}),98);
__d("WebBloksRichText",["WebBloksComponentContext","WebBloksRichTextContext","WebBloksRichTextTruncation","WebBloksRichTextVerticalAlign","WebBloksStyle","WebBloksUtils","react","useClickablePropsForWebBloks","useWebBloksRichTextDimensions"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useState;function m(e){var t=e.node,n=e.externalStyle,a=t.getExpression("on_click"),i=t.getSubNodes("children"),l=t.getSubNodes("spans"),u=t.get("text_align"),m=t.get("use_composable_and_extensible_spans"),p=t.get("max_number_of_lines"),_=o("WebBloksStyle").useStyle(t,n,a!=null),f=_.style,g=_.wrapper,h=_.wrapperProps,y=r("useClickablePropsForWebBloks")(t,a),C=o("WebBloksComponentContext").useWebBloksContext(),b=C.renderChildren,v=i.slice(-1)[0],S=r("useWebBloksRichTextDimensions")(t),R=m===!0,L=d(!1),E=L[0],k=L[1],I=c(function(){return{maxNumberOfLines:p!=null?p:1,isRootFontSizeEnabled:E,setIsRootFontSizeEnabled:k}},[E,p]),T=c(function(){return R?s.jsx(r("WebBloksRichTextContext").Provider,{value:I,children:b(l)}):b(i)},[R,i,l,b,I]);return g(s.jsx("div",babelHelpers.extends({},h,{dir:"auto",className:o("WebBloksStyle").WebBloksStyles.container,style:babelHelpers.extends({},f,{lineHeight:S.lineHeight,display:"block",color:v==null?void 0:v.get("text_color"),textAlign:o("WebBloksUtils").toHyphen(u),overflow:"hidden"})},y,{children:s.jsx(r("WebBloksRichTextVerticalAlign"),{node:t,dimensions:S,children:s.jsx(r("WebBloksRichTextTruncation"),{node:t,dimensions:S,children:T})})})))}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WebBloksScreenWrapperPrimitive",["WebBloksBooleanUtils","WebBloksComponentContext","WebBloksEnvironmentContext","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(20),n=e.node,r=o("WebBloksComponentContext").useWebBloksContext(),a=r.renderNode,i=o("WebBloksEnvironmentContext").useWebBloksEnvironment(),l=i.embedded,u;t[0]!==n||t[1]!==a?(u=a(n.get("content")),t[0]=n,t[1]=a,t[2]=u):u=t[2];var d=u,m=n.get("navbar"),p,_,f;if(t[3]!==d||t[4]!==n){f=Symbol.for("react.early_return_sentinel");e:{var g=n.get("contribs");if(_=null,p=!1,g!==void 0&&g.length>0){for(var h of g)if(o("WebBloksBooleanUtils").isFalse(h.get("should_wrap"))){f=d;break e}}}t[3]=d,t[4]=n,t[5]=p,t[6]=_,t[7]=f}else p=t[5],_=t[6],f=t[7];if(f!==Symbol.for("react.early_return_sentinel"))return f;m!==void 0&&(_=a(m),p=m.getValues().hide_navbar===!0);var y=n.styleId,C;t[8]!==p||t[9]!==_?(C=_!=null&&!p?s.jsx("div",{className:c.header,children:_},"navbar"):null,t[8]=p,t[9]=_,t[10]=C):C=t[10];var b=l?c.contentEmbedded:c.contentFullScreen,v;t[11]!==b?(v=o("WebBloksStyle").classNames(c.content,b),t[11]=b,t[12]=v):v=t[12];var S;t[13]!==d||t[14]!==v?(S=s.jsx("div",{className:v,children:d},"content"),t[13]=d,t[14]=v,t[15]=S):S=t[15];var R;return t[16]!==n.styleId||t[17]!==C||t[18]!==S?(R=s.jsxs("div",{"data-bloks-name":y,className:c.root,children:[C,S]}),t[16]=n.styleId,t[17]=C,t[18]=S,t[19]=R):R=t[19],R}var c=o("WebBloksStyle").createStyles({root:{height:"100%",width:"100%",display:"flex",flexDirection:"column"},header:{flex:"0 0 auto"},content:{flex:"1 1 0",width:"100%",overflow:"hidden",pointerEvents:"auto",display:"flex",flexDirection:"column"},contentEmbedded:{flexBasis:"auto"},contentFullScreen:{flexBasis:"0"}});l.default=u}),98);
__d("WebBloksSlider",["WebBloksComponentContext","WebBloksConstants","WebBloksEnvironmentContext","WebBloksMutations","WebBloksStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e=["onChange","onChangeEnd","onChangeStart","railColor","thumbColor","thumbSize","trackColor","trackHeight","value"],s=["aria-label","disabled"],u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useMemo,f=d.useRef,g=d.useState,h=0,y=100,C=o("WebBloksStyle").createStyles({wrapper:{touchAction:"none",pointerEvents:"all",position:"relative",cursor:"pointer",width:"100%"},rail:{borderRadius:2,width:"100%",position:"absolute",top:0,bottom:0,marginTop:"auto",marginBottom:"auto"},track:{borderRadius:2,position:"absolute",top:0,bottom:0,marginTop:"auto",marginBottom:"auto"},thumbWrapper:{position:"relative"},thumb:{borderRadius:"50%",boxShadow:"0 0 5px gainsboro",position:"absolute",cursor:"pointer",transform:"translate(-50%, 0)"}});function b(e){var t,n=o("react-compiler-runtime").c(52),r=e.node,a=e.externalStyle,i;n[0]!==r?(i=r.get("thumb_diameter"),n[0]=r,n[1]=i):i=n[1];var l=i,s;n[2]!==r?(s=r.get("track_height"),n[2]=r,n[3]=s):s=n[3];var u=s,d=r.getSubNode("thumb_color"),m=r.getSubNode("unfilled_track_color"),_=r.getSubNode("filled_track_color"),f;n[4]!==r?(f=r.get("initial_value"),n[4]=r,n[5]=f):f=n[5];var h=f,C=r.get("progress"),b;n[6]!==r?(b=r.getExpression("on_change"),n[6]=r,n[7]=b):b=n[7];var S=b,R;n[8]!==r?(R=r.getExpression("on_start_touch"),n[8]=r,n[9]=R):R=n[9];var L=R,E;n[10]!==r?(E=r.getExpression("on_end_touch"),n[10]=r,n[11]=E):E=n[11];var k=E,I=o("WebBloksComponentContext").useWebBloksContext(),T=I.bloksContext,D=I.executeCatch,x=o("WebBloksTheme").useTheme().getTheme(),$=o("WebBloksStyle").useStyle(r,a),P=$.wrapper,N=$.wrapperProps,M=l!=null?parseFloat(l):24,w=u!=null?parseFloat(u):4,A=d!=null?o("WebBloksUtils").getRGBColorWithTheme(d,x):o("WebBloksTheme").WebBloksThemeVars["primary-bg"],F=m!=null?o("WebBloksUtils").getRGBColorWithTheme(m,x):"#DBDBDB",O=_!=null?o("WebBloksUtils").getRGBColorWithTheme(_,x):o("WebBloksTheme").WebBloksThemeVars["fds-gray-65"],B=g(((t=h!=null?h:C)!=null?t:0)*y),W=B[0],q=B[1],U=g(!1),V=U[0],H=U[1],G;n[12]!==T.treeManager||n[13]!==V||n[14]!==r||n[15]!==C?(G=function(){!V&&C!=null&&(q(C*y),o("WebBloksMutations").updateProperty(T.treeManager,r,"progress",null))},n[12]=T.treeManager,n[13]=V,n[14]=r,n[15]=C,n[16]=G):G=n[16];var z;n[17]!==T.treeManager||n[18]!==V||n[19]!==r||n[20]!==C||n[21]!==W?(z=[T.treeManager,V,r,C,W],n[17]=T.treeManager,n[18]=V,n[19]=r,n[20]=C,n[21]=W,n[22]=z):z=n[22],p(G,z);var j;n[23]!==T||n[24]!==D||n[25]!==r||n[26]!==S?(j=function(t){S!=null&&D(r,S,[Number(t)/y,T]),q(Number(t))},n[23]=T,n[24]=D,n[25]=r,n[26]=S,n[27]=j):j=n[27];var K=j,Q;n[28]!==T||n[29]!==D||n[30]!==r||n[31]!==L?(Q=function(t){L!=null&&D(r,L,[t,T]),H(!0)},n[28]=T,n[29]=D,n[30]=r,n[31]=L,n[32]=Q):Q=n[32];var X=Q,Y;n[33]!==T||n[34]!==D||n[35]!==r||n[36]!==k?(Y=function(t){k!=null&&D(r,k,[t,T]),H(!1)},n[33]=T,n[34]=D,n[35]=r,n[36]=k,n[37]=Y):Y=n[37];var J=Y,Z;n[38]!==O||n[39]!==K||n[40]!==J||n[41]!==X||n[42]!==A||n[43]!==M||n[44]!==w||n[45]!==F||n[46]!==W||n[47]!==N?(Z=c.jsx(v,babelHelpers.extends({},N,{onChange:K,onChangeStart:X,onChangeEnd:J,value:W,thumbSize:M,railColor:F,trackColor:O,trackHeight:w,thumbColor:A})),n[38]=O,n[39]=K,n[40]=J,n[41]=X,n[42]=A,n[43]=M,n[44]=w,n[45]=F,n[46]=W,n[47]=N,n[48]=Z):Z=n[48];var ee;return n[49]!==Z||n[50]!==P?(ee=P(Z),n[49]=Z,n[50]=P,n[51]=ee):ee=n[51],ee}function v(t){var n=o("react-compiler-runtime").c(76),r,a,i,l,u,d,m,p,_,f;n[0]!==t?(a=t.onChange,r=t.onChangeEnd,i=t.onChangeStart,l=t.railColor,d=t.thumbColor,m=t.thumbSize,p=t.trackColor,_=t.trackHeight,f=t.value,u=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=r,n[2]=a,n[3]=i,n[4]=l,n[5]=u,n[6]=d,n[7]=m,n[8]=p,n[9]=_,n[10]=f):(r=n[1],a=n[2],i=n[3],l=n[4],u=n[5],d=n[6],m=n[7],p=n[8],_=n[9],f=n[10]);var b=o("WebBloksEnvironmentContext").useWebBloksEnvironment().isRtl,v;n[11]!==i?(v=function(t){i==null||i(t)},n[11]=i,n[12]=v):v=n[12];var L=v,E;n[13]!==a?(E=function(t){a==null||a(t)},n[13]=a,n[14]=E):E=n[14];var k=E,I;n[15]!==r?(I=function(t){r==null||r(t)},n[15]=r,n[16]=I):I=n[16];var T=I,D=b?y-f:f,x;n[17]!==b||n[18]!==D?(x=S(D,b),n[17]=b,n[18]=D,n[19]=x):x=n[19];var $=x,P=$.trackStart,N=$.trackEnd,M;n[20]!==b||n[21]!==k||n[22]!==T||n[23]!==L||n[24]!==f?(M={onChange:k,onChangeStart:L,onChangeEnd:T,min:h,max:y,isRTL:b,value:f},n[20]=b,n[21]=k,n[22]=T,n[23]=L,n[24]=f,n[25]=M):M=n[25];var w=R(M),A=w.onMouseDown,F=w.onPointerDown,O=w.onTouchStart,B=w.thumbRef,W=w.wrapperRef,q=g(!1),U=q[0],V=q[1],H;n[26]!==U||n[27]!==k||n[28]!==L||n[29]!==f?(H=function(t){var e=f;if(t.keyCode===o("WebBloksConstants").KEY_LEFT)e=e-1;else if(t.keyCode===o("WebBloksConstants").KEY_RIGHT)e=e+1;else return;U||(V(!0),L(e)),k(e)},n[26]=U,n[27]=k,n[28]=L,n[29]=f,n[30]=H):H=n[30];var G=H,z;n[31]!==T||n[32]!==f?(z=function(t){t.keyCode!==o("WebBloksConstants").KEY_LEFT&&t.keyCode!==o("WebBloksConstants").KEY_RIGHT||(V(!1),T(f))},n[31]=T,n[32]=f,n[33]=z):z=n[33];var j=z,K,Q,X;if(n[34]!==u){var Y=u;K=Y["aria-label"],Q=Y.disabled,X=babelHelpers.objectWithoutPropertiesLoose(Y,s),n[34]=u,n[35]=K,n[36]=Q,n[37]=X}else K=n[35],Q=n[36],X=n[37];var J;n[38]!==m?(J={height:m},n[38]=m,n[39]=J):J=n[39];var Z;n[40]!==l||n[41]!==_?(Z=c.jsx("div",{className:C.rail,style:{height:_,backgroundColor:l}}),n[40]=l,n[41]=_,n[42]=Z):Z=n[42];var ee=P+"%",te=N+"%",ne;n[43]!==ee||n[44]!==te||n[45]!==p||n[46]!==_?(ne=c.jsx("div",{className:C.track,style:{left:ee,right:te,height:_,backgroundColor:p}}),n[43]=ee,n[44]=te,n[45]=p,n[46]=_,n[47]=ne):ne=n[47];var re=m/2,oe=m/2,ae;n[48]!==re||n[49]!==oe?(ae={marginLeft:re,marginRight:oe},n[48]=re,n[49]=oe,n[50]=ae):ae=n[50];var ie=D+"%",le;n[51]!==ie||n[52]!==d||n[53]!==m?(le={left:ie,height:m,width:m,backgroundColor:d},n[51]=ie,n[52]=d,n[53]=m,n[54]=le):le=n[54];var se;n[55]!==K||n[56]!==Q||n[57]!==G||n[58]!==j||n[59]!==le||n[60]!==B||n[61]!==f?(se=c.jsx("div",{ref:B,className:C.thumb,role:"slider","aria-label":K,"aria-valuenow":f,"aria-valuemin":h,"aria-valuemax":y,disabled:Q,onKeyDown:G,onKeyUp:j,tabIndex:0,style:le}),n[55]=K,n[56]=Q,n[57]=G,n[58]=j,n[59]=le,n[60]=B,n[61]=f,n[62]=se):se=n[62];var ue;n[63]!==ae||n[64]!==se?(ue=c.jsx("div",{className:C.thumbWrapper,style:ae,children:se}),n[63]=ae,n[64]=se,n[65]=ue):ue=n[65];var ce;return n[66]!==A||n[67]!==F||n[68]!==O||n[69]!==X||n[70]!==ne||n[71]!==ue||n[72]!==J||n[73]!==Z||n[74]!==W?(ce=c.jsxs("div",babelHelpers.extends({},X,{ref:W,className:C.wrapper,onMouseDown:A,onPointerDown:F,onTouchStart:O,style:J,children:[Z,ne,ue]})),n[66]=A,n[67]=F,n[68]=O,n[69]=X,n[70]=ne,n[71]=ue,n[72]=J,n[73]=Z,n[74]=W,n[75]=ce):ce=n[75],ce}function S(e,t){var n,r;if(n=h,r=y-e,t){var o=n;n=r,r=o}return{trackStart:n,trackEnd:r}}function R(e){var t=o("react-compiler-runtime").c(44),n=e.max,r=e.min,a=e.onChange,i=e.onChangeEnd,l=e.onChangeStart,s=e.isRTL,u=e.value,c=f(null),d=f(null),m=f(null),p;t[0]!==s||t[1]!==n||t[2]!==r||t[3]!==a||t[4]!==l?(p=function(t){var e,o=t.clientX;if(c.current!=null){var i=E(c.current,o,r,n,s);(e=d.current)==null||e.focus(),l==null||l(i),a==null||a(i)}},t[0]=s,t[1]=n,t[2]=r,t[3]=a,t[4]=l,t[5]=p):p=t[5];var _=p,g;t[6]!==s||t[7]!==n||t[8]!==r||t[9]!==a?(g=function(t){var e=t.clientX;if(c.current!=null){var o=E(c.current,e,r,n,s);a==null||a(o)}},t[6]=s,t[7]=n,t[8]=r,t[9]=a,t[10]=g):g=t[10];var h=g,y;t[11]!==i||t[12]!==u?(y=function(){i==null||i(u)},t[11]=i,t[12]=u,t[13]=y):y=t[13];var C=y,b;if(window.PointerEvent===void 0){var v;t[14]!==h?(v=function(t){t.button===0&&(h==null||h({clientX:t.clientX,pageX:t.pageX,pageY:t.pageY}))},t[14]=h,t[15]=v):v=t[15];var S=v,R;t[16]!==S||t[17]!==C?(R=function(t){t.button===0&&(C==null||C(),window.removeEventListener("mousemove",S,!1),window.removeEventListener("mouseup",R,!1))},t[16]=S,t[17]=C,t[18]=R):R=t[18];var k;t[19]!==S||t[20]!==R||t[21]!==_?(k=function(t){t.button===0&&(_==null||_({clientX:t.clientX,pageX:t.pageX,pageY:t.pageY}),t.stopPropagation(),t.preventDefault(),window.addEventListener("mousemove",S,!1),window.addEventListener("mouseup",R,!1))},t[19]=S,t[20]=R,t[21]=_,t[22]=k):k=t[22];var I=k,T;t[23]!==h?(T=function(t){var e=L(t,m);if(e!=null){var n=e.clientX,r=e.pageX,o=e.pageY;h==null||h({clientX:n,pageX:r,pageY:o})}},t[23]=h,t[24]=T):T=t[24];var D=T,x;t[25]!==C||t[26]!==D?(x=function(t){var e=L(t,m);e!=null&&(C==null||C(),m.current=null,window.removeEventListener("touchmove",D,!1),window.removeEventListener("touchend",x,!1),window.removeEventListener("touchcancel",x,!1))},t[25]=C,t[26]=D,t[27]=x):x=t[27];var $;t[28]!==_||t[29]!==x||t[30]!==D?($=function(t){if(!(t.changedTouches.length===0||m.current!=null)){var e=t.changedTouches[0];t.stopPropagation(),t.preventDefault(),m.current=e.identifier,_==null||_({clientX:e.clientX,pageX:e.pageX,pageY:e.pageY}),window.addEventListener("touchmove",D,!1),window.addEventListener("touchend",x,!1),window.addEventListener("touchcancel",x,!1)}},t[28]=_,t[29]=x,t[30]=D,t[31]=$):$=t[31];var P=$,N;t[32]!==I||t[33]!==P?(N={onMouseDown:I,onTouchStart:P,wrapperRef:c,thumbRef:d},t[32]=I,t[33]=P,t[34]=N):N=t[34],b=N}else{var M;t[35]!==h?(M=function(t){t.pointerId===m.current&&(h==null||h({clientX:t.clientX,pageX:t.pageX,pageY:t.pageY}))},t[35]=h,t[36]=M):M=t[36];var w=M,A;t[37]!==C||t[38]!==w?(A=function(t){t.pointerId===m.current&&(C==null||C(),m.current=null,window.removeEventListener("pointermove",w,!1),window.removeEventListener("pointerup",A,!1),window.removeEventListener("pointercancel",A,!1))},t[37]=C,t[38]=w,t[39]=A):A=t[39];var F;if(t[40]!==_||t[41]!==w||t[42]!==A){var O=function(t){t.button===0&&m.current==null&&(_==null||_({clientX:t.clientX,pageX:t.pageX,pageY:t.pageY}),t.stopPropagation(),t.preventDefault(),m.current=t.pointerId,window.addEventListener("pointermove",w,!1),window.addEventListener("pointerup",A,!1),window.addEventListener("pointercancel",A,!1))};F={onPointerDown:O,wrapperRef:c,thumbRef:d},t[40]=_,t[41]=w,t[42]=A,t[43]=F}else F=t[43];b=F}return b}function L(e,t){var n=Array.from(e.changedTouches).findIndex(function(e){var n=e.identifier;return n===t.current});return n<0?null:e.changedTouches[n]}function E(e,t,n,r,o){var a=e.getBoundingClientRect(),i=a.left,l=a.width,s=t-i;return o&&(s=i+l-t),k(s/l*(r-n)+n,n,r)}function k(e,t,n){return Math.min(Math.max(Math.round(e),t),n)}l.default=b}),98);
__d("WebBloksAppAccessibilityStyles",["WebBloksStyle","WebDriverConfig"],(function(t,n,r,o,a,i,l){var e="2px solid #0064E0",s=o("WebBloksStyle").createStyles({noOutlines:function(t){var e;return e={},e[t+" *"]={outline:"none"},e}}),u=o("WebBloksStyle").createStyles({outlines:function(n){var t;return t={},t[n+" *"]={outline:"none",outlineOffset:"-1px"},t[n+' *[tabindex="0"]:focus']={outline:e},t[n+" *[role=button]:focus"]={outline:e},t[n+" *[role=link]:focus"]={outline:e},t[n+" a:focus"]={outline:e},t}}),c=o("WebBloksStyle").createStylesIfSupported({type:"selector",selector:":focus-visible"},{outlines:function(n){var t;return t={},t[":root "+n+" *:focus"]={outline:"none"},t[n+' *[tabindex="0"]:focus-visible']={outline:e},t[n+" *[role=button]:focus-visible"]={outline:e},t[n+" *[role=link]:focus-visible"]={outline:e},t[n+" a:focus-visible"]={outline:e},t}}),d={outlines:r("WebDriverConfig").isJestE2ETestRun?s.noOutlines:o("WebBloksStyle").classNames(u.outlines,c.outlines)};l.FOCUS_OUTLINE=e,l.ACCESSIBILITY_STYLES=d}),98);
__d("WebBloksSwitch",["WebBloksAppAccessibilityStyles","WebBloksBooleanUtils","WebBloksComponentContext","WebBloksConstants","WebBloksEnvironmentContext","WebBloksStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useState;function c(e){var t,n,r=o("react-compiler-runtime").c(36),a=e.node,i=e.externalStyle,l=o("WebBloksTheme").useTheme().getTheme(),c=o("WebBloksEnvironmentContext").useWebBloksEnvironment().isRtl,m=o("WebBloksStyle").useStyle(a,i),f=m.wrapper,g=m.wrapperProps,h=o("WebBloksComponentContext").useWebBloksContext(),y;r[0]!==a?(y=o("WebBloksBooleanUtils").isTrue(a.get("checked")),r[0]=a,r[1]=y):y=r[1];var C=y,b=u(C),v=b[0],S=b[1],R;r[2]!==a||r[3]!==g?(R=o("WebBloksBooleanUtils").isFalse(a.get("enabled"))||g.disabled===!0,r[2]=a,r[3]=g,r[4]=R):R=r[4];var L=R,E;r[5]!==a?(E=o("WebBloksBooleanUtils").isTrue(a.get("is_controlled")),r[5]=a,r[6]=E):E=r[6];var k=E,I;r[7]!==h||r[8]!==L||r[9]!==k||r[10]!==a?(I=function(t){if(!L){k||S(t);var e=a.getExpression("on_toggle");e!=null&&h.executeCatch(a,e,[a,t,h])}},r[7]=h,r[8]=L,r[9]=k,r[10]=a,r[11]=I):I=r[11];var T=I,D=k?C:v,x=(t=a.get("on_color"))!=null?t:a.get(L?"track_color_disabled_on":"track_color_on"),$=(n=a.get("off_color"))!=null?n:a.get(L?"track_color_disabled_off":"track_color_off"),P=a.get(L?"thumb_color_disabled_on":"thumb_color_on"),N=a.get(L?"thumb_color_disabled_off":"thumb_color_off"),M=d,w;r[12]!==D||r[13]!==L||r[14]!==T?(w=function(t){L||(t.keyCode===o("WebBloksConstants").KEY_SPACE||t.keyCode===o("WebBloksConstants").KEY_RETURN)&&T(!D)},r[12]=D,r[13]=L,r[14]=T,r[15]=w):w=r[15];var A=w,F=L?p.switchDisabled:p.switchEnabled,O;r[16]!==F?(O=o("WebBloksStyle").classNames(o("WebBloksStyle").WebBloksStyles.container,p.switch,p.innerShadow,F,_.outlines),r[16]=F,r[17]=O):O=r[17];var B=D&&p.backgroundActive,W;r[18]!==B?(W=o("WebBloksStyle").classNames(p.background,B),r[18]=B,r[19]=W):W=r[19];var q=D&&P?{background:o("WebBloksUtils").getRGBColorWithTheme(P,l)}:!D&&N?{background:o("WebBloksUtils").getRGBColorWithTheme(N,l)}:null,U=c?p.sliderRight:p.sliderLeft,V=D&&p.sliderActive,H=D&&(c?p.sliderActiveLeft:p.sliderActiveRight),G;r[20]!==U||r[21]!==V||r[22]!==H?(G=o("WebBloksStyle").classNames(p.slider,U,V,H),r[20]=U,r[21]=V,r[22]=H,r[23]=G):G=r[23];var z;r[24]!==q||r[25]!==G?(z=s.jsx("div",{style:q,className:G}),r[24]=q,r[25]=G,r[26]=z):z=r[26];var j;r[27]!==T?(j=function(t){T(t.target.checked)},r[27]=T,r[28]=j):j=r[28];var K=L?p.switchInputDisabled:p.switchInputEnabled,Q;r[29]!==K?(Q=o("WebBloksStyle").classNames(p.switchInput,K),r[29]=K,r[30]=Q):Q=r[30];var X;return r[31]!==D||r[32]!==L||r[33]!==j||r[34]!==Q?(X=s.jsx("input",{checked:D,disabled:L,onChange:j,tabIndex:-1,type:"checkbox",className:Q}),r[31]=D,r[32]=L,r[33]=j,r[34]=Q,r[35]=X):X=r[35],f(s.jsxs("div",babelHelpers.extends({className:O,style:!D&&$?{background:o("WebBloksUtils").getRGBColorWithTheme($,l)}:null,"aria-checked":D,onKeyDown:M,onKeyUp:A,role:"switch",tabIndex:0},g,{children:[s.jsx("div",{style:D&&x?{background:o("WebBloksUtils").getRGBColorWithTheme(x,l)}:null,className:W}),z,X]})))}function d(e){e.keyCode===o("WebBloksConstants").KEY_SPACE&&e.preventDefault()}var m=28,p=o("WebBloksStyle").createStyles({background:{backgroundColor:o("WebBloksTheme").WebBloksThemeVars["switch-active"],borderRadius:m/2,bottom:0,boxSizing:"border-box",left:0,opacity:0,pointerEvents:"none",position:"absolute",right:0,top:0,transitionDuration:o("WebBloksTheme").WebBloksThemeVars["fds-duration-extra-short-out"],transitionProperty:"opacity",transitionTimingFunction:o("WebBloksTheme").WebBloksThemeVars["fds-animation-move-out"]},backgroundActive:{opacity:1,transitionDuration:o("WebBloksTheme").WebBloksThemeVars["fds-duration-extra-short-in"],transitionTimingFunction:o("WebBloksTheme").WebBloksThemeVars["fds-animation-move-in"]},switchDisabled:{opacity:.4,transitionDuration:o("WebBloksTheme").WebBloksThemeVars["fds-duration-extra-short-in"],transitionTimingFunction:o("WebBloksTheme").WebBloksThemeVars["fds-animation-move-in"]},switchEnabled:{opacity:1},innerShadow:{boxShadow:"inset 0 0 0 0.5px "+o("WebBloksTheme").WebBloksThemeVars["media-inner-border"]},slider:{backgroundColor:o("WebBloksTheme").WebBloksThemeVars["always-white"],borderRadius:12,boxShadow:"0 1px 2px "+o("WebBloksTheme").WebBloksThemeVars["shadow-5"],height:24,pointerEvents:"none",position:"absolute",top:2,transitionDuration:o("WebBloksTheme").WebBloksThemeVars["fds-duration-extra-short-out"],transitionProperty:"transform, background-color",transitionTimingFunction:o("WebBloksTheme").WebBloksThemeVars["fds-animation-move-out"],width:24},sliderLeft:{left:2},sliderRight:{right:2},sliderActive:{transitionDuration:o("WebBloksTheme").WebBloksThemeVars["fds-duration-extra-short-in"],transitionTimingFunction:o("WebBloksTheme").WebBloksThemeVars["fds-animation-move-in"]},sliderActiveLeft:{transform:"translateX(-24px)"},sliderActiveRight:{transform:"translateX(24px)"},switch:{flexShrink:0,flexGrow:0,backgroundColor:o("WebBloksTheme").WebBloksThemeVars.divider,borderRadius:m/2,boxSizing:"border-box",display:"inline-block",height:m,overflow:"hidden",padding:0,position:"relative",transitionDuration:o("WebBloksTheme").WebBloksThemeVars["fds-duration-extra-short-out"],transitionProperty:"opacity",transitionTimingFunction:o("WebBloksTheme").WebBloksThemeVars["fds-animation-move-out"],width:52},switchInput:{height:"100%",margin:0,opacity:0,outline:"none",padding:0,position:"absolute",top:0,width:"100%"},switchInputDisabled:{pointerEvents:"none"},switchInputEnabled:{cursor:"pointer"}}),_=o("WebBloksStyle").createStylesIfSupported({type:"selector",selector:":focus-visible"},{outlines:function(t){var e;return e={},e[t+":focus-visible"]={outline:o("WebBloksAppAccessibilityStyles").FOCUS_OUTLINE},e}});l.default=c}),98);
__d("WebBloksText",["WebBloksBooleanUtils","WebBloksComponentContext","WebBloksStyle","WebBloksTextStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime","useClickablePropsForWebBloks"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useLayoutEffect,d=u.useRef,m=1e3/60;function p(e,t,n){var r=d({innerText:""});c(function(){e.current!=null&&e.current.innerText!=null&&(r.current.innerText=e.current.innerText)},[n]),c(function(){var n=e.current;if(!(n==null||t==null||ResizeObserver==null)){var a=o("WebBloksUtils").throttle(function(){n.style.whiteSpace="nowrap",n.scrollWidth<=n.clientWidth&&(n.innerText=r.current.innerText);for(var e=!1;n.scrollWidth>n.clientWidth&&n.innerText!=null;)n.innerText=""+n.innerText.slice(0,-1+(e?-1*t.length:0))+t,e=!0},m);a();var i=new ResizeObserver(function(){a()});return i.observe(n),function(){i&&i.unobserve(n)}}},[t,n])}function _(e){var t=o("react-compiler-runtime").c(25),n=e.node,a=e.externalStyle,i;t[0]!==n?(i=n.getExpression("on_click"),t[0]=n,t[1]=i):i=t[1];var l=i,u;t[2]!==n?(u=n.get("text"),t[2]=n,t[3]=u):u=t[3];var c=u,d=n.get("text_align"),m=n.get("text_size"),_=n.get("text_style"),f=n.getSubNode("text_themed_color"),g=n.get("text_color"),h=n.get("font_family"),y=n.get("strikethrough"),C=n.getSubNode("text_provider"),b;t[4]!==n?(b=n.get("truncation_string"),t[4]=n,t[5]=b):b=t[5];var v=b,S=n.get("line_height"),R=n.get("line_height_multiplier"),L=n.get("max_number_of_lines"),E=o("WebBloksStyle").useStyle(n,a,l!=null),k=E.ref,I=E.style,T=E.wrapper,D=E.wrapperProps,x=o("WebBloksTheme").useTheme().getTheme(),$=g!=null&&o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr(g))||f&&o("WebBloksUtils").getRGBColorWithTheme(f,x),P=r("useClickablePropsForWebBloks")(n,l),N=o("WebBloksComponentContext").useWebBloksContext(),M=N.renderNode,w=N.bloksContext,A=w.objectSet.environment.fontFamilyMappings,F=C!=null?M(C):c==null?c:c===" "?s.jsx(s.Fragment,{children:"\xA0"}):c;p(k,v,F);var O=o("WebBloksUtils").toPx(S),B=O!=null?O:o("WebBloksTextStyle").getLineHeight(R),W=o("WebBloksTextStyle").getLineClampStyle(L),q=o("WebBloksTextStyle").getTextStyle(_),U=o("WebBloksTextStyle").getVerticalSpacingStyles(B),V=o("WebBloksUtils").toPx(m),H=o("WebBloksTextStyle").getFontFamily(h,A),G=o("WebBloksUtils").toHyphen(d),z=o("WebBloksBooleanUtils").isTrue(y)?"line-through":"",j;t[6]!==$||t[7]!==B||t[8]!==I||t[9]!==z||t[10]!==W||t[11]!==q||t[12]!==U||t[13]!==V||t[14]!==H||t[15]!==G?(j=babelHelpers.extends({},I,W,q,U,{lineHeight:B,fontSize:V,fontFamily:H,textAlign:G,textDecoration:z,color:$,whiteSpace:"pre-wrap",overflowWrap:"break-word",padding:"unset",maxWidth:"100%"}),t[6]=$,t[7]=B,t[8]=I,t[9]=z,t[10]=W,t[11]=q,t[12]=U,t[13]=V,t[14]=H,t[15]=G,t[16]=j):j=t[16];var K;t[17]!==P||t[18]!==j||t[19]!==F||t[20]!==D?(K=s.jsx("span",babelHelpers.extends({},D,{style:j},P,{children:F})),t[17]=P,t[18]=j,t[19]=F,t[20]=D,t[21]=K):K=t[21];var Q;return t[22]!==K||t[23]!==T?(Q=T(K),t[22]=K,t[23]=T,t[24]=Q):Q=t[24],Q}l.default=_}),98);
__d("WebBloksBKSTextInputFormatterHandlerUtils",["WebBloksComponentContext","WebBloksUtils","react-compiler-runtime"],(function(t,n,r,o,a,i,l){function e(e){var t=o("react-compiler-runtime").c(5),n=o("WebBloksComponentContext").useWebBloksContext(),r=n.executeCatch,a;t[0]!==e.extensions?(a=o("WebBloksUtils").findExtension(e.extensions,"bk.components.BKSTextInputFormatter"),t[0]=e.extensions,t[1]=a):a=t[1];var i=a,l;return t[2]!==r||t[3]!==i?(l=function(t){var e=i==null?void 0:i.getExpression("format_text");if(i!=null&&e!=null){var n=r(i,e,[t]);if(typeof n=="string")return n}return t},t[2]=r,t[3]=i,t[4]=l):l=t[4],l}l.useBKSTextInputFormatter=e}),98);
__d("WebBloksTextInputDatePickerExtensionHandlerUtils",["WebBloksComponentContext","WebBloksUtils","react-compiler-runtime"],(function(t,n,r,o,a,i,l){function e(e){var t=o("react-compiler-runtime").c(28),n=e.get("extensions"),r=o("WebBloksComponentContext").useWebBloksContext(),a=r.bloksContext,i=r.executeOnNextTickCatch,l=o("WebBloksUtils").findExtension(n,"bk.components.TextInputDatePickerExtension");if(!l)return null;var c=l.getValues(),d=c.initial_time_seconds,m=c.maximum_time_seconds,p=c.minimum_time_seconds,_=c.mode,f=l.getExpression("on_date_change");if(_==="time"){var g;t[0]!==d?(g=u(d!=null?d*1e3:Date.now()),t[0]=d,t[1]=g):g=t[1];var h;t[2]!==a||t[3]!==i||t[4]!==f||t[5]!==e?(h=function(n){if(n){var t=n.split(":").map(Number),r=t[0],o=t[1],l=new Date;l.setUTCHours(r,o,0,0),f!=null&&i(e,f,[parseInt(l.getTime()/1e3,10),e,a])}},t[2]=a,t[3]=i,t[4]=f,t[5]=e,t[6]=h):h=t[6];var y;return t[7]!==g||t[8]!==h?(y={typeOverride:"time",initialValue:g,minmaxProps:null,onChange:h},t[7]=g,t[8]=h,t[9]=y):y=t[9],y}var C;t[10]!==d?(C=s(d!=null?d*1e3:Date.now()),t[10]=d,t[11]=C):C=t[11];var b;t[12]!==p?(b=p!=null?s(p*1e3):void 0,t[12]=p,t[13]=b):b=t[13];var v;t[14]!==m?(v=m!=null?s(m*1e3):void 0,t[14]=m,t[15]=v):v=t[15];var S;t[16]!==b||t[17]!==v?(S={min:b,max:v},t[16]=b,t[17]=v,t[18]=S):S=t[18];var R;t[19]!==a||t[20]!==i||t[21]!==f||t[22]!==e?(R=function(n){if(n){var t=n.split("-").map(Number),r=t[0],o=t[1],l=t[2],s=new Date;s.setUTCFullYear(r),s.setUTCMonth(o-1),s.setUTCDate(l),s.setUTCHours(0,0,0,0),f!=null&&i(e,f,[parseInt(s.getTime()/1e3,10),e,a])}},t[19]=a,t[20]=i,t[21]=f,t[22]=e,t[23]=R):R=t[23];var L;return t[24]!==C||t[25]!==S||t[26]!==R?(L={typeOverride:"date",initialValue:C,minmaxProps:S,onChange:R},t[24]=C,t[25]=S,t[26]=R,t[27]=L):L=t[27],L}var s=function(t){var e=new Date(t);return[String(e.getUTCFullYear()).padStart(4,"0"),String(e.getUTCMonth()+1).padStart(2,"0"),String(e.getUTCDate()).padStart(2,"0")].join("-")},u=function(t){var e=new Date(t);return[e.getUTCHours().toString().padStart(2,"0"),e.getUTCMinutes().toString().padStart(2,"0")].join(":")};l.useWebBloksTextInputDateProps=e}),98);
__d("WebBloksTextInputHelpers",["WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t){for(var n=new RegExp("(?:\\r\\n?|\\n)","gm"),r,o=0,a=0;a<t;a++){if(r=n.exec(e),!r)return e;o=r.index}if(r==null)return e;var i=e.slice(0,o+r[0].length),l=e.slice(o+r[0].length);return l=l.replace(n,""),i+l}var s={number:"numeric"};function u(e){if(e==null)return{};for(var t of Object.entries(s)){var n=t[0],r=t[1];if(e===n)return{type:"text",inputMode:r}}switch(e){case"phone":return{type:"tel"};default:return{type:o("WebBloksUtils").toHyphen(e)}}}l.removeLineBreaks=e,l.WEBBLOKS_TEXT_INPUT_TYPES_WITH_INPUT_MODES=s,l.getInputTypeProps=u}),98);
__d("WebBloksTextInputMaskExtensionHandlerUtils",["WebBloksTextInputHelpers","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t){return e.replace(/[^0-9]/g,"")}function s(t,n){var r=o("WebBloksUtils").findExtension(t.extensions,"bk.components.TextInputMaskExtension");if(r!=null){var a=r.get("mask");if(!(a.length<=0)){var i=function(n,r){for(var t=e(r,a),o=t.split(""),i=a.split(""),l="";o.length&&i.length;){var s=i.shift();if(s==="#"){var u;l+=(u=o.shift())!=null?u:""}else l+=s!=null?s:""}if(!i.includes("#")){var c=l+i.join("");return n.length===a.length&&r.length<a.length?l.slice(0,-1):c}return l},l=Object.prototype.hasOwnProperty.call(o("WebBloksTextInputHelpers").WEBBLOKS_TEXT_INPUT_TYPES_WITH_INPUT_MODES,t.type)?void 0:"text";return{onBeforeChange:i,maxLength:a.length,typeOverride:l}}}}l.getTextInputMaskExtensionProps=s}),98);
__d("useQueuedBlurEventForWebBloks",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e,t){var n=o("react-compiler-runtime").c(5),r=c(!1),a,i;n[0]===Symbol.for("react.memo_cache_sentinel")?(a=function(){var e=function(){r.current=!0},t=function(){r.current=!1};return window.addEventListener("mousedown",e),window.addEventListener("mouseup",t),(function(){window.removeEventListener("mousedown",e),window.removeEventListener("mouseup",t)})},i=[],n[0]=a,n[1]=i):(a=n[0],i=n[1]),u(a,i);var l;n[2]!==t||n[3]!==e?(l=function(){if(r.current===!1)t();else{var n=function(){window.setTimeout(function(){e.current!==document.activeElement&&t(),window.removeEventListener("mouseup",n)},0)};window.addEventListener("mouseup",n)}},n[2]=t,n[3]=e,n[4]=l):l=n[4];var s=l;return s}l.default=d}),98);
__d("useWebBloksTextInputFormatValue",["WebBloksTextInputHelpers","WebBloksTextInputMaskExtensionHandlerUtils","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("react-compiler-runtime").c(7),r=e.get("max_number_of_lines"),a=e.get("digits_key_listener"),i;n[0]!==e||n[1]!==t?(i=o("WebBloksTextInputMaskExtensionHandlerUtils").getTextInputMaskExtensionProps(e.getValues(),t),n[0]=e,n[1]=t,n[2]=i):i=n[2];var l=i,s=l==null?void 0:l.onBeforeChange,u=r!=null&&r>0?r:null,c;return n[3]!==a||n[4]!==u||n[5]!==s?(c=function(t,n){var e=n;if(s&&(e=s(t,n)),u!=null&&(e=o("WebBloksTextInputHelpers").removeLineBreaks(e,u-1)),a!=null){var r=new RegExp("[^"+a+"]","gmi");e=e.replace(r,"")}return e},n[3]=a,n[4]=u,n[5]=s,n[6]=c):c=n[6],c}l.default=e}),98);
__d("WebBloksTextInput",["WebBloksBKSTextInputFormatterHandlerUtils","WebBloksBooleanUtils","WebBloksComponentContext","WebBloksConstants","WebBloksStyle","WebBloksTextInputDatePickerExtensionHandlerUtils","WebBloksTextInputHelpers","WebBloksTextInputMaskExtensionHandlerUtils","WebBloksTextStyle","WebBloksTheme","WebBloksUtils","react","useQueuedBlurEventForWebBloks","useWebBloksTextInputFormatValue"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useImperativeHandle,p=u.useLayoutEffect,_=u.useRef,f=u.useState;function g(e){var t,n,a,i,l=e.node,u=e.externalStyle,g=l.get("single_line"),y=l.get("text"),C=l.get("text_style"),b=l.get("cursor_color"),v=l.get("text_size"),S=l.get("text_align"),R=l.get("text_color"),L=l.getSubNode("text_themed_color"),E=l.get("font_family"),k=l.get("resize_height_based_on_content"),I=l.getSubNode("background_color"),T=l.get("hint"),D=l.get("html_autocapitalize"),x=l.get("html_autocomplete"),$=l.get("html_autocorrect"),P=l.get("html_name"),N=l.get("max_length"),M=l.get("type"),w=l.get("enabled"),A=l.getExpression("on_text_change"),F=l.getExpression("on_submit"),O=l.getExpression("on_gain_focus"),B=l.getExpression("on_lose_focus"),W=l.getExpression("allow_text_change_callback"),q=l.getValues(),U=o("WebBloksBooleanUtils").isTrue(k),V=o("WebBloksBooleanUtils").isFalse(g),H=o("WebBloksStyle").useStyle(l,u),G=H.ref,z=H.style,j=H.wrapper,K=H.wrapperProps,Q=o("WebBloksTheme").useTheme().getTheme(),X=R!=null&&o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr(R))||L&&o("WebBloksUtils").getRGBColorWithTheme(L,Q),Y=I!=null?o("WebBloksUtils").getRGBColorWithTheme(I,Q):"transparent",J=b!=null?o("WebBloksUtils").getRGBColorWithTheme(b,Q):"auto",Z=o("WebBloksComponentContext").useWebBloksContext(),ee=Z.executeCatch,te=Z.bloksContext,ne=_(!1),re=_(null),oe=te.initAssociatedObject_INTERNAL(l,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT,{ref:re,text:null}),ae=c(function(e){te.updateAssociatedObject_INTERNAL(l,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT,{text:e})},[te,l]),ie=o("WebBloksTextInputMaskExtensionHandlerUtils").getTextInputMaskExtensionProps(q,G),le=o("WebBloksTextInputDatePickerExtensionHandlerUtils").useWebBloksTextInputDateProps(l),se=te.objectSet.environment.fontFamilyMappings,ue=(t=ie==null?void 0:ie.typeOverride)!=null?t:le==null?void 0:le.typeOverride,ce=r("useWebBloksTextInputFormatValue")(l,G),de=o("WebBloksBKSTextInputFormatterHandlerUtils").useBKSTextInputFormatter(q),me=le==null?void 0:le.onChange,pe=o("WebBloksBooleanUtils").isFalse(w)||K.disabled===!0,_e=(n=ie==null?void 0:ie.maxLength)!=null?n:N,fe=o("WebBloksTextInputHelpers").getInputTypeProps(ue!=null?ue:M),ge=le!=null&&le.initialValue?le.initialValue:y,he=oe.text,ye=f((a=he!=null?he:ge)!=null?a:""),Ce=ye[0],be=ye[1],ve=f(ge),Se=ve[0],Re=ve[1];p(function(){ge!==Se&&(ne.current=!1,be(ge!=null?ge:""),Re(ge))},[l,Se,ge]),p(function(){if(U&&G.current!=null&&Ce!==Se){G.current.style.height="0px";var e=G.current.scrollHeight;G.current.style.height=e+"px"}},[Se,G,U,Ce]);var Le=c(function(e){var t=!0;if(W!=null&&(t=o("WebBloksBooleanUtils").isTrue(o("WebBloksUtils").cast(ee(l,W,[Ce,e])))),t){ne.current=!1;var n=ce(Ce,e);n=de(n),ae(n),be(n)}},[W,ee,de,ce,l,Ce,ae]),Ee=_(!0);d(function(){var e;Ee.current&&(Ee.current=!1,he==null||ge===he)||((oe==null||(e=oe.ref)==null?void 0:e.current)==null&&te.updateAssociatedObject_INTERNAL(l,o("WebBloksConstants").TEXT_INPUT_ASSOCIATED_OBJECT,{ref:re}),A!=null&&ee(l,A,[l,te]),me!=null&&me(Ce))},[Ce]);var ke=function(t){t.keyCode===o("WebBloksConstants").KEY_RETURN&&F!=null&&ee(l,F,[l,te]),(t.keyCode===o("WebBloksConstants").KEY_RETURN||t.keyCode===o("WebBloksConstants").KEY_SPACE)&&t.stopPropagation()},Ie=function(t){t.keyCode===o("WebBloksConstants").KEY_SPACE&&t.stopPropagation()},Te=O!=null?function(){ee(l,O,[l,te])}:void 0,De=r("useQueuedBlurEventForWebBloks")(G,function(){B!=null&&ee(l,B,[l,te])}),xe=B!=null?De:void 0,$e=babelHelpers.extends({},z,o("WebBloksTextStyle").getTextStyle(C),{background:Y,color:X,fontFamily:o("WebBloksTextStyle").getFontFamily(E,se),fontSize:o("WebBloksUtils").toPx(v),lineHeight:o("WebBloksTextStyle").getLineHeight(),textAlign:o("WebBloksUtils").toHyphen(S),caretColor:J}),Pe=babelHelpers.extends({},K,fe,(i=le==null?void 0:le.minmaxProps)!=null?i:{},{autoCapitalize:D,autoComplete:x,autoCorrect:$,disabled:pe,maxLength:_e,name:P,onChange:function(t){return Le(t.target.value)},onKeyDown:ke,onKeyUp:Ie,onFocus:Te,onBlur:xe,className:o("WebBloksStyle").classNames(o("WebBloksStyle").WebBloksStyles.container,h.base),placeholder:T,value:Ce,onClick:function(t){t.stopPropagation()}}),Ne=c(function(e){ne.current||(Le(String(e)),ne.current=!0,A!=null&&ee(l,A,[l,te]),typeof window.requestIdleCallback=="function"?window.requestIdleCallback(function(){ne.current=!1}):window.setTimeout(function(){ne.current=!1},50))},[te,ee,l,Le,A]),Me=c(function(){var e=G.current;if(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)return{start:e.selectionStart,end:e.selectionEnd}},[G]),we=c(function(){var e=G.current;if(e instanceof HTMLInputElement&&e.selectionStart&&e.selectionEnd){var t=e.selectionStart,n=e.selectionEnd;window.requestAnimationFrame(function(){e.setSelectionRange(t,n)})}e==null||e.focus()},[G]),Ae=c(function(){var e;return(e=G.current)==null?void 0:e.blur()},[G]);return m(re,function(){return{onExternalUpdate:Ne,getSelection:Me,requestFocus:we,requestBlur:Ae}},[Me,Ne,Ae,we]),j(V||U?s.jsx("textarea",babelHelpers.extends({},Pe,U?{rows:1}:void 0,{style:babelHelpers.extends({},$e,{resize:"none"})})):s.jsx("input",babelHelpers.extends({dir:"auto"},Pe,{style:$e})))}g.displayName=g.name+" [from "+i.id+"]";var h=o("WebBloksStyle").createStyles({base:function(t){var e;return e={},e[t]={padding:0,margin:0,border:"none",boxSizing:"border-box",outline:"none",width:"100%"},e[t+"::-webkit-date-and-time-value"]={textAlign:"inherit"},e}});l.default=g}),98);
__d("WebBloksAccessibilityUtils",["react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u={Button:"button",Header:null,"Image Button":"button",Image:"img","Selected Button":"button",Text:null,Link:"link",Radio:"radio",Checkbox:"checkbox","Radio Group":"radiogroup",Region:"region",Status:"status","Tab Panel":"tabpanel",List:"list","List Item":"listitem",Alert:"alert"},c=["button","link","checkbox","radio"],d=function(t){return c.includes(t)?{tabIndex:0}:{}};function m(e,t,n){var r={};switch(t!=null&&(r["aria-label"]=t),e){case 1:return s.jsx("h1",babelHelpers.extends({},r,{children:n}));case 2:return s.jsx("h2",babelHelpers.extends({},r,{children:n}));case 3:return s.jsx("h3",babelHelpers.extends({},r,{children:n}));case 4:return s.jsx("h4",babelHelpers.extends({},r,{children:n}));case 5:return s.jsx("h5",babelHelpers.extends({},r,{children:n}));case 6:return s.jsx("h6",babelHelpers.extends({},r,{children:n}))}return n}m.displayName=m.name+" [from "+i.id+"]",l.WEBBLOKS_ACCESSIBILITY_ROLE_MAPPING=u,l.WEBBLOKS_ACCESSIBILITY_FOCUSABLE_ROLES=c,l.getFocusPropsForRole=d,l.getHeading=m}),98);
__d("WebBloksDataTextSpanUtils",["WebBloksComponentContext","WebBloksRichTextContext","WebBloksStyle","WebBloksTextStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime","useClickablePropsForWebBloks"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useContext,c=s.useMemo;function d(e,t){var n=o("react-compiler-runtime").c(9),a;n[0]!==e?(a=e.get("accessibility_label"),n[0]=e,n[1]=a):a=n[1];var i=a,l=o("WebBloksStyle").useStyle(e,t),s=l.style,c=o("WebBloksComponentContext").useWebBloksContext(),d=c.bloksContext,_=o("WebBloksTheme").useTheme().getTheme(),f=u(r("WebBloksRichTextContext")),g=f.isRootFontSizeEnabled,h=d.objectSet.environment.fontFamilyMappings,y=e.get("styles"),C=m(y,_,h,g),b=r("useClickablePropsForWebBloks")(e,p(y)),v;n[2]!==C||n[3]!==s?(v=babelHelpers.extends({},s,{display:"inline",whiteSpace:"pre-wrap",overflowWrap:"break-word"},C),n[2]=C,n[3]=s,n[4]=v):v=n[4];var S;return n[5]!==i||n[6]!==b||n[7]!==v?(S=babelHelpers.extends({"aria-label":i,style:v},b),n[5]=i,n[6]=b,n[7]=v,n[8]=S):S=n[8],S}function m(e,t,n,r){var a={};if(e!=null)for(var i of e)switch(i==null?void 0:i.styleId){case"bk.style.textspan.TextStyle":{var l=i==null?void 0:i.get("font_family"),s=i==null?void 0:i.get("text_style"),u=i==null?void 0:i.get("text_size"),c=i==null?void 0:i.get("tracking");if(u!=null&&!r&&(a.fontSize=o("WebBloksUtils").toPx(u)),s!=null){var d=o("WebBloksTextStyle").getTextStyle(s),m=d.fontWeight,p=d.fontStyle;a.fontWeight=m,a.fontStyle=p}if(l!=null){var _;a.fontFamily=(_=o("WebBloksTextStyle").getFontFamily(l,n))!=null?_:void 0}c!=null&&(a.letterSpacing=c);break}case"bk.style.textspan.ColorStyle":{var f=i==null?void 0:i.get("text_themed_color");f!=null&&(a.color=o("WebBloksUtils").getRGBColorWithTheme(f,t));break}case"bk.style.textspan.ShadowStyle":{var g=i.get("shadow_radius"),h=i.get("shadow_offset_dx"),y=i.get("shadow_offset_dy"),C=i.get("shadow_color");if(C!=null&&(g!=null||h!=null||y!=null)){var b=o("WebBloksTextStyle").getTextShadow({shadow_radius:g,shadow_offset_dx:h,shadow_offset_dy:y,shadow_color:C},t);b!=null&&(a.textShadow=b)}break}case"bk.style.textspan.StrikethroughStyle":{var v=i.get("strikethrough");v===!0&&(a.textDecoration="line-through");break}case"bk.style.textspan.UnderlineStyle":{var S=i.get("underline");S===!0&&(a.textDecoration="underline");break}}return a}function p(e){var t=null;if(e!=null)for(var n of e)(n==null?void 0:n.styleId)==="bk.style.textspan.ClickableStyle"&&(t=n==null?void 0:n.getExpression("on_click"));return t}l.useWebBloksBaseTextSpanProps=d}),98);
__d("WebBloksImageSpan",["WebBloksComponentContext","WebBloksDataTextSpanUtils","WebBloksStyle","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(14),n=e.externalStyle,r=e.node,a;t[0]!==r?(a=r.get("image_align"),t[0]=r,t[1]=a):a=t[1];var i=a,l=r.get("image_margin"),u=r.get("image_width"),c=r.get("image_height"),d=r.getSubNode("image_component"),m=o("WebBloksStyle").useStyle(r,n),p=m.wrapper,_=o("WebBloksComponentContext").useWebBloksContext(),f=_.renderNode,g=o("WebBloksDataTextSpanUtils").useWebBloksBaseTextSpanProps(r,n),h=i,y=l,C=h==="bottom"?"flex-end":h,b;t[2]!==g.style||t[3]!==C?(b=babelHelpers.extends({},g.style,{display:"inline-flex",height:"100%",alignItems:C}),t[2]=g.style,t[3]=C,t[4]=b):b=t[4];var v;t[5]!==g||t[6]!==b?(v=babelHelpers.extends({},g,{style:b}),t[5]=g,t[6]=b,t[7]=v):v=t[7];var S=v,R=o("WebBloksUtils").toPx(c),L=o("WebBloksUtils").toPx(u);if(R==null||R==="0px"||L==null||L==="0px")return null;var E=f(d,{height:R,width:L,marginTop:o("WebBloksUtils").toPx(y==null?void 0:y.get("top")),marginRight:o("WebBloksUtils").toPx(y==null?void 0:y.get("end")),marginBottom:o("WebBloksUtils").toPx(y==null?void 0:y.get("bottom")),marginLeft:o("WebBloksUtils").toPx(y==null?void 0:y.get("start"))}),k;t[8]!==S||t[9]!==E?(k=s.jsx("span",babelHelpers.extends({},S,{children:E})),t[8]=S,t[9]=E,t[10]=k):k=t[10];var I;return t[11]!==k||t[12]!==p?(I=p(k),t[11]=k,t[12]=p,t[13]=I):I=t[13],I}l.default=c}),98);
__d("WebBloksTextSpanImage",["WebBloksImageSpan","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.externalStyle,a=e.node,i;return t[0]!==n||t[1]!==a?(i=s.jsx(r("WebBloksImageSpan"),{node:a,externalStyle:n}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=u}),98);
__d("WebBloksTextSpan",["WebBloksAccessibilityUtils","WebBloksAnchorTagExtensionHandlerUtils","WebBloksBooleanUtils","WebBloksComponentContext","WebBloksStyle","WebBloksTextSpanImage","WebBloksTextStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime","useClickablePropsForWebBloks"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(34),n=e.node,a=e.externalStyle,i;t[0]!==n?(i=n.getExpression("on_click"),t[0]=n,t[1]=i):i=t[1];var l=i,u=n.get("text_color"),c;t[2]!==n?(c=n.getSubNode("image_component"),t[2]=n,t[3]=c):c=t[3];var p=c,_=n.getSubNode("text_provider"),f=n.get("shadow_color"),g=n.get("shadow_offset_dx"),h=n.get("shadow_offset_dy"),y=n.get("shadow_radius"),C=n.get("text_size"),b=n.get("text_style"),v=n.get("text_themed_color"),S=n.get("font_family"),R;t[4]!==n?(R=n.get("accessibility_label"),t[4]=n,t[5]=R):R=t[5];var L=R,E=n.get("accessibility_role"),k=n.get("strikethrough"),I=n.get("underline"),T=o("WebBloksStyle").useStyle(n,a,l!=null),D=T.style,x=T.wrapper,$=T.wrapperProps,P=o("WebBloksAnchorTagExtensionHandlerUtils").useWebBloksAnchorTagExtensionProps(n),N=P!==null,M=N?"a":"span",w=r("useClickablePropsForWebBloks")(n,l,null,N),A=o("WebBloksComponentContext").useWebBloksContext(),F=A.renderNode,O=A.bloksContext,B=o("WebBloksTheme").useTheme().getTheme(),W=O.objectSet.environment.fontFamilyMappings,q=_!=null?F(_):n.get("text"),U;t[6]!==a||t[7]!==p||t[8]!==n?(U=p!=null?s.jsx(r("WebBloksTextSpanImage"),{node:n,externalStyle:a}):null,t[6]=a,t[7]=p,t[8]=n,t[9]=U):U=t[9];var V=U,H=d(E,l,p),G=H==="button"||H==="link"?0:void 0,z;t[10]!==L||t[11]!==H||t[12]!==G?(z={role:H,label:L,tabIndex:G},t[10]=L,t[11]=H,t[12]=G,t[13]=z):z=t[13];var j=z,K=o("WebBloksTextStyle").getTextColor(u,v,B),Q=o("WebBloksTextStyle").getTextStyle(b),X="inline",Y=o("WebBloksUtils").toPx(C),J=o("WebBloksTextStyle").getFontFamily(S,W),Z=m(k,I),ee=o("WebBloksTextStyle").getTextShadow({shadow_color:f,shadow_offset_dx:g,shadow_offset_dy:h,shadow_radius:y},B),te;t[14]!==D||t[15]!==Y||t[16]!==J||t[17]!==Z||t[18]!==ee||t[19]!==K||t[20]!==Q?(te=babelHelpers.extends({},D,K,Q,{display:X,fontSize:Y,fontFamily:J,textDecoration:Z,textShadow:ee,whiteSpace:"pre-wrap",overflowWrap:"break-word"}),t[14]=D,t[15]=Y,t[16]=J,t[17]=Z,t[18]=ee,t[19]=K,t[20]=Q,t[21]=te):te=t[21];var ne;t[22]!==M||t[23]!==j||t[24]!==P||t[25]!==w||t[26]!==V||t[27]!==te||t[28]!==q||t[29]!==$?(ne=s.jsxs(M,babelHelpers.extends({},$,{style:te},w,j,P,{children:[q,V]})),t[22]=M,t[23]=j,t[24]=P,t[25]=w,t[26]=V,t[27]=te,t[28]=q,t[29]=$,t[30]=ne):ne=t[30];var re;return t[31]!==ne||t[32]!==x?(re=x(ne),t[31]=ne,t[32]=x,t[33]=re):re=t[33],re}function d(e,t,n){if(e!=null){var r;return(r=o("WebBloksAccessibilityUtils").WEBBLOKS_ACCESSIBILITY_ROLE_MAPPING[e])!=null?r:null}return t==null?null:n!=null?"button":"link"}function m(e,t){var n=[];if(o("WebBloksBooleanUtils").isTrue(e)&&n.push("line-through"),o("WebBloksBooleanUtils").isTrue(t)&&n.push("underline"),n.length!==0)return n.join(" ")}l.default=c}),98);
__d("WebBloksTransitionContainer",["WebBloksComponentContext","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useLayoutEffect,p=u.useMemo,_=u.useRef,f=u.useState;function g(e){var t,n=o("react-compiler-runtime").c(58),r=e.node,a=e.externalStyle,i;n[0]!==r?(i=r.get("crossfade"),n[0]=r,n[1]=i):i=n[1];var l=i,u;n[2]!==r?(u=r.getSubNodes("children"),n[2]=r,n[3]=u):u=n[3];var c=u,d=c[0],p=c[1],g=(t=r.get("progress"))!=null?t:0,b=o("WebBloksStyle").useStyle(r,a),v=b.style,S=b.wrapper,R=b.wrapperProps,L=o("WebBloksComponentContext").useWebBloksContext(),E=L.renderChildren,k;n[4]===Symbol.for("react.memo_cache_sentinel")?(k=[0,0,!1],n[4]=k):k=n[4];var I=f(k),T=I[0],D=I[1],x=T[0],$=T[1],P=T[2],N;n[5]===Symbol.for("react.memo_cache_sentinel")?(N=[0,0],n[5]=N):N=n[5];var M=f(N),w=M[0],A=M[1],F=w[0],O=w[1],B=_(null),W=_(null),q=_(null),U;n[6]===Symbol.for("react.memo_cache_sentinel")?(U=function(){var e=W.current;e!=null&&D([e.getBoundingClientRect().width,e.getBoundingClientRect().height,!0]);var t=q.current,n=t==null?void 0:t.children,r=(n==null?void 0:n.length)===1?n[0]:t;r!=null&&A([r.getBoundingClientRect().width,r.getBoundingClientRect().height])},n[6]=U):U=n[6];var V=U,H;n[7]===Symbol.for("react.memo_cache_sentinel")?(H=[V],n[7]=H):H=n[7],m(V,H),y(B,V);var G;n[8]!==E||n[9]!==d?(G=E([d]),n[8]=E,n[9]=d,n[10]=G):G=n[10];var z=G,j;n[11]!==p||n[12]!==E?(j=E([p]),n[11]=p,n[12]=E,n[13]=j):j=n[13];var K=j,Q=Number(g.toFixed(2)),X;n[14]!==O||n[15]!==Q||n[16]!==$?(X=h(Q,$,O),n[14]=O,n[15]=Q,n[16]=$,n[17]=X):X=n[17];var Y=X,J;n[18]!==F||n[19]!==Q||n[20]!==x?(J=h(Q,x,F),n[18]=F,n[19]=Q,n[20]=x,n[21]=J):J=n[21];var Z=J,ee;n[22]!==Q?(ee=h(Q,0,1),n[22]=Q,n[23]=ee):ee=n[23];var te=ee,ne=l===!0,re;n[24]!==Y||n[25]!==P||n[26]!==Z?(re=P?{height:Y,width:Z}:{},n[24]=Y,n[25]=P,n[26]=Z,n[27]=re):re=n[27];var oe;n[28]!==ne||n[29]!==te||n[30]!==Q?(oe=ne&&Q>0?{opacity:1-(te!=null?te:0)}:{},n[28]=ne,n[29]=te,n[30]=Q,n[31]=oe):oe=n[31];var ae;n[32]!==z||n[33]!==oe?(ae=s.jsx("div",{className:C.startElem,style:oe,ref:W,children:z}),n[32]=z,n[33]=oe,n[34]=ae):ae=n[34];var ie;n[35]!==K||n[36]!==O||n[37]!==F||n[38]!==ne||n[39]!==te||n[40]!==Q?(ie=Q>0?s.jsx("div",{className:C.endElem,style:babelHelpers.extends({},ne?{opacity:te}:{},{height:O,width:F}),children:K}):null,n[35]=K,n[36]=O,n[37]=F,n[38]=ne,n[39]=te,n[40]=Q,n[41]=ie):ie=n[41];var le;n[42]!==re||n[43]!==ae||n[44]!==ie?(le=s.jsxs("div",{className:C.container,style:re,children:[ae,ie]}),n[42]=re,n[43]=ae,n[44]=ie,n[45]=le):le=n[45];var se;n[46]!==K||n[47]!==O||n[48]!==F?(se=F>0||O>0?null:s.jsx("div",{className:C.endPreviewElem,ref:q,children:K}),n[46]=K,n[47]=O,n[48]=F,n[49]=se):se=n[49];var ue;n[50]!==v||n[51]!==le||n[52]!==se||n[53]!==R?(ue=s.jsxs("div",babelHelpers.extends({},R,{ref:B,style:v,children:[le,se]})),n[50]=v,n[51]=le,n[52]=se,n[53]=R,n[54]=ue):ue=n[54];var ce;return n[55]!==ue||n[56]!==S?(ce=S(ue),n[55]=ue,n[56]=S,n[57]=ce):ce=n[57],ce}function h(e,t,n){return t==null||n==null?null:t+e*(n-t)}function y(e,t){var n=o("react-compiler-runtime").c(4),r,a;n[0]!==t||n[1]!==e?(r=function(){var n=new IntersectionObserver(function(e){var n=e[0],r=n.isIntersecting;(r===!0||n.intersectionRatio>0||n.intersectionRect&&(n.intersectionRect.height>0||n.intersectionRect.width>0))&&t()},{root:null,threshold:0});return(e==null?void 0:e.current)!=null&&n.observe(e.current),(function(){return n.disconnect()})},a=[t,e],n[0]=t,n[1]=e,n[2]=r,n[3]=a):(r=n[2],a=n[3]),d(r,a)}var C=o("WebBloksStyle").createStyles({container:{position:"relative",overflow:"hidden"},startElem:{display:"inline-block"},endElem:{position:"absolute",top:0,left:0,bottom:0,right:0},endPreviewElem:{visibility:"hidden"}});l.default=g}),98);
__d("WebBloksZoomable",["WebBloksComponentContext","react-compiler-runtime"],(function(t,n,r,o,a,i,l){function e(e){var t=o("react-compiler-runtime").c(3),n=e.node,r=o("WebBloksComponentContext").useWebBloksContext(),a=r.renderNode,i;return t[0]!==n||t[1]!==a?(i=a(n.getSubNode("content")),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=e}),98);
__d("CoreWebBloksComponents",["WebBloksCDSBottomSheetWrapper","WebBloksCanvas","WebBloksCollection","WebBloksDatetimeTextProvider","WebBloksDialog","WebBloksDialogButton","WebBloksDummyComponent","WebBloksFieldset","WebBloksFlexbox","WebBloksGlimmer","WebBloksImage","WebBloksInternalAction","WebBloksMergeWithBind","WebBloksNavbar","WebBloksOnMount","WebBloksPullToRefreshContainer","WebBloksRichText","WebBloksScreenWrapperPrimitive","WebBloksSlider","WebBloksSwitch","WebBloksText","WebBloksTextInput","WebBloksTextSpan","WebBloksTransitionContainer","WebBloksZoomable"],(function(t,n,r,o,a,i,l){var e,s={"bk.cds.bottomsheet.Wrapper":r("WebBloksCDSBottomSheetWrapper"),"bk.component.TransitionContainer":r("WebBloksTransitionContainer"),"bk.components.Canvas":r("WebBloksCanvas"),"bk.components.Collection":r("WebBloksCollection"),"bk.components.DatetimeTextProvider":r("WebBloksDatetimeTextProvider"),"bk.components.Flexbox":r("WebBloksFlexbox"),"bk.components.Glimmer":r("WebBloksGlimmer"),"bk.components.Image":r("WebBloksImage"),"bk.components.OnMount":r("WebBloksOnMount"),"bk.components.PullToRefreshContainer":r("WebBloksPullToRefreshContainer"),"bk.components.RichText":r("WebBloksRichText"),"bk.components.Slider":r("WebBloksSlider"),"bk.components.Switch":r("WebBloksSwitch"),"bk.components.Text":r("WebBloksText"),"bk.components.TextInput":r("WebBloksTextInput"),"bk.components.TextSpan":r("WebBloksTextSpan"),"bk.components.Video":e=r("WebBloksDummyComponent"),"bk.components.VideoVersion":e,"bk.components.Zoomable":r("WebBloksZoomable"),"bk.components.dialog.Button":r("WebBloksDialogButton"),"bk.components.dialog.Dialog":r("WebBloksDialog"),"bk.components.internal.Action":r("WebBloksInternalAction"),"bk.components.internal.Merge":e,"bk.components.internal.MergeWithBind":r("WebBloksMergeWithBind"),"bk.components.internal.Shadow":e,"bk.components.screen.Wrapper":r("WebBloksScreenWrapperPrimitive"),"bk.components.webbloks.Fieldset":r("WebBloksFieldset"),"bk.data.screen.Navbar":r("WebBloksNavbar")};l.COMPONENTS=s}),98);
__d("WebBloksAccessibilityExtensionHandler",["WebBloksAccessibilityUtils","WebBloksBooleanUtils"],(function(t,n,r,o,a,i,l){var e={Button:"button",Header:"heading","Image Button":"button",Image:"img","Selected Button":"button",Text:"",Link:"link"},s={getProps:function(n){var t=n.getValues(),r=t.enabled,a=t.disabled,i=t.role,l=t.label,s={};return o("WebBloksBooleanUtils").isFalse(r)||(i&&(s.role=e[i]),l!=null&&(s["aria-label"]=l)),s=babelHelpers.extends({},o("WebBloksAccessibilityUtils").getFocusPropsForRole(s.role),s),o("WebBloksBooleanUtils").isTrue(a)&&(s.disabled=!0,s["aria-disabled"]=!0),s}},u=s;l.default=u}),98);
__d("WebBloksAnchorIDExtensionHandler",[],(function(t,n,r,o,a,i){var e={getProps:function(t){var e=t.get("anchor_id");if(e!=null)return{"data-anchor-id":e}}},l=e;i.default=l}),66);
__d("WebBloksAnchorTagExtensionHandler",[],(function(t,n,r,o,a,i){"use strict";var e={},l=e;i.default=l}),66);
__d("WebBloksAutomationTestExtensionHandler",[],(function(t,n,r,o,a,i){var e={getProps:function(t){var e=t.get("testing_id");if(e!=null)return{"data-testid":e}}},l=e;i.default=l}),66);
__d("WebBloksBKSTextInputFormatterHandler",[],(function(t,n,r,o,a,i){var e={},l=e;i.default=l}),66);
__d("WebBloksExtentionUtils",[],(function(t,n,r,o,a,i){var e=navigator.userAgent.match(/safari/)!=null&&!navigator.userAgent.match(/chrom(e|ium)/);function l(){if(e){var t,n;(t=document.body)==null||t.style.setProperty("-webkit-touch-callout","none"),(n=document.body)==null||n.style.setProperty("-webkit-user-select","none")}}function s(){if(e){var t,n;(t=document.body)==null||t.style.removeProperty("-webkit-touch-callout"),(n=document.body)==null||n.style.removeProperty("-webkit-user-select")}}i.disableLongPressSideEffectsInSafari=l,i.enableLongPressSideEffectsInSafari=s}),66);
__d("WebBloksGestureExtensionHandler",["WebBloksExtentionUtils","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e=500,s=250,u={getStyles:function(t){return{pointerEvents:"auto"}},onMount:function(n,r,a){var t,i=r.current,l=(t=i.uiMutableContainer.domNode)==null?void 0:t.current;if(l==null)return;var u=n.getExpression("on_tap"),c=n.getExpression("on_tap_with_touch_point"),d=n.getExpression("on_tap_with_touch_point_v2"),m=n.getExpression("on_long_press"),p=n.getExpression("on_long_press_with_touch_point"),_=n.getExpression("on_long_press_with_touch_point_v2"),f=n.getExpression("on_double_tap"),g=n.getExpression("on_double_tap_with_touch_point"),h=n.getExpression("on_double_tap_with_touch_point_v2"),y=n.getExpression("on_touch_down");function C(e,t){y!=null&&a.executeCatch(r.current,y,[r.current,a.bloksContext,e,t])}function b(e){C(e.clientX,e.clientY)}function v(e){C(e.touches[0].clientX,e.touches[0].clientY)}y!=null&&(l.addEventListener("mousedown",b),l.addEventListener("touchstart",v));var S=n.getExpression("on_touch_up");function R(e,t){S!=null&&a.executeCatch(r.current,S,[r.current,a.bloksContext,e,t])}function L(e){R(e.clientX,e.clientY)}function E(e){R(e.touches[0].clientX,e.touches[0].clientY)}S!=null&&(l.addEventListener("mouseup",L),l.addEventListener("touchend",E));var k=i.uiMutableContainer.gestures||{longPressTimeout:null,doublePressTimeout:null,startX:0,startY:0,preventTap:!1};i.uiMutableContainer.gestures=k;function I(){window.clearTimeout(k.longPressTimeout),k.longPressTimeout=null,o("WebBloksExtentionUtils").enableLongPressSideEffectsInSafari()}function T(t,n){if(k.longPressTimeout===null&&(o("WebBloksExtentionUtils").disableLongPressSideEffectsInSafari(),l!=null)){var i=l.getBoundingClientRect();k.startX=i.left,k.startY=i.top,k.preventTap=!1,k.longPressTimeout=window.setTimeout(function(){k.preventTap=!0,k.longPressTimeout=null,o("WebBloksUtils").isBloksModelEnabled(r.current)&&(m!=null&&a.executeCatch(r.current,m,[r.current,a.bloksContext]),p!=null&&a.executeCatch(r.current,p,[r.current,a.bloksContext,t,n]),_!=null&&a.executeCatch(r.current,_,[r.current,a.bloksContext,a,"detected",t,n])),o("WebBloksExtentionUtils").enableLongPressSideEffectsInSafari()},e)}}function D(e){T(e.touches[0].clientX,e.touches[0].clientY)}function x(e){T(e.clientX,e.clientY)}function $(e){var t=e.targetTouches[0];l!=null&&o("WebBloksUtils").shouldCancelTouchEvent(l,k.startX,k.startY,t)&&I()}function P(){I()}function N(e){k.preventTap&&e.preventDefault(),I()}function M(){I()}(m!=null||p!=null||_!=null)&&(l.addEventListener("touchstart",D,o("WebBloksUtils").passiveTouchEventOptions),l.addEventListener("touchmove",$,o("WebBloksUtils").passiveTouchEventOptions),l.addEventListener("touchend",N),l.addEventListener("touchcancel",N),l.addEventListener("mousedown",x),l.addEventListener("mouseleave",P),l.addEventListener("mouseup",M));function w(e){var t;e.stopPropagation(),((t=r.current.uiMutableContainer)==null||(t=t.gestures)==null?void 0:t.preventTap)!==!0&&o("WebBloksUtils").isBloksModelEnabled(r.current)&&((u!=null||c!=null||d!=null)&&f==null&&g==null&&h==null&&(u!=null&&a.executeCatch(r.current,u,[r.current,a.bloksContext]),c!=null&&a.executeCatch(r.current,c,[r.current,a.bloksContext,e.clientX,e.clientY]),d!=null&&a.executeCatch(r.current,d,[r.current,a.bloksContext,a,e.clientX,e.clientY])),(f!=null||g!=null||h!=null)&&(u!=null||c!=null||d!=null)&&e.detail===1&&(window.clearTimeout(k.doublePressTimeout),k.doublePressTimeout=window.setTimeout(function(){u!=null&&a.executeCatch(r.current,u,[r.current,a.bloksContext]),c!=null&&a.executeCatch(r.current,c,[r.current,a.bloksContext,e.clientX,e.clientY]),d!=null&&a.executeCatch(r.current,d,[r.current,a.bloksContext,a,e.clientX,e.clientY])},s)))}(u!=null||c!=null||d!=null||f!=null||g!=null||h==null)&&l.addEventListener("click",w);function A(e){window.clearTimeout(k.doublePressTimeout),k.doublePressTimeout=null,f!=null&&a.executeCatch(r.current,f,[r.current,a.bloksContext]),g!=null&&a.executeCatch(r.current,g,[r.current,a.bloksContext,e.clientX,e.clientY]),h!=null&&a.executeCatch(r.current,h,[r.current,a.bloksContext,a,e.clientX,e.clientY])}return(f!=null||g!=null||h!=null)&&l.addEventListener("dblclick",A),function(){l.removeEventListener("touchstart",D),l.removeEventListener("touchmove",$),l.removeEventListener("touchend",N),l.removeEventListener("touchcancel",N),l.removeEventListener("mousedown",x),l.removeEventListener("mouseleave",P),l.removeEventListener("mouseup",M),l.removeEventListener("click",w),l.removeEventListener("dblclick",A),l.removeEventListener("mousedown",b),l.removeEventListener("touchstart",v),l.removeEventListener("mouseup",L),l.removeEventListener("touchend",E)}}},c=u;l.default=c}),98);
__d("WebBloksHoverExtensionHandler",[],(function(t,n,r,o,a,i){"use strict";var e={getStyles:function(t){return{pointerEvents:"auto"}},onMount:function(t,n,r){var e,o=t.getExpression("on_pointer_enter"),a=t.getExpression("on_pointer_leave"),i=!1,l=!1;function s(e){if(i){i=!1;return}o!=null&&(r.executeCatch(n.current,o,[n.current,r.bloksContext]),l=!1)}function u(e){if(l){l=!1;return}a!=null&&r.executeCatch(n.current,a,[n.current,r.bloksContext])}function c(e){i=!0,l=!0}var d=(e=n.current.uiMutableContainer.domNode)==null?void 0:e.current;if(d)return d.addEventListener("mouseenter",s),d.addEventListener("mouseleave",u),d.addEventListener("touchstart",c),function(){d.removeEventListener("mouseenter",s),d.removeEventListener("mouseleave",u),d.removeEventListener("touchstart",c)}}},l=e;i.default=l}),66);
__d("WebBloksOnDataChangeExtensionHandler",["WebBloksBooleanUtils","WebBloksComponentContext","WebBloksUtils","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef,m=u.useState,p={onMount:function(t,n,r){var e=t.getExpression("on_cleanup");if(e!=null)return function(){r.executeCatch(t,e,[r.bloksContext])}},wrap:function(t,n){return s.jsx(f,{model:t,children:n})}},_=p;function f(e){var t=e.children,n=e.model,r=o("WebBloksComponentContext").useWebBloksContext(),a=n.getValues(),i=a.data,l=a.fire_on_first_mount,u=n.getExpression("on_change"),p=m(o("WebBloksBooleanUtils").isFalse(l)),_=p[0],f=p[1],g=d(null);return c(function(){_?f(!1):o("WebBloksUtils").deepEquals(g.current,i)||u!=null&&r.executeCatch(n,u,[r,g.current,i]),g.current=i},[i]),s.jsx(s.Fragment,{children:t})}f.displayName=f.name+" [from "+i.id+"]",l.default=_}),98);
__d("WebBloksOnMountExtensionHandler",["WebBloksOnMountExtensionHandlerUtils"],(function(t,n,r,o,a,i,l){var e={hasLayoutWrapper:function(){return!1},onMount:function(t,n,r){return o("WebBloksOnMountExtensionHandlerUtils").runMountEffects(t,n,r)}},s=e;l.default=s}),98);
__d("WebBloksRenderLifecycleExtensionHandler",[],(function(t,n,r,o,a,i){var e={hasLayoutWrapper:function(){return!1},onMount:function(t,n,r){var e=t.getExpression("on_component_rendered");e!=null&&r.executeOnNextTickCatch(n.current,e,[n.current,r])}},l=e;i.default=l}),66);
__d("WebBloksTextInputDatePickerExtensionHandler",[],(function(t,n,r,o,a,i){var e={},l=e;i.default=l}),66);
__d("WebBloksTextInputMaskExtensionHandler",[],(function(t,n,r,o,a,i){var e={},l=e;i.default=l}),66);
__d("WebBloksTouchExtensionHandler",["WebBloksConstants","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e={getStyles:function(t){return{cursor:"pointer",pointerEvents:"auto"}},onMount:function(t,n,r){var e,a=t.getExpression("on_touch_down"),i=t.getExpression("on_touch_up"),l=t.getExpression("on_touch_cancel"),s=(e=n.current.uiMutableContainer.domNode)==null?void 0:e.current;if(!s)return;var u=s,c=0,d=0,m=-1,p=!1,_=!1;function f(){var e=u.getBoundingClientRect();c=e.left,d=e.top,a!=null&&o("WebBloksUtils").isBloksModelEnabled(n.current)&&r.executeCatch(n.current,a,[n.current,r.bloksContext])}function g(){i!=null&&o("WebBloksUtils").isBloksModelEnabled(n.current)&&r.executeCatch(n.current,i,[n.current,r.bloksContext])}function h(){l!=null&&o("WebBloksUtils").isBloksModelEnabled(n.current)&&r.executeCatch(n.current,l,[n,r.bloksContext])}function y(e){if(_=!0,m===-1){var t=e.targetTouches[0];m=t.identifier,f()}}function C(e){if(_){e.preventDefault();return}e.button===0&&(e.preventDefault(),p=!0,f())}function b(e){e.keyCode===o("WebBloksConstants").KEY_SPACE&&e.preventDefault(),(e.keyCode===o("WebBloksConstants").KEY_SPACE||e.keyCode===o("WebBloksConstants").KEY_RETURN)&&f()}function v(e){(e.key==="Enter"||e.key===" ")&&g()}function S(e){var t=e.changedTouches[0];if(t.identifier===m)if(m=-1,o("WebBloksUtils").shouldCancelTouchEvent(u,c,d,t))h();else{var n=window.setTimeout(function(){g()},50),r=function(){g(),window.clearTimeout(n),u.removeEventListener("click",r)};u.addEventListener("click",r)}}function R(){if(_){_=!1;return}p&&(p=!1,g())}function L(e){m=-1,h()}function E(e){_||p&&(p=!1,h())}return u.addEventListener("touchstart",y,o("WebBloksUtils").passiveTouchEventOptions),u.addEventListener("keydown",b),u.addEventListener("keyup",v),u.addEventListener("touchend",S),u.addEventListener("touchcancel",L),u.addEventListener("mousedown",C),u.addEventListener("mouseleave",E),u.addEventListener("mouseup",R),function(){u.removeEventListener("touchstart",y),u.removeEventListener("keydown",b),u.removeEventListener("keyup",v),u.removeEventListener("touchend",S),u.removeEventListener("touchcancel",L),u.removeEventListener("mousedown",C),u.removeEventListener("mouseleave",E),u.removeEventListener("mouseup",R)}}},s=e;l.default=s}),98);
__d("useWebBloksViewTransformsExtensionWrapperVisibilityState",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useMemo,m=u.useState;function p(e){var t=o("react-compiler-runtime").c(9),n=e.alpha,r=e.scaleX,a=e.scaleY,i=m(null),l=i[0],s=i[1],u=m(null),d=u[0],p=u[1],_=m(null),f=_[0],g=_[1],h,y;t[0]!==n||t[1]!==l?(h=function(){var e=Math.round(((n!=null?n:1)+Number.EPSILON)*100)/100;e===0&&(l==="entered"||l===null)?s("exited"):e>0&&(l==="exited"||l===null)&&s("entered"),g("opacity")},y=[n,l],t[0]=n,t[1]=l,t[2]=h,t[3]=y):(h=t[2],y=t[3]),c(h,y);var C,b;t[4]!==d||t[5]!==r||t[6]!==a?(C=function(){var e=Math.round(((r!=null?r:1)+Number.EPSILON)*100)/100,t=Math.round(((a!=null?a:1)+Number.EPSILON)*100)/100;e===0&&t===0&&(d==="entered"||d===null)?p("exited"):e>0&&t>0&&(d==="exited"||d===null)&&p("entered"),g("scale")},b=[r,a,d],t[4]=d,t[5]=r,t[6]=a,t[7]=C,t[8]=b):(C=t[7],b=t[8]),c(C,b);var v;e:{if(f==="opacity"){v=l;break e}else if(f==="scale"){v=d;break e}v=void 0}var S=v;return S}l.default=p}),98);
__d("WebBloksViewTransformsExtensionWrapper",["WebBloksStyle","WebBloksUtils","react","react-compiler-runtime","useWebBloksViewTransformsExtensionWrapperVisibilityState"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.children,a=e.node,i=[],l=a.get("alpha"),u;t[0]!==a?(u=a.get("rotation"),t[0]=a,t[1]=u):u=t[1];var c=u,d=a.get("scale_x"),m=a.get("scale_y"),p=a.get("translate_x"),_=a.get("translate_y"),f=r("useWebBloksViewTransformsExtensionWrapperVisibilityState")({alpha:l,scaleX:d,scaleY:m});p!=null&&i.push("translateX("+o("WebBloksUtils").toPx(p)+")"),_!=null&&i.push("translateY("+o("WebBloksUtils").toPx(_)+")"),c!=null&&i.push("rotate("+c+"deg)"),d!=null&&i.push("scaleX("+d+")"),m!=null&&i.push("scaleY("+m+")");var g=i.join(" "),h="bk.components.ViewTransformsExtension",y=o("WebBloksStyle").getStyleProps({height:"100%",width:"100%",transform:g,opacity:l,pointerEvents:"inherit"}),C;return t[2]!==n||t[3]!==y||t[4]!==f?(C=s.jsx("div",babelHelpers.extends({"data-bloks-name":h,"data-bloks-visibility-state":f},y,{children:n})),t[2]=n,t[3]=y,t[4]=f,t[5]=C):C=t[5],C}l.default=u}),98);
__d("WebBloksViewTransformExtensionHandler",["WebBloksViewTransformsExtensionWrapper","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u={hasLayoutWrapper:function(){return!0},wrap:function(t,n){return s.jsx(r("WebBloksViewTransformsExtensionWrapper"),{node:t,children:n})}},c=u;l.default=c}),98);
__d("WebBloksVisibilityExtensionHandler",["WebBloksComponentContext","WebBloksSSRUtils","WebBloksViewpoint","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useLayoutEffect;function m(e){var t=e.children,n=e.node,r=e.elementRef;return o("WebBloksSSRUtils").canUseDOM?p({children:t,node:n,elementRef:r}):t}function p(e){var t=e.children,n=e.elementRef,r=e.id,a=e.node,i=o("WebBloksComponentContext").useWebBloksContext(),l=i.executeCatch,s=i.bloksContext,u=c(function(e){var t=a.uiMutableContainer.visibility||{hasSeenBefore:!1},n=babelHelpers.extends({},e,t);switch(e.state){case"entered":{var r=a.getExpression("on_appear");r!=null&&l(a,r,[n,s]),a.uiMutableContainer.visibility={hasSeenBefore:!0};break}case"intersecting":{var o=a.getExpression("on_update");o!=null&&l(a,o,[n,s]);break}case"exited":{var i,u=a.getExpression("on_disappear");u!=null&&((i=a.uiMutableContainer.visibility)==null?void 0:i.hasSeenBefore)===!0&&l(a,u,[n,s]);break}default:}},[l,a,s]),m=a==null?void 0:a.get("trigger_on_first_appear_only"),p=o("WebBloksViewpoint").useViewpoint({id:a.clientId.toString(),action:u,untrackAfterFirstAppear:m!=null?m:!1});return d(function(){p.current=n.current},[n,p]),t}p.displayName=p.name+" [from "+i.id+"]";var _={hasLayoutWrapper:function(){return!1},wrap:function(t,n,r,o){return s.jsx(m,{node:t,elementRef:o,children:n})}},f=_;l.default=f}),98);
__d("WebBloksWebFocusBoundaryExtensionHandler",[],(function(t,n,r,o,a,i){var e={onMount:function(t,n,r){var e,o=t.getExpression("on_gain_focus_inside"),a=t.getExpression("on_lose_focus_inside"),i=(e=n.current.uiMutableContainer.domNode)==null?void 0:e.current;if(!i)return;var l=i.contains(document.activeElement);l&&o!=null&&r.executeCatch(n.current,o,[n.current,r.bloksContext]);function s(e){var t,a=l;l=(t=i==null?void 0:i.contains(e.target))!=null?t:!1,l&&!a&&o!=null&&r.executeCatch(n.current,o,[n.current,r.bloksContext])}function u(e){var t,o=l;l=(t=i==null?void 0:i.contains(e.relatedTarget))!=null?t:!1,o&&!l&&a!=null&&r.executeCatch(n.current,a,[n.current,r.bloksContext])}return i.addEventListener("focusin",s),i.addEventListener("focusout",u),function(){i.removeEventListener("focusin",s),i.removeEventListener("focusout",u)}}},l=e;i.default=l}),66);
__d("WebBloksWebNativeAccessibilityExtensionHandler",["WebBloksAccessibilityUtils","WebBloksBooleanUtils"],(function(t,n,r,o,a,i,l){var e={getProps:function(t){var e=t.getValues(),n=e["aria-controls"],r=e["aria-describedby"],a=e["aria-expanded"],i=e["aria-hidden"],l=e["aria-pressed"],s=e["aria-selected"],u=e.checked,c=e.role,d=e.enabled,m=e.label,p=e.lang,_=e.heading_level,f={},g=o("WebBloksAccessibilityUtils").WEBBLOKS_ACCESSIBILITY_ROLE_MAPPING[c];return g!=null&&(f.role=g),f=babelHelpers.extends({},o("WebBloksAccessibilityUtils").getFocusPropsForRole(f.role),f),o("WebBloksBooleanUtils").isTrue(u)&&(f["aria-checked"]=!0),o("WebBloksBooleanUtils").isFalse(u)&&(f["aria-checked"]=!1),o("WebBloksBooleanUtils").isFalse(d)&&(f.disabled=!0,f["aria-disabled"]=!0),a!=null&&(f["aria-expanded"]=o("WebBloksBooleanUtils").isTrue(a)),n!=null&&n.length>0&&(f["aria-controls"]=n.join(" ")),r!=null&&r.length>0&&(f["aria-describedby"]=r.join(" ")),i!=null&&(f["aria-hidden"]=o("WebBloksBooleanUtils").isTrue(i)),l!=null&&(f["aria-pressed"]=l),s!=null&&(f["aria-selected"]=o("WebBloksBooleanUtils").isTrue(s)),m!=null&&(f["aria-label"]=m),_!=null&&(f["aria-label"]=void 0),p!=null&&(f.lang=p),f},wrap:function(t,n){var e=t.getValues(),r=e.heading_level,a=e.label;return r!=null?o("WebBloksAccessibilityUtils").getHeading(r,a,n):n},reduce:function(t,n){return t?t.makeCopy(n.getValues()):n}},s=e;l.default=s}),98);
__d("WebBloksExtensionHandlers",["WebBloksAccessibilityExtensionHandler","WebBloksAnchorIDExtensionHandler","WebBloksAnchorTagExtensionHandler","WebBloksAutomationTestExtensionHandler","WebBloksBKSTextInputFormatterHandler","WebBloksGestureExtensionHandler","WebBloksHoverExtensionHandler","WebBloksOnDataChangeExtensionHandler","WebBloksOnMountExtensionHandler","WebBloksRenderLifecycleExtensionHandler","WebBloksTextInputDatePickerExtensionHandler","WebBloksTextInputMaskExtensionHandler","WebBloksTouchExtensionHandler","WebBloksViewTransformExtensionHandler","WebBloksVisibilityExtensionHandler","WebBloksWebFocusBoundaryExtensionHandler","WebBloksWebNativeAccessibilityExtensionHandler"],(function(t,n,r,o,a,i,l){var e={"bk.components.AnchorIdExtension":r("WebBloksAnchorIDExtensionHandler"),"bk.components.AutomationTestExtension":r("WebBloksAutomationTestExtensionHandler"),"bk.components.VisibilityExtension":r("WebBloksVisibilityExtensionHandler"),"bk.components.AccessibilityExtension":r("WebBloksAccessibilityExtensionHandler"),"bk.components.WebNativeAccessibilityExtension":r("WebBloksWebNativeAccessibilityExtensionHandler"),"bk.components.HoverExtension":r("WebBloksHoverExtensionHandler"),"bk.components.OnMount":r("WebBloksOnMountExtensionHandler"),"bk.components.RenderLifecycleExtension":r("WebBloksRenderLifecycleExtensionHandler"),"bk.components.ViewTransformsExtension":r("WebBloksViewTransformExtensionHandler"),"bk.components.FoaTouchExtension":r("WebBloksTouchExtensionHandler"),"bk.components.FoaGestureExtension":r("WebBloksGestureExtensionHandler"),"bk.components.TextInputDatePickerExtension":r("WebBloksTextInputDatePickerExtensionHandler"),"bk.components.TextInputMaskExtension":r("WebBloksTextInputMaskExtensionHandler"),"bk.extensions.OnDataChange":r("WebBloksOnDataChangeExtensionHandler"),"bk.components.AnchorTagExtension":r("WebBloksAnchorTagExtensionHandler"),"bk.component.WebFocusBoundaryExtension":r("WebBloksWebFocusBoundaryExtensionHandler"),"bk.components.BKSTextInputFormatter":r("WebBloksBKSTextInputFormatterHandler")};l.EXTENSION_HANDLERS=e}),98);
__d("coreTraversalKeys",[],(function(t,n,r,o,a,i){var e={"bk.cds.bottomsheet.Wrapper":{subnodes:["_style","content","header","web_background_overlay_color","top_banner"],plural_subnodes:["extensions","child_templates"]},"bk.component.TransitionContainer":{subnodes:["_style"],plural_subnodes:["extensions","children","child_templates"]},"bk.components.BoxDecoration":{subnodes:["background","foreground","corner_fill_themed_color","border_themed_color","shadow_themed_color","contrib","spot_shadow_color","ambient_shadow_color"],plural_subnodes:["child_templates"]},"bk.components.Canvas":{subnodes:["_style"],plural_subnodes:["extensions","children","child_templates"]},"bk.components.Collection":{subnodes:["_style","background_themed_color","scroll_indicator_color","scroll_indicator_background_color","scroll_indicator_margin_insets","scroll_indicator_shadow_color","scroll_indicator_margin_insets_v2","scroll_indicator_shadow_color_v2","layout_config"],plural_subnodes:["extensions","children","child_templates"]},"bk.components.Flexbox":{subnodes:["_style","decoration","on_click_config"],plural_subnodes:["extensions","gesture_recognizers","children","child_templates"]},"bk.components.Glimmer":{subnodes:["_style"],plural_subnodes:["extensions","child_templates"]},"bk.components.GradientThemedColorDrawable":{subnodes:["begin_color","end_color","middle_color"],plural_subnodes:["child_templates"]},"bk.components.Image":{subnodes:["_style","color_filter","contrib","progress_ring_color","focus_point","placeholder_color"],plural_subnodes:["extensions","child_templates"]},"bk.components.PullToRefreshContainer":{subnodes:["_style","child"],plural_subnodes:["extensions","child_templates"]},"bk.components.RichText":{subnodes:["_style","truncation_string_themed_color","link_highlight_themed_color","keyboard_link_highlight_themed_color","link_highlight_text_themed_color","background_color"],plural_subnodes:["extensions","children","gradient_colors","truncation_spans","spans","spans_for_truncation","child_templates"]},"bk.components.Slider":{subnodes:["_style","thumb_color","filled_track_color","unfilled_track_color"],plural_subnodes:["extensions","child_templates"]},"bk.components.Spinner":{subnodes:["_style","color"],plural_subnodes:["extensions","child_templates"]},"bk.components.StateDrawable":{plural_subnodes:["state_items","child_templates"]},"bk.components.StateDrawableItem":{subnodes:["drawable"],plural_subnodes:["child_templates"]},"bk.components.Switch":{subnodes:["_style","on_color","off_color","thumb_color_on_android","thumb_color_off_android","track_color_on","track_color_off","thumb_color_disabled_on_android","thumb_color_disabled_off_android","track_color_disabled_on","track_color_disabled_off","thumb_color_disabled_on","thumb_color_disabled_off","thumb_color_on","thumb_color_off"],plural_subnodes:["extensions","child_templates"]},"bk.components.Text":{subnodes:["_style","text_provider","text_themed_color","truncation_string_themed_color"],plural_subnodes:["extensions","truncation_spans","child_templates"]},"bk.components.TextInput":{subnodes:["_style","text_themed_color","hint_text_themed_color","cursor_color","placeholder_text_color","background_color","shadow"],plural_subnodes:["extensions","child_templates"]},"bk.components.TextSpan":{subnodes:["_style","text_provider","text_themed_color","tint_color","shadow_color","image_component","image_margin"],plural_subnodes:["extensions","span_styles","spans","child_templates"]},"bk.components.ThemedColorDrawable":{subnodes:["color"],plural_subnodes:["child_templates"]},"bk.components.Video":{subnodes:["_style","player_identifier","video_clipping_positions"],plural_subnodes:["extensions","video_versions","preview_versions","child_templates"]},"bk.components.Zoomable":{subnodes:["_style","content","config"],plural_subnodes:["extensions","child_templates"]},"bk.components.dialog.Button":{subnodes:["text_color"],plural_subnodes:["child_templates"]},"bk.components.dialog.Dialog":{subnodes:["primary_button","secondary_button","tertiary_button"],plural_subnodes:["child_templates"]},"bk.components.internal.Action":{subnodes:["_style"],plural_subnodes:["extensions","child_templates"]},"bk.components.internal.Merge":{subnodes:["_style"],plural_subnodes:["extensions","children","child_templates"]},"bk.components.internal.MergeWithBind":{subnodes:["_style"],plural_subnodes:["extensions","children","child_templates"]},"bk.components.internal.Shadow":{subnodes:["_style","child"],plural_subnodes:["extensions","child_templates"]},"bk.components.screen.Wrapper":{subnodes:["_style","content","navbar"],plural_subnodes:["extensions","contribs","child_templates"]},"bk.components.webbloks.Fieldset":{subnodes:["_style"],plural_subnodes:["extensions","children","child_templates"]},"bk.data.GradientLine":{subnodes:["start_point","end_point"],plural_subnodes:["child_templates"]},"bk.data.bloks.TreeResourceReferences":{plural_subnodes:["props","child_templates"]},"bk.data.cds.OpenScreenOptions":{subnodes:["android_activity_background_color","dimmed_background_color","background_overlay_color","bottom_sheet_margins"],plural_subnodes:["child_templates"]},"bk.data.screen.Navbar":{subnodes:["contrib"],plural_subnodes:["contribs","child_templates"]},"bk.data.screen.Screen":{subnodes:["loading_screen","loaded_screen","navbar","navbar_data","contrib","lifecycle_callbacks"],plural_subnodes:["contribs","child_templates"]},"bk.data.toast.ShowToastOptions":{subnodes:["show_animation_interpolator","dismiss_animation_interpolator"],plural_subnodes:["child_templates"]},"bk.data.toast.ShowToastOptionsV2":{subnodes:["show_animation_interpolator","dismiss_animation_interpolator"],plural_subnodes:["child_templates"]},"bk.style.textspan.ColorStyle":{subnodes:["text_themed_color"],plural_subnodes:["child_templates"]},"bk.style.textspan.ShadowStyle":{subnodes:["shadow_color"],plural_subnodes:["child_templates"]},"bk.types.CanvasFill":{subnodes:["shape","shading","blending_mode","shadow"],plural_subnodes:["child_templates"]},"bk.types.CanvasGradient":{plural_subnodes:["themed_colors","child_templates"]},"bk.types.CanvasGroup":{subnodes:["transform","clip"],plural_subnodes:["children","child_templates"]},"bk.types.CanvasLayer":{subnodes:["transform","clip","blending_mode"],plural_subnodes:["children","child_templates"]},"bk.types.CanvasPath":{plural_subnodes:["children","child_templates"]},"bk.types.CanvasPathAdd":{subnodes:["path","transform"],plural_subnodes:["child_templates"]},"bk.types.CanvasPathDifference":{subnodes:["path","transform"],plural_subnodes:["child_templates"]},"bk.types.CanvasPathIntersection":{subnodes:["path","transform"],plural_subnodes:["child_templates"]},"bk.types.CanvasPathUnion":{subnodes:["path","transform"],plural_subnodes:["child_templates"]},"bk.types.CanvasPathXor":{subnodes:["path","transform"],plural_subnodes:["child_templates"]},"bk.types.CanvasShadingColor":{subnodes:["themed_color"],plural_subnodes:["child_templates"]},"bk.types.CanvasShadingGradientLinear":{subnodes:["gradient"],plural_subnodes:["child_templates"]},"bk.types.CanvasShadingGradientRadial":{subnodes:["gradient"],plural_subnodes:["child_templates"]},"bk.types.CanvasShadow":{subnodes:["themed_color"],plural_subnodes:["child_templates"]},"bk.types.CanvasStroke":{subnodes:["shape","shading","blending_mode","shadow"],plural_subnodes:["child_templates"]},"bk.types.CanvasTransform":{plural_subnodes:["children","child_templates"]},"bk.types.GridCollectionLayoutConfig":{subnodes:["padding"],plural_subnodes:["child_templates"]},collection:{subnodes:["sticky_item_config"],plural_subnodes:["child_templates"]},flex:{subnodes:["touch_expansion"],plural_subnodes:["child_templates"]},"mini.data.Product":{subnodes:["main_image","merchant","thumbnail_image","checkout_properties","drawing_information","rating"],plural_subnodes:["variant_values","child_templates"]},"bk.AnyComponent":{subnodes:["style"],plural_subnodes:["extensions","child_templates"]},"bk.types.Shadow":{subnodes:["color"],plural_subnodes:["child_templates"]},"bk.data.zoomable.config.Remote":{subnodes:["placeholder_color"],plural_subnodes:["child_templates"]},"bk.data.screen.navbar.Contrib":{subnodes:["fb","msg"],plural_subnodes:["child_templates"]},"bk.data.screen.screen.Contrib":{subnodes:["ig","msg"],plural_subnodes:["child_templates"]},"bk.data.product.CheckoutProperties":{subnodes:["currency_amount","shipping_and_return"],plural_subnodes:["child_templates"]},"bk.data.screen.navbar.contrib.Msg":{subnodes:["title_view"],plural_subnodes:["right_buttons","left_buttons","child_templates"]},"bk.data.product.checkout.ShippingAndReturn":{subnodes:["shipping_cost","return_cost"],plural_subnodes:["child_templates"]}},l=e;i.default=l}),66);
__d("CoreWebBloksEnvironmentConfigDynamic",["CoreWebBloksActions","WebBloksExtensionHandlers","coreTraversalKeys"],(function(t,n,r,o,a,i,l){var e={actions:o("CoreWebBloksActions").ACTIONS,extensionHandlers:o("WebBloksExtensionHandlers").EXTENSION_HANDLERS,traversalKeys:r("coreTraversalKeys")};l.CORE_ENVIRONMENT_CONFIG=e}),98);
__d("useSrcFCFromCurrentDomain",[],(function(t,n,r,o,a,i){"use strict";function e(){var e=window.location.hostname;return e.includes("instagram")?"INSTAGRAM":e.includes("messenger")?"MESSENGER":e.includes("facebook")?"FACEBOOK":e.includes("meta")?"VR":null}i.default=e}),66);
__d("FCLoggingSession",["CometRouteParams","WebSession","react","react-compiler-runtime","useSrcFCFromCurrentDomain"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u={entrypoint:null,fc_session_id:null,src_fc:null};function c(){var e,t=(e=o("CometRouteParams").useRouteParams())==null?void 0:e.src_fc,n=r("useSrcFCFromCurrentDomain")(),a=t!=null?String(t):null;return a==="INSTAGRAM"?"INSTAGRAM":a==="MESSENGER"?"MESSENGER":a==="FACEBOOK"?"FACEBOOK":a==="VR"?"VR":n}function d(){var e,t=o("react-compiler-runtime").c(2),n=(e=o("CometRouteParams").useRouteParams())==null?void 0:e.fc_session_id,r=n==null?null:String(n),a;if(t[0]!==r){var i,l;a=(i=(l=u.fc_session_id)!=null?l:r)!=null?i:o("WebSession").getId(),t[0]=r,t[1]=a}else a=t[1];return a}function m(){var e,t,n=(e=o("CometRouteParams").useRouteParams())==null?void 0:e.user_id,r=(t=o("CometRouteParams").useRouteParams())==null?void 0:t.supervised_user_id,a=n!=null?n:r;return a==null?null:String(a)}function p(e){var t=o("react-compiler-runtime").c(2),n;t[0]!==e?(n=function(){u.fc_session_id==null&&(e!=null&&e!==""?u.fc_session_id=e:u.fc_session_id=o("WebSession").getId())},t[0]=e,t[1]=n):n=t[1],s(n,void 0)}l.FCLoggingSessionObject=u,l.useSrcFC=c,l.useFCSessionID=d,l.useTargetAccountID=m,l.useUpdateGlobalFCSessionID=p}),98);
__d("NFXContextFactory",["FBLogger","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=function(t,n){if(n!==null)return n};return JSON.stringify({reportable_ent_token:e.reportable_ent_token,story_location:e.story_location,entry_point:e.entry_point,type:e.type,session_id:r("uuidv4")(),initial_action_name:e.initial_action_name,reportable_id:e.reportable_id,page_id:e.page_id,responsible_id:e.responsible_id},t)}function s(t){var n=t.reportable_ent_token,r=t.story_location,o=t.entry_point,a=o===void 0?"unknown":o,i=t.responsible_id;return e({type:1,story_location:r,entry_point:a,reportable_ent_token:n,responsible_id:i})}function u(t){var n=t.reportable_id,r=t.page_id,o=t.storyLocation;return e({type:6,story_location:o,entry_point:"unknown",initial_action_name:"POLITICAL_ARCHIVE_REPORT_AD",reportable_id:n,page_id:r})}function c(t){var n=t.reportable_ent_token,r=t.story_location,o=t.entry_point,a=o===void 0?"unknown":o,i=t.initial_action_name,l=t.page_id;return e({type:11,story_location:r,entry_point:a,reportable_ent_token:n,initial_action_name:i,page_id:l})}function d(t){var n=t.reportable_ent_token,o=t.story_location,a=t.entry_point,i=a===void 0?"unknown":a,l=t.initial_action_name;return n===null&&r("FBLogger")("frx").warn("null or undefined reportable_ent_token in forEntReportable, location=%s entry_point=%s",o,i),e({type:2,story_location:o,entry_point:i,reportable_ent_token:n,initial_action_name:l})}l.withEntMessageThread=s,l.withPoliticalArchiveAds=u,l.withEntReportableOnPage=c,l.withEntReportable=d}),98);
__d("XRapidReportingDialogController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/rapid_report/",{__asyncDialog:{type:"Int"},context:{type:"String",required:!0},preselectedtagid:{type:"Enum",enumType:1}})}),null);
__d("FRXURI",["ActorURI","NFXContextFactory","XRapidReportingDialogController"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.reportable_ent_token,n=e.story_location,a=e.entry_point,i=a===void 0?"unknown":a,l=e.responsible_id,s=e.actor_id,u=o("NFXContextFactory").withEntMessageThread({reportable_ent_token:t,story_location:n,entry_point:i,responsible_id:l}),c=r("XRapidReportingDialogController").getURIBuilder().setString("context",u).getURI();return s!=null&&(c=o("ActorURI").create(c,s)),c}function s(e){var t=e.reportable_ent_token,n=e.story_location,a=e.entry_point,i=a===void 0?"unknown":a,l=e.initial_action_name,s=e.actor_id,u=e.page_id,c=o("NFXContextFactory").withEntReportableOnPage({reportable_ent_token:t,story_location:n,entry_point:i,initial_action_name:l,page_id:u}),d=r("XRapidReportingDialogController").getURIBuilder().setString("context",c).getURI();return s!=null&&(d=o("ActorURI").create(d,s)),d}function u(e){var t=e.reportable_ent_token,n=e.story_location,a=e.entry_point,i=a===void 0?"unknown":a,l=e.initial_action_name,s=e.actor_id,u=o("NFXContextFactory").withEntReportable({reportable_ent_token:t,story_location:n,entry_point:i,initial_action_name:l}),c=r("XRapidReportingDialogController").getURIBuilder().setString("context",u).getURI();return s!=null&&(c=o("ActorURI").create(c,s)),c}function c(e,t){return btoa(e+":"+t)}l.withEntMessageThread=e,l.withEntReportableOnPage=s,l.withEntReportable=u,l.getReportableToken=c}),98);
__d("FamilyCenterInterface",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BLOKS:"bloks",DESKTOP_WEB:"desktop_web",MOBILE_APP:"mobile_app",MOBILE_WEB:"mobile_web",NT:"nt"}),l=e;i.default=l}),66);
__d("WebBloksLogEvent",["FalcoLoggerInternal","WebBloksFalcoPolicyData"],(function(t,n,r,o,a,i,l){function e(e,t,n,a){var i=o("FalcoLoggerInternal").create(t,r("WebBloksFalcoPolicyData").get(t));i.log(function(){return a})}l.default=e}),98);
__d("WebBloksLogEventCritical",["FalcoLoggerInternal","WebBloksFalcoPolicyData"],(function(t,n,r,o,a,i,l){function e(e,t,n,a){var i=o("FalcoLoggerInternal").create(t,r("WebBloksFalcoPolicyData").get(t));i.logCritical(function(){return a})}l.default=e}),98);
__d("WebBloksOpenFRXAction",["FRXURI","JSResource"],(function(t,n,r,o,a,i,l){function e(e,t,n,a){var i=o("FRXURI").withEntReportable({reportable_ent_token:a,story_location:n,entry_point:t});r("JSResource")("XAsyncRequest").__setRef("WebBloksOpenFRXAction").load().then(function(e){var t=new e().setURI(i);return t.send()}).catch(function(t){e.objectSet.environment.logger.mustfix("WebBloksOpenFRXAction fetch failure",t)})}l.default=e}),98);
__d("WebBloksQPLUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=n!=null?n:void 0;return{i:e,m:r,r:t}}i.createSyntheticQPLEvent=e}),66);
__d("WebBloksQPLMarkerAnnotateV2",["QuickPerformanceLogger","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){var e;function s(t,n,a,i,l){var s=l.get("sample_rate"),u=l.get("sampling_type"),c=o("WebBloksQPLUtils").createSyntheticQPLEvent(n,s,u);(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(c,{string:i},{instanceKey:a})}l.default=s}),98);
__d("WebBloksQPLMarkerEndV3",["QuickPerformanceLogger","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){var e;function s(t,n,a,i,l,s){var u=l.get("sample_rate"),c=l.get("sampling_type"),d=o("WebBloksQPLUtils").createSyntheticQPLEvent(n,u,c);(e||(e=r("QuickPerformanceLogger"))).markerEnd(d,i,a)}l.default=s}),98);
__d("WebBloksQPLMarkerPointV2",["QuickPerformanceLogger","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){var e;function s(t,n,a,i,l,s){var u=l.get("sample_rate"),c=l.get("sampling_type"),d=o("WebBloksQPLUtils").createSyntheticQPLEvent(n,u,c);(e||(e=r("QuickPerformanceLogger"))).markerPoint(d,i,{instanceKey:a})}l.default=s}),98);
__d("WebBloksQPLMarkerStartV3",["QuickPerformanceLogger","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){var e;function s(t,n,a,i,l){var s=i.get("sample_rate"),u=i.get("sampling_type"),c=o("WebBloksQPLUtils").createSyntheticQPLEvent(n,s,u);(e||(e=r("QuickPerformanceLogger"))).markerStart(c,a)}l.default=s}),98);
__d("WebBloksQPLUserFlowAnnotateV3",["QPLUserFlow","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,a,i){var l=i.get("sample_rate"),s=i.get("sampling_type"),u=o("WebBloksQPLUtils").createSyntheticQPLEvent(t,l,s);r("QPLUserFlow").addAnnotations(u,{string:a},{instanceKey:n})}l.default=e}),98);
__d("WebBloksQPLUserFlowEndFlowCancelV3",["QPLUserFlow","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,a,i){var l=i.get("sample_rate"),s=i.get("sampling_type"),u=o("WebBloksQPLUtils").createSyntheticQPLEvent(t,l,s);r("QPLUserFlow").endCancel(u,{annotations:{string:{cancel_reason:a}},instanceKey:n})}l.default=e}),98);
__d("WebBloksQPLUserFlowEndFlowFailureV3",["QPLUserFlow","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,a,i,l){var s=l.get("sample_rate"),u=l.get("sampling_type"),c=o("WebBloksQPLUtils").createSyntheticQPLEvent(t,s,u);r("QPLUserFlow").endFailure(c,a,{debugInfo:i,instanceKey:n})}l.default=e}),98);
__d("WebBloksQPLUserFlowEndFlowSuccessV3",["QPLUserFlow","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,a){var i=a.get("sample_rate"),l=a.get("sampling_type"),s=o("WebBloksQPLUtils").createSyntheticQPLEvent(t,i,l);r("QPLUserFlow").endSuccess(s,{instanceKey:n})}l.default=e}),98);
__d("WebBloksQPLUserFlowMarkErrorV3",["QPLUserFlow","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,a,i,l){var s=l.get("sample_rate"),u=l.get("sampling_type"),c=o("WebBloksQPLUtils").createSyntheticQPLEvent(t,s,u);r("QPLUserFlow").markError(c,a,{debugInfo:i,instanceKey:n})}l.default=e}),98);
__d("WebBloksQPLUserFlowMarkPointV3",["QPLUserFlow","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,a,i,l){var s=l.get("sample_rate"),u=l.get("sampling_type"),c=o("WebBloksQPLUtils").createSyntheticQPLEvent(t,s,u);r("QPLUserFlow").addPoint(c,a,{instanceKey:n,data:{string:i}})}l.default=e}),98);
__d("WebBloksQPLUserFlowStartFlowV3",["QPLUserFlow","WebBloksQPLUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,a,i){var l=a.get("sample_rate"),s=a.get("sampling_type"),u=i.get("trigger_source"),c=o("WebBloksQPLUtils").createSyntheticQPLEvent(t,l,s);r("QPLUserFlow").start(c,{instanceKey:n,annotations:{string:{trigger_source:u}}})}l.default=e}),98);
__d("HasteSharedWebBloksActions",["WebBloksLogEvent","WebBloksLogEventCritical","WebBloksOpenFRXAction","WebBloksQPLMarkerAnnotateV2","WebBloksQPLMarkerEndV3","WebBloksQPLMarkerPointV2","WebBloksQPLMarkerStartV3","WebBloksQPLUserFlowAnnotateV3","WebBloksQPLUserFlowEndFlowCancelV3","WebBloksQPLUserFlowEndFlowFailureV3","WebBloksQPLUserFlowEndFlowSuccessV3","WebBloksQPLUserFlowMarkErrorV3","WebBloksQPLUserFlowMarkPointV3","WebBloksQPLUserFlowStartFlowV3"],(function(t,n,r,o,a,i,l){var e={"bk.action.OpenFRXAction":r("WebBloksOpenFRXAction"),"bk.action.logging.LogEvent":r("WebBloksLogEvent"),"bk.action.logging.LogEventCritical":r("WebBloksLogEventCritical"),"bk.action.qpl.MarkerAnnotateV2":r("WebBloksQPLMarkerAnnotateV2"),"bk.action.qpl.MarkerEndV3":r("WebBloksQPLMarkerEndV3"),"bk.action.qpl.MarkerPointV2":r("WebBloksQPLMarkerPointV2"),"bk.action.qpl.MarkerStartV3":r("WebBloksQPLMarkerStartV3"),"bk.action.qpl.userflow.AnnotateV3":r("WebBloksQPLUserFlowAnnotateV3"),"bk.action.qpl.userflow.EndFlowCancelV3":r("WebBloksQPLUserFlowEndFlowCancelV3"),"bk.action.qpl.userflow.EndFlowFailureV3":r("WebBloksQPLUserFlowEndFlowFailureV3"),"bk.action.qpl.userflow.EndFlowSuccessV3":r("WebBloksQPLUserFlowEndFlowSuccessV3"),"bk.action.qpl.userflow.MarkErrorV3":r("WebBloksQPLUserFlowMarkErrorV3"),"bk.action.qpl.userflow.MarkPointV3":r("WebBloksQPLUserFlowMarkPointV3"),"bk.action.qpl.userflow.StartFlowV3":r("WebBloksQPLUserFlowStartFlowV3")};l.ACTIONS=e}),98);
__d("HasteSharedWebBloksComponents",[],(function(t,n,r,o,a,i){var e={};i.COMPONENTS=e}),66);
__d("LSAddToPendingJoinRequestsCount",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,t){var r=e.done,o=e.value;return r?n[0]=void 0:(t=o.item,n[0]=t.pendingJoinRequestsCount)})},function(r){return t.i64.neq(n[0],void 0)?t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(r){var o=r.update,a=r.item;return o({pendingJoinRequestsCount:t.i64.add(n[0],e[1])})}):t.resolve()}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxAddToPendingJoinRequestsCountStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSAcceptSinglePendingMemberRequest",["LSAddToPendingJoinRequestsCount","LSClearSingleCommunityMember","LSGetViewerFBID","LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.i64.neq(e[2],void 0)?t.sequence([function(r){return t.storedProcedure(n("LSAddToPendingJoinRequestsCount"),e[2],t.i64.cast([-1,4294967295]))},function(e){return r[0]=t.i64.cast([0,25])}]):t.resolve(r[0]=t.i64.cast([0,12]))},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return r[2]=new t.Map,r[2].set("target_user_id",e[1]),r[2].set("actor_id",r[1]),r[2].set("group_id",e[0]),r[2].set("thread_id",e[2]),r[2].set("source",r[0]),r[3]=r[2].get("actor_id"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),["community_accept_single_pending_member_request_action","_",t.i64.to_string(r[3])].join(""),t.i64.cast([0,568]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(r){return t.storedProcedure(n("LSClearSingleCommunityMember"),e[0],e[1])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxAcceptSinglePendingMemberRequestStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSAcceptSinglePendingMemberRequestStoredProcedure",["LSAcceptSinglePendingMemberRequest","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSAcceptSinglePendingMemberRequest"),a.groupId,a.targetUserId,a.threadId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSCoPresenceAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({ENTER:0,EXIT:1});i.default=e}),66);
__d("LSFetchCommunityJoinInfo",["LSIssueNewTask","LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("community_id",e[0]),r[0].set("thread_id",e[1]),r[1]=r[0].get("community_id"),r[2]=r[0].get("thread_id"),r[3]="_",r[4]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),["community_join_info_from_search",r[3],t.i64.to_string(r[1]),r[3],t.i64.to_string(r[2])].join(""),t.i64.cast([0,514]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(o){return r[5]=new t.Map,r[5].set("community_id",e[0]),r[5].set("thread_id",e[1]),r[6]=r[5].get("community_id"),r[7]=r[5].get("thread_id"),r[8]="_",r[9]=t.toJSON(r[5]),t.storedProcedure(n("LSIssueNewTask"),["fetch_cm_join_chaining_metadata",r[8],t.i64.to_string(r[6]),r[8],t.i64.to_string(r[7])].join(""),t.i64.cast([0,796]),r[9],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxFetchCommunityJoinInfoStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSFetchCommunityJoinInfoStoredProcedure",["LSFetchCommunityJoinInfo","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSFetchCommunityJoinInfo"),a.communityId,a.threadId,a.clientCallerId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSFetchDiscoverableChatsPersonalInboxInfo",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"fetch_discoverable_chats_personal_inbox_info",t.i64.cast([0,110019]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxFetchDiscoverableChatsPersonalInboxInfoStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSFetchDiscoverableChatsPersonalInboxInfoStoredProcedure",["LSFetchDiscoverableChatsPersonalInboxInfo","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSFetchDiscoverableChatsPersonalInboxInfo"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSHideBroadcastChannelFromPersonalInbox",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_id",e[0]),r[0].set("entry_point",""),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"hide_broadcast_channel_from_personal_inbox",t.i64.cast([0,110018]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxHideBroadcastChannelFromPersonalInboxStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSHideBroadcastChannelFromPersonalInboxStoredProcedure",["LSHideBroadcastChannelFromPersonalInbox","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSHideBroadcastChannelFromPersonalInbox"),a.threadId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSInsertScreenTimeRecordAndUploadToServer",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(321).add({recordId:void 0,startTimestampSec:e[0],endTimestampSec:e[1],timeZoneId:e[2]})},function(o){return r[0]=new t.Map,r[0].set("start_timestamp_sec",e[0]),r[0].set("end_timestamp_sec",e[1]),r[0].set("time_zone_id",e[2]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"insert_screen_time_record",t.i64.cast([0,710]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSFamilyCenterSupervisionInsertScreenTimeRecordAndUploadToServerStoredProcedure",e.__tables__=["screen_time"],a.exports=e}),null);
__d("LSInsertScreenTimeRecordAndUploadToServerStoredProcedure",["LSInsertScreenTimeRecordAndUploadToServer","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSInsertScreenTimeRecordAndUploadToServer"),a.startTimestampSec,a.endTimestampSec,a.timeZoneId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSIssueCommunityListFetch",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("next_page_cursor",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"fetch_community_list",t.i64.cast([0,713]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxIssueCommunityListFetchStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueCommunityListFetchStoredProcedure",["LSIssueCommunityListFetch","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSIssueCommunityListFetch"),a.nextPageCursor);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticRespondToAdminApprovalRequest",["LSAddParticipantIdToGroupThread","LSArrayGetObjectAt","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return e[2]?(r[3]=t.i64.of_int32(e[1].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(o){return r[4]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[4]).then(function(e){var t;return t=e,r[5]=t[0],r[6]=t[1],t})},function(o){return t.storedProcedure(n("LSAddParticipantIdToGroupThread"),e[0],r[5],t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,"",t.i64.cast([0,0]),t.i64.cast([0,20]),void 0,t.i64.cast([0,0]),!1,void 0,t.i64.cast([0,0]))}])}):t.resolve()):t.resolve()},function(o){return r[0]=t.i64.of_int32(e[1].length),t.i64.gt(r[0],t.i64.cast([0,0]))?t.loopAsync(r[0],function(o){return r[3]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[3]).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(n){return t.forEach(t.filter(t.db.table(26).fetch([[[e[0],r[4]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,r[4])}),function(e){return e.delete()})}])}):t.resolve()},function(o){return r[1]=new t.Map,r[1].set("thread_key",e[0]),r[1].set("contact_ids",e[1]),r[1].set("accepted",e[2]),r[2]=t.toJSON(r[1]),t.storedProcedure(n("LSIssueNewTask"),"respond_to_admin_approval_request",t.i64.cast([0,27]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticRespondToAdminApprovalRequestStoredProcedure",e.__tables__=["group_membership_approval_requests"],a.exports=e}),null);
__d("LSOptimisticRespondToAdminApprovalRequestStoredProcedure",["LSOptimisticRespondToAdminApprovalRequest","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticRespondToAdminApprovalRequest"),a.threadKey,a.contactIds,a.accepted);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticSetLimitSharing",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,o){var a=e.done,i=e.value;return a?r[0]=void 0:(o=i.item,t.sequence([function(e){return r[10]=o.metadata,r[10]!==void 0?t.sequence([function(e){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),r[10]).then(function(e){var t;return t=e,r[11]=t[0],t})},function(e){return r[12]=new t.Map,r[13]=r[11].keys(),r[14]=t.i64.of_int32(r[13].length),t.i64.gt(r[14],t.i64.cast([0,0]))?t.loopAsync(r[14],function(e){return r[15]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[13],r[15]).then(function(e){var t;return t=e,r[16]=t[0],r[17]=t[1],t})},function(e){return r[18]=r[11].get(r[16]),r[12].set(r[16],r[18])}])}):t.resolve()},function(e){return r[9]=r[12]}]):t.resolve((r[11]=new t.Map,r[9]=r[11]))},function(e){return r[0]=r[9]}]))})},function(n){return r[0]?r[2]=!1:r[2]=!0,r[2]||r[0].set("is_limit_sharing_enabled",e[1]),r[0]?r[3]=!1:r[3]=!0,r[3]?r[4]=void 0:(r[9]=t.toJSON(r[0]),r[4]=r[9]),t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(e){var t=e.update,n=e.item;return t({metadata:r[4]})})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[5]=t.i64.cast([0,1]):(n=a.item,r[10]=n.syncGroup,t.i64.neq(r[10],void 0)?r[9]=r[10]:r[9]=t.i64.cast([0,1]),r[5]=r[9])})},function(o){return r[7]=new t.Map,r[7].set("thread_key",e[0]),r[7].set("is_limit_sharing_enabled",e[1]),r[7].set("sync_group",r[5]),r[8]=t.toJSON(r[7]),t.storedProcedure(n("LSIssueNewTask"),"limit_sharing_setting",t.i64.cast([0,210002]),r[8],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticSetLimitSharingStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticSetLimitSharingStoredProcedure",["LSOptimisticSetLimitSharing","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticSetLimitSharing"),a.threadKey,a.isLimitSharingEnabled,a.syncGroup);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSPlatformClientStartLoadingEarly",["LSPlatformClient","LSPlatformClientInstances"],(function(t,n,r,o,a,i,l){"use strict";function e(e){try{r("LSPlatformClientInstances").getOrInit(e,o("LSPlatformClient").make);return}catch(e){return}}l.start=e}),98);
__d("LSRejectSinglePendingMemberRequest",["LSAddToPendingJoinRequestsCount","LSClearSingleCommunityMember","LSGetViewerFBID","LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.i64.neq(e[2],void 0)?t.sequence([function(r){return t.storedProcedure(n("LSAddToPendingJoinRequestsCount"),e[2],t.i64.cast([-1,4294967295]))},function(e){return r[0]=t.i64.cast([0,25])}]):t.resolve(r[0]=t.i64.cast([0,12]))},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return r[2]=new t.Map,r[2].set("target_user_id",e[1]),r[2].set("actor_id",r[1]),r[2].set("group_id",e[0]),r[2].set("thread_id",e[2]),r[2].set("source",r[0]),r[3]=r[2].get("actor_id"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),["community_reject_single_pending_member_request_action","_",t.i64.to_string(r[3])].join(""),t.i64.cast([0,569]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(r){return t.storedProcedure(n("LSClearSingleCommunityMember"),e[0],e[1])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxRejectSinglePendingMemberRequestStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSRejectSinglePendingMemberRequestStoredProcedure",["LSRejectSinglePendingMemberRequest","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSRejectSinglePendingMemberRequest"),a.groupId,a.targetUserId,a.threadId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSReportAndFetchAggregatedCoPresenceCountsForCommunityChat",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.resolve(r)}e.__sproc_name__="LSCommunitiesMessagingPresenceReportAndFetchAggregatedCoPresenceCountsForCommunityChatStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSReportAndFetchAggregatedCoPresenceCountsForCommunityChatStoredProcedure",["LSReportAndFetchAggregatedCoPresenceCountsForCommunityChat","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSReportAndFetchAggregatedCoPresenceCountsForCommunityChat"),a.threadId,a.action,a.folderId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSSendPlatformReferralEvent",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("page_id",e[0]),r[0].set("ref",e[1]),r[0].set("channel_id",e[2]),r[0].set("source",e[3]),r[0].set("metadata",e[4]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"platform_send_postback_referral_event",t.i64.cast([0,109]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxSendPlatformReferralEventStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSSendPlatformReferralEventStoredProcedure",["LSSendPlatformReferralEvent","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSendPlatformReferralEvent"),a.pageId,a.ref,a.channelId,a.source,a.metadata);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSShowBroadcastChannelInPersonalInbox",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_id",e[0]),r[0].set("entry_point",""),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"show_broadcast_channel_in_personal_inbox",t.i64.cast([0,110017]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxShowBroadcastChannelInPersonalInboxStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSShowBroadcastChannelInPersonalInboxStoredProcedure",["LSShowBroadcastChannelInPersonalInbox","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSShowBroadcastChannelInPersonalInbox"),a.threadId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSSupervisionEnabledForScreenTime",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.count(t.filter(t.db.table(319).fetch(),function(e){return t.i64.eq(e.targetUserType,t.i64.cast([0,2]))})).then(function(e){return n[0]=e})},function(e){return t.count(t.filter(t.db.table(320).fetch(),function(e){return t.i64.eq(e.supervisionStatus,t.i64.cast([0,1]))})).then(function(e){return n[1]=e})},function(e){return r[0]=t.i64.gt(n[1],t.i64.cast([0,0]))||t.i64.gt(n[0],t.i64.cast([0,0]))}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSFamilyCenterSupervisionSupervisionEnabledForScreenTimeStoredProcedure",e.__tables__=["supervision_edge","supervision_metadata"],a.exports=e}),null);
__d("LSSupervisionEnabledForScreenTimeStoredProcedure",["LSSupervisionEnabledForScreenTime","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t){var a=t.storedProcedure(r("LSSupervisionEnabledForScreenTime"));return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}l.default=s}),98);
__d("LSUpdateUserSettingsForCommunities",["LSArrayGetObjectAt","LSGetViewerFBID","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.i64.of_int32(e[0].length),t.i64.gt(r[0],t.i64.cast([0,0]))?t.loopAsync(r[0],function(o){return r[5]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[0],r[5]).then(function(e){var t;return t=e,r[6]=t[0],r[7]=t[1],t})},function(e){return r[8]=r[6].get("community_id"),r[9]=r[6].get("is_hidden"),t.forEach(t.db.table(162).fetch([[[r[8]]]]),function(e){var t=e.update,n=e.item;return t({isHidden:r[9]})})}])}):t.resolve()},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return r[2]=new t.Map,r[2].set("actor_id",r[1]),r[2].set("updates",e[0]),r[3]=r[2].get("actor_id"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),["update_user_settings_for_communities","_",t.i64.to_string(r[3])].join(""),t.i64.cast([0,465]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateUserSettingsForCommunitiesStoredProcedure",e.__tables__=["community_folders"],a.exports=e}),null);
__d("LSUpdateUserSettingsForCommunitiesStoredProcedure",["LSSynchronousPromise","LSUpdateUserSettingsForCommunities","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSUpdateUserSettingsForCommunities"),a.updates);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSVerifyCommunityFolderExists",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.i64.neq(e[1],void 0)?t.sequence([function(n){return t.db.table(162).fetch([[[e[1]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=!0:(n=a.item,t.sequence([function(e){return t.db.table(9).fetch([[[n.folderId]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[4]=!0:(t=o.item,r[4]=!1)})},function(e){return r[2]=r[4]}]))})},function(e){return r[0]=r[2]}]):t.sequence([function(n){return t.db.table(162).fetch([[[e[0]]],"byFbGroupId"]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=!0:(n=a.item,t.sequence([function(e){return t.db.table(9).fetch([[[n.folderId]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[4]=!0:(t=o.item,r[4]=!1)})},function(e){return r[2]=r[4]}]))})},function(e){return r[0]=r[2]}])},function(o){return r[1]=!1,r[0]||r[1]?(r[2]=new t.Map,r[2].set("fb_group_id",e[0]),r[2].set("folder_id",e[1]),r[3]=r[2].get("fb_group_id"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),t.i64.to_string(r[3]),t.i64.cast([0,420]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyCommunityFolderExistsStoredProcedure",e.__tables__=["community_folders","threads"],a.exports=e}),null);
__d("LSVerifyCommunityFolderExistsStoredProcedure",["LSSynchronousPromise","LSVerifyCommunityFolderExists","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyCommunityFolderExists"),a.fbGroupId,a.folderId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSVerifyThreadsActivityStatus",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("server_mode",e[1]),r[0].set("from_timestamp_ms",e[2]),r[0].set("threads",e[3]),r[0].set("session_id",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"verify_threads_activity_status",t.i64.cast([0,648]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxVerifyThreadsActivityStatusStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSVerifyThreadsActivityStatusStoredProcedure",["LSSynchronousPromise","LSVerifyThreadsActivityStatus","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSVerifyThreadsActivityStatus"),a.sessionId,a.serverMode,a.fromTimestampMs,a.threads);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MWInboxInfoSharedContentFilePreview.react",["fbt","MDSSvgDocumentCompleteIcon.react","MWChatMessageId","MWXCircleButton.react","MWXIconExclamationMarkCircle","MWXIconRefreshAlt","MWXIconStrict.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.isError,a=e.isRetryableError,i=e.messageID,l=e.onRetry;if(n===!0){var c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c={className:"x6s0dn4 xgx9qek x1c9tyrk xeusxvb x1pahc9y x1ertn4p x78zum5 x10w6t97 xl56j7k x1td3qas"},t[0]=c):c=t[0];var d;return t[1]!==a||t[2]!==l?(d=u.jsx("div",babelHelpers.extends({},c,{children:a===!0?u.jsx(r("MWXCircleButton.react"),{"aria-label":s._(/*BTDS*/"Retry"),color:"primary",icon:r("MWXIconRefreshAlt"),onPress:l,size:24,type:"normal"}):u.jsx("div",{children:u.jsx(r("MWXIconStrict.react"),{color:"primary",icon:r("MWXIconExclamationMarkCircle"),size:20})})})),t[1]=a,t[2]=l,t[3]=d):d=t[3],d}var m;t[4]!==i?(m=i!=null?o("MWChatMessageId").getMessageId(i):void 0,t[4]=i,t[5]=m):m=t[5];var p=m,_;return t[6]!==p?(_=p==null?null:u.jsx(r("MDSSvgDocumentCompleteIcon.react"),{color:"primary",size:24}),t[6]=p,t[7]=_):_=t[7],_}l.default=c}),226);
__d("MWMediaGalleryRenderQpl",["MWMediaRenderQplUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MWMediaRenderQplUtils").useCommonMediaRenderQplForAttachment(e,t,"gallery_view");return n.addAnnotations({string:{message_age_bucket:o("MWMediaRenderQplUtils").calculateDiffBucketFromTimestamp(e.timestampMs)}}),n}l.useMediaGalleryRenderQpl=e}),98);
__d("MWV2SecureFileAttachmentErrorGalleryPlaceholder.react",["fbt","BaseMiddot.react","MWFileUtils","MWInboxInfoSharedContentFilePreview.react","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","MWXTextPairing.react","MWXTooltip.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect,d={contentRowItem:{paddingTop:"xz9dl7a",paddingInlineEnd:"xpdmqnj",paddingBottom:"xsag5q8",paddingInlineStart:"x1g0dm76",$$css:!0},fileRow:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",$$css:!0},iconRowItem:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xdd8jsf",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x889kno",paddingInlineEnd:"x2vl965",paddingBottom:"x1a8lsjc",paddingInlineStart:"xe2zdcy",width:"xvni27",$$css:!0}};function m(e){var t,n=o("react-compiler-runtime").c(28),a=e.file,i=e.isRetryableError,l=e.mediaRenderQpl,m=e.onRetry,p=(t=a.filename)!=null?t:o("MWFileUtils").PLACEHOLDER_FILENAME,_;n[0]!==p?(_=p.toString(),n[0]=p,n[1]=_):_=n[1];var f=_,g;n[2]!==a?(g=o("MWFileUtils").getFileSize(a),n[2]=a,n[3]=g):g=n[3];var h=g,y,C;n[4]!==i||n[5]!==l?(y=function(){l==null||l.addPoint("render-file-error-placeholder",{bool:{is_retryable_error:i}})},C=[l,i],n[4]=i,n[5]=l,n[6]=y,n[7]=C):(y=n[6],C=n[7]),c(y,C);var b;n[8]===Symbol.for("react.memo_cache_sentinel")?(b=s._(/*BTDS*/"Couldn't download"),n[8]=b):b=n[8];var v;n[9]===Symbol.for("react.memo_cache_sentinel")?(v=s._(/*BTDS*/"Couldn't download"),n[9]=v):v=n[9];var S;n[10]!==i||n[11]!==m?(S=i&&u.jsxs(u.Fragment,{children:[u.jsx(r("BaseMiddot.react"),{}),u.jsx(r("MWXLink.react"),{onClick:m,weight_DEPRECATED:"medium",children:s._(/*BTDS*/"Retry")})]}),n[10]=i,n[11]=m,n[12]=S):S=n[12];var R;n[13]!==S?(R=u.jsxs(r("MWXText.react"),{color:"tooltip",type:"meta4",children:[v,S]}),n[13]=S,n[14]=R):R=n[14];var L;n[15]===Symbol.for("react.memo_cache_sentinel")?(L={className:"x6s0dn4 x78zum5 x87ps6o"},n[15]=L):L=n[15];var E;n[16]!==i||n[17]!==m?(E=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",xstyle:d.iconRowItem,children:u.jsx(r("MWInboxInfoSharedContentFilePreview.react"),{isError:!0,isRetryableError:i,onRetry:m})}),n[16]=i,n[17]=m,n[18]=E):E=n[18];var k;n[19]!==f||n[20]!==h?(k=u.jsx(r("MWXRowItem.react"),{expanding:!0,xstyle:d.contentRowItem,children:u.jsx(r("MWXTextPairing.react"),{body:h,bodyColor:"disabled",bodyLineLimit:1,headline:f,headlineColor:"disabled",headlineLineLimit:3,level:4})}),n[19]=f,n[20]=h,n[21]=k):k=n[21];var I;n[22]!==E||n[23]!==k?(I=u.jsx("div",babelHelpers.extends({},L,{children:u.jsxs(r("MWXRow.react"),{expanding:!0,verticalAlign:"center",xstyle:d.fileRow,children:[E,k]})})),n[22]=E,n[23]=k,n[24]=I):I=n[24];var T;return n[25]!==I||n[26]!==R?(T=u.jsx(r("MWXTooltip.react"),{label:b,tooltip:R,children:I}),n[25]=I,n[26]=R,n[27]=T):T=n[27],T}l.default=m}),226);
__d("MAWSecureInboxInfoSharedContentFile.react",["CometPlaceholder.react","MAWFilePressable.react","MAWMediaItemStateHandlerContentWrapper.react","MWInboxInfoSharedContentFilePreview.react","MWMediaGalleryRenderQpl","MWV2AttachmentErrorPlaceholderV2.react","MWV2SecureFileAttachmentErrorGalleryPlaceholder.react","MWXRow.react","MWXRowItem.react","MWXTextPairing.react","MediaDownloadStatusIconSize","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=72,c=350,d={contentRowItem:{paddingTop:"xz9dl7a",paddingInlineEnd:"xpdmqnj",paddingBottom:"xsag5q8",paddingInlineStart:"x1g0dm76",$$css:!0},errorPlaceholder:{borderStartStartRadius:"x12l2aii",borderStartEndRadius:"x1mbk4o",borderEndEndRadius:"x14vvt0a",borderEndStartRadius:"x1w3ol1v",$$css:!0},fileRow:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",$$css:!0},iconRowItem:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xdd8jsf",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xyinxu5",paddingInlineEnd:"x1pic42t",paddingBottom:"x1g2khh7",paddingInlineStart:"x1onr9mi",width:"xvni27",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(12),n=e.file,a=e.onPress,i=e.threadType,l=o("MWMediaGalleryRenderQpl").useMediaGalleryRenderQpl(n,i),d;t[0]!==n||t[1]!==l?(d=function(t,o){return s.jsx(r("MWV2SecureFileAttachmentErrorGalleryPlaceholder.react"),{file:n,isRetryableError:t,mediaRenderQpl:l,onRetry:o})},t[0]=n,t[1]=l,t[2]=d):d=t[2];var m=d,_;t[3]!==n||t[4]!==l||t[5]!==a?(_=function(t){return s.jsx(r("CometPlaceholder.react"),{fallback:t("MAWSecureInboxInfoSharedContentFileV2.Suspense",!0),name:"MAWSecureInboxInfoSharedContentFileV2.Suspense",children:s.jsx(p,{file:n,mediaRenderQpl:l,onPress:a})})},t[3]=n,t[4]=l,t[5]=a,t[6]=_):_=t[6];var f=_,g;return t[7]!==m||t[8]!==n||t[9]!==l||t[10]!==f?(g=s.jsx(r("MAWMediaItemStateHandlerContentWrapper.react"),{dbAttachment:n,descriptionForLogging:"MAWSecureInboxInfoSharedContentFileV2",errorComponentRenderer:m,mediaRenderQpl:l,placeholderHeight:u,placeholderWidth:c,successfulComponentRenderer:f,triggerUIView:"gallery"}),t[7]=m,t[8]=n,t[9]=l,t[10]=f,t[11]=g):g=t[11],g}function p(e){var t=o("react-compiler-runtime").c(8),n=e.file,a=e.mediaRenderQpl,i=e.onPress,l;t[0]!==n||t[1]!==a?(l=function(){return s.jsx(r("MWV2AttachmentErrorPlaceholderV2.react"),{attachment:n,height:u,iconSize:r("MediaDownloadStatusIconSize").Large,isRetryableError:!1,mediaRenderQpl:a,width:c,xstyle:d.errorPlaceholder})},t[0]=n,t[1]=a,t[2]=l):l=t[2];var m;return t[3]!==n||t[4]!==a||t[5]!==i||t[6]!==l?(m=s.jsx(r("MAWFilePressable.react"),{file:n,mediaRenderQpl:a,onPress:i,renderUnsupportedAttachment:l,children:_}),t[3]=n,t[4]=a,t[5]=i,t[6]=l,t[7]=m):m=t[7],m}function _(e){var t=e.filename,n=e.messageID,o=e.size;return s.jsxs(r("MWXRow.react"),{expanding:!0,paddingTop:0,verticalAlign:"center",xstyle:d.fileRow,children:[s.jsx(r("MWXRowItem.react"),{xstyle:d.iconRowItem,children:s.jsx(r("MWInboxInfoSharedContentFilePreview.react"),{messageID:n})}),s.jsx(r("MWXRowItem.react"),{expanding:!0,xstyle:d.contentRowItem,children:s.jsx(r("MWXTextPairing.react"),{body:o,bodyColor:"secondary",headline:t,headlineLineLimit:1,level:4})})]})}_.displayName=_.name+" [from "+i.id+"]",l.default=m}),98);
__d("MWSharedContentCommonFbt",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=s._(/*BTDS*/"If you can't find the media you're looking for, try using the Messenger mobile app.");l.armadilloMediaGalleryMissingMediaNoticeFbt=e}),226);
__d("MWInboxInfoSharedContentEmptyTab.react",["fbt","LSMessagingThreadTypeUtil","LSThreadTitle.react","MWSharedContentCommonFbt","MWXColumnItem.react","MWXText.react","ReQL","ReQLSuspense","deferredLoadComponent","react","react-compiler-runtime","requireDeferred","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=r("deferredLoadComponent")(r("requireDeferred")("MWInboxMediaGalleryEBRestoreUpsell.react").__setRef("MWInboxInfoSharedContentEmptyTab.react"));function m(e){switch(e){case"media":return"Photos and videos";case"files":return"Files";case"links":return"Links"}}function p(e,t,n){var a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(n.threadType),i=a&&t==="media";if(i&&!e)return o("MWSharedContentCommonFbt").armadilloMediaGalleryMissingMediaNoticeFbt;var l=m(t);return o("LSMessagingThreadTypeUtil").isDiscoverableChannel(n.threadType)?s._(/*BTDS*/"_j{\"Photos and videos\":\"Photos and videos shared in this channel will appear here.\",\"Files\":\"Files shared in this channel will appear here.\",\"Links\":\"Links shared in this channel will appear here.\"}",[s._enum(l,{"Photos and videos":"Photos and videos",Files:"Files",Links:"Links"})]):o("LSMessagingThreadTypeUtil").isOneToOne(n.threadType)?s._(/*BTDS*/"_j{\"Photos and videos\":\"Photos and videos that you exchange with {name} will appear here.\",\"Files\":\"Files that you exchange with {name} will appear here.\",\"Links\":\"Links that you exchange with {name} will appear here.\"}",[s._enum(l,{"Photos and videos":"Photos and videos",Files:"Files",Links:"Links"}),s._param("name",c.jsx(r("LSThreadTitle.react"),{thread:n}))]):s._(/*BTDS*/"_j{\"Photos and videos\":\"Photos and videos that you exchange with this group will appear here.\",\"Files\":\"Files that you exchange with this group will appear here.\",\"Links\":\"Links that you exchange with this group will appear here.\"}",[s._enum(l,{"Photos and videos":"Photos and videos",Files:"Files",Links:"Links"})])}function _(t){var n=o("react-compiler-runtime").c(32),a=t.backupState,l=t.contentType,u=t.threadKey,m=(e||(e=r("useReStore")))(),_;n[0]!==m.tables.threads||n[1]!==u?(_=function(){return o("ReQL").fromTableAscending(m.tables.threads,["threadType","threadKey","threadName"]).getKeyRange(u)},n[0]=m.tables.threads,n[1]=u,n[2]=_):_=n[2];var f;n[3]!==m||n[4]!==u?(f=[m,u],n[3]=m,n[4]=u,n[5]=f):f=n[5];var g=o("ReQLSuspense").useFirst(_,f,i.id+":117");if(g==null)return null;var h,y,C;if(n[6]!==l||n[7]!==g){var b=o("LSMessagingThreadTypeUtil").isArmadilloSecure(g.threadType),v=b&&l==="media",S=b&&l==="files";y=v||S;var R;n[11]!==l?(R=s._(/*BTDS*/"_j{\"media\":\"No media\",\"files\":\"No files\",\"links\":\"No links\"}",[s._enum(l,{media:"media",files:"files",links:"links"})]),n[11]=l,n[12]=R):R=n[12],h=R,C=p(y,l,g),n[6]=l,n[7]=g,n[8]=h,n[9]=y,n[10]=C}else h=n[8],y=n[9],C=n[10];var L=C,E=a===4,k;n[13]!==y?(k={0:{className:"x1g7c3p3 x1n2onr6"},1:{className:"xy8btvn x1n2onr6"}}[!!y<<0],n[13]=y,n[14]=k):k=n[14];var I;n[15]===Symbol.for("react.memo_cache_sentinel")?(I={className:"xr1yuqi x11t971q x4ii5y1 xvc5jky xwib8y2"},n[15]=I):I=n[15];var T;n[16]!==h||n[17]!==y?(T=c.jsx("div",babelHelpers.extends({},I,{children:y?c.jsx(r("MWXText.react"),{align:"center",color:"primary",type:"headlineEmphasized4",children:h}):c.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:"body2",children:h})})),n[16]=h,n[17]=y,n[18]=T):T=n[18];var D;n[19]===Symbol.for("react.memo_cache_sentinel")?(D={className:"xr1yuqi x11t971q x4ii5y1 xvc5jky xtxm24l x1y1aw1k xyri2b xwib8y2 x1c1uobl"},n[19]=D):D=n[19];var x=y?"body4":"body3",$;n[20]!==L||n[21]!==x?($=c.jsx("div",babelHelpers.extends({},D,{children:c.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:x,children:L})})),n[20]=L,n[21]=x,n[22]=$):$=n[22];var P;n[23]!==l||n[24]!==E||n[25]!==y?(P=y&&E&&c.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:12,paddingVertical:16,children:E&&c.jsx(d,{contentType:l})}),n[23]=l,n[24]=E,n[25]=y,n[26]=P):P=n[26];var N;return n[27]!==P||n[28]!==k||n[29]!==T||n[30]!==$?(N=c.jsxs("div",babelHelpers.extends({},k,{children:[T,$,P]})),n[27]=P,n[28]=k,n[29]=T,n[30]=$,n[31]=N):N=n[31],N}l.default=_}),226);
__d("MWInboxInfoSharedContentFile.react",["fbt","I64","MWFilePressable.react","MWInboxInfoSharedContentFilePreview.react","MWXRow.react","MWXRowItem.react","MWXTextPairing.react","formatFileSize","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d={contentRowItem:{paddingTop:"xz9dl7a",paddingInlineEnd:"xpdmqnj",paddingBottom:"xsag5q8",paddingInlineStart:"x1g0dm76",$$css:!0},filePressable:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},fileRow:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",$$css:!0},iconRowItem:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xdd8jsf",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xyinxu5",paddingInlineEnd:"x1pic42t",paddingBottom:"x1g2khh7",paddingInlineStart:"x1onr9mi",width:"xvni27",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(18),n=e.attachmentID,a=e.fileName,i=e.fileSize,l=e.messageID,m=e.onPress,p=e.url,_;t[0]!==a?(_=a!=null?a:s._(/*BTDS*/"File"),t[0]=a,t[1]=_):_=t[1];var f=_,g;if(t[2]!==i){var h=i!=null?(u||(u=o("I64"))).to_int32(i):void 0;g=h!=null?r("formatFileSize")(h):null,t[2]=i,t[3]=g}else g=t[3];var y=g,C;t[4]!==l?(C=c.jsx(r("MWXRowItem.react"),{xstyle:d.iconRowItem,children:c.jsx(r("MWInboxInfoSharedContentFilePreview.react"),{messageID:l})}),t[4]=l,t[5]=C):C=t[5];var b;t[6]!==y||t[7]!==f?(b=c.jsx(r("MWXRowItem.react"),{expanding:!0,xstyle:d.contentRowItem,children:c.jsx(r("MWXTextPairing.react"),{body:y,bodyColor:"secondary",headline:f,headlineLineLimit:1,level:4})}),t[6]=y,t[7]=f,t[8]=b):b=t[8];var v;t[9]!==C||t[10]!==b?(v=c.jsxs(r("MWXRow.react"),{expanding:!0,paddingTop:0,verticalAlign:"center",xstyle:d.fileRow,children:[C,b]}),t[9]=C,t[10]=b,t[11]=v):v=t[11];var S;return t[12]!==n||t[13]!==l||t[14]!==m||t[15]!==v||t[16]!==p?(S=c.jsx(r("MWFilePressable.react"),{attachmentID:n,mediaRenderQpl:null,messageID:l,onPress:m,url:p,xstyle:d.filePressable,children:v}),t[12]=n,t[13]=l,t[14]=m,t[15]=v,t[16]=p,t[17]=S):S=t[17],S}l.default=m}),226);
__d("MWInboxInfoSharedContentTabWithFooter.react",["MWXColumn.react","MWXColumnItem.react","MWXScrollableArea.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={content:{flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(8),n=e.children,a=e.footer,i=e.shouldShowFooter,l;t[0]!==n?(l=s.jsx(r("MWXColumnItem.react"),{xstyle:u.content,children:s.jsx(r("MWXScrollableArea.react"),{expanding:!0,children:s.jsx("div",{children:n})})}),t[0]=n,t[1]=l):l=t[1];var c;t[2]!==a||t[3]!==i?(c=i?s.jsx(r("MWXColumnItem.react"),{paddingHorizontal:0,paddingVertical:8,children:a}):null,t[2]=a,t[3]=i,t[4]=c):c=t[4];var d;return t[5]!==l||t[6]!==c?(d=s.jsxs(r("MWXColumn.react"),{expanding:!0,children:[l,c]}),t[5]=l,t[6]=c,t[7]=d):d=t[7],d}l.default=c}),98);
__d("MWInboxInfoSharedContentTheme",[],(function(t,n,r,o,a,i){"use strict";var e={divider:"var(--hover-overlay)"},l={divider:"var(--hover-overlay)"},s={dark:l,light:e,type:"VARIABLES"};i.config=s}),66);
__d("MWXColumnHideable.react",["cr:2398","cr:5141","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["hidden"],u,c=u||(u=o("react")),d=u.unstable_Activity;function m(t){var a=o("react-compiler-runtime").c(15),i,l;a[0]!==t?(l=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var u=r("qex")._("289");if(u===!0){var m,p;if(a[3]!==i){var _=i;m=_.hidden,p=babelHelpers.objectWithoutPropertiesLoose(_,s),a[3]=i,a[4]=m,a[5]=p}else m=a[4],p=a[5];var f=m===!0?"hidden":"visible",g;a[6]!==l||a[7]!==p?(g=c.jsx(n("cr:2398"),babelHelpers.extends({},p,{ref:l})),a[6]=l,a[7]=p,a[8]=g):g=a[8];var h;return a[9]!==f||a[10]!==g?(h=c.jsx(d,{mode:f,children:g}),a[9]=f,a[10]=g,a[11]=h):h=a[11],h}var y;return a[12]!==i||a[13]!==l?(y=c.jsx(n("cr:5141"),babelHelpers.extends({},i,{ref:l})),a[12]=i,a[13]=l,a[14]=y):y=a[14],y}l.default=m}),98);
__d("MWInboxInfoFileGallery.react",["BaseTheme.react","CometErrorBoundary.react","CometInfiniteScrollTrigger.react","FDSProgressIndicator.react","I64","LSMediaUrlAttachment","LSMessagingThreadTypeUtil","MAWSecureInboxInfoSharedContentFile.react","MWChatMessageId","MWInboxInfoSharedContentEmptyTab.react","MWInboxInfoSharedContentFile.react","MWInboxInfoSharedContentTabWithFooter.react","MWInboxInfoSharedContentTheme","MWXColumnHideable.react","MWXColumnItem.react","MessengerWebUXLogger","deferredLoadComponent","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=["threadKey"],s,u,c=s||(s=o("react")),d=r("deferredLoadComponent")(r("requireDeferred")("MWInboxMediaGalleryEBRestoreUpsell.react").__setRef("MWInboxInfoFileGallery.react")),m=r("deferredLoadComponent")(r("requireDeferred")("MWInboxMediaGalleryEBRestoreSyncBanner.react").__setRef("MWInboxInfoFileGallery.react")),p={progressIndicator:{display:"x78zum5",justifyContent:"xl56j7k",marginTop:"x1xmf6yo",paddingTop:"x123j3cw",paddingInlineEnd:"x1gabggj",paddingBottom:"xs9asl8",paddingInlineStart:"xaso8d8",$$css:!0}};function _(t){var n=o("react-compiler-runtime").c(17),a=t.backupState,i=t.files,l=t.hasMore,s=t.isRestoringFromEB,u=t.threadType,d,m;n[0]!==t?(m=t.threadKey,d=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=d,n[2]=m):(d=n[1],m=n[2]);var p;n[3]!==m||n[4]!==u?(p={eventName:"file_gallery_rendered",threadKey:m,threadType:u},n[3]=m,n[4]=u,n[5]=p):p=n[5];var _=r("MessengerWebUXLogger").useImpressionLoggerRef(p),g;n[6]===Symbol.for("react.memo_cache_sentinel")?(g={className:"x78zum5 xdt5ytf x1iyjqo2 xs83m0k x2lwn1j xf7dkkf xv54qhq"},n[6]=g):g=n[6];var h;n[7]!==d||n[8]!==a||n[9]!==i.length||n[10]!==l||n[11]!==s||n[12]!==m?(h=i.length===0&&!l&&s!==!0?c.jsx(r("MWInboxInfoSharedContentEmptyTab.react"),{backupState:a,contentType:"files",threadKey:m}):c.jsx(f,babelHelpers.extends({isRestoringFromEB:s},d,{backupState:a,threadKey:m})),n[7]=d,n[8]=a,n[9]=i.length,n[10]=l,n[11]=s,n[12]=m,n[13]=h):h=n[13];var y;return n[14]!==_||n[15]!==h?(y=c.jsx("div",babelHelpers.extends({},g,{ref:_,children:h})),n[14]=_,n[15]=h,n[16]=y):y=n[16],y}function f(e){var t=o("react-compiler-runtime").c(32),n=e.backupState,a=e.files,i=e.hasMore,l=e.isLoading,s=e.isRestoringFromEB,_=e.onLoadMore,f=e.onPressFile,h=e.threadKey,y=e.threadType,C=n===4,b;t[0]!==y?(b=o("LSMessagingThreadTypeUtil").isArmadilloSecure(y),t[0]=y,t[1]=b):b=t[1];var v=b,S=r("MessengerWebUXLogger").useInteractionLogger(),R;t[2]!==C||t[3]!==s||t[4]!==v?(R=v===!0&&c.jsxs(c.Fragment,{children:[C&&c.jsx(r("CometErrorBoundary.react"),{fallback:g,children:c.jsx(d,{contentType:"files"})}),s===!0&&c.jsx(m,{contentType:"files"})]}),t[2]=C,t[3]=s,t[4]=v,t[5]=R):R=t[5];var L=a.length===0&&s===!0,E;if(t[6]!==a||t[7]!==v||t[8]!==S||t[9]!==f||t[10]!==h||t[11]!==y){var k;t[13]!==v||t[14]!==S||t[15]!==f||t[16]!==h||t[17]!==y?(k=function(t){return v&&(u||(u=o("I64"))).equal(t.threadKey,h)?c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MAWSecureInboxInfoSharedContentFile.react"),{file:t,onPress:function(){S==null||S({eventName:"open_file_from_gallery",threadType:y})},threadType:y})},t.messageId):c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWInboxInfoSharedContentFile.react"),{attachmentID:t.attachmentFbid,fileName:t.filename,fileSize:t.filesize,messageID:o("MWChatMessageId").makeSent((u||(u=o("I64"))).to_string(t.threadKey),t.messageId,u.to_string(t.timestampMs)),onPress:function(){S==null||S({eventName:"open_file_from_gallery",threadType:y}),f!=null&&f()},url:o("LSMediaUrlAttachment").playableUrl(t)},t.attachmentFbid)},t.attachmentFbid)},t[13]=v,t[14]=S,t[15]=f,t[16]=h,t[17]=y,t[18]=k):k=t[18],E=a.map(k),t[6]=a,t[7]=v,t[8]=S,t[9]=f,t[10]=h,t[11]=y,t[12]=E}else E=t[12];var I;t[19]===Symbol.for("react.memo_cache_sentinel")?(I=c.jsx(r("FDSProgressIndicator.react"),{size:"default"}),t[19]=I):I=t[19];var T;t[20]!==i||t[21]!==l||t[22]!==_?(T=c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("CometInfiniteScrollTrigger.react"),{hasMore:i,isLoading:l,onLoadMore:_,xstyle:p.progressIndicator,children:I})},"infinite_scroll_trigger"),t[20]=i,t[21]=l,t[22]=_,t[23]=T):T=t[23];var D;t[24]!==L||t[25]!==E||t[26]!==T?(D=c.jsx(r("BaseTheme.react"),{config:o("MWInboxInfoSharedContentTheme").config,children:c.jsxs(r("MWXColumnHideable.react"),{hasDividers:!0,hidden:L,paddingVertical:8,spacing:20,children:[E,T]})}),t[24]=L,t[25]=E,t[26]=T,t[27]=D):D=t[27];var x;return t[28]!==v||t[29]!==R||t[30]!==D?(x=c.jsx(r("MWInboxInfoSharedContentTabWithFooter.react"),{footer:R,shouldShowFooter:v,children:D}),t[28]=v,t[29]=R,t[30]=D,t[31]=x):x=t[31],x}function g(){return null}l.default=_}),98);
__d("useMAWLoadMoreCutoverThreadFileAttachments",["MAWDbMsg","MWSharedAttachmentsSectionHooks","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMAWLoadMoreThreadSharedAttachments","useMWMediaLoadingQplLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e,t,n,a,i,l,s){var u=o("react-compiler-runtime").c(55),d=o("MWSharedAttachmentsSectionHooks").useQueryFileAttachments(e),m=d[0],p=d[1],_=d[2],f=d[3],g=d[4],h;u[0]!==(_==null?void 0:_.lastLoadedMessageId)?(h=(_==null?void 0:_.lastLoadedMessageId)!=null?o("MAWDbMsg").toMsgId(_==null?void 0:_.lastLoadedMessageId):void 0,u[0]=_==null?void 0:_.lastLoadedMessageId,u[1]=h):h=u[1];var y=h,C=g!=null?g:!0,b;u[2]!==a||u[3]!==n?(b={entrypoint:a,threadType:n},u[2]=a,u[3]=n,u[4]=b):b=u[4];var v=r("useMWMediaLoadingQplLogger")(b),S;u[5]!==v?(S=function(){v.logLoadMediaStart({isCutoverThread:!0,isPreCutoverMedia:!1})},u[5]=v,u[6]=S):S=u[6];var R=S,L=y!=null?y:void 0,E;u[7]!==R||u[8]!==v?(E=babelHelpers.extends({},v,{logLoadMediaStart:R}),u[7]=R,u[8]=v,u[9]=E):E=u[9];var k;u[10]!==g||u[11]!==i||u[12]!==f||u[13]!==s||u[14]!==e||u[15]!==L||u[16]!==E?(k={earliestLoadedMediaMessageId:L,hasMoreBefore:g,mediaGalleryGroup:i,minTimestampMs:f,pageSize:s,qplLogger:E,threadKey:e},u[10]=g,u[11]=i,u[12]=f,u[13]=s,u[14]=e,u[15]=L,u[16]=E,u[17]=k):k=u[17];var I=r("useMAWLoadMoreThreadSharedAttachments")(k),T=o("MWSharedAttachmentsSectionHooks").useQueryFileAttachments(t),D=T[0],x=T[2],$=T[4],P=$!=null?$:!1,N;u[18]!==v?(N=function(){v.logLoadMediaStart({isCutoverThread:!0,isPreCutoverMedia:!0})},u[18]=v,u[19]=N):N=u[19];var M=N,w=r("useLoadMoreThreadSharedAttachments.react")(p,t,M),A;u[20]!==_||u[21]!==m||u[22]!==C||u[23]!==I||u[24]!==v.logLoadMediaCancel||u[25]!==v.logLoadMediaSuccess?(A={attachmentsRange:_,hasMore:C,loadMore:I,logLoadMediaCancel:v.logLoadMediaCancel,logLoadMediaSuccess:v.logLoadMediaSuccess,media:m},u[20]=_,u[21]=m,u[22]=C,u[23]=I,u[24]=v.logLoadMediaCancel,u[25]=v.logLoadMediaSuccess,u[26]=A):A=u[26];var F=o("MWSharedAttachmentsSectionHooks").useLoader(A),O=F[0],B=F[1],W=F[2],q=C||O,U;u[27]!==x||u[28]!==D||u[29]!==P||u[30]!==w||u[31]!==v.logLoadMediaCancel||u[32]!==v.logLoadMediaSuccess||u[33]!==q?(U={attachmentsRange:x,hasMore:P,loadMore:w,logLoadMediaCancel:v.logLoadMediaCancel,logLoadMediaSuccess:v.logLoadMediaSuccess,media:D,skipInitialLoad:q},u[27]=x,u[28]=D,u[29]=P,u[30]=w,u[31]=v.logLoadMediaCancel,u[32]=v.logLoadMediaSuccess,u[33]=q,u[34]=U):U=u[34];var V=o("MWSharedAttachmentsSectionHooks").useLoader(U),H=V[0],G=V[1],z=V[2];if(C||O||l===!0){var j;return u[35]!==W||u[36]!==m||u[37]!==C||u[38]!==O||u[39]!==B?(j={attachments:m,completedFirstLoad:W,hasMore:C,isLoadingMore:O,onLoadMore:B},u[35]=W,u[36]=m,u[37]=C,u[38]=O,u[39]=B,u[40]=j):j=u[40],j}else if(P||H){var K;u[41]!==D||u[42]!==m?(K=m.concat(D),u[41]=D,u[42]=m,u[43]=K):K=u[43];var Q;return u[44]!==z||u[45]!==P||u[46]!==H||u[47]!==G||u[48]!==K?(Q={attachments:K,completedFirstLoad:z,hasMore:P,isLoadingMore:H,onLoadMore:G},u[44]=z,u[45]=P,u[46]=H,u[47]=G,u[48]=K,u[49]=Q):Q=u[49],Q}else{var X;u[50]!==D||u[51]!==m?(X=m.concat(D),u[50]=D,u[51]=m,u[52]=X):X=u[52];var Y;return u[53]!==X?(Y={attachments:X,completedFirstLoad:!0,hasMore:!1,isLoadingMore:!1,onLoadMore:c},u[53]=X,u[54]=Y):Y=u[54],Y}}function c(){}l.default=u}),98);
__d("useMAWResetAttachmensRangeOnUnmount",["I64","Int64Hooks","LSIntEnum","ReQL","promiseDone","react-compiler-runtime","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n=o("react-compiler-runtime").c(5),a=r("useAsyncReStore")(),i,l;n[0]!==a||n[1]!==t||n[2]!==e?(i=function(){return(function(){r("promiseDone")(c(a,e,t))})},l=[a,e,t],n[0]=a,n[1]=t,n[2]=e,n[3]=i,n[4]=l):(i=n[3],l=n[4]),o("Int64Hooks").useEffectInt64(i,l)}async function c(t,n,r){var a=await t,l=(e||(e=o("LSIntEnum"))).ofNumber(r);return a.runInTransaction(async function(e){var t=await o("ReQL").firstAsync(o("ReQL").fromTableDescending(a.tables.attachments_ranges_v2__generated).getKeyRange(n).filter(function(e){return(s||(s=o("I64"))).equal(e.mediaGroup,l)}));t!=null&&await e.attachments_ranges_v2__generated.delete(n,l,t.minTimestampMs)},"readwrite","ui",void 0,i.id+":53")}l.default=u}),98);
__d("useMWInboxInfoSharedTabRestoreLoop",["I64","MWEBEntrypointsKillswitch.enum","MWMediaRestoreQplUtils","MWMediaRestoreStatus","MWMessageSearchStatusTypes","react","react-compiler-runtime","useMWEBBackupState","useMWInboxMediaRestoreLoop","useMWMediaGalleryRestoreStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(18),n=e.selectedTab,a=e.thread,i=a.threadKey,l=a.threadType,u=n==="media",m=n==="files",p;t[0]!==i||t[1]!==l?(p={threadKey:i,threadType:l},t[0]=i,t[1]=l,t[2]=p):p=t[2];var _=r("useMWInboxMediaRestoreLoop")(p),f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f={entrypoint:r("MWEBEntrypointsKillswitch.enum").MEDIA_GALLERY_RESTORE},t[3]=f):f=t[3];var g=r("useMWEBBackupState")(f),h;t[4]!==i||t[5]!==l?(h={threadKey:i,threadType:l},t[4]=i,t[5]=l,t[6]=h):h=t[6];var y=r("useMWMediaGalleryRestoreStatus")(h),C=y===o("MWMessageSearchStatusTypes").RestoreStatus.IN_PROGRESS,b=d(null),v,S;t[7]!==g||t[8]!==_||t[9]!==m||t[10]!==u||t[11]!==y||t[12]!==i?(v=function(){if(g===3&&(u||m)&&(y===o("MWMessageSearchStatusTypes").RestoreStatus.NOT_RUNNING&&(b.current=o("MWMediaRestoreQplUtils").startMediaRestoreLoadAllQPLFlow(),_!=null&&_.onEBOnboarded&&(_==null||_.onEBOnboarded())),y===o("MWMessageSearchStatusTypes").RestoreStatus.COMPLETE)){var e,t=o("MWMediaRestoreStatus").getRestoreStatus(),n=t.mediaCount,r=t.messageCount,a=t.threadId;if(a!=null&&(s||(s=o("I64"))).equal(i,a)){var l;(l=b.current)==null||l.addAnnotations({int:{media_count:n,message_count:r}})}(e=b.current)==null||e.endSuccess()}},S=[g,_,m,u,y,i],t[7]=g,t[8]=_,t[9]=m,t[10]=u,t[11]=y,t[12]=i,t[13]=v,t[14]=S):(v=t[13],S=t[14]),c(v,S);var R;return t[15]!==g||t[16]!==C?(R={backupState:g,isRestoringFromEB:C},t[15]=g,t[16]=C,t[17]=R):R=t[17],R}l.default=m}),98);
__d("useMWResetAttachmentsRangesOnEBOnboard",["LSThreadMediaGalleryGroup","MAWFetchAndPersistMedia","MAWMediaRestoreEBRange","MWEBEntrypointsKillswitch.enum","promiseDone","react","react-compiler-runtime","useMWEBBackupState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(12),n=e.selectedTab,a=e.thread,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={entrypoint:r("MWEBEntrypointsKillswitch.enum").MEDIA_GALLERY_RESTORE},t[0]=i):i=t[0];var l=r("useMWEBBackupState")(i),u,c;t[1]!==n?(u=n==="media"?r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS:n==="files"?r("LSThreadMediaGalleryGroup").FILES_ONLY:n==="links"?r("LSThreadMediaGalleryGroup").LINKS:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+n)})(),c=o("MAWMediaRestoreEBRange").getMediaRestoreEBRange(u),t[1]=n,t[2]=u,t[3]=c):(u=t[2],c=t[3]);var d=c,m,p;t[4]!==l||t[5]!==d||t[6]!==u||t[7]!==a.threadKey?(m=function(){l===3&&(d.resetRange(a.threadKey),r("promiseDone")(o("MAWFetchAndPersistMedia").updateLocalAttachmentsRange(a.threadKey,u,{hasMoreBefore:!0})))},p=[l,d,a.threadKey,u],t[4]=l,t[5]=d,t[6]=u,t[7]=a.threadKey,t[8]=m,t[9]=p):(m=t[8],p=t[9]),s(m,p);var _;return t[10]!==l?(_={backupState:l},t[10]=l,t[11]=_):_=t[11],_}l.default=u}),98);
__d("useMWMaybeInboxInfoSharedTabRestoreLoop",["MAWMpsGating","cr:6897","useMWResetAttachmentsRangesOnEBOnboard"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("cr:6897"))!=null?e:r("useMWResetAttachmentsRangesOnEBOnboard");function u(e){var t=e.selectedTab,n=e.thread,a=o("MAWMpsGating").isMpsMediaGalleryFlowDeprecated("media_restore_loop")?r("useMWResetAttachmentsRangesOnEBOnboard"):s,i=a({selectedTab:t,thread:n}),l=i.backupState,u=i.isRestoringFromEB;return{backupState:l,isRestoringFromEB:!!u}}l.default=u}),98);
__d("MAWCutoverInboxInfoSharedFilesTab.react",["FBLogger","I64","LSThreadMediaGalleryGroup","MAWMpsGating","MAWThreadCutover","MWInboxInfoFileGallery.react","justknobx","react","useMAWLoadMoreCutoverThreadFileAttachments","useMAWResetAttachmensRangeOnUnmount","useMWInboxInfoSharedTabRestoreLoop","useMWMaybeInboxInfoSharedTabRestoreLoop"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useRef,p=function(){return o("MAWMpsGating").isMpsMessageRendering()?r("useMWMaybeInboxInfoSharedTabRestoreLoop"):r("useMWInboxInfoSharedTabRestoreLoop")};function _(e){var t=e.onFirstLoadedMedia,n=e.secureThreadKey,a=e.threadType,i=p(),l=i({selectedTab:"files",thread:{threadKey:n,threadType:a}}),c=l.backupState,_=l.isRestoringFromEB,f=o("MAWThreadCutover").useGetCutoverOpenThreadKey(n);f==null&&r("FBLogger")("messenger_web_media").mustfix("Cutover open thread key is null for secure thread key: %s",(s||(s=o("I64"))).to_string(n));var g=r("useMAWLoadMoreCutoverThreadFileAttachments")(n,f!=null?f:(s||(s=o("I64"))).zero,a,"file_gallery",r("LSThreadMediaGalleryGroup").FILES_ONLY,_,r("justknobx")._("1132")),h=g.attachments,y=g.completedFirstLoad,C=g.hasMore,b=g.isLoadingMore,v=g.onLoadMore,S=m(!1);return d(function(){S.current===!1&&y===!0&&(S.current=!0,t(h))},[y,h,t]),r("useMAWResetAttachmensRangeOnUnmount")(n,r("LSThreadMediaGalleryGroup").FILES_ONLY),u.jsx(r("MWInboxInfoFileGallery.react"),{backupState:c,files:h,hasMore:C,isLoading:b,isRestoringFromEB:_,onLoadMore:v,threadKey:n,threadType:a})}_.displayName=_.name+" [from "+i.id+"]",l.default=_}),98);
__d("MWInboxInfoPhotoGalleryItemAriaUtils",["fbt","I64","LSIntEnum","MessagingAttachmentType","getMessengerPreciseTimestamp","getMessengerTimeBucket"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(e,t,n,r){return t?s._(/*BTDS*/"View video {Index of currently selected media in the group} of {Number of total media items in the group} sent at {time}",[s._param("Index of currently selected media in the group",n),s._param("Number of total media items in the group",r),s._param("time",e)]):s._(/*BTDS*/"View video {Index of currently selected media in the group} of {Number of total media items in the group} sent on {date and time}",[s._param("Index of currently selected media in the group",n),s._param("Number of total media items in the group",r),s._param("date and time",e)])}function d(e,t,n,r){return t?s._(/*BTDS*/"View photo {Current media in group} of {Number of total media in group} sent at {time}",[s._param("Current media in group",n),s._param("Number of total media in group",r),s._param("time",e)]):s._(/*BTDS*/"View photo {Current media in group} of {Number of total media in group} sent on {date and time}",[s._param("Current media in group",n),s._param("Number of total media in group",r),s._param("date and time",e)])}function m(e,t){return t?s._(/*BTDS*/"View video sent at {time}",[s._param("time",e)]):s._(/*BTDS*/"View video sent on {date and time}",[s._param("date and time",e)])}function p(e,t){return t?s._(/*BTDS*/"View photo sent at {time}",[s._param("time",e)]):s._(/*BTDS*/"View photo sent on {date and time}",[s._param("date and time",e)])}function _(e,t,n,a){var i=r("getMessengerPreciseTimestamp")(t),l=o("getMessengerTimeBucket").isTimeOnlyTimestamp(t);return n!=null&&a!=null?e?c(i,l,n,a):d(i,l,n,a):e?m(i,l):p(i,l)}function f(t,n){var a=(e||(e=o("I64"))).equal(t.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)),i=Number(e.to_string(t.timestampMs));if(n!=null&&n.groupIndex!=null&&n.groupSize!=null){var l,s,c=(e||(e=o("I64"))).to_string(e.add((l=n.groupIndex)!=null?l:(e||(e=o("I64"))).zero,e.one)),d=e.to_string((s=n.groupSize)!=null?s:(e||(e=o("I64"))).zero);return _(a,i,c,d)}return _(a,i)}l.getAriaLabel=f}),226);
__d("MWInboxInfoPhotoGalleryItemThumbnailContent.react",["FDSImageCover.react","I64","LSIntEnum","MWMediaGalleryVideoThumbnail.react","MWThumbnailDurationPill","MWVideoPlayerPlayButton.react","MessagingAttachmentType","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=1e6,m=1e3;function p(e){var t,n=o("react-compiler-runtime").c(21),a=e.attachment,i=e.fallbackVideoUrl,l=e.mediaRenderQpl,p=e.previewUrl,_=(s||(s=o("I64"))).equal(a.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO));if(_){var f,g=(s||(s=o("I64"))).to_float((f=a.playableDurationMs)!=null?f:(s||(s=o("I64"))).zero),h=Math.round(g/(g>=d?Math.pow(m,2):m)),y;n[0]===Symbol.for("react.memo_cache_sentinel")?(y=c.jsx(r("MWVideoPlayerPlayButton.react"),{isVisible:!0,size:"SMALL"}),n[0]=y):y=n[0];var C=y,b;n[1]!==h?(b=h>0?c.jsx(r("MWThumbnailDurationPill"),{spacing:"TIGHT",videoDuration:h}):null,n[1]=h,n[2]=b):b=n[2];var v=b,S;n[3]===Symbol.for("react.memo_cache_sentinel")?(S={className:"x1rg5ohu x5yr21d xl1xv1r x1n2onr6 xh8yej3"},n[3]=S):S=n[3];var R=i!=null?i:"",L;n[4]!==a.filename||n[5]!==l||n[6]!==p||n[7]!==R?(L=c.jsx(r("MWMediaGalleryVideoThumbnail.react"),{alt:a.filename,fallbackVideoUrl:R,mediaRenderQpl:l,previewUrl:p}),n[4]=a.filename,n[5]=l,n[6]=p,n[7]=R,n[8]=L):L=n[8];var E=v===null&&C,k;return n[9]!==L||n[10]!==E||n[11]!==v?(k=c.jsxs("div",babelHelpers.extends({},S,{children:[L,E,v]})),n[9]=L,n[10]=E,n[11]=v,n[12]=k):k=n[12],k}var I=(t=a.filename)!=null?t:"",T,D;n[13]!==l?(T=function(){return l==null?void 0:l.endFail("load-image-error")},D=function(){return l==null?void 0:l.endSuccess()},n[13]=l,n[14]=T,n[15]=D):(T=n[14],D=n[15]);var x;return n[16]!==p||n[17]!==I||n[18]!==T||n[19]!==D?(x=c.jsx(r("FDSImageCover.react"),{alt:I,onError:T,onLoad:D,src:p}),n[16]=p,n[17]=I,n[18]=T,n[19]=D,n[20]=x):x=n[20],x}l.default=p}),98);
__d("MAWInboxInfoPhotoGalleryItem.react",["CometPlaceholder.react","I64","JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","MAWMediaItemStateHandlerContentWrapper.react","MAWSecureVideoInvalidAttachment.react","MAWSecureVideoUnsupportedCodecAttachment.react","MWInboxInfoPhotoGalleryItemAriaUtils","MWInboxInfoPhotoGalleryItemThumbnailContent.react","MWMediaGalleryRenderQpl","MWMediaRenderQplUtils","MWMessageListMediaPressableContainer.react","MWV2AttachmentErrorPlaceholderV2.react","MWV2AttachmentErrorPlaceholderWithBlurImage.react","MWV2AttachmentRetriableErrorPlaceholderWithBlurImage.react","MediaDownloadStatusIconSize","MessagingAttachmentType","MessengerWebUXLogger","react","react-compiler-runtime","useMAWMediaDownloadStatus","useMWMediaViewerOpenQPLLogger","useMWV2MediaViewerURL","useMWXLazyDialog","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=512,m=512,p={attachmentContainer:{height:"x5yr21d",$$css:!0},errorPlaceholder:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",$$css:!0}};function _(e){var t,n,a=o("react-compiler-runtime").c(30),i=e.attachment,l=e.getPlayableUrl,s=e.getPreviewUrl,u=e.message,_=e.navigateToRouteForMediaViewer,g=e.onPress,h=e.threadType,y=o("MWMediaGalleryRenderQpl").useMediaGalleryRenderQpl(i,h),C=r("useMAWMediaDownloadStatus")(i,y),b=C.uiState;y.addAnnotations({string:{downloadStatus:b}});var v=(t=r("useShouldShowPlaybackErrorFallback")(i,y))!=null?t:!1,S=(n=r("useShouldShowUnsupportedCodecFallback")(i,y))!=null?n:!1;if(v){var R;return a[0]!==i||a[1]!==y?(R=c.jsx(r("MAWSecureVideoInvalidAttachment.react"),{attachment:i,connectBottom:!1,connectTop:!1,height:d,iconSize:r("MediaDownloadStatusIconSize").Small,mediaRenderQpl:y,outgoing:!1,width:m,withTooltip:!0,xstyle:p.errorPlaceholder}),a[0]=i,a[1]=y,a[2]=R):R=a[2],R}if(S){var L;return a[3]!==i||a[4]!==l||a[5]!==y?(L=c.jsx(r("MAWSecureVideoUnsupportedCodecAttachment.react"),{connectBottom:!1,connectTop:!1,dbAttachment:i,getPlayableUrl:l,getPreviewUrl:l,height:d,iconSize:r("MediaDownloadStatusIconSize").Small,mediaRenderQpl:y,message:void 0,outgoing:!1,width:m,withTooltip:!0,xstyle:p.errorPlaceholder}),a[3]=i,a[4]=l,a[5]=y,a[6]=L):L=a[6],L}var E;a[7]!==i||a[8]!==y?(E=function(t,n){return c.jsx(r("MWV2AttachmentErrorPlaceholderV2.react"),{attachment:i,connectBottom:!1,connectTop:!1,hasAppAttribution:i.attributionAppName!=null,height:d,iconSize:r("MediaDownloadStatusIconSize").Small,isRetryableError:t,mediaRenderQpl:y,onRetry:n,outgoing:!1,width:m,withTooltip:!0,xstyle:p.errorPlaceholder})},a[7]=i,a[8]=y,a[9]=E):E=a[9];var k=E,I;a[10]!==i||a[11]!==s||a[12]!==y?(I=function(t,n){return t?c.jsx(r("MWV2AttachmentRetriableErrorPlaceholderWithBlurImage.react"),{connectBottom:!1,connectTop:!1,dbAttachment:i,getPreviewUrl:s,height:d,iconSize:r("MediaDownloadStatusIconSize").Small,isGroupedImage:!1,mediaRenderQpl:y,message:void 0,onRetry:n,outgoing:!1,width:m,withTooltip:!0,xstyle:p.errorPlaceholder}):c.jsx(r("MWV2AttachmentErrorPlaceholderWithBlurImage.react"),{connectBottom:!1,connectTop:!1,dbAttachment:i,getPreviewUrl:s,height:d,iconSize:r("MediaDownloadStatusIconSize").Small,isGroupedImage:!1,mediaRenderQpl:y,message:void 0,outgoing:!1,width:m,withTooltip:!0,xstyle:p.errorPlaceholder})},a[10]=i,a[11]=s,a[12]=y,a[13]=I):I=a[13];var T=I,D;a[14]!==i||a[15]!==k||a[16]!==l||a[17]!==s||a[18]!==y||a[19]!==u||a[20]!==_||a[21]!==g||a[22]!==h?(D=function(t){return c.jsx(r("CometPlaceholder.react"),{fallback:t("MAWInboxInfoPhotoGalleryItem.Suspense",!0),name:"MAWInboxInfoPhotoGalleryItem.Suspense",children:c.jsx(f,{attachment:i,getPlayableUrl:l,getPreviewUrl:s,mediaRenderQpl:y,message:u,navigateToRouteForMediaViewer:_,onPress:g,renderUnsupportedAttachment:function(){return k(!1)},threadType:h})})},a[14]=i,a[15]=k,a[16]=l,a[17]=s,a[18]=y,a[19]=u,a[20]=_,a[21]=g,a[22]=h,a[23]=D):D=a[23];var x=D,$;return a[24]!==i||a[25]!==k||a[26]!==T||a[27]!==y||a[28]!==x?($=c.jsx(r("MAWMediaItemStateHandlerContentWrapper.react"),{dbAttachment:i,descriptionForLogging:"MAWInboxInfoPhotoGalleryItem",errorComponentRenderer:k,errorWithBlurComponentRenderer:T,mediaRenderQpl:y,placeholderHeight:d,placeholderWidth:m,successfulComponentRenderer:x,triggerUIView:"gallery"}),a[24]=i,a[25]=k,a[26]=T,a[27]=y,a[28]=x,a[29]=$):$=a[29],$}function f(e){var t=o("react-compiler-runtime").c(51),n=e.attachment,a=e.getPlayableUrl,i=e.getPreviewUrl,l=e.mediaRenderQpl,d=e.message,m=e.navigateToRouteForMediaViewer,_=e.onPress,f=e.renderUnsupportedAttachment,h=e.threadType,y;t[0]!==n.attachmentType?(y=(s||(s=o("I64"))).equal(n.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)),t[0]=n.attachmentType,t[1]=y):y=t[1];var C=y,b;if(t[2]!==n||t[3]!==a||t[4]!==i||t[5]!==C||t[6]!==l){var v,S;b=C?(S=a(n,"MWInboxInfoPhotoGalleryItem",l))!=null?S:"":(v=i(n,"MWInboxInfoPhotoGalleryItem",l))!=null?v:"",t[2]=n,t[3]=a,t[4]=i,t[5]=C,t[6]=l,t[7]=b}else b=t[7];var R=b,L;t[8]!==n||t[9]!==a||t[10]!==l||t[11]!==R?(L=R?void 0:a(n,"MWInboxInfoPhotoGalleryItem",l),t[8]=n,t[9]=a,t[10]=l,t[11]=R,t[12]=L):L=t[12];var E=L,k=r("useMWV2MediaViewerURL")(n),I;t[13]===Symbol.for("react.memo_cache_sentinel")?(I=r("JSResourceForInteraction")("MWV2MediaViewer.react").__setRef("MAWInboxInfoPhotoGalleryItem.react"),t[13]=I):I=t[13];var T=r("useMWXLazyDialog")(I),D=T[0],x=T[1],$=(s||(s=o("I64"))).equal(n.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)),P=o("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger(),N=r("MessengerWebUXLogger").useInteractionLogger();if(R==null||R.length===0){if(!$){l==null||l.endFail("empty_preview_url");var M;if(t[14]!==n||t[15]!==f){var w;M=(w=f==null?void 0:f(n))!=null?w:null,t[14]=n,t[15]=f,t[16]=M}else M=t[16];return M}if(E==null||E.length===0){l==null||l.endFail("empty_video_preview_and_playable_url");var A;if(t[17]!==n||t[18]!==f){var F;A=(F=f==null?void 0:f(n))!=null?F:null,t[17]=n,t[18]=f,t[19]=A}else A=t[19];return A}}var O;t[20]!==m||t[21]!==R||t[22]!==k?(O=m?{passthroughProps:{origSrc:R},url:k}:void 0,t[20]=m,t[21]=R,t[22]=k,t[23]=O):O=t[23];var B=O,W;t[24]!==n||t[25]!==d?(W=o("MWInboxInfoPhotoGalleryItemAriaUtils").getAriaLabel(n,d),t[24]=n,t[25]=d,t[26]=W):W=t[26];var q=W,U;t[27]!==m||t[28]!==x?(U=function(){if(!m)return x()},t[27]=m,t[28]=x,t[29]=U):U=t[29];var V;t[30]!==n||t[31]!==N||t[32]!==P||t[33]!==m||t[34]!==_||t[35]!==D||t[36]!==h?(V=function(){if(P.startFlow({attachmentType:o("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(n.attachmentType),entryPoint:"media_gallery",isSecure:o("LSMessagingThreadTypeUtil").isArmadilloSecure(h)}),N==null||N({eventName:"open_media_viewer_from_gallery",extraData:{attachmentType:o("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(n.attachmentType)},threadType:h}),_!=null&&_(n),!m)return D({attachment:n},g)},t[30]=n,t[31]=N,t[32]=P,t[33]=m,t[34]=_,t[35]=D,t[36]=h,t[37]=V):V=t[37];var H;t[38]!==n||t[39]!==l||t[40]!==E||t[41]!==R?(H=c.jsx(r("MWInboxInfoPhotoGalleryItemThumbnailContent.react"),{attachment:n,fallbackVideoUrl:E,mediaRenderQpl:l,previewUrl:R}),t[38]=n,t[39]=l,t[40]=E,t[41]=R,t[42]=H):H=t[42];var G;return t[43]!==q||t[44]!==n||t[45]!==B||t[46]!==l||t[47]!==U||t[48]!==V||t[49]!==H?(G=c.jsx(r("MWMessageListMediaPressableContainer.react"),{ariaLabel:q,attachment:n,linkProps_:B,mediaRenderQpl:l,onHoverIn:U,onPress:V,overlayDisabled:!0,testid:void 0,xstyle:p.attachmentContainer,children:H}),t[43]=q,t[44]=n,t[45]=B,t[46]=l,t[47]=U,t[48]=V,t[49]=H,t[50]=G):G=t[50],G}function g(){}l.default=_}),98);
__d("MWInboxInfoPhotoGalleryItem.react",["CometHeroHoldTrigger.react","CometPlaceholder.react","I64","JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","MWInboxInfoPhotoGalleryItemAriaUtils","MWInboxInfoPhotoGalleryItemThumbnailContent.react","MWMediaGalleryRenderQpl","MWMediaRenderQplUtils","MWMessageListMediaPressableContainer.react","MWV2AttachmentErrorPlaceholder.react","MWV2AttachmentLoadingPlaceholder.react","MessagingAttachmentType","MessengerWebUXLogger","react","react-compiler-runtime","useMAWMediaDownloadStatus","useMWMediaViewerOpenQPLLogger","useMWV2MediaViewerURL","useMWXLazyDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d={attachmentContainer:{height:"x5yr21d",$$css:!0},errorPlaceholder:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",$$css:!0},loadingPlaceholder:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",$$css:!0}};function m(e){var t,n=o("react-compiler-runtime").c(22),a=e.attachment,i=e.getPlayableUrl,l=e.getPreviewUrl,s=e.message,u=e.navigateToRouteForMediaViewer,m=e.onPress,f=e.threadType,g=o("MWMediaGalleryRenderQpl").useMediaGalleryRenderQpl(a,f),h;n[0]!==f?(h=o("LSMessagingThreadTypeUtil").isArmadilloSecure(f),n[0]=f,n[1]=h):h=n[1];var y=h,C=y?a:null,b=(t=r("useMAWMediaDownloadStatus")(C,g))!=null?t:{},v=b.uiState;if(g.addAnnotations({string:{downloadStatus:v}}),a.hasMedia===!1){g==null||g.addPoint("loading_has_media_false");var S;n[2]!==g?(S=c.jsx(r("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWInboxInfoPhotoGalleryItem.NoMedia",height:512,mediaRenderQpl:g,width:512,xstyle:d.loadingPlaceholder}),n[2]=g,n[3]=S):S=n[3];var R;n[4]===Symbol.for("react.memo_cache_sentinel")?(R=c.jsx(r("CometHeroHoldTrigger.react"),{description:"MWInboxInfoPhotoGalleryItem.NoMedia",hold:!0}),n[4]=R):R=n[4];var L;return n[5]!==S?(L=c.jsxs(c.Fragment,{children:[S,R]}),n[5]=S,n[6]=L):L=n[6],L}var E=p,k;n[7]!==g?(k=c.jsx(r("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWInboxInfoPhotoGalleryItem.Suspense",height:512,mediaRenderQpl:g,width:512,xstyle:d.loadingPlaceholder}),n[7]=g,n[8]=k):k=n[8];var I;n[9]!==a||n[10]!==i||n[11]!==l||n[12]!==y||n[13]!==g||n[14]!==s||n[15]!==u||n[16]!==m||n[17]!==f?(I=c.jsx(_,{attachment:a,getPlayableUrl:i,getPreviewUrl:l,isSecure:y,mediaRenderQpl:g,message:s,navigateToRouteForMediaViewer:u,onPress:m,renderUnsupportedAttachment:E,threadType:f}),n[9]=a,n[10]=i,n[11]=l,n[12]=y,n[13]=g,n[14]=s,n[15]=u,n[16]=m,n[17]=f,n[18]=I):I=n[18];var T;return n[19]!==k||n[20]!==I?(T=c.jsx(r("CometPlaceholder.react"),{fallback:k,name:"MWInboxInfoPhotoGalleryItem.Suspense",children:I}),n[19]=k,n[20]=I,n[21]=T):T=n[21],T}function p(e){return c.jsx(r("MWV2AttachmentErrorPlaceholder.react"),{height:512,width:512,xstyle:d.errorPlaceholder})}p.displayName=p.name+" [from "+i.id+"]";function _(e){var t=o("react-compiler-runtime").c(48),n=e.attachment,a=e.getPlayableUrl,i=e.getPreviewUrl,l=e.isSecure,m=e.mediaRenderQpl,p=e.message,_=e.navigateToRouteForMediaViewer,g=e.onPress,h=e.renderUnsupportedAttachment,y=e.threadType,C;if(t[0]!==n||t[1]!==i||t[2]!==m){var b;C=(b=i(n,"MWInboxInfoPhotoGalleryItem",m))!=null?b:"",t[0]=n,t[1]=i,t[2]=m,t[3]=C}else C=t[3];var v=C,S;t[4]!==n||t[5]!==a||t[6]!==m||t[7]!==v?(S=v?void 0:a(n,"MWInboxInfoPhotoGalleryItem",m),t[4]=n,t[5]=a,t[6]=m,t[7]=v,t[8]=S):S=t[8];var R=S,L=r("useMWV2MediaViewerURL")(n),E;t[9]===Symbol.for("react.memo_cache_sentinel")?(E=r("JSResourceForInteraction")("MWV2MediaViewer.react").__setRef("MWInboxInfoPhotoGalleryItem.react"),t[9]=E):E=t[9];var k=r("useMWXLazyDialog")(E),I=k[0],T=k[1],D=(s||(s=o("I64"))).equal(n.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)),x=o("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger(),$=r("MessengerWebUXLogger").useInteractionLogger();if(v==null||v.length===0){if(!D){m==null||m.endFail("empty_preview_url");var P;if(t[10]!==n||t[11]!==h){var N;P=(N=h==null?void 0:h(n))!=null?N:null,t[10]=n,t[11]=h,t[12]=P}else P=t[12];return P}if(R==null||R.length===0){m==null||m.endFail("empty_video_preview_and_playable_url");var M;if(t[13]!==n||t[14]!==h){var w;M=(w=h==null?void 0:h(n))!=null?w:null,t[13]=n,t[14]=h,t[15]=M}else M=t[15];return M}}var A;t[16]!==_||t[17]!==v||t[18]!==L?(A=_?{passthroughProps:{origSrc:v},url:L}:void 0,t[16]=_,t[17]=v,t[18]=L,t[19]=A):A=t[19];var F=A,O;t[20]!==n||t[21]!==p?(O=o("MWInboxInfoPhotoGalleryItemAriaUtils").getAriaLabel(n,p),t[20]=n,t[21]=p,t[22]=O):O=t[22];var B=O,W;t[23]!==_||t[24]!==T?(W=function(){if(!_)return T()},t[23]=_,t[24]=T,t[25]=W):W=t[25];var q;t[26]!==n||t[27]!==l||t[28]!==$||t[29]!==x||t[30]!==_||t[31]!==g||t[32]!==I||t[33]!==y?(q=function(){if(x.startFlow({attachmentType:o("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(n.attachmentType),entryPoint:"media_gallery",isSecure:l}),$==null||$({eventName:"open_media_viewer_from_gallery",extraData:{attachmentType:o("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(n.attachmentType)},threadType:y}),g!=null&&g(n),!_)return I({attachment:n},f)},t[26]=n,t[27]=l,t[28]=$,t[29]=x,t[30]=_,t[31]=g,t[32]=I,t[33]=y,t[34]=q):q=t[34];var U;t[35]!==n||t[36]!==m||t[37]!==R||t[38]!==v?(U=c.jsx(r("MWInboxInfoPhotoGalleryItemThumbnailContent.react"),{attachment:n,fallbackVideoUrl:R,mediaRenderQpl:m,previewUrl:v}),t[35]=n,t[36]=m,t[37]=R,t[38]=v,t[39]=U):U=t[39];var V;return t[40]!==B||t[41]!==n||t[42]!==F||t[43]!==m||t[44]!==W||t[45]!==q||t[46]!==U?(V=c.jsx(r("MWMessageListMediaPressableContainer.react"),{ariaLabel:B,attachment:n,linkProps_:F,mediaRenderQpl:m,onHoverIn:W,onPress:q,overlayDisabled:!0,testid:void 0,xstyle:d.attachmentContainer,children:U}),t[40]=B,t[41]=n,t[42]=F,t[43]=m,t[44]=W,t[45]=q,t[46]=U,t[47]=V):V=t[47],V}function f(){}l.default=m}),98);
__d("MWXColumnItemHideable.react",["cr:5656","cr:5829","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["hidden"],u,c=u||(u=o("react")),d=u.unstable_Activity;function m(t){var a=o("react-compiler-runtime").c(15),i,l;a[0]!==t?(l=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var u=r("qex")._("289");if(u===!0){var m,p;if(a[3]!==i){var _=i;m=_.hidden,p=babelHelpers.objectWithoutPropertiesLoose(_,s),a[3]=i,a[4]=m,a[5]=p}else m=a[4],p=a[5];var f=m===!0?"hidden":"visible",g;a[6]!==l||a[7]!==p?(g=c.jsx(n("cr:5656"),babelHelpers.extends({},p,{ref:l})),a[6]=l,a[7]=p,a[8]=g):g=a[8];var h;return a[9]!==f||a[10]!==g?(h=c.jsx(d,{mode:f,children:g}),a[9]=f,a[10]=g,a[11]=h):h=a[11],h}if(n("cr:5829")!=null){var y;return a[12]!==i||a[13]!==l?(y=c.jsx(n("cr:5829"),babelHelpers.extends({},i,{ref:l})),a[12]=i,a[13]=l,a[14]=y):y=a[14],y}return null}l.default=m}),98);
__d("MWInboxInfoPhotoGallery.react",["CometErrorBoundary.react","CometInfiniteScrollTrigger.react","CometPhotoGrid.react","FDSProgressIndicator.react","I64","LSMessagingThreadTypeUtil","MAWInboxInfoPhotoGalleryItem.react","MAWMediaGalleryEBTaggingUtils","MWInboxInfoPhotoGalleryItem.react","MWInboxInfoSharedContentEmptyTab.react","MWInboxInfoSharedContentTabWithFooter.react","MWSharedContentCommonFbt","MWXColumn.react","MWXColumnItem.react","MWXColumnItemHideable.react","MWXText.react","MessengerWebUXLogger","cr:8625","deferredLoadComponent","formatDate","gkx","justknobx","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=["threadKey"],s,u,c=s||(s=o("react")),d=s,m=d.Fragment,p=d.useMemo,_=d.useState,f=r("deferredLoadComponent")(r("requireDeferred")("MWInboxMediaGalleryEBRestoreUpsell.react").__setRef("MWInboxInfoPhotoGallery.react")),g=r("deferredLoadComponent")(r("requireDeferred")("MWInboxMediaGalleryEBRestoreSyncBanner.react").__setRef("MWInboxInfoPhotoGallery.react")),h={dateHeader:{marginBottom:"xod5an3",$$css:!0},photoGridSpacingNormalizer:{marginTop:"xr9ek0c",marginInlineEnd:"xnnr8r",marginBottom:"xjpr12u",marginInlineStart:"xwklpps",$$css:!0},progressRingContainer:{display:"x78zum5",justifyContent:"xl56j7k",marginTop:"x1xmf6yo",paddingTop:"x123j3cw",paddingInlineEnd:"x1gabggj",paddingBottom:"xs9asl8",paddingInlineStart:"xaso8d8",$$css:!0}};function y(t){var n=o("react-compiler-runtime").c(20),a=t.backupState,i=t.hasMore,l=t.isLoading,s=t.isRestoringFromEB,u=t.media,d=t.navigateToRouteForMediaViewer,m=t.threadType,p,_;n[0]!==t?(_=t.threadKey,p=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=p,n[2]=_):(p=n[1],_=n[2]);var f;n[3]!==_||n[4]!==m?(f={eventName:"media_gallery_rendered",threadKey:_,threadType:m},n[3]=_,n[4]=m,n[5]=f):f=n[5];var g=r("MessengerWebUXLogger").useImpressionLoggerRef(f),h;n[6]===Symbol.for("react.memo_cache_sentinel")?(h=r("justknobx")._("3133"),n[6]=h):h=n[6];var y=h,b;n[7]===Symbol.for("react.memo_cache_sentinel")?(b={className:"x78zum5 xdt5ytf x1iyjqo2 xs83m0k x2lwn1j x6ikm8r x10wlt62 xf7dkkf xv54qhq"},n[7]=b):b=n[7];var v;n[8]!==p||n[9]!==a||n[10]!==i||n[11]!==l||n[12]!==s||n[13]!==u.length||n[14]!==d||n[15]!==_?(v=u.length>0||i||l||s===!0?c.jsx(C,babelHelpers.extends({isRestoringFromEB:s,threadKey:_},p,{backupState:a,navigateToRouteForMediaViewer:y?d:!1})):c.jsx(r("MWInboxInfoSharedContentEmptyTab.react"),{backupState:a,contentType:"media",threadKey:_}),n[8]=p,n[9]=a,n[10]=i,n[11]=l,n[12]=s,n[13]=u.length,n[14]=d,n[15]=_,n[16]=v):v=n[16];var S;return n[17]!==g||n[18]!==v?(S=c.jsx("div",babelHelpers.extends({},b,{ref:g,children:v})),n[17]=g,n[18]=v,n[19]=S):S=n[19],S}function C(e){var t=o("react-compiler-runtime").c(41),n=e.backupState,a=e.getPlayableUrl,i=e.getPreviewUrl,l=e.hasMore,s=e.isBackButtonPressed,u=e.isLoading,d=e.isRestoringFromEB,m=e.media,p=e.mediaWithMessages,y=e.navigateToRouteForMediaViewer,C=e.onLoadMore,R=e.onPressMedia,L=e.threadKey,E=e.threadType,k=e.uniformGrid,I=s===void 0?!1:s,T=y===void 0?!0:y,D=k===void 0?!0:k,x=n===4,$;t[0]!==E?($=o("LSMessagingThreadTypeUtil").isArmadilloSecure(E),t[0]=E,t[1]=$):$=t[1];var P=$,N;t[2]!==P?(N=P&&o("MAWMediaGalleryEBTaggingUtils").isMediaGalleryEBTaggingRestoreEnabled(),t[2]=P,t[3]=N):N=t[3];var M=N,w=P||M,A=_(!1),F=A[0],O=A[1],B;t[4]!==m?(B=m.reduce(v,new Map),t[4]=m,t[5]=B):B=t[5];var W=B,q;t[6]!==x||t[7]!==w||t[8]!==d?(q=w?c.jsxs(c.Fragment,{children:[x&&c.jsx(r("CometErrorBoundary.react"),{fallback:b,children:c.jsx(f,{contentType:"media"})}),d===!0&&c.jsx(g,{contentType:"media"})]}):c.jsx(r("MWXText.react"),{align:"center",color:"tertiary",type:"meta3",children:o("MWSharedContentCommonFbt").armadilloMediaGalleryMissingMediaNoticeFbt}),t[6]=x,t[7]=w,t[8]=d,t[9]=q):q=t[9];var U=(w||m.length>0)&&P&&!I,V=m.length===0&&d===!0,H;t[10]!==F?(H=r("gkx")("7066")?function(e){e.altKey&&(e.preventDefault(),O(!F))}:void 0,t[10]=F,t[11]=H):H=t[11];var G=r("gkx")("7066")&&!F?"alt + right click to show attachments debug buttons":void 0,z;t[12]!==a||t[13]!==i||t[14]!==P||t[15]!==W||t[16]!==p||t[17]!==T||t[18]!==R||t[19]!==F||t[20]!==L||t[21]!==E||t[22]!==D?(z=c.jsx(r("MWXColumn.react"),{spacing:16,children:Array.from(W.keys()).map(function(e,t){var n,o=(n=W.get(e))!=null?n:[];return c.jsxs(r("MWXColumnItem.react"),{children:[c.jsx(r("MWXColumnItem.react"),{xstyle:h.dateHeader,children:c.jsx(r("MWXText.react"),{color:"primary",isSemanticHeading:!0,type:"headlineEmphasized3",children:e})}),c.jsx(S,{getPlayableUrl:a,getPreviewUrl:i,isSecureThread:P,media:o,mediaWithMessages:p,navigateToRouteForMediaViewer:T,onPressMedia:R,showDebugger:F,threadKey:L,threadType:E,uniformGrid:D})]},t)})}),t[12]=a,t[13]=i,t[14]=P,t[15]=W,t[16]=p,t[17]=T,t[18]=R,t[19]=F,t[20]=L,t[21]=E,t[22]=D,t[23]=z):z=t[23];var j;t[24]!==H||t[25]!==G||t[26]!==z?(j=c.jsx("div",{onContextMenu:H,style:h.photoGridSpacingNormalizer,title:G,children:z}),t[24]=H,t[25]=G,t[26]=z,t[27]=j):j=t[27];var K;t[28]===Symbol.for("react.memo_cache_sentinel")?(K=c.jsx(r("FDSProgressIndicator.react"),{size:"default"}),t[28]=K):K=t[28];var Q;t[29]!==l||t[30]!==u||t[31]!==C?(Q=c.jsx(r("CometInfiniteScrollTrigger.react"),{hasMore:l,isLoading:u,onLoadMore:C,scrollMargin:16,xstyle:h.progressRingContainer,children:K}),t[29]=l,t[30]=u,t[31]=C,t[32]=Q):Q=t[32];var X;t[33]!==j||t[34]!==Q||t[35]!==V?(X=c.jsxs(r("MWXColumnItemHideable.react"),{hidden:V,paddingHorizontal:4,paddingVertical:4,children:[j,Q]}),t[33]=j,t[34]=Q,t[35]=V,t[36]=X):X=t[36];var Y;return t[37]!==X||t[38]!==q||t[39]!==U?(Y=c.jsx(r("MWInboxInfoSharedContentTabWithFooter.react"),{footer:q,shouldShowFooter:U,children:X}),t[37]=X,t[38]=q,t[39]=U,t[40]=Y):Y=t[40],Y}function b(){return null}function v(e,t){var n=new Date((u||(u=o("I64"))).to_float(t.timestampMs)),a=r("formatDate")(n,{allOtherTimes:"F Y",thisYear:"F"});if(!e.has(a))e.set(a,[t]);else{var i;(i=e.get(a))==null||i.push(t)}return e}function S(e){var t=o("react-compiler-runtime").c(26),a=e.getPlayableUrl,i=e.getPreviewUrl,l=e.isSecureThread,s=e.media,d=e.mediaWithMessages,p=e.navigateToRouteForMediaViewer,_=e.onPressMedia,f=e.showDebugger,g=e.threadKey,h=e.threadType,y=e.uniformGrid,C=p===void 0?!0:p,b;if(t[0]!==d){var v;b=new Map((v=d==null?void 0:d.map(R))!=null?v:[]),t[0]=d,t[1]=b}else b=t[1];var S=b,L;if(t[2]!==S||t[3]!==a||t[4]!==i||t[5]!==l||t[6]!==s||t[7]!==C||t[8]!==_||t[9]!==f||t[10]!==g||t[11]!==h){var E;t[13]!==S||t[14]!==a||t[15]!==i||t[16]!==l||t[17]!==C||t[18]!==_||t[19]!==f||t[20]!==g||t[21]!==h?(E=function(t){var e=S.get(t.attachmentFbid),s=function(){return l&&(u||(u=o("I64"))).equal(t.threadKey,g)&&r("MAWInboxInfoPhotoGalleryItem.react")!=null?c.jsx(r("MAWInboxInfoPhotoGalleryItem.react"),{attachment:t,getPlayableUrl:a,getPreviewUrl:i,message:e,navigateToRouteForMediaViewer:C,onPress:_,threadType:h}):c.jsx(r("MWInboxInfoPhotoGalleryItem.react"),{attachment:t,getPlayableUrl:a,getPreviewUrl:i,message:e,navigateToRouteForMediaViewer:C,onPress:_,threadType:h})};return c.jsxs(m,{children:[s(),n("cr:8625")&&f?c.jsx(n("cr:8625"),{attachment:t}):null]},t.attachmentFbid+t.messageId)},t[13]=S,t[14]=a,t[15]=i,t[16]=l,t[17]=C,t[18]=_,t[19]=f,t[20]=g,t[21]=h,t[22]=E):E=t[22],L=s.map(E),t[2]=S,t[3]=a,t[4]=i,t[5]=l,t[6]=s,t[7]=C,t[8]=_,t[9]=f,t[10]=g,t[11]=h,t[12]=L}else L=t[12];var k;return t[23]!==L||t[24]!==y?(k=c.jsx(r("CometPhotoGrid.react"),{uniformGrid:y,children:L}),t[23]=L,t[24]=y,t[25]=k):k=t[25],k}function R(e){return[e.attachment.attachmentFbid,e.message]}l.default=y}),98);
__d("MAWCutoverInboxInfoSharedMediaTab.react",["FBLogger","I64","LSThreadMediaGalleryGroup","MAWThreadCutover","MWInboxInfoPhotoGallery.react","justknobx","react","react-compiler-runtime","useMAWLoadMoreCutoverThreadSharedAttachments","useMAWResetAttachmensRangeOnUnmount","useMWMaybeInboxInfoSharedTabRestoreLoop","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useEffect,p=c.useRef;function _(e){var t=o("react-compiler-runtime").c(28),n=e.isBackButtonPressed,a=e.onFirstLoadedMedia,i=e.secureThreadKey,l=e.threadType,c=o("MAWThreadCutover").useGetCutoverOpenThreadKey(i);c==null&&r("FBLogger")("messenger_web_media").mustfix("Cutover open thread key is null for secure thread key: %s",(s||(s=o("I64"))).to_string(i));var d;t[0]!==i||t[1]!==l?(d={selectedTab:"media",thread:{threadKey:i,threadType:l}},t[0]=i,t[1]=l,t[2]=d):d=t[2];var _=r("useMWMaybeInboxInfoSharedTabRestoreLoop")(d),f=_.backupState,g=_.isRestoringFromEB,h;t[3]===Symbol.for("react.memo_cache_sentinel")?(h={entrypoint:"media_gallery"},t[3]=h):h=t[3];var y;t[4]===Symbol.for("react.memo_cache_sentinel")?(y=r("justknobx")._("1132"),t[4]=y):y=t[4];var C=r("useMAWLoadMoreCutoverThreadSharedAttachments")(i,c!=null?c:(s||(s=o("I64"))).zero,l,h,r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,g,y),b=C.attachments,v=C.completedFirstLoad,S=C.hasMore,R=C.isLoadingMore,L=C.onLoadMore,E=p(!1),k,I;t[5]!==b||t[6]!==v||t[7]!==a?(k=function(){E.current===!1&&v===!0&&(E.current=!0,a(b))},I=[v,b,a],t[5]=b,t[6]=v,t[7]=a,t[8]=k,t[9]=I):(k=t[8],I=t[9]),m(k,I);var T=r("useMWV2MediaViewerOpenPreviewUrl")(),D=r("useMWV2MediaViewerOpenPlayableUrl")(),x=r("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")(),$=r("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")(),P;t[10]!==T||t[11]!==x?(P=function(t,n,o){var e;if(t.transportKey==="FBBroker"||t.transportKey==="FBLegacyBroker"){var a,i=(a=T(t,n))!=null?a:"";return i===""&&r("FBLogger")("messenger_web_media").mustfix("Cutover Shared Media Gallery open media previewUrl is an empty string"),i}var l=(e=x(t,n,o))!=null?e:"";return l===""&&r("FBLogger")("messenger_web_media").warn("Cutover Shared Media Gallery secure media previewUrl is an empty string","messenger_web_media"),l},t[10]=T,t[11]=x,t[12]=P):P=t[12];var N=P,M;t[13]!==D||t[14]!==$?(M=function(t,n,r){var e;if(t.transportKey==="FBBroker"||t.transportKey==="FBLegacyBroker"){var o;return(o=D(t,n))!=null?o:""}return(e=$(t,n,r))!=null?e:""},t[13]=D,t[14]=$,t[15]=M):M=t[15];var w=M;r("useMAWResetAttachmensRangeOnUnmount")(i,r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS);var A;return t[16]!==b||t[17]!==f||t[18]!==w||t[19]!==N||t[20]!==S||t[21]!==n||t[22]!==R||t[23]!==g||t[24]!==L||t[25]!==i||t[26]!==l?(A=u.jsx(r("MWInboxInfoPhotoGallery.react"),{backupState:f,getPlayableUrl:w,getPreviewUrl:N,hasMore:S,isBackButtonPressed:n,isLoading:R,isRestoringFromEB:g,media:b,navigateToRouteForMediaViewer:!1,onLoadMore:L,threadKey:i,threadType:l}),t[16]=b,t[17]=f,t[18]=w,t[19]=N,t[20]=S,t[21]=n,t[22]=R,t[23]=g,t[24]=L,t[25]=i,t[26]=l,t[27]=A):A=t[27],A}l.default=_}),98);
__d("MAWEndToEndEncryptionKeysSection.react",["fbt","MWInboxInfoButton.react","MWXIconForListCell.react","MWXIconLock","cr:7169","react","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(11),a=e.threadKey,i;t[0]!==a?(i={threadKey:a},t[0]=a,t[1]=i):i=t[1];var l=r("useMWXEntryPointDialog")(n("cr:7169"),i),c=l[0],d=l[1],m=l[2],p,_;t[2]===Symbol.for("react.memo_cache_sentinel")?(p=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconLock")}),_=s._(/*BTDS*/"Verify end-to-end encryption"),t[2]=p,t[3]=_):(p=t[2],_=t[3]);var f;t[4]!==c||t[5]!==a?(f=function(){return c({threadKey:a})},t[4]=c,t[5]=a,t[6]=f):f=t[6];var g;return t[7]!==d||t[8]!==m||t[9]!==f?(g=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:p,label:_,onHoverIn:d,onHoverOut:m,onPress:f,testid:void 0}),t[7]=d,t[8]=m,t[9]=f,t[10]=g):g=t[10],g}l.default=c}),226);
__d("MAWEphemeralMessagesSettingsSectionButton.react",["fbt","JSResourceForInteraction","MWInboxInfoButton.react","MWXIconDisappearingMessage","MWXIconForListCell.react","react","react-compiler-runtime","useMWXLazyDialog","useSecureThreadJid"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("JSResourceForInteraction")("MAWEphemeralSettingsDialog.react").__setRef("MAWEphemeralMessagesSettingsSectionButton.react"),d=s._(/*BTDS*/"Disappearing messages");function m(e){var t=o("react-compiler-runtime").c(10),n=e.canUseEphemeralSetting,a=e.onDismiss,i=e.threadKey,l=i,s=r("useSecureThreadJid")(l,"MAWEphemeralMessagesSettingsSectionButton"),m;t[0]!==s||t[1]!==l?(m={getThreadJid:s,threadKey:l},t[0]=s,t[1]=l,t[2]=m):m=t[2];var p=m,_=r("useMWXLazyDialog")(c),f=_[0],g;t[3]!==p||t[4]!==a||t[5]!==f?(g=function(){return f(p,a)},t[3]=p,t[4]=a,t[5]=f,t[6]=g):g=t[6];var h=g,y;return t[7]!==n||t[8]!==h?(y=n?u.jsx(r("MWInboxInfoButton.react"),{addOnStart:u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconDisappearingMessage")}),label:d,onPress:function(t){return h()}}):null,t[7]=n,t[8]=h,t[9]=y):y=t[9],y}l.default=m}),226);
__d("MAWInboxInfoPrivacyAndSupportSectionUnmuteThreadButton.react",["fbt","I64","MWInboxInfoButton.react","MWXIconBellCross","MWXIconForListCell.react","MessengerMuteUtils","react","react-compiler-runtime","useMWChatUnmuteThread"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(12),n=e.thread,a=r("useMWChatUnmuteThread")(),i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=s._(/*BTDS*/"Unmute notifications"),t[0]=i):i=t[0];var l=i,d;t[1]!==n.muteExpireTimeMs?(d=o("MessengerMuteUtils").mutedUntilLabel((u||(u=o("I64"))).equal(n.muteExpireTimeMs,(u||(u=o("I64"))).neg_one)?-1:(u||(u=o("I64"))).to_float(n.muteExpireTimeMs)/1e3),t[1]=n.muteExpireTimeMs,t[2]=d):d=t[2];var m=d,p=m!=null?m:void 0,_;t[3]===Symbol.for("react.memo_cache_sentinel")?(_=c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconBellCross")}),t[3]=_):_=t[3];var f;t[4]!==n||t[5]!==a?(f=function(){return a(n)},t[4]=n,t[5]=a,t[6]=f):f=t[6];var g;t[7]!==p?(g=p!=null&&{subLabel:p},t[7]=p,t[8]=g):g=t[8];var h;return t[9]!==f||t[10]!==g?(h=c.jsx(r("MWInboxInfoButton.react"),babelHelpers.extends({addOnStart:_,label:l,onPress:f,testid:void 0},g)),t[9]=f,t[10]=g,t[11]=h):h=t[11],h}l.default=d}),226);
__d("MAWSecureInboxInfoSharedFilesTab.react",["LSThreadMediaGalleryGroup","MAWDbMsg","MAWMpsGating","MWInboxInfoFileGallery.react","MWSharedAttachmentsSectionHooks","justknobx","react","useMAWLoadMoreThreadSharedAttachments","useMAWResetAttachmensRangeOnUnmount","useMWInboxInfoSharedTabRestoreLoop","useMWMaybeInboxInfoSharedTabRestoreLoop","useMWMediaLoadingQplLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef,m=function(){return o("MAWMpsGating").isMpsMessageRendering()?r("useMWMaybeInboxInfoSharedTabRestoreLoop"):r("useMWInboxInfoSharedTabRestoreLoop")};function p(e){var t=e.onFirstLoadedMedia,n=e.thread,a=o("MWSharedAttachmentsSectionHooks").useQueryFileAttachments(n.threadKey,{removeUnsentMessages:!1}),i=a[0],l=a[1],u=a[2],p=a[3],_=a[4],f=m(),g=f({selectedTab:"files",thread:n}),h=g.backupState,y=g.isRestoringFromEB,C=_!=null?_:!0,b=(u==null?void 0:u.lastLoadedMessageId)!=null?o("MAWDbMsg").toMsgId(u==null?void 0:u.lastLoadedMessageId):void 0,v=r("useMWMediaLoadingQplLogger")({entrypoint:"file_gallery",threadType:n.threadType}),S=r("useMAWLoadMoreThreadSharedAttachments")({earliestLoadedMediaMessageId:b!=null?b:void 0,hasMoreBefore:_,mediaGalleryGroup:r("LSThreadMediaGalleryGroup").FILES_ONLY,minTimestampMs:p,pageSize:r("justknobx")._("1132"),qplLogger:v,threadKey:n.threadKey}),R=d(!1),L=o("MWSharedAttachmentsSectionHooks").useLoader({attachmentsRange:u,hasMore:C,loadMore:S,logLoadMediaCancel:v.logLoadMediaCancel,logLoadMediaSuccess:v.logLoadMediaSuccess,media:i}),E=L[0],k=L[1],I=L[2];return r("useMAWResetAttachmensRangeOnUnmount")(n.threadKey,r("LSThreadMediaGalleryGroup").FILES_ONLY),c(function(){R.current===!1&&I===!0&&(R.current=!0,t(i))},[I,i,t]),s.jsx(r("MWInboxInfoFileGallery.react"),{backupState:h,files:i,hasMore:C,isLoading:E,isRestoringFromEB:y,onLoadMore:k,threadKey:n.threadKey,threadType:n.threadType})}p.displayName=p.name+" [from "+i.id+"]",l.default=p}),98);
__d("MWInboxInfoListItem.react",["MWXColumnItem.react","MWXPressable.react","MWXRow.react","MWXRowItem.react","MWXTextPairing.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo,c={containerRow:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",$$css:!0},contentItem:{paddingTop:"xz9dl7a",paddingInlineEnd:"xpdmqnj",paddingBottom:"xsag5q8",paddingInlineStart:"x1g0dm76",$$css:!0},mediaItem:{alignItems:"x6s0dn4",backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",display:"x78zum5",height:"xdd8jsf",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",width:"xvni27",$$css:!0},pressable:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(14),n=e.mediaElement,a=e.onPress,i=e.subtitle,l=e.title,u=e.url,d;t[0]!==u?(d={target:"_blank",url:u},t[0]=u,t[1]=d):d=t[1];var p=d,_;t[2]!==n?(_=s.jsx(r("MWXRowItem.react"),{xstyle:c.mediaItem,children:n}),t[2]=n,t[3]=_):_=t[3];var f;t[4]!==i||t[5]!==l?(f=s.jsx(r("MWXRowItem.react"),{expanding:!0,xstyle:c.contentItem,children:s.jsx(r("MWXTextPairing.react"),{body:i,bodyColor:"secondary",headline:l,headlineLineLimit:1,level:4})}),t[4]=i,t[5]=l,t[6]=f):f=t[6];var g;t[7]!==_||t[8]!==f?(g=s.jsxs(r("MWXRow.react"),{expanding:!0,verticalAlign:"center",xstyle:c.containerRow,children:[_,f]}),t[7]=_,t[8]=f,t[9]=g):g=t[9];var h;return t[10]!==p||t[11]!==a||t[12]!==g?(h=s.jsx(r("MWXColumnItem.react"),{children:s.jsx(r("MWXPressable.react"),{display:"inline",linkProps:p,onPress:a,overlayDisabled:!0,xstyle:m,children:g})}),t[10]=p,t[11]=a,t[12]=g,t[13]=h):h=t[13],h}function m(){return[c.pressable]}l.MWInboxInfoListItem=d}),98);
__d("isValidHttpURL",[],(function(t,n,r,o,a,i){"use strict";var e=/^http(s)?:\/\/(([\w-]+\.)+(xn--[\w-]+|\w+)|\[([\da-f]{0,4}:)*(?:[\da-f]{1,4}|(?:(?:\d{1,3}\.){3}\d{1,3}))\])(:[0-9]+)?([/\?].*)?$/i,l=/^https:\/\/(([\w-]+\.)+(xn--[\w-]+|\w+)|\[([\da-f]{0,4}:)*(?:[\da-f]{1,4}|(?:(?:\d{1,3}\.){3}\d{1,3}))\])(:[0-9]+)?([/\?].*)?$/i;function s(t,n){return n===void 0&&(n=!1),t.match(n?l:e)!==null}i.default=s}),66);
__d("MWInboxInfoSharedLink.react",["CometPlaceholder.react","FDSImageCover.react","LSMediaUrlAttachment","MWInboxInfoListItem.react","MWMediaGalleryRenderQpl","MWV2AttachmentLoadingPlaceholder.react","MWXIconLink","MWXIconStrict.react","ReQL","ReQLSuspense","isValidHttpURL","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useEffect,d=60,m=350,p={loadingPlaceholder:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",$$css:!0}};function _(e){var t=o("react-compiler-runtime").c(9),n=e.attachment,a=e.onPress,i=e.threadType,l=o("MWMediaGalleryRenderQpl").useMediaGalleryRenderQpl(n,i),s;t[0]!==l?(s=u.jsx(r("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWInboxInfoSharedLink.Suspense",height:d,mediaRenderQpl:l,width:m,xstyle:p.loadingPlaceholder}),t[0]=l,t[1]=s):s=t[1];var c;t[2]!==n||t[3]!==l||t[4]!==a?(c=u.jsx(f,{attachment:n,mediaRenderQpl:l,onPress:a}),t[2]=n,t[3]=l,t[4]=a,t[5]=c):c=t[5];var _;return t[6]!==s||t[7]!==c?(_=u.jsx(r("CometPlaceholder.react"),{fallback:s,name:"MWInboxInfoSharedLink.Suspense",children:c}),t[6]=s,t[7]=c,t[8]=_):_=t[8],_}function f(t){var n,a,l,s=o("react-compiler-runtime").c(24),d=t.attachment,m=t.mediaRenderQpl,p=t.onPress,_=(e||(e=r("useReStore")))(),f,g;s[0]!==d.defaultCtaId||s[1]!==_?(f=function(){var e=d.defaultCtaId;return e!=null?o("ReQL").fromTableAscending(_.tables.attachment_ctas).getKeyRange(e):o("ReQL").empty()},g=[_,d.defaultCtaId],s[0]=d.defaultCtaId,s[1]=_,s[2]=f,s[3]=g):(f=s[2],g=s[3]);var h=o("ReQLSuspense").useFirst(f,g,i.id+":78"),y;s[4]!==d?(y=o("LSMediaUrlAttachment").previewUrl(d),s[4]=d,s[5]=y):y=s[5];var C=y,b;s[6]!==d?(b=o("LSMediaUrlAttachment").faviconUrl(d),s[6]=d,s[7]=b):b=s[7];var v=b,S,R;s[8]!==v||s[9]!==m||s[10]!==C?(S=function(){C==null&&v==null&&(m==null||m.endSuccess())},R=[C,v,m],s[8]=v,s[9]=m,s[10]=C,s[11]=S,s[12]=R):(S=s[11],R=s[12]),c(S,R);var L=h==null?void 0:h.actionUrl,E=d.defaultCtaType==="xma_web_url"||r("isValidHttpURL")(L!=null?L:"");if(L==null||!E)return null;var k=(n=d.titleText)!=null?n:L,I=(a=d.accessibilitySummaryText)!=null?a:k,T;s[13]!==I||s[14]!==v||s[15]!==m||s[16]!==C?(T=C!=null?u.jsx(r("FDSImageCover.react"),{alt:I,onError:function(){return m==null?void 0:m.endFail("load-image-error")},onLoad:function(){return m==null?void 0:m.endSuccess()},src:C}):v!=null?u.jsx(r("FDSImageCover.react"),{alt:I,onError:function(){return m==null?void 0:m.endFail("load-image-error")},onLoad:function(){return m==null?void 0:m.endSuccess()},src:v}):u.jsx(r("MWXIconStrict.react"),{color:"primary",icon:r("MWXIconLink"),size:16}),s[13]=I,s[14]=v,s[15]=m,s[16]=C,s[17]=T):T=s[17];var D=T,x=(l=d.subtitleText)!=null?l:"",$;return s[18]!==p||s[19]!==D||s[20]!==x||s[21]!==k||s[22]!==L?($=u.jsx(o("MWInboxInfoListItem.react").MWInboxInfoListItem,{mediaElement:D,onPress:p,subtitle:x,title:k,url:L}),s[18]=p,s[19]=D,s[20]=x,s[21]=k,s[22]=L,s[23]=$):$=s[23],$}l.default=_}),98);
__d("MAWSecureInboxInfoSharedLinksTab.react",["BaseTheme.react","CometInfiniteScrollTrigger.react","FDSProgressIndicator.react","LSThreadMediaGalleryGroup","MWInboxInfoSharedContentEmptyTab.react","MWInboxInfoSharedContentTheme","MWInboxInfoSharedLink.react","MWSharedAttachmentsSectionHooks","MWXColumn.react","MWXColumnItem.react","emptyFunction","justknobx","react","react-compiler-runtime","useMAWLoadMoreThreadSharedAttachments","useMAWResetAttachmensRangeOnUnmount","useMWMediaLoadingQplLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect,c={progressIndicator:{display:"x78zum5",justifyContent:"xl56j7k",marginTop:"x1xmf6yo",paddingTop:"x123j3cw",paddingInlineEnd:"x1gabggj",paddingBottom:"xs9asl8",paddingInlineStart:"xaso8d8",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(32),n=e.thread,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={removeUnsentMessages:!0},t[0]=a):a=t[0];var i=o("MWSharedAttachmentsSectionHooks").useQueryLinkAttachments(n.threadKey,a),l=i[0],d=i[2],m=i[3],p=i[4],_;t[1]!==n.threadType?(_={entrypoint:"link_gallery_test",threadType:n.threadType},t[1]=n.threadType,t[2]=_):_=t[2];var f=r("useMWMediaLoadingQplLogger")(_),g=f.logLoadMediaStart,h=f.logLoadMediaSuccess,y;t[3]!==g||t[4]!==h?(y=function(){g(),h({fetchedMediaCount:0,startMediaCount:0})},t[3]=g,t[4]=h,t[5]=y):y=t[5];var C;t[6]===Symbol.for("react.memo_cache_sentinel")?(C=[],t[6]=C):C=t[6],u(y,C);var b=p!=null?p:!1,v;t[7]===Symbol.for("react.memo_cache_sentinel")?(v=r("justknobx")._("1132"),t[7]=v):v=t[7];var S;t[8]!==p||t[9]!==m||t[10]!==n.threadKey?(S={hasMoreBefore:p,mediaGalleryGroup:r("LSThreadMediaGalleryGroup").LINKS,minTimestampMs:m,pageSize:v,threadKey:n.threadKey},t[8]=p,t[9]=m,t[10]=n.threadKey,t[11]=S):S=t[11];var R=r("useMAWLoadMoreThreadSharedAttachments")(S),L;t[12]!==l||t[13]!==d||t[14]!==b||t[15]!==R?(L={attachmentsRange:d,hasMore:b,loadMore:R,media:l},t[12]=l,t[13]=d,t[14]=b,t[15]=R,t[16]=L):L=t[16];var E=o("MWSharedAttachmentsSectionHooks").useLoader(L),k=E[0],I=E[1];if(r("useMAWResetAttachmensRangeOnUnmount")(n.threadKey,r("LSThreadMediaGalleryGroup").LINKS),l.length===0&&!b){var T;return t[17]!==n.threadKey?(T=s.jsx(r("MWInboxInfoSharedContentEmptyTab.react"),{contentType:"links",threadKey:n.threadKey}),t[17]=n.threadKey,t[18]=T):T=t[18],T}var D;if(t[19]!==l||t[20]!==n.threadType){var x;t[22]!==n.threadType?(x=function(t){return s.jsx(r("MWXColumnItem.react"),{children:s.jsx(r("MWInboxInfoSharedLink.react"),{attachment:t,onPress:r("emptyFunction"),threadType:n.threadType})},t.messageId)},t[22]=n.threadType,t[23]=x):x=t[23],D=l.map(x),t[19]=l,t[20]=n.threadType,t[21]=D}else D=t[21];var $;t[24]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(r("FDSProgressIndicator.react"),{size:"default"}),t[24]=$):$=t[24];var P;t[25]!==b||t[26]!==k||t[27]!==I?(P=s.jsx(r("MWXColumnItem.react"),{children:s.jsx(r("CometInfiniteScrollTrigger.react"),{hasMore:b,isLoading:k,onLoadMore:I,xstyle:c.progressIndicator,children:$})},"infinite_scroll_trigger"),t[25]=b,t[26]=k,t[27]=I,t[28]=P):P=t[28];var N;return t[29]!==P||t[30]!==D?(N=s.jsx(r("BaseTheme.react"),{config:o("MWInboxInfoSharedContentTheme").config,children:s.jsxs(r("MWXColumn.react"),{hasDividers:!0,paddingHorizontal:16,paddingVertical:8,spacing:20,children:[D,P]})}),t[29]=P,t[30]=D,t[31]=N):N=t[31],N}l.default=d}),98);
__d("MAWSecureInboxInfoSharedMediaTab.react",["FBLogger","LSThreadMediaGalleryGroup","MAWDbMsg","MWInboxInfoPhotoGallery.react","MWSharedAttachmentsSectionHooks","justknobx","react","react-compiler-runtime","useMAWLoadMoreThreadSharedAttachments","useMAWQuerySecureMediaAttachments","useMAWResetAttachmensRangeOnUnmount","useMWMaybeInboxInfoSharedTabRestoreLoop","useMWMediaLoadingQplLogger","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useMWV2MediaViewerSecurePreviewUrl_CausesSuspense"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useRef;function p(e){var t=o("react-compiler-runtime").c(40),n=e.isBackButtonPressed,a=e.onFirstLoadedMedia,i=e.thread,l;t[0]!==i?(l={selectedTab:"media",thread:i},t[0]=i,t[1]=l):l=t[1];var u=r("useMWMaybeInboxInfoSharedTabRestoreLoop")(l),c=u.backupState,p=u.isRestoringFromEB,_=m(!1),f=r("useMAWQuerySecureMediaAttachments")(i.threadKey),g=f[0],h=f[2],y=f[3],C=f[4],b=f[5],v=C!=null?C:!0,S;t[2]!==(h==null?void 0:h.lastLoadedMessageId)?(S=(h==null?void 0:h.lastLoadedMessageId)!=null?o("MAWDbMsg").toMsgId(h==null?void 0:h.lastLoadedMessageId):void 0,t[2]=h==null?void 0:h.lastLoadedMessageId,t[3]=S):S=t[3];var R=S,L;t[4]!==i.threadType?(L={entrypoint:"media_gallery",threadType:i.threadType},t[4]=i.threadType,t[5]=L):L=t[5];var E=r("useMWMediaLoadingQplLogger")(L),k=R!=null?R:void 0,I;t[6]===Symbol.for("react.memo_cache_sentinel")?(I=r("justknobx")._("1132"),t[6]=I):I=t[6];var T;t[7]!==C||t[8]!==y||t[9]!==E||t[10]!==k||t[11]!==i.threadKey?(T={earliestLoadedMediaMessageId:k,hasMoreBefore:C,mediaGalleryGroup:r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS,minTimestampMs:y,pageSize:I,qplLogger:E,threadKey:i.threadKey},t[7]=C,t[8]=y,t[9]=E,t[10]=k,t[11]=i.threadKey,t[12]=T):T=t[12];var D=r("useMAWLoadMoreThreadSharedAttachments")(T),x;t[13]!==h||t[14]!==v||t[15]!==D||t[16]!==g||t[17]!==E.logLoadMediaCancel||t[18]!==E.logLoadMediaSuccess?(x={attachmentsRange:h,hasMore:v,loadMore:D,logLoadMediaCancel:E.logLoadMediaCancel,logLoadMediaSuccess:E.logLoadMediaSuccess,media:g},t[13]=h,t[14]=v,t[15]=D,t[16]=g,t[17]=E.logLoadMediaCancel,t[18]=E.logLoadMediaSuccess,t[19]=x):x=t[19];var $=o("MWSharedAttachmentsSectionHooks").useLoader(x),P=$[0],N=$[1],M=$[2],w,A;t[20]!==M||t[21]!==g||t[22]!==a?(w=function(){_.current===!1&&M===!0&&(_.current=!0,a(g))},A=[M,g,a],t[20]=M,t[21]=g,t[22]=a,t[23]=w,t[24]=A):(w=t[23],A=t[24]),d(w,A);var F=r("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense")(),O=r("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")(),B;t[25]!==F?(B=function(t,n,o){var e=F(t,n,o);return e===""&&r("FBLogger")("messenger_web_media").warn("MAW Shared Media Gallery previewUrl is an empty string"),e},t[25]=F,t[26]=B):B=t[26];var W=B;r("useMAWResetAttachmensRangeOnUnmount")(i.threadKey,r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS);var q;return t[27]!==c||t[28]!==O||t[29]!==W||t[30]!==v||t[31]!==n||t[32]!==P||t[33]!==p||t[34]!==g||t[35]!==b||t[36]!==N||t[37]!==i.threadKey||t[38]!==i.threadType?(q=s.jsx(r("MWInboxInfoPhotoGallery.react"),{backupState:c,getPlayableUrl:O,getPreviewUrl:W,hasMore:v,isBackButtonPressed:n,isLoading:P,isRestoringFromEB:p,media:g,mediaWithMessages:b,navigateToRouteForMediaViewer:!1,onLoadMore:N,threadKey:i.threadKey,threadType:i.threadType}),t[27]=c,t[28]=O,t[29]=W,t[30]=v,t[31]=n,t[32]=P,t[33]=p,t[34]=g,t[35]=b,t[36]=N,t[37]=i.threadKey,t[38]=i.threadType,t[39]=q):q=t[39],q}l.default=p}),98);
__d("MDSBadgeContainer.react",["BaseStyledBadgeContainer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.badge,a=e.badgeAlign,i=e.children,l=e.xstyle,u=a===void 0?"right":a,c;return t[0]!==n||t[1]!==u||t[2]!==i||t[3]!==l?(c=s.jsx(r("BaseStyledBadgeContainer.react"),{badge:n,badgeAlign:u,expanding:!0,xstyle:l,children:i}),t[0]=n,t[1]=u,t[2]=i,t[3]=l,t[4]=c):c=t[4],c}l.default=u}),98);
__d("MDSChip.react",["MDSPressable.react","MDSText.react","MWXIconStrict.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["color","colorOverride","icon","label","ref"],s,u=s||(s=o("react")),c={container:{alignItems:"x6s0dn4",borderStartStartRadius:"xal68kn",borderStartEndRadius:"x51dqfy",borderEndEndRadius:"x1w4cqa3",borderEndStartRadius:"x1byqp33",display:"x3nfvp2",rowGap:"x1dbijih",columnGap:"x1ned7t2",height:"x1fgtraw",$$css:!0},green:{backgroundColor:"xxdwju6",$$css:!0},icon:{paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},paddingIconAndText:{paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,$$css:!0},paddingIconOnly:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},paddingTextOnly:{paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0},primary:{backgroundColor:"x1rl232d",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(25),a,i,l,s,d,m;n[0]!==t?(m=t.color,a=t.colorOverride,i=t.icon,l=t.label,d=t.ref,s=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=d,n[6]=m):(a=n[1],i=n[2],l=n[3],s=n[4],d=n[5],m=n[6]);var p=m===void 0?"primary":m,_;n[7]!==a?(_=a!=null?{backgroundColor:a}:void 0,n[7]=a,n[8]=_):_=n[8];var f=c[p],g=i!=null&&c.paddingIconOnly,h=l!=null&&c.paddingTextOnly,y=i!=null&&l!=null&&c.paddingIconAndText,C;n[9]!==f||n[10]!==g||n[11]!==h||n[12]!==y?(C=[c.container,f,g,h,y],n[9]=f,n[10]=g,n[11]=h,n[12]=y,n[13]=C):C=n[13];var b;n[14]!==i?(b=i!=null?u.jsx("div",{className:"x1iorvi4 x11lfxj5 xjkvuk6 x135b78x",children:u.jsx(r("MWXIconStrict.react"),{color:"white",icon:i,isDecorative:!0,size:16})}):null,n[14]=i,n[15]=b):b=n[15];var v;n[16]!==l?(v=l!=null?u.jsx(r("MDSText.react"),{align:"center",color:"white",numberOfLines:1,type:"button2",children:l}):null,n[16]=l,n[17]=v):v=n[17];var S;return n[18]!==s||n[19]!==d||n[20]!==_||n[21]!==C||n[22]!==b||n[23]!==v?(S=u.jsxs(r("MDSPressable.react"),babelHelpers.extends({ref:d,style:_,xstyle:C},s,{children:[b,v]})),n[18]=s,n[19]=d,n[20]=_,n[21]=C,n[22]=b,n[23]=v,n[24]=S):S=n[24],S}l.default=d}),98);
__d("MDSColumnHideable.react",["BaseView.react","BaseViewHideable.react","MDSColumnContext","MDSColumnItem.react","MDSColumnItemContext","isIE11OrGreater","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","align","children","expanding","hasDividers","paddingHorizontal","paddingTop","paddingVertical","spacing","verticalAlign","xstyle"],s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useMemo,p={expanding:{flexBasis:"x1l7klhg",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",$$css:!0},expandingIE11:{flexBasis:"xdl72j9",$$css:!0},inner:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",minHeight:"x2lwn1j",$$css:!0},root:{boxSizing:"x9f619",display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0}},_={0:{paddingTop:"xexx8yu",$$css:!0},4:{paddingTop:"x1iorvi4",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0}},f={4:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",$$css:!0},8:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},12:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},16:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0},20:{paddingTop:"x1cnzs8",paddingBottom:"xx6bls6",$$css:!0}},g={bottom:{justifyContent:"x13a6bvl",$$css:!0},center:{justifyContent:"xl56j7k",$$css:!0},"space-between":{justifyContent:"x1qughib",$$css:!0}};function h(t){var n=o("react-compiler-runtime").c(43),a,i,l,s,c,m,h,y,C,b,v,S;n[0]!==t?(s=t.ref,c=t.align,a=t.children,m=t.expanding,h=t.hasDividers,y=t.paddingHorizontal,i=t.paddingTop,C=t.paddingVertical,b=t.spacing,v=t.verticalAlign,S=t.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=m,n[7]=h,n[8]=y,n[9]=C,n[10]=b,n[11]=v,n[12]=S):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],m=n[6],h=n[7],y=n[8],C=n[9],b=n[10],v=n[11],S=n[12]);var L=c===void 0?null:c,E=m===void 0?!1:m,k=h===void 0?!1:h,I=y===void 0?null:y,T=C===void 0?0:C,D=b===void 0?null:b,x=v===void 0?"top":v,$=d(r("MDSColumnContext")),P;n[13]!==L||n[14]!==k||n[15]!==I||n[16]!==D?(P={align:L,hasDividers:k,paddingHorizontal:I,spacing:D},n[13]=L,n[14]=k,n[15]=I,n[16]=D,n[17]=P):P=n[17];var N=P,M;n[18]!==E?(M=E===!0&&[p.expanding,r("isIE11OrGreater")&&p.expandingIE11],n[18]=E,n[19]=M):M=n[19];var w=f[T],A=i!=null&&_[i],F;n[20]!==w||n[21]!==A||n[22]!==M||n[23]!==S?(F=[p.root,M,w,A,S],n[20]=w,n[21]=A,n[22]=M,n[23]=S,n[24]=F):F=n[24];var O=x!=="top"&&g[x],B;n[25]!==O?(B=[p.inner,O],n[25]=O,n[26]=B):B=n[26];var W;n[27]!==a?(W=R(a),n[27]=a,n[28]=W):W=n[28];var q;n[29]!==N||n[30]!==W?(q=u.jsx(r("MDSColumnContext").Provider,{value:N,children:W}),n[29]=N,n[30]=W,n[31]=q):q=n[31];var U;n[32]!==B||n[33]!==q?(U=u.jsx(r("BaseView.react"),{xstyle:B,children:q}),n[32]=B,n[33]=q,n[34]=U):U=n[34];var V;n[35]!==l||n[36]!==s||n[37]!==F||n[38]!==U?(V=u.jsx(r("BaseViewHideable.react"),babelHelpers.extends({},l,{ref:s,xstyle:F,children:U})),n[35]=l,n[36]=s,n[37]=F,n[38]=U,n[39]=V):V=n[39];var H=V;if($!=null){var G=E!=null?E:void 0,z;return n[40]!==H||n[41]!==G?(z=u.jsx(r("MDSColumnItem.react"),{expanding:G,children:H}),n[40]=H,n[41]=G,n[42]=z):z=n[42],z}return H}var y=h,C={isFirst:!0,isLast:!1},b={isFirst:!1,isLast:!0},v={isFirst:!0,isLast:!0},S={isFirst:!1,isLast:!1};function R(e){return u.Children.toArray(e).map(function(e,t,n){var o=t===0,a=t===n.length-1,i=o&&a?v:o?C:a?b:S;return u.jsx(r("MDSColumnItemContext").Provider,{value:i,children:e},t)})}l.default=y}),98);
__d("MDSColumnItemHideable.react",["BaseView.react","BaseViewHideable.react","CometErrorBoundary.react","CometPlaceholder.react","MDSColumnContext","MDSColumnItemContext","isIE11OrGreater","react","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["align","children","expanding","fallback","paddingHorizontal","paddingTop","paddingVertical","placeholder","verticalAlign"],u=["fallback"],c=["placeholder"],d,m,p=m||(m=o("react")),_=m.useContext,f={divider:{borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},expanding:{flexBasis:"x1l7klhg",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minHeight:"x2lwn1j",$$css:!0},expandingIE11:{flexBasis:"xdl72j9",$$css:!0},firstChildDisplay:{display:"x1s85apg",$$css:!0},firstChildMargin:{marginTop:"xdj266r",$$css:!0},lastChildMargin:{marginBottom:"xat24cr",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"x2lah0s",maxWidth:"x193iq5w",$$css:!0}},g={center:{alignItems:"x6s0dn4",$$css:!0},end:{alignItems:"xuk3077",$$css:!0},start:{alignItems:"x1cy8zhl",$$css:!0}},h={4:{paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,$$css:!0},8:{paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,$$css:!0},12:{paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0},16:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,$$css:!0},20:{paddingInlineStart:"x106a9eq",paddingInlineEnd:"x1xnnf8n",paddingLeft:null,paddingRight:null,$$css:!0}},y={0:{paddingTop:"xexx8yu",$$css:!0},4:{paddingTop:"x1iorvi4",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0},24:{paddingTop:"x1p5oq8j",$$css:!0},40:{paddingTop:"x13zrc24",$$css:!0}},C={4:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",$$css:!0},8:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",$$css:!0},12:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},16:{paddingTop:"xyamay9",paddingBottom:"x1l90r2v",$$css:!0},20:{paddingTop:"x1cnzs8",paddingBottom:"xx6bls6",$$css:!0},24:{paddingTop:"x1p5oq8j",paddingBottom:"xwxc41k",$$css:!0},40:{paddingTop:"x13zrc24",paddingBottom:"x1t1ogtf",$$css:!0}},b={4:{marginTop:"xr9ek0c",marginBottom:"xjpr12u",$$css:!0},8:{marginTop:"x1gslohp",marginBottom:"x12nagc",$$css:!0},12:{marginTop:"x1k70j0n",marginBottom:"xzueoph",$$css:!0},16:{marginTop:"x1xmf6yo",marginBottom:"x1e56ztr",$$css:!0},20:{marginTop:"x1anpbxc",marginBottom:"xyorhqc",$$css:!0},24:{marginTop:"x14vqqas",marginBottom:"xod5an3",$$css:!0},32:{marginTop:"xw7yly9",marginBottom:"x1yztbdb",$$css:!0},40:{marginTop:"x1sy10c2",marginBottom:"xieb3on",$$css:!0}},v={bottom:{justifyContent:"x13a6bvl",$$css:!0},center:{justifyContent:"xl56j7k",$$css:!0},"space-between":{justifyContent:"x1qughib",$$css:!0}},S={4:{marginInlineStart:"xdwrcjd",marginInlineEnd:"x2fvf9",marginLeft:null,marginRight:null,$$css:!0},8:{marginInlineStart:"x13fj5qh",marginInlineEnd:"x1xegmmw",marginLeft:null,marginRight:null,$$css:!0},12:{marginInlineStart:"x1diwwjn",marginInlineEnd:"xbmvrgn",marginLeft:null,marginRight:null,$$css:!0},16:{marginInlineStart:"xyqm7xq",marginInlineEnd:"x1ys307a",marginLeft:null,marginRight:null,$$css:!0},20:{marginInlineStart:"xqsn43r",marginInlineEnd:"x3aesyq",marginLeft:null,marginRight:null,$$css:!0}};function R(t){var n,o,a,l,m=t.ref,L=babelHelpers.objectWithoutPropertiesLoose(t,e),E=(n=_(r("MDSColumnContext")))!=null?n:{},k=L.align,I=k===void 0?(o=E.align)!=null?o:"stretch":k,T=L.children,D=L.expanding,x=D===void 0?!1:D,$=L.fallback,P=L.paddingHorizontal,N=P===void 0?(a=E.paddingHorizontal)!=null?a:0:P,M=L.paddingTop,w=L.paddingVertical,A=w===void 0?0:w,F=L.placeholder,O=L.verticalAlign,B=O===void 0?"top":O,W=babelHelpers.objectWithoutPropertiesLoose(L,s),q=_(r("MDSColumnItemContext")),U=q.isFirst,V=q.isLast,H=(d||(d=r("stylex"))).compose(L.xstyle),G=p.jsxs(p.Fragment,{children:[E.hasDividers===!0&&p.jsx(r("BaseView.react"),{role:"separator",xstyle:[f.divider,S[(l=E.paddingHorizontal)!=null?l:0],U&&f.firstChildDisplay]}),p.jsx(r("BaseViewHideable.react"),babelHelpers.extends({},W,{ref:m,xstyle:[f.root,x&&[f.expanding,r("isIE11OrGreater")&&f.expandingIE11],I!=="stretch"&&g[I],B!=="top"&&v[B],h[N],C[A],M!=null&&y[M],E.spacing!=null&&[b[E.spacing],H.marginTop==null&&U&&f.firstChildMargin,H.marginBottom==null&&V&&f.lastChildMargin],L.xstyle],children:p.jsx(r("MDSColumnContext").Provider,{value:null,children:T})}))]});if($!==void 0){var z=L.fallback,j=babelHelpers.objectWithoutPropertiesLoose(L,u);$===null?G=p.jsx(r("CometErrorBoundary.react"),{children:G}):G=p.jsx(r("CometErrorBoundary.react"),{fallback:function(t,n){return p.jsx(R,babelHelpers.extends({},j,{ref:m,children:typeof $=="function"?$(t,n):$}))},children:G})}if(F!==void 0){var K=L.placeholder,Q=babelHelpers.objectWithoutPropertiesLoose(L,c);G=p.jsx(r("CometPlaceholder.react"),{fallback:F!=null?p.jsx(R,babelHelpers.extends({},Q,{ref:m,children:F})):null,name:i.id,children:G})}return G}R.displayName=R.name+" [from "+i.id+"]";var L=R;l.default=L}),98);
__d("MDSMWChatRTCInfoButtonIcon.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(14),n=e.fill,r=e.isInfoPanelOpen;if(r){var a;t[0]!==n?(a=s.jsx("path",{clipRule:"evenodd",d:"M18 29C24.0751 29 29 24.0751 29 18C29 11.9249 24.0751 7 18 7C11.9249 7 7 11.9249 7 18C7 24.0751 11.9249 29 18 29ZM19.5 18C19.5 18.8284 18.8284 19.5 18 19.5C17.1716 19.5 16.5 18.8284 16.5 18C16.5 17.1716 17.1716 16.5 18 16.5C18.8284 16.5 19.5 17.1716 19.5 18ZM23 19.5C23.8284 19.5 24.5 18.8284 24.5 18C24.5 17.1716 23.8284 16.5 23 16.5C22.1716 16.5 21.5 17.1716 21.5 18C21.5 18.8284 22.1716 19.5 23 19.5ZM14.5 18C14.5 18.8284 13.8284 19.5 13 19.5C12.1716 19.5 11.5 18.8284 11.5 18C11.5 17.1716 12.1716 16.5 13 16.5C13.8284 16.5 14.5 17.1716 14.5 18Z",fill:n,fillRule:"evenodd"}),t[0]=n,t[1]=a):a=t[1];var i;return t[2]!==n||t[3]!==a?(i=s.jsx("svg",{"aria-hidden":"true",fill:n,height:"28px",viewBox:"0 0 36 36",width:"28px",children:a}),t[2]=n,t[3]=a,t[4]=i):i=t[4],i}var l,u,c;t[5]!==n?(l=s.jsx("path",{d:"M12.5 18C12.5 19.2426 11.4926 20.25 10.25 20.25C9.00736 20.25 8 19.2426 8 18C8 16.7574 9.00736 15.75 10.25 15.75C11.4926 15.75 12.5 16.7574 12.5 18Z",fill:n}),u=s.jsx("path",{d:"M20.25 18C20.25 19.2426 19.2426 20.25 18 20.25C16.7574 20.25 15.75 19.2426 15.75 18C15.75 16.7574 16.7574 15.75 18 15.75C19.2426 15.75 20.25 16.7574 20.25 18Z",fill:n}),c=s.jsx("path",{d:"M25.75 20.25C26.9926 20.25 28 19.2426 28 18C28 16.7574 26.9926 15.75 25.75 15.75C24.5074 15.75 23.5 16.7574 23.5 18C23.5 19.2426 24.5074 20.25 25.75 20.25Z",fill:n}),t[5]=n,t[6]=l,t[7]=u,t[8]=c):(l=t[6],u=t[7],c=t[8]);var d;return t[9]!==n||t[10]!==l||t[11]!==u||t[12]!==c?(d=s.jsxs("svg",{"aria-hidden":"true",fill:n,height:"28px",viewBox:"0 0 36 36",width:"28px",children:[l,u,c]}),t[9]=n,t[10]=l,t[11]=u,t[12]=c,t[13]=d):d=t[13],d}l.default=u}),98);
__d("MDSNoProfilePictureSvg.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.size,r=n===void 0?36:n,a,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx("path",{clipRule:"evenodd",d:"M50 100C77.6142 100 100 77.6142 100 50C100 22.3858 77.6142 0 50 0C22.3858 0 0 22.3858 0 50C0 77.6142 22.3858 100 50 100Z",fill:"#9BA0A8",fillOpacity:"0.5",fillRule:"evenodd"}),i=s.jsx("path",{clipRule:"evenodd",d:"M50.8333 66.6665C38.6402 66.6665 28.2008 71.8541 23.6611 79.2551C23.4411 79.6156 23.3333 80.0346 23.3333 80.4556C23.3333 81.1559 23.6421 81.8291 24.1942 82.2709C31.4711 88.1171 40.7154 91.6665 50.8333 91.6665C60.9511 91.6665 70.1954 88.1171 77.4723 82.2709C78.0244 81.8291 78.3333 81.1559 78.3333 80.4556C78.3333 80.0346 78.2254 79.6156 78.0054 79.2551C73.4657 71.8541 63.0263 66.6665 50.8333 66.6665Z",fill:"white",fillOpacity:"0.5",fillRule:"evenodd"}),l=s.jsx("path",{clipRule:"evenodd",d:"M49.9991 16.6665C40.015 16.6665 31.6667 25.4126 31.6667 36.7616C31.6667 51.5425 40.1494 58.3332 49.9991 58.3332C59.8507 58.3332 68.3334 51.5425 68.3334 36.7616C68.3334 25.4126 59.9872 16.6665 49.9991 16.6665Z",fill:"white",fillOpacity:"0.5",fillRule:"evenodd"}),t[0]=a,t[1]=i,t[2]=l):(a=t[0],i=t[1],l=t[2]);var u;return t[3]!==r?(u=s.jsxs("svg",{fill:"none",height:r,viewBox:"0 0 100 100",width:r,children:[a,i,l]}),t[3]=r,t[4]=u):u=t[4],u}l.default=u}),98);
__d("MDotMeExtraData",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({MBS_FLAG:"1p"}),l=e;i.default=l}),66);
__d("MSGWebBloksBottomsheetContainer.react",["BaseModal.react","MWXDialog.react","MWXDialogHeader.react","WebBloksComponentContext","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){var t=o("react-compiler-runtime").c(10),n=e.children,a=e.containerConfig,i=o("WebBloksComponentContext").useWebBloksContext(),l=i.objectSet,u=i.renderNode,c;t[0]!==l.navigationManager?(c=function(){l.navigationManager.close("pop")},t[0]=l.navigationManager,t[1]=c):c=t[1];var d=c,m=a.navbar,p;t[2]!==m||t[3]!==d||t[4]!==u?(p=m!=null?o("WebBloksUtils").cast(u(m)):s.jsx(r("MWXDialogHeader.react"),{mdsTitleLayout:"block",onClose:d,withCloseButton:!0}),t[2]=m,t[3]=d,t[4]=u,t[5]=p):p=t[5];var _=p,f;return t[6]!==n||t[7]!==_||t[8]!==d?(f=s.jsx(r("BaseModal.react"),{stackingBehavior:"above-everything",children:s.jsx(r("MWXDialog.react"),{footer:null,header:_,onClose:d,children:n})}),t[6]=n,t[7]=_,t[8]=d,t[9]=f):f=t[9],f}l.default=c}),98);
__d("MSGWebBloksBottomsheetContainerConfig",["WebBloksContainerConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this)||this,n.navbar=t,n}babelHelpers.inheritsLoose(t,e),t.fromBloksModel=function(n){var e=n.get("navbar");return new t(e)};var n=t.prototype;return n.getIsOverlay=function(){return!0},t})(o("WebBloksContainerConfig").WebBloksContainerConfig);l.default=e}),98);
__d("MSGWebBloksBottomsheetNavbar",["MWXDialogHeader.react","WebBloksBooleanUtils","WebBloksComponentContext","react","react-compiler-runtime","translatedServerString"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){var t=o("react-compiler-runtime").c(23),n=e.node,a=o("WebBloksComponentContext").useWebBloksContext(),i=a.bloksContext,l=a.executeCatch,u=a.objectSet,c;t[0]!==n?(c=n.get("title"),c!=null&&(c=r("translatedServerString")(c)),t[0]=n,t[1]=c):c=t[1];var d,m;if(t[2]!==n){var p=n.get("leading_button");p!=null&&(m=p.get("type"),d=p.getExpression("on_click")),t[2]=n,t[3]=d,t[4]=m}else d=t[3],m=t[4];var _=m==="back"&&d!=null,f;t[5]!==i||t[6]!==l||t[7]!==d||t[8]!==m||t[9]!==n?(f=function(){m==="back"&&d!=null&&l(n,d,[i])},t[5]=i,t[6]=l,t[7]=d,t[8]=m,t[9]=n,t[10]=f):f=t[10];var g=f,h;t[11]!==i||t[12]!==l||t[13]!==d||t[14]!==m||t[15]!==n||t[16]!==u.navigationManager?(h=function(){m==="close"&&d!=null?l(n,d,[i]):u.navigationManager.close("pop")},t[11]=i,t[12]=l,t[13]=d,t[14]=m,t[15]=n,t[16]=u.navigationManager,t[17]=h):h=t[17];var y=h,C=n.get("hidden");if(o("WebBloksBooleanUtils").isTrue(C))return null;var b=_?g:void 0,v;return t[18]!==y||t[19]!==b||t[20]!==c||t[21]!==_?(v=s.jsx(r("MWXDialogHeader.react"),{mdsTitleLayout:"block",onBack:b,onClose:y,title:c,withBackButton:_,withCloseButton:!0}),t[18]=y,t[19]=b,t[20]=c,t[21]=_,t[22]=v):v=t[22],v}l.default=c}),98);
__d("MSGWebBloksContainerConfigs",["MSGWebBloksBottomsheetContainer.react","MSGWebBloksBottomsheetContainerConfig"],(function(t,n,r,o,a,i,l){"use strict";var e={"bk.data.screen.containerconfig.bottomsheet.Fb":{ContainerComponent:r("MSGWebBloksBottomsheetContainer.react"),ContainerConfig:r("MSGWebBloksBottomsheetContainerConfig")},"bk.data.screen.containerconfig.bottomsheet.Msg":{ContainerComponent:r("MSGWebBloksBottomsheetContainer.react"),ContainerConfig:r("MSGWebBloksBottomsheetContainerConfig")}};l.CONTAINER_CONFIGS=e}),98);
__d("webBloksVideoPlayerIDToControllerMap",[],(function(t,n,r,o,a,i){"use strict";var e=new Map,l=e;i.default=l}),66);
__d("MSGWebBloksVideoGetIsMutedV2",["webBloksVideoPlayerIDToControllerMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,o=t==null?void 0:t.get("media_id"),a=r("webBloksVideoPlayerIDToControllerMap").get(o);return(n=a==null?void 0:a.getCurrentState().muted)!=null?n:!1}l.default=e}),98);
__d("getMSGWebBloksVideoV2PlaybackState",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.ended?"playback_complete":e.seeking?"seeking":e.stalling?"buffering":e.playing?"playing":e.paused&&e.watchTimeMs===0?"prepared":e.paused?"paused":"unprepared"}i.default=e}),66);
__d("MSGWebBloksVideoGetPlaybackStateV3",["getMSGWebBloksVideoV2PlaybackState","webBloksVideoPlayerIDToControllerMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t==null?void 0:t.get("media_id"),o=r("webBloksVideoPlayerIDToControllerMap").get(n);if(o==null)return"unprepared";var a=o.getCurrentState();return r("getMSGWebBloksVideoV2PlaybackState")(a)}l.default=e}),98);
__d("MSGWebBloksVideoGetPositionV2",["webBloksVideoPlayerIDToControllerMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t==null?void 0:t.get("media_id"),o=r("webBloksVideoPlayerIDToControllerMap").get(n);return o==null?-1:Math.round(o.getPlayheadPosition()*1e3)}l.default=e}),98);
__d("MSGWebBloksVideoSendEventV2",["webBloksVideoPlayerIDToControllerMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var o=n==null?void 0:n.get("media_id"),a=r("webBloksVideoPlayerIDToControllerMap").get(o);if(a!=null)switch(t){case"play":a.play("user_initiated");break;case"pause":a.pause("user_initiated");break;case"mute":a.setMuted(!0,"user_initiated");break;case"unmute":a.setMuted(!1,"user_initiated");break}}l.default=e}),98);
__d("MSGWebBloksVideoSetPositionV2",["webBloksVideoPlayerIDToControllerMap"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var o=n==null?void 0:n.get("media_id"),a=r("webBloksVideoPlayerIDToControllerMap").get(o),i=a==null?void 0:a.getCurrentState(),l=t/1e3;!a||i&&l>i.duration||a.seek(l)}l.default=e}),98);
__d("VideoPlayerHTML5ApiWebVttState",["Bootloader","FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=this,n=e.onReady,o=e.onCaptionsLoaded,a=e.captionsDisplay;this.$1=null,this.source=null,this.captionsDisplay=null,this.$1=r("Bootloader").loadModules(["VideoPlayerWebVttCaptionsSource"],function(e){var r=new e({onCaptionsLoaded:o,onCaptionsChanged:function(n,r){t.captionsDisplay&&t.captionsDisplay.handleCaptionsChanged(n,r)}});t.source=r,t.captionsDisplay=a,n(t)},"VideoPlayerHTML5ApiWebVttState")}var t=e.prototype;return t.loadFromUrl=function(t){var e=this.source;if(!e)throw r("FBLogger")("video_captions").mustfixThrow("[VideoPlayerHTML5ApiWebVttState] Called loadFromUrl when not ready; call from onReady callback.");e.loadFromUrl(t)},t.getCurrentScreenRepresentation=function(){return this.source?this.source.getCurrentScreenRepresentation():null},t.destroy=function(){this.$1&&(this.$1.remove(),this.$1=null),this.captionsDisplay&&(this.captionsDisplay.destroy(),this.captionsDisplay=null),this.source&&(this.source.destroy(),this.source=null)},e})();l.default=e}),98);
__d("MSGWebBloksVideoV2",["CometAudioManager.react","CometPlaceholder.react","CometRelayEnvironmentProvider","MWVideoPlayerControllerContext.react","MWXGlimmer.react","VideoAutoplayManagerX.react","VideoPlayerHTML5ApiWebVttState","WebBloksComponentContext","deferredLoadComponent","getMSGWebBloksVideoV2PlaybackState","react","react-compiler-runtime","requireDeferredForDisplay","webBloksVideoPlayerIDToControllerMap"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useContext,m=u.useEffect,p=u.useMemo,_=u.useRef,f=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWChatVideoPlayer.react").__setRef("MSGWebBloksVideoV2")),g={glimmer:{borderStartStartRadius:"x1xn7y0n",borderStartEndRadius:"x1uxb8k9",borderEndEndRadius:"x1vmbcc8",borderEndStartRadius:"x16xm01d",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function h(e){var t=o("react-compiler-runtime").c(4),n=e.node,a=_(null),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={ref:a},t[0]=l):l=t[0];var s=l,u;t[1]===Symbol.for("react.memo_cache_sentinel")?(u=c.jsx(r("MWXGlimmer.react"),{index:0,xstyle:g.glimmer}),t[1]=u):u=t[1];var d;return t[2]!==n?(d=c.jsx(r("CometPlaceholder.react"),{fallback:u,name:i.id,children:c.jsx(r("CometRelayEnvironmentProvider"),{children:c.jsx(r("VideoAutoplayManagerX.react"),{children:c.jsx(r("CometAudioManager.react"),{children:c.jsx(r("MWVideoPlayerControllerContext.react").Provider,{value:s,children:c.jsx(y,{node:n})})})})})}),t[2]=n,t[3]=d):d=t[3],d}function y(e){var t,n=e.node,a=o("WebBloksComponentContext").useWebBloksContext(),i=d(r("MWVideoPlayerControllerContext.react")),l=(t=n.get("player_identifier"))==null?void 0:t.get("media_id");m(function(){if(l!=null){var e=i.ref.current;return e!=null&&!r("webBloksVideoPlayerIDToControllerMap").has(l)&&r("webBloksVideoPlayerIDToControllerMap").set(l,e),function(){r("webBloksVideoPlayerIDToControllerMap").delete(l)}}},[i.ref,l]);var s=n.getExpression("on_state_change"),u=n.getExpression("on_progress_update"),p=_(null);m(function(){var e=i.ref.current,t=null;return e!=null&&(t=e.subscribe(function(){var t=e.getCurrentState();if(s!=null){var o=r("getMSGWebBloksVideoV2PlaybackState")(t),i=p.current;o==="playing"&&i!=="playing"?a.executeCatch(n,s,["playing",a]):o==="paused"&&i==="paused"?a.executeCatch(n,s,["paused",a]):o==="error"&&i==="error"?a.executeCatch(n,s,["error",a]):o==="seeking"&&i==="seeking"?a.executeCatch(n,s,["seeking",a]):o==="buffering"&&i==="buffering"?a.executeCatch(n,s,["buffering",a]):o==="playback_complete"&&i==="playback_complete"?a.executeCatch(n,s,["playback_complete",a]):o==="prepared"&&i==="prepared"?a.executeCatch(n,s,["prepared",a]):o==="unprepared"&&i==="unprepared"&&a.executeCatch(n,s,["unprepared",a]),p.current=o}var l=Math.round(e.getPlayheadPosition()*1e3);u!=null&&a.executeCatch(n,u,[l,a])})),function(){var e;p.current=null,(e=t)==null||e.remove()}},[a,i.ref,n,u,s]),m(function(){var e=n==null?void 0:n.get("mute_on_mount");if(e!=null){var t=i.ref.current;t==null||t.setMuted(e,"product_initiated")}},[]);var g=n.get("subtitle_url"),h=n.getExpression("on_cues"),y=_(null);m(function(){var e=null;g!=null&&b({captionsUrl:g,onCaptionsLoaded:function(n){e=n}});var t=i.ref.current,r=null;return t!=null&&(r=t.subscribe(function(){var r,o=Math.round(t.getPlayheadPosition()),i=(r=e)==null?void 0:r.getSubtitles(o).join("\n");h!=null&&i!==y&&a.executeCatch(n,h,[i]),y.current=i!=null?i:null})),function(){var e;(e=r)==null||e.remove()}},[a,i.ref,n,h,g]);var v=n.get("scale_type"),S=n.get("loop")?-1:0,R=n.get("video_versions"),L=R==null?void 0:R[0],E=L==null?void 0:L.get("url"),k=L==null?void 0:L.get("width"),I=L==null?void 0:L.get("height"),T=L==null?void 0:L.get("quality_type"),D=L==null?void 0:L.get("url");return E==null||l==null?null:c.jsx(f,{controls:"mwchat",fbid:D!=null?D:"",hdSrc:E,hideExpandButton:!1,initialForceHD:T==="hd",loopCount:S,mediaRenderQpl:null,originalHeight:I!=null?I:0,originalWidth:k!=null?k:0,pixelsFit:C(v),sdSrc:E,shouldForcePauseOnClick:!1})}y.displayName=y.name+" [from "+i.id+"]";function C(e){switch(e){case"cover":case"stretch":return"cover";case"contain":default:return"contain"}}function b(e){var t=e.captionsUrl,n=e.onCaptionsLoaded,o=new(r("VideoPlayerHTML5ApiWebVttState"))({captionsDisplay:null,onCaptionsLoaded:n,onReady:function(n){return n.loadFromUrl(t)}});return o}l.default=h}),98);
__d("MSGWebBloksPrimitives",["MSGWebBloksBottomsheetNavbar","MSGWebBloksContainerConfigs","MSGWebBloksVideoGetIsMutedV2","MSGWebBloksVideoGetPlaybackStateV3","MSGWebBloksVideoGetPositionV2","MSGWebBloksVideoSendEventV2","MSGWebBloksVideoSetPositionV2","MSGWebBloksVideoV2","WebBloksDummy"],(function(t,n,r,o,a,i,l){"use strict";var e={"bk.components.VideoV2":r("MSGWebBloksVideoV2"),"bk.data.screen.navbar.bottomsheet.Msg":r("MSGWebBloksBottomsheetNavbar")},s={"bk.action.msg.wbloks.qpl.EndSuccess":r("WebBloksDummy"),"bk.action.video.GetIsMutedV2":r("MSGWebBloksVideoGetIsMutedV2"),"bk.action.video.GetPlaybackStateV3":r("MSGWebBloksVideoGetPlaybackStateV3"),"bk.action.video.GetPositionV2":r("MSGWebBloksVideoGetPositionV2"),"bk.action.video.SendEventV2":r("MSGWebBloksVideoSendEventV2"),"bk.action.video.SetPositionV2":r("MSGWebBloksVideoSetPositionV2"),"bk.action.xs.SendTextMessageCTA":r("WebBloksDummy")},u={};l.COMPONENTS=e,l.ACTIONS=s,l.EXTENSION_HANDLERS=u,l.CONTAINER_CONFIGS=o("MSGWebBloksContainerConfigs").CONTAINER_CONFIGS}),98);
__d("MsgWebWebBloksScreenQueryRootTemplate",[],(function(t,n,r,o,a,i){var e={layout:{bloks_payload:{data:[],embedded_payloads:[{id:"WdkRIar5DTmRWc5Avmb6oA:1zlk6yp5vc",payload:{layout:{bloks_payload:{tree:{"bk.components.Flexbox":{flex_direction:"column",justify_content:"center",align_items:"center",children:[{"bk.components.Text":{text:"Something went wrong",text_size:"20sp"}},{"bk.components.Text":{text:"Please try again later"}}],_style:{flex:{width:"100%",height:"100%"}}}}}}}}],error_attribution:{logging_id:null,source_map_id:null},tree:{"bk.components.Flexbox":{flex_direction:"column",children:[{"bk.components.Flexbox":{children:[{"bk.components.Flexbox":{children:[{"bk.components.Flexbox":{children:[{"bk.components.Flexbox":{justify_content:"center",children:[{"bk.components.Spinner":{_style:{flex:{width:"32dp",height:"32dp",align_self:"center"}}}}],id:"bkscreen_roottemplate_loadingflexbox:0",_style:{flex:{width:"100%",height:"100%"}}}}],id:"xel4j0:109"}}],extensions:[{"bk.extensions.OnDataChange":{on_change:'(bk.action.core.Apply, (bk.action.core.FuncConst, (bk.action.core.TakeLast, (bk.action.core.If, (bk.action.core.Match, "failed", (bk.action.array.Make, (bk.action.core.Pattern, (bk.action.core.GetArg, 1), (bk.action.core.FuncConst, true))), (bk.action.core.Default, (bk.action.core.FuncConst, false))), (bk.action.core.Apply, (bk.action.core.FuncConst, (bk.action.core.TakeLast, (bk.action.core.Apply, (bk.action.core.FuncConst, (bk.action.bloks.ReplaceEmbeddedChildV2, "__infra_sq_root_id:0", (bk.action.array.Make, (bk.action.bloks.GetPayload, "WdkRIar5DTmRWc5Avmb6oA:1zlk6yp5vc", (bk.action.map.Make, (bk.action.array.Make), (bk.action.array.Make)))), "__infra_sq_content_id:0", (bk.action.core.GetArg, 0))), (bk.action.core.GetArg, 0)), 1)), (bk.action.core.GetArg, 0)), null), (bk.action.core.If, (bk.action.core.If, (bk.action.core.Match, "resolved_sync", (bk.action.array.Make, (bk.action.core.Pattern, (bk.action.core.GetArg, 1), (bk.action.core.FuncConst, true))), (bk.action.core.Default, (bk.action.core.FuncConst, false))), true, (bk.action.core.Match, "resolved_async", (bk.action.array.Make, (bk.action.core.Pattern, (bk.action.core.GetArg, 1), (bk.action.core.FuncConst, true))), (bk.action.core.Default, (bk.action.core.FuncConst, false)))), (bk.action.core.Apply, (bk.action.core.FuncConst, 1), (bk.action.core.GetArg, 0)), null))), (bk.action.core.GetArg, 0), (bk.action.core.GetArg, 2))',on_bind:'(bk.action.array.Make, "data", (bk.action.core.If, (bk.action.core.Match, (bk.action.bloks.GetVariable2, "query_info_1zlk6yp5v0"), (bk.action.array.Make, (bk.action.core.Pattern, null, (bk.action.core.FuncConst, true))), (bk.action.core.Default, (bk.action.core.FuncConst, false))), null, (bk.action.map.Get, (bk.action.bloks.GetVariable2, "query_info_1zlk6yp5v0"), "resolution_type")))'}},{"bk.components.OnMount":{on_first_mount:'(bk.action.bloks.FetchAsyncComponents, (bk.action.bloks.GetParameter, "__infra__app_id"), (bk.action.map.Make, (bk.action.array.Make, "__infra__container_config_id"), (bk.action.array.Make, (bk.action.bloks.GetParameter, "__infra__container_config_id"))), (bk.action.bloks.GetParameter, "__infra__cache_ttl"), (bk.action.tree.Make, "bk.data.action.bloks.FetchAsyncComponentsOptions"))'}}]}}],id:"__infra_sq_content_id:0",_style:{flex:{grow:1}}}}],id:"__infra_sq_root_id:0"}},component_queries:[{id:"1zlk6yp5v0",targets:{genScreenContent:"xel4j0:109"},app_id_expr:'(bk.action.bloks.GetParameter, "__infra__app_id")',params:'(bk.action.map.Make, (bk.action.array.Make, "__infra__container_config_id"), (bk.action.array.Make, (bk.action.bloks.GetParameter, "__infra__container_config_id")))',client_params:'(bk.action.map.Make, (bk.action.array.Make, "__infra_component_did_render"), (bk.action.array.Make, null))',cache_ttl_expr:'(bk.action.bloks.GetParameter, "__infra__cache_ttl")',is_scoped:!1}]}}};i.TEMPLATE=e}),66);
__d("WebBloksEnvironmentTypes",["react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=(function(){function e(e){this.$1=new Map,this.$1=e}var t=e.prototype;return t.getGK=function(t){var e;return(e=this.$1.get(t))!=null?e:!1},e})();l.WebBloksGKs=u}),98);
__d("WebBloksDefaultGKs",["WebBloksEnvironmentTypes"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.call(this,new Map)||this}return babelHelpers.inheritsLoose(t,e),t})(o("WebBloksEnvironmentTypes").WebBloksGKs);l.default=e}),98);
__d("WebBloksFragment",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e.children?(n=s.jsx(s.Fragment,{children:e.children}),t[0]=e.children,t[1]=n):n=t[1],n}l.default=u}),98);
__d("WebBloksHotReloadDataModule",[],(function(t,n,r,o,a,i){var e=(function(){function e(){}var t=e.prototype;return t.setup=function(t,n,r,o){var e=function(){};return{dispose:e,initialValue:void 0}},e})();i.WebBloksHotReloadDataModule=e}),66);
__d("WebBloksLogger",[],(function(t,n,r,o,a,i){var e=(function(){function e(){}var t=e.prototype;return t.warn=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=console).warn.apply(e,["[wbloks] "+t].concat(r))},t.mustfix=function(t){for(var e,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(e=console).error.apply(e,["[wbloks] "+t].concat(r))},t.scriptError=function(t){this.mustfix(t.message,t)},e})();i.default=e}),66);
__d("WebBloksModuleStore",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.modules=new Map(e!=null?Object.entries(e):[])}var t=e.prototype;return t.keys=function(){return Array.from(this.modules.keys())},t.has=function(t){return this.modules.has(t)},t.set=function(t,n){this.has(t)||this.modules.set(t,n)},t.get=function(t){var e;return(e=this.modules.get(t))!=null?e:null},t.toObject=function(){return Object.fromEntries(this.modules)},e})();i.default=e}),66);
__d("WebBloksViewportDimensionsDataModule",["WebBloksUtils"],(function(t,n,r,o,a,i,l){var e=16.666666666666668,s=(function(){function t(){}var n=t.prototype;return n.setup=function(t,n,r,o){var e=this,a={height:window.innerHeight,width:window.innerWidth};r!=null&&this.$2(n,r);var i=function(){e.$1!=null&&window.removeEventListener("resize",e.$1)};return{cancelToken:i,initialValue:a}},n.$2=function(n,r){var t=n.id;this.$1!=null&&window.removeEventListener("resize",this.$1);var a=o("WebBloksUtils").throttle(function(){var e={height:window.innerHeight,width:window.innerWidth};r==null||r.enqueueVariableUpdateOperation(t,e)},e);this.$1=a,window.addEventListener("resize",this.$1)},t})();l.WebBloksViewportDimensionsDataModule=s}),98);
__d("WebBloksEnvironment",["WebBloksDefaultGKs","WebBloksErrors","WebBloksFragment","WebBloksHotReloadDataModule","WebBloksI18nUtils","WebBloksLogger","WebBloksModuleStore","WebBloksViewportDimensionsDataModule","react"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useState,u={actions:{},analytics:null,AssetRenderer:null,components:{},extensionHandlers:{},containerConfigs:{},disableErrorBoundary:null,traversalKeys:{},disableHistoryStack:!1,enableCometRouter:!1,fontFamilyMappings:null,embedded:!1,allowScreenOverflow:!1,appLoader:null,logger:new(r("WebBloksLogger")),locale:"en_US",isRtl:!1,accessibilityModule:{FocusAppWrapper:r("WebBloksFragment"),FocusRegion:r("WebBloksFragment")},gkx:new(r("WebBloksDefaultGKs")),staticAssets:null,globalStateStore:null,timeoutIDS:new Map,screenQueryTemplate:null,loadingFallback:null,navigationTrackingUtils:null,dataModulesStore:new Map([["bloks_viewport_dimensions",new(o("WebBloksViewportDimensionsDataModule")).WebBloksViewportDimensionsDataModule],["hot_reload",new(o("WebBloksHotReloadDataModule")).WebBloksHotReloadDataModule]]),controllerNavigationLogger:null};function c(){for(var e,t=(e=window.navigator)==null?void 0:e.languages,n=t!=null&&o("WebBloksI18nUtils").isLocaleRtl(t),a=babelHelpers.extends({},u,{locale:t,isRtl:n}),i=arguments.length,l=new Array(i),s=0;s<i;s++)l[s]=arguments[s];var c=l.reduce(function(e,t){return m(e,t)},a),d=babelHelpers.extends({},c,{actions:new(r("WebBloksModuleStore"))(c.actions),components:new(r("WebBloksModuleStore"))(c.components),extensionHandlers:new(r("WebBloksModuleStore"))(c.extensionHandlers),containerConfigs:new(r("WebBloksModuleStore"))(c.containerConfigs)});return d}function d(e){return s(e)[0]}function m(e,t){var n,r,o,a,i,l,s,u,c,d,m,_,f,g,h,y,C,b,v,S,R;return t?{analytics:(n=t.analytics)!=null?n:e.analytics,locale:(r=t.locale)!=null?r:e.locale,isRtl:(o=t.isRtl)!=null?o:e.isRtl,actions:babelHelpers.extends({},e.actions,t.actions),appLoader:(a=t.appLoader)!=null?a:e.appLoader,components:babelHelpers.extends({},e.components,t.components),extensionHandlers:babelHelpers.extends({},e.extensionHandlers,t.extensionHandlers),containerConfigs:babelHelpers.extends({},e.containerConfigs,t.containerConfigs),traversalKeys:babelHelpers.extends({},e.traversalKeys,t.traversalKeys),disableHistoryStack:(i=t.disableHistoryStack)!=null?i:e.disableHistoryStack,enableCometRouter:(l=t.enableCometRouter)!=null?l:e.enableCometRouter,embedded:(s=t.embedded)!=null?s:e.embedded,allowScreenOverflow:(u=t.allowScreenOverflow)!=null?u:e.allowScreenOverflow,loadingFallback:(c=t.loadingFallback)!=null?c:e.loadingFallback,dataModulesStore:p(e.dataModulesStore,t.dataModulesStore),navigationTrackingUtils:(d=t.navigationTrackingUtils)!=null?d:e.navigationTrackingUtils,logger:(m=t.logger)!=null?m:e.logger,disableErrorBoundary:(_=t.disableErrorBoundary)!=null?_:e.disableErrorBoundary,AssetRenderer:(f=t.AssetRenderer)!=null?f:e.AssetRenderer,staticAssets:(g=t.staticAssets)!=null?g:e.staticAssets,globalStateStore:(h=t.globalStateStore)!=null?h:e.globalStateStore,fontFamilyMappings:(y=t.fontFamilyMappings)!=null?y:e.fontFamilyMappings,timeoutIDS:(C=t.timeoutIDS)!=null?C:e.timeoutIDS,screenQueryTemplate:(b=t.screenQueryTemplate)!=null?b:e.screenQueryTemplate,accessibilityModule:(v=t.accessibilityModule)!=null?v:e.accessibilityModule,gkx:(S=t.gkx)!=null?S:e.gkx,controllerNavigationLogger:(R=t.controllerNavigationLogger)!=null?R:e.controllerNavigationLogger}:e}function p(e,t){if(!t||t.size===0)return e;var n=new Map(e);for(var r of t){var a=r[0],i=r[1];if(n.has(a))throw new(o("WebBloksErrors")).WebBloksError("Data module with key "+a+" already exists in the environment.");n.set(a,i)}return n}l.WEBLOKS_DEFAULT_ENVIRONMENT=u,l.createEnvironment=c,l.useWebBloksEnvironmentStore=d}),98);
__d("WebBloksActiveFocusRegionUtilsContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(null),c=u;l.default=c}),98);
__d("getWebBloksTabbableNodes",[],(function(t,n,r,o,a,i){function e(e,t){var n=document.activeElement,r=function(r,o,a){return a===n?!0:e(r,o,a)&&a.offsetWidth>0&&a.offsetHeight>0&&a.tabIndex!==-1&&window.getComputedStyle(a).visibility!=="hidden"},o=n?t.DO_NOT_USE_queryAllNodes(r):null;if(o===null)return[null,null,null,0,null];var a={};for(var i of o)if(i instanceof HTMLInputElement&&i.tagName==="INPUT"&&i.type==="radio"&&i.name!=null){var l;a[i.name]=[].concat((l=a[i.name])!=null?l:[],[i])}var s=Object.values(a).map(function(e){if(e.find(function(e){return e.checked}))return e.filter(function(e){return!e.checked});var t=e[0],n=babelHelpers.arrayLikeToArray(e).slice(1);return n}).flat();o=o.filter(function(e){return!s.includes(e)});var u=o[0],c=o[o.length-1],d=o.indexOf(n),m=null;return d!==-1&&(m=o[d]),[o,u,c,d,m]}i.default=e}),66);
__d("WebBloksFocusManager",["getWebBloksTabbableNodes"],(function(t,n,r,o,a,i,l){var e=!1,s=!1,u=!1,c=500;function d(){try{var e=document.createElement("div");e.addEventListener("focus",function(e){e.preventDefault(),e.stopPropagation()},!0),e.focus(Object.defineProperty({},"preventScroll",{get:function(){s=!0}}))}catch(e){}}function m(e){for(var t=e.parentElement,n=[],r=document.scrollingElement||document.documentElement;t&&t!==r;){var o=t,a=o.offsetHeight,i=o.offsetWidth;(a<t.scrollHeight||i<t.scrollWidth)&&n.push([t,t.scrollTop,t.scrollLeft]),t=t.parentElement}return r&&n.push([r,r.scrollTop,r.scrollLeft]),n}function p(e){for(var t=0;t<e.length;t++){var n=e[t],r=n[0],o=n[1],a=n[2];r.scrollTop=o,r.scrollLeft=a}}function _(e,t){for(var n=Array.isArray(e)?e:[e],r=0;r<n.length;r++){var o=t.DO_NOT_USE_queryAllNodes(n[r]);if(o)return o}return null}function f(e,t){for(var n=Array.isArray(e)?e:[e],r=0;r<n.length;r++){var o=t.DO_NOT_USE_queryFirstNode(n[r]);if(o)return o}return null}function g(e,t,n){var r=n||{},o=r.preventScroll,a=r.focusWithoutUserIntent,i=r.focusWithAutoFocus,l=f(e,t);l!=null&&C(l,{preventScroll:o,focusWithoutUserIntent:a,focusWithAutoFocus:i})}function h(){return e}function y(e){return e._focusWithAutoFocus===!0}function C(t,n){var r=n||{},o=r.preventScroll,a=r.focusWithoutUserIntent,i=r.focusWithAutoFocus;if(t!==null){u||(u=!0,d());var l=t._tabIndexState;if(l&&l.canTab===!1)return;var _=l?l.value:t.tabIndex;t.tabIndex=-1;var f=e,g=o||!1;i===!0&&(t._focusWithAutoFocus=!0,window.setTimeout(function(){t._focusWithAutoFocus=!1},c));try{if(e=a||!1,!g)L(t);else if(s)L(t,{preventScroll:!0});else{var h=m(t);L(t),p(h)}}catch(e){}finally{e=f}t.tabIndex=_}}function b(e,t,n){var o=r("getWebBloksTabbableNodes")(e,t),a=o[0],i=o[2],l=o[3],s=o[4];s!==null&&s!==i&&a&&C(a[l+1],{preventScroll:n})}function v(e,t,n){var o=r("getWebBloksTabbableNodes")(e,t),a=o[0],i=o[1],l=o[3],s=o[4];s!==null&&s!==i&&a&&C(a[l-1],{preventScroll:n})}function S(e,t,n,o,a){var i=r("getWebBloksTabbableNodes")(e,t),l=i[0],s=i[1],u=i[2],c=i[3],d=i[4];d===null||l===null||(d===u?a!=null?a():o===!0&&(C(s),n.preventDefault(),n.stopPropagation()):(C(l[c+1]),n.preventDefault(),n.stopPropagation()))}function R(e,t,n,o,a){var i=r("getWebBloksTabbableNodes")(e,t),l=i[0],s=i[1],u=i[2],c=i[3],d=i[4];d===null||l===null||(d===s?a!=null?a():o===!0&&(C(u),n.preventDefault(),n.stopPropagation()):(C(l[c-1]),n.preventDefault(),n.stopPropagation()))}var L=function(t,n){(t.focus||HTMLElement.prototype.focus).call(t,n)};l.getAllNodesFromOneOrManyQueries=_,l.getFirstNodeFromOneOrManyQueries=f,l.focusFirst=g,l.isFocusingWithoutUserIntent=h,l.wasElementAutoFocused=y,l.focusElement=C,l.focusNext=b,l.focusPrevious=v,l.focusNextContained=S,l.focusPreviousContained=R}),98);
__d("WebBloksFocusRegionType",["$InternalEnum","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=n("$InternalEnum").Mirrored(["Nearest","First"]);l.RecoverFocusStrategy=u}),98);
__d("WebBloksReactEventHookPropagation",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=e._stopEventHookPropagation;return n!==void 0&&n[t]}function l(e,t){var n=e._stopEventHookPropagation;n||(n=e._stopEventHookPropagation={}),n[t]=!0}i.hasEventHookPropagationStopped=e,i.stopEventHookPropagation=l}),66);
__d("WebBloksReactEventHelpers",[],(function(t,n,r,o,a,i){var e=typeof window!="undefined"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1,l=typeof window!="undefined"&&window.PointerEvent!=null;function s(e,t){return t==null?!1:typeof e.containsNode=="function"?e.containsNode(t):e.contains(t)}i.isMac=e,i.hasPointerEvents=l,i.isRelatedTargetWithin=s}),66);
__d("useWebBloksUnsafeRef_DEPRECATED",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e){return s(function(){return{current:e}},[])}l.default=u}),98);
__d("WebBloksReactUseEvent.react",["ReactDOM","react","useWebBloksUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useLayoutEffect;function u(e,t){var n=r("useWebBloksUnsafeRef_DEPRECATED")(null),a=n.current;if(t&&(t.passive=void 0),a===null){var i=o("ReactDOM").unstable_createEventHandle(e,t),l=new Map;a={setListener:function(t,n){var e=l.get(t);if(e!==void 0&&e(),n===null){l.delete(t);return}e=i(t,n),l.set(t,e)},clear:function(){for(var e=Array.from(l.values()),t=0;t<e.length;t++)e[t]();l.clear()}},n.current=a}return s(function(){return function(){a!==null&&a.clear(),n.current=null}},[a]),a}l.default=u}),98);
__d("WebBloksReactFocusEvent.react",["WebBloksReactEventHelpers","WebBloksReactEventHookPropagation","WebBloksReactUseEvent.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useMemo,m=s.useRef,p=o("WebBloksReactEventHelpers").hasPointerEvents?["keydown","pointermove","pointerdown","pointerup"]:["keydown","mousedown","mousemove","mouseup","touchmove","touchstart","touchend"],_={passive:!0},f=!0,g=!1;function h(){p.forEach(function(e){window.addEventListener(e,b,!0)})}function y(e){var t=e.metaKey,n=e.altKey,r=e.ctrlKey;return!(t||!o("WebBloksReactEventHelpers").isMac&&n||r)}function C(e){var t=e.key,n=e.target;if(t==="Tab"||t==="Escape")return!1;var r=n.isContentEditable,o=n.tagName;return o==="INPUT"||o==="TEXTAREA"||r}function b(e){if(e.type==="keydown")y(e)&&(f=!0);else{var t=e.target.nodeName;if(t==="HTML")return;f=!1}}function v(e,t){if(e.type==="keydown"){var n=e.nativeEvent;y(n)&&!C(n)&&t(!0)}else f=!1,t(!1)}function S(e,t,n){e.forEach(function(e){e.setListener(t,function(e){return v(e,n)})})}function R(){var e=o("react-compiler-runtime").c(4),t=r("WebBloksReactUseEvent.react")("mousedown",_),n=r("WebBloksReactUseEvent.react")(o("WebBloksReactEventHelpers").hasPointerEvents?"pointerdown":"touchstart",_),a=r("WebBloksReactUseEvent.react")("keydown",_),i;return e[0]!==a||e[1]!==t||e[2]!==n?(i=[t,n,a],e[0]=a,e[1]=t,e[2]=n,e[3]=i):i=e[3],i}function L(){var e=o("react-compiler-runtime").c(1),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],e[0]=t):t=e[0],c(E,t)}function E(){g||(g=!0,h())}function k(e,t){var n,a=t.disabled,i=t.onAfterBlurWithin,l=t.onBeforeBlurWithin,s=t.onBlurWithin,c=t.onFocusWithin,d=t.onFocusWithinChange,p=t.onFocusWithinVisibleChange,g=m({isFocused:!1,isFocusVisible:!1}),h=(n=r("WebBloksReactUseEvent.react"))("focusin",_),y=n("focusout",_),C=n("afterblur",_),b=n("beforeblur",_),v=R(),E=u(function(t){typeof e=="function"?e(t):e.current=t;var n=g.current;t!==null&&n!==null&&(S(v,t,function(e){n.isFocused&&n.isFocusVisible!==e&&(n.isFocusVisible=e,p&&p(e))}),h.setListener(t,function(e){a!==!0&&(o("WebBloksReactEventHookPropagation").hasEventHookPropagationStopped(e,"useFocusWithin")||(n.isFocused||(n.isFocused=!0,n.isFocusVisible=f,d&&d(!0),n.isFocusVisible&&p&&p(!0)),!n.isFocusVisible&&f&&(n.isFocusVisible=f,p&&p(!0)),c&&c(e)))}),y.setListener(t,function(e){if(a!==!0){var r=e.nativeEvent.relatedTarget;o("WebBloksReactEventHookPropagation").hasEventHookPropagationStopped(e,"useFocusWithin")||(n.isFocused&&!o("WebBloksReactEventHelpers").isRelatedTargetWithin(t,r)?(n.isFocused=!1,d&&d(!1),n.isFocusVisible&&p&&p(!1),s&&s(e)):o("WebBloksReactEventHookPropagation").stopEventHookPropagation(e,"useFocusWithin"))}}),b.setListener(t,function(e){a!==!0&&l&&(l(e),C.setListener(document,function(e){i&&i(e),C.setListener(document,null)}))}))},[C,b,y,a,h,v,e,i,l,s,c,d,p]);return L(),E}l.useFocusWithin=k}),98);
__d("WebBloksReactKeyboardEvent.react",["WebBloksReactUseEvent.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect,u={passive:!0};function c(e,t){var n=o("react-compiler-runtime").c(8),a=t.disabled,i=t.onKeyDown,l=t.onKeyUp,c=a===void 0?!1:a,d=r("WebBloksReactUseEvent.react")("keydown"),m=r("WebBloksReactUseEvent.react")("keyup",u),p,_;n[0]!==c||n[1]!==d||n[2]!==m||n[3]!==i||n[4]!==l||n[5]!==e?(p=function(){var t=e.current;t!==null&&(d.setListener(t,!c&&i||null),m.setListener(t,!c&&l||null))},_=[c,i,d,m,e,l],n[0]=c,n[1]=d,n[2]=m,n[3]=i,n[4]=l,n[5]=e,n[6]=p,n[7]=_):(p=n[6],_=n[7]),s(p,_)}l.useKeyboard=c}),98);
__d("setWebBloksElementCanTab",[],(function(t,n,r,o,a,i){var e=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"tabIndex"),l=Object.getOwnPropertyDescriptor(SVGElement.prototype,"tabIndex"),s=function(t){return t},u=e?e.set:s,c=l?l.set:s;function d(e){return e instanceof SVGElement?c:u}function m(e,t,n){n===void 0&&(n=!1);var r=e._tabIndexState,o=d(e);if(r)r.canTab!==t&&typeof o=="function"&&(o.call(e,t?r.value:-1),r.canTab=t);else{t&&n&&e.tabIndex<0&&(e.tabIndex=0);var a={value:e.tabIndex,canTab:t};e._tabIndexState=a,t||(e.tabIndex=-1),Object.defineProperty(e,"tabIndex",{enumerable:!1,configurable:!0,get:function(){return a.canTab?a.value:-1},set:function(t){a.canTab&&typeof o=="function"&&o.call(this,t),a.value=t}})}}function p(e){var t=e._tabIndexState;return t?t.canTab:e.tabIndex>0}i.setElementCanTab=m,i.canElementTab=p}),66);
__d("WebBloksFocusRegion.react",["WebBloksActiveFocusRegionUtilsContext","WebBloksFocusManager","WebBloksFocusRegionType","WebBloksReactEventHookPropagation","WebBloksReactFocusEvent.react","WebBloksReactKeyboardEvent.react","react","setWebBloksElementCanTab","useWebBloksUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useLayoutEffect,_=u.useMemo,f=u.useRef;function g(e,t,n){var r=document.activeElement;window.requestAnimationFrame(function(){document.activeElement===r&&o("WebBloksFocusManager").focusElement(e,{preventScroll:t,focusWithoutUserIntent:n})})}function h(e){return e.offsetWidth===0&&e.offsetHeight===0}var y=s.unstable_Scope,C=new Map;function b(e){var t,n=e.autoRestoreFocus,a=e.autoFocusQuery,i=e.children,l=e.containFocusQuery,u=e.forwardRef,b=e.id,v=e.onEscapeFocusRegion,S=e.recoverFocusStrategy,R=S===void 0?o("WebBloksFocusRegionType").RecoverFocusStrategy.Nearest:S,L=e.recoverFocusQuery,E=e.stopOnFocusWithinPropagation,k=E===void 0?!0:E,I=f(null),T=f(null),D=d(r("WebBloksActiveFocusRegionUtilsContext")),x=D===null&&(n===!0||v!=null)?document.activeElement:null,$=r("useWebBloksUnsafeRef_DEPRECATED")(x),P=(t=$.current)!=null?t:x,N=_(function(){return{lastFocused:null,scope:null,restorationFocusRegionItem:null,triggeredFocusRegionItems:new Set}},[]),M=c(function(){if(D!=null){var e=D.getActiveFocusRegion();if(e!==N){if(N.restorationFocusRegionItem!==e){var t;if((e==null?void 0:e.lastFocused)!=null&&!((t=I.current)!=null&&t.containsNode(e.lastFocused)))e!=null&&e.triggeredFocusRegionItems.add(N),N.restorationFocusRegionItem=e;else if(N.restorationFocusRegionItem==null){var n=e==null?void 0:e.restorationFocusRegionItem;N.restorationFocusRegionItem=n,e!=null&&(n==null||n.triggeredFocusRegionItems.delete(e)),n==null||n.triggeredFocusRegionItems.add(N),D.setActiveFocusRegion(N);return}}(e===null||e!=null&&N!=null&&e.lastFocused!==N.lastFocused)&&D.setActiveFocusRegion(N)}}},[D,N]),w=f(null),A=c(function(e){I.current=e,N.scope=e;var t=w.current;u&&(u.current=e),t!==null&&t!==b&&C.get(t)===null&&C.delete(t),b!=null&&(e!==null?(w.current=b,C.set(b,e)):C.get(b)===null&&C.delete(b))},[u,b,N]);A=o("WebBloksReactFocusEvent.react").useFocusWithin(A,_(function(){return{onBeforeBlurWithin:function(t){var e=I.current;if(e!==null&&L!==void 0){if(t.stopPropagation(),L===null)return;var n=t.target,r=o("WebBloksFocusManager").getAllNodesFromOneOrManyQueries(L,e);if(r===null)return;var a=r.indexOf(n),i=n._tabIndexState;T.current={detachedCanTab:i!=null&&i.canTab,recoveryIndex:a,recovery:r}}},onAfterBlurWithin:function(){var e=I.current,t=T.current;T.current=null;var n=document.activeElement;if(e!==null&&L!=null&&t!==null&&(n==null||n===document.body||!e.containsNode(n))){var r=!0,a=!0,i=t.recovery,l=t.recoveryIndex,s=o("WebBloksFocusManager").getAllNodesFromOneOrManyQueries(L,e);if(s!==null&&i!==null){for(var u=new Set(s),c=new Set(i),d=l-1;d>=0;d--){var m=i[d];if(u.has(m)){var p=s.indexOf(m),_=p+1;if(_<s.length){var f=s[_];if(!c.has(f)){t.detachedCanTab&&o("setWebBloksElementCanTab").setElementCanTab(f,!0),g(f,r,a);return}}t.detachedCanTab&&o("setWebBloksElementCanTab").setElementCanTab(m,!0),g(m,r,a);return}}if(R===o("WebBloksFocusRegionType").RecoverFocusStrategy.Nearest)for(var h=l+1;h<i.length;h++){var y=i[h];if(u.has(y)){var C=s.indexOf(y),b=C-1;if(b>=0){var v=s[b];t.detachedCanTab&&o("setWebBloksElementCanTab").setElementCanTab(v,!0),g(v,r,a);return}}}var S=o("WebBloksFocusManager").getFirstNodeFromOneOrManyQueries(L,e);S&&(t.detachedCanTab&&o("setWebBloksElementCanTab").setElementCanTab(S,!0),g(S,r,a))}}},onFocusWithin:function(t){k&&o("WebBloksReactEventHookPropagation").stopEventHookPropagation(t,"useFocusWithin"),N.lastFocused=t.target,M()}}},[L,R,k,N,M]));var F=c(function(){var e=I.current,t=document.activeElement;if(a!=null&&e!==null&&(!t||!e.containsNode(t))){var n=N.lastFocused;n!=null&&e.containsNode(n)&&!h(n)?o("WebBloksFocusManager").focusElement(n,{focusWithAutoFocus:!0,focusWithoutUserIntent:!0,preventScroll:!0}):o("WebBloksFocusManager").focusFirst(a,e,{focusWithAutoFocus:!0,focusWithoutUserIntent:!0,preventScroll:!0})}},[a,N]);p(F,[F]),m(F,[F]);var O=c(function(e,t){t===void 0&&(t=!1);var r=I.current,a=document.activeElement,i=$.current;$.current=null;var l=e==null?void 0:e.triggeredFocusRegionItems,s=e==null?void 0:e.restorationFocusRegionItem;l!=null&&l.size&&l.forEach(function(e){return e.restorationFocusRegionItem=s}),e!=null&&s!=null&&(s.triggeredFocusRegionItems.delete(e),l!=null&&l.size&&l.forEach(function(e){s.triggeredFocusRegionItems.add(e)})),N.lastFocused=null;var u=D==null?void 0:D.getActiveFocusRegion(),c=u!=null?u.restorationFocusRegionItem:{lastFocused:i};u===e&&(D==null||D.setActiveFocusRegion(s));var d=r!==null&&a!==null&&r.containsNode(a)||a==null||a===document.body;if((n===!0||v!=null)&&d){var m=function(t){if(t===void 0&&(t=!1),(c==null?void 0:c.lastFocused)!=null){var e=!0,n=!0,r=document.activeElement;(t||r===null||r===document.body)&&o("WebBloksFocusManager").focusElement(c.lastFocused,{preventScroll:e,focusWithoutUserIntent:n})}};t?m(t):window.requestAnimationFrame(function(){return m()})}},[D,n,v,N]),B=c(function(){O(N,!0),v&&v()},[O,v,N]);return o("WebBloksReactKeyboardEvent.react").useKeyboard(I,_(function(){return{onKeyDown:function(t){if(!(l==null||t.key!=="Tab"||t.isDefaultPrevented())){var e=I.current;e!==null&&(t.shiftKey?o("WebBloksFocusManager").focusPreviousContained(l,e,t,!0,v!=null?B:void 0):o("WebBloksFocusManager").focusNextContained(l,e,t,!0,v!=null?B:void 0))}}}},[l,B,v])),p(function(){$.current=P;var e=N;return function(){O(e)}},[D,n,O,N,P]),s.jsx(y,{ref:A,id:b,children:i})}b.displayName=b.name+" [from "+i.id+"]";function v(e,t,n){var r=C.get(e);if(r){var a=r.DO_NOT_USE_queryFirstNode(t);if(a!==null)return o("WebBloksFocusManager").focusElement(a,{preventScroll:n}),a}return null}l.FocusRegion=b,l.focusRegionById=v}),98);
__d("WebBloksFocusAppWrapper.react",["WebBloksActiveFocusRegionUtilsContext","WebBloksFocusRegion.react","react","useWebBloksUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useRef;function m(e){var t=e.children,n=d(null),a=c(function(){return n.current},[n]),i=c(function(e){n.current=e},[n]),l=r("useWebBloksUnsafeRef_DEPRECATED")({getActiveFocusRegion:a,setActiveFocusRegion:i});return s.jsx(r("WebBloksActiveFocusRegionUtilsContext").Provider,{value:l.current,children:s.jsx(o("WebBloksFocusRegion.react").FocusRegion,{children:t})})}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("WebBloksFontOverrides",[],(function(t,n,r,o,a,i){"use strict";var e={sfprotext:{webFontName:null},"SF Pro Text":{webFontName:null}},l={"sans-serif":{webFontName:null},"sans-serif-medium":{webFontName:null}},s={"Optimistic Display App":{webFontName:null},"Optimistic Display App Medium":{webFontName:null},"Optimistic Text App":{webFontName:null},"Optimistic Text App Normal":{webFontName:null},"Optimistic Text App Regular":{webFontName:null},"Optimistic Text App Medium":{webFontName:null},"Optimistic Text App Bold":{webFontName:null},"Optimistic Text":{webFontName:null},"Optimistic Text Normal":{webFontName:null},"Optimistic Text Regular":{webFontName:null},"Optimistic Text Medium":{webFontName:null},"Optimistic Text Bold":{webFontName:null}};i.WBLOKS_RESET_SYSTEM_FONTS=e,i.WBLOKS_RESET_FDS_FONTS=l,i.WBLOKS_RESET_OPTIMISTIC_FONTS_AVOID_USING=s}),66);
__d("WebBloksRichTextResizeToFit",["WebBloksRichTextContext","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useLayoutEffect,p=u.useRef,_=u.useState,f=12,g=128;function h(e){var t=o("react-compiler-runtime").c(29),n=e.children,a=e.node,i=p(null),l=p(null),u=p(null),c=d(r("WebBloksRichTextContext")),f=c.maxNumberOfLines,g;if(t[0]!==a){var h=a.get("styles");g=b(h),t[0]=a,t[1]=g}else g=t[1];var v=g,S=v.maxFontSize,R=v.minFontSize,L=_(y),E=L[0],k=L[1],I;t[2]!==f||t[3]!==E.max||t[4]!==E.mid||t[5]!==E.min?(I=function(){var e=E.min,t=E.max,n=function(){var e,t,n=(e=i==null||(t=i.current)==null?void 0:t.offsetHeight)!=null?e:0,r=window.getComputedStyle(i==null?void 0:i.current).getPropertyValue("line-height");return Math.floor(n/parseInt(r,10))},r=n()<=f,o=Math.floor((e+t)/2);r?e=E.mid+1:t=E.mid-1,k(function(n){return babelHelpers.extends({},n,{mid:o,max:t,min:e})})},t[2]=f,t[3]=E.max,t[4]=E.mid,t[5]=E.min,t[6]=I):I=t[6];var T=I,D;t[7]!==T?(D=function(){return T()},t[7]=T,t[8]=D):D=t[8];var x;t[9]!==T||t[10]!==f||t[11]!==E.max||t[12]!==E.mid||t[13]!==E.min?(x=[T,f,E.max,E.mid,E.min],t[9]=T,t[10]=f,t[11]=E.max,t[12]=E.mid,t[13]=E.min,t[14]=x):x=t[14],m(D,x);var $,P;t[15]!==S||t[16]!==f||t[17]!==R?($=function(){u.current!==f&&(u.current=f,k(function(){return C(R-1,S)}))},P=[S,f,R],t[15]=S,t[16]=f,t[17]=R,t[18]=$,t[19]=P):($=t[18],P=t[19]),m($,P);var N,M;t[20]!==S||t[21]!==R?(N=function(){var e=i.current;if(e!=null){var t=new ResizeObserver(function(){window.clearTimeout(l.current),l.current=window.setTimeout(function(){k(function(){return C(R,S)})},100)});return t.observe(e),(function(){t.unobserve(e),window.clearTimeout(l.current)})}},M=[S,R],t[20]=S,t[21]=R,t[22]=N,t[23]=M):(N=t[22],M=t[23]),m(N,M);var w=E.mid+"px",A;t[24]!==w?(A={fontSize:w,display:"inline-block"},t[24]=w,t[25]=A):A=t[25];var F;return t[26]!==n||t[27]!==A?(F=s.jsx("span",{ref:i,style:A,children:n}),t[26]=n,t[27]=A,t[28]=F):F=t[28],F}function y(){return C(f,g)}function C(e,t){return{min:e,max:t,mid:Math.floor(t/2)}}function b(e){var t=g,n=f;if(e!=null)for(var r of e)switch(r==null?void 0:r.styleId){case"bk.style.textspan.ResizeToFitStyle":{var a=r.get("min_text_size");a!=null&&(n=parseFloat(o("WebBloksUtils").toPx(a)));var i=r.get("max_text_size");i!=null&&(t=parseFloat(o("WebBloksUtils").toPx(i)))}}return{maxFontSize:t,minFontSize:n}}l.default=h}),98);
__d("WebBloksDataComposableTextSpan",["WebBloksComponentContext","WebBloksDataTextSpanUtils","WebBloksRichTextContext","WebBloksRichTextResizeToFit","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useEffect,m=u.useMemo;function p(e){var t=o("react-compiler-runtime").c(27),n=e.node,a=e.externalStyle,i;t[0]!==n?(i=n.get("styles"),t[0]=n,t[1]=i):i=t[1];var l=i,u=o("WebBloksStyle").useStyle(n,a),m=u.wrapper,p=o("WebBloksComponentContext").useWebBloksContext(),f=p.renderNode,g=c(r("WebBloksRichTextContext")),h=g.isRootFontSizeEnabled,y=g.setIsRootFontSizeEnabled,C=o("WebBloksDataTextSpanUtils").useWebBloksBaseTextSpanProps(n,a),b;if(t[2]!==n||t[3]!==f){var v;b=(v=n.getSubNodes("spans"))==null?void 0:v.map(function(e){return f(e)}),t[2]=n,t[3]=f,t[4]=b}else b=t[4];var S=b,R;if(t[5]!==l){var L;R=(L=l==null?void 0:l.some(_))!=null?L:!1,t[5]=l,t[6]=R}else R=t[6];var E=R,k,I;if(t[7]!==E||t[8]!==h||t[9]!==y?(k=function(){!h&&E&&y(!0)},I=[E,h,y],t[7]=E,t[8]=h,t[9]=y,t[10]=k,t[11]=I):(k=t[10],I=t[11]),d(k,I),E){var T;t[12]!==C||t[13]!==S?(T=s.jsx("span",babelHelpers.extends({},C,{children:S})),t[12]=C,t[13]=S,t[14]=T):T=t[14];var D;t[15]!==n||t[16]!==T?(D=s.jsx(r("WebBloksRichTextResizeToFit"),{node:n,children:T}),t[15]=n,t[16]=T,t[17]=D):D=t[17];var x;return t[18]!==D||t[19]!==m?(x=m(D),t[18]=D,t[19]=m,t[20]=x):x=t[20],x}var $;t[21]!==C||t[22]!==S?($=s.jsx("span",babelHelpers.extends({},C,{children:S})),t[21]=C,t[22]=S,t[23]=$):$=t[23];var P;return t[24]!==$||t[25]!==m?(P=m($),t[24]=$,t[25]=m,t[26]=P):P=t[26],P}function _(e){return e.styleId==="bk.style.textspan.ResizeToFitStyle"}l.default=p}),98);
__d("WebBloksDataImageSpan",["WebBloksImageSpan","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.externalStyle,a=e.node,i;return t[0]!==n||t[1]!==a?(i=s.jsx(r("WebBloksImageSpan"),{node:a,externalStyle:n}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=u}),98);
__d("WebBloksDataTextSpan",["WebBloksComponentContext","WebBloksDataTextSpanUtils","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(6),n=e.node,r=e.externalStyle,a=n.get("text_provider"),i=o("WebBloksStyle").useStyle(n,r),l=i.wrapper,u=o("WebBloksComponentContext").useWebBloksContext(),c=u.renderNode,d=a!=null?c(a):n.get("text"),m=o("WebBloksDataTextSpanUtils").useWebBloksBaseTextSpanProps(n,r),p;t[0]!==d||t[1]!==m?(p=s.jsx("span",babelHelpers.extends({},m,{children:d})),t[0]=d,t[1]=m,t[2]=p):p=t[2];var _;return t[3]!==p||t[4]!==l?(_=l(p),t[3]=p,t[4]=l,t[5]=_):_=t[5],_}l.default=u}),98);
__d("WebBloksScreenQueryScreenWrapper",["WebBloksComponentContext","WebBloksStyle","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=e.node,n=o("WebBloksComponentContext").useWebBloksContext(),r=n.bloksContext,a=n.renderNode,i=n.executeOnNextTickCatch,l=t.getValues(),c=l.content,m=l.container_config,p=l.navigation_callbacks,_=a(c),f=p==null?void 0:p.getExpression("on_enter"),g=p==null?void 0:p.get("on_exit");return u(function(){if(m!=null){var e=r.objectSet.navigationManager.getCurrentScreen();e==null||e.setContainerConfigModel(r,m)}},[r,m]),u(function(){if(f!=null){var e=r.objectSet.navigationManager.getCurrentScreen(),n=r.objectSet.navigationManager.getNavigationDirection();i(t,f,[r,n]),e==null||e.setOnExitCallback(g)}},[]),s.jsx("div",{"data-bloks-name":t.styleId,className:d.root,children:_})}c.displayName=c.name+" [from "+i.id+"]";var d=o("WebBloksStyle").createStyles({root:{height:"100%",width:"100%",display:"flex",flexDirection:"column"}});l.default=c}),98);
__d("WebBloksIconSpinner",["WebBloksStyle","WebBloksTheme","WebBloksUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(9),n=e.color,r=o("WebBloksTheme").useTheme(),a;if(t[0]!==n||t[1]!==r){var i=r.getTheme();a=n?o("WebBloksUtils").getRGBColorWithTheme(n,i):o("WebBloksTheme").WebBloksThemeVars["fig-blue-tint-10"],t[0]=n,t[1]=r,t[2]=a}else a=t[2];var l=a,u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=o("WebBloksStyle").classNames(m.iconSpinnerCircular,m.iconSpinnerRotating,m.iconSpinnerStroke),t[3]=u):u=t[3];var c,d,p;t[4]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx("title",{children:"Spinner"}),d=s.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"none",stroke:o("WebBloksTheme").WebBloksThemeVars["fig-blue-tint-90"]}),p=o("WebBloksStyle").classNames(m.iconSpinnerPath,m.iconSpinnerStroke),t[4]=c,t[5]=d,t[6]=p):(c=t[4],d=t[5],p=t[6]);var _;return t[7]!==l?(_=s.jsx("div",{className:m.loader,"data-visualcompletion":"loading-state",children:s.jsxs("svg",{className:u,viewBox:"25 25 50 50",children:[c,d,s.jsx("circle",{className:p,cx:"50",cy:"50",r:"20",fill:"none",stroke:l})]})}),t[7]=l,t[8]=_):_=t[8],_}var c=o("WebBloksStyle").keyframes({"100%":{transform:"rotate(360deg)"}}),d=o("WebBloksStyle").keyframes({"0%":{strokeDasharray:"1, 200",strokeDashoffset:"0"},"50%":{strokeDasharray:"200, 200",strokeDashoffset:"0px"},"75%,100%":{strokeDasharray:"89, 200",strokeDashoffset:"-125px"}}),m=o("WebBloksStyle").createStyles({loader:function(t){var e;return e={},e[t]={margin:0,position:"relative",width:65},e[t+"::before"]={content:"''",display:"block",paddingTop:"100%"},e},iconSpinnerCircular:{bottom:0,height:"100%",left:0,margin:"auto",position:"absolute",right:0,top:0,transformOrigin:"center center",width:"100%"},iconSpinnerRotating:{animation:c+" 3s linear infinite"},iconSpinnerPath:{animation:d+" 2s ease-in-out infinite",strokeDasharray:"1, 200",strokeDashoffset:"0",strokeLinecap:"round"},iconSpinnerStroke:{strokeMiterlimit:"10",strokeWidth:"1.5"}});l.default=u}),98);
__d("WebBloksSpinner",["WebBloksIconSpinner","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e.node,a=e.externalStyle,i=o("WebBloksStyle").useStyle(n,a),l=i.wrapper,u=i.wrapperProps,c=i.style,d;t[0]!==c?(d=o("WebBloksStyle").getStyleProps(c),t[0]=c,t[1]=d):d=t[1];var m;t[2]!==n?(m=n.get("color"),t[2]=n,t[3]=m):m=t[3];var p;t[4]!==m?(p=s.jsx(r("WebBloksIconSpinner"),{color:m}),t[4]=m,t[5]=p):p=t[5];var _;t[6]!==d||t[7]!==p||t[8]!==u?(_=s.jsx("div",babelHelpers.extends({},u,d,{children:p})),t[6]=d,t[7]=p,t[8]=u,t[9]=_):_=t[9];var f;return t[10]!==_||t[11]!==l?(f=l(_),t[10]=_,t[11]=l,t[12]=f):f=t[12],f}l.default=u}),98);
__d("WebBloksPortal",["ReactDOM","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.target,a=r===void 0?document.body:r;if(a!=null){var i;return t[0]!==n||t[1]!==a?(i=o("ReactDOM").createPortal(n,a),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}}l.default=u}),98);
__d("WebBloksTooltipUtils",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useLayoutEffect,c=s.useState;function d(e,t){var n=o("react-compiler-runtime").c(5),r;n[0]===Symbol.for("react.memo_cache_sentinel")?(r={left:0,top:0,transform:""},n[0]=r):r=n[0];var a=c(r),i=a[0],l=a[1],s,d;return n[1]!==e||n[2]!==t?(s=function(){var n,r,o=(n=document.documentElement)==null?void 0:n.getBoundingClientRect(),a=e==null||(r=e.current)==null?void 0:r.getBoundingClientRect();if(!(o==null||a==null)){var i=a.x+a.width/2,s=t==="top"?a.y-o.y:a.y-o.y+a.height,u="translate(-50%, "+(t==="top"?"-100%":"0%")+")";l({left:i,top:s,transform:u})}},d=[e,t],n[1]=e,n[2]=t,n[3]=s,n[4]=d):(s=n[3],d=n[4]),u(s,d),i}function m(e,t,n){var r=o("react-compiler-runtime").c(8),a=c("center"),i=a[0],l=a[1],s=c(t),d=s[0],m=s[1],p,_;r[0]!==e||r[1]!==n||r[2]!==t?(p=function(){var r,o,a=(r=document.documentElement)==null?void 0:r.getBoundingClientRect(),i=e==null||(o=e.current)==null?void 0:o.getBoundingClientRect();if(!(a==null||i==null)){if(n==="shark-fin"){var s=a.x+a.width/2,u=i.x+i.width/2;u>s?l("right"):l("left")}if(t==null){var c=a.y+a.height/2,d=i.y+i.height/2;d>c?m("top"):m("bottom")}}},_=[n,t,e],r[0]=e,r[1]=n,r[2]=t,r[3]=p,r[4]=_):(p=r[3],_=r[4]),u(p,_);var f;return r[5]!==i||r[6]!==d?(f=[i,d],r[5]=i,r[6]=d,r[7]=f):f=r[7],f}function p(e){return Math.sqrt(Math.pow(e,2)+Math.pow(e,2))}var _=12,f=p(_);function g(e){return e==null?null:{top:{bottom:"100%"},bottom:{top:"100%"}}[e]}function h(e){return{bottom:"0,100 50,"+e+" 100,100",top:"0,0 50,"+(100-e)+" 100,0"}}function y(e){return{left:{bottom:e+",100 "+e+","+e+" 100,100",top:e+",0 "+e+","+(100-e)+" 100,0"},right:{bottom:"0,100 "+(100-e)+","+e+" "+(100-e)+",100",top:"0,0 "+(100-e)+","+(100-e)+" "+(100-e)+",0"}}}function C(e,t,n,r){return t==null?null:n==="shark-fin"&&e!=="center"?y(r)[e][t]:h(r)[t]}l.useCalculatePositionStyle=d,l.useCalculatePosition=m,l.calculateHypotenuseFromEqualSides=p,l.ARROW_SIZE=_,l.TOOLTIP_HYPOTENUSE=f,l.getPositionStyle=g,l.getDefaultPolyLines=h,l.getSharkFinPolyLines=y,l.getArrowPolyLinePoints=C}),98);
__d("useWebBloksAccessibilityModule",["WebBloksEnvironmentContext"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("WebBloksEnvironmentContext").useWebBloksEnvironment(),t=e.accessibilityModule;return t}l.default=e}),98);
__d("WebBloksTooltip",["WebBloksComponentContext","WebBloksDecoration","WebBloksPortal","WebBloksStyle","WebBloksTheme","WebBloksTooltipUtils","WebBloksUtils","react","useWebBloksAccessibilityModule"],(function(t,n,r,o,a,i,l){var e,s,u=s||(s=o("react")),c=e||(e=r("react")),d=u.useCallback,m=u.useMemo,p=u.useRef,_=o("WebBloksStyle").createStyles({root:{position:"absolute",zIndex:9999},anchor:{position:"absolute",height:"100%",width:"100%"},contentWrapper:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center"},content:{display:"inline-block"},arrow:{height:o("WebBloksTooltipUtils").ARROW_SIZE,width:o("WebBloksTooltipUtils").TOOLTIP_HYPOTENUSE,zIndex:1},arrowDropShadow:{zIndex:-1,position:"absolute"}});function f(e){var t=e.ref,n=e.node,a=e.externalStyle,i=o("WebBloksComponentContext").useWebBloksContext(),l=i.renderNode,s=l(n.getSubNode("child")),u=n.getValues(),f=n.get("decoration"),g=o("WebBloksStyle").useStyle(n,a),h=g.wrapperProps,y=g.ref,C=r("WebBloksDecoration")(u,y),b=r("useWebBloksAccessibilityModule")(),v=b.FocusRegion,S=p(null),R=n==null?void 0:n.get("arrow_type"),L=o("WebBloksTooltipUtils").useCalculatePosition(S,n.get("position"),R),E=L[0],k=L[1],I=o("WebBloksTooltipUtils").useCalculatePositionStyle(S,k),T=o("WebBloksUtils").toPx(n.get("width")),D=o("WebBloksUtils").toPx(n.get("height")),x=o("WebBloksUtils").toPx(n.get("offset_horizontal")),$=o("WebBloksUtils").toPx(n.get("offset_vertical")),P=m(function(){var e=babelHelpers.extends({},I),t=parseFloat(x);R==="shark-fin"&&t>0?e.marginLeft=t+o("WebBloksTooltipUtils").ARROW_SIZE/2:R==="shark-fin"?e.marginLeft=o("WebBloksTooltipUtils").ARROW_SIZE/2:t>0&&(e.marginLeft=t);var n=parseFloat($);return n>0&&(k==="top"?e.marginBottom=n:k==="bottom"&&(e.marginTop=n)),e},[R,x,$,I,k]),N=m(function(){var e={};return k==="bottom"&&(e.flexDirection="column-reverse"),e},[k]),M=o("WebBloksUtils").toPx(f==null?void 0:f.get("border_width")),w=parseFloat(M),A=n.get("margin"),F=o("WebBloksUtils").toPx(A==null?void 0:A.get("start")),O=o("WebBloksUtils").toPx(A==null?void 0:A.get("end")),B=m(function(){var e=babelHelpers.extends({},C);return parseFloat(T)>0&&(e.width=T),parseFloat(D)>0&&(e.height=D),R==="none"?(e.marginTop=o("WebBloksTooltipUtils").ARROW_SIZE,e.marginBottom=o("WebBloksTooltipUtils").ARROW_SIZE):(e.marginTop=-w,e.marginBottom=-w),F!=null&&(e.marginLeft=F),O!=null&&(e.marginRight=O),e},[R,w,C,D,O,F,T]),W=o("WebBloksTheme").useTheme().getTheme(),q=R!=null&&R!=="none",U=m(function(){var e=f==null?void 0:f.get("border_color"),t=f==null?void 0:f.get("border_themed_color");return t!=null?o("WebBloksUtils").getRGBColorWithTheme(t,W):e!=null?o("WebBloksUtils").convertRGBArrToString(o("WebBloksUtils").convertRGBOrHexStringToArr(e)):null},[f,W]),V=m(function(){return w*(100/16)},[w]),H=o("WebBloksTooltipUtils").getArrowPolyLinePoints(E,k,R,V),G=C.boxShadow!=null,z=m(function(){var e={};return G&&(C.boxShadow!=null&&(e.filter="drop-shadow("+C.boxShadow+")"),k==="top"?e.bottom=0:k==="bottom"&&(e.top=0)),e},[C.boxShadow,G,k]),j=d(function(e){return e.stopPropagation()},[]),K=c.jsx("div",babelHelpers.extends({},h,{className:_.root,style:P,onScroll:j,children:c.jsxs("span",{className:_.contentWrapper,style:N,children:[q&&C.boxShadow!=null?c.jsxs("svg",{label:"",preserveAspectRatio:"none",className:o("WebBloksStyle").classNames(_.arrow,_.arrowDropShadow),style:z,viewBox:"0 0 100 100",children:[c.jsx("title",{children:"Arrow drop shadow"}),c.jsx("polygon",{points:H})]}):null,c.jsx("span",{style:B,className:_.content,children:c.jsx(v,{children:s})}),q?c.jsxs("svg",{label:"",preserveAspectRatio:"none",className:_.arrow,viewBox:"0 0 100 100",children:[c.jsx("title",{children:"Arrow pointing to tooltip"}),c.jsx("polyline",{points:H,strokeWidth:V,stroke:U,fill:B==null?void 0:B.background})]}):null]})}));return c.jsxs(c.Fragment,{children:[c.jsx("span",{ref:S,className:_.anchor}),c.jsx(r("WebBloksPortal"),{target:t==null?void 0:t.current,children:K})]})}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);
__d("WebBloksTooltipContainer",["WebBloksComponentContext","WebBloksConstants","WebBloksSSRUtils","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useLayoutEffect,m=o("WebBloksStyle").createStyles({root:{alignSelf:"stretch",position:"relative",display:"flex",zIndex:99}});function p(e){var t=o("react-compiler-runtime").c(37),n=e.node,r=o("WebBloksStyle").useStyle(n),a=r.wrapper,i=r.wrapperProps,l=o("WebBloksComponentContext").useWebBloksContext(),u=l.bloksContext,c=l.renderNode,p=l.executeCatch,_=!!n.get("tooltip_visibility"),f;t[0]!==n?(f=n.getExpression("on_visibility_update"),t[0]=n,t[1]=f):f=t[1];var g=f,h;t[2]!==n?(h=n.getExpression("on_touch_outside"),t[2]=n,t[3]=h):h=t[3];var y=h,C;t[4]!==n||t[5]!==c?(C=c(n.getSubNode("tooltip")),t[4]=n,t[5]=c,t[6]=C):C=t[6];var b=C,v;t[7]!==n||t[8]!==c?(v=c(n.getSubNode("child")),t[7]=n,t[8]=c,t[9]=v):v=t[9];var S=v;u.initAssociatedObject_INTERNAL(n,o("WebBloksConstants").TOOLTIP_VISIBILITY_ASSOCIATED_OBJECT,{visible:_});var R;t[10]!==u||t[11]!==p||t[12]!==n||t[13]!==y||t[14]!==g?(R=function(){g!=null&&p(n,g,[n,!1]),y!=null&&p(n,y,[n,!1]),u.updateAssociatedObject_INTERNAL(n,o("WebBloksConstants").TOOLTIP_VISIBILITY_ASSOCIATED_OBJECT,{visible:!1})},t[10]=u,t[11]=p,t[12]=n,t[13]=y,t[14]=g,t[15]=R):R=t[15];var L=R,E;t[16]!==u||t[17]!==n?(E=u.getAssociatedObject_INTERNAL(n,o("WebBloksConstants").TOOLTIP_VISIBILITY_ASSOCIATED_OBJECT),t[16]=u,t[17]=n,t[18]=E):E=t[18];var k=E,I,T;t[19]!==L||t[20]!==k?(I=function(){if(!(!o("WebBloksSSRUtils").canUseDOM||!k)){var e=document.documentElement;return e.addEventListener("click",L,{passive:!0,once:!0}),(function(){e.removeEventListener("click",L)})}},T=[k,L],t[19]=L,t[20]=k,t[21]=I,t[22]=T):(I=t[21],T=t[22]),d(I,T);var D,x;t[23]!==L||t[24]!==k?(x=function(){if(!(!o("WebBloksSSRUtils").canUseDOM||!k)){var e=document.documentElement;return e.addEventListener("scroll",L,{passive:!0,once:!0}),(function(){e.removeEventListener("scroll",L)})}},D=[k,L],t[23]=L,t[24]=k,t[25]=D,t[26]=x):(D=t[25],x=t[26]),d(x,D);var $;t[27]!==L?($=function(t){t.key==="Escape"&&(t.stopPropagation(),L())},t[27]=L,t[28]=$):$=t[28];var P=$,N=k!=null&&k.visible?b:null,M;t[29]!==S||t[30]!==P||t[31]!==N||t[32]!==i?(M=s.jsxs("div",babelHelpers.extends({},i,{className:m.root,onKeyPress:P,children:[N,S]})),t[29]=S,t[30]=P,t[31]=N,t[32]=i,t[33]=M):M=t[33];var w;return t[34]!==M||t[35]!==a?(w=a(M),t[34]=M,t[35]=a,t[36]=w):w=t[36],w}l.default=p}),98);
__d("StdlibWebBloksComponents",["WebBloksDataComposableTextSpan","WebBloksDataImageSpan","WebBloksDataTextSpan","WebBloksScreenQueryScreenWrapper","WebBloksSpinner","WebBloksTooltip","WebBloksTooltipContainer"],(function(t,n,r,o,a,i,l){var e={"bk.components.Spinner":r("WebBloksSpinner"),"bk.components.Tooltip":r("WebBloksTooltip"),"bk.components.TooltipContainer":r("WebBloksTooltipContainer"),"bk.components.screen.ScreenWrapper":r("WebBloksScreenQueryScreenWrapper"),"bk.data.ComposableTextSpan":r("WebBloksDataComposableTextSpan"),"bk.data.ImageSpan":r("WebBloksDataImageSpan"),"bk.data.TextSpan":r("WebBloksDataTextSpan")};l.COMPONENTS=e}),98);
__d("WebBloksAnimatedAddOnCompleteListener",[],(function(t,n,r,o,a,i){function e(e,t,n){return t.addOnCompleteListener(function(r){return n==null?void 0:n(e,t,r,e.bloksContext)}),t}i.default=e}),66);
__d("WebBloksAnimationsSet",["WebBloksErrors"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){var t=e.animations,n=e.startDelay;this.isCancelled=!1,this.isPaused=!1,this.isInfinite=!1,this.onCompleteListeners=new Set,this.startDelay=0,this.animations=t.slice(),this.startDelay=n||0}var t=e.prototype;return t.play=function(){throw new(o("WebBloksErrors")).WebBloksError("`play` method must be implemented on the subclass of this animation set")},t.addOnCompleteListener=function(t){var e=this,n=0;this.onCompleteListeners.add(t),this.animations.forEach(function(t){var r=function(r){n++,(!r||n===e.animations.length)&&(n=0,e.onCompleteListeners.forEach(function(e){return e(r)}))};t.addOnCompleteListener(r)})},t.removeOnCompleteListener=function(t){this.onCompleteListeners.delete(t)},t.getTotalDuration=function(){throw new(o("WebBloksErrors")).WebBloksError("`getTotalDuration` method must be implemented on the subclass of this animation set")},t.getComputedTimes=function(){throw new(o("WebBloksErrors")).WebBloksError("`getComputedTimes` method must be implemented on the subclass of this animation set")},e})();l.WebBloksAnimationsSet=e}),98);
__d("WebBloksAnimatedUtils",["WebBloksAnimationsSet"],(function(t,n,r,o,a,i,l){function e(e,t){var n;return(n=e.bloksContext.bkContextKeyAnimations.get(t))!=null?n:null}function s(e,t){return e.bloksContext.bkContextKeyAnimations.has(t)}function u(t,n){var r=e(t,n);r==null||r.play(t.bloksContext.bkContextKeyAnimations,n)}function c(t,n){var r=e(t,n);return r==null||r.cancel(),t.bloksContext.bkContextKeyAnimations.delete(n)}function d(e,t,n,r){if(r===void 0&&(r=!0),e.bloksContext.bkContextKeyAnimations.set(t,n),r){var o=function(){c(e,t)};n.addOnCompleteListener(o)}return n}function m(e){var t=e.constructor.name;if(e instanceof o("WebBloksAnimationsSet").WebBloksAnimationsSet)for(var n of e.animations)t+=m(n);return t}l.getAnimationWithToken=e,l.hasAnimationWithToken=s,l.startAnimationWithToken=u,l.deleteAnimationWithToken=c,l.associateAnimationWithToken=d,l.getIDTokenForLegacyAnimation=m}),98);
__d("WebBloksAnimationValue",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){var t=e.id,n=e.animation,r=e.animatedValue;this.isInfinite=!1,this.animatedValue=null,this.onUpdateListeners=new Set,this.onCompleteListeners=new Set,this.$1=null,this.$2=null,this.id=t,this.animatedValue=r,this.animation=n}var t=e.prototype;return t.addUpdateListener=function(t){this.onUpdateListeners.has(t)||this.onUpdateListeners.add(t)},t.removeUpdateListener=function(t){this.onUpdateListeners.delete(t)},t.addOnCompleteListener=function(t){this.onCompleteListeners.add(t)},t.removeOnCompleteListener=function(t){this.onCompleteListeners.delete(t)},t.setAnimatedValue=function(t){this.animatedValue=t},t.getTotalDuration=function(){return this.animation.duration},t.getCurrentTime=function(){var e;return(e=this.$2)!=null?e:0},t.setCurrentTime=function(t){this.$2=t,this.$1=window.performance.now()-this.$2},t.calculateTimelineAnimatedValue=function(t){var e=this.animation,n=e.duration,r=e.format,o=e.from,a=e.interpolator,i=e.to,l=[].concat(o),s=[].concat(i),u=t/n;Number.isNaN(u)&&(u=0);for(var c=[],d=0;d<l.length;d++)s[d]>l[d]?c.push(l[d]+a(u)*(s[d]-l[d])):c.push(l[d]-a(u)*(l[d]-s[d]));return r.apply(void 0,c)},e})();i.WebBloksAnimationValue=e}),66);
__d("WebBloksAnimationsTimeline",["WebBloksAnimationValue","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){var t=this;this.id=null,this.isCancelled=!1,this.isPaused=!1,this.$1=new Set,this.$2=[],this.$3=null,this.$4=null,this.$5=null,this.$14=function(){document.visibilityState==="hidden"&&!t.isPaused?t.pause():document.visibilityState==="visible"&&t.isPaused&&t.resume()},this.$2=this.$6(e)}var t=e.prototype;return t.setID=function(t){this.id=t},t.getID=function(){return this.id},t.play=function(t,n){var e=this;this.isCancelled=!1,this.isPaused=!1;var r=this.$4,a=function(l){if(!(n!=null&&!(t!=null&&t.has(n)))){r=r!=null?r:l;var i=Math.floor(l-r);e.$3=i;var s=e.$7(i);for(var u of s){var c=u[0],d=u[1],m=d.calculateTimelineAnimatedValue(i-c);m!=null&&(d.setAnimatedValue(m),d.onUpdateListeners.forEach(function(e){return e()}))}if(i/e.getTotalDuration()<1)e.$5=window.requestAnimationFrame(a);else{var p=e.$8(),_=p[1];_.isInfinite?(e.$9(),e.$5=window.requestAnimationFrame(a)):e.$10()}o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-animation-frame",{detail:{animationID:e.id,timestamp:e.getCurrentTime()}})}};this.$5=window.requestAnimationFrame(a),this.$11()},t.pause=function(){this.isPaused||(this.isPaused=!0,window.cancelAnimationFrame(this.$5),this.$5=null,this.$4=null)},t.resume=function(){var e;this.isPaused&&(this.isPaused=!1,this.setCurrentTime((e=this.$3)!=null?e:0),this.play(),o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-animation-resume"))},t.addOnCompleteListener=function(t){this.$1.has(t)||this.$1.add(t)},t.removeOnCompleteListener=function(t){this.$1.delete(t)},t.cancel=function(){this.isCancelled=!0,window.cancelAnimationFrame(this.$5),this.$5=null,this.$12()},t.getStartTimeToAnimationInstance=function(){return this.$2},t.getTotalDuration=function(){var e=this.$8(),t=e[0],n=e[1];return t+n.getTotalDuration()},t.getCurrentTime=function(){var e;return(e=this.$3)!=null?e:0},t.setCurrentTime=function(t){this.$4=window.performance.now()-t},t.$9=function(){for(var e=this.$13(),t=this.$2.slice(e),n=t[0],r=n[0],o=this.getTotalDuration()-r,a=0;a<e;a++)this.$2.pop();for(var i of t){var l=i[0],s=i[1];this.$2.push([o+l,s])}},t.$7=function(t){return this.$2.filter(function(e){var n=e[0],r=e[1];return t>=n&&t<=n+r.getTotalDuration()})},t.$13=function(){for(var e=this.$2.length-1;e>0;){var t=this.$2[e],n=t[0],r=t[1];r.isInfinite&&e--}return e},t.$10=function(){this.$2.forEach(function(e){var t=e[1];return t.onCompleteListeners.forEach(function(e){return e(!0)})}),this.$1.forEach(function(e){return e(!0)}),this.$4=null,this.$12()},t.$8=function(){var e=Array.from(this.$2);return e[e.length-1]},t.$6=function(t){var e=[],n=function(r){if(!(!r||!r.length)){var t=r[0],a=r[1];if(a instanceof o("WebBloksAnimationValue").WebBloksAnimationValue){e.push([t,a]);return}for(var i of a.getComputedTimes()){var l=i[0],s=i[1];n([t+l,s])}}};return n([0,t]),e},t.$11=function(){window.addEventListener("visibilitychange",this.$14)},t.$12=function(){window.removeEventListener("visibilitychange",this.$14)},e})();l.WebBloksAnimationsTimeline=e}),98);
__d("WebBloksAnimatedBuild",["WebBloksAnimatedUtils","WebBloksAnimationsTimeline"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=new(o("WebBloksAnimationsTimeline")).WebBloksAnimationsTimeline(t);return o("WebBloksAnimatedUtils").associateAnimationWithToken(e,n,r,!1),t}l.default=e}),98);
__d("WebBloksAnimatedCancel",["WebBloksAnimatedUtils","WebBloksAnimationsTimeline"],(function(t,n,r,o,a,i,l){function e(e,t){if(t instanceof o("WebBloksAnimationsTimeline").WebBloksAnimationsTimeline)t.cancel();else{var n=o("WebBloksAnimatedUtils").getIDTokenForLegacyAnimation(t);o("WebBloksAnimatedUtils").deleteAnimationWithToken(e,n)}}l.default=e}),98);
__d("WebBloksAnimatedCancelToken",["WebBloksAnimatedUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WebBloksAnimatedUtils").getAnimationWithToken(e,t);n!==null&&n.cancel()}l.default=e}),98);
__d("WebBloksAnimationFunctions",[],(function(t,n,r,o,a,i){function e(e,t,n,r){var o=1e-6,a=3*e-3*n+1,i=3*n-6*e,l=3*e,s=3*t-3*r+1,u=3*r-6*t,c=3*t;function d(e){return(3*a*e+2*i)*e+l}function m(e){return((a*e+i)*e+l)*e}function p(e){return((s*e+u)*e+c)*e}function _(e){for(var t=e,n,r,a=0;a<8;a++){if(r=m(t)-e,Math.abs(r)<o)return t;if(n=d(t),Math.abs(n)<o)break;t-=r/n}var i=1,l=0;for(t=e;i>l;){if(r=m(t)-e,Math.abs(r)<o)return t;r>0?i=t:l=t,t=(i+l)/2}return t}function f(e){return p(_(e))}return f}function l(){return e(0,0,1,1)}i.cubicBezier=e,i.linearInterpolator=l}),66);
__d("WebBloksAnimatedCreate",["WebBloksAnimationFunctions","WebBloksAnimationValue","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a,i,l){var s=new(o("WebBloksAnimationValue")).WebBloksAnimationValue({id:""+o("WebBloksUtils").getNextGlobalBloksClientId(),animation:{style:"transform",from:parseFloat(r),to:parseFloat(a),format:function(t){return String(t)},duration:i*1e3,interpolator:l!=null?l:o("WebBloksAnimationFunctions").linearInterpolator()},animatedValue:null});return s.addUpdateListener(function(){t(e,s)}),s.addOnCompleteListener(function(t){n==null||n(e,s,t,e.bloksContext)}),s}l.default=e}),98);
__d("WebBloksAnimatedCreateColor",["WebBloksAnimationFunctions","WebBloksAnimationValue","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a,i,l){var s=new(o("WebBloksAnimationValue")).WebBloksAnimationValue({id:""+o("WebBloksUtils").getNextGlobalBloksClientId(),animation:{style:"color",from:o("WebBloksUtils").convertRGBOrHexStringToArr(r),to:o("WebBloksUtils").convertRGBOrHexStringToArr(a),format:function(t,n,r){return o("WebBloksUtils").convertRGBArrToString([t,n,r,1])},duration:i*1e3,interpolator:l!=null?l:o("WebBloksAnimationFunctions").linearInterpolator()},animatedValue:null});return s.addUpdateListener(function(){t(e,s)}),n&&s.addOnCompleteListener(function(t){return n==null?void 0:n(e,s,t,e.bloksContext)}),s}l.default=e}),98);
__d("WebBloksAnimatedCreateCubicBezier",["WebBloksAnimationFunctions"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a){return o("WebBloksAnimationFunctions").cubicBezier(t,n,r,a)}l.default=e}),98);
__d("WebBloksAnimatedCreateDimension",["WebBloksAnimationFunctions","WebBloksAnimationValue","WebBloksDimensionUtils","WebBloksErrors","WebBloksUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r,a,i,l){var s,u=o("WebBloksDimensionUtils").parseDimension(r);if(!u)throw new(o("WebBloksErrors")).WebBloksError("Failed to parse dimension ("+r+")");var c=u.type,d=u.value,m=(s=o("WebBloksDimensionUtils").parseDimension(a))==null?void 0:s.value;if(m==null)throw new(o("WebBloksErrors")).WebBloksError("Failed to parse dimension ("+a+")");var p=new(o("WebBloksAnimationValue")).WebBloksAnimationValue({id:""+o("WebBloksUtils").getNextGlobalBloksClientId(),animation:{style:"transform",from:d,to:m,format:function(t){return o("WebBloksUtils").toPx(String(t)+c)},duration:i*1e3,interpolator:l!=null?l:o("WebBloksAnimationFunctions").linearInterpolator()},animatedValue:null});return p.addUpdateListener(function(){t(e,p)}),n&&p.addOnCompleteListener(function(t){return n==null?void 0:n(e,p,t,e.bloksContext)}),p}l.default=e}),98);
__d("WebBloksAnimatedDestroy",["WebBloksAnimatedUtils"],(function(t,n,r,o,a,i,l){function e(e,t){o("WebBloksAnimatedUtils").deleteAnimationWithToken(e,t)}l.default=e}),98);
__d("WebBloksAnimatedGetCurrentColorValue",["WebBloksAnimationValue"],(function(t,n,r,o,a,i,l){function e(e,t){if(t instanceof o("WebBloksAnimationValue").WebBloksAnimationValue)return String(t.animatedValue)}l.default=e}),98);
__d("WebBloksAnimatedGetCurrentDimensionValue",["WebBloksAnimationValue"],(function(t,n,r,o,a,i,l){function e(e,t){if(t instanceof o("WebBloksAnimationValue").WebBloksAnimationValue)return String(t.animatedValue)}l.default=e}),98);
__d("WebBloksAnimatedGetCurrentPlayTime",["WebBloksAnimatedUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("WebBloksAnimatedUtils").getAnimationWithToken(e,t);if(n!=null){var r=n.getCurrentTime(),a=r/1e3;return a}return 0}l.default=e}),98);
__d("WebBloksAnimatedGetCurrentValue",["WebBloksAnimationValue"],(function(t,n,r,o,a,i,l){function e(e,t){if(t instanceof o("WebBloksAnimationValue").WebBloksAnimationValue)return parseFloat(t.animatedValue)}l.default=e}),98);
__d("WebBloksAnimatedGetTotalDuration",["WebBloksAnimatedUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WebBloksAnimatedUtils").getAnimationWithToken(e,t);if(n!=null){var r=n.getTotalDuration(),a=r/1e3;return a}}l.default=e}),98);
__d("WebBloksAnimatedIsInitialized",["WebBloksAnimatedUtils"],(function(t,n,r,o,a,i,l){function e(e,t){return o("WebBloksAnimatedUtils").hasAnimationWithToken(e,t)}l.default=e}),98);
__d("WebBloksAnimationsLoopSet",["WebBloksAnimationsSet"],(function(t,n,r,o,a,i,l){var e=["limit"],s=(function(t){function n(n){var r,o=n.limit,a=babelHelpers.objectWithoutPropertiesLoose(n,e);return r=t.call(this,a)||this,r.limit=1/0,r.limit=o||1/0,r}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.getTotalDuration=function(){if(this.limit===1/0)return 1/0;var e=this.animations.reduce(function(e,t){return e+t.getTotalDuration()},0);return e*this.limit+this.startDelay},r.getComputedTimes=function(){var e=this.startDelay,t=[],n=this.animations[0];if(this.limit===1/0)return n.isInfinite=!0,[[e,n]];for(var r=0;r<this.limit;r++)t.push([e,n]),e+=n.getTotalDuration();return t},n})(o("WebBloksAnimationsSet").WebBloksAnimationsSet);l.WebBloksAnimationsLoopSet=s}),98);
__d("WebBloksAnimatedLoop",["WebBloksAnimationsLoopSet"],(function(t,n,r,o,a,i,l){function e(e,t,n){var r=new(o("WebBloksAnimationsLoopSet")).WebBloksAnimationsLoopSet({limit:t<0?1/0:t,animations:[n]});return r}l.default=e}),98);
__d("WebBloksAnimationsParallelSet",["WebBloksAnimationsSet"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getTotalDuration=function(){var e=Math.max.apply(Math,this.animations.map(function(e){return e.getTotalDuration()}));return e+this.startDelay},n.getComputedTimes=function(){var e=[];for(var t of this.animations)t.isInfinite=this.isInfinite,e.push([this.startDelay,t]);return e},t})(o("WebBloksAnimationsSet").WebBloksAnimationsSet);l.WebBloksAnimationsParallelSet=e}),98);
__d("WebBloksAnimatedParallel",["WebBloksAnimationsParallelSet"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){var a=new(o("WebBloksAnimationsParallelSet")).WebBloksAnimationsParallelSet({animations:r,startDelay:n*1e3});return t&&a.addOnCompleteListener(function(n){return t==null?void 0:t(e,a,n,e.bloksContext)}),a}l.default=e}),98);
__d("WebBloksAnimatedPause",["WebBloksAnimatedUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("WebBloksAnimatedUtils").getAnimationWithToken(e,t);if(n!=null&&!n.isCancelled){var r=n.isPaused;return n.pause(),!r&&n.isPaused}return!1}l.default=e}),98);
__d("WebBloksAnimatedResume",["WebBloksAnimatedUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("WebBloksAnimatedUtils").getAnimationWithToken(e,t);if(n!=null&&!n.isCancelled){var r=n.isPaused;return n.resume(),r&&!n.isPaused}return!1}l.default=e}),98);
__d("WebBloksAnimationsSequenceSet",["WebBloksAnimationsSet"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getTotalDuration=function(){var e=this.animations.reduce(function(e,t){return e+t.getTotalDuration()},0);return e+this.startDelay},n.getComputedTimes=function(){var e=this.startDelay,t=[];for(var n of this.animations)n.isInfinite=this.isInfinite,t.push([e,n]),e+=n.getTotalDuration();return t},t})(o("WebBloksAnimationsSet").WebBloksAnimationsSet);l.WebBloksAnimationsSequenceSet=e}),98);
__d("WebBloksAnimatedSequence",["WebBloksAnimationsSequenceSet"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=new(o("WebBloksAnimationsSequenceSet")).WebBloksAnimationsSequenceSet({animations:t,startDelay:r*1e3});return n&&a.addOnCompleteListener(function(t){return n==null?void 0:n(e,a,t,e.bloksContext)}),a}l.default=e}),98);
__d("WebBloksAnimatedSetCurrentPlayTime",["WebBloksAnimatedUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=o("WebBloksAnimatedUtils").getAnimationWithToken(e,t);if(r!=null&&n!=null){var a=n*1e3;r.setCurrentTime(a)}}l.default=e}),98);
__d("WebBloksAnimationsStaggerSet",["WebBloksAnimationsSet"],(function(t,n,r,o,a,i,l){var e=["delay"],s=(function(t){function n(n){var r,o=n.delay,a=babelHelpers.objectWithoutPropertiesLoose(n,e);return r=t.call(this,a)||this,r.delay=0,r.delay=o,r}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.getTotalDuration=function(){var e=this,t=this.animations.map(function(t,n){return t.getTotalDuration()+n*e.delay}),n=Math.max.apply(Math,t);return n+this.startDelay},r.getComputedTimes=function(){var e=this.startDelay,t=[];for(var n of this.animations)n.isInfinite=this.isInfinite,t.push([e,n]),e+=this.delay;return t},n})(o("WebBloksAnimationsSet").WebBloksAnimationsSet);l.WebBloksAnimationsStaggerSet=s}),98);
__d("WebBloksAnimatedStagger",["WebBloksAnimationsStaggerSet"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r=new(o("WebBloksAnimationsStaggerSet")).WebBloksAnimationsStaggerSet({animations:n,delay:t*1e3});return r}l.default=e}),98);
__d("WebBloksAnimatedStart",["WebBloksAnimatedUtils","WebBloksAnimationsTimeline","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=e.bloksContext.loggingIDForInternalFrameworkUseOnly,r={detail:{loggingID:n}};if(t instanceof o("WebBloksAnimationsTimeline").WebBloksAnimationsTimeline)t.play(),r.detail=babelHelpers.extends({},r.detail,{animationID:t.getID()});else{var a=new(o("WebBloksAnimationsTimeline")).WebBloksAnimationsTimeline(t),i=o("WebBloksAnimatedUtils").getIDTokenForLegacyAnimation(t);a.setID(i),r.detail=babelHelpers.extends({},r.detail,{animationID:a.getID()}),o("WebBloksAnimatedUtils").associateAnimationWithToken(e,i,a,!1),o("WebBloksAnimatedUtils").startAnimationWithToken(e,i)}o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-animation-start",r);var l=function(){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-animation-end",r),t==null||t.removeOnCompleteListener(l)};t==null||t.addOnCompleteListener(l)}l.default=e}),98);
__d("WebBloksAnimatedStartToken",["WebBloksAnimatedUtils","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){function e(e,t){var n=o("WebBloksAnimatedUtils").getAnimationWithToken(e,t);n!=null&&n.setID(t),o("WebBloksAnimatedUtils").startAnimationWithToken(e,t);var r=e.bloksContext.loggingIDForInternalFrameworkUseOnly,a={detail:{animationID:t,loggingID:r}};o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-animation-start",a);var i=function(){o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-animation-end",a),n==null||n.removeOnCompleteListener(i)};n==null||n.addOnCompleteListener(i)}l.default=e}),98);
__d("WebBloksCollectionScrollToIndexById",["WebBloksCollectionScrollTo"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){if(t.uiMutableContainer.domNode){var r=n.getValues(),a=r.animated,i=r.target_id,l=t.getSubNodes("children");if(!(l==null||l.length===0)){for(var s=0;s<l.length;s++)if(l[s].getId()===i){o("WebBloksCollectionScrollTo").scrollWebBloksCollectionToIndex(t,{index:s,isAnimated:a});break}}}}l.default=e}),98);
__d("WebBloksCollectionSetIndex",["WebBloksCollectionScrollTo"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){t.uiMutableContainer.domNode&&o("WebBloksCollectionScrollTo").scrollWebBloksCollectionToIndex(t,{index:n,isAnimated:r})}l.default=e}),98);
__d("WebBloksScreenClose",["WebBloksBooleanUtils","WebBloksErrors"],(function(t,n,r,o,a,i,l){function e(e,t){var n=t.getValues(),r=n.type,a=n.is_inclusive,i=n.screen_id;if(r==null)throw new(o("WebBloksErrors")).WebBloksError("WebBloksScreenCloseType must be provided to close a screen");e.objectSet.navigationManager.close(r,i!=null?i:void 0,a!=null?o("WebBloksBooleanUtils").isTrue(a):void 0)}l.default=e}),98);
__d("WebBloksScreenOpen",["WebBloksContainerConfig","WebBloksErrors","WebBloksPayloadParser","WebBloksScreen","webBloksPerformanceUtils"],(function(t,n,r,o,a,i,l){function e(e,t,n,r){var a=e.bloksContext.objectSet.environment,i=a.navigationTrackingUtils,l=a.screenQueryTemplate,s=a.traversalKeys;if(l==null)throw new(o("WebBloksErrors")).WebBloksError("Missing screen query template when calling bk.action.screen.Open");var u=t.get("props"),c=u.__infra__app_id,d=u.__infra__screen_id,m=o("WebBloksContainerConfig").getContainerConfig(e.bloksContext,n),p={initialContainer:{model:n,config:m},screenId:d!=null?String(d):void 0};o("webBloksPerformanceUtils").addWebBloksPerformanceMark("--web-bloks-ttrc-start"),i==null||i.startNavigationCallback(String(c));var _=o("WebBloksPayloadParser").parseTree(l,s),f=o("WebBloksScreen").WebBloksScreen.fromBloksParseResult(e.bloksContext.objectSet,_,p,u,t.get("url_relative_path"));e.objectSet.navigationManager.open(f,r)}l.default=e}),98);
__d("WebBloksTooltipConstants",[],(function(t,n,r,o,a,i){var e=!1;i.ANIMATE_TOOLTIP_ON_ENTRY_AND_EXIT=e}),66);
__d("WebBloksTooltipHide",["WebBloksConstants","WebBloksTooltipConstants"],(function(t,n,r,o,a,i,l){function e(e,t){var n=t.getExpression("on_visibility_update");if(e.bloksContext.updateAssociatedObject_INTERNAL(t,o("WebBloksConstants").TOOLTIP_VISIBILITY_ASSOCIATED_OBJECT,{visible:!1}),n!=null){var r=e.createBloksModelScopedContext(t.keyPath);r.executeCatch(n.getValue(),[!1,o("WebBloksTooltipConstants").ANIMATE_TOOLTIP_ON_ENTRY_AND_EXIT])}}l.default=e}),98);
__d("WebBloksTooltipShow",["WebBloksConstants","WebBloksTooltipConstants"],(function(t,n,r,o,a,i,l){function e(e,t){var n=t.getExpression("on_visibility_update");if(e.bloksContext.updateAssociatedObject_INTERNAL(t,o("WebBloksConstants").TOOLTIP_VISIBILITY_ASSOCIATED_OBJECT,{visible:!0}),n!=null){var r=e.createBloksModelScopedContext(t.keyPath);r.executeCatch(n.getValue(),[!0,o("WebBloksTooltipConstants").ANIMATE_TOOLTIP_ON_ENTRY_AND_EXIT])}}l.default=e}),98);
__d("StdlibWebBloksActions",["WebBloksAnimatedAddOnCompleteListener","WebBloksAnimatedBuild","WebBloksAnimatedCancel","WebBloksAnimatedCancelToken","WebBloksAnimatedCreate","WebBloksAnimatedCreateColor","WebBloksAnimatedCreateCubicBezier","WebBloksAnimatedCreateDimension","WebBloksAnimatedDestroy","WebBloksAnimatedGetCurrentColorValue","WebBloksAnimatedGetCurrentDimensionValue","WebBloksAnimatedGetCurrentPlayTime","WebBloksAnimatedGetCurrentValue","WebBloksAnimatedGetTotalDuration","WebBloksAnimatedIsInitialized","WebBloksAnimatedLoop","WebBloksAnimatedParallel","WebBloksAnimatedPause","WebBloksAnimatedResume","WebBloksAnimatedSequence","WebBloksAnimatedSetCurrentPlayTime","WebBloksAnimatedStagger","WebBloksAnimatedStart","WebBloksAnimatedStartToken","WebBloksCollectionScrollToIndexById","WebBloksCollectionSetIndex","WebBloksDummy","WebBloksScreenClose","WebBloksScreenOpen","WebBloksTooltipHide","WebBloksTooltipShow"],(function(t,n,r,o,a,i,l){var e={"bk.action.animated.AddOnCompleteListener":r("WebBloksAnimatedAddOnCompleteListener"),"bk.action.animated.Build":r("WebBloksAnimatedBuild"),"bk.action.animated.Cancel":r("WebBloksAnimatedCancel"),"bk.action.animated.CancelToken":r("WebBloksAnimatedCancelToken"),"bk.action.animated.CancelWithToken":r("WebBloksDummy"),"bk.action.animated.Create":r("WebBloksAnimatedCreate"),"bk.action.animated.CreateColor":r("WebBloksAnimatedCreateColor"),"bk.action.animated.CreateDimension":r("WebBloksAnimatedCreateDimension"),"bk.action.animated.Destroy":r("WebBloksAnimatedDestroy"),"bk.action.animated.GetCurrentColorValue":r("WebBloksAnimatedGetCurrentColorValue"),"bk.action.animated.GetCurrentDimensionValue":r("WebBloksAnimatedGetCurrentDimensionValue"),"bk.action.animated.GetCurrentPlayTime":r("WebBloksAnimatedGetCurrentPlayTime"),"bk.action.animated.GetCurrentValue":r("WebBloksAnimatedGetCurrentValue"),"bk.action.animated.GetTotalDuration":r("WebBloksAnimatedGetTotalDuration"),"bk.action.animated.IsInitialized":r("WebBloksAnimatedIsInitialized"),"bk.action.animated.Loop":r("WebBloksAnimatedLoop"),"bk.action.animated.Parallel":r("WebBloksAnimatedParallel"),"bk.action.animated.Pause":r("WebBloksAnimatedPause"),"bk.action.animated.Resume":r("WebBloksAnimatedResume"),"bk.action.animated.Sequence":r("WebBloksAnimatedSequence"),"bk.action.animated.SetCurrentPlayTime":r("WebBloksAnimatedSetCurrentPlayTime"),"bk.action.animated.Stagger":r("WebBloksAnimatedStagger"),"bk.action.animated.Start":r("WebBloksAnimatedStart"),"bk.action.animated.StartToken":r("WebBloksAnimatedStartToken"),"bk.action.animated.StartWithToken":r("WebBloksDummy"),"bk.action.animated.easing.CreateCubicBezier":r("WebBloksAnimatedCreateCubicBezier"),"bk.action.collection.ScrollToIndexById":r("WebBloksCollectionScrollToIndexById"),"bk.action.collection.SetIndex":r("WebBloksCollectionSetIndex"),"bk.action.screen.Close":r("WebBloksScreenClose"),"bk.action.screen.Open":r("WebBloksScreenOpen"),"bk.action.tooltip.Hide":r("WebBloksTooltipHide"),"bk.action.tooltip.Show":r("WebBloksTooltipShow")};l.ACTIONS=e}),98);
__d("stdlibTraversalKeys",[],(function(t,n,r,o,a,i){var e={"bk.components.Tooltip":{subnodes:["_style","margin","child","decoration"],plural_subnodes:["extensions","child_templates"]},"bk.components.TooltipContainer":{subnodes:["_style","tooltip","child"],plural_subnodes:["extensions","child_templates"]},"bk.components.screen.ScreenWrapper":{subnodes:["_style","content","container_config","navigation_callbacks"],plural_subnodes:["extensions","child_templates"]},"bk.data.ComposableTextSpan":{plural_subnodes:["styles","spans","child_templates"]},"bk.data.ImageSpan":{subnodes:["image_component","image_margin"],plural_subnodes:["styles","child_templates"]},"bk.data.TextSpan":{subnodes:["text_provider"],plural_subnodes:["styles","child_templates"]},"bk.data.screen.CloseParams":{subnodes:["container_options"],plural_subnodes:["child_templates"]},"bk.data.screen.ScreenConfig":{subnodes:["prebundled_template"],plural_subnodes:["child_templates"]},"bk.AnyComponent":{subnodes:["style"],plural_subnodes:["extensions","child_templates"]},"bk.components.BoxDecoration":{subnodes:["background","foreground","corner_fill_themed_color","border_themed_color","shadow_themed_color","contrib","spot_shadow_color","ambient_shadow_color"],plural_subnodes:["child_templates"]},"bk.components.Image":{subnodes:["_style","color_filter","contrib","progress_ring_color","focus_point","placeholder_color"],plural_subnodes:["extensions","child_templates"]}},l=e;i.default=l}),66);
__d("StdlibWebBloksEnvironmentConfigDynamic",["StdlibWebBloksActions","stdlibTraversalKeys"],(function(t,n,r,o,a,i,l){var e={actions:o("StdlibWebBloksActions").ACTIONS,traversalKeys:r("stdlibTraversalKeys")};l.STDLIB_ENVIRONMENT_CONFIG=e}),98);
__d("WebBloksAssetRenderer",["CometVisualCompletionAttributes","URI","WebBloksStyle","coerceImageishSprited","coerceImageishURL","getImageSourceURLFromImageish","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["src","style"],u,c,d=c||(c=o("react"));function m(e){return e instanceof(u||(u=r("URI")))?e.toString():e}function p(t){var n=o("react-compiler-runtime").c(27),a,i;n[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l,u,c,p,_;if(n[3]!==a||n[4]!==i){_=Symbol.for("react.early_return_sentinel");e:{u=o("WebBloksStyle").classNames(a.className,"img");var f=m(a.src);if(f==null){_=d.jsx("img",babelHelpers.extends({},a,{className:u}));break e}var g=r("coerceImageishSprited")(f);if(l=g&&a.alt!=null&&String(a.alt)!==""?d.jsx("u",{children:a.alt}):null,typeof f=="string"){_=d.jsx("img",babelHelpers.extends({},a,{className:u,src:f,children:l}));break e}if(g){var h,y;if(n[10]!==a){var C=a,b=C.src,v=C.style,S=babelHelpers.objectWithoutPropertiesLoose(C,s);y=v,h=S,n[10]=a,n[11]=h,n[12]=y}else h=n[11],y=n[12];_=d.jsx("i",babelHelpers.extends({},h,r("CometVisualCompletionAttributes").CSS_IMG,{className:o("WebBloksStyle").classNames(u,g.type==="css"?g.className:void 0),ref:i,style:g.type==="cssless"?babelHelpers.extends({},y,g.style):y,children:l}));break e}c=r("getImageSourceURLFromImageish")(f),p=r("coerceImageishURL")(f)}n[3]=a,n[4]=i,n[5]=l,n[6]=u,n[7]=c,n[8]=p,n[9]=_}else l=n[5],u=n[6],c=n[7],p=n[8],_=n[9];if(_!==Symbol.for("react.early_return_sentinel"))return _;var R=p;if(a.width===void 0&&a.height===void 0&&R){var L;return n[13]!==l||n[14]!==u||n[15]!==c||n[16]!==a||n[17]!==i||n[18]!==R.height||n[19]!==R.width?(L=d.jsx("img",babelHelpers.extends({},a,{className:u,height:R.height,src:c,ref:i,width:R.width,children:l})),n[13]=l,n[14]=u,n[15]=c,n[16]=a,n[17]=i,n[18]=R.height,n[19]=R.width,n[20]=L):L=n[20],L}var E;return n[21]!==l||n[22]!==u||n[23]!==c||n[24]!==a||n[25]!==i?(E=d.jsx("img",babelHelpers.extends({},a,{className:u,ref:i,src:c,children:l})),n[21]=l,n[22]=u,n[23]=c,n[24]=a,n[25]=i,n[26]=E):E=n[26],E}l.default=p}),98);
__d("WebBloksHasteAnimationFrameRateAnalytics",["Promise","QuickPerformanceLogger","WebBloksErrors","qpl"],(function(t,n,r,o,a,i,l){var e,s,u=60,c=[30,48,u,120,240,300],d="sfd",m="lfd",p="animation_key",_="bloks_logging_id",f="ts",g=r("qpl")._(36713009,"1890"),h=0,y=(function(){function t(){this.$1=null,this.$2=null,this.$3()}var a=t.prototype;return a.$3=function(){var e=this;try{this.$4().then(function(t){e.$1=t})}catch(e){throw new(o("WebBloksErrors")).WebBloksError("Failed to initialize WebBloksHasteAnimationFrameRateAnalytics")}},a.$5=function(t){return c.reduce(function(e,n){return Math.abs(n-t)<Math.abs(e-t)?n:e})},a.$4=function(){var e=this;return new(s||(s=n("Promise")))(function(t){window.requestAnimationFrame(function(n){window.requestAnimationFrame(function(r){return t(n<r?e.$5(1e3/(r-n)):u)})})})},a.reset=function(){this.$2=null},a.resume=function(t){this.$2=t},a.incrementDroppedFrames=function(n,o,a){var t=this.$1,i=this.$2;if(t!==null&&i!==null&&o>i){var l=o-i,s=1e3/t,u=Math.max(Math.round(l/s)-1,0),c=u>=4?u/4:0,p=n!=null?this.$6(n):h,_=(e||(e=r("QuickPerformanceLogger"))).getMarker(g,p);if(_!=null){var y,C,b,v,S,R=(y=_.annotations)==null?void 0:y.int,L=((C=R==null?void 0:R[d])!=null?C:0)+u,E=((b=R==null?void 0:R[m])!=null?b:0)+c;(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(g,{int:(v={},v[d]=L,v[f]=a,v),double:(S={},S[m]=E,S)},{instanceKey:p})}}this.$2=o},a.onStart=function(n,o){var t;this.$2=null;var a=n!=null?this.$6(n):h;(e||(e=r("QuickPerformanceLogger"))).markerStart(g,a),e.markerAnnotate(g,{string:(t={},t[p]=n,t[_]=o,t)},{instanceKey:a})},a.onEnd=function(n){var t=n!=null?this.$6(n):h;(e||(e=r("QuickPerformanceLogger"))).markerEnd(g,2,t)},a.$6=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);e=(e<<5)-e+r,e&=e}return Math.abs(e)},t})();l.default=y}),98);
__d("WebBloksHasteAsyncActionAnalytics",["QPLJoinUtils","QuickPerformanceLogger","Random","guid","qpl"],(function(t,n,r,o,a,i,l){var e,s=Math.round(o("Random").random()*1e3),u=r("qpl")._(36707139,"1111"),c=r("guid")(),d=(function(){function t(){this.$1=u,this.$1=u}var n=t.prototype;return n.onStart=function(n,a){(e||(e=r("QuickPerformanceLogger"))).markerStart(this.$1,s,n,{cancelExisting:!0}),o("QPLJoinUtils").setJoinId(e,this.$1,c,{instanceKey:s}),e.markerAnnotate(this.$1,{string:{app_id:a}},{instanceKey:s})},n.onEnd=function(n){(e||(e=r("QuickPerformanceLogger"))).markerEnd(this.$1,2,s,n.startTime)},n.onCancel=function(){(e||(e=r("QuickPerformanceLogger"))).markerDrop(this.$1,s)},t})();l.default=d}),98);
__d("WebBloksHasteTTRCAnalytics",["QPLJoinUtils","QuickPerformanceLogger","Random","guid","qpl"],(function(t,n,r,o,a,i,l){var e,s=Math.round(o("Random").random()*1e3),u=r("qpl")._(719983200,"2401"),c=r("qpl")._(720000263,"2371"),d=r("guid")(),m=(function(){function t(){this.$1=u,this.$1=u}var n=t.prototype;return n.setMarkerId=function(t){t===720000263?this.$1=c:this.$1=u},n.onStart=function(n,a){(e||(e=r("QuickPerformanceLogger"))).markerStart(this.$1,s,n,{cancelExisting:!0}),o("QPLJoinUtils").setJoinId(e,this.$1,d,{instanceKey:s}),e.markerAnnotate(this.$1,{string:{app_id:a}},{instanceKey:s})},n.onEnd=function(n){(e||(e=r("QuickPerformanceLogger"))).markerEnd(this.$1,2,s,n.startTime)},t})();l.default=m}),98);
__d("WebBloksHasteAnalytics",["WebBloksHasteAnimationFrameRateAnalytics","WebBloksHasteAsyncActionAnalytics","WebBloksHasteTTRCAnalytics"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.performanceObserver=null,this.$3=null,this.$2=new(r("WebBloksHasteAsyncActionAnalytics")),this.$1=new(r("WebBloksHasteTTRCAnalytics"))}var t=e.prototype;return t.$4=function(){var e=this;window.PerformanceObserver!=null&&(this.performanceObserver=new PerformanceObserver(function(t){t.getEntries().forEach(function(t){var n,r=t.name,o=t.entryType;if(!(r==null&&o!=="mark")){var a=(n=t==null?void 0:t.detail)!=null?n:null;switch(r){case"--web-bloks-ttrc-start":{var i;if((a==null?void 0:a.markerId)!=null){var l;(l=e.$1)==null||l.setMarkerId(a==null?void 0:a.markerId)}(i=e.$1)==null||i.onStart(t.startTime,a==null?void 0:a.appId);break}case"--web-bloks-ttrc-end":{var s;(s=e.$1)==null||s.onEnd(t);break}case"--web-bloks-animation-start":{var u,c;(u=e.$3)==null||u.onStart((c=a==null?void 0:a.animationID)!=null?c:null,a==null?void 0:a.loggingID);break}case"--web-bloks-animation-frame":{var d,m;(d=e.$3)==null||d.incrementDroppedFrames((m=a==null?void 0:a.animationID)!=null?m:null,t.startTime,a==null?void 0:a.timestamp);break}case"--web-bloks-animation-resume":{var p;(p=e.$3)==null||p.resume(t.startTime);break}case"--web-bloks-animation-end":{var _;(_=e.$3)==null||_.onEnd(a==null?void 0:a.animationID);break}case"--web-bloks-async-action-start":{e.$2.onStart(t.startTime,a==null?void 0:a.appId);break}case"--web-bloks-async-action-success":{var f;(f=e.$2)==null||f.onEnd(t);break}case"--web-bloks-async-action-error":{e.$2.onCancel();break}}}})}))},t.subscribe=function(){var e,t=this;return this.performanceObserver==null&&this.$4(),(e=this.performanceObserver)==null||e.observe({entryTypes:["mark"]}),function(){return t.$5()}},t.$5=function(){var e;(e=this.performanceObserver)==null||e.disconnect()},t.subscribeFrameRate=function(){var e=this;return this.$3=new(r("WebBloksHasteAnimationFrameRateAnalytics")),function(){var t;return(t=e.$3)==null?void 0:t.reset()}},e})();l.default=e}),98);
__d("webBloksFetchJson",["WebBloksErrors"],(function(t,n,r,o,a,i,l){"use strict";var e="for (;;);",s=e.length,u="content-type",c="application/x-javascript; charset=utf-8";async function d(e,t){var n=new URLSearchParams;for(var r in t){var a=t[r];a!=null&&n.append(r,String(a))}var i;try{i=await window.fetch(e.toString(),{method:"post",body:n,credentials:"same-origin"})}catch(e){throw new(o("WebBloksErrors")).WebBloksNetworkError("Network error",e)}var l=i.headers.get(u);if(i.status!==200)throw i.status>=500?new(o("WebBloksErrors")).WebBloksError("Status: "+i.status+" "+i.statusText):new(o("WebBloksErrors")).WebBloksNetworkError("Status: "+i.status+" "+i.statusText);if(l&&l!==c)throw new(o("WebBloksErrors")).WebBloksNetworkError("Unexpected content-type: "+l);var d=await i.text(),m=d.substr(s),p=JSON.parse(m);if(p!=null&&p.redirect)throw new(o("WebBloksErrors")).WebBloksNetworkError("Unexpected redirect: "+p.redirect);return p}l.default=d}),98);
__d("WebBloksHasteAppLoader",["AbstractWebBloksAppLoader","URI","WebBloksVersioningID","getAsyncParams","webBloksFetchJson"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(t){function n(e){var n;return n=t.call(this)||this,n.$WebBloksHasteAppLoader$p_1=e,n}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.makePostRequest=function(n,a){return r("webBloksFetchJson")(new(e||(e=r("URI")))(n).addQueryData({__bkv:o("WebBloksVersioningID").versioningID}).toString(),babelHelpers.extends({},r("getAsyncParams")("POST"),a))},a.getAsyncFetchURI=function(t,n,r){return this.$WebBloksHasteAppLoader$p_1.getURIBuilder().setParams({appid:t,type:r}).getURI().toString()},a.getAsyncFetchData=function(t,n,r){return{params:n!==null?JSON.stringify(n):null}},n})(o("AbstractWebBloksAppLoader").AbstractWebBloksAppLoader);l.WebBloksHasteAppLoader=s}),98);
__d("WebBloksHasteGKs",["WebBloksEnvironmentTypes","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.call(this,new Map([["frl_xmds_3_gradient_animation_opt_out",r("gkx")("8611")]]))||this}return babelHelpers.inheritsLoose(t,e),t})(o("WebBloksEnvironmentTypes").WebBloksGKs);l.default=e}),98);
__d("WebBloksHasteLogger",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){}var t=e.prototype;return t.warn=function(n,o){for(var t=arguments.length,a=new Array(t>2?t-2:0),i=2;i<t;i++)a[i-2]=arguments[i];if(o instanceof Error){var l;(l=r("FBLogger")(e.FBLOGGER_DEFAULT_PROJECT).catching(o)).info.apply(l,[n].concat(a))}else{var s;(s=r("FBLogger")(e.FBLOGGER_DEFAULT_PROJECT)).info.apply(s,[n,o].concat(a))}},t.mustfix=function(n,o){for(var t=arguments.length,a=new Array(t>2?t-2:0),i=2;i<t;i++)a[i-2]=arguments[i];if(o instanceof Error){var l;(l=r("FBLogger")(e.FBLOGGER_DEFAULT_PROJECT).catching(o)).mustfix.apply(l,[n].concat(a))}else{var s;(s=r("FBLogger")(e.FBLOGGER_DEFAULT_PROJECT)).mustfix.apply(s,[n,o].concat(a))}},t.scriptError=function(t){var e,n,o=(e=(n=t.stackFrame)==null?void 0:n.toArray())!=null?e:["(unknown)"],a=o.join().replaceAll(":","<colon>"),i="wbloks_script_error";t instanceof Error?r("FBLogger")(i).addMetadata("WEBBLOKS","CLIENT_ERROR_STACK",a).catching(t).mustfix(t.message):r("FBLogger")(i).addMetadata("WEBBLOKS","CLIENT_ERROR_STACK",a).mustfix(t.message,t)},e})();e.FBLOGGER_DEFAULT_PROJECT="wbloks",l.default=e}),98);
__d("WebBloksHasteUtils",["CurrentLocale"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("CurrentLocale").get().split("_"),t=e[0],n=e[1];return t+"-"+n.toUpperCase()}l.getLocaleFromServer=e}),98);
__d("XWebBloksAsyncRawController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/async/wbloks/fetch/",{appid:{type:"String",required:!0},params:{type:"String"},type:{type:"Enum",required:!0,enumType:1},debug_tooling_metadata_token:{type:"String"}})}),null);
__d("WebBloksHasteEnvironmentDynamic",["ix","ACQWebBloksEnvironmentConfigDynamic","CoreWebBloksEnvironmentConfigDynamic","HasteSharedWebBloksActions","ScriptPath","StdlibWebBloksEnvironmentConfigDynamic","WebBloksAssetRenderer","WebBloksEnvironment","WebBloksHasteAnalytics","WebBloksHasteAppLoader","WebBloksHasteGKs","WebBloksHasteLogger","WebBloksHasteUtils","WebBloksI18nUtils","WebBloksUtils","XWebBloksAsyncRawController"],(function(t,n,r,o,a,i,l,s){"use strict";var e={navCross:s("1356754"),settings:s("1361369"),nav3DotHorizontal:s("184566"),chevronLeft:s("1362297"),chevronLeftDark:s("166735"),chevronLeft24:s("1296473"),appMessenger:s("1350889"),navIcon:s("1729923"),navShoppingCart:s("1795210"),navInfoCircle:s("1346159")};function u(){for(var t=o("WebBloksHasteUtils").getLocaleFromServer(),n=o("WebBloksI18nUtils").isLocaleRtl(t),a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return o("WebBloksEnvironment").createEnvironment.apply(void 0,[o("CoreWebBloksEnvironmentConfigDynamic").CORE_ENVIRONMENT_CONFIG,o("StdlibWebBloksEnvironmentConfigDynamic").STDLIB_ENVIRONMENT_CONFIG,o("ACQWebBloksEnvironmentConfigDynamic").ACQ_ENVIRONMENT_CONFIG,{analytics:new(r("WebBloksHasteAnalytics")),appLoader:new(o("WebBloksHasteAppLoader")).WebBloksHasteAppLoader(r("XWebBloksAsyncRawController")),actions:o("HasteSharedWebBloksActions").ACTIONS,navigationTrackingUtils:null,logger:new(r("WebBloksHasteLogger")),AssetRenderer:o("WebBloksUtils").cast(r("WebBloksAssetRenderer")),controllerNavigationLogger:{setCurrentController:function(t){return o("ScriptPath").set(t)},getCurrentController:function(){return o("ScriptPath").getScriptPath()}},staticAssets:e,locale:t,isRtl:n,gkx:new(r("WebBloksHasteGKs"))}].concat(i))}l.createWebBloksHasteEnvironment=u}),98);
__d("WebBloksHasteEnvironment",["AcqWebBloksComponents","CoreWebBloksComponents","HasteSharedWebBloksComponents","StdlibWebBloksComponents","WebBloksHasteEnvironmentDynamic"],(function(t,n,r,o,a,i,l){"use strict";function e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o("WebBloksHasteEnvironmentDynamic").createWebBloksHasteEnvironment.apply(void 0,[{components:babelHelpers.extends({},o("CoreWebBloksComponents").COMPONENTS,o("StdlibWebBloksComponents").COMPONENTS,o("AcqWebBloksComponents").COMPONENTS,o("HasteSharedWebBloksComponents").COMPONENTS)}].concat(t))}l.createWebBloksHasteEnvironment=e}),98);
__d("msgWebTraversalKeys",[],(function(t,n,r,o,a,i){var e={"bk.components.VideoV2":{subnodes:["_style","player_identifier"],plural_subnodes:["extensions","video_versions","child_templates"]},"bk.data.screen.containerconfig.bottomsheet.Msg":{subnodes:["navbar","android_edge_to_edge_config"],plural_subnodes:["child_templates"]},"bk.data.screen.navbar.bottomsheet.Msg":{subnodes:["leading_button"],plural_subnodes:["child_templates"]}},l=e;i.default=l}),66);
__d("MSGWebBloksEnvironment",["MSGWebBloksPrimitives","MsgWebWebBloksScreenQueryRootTemplate","WebBloksEnvironment","WebBloksFocusAppWrapper.react","WebBloksFocusRegion.react","WebBloksFontOverrides","WebBloksHasteEnvironment","WebBloksUtils","msgWebTraversalKeys","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=function(){var t;return o("WebBloksHasteEnvironment").createWebBloksHasteEnvironment({accessibilityModule:{FocusAppWrapper:r("WebBloksFocusAppWrapper.react"),FocusRegion:o("WebBloksFocusRegion.react").FocusRegion},actions:(t=o("MSGWebBloksPrimitives")).ACTIONS,components:t.COMPONENTS,containerConfigs:t.CONTAINER_CONFIGS,extensionHandlers:t.EXTENSION_HANDLERS,fontFamilyMappings:babelHelpers.extends({},o("WebBloksFontOverrides").WBLOKS_RESET_SYSTEM_FONTS),screenQueryTemplate:o("WebBloksUtils").cast(o("MsgWebWebBloksScreenQueryRootTemplate").TEMPLATE),traversalKeys:r("msgWebTraversalKeys")},e)},t[0]=e,t[1]=n):n=t[1],o("WebBloksEnvironment").useWebBloksEnvironmentStore(n)}l.useMSGBloksEnvironment=e}),98);
__d("WebBloksClientPerfLogger",[],(function(t,n,r,o,a,i){"use strict";var e=!0;function l(t,n){var r=window.WebBloksClientLogger;!e||r==null||r.logEvent==null||r.logEvent(t,n)}function s(){var t,n=(t=window.WebBloksPreHydrationInteractionsRecorder)==null?void 0:t.concludeEventRecording();n&&n.clicksCount>0&&l("SSR_PRE_HYDRATION_INTERACTION_COUNT",n),e=!1}var u={log:l,destroy:s};i.default=u}),66);
__d("WebBloksErrorRenderer",["WebBloksTheme","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(12),n=e.error,r,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={backgroundColor:o("WebBloksTheme").WebBloksThemeVars["error-or-destructive"],borderRadius:8,display:"flex",flexDirection:"column",margin:16,overflow:"hidden",padding:16,width:"100%",minHeight:400,minWidth:200,boxSizing:"border-box"},a={color:"white",fontWeight:"bolder",justifyContent:"center"},t[0]=r,t[1]=a):(r=t[0],a=t[1]);var i;t[2]!==n.message||t[3]!==n.name?(i=s.jsxs("div",{style:a,children:["[fb-only] WebBloks Render error ",n.name,": ",n.message]}),t[2]=n.message,t[3]=n.name,t[4]=i):i=t[4];var l,u;t[5]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx("div",{style:{color:"white",fontWeight:"bolder",justifyContent:"center",fontSize:"75%"},children:"this will throw in production"}),u={backgroundColor:o("WebBloksTheme").WebBloksThemeVars["primary-bg"],borderRadius:4,flexGrow:1,fontFamily:"monospace",marginTop:16,overflow:"scroll",padding:16,whiteSpace:"pre-wrap",lineBreak:"anywhere"},t[5]=l,t[6]=u):(l=t[5],u=t[6]);var c;t[7]!==n.stack?(c=s.jsx("pre",{style:u,children:n.stack}),t[7]=n.stack,t[8]=c):c=t[8];var d;return t[9]!==i||t[10]!==c?(d=s.jsxs("div",{style:r,children:[i,l,c]}),t[9]=i,t[10]=c,t[11]=d):d=t[11],d}l.default=u}),98);
__d("WebBloksErrorRoot",["WebBloksErrorRenderer","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.error,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=s.jsx("div",{className:c.errorText,children:"An error occurred. Please reload to try again."}),t[0]=r):r=t[0];var a;t[1]!==n?(a=null,t[1]=n,t[2]=a):a=t[2];var i;return t[3]!==a?(i=s.jsxs("div",{className:c.errorRoot,children:[r,a]}),t[3]=a,t[4]=i):i=t[4],i}var c=o("WebBloksStyle").createStyles({errorRoot:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%"},errorText:{fontWeight:"bold"}});l.default=u}),98);
__d("WebBloksErrorBoundary",["WebBloksErrorRoot","react"],(function(t,n,r,o,a,i,l){var e,s=e||(e=r("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={error:null},babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e),t.getDerivedStateFromError=function(t){return{hasError:!0,error:t}};var n=t.prototype;return n.componentDidCatch=function(t,n){this.props.logger.mustfix("Error rendering components: %s",t,n==null?void 0:n.componentStack)},n.render=function(){var e=this.state.error;return e!=null?s.jsx(r("WebBloksErrorRoot"),{error:e}):this.props.children},t})(s.Component);l.default=u}),98);
__d("WebBloksFocusScopeQueries",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e==="h1"||e==="h2"||e==="h3"||t.role==="heading"&&(t["aria-level"]===1||t["aria-level"]===2||t["aria-level"]===3)||t["aria-busy"]===!0||t.role==="progressbar"||t.role==="status"}function l(e,t){return t.tabIndex===-1&&!(t.disabled===!0||t.type==="hidden"||t["aria-disabled"]===!0||t["aria-hidden"]===!0)?!0:c(e,t)}function s(e){return e.type!=="hidden"&&e.type!=="file"}function u(e,t){return e==="input"&&s(t)}function c(e,t){return t.tabIndex===-1||t.disabled===!0?!1:t.tabIndex===0||t.contentEditable===!0?!0:e==="a"||e==="area"?t.href!=null&&t.href!==""&&t.rel!=="ignore":e==="input"?s(t):e==="button"||e==="textarea"||e==="select"||e==="iframe"||e==="embed"}var d=[u,c];function m(e){return e.offsetWidth===0&&e.offsetHeight===0}function p(e,t,n){return!m(n)&&c(e,t)}function _(e,t){return e==="td"||e==="th"||t.role==="gridcell"||t.role==="columnheader"||t.role==="rowheader"}function f(e,t){return!_(e,t)&&c(e,t)}var g=[e,c];function h(t,n){return e(t,n)||c(t,n)}var y=function(t,n){return n["data-focus-target"]===!0&&(n["aria-busy"]===!0||n.role==="progressbar")};function C(e,t){return t.role==="dialog"}i.headerAndSpinnerFocusScopeQuery=e,i.focusableScopeQuery=l,i.tabbableScopeQuery=c,i.inputFirstTabbbableScopeQuery=d,i.displayedTabbableScopeQuery=p,i.tableCellScopeQuery=_,i.tableCellTabbableContentScopeQuery=f,i.headerFirstTabbableSecondScopeQuery=g,i.headerOrTabbableScopeQuery=h,i.topLoadingScopeQuery=y,i.dialogScopeQuery=C}),66);
__d("WebBloksScreenWrapper",["WebBloksEnvironmentContext","WebBloksFocusScopeQueries","WebBloksIconSpinner","WebBloksScreen","WebBloksScreenHost","WebBloksStyle","WebBloksTheme","WebBloksTreeResources","react","react-compiler-runtime","useWebBloksAccessibilityModule"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx("div",babelHelpers.extends({},o("WebBloksStyle").getStyleProps({alignItems:"center",justifyContent:"center",flex:1}),{children:s.jsx(r("WebBloksIconSpinner"),{})})),e[0]=t):t=e[0],t}function p(e){var t=o("react-compiler-runtime").c(32),n=e.externalVariables,a=e.screen,i=o("WebBloksEnvironmentContext").useWebBloksEnvironment(),l=i.embedded,u=i.allowScreenOverflow,p=i.loadingFallback,g=r("useWebBloksAccessibilityModule")(),h=g.FocusRegion,y=d(a.value),C=y[0],b=y[1],v;t[0]!==a.stateChangeListener?(v=function(){return a.stateChangeListener.on(b),(function(){a.stateChangeListener.off(b)})},t[0]=a.stateChangeListener,t[1]=v):v=t[1];var S;t[2]!==a?(S=[a],t[2]=a,t[3]=S):S=t[3],c(v,S);var R=a.objectSet,L=a.options,E=L.loadingNavbar,k=L.loadingScreen,I=L.initialTreeResources,T=L.ownerContext,D=R.environment.navigationTrackingUtils,x;t[4]!==a?(x=a.getIsOverlay(),t[4]=a,t[5]=x):x=t[5];var $=x,P=!l&&$!==!0&&f.rootBackground,N=$===!0&&f.rootOverlay,M;t[6]!==P||t[7]!==N?(M=o("WebBloksStyle").classNames(o("WebBloksStyle").WebBloksStyles.container,f.root,P,N),t[6]=P,t[7]=N,t[8]=M):M=t[8];var w=u===!0?"visible":"hidden",A;t[9]!==w?(A=o("WebBloksStyle").getStyleProps({display:"block",flexBasis:"100%",flexGrow:1,flexShrink:1,overflow:w}),t[9]=w,t[10]=A):A=t[10];var F;if(t[11]!==C.error||t[12]!==C.state||t[13]!==n||t[14]!==I||t[15]!==p||t[16]!==E||t[17]!==k||t[18]!==(D==null?void 0:D.loadingIndicatorTrackingComponent)||t[19]!==R||t[20]!==T||t[21]!==a){var O;F=C.state==="ready"?s.jsx(r("WebBloksScreenHost"),{screen:a,externalVariables:n},a.screenId):C.state==="error"?s.jsxs(s.Fragment,{children:[E&&_(R,E,I,T),s.jsx("div",{style:{marginTop:44,textAlign:"center"},children:(O=C.error.summary)!=null?O:"Failed to load"})]}):s.jsxs(s.Fragment,{children:[D==null?void 0:D.loadingIndicatorTrackingComponent,E&&_(R,E,I,T),k?_(R,k,I,T):p!=null?p:s.jsx(m,{})]}),t[11]=C.error,t[12]=C.state,t[13]=n,t[14]=I,t[15]=p,t[16]=E,t[17]=k,t[18]=D==null?void 0:D.loadingIndicatorTrackingComponent,t[19]=R,t[20]=T,t[21]=a,t[22]=F}else F=t[22];var B;t[23]!==F||t[24]!==A?(B=s.jsx("div",babelHelpers.extends({},A,{children:F})),t[23]=F,t[24]=A,t[25]=B):B=t[25];var W;t[26]!==B||t[27]!==M?(W=s.jsx("div",{className:M,children:B}),t[26]=B,t[27]=M,t[28]=W):W=t[28];var q;return t[29]!==h||t[30]!==W?(q=s.jsx(h,{autoRestoreFocus:!0,containFocusQuery:o("WebBloksFocusScopeQueries").tabbableScopeQuery,children:W}),t[29]=h,t[30]=W,t[31]=q):q=t[31],q}function _(e,t,n,a){return s.jsx(r("WebBloksScreenHost"),{isLoadingNode:!0,screen:o("WebBloksScreen").WebBloksScreen.fromBloksModel(e,t,n!=null?n:o("WebBloksTreeResources").WebBloksTreeResources.empty(),{isEmbedded:!0,ownerContext:a!=null?a:void 0})})}_.displayName=_.name+" [from "+i.id+"]";var f=o("WebBloksStyle").createStyles({rootBackground:{backgroundColor:o("WebBloksTheme").WebBloksThemeVars["screen-wrapper-bg"]},root:{color:o("WebBloksTheme").WebBloksThemeVars["primary-text"],flexDirection:"column",height:"100%",width:"100%"},rootOverlay:{position:"absolute",top:0,left:0,right:0,bottom:0}});l.ScreenWrapper=p,l.renderLoadingNode=_}),98);
__d("WebBloksModalWrapper",["WebBloksFocusScopeQueries","WebBloksScreenHost","WebBloksScreenWrapper","WebBloksStyle","react","react-compiler-runtime","useWebBloksAccessibilityModule"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(22),n=e.externalVariables,a=e.modal,i=r("useWebBloksAccessibilityModule")(),l=i.FocusRegion,u=d(a.value),m=u[0],_=u[1],f;t[0]!==a.stateChangeListener?(f=function(){return a.stateChangeListener.on(_),(function(){a.stateChangeListener.off(_)})},t[0]=a.stateChangeListener,t[1]=f):f=t[1];var g;t[2]!==a?(g=[a],t[2]=a,t[3]=g):g=t[3],c(f,g);var h=a.objectSet,y=a.options,C=y.loadingScreen,b=y.initialTreeResources,v=y.ownerContext,S;t[4]!==m.state||t[5]!==n||t[6]!==b||t[7]!==C||t[8]!==a||t[9]!==h||t[10]!==v?(S=m.state==="ready"?s.jsx(r("WebBloksScreenHost"),{screen:a,externalVariables:n},a.screenId):m.state==="loading"&&C?o("WebBloksScreenWrapper").renderLoadingNode(h,C,b,v):null,t[4]=m.state,t[5]=n,t[6]=b,t[7]=C,t[8]=a,t[9]=h,t[10]=v,t[11]=S):S=t[11];var R=S;if(a.options.outerScreenComponent){var L;t[12]!==a.options||t[13]!==R?(L=a.options.outerScreenComponent(R),t[12]=a.options,t[13]=R,t[14]=L):L=t[14],R=L}else{var E;t[15]!==R?(E=s.jsx("div",{className:p.modalContainer,children:R}),t[15]=R,t[16]=E):E=t[16],R=E}var k;t[17]!==R?(k=s.jsx("div",{"aria-modal":!0,role:"dialog",children:R}),t[17]=R,t[18]=k):k=t[18];var I;return t[19]!==l||t[20]!==k?(I=s.jsx(l,{autoFocusQuery:o("WebBloksFocusScopeQueries").dialogScopeQuery,autoRestoreFocus:!0,containFocusQuery:o("WebBloksFocusScopeQueries").tabbableScopeQuery,children:k}),t[19]=l,t[20]=k,t[21]=I):I=t[21],I}var p=o("WebBloksStyle").createStyles({modalContainer:{position:"absolute",top:0,left:0,right:0,bottom:0}});l.default=m}),98);
__d("WebBloksCacheUtils",["WebBloksInt64","WebBloksUtils"],(function(t,n,r,o,a,i,l){var e=1e3;function s(t,n){var o,a=Date.now(),i=(o=r("WebBloksInt64")).fromString(n).multiply(o.fromNumber(e)),l=o.fromString(t.responseTimestampMs).add(i);return l.greaterThan(o.fromNumber(a))}function u(e,t){return e+":"+c(t)}function c(e,t){t===void 0&&(t=!1);var n=Array.isArray(e),r=o("WebBloksUtils").isObject(e);if(n||r){var a=Object.keys(e);if(a.length){for(var i=a.sort(),l=[],s=0;s<i.length;s++){var u=i[s],d=e[u];if(!(t&&d==null&&r)){var m=void 0;o("WebBloksUtils").isObject(d)||Array.isArray(d)?m=c(d,t):m=JSON.stringify(d),l.push(u+":"+m)}}return n?"["+l.join(",")+"]":"{"+l.join(",")+"}"}}return JSON.stringify(e)}l.isResponseFresh=s,l.generateCacheKey=u}),98);
__d("WebBloksComponentQueryFetcher",["WebBloksCacheUtils","WebBloksErrors","WebBloksPayloadParser","WebBloksUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=new Set,this.$2=e,this.$3=t,this.$4=n}var t=e.prototype;return t.runQuery=function(t,n,r){var e=this.$3.get(t);if(e!=null&&o("WebBloksCacheUtils").isResponseFresh(e,n.cacheTtlSeconds)){var a={result:e.response,success:!0};r(a)}else this.$5(t,n,r)},t.$5=function(t,n,r){var e=this;if(!this.$1.has(t)){this.$1.add(t);var a=o("WebBloksUtils").nullthrows(this.$2);a.fetchComponentQuery(n.appId,n.params).then(function(a){var i=new Map;for(var l of a.components){var s=o("WebBloksPayloadParser").parseTree(l.payload,e.$4);i.set(l.id,s)}var u={components:i},c={result:u,success:!0};e.$3.set(t,{response:u,responseTimestampMs:Date.now().toString(),queryPurpose:n.queryPurpose}),e.$1.delete(t),r(c)}).catch(function(r){throw e.$1.delete(t),new(o("WebBloksErrors")).WebBloksError("Failed to fetch async component for appId: "+n.appId,r)})}},e})();l.default=e}),98);
__d("WebBloksComponentQueryStore",["WebBloksCacheUtils","WebBloksComponentQueryFetcher","WebBloksFunctionTableManager","WebBloksPayloadParser"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){this.$2=[],this.$4=t,this.$1=new Map,this.$3=new(r("WebBloksComponentQueryFetcher"))(e,this.$1,t)}var t=e.prototype;return t.getCachedComponentsOrSubscribeToQuery=function(t,n,r,a){var e=o("WebBloksCacheUtils").generateCacheKey(t,n),i=this.$1.get(e);if(i!=null&&o("WebBloksCacheUtils").isResponseFresh(i,r)){var l={result:i.response,success:!0};return{value:l,cancelToken:null}}else{var s=this.$5(a,e);return{value:null,cancelToken:s.token}}},t.fetch=function(t,n,r,a){var e=this,i=o("WebBloksCacheUtils").generateCacheKey(t,n),l=o("WebBloksFunctionTableManager").WebBloksFunctionTableManager.getKnownFt(t),s=babelHelpers.extends({},n);l!=null&&(s.__knownFt=l);var u={appId:t,params:s,cacheTtlSeconds:r,queryPurpose:a};this.$3.runQuery(i,u,function(t){e.$6(i,t)})},t.invalidate=function(t,n){var e=o("WebBloksCacheUtils").generateCacheKey(t,n);this.$1.delete(e)},t.clear=function(){this.$1.clear()},t.writeInitialPayload=function(t,n,r){var e=o("WebBloksCacheUtils").generateCacheKey(t,n),a=new Map;for(var i of r.components){var l=o("WebBloksPayloadParser").parseTree(i.payload,this.$4);a.set(i.id,l)}var s={components:a};this.$1.set(e,{response:s,responseTimestampMs:Date.now().toString(),queryPurpose:"PREFETCH"})},t.$5=function(t,n){this.$2=this.$2.filter(function(e){return!e.token.canceled});var e=new u(t,n);return this.$2.push(e),e},t.$6=function(t,n){var e=[],r=[];for(var o of this.$2)o.token.canceled||(o.cacheKey===t?e.push(o.callback):r.push(o));this.$2=r;for(var a of e)a(t,n)},e})(),s=(function(){function e(){this.canceled=!1}var t=e.prototype;return t.run=function(){this.canceled=!0},e})(),u=function(t,n){this.callback=t,this.cacheKey=n,this.token=new s};l.default=e}),98);
__d("WebBloksGlobalState",["WebBloksDataModule","WebBloksErrors"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){this.variableIds=new Map,this.observer=e}var t=e.prototype;return t.add=function(t,n){var e,r=(e=this.variableIds.get(t))!=null?e:new Set;r.add(n),this.variableIds.set(t,r)},e})(),s=(function(){function t(){this.store=new Map,this.subscribers=[]}var n=t.prototype;return n.fetchAndSubscribe=function(t,n,r,o){var e=this.store.get(t);return e==null&&(e=n,this.store.set(t,n)),this.$1(t,e,r,o)},n.publishAndSubscribe=function(t,n,r,o){return this.publish(t,n),this.$1(t,n,r,o)},n.publish=function(t,n){if(n==null){if(!this.store.has(t))return}else if(n===this.store.get(t))return;this.store.set(t,n);for(var e of this.subscribers){var r=e.observer,o=e.variableIds.get(t);if(o)for(var a of o)r.enqueueVariableUpdateOperation(a,n)}},n.subscriberForObserver=function(n){if(n==null)return null;for(var t of this.subscribers)if(t.observer===n)return t;var r=new e(n);return this.subscribers.push(r),r},n.$1=function(t,n,r,o){var e=this.subscriberForObserver(o);return e&&e.add(t,r),{initialValue:n}},t})(),u=(function(){function e(e){this.store=e}var t=e.prototype;return t.setup=function(t,n,r,a){var e,i,l=n.data.key;if(l==null)throw new(o("WebBloksErrors")).WebBloksError("Key not found in global state data manifest entry");var s=o("WebBloksDataModule").getDataEntryInitialValue(n,a),u=(e=(i=n.data)==null?void 0:i.mode)!=null?e:"d",c=n.id;return u==="p"?this.store.publishAndSubscribe(l,s,c,r):this.store.fetchAndSubscribe(l,s,c,r)},t.publish=function(t,n){this.store.publish(t,n)},e})(),c=new s;l.WebBloksGlobalStateStore=s,l.WebBloksGlobalStateDataModule=u,l.GLOBAL_STATE_STORE=c}),98);
__d("WebBloksMountEffectsQueue",[],(function(t,n,r,o,a,i){var e=(function(){function e(){this.queue=[],this.mountEffects=new Map,this.unmountEffects=new Map}var t=e.prototype;return t.isEmpty=function(){return this.queue.length===0},t.enqueue=function(t,n){this.queue.push(t),this.mountEffects.set(t,n)},t.dispose=function(t){var e,n=(e=this.unmountEffects.get(t))!=null?e:[];for(var r of n)r();this.unmountEffects.delete(t)},t.runEffects=function(){for(var e=this.queue.length-1;e>=0;e--){var t,n=this.queue[e],r=(t=this.mountEffects.get(n))!=null?t:[],o=[];for(var a of r){var i=a();i!=null&&o.push(i)}this.unmountEffects.set(n,o)}for(var l of this.queue)this.mountEffects.delete(l);this.queue=[]},e})();i.default=e}),66);
__d("WebBloksNavigationManagerV2",["WebBloksErrors","WebBloksSSRUtils","WebBloksScreen","WebBloksUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=Date.now().toString(36)+Math.random().toString(36).substring(2),s=(function(){function t(e,t,n){var r=this;this.screenChangeListener=new(o("WebBloksUtils")).EventEmitter,this.screenStacks=[],this.modals=[],this.screensCache=new Map,this.navigationDirection="forward",this.pendingCloses=[],this.pendingOpen=null,this.currentScreenPointer={stackIndex:-1,screenIndex:-1,isModal:!1,modalIndex:-1},this.$1=function(e){var t=e.state;r.$3(t)},this.$2=function(){document.visibilityState==="hidden"&&r.pendingCloses.length>0&&r.pendingCloses.map(function(){var e;return(e=r.pendingCloses.pop())==null?void 0:e()})},this.objectSet=e,this.disableHistoryStack=o("WebBloksSSRUtils").canUseDOM?t:!0,this.enableCometRouter=n,!this.disableHistoryStack&&(this.enableCometRouter||(window.addEventListener("popstate",this.$1),window.addEventListener("visibilitychange",this.$2)))}var n=t.prototype;return n.$3=function(n){var t;if(n.isWebBloks){this.navigationDirection=this.$4(babelHelpers.extends({},n.screenPointer));var r=(t=this.getCurrentModal())!=null?t:this.getCurrentScreen();r==null||r.onExit(this.navigationDirection),r==null||r.dismiss();var a=this.screensCache.get(n.screenId);if((n.sessionId!==e||a==null)&&window.location.reload(),(a==null?void 0:a.controllerName)!=null){var i;(i=this.objectSet.environment.controllerNavigationLogger)==null||i.setCurrentController(a.controllerName)}if(this.currentScreenPointer=babelHelpers.extends({},n.screenPointer),this.notifyChanged(),this.pendingCloses.length>0){var l=this.pendingCloses.pop();l&&l()}if(this.pendingOpen&&this.pendingCloses.length===0){var s=this.pendingOpen;this.pendingOpen=null,s()}n.pageTitle!=null&&o("WebBloksSSRUtils").canUseDOM&&(document.title=n.pageTitle)}},n.open=function(t,n,r){var e=this;r===void 0&&(r=!1),this.$5("open",function(){e.$6(t,n,r)})},n.$6=function(t,n,r){var e;r===void 0&&(r=!1);var o=(e=this.getCurrentModal())!=null?e:this.getCurrentScreen();if(o==null||o.onExit("forward"),this.navigationDirection="forward",t.options.isModal===!0){var a=this.currentScreenPointer,i=a.stackIndex,l=a.modalIndex,s=this.$7(t,i);this.modals.splice(l+1),this.modals.push(s),this.$8({isModal:!0,modalIndex:this.modals.length-1}),this.$9(t,r),this.notifyChanged();return}var u=this.getModalCount();if(u>0){o==null||o.clearDismissCallback(),this.close("close"),this.open(t,n,r);return}if(n===!0){var c=this.$10();c!=null?this.$11(t,c):this.$12(t)}else this.$12(t);this.$9(t,r),this.notifyChanged()},n.close=function(t,n,r){var e=this;this.$5("close",function(){e.$13(t,n,r)})},n.$13=function(t,n,r){var e=this.currentScreenPointer.isModal,a=this.$10();if(a==null)throw new(o("WebBloksErrors")).WebBloksError("Tried closing a screen when there are no modals or stacks");this.navigationDirection="back";var i=0;switch(t){case"close":if(e)this.$14("modal"),i=this.getModalCount(),this.$15();else{this.$14("screen");var l=this.currentScreenPointer.screenIndex;i=l+1,this.$16()}break;case"pop":{e?(this.$14("modal"),this.$8({modalIndex:this.currentScreenPointer.modalIndex-1})):(this.$14("screen"),this.$8({screenIndex:this.currentScreenPointer.screenIndex-1})),i=1;break}case"pop_to_screen":{this.$14("screen");for(var s=this.currentScreenPointer.screenIndex,u=!1;!u&&s>=0;){var c=this.screensCache.get(a[s]),d=c==null?void 0:c.screenId;d!==n?(s--,i++):(u=!0,r===!0&&(s--,i++))}if(!u)throw new(o("WebBloksErrors")).WebBloksError("Tried popping to a screenId that does not exist in the current stack");this.$8({screenIndex:s});break}case"close_all":{e?(this.$14("modal"),i=this.getModalCount()+this.getScreenCount()):(this.$14("screen"),i=this.getScreenCount()),this.$17();break}}!e&&(t==="pop"||t==="pop_to_screen")&&this.currentScreenPointer.screenIndex===-1&&this.$16(),e&&t==="pop"&&this.currentScreenPointer.modalIndex===-1&&this.$15(),this.$18(i),this.notifyChanged()},n.getVisibleScreens=function(){var e=[],t=!1,n=this.getCurrentScreen();n!=null&&(e.push(n),n.getIsOverlay()!==!0&&(t=!0));for(var r=this.currentScreenPointer.stackIndex-1;r>-1&&!t;){var o=this.screenStacks[r],a=o[o.length-1],i=this.screensCache.get(a);i!=null&&(e.push(i),i.getIsOverlay()!==!0&&(t=!0)),r--}return{screens:e.reverse(),modal:this.getCurrentModal()}},n.notifyChanged=function(){this.screenChangeListener.emit(this.getVisibleScreens())},n.destroy=function(){window.removeEventListener("popstate",this.$1),window.removeEventListener("visibilitychange",this.$2),this.$17(),this.enableCometRouter||(this.screensCache.forEach(function(e){return e.destroy()}),this.screensCache.clear())},n.refresh=function(){var e,t=(e=this.screenStacks[this.currentScreenPointer.stackIndex])==null?void 0:e[this.currentScreenPointer.screenIndex],n=this.screensCache.get(t);if(n!=null){var r=n.uri,a=n.appId,i=n.params,l=n.options,s=r!=null?o("WebBloksScreen").WebBloksScreen.fromURI(n.objectSet,r,a,i,l):a!=null?o("WebBloksScreen").WebBloksScreen.fromAppId(n.objectSet,a,i,l):null;if(s){this.push(s,!0);return}}},n.replaceState=function(t){if(!this.disableHistoryStack){var e=history.state;e.uri!==t&&window.history.replaceState(e,null,t)}},n.replacePageTitle=function(t){if(!this.disableHistoryStack){var e=history.state;e.pageTitle!==t&&o("WebBloksSSRUtils").canUseDOM&&(document.title=t)}},n.attachAndTriggerPopStateHandler=function(){this.disableHistoryStack||(window.addEventListener("popstate",this.$1),window.addEventListener("visibilitychange",this.$2),this.$3(window.history.state))},n.push=function(t,n){this.open(t,!0,n)},n.pop=function(){this.close("pop")},n.popAllModals=function(){this.getModalCount()>0&&this.close("close")},n.getModalCount=function(){return this.currentScreenPointer.isModal?this.currentScreenPointer.modalIndex+1:0},n.getScreenCount=function(t){t===void 0&&(t=!1);var e=this.currentScreenPointer,n=e.stackIndex,r=e.screenIndex;if(n<0)return 0;var o=r+1;if(t)return o;var a=this.screenStacks.slice(0,n).reduce(function(e,t){return e+t.length},0);return o+a},n.getCurrentScreen=function(){var e=this.currentScreenPointer,t=e.stackIndex,n=e.screenIndex;if(t<0||n<0)return null;var r=this.screenStacks[t];if(r==null)return null;var o=r[n];return this.screensCache.get(o)},n.getCurrentModal=function(){var e=this.currentScreenPointer,t=e.isModal,n=e.modalIndex;if(!t||n<0)return null;var r=this.modals[n];return this.screensCache.get(r)},n.getNavigationDirection=function(){return this.navigationDirection},n.$10=function(){if(this.currentScreenPointer.isModal===!0)return this.modals;var e=this.currentScreenPointer.stackIndex;return e!=null?this.screenStacks[e]:null},n.$11=function(t,n){var e=this.currentScreenPointer,r=e.stackIndex,o=e.screenIndex,a=n.splice(o+1);this.$19(a);var i=this.screenStacks.splice(r+1);for(var l of i)this.$19(l);var s=this.modals.splice(0);this.$19(s),n.push(this.$7(t,r)),this.$8({screenIndex:o+1})},n.$12=function(t){var e=this.currentScreenPointer,n=e.stackIndex,r=e.screenIndex,o=this.screenStacks[n];if(o!=null){var a=o.splice(r+1);this.$19(a)}var i=this.screenStacks.splice(n+1);for(var l of i)this.$19(l);var s=this.modals.splice(0);this.$19(s),this.screenStacks.push([this.$7(t,n+1)]),this.$8({stackIndex:n+1,screenIndex:0,isModal:!1})},n.$19=function(t){for(var e of t){var n=this.screensCache.get(e);n!=null&&n.destroy(),this.screensCache.delete(e)}},n.$14=function(t){if(this.disableHistoryStack){var e;if(t==="screen"?e=this.getCurrentScreen():e=this.getCurrentModal(),e==null)throw new(o("WebBloksErrors")).WebBloksError("Unexpected null "+t+" while executing onExit callback");e.onExit("back"),e.dismiss()}},n.$4=function(t){var e=this.currentScreenPointer,n=babelHelpers.extends({},e,t);return e.isModal&&!n.isModal?"back":!e.isModal&&n.isModal?"forward":e.isModal&&n.isModal?n.modalIndex>e.modalIndex?"forward":"back":n.stackIndex!==e.stackIndex?n.stackIndex>e.stackIndex?"forward":"back":n.screenIndex>e.screenIndex?"forward":"back"},n.$8=function(t){var e=this.$4(t);e==="back"&&!this.disableHistoryStack||(this.currentScreenPointer=babelHelpers.extends({},this.currentScreenPointer,t))},n.$15=function(){this.$8({isModal:!1,modalIndex:-1})},n.$16=function(){var e=this.currentScreenPointer.stackIndex;e===0?this.$8({stackIndex:-1,screenIndex:-1,isModal:!1,modalIndex:-1}):this.$8({stackIndex:e-1,screenIndex:this.screenStacks[e-1].length-1})},n.$17=function(){this.$8({stackIndex:-1,screenIndex:-1,isModal:!1,modalIndex:-1})},n.$9=function(n,r){var t;if(!this.disableHistoryStack){var a=n.uri!=null?n.uri:"#",i=null;o("WebBloksSSRUtils").canUseDOM&&(i=document.title);var l={uri:a,pageTitle:i,screenId:this.$7(n,this.currentScreenPointer.stackIndex),appId:n.appId,isWebBloks:!0,sessionId:e,screenPointer:babelHelpers.extends({},this.currentScreenPointer),key:(t=window.history.state)==null?void 0:t.key};r?window.history.replaceState(l,null,a):window.history.pushState(l,null,a)}},n.$18=function(t){this.disableHistoryStack||window.history.go(-t)},n.$7=function(t,n){var e=t.options.isModal===!0?"modal":"stack_"+n,r=e+":"+t.screenId;return t.screenIdWithStackIndex=r,this.screensCache.has(r)||this.screensCache.set(r,t),r},n.$5=function(t,n){if(this.disableHistoryStack){n();return}if(t==="open"){this.pendingCloses.length?this.pendingOpen=n:n();return}if(t==="close"){this.pendingOpen=null,this.pendingCloses.length>0?this.pendingCloses.push(n):(this.pendingCloses.push(null),n());return}},t})();l.NavigationManagerV2=s}),98);
__d("WebBloksNode",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.memo,c=s.useDebugValue;function d(e,t){var n=function(n){return t(n)};return n.displayName=e,u(n)}function m(e){var t=o("react-compiler-runtime").c(2),n;t[0]!==e?(n=function(){return e.toJSON()},t[0]=e,t[1]=n):n=t[1],c(e,n)}function p(e){var t=o("react-compiler-runtime").c(2),n;if(t[0]!==e.sourceMapNode){var r;n=(r=e.sourceMapNode)==null||(r=r.getBloksStackFrame())==null?void 0:r.offset,t[0]=e.sourceMapNode,t[1]=n}else n=t[1];c(n,_)}function _(e){return"To view the server side location of this component, pase the below `component_uri` into the top line of this Bento notebook: https://fburl.com/anp/vcve8kbn.\n\n"+e}l.createBridgedComponent=d}),98);
__d("WebBloksToast",["WebBloksAbstractButton","WebBloksStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c=o("WebBloksStyle").createStyles({root:{backgroundColor:"#262626",flexDirection:"row",minHeight:"44px",padding:"0 16px!important",width:"100%"},messageContainer:{flexGrow:1,flexShrink:1,justifyContent:"center",minWidth:"200px"},message:{color:"#fff",fontSize:"14px",lineHeight:"18px",maxHeight:"72px",overflow:"hidden",padding:"12px 0!important"}});function d(e){var t=o("react-compiler-runtime").c(13),n=e.actionText,a=e.className,i=e.onActionClick,l=e.text,u;t[0]!==i?(u=function(t){t.preventDefault(),i&&i(t)},t[0]=i,t[1]=u):u=t[1];var d=u,m;t[2]!==a?(m=o("WebBloksStyle").classNames(a,c.root),t[2]=a,t[3]=m):m=t[3];var p;t[4]!==l?(p=s.jsx("div",{className:c.messageContainer,children:s.jsx("p",{className:c.message,children:l})}),t[4]=l,t[5]=p):p=t[5];var _;t[6]!==n||t[7]!==d?(_=n!=null&&s.jsx(r("WebBloksAbstractButton"),{title:n,onClick:d}),t[6]=n,t[7]=d,t[8]=_):_=t[8];var f;return t[9]!==m||t[10]!==p||t[11]!==_?(f=s.jsxs("div",{className:m,children:[p,_]}),t[9]=m,t[10]=p,t[11]=_,t[12]=f):f=t[12],f}l.default=d}),98);
__d("WebBloksToastManager",["WebBloksToast","WebBloksUtils","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={autoDismissDurationMs:3e3,showAnimationDurationMs:200,dismissAnimationDurationMs:200,showAnimationInterpolator:"ease-out",dismissAnimationInterpolator:"ease-out"},c=(function(){function e(){this.$1=null,this.$2=[],this.$3=!1,this.$4=[]}var t=e.prototype;return t.getDefaultCurrentToast=function(){return null},t.getEmptyState=function(){return{currentToast:null,pendingToasts:[],isToastHiding:!1}},t.getCurrentToast=function(){return this.$1},t.getPendingToasts=function(){return this.$2},t.enqueueBloksModelToast=function(t,n,r){var e,o=this.$5(r);this.$2.push({id:(e=n.getId())!=null?e:n.clientId+"",type:"bloksModel",context:t,model:n,options:o,timeoutID:null}),this.$6()},t.enqueueBloksParseResultToast=function(t,n,r){var e,o=this.$5(r),a=n.unboundModel;this.$2.push({id:(e=a.getId())!=null?e:a.clientId+"",type:"bloksParseResult",context:t,parseResult:n,options:o,timeoutID:null}),this.$6()},t.enqueueSimpleToast=function(t){this.$2.push({id:o("WebBloksUtils").getNextGlobalBloksClientId()+"",type:"simple",component:s.jsx(r("WebBloksToast"),{text:t}),options:u,timeoutID:null}),this.$6()},t.enqueueMiniToast=function(t){this.$2.push({id:o("WebBloksUtils").getNextGlobalBloksClientId()+"",type:"mini",component:t,options:u,timeoutID:null}),this.$6()},t.dismissToastWithID=function(t,n){var e=String(t);this.$1!=null&&this.$1.id===e?this.$7():this.$2=this.$2.filter(function(t){return t.id!==e})},t.$7=function(){var e=this,t=this.$1;if(t!=null){if(window.clearTimeout(t.timeoutID),this.$3=!0,this.$8(),t.type==="bloksModel"){var n=t.options.onDismiss;n!=null&&t.context.executeCatch(n,[])}t.timeoutID=window.setTimeout(function(){e.$3=!1,e.$1=null,e.$8(),e.$6()},t.options.dismissAnimationDurationMs),this.$1=t}},t.$6=function(){var e=this;if(this.$1===null&&this.$2.length!==0){var t=this.$2.shift();if(t!=null&&t.options.autoDismissDurationMs!==0){var n=window.setTimeout(function(){return e.$7()},t.options.autoDismissDurationMs+t.options.showAnimationDurationMs);if(t.timeoutID=n,t.type==="bloksModel"){var r=t.options.onShow;r!=null&&t.context.executeCatch(r,[])}}this.$1=t,this.$8()}},t.$5=function(t){var e,n,r,o=t.getValues(),a=this.parseToastInterpolator(o.show_animation_interpolator,u.showAnimationInterpolator),i=this.parseToastInterpolator(o.dismiss_animation_interpolator,u.dismissAnimationInterpolator);return{autoDismissDurationMs:(e=o.auto_dismiss_duration_ms)!=null?e:u.autoDismissDurationMs,showAnimationDurationMs:(n=o.show_animation_duration_ms)!=null?n:u.showAnimationDurationMs,dismissAnimationDurationMs:(r=o.dismiss_animation_duration_ms)!=null?r:u.dismissAnimationDurationMs,showAnimationInterpolator:a,dismissAnimationInterpolator:i,onShow:o.on_show,onDismiss:o.on_dismiss}},t.parseToastInterpolator=function(t,n){if(t==null)return n;var e=t.getValues(),r=e.x_a,o=e.y_a,a=e.x_b,i=e.y_b;return"cubic-bezier("+r+","+o+","+a+","+i+")"},t.addListener=function(t){var e=this;return this.$4.push(t),{remove:o("WebBloksUtils").once(function(){o("WebBloksUtils").removeFromArray(e.$4,t)})}},t.$8=function(){var e=this;this.$4.forEach(function(t){return window.setTimeout(function(){t({currentToast:e.$1,pendingToasts:e.$2,isToastHiding:e.$3})},0)})},e})();l.default=c}),98);
__d("WebBloksObjectSet",["WebBloksComponentQueryStore","WebBloksContext","WebBloksErrors","WebBloksGlobalState","WebBloksInterpreterEnvironment","WebBloksIsUnitTest","WebBloksModel","WebBloksMountEffectsQueue","WebBloksNavigationManagerV2","WebBloksNode","WebBloksParseResult","WebBloksSSRUtils","WebBloksScreen","WebBloksToastManager","WebBloksTreeManager","WebBloksTreeResources"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){var n,a,i;this.$1=new Map,this.environment=e,this.globalStateDataModule=new(o("WebBloksGlobalState")).WebBloksGlobalStateDataModule((n=e.globalStateStore)!=null?n:o("WebBloksGlobalState").GLOBAL_STATE_STORE),this.navigationManager=new(o("WebBloksNavigationManagerV2")).NavigationManagerV2(this,e.disableHistoryStack,e.enableCometRouter),this.toastManager=(a=t==null?void 0:t.toastManager)!=null?a:new(r("WebBloksToastManager")),this.componentQueryStore=(i=t==null?void 0:t.componentQueryStore)!=null?i:new(r("WebBloksComponentQueryStore"))(e.appLoader,e.traversalKeys),this.mountEffectsQueue=new(r("WebBloksMountEffectsQueue"))}var t=e.prototype;return t.createInitialScreenWithParseResult=function(t,n){this.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromBloksParseResult(this,t,void 0,n,window.location.href),!0)},t.createInitialScreenWithAppResponse=function(t,n){this.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromBloksAppResponse(this,t,void 0,n,window.location.href),!0)},t.createInitialScreenWithAppId=function(t,n){this.navigationManager.push(o("WebBloksScreen").WebBloksScreen.fromAppId(this,t,n),!0)},t.createInitialScreenWithScreenQuery=function(t){var e=t.screen_query_payload,n=e.app_id,a=e.params,i=e.component_query_payload;this.componentQueryStore.writeInitialPayload(n,a,i);var l=t.screen_query_payload.open_screen_script,s=new(r("WebBloksParseResult"))(new(o("WebBloksModel")).WebBloksModel("-2",{}),new(o("WebBloksTreeResources")).WebBloksTreeResources),u=new(r("WebBloksTreeManager"))(s),c=new(o("WebBloksContext")).WebBloksContext(u,this),d=new(r("WebBloksInterpreterEnvironment"))(c);d.executeCatch(l,[])},t.getComponentForName=function(t){var e=this.getNullableComponentForName(t);if(e==null)throw new(o("WebBloksErrors")).WebBloksUnknownComponentError(t);return e},t.getNullableComponentForName=function(t){var e=this.$1.get(t);if(e)return e;var n=this.environment.components.get(t);if(n==null)return null;var r=o("WebBloksNode").createBridgedComponent(t,n);return this.$1.set(t,r),r},t.getContainerConfigModuleForName=function(t){var e=this.environment.containerConfigs.get(t);if(e==null)throw new(o("WebBloksErrors")).WebBloksUnknownContainerConfigError(t);return e},t.getAsset=function(t){var e,n=(e=this.environment.staticAssets)==null?void 0:e[t];return n==null&&this.environment.logger.mustfix("StaticAsset is not configured '%s'",t),n},e})();l.default=e}),98);
__d("WebBloksToastPresenter",["WebBloksFocusScopeQueries","WebBloksScreen","WebBloksScreenHost","WebBloksStyle","WebBloksTreeResources","react","react-compiler-runtime","useWebBloksAccessibilityModule"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState,m=o("WebBloksStyle").createStyles({root:{display:"flex",justifyContent:"center"},defaultRoot:{bottom:0,left:0,position:"fixed !important",right:0,width:"100%",zIndex:100},defaultInnerContainer:{transform:"translateY(0)"},defaultInnerContainerHidden:{transform:"translateY(100%)"},miniToastRoot:{alignItems:"center !important",boxSizing:"border-box",bottom:"50%",display:"flex",flexDirection:"column",left:0,overflow:"hidden",position:"fixed !important",right:0,zIndex:100},miniToastInnerContainer:{opacity:1,transitionProperty:"opacity!important"},miniToastInnerContainerHidden:{opacity:0,transitionProperty:"opacity!important"}});function p(e){var t=o("react-compiler-runtime").c(41),n=e.objectSet,a=n.toastManager,i;t[0]!==a?(i=function(){return a.getEmptyState()},t[0]=a,t[1]=i):i=t[1];var l=d(i),u=l[0],p=l[1],_,f;t[2]!==a?(_=function(){var e=a.addListener(p);return(function(){e.remove()})},f=[a],t[2]=a,t[3]=_,t[4]=f):(_=t[3],f=t[4]),c(_,f);var g=r("useWebBloksAccessibilityModule")(),h=g.FocusRegion,y=u.currentToast,C=u.isToastHiding,b=(y==null||C)&&m.defaultInnerContainerHidden,v;t[5]!==b?(v=o("WebBloksStyle").classNames(m.defaultInnerContainer,b),t[5]=b,t[6]=v):v=t[6];var S=v,R=(y==null||C)&&m.miniToastInnerContainerHidden,L;t[7]!==R?(L=o("WebBloksStyle").classNames(m.miniToastInnerContainer,R),t[7]=R,t[8]=L):L=t[8];var E=L,k=null,I=null,T=0,D="ease-out";if(y!=null){e:switch(y.type){case"simple":{k=y.component;break e}case"bloksModel":{var x;t[9]!==y.model||t[10]!==n?(x=o("WebBloksScreen").WebBloksScreen.fromBloksModel(n,y.model,o("WebBloksTreeResources").WebBloksTreeResources.empty(),{isModal:!1,isEmbedded:!0}),t[9]=y.model,t[10]=n,t[11]=x):x=t[11];var $=x,P;t[12]!==$?(P=s.jsx(r("WebBloksScreenHost"),{screen:$},$.screenId),t[12]=$,t[13]=P):P=t[13],k=P;break e}case"bloksParseResult":{var N;t[14]!==y.parseResult||t[15]!==n?(N=o("WebBloksScreen").WebBloksScreen.fromBloksParseResult(n,y.parseResult,{isModal:!1,isEmbedded:!0}),t[14]=y.parseResult,t[15]=n,t[16]=N):N=t[16];var M=N,w;t[17]!==M?(w=s.jsx(r("WebBloksScreenHost"),{screen:M},M.screenId),t[17]=M,t[18]=w):w=t[18],k=w;break e}case"mini":I=y.component}C?(T=y.options.showAnimationDurationMs/1e3,D=y.options.showAnimationInterpolator):(T=y.options.dismissAnimationDurationMs/1e3,D=y.options.dismissAnimationInterpolator)}if(k!=null){var A;t[19]!==h||t[20]!==k?(A=s.jsx(h,{autoFocusQuery:o("WebBloksFocusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,containFocusQuery:o("WebBloksFocusScopeQueries").tabbableScopeQuery,children:k}),t[19]=h,t[20]=k,t[21]=A):A=t[21],k=A}if(I!=null){var F;t[22]!==h||t[23]!==I?(F=s.jsx(h,{autoFocusQuery:o("WebBloksFocusScopeQueries").tabbableScopeQuery,autoRestoreFocus:!0,containFocusQuery:o("WebBloksFocusScopeQueries").tabbableScopeQuery,children:I}),t[22]=h,t[23]=I,t[24]=F):F=t[24],I=F}var O=C?void 0:"alert",B="transform "+T+"s "+D,W;t[25]!==B?(W={transition:B},t[25]=B,t[26]=W):W=t[26];var q;t[27]!==k||t[28]!==S||t[29]!==W?(q=s.jsx("div",{className:m.defaultRoot,children:s.jsx("div",{className:S,style:W,children:k})}),t[27]=k,t[28]=S,t[29]=W,t[30]=q):q=t[30];var U="opacity "+T+"s "+D,V;t[31]!==U?(V={transition:U},t[31]=U,t[32]=V):V=t[32];var H;t[33]!==I||t[34]!==E||t[35]!==V?(H=s.jsx("div",{className:m.miniToastRoot,children:s.jsx("div",{className:E,style:V,children:I})}),t[33]=I,t[34]=E,t[35]=V,t[36]=H):H=t[36];var G;return t[37]!==q||t[38]!==H||t[39]!==O?(G=s.jsxs("div",{role:O,"aria-atomic":"true",name:"WebBloksToastPresenter","data-testid":void 0,className:m.root,children:[q,H]}),t[37]=q,t[38]=H,t[39]=O,t[40]=G):G=t[40],G}l.default=p}),98);
__d("useWebBloksRefreshListener",["WebDriverConfig","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(3),n,r;t[0]!==e?(n=function(){o("WebDriverConfig").isJestE2ETestRun},r=[e],t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]),s(n,r)}l.default=u}),98);
__d("WebBloksApp",["WebBloksAppAccessibilityStyles","WebBloksEnvironmentContext","WebBloksErrorBoundary","WebBloksErrors","WebBloksModalWrapper","WebBloksObjectSet","WebBloksParseResult","WebBloksSSRUtils","WebBloksScreenWrapper","WebBloksStyle","WebBloksToastPresenter","WebBloksUtils","react","useWebBloksAccessibilityModule","useWebBloksRefreshListener"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef,m=u.useState;function p(e){var t,n=e._objectSetRef,a=e.appId,i=e.externalObjectSet,l=e.externalVariables,u=e.node,p=e.params,h=p===void 0?o("WebBloksUtils").EMPTY_OBJECT:p,y=o("WebBloksEnvironmentContext").useWebBloksEnvironment(),C=r("useWebBloksAccessibilityModule")(),b=C.FocusAppWrapper,v=m(function(){var e;return i!=null?e=i:(e=new(r("WebBloksObjectSet"))(y),_(e,a,u,h)),n&&(n.current=e),e}),S=v[0];c(function(){i!=null&&i.navigationManager.attachAndTriggerPopStateHandler()},[i]);var R=m(function(){return S.navigationManager.getVisibleScreens()}),L=R[0],E=L.screens,k=L.modal,I=R[1];c(function(){return S.navigationManager.screenChangeListener.on(I),function(){S.navigationManager.screenChangeListener.off(I),S.navigationManager.destroy()}},[S]);var T=d(!0);c(function(){if(T.current)T.current=!1;else{if(i!=null)return;_(S,a,u,h)}},[S,a,u,h,i]),r("useWebBloksRefreshListener")(S);var D={};y.isRtl&&(D={direction:"rtl",textAlign:"right"});var x=s.jsx(b,{children:s.jsxs("div",{style:babelHelpers.extends({fontFamily:o("WebBloksUtils").getWrapperFontFamily(y.fontFamilyMappings)},D),"data-testid":void 0,className:o("WebBloksStyle").classNames(o("WebBloksAppAccessibilityStyles").ACCESSIBILITY_STYLES.outlines,y.embedded===!0?f.bloksAppEmbedded:o("WebBloksStyle").classNames(f.bloksAppFullscreen,g.bloksAppFullscreenDVH)),children:[E.map(function(e){var t;return s.jsx(o("WebBloksScreenWrapper").ScreenWrapper,{screen:e,externalVariables:l},(t=e.screenIdWithStackIndex)!=null?t:e.screenId)}),k&&s.jsx(r("WebBloksModalWrapper"),{modal:k,externalVariables:l},(t=k.screenIdWithStackIndex)!=null?t:k.screenId),s.jsx(r("WebBloksToastPresenter"),{objectSet:S})]})});return S.environment.disableErrorBoundary!==!0&&(x=s.jsx(r("WebBloksErrorBoundary"),{logger:S.environment.logger,children:x})),x}p.displayName=p.name+" [from "+i.id+"]";function _(e,t,n,a){if(t==null&&n==null)throw new(o("WebBloksErrors")).WebBloksError("Both appId and node are null while creating initial screen");if(e.navigationManager.getScreenCount()+e.navigationManager.getModalCount()>0&&e.navigationManager.close("close_all"),n!=null)if(n instanceof r("WebBloksParseResult"))e.createInitialScreenWithParseResult(n,a);else if(n.screen_query_payload!=null)e.createInitialScreenWithScreenQuery(n);else return e.createInitialScreenWithAppResponse(n,a);else if(t!=null)return e.createInitialScreenWithAppId(t,a)}var f=o("WebBloksStyle").createStyles({bloksAppEmbedded:{height:"100%",width:"100%"},bloksAppFullscreen:{height:"100vh",width:"100%"}}),g=o("WebBloksStyle").createStylesIfSupported({key:"height",value:"100dvh",type:"regular"},{bloksAppFullscreenDVH:{height:"100dvh !important"}}),h={width:"100%",height:"100%"};l.WebBloksApp=p,l.createInitialScreenForObjectSet=_,l.bloksRootStyles=h}),98);
__d("WebBloksEntryPointContainerContext",["WebBloksSSRUtils","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({current:o("WebBloksSSRUtils").canUseDOM?document.body:null});function c(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.value,a;return t[0]!==n||t[1]!==r?(a=s.jsx(u.Provider,{value:r,children:n}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}l.WebBloksEntryPointContainerContext=u,l.WebBloksEntryPointContainerContextProvider=c}),98);
__d("WebBloksMergeRefs",["WebBloksErrors","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s(function(){return c.apply(void 0,t)},[].concat(t))}function c(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){t.forEach(function(t){if(t!=null){if(typeof t=="function"){t(e);return}if(typeof t=="object"){t.current=e;return}}})}}l.default=u}),98);
__d("WebBloksViewpointManager",["WebBloksViewpoint"],(function(t,n,r,o,a,i,l){var e="data-bloks-visibility-state",s=(function(){function t(){var e=this;this.$1=new Map,this.$2=null,this.$3=null,this.$4=!1,this.$5=new Set,this.$15=function(){for(var t of e.$5){if(!(t instanceof HTMLElement&&t instanceof Element))return;var n=e.$1.get(t);if(!n)return;var r=void 0;document.visibilityState==="visible"?r=e.$13(t):r=e.$12(t),e.$11(r,n)}}}var n=t.prototype;return n.track=function(t,n,r){r===void 0&&(r="default");var e=new Map([[r,n]]);this.$1.set(t,e),this.$2||this.$6();var o=this.$2;if(o!=null)for(var a of this.$1.keys())o.observe(a);this.$3||this.$7(),this.$4||this.$8()},n.untrackElement=function(t){var e;(e=this.$2)==null||e.unobserve(t),this.$1.delete(t),this.$1.size===0&&this.$9()},n.untrackAll=function(){var e=this.$1.keys();for(var t of e)this.untrackElement(t);this.$9()},n.$10=function(n){var t=[],r=[],o=[];for(var a of n){var i=a.type,l=a.attributeName,s=a.removedNodes,u=a.target;if(i==="childList")for(var c of s)c instanceof HTMLElement&&t.push(c);if(u instanceof HTMLElement){var d=u.getAttribute(e);i==="attributes"&&l===e&&(d==="exited"?r.push(u):d==="entered"&&o.push(u))}}for(var m of t)for(var p of this.$1){var _=p[0],f=p[1];if(m.contains(_)){var g;(g=this.$2)==null||g.unobserve(_),this.$1.delete(_),this.$11(this.$12(m),f)}}for(var h of r)for(var y of this.$1){var C=y[0],b=y[1];h.contains(C)&&this.$11(this.$12(h),b)}for(var v of o)for(var S of this.$1){var R=S[0],L=S[1];v.contains(R)&&this.$11(this.$13(v),L)}},n.$7=function(){var e=this,t=new MutationObserver(function(t){return e.$10(t)});document.body!==null&&t.observe(document.body,{attributes:!0,attributeFilter:["data-bloks-visibility-state"],childList:!0,subtree:!0}),this.$3=t},n.$6=function(){var e=this,t=new IntersectionObserver(function(t){return e.$14(t)},{threshold:[0,.2,.4,.6,.8,1]});this.$2=t},n.$14=function(t){for(var e of t){var n=e.isIntersecting,r=n===void 0?!1:n,a=e.intersectionRatio,i=e.target;if(!(i instanceof HTMLElement&&i instanceof Element))return;var l=this.$1.get(i);if(!l)return;var s=null;r===!0||a>0?this.$5.has(e.target)?s="intersecting":s="entered":s="exited";var u=new(o("WebBloksViewpoint")).ViewpointSnapshot({element:i,percentVisible:e.intersectionRatio,state:s});this.$11(u,l)}var c=t.filter(function(e){return e.isIntersecting===!0||e.intersectionRatio>0}).map(function(e){return e.target});this.$5=new Set(c)},n.$8=function(){document.addEventListener("visibilitychange",this.$15),this.$4=!0},n.$11=function(t,n){for(var e of n){var r=e[0],o=e[1];o(t)}},n.$13=function(t){return new(o("WebBloksViewpoint")).ViewpointSnapshot({element:t,percentVisible:1,state:"entered"})},n.$12=function(t){return new(o("WebBloksViewpoint")).ViewpointSnapshot({element:t,percentVisible:0,state:"exited"})},n.$9=function(){var e,t;(e=this.$2)==null||e.disconnect(),this.$2=null,(t=this.$3)==null||t.disconnect(),this.$3=null,document.removeEventListener("visibilitychange",this.$15),this.$4=!1},t})();l.default=s}),98);
__d("WebBloksViewpointProvider",["WebBloksViewpointContext","WebBloksViewpointManager","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(6),n=e.children,a=d(null),i=a[0],l=a[1],u,m;t[0]!==i?(u=function(){var e=document.body;return e!=null&&e instanceof HTMLElement&&i===null&&l(p),(function(){i==null||i.untrackAll()})},m=[i],t[0]=i,t[1]=u,t[2]=m):(u=t[1],m=t[2]),c(u,m);var _;return t[3]!==n||t[4]!==i?(_=s.jsx(r("WebBloksViewpointContext").Provider,{value:i,children:n}),t[3]=n,t[4]=i,t[5]=_):_=t[5],_}function p(){return new(r("WebBloksViewpointManager"))}l.default=m}),98);
__d("useWebBloksAnalytics",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e,t){var n=o("react-compiler-runtime").c(4),r=c(null),a=e.analytics,i,l;return n[0]!==a||n[1]!==t?(i=function(){var e=a==null?void 0:a.subscribe(t),n=a==null?void 0:a.subscribeFrameRate();return(function(){n==null||n(),e==null||e()})},l=[a,t,r],n[0]=a,n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),u(i,l),r}l.default=d}),98);
__d("WebBloksEntryPoint.react",["WebBloksApp","WebBloksEntryPointContainerContext","WebBloksEnvironmentContext","WebBloksMergeRefs","WebBloksServerData","WebBloksTheme","WebBloksUtils","WebBloksViewpointProvider","react","react-compiler-runtime","useWebBloksAnalytics"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useRef;function c(e){var t=o("react-compiler-runtime").c(18),n=e.environment,a=e.externalObjectSet,i=e.externalVariables,l=e.initialFetchParams,c=e.payload,d=e.style,m=e.theme,p=d===void 0?o("WebBloksApp").bloksRootStyles:d;c&&c.server_data!=null&&o("WebBloksServerData").handleWebBloksServerData(o("WebBloksUtils").cast(c.server_data));var _;t[0]!==l?(_=l!=null?l:{},t[0]=l,t[1]=_):_=t[1];var f=_,g=f.appId,h=f.params,y=r("useWebBloksAnalytics")(n,g!=null?g:""),C=u(null),b=r("WebBloksMergeRefs")(y,C),v;t[2]!==g||t[3]!==a||t[4]!==i||t[5]!==h||t[6]!==c?(v=s.jsx(o("WebBloksEntryPointContainerContext").WebBloksEntryPointContainerContextProvider,{value:C,children:s.jsx(o("WebBloksApp").WebBloksApp,{node:c,appId:g,params:h,externalObjectSet:a,externalVariables:i})}),t[2]=g,t[3]=a,t[4]=i,t[5]=h,t[6]=c,t[7]=v):v=t[7];var S;t[8]!==n||t[9]!==v?(S=s.jsx(o("WebBloksEnvironmentContext").WebBloksEnvironmentProvider,{environment:n,children:v}),t[8]=n,t[9]=v,t[10]=S):S=t[10];var R;t[11]!==S||t[12]!==m?(R=s.jsx(r("WebBloksViewpointProvider"),{children:s.jsx(o("WebBloksTheme").WebBloksThemeProvider,{initialTheme:m,children:S})}),t[11]=S,t[12]=m,t[13]=R):R=t[13];var L=R,E;return t[14]!==L||t[15]!==b||t[16]!==p?(E=s.jsx("div",{style:p,ref:b,children:L}),t[14]=L,t[15]=b,t[16]=p,t[17]=E):E=t[17],E}l.default=c}),98);
__d("MSGWebBloksEntryPoint.react",["MSGWebBloksEnvironment","WebBloksClientPerfLogger","WebBloksEntryPoint.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;r("WebBloksClientPerfLogger").log("DISPLAY_JS_DONE");function c(e){var t=o("react-compiler-runtime").c(8),n=e.actionOverrides,a=e.initialFetchParams,i=e.payload,l=e.theme;r("WebBloksClientPerfLogger").log("WBLOKS_INVOKED");var c;t[0]!==n?(c={actions:n,disableHistoryStack:!0,embedded:!0},t[0]=n,t[1]=c):c=t[1];var m=o("MSGWebBloksEnvironment").useMSGBloksEnvironment(c),p;t[2]===Symbol.for("react.memo_cache_sentinel")?(p=[],t[2]=p):p=t[2],u(d,p);var _;return t[3]!==m||t[4]!==a||t[5]!==i||t[6]!==l?(_=s.jsx(r("WebBloksEntryPoint.react"),{environment:m,initialFetchParams:a,payload:i,theme:l}),t[3]=m,t[4]=a,t[5]=i,t[6]=l,t[7]=_):_=t[7],_}function d(){r("WebBloksClientPerfLogger").log("ROOT_MOUNTED"),r("WebBloksClientPerfLogger").destroy()}l.default=c}),98);
__d("MW3PBotCommandListItem.react",["MWXListCell.react","MWXText.react","MWXTextPairing.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.command,a=n.commandDescription,i=n.commandText,l;t[0]!==a?(l=s.jsx(r("MWXText.react"),{type:"meta4",children:a}),t[0]=a,t[1]=l):l=t[1];var u;return t[2]!==i||t[3]!==l?(u=s.jsx(r("MWXListCell.react"),{content:s.jsx(r("MWXTextPairing.react"),{body:l,headline:i,level:4,reduceEmphasis:!0})}),t[2]=i,t[3]=l,t[4]=u):u=t[4],u}l.default=u}),98);
__d("MWAPPlusInboxNullStateWithIllustration.react",["fbt","ix","MDSM5CoreStyles","MWLayoutCard.react","MWResponsiveLayoutConstants","MWXColumn.react","MWXColumnItem.react","MWXImage.react","MWXText.react","gkx","react","react-compiler-runtime","stylex","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=c||(c=o("react")),m=r("gkx")("24031"),p={outerContainer:{alignItems:"x6s0dn4",backgroundColor:"x2bj2ny",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",$$css:!0}};function _(){var t=o("react-compiler-runtime").c(7),n=r("useCurrentDisplayMode")(),a;t[0]!==n?(a=u(n==="dark"?"285542":"285544"),t[0]=n,t[1]=a):a=t[1];var i=a,l;t[2]!==i?(l=d.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:0,paddingVertical:12,children:d.jsx(r("MWXImage.react"),{src:i})}),t[2]=i,t[3]=l):l=t[3];var c;t[4]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:20,children:d.jsx(r("MWXText.react"),{color:"primary",type:"headlineEmphasized2",children:s._(/*BTDS*/"No channels selected")})}),t[4]=c):c=t[4];var _;if(t[5]!==l){var f=d.jsxs(r("MWXColumn.react"),{expanding:!0,verticalAlign:"center",children:[l,c]});_=r("MWLayoutCard.react")!=null?d.jsx(r("MWLayoutCard.react"),{panel:o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL,children:f}):d.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(p.outerContainer,m&&o("MDSM5CoreStyles").MDSM5CoreStyles.pageSection),{children:f})),t[5]=l,t[6]=_}else _=t[6];return _}l.default=_}),226);
__d("MWAddMemberToGroupListCell.react",["fbt","MWXIconForListCell.react","MWXIconFriendGenericAdd","MWXListCellPressable.react","MWXText.react","react","react-compiler-runtime","useMWAddParticipantDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(11),n=e.testid,a=e.thread,i=r("useMWAddParticipantDialog")(a.threadKey,a.threadType),l;t[0]!==a.threadKey||t[1]!==a.threadType?(l={eventName:"open_add_members_dialog",threadKey:a.threadKey,threadType:a.threadType},t[0]=a.threadKey,t[1]=a.threadType,t[2]=l):l=t[2];var c=l,d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconFriendGenericAdd"),size:"large"}),t[3]=d):d=t[3];var m;t[4]===Symbol.for("react.memo_cache_sentinel")?(m=u.jsx(r("MWXText.react"),{type:"headline4",children:s._(/*BTDS*/"Add people")}),t[4]=m):m=t[4];var p;t[5]!==i?(p=function(){return i()},t[5]=i,t[6]=p):p=t[6];var _;return t[7]!==c||t[8]!==p||t[9]!==n?(_=u.jsx(r("MWXListCellPressable.react"),{addOnStart:d,content:m,loggingEvent:c,onPress:p,size:"medium",testid:void 0}),t[7]=c,t[8]=p,t[9]=n,t[10]=_):_=t[10],_}l.default=c}),226);
__d("MWXCollapsible.react",["MWXColumn.react","MWXColumnItem.react","MWXIconStrict.react","MWXListCellPressable.react","MWXText.react","cr:4055","cr:4100","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useId,c={root:{alignItems:"x6s0dn4",display:"x78zum5",height:"xxk0z11",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(25),a=e.children,i=e.isOpen,l=e.label,d=e.onPress,m=e.renderButtonContainer,p=e.testid,_=u(),f=u(),g=n(i?"cr:4100":"cr:4055"),h;t[0]!==g?(h=s.jsx(r("MWXIconStrict.react"),{icon:g,isDecorative:!0,size:16}),t[0]=g,t[1]=h):h=t[1];var y;t[2]!==l?(y=s.jsx(o("react-strict-dom").html.div,{style:c.root,children:s.jsx(r("MWXText.react"),{color:"primary",numberOfLines:2,type:"bodyLink3",children:l})}),t[2]=l,t[3]=y):y=t[3];var C;t[4]!==_||t[5]!==f||t[6]!==i||t[7]!==l||t[8]!==d||t[9]!==h||t[10]!==y||t[11]!==p?(C=s.jsx(r("MWXListCellPressable.react"),{addOnEnd:h,"aria-controls":f,"aria-expanded":i,"aria-label":l,content:y,id:_,onPress:d,testid:void 0}),t[4]=_,t[5]=f,t[6]=i,t[7]=l,t[8]=d,t[9]=h,t[10]=y,t[11]=p,t[12]=C):C=t[12];var b=C,v;t[13]!==b||t[14]!==m?(v=m?m(b):b,t[13]=b,t[14]=m,t[15]=v):v=t[15];var S;t[16]!==v?(S=s.jsx(r("MWXColumnItem.react"),{children:v}),t[16]=v,t[17]=S):S=t[17];var R=i?a:null,L;t[18]!==_||t[19]!==f||t[20]!==R?(L=s.jsx(r("MWXColumnItem.react"),{children:s.jsx(o("react-strict-dom").html.div,{"aria-labelledby":_,id:f,role:"region",children:R})}),t[18]=_,t[19]=f,t[20]=R,t[21]=L):L=t[21];var E;return t[22]!==S||t[23]!==L?(E=s.jsxs(r("MWXColumn.react"),{paddingHorizontal:8,children:[S,L]}),t[22]=S,t[23]=L,t[24]=E):E=t[24],E}l.default=d}),98);
__d("MWXIconBroadcastChat",["MWXSvgIcon","SVGIcon","cr:22235","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22235")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconFaceSparkles",["MWXSvgIcon","SVGIcon","cr:22318","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22318")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconInbox",["MWXSvgIcon","SVGIcon","cr:22370","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22370")),r("gkx")("23219"));l.default=e}),98);
__d("MWBroadcastChannelBestPracticesChannelsIntroItem.react",["fbt","ix","AddOnStartOverride.react","MWXCollapsible.react","MWXColumnItem.react","MWXIconBroadcastChat","MWXIconFaceSparkles","MWXIconInbox","MWXIconStrict.react","MWXImage.react","MWXLink.react","MWXListCell.react","MWXRow.react","MWXRowItem.react","MWXText.react","MWXTextPairing.react","react","react-compiler-runtime","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useState,m={messengerIllustration:{maxHeight:"x1vke2v8",$$css:!0}};function p(){var e=o("react-compiler-runtime").c(21),t=r("useCurrentDisplayMode")(),n=t==="dark",a;e[0]!==n?(a=u(n?"378842":"378844"),e[0]=n,e[1]=a):a=e[1];var i=a,l;e[2]===Symbol.for("react.memo_cache_sentinel")?(l=[{body:s._(/*BTDS*/"Only your Page or profile can send messages. Anyone can discover, join, and interact."),headline:s._(/*BTDS*/"Reach followers at once"),icon:r("MWXIconBroadcastChat"),key:"reach"},{body:s._(/*BTDS*/"Engage with your followers directly in their inboxes to build community over shared interests in real time."),headline:s._(/*BTDS*/"Direct communication"),icon:r("MWXIconInbox"),key:"participate"},{body:s._(/*BTDS*/"Make announcements, share behind-the-scenes photos or get feedback from your community."),headline:s._(/*BTDS*/"Deeper connection"),icon:r("MWXIconFaceSparkles"),key:"notify"}],e[2]=l):l=e[2];var p=l,f=d(!0),g=f[0],h=f[1],y;e[3]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"To help people feel safe, we review channel content against our {Community Standards Link}.",[s._param("Community Standards Link",c.jsx(r("MWXLink.react"),{href:"https://transparency.meta.com/policies/community-standards/",children:s._(/*BTDS*/"Community Standards")}))]),e[3]=y):y=e[3];var C=y,b;e[4]!==i?(b=c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx(r("MWXImage.react"),{src:i,xstyle:m.messengerIllustration})}),e[4]=i,e[5]=b):b=e[5];var v;e[6]===Symbol.for("react.memo_cache_sentinel")?(v=c.jsx(r("MWXColumnItem.react"),{paddingHorizontal:16,paddingTop:24,children:c.jsx(r("MWXText.react"),{type:"headlineEmphasized1",children:s._(/*BTDS*/"What are channels?")})}),e[6]=v):v=e[6];var S;e[7]===Symbol.for("react.memo_cache_sentinel")?(S=c.jsx(r("MWXColumnItem.react"),{paddingHorizontal:16,paddingVertical:16,children:c.jsx(r("MWXText.react"),{type:"body2",children:s._(/*BTDS*/"Channels help you connect with your most loyal followers in a dedicated messaging space.")})}),e[7]=S):S=e[7];var R;e[8]===Symbol.for("react.memo_cache_sentinel")?(R=s._(/*BTDS*/"Learn more about channels"),e[8]=R):R=e[8];var L;e[9]!==g?(L=function(){return h(!g)},e[9]=g,e[10]=L):L=e[10];var E;e[11]===Symbol.for("react.memo_cache_sentinel")?(E=p.map(_),e[11]=E):E=e[11];var k;e[12]!==g||e[13]!==L?(k=c.jsx(r("MWXCollapsible.react"),{isOpen:g,label:R,onPress:L,children:E}),e[12]=g,e[13]=L,e[14]=k):k=e[14];var I;e[15]===Symbol.for("react.memo_cache_sentinel")?(I=c.jsx(r("MWXColumnItem.react"),{paddingHorizontal:16,paddingVertical:16,children:c.jsx(r("MWXText.react"),{align:"center",type:"meta3",children:C})}),e[15]=I):I=e[15];var T;e[16]!==k?(T=c.jsxs(r("MWXColumnItem.react"),{children:[k,I]}),e[16]=k,e[17]=T):T=e[17];var D;return e[18]!==T||e[19]!==b?(D=c.jsxs(c.Fragment,{children:[b,v,S,T]}),e[18]=T,e[19]=b,e[20]=D):D=e[20],D}function _(e){var t=e.body,n=e.headline,o=e.icon,a=e.key;return c.jsx(r("MWXColumnItem.react"),{paddingVertical:8,children:c.jsx(r("MWXListCell.react"),{addOnStart:c.jsx(r("AddOnStartOverride.react"),{children:c.jsx(r("MWXRow.react"),{paddingHorizontal:8,children:c.jsx(r("MWXRowItem.react"),{children:c.jsx(r("MWXIconStrict.react"),{color:"tertiary",icon:o,size:20})})})}),content:c.jsx(r("MWXTextPairing.react"),{body:t,bodyColor:"secondary",headline:n,level:3})})},a)}_.displayName=_.name+" [from "+i.id+"]",l.default=p}),226);
__d("MWBroadcastChannelBestPracticesContentItem.react",["MWXButton.react","MWXColumnItem.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(20),n=e.buttonLabel,a=e.buttonOnPress,i=e.buttonUrl,l=e.description,u=e.headline,c=e.interstitialImage,d=e.meta,m;t[0]!==c?(m=s.jsx(r("MWXColumnItem.react"),{align:"center",children:c}),t[0]=c,t[1]=m):m=t[1];var p;t[2]!==u?(p=s.jsx(r("MWXColumnItem.react"),{paddingHorizontal:12,paddingTop:24,children:s.jsx(r("MWXText.react"),{type:"headlineEmphasized1",children:u})}),t[2]=u,t[3]=p):p=t[3];var _;t[4]!==l?(_=s.jsx(r("MWXColumnItem.react"),{paddingHorizontal:12,paddingTop:24,children:s.jsx(r("MWXText.react"),{type:"body2",children:l})}),t[4]=l,t[5]=_):_=t[5];var f;t[6]!==d?(f=s.jsx(r("MWXColumnItem.react"),{paddingHorizontal:12,paddingTop:24,children:s.jsx(r("MWXText.react"),{type:"meta3",children:d})}),t[6]=d,t[7]=f):f=t[7];var g;t[8]!==i?(g={url:i},t[8]=i,t[9]=g):g=t[9];var h;t[10]!==n||t[11]!==a||t[12]!==g?(h=s.jsx(r("MWXColumnItem.react"),{paddingHorizontal:12,paddingVertical:24,children:s.jsx(r("MWXButton.react"),{label:n,linkProps:g,onPress:a})}),t[10]=n,t[11]=a,t[12]=g,t[13]=h):h=t[13];var y;return t[14]!==m||t[15]!==p||t[16]!==_||t[17]!==f||t[18]!==h?(y=s.jsxs(r("MWXColumnItem.react"),{paddingHorizontal:12,children:[m,p,_,f,h]}),t[14]=m,t[15]=p,t[16]=_,t[17]=f,t[18]=h,t[19]=y):y=t[19],y}l.default=u}),98);
__d("MWInboxInfoSubPageHeader.react",["fbt","Locale","MWXCircleButton.react","MWXIconArrowLeft","MWXIconArrowRight","MWXRow.react","MWXRowItem.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(11),n=e.onPressBack,a=e.title,i=e.titleComponent,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Back"),t[0]=l):l=t[0];var c;t[1]!==n?(c=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("MWXCircleButton.react"),{"aria-label":l,icon:r("Locale").isRTL()?r("MWXIconArrowRight"):r("MWXIconArrowLeft"),onPress:n,size:32,type:"deemphasized"})}),t[1]=n,t[2]=c):c=t[2];var d;t[3]!==a||t[4]!==i?(d=a!=null?u.jsx(r("MWXText.react"),{isSemanticHeading:!0,type:"bodyLink2",children:a}):i,t[3]=a,t[4]=i,t[5]=d):d=t[5];var m;t[6]!==d?(m=u.jsx(r("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",children:d}),t[6]=d,t[7]=m):m=t[7];var p;return t[8]!==c||t[9]!==m?(p=u.jsxs(r("MWXRow.react"),{paddingVertical:16,spacingHorizontal:8,children:[c,m]}),t[8]=c,t[9]=m,t[10]=p):p=t[10],p}l.default=c}),226);
__d("MWBroadcastChannelBestPracticesContent.react",["fbt","ix","FBLogger","I64","LSThreadBitOffset","MWAdminForBroadcastChannelUtils","MWBroadcastChannelBestPracticesChannelsIntroItem.react","MWBroadcastChannelBestPracticesContentItem.react","MWInboxInfoPanelContext.react","MWInboxInfoSubPageHeader.react","MWLogBroadcastChannelFalcoEvent","MWXColumn.react","MWXColumnItem.react","MWXDivider.react","MWXImage.react","MWXRow.react","MWXRowItem.react","MWXText.react","MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent","XCometStoriesCreateChannelControllerRouteBuilder","react","react-compiler-runtime","requireDeferred","useCurrentDisplayMode","useMWXLazyDialog","withCometPlaceholder"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m=e.useEffect,p=r("requireDeferred")("MWChatPromptDialog.react").__setRef("MWBroadcastChannelBestPracticesContent.react"),_={root:{$$css:!0}};function f(e){var t=o("react-compiler-runtime").c(58),n=e.onReturn,a=e.thread,i=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),l=i.isOnBestPracticesPageRef,f,h;t[0]!==l?(f=function(){return l.current=!0,(function(){l.current=!1})},h=[l],t[0]=l,t[1]=f,t[2]=h):(f=t[1],h=t[2]),m(f,h);var y=a.threadKey,C=r("useCurrentDisplayMode")(),b=C==="dark",v=r("useMWXLazyDialog")(p),S=v[0],R=o("MWAdminForBroadcastChannelUtils").useFetchBroadcastChannelCreatorId(y),L;if(t[3]!==R||t[4]!==y){var E;L=R!=null?(E=r("XCometStoriesCreateChannelControllerRouteBuilder").buildUri({thread_id:(c||(c=o("I64"))).to_string(y),user_id:(c||(c=o("I64"))).to_string(R)}).setProtocol("https"))==null||(E=E.setDomain("www.facebook.com"))==null?void 0:E.toString():null,t[3]=R,t[4]=y,t[5]=L}else L=t[5];var k=L,I;t[6]!==a?(I=o("LSThreadBitOffset").has(152,a),t[6]=a,t[7]=I):I=t[7];var T=I,D;t[8]!==a?(D=o("LSThreadBitOffset").has(36,a),t[8]=a,t[9]=D):D=t[9];var x=D,$;t[10]!==l||t[11]!==n?($=function(){l.current=!1,n()},t[10]=l,t[11]=n,t[12]=$):$=t[12];var P;t[13]===Symbol.for("react.memo_cache_sentinel")?(P=d.jsx(r("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:d.jsx(r("MWXRowItem.react"),{expanding:!0,children:d.jsx(r("MWXText.react"),{isSemanticHeading:!0,type:"bodyLink2",children:s._(/*BTDS*/"Best practices")})})}),t[13]=P):P=t[13];var N;t[14]!==$?(N=d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWInboxInfoSubPageHeader.react"),{onPressBack:$,titleComponent:P})}),t[14]=$,t[15]=N):N=t[15];var M;t[16]===Symbol.for("react.memo_cache_sentinel")?(M=d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWBroadcastChannelBestPracticesChannelsIntroItem.react"),{})}),t[16]=M):M=t[16];var w;t[17]===Symbol.for("react.memo_cache_sentinel")?(w=d.jsx(r("MWXColumnItem.react"),{paddingVertical:24,children:d.jsx(r("MWXDivider.react"),{})}),t[17]=w):w=t[17];var A;t[18]===Symbol.for("react.memo_cache_sentinel")?(A=s._(/*BTDS*/"Send message"),t[18]=A):A=t[18];var F,O;t[19]===Symbol.for("react.memo_cache_sentinel")?(F=s._(/*BTDS*/"Creators who send a message at least 3 days a week see higher member retention."),O=s._(/*BTDS*/"Message consistently"),t[19]=F,t[20]=O):(F=t[19],O=t[20]);var B;t[21]!==b?(B=u(b?"869770":"869772"),t[21]=b,t[22]=B):B=t[22];var W;t[23]!==B?(W=d.jsx(r("MWXImage.react"),{src:B}),t[23]=B,t[24]=W):W=t[24];var q;t[25]===Symbol.for("react.memo_cache_sentinel")?(q=s._(/*BTDS*/"New messages keep members coming back."),t[25]=q):q=t[25];var U;t[26]!==W?(U=d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWBroadcastChannelBestPracticesContentItem.react"),{buttonLabel:A,buttonOnPress:g,description:F,headline:O,interstitialImage:W,meta:q})}),t[26]=W,t[27]=U):U=t[27];var V;t[28]===Symbol.for("react.memo_cache_sentinel")?(V=d.jsx(r("MWXColumnItem.react"),{paddingVertical:24,children:d.jsx(r("MWXDivider.react"),{})}),t[28]=V):V=t[28];var H;t[29]===Symbol.for("react.memo_cache_sentinel")?(H=s._(/*BTDS*/"Send photo"),t[29]=H):H=t[29];var G;t[30]!==y?(G=function(){var e=document.querySelector('[id="mw-composer-file-uploader-'+(c||(c=o("I64"))).to_string(y)+'"][role="button"]');if(e==null){r("FBLogger")("cm_web").mustfix("Photo upload button not found for best practices action");return}e==null||e.click()},t[30]=y,t[31]=G):G=t[31];var z,j;t[32]===Symbol.for("react.memo_cache_sentinel")?(z=s._(/*BTDS*/"Unique content has higher engagement than reshared stories, posts and reels."),j=s._(/*BTDS*/"Send unique content"),t[32]=z,t[33]=j):(z=t[32],j=t[33]);var K;t[34]!==b?(K=u(b?"900895":"900897"),t[34]=b,t[35]=K):K=t[35];var Q;t[36]!==K?(Q=d.jsx(r("MWXImage.react"),{src:K}),t[36]=K,t[37]=Q):Q=t[37];var X;t[38]===Symbol.for("react.memo_cache_sentinel")?(X=s._(/*BTDS*/"Share real-time photos, videos and voice messages to create an authentic experience."),t[38]=X):X=t[38];var Y;t[39]!==G||t[40]!==Q?(Y=d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWBroadcastChannelBestPracticesContentItem.react"),{buttonLabel:H,buttonOnPress:G,description:z,headline:j,interstitialImage:Q,meta:X})}),t[39]=G,t[40]=Q,t[41]=Y):Y=t[41];var J;t[42]!==x||t[43]!==T||t[44]!==b||t[45]!==S||t[46]!==y?(J=T||x?d.jsxs(d.Fragment,{children:[d.jsx(r("MWXColumnItem.react"),{paddingVertical:24,children:d.jsx(r("MWXDivider.react"),{})}),d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWBroadcastChannelBestPracticesContentItem.react"),{buttonLabel:T?s._(/*BTDS*/"Create prompt"):s._(/*BTDS*/"Create poll"),buttonOnPress:function(){if(T)r("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent").log(function(){return{action_name:1,event_name:302,source:170,surface:16,thread_id:(c||(c=o("I64"))).to_string(y)}}),S({threadKey:y});else{var e=document.querySelector('[id="mw-poll-composer-button-'+(c||(c=o("I64"))).to_string(y)+'"][role="button"]');e==null||e.click()}},description:s._(/*BTDS*/"Interactive features increase member engagement in channels."),headline:s._(/*BTDS*/"Interact with members"),interstitialImage:d.jsx(r("MWXImage.react"),{src:u(b?"869777":"869779")}),meta:s._(/*BTDS*/"Create prompts or polls to let members participate and give feedback.")})})]}):null,t[42]=x,t[43]=T,t[44]=b,t[45]=S,t[46]=y,t[47]=J):J=t[47];var Z;t[48]!==b||t[49]!==k||t[50]!==y?(Z=k!=null?d.jsxs(d.Fragment,{children:[d.jsx(r("MWXColumnItem.react"),{paddingVertical:24,children:d.jsx(r("MWXDivider.react"),{})}),d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWBroadcastChannelBestPracticesContentItem.react"),{buttonLabel:s._(/*BTDS*/"Share channel"),buttonOnPress:function(){o("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({action:1,event:215,parentSurface:11,source:170,surface:16,threadFbid:y})},buttonUrl:k,description:s._(/*BTDS*/"Creators who share their channel to story see continued channel growth."),headline:s._(/*BTDS*/"Keep sharing your channel"),interstitialImage:d.jsx(r("MWXImage.react"),{src:u(b?"210357":"210358")}),meta:s._(/*BTDS*/"Use story stickers and invite links to encourage more joins.")})})]}):null,t[48]=b,t[49]=k,t[50]=y,t[51]=Z):Z=t[51];var ee;return t[52]!==U||t[53]!==Y||t[54]!==J||t[55]!==Z||t[56]!==N?(ee=d.jsxs(r("MWXColumn.react"),{spacing:4,xstyle:_.root,children:[N,M,w,U,V,Y,J,Z]}),t[52]=U,t[53]=Y,t[54]=J,t[55]=Z,t[56]=N,t[57]=ee):ee=t[57],ee}function g(){var e=document.querySelector('[role="textbox"]');e==null||e.focus()}var h=o("withCometPlaceholder").withCometPlaceholder(f,null,"MWBroadcastChannelBestPracticesContent");l.default=h}),226);
__d("MWBroadcastChannelBestPracticesMenuItem.react",["fbt","Int64Hooks","MWBroadcastChannelBestPracticesContent.react","MWInboxInfoButton.react","MWInboxInfoPanelContext.react","MWXIconForListCell.react","MWXIconQuestionChat","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect;function d(e){var t=o("react-compiler-runtime").c(13),n=e.pushPage,a=e.thread,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=s._(/*BTDS*/"Best practices"),t[0]=i):i=t[0];var l=i,d=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),m=d.navToBestPracticesRef,p,_;t[1]!==m||t[2]!==n||t[3]!==a?(p=function(){m.current=!1,n(function(e){var t=e.onReturn;return u.jsx(r("MWBroadcastChannelBestPracticesContent.react"),{onReturn:t,thread:a})})},_=[m,n,a],t[1]=m,t[2]=n,t[3]=a,t[4]=p,t[5]=_):(p=t[4],_=t[5]);var f=o("Int64Hooks").useCallbackInt64(p,_),g,h;t[6]!==m||t[7]!==f?(g=function(){m.current===!0&&f()},h=[m,f],t[6]=m,t[7]=f,t[8]=g,t[9]=h):(g=t[8],h=t[9]),c(g,h);var y;t[10]===Symbol.for("react.memo_cache_sentinel")?(y=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconQuestionChat")}),t[10]=y):y=t[10];var C;return t[11]!==f?(C=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:y,label:l,onPress:function(){f()}}),t[11]=f,t[12]=C):C=t[12],C}l.default=d}),226);
__d("MWCMCommunityTakenDownDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24179297291657922"}),null);
__d("MWCMCommunityTakenDownDialogQuery$Parameters",["MWCMCommunityTakenDownDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWCMCommunityTakenDownDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMCommunityTakenDownDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWCMCommunityTakenDownDialog.entrypoint",["JSResourceForInteraction","MWCMCommunityTakenDownDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.communityID;return{queries:{takenDownQueryReference:{parameters:r("MWCMCommunityTakenDownDialogQuery$Parameters"),variables:{communityID:e}}}}},root:r("JSResourceForInteraction")("MWCMCommunityTakenDownDialog.react").__setRef("MWCMCommunityTakenDownDialog.entrypoint")};l.default=e}),98);
__d("MWCMDirectInviteJoinDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{}},root:r("JSResourceForInteraction")("MWCMDirectInviteJoinDialog.react").__setRef("MWCMDirectInviteJoinDialog.entrypoint")};l.default=e}),98);
__d("MWCMEditChatInfo.react",["fbt","MWInboxInfoButton.react","MWPBumpEntityKey","MWXIconForListCell.react","MWXIconPencil","react","react-compiler-runtime","useMWCMEditChatInfoDialogEntrypoint"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(4),n=e.threadKey,a=r("useMWCMEditChatInfoDialogEntrypoint")(n),i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconPencil")}),l=s._(/*BTDS*/"Change chat info"),t[0]=i,t[1]=l):(i=t[0],l=t[1]);var c;return t[2]!==a?(c=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:i,label:l,onPress:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","customise_section_change_chat_info"),a()}}),t[2]=a,t[3]=c):c=t[3],c}l.default=c}),226);
__d("useRainbowNativeSurveyDialogPlatformIntegrationPointQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25102080782821278"}),null);
__d("useRainbowNativeSurveyDialogPlatformIntegrationPointQuery.graphql",["useRainbowNativeSurveyDialogPlatformIntegrationPointQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"integration_point_id"},t={defaultValue:null,kind:"LocalArgument",name:"scale"},r={defaultValue:null,kind:"LocalArgument",name:"session_id"},o={defaultValue:null,kind:"LocalArgument",name:"survey_context_data"},a=[{kind:"Variable",name:"integration_point_id",variableName:"integration_point_id"}],i=[{kind:"Variable",name:"session_id",variableName:"session_id"},{kind:"Variable",name:"survey_context_data",variableName:"survey_context_data"}],l={alias:null,args:null,kind:"ScalarField",name:"session_blob",storageKey:null},s={alias:null,args:null,kind:"ScalarField",name:"branch_default_page_index",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"branch_question_id",storageKey:null},c={alias:null,args:null,kind:"ScalarField",name:"branch_subquestion_index_int",storageKey:null},d={alias:null,args:null,concreteType:"StructuredSurveyBranchNodeResponseMapEntry",kind:"LinkedField",name:"branch_response_maps",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"page_index",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"response_option_numeric_value",storageKey:null}],storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"qwa_min",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"qwa_page_index",storageKey:null},_={alias:null,args:null,kind:"ScalarField",name:"qwa_question_id",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"qwa_default_page_index",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"direct_next_page_index_int",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"random_fallback_threshold",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"random_next_page_indices",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"random_next_page_weights",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"fallback_page",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"qe_next_page_index",storageKey:null},S={alias:null,args:null,kind:"ScalarField",name:"node_type",storageKey:null},R=[s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,{alias:null,args:null,concreteType:"StructuredSurveyControlNodeFlat",kind:"LinkedField",name:"composite_control_node_flat",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"parent_index",storageKey:null},{alias:null,args:null,concreteType:"StructuredSurveyControlNode",kind:"LinkedField",name:"control_node",plural:!1,selections:[s,u,c,d,m,p,_,f,g,h,y,C,b,v,S],storageKey:null}],storageKey:null}],L={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"question_id",storageKey:null},k=[E,{alias:null,args:null,kind:"ScalarField",name:"amount",storageKey:null}],I=[{alias:null,args:null,concreteType:"XFBSurveyFlowDSLNodeDirective",kind:"LinkedField",name:"directives",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"target_page",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"conditions",plural:!0,selections:[L,{alias:null,args:null,kind:"ScalarField",name:"type",storageKey:null},{kind:"InlineFragment",selections:[E,{alias:null,args:null,kind:"ScalarField",name:"subquestion",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"answer_num",storageKey:null}],type:"XFBSurveyFlowDSLNodeAnswerEqCondition",abstractKey:null},{kind:"InlineFragment",selections:k,type:"XFBSurveyFlowDSLNodeAnswerCountGTECondition",abstractKey:null},{kind:"InlineFragment",selections:k,type:"XFBSurveyFlowDSLNodeSeenCountGTECondition",abstractKey:null}],storageKey:null}],storageKey:null}],T=[{kind:"Literal",name:"is_comet_environment",value:!0}],D={alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},$={alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null},P={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},N=[D,{alias:null,args:null,concreteType:"InlineStyleAtRange",kind:"LinkedField",name:"inline_style_ranges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"inline_style",storageKey:null},x,$],storageKey:null},{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[L,{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{kind:"InlineFragment",selections:[P],type:"Node",abstractKey:"__isNode"}],storageKey:null},$,x],storageKey:null}],M=[D],w=[{alias:null,args:null,kind:"ScalarField",name:"option_numeric_value",storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"option_text",plural:!1,selections:M,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"option_value",storageKey:null}];return{fragment:{argumentDefinitions:[e,t,r,o],kind:"Fragment",metadata:null,name:"useRainbowNativeSurveyDialogPlatformIntegrationPointQuery",selections:[{alias:null,args:a,concreteType:"SurveyIntegrationPoint",kind:"LinkedField",name:"survey_integration_point",plural:!1,selections:[{alias:null,args:i,concreteType:"StructuredSurveySession",kind:"LinkedField",name:"survey_session",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"CometRainbowNativeSurveyDialog_surveySession"},l],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[e,o,t,r],kind:"Operation",name:"useRainbowNativeSurveyDialogPlatformIntegrationPointQuery",selections:[{alias:null,args:a,concreteType:"SurveyIntegrationPoint",kind:"LinkedField",name:"survey_integration_point",plural:!1,selections:[{alias:null,args:i,concreteType:"StructuredSurveySession",kind:"LinkedField",name:"survey_session",plural:!1,selections:[{alias:null,args:null,concreteType:"StructuredSurvey",kind:"LinkedField",name:"survey",plural:!1,selections:[{alias:null,args:null,concreteType:"StructuredSurveyFlow",kind:"LinkedField",name:"survey_flow",plural:!1,selections:[{alias:null,args:null,concreteType:"StructuredSurveyControlNode",kind:"LinkedField",name:"initial_control_node",plural:!1,selections:R,storageKey:null},{alias:null,args:null,concreteType:"XFBSurveyFlowDSLNode",kind:"LinkedField",name:"initial_dsl",plural:!1,selections:I,storageKey:null},{alias:null,args:null,concreteType:"StructuredSurveyFlowPage",kind:"LinkedField",name:"structured_survey_flow_pages",plural:!0,selections:[{alias:null,args:null,concreteType:"StructuredSurveyFlowBucket",kind:"LinkedField",name:"buckets",plural:!0,selections:[{alias:null,args:null,concreteType:"StructuredSurveyConfiguredQuestion",kind:"LinkedField",name:"configured_questions",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"question_class",storageKey:null},E,{alias:null,args:null,kind:"ScalarField",name:"is_required",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"custom_question_params",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"custom_question_controller",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allow_write_in_response",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"question_images",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"full_text_tokens",plural:!0,selections:[L,{alias:null,args:null,kind:"ScalarField",name:"param_name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"param_type",storageKey:null},{kind:"InlineFragment",selections:[E,{alias:null,args:null,kind:"ScalarField",name:"subquestion_index",storageKey:null}],type:"StructuredSurveyTextTokenParamAnswerReference",abstractKey:null},{kind:"InlineFragment",selections:[E],type:"StructuredSurveyTextTokenParamPreviousValue",abstractKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"custom_hack_class",storageKey:null}],type:"StructuredSurveyTextTokenParamCustomHackValue",abstractKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"content_gallery_question_content_fbid",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"content_gallery_question_content_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"exclusive_response_options",storageKey:null},{alias:null,args:[{kind:"Literal",name:"supported",value:"56wc8"}],concreteType:null,kind:"LinkedField",name:"question_type_renderer",plural:!1,selections:[L,{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionCheckbox_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionCheckboxRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionDropdown_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionDropdownRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionRankOrder_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionRankOrderRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionContentGallery_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionContentGalleryRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionCustom_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionCustomRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyMessage_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionMessageRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionRadio_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionRadioRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionStars_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionStarsRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyText_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionTextRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionRatingMatrix_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionRatingMatrixRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionMaxDiff_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionMaxDiffRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionLikert_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionLikertRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionConsentIntro_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionConsentIntroRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyQuestionNumericField_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionNumericFieldRenderer",abstractKey:null},{kind:"InlineFragment",selections:[{args:null,documentName:"QuestionRenderer_renderer",fragmentName:"RainbowSurveyRTFText_question",fragmentPropName:"question",kind:"ModuleImport"}],type:"QuestionRTFTextRenderer",abstractKey:null}],storageKey:'question_type_renderer(supported:"56wc8")'},{alias:null,args:T,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:N,storageKey:"body(is_comet_environment:true)"},{alias:null,args:T,concreteType:"TextWithEntities",kind:"LinkedField",name:"message",plural:!1,selections:N,storageKey:"message(is_comet_environment:true)"},{alias:null,args:null,concreteType:"StructuredSurveyResponseOption",kind:"LinkedField",name:"response_options",plural:!0,selections:w,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pipe_options_from_question_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"pipe_unselected_options",storageKey:null},{alias:null,args:null,concreteType:"StructuredSurveyResponseOption",kind:"LinkedField",name:"responses_options_from_pipe_question",plural:!0,selections:w,storageKey:null},{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"subquestion_labels",plural:!0,selections:M,storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"randomized_options",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"flipped_options",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fixed_last_option",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"fixed_last_option_number",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subset_options_number",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"XFBSurveyFlowDSLPage",kind:"LinkedField",name:"page_dsl",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBSurveyFlowDSLNode",kind:"LinkedField",name:"entry",plural:!1,selections:I,storageKey:null},{alias:null,args:null,concreteType:"XFBSurveyFlowDSLNode",kind:"LinkedField",name:"exit",plural:!1,selections:I,storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StructuredSurveyControlNode",kind:"LinkedField",name:"control_node",plural:!1,selections:R,storageKey:null},{alias:null,args:null,concreteType:"StructuredSurveyControlNode",kind:"LinkedField",name:"before_visit_control_node",plural:!1,selections:R,storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"allow_repeats",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"flow_type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_last_sub_survey",storageKey:null},P,{alias:null,args:null,kind:"ScalarField",name:"survey_flow_type",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"end_of_survey_redirect_uri",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"response_id",storageKey:null},{alias:null,args:null,concreteType:"SurveyConfig",kind:"LinkedField",name:"config",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"dialog_x_out_enabled",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"survey_header",storageKey:null},P],storageKey:null},l],storageKey:null},P],storageKey:null}]},params:{id:n("useRainbowNativeSurveyDialogPlatformIntegrationPointQuery_facebookRelayOperation"),metadata:{},name:"useRainbowNativeSurveyDialogPlatformIntegrationPointQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useRainbowNativeSurveyDialog",["CometRelay","JSResourceForInteraction","WebPixelRatio","emptyFunction","promiseDone","react","react-compiler-runtime","useCometLazyDialog","useRainbowNativeSurveyDialogPlatformIntegrationPointQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback,c=r("JSResourceForInteraction")("CometRainbowNativeSurveyDialog.react").__setRef("useRainbowNativeSurveyDialog"),d=e!==void 0?e:e=n("useRainbowNativeSurveyDialogPlatformIntegrationPointQuery.graphql");function m(e,t,n,a,i,l){var s=o("react-compiler-runtime").c(9),u=o("CometRelay").useRelayEnvironment(),m=r("useCometLazyDialog")(c),p=m[0],_;return s[0]!==t||s[1]!==a||s[2]!==e||s[3]!==u||s[4]!==n||s[5]!==i||s[6]!==p||s[7]!==l?(_=function(c,m,_,f){var s=(t!=null?t:[]).concat(_!=null?_:[]);r("promiseDone")(o("CometRelay").fetchQuery(u,d,{integration_point_id:e,scale:o("WebPixelRatio").get(),session_id:n,survey_context_data:s!=null?s:[]},{fetchPolicy:"network-only"}).toPromise().then(function(e){var t,n=e==null||(t=e.survey_integration_point)==null?void 0:t.survey_session;n!=null&&n.session_blob?p({hideThankYou:a,onOpenCallback:m,shouldHideSurveyProductNameAndLogo:i,surveySession:n,title:l},c||r("emptyFunction")()):f!=null&&f()}))},s[0]=t,s[1]=a,s[2]=e,s[3]=u,s[4]=n,s[5]=i,s[6]=p,s[7]=l,s[8]=_):_=s[8],_}l.default=m}),98);
__d("MWCMInboxDeleteButton.react",["fbt","BroadcastChannelQPL","I64","JSResourceForInteraction","LSThreadBitOffset","MWInboxInfoButton.react","MWXIconForListCell.react","MWXIconMenuItemTrash","ReQL","ThreadStatus","emptyFunction","promiseDone","react","react-compiler-runtime","useCommunityFolder","useMWDeleteThreadAndMaybeNavigate","useMWXLazyDialog","useRainbowNativeSurveyDialog","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react"));function m(t){var n=o("react-compiler-runtime").c(29),a=t.isChannel,i=t.selected,l=t.thread,c=(e||(e=r("useReStore")))(),m;n[0]!==a?(m=a?s._(/*BTDS*/"Delete channel"):s._(/*BTDS*/"Delete chat"),n[0]=a,n[1]=m):m=n[1];var p=m,_=r("useMWDeleteThreadAndMaybeNavigate")(l,i),f;n[2]===Symbol.for("react.memo_cache_sentinel")?(f=r("JSResourceForInteraction")("MWChatDeleteConversationDialog.react").__setRef("MWCMInboxDeleteButton.react"),n[2]=f):f=n[2];var g=r("useMWXLazyDialog")(f),h=g[0],y;n[3]===Symbol.for("react.memo_cache_sentinel")?(y=r("JSResourceForInteraction")("MWCMDeleteOrPauseChatDialog.react").__setRef("MWCMInboxDeleteButton.react"),n[3]=y):y=n[3];var C=r("useMWXLazyDialog")(y),b=C[0],v=l.threadStatus!=null&&(u||(u=o("I64"))).equal(l.threadStatus,(u||(u=o("I64"))).of_int32(r("ThreadStatus").PAUSED)),S=o("LSThreadBitOffset").has(154,l),R=S&&!v?b:h,L=r("useCommunityFolder")(l),E=o("BroadcastChannelQPL").useLogDeleteChannelStart(l.threadType),k=o("BroadcastChannelQPL").useLogDeleteChannelSuccess(l.threadType),I=o("BroadcastChannelQPL").useLogDeleteChannelDialogRendered(l.threadType),T=o("BroadcastChannelQPL").useLogDeleteChannelConfirmClick(l.threadType),D=(u||(u=o("I64"))).neg_one;L!=null&&(D=L.fbGroupId);var x;n[4]!==l.threadKey?(x=(u||(u=o("I64"))).to_string(l.threadKey),n[4]=l.threadKey,n[5]=x):x=n[5];var $;n[6]!==x?($={context_key:"thread_id",context_value:x},n[6]=x,n[7]=$):$=n[7];var P;n[8]!==D?(P=(u||(u=o("I64"))).to_string(D),n[8]=D,n[9]=P):P=n[9];var N;n[10]!==P?(N={context_key:"group_id",context_value:P},n[10]=P,n[11]=N):N=n[11];var M;n[12]!==$||n[13]!==N?(M=[$,N],n[12]=$,n[13]=N,n[14]=M):M=n[14];var w=r("useRainbowNativeSurveyDialog")("207853198669735",M),A;n[15]===Symbol.for("react.memo_cache_sentinel")?(A=d.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMenuItemTrash")}),n[15]=A):A=n[15];var F;n[16]!==w||n[17]!==c.tables.threads||n[18]!==_||n[19]!==T||n[20]!==I||n[21]!==E||n[22]!==k||n[23]!==R||n[24]!==l.threadKey?(F=function(){r("promiseDone")((async function(){E();var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(c.tables.threads).getKeyRange(l.threadKey));e!=null&&(R({onConfirm:function(){T(),w(_,r("emptyFunction"),null,_);var e=o("ReQL").fromTableAscending(c.tables.threads,[]).getKeyRange(l.threadKey).subscribe(function(t,n){n.operation==="delete"&&(k(),e())})},thread:e}),I())})())},n[16]=w,n[17]=c.tables.threads,n[18]=_,n[19]=T,n[20]=I,n[21]=E,n[22]=k,n[23]=R,n[24]=l.threadKey,n[25]=F):F=n[25];var O;return n[26]!==p||n[27]!==F?(O=d.jsx(r("MWInboxInfoButton.react"),{addOnStart:A,label:p,onPress:F}),n[26]=p,n[27]=F,n[28]=O):O=n[28],O}l.default=m}),226);
__d("MWInboxDetailCommunityNullState.react",["fbt","CometScrollView.react","CometTextWithEntities.react","FDSNullState.react","I64","LSCommunityBitOffset","MDSM5CoreStyles","MWInboxDetailNullState.react","MWPBumpEntityKey","MWXColumn.react","MWXColumnItem.react","MWXIconGlobeAmericas","MWXIconLock","MWXIconStrict.react","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","ReQL","ReQLSuspense","XCometGroupLandingControllerRouteBuilder","getLSMediaCommunityFolderCoverPictureUrl","getLSMediaCommunityFolderPictureUrl","gkx","intlSummarizeNumber","mwCMisStandAloneCommunity","react","react-compiler-runtime","stylex","useMatchMedia","useMigrateURLParamsToRouteParams","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=c||(c=o("react")),p=r("gkx")("23219")&&r("gkx")("24031"),_={scrollContainer:{backgroundColor:"x2bj2ny",display:"x78zum5",height:"x5yr21d",$$css:!0}};function f(e,t){var n,o,a=[460,300,120],i=[72,72,180],l=(n=r("getLSMediaCommunityFolderCoverPictureUrl")(e))!=null?n:!1,s=(o=r("getLSMediaCommunityFolderPictureUrl")(e))!=null?o:!1;return l?[l,t?i:a]:s?[s,i]:[null,[]]}function g(e){var t=r("mwCMisStandAloneCommunity")(e==null?void 0:e.communityType),n=s._(/*BTDS*/"Anyone can see who's in the Facebook group and what they post."),a=s._(/*BTDS*/"Anyone can see who's in this community and messages they send."),i=s._(/*BTDS*/"Only members can see who's in the Facebook group and what they post."),l=s._(/*BTDS*/"Only members can see who's in this community and messages they send.");if(e.fbGroupType!=null){var u=(d||(d=o("I64"))).to_int32(e.fbGroupType);switch(u){case 1:return[r("MWXIconGlobeAmericas"),s._(/*BTDS*/"Public"),t?a:n];case 2:case 3:return[r("MWXIconLock"),s._(/*BTDS*/"Private"),t?l:i];default:return[null,null,null]}}return[null,null,null]}function h(e){var t=o("react-compiler-runtime").c(8),n=e.folder,a=r("useMatchMedia")("(max-width: 1100px)"),i;t[0]!==n||t[1]!==a?(i=f(n,a),t[0]=n,t[1]=a,t[2]=i):i=t[2];var l=i,s=l[0],u=l[1],c=u[0],d=u[1],p=u[2];if(s===null)return null;var _="url("+s+")",g=d+"px",h=p+"px",y=c+"px",C;return t[3]!==_||t[4]!==g||t[5]!==h||t[6]!==y?(C=m.jsx("div",{style:{backgroundImage:_,backgroundPosition:"50% 50%",backgroundRepeat:"no-repeat",backgroundSize:"cover",borderRadius:"20px",height:g,marginTop:h,width:y}}),t[3]=_,t[4]=g,t[5]=h,t[6]=y,t[7]=C):C=t[7],C}function y(t){var n=o("react-compiler-runtime").c(40),a=t.folder,i=r("useMigrateURLParamsToRouteParams")(),l,u,c,f,y;if(n[0]!==a){var b=(d||(d=o("I64"))).to_int32(a.memberCount),v=r("intlSummarizeNumber")(b),S=a==null?void 0:a.communityType,R;n[6]!==S?(R=r("mwCMisStandAloneCommunity")(S),n[6]=S,n[7]=R):R=n[7],l=R;var L=g(a);c=L[0],f=L[1],u=L[2],y=s._(/*BTDS*/"_j{\"*\":\"{memberCount} members\",\"_1\":\"{memberCount} member\"}",[s._plural(b),s._param("memberCount",v)]),n[0]=a,n[1]=l,n[2]=u,n[3]=c,n[4]=f,n[5]=y}else l=n[1],u=n[2],c=n[3],f=n[4],y=n[5];var E=y,k;if(n[8]!==a.fbGroupId){var I;k=(I=r("XCometGroupLandingControllerRouteBuilder").buildUri({group_id:(d||(d=o("I64"))).to_string(a.fbGroupId)}))==null||(I=I.setDomain("www.facebook.com"))==null||(I=I.setProtocol("https"))==null?void 0:I.toString(),n[8]=a.fbGroupId,n[9]=k}else k=n[9];var T=k,D;n[10]===Symbol.for("react.memo_cache_sentinel")?(D=s._(/*BTDS*/"See group on Facebook"),n[10]=D):D=n[10];var x=D,$;n[11]!==a.name||n[12]!==(i==null?void 0:i.view)?($=(i==null?void 0:i.view)==="welcome"?s._(/*BTDS*/"Welcome to {communityName}",[s._param("communityName",a.name)]).toString():a.name,n[11]=a.name,n[12]=i==null?void 0:i.view,n[13]=$):$=n[13];var P=$,N;n[14]===Symbol.for("react.memo_cache_sentinel")?(N={color_DEPRECATED:"primary",weight_DEPRECATED:"medium"},n[14]=N):N=n[14];var M=N,w;n[15]===Symbol.for("react.memo_cache_sentinel")?(w=(e||(e=r("stylex"))).props(_.scrollContainer,p&&o("MDSM5CoreStyles").MDSM5CoreStyles.pageSection),n[15]=w):w=n[15];var A,F;n[16]===Symbol.for("react.memo_cache_sentinel")?(A={className:"x1qjc9v5 x78zum5 xl56j7k"},F={className:"x78zum5 xdt5ytf xqtp20y x65f84u"},n[16]=A,n[17]=F):(A=n[16],F=n[17]);var O;n[18]!==a?(O=m.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:0,paddingVertical:12,children:m.jsx(h,{folder:a})}),n[18]=a,n[19]=O):O=n[19];var B;n[20]!==P?(B=m.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:20,children:m.jsx(r("MWXText.react"),{color:"primary",type:"headlineEmphasized2",children:P})}),n[20]=P,n[21]=B):B=n[21];var W;n[22]!==E?(W=m.jsx(r("MWXColumnItem.react"),{align:"center",paddingVertical:16,children:m.jsx(r("MWXText.react"),{color:"tertiary",type:"meta4",children:E})}),n[22]=E,n[23]=W):W=n[23];var q;if(n[24]!==a.description){var U;q=(U=a.description)!=null&&U.length?m.jsx(r("MWXColumnItem.react"),{align:"center",paddingHorizontal:20,paddingVertical:16,children:m.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:m.jsx(r("CometTextWithEntities.react"),{maxLength:240,maxLines:3,seeLessLinkProps:M,seeMoreLinkProps:M,text:a.description,truncationStyle:"see-more-and-less",withParagraphs:!0})})}):null,n[24]=a.description,n[25]=q}else q=n[25];var V;n[26]!==u||n[27]!==c||n[28]!==f?(V=f!=null&&c!=null&&c!=null?m.jsx(r("MWXColumnItem.react"),{paddingVertical:20,children:m.jsxs(r("MWXRow.react"),{children:[m.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:m.jsx(r("MWXIconStrict.react"),{color:"disabled",icon:c,size:20})}),m.jsx(r("MWXRowItem.react"),{expanding:!0,children:m.jsxs(r("MWXColumn.react"),{children:[m.jsx(r("MWXColumnItem.react"),{children:m.jsx(r("MWXText.react"),{align:"start",color:"primary",type:"headline3",children:f})}),m.jsx(r("MWXColumnItem.react"),{paddingTop:12,children:m.jsx(r("MWXText.react"),{align:"start",color:"secondary",type:"body3",children:u})})]})})]})}):null,n[26]=u,n[27]=c,n[28]=f,n[29]=V):V=n[29];var H;n[30]!==l||n[31]!==T?(H=l?null:m.jsx(r("MWXColumnItem.react"),{align:"center",paddingVertical:20,children:m.jsx(r("MWXLink.react"),{href:T,onClick:C,target:"_blank",children:m.jsx(r("MWXText.react"),{color:"blueLink",type:"bodyLink3",children:x})})}),n[30]=l,n[31]=T,n[32]=H):H=n[32];var G;return n[33]!==B||n[34]!==W||n[35]!==q||n[36]!==V||n[37]!==H||n[38]!==O?(G=m.jsx("div",babelHelpers.extends({},w,{children:m.jsx(r("CometScrollView.react"),{children:m.jsx("div",babelHelpers.extends({},A,{children:m.jsx("div",babelHelpers.extends({},F,{children:m.jsxs(r("MWXColumn.react"),{children:[O,B,W,q,V,H]})}))}))})})),n[33]=B,n[34]=W,n[35]=q,n[36]=V,n[37]=H,n[38]=O,n[39]=G):G=n[39],G}function C(e){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.nux","group_go_to")}function b(){var e=o("react-compiler-runtime").c(1),t;if(e[0]===Symbol.for("react.memo_cache_sentinel")){var n=s._(/*BTDS*/"No chats selected");t=m.jsx(r("FDSNullState.react"),{headline:n}),e[0]=t}else t=e[0];return t}function v(e){var t=o("react-compiler-runtime").c(13),n=e.folderId,a=e.reason,l=(u||(u=r("useReStore")))(),s;t[0]!==l.tables.community_folders||t[1]!==n?(s=function(){return o("ReQL").fromTableAscending(l.tables.community_folders).getKeyRange((d||(d=o("I64"))).of_string(n))},t[0]=l.tables.community_folders,t[1]=n,t[2]=s):s=t[2];var c;t[3]!==l||t[4]!==n?(c=[l,n],t[3]=l,t[4]=n,t[5]=c):c=t[5];var _=o("ReQLSuspense").useFirst(s,c,i.id+":337");if(!_){var f;return t[6]===Symbol.for("react.memo_cache_sentinel")?(f=m.jsx(b,{}),t[6]=f):f=t[6],f}var g;t[7]!==_?(g=o("LSCommunityBitOffset").has(57,_)||o("LSCommunityBitOffset").has(45,_),t[7]=_,t[8]=g):g=t[8];var h=g,C;return t[9]!==_||t[10]!==h||t[11]!==a?(C=h||p?m.jsx(y,{folder:_}):m.jsx(r("MWInboxDetailNullState.react"),{reason:a}),t[9]=_,t[10]=h,t[11]=a,t[12]=C):C=t[12],C}l.default=v}),226);
__d("MWInboxNullStateWithIllustration.react",["fbt","ix","MDSM5CoreStyles","MWLayoutCard.react","MWResponsiveLayoutConstants","MWXColumn.react","MWXColumnItem.react","MWXImage.react","MWXText.react","gkx","react","react-compiler-runtime","stylex","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=c||(c=o("react")),m=r("gkx")("24031"),p={outerContainer:{alignItems:"x6s0dn4",backgroundColor:"x2bj2ny",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",$$css:!0}};function _(){var t=o("react-compiler-runtime").c(7),n=r("useCurrentDisplayMode")(),a;t[0]!==n?(a=u(n==="dark"?"285542":"285544"),t[0]=n,t[1]=a):a=t[1];var i=a,l;t[2]!==i?(l=d.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:0,paddingVertical:12,children:d.jsx(r("MWXImage.react"),{src:i})}),t[2]=i,t[3]=l):l=t[3];var c;t[4]===Symbol.for("react.memo_cache_sentinel")?(c=d.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:20,children:d.jsx(r("MWXText.react"),{color:"primary",isSemanticHeading:!0,type:"headlineEmphasized2",children:s._(/*BTDS*/"No chats selected")})}),t[4]=c):c=t[4];var _;if(t[5]!==l){var f=d.jsxs(r("MWXColumn.react"),{expanding:!0,verticalAlign:"center",children:[l,c]});_=r("MWLayoutCard.react")!=null?d.jsx(r("MWLayoutCard.react"),{panel:o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL,children:f}):d.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(p.outerContainer,m&&o("MDSM5CoreStyles").MDSM5CoreStyles.pageSection),{children:f})),t[5]=l,t[6]=_}else _=t[6];return _}l.default=_}),226);
__d("MWInboxDetailInboxNullState.react",["MWAPPlusInboxNullStateWithIllustration.react","MWInboxNullStateWithIllustration.react","MWPActor.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(2);if(o("MWPActor.react").isAPPlus()){var t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(r("MWAPPlusInboxNullStateWithIllustration.react"),{}),e[0]=t):t=e[0],t}var n;return e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(r("MWInboxNullStateWithIllustration.react"),{}),e[1]=n):n=e[1],n}l.default=u}),98);
__d("MWInboxDetailNullState.react",["FBLogger","MWInboxDetailCommunityNullState.react","MWInboxDetailInboxNullState.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){var t=o("react-compiler-runtime").c(7),n=e.entityId,a=e.entityType,i=e.reason,l,c;t[0]!==i?(l=function(){r("FBLogger")("messenger_web").info("Null state rendered, reason: %s",i!=null?i:"unknown")},c=[i],t[0]=i,t[1]=l,t[2]=c):(l=t[1],c=t[2]),u(l,c);var d;return t[3]!==n||t[4]!==a||t[5]!==i?(d=a==="community_folder"&&n!=null?s.jsx(r("MWInboxDetailCommunityNullState.react"),{folderId:n,reason:i}):s.jsx(r("MWInboxDetailInboxNullState.react"),{}),t[3]=n,t[4]=a,t[5]=i,t[6]=d):d=t[6],d}l.default=c}),98);
__d("MWCMInboxDetailUnjoinedState.react",["GroupsCometJoinChatDialog.entrypoint","I64","Int64Hooks","MWInboxDetailNullState.react","mwCMisStandAloneCommunity","react","useCometDynamicEntryPointDialog","useCommunityFolder"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react"));function c(e){var t=e.reason,n=e.thread,a=e.wasPreviouslyJoined,i=r("useCometDynamicEntryPointDialog")(r("GroupsCometJoinChatDialog.entrypoint")),l=r("useCommunityFolder")(n),c=l||{},d=c.communityType,m=c.fbGroupId,p=n.threadKey,_=r("mwCMisStandAloneCommunity")(d);return o("Int64Hooks").useEffectInt64(function(){!a&&!_&&m!=null&&i({groupID:(s||(s=o("I64"))).to_string(m),threadID:s.to_string(p)},{qplInstanceKey:0,refetchGroupMallAfterMutation:!1,surface:"thread_view"})},[p,m]),u.jsx(r("MWInboxDetailNullState.react"),{entityType:"community",reason:t})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWCMInboxInfoGroupCopyLinkButton.react",["fbt","CurrentEnvironment","LSThreadBitOffset","MWCMChannelLinkShareTrigger.react","MWCMShortLinkShare.react","MWInboxInfoButton.react","MWPBumpEntityKey","MWXIconForListCell.react","MWXIconMenuItemLink","mwCMisStandAloneCommunity","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Copy link"),d=s._(/*BTDS*/"Invite community members to join this chat");function m(e){var t=o("react-compiler-runtime").c(4),n=e.folder,a=e.thread,i=o("LSThreadBitOffset").has(124,a),l=r("CurrentEnvironment").facebookdotcom;if(i&&l&&!r("mwCMisStandAloneCommunity")(n==null?void 0:n.communityType)){var s;return t[0]!==a.threadKey?(s=u.jsx(r("MWCMChannelLinkShareTrigger.react"),{threadKey:a.threadKey,children:_}),t[0]=a.threadKey,t[1]=s):s=t[1],s}var c;return t[2]!==a?(c=u.jsx(r("MWCMShortLinkShare.react"),{thread:a,children:p}),t[2]=a,t[3]=c):c=t[3],c}function p(e,t){return u.jsx(r("MWInboxInfoButton.react"),{addOnStart:u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMenuItemLink")}),label:c,onPress:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","copy_link"),t()},subLabel:d})}p.displayName=p.name+" [from "+i.id+"]";function _(e){return u.jsx(r("MWInboxInfoButton.react"),{addOnStart:u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMenuItemLink")}),label:c,onPress:e,subLabel:d})}_.displayName=_.name+" [from "+i.id+"]",l.default=m}),226);
__d("MWCMInboxInfoGroupEventsButton.react",["fbt","GroupsCometChatsEngagementLogger","I64","MWInboxInfoButton.react","MWXIconCalendar","MWXIconForListCell.react","ReQL","ReQLSuspense","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=u||(u=o("react")),m=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInboxInfoEventsListSection.react").__setRef("MWCMInboxInfoGroupEventsButton.react"));function p(e,t){return function(){o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{entry_point:"inbox"},event:"render_event_list",parent_surface:"thread_view",source:"event_button",surface:"thread_settings",thread_id:(c||(c=o("I64"))).to_string(t)}),e(function(e){var n=e.onReturn;return d.jsx(m,{loggingParentSurface:"thread_settings",loggingSource:"event_button",onReturn:n,threadKey:t})})}}function _(t){var n=o("react-compiler-runtime").c(20),a=t.pushPage,l=t.threadKey,u=(e||(e=r("useReStore")))(),c;n[0]===Symbol.for("react.memo_cache_sentinel")?(c=s._(/*BTDS*/"Events"),n[0]=c):c=n[0];var m=c,_;n[1]!==u.tables.cm_channel_events||n[2]!==u.tables.fb_events||n[3]!==l?(_=function(){return o("ReQL").fromTableAscending(u.tables.cm_channel_events.index("eventsInThread")).getKeyRange(l).map(function(e){return o("ReQLSuspense").first(o("ReQL").fromTableAscending(u.tables.fb_events).getKeyRange(e.eventId),i.id+":75")})},n[1]=u.tables.cm_channel_events,n[2]=u.tables.fb_events,n[3]=l,n[4]=_):_=n[4];var g;n[5]!==u||n[6]!==l?(g=[u,l],n[5]=u,n[6]=l,n[7]=g):g=n[7];var h=o("ReQLSuspense").useArray(_,g,i.id+":70"),y;n[8]!==h?(y=h.filter(f),n[8]=h,n[9]=y):y=n[9];var C=y.length,b;n[10]!==a||n[11]!==l?(b=p(a,l),n[10]=a,n[11]=l,n[12]=b):b=n[12];var v=b,S=C!=null&&C>0,R;n[13]!==S||n[14]!==C?(R=S?s._(/*BTDS*/"_j{\"*\":\"{Number of upcoming events} upcoming events\",\"_1\":\"{Number of upcoming events} upcoming event\"}",[s._plural(C),s._param("Number of upcoming events",C)]):void 0,n[13]=S,n[14]=C,n[15]=R):R=n[15];var L=R,E;return n[16]!==L||n[17]!==h.length||n[18]!==v?(E=h.length>0?d.jsx(r("MWInboxInfoButton.react"),{addOnStart:d.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconCalendar")}),label:m,onPress:v,subLabel:L}):null,n[16]=L,n[17]=h.length,n[18]=v,n[19]=E):E=n[19],E}function f(e){return(e==null?void 0:e.startTimeMs)!=null?(c||(c=o("I64"))).to_float(e.startTimeMs)>Date.now():!1}l.default=_}),226);
__d("MWXIconMenuItemAppGroups",["MWXSvgIcon","SVGIcon","cr:22539","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgMenuItemIcon(o("SVGIcon").svgIcon(n("cr:22539")),r("gkx")("23219"));l.default=e}),98);
__d("MWCMInboxInfoGroupLink.react",["fbt","CurrentEnvironment","I64","MWInboxInfoButton.react","MWXIconForListCell.react","MWXIconMenuItemAppGroups","XCometGroupLandingControllerRouteBuilder","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(10),n=e.folder,a=n.fbGroupId,i=n.name,l;t[0]!==a?(l=r("XCometGroupLandingControllerRouteBuilder").buildURL({group_id:(u||(u=o("I64"))).to_string(a)}),t[0]=a,t[1]=l):l=t[1];var d="https://www.facebook.com"+l,m=r("CurrentEnvironment").messengerdotcom?"_blank":"_self",p;t[2]===Symbol.for("react.memo_cache_sentinel")?(p=c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMenuItemAppGroups")}),t[2]=p):p=t[2];var _;t[3]!==i?(_=s._(/*BTDS*/"Go to {facebook group name}",[s._param("facebook group name",i)]),t[3]=i,t[4]=_):_=t[4];var f;t[5]!==d?(f={target:m,url:d},t[5]=d,t[6]=f):f=t[6];var g;return t[7]!==_||t[8]!==f?(g=c.jsx(r("MWInboxInfoButton.react"),{addOnStart:p,label:_,linkProps:f}),t[7]=_,t[8]=f,t[9]=g):g=t[9],g}l.default=d}),226);
__d("MWXIconReport",["MWXSvgIcon","SVGIcon","cr:22461","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22461")),r("gkx")("23219"));l.default=e}),98);
__d("MWCMInboxInfoGroupReportAdminButton.react",["fbt","MWInboxInfoButton.react","MWPBumpEntityKey","MWXIconForListCell.react","MWXIconReport","react","react-compiler-runtime","useMWCMGetReportCommunityDialogTriggerHook"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Report to admin");function d(e){var t=o("react-compiler-runtime").c(3),n=e.thread,a=r("useMWCMGetReportCommunityDialogTriggerHook")(n.threadKey),i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconReport")}),t[0]=i):i=t[0];var l;return t[1]!==a?(l=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:i,label:c,onPress:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","privacy_support_section_report_to_admin"),a()}}),t[1]=a,t[2]=l):l=t[2],l}l.default=d}),226);
__d("MWCMInboxInfoMemberApprovalsSwitch.react",["fbt","GroupsCometChatsEngagementLogger","I64","Int64Hooks","MWCMRequestToJoinUtils","MWXListCell.react","MWXSwitch.react","MWXText.react","MWXTextPairing.react","react","react-compiler-runtime","useGroupsCometChatsEngagementImpressionLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useId,p=d.useState,_=s._(/*BTDS*/"Members can approve");function f(e){return(u||(u=o("I64"))).to_int32(e!=null?e:(u||(u=o("I64"))).minus_one)===1}function g(e){var t=o("react-compiler-runtime").c(23),n=e.thread,a=n.joinRequestApprovalSetting,i=n.needsAdminApprovalForNewParticipant,l=n.threadKey,s=m(),d;t[0]!==a?(d=f(a),t[0]=a,t[1]=d):d=t[1];var g=p(d),h=g[0],y=g[1],C=o("MWCMRequestToJoinUtils").useSetCanMembersApproveJoinRequests(l),b,v;t[2]!==h||t[3]!==i||t[4]!==C||t[5]!==l?(b=function(){o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{member_join_request_enabled:i===!0?"1":"0"},event:h?"members_can_approve_disabled":"members_can_approve_enabled",parent_surface:"thread_details",source:"members_can_approve",surface:"thread_member_requests_page",thread_id:(u||(u=o("I64"))).to_string(l)}),C(!h),y(!h)},v=[h,i,C,l],t[2]=h,t[3]=i,t[4]=C,t[5]=l,t[6]=b,t[7]=v):(b=t[6],v=t[7]);var S=o("Int64Hooks").useCallbackInt64(b,v),R=i===!0?"1":"0",L;t[8]!==R?(L={member_join_request_enabled:R,members_can_approve_toggle:"1"},t[8]=R,t[9]=L):L=t[9];var E;t[10]!==l?(E=(u||(u=o("I64"))).to_string(l),t[10]=l,t[11]=E):E=t[11];var k;t[12]!==L||t[13]!==E?(k={client_extras:L,event:"members_can_approve_toggle_rendered",parent_surface:"thread_detail",source:"members_can_approve",surface:"thread_member_requests_page",thread_id:E},t[12]=L,t[13]=E,t[14]=k):k=t[14];var I=r("useGroupsCometChatsEngagementImpressionLogger")(k),T;t[15]!==h||t[16]!==s||t[17]!==S?(T=c.jsx(r("MWXSwitch.react"),{"aria-describedby":s,"aria-label":_,onValueChange:S,size:"small",value:h}),t[15]=h,t[16]=s,t[17]=S,t[18]=T):T=t[18];var D;t[19]===Symbol.for("react.memo_cache_sentinel")?(D=c.jsx(r("MWXTextPairing.react"),{headline:c.jsx(r("MWXText.react"),{type:"headline4",children:_}),level:4}),t[19]=D):D=t[19];var x;return t[20]!==I||t[21]!==T?(x=c.jsx(r("MWXListCell.react"),{addOnEnd:T,addOnEndVerticalAlign:"top",content:D,ref:I}),t[20]=I,t[21]=T,t[22]=x):x=t[22],x}l.default=g}),226);
__d("MWCMInboxInfoMemberList.react",["fbt","I64","LSIntEnum","LSMessagingThreadTypeUtil","MWGroupMembershipListItemWrapper","MWLSGroupMembershipDialog.entrypoint","MWLSGroupMembershipMemberList.react","MWMemberListGlimmer.react","MWPBumpEntityKey","MWParticipantsForBroadcastChannelUtils","MWXIconForListCell.react","MWXIconGroup","MWXListCellPressable.react","MWXText.react","ReQL","ReQLSuspense","pageID","promiseDone","react","react-compiler-runtime","useCommunityMembers","useMWXEntryPointDialog","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=u||(u=o("react")),p=u.useEffect,_="inbox_info_member_list_"+r("pageID"),f="member_list_profile_sheet_source_"+r("pageID"),g=(d||(d=o("I64"))).of_int32(7);function h(t){var n=o("react-compiler-runtime").c(56),a=t.folder,l=t.thread,u=(e||(e=r("useReStore")))(),c=a==null?l.threadKey:a.folderId,h;n[0]!==c||n[1]!==l?(h={communityIdOrThreadKey:c,requestId:_,source:g,thread:l},n[0]=c,n[1]=l,n[2]=h):h=n[2],o("useCommunityMembers").useFetchCommunityMembers(h);var v;n[3]!==c||n[4]!==u.tables.community_members?(v=function(){return o("ReQL").fromTableAscending(u.tables.community_members.index("communitySource")).getKeyRange(c,g,_).take(15)},n[3]=c,n[4]=u.tables.community_members,n[5]=v):v=n[5];var S;n[6]!==c||n[7]!==u?(S=[u,c],n[6]=c,n[7]=u,n[8]=S):S=n[8];var R=o("ReQLSuspense").useArray(v,S,i.id+":92");o("MWParticipantsForBroadcastChannelUtils").useFetchBroadcastChannelMembers(l,0);var L;n[9]!==u.tables.discoverable_chat_participants||n[10]!==l.threadKey?(L=function(){return o("ReQL").fromTableAscending(u.tables.discoverable_chat_participants).getKeyRange(l.threadKey).filter(b).take(15)},n[9]=u.tables.discoverable_chat_participants,n[10]=l.threadKey,n[11]=L):L=n[11];var E;n[12]!==u||n[13]!==l.threadKey?(E=[u,l.threadKey],n[12]=u,n[13]=l.threadKey,n[14]=E):E=n[14];var k=o("ReQLSuspense").useArray(L,E,i.id+":104"),I=o("useCommunityMembers").useClearMemberList(),T=o("useCommunityMembers").useClearMemberList(14),D=o("MWParticipantsForBroadcastChannelUtils").useClearBroadcastChannelParticipantsList(),x;n[15]!==l.threadKey?(x=(d||(d=o("I64"))).to_string(l.threadKey),n[15]=l.threadKey,n[16]=x):x=n[16];var $=x,P;n[17]!==l.threadType?(P=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(l.threadType),n[17]=l.threadType,n[18]=P):P=n[18];var N=P,M;n[19]!==k||n[20]!==R||n[21]!==N?(M=N?k.map(C):R.map(y),n[19]=k,n[20]=R,n[21]=N,n[22]=M):M=n[22];var w=M,A;n[23]!==D||n[24]!==I||n[25]!==T?(A=function(){return r("promiseDone")(I(_)),r("promiseDone")(T(f)),r("promiseDone")(D()),(function(){r("promiseDone")(I(_)),r("promiseDone")(T(f)),r("promiseDone")(D())})},n[23]=D,n[24]=I,n[25]=T,n[26]=A):A=n[26];var F;n[27]!==D||n[28]!==I||n[29]!==T||n[30]!==$?(F=[$,I,D,T],n[27]=D,n[28]=I,n[29]=T,n[30]=$,n[31]=F):F=n[31],p(A,F);var O,B;n[32]!==R.length?(O=function(){R.length>0&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.cm.member_list","community_members_loaded")},B=[R.length],n[32]=R.length,n[33]=O,n[34]=B):(O=n[33],B=n[34]),p(O,B);var W;n[35]!==a?(W={folder:a},n[35]=a,n[36]=W):W=n[36];var q=W,U;if(n[37]!==(a==null?void 0:a.fbGroupId)){var V;U=(d||(d=o("I64"))).to_string((V=a==null?void 0:a.fbGroupId)!=null?V:(d||(d=o("I64"))).zero),n[37]=a==null?void 0:a.fbGroupId,n[38]=U}else U=n[38];var H;n[39]!==U?(H={groupID:U},n[39]=U,n[40]=H):H=n[40];var G=r("useMWXEntryPointDialog")(r("MWLSGroupMembershipDialog.entrypoint"),H),z=G[0],j;n[41]!==q||n[42]!==z?(j=function(){return z(q)},n[41]=q,n[42]=z,n[43]=j):j=n[43];var K=j;if(w.length===0){var Q;return n[44]===Symbol.for("react.memo_cache_sentinel")?(Q=m.jsx(r("MWMemberListGlimmer.react"),{}),n[44]=Q):Q=n[44],Q}var X;n[45]!==a||n[46]!==w||n[47]!==l?(X=m.jsx(r("MWLSGroupMembershipMemberList.react"),{disableScroll:!0,doSortParticipants:!1,folder:a,participantsAndContacts:w,showAdmodIndicator:!0,showAdmodsOnly:!1,showHostsOnly:!1,showInvitedByViewerOnly:!1,thread:l}),n[45]=a,n[46]=w,n[47]=l,n[48]=X):X=n[48];var Y;n[49]===Symbol.for("react.memo_cache_sentinel")?(Y=m.jsx("div",{className:"x6s0dn4 xljulmy x1c9tyrk xeusxvb x1pahc9y x1ertn4p x78zum5 xc9qbxq xl56j7k x14qfxbe",children:m.jsx(r("MWXIconForListCell.react"),{hasBackground:!1,icon:r("MWXIconGroup"),size:"medium"})}),n[49]=Y):Y=n[49];var J;n[50]===Symbol.for("react.memo_cache_sentinel")?(J=m.jsx(r("MWXText.react"),{type:"headline4",children:s._(/*BTDS*/"See all")}),n[50]=J):J=n[50];var Z;n[51]!==K?(Z=m.jsx(r("MWXListCellPressable.react"),{addOnStart:Y,content:J,onPress:function(t){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.cm.member_list","see_all"),K()},size:"medium"}),n[51]=K,n[52]=Z):Z=n[52];var ee;return n[53]!==X||n[54]!==Z?(ee=m.jsxs(m.Fragment,{children:[X,Z]}),n[53]=X,n[54]=Z,n[55]=ee):ee=n[55],ee}function y(e){return o("MWGroupMembershipListItemWrapper").tToRE({tag:"CommunityMember",value:e})}function C(e){return o("MWGroupMembershipListItemWrapper").tToRE({tag:"BroadcastChannelParticipant",value:e})}function b(e){return(d||(d=o("I64"))).equal(e.source,(c||(c=o("LSIntEnum"))).ofNumber(0))}l.default=h}),226);
__d("MWInboxInfoPendingRequest.react",["fbt","$InternalEnum","BaseMiddot.react","BaseRow.react","BaseRowItem.react","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSAcceptSinglePendingMemberRequestStoredProcedure","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSFetchAdditionalThreadDataStoredProcedure","LSFetchBannersStoredProcedure","LSIntEnum","LSOptimisticRespondToAdminApprovalRequestStoredProcedure","LSPlatformWaitForTaskCompletion","LSRejectSinglePendingMemberRequestStoredProcedure","LSVec","LSVerifyContactRowExistsStoredProcedure","MWCMThreadTypes.react","MWChatTextTransform","MWLSContactTypeExactUtils","MWLSThread","MWXCircleButton.react","MWXIconCheckmark","MWXIconCross","MWXListCell.react","MWXMessageTextWithEntities.react","MWXProfilePhoto.react","MWXText.react","MWXTextPairing.react","MWXTooltip.react","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","promiseDone","react","react-compiler-runtime","useMWXPushErrorToast","useMWXPushToast","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=n("$InternalEnum").Mirrored(["Approve","Ignore"]);function _(t){var n=o("react-compiler-runtime").c(61),a=t.communityId,l=t.contact,c=t.isCMThread,d=t.response,_=t.threadKey,f=(e||(e=r("useReStore")))(),g=l.firstName!=null?l.firstName:l.name,h=r("useMWXPushToast")(),y=r("useMWXPushErrorToast")(),C;n[0]!==g?(C=s._(/*BTDS*/"You denied {firstName}'s request.",[s._param("firstName",g)]),n[0]=g,n[1]=C):C=n[1];var b=C,v;n[2]!==g?(v=s._(/*BTDS*/"You approved {firstName}'s request.",[s._param("firstName",g)]),n[2]=g,n[3]=v):v=n[3];var S=v,R;n[4]===Symbol.for("react.memo_cache_sentinel")?(R=s._(/*BTDS*/"Something went wrong when sending your response. Please try again later."),n[4]=R):R=n[4];var L=R,E,k;n[5]!==f||n[6]!==_?(E=function(){r("promiseDone")(f.runInTransaction(function(e){return r("LSFetchAdditionalThreadDataStoredProcedure")(r("LSFactory")(e),{threadKey:_})},"readwrite",void 0,void 0,i.id+":107"),function(){r("promiseDone")(f.runInTransaction(function(e){return r("LSFetchBannersStoredProcedure")(r("LSFactory")(e),{threadKey:_})},"readwrite",void 0,void 0,i.id+":114"))})},k=[f,_],n[5]=f,n[6]=_,n[7]=E,n[8]=k):(E=n[7],k=n[8]);var I=o("Int64Hooks").useCallbackInt64(E,k),T,D;n[9]!==S||n[10]!==a||n[11]!==l.id||n[12]!==f||n[13]!==y||n[14]!==h||n[15]!==I||n[16]!==_?(T=function(){a!=null&&(o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{member_join_request_enabled:"1"},event:"approve_member_join_request",source:"approve_button",surface:"thread_member_requests_page",thread_id:(u||(u=o("I64"))).to_string(_)}),r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(f,function(e){return r("LSAcceptSinglePendingMemberRequestStoredProcedure")(r("LSFactory")(e),{groupId:a,targetUserId:l.id,threadId:_})},"readwrite"),function(){I(),h({body:S})},function(){y({title:L})}))},D=[a,f,l.id,_,I,h,S,y,L],n[9]=S,n[10]=a,n[11]=l.id,n[12]=f,n[13]=y,n[14]=h,n[15]=I,n[16]=_,n[17]=T,n[18]=D):(T=n[17],D=n[18]);var x=o("Int64Hooks").useCallbackInt64(T,D),$,P;n[19]!==a||n[20]!==l.id||n[21]!==f||n[22]!==b||n[23]!==y||n[24]!==h||n[25]!==I||n[26]!==_?($=function(){a!=null&&(o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{member_join_request_enabled:"1"},event:"decline_member_join_request",source:"decline_button",surface:"thread_member_requests_page",thread_id:(u||(u=o("I64"))).to_string(_)}),r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(f,function(e){return r("LSRejectSinglePendingMemberRequestStoredProcedure")(r("LSFactory")(e),{groupId:a,targetUserId:l.id,threadId:_})},"readwrite"),function(){I(),h({body:b})},function(){y({title:L})}))},P=[a,f,l.id,_,I,h,b,y,L],n[19]=a,n[20]=l.id,n[21]=f,n[22]=b,n[23]=y,n[24]=h,n[25]=I,n[26]=_,n[27]=$,n[28]=P):($=n[27],P=n[28]);var N=o("Int64Hooks").useCallbackInt64($,P),M,w;n[29]!==S||n[30]!==l.id||n[31]!==f||n[32]!==b||n[33]!==h||n[34]!==_?(M=function(t){r("promiseDone")(f.runInTransaction(function(e){return r("LSOptimisticRespondToAdminApprovalRequestStoredProcedure")(r("LSFactory")(e),{accepted:t===p.Approve,contactIds:r("LSVec").ofArray([l.id]),threadKey:_})},"readwrite",void 0,void 0,i.id+":229"),function(){h({body:t===p.Approve?S:b})})},w=[f,l.id,_,h,S,b],n[29]=S,n[30]=l.id,n[31]=f,n[32]=b,n[33]=h,n[34]=_,n[35]=M,n[36]=w):(M=n[35],w=n[36]);var A=o("Int64Hooks").useCallbackInt64(M,w),F;n[37]!==g?(F=s._(/*BTDS*/"Ignore {name of person}'s request",[s._param("name of person",g)]),n[37]=g,n[38]=F):F=n[38];var O=F,B;n[39]!==g?(B=s._(/*BTDS*/"Approve {name of person}'s request",[s._param("name of person",g)]),n[39]=g,n[40]=B):B=n[40];var W=B;if(d===p.Approve){var q;n[41]!==x||n[42]!==c||n[43]!==A?(q=function(){c?x():A(p.Approve)},n[41]=x,n[42]=c,n[43]=A,n[44]=q):q=n[44];var U;n[45]!==W||n[46]!==q?(U=m.jsx(r("MWXCircleButton.react"),{"aria-label":W,icon:r("MWXIconCheckmark"),onPress:q,size:32,testid:void 0}),n[45]=W,n[46]=q,n[47]=U):U=n[47];var V;return n[48]!==W||n[49]!==U?(V=m.jsx(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:W,children:U}),n[48]=W,n[49]=U,n[50]=V):V=n[50],V}else{var H;n[51]!==c||n[52]!==N||n[53]!==A?(H=function(){c?N():A(p.Ignore)},n[51]=c,n[52]=N,n[53]=A,n[54]=H):H=n[54];var G;n[55]!==O||n[56]!==H?(G=m.jsx(r("MWXCircleButton.react"),{"aria-label":O,icon:r("MWXIconCross"),onPress:H,size:32}),n[55]=O,n[56]=H,n[57]=G):G=n[57];var z;return n[58]!==O||n[59]!==G?(z=m.jsx(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:O,children:G}),n[58]=O,n[59]=G,n[60]=z):z=n[60],z}}var f={item:{paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",$$css:!0}};function g(t){var n,a=o("react-compiler-runtime").c(48),l=t.memberApprovalRequest,s=t.threadKey,u=(e||(e=r("useReStore")))(),d;a[0]!==u.tables.contacts||a[1]!==l.contactId?(d=function(){return o("ReQL").fromTableAscending(u.tables.contacts).getKeyRange(l.contactId)},a[0]=u.tables.contacts,a[1]=l.contactId,a[2]=d):d=a[2];var g;a[3]!==u||a[4]!==l.contactId?(g=[u,l.contactId],a[3]=u,a[4]=l.contactId,a[5]=g):g=a[5];var y=o("ReQLSuspense").useFirst(d,g,i.id+":313"),C=l.contactId,b=(n=o("MWLSThread").useThread(s,h))!=null?n:[void 0,void 0],v=b[0],S=b[1],R;a[6]!==v?(R=v!=null?o("MWCMThreadTypes.react").isJoinedCMThread(v):!1,a[6]=v,a[7]=R):R=a[7];var L=R,E,k;if(a[8]!==C||a[9]!==u?(E=function(){r("promiseDone")(u.runInTransaction(function(e){return r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(e),{authorityLevel:(c||(c=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:c.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:c.ofNumber(r("LSContactIdType").FBID),contactType:c.ofNumber(r("LSContactType").USER),contactViewerRelationship:c.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:c.ofNumber(r("LSContactGender").UNKNOWN),id:C,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:c.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)})},"readwrite",void 0,void 0,i.id+":328"))},k=[u,C],a[8]=C,a[9]=u,a[10]=E,a[11]=k):(E=a[10],k=a[11]),o("Int64Hooks").useEffectInt64(E,k),y==null)return null;var I=y.contactTypeExact,T=y.secondaryName,D;a[12]!==I||a[13]!==T?(D=T!=null&&o("MWLSContactTypeExactUtils").isIgContact(I)?T:null,a[12]=I,a[13]=T,a[14]=D):D=a[14];var x=D,$=L?S:void 0,P;a[15]!==L||a[16]!==y||a[17]!==$||a[18]!==s?(P=m.jsx(r("BaseRowItem.react"),{xstyle:f.item,children:m.jsx(_,{communityId:$,contact:y,isCMThread:L,response:p.Ignore,threadKey:s})}),a[15]=L,a[16]=y,a[17]=$,a[18]=s,a[19]=P):P=a[19];var N=L?S:void 0,M;a[20]!==L||a[21]!==y||a[22]!==N||a[23]!==s?(M=m.jsx(r("BaseRowItem.react"),{xstyle:f.item,children:m.jsx(_,{communityId:N,contact:y,isCMThread:L,response:p.Approve,threadKey:s})}),a[20]=L,a[21]=y,a[22]=N,a[23]=s,a[24]=M):M=a[24];var w;a[25]!==M||a[26]!==P?(w=m.jsxs(r("BaseRow.react"),{children:[P,M]}),a[25]=M,a[26]=P,a[27]=w):w=a[27];var A=y.name,F;a[28]!==y?(F=r("getLSMediaContactProfilePictureUrl")(y),a[28]=y,a[29]=F):F=a[29];var O;a[30]!==F?(O={uri:F},a[30]=F,a[31]=O):O=a[31];var B;a[32]!==y.name||a[33]!==O?(B=m.jsx(r("MWXProfilePhoto.react"),{alt:A,shape:"circle",size:36,source:O}),a[32]=y.name,a[33]=O,a[34]=B):B=a[34];var W;if(a[35]!==l.subscribeSource||a[36]!==x){var q;W=x!=null||l.subscribeSource!=null&&l.subscribeSource!==""?m.jsxs(r("MWXText.react"),{color:"secondary",type:"body4",children:[m.jsx(m.Fragment,{children:x}),x!==null&&l.subscribeSource!==""?m.jsx(r("BaseMiddot.react"),{}):null,m.jsx(r("MWXMessageTextWithEntities.react"),{text:(q=l.subscribeSource)!=null?q:"",transforms:[o("MWChatTextTransform").emoticonTransform,o("MWChatTextTransform").emojiTransform]})]}):null,a[35]=l.subscribeSource,a[36]=x,a[37]=W}else W=a[37];var U;a[38]===Symbol.for("react.memo_cache_sentinel")?(U=[o("MWChatTextTransform").emoticonTransform,o("MWChatTextTransform").emojiTransform],a[38]=U):U=a[38];var V;a[39]!==y.name?(V=m.jsx(r("MWXText.react"),{type:"headlineEmphasized5",children:m.jsx(r("MWXMessageTextWithEntities.react"),{text:y.name,transforms:U})}),a[39]=y.name,a[40]=V):V=a[40];var H;a[41]!==W||a[42]!==V?(H=m.jsx(r("MWXTextPairing.react"),{body:W,headline:V,level:4}),a[41]=W,a[42]=V,a[43]=H):H=a[43];var G;return a[44]!==w||a[45]!==B||a[46]!==H?(G=m.jsx(r("MWXListCell.react"),{addOnEnd:w,addOnStart:B,content:H,size:"medium"}),a[44]=w,a[45]=B,a[46]=H,a[47]=G):G=a[47],G}function h(e){return[e.threadType,e.parentThreadKey]}l.default=g}),226);
__d("MWCMMemberRequestsList.react",["CometInfiniteScrollTrigger.react","I64","LSFactory","LSIntEnum","LSIssueCommunityMemberListFetchStoredProcedure","LSVec","MWInboxInfoPendingRequest.react","MWMemberListGlimmer.react","ReQL","ReQLSuspense","pageID","promiseDone","react","react-compiler-runtime","useCommunityFolder","useCommunityMembers","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useEffect,f="member_requests_list:"+r("pageID");function g(t){var n,a,l=o("react-compiler-runtime").c(36),c=t.folder,m=t.thread,p=(e||(e=r("useReStore")))(),g;l[0]!==m.threadKey?(g=(s||(s=o("I64"))).to_string(m.threadKey),l[0]=m.threadKey,l[1]=g):g=l[1];var h=f+":"+g,y;l[2]===Symbol.for("react.memo_cache_sentinel")?(y=(s||(s=o("I64"))).of_int32(25),l[2]=y):y=l[2];var C=y,b=o("useCommunityMembers").useCommunityMembersRanges(m.parentThreadKey,h,!1),v=o("useCommunityMembers").useClearMemberList(25),S,R;l[3]!==v||l[4]!==h?(S=function(){return(function(){r("promiseDone")(v(h))})},R=[v,h],l[3]=v,l[4]=h,l[5]=S,l[6]=R):(S=l[5],R=l[6]),_(S,R);var L;l[7]!==p||l[8]!==c.folderId||l[9]!==(b==null?void 0:b.nextPageCursor)||l[10]!==h||l[11]!==m.threadKey?(L=function(){r("promiseDone")(p.runInTransaction(function(e){return r("LSIssueCommunityMemberListFetchStoredProcedure")(r("LSFactory")(e),{communityId:c.folderId,fetchAdminsOnly:!1,fetchFriendMembersOnly:!1,maxName:"",maxTimestampMs:(s||(s=o("I64"))).zero,nextPageCursor:b==null?void 0:b.nextPageCursor,requestId:h,roles:r("LSVec").ofArray([(u||(u=o("LSIntEnum"))).ofNumber(0)]),source:C,threadKey:m.threadKey,threadRoles:r("LSVec").ofArray([])})},"readwrite",void 0,void 0,i.id+":76"))},l[7]=p,l[8]=c.folderId,l[9]=b==null?void 0:b.nextPageCursor,l[10]=h,l[11]=m.threadKey,l[12]=L):L=l[12];var E=L,k;l[13]!==p.tables.community_members||l[14]!==c.folderId||l[15]!==h?(k=function(){return o("ReQL").fromTableAscending(p.tables.community_members.index("communitySource")).getKeyRange(c.folderId,C,h)},l[13]=p.tables.community_members,l[14]=c.folderId,l[15]=h,l[16]=k):k=l[16];var I;l[17]!==p||l[18]!==c.folderId||l[19]!==h?(I=[p,c.folderId,C,h],l[17]=p,l[18]=c.folderId,l[19]=h,l[20]=I):I=l[20];var T=o("ReQLSuspense").useArray(k,I,i.id+":94"),D;l[21]!==m.threadKey?(D=function(t){return d.jsx(r("MWInboxInfoPendingRequest.react"),{memberApprovalRequest:t,threadKey:m.threadKey},(s||(s=o("I64"))).to_string(t.contactId))},l[21]=m.threadKey,l[22]=D):D=l[22];var x=D,$;if(l[23]!==T||l[24]!==x){var P;l[26]!==x?(P=function(t){return x(t)},l[26]=x,l[27]=P):P=l[27],$=T.map(P),l[23]=T,l[24]=x,l[25]=$}else $=l[25];var N=(n=b==null?void 0:b.hasMoreAfter)!=null?n:!0,M=(a=b==null?void 0:b.isLoadingAfter)!=null?a:!1,w;l[28]===Symbol.for("react.memo_cache_sentinel")?(w=d.jsx(r("MWMemberListGlimmer.react"),{}),l[28]=w):w=l[28];var A;l[29]!==E||l[30]!==N||l[31]!==M?(A=d.jsx(r("CometInfiniteScrollTrigger.react"),{hasMore:N,isLoading:M,onLoadMore:E,children:w}),l[29]=E,l[30]=N,l[31]=M,l[32]=A):A=l[32];var F;return l[33]!==A||l[34]!==$?(F=d.jsxs(d.Fragment,{children:[$,A]}),l[33]=A,l[34]=$,l[35]=F):F=l[35],F}function h(e){var t=o("react-compiler-runtime").c(3),n=e.thread,a=r("useCommunityFolder")(n);if(a!=null){var i;return t[0]!==a||t[1]!==n?(i=d.jsx(g,{folder:a,thread:n}),t[0]=a,t[1]=n,t[2]=i):i=t[2],i}else return null}l.default=h}),98);
__d("MWCMRequestToJoinChatsRequireApprovalSwitch.react",["fbt","GroupsCometChatsEngagementLogger","I64","Int64Hooks","MWCMRequestToJoinUtils","MWXListCell.react","MWXSwitch.react","MWXText.react","MWXTextPairing.react","react","react-compiler-runtime","useGroupsCometChatsEngagementImpressionLogger","useMWXConfirmationDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e,m=d.useId,p=d.useState,_=s._(/*BTDS*/"Any pending requests to join this chat will be approved."),f=s._(/*BTDS*/"Turn off approvals to join?"),g=s._(/*BTDS*/"Require approval to join");function h(e){var t=o("react-compiler-runtime").c(28),n=e.thread,a=n.needsAdminApprovalForNewParticipant,i=n.threadKey,l=a===void 0?!1:a,s=m(),d=r("useMWXConfirmationDialog")(),h=p(l),y=h[0],C=h[1],b=o("MWCMRequestToJoinUtils").useSetNeedsAdminApprovalForNewParticipant(i),v=o("MWCMRequestToJoinUtils").useSetCanMembersApproveJoinRequests(i),S,R;t[0]!==v||t[1]!==b||t[2]!==i?(S=function(t){o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{member_join_request_enabled:t===!0?"1":"0"},event:t?"members_join_request_enabled":"members_join_request_disabled",parent_surface:"thread_details",source:"members_join_request",surface:"thread_member_requests_page",thread_id:(u||(u=o("I64"))).to_string(i)}),C(t),b(t),t||v(!1)},R=[v,b,i],t[0]=v,t[1]=b,t[2]=i,t[3]=S,t[4]=R):(S=t[3],R=t[4]);var L=o("Int64Hooks").useCallbackInt64(S,R),E,k;t[5]!==L||t[6]!==d?(E=function(t){return d({body:_,title:f},function(){L(t)})},k=[L,d],t[5]=L,t[6]=d,t[7]=E,t[8]=k):(E=t[7],k=t[8]);var I=o("Int64Hooks").useCallbackInt64(E,k),T=l===!0?"1":"0",D;t[9]!==T?(D={member_join_request_enabled:T,rtj_toggle:"1"},t[9]=T,t[10]=D):D=t[10];var x;t[11]!==i?(x=(u||(u=o("I64"))).to_string(i),t[11]=i,t[12]=x):x=t[12];var $;t[13]!==D||t[14]!==x?($={client_extras:D,event:"members_join_request_toggle_rendered",parent_surface:"thread_detail",source:"members_join_request",surface:"thread_member_requests_page",thread_id:x},t[13]=D,t[14]=x,t[15]=$):$=t[15];var P=r("useGroupsCometChatsEngagementImpressionLogger")($),N;t[16]!==L||t[17]!==l||t[18]!==I?(N=function(){return l?I(!l):L(!l)},t[16]=L,t[17]=l,t[18]=I,t[19]=N):N=t[19];var M;t[20]!==y||t[21]!==s||t[22]!==N?(M=c.jsx(r("MWXSwitch.react"),{"aria-describedby":s,"aria-label":g,onValueChange:N,size:"small",value:y}),t[20]=y,t[21]=s,t[22]=N,t[23]=M):M=t[23];var w;t[24]===Symbol.for("react.memo_cache_sentinel")?(w=c.jsx(r("MWXTextPairing.react"),{headline:c.jsx(r("MWXText.react"),{type:"headline4",children:g}),level:4}),t[24]=w):w=t[24];var A;return t[25]!==P||t[26]!==M?(A=c.jsx(r("MWXListCell.react"),{addOnEnd:M,addOnEndVerticalAlign:"top",content:w,ref:P}),t[25]=P,t[26]=M,t[27]=A):A=t[27],A}l.default=h}),226);
__d("MWInboxInfoGroupOptionsSection.react",["fbt","Int64Hooks","LSFactory","LSMessagingThreadTypeUtil","LSOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure","MWXCollapsible.react","MWXListCell.react","MWXSwitch.react","MWXText.react","MWXTextPairing.react","ReQL","ReQLSuspense","mwCMIsAnyCMThread","promiseDone","react","react-compiler-runtime","requireDeferred","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useId,p=d.useState,_=r("requireDeferred")("GroupsCometChatsEngagementLogger").__setRef("MWInboxInfoGroupOptionsSection.react"),f=s._(/*BTDS*/"Require admin approval"),g="unknown";function h(t){var n=o("react-compiler-runtime").c(22),a=t.thread,l=a.needsAdminApprovalForNewParticipant,u=a.threadKey,d=a.threadType,p=l===void 0?!1:l,h=(e||(e=r("useReStore")))(),y=m(),C;n[0]!==d?(C=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(d),n[0]=d,n[1]=C):C=n[1];var b=C,v,S;n[2]!==h||n[3]!==u?(v=function(t){_.onReady(function(e){e.log({action:"unknown",client_extras:{callsite:"MWInboxInfoGroupOptionsSection"},event:"update_admin_approval_setting",source:"unknown",surface:g,thread_id:String(u)})}),r("promiseDone")(h.runInTransaction(function(e){return r("LSOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure")(r("LSFactory")(e),{needsAdminApprovalForNewParticipant:t,threadKey:u})},"readwrite",void 0,void 0,i.id+":82"))},S=[h,u],n[2]=h,n[3]=u,n[4]=v,n[5]=S):(v=n[4],S=n[5]);var R=o("Int64Hooks").useCallbackInt64(v,S),L;n[6]!==p||n[7]!==R?(L=function(){return R(!p)},n[6]=p,n[7]=R,n[8]=L):L=n[8];var E;n[9]!==p||n[10]!==y||n[11]!==L?(E=c.jsx(r("MWXSwitch.react"),{"aria-describedby":y,"aria-label":f,onValueChange:L,size:"small",value:p}),n[9]=p,n[10]=y,n[11]=L,n[12]=E):E=n[12];var k;n[13]===Symbol.for("react.memo_cache_sentinel")?(k=c.jsx(r("MWXText.react"),{type:"headline4",children:f}),n[13]=k):k=n[13];var I;n[14]!==b?(I=b?s._(/*BTDS*/"Require an admin to approve all requests to join the channel"):s._(/*BTDS*/"Require an admin to approve all requests to join the group chat"),n[14]=b,n[15]=I):I=n[15];var T;n[16]!==y||n[17]!==I?(T=c.jsx(r("MWXTextPairing.react"),{headline:k,level:4,meta:c.jsx(r("MWXText.react"),{id:y,type:"meta3",children:I})}),n[16]=y,n[17]=I,n[18]=T):T=n[18];var D;return n[19]!==T||n[20]!==E?(D=c.jsx(r("MWXListCell.react"),{addOnEnd:E,addOnEndVerticalAlign:"top",content:T}),n[19]=T,n[20]=E,n[21]=D):D=n[21],D}function y(t){var n=o("react-compiler-runtime").c(13),a=t.threadKey,l=p(!1),u=l[0],d=l[1],m=(e||(e=r("useReStore")))(),_;n[0]!==m.tables.threads||n[1]!==a?(_=function(){return o("ReQL").fromTableAscending(m.tables.threads,["threadType","threadKey","needsAdminApprovalForNewParticipant"]).getKeyRange(a)},n[0]=m.tables.threads,n[1]=a,n[2]=_):_=n[2];var f;n[3]!==m||n[4]!==a?(f=[m,a],n[3]=m,n[4]=a,n[5]=f):f=n[5];var g=o("ReQLSuspense").useFirst(_,f,i.id+":143");if(g==null||r("mwCMIsAnyCMThread")(g.threadType))return null;var y,b;n[6]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Group options"),b=function(){return d(C)},n[6]=y,n[7]=b):(y=n[6],b=n[7]);var v;n[8]!==g?(v=c.jsx(h,{thread:g}),n[8]=g,n[9]=v):v=n[9];var S;return n[10]!==u||n[11]!==v?(S=c.jsx(r("MWXCollapsible.react"),{isOpen:u,label:y,onPress:b,children:v}),n[10]=u,n[11]=v,n[12]=S):S=n[12],S}function C(e){return!e}l.MWInboxInfoGroupOptionsSectionRequireAdminApprovalSwitch=h,l.MWInboxInfoGroupOptionsSection=y}),226);
__d("MWInboxInfoMemberRequestsPushPage.react",["fbt","AddOnEndOverride.react","I64","JSResourceForInteraction","LSThreadBitOffset","Locale","MWCMInboxInfoMemberApprovalsSwitch.react","MWCMMemberRequestsList.react","MWCMRequestToJoinChatsRequireApprovalSwitch.react","MWCMThreadTypes.react","MWInboxInfoGroupOptionsSection.react","MWInboxInfoPanelContext.react","MWInboxInfoPendingRequest.react","MWXCircleButton.react","MWXColumnItem.react","MWXDivider.react","MWXIconArrowLeft","MWXIconArrowRight","MWXIconDots3Horizontal","MWXLazyPopoverTrigger.react","MWXList.react","MWXListCell.react","MWXText.react","MWXThreadThemeColor","ReQL","ReQLSuspense","react","react-compiler-runtime","useGroupsCometChatsEngagementImpressionLogger","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useEffect,f=r("JSResourceForInteraction")("MWInboxInfoMemberRequestsMenu.react").__setRef("MWInboxInfoMemberRequestsPushPage.react");function g(t){var n=o("react-compiler-runtime").c(59),a=t.onReturn,l=t.parentSurface,c=t.thread,m=(e||(e=r("useReStore")))(),p;n[0]!==m.tables.group_membership_approval_requests||n[1]!==c.threadKey?(p=function(){return o("ReQL").fromTableAscending(m.tables.group_membership_approval_requests).getKeyRange(c.threadKey)},n[0]=m.tables.group_membership_approval_requests,n[1]=c.threadKey,n[2]=p):p=n[2];var _;n[3]!==m||n[4]!==c.threadKey?(_=[m,c.threadKey],n[3]=m,n[4]=c.threadKey,n[5]=_):_=n[5];var g=o("ReQLSuspense").useArray(p,_,i.id+":83"),y;if(n[6]!==g||n[7]!==c.pendingJoinRequestsCount||n[8]!==c.threadType){var C;y=o("MWCMThreadTypes.react").isJoinedCMThread(c.threadType)?(u||(u=o("I64"))).to_int32((C=c.pendingJoinRequestsCount)!=null?C:(u||(u=o("I64"))).zero):g.length,n[6]=g,n[7]=c.pendingJoinRequestsCount,n[8]=c.threadType,n[9]=y}else y=n[9];var b=y,v=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),S=v.isOnMemberRequestsPageRef,R;n[10]!==S||n[11]!==a?(R=function(){return S.current=!1,a()},n[10]=S,n[11]=a,n[12]=R):R=n[12];var L=R,E;n[13]!==c?(E=o("MWCMThreadTypes.react").isJoinedCMThread(c.threadType)&&o("LSThreadBitOffset").has(94,c)||!o("MWCMThreadTypes.react").isStandardCMThread(c.threadType)&&o("LSThreadBitOffset").has(66,c),n[13]=c,n[14]=E):E=n[14];var k=E,I;if(n[15]!==c.joinRequestApprovalSetting){var T;I=(u||(u=o("I64"))).to_int32((T=c.joinRequestApprovalSetting)!=null?T:(u||(u=o("I64"))).minus_one),n[15]=c.joinRequestApprovalSetting,n[16]=I}else I=n[16];var D=I===1,x=c.needsAdminApprovalForNewParticipant===!0?"1":"0",$;n[17]!==x?($={member_join_request_enabled:x},n[17]=x,n[18]=$):$=n[18];var P=l!=null?l:"thread_details",N;n[19]!==c.threadKey?(N=(u||(u=o("I64"))).to_string(c.threadKey),n[19]=c.threadKey,n[20]=N):N=n[20];var M;n[21]!==N||n[22]!==$||n[23]!==P?(M={client_extras:$,event:"member_requests_page_rendered",parent_surface:P,surface:"thread_member_requests_page",thread_id:N},n[21]=N,n[22]=$,n[23]=P,n[24]=M):M=n[24];var w=r("useGroupsCometChatsEngagementImpressionLogger")(M),A;n[25]!==D||n[26]!==c.needsAdminApprovalForNewParticipant?(A=c.needsAdminApprovalForNewParticipant===!0?D?d.jsx(r("MWXText.react"),{color:"tertiary",type:"body3",children:s._(/*BTDS*/"Anyone in the chat can approve requests to join.")}):d.jsx(r("MWXText.react"),{color:"tertiary",type:"body3",children:s._(/*BTDS*/"Only admins and moderators can approve requests to join the chat.")}):d.jsx(r("MWXText.react"),{color:"tertiary",type:"body3",children:s._(/*BTDS*/"Any member can see and join this chat.")}),n[25]=D,n[26]=c.needsAdminApprovalForNewParticipant,n[27]=A):A=n[27];var F=A,O;n[28]===Symbol.for("react.memo_cache_sentinel")?(O={className:"xyamay9 xv54qhq x1l90r2v xf7dkkf"},n[28]=O):O=n[28];var B;n[29]!==w||n[30]!==c.threadType?(B=o("MWCMThreadTypes.react").isJoinedCMThread(c.threadType)?w:null,n[29]=w,n[30]=c.threadType,n[31]=B):B=n[31];var W;n[32]===Symbol.for("react.memo_cache_sentinel")?(W={className:"x6s0dn4 x78zum5"},n[32]=W):W=n[32];var q,U;n[33]===Symbol.for("react.memo_cache_sentinel")?(q=s._(/*BTDS*/"Back"),U=o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),n[33]=q,n[34]=U):(q=n[33],U=n[34]);var V;n[35]!==L?(V=d.jsx(r("MWXCircleButton.react"),{"aria-label":q,color:U,icon:o("Locale").isRTL()?r("MWXIconArrowRight"):r("MWXIconArrowLeft"),onPress:L,size:32,type:"deemphasized"}),n[35]=L,n[36]=V):V=n[36];var H;n[37]===Symbol.for("react.memo_cache_sentinel")?(H={className:"x13fj5qh"},n[37]=H):H=n[37];var G;n[38]===Symbol.for("react.memo_cache_sentinel")?(G=d.jsx("span",babelHelpers.extends({},H,{children:d.jsx(r("MWXText.react"),{type:"headlineEmphasized2",children:s._(/*BTDS*/"Member requests")})})),n[38]=G):G=n[38];var z;n[39]!==V?(z=d.jsxs("div",babelHelpers.extends({},W,{children:[V,G]})),n[39]=V,n[40]=z):z=n[40];var j;n[41]===Symbol.for("react.memo_cache_sentinel")?(j={className:"x1y1aw1k xwib8y2"},n[41]=j):j=n[41];var K;n[42]!==k||n[43]!==c?(K=k?d.jsxs(d.Fragment,{children:[o("MWCMThreadTypes.react").isJoinedCMThread(c.threadType)?d.jsx(r("MWCMRequestToJoinChatsRequireApprovalSwitch.react"),{thread:c}):d.jsx(o("MWInboxInfoGroupOptionsSection.react").MWInboxInfoGroupOptionsSectionRequireAdminApprovalSwitch,{thread:c}),o("MWCMThreadTypes.react").isJoinedCMThread(c.threadType)&&c.needsAdminApprovalForNewParticipant===!0?d.jsx(r("MWCMInboxInfoMemberApprovalsSwitch.react"),{thread:c}):null]}):null,n[42]=k,n[43]=c,n[44]=K):K=n[44];var Q;n[45]!==K?(Q=d.jsx("div",babelHelpers.extends({},j,{children:K})),n[45]=K,n[46]=Q):Q=n[46];var X;n[47]!==F?(X=d.jsx(r("MWXColumnItem.react"),{paddingHorizontal:8,paddingVertical:8,children:d.jsx(r("MWXText.react"),{color:"tertiary",type:"body3",children:F})}),n[47]=F,n[48]=X):X=n[48];var Y;n[49]!==b||n[50]!==g||n[51]!==c?(Y=b>0?d.jsxs("div",{className:"x1y1aw1k xwib8y2",children:[d.jsx(r("MWXColumnItem.react"),{paddingVertical:8,children:d.jsx(r("MWXDivider.react"),{})}),d.jsx(r("MWXListCell.react"),{addOnEnd:o("MWCMThreadTypes.react").isJoinedCMThread(c.threadType)?void 0:d.jsx(r("AddOnEndOverride.react"),{children:d.jsx(r("MWXLazyPopoverTrigger.react"),{align:"end",popoverProps:{memberRequests:g,threadKey:c.threadKey},popoverResource:f,position:"below",preloadTrigger:"button",children:h})}),content:d.jsx(r("MWXText.react"),{type:"headlineEmphasized3",children:s._(/*BTDS*/"Requests ({memberRequestCount})",[s._param("memberRequestCount",String(b))])})}),d.jsx("div",{className:"x1y1aw1k",children:o("MWCMThreadTypes.react").isJoinedCMThread(c.threadType)?d.jsx(r("MWCMMemberRequestsList.react"),{thread:c}):d.jsx(r("MWXList.react"),{children:g.map(function(e){return d.jsx(r("MWInboxInfoPendingRequest.react"),{memberApprovalRequest:e,threadKey:c.threadKey},(u||(u=o("I64"))).to_string(e.contactId))})})})]}):null,n[49]=b,n[50]=g,n[51]=c,n[52]=Y):Y=n[52];var J;return n[53]!==B||n[54]!==z||n[55]!==Q||n[56]!==X||n[57]!==Y?(J=d.jsxs("div",babelHelpers.extends({},O,{ref:B,children:[z,Q,X,Y]})),n[53]=B,n[54]=z,n[55]=Q,n[56]=X,n[57]=Y,n[58]=J):J=n[58],J}function h(e,t){return d.jsx(r("MWXCircleButton.react"),{"aria-label":s._(/*BTDS*/"More options for member requests"),icon:r("MWXIconDots3Horizontal"),onPress:t,ref:e,size:32,type:"deemphasized"})}h.displayName=h.name+" [from "+i.id+"]";function y(t){var n=o("react-compiler-runtime").c(13),a=t.onReturn,l=t.parentSurface,s=t.threadKey,u=(e||(e=r("useReStore")))(),c;n[0]!==u.tables.threads||n[1]!==s?(c=function(){return o("ReQL").fromTableAscending(u.tables.threads).getKeyRange(s)},n[0]=u.tables.threads,n[1]=s,n[2]=c):c=n[2];var m;n[3]!==u||n[4]!==s?(m=[u,s],n[3]=u,n[4]=s,n[5]=m):m=n[5];var p=o("ReQLSuspense").useFirst(c,m,i.id+":282"),f=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),h=f.isOnMemberRequestsPageRef,y,C;if(n[6]!==h?(y=function(){return h.current=!0,(function(){h.current=!1})},C=[h],n[6]=h,n[7]=y,n[8]=C):(y=n[7],C=n[8]),_(y,C),p!=null){var b;return n[9]!==a||n[10]!==l||n[11]!==p?(b=d.jsx(g,{onReturn:a,parentSurface:l,thread:p}),n[9]=a,n[10]=l,n[11]=p,n[12]=b):b=n[12],b}else return null}l.default=y}),226);
__d("MWXIconFriendGenericCheckmark",["MWXSvgIcon","SVGIcon","cr:22342","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22342")),r("gkx")("23219"));l.default=e}),98);
__d("MWCMInboxInfoMemberRequests.react",["fbt","Int64Hooks","MWCMRequestToJoinUtils","MWInboxInfoButton.react","MWInboxInfoMemberRequestsPushPage.react","MWXIconForListCell.react","MWXIconFriendGenericCheckmark","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(13),n=e.pushPage,a=e.thread,i,l;t[0]!==n||t[1]!==a.threadKey?(i=function(t){if(n!=null)return n(function(e){return u.jsx(r("MWInboxInfoMemberRequestsPushPage.react"),{onReturn:e.onReturn,parentSurface:t,threadKey:a.threadKey})})},l=[n,a.threadKey],t[0]=n,t[1]=a.threadKey,t[2]=i,t[3]=l):(i=t[2],l=t[3]);var c=o("Int64Hooks").useCallbackInt64(i,l),d;t[4]!==a?(d=o("MWCMRequestToJoinUtils").memberRequestsMenuItemSubtitle(a),t[4]=a,t[5]=d):d=t[5];var m=d,p,_;t[6]===Symbol.for("react.memo_cache_sentinel")?(p=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconFriendGenericCheckmark")}),_=s._(/*BTDS*/"Member requests"),t[6]=p,t[7]=_):(p=t[6],_=t[7]);var f;t[8]!==c?(f=function(){return c()},t[8]=c,t[9]=f):f=t[9];var g;return t[10]!==m||t[11]!==f?(g=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:p,label:_,onPress:f,subLabel:m}),t[10]=m,t[11]=f,t[12]=g):g=t[12],g}l.default=c}),226);
__d("MWCMInboxInfoPauseButton.react",["fbt","I64","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWCMPauseChatLogger","MWInboxInfoButton.react","MWLSThreadDisplayContext","MWXIconForListCell.react","MWXIconMenuItemPauseChat","MWXIconMenuItemResumeChat","ReQL","ThreadStatus","promiseDone","react","react-compiler-runtime","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react"));function m(t){var n=o("react-compiler-runtime").c(27),a=t.thread,i=(e||(e=r("useReStore")))(),l=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),c;n[0]===Symbol.for("react.memo_cache_sentinel")?(c=r("JSResourceForInteraction")("MWCMPauseChatDialog.react").__setRef("MWCMInboxInfoPauseButton.react"),n[0]=c):c=n[0];var m=r("useMWXLazyDialog")(c),p=m[0],_;n[1]===Symbol.for("react.memo_cache_sentinel")?(_=r("JSResourceForInteraction")("MWCMResumePausedChatDialog.react").__setRef("MWCMInboxInfoPauseButton.react"),n[1]=_):_=n[1];var f=r("useMWXLazyDialog")(_),g=f[0],h;n[2]!==a.threadStatus?(h=a.threadStatus!=null&&(u||(u=o("I64"))).equal(a.threadStatus,(u||(u=o("I64"))).of_int32(r("ThreadStatus").PAUSED)),n[2]=a.threadStatus,n[3]=h):h=n[3];var y=h,C;n[4]!==a.threadType?(C=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType),n[4]=a.threadType,n[5]=C):C=n[5];var b=C,v;n[6]!==y||n[7]!==b?(v=function(){return b?y?s._(/*BTDS*/"Resume channel"):s._(/*BTDS*/"Pause channel"):y?s._(/*BTDS*/"Resume chat"):s._(/*BTDS*/"Pause chat")},n[6]=y,n[7]=b,n[8]=v):v=n[8];var S=v,R;n[9]!==i||n[10]!==l||n[11]!==p||n[12]!==a.threadKey?(R=function(){r("promiseDone")((async function(){var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(i.tables.threads).getKeyRange(a.threadKey));e!=null&&(o("MWCMPauseChatLogger").logPauseEvent({action:"tap",displayContext:l,event:"pause_chat_initiated",parentSurface:"thread_view",source:"pause_chat_button",surface:"thread_settings",threadId:a.threadKey}),p({thread:e}))})())},n[9]=i,n[10]=l,n[11]=p,n[12]=a.threadKey,n[13]=R):R=n[13];var L=R,E;n[14]!==l||n[15]!==b||n[16]!==g||n[17]!==a.threadKey?(E=function(){o("MWCMPauseChatLogger").logPauseEvent({action:"tap",displayContext:l,event:"resume_chat_initiated",parentSurface:"thread_view",source:"resume_chat_button",surface:"thread_settings",threadId:a.threadKey}),g({shouldUseChannelTerminology:b,threadKey:a.threadKey})},n[14]=l,n[15]=b,n[16]=g,n[17]=a.threadKey,n[18]=E):E=n[18];var k=E,I=r(y?"MWXIconMenuItemResumeChat":"MWXIconMenuItemPauseChat"),T;n[19]!==I?(T=d.jsx(r("MWXIconForListCell.react"),{icon:I}),n[19]=I,n[20]=T):T=n[20];var D;n[21]!==S?(D=S(),n[21]=S,n[22]=D):D=n[22];var x=y?k:L,$;return n[23]!==D||n[24]!==x||n[25]!==T?($=d.jsx(r("MWInboxInfoButton.react"),{addOnStart:T,label:D,onPress:x}),n[23]=D,n[24]=x,n[25]=T,n[26]=$):$=n[26],$}l.default=m}),226);
__d("MWGroupOptionsSectionWrapper.react",["fbt","CometPlaceholder.react","MWInboxPersistedUIState","MWMemberListGlimmer.react","MWXCollapsible.react","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWGroupOptionsSection.react").__setRef("MWGroupOptionsSectionWrapper.react"));function d(e){var t=o("react-compiler-runtime").c(11),n=e.thread,a=o("MWInboxPersistedUIState").usePersistedUIState(!1,"__MWGroupOptionsSection.isOpen__"),i=a[0],l=a[1],d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Group Options"),t[0]=d):d=t[0];var m=d,p;t[1]!==i||t[2]!==l?(p=function(){return l(function(){return!i})},t[1]=i,t[2]=l,t[3]=p):p=t[3];var _;t[4]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsx(r("MWMemberListGlimmer.react"),{}),t[4]=_):_=t[4];var f;t[5]!==n?(f=u.jsx(r("CometPlaceholder.react"),{fallback:_,name:"MWGroupOptionsSectionWrapper",children:u.jsx(c,{thread:n})}),t[5]=n,t[6]=f):f=t[6];var g;return t[7]!==i||t[8]!==p||t[9]!==f?(g=u.jsx(r("MWXCollapsible.react"),{isOpen:i,label:m,onPress:p,testid:void 0,children:f}),t[7]=i,t[8]=p,t[9]=f,t[10]=g):g=t[10],g}l.default=d}),226);
__d("MWInbox3PBotCommandsSection.react",["fbt","I64","MW3PBotCommandListItem.react","MWInboxPersistedUIState","MWPBumpEntityKey","MWXCollapsible.react","MWXList.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react"));function m(t){var n=o("react-compiler-runtime").c(19),a=t.threadKey,l=(e||(e=r("useReStore")))(),u;n[0]!==l.tables.custom_thread_commands||n[1]!==a?(u=function(){return o("ReQL").fromTableAscending(l.tables.custom_thread_commands.index("rank")).getKeyRange(a).filter(_)},n[0]=l.tables.custom_thread_commands,n[1]=a,n[2]=u):u=n[2];var c;n[3]!==l||n[4]!==a?(c=[l,a],n[3]=l,n[4]=a,n[5]=c):c=n[5];var m=o("ReQLSuspense").useArray(u,c,i.id+":38"),f=o("MWInboxPersistedUIState").usePersistedUIState(!1,"__MWInbox3PBotCommandsSection.isOpen__"),g=f[0],h=f[1],y;n[6]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Commands"),n[6]=y):y=n[6];var C;n[7]!==g||n[8]!==h?(C=function(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","3p_bot_commands."+(g?"close":"open")),h(function(){return!g})},n[7]=g,n[8]=h,n[9]=C):C=n[9];var b;n[10]===Symbol.for("react.memo_cache_sentinel")?(b={className:"x135b78x x11lfxj5"},n[10]=b):b=n[10];var v;n[11]!==m?(v=m.map(p),n[11]=m,n[12]=v):v=n[12];var S;n[13]!==v?(S=d.jsx("div",babelHelpers.extends({},b,{children:d.jsx(r("MWXList.react"),{children:v})})),n[13]=v,n[14]=S):S=n[14];var R;return n[15]!==g||n[16]!==C||n[17]!==S?(R=d.jsx(r("MWXCollapsible.react"),{isOpen:g,label:y,onPress:C,children:S}),n[15]=g,n[16]=C,n[17]=S,n[18]=R):R=n[18],R}function p(e){return d.jsx(r("MW3PBotCommandListItem.react"),{command:e},(u||(u=o("I64"))).to_string(e.commandId))}p.displayName=p.name+" [from "+i.id+"]";function _(e){return!e.isOpenPersistentMenu}l.default=m}),226);
__d("MWInboxInfoEditChannel.react",["fbt","BroadcastChannelQPL","MWEditChannelDialogTrigger.react","MWInboxInfoButton.react","MWXIconForListCell.react","MWXIconPencil","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.threadKey,a=e.threadType,i=o("BroadcastChannelQPL").useLogEditChannelStart(a),l;t[0]!==i?(l=function(t,n){return u.jsx(r("MWInboxInfoButton.react"),{addOnStart:u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconPencil")}),label:s._(/*BTDS*/"Edit"),onPress:function(){i(),t()},ref:n})},t[0]=i,t[1]=l):l=t[1];var c;return t[2]!==l||t[3]!==n?(c=u.jsx(r("MWEditChannelDialogTrigger.react"),{threadKey:n,children:l}),t[2]=l,t[3]=n,t[4]=c):c=t[4],c}l.default=c}),226);
__d("MWInboxInfoEditEmoji.react",["fbt","JSResourceForInteraction","MWEmoji.react","MWInboxInfoButton.react","MWPBumpEntityKey","MWXIconForListCell.react","MWXIconLike","MWXThreadThemeColor","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","useMWFalcoFeatureEventLogger","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=r("JSResourceForInteraction")("MWV2EditEmojiDialog.react").__setRef("MWInboxInfoEditEmoji.react");function m(t){var n,a=o("react-compiler-runtime").c(14),l=t.threadKey,u=t.threadType,m=(e||(e=r("useReStore")))(),p=r("useMWFalcoFeatureEventLogger")(l,u),_=r("useMWXLazyDialog")(d),f=_[0],g=(n=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(m.tables.threads,["customEmoji"]).getKeyRange(l)},[m,l],i.id+":48"))==null?void 0:n.customEmoji,h;a[0]!==l||a[1]!==u?(h={eventName:"open_change_emoji_dialog",threadKey:l,threadType:u},a[0]=l,a[1]=u,a[2]=h):h=a[2];var y=h,C;a[3]!==g?(C=g!=null&&g!==""?c.jsx(r("MWEmoji.react"),{emoji:g,size:r("gkx")("23219")?16:20}):c.jsx(r("MWXIconForListCell.react"),{color:o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-primary-theme-color)"),icon:r("MWXIconLike")}),a[3]=g,a[4]=C):C=a[4];var b;a[5]===Symbol.for("react.memo_cache_sentinel")?(b=s._(/*BTDS*/"Change emoji"),a[5]=b):b=a[5];var v;a[6]!==p||a[7]!==f||a[8]!==l?(v=function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","customise_section_change_emoji"),p("inbox","change_thread_emoji"),f({threadKey:l})},a[6]=p,a[7]=f,a[8]=l,a[9]=v):v=a[9];var S;return a[10]!==y||a[11]!==C||a[12]!==v?(S=c.jsx(r("MWInboxInfoButton.react"),{addOnStart:C,label:b,loggingEvent:y,onPress:v,testid:void 0}),a[10]=y,a[11]=C,a[12]=v,a[13]=S):S=a[13],S}l.default=m}),226);
__d("MWXIconText",["MWXSvgIcon","SVGIcon","cr:22514","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22514")),r("gkx")("23219"));l.default=e}),98);
__d("MWInboxInfoEditNicknames.react",["fbt","JSResourceForInteraction","MWInboxInfoButton.react","MWXIconForListCell.react","MWXIconText","QuickPerformanceLogger","emptyFunction","promiseDone","qpl","react","react-compiler-runtime","useMWEntrypoint","useMWFalcoFeatureEventLogger","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=r("JSResourceForInteraction")("LSNicknameDialog.react").__setRef("MWInboxInfoEditNicknames.react");function p(t){var n=o("react-compiler-runtime").c(17),a=t.renderingTracker,i=t.threadKey,l=t.threadType,c=r("useMWEntrypoint")(),p=r("useMWFalcoFeatureEventLogger")(i,l),_=(e||(e=r("useReStore")))(),f=r("useMWXLazyDialog")(m),g=f[0],h;n[0]!==_.tables.threads||n[1]!==a||n[2]!==g||n[3]!==i?(h=function(){r("promiseDone")(_.tables.threads.get(i),function(e){e!=null&&g({renderingTracker:a,thread:e},r("emptyFunction"))})},n[0]=_.tables.threads,n[1]=a,n[2]=g,n[3]=i,n[4]=h):h=n[4];var y=h,C;n[5]!==i||n[6]!==l?(C={eventName:"open_change_nickname_dialog",threadKey:i,threadType:l},n[5]=i,n[6]=l,n[7]=C):C=n[7];var b=C,v,S;n[8]===Symbol.for("react.memo_cache_sentinel")?(v=d.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconText")}),S=s._(/*BTDS*/"Edit nicknames"),n[8]=v,n[9]=S):(v=n[8],S=n[9]);var R;n[10]!==c||n[11]!==p||n[12]!==y?(R=function(){(u||(u=r("QuickPerformanceLogger"))).markerStart(r("qpl")._(269230744,"1734")),p(c,"change_nickname"),y()},n[10]=c,n[11]=p,n[12]=y,n[13]=R):R=n[13];var L;return n[14]!==b||n[15]!==R?(L=d.jsx(r("MWInboxInfoButton.react"),{addOnStart:v,label:S,loggingEvent:b,onPress:R,testid:void 0}),n[14]=b,n[15]=R,n[16]=L):L=n[16],L}l.default=p}),226);
__d("MWInboxInfoEditPhoto.react",["fbt","MWInboxInfoButton.react","MWV2EditPhotoUploader.react","MWXIconForListCell.react","MWXIconPhoto","MessengerWebUXLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=s._(/*BTDS*/"Change photo"),m=(e=r("MessengerWebUXLogger")==null?void 0:r("MessengerWebUXLogger").useInteractionLogger)!=null?e:function(){};function p(e){var t=o("react-compiler-runtime").c(8),n=e.threadKey,a=e.threadType,i=m(),l;t[0]!==i||t[1]!==n||t[2]!==a?(l=function(t){return c.jsx(r("MWInboxInfoButton.react"),{addOnStart:c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconPhoto")}),label:d,onPress:function(){i==null||i({eventName:"change_thread_photo",threadKey:n,threadType:a}),t()}})},t[0]=i,t[1]=n,t[2]=a,t[3]=l):l=t[3];var s;return t[4]!==l||t[5]!==n||t[6]!==a?(s=c.jsx(r("MWV2EditPhotoUploader.react"),{threadKey:n,threadType:a,children:l}),t[4]=l,t[5]=n,t[6]=a,t[7]=s):s=t[7],s}l.default=p}),226);
__d("MWInboxInfoEditTheme.react",["fbt","MWInboxInfoButton.react","MWPThemeCSSProvider.react","MWThemeIcon.react","gkx","react","react-compiler-runtime","useMWInboxOpenChangeThemeDialog","useMWPThreadTheme"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(13),n=e.threadKey,a=e.threadType,i=r("useMWPThreadTheme")(),l=i.threadTheme,c=r("useMWInboxOpenChangeThemeDialog")(n,a),d=o("MWPThemeCSSProvider.react").useIsThemeV2()?"v2":"v1",m;t[0]!==d?(m={themePickerVersion:d},t[0]=d,t[1]=m):m=t[1];var p;t[2]!==m||t[3]!==n||t[4]!==a?(p={eventName:"open_change_theme_dialog",extraData:m,threadKey:n,threadType:a},t[2]=m,t[3]=n,t[4]=a,t[5]=p):p=t[5];var _=p,f;t[6]!==l?(f=u.jsx(o("MWThemeIcon.react").MWThemeIcon,{size:r("gkx")("23219")?16:20,threadTheme:l}),t[6]=l,t[7]=f):f=t[7];var g;t[8]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Change theme"),t[8]=g):g=t[8];var h;return t[9]!==c||t[10]!==_||t[11]!==f?(h=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:f,label:g,loggingEvent:_,onPress:c,testid:void 0}),t[9]=c,t[10]=_,t[11]=f,t[12]=h):h=t[12],h}l.default=c}),226);
__d("MWInboxInfoEditThreadName.react",["fbt","LSMessagingThreadTypeUtil","MWEditThreadNameDialogTrigger.react","MWInboxInfoButton.react","MWXIconForListCell.react","MWXIconPencil","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(16),n=e.threadKey,a=e.threadType,i;t[0]!==a?(i=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a),t[0]=a,t[1]=i):i=t[1];var l=i,c;t[2]!==a?(c=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a),t[2]=a,t[3]=c):c=t[3];var d=c,m;t[4]!==d||t[5]!==l?(m=l||d?s._(/*BTDS*/"Change channel name"):s._(/*BTDS*/"Change chat name"),t[4]=d,t[5]=l,t[6]=m):m=t[6];var p=m,_;t[7]!==n||t[8]!==a?(_={eventName:"open_edit_thread_name_dialog",threadKey:n,threadType:a},t[7]=n,t[8]=a,t[9]=_):_=t[9];var f=_,g;t[10]!==f||t[11]!==p?(g=function(t){return u.jsx(r("MWInboxInfoButton.react"),{addOnStart:u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconPencil")}),label:p,loggingEvent:f,onPress:t})},t[10]=f,t[11]=p,t[12]=g):g=t[12];var h;return t[13]!==g||t[14]!==n?(h=u.jsx(r("MWEditThreadNameDialogTrigger.react"),{threadKey:n,children:g}),t[13]=g,t[14]=n,t[15]=h):h=t[15],h}l.default=c}),226);
__d("useIsThreadBlocked",["I64","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","MWThreadKey.react","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){var t=o("react-compiler-runtime").c(21),n=(u||(u=r("useReStore")))(),a=o("MWThreadKey.react").useMWThreadKeyMemoizedExn(),l=o("MWPActor.react").useActor(),c;t[0]!==n.tables.threads||t[1]!==a?(c=function(){return o("ReQL").fromTableAscending(n.tables.threads,["threadKey","threadType"]).getKeyRange(a)},t[0]=n.tables.threads,t[1]=a,t[2]=c):c=t[2];var m;t[3]!==n||t[4]!==a?(m=[n,a],t[3]=n,t[4]=a,t[5]=m):m=t[5];var p=o("ReQLSuspense").useFirst(c,m,i.id+":28"),_;t[6]!==l||t[7]!==n.tables.contacts||t[8]!==n.tables.participants||t[9]!==(p==null?void 0:p.threadKey)||t[10]!==(p==null?void 0:p.threadType)||t[11]!==a?(_=function(){return(p==null?void 0:p.threadKey)!=null&&(p==null?void 0:p.threadType)!=null&&o("LSMessagingThreadTypeUtil").isOneToOne(p==null?void 0:p.threadType)?o("ReQL").leftJoin(o("ReQL").fromTableAscending(n.tables.participants,["contactId"]).getKeyRange(a).filter(function(t){return!(e||(e=o("I64"))).equal(t.contactId,l)}).take(1),o("ReQL").fromTableAscending(n.tables.contacts,["blockedByViewerStatus"])).map(d):o("ReQL").empty()},t[6]=l,t[7]=n.tables.contacts,t[8]=n.tables.participants,t[9]=p==null?void 0:p.threadKey,t[10]=p==null?void 0:p.threadType,t[11]=a,t[12]=_):_=t[12];var f=p==null?void 0:p.threadKey,g=p==null?void 0:p.threadType,h;t[13]!==l||t[14]!==n||t[15]!==f||t[16]!==g||t[17]!==a?(h=[l,n,f,g,a],t[13]=l,t[14]=n,t[15]=f,t[16]=g,t[17]=a,t[18]=h):h=t[18];var y=o("ReQLSuspense").useFirst(_,h,i.id+":37");if(y!=null){var C;return t[19]!==y.blockedByViewerStatus?(C=(e||(e=o("I64"))).equal(y.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)),t[19]=y.blockedByViewerStatus,t[20]=C):C=t[20],!C}else return!1}function d(e){var t=e[1];return t}l.default=c}),98);
__d("MWInboxInfoActionsSection.react",["fbt","CommunityMessagingEnableState","I64","Int64Hooks","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MWCMEditChatInfo.react","MWCMThreadTypes.react","MWInboxInfoEditChannel.react","MWInboxInfoEditEmoji.react","MWInboxInfoEditNicknames.react","MWInboxInfoEditPhoto.react","MWInboxInfoEditTheme.react","MWInboxInfoEditThreadName.react","MWInboxPersistedUIState","MWPBumpEntityKey","MWXCollapsible.react","isFeatureLimitEnabled","justknobx","mwCMIsAnyCMThread","mwCMisStandAloneCommunity","react","react-compiler-runtime","useCommunityFolder","useIsReadOnlyFeatureLimitedWithThreadType","useIsThreadBlocked","useMWGetOtherUserContact","useMWIsContactRestricted"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=e||(e=o("react"));function m(e){var t=o("react-compiler-runtime").c(85),n=e.thread,a=n.threadKey,i=n.threadType,l=o("MWInboxPersistedUIState").usePersistedUIState(!1,"__MWInboxInfoActionsSection.isOpen__"),m=l[0],_=l[1],f=r("useCommunityFolder")(n),g;t[0]!==n?(g=o("LSThreadBitOffset").has(60,n),t[0]=n,t[1]=g):g=t[1];var h=g,y;t[2]!==n?(y=o("LSThreadBitOffset").has(81,n),t[2]=n,t[3]=y):y=t[3];var C=y,b;t[4]!==n?(b=o("LSThreadBitOffset").has(61,n),t[4]=n,t[5]=b):b=t[5];var v=b,S;t[6]!==n?(S=o("LSThreadBitOffset").has(6,n),t[6]=n,t[7]=S):S=t[7];var R=S,L;t[8]!==n?(L=o("LSThreadBitOffset").has(7,n),t[8]=n,t[9]=L):L=t[9];var E=L,k;t[10]!==n?(k=o("LSThreadBitOffset").has(9,n),t[10]=n,t[11]=k):k=t[11];var I=k,T;t[12]!==i?(T=o("LSMessagingThreadTypeUtil").isArmadilloSecure(i),t[12]=i,t[13]=T):T=t[13];var D=T,x;t[14]!==i?(x=o("LSMessagingThreadTypeUtil").isDiscoverableChannel(i),t[14]=i,t[15]=x):x=t[15];var $=x,P=r("useIsReadOnlyFeatureLimitedWithThreadType")(i)&&(!D||r("isFeatureLimitEnabled")())&&r("justknobx")._("35"),N;t[16]!==i?(N=r("mwCMIsAnyCMThread")(i),t[16]=i,t[17]=N):N=t[17];var M=N,w=f==null?void 0:f.communityType,A;t[18]!==w?(A=r("mwCMisStandAloneCommunity")(w),t[18]=w,t[19]=A):A=t[19];var F=A,O=r("useIsThreadBlocked")(),B=r("useMWGetOtherUserContact")(a,i,o("LSContactBitOffset").contactCapabilityFields),W=r("useMWIsContactRestricted")(B),q=($||F)&&h&&C,U=r("useCommunityFolder")(n),V;t[20]!==M||t[21]!==(U==null?void 0:U.enableState)?(V=function(){var e;return M&&(u||(u=o("I64"))).equal((e=U==null?void 0:U.enableState)!=null?e:(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").ENABLED),(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED))},t[20]=M,t[21]=U==null?void 0:U.enableState,t[22]=V):V=t[22];var H;t[23]!==M||t[24]!==U?(H=[U,M],t[23]=M,t[24]=U,t[25]=H):H=t[25];var G=o("Int64Hooks").useMemoInt64(V,H),z=o("MAWThreadCutover").useIsCutoverOpenThread(a);if(z)return null;var j=M&&h&&C&&!P&&!D&&!G&&!F,K;t[26]!==h||t[27]!==q||t[28]!==M||t[29]!==P||t[30]!==D||t[31]!==n.threadSubtype||t[32]!==i?(K=!M&&!q&&h&&!P&&(!D||o("LSMessagingThreadTypeUtil").isGroup(i))&&!o("MWCMThreadTypes.react").isMarketplaceThread(n.threadSubtype),t[26]=h,t[27]=q,t[28]=M,t[29]=P,t[30]=D,t[31]=n.threadSubtype,t[32]=i,t[33]=K):K=t[33];var Q=K,X=R&&!P&&!O&&!W,Y=E&&!P&&!O&&!W,J=I&&!P&&!O&&!W,Z;t[34]!==j||t[35]!==a?(Z=j?d.jsx(r("MWCMEditChatInfo.react"),{threadKey:a},"0"):null,t[34]=j,t[35]=a,t[36]=Z):Z=t[36];var ee;t[37]!==Q||t[38]!==a||t[39]!==i?(ee=Q?d.jsx(r("MWInboxInfoEditThreadName.react"),{threadKey:a,threadType:i},"1"):null,t[37]=Q,t[38]=a,t[39]=i,t[40]=ee):ee=t[40];var te;t[41]!==q||t[42]!==a||t[43]!==i?(te=q?d.jsx(r("MWInboxInfoEditChannel.react"),{threadKey:a,threadType:i},"2"):null,t[41]=q,t[42]=a,t[43]=i,t[44]=te):te=t[44];var ne;t[45]!==v||t[46]!==P||t[47]!==a||t[48]!==i?(ne=v&&!P?d.jsx(r("MWInboxInfoEditPhoto.react"),{threadKey:a,threadType:i},"3"):null,t[45]=v,t[46]=P,t[47]=a,t[48]=i,t[49]=ne):ne=t[49];var re;t[50]!==X||t[51]!==a||t[52]!==i?(re=X?d.jsx(r("MWInboxInfoEditTheme.react"),{threadKey:a,threadType:i},"4"):null,t[50]=X,t[51]=a,t[52]=i,t[53]=re):re=t[53];var oe;t[54]!==Y||t[55]!==a||t[56]!==i?(oe=Y?d.jsx(r("MWInboxInfoEditEmoji.react"),{threadKey:a,threadType:i},"5"):null,t[54]=Y,t[55]=a,t[56]=i,t[57]=oe):oe=t[57];var ae;t[58]!==J||t[59]!==a||t[60]!==i?(ae=J?d.jsx(r("MWInboxInfoEditNicknames.react"),{threadKey:a,threadType:i},"6"):null,t[58]=J,t[59]=a,t[60]=i,t[61]=ae):ae=t[61];var ie;t[62]!==Z||t[63]!==ee||t[64]!==te||t[65]!==ne||t[66]!==re||t[67]!==oe||t[68]!==ae?(ie=[Z,ee,te,ne,re,oe,ae],t[62]=Z,t[63]=ee,t[64]=te,t[65]=ne,t[66]=re,t[67]=oe,t[68]=ae,t[69]=ie):ie=t[69];var le=ie,se=le.some(p);if(se){var ue;t[70]!==i?(ue=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(i),t[70]=i,t[71]=ue):ue=t[71];var ce=ue,de;t[72]!==i?(de=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(i),t[72]=i,t[73]=de):de=t[73];var me=de,pe;t[74]!==me||t[75]!==ce?(pe=ce||me?s._(/*BTDS*/"Customize channel"):s._(/*BTDS*/"Customize chat"),t[74]=me,t[75]=ce,t[76]=pe):pe=t[76];var _e=pe,fe;t[77]!==m||t[78]!==_?(fe=function(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","customise_section."+(m?"close":"open")),_(!m)},t[77]=m,t[78]=_,t[79]=fe):fe=t[79];var ge;return t[80]!==m||t[81]!==le||t[82]!==_e||t[83]!==fe?(ge=d.jsx(r("MWXCollapsible.react"),{isOpen:m,label:_e,onPress:fe,testid:void 0,children:le}),t[80]=m,t[81]=le,t[82]=_e,t[83]=fe,t[84]=ge):ge=t[84],ge}return null}function p(e){return e!==null}l.default=m}),226);
__d("MWInboxInfoDetailsSectionThreadPicture.react",["Int64Hooks","MWCMThreadTypes.react","MWReQLFacepile.react","MWThreadPicture.react","MWXProfilePhoto.react","ReQL","ReQLSuspense","getLSMediaThreadPictureUrl","react","react-compiler-runtime","usePresenceUnifiedIsThreadActive","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.memo;function d(t){var n=o("react-compiler-runtime").c(19),a=t.threadKey,l=(e||(e=r("useReStore")))(),s;n[0]!==l.tables.threads||n[1]!==a?(s=function(){return o("ReQL").fromTableAscending(l.tables.threads,["parentThreadKey","threadKey","threadPictureUrl","threadPictureUrlExpirationTimestampMs","threadPictureUrlFallback","threadType"]).getKeyRange(a)},n[0]=l.tables.threads,n[1]=a,n[2]=s):s=n[2];var c;n[3]!==l||n[4]!==a?(c=[l,a],n[3]=l,n[4]=a,n[5]=c):c=n[5];var d=o("ReQLSuspense").useFirst(s,c,i.id+":31"),m=r("usePresenceUnifiedIsThreadActive")(a);if(d==null)return null;var p=o("MWCMThreadTypes.react").isJoinedCMThread(d.threadType);if(!p&&r("MWXProfilePhoto.react")!=null){var _;n[6]!==d?(_=r("getLSMediaThreadPictureUrl")(d),n[6]=d,n[7]=_):_=n[7];var f=_;if(f!=null){var g;n[8]!==m?(g=m?{type:"availabilityBadge"}:void 0,n[8]=m,n[9]=g):g=n[9];var h;n[10]!==f?(h={uri:f},n[10]=f,n[11]=h):h=n[11];var y;return n[12]!==g||n[13]!==h?(y=u.jsx(r("MWXProfilePhoto.react"),{addOn:g,size:72,source:h,testid:void 0}),n[12]=g,n[13]=h,n[14]=y):y=n[14],y}else{var C;return n[15]!==d?(C=u.jsx(r("MWReQLFacepile.react"),{badgeSize:14,photoSize:80,thread:d}),n[15]=d,n[16]=C):C=n[16],C}}var b;return n[17]!==d.threadKey?(b=u.jsx(r("MWThreadPicture.react"),{badgeSize:14,photoSize:80,threadKey:d.threadKey}),n[17]=d.threadKey,n[18]=b):b=n[18],b}var m=c(d,o("Int64Hooks").mostlyShallowEqual);l.default=m}),98);
__d("MWInboxInfoDetailsSectionUnifiedPresenceStatusText.react",["MWXColumnItem.react","MWXText.react","react","react-compiler-runtime","usePresenceUnifiedStatusText"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.threadKey,a=e.threadType,i=r("usePresenceUnifiedStatusText")(n,a),l;return t[0]!==i?(l=s.jsx(r("MWXColumnItem.react"),{paddingTop:8,children:s.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:i})}),t[0]=i,t[1]=l):l=t[1],l}l.default=u}),98);
__d("MWXTextWithIcon.react",["BaseTextWithIcon.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(r("BaseTextWithIcon.react"),babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}l.default=u}),98);
__d("MWInboxInfoEncryptionPill.react",["fbt","MWXIconLock","MWXIconStrict.react","MWXPressable.react","MWXRowItem.react","MWXText.react","MWXTextWithIcon.react","XMessengerHelpCenterContentControllerRouteBuilder","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=24,d={pressed:{transform:"x1n5d1j9",$$css:!0},root:{alignItems:"x6s0dn4",backgroundColor:"x1qhmfi1",borderStartStartRadius:"x6nl9eh",borderStartEndRadius:"x1a5l9x9",borderEndEndRadius:"x7vuprf",borderEndStartRadius:"x1mg3h75",display:"x78zum5",flexDirection:"x1q0g3np",height:"xxk0z11",justifyContent:"xl56j7k",paddingInlineEnd:"xpdmqnj",paddingInlineStart:"x1g0dm76",position:"x1n2onr6",width:"xh8yej3",$$css:!0}};function m(){var e=o("react-compiler-runtime").c(3),t;if(e[0]===Symbol.for("react.memo_cache_sentinel")){var n;t=(n=r("XMessengerHelpCenterContentControllerRouteBuilder").buildUri({cms_id:"786613221989782"}))==null?void 0:n.toString(),e[0]=t}else t=e[0];var a=t,i;e[1]===Symbol.for("react.memo_cache_sentinel")?(i={target:"_blank",url:a},e[1]=i):i=e[1];var l;return e[2]===Symbol.for("react.memo_cache_sentinel")?(l=u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXPressable.react"),{display:"inline",linkProps:i,overlayFocusRingPosition:"inset",overlayRadius:"inherit",xstyle:p,children:u.jsx(r("MWXText.react"),{align:"center",type:"bodyLink4",children:u.jsx(r("MWXTextWithIcon.react"),{iconBefore:u.jsx(r("MWXIconStrict.react"),{icon:r("MWXIconLock"),size:10}),children:s._(/*BTDS*/"End-to-end encrypted")})})})}),e[2]=l):l=e[2],l}function p(e){var t=e.pressed;return[d.root,t&&d.pressed]}l.default=m}),226);
__d("MWInboxInfoEncryptionPillWrapper.react",["MWInboxInfoEncryptionPill.react","MWXColumnItem.react","MWXRowItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:20,children:s.jsx(r("MWXRowItem.react"),{children:s.jsx(r("MWInboxInfoEncryptionPill.react"),{})})}),e[0]=t):t=e[0],t}l.default=u}),98);
__d("MWShareChannelQuickAction.react",["ChannelShareDialogLoggingContext","MWChannelInviteDialog.entrypoint","MWShareThreadQuickActionButton.react","react","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.channelThread,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={},t[0]=a):a=t[0];var i=r("useMWXEntryPointDialog")(r("MWChannelInviteDialog.entrypoint"),a),l=i[0],u;return t[1]!==n||t[2]!==l?(u=s.jsx(r("MWShareThreadQuickActionButton.react"),{onPress:function(){l({channelThread:n,loggingContext:r("ChannelShareDialogLoggingContext").THREAD_DETAILS_QUICK_ACTION})}}),t[1]=n,t[2]=l,t[3]=u):u=t[3],u}l.default=u}),98);
__d("MWShareThreadQuickAction.react",["JSResourceForInteraction","MWShareThreadQuickActionButton.react","react","react-compiler-runtime","useMWXLazyDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("JSResourceForInteraction")("MWShareThreadDialog.react").__setRef("MWShareThreadQuickAction.react");function c(e){var t=o("react-compiler-runtime").c(3),n=e.thread,a=r("useMWXLazyDialog")(u),i=a[0],l;return t[0]!==i||t[1]!==n?(l=s.jsx(r("MWShareThreadQuickActionButton.react"),{onPress:function(){i({thread:n})}}),t[0]=i,t[1]=n,t[2]=l):l=t[2],l}l.default=c}),98);
__d("MWXIconProfile",["MWXSvgIcon","SVGIcon","cr:22446","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22446")),r("gkx")("23219"));l.default=e}),98);
__d("MWInboxInfoQuickActions.react",["fbt","BroadcastChannelQPL","CommunityMessagingEnableState","I64","LSContactTypeExact","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMBulkInviteDialog.entrypoint","MWInboxInfoNotifications.react","MWPActor.react","MWPBumpEntityKey","MWPConversationSearchContext.react","MWPConversationSearchLogger","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWResponsiveLayoutShowState","MWShareChannelQuickAction.react","MWShareThreadQuickAction.react","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconBell","MWXIconBellCross","MWXIconFriendGenericAdd","MWXIconMagnifyingGlass","MWXIconProfile","MWXRow.react","MWXRowItem.react","MWXText.react","MWXTooltip.react","MessengerWebUXLogger","ReQL","ReQLSuspense","getLSContactHref","isE2EEConversationSearchEnabled","isMWNewSearchUXEnabled","nullthrows","queryMWLSOtherParticipantContact","react","react-compiler-runtime","requireDeferred","useCommunityFolder","useMWXEntryPointDialog","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["threadKey"],u,c,d,m,p=m||(m=o("react")),_=m,f=_.useCallback,g=_.useContext,h=r("requireDeferred")("C4gEngagementFalcoEvent").__setRef("MWInboxInfoQuickActions.react"),y={container:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0},item:{paddingInlineEnd:"x1im30kd",paddingInlineStart:"x1c1uobl",width:"xni59qk",$$css:!0}};function C(e){var t=o("react-compiler-runtime").c(67),n=e.hasEncryptionPill,a=e.preloadSearchPage,l=e.thread,m=n===void 0?!1:n,_=(u||(u=r("useReStore")))(),f=o("MWPActor.react").useActor(),h=l.threadKey,C=l.threadType,v=r("MessengerWebUXLogger").useInteractionLogger(),S,R;t[0]!==f||t[1]!==_||t[2]!==h||t[3]!==C?(S=function(){return r("queryMWLSOtherParticipantContact")(_,h,C,f,["blockedByViewerStatus","contactTypeExact","id","secondaryName"])},R=[_,f,h,C],t[0]=f,t[1]=_,t[2]=h,t[3]=C,t[4]=S,t[5]=R):(S=t[4],R=t[5]);var L=o("ReQLSuspense").useFirst(S,R,i.id+":122"),E;t[6]!==L||t[7]!==C?(E=L==null&&(c||(c=o("I64"))).equal(C,(d||(d=o("LSIntEnum"))).ofNumber(15)),t[6]=L,t[7]=C,t[8]=E):E=t[8];var k=E,I=r("useCommunityFolder")(l),T;t[9]===Symbol.for("react.memo_cache_sentinel")?(T={},t[9]=T):T=t[9];var D=r("useMWXEntryPointDialog")(r("MWCMBulkInviteDialog.entrypoint"),T),x=D[0],$=b,P=o("BroadcastChannelQPL").useLogMuteChannelStart(l.threadType),N=o("BroadcastChannelQPL").useLogMuteChannelDialogRendered(l.threadType),M;if(t[10]!==I){var w;M=I!=null?(c||(c=o("I64"))).to_int32((w=I.enableState)!=null?w:(c||(c=o("I64"))).one)===r("CommunityMessagingEnableState").DISABLE_REQUESTED:!1,t[10]=I,t[11]=M}else M=t[11];var A=M,F;t[12]!==A||t[13]!==l?(F=o("LSThreadBitOffset").has(120,l)&&!A,t[12]=A,t[13]=l,t[14]=F):F=t[14];var O=F,B;t[15]!==k||t[16]!==l?(B=o("LSThreadBitOffset").has(19,l)&&!k,t[15]=k,t[16]=l,t[17]=B):B=t[17];var W=B,q;t[18]!==l?(q=o("LSThreadBitOffset").has(8,l),t[18]=l,t[19]=q):q=t[19];var U=q,V;t[20]===Symbol.for("react.memo_cache_sentinel")?(V=s._(/*BTDS*/"Profile"),t[20]=V):V=t[20];var H=V,G;t[21]===Symbol.for("react.memo_cache_sentinel")?(G=s._(/*BTDS*/"Invite"),t[21]=G):G=t[21];var z=G,j;t[22]===Symbol.for("react.memo_cache_sentinel")?(j=s._(/*BTDS*/"Unmute"),t[22]=j):j=t[22];var K=j,Q;t[23]===Symbol.for("react.memo_cache_sentinel")?(Q=s._(/*BTDS*/"Mute"),t[23]=Q):Q=t[23];var X=Q,Y;t[24]!==N||t[25]!==P?(Y=function(t,n,a,i,l){return p.jsxs(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:l?K:X,children:[p.jsx(r("MWXColumnItem.react"),{children:p.jsx(r("MWXCircleButton.react"),{"aria-label":a,icon:r(l?"MWXIconBellCross":"MWXIconBell"),onPress:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","quick_actions_mute."+(l?"unmute":"mute")),l||P(),t(),N()},size:36,testid:void 0})}),p.jsx(r("MWXColumnItem.react"),{paddingTop:8,children:p.jsx(r("MWXText.react"),{align:"center",color:"primary",numberOfLines:2,testid:void 0,type:"body4",children:l?K:X})})]})},t[24]=N,t[25]=P,t[26]=Y):Y=t[26];var J;t[27]!==Y||t[28]!==l?(J=p.jsx(r("MWInboxInfoNotifications.react"),{entryPoint:"thread_details",thread:l,children:Y}),t[27]=Y,t[28]=l,t[29]=J):J=t[29];var Z=J,ee=g(o("MWPConversationSearchContext.react").context),te;t[30]!==ee?(te=r("nullthrows")(ee),t[30]=ee,t[31]=te):te=t[31];var ne=te,re=ne.isConversationSearchVisible,oe=ne.setIsConversationSearchVisible,ae=ne.setNavigation,ie=g(r("MWResponsiveLayoutContext.react")),le;t[32]!==re||t[33]!==ie||t[34]!==v||t[35]!==oe||t[36]!==ae||t[37]!==h||t[38]!==C?(le=function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","quick_actions_toggle_search");var e=r("isMWNewSearchUXEnabled")()?!0:!re;if(ae(e?{state:o("MWPConversationSearchContext.react").SearchNavigationState.NAVIGATED,targetThreadKey:h}:void 0),o("MWResponsiveLayoutShowState").getCardShowState(o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL,ie)==="hidden"){r("MWPConversationSearchLogger").logMessageSearchStart(h,C),oe(!0),r("isMWNewSearchUXEnabled")()||ie.pushCard(o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL);return}e?(v==null||v({eventName:"open_search_in_conversation",threadType:C}),r("MWPConversationSearchLogger").logMessageSearchStart(h,C)):r("isMWNewSearchUXEnabled")()||r("MWPConversationSearchLogger").logMessageSearchEnd(),oe(e)},t[32]=re,t[33]=ie,t[34]=v,t[35]=oe,t[36]=ae,t[37]=h,t[38]=C,t[39]=le):le=t[39];var se=le,ue;t[40]!==se||t[41]!==a||t[42]!==l.threadType?(ue=!o("LSMessagingThreadTypeUtil").isArmadilloSecure(l.threadType)||r("isE2EEConversationSearchEnabled")()?p.jsx(r("MWXRowItem.react"),{xstyle:y.item,children:p.jsx(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:s._(/*BTDS*/"Search"),children:p.jsxs(r("MWXColumn.react"),{align:"center",children:[p.jsx(r("MWXColumnItem.react"),{children:p.jsx(r("MWXCircleButton.react"),{"aria-label":s._(/*BTDS*/"Search"),icon:r("MWXIconMagnifyingGlass"),onFocusIn:a,onHoverIn:a,onPress:se,size:36})}),p.jsx(r("MWXColumnItem.react"),{paddingTop:8,children:p.jsx(r("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:s._(/*BTDS*/"Search")})})]})})}):null,t[40]=se,t[41]=a,t[42]=l.threadType,t[43]=ue):ue=t[43];var ce=ue,de;t[44]!==O||t[45]!==I||t[46]!==x||t[47]!==l.threadKey?(de=I!=null&&O?p.jsx(r("MWXRowItem.react"),{xstyle:y.item,children:p.jsx(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:z,children:p.jsxs(r("MWXColumn.react"),{align:"center",children:[p.jsx(r("MWXColumnItem.react"),{children:p.jsx(r("MWXCircleButton.react"),{"aria-label":z,icon:r("MWXIconFriendGenericAdd"),onPress:function(t){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","quick_actions_direct_invite"),$((c||(c=o("I64"))).to_string(l.threadKey),c.to_string(I.fbGroupId),c.to_string(I.folderId)),x({fbThreadId:c.to_string(l.threadKey),parentSurface:"thread_settings",source:"invite_button",surface:"thread_settings"})},size:36})}),p.jsx(r("MWXColumnItem.react"),{paddingTop:8,children:p.jsx(r("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:z})})]})})}):null,t[44]=O,t[45]=I,t[46]=x,t[47]=l.threadKey,t[48]=de):de=t[48];var me=de,pe=m?12:20,_e;t[49]!==l?(_e=o("LSMessagingThreadTypeUtil").isPageToUserThread(l.threadSubtype)&&r("MWShareThreadQuickAction.react")!=null&&p.jsx(r("MWXRowItem.react"),{xstyle:y.item,children:p.jsx(r("MWXColumn.react"),{align:"center",children:p.jsx(r("MWShareThreadQuickAction.react"),{thread:l})})}),t[49]=l,t[50]=_e):_e=t[50];var fe;t[51]!==l?(fe=o("LSMessagingThreadTypeUtil").isDiscoverableChannel(l.threadType)&&p.jsx(r("MWXRowItem.react"),{xstyle:y.item,children:p.jsx(r("MWXColumn.react"),{align:"center",children:p.jsx(r("MWShareChannelQuickAction.react"),{channelThread:l})})}),t[51]=l,t[52]=fe):fe=t[52];var ge;t[53]!==U||t[54]!==L?(ge=L!=null&&!(c||(c=o("I64"))).equal(L==null?void 0:L.contactTypeExact,(d||(d=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB))&&U?p.jsx(r("MWXRowItem.react"),{xstyle:y.item,children:p.jsx(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:H,children:p.jsxs(r("MWXColumn.react"),{align:"center",children:[p.jsx(r("MWXColumnItem.react"),{children:p.jsx(r("MWXCircleButton.react"),{"aria-label":H,icon:r("MWXIconProfile"),linkProps:{target:"_blank",url:r("getLSContactHref")(L)},size:36,testid:void 0})}),p.jsx(r("MWXColumnItem.react"),{paddingTop:8,children:p.jsx(r("MWXText.react"),{align:"center",color:"primary",numberOfLines:1,type:"body4",children:H})})]})})}):null,t[53]=U,t[54]=L,t[55]=ge):ge=t[55];var he;t[56]!==W||t[57]!==Z?(he=W?p.jsx(r("MWXRowItem.react"),{xstyle:y.item,children:p.jsx(r("MWXColumn.react"),{align:"center",children:p.jsx(r("MWXColumnItem.react"),{children:Z})})}):null,t[56]=W,t[57]=Z,t[58]=he):he=t[58];var ye;return t[59]!==me||t[60]!==ce||t[61]!==pe||t[62]!==_e||t[63]!==fe||t[64]!==ge||t[65]!==he?(ye=p.jsxs(r("MWXRow.react"),{align:"center",paddingTop:pe,paddingVertical:0,spacingHorizontal:32,xstyle:y.container,children:[_e,fe,me,ge,he,ce]}),t[59]=me,t[60]=ce,t[61]=pe,t[62]=_e,t[63]=fe,t[64]=ge,t[65]=he,t[66]=ye):ye=t[66],ye}function b(e,t,n){h.onReady(function(r){r.log(function(){return{action:"tap",community_id:n,event:"render_direct_invite_sheet",group_id:t,thread_id:e}})})}function v(t){var n=o("react-compiler-runtime").c(12),a,l;n[0]!==t?(l=t.threadKey,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=l):(a=n[1],l=n[2]);var s=(u||(u=r("useReStore")))(),c;n[3]!==s.tables.threads||n[4]!==l?(c=function(){return o("ReQL").fromTableAscending(s.tables.threads,["muteCallsExpireTimeMs","muteExpireTimeMs","parentThreadKey","threadKey","threadType","threadSubtype","threadInviteLink"].concat(o("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(l)},n[3]=s.tables.threads,n[4]=l,n[5]=c):c=n[5];var d;n[6]!==s||n[7]!==l?(d=[s,l],n[6]=s,n[7]=l,n[8]=d):d=n[8];var m=o("ReQLSuspense").useFirst(c,d,i.id+":462");if(m==null)return null;var _;return n[9]!==a||n[10]!==m?(_=p.jsx(C,babelHelpers.extends({},a,{thread:m})),n[9]=a,n[10]=m,n[11]=_):_=n[11],_}l.default=v}),226);
__d("MWInboxInfoDetailsSection.react",["fbt","CometPlaceholder.react","I64","LSContactLink.react","LSIntEnum","LSMessagingThreadTypeUtil","LSPageType","LSThreadBitOffset","LSThreadTitleWithContactWrapper.react","LSVerificationBadge.react","MWCMThreadTypes.react","MWInboxInfoDetailsSectionThreadPicture.react","MWInboxInfoDetailsSectionUnifiedPresenceStatusText.react","MWInboxInfoEncryptionPillWrapper.react","MWInboxInfoQuickActions.react","MWLSContactTypeExactUtils","MWLayoutBackButton.react","MWPActor.react","MWResponsiveLayoutConstants","MWXColumn.react","MWXColumnItem.react","MWXRow.react","MWXRowItem.react","MWXText.react","ReQL","ReQLSuspense","cr:4703","getMWV2OtherUser","gkx","react","react-compiler-runtime","usePageType","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react"));function p(t){var n=o("react-compiler-runtime").c(6),a=t.thread,l=(e||(e=r("useReStore")))(),s;n[0]!==l.tables.contacts||n[1]!==a.threadKey?(s=function(){return o("ReQL").fromTableAscending(l.tables.contacts,["contactTypeExact"]).getKeyRange(a.threadKey).filter(_)},n[0]=l.tables.contacts,n[1]=a.threadKey,n[2]=s):s=n[2];var d;n[3]!==l||n[4]!==a.threadKey?(d=[l,a.threadKey],n[3]=l,n[4]=a.threadKey,n[5]=d):d=n[5];var m=o("ReQLSuspense").useFirst(s,d,i.id+":79")!=null;return m&&(u||(u=o("I64"))).equal(a.threadType,(c||(c=o("LSIntEnum"))).ofNumber(1))&&a.nullstateDescriptionText1!=null?a.nullstateDescriptionText1:null}function _(e){var t=e.contactTypeExact;return o("MWLSContactTypeExactUtils").isIgContact(t)}var f=function(t){var e=t.memberCount,r=t.threadType,a=o("MWCMThreadTypes.react").isPrivateThread(r),i=o("MWCMThreadTypes.react").isBroadcastThread(r),l=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(r);return a?s._(/*BTDS*/"Invite only"):i?s._(/*BTDS*/"Broadcast"):l&&n("cr:4703")!=null&&e!=null?m.jsx(n("cr:4703"),{count:(u||(u=o("I64"))).to_int32(e)}):null};function g(e){var t=o("react-compiler-runtime").c(15),n=e.thread,a;t[0]!==n.threadType?(a=o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType),t[0]=n.threadType,t[1]=a):a=t[1];var i=a,l=o("MWCMThreadTypes.react").isPrivateThread(n.threadType),s=o("MWCMThreadTypes.react").isBroadcastThread(n.threadType),u=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(n.threadType),c=!i&&!u&&!l&&!s;if(c){var d;return t[2]!==n.threadKey||t[3]!==n.threadType?(d=m.jsx(r("MWXColumnItem.react"),{align:"center",children:m.jsx(r("MWInboxInfoDetailsSectionUnifiedPresenceStatusText.react"),{threadKey:n.threadKey,threadType:n.threadType})}),t[2]=n.threadKey,t[3]=n.threadType,t[4]=d):d=t[4],d}var p;t[5]!==n?(p=f(n),t[5]=n,t[6]=p):p=t[6];var _=p,g;t[7]!==i||t[8]!==n.threadDescription?(g=i&&n.threadDescription!=null?m.jsx(r("MWXColumnItem.react"),{align:"center",paddingHorizontal:20,paddingTop:16,paddingVertical:0,children:m.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:n.threadDescription})}):null,t[7]=i,t[8]=n.threadDescription,t[9]=g):g=t[9];var h=g,y;t[10]!==_?(y=_!=null?m.jsx(r("MWXColumnItem.react"),{align:"center",paddingHorizontal:20,paddingTop:12,paddingVertical:0,testid:void 0,children:m.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:_})}):null,t[10]=_,t[11]=y):y=t[11];var C;return t[12]!==y||t[13]!==h?(C=m.jsxs(r("MWXColumnItem.react"),{children:[y,h]}),t[12]=y,t[13]=h,t[14]=C):C=t[14],C}function h(t){var n=o("react-compiler-runtime").c(13),a=t.thread,l=o("MWPActor.react").useActor(),s=(e||(e=r("useReStore")))(),u;n[0]!==s.tables.contacts||n[1]!==s.tables.participants||n[2]!==a.threadKey?(u=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(s.tables.participants,["contactId"]).getKeyRange(a.threadKey),o("ReQL").fromTableAscending(s.tables.contacts,["username"])).take(2)},n[0]=s.tables.contacts,n[1]=s.tables.participants,n[2]=a.threadKey,n[3]=u):u=n[3];var c;n[4]!==s||n[5]!==a.threadKey?(c=[s,a.threadKey],n[4]=s,n[5]=a.threadKey,n[6]=c):c=n[6];var d=o("ReQLSuspense").useArray(u,c,i.id+":211"),p;n[7]!==l||n[8]!==d||n[9]!==a.threadType?(p=r("getMWV2OtherUser")(a.threadType,d,l)||[],n[7]=l,n[8]=d,n[9]=a.threadType,n[10]=p):p=n[10];var _=p,f=_[1];if((f==null?void 0:f.username)==null||f.username.length<=0)return null;var g;return n[11]!==f.username?(g=m.jsx(r("MWXColumnItem.react"),{align:"center",paddingVertical:8,children:m.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:"meta4",children:f.username})}),n[11]=f.username,n[12]=g):g=n[12],g}function y(t){var n=o("react-compiler-runtime").c(53),a=t.preloadSearchPage,l=t.threadKey,d=(e||(e=r("useReStore")))(),_;n[0]!==d.tables.threads||n[1]!==l?(_=function(){return o("ReQL").fromTableAscending(d.tables.threads,["nullstateDescriptionText1","threadType","threadName","threadKey","threadDescription","memberCount"].concat(o("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(l)},n[0]=d.tables.threads,n[1]=l,n[2]=_):_=n[2];var f;n[3]!==d||n[4]!==l?(f=[d,l],n[3]=d,n[4]=l,n[5]=f):f=n[5];var y=o("ReQLSuspense").useFirst(_,f,i.id+":241"),b=r("usePageType")(l);if(y==null)return null;var v;n[6]!==y.threadType?(v=o("LSMessagingThreadTypeUtil").isArmadilloSecure(y.threadType),n[6]=y.threadType,n[7]=v):v=n[7];var S=v,R;n[8]!==y.threadType?(R=o("LSMessagingThreadTypeUtil").isDiscoverableChannel(y.threadType),n[8]=y.threadType,n[9]=R):R=n[9];var L=R,E=o("LSThreadBitOffset").has(8,y),k=E?C:void 0,I;n[10]!==k||n[11]!==y?(I=m.jsx(r("LSThreadTitleWithContactWrapper.react"),{thread:y,wrapOutput:k}),n[10]=k,n[11]=y,n[12]=I):I=n[12];var T;n[13]!==L||n[14]!==l?(T=L?null:m.jsx("span",{className:"xxymvpz",children:m.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWInboxInfoDetailsSection.VerificationBadge",children:m.jsx(r("LSVerificationBadge.react"),{size:"large",threadKey:l})})}),n[13]=L,n[14]=l,n[15]=T):T=n[15];var D;n[16]!==I||n[17]!==T?(D=m.jsx(r("MWXRowItem.react"),{children:m.jsxs(r("MWXText.react"),{align:"center",isSemanticHeading:!0,type:"headlineEmphasized3",children:[I,T]})}),n[16]=I,n[17]=T,n[18]=D):D=n[18];var x=D,$=y.threadDescription!=null&&y.threadDescription.length>0&&L,P;n[19]===Symbol.for("react.memo_cache_sentinel")?(P=r("MWLayoutBackButton.react")!=null?m.jsx("div",{className:"x1r4y97 x10l6tqk x1eu8d0j x1vjfegm",children:m.jsx(r("MWLayoutBackButton.react"),{panel:o("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL})}):null,n[19]=P):P=n[19];var N;n[20]!==l?(N=m.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:16,paddingVertical:12,children:m.jsx(r("MWInboxInfoDetailsSectionThreadPicture.react"),{threadKey:l})}),n[20]=l,n[21]=N):N=n[21];var M;n[22]!==x?(M=m.jsx(r("MWXRow.react"),{align:"center",paddingVertical:0,spacing:0,children:x}),n[22]=x,n[23]=M):M=n[23];var w;n[24]!==b?(w=b!=null&&(u||(u=o("I64"))).equal(b,(c||(c=o("LSIntEnum"))).ofNumber(r("LSPageType").AI))?m.jsx(r("MWXRow.react"),{children:m.jsx(r("MWXRowItem.react"),{children:m.jsx(r("MWXText.react"),{align:"center",color:"primary",type:"body3",children:s._(/*BTDS*/"AI")})})}):null,n[24]=b,n[25]=w):w=n[25];var A;n[26]!==y?(A=m.jsx(r("MWXColumnItem.react"),{children:m.jsx(p,{thread:y})}),n[26]=y,n[27]=A):A=n[27];var F;n[28]!==M||n[29]!==w||n[30]!==A?(F=m.jsxs(r("MWXColumnItem.react"),{align:"center",paddingHorizontal:16,paddingVertical:0,children:[M,w,A]}),n[28]=M,n[29]=w,n[30]=A,n[31]=F):F=n[31];var O;n[32]!==y?(O=r("gkx")("23433")&&r("gkx")("772")?m.jsx(h,{thread:y}):null,n[32]=y,n[33]=O):O=n[33];var B;n[34]!==y?(B=m.jsx(g,{thread:y}),n[34]=y,n[35]=B):B=n[35];var W;n[36]!==$||n[37]!==y.threadDescription?(W=$&&m.jsx(r("MWXColumnItem.react"),{align:"center",paddingHorizontal:20,paddingTop:12,paddingVertical:0,testid:void 0,children:m.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:y.threadDescription})}),n[36]=$,n[37]=y.threadDescription,n[38]=W):W=n[38];var q;n[39]!==S?(q=S?m.jsx(r("MWInboxInfoEncryptionPillWrapper.react"),{}):null,n[39]=S,n[40]=q):q=n[40];var U;n[41]!==S||n[42]!==a||n[43]!==l?(U=m.jsx(r("MWXColumnItem.react"),{children:m.jsx(r("MWInboxInfoQuickActions.react"),{hasEncryptionPill:S,preloadSearchPage:a,threadKey:l})}),n[41]=S,n[42]=a,n[43]=l,n[44]=U):U=n[44];var V;return n[45]!==N||n[46]!==F||n[47]!==O||n[48]!==B||n[49]!==W||n[50]!==q||n[51]!==U?(V=m.jsxs(m.Fragment,{children:[P,m.jsxs(r("MWXColumn.react"),{children:[N,F,O,B,W,q,U]})]}),n[45]=N,n[46]=F,n[47]=O,n[48]=B,n[49]=W,n[50]=q,n[51]=U,n[52]=V):V=n[52],V}function C(e,t){return m.jsx(r("LSContactLink.react"),{contact:e,testid:void 0,children:t})}C.displayName=C.name+" [from "+i.id+"]",l.default=y}),226);
__d("useInviteLink",["LSThreadBitOffset","MWCMLinkShare.react","cr:3777","cr:9028","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWCMInboxInfoGroupCopyLinkButton.react").__setRef("useInviteLink")),d=(e=n("cr:9028"))!=null?e:n("cr:3777");function m(e){var t=o("react-compiler-runtime").c(6),n=e.folder,r=e.isPublicChat,a=e.thread,i=o("MWCMLinkShare.react").useShouldShowInviteLink(a),l=o("LSThreadBitOffset").has(108,a);if(n!=null){var s;return t[0]!==n||t[1]!==i||t[2]!==a?(s=i?u.jsx(c,{folder:n,thread:a},"link"):null,t[0]=n,t[1]=i,t[2]=a,t[3]=s):s=t[3],s}if(l&&r){var m;return t[4]!==a?(m=d!=null?u.jsx(d,{threadKey:a.threadKey},"link"):null,t[4]=a,t[5]=m):m=t[5],m}return null}l.default=m}),98);
__d("MWInboxInfoGroupInfoSectionWrapper.react",["fbt","CometPlaceholder.react","I64","LSCommunityBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MWCMThreadTypes.react","MWInboxPersistedUIState","MWMemberListGlimmer.react","MWPBumpEntityKey","MWXCollapsible.react","deferredLoadComponent","gkx","mwCMisStandAloneCommunity","react","react-compiler-runtime","requireDeferredForDisplay","useCommunityFolder","useInviteLink","useMWLSIsViewerThreadAdminUsingThreadKey"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=e||(e=o("react")),m=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInboxInfoGroupInfoSection.react").__setRef("MWInboxInfoGroupInfoSectionWrapper.react"));function p(e){var t=o("react-compiler-runtime").c(65),n=e.pushPage,a=e.thread,i;t[0]!==a.threadType?(i=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType),t[0]=a.threadType,t[1]=i):i=t[1];var l=i,p=r("useMWLSIsViewerThreadAdminUsingThreadKey")(a.threadKey),_=o("MWInboxPersistedUIState").usePersistedUIState(l,"__MWInboxInfoGroupInfoSection.isOpen__"),f=_[0],g=_[1],h=r("useCommunityFolder")(a),y;t[2]!==l||t[3]!==a.threadType?(y=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType)||l,t[2]=l,t[3]=a.threadType,t[4]=y):y=t[4];var C=y,b;t[5]!==a.threadType?(b=o("LSMessagingThreadTypeUtil").isDiscoverableChannel(a.threadType),t[5]=a.threadType,t[6]=b):b=t[6];var v=b,S=h==null?void 0:h.communityType,R;t[7]!==S?(R=r("mwCMisStandAloneCommunity")(S),t[7]=S,t[8]=R):R=t[8];var L=R,E;t[9]!==h||t[10]!==C||t[11]!==a?(E={folder:h,isPublicChat:C,thread:a},t[9]=h,t[10]=C,t[11]=a,t[12]=E):E=t[12];var k=r("useInviteLink")(E),I;t[13]!==a?(I=o("LSThreadBitOffset").has(106,a),t[13]=a,t[14]=I):I=t[14];var T=I,D;t[15]!==a.parentThreadKey?(D=(u||(u=o("I64"))).equal(a.parentThreadKey,(c||(c=o("LSIntEnum"))).ofNumber(-1)),t[15]=a.parentThreadKey,t[16]=D):D=t[16];var x=D,$;t[17]!==a.parentThreadKey?($=(u||(u=o("I64"))).equal(a.parentThreadKey,(c||(c=o("LSIntEnum"))).ofNumber(-3)),t[17]=a.parentThreadKey,t[18]=$):$=t[18];var P=$,N;t[19]!==T||t[20]!==x||t[21]!==P||t[22]!==a.threadType?(N=!x&&!P&&(o("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)?T&&r("gkx")("4552"):T),t[19]=T,t[20]=x,t[21]=P,t[22]=a.threadType,t[23]=N):N=t[23];var M=N,w;t[24]!==h?(w=h!=null?o("LSCommunityBitOffset").has(62,h):!1,t[24]=h,t[25]=w):w=t[25];var A=w,F;t[26]!==a?(F=o("LSThreadBitOffset").has(195,a)&&o("MWCMThreadTypes.react").isJoinedCMThread(a.threadType),t[26]=a,t[27]=F):F=t[27];var O=F,B;t[28]!==C||t[29]!==a?(B=C&&!o("MWCMThreadTypes.react").isStandardCMThread(a.threadType)&&o("LSThreadBitOffset").has(66,a),t[28]=C,t[29]=a,t[30]=B):B=t[30];var W=B,q;if(t[31]!==a){var U;q=o("LSThreadBitOffset").has(94,a)||a.needsAdminApprovalForNewParticipant===!0&&(u||(u=o("I64"))).to_int32((U=a.joinRequestApprovalSetting)!=null?U:(u||(u=o("I64"))).minus_one)===1,t[31]=a,t[32]=q}else q=t[32];var V=q,H;t[33]!==V||t[34]!==a?(H=o("MWCMThreadTypes.react").isJoinedCMThread(a.threadType)&&o("LSThreadBitOffset").has(66,a)&&V,t[33]=V,t[34]=a,t[35]=H):H=t[35];var G=H,z=o("MAWThreadCutover").useIsDualThreadCutoverSecureThread(a.threadKey),j=o("MAWThreadCutover").useOpenThreadIfExistsFromCutoverThread(a.threadKey)==null,K=z&&!j,Q=v||A||h!=null&&o("LSCommunityBitOffset").has(3,h)||O||k!=null||h!=null&&!L||M||W&&r("gkx")("24112")!=null||G||K;if(Q){var X;t[36]!==a.threadType?(X=[150,151,154,155,152,153].some(function(e){return(u||(u=o("I64"))).equal((c||(c=o("LSIntEnum"))).ofNumber(e),a.threadType)}),t[36]=a.threadType,t[37]=X):X=t[37];var Y=X,J;t[38]!==Y?(J=Y?s._(/*BTDS*/"Channel info"):s._(/*BTDS*/"Chat info"),t[38]=Y,t[39]=J):J=t[39];var Z=J,ee;t[40]!==f||t[41]!==g?(ee=function(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","group_info_section."+(f?"close":"open")),g(function(){return!f})},t[40]=f,t[41]=g,t[42]=ee):ee=t[42];var te;t[43]===Symbol.for("react.memo_cache_sentinel")?(te=d.jsx(r("MWMemberListGlimmer.react"),{}),t[43]=te):te=t[43];var ne;t[44]!==h||t[45]!==k||t[46]!==p||t[47]!==v||t[48]!==L||t[49]!==A||t[50]!==M||t[51]!==K||t[52]!==G||t[53]!==W||t[54]!==O?(ne={folder:h,inviteLink:k,isAdmin:p,isChannel:v,isSMCC:L,shouldShowBotEntryPoint:A,shouldShowPinnedMessagesLink:M,shouldShowViewArchivedOpenThread:K,showCMMemberRequestsMenuItem:G,showPublicChatMemberRequests:W,showSubthreadListButton:O},t[44]=h,t[45]=k,t[46]=p,t[47]=v,t[48]=L,t[49]=A,t[50]=M,t[51]=K,t[52]=G,t[53]=W,t[54]=O,t[55]=ne):ne=t[55];var re;t[56]!==n||t[57]!==ne||t[58]!==a?(re=d.jsx(r("CometPlaceholder.react"),{fallback:te,name:"MWInboxInfoGroupInfoSectionWrapper",children:d.jsx(m,{pushPage:n,thread:a,utilities:ne})}),t[56]=n,t[57]=ne,t[58]=a,t[59]=re):re=t[59];var oe;return t[60]!==f||t[61]!==Z||t[62]!==ee||t[63]!==re?(oe=d.jsx(r("MWXCollapsible.react"),{isOpen:f,label:Z,onPress:ee,testid:void 0,children:re}),t[60]=f,t[61]=Z,t[62]=ee,t[63]=re,t[64]=oe):oe=t[64],oe}return null}l.default=p}),226);
__d("MWInboxInfoMembersSection.react",["fbt","CometPlaceholder.react","I64","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWInboxInfoMembersSectionStorageKey","MWInboxPersistedUIState","MWMemberListGlimmer.react","MWPBumpEntityKey","MWXCollapsible.react","ReQL","ReQLSuspense","deferredLoadComponent","intlSummarizeNumber","mwCMIsAnyCMThread","react","react-compiler-runtime","requireDeferredForDisplay","useCommunityFolder","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInfoMemberListWrapper.react").__setRef("MWInboxInfoMembersSection.react"));function p(t){var n,a,l=o("react-compiler-runtime").c(30),c=t.thread,p=o("MWInboxPersistedUIState").usePersistedUIState(!1,o("MWInboxInfoMembersSectionStorageKey").storageKey),f=p[0],g=p[1],h=r("useCommunityFolder")(c),y=c.threadType,C;l[0]!==y?(C=r("mwCMIsAnyCMThread")(y),l[0]=y,l[1]=C):C=l[1];var b=C,v;l[2]!==y?(v=o("MWCMThreadTypes.react").isBroadcastThread(y),l[2]=y,l[3]=v):v=l[3];var S=v,R=(e||(e=r("useReStore")))(),L=(n=(a=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(R.tables.threads,["memberCount"]).getKeyRange(c.threadKey)},[R,c.threadKey],i.id+":68"))==null?void 0:a.memberCount)!=null?n:(u||(u=o("I64"))).zero,E;l[4]!==L?(E=L!=null?"("+r("intlSummarizeNumber")((u||(u=o("I64"))).to_int32(L))+")":"",l[4]=L,l[5]=E):E=l[5];var k=E,I;l[6]!==c.threadType?(I=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(c.threadType),l[6]=c.threadType,l[7]=I):I=l[7];var T=I,D;l[8]!==c.threadType?(D=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(c.threadType),l[8]=c.threadType,l[9]=D):D=l[9];var x=D,$;l[10]!==h||l[11]!==S||l[12]!==b||l[13]!==x||l[14]!==T||l[15]!==k?($=h!=null&&S?s._(/*BTDS*/"Contributors"):h!=null&&b?s._(/*BTDS*/"Chat members {member_count}",[s._param("member_count",k)]):T||x?s._(/*BTDS*/"Channel members"):s._(/*BTDS*/"Chat members"),l[10]=h,l[11]=S,l[12]=b,l[13]=x,l[14]=T,l[15]=k,l[16]=$):$=l[16];var P=$,N;l[17]!==f||l[18]!==g?(N=function(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","chat_members_section."+(f?"close":"open")),g(_)},l[17]=f,l[18]=g,l[19]=N):N=l[19];var M;l[20]===Symbol.for("react.memo_cache_sentinel")?(M=d.jsx(r("MWMemberListGlimmer.react"),{}),l[20]=M):M=l[20];var w;l[21]!==h||l[22]!==b||l[23]!==c?(w=d.jsx(r("CometPlaceholder.react"),{fallback:M,name:"MWInboxInfoMembersSection",children:d.jsx(m,{folder:h,isCMThread:b,thread:c})}),l[21]=h,l[22]=b,l[23]=c,l[24]=w):w=l[24];var A;return l[25]!==f||l[26]!==P||l[27]!==N||l[28]!==w?(A=d.jsx(r("MWXCollapsible.react"),{isOpen:f,label:P,onPress:N,children:w}),l[25]=f,l[26]=P,l[27]=N,l[28]=w,l[29]=A):A=l[29],A}function _(e){return!e}l.default=p}),226);
__d("MWInboxInfoPendingRequestsSection.react",["fbt","I64","MWInboxInfoPendingRequest.react","MWInboxPersistedUIState","MWXCollapsible.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react"));function m(t){var n=o("react-compiler-runtime").c(21),a=t.isOpenInitial_TEST_ONLY,l=t.threadKey,c=a===void 0?!1:a,m=o("MWInboxPersistedUIState").usePersistedUIState(c,"__MWInboxInfoPendingRequestsSection.isOpen__"),p=m[0],_=m[1],f=(e||(e=r("useReStore")))(),g;n[0]!==f.tables.group_membership_approval_requests||n[1]!==l?(g=function(){return o("ReQL").fromTableAscending(f.tables.group_membership_approval_requests).getKeyRange(l)},n[0]=f.tables.group_membership_approval_requests,n[1]=l,n[2]=g):g=n[2];var h;n[3]!==f||n[4]!==l?(h=[f,l],n[3]=f,n[4]=l,n[5]=h):h=n[5];var y=o("ReQLSuspense").useArray(g,h,i.id+":34"),C;if(n[6]!==y||n[7]!==l){var b;n[9]!==l?(b=function(t){return d.jsx(r("MWInboxInfoPendingRequest.react"),{memberApprovalRequest:t,threadKey:l},(u||(u=o("I64"))).to_string(t.contactId))},n[9]=l,n[10]=b):b=n[10],C=y.map(b),n[6]=y,n[7]=l,n[8]=C}else C=n[8];var v=C,S=v.length;if(S===0)return null;var R;n[11]!==S?(R=s._(/*BTDS*/"Member requests ({memberRequestCount})",[s._param("memberRequestCount",String(S))]),n[11]=S,n[12]=R):R=n[12];var L;n[13]!==p||n[14]!==_?(L=function(){return _(function(){return!p})},n[13]=p,n[14]=_,n[15]=L):L=n[15];var E;return n[16]!==p||n[17]!==v||n[18]!==R||n[19]!==L?(E=d.jsx(r("MWXCollapsible.react"),{isOpen:p,label:R,onPress:L,children:v}),n[16]=p,n[17]=v,n[18]=R,n[19]=L,n[20]=E):E=n[20],E}l.default=m}),226);
__d("MWInboxInfoIgnoreMessages.react",["fbt","I64","JSResourceForInteraction","LsIgnoreTappedFalcoEvent","MWInboxInfoButton.react","MWPBumpEntityKey","MWXIconForListCell.react","MWXIconMessageCross","coerceMessagingThreadTypeToLSThreadType","react","react-compiler-runtime","useMWXLazyDialog","uuidv4"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=r("JSResourceForInteraction")("MWChatIgnoreMessagesDialog.react").__setRef("MWInboxInfoIgnoreMessages.react");function m(e){var t=o("react-compiler-runtime").c(9),n=e.thread,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Ignore messages"),t[0]=a):a=t[0];var i=a,l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=r("uuidv4")(),t[1]=l):l=t[1];var m=l,_=r("useMWXLazyDialog")(d),f=_[0],g;t[2]!==f||t[3]!==n?(g=function(){return f({entryPoint:19,thread:n,uuid:m},p)},t[2]=f,t[3]=n,t[4]=g):g=t[4];var h=g,y;t[5]===Symbol.for("react.memo_cache_sentinel")?(y=c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMessageCross")}),t[5]=y):y=t[5];var C;return t[6]!==h||t[7]!==n?(C=c.jsx(r("MWInboxInfoButton.react"),{addOnStart:y,label:i,onPress:function(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","privacy_support_section_ignore"),r("LsIgnoreTappedFalcoEvent").log(function(){return{entry_point:{entry_point:19},extra_data_map:{},thread:{id:(u||(u=o("I64"))).to_string(n.threadKey),type:r("coerceMessagingThreadTypeToLSThreadType")(n.threadType)},uuid:m}}),h()},testid:void 0}),t[6]=h,t[7]=n,t[8]=C):C=t[8],C}function p(){}l.default=m}),226);
__d("MWXIconLeave",["MWXSvgIcon","SVGIcon","cr:22382","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22382")),r("gkx")("23219"));l.default=e}),98);
__d("MWInboxInfoFRXListCell.react",["fbt","MWInboxInfoButton.react","react","react-compiler-runtime","useMWInboxInfoFRX"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(12),n=e.addOnStart,a=e.onPress,i=e.primaryText,l=e.secondaryText,c=e.thread,d;t[0]!==i?(d=i===void 0?s._(/*BTDS*/"Report"):i,t[0]=i,t[1]=d):d=t[1];var m=d,p;t[2]!==a||t[3]!==c?(p={messagingEntrypoint:"thread_details",onPress:a,thread:c},t[2]=a,t[3]=c,t[4]=p):p=t[4];var _=r("useMWInboxInfoFRX")(p),f;t[5]!==_?(f=function(){return _()},t[5]=_,t[6]=f):f=t[6];var g;return t[7]!==n||t[8]!==m||t[9]!==l||t[10]!==f?(g=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:n,label:m,onPress:f,subLabel:l,testid:void 0}),t[7]=n,t[8]=m,t[9]=l,t[10]=f,t[11]=g):g=t[11],g}l.default=c}),226);
__d("MWInboxInfoFRXListCellOverflow.react",["fbt","MWInboxInfoButton.react","MWXDeferredPopoverTrigger.react","MWXIconCautionTriangle","MWXIconForListCell.react","emptyFunction","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("requireDeferred")("MWInboxInfoFRXOverflowMenu.react").__setRef("MWInboxInfoFRXListCellOverflow.react");function d(e){var t=o("react-compiler-runtime").c(2),n=e.thread,a;return t[0]!==n?(a=u.jsx(r("MWXDeferredPopoverTrigger.react"),{align:"end",popoverProps:{onClose:r("emptyFunction"),thread:n},popoverResource:c,position:"below",children:m}),t[0]=n,t[1]=a):a=t[1],a}function m(e,t){return u.jsx(r("MWInboxInfoButton.react"),{addOnStart:u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconCautionTriangle")}),label:s._(/*BTDS*/"Report"),onPress:t,ref:e})}m.displayName=m.name+" [from "+i.id+"]",l.default=d}),226);
__d("getMWInboxInfoReportMessageItems.react",["fbt","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWBReportingLogger","MWCMInboxInfoGroupReportAdminButton.react","MWInboxInfoFRXListCell.react","MWInboxInfoFRXListCellOverflow.react","MWPBumpEntityKey","MWXIconForListCell.react","MWXIconReport","gkx","mwCMIsAnyCMThread","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("LSThreadBitOffset").has(17,e),n=o("LSThreadBitOffset").has(88,e),a=r("mwCMIsAnyCMThread")(e.threadType),i=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(e.threadType),l=o("LSMessagingThreadTypeUtil").isSocialChannel(e.threadType),c=r("gkx")("24042"),d=c&&t&&n&&a;return d?[u.jsx(r("MWInboxInfoFRXListCellOverflow.react"),{thread:e},"frxoverflow")]:[n&&a?u.jsx(r("MWCMInboxInfoGroupReportAdminButton.react"),{thread:e},"cmreport"):null,t?u.jsx(r("MWInboxInfoFRXListCell.react"),{addOnStart:u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconReport")}),onPress:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","privacy_support_section_something_wrong"),o("MWBReportingLogger").logReportingStart("chat_tab")},secondaryText:i||l?s._(/*BTDS*/"Give feedback and report the channel"):s._(/*BTDS*/"Give feedback and report the conversation"),thread:e},"frxfeedback"):null]}l.default=c}),226);
__d("useMAWIsEphemeralSettingEnabled",["I64","LSContactBitOffset","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MAWMessageRequestUtil","MWPActor.react","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n,a=o("react-compiler-runtime").c(21),l=o("MWPActor.react").useActor(),c=(u||(u=r("useReStore")))(),p;a[0]!==l||a[1]!==c.tables.contacts||a[2]!==c.tables.participants||a[3]!==t.threadKey||a[4]!==t.threadType?(p=function(){return o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType)?o("ReQL").mergeJoin(o("ReQL").fromTableAscending(c.tables.participants,[]).getKeyRange(t.threadKey),o("ReQL").fromTableAscending(c.tables.contacts,["id","blockedByViewerStatus","contactViewerRelationship"].concat(o("LSContactBitOffset").contactCapabilityFields))).filter(function(t){var n=t[1];return!(e||(e=o("I64"))).equal(n.id,l)}).map(m):o("ReQL").empty()},a[0]=l,a[1]=c.tables.contacts,a[2]=c.tables.participants,a[3]=t.threadKey,a[4]=t.threadType,a[5]=p):p=a[5];var _;a[6]!==l||a[7]!==c||a[8]!==t.threadKey||a[9]!==t.threadType?(_=[t.threadType,t.threadKey,c,l],a[6]=l,a[7]=c,a[8]=t.threadKey,a[9]=t.threadType,a[10]=_):_=a[10];var f=o("ReQLSuspense").useFirst(p,_,i.id+":36"),g=(n=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(c.tables.threads,["lastActivityTimestampMs"]).getKeyRange(t.threadKey).map(d)},[c,t.threadKey],i.id+":60"))!=null?n:!1;if(f==null||t.folderName==null)return!1;var h;if(a[11]!==f){var y;h=(y=o("LSContactBitOffset").has(64,f))!=null?y:!1,a[11]=f,a[12]=h}else h=a[12];var C=h,b;a[13]!==f.blockedByViewerStatus?(b=(e||(e=o("I64"))).equal(f.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)),a[13]=f.blockedByViewerStatus,a[14]=b):b=a[14];var v=b,S;if(a[15]!==f){var R;S=(R=o("LSContactBitOffset").has(0,f))!=null?R:!0,a[15]=f,a[16]=S}else S=a[16];var L=S,E;a[17]!==g||a[18]!==f||a[19]!==t.folderName?(E=o("MAWMessageRequestUtil").isMessageRequestV2(t.folderName,g,f),a[17]=g,a[18]=f,a[19]=t.folderName,a[20]=E):E=a[20];var k=E;return!k&&!C&&v&&L}function d(t){var n=t.lastActivityTimestampMs;return!(e||(e=o("I64"))).equal(n,e.zero)}function m(e){var t=e[1];return t}l.default=c}),98);
__d("MWInboxInfoPrivacyAndSupportSection.react",["fbt","BroadcastChannelQPL","CometErrorBoundary.react","CommunityMessagingEnableState","I64","LSIntEnum","LSMessageThreadUnsendabilityStatus","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMInboxDeleteButton.react","MWCMInboxInfoPauseButton.react","MWInboxInfoBlockMessages.react","MWInboxInfoButton.react","MWInboxInfoIgnoreMessages.react","MWInboxInfoMessengerRestrict.react","MWInboxInfoNotifications.react","MWInboxPersistedUIState","MWPActor.react","MWPBumpEntityKey","MWXCollapsible.react","MWXIconBell","MWXIconBellCross","MWXIconBlockCircle","MWXIconForListCell.react","MWXIconLeave","MessengerRestrictButtonSource","ReQL","ReQLSuspense","cr:20184","cr:4706","cr:7957","cr:9763","cr:9764","getMWInboxInfoReportMessageItems.react","mwCMIsAnyCMThread","react","react-compiler-runtime","useCommunityFolder","useIsThreadBlocked","useMAWIsEphemeralSettingEnabled","useMWIsViewerThreadAdmin.react","useMWLSCanLeaveGroup","useMWLSConfirmRemoveFromGroup","useMWNavigateAfterLeavingGroup","useMWPIsThreadMuted","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=u||(u=o("react"));function p(e){return(c||(c=o("I64"))).equal(e.threadType,(d||(d=o("LSIntEnum"))).ofNumber(1))&&e.cannotUnsendReason!=null&&(c||(c=o("I64"))).equal(e.cannotUnsendReason,(d||(d=o("LSIntEnum"))).ofNumber(r("LSMessageThreadUnsendabilityStatus").DENY_IF_PAGE_THREAD))}function _(t){var n=o("react-compiler-runtime").c(8),a=(e||(e=r("useReStore")))(),l=o("MWPActor.react").useActor(),s;n[0]!==l||n[1]!==a.tables.participants||n[2]!==t.threadKey?(s=function(){return o("ReQL").fromTableAscending(a.tables.participants,[]).getKeyRange(t.threadKey,l)},n[0]=l,n[1]=a.tables.participants,n[2]=t.threadKey,n[3]=s):s=n[3];var u;n[4]!==l||n[5]!==a||n[6]!==t.threadKey?(u=[a,l,t.threadKey],n[4]=l,n[5]=a,n[6]=t.threadKey,n[7]=u):u=n[7];var c=o("ReQLSuspense").useFirst(s,u,i.id+":107");return c!=null}function f(t){var a=o("react-compiler-runtime").c(101),l=t.pushPage,u=t.thread,f=(e||(e=r("useReStore")))(),b=o("MWPActor.react").useActor(),v,S;a[0]!==b||a[1]!==f||a[2]!==u.threadKey||a[3]!==u.threadType?(v=function(){return o("LSMessagingThreadTypeUtil").isOneToOne(u.threadType)?o("ReQL").fromTableAscending(f.tables.participants,["contactId"]).getKeyRange(u.threadKey).filter(function(e){return!(c||(c=o("I64"))).equal(e.contactId,b)}):o("ReQL").empty()},S=[f,u.threadKey,u.threadType,b],a[0]=b,a[1]=f,a[2]=u.threadKey,a[3]=u.threadType,a[4]=v,a[5]=S):(v=a[4],S=a[5]);var R=o("ReQLSuspense").useFirst(v,S,i.id+":142"),L=o("MWInboxPersistedUIState").usePersistedUIState(!1,"__MWInboxInfoPrivacyAndSupportSection.isOpen__"),E=L[0],k=L[1],I;a[6]!==u.threadType?(I=o("LSMessagingThreadTypeUtil").isArmadilloSecure(u.threadType),a[6]=u.threadType,a[7]=I):I=a[7];var T=I,D=R==null&&(c||(c=o("I64"))).equal(u.threadType,(d||(d=o("LSIntEnum"))).ofNumber(15)),x;a[8]!==u.threadType?(x=o("LSMessagingThreadTypeUtil").isDiscoverableChannel(u.threadType),a[8]=u.threadType,a[9]=x):x=a[9];var $=x,P;a[10]!==u.threadType?(P=r("mwCMIsAnyCMThread")(u.threadType),a[10]=u.threadType,a[11]=P):P=a[11];var N=P,M=r("useMWPIsThreadMuted")(u),w=r("useMAWIsEphemeralSettingEnabled")(u),A=r("useMWNavigateAfterLeavingGroup")(u),F=r("useMWLSConfirmRemoveFromGroup")(u,!0,!1,A),O=F[0],B=F[1],W=_(u),q=r("useCommunityFolder")(u),U=R!=null?R.contactId:void 0,V;a[12]!==T||a[13]!==u?(V=o("LSThreadBitOffset").has(32,u)&&!T,a[12]=T,a[13]=u,a[14]=V):V=a[14];var H=V,G;a[15]!==u?(G=o("LSThreadBitOffset").has(10,u),a[15]=u,a[16]=G):G=a[16];var z=G,j=r("useIsThreadBlocked")(),K;a[17]!==j||a[18]!==u?(K=o("LSThreadBitOffset").has(85,u)&&!j,a[17]=j,a[18]=u,a[19]=K):K=a[19];var Q=K,X=r("useMWLSCanLeaveGroup")(u),Y=o("LSThreadBitOffset").has(19,u)&&!D&&!j&&W,J;a[20]!==u?(J=o("LSThreadBitOffset").has(74,u),a[20]=u,a[21]=J):J=a[21];var Z=J,ee;a[22]!==u?(ee=o("LSThreadBitOffset").has(154,u),a[22]=u,a[23]=ee):ee=a[23];var te=ee,ne=r("useMWIsViewerThreadAdmin.react")(f,u.threadKey),re;a[24]!==ne||a[25]!==u?(re=(ne||o("LSMessagingThreadTypeUtil").isOneToOne(u.threadType))&&o("LSThreadBitOffset").has(267,u),a[24]=ne,a[25]=u,a[26]=re):re=a[26];var oe=re,ae;a[27]!==Z||a[28]!==N||a[29]!==$||a[30]!==q?(ae=Z&&($||N&&q!=null&&q.enableState!=null&&!(c||(c=o("I64"))).equal(q.enableState,(d||(d=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED))),a[27]=Z,a[28]=N,a[29]=$,a[30]=q,a[31]=ae):ae=a[31];var ie=ae,le;a[32]!==T||a[33]!==u.threadKey?(le=n("cr:9763")!=null&&T?m.jsx(n("cr:9763"),{threadKey:u.threadKey},"6"):null,a[32]=T,a[33]=u.threadKey,a[34]=le):le=a[34];var se=le,ue;a[35]!==w||a[36]!==u.threadKey?(ue=n("cr:4706")!=null?m.jsx(n("cr:4706"),{canUseEphemeralSetting:w,onDismiss:C,threadKey:u.threadKey,triggerLocation:"sidebar"},"4"):null,a[35]=w,a[36]=u.threadKey,a[37]=ue):ue=a[37];var ce=ue,de;a[38]!==T||a[39]!==M||a[40]!==q||a[41]!==u?(de=n("cr:9764")!=null&&T&&M?m.jsx(n("cr:9764"),{thread:u},"1"):m.jsx(r("MWInboxInfoNotifications.react"),{entryPoint:"thread_details",folder:q,thread:u,children:y},"2"),a[38]=T,a[39]=M,a[40]=q,a[41]=u,a[42]=de):de=a[42];var me=de,pe;a[43]!==u.threadType?(pe=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(u.threadType),a[43]=u.threadType,a[44]=pe):pe=a[44];var _e=pe,fe=o("BroadcastChannelQPL").useLogLeaveChannelStart(_e),ge=o("BroadcastChannelQPL").useLogLeaveChannelDialogRendered(_e),he=Y?me:null,ye;a[45]!==H||a[46]!==u?(ye=H?m.jsx(r("MWInboxInfoIgnoreMessages.react"),{thread:u},"3"):null,a[45]=H,a[46]=u,a[47]=ye):ye=a[47];var Ce;a[48]!==oe||a[49]!==l||a[50]!==u?(Ce=oe&&n("cr:7957")!=null?m.jsx(n("cr:7957"),{pushPage:l,thread:u},"limit_sharing"):null,a[48]=oe,a[49]=l,a[50]=u,a[51]=Ce):Ce=a[51];var be=T?ce:null,ve;a[52]!==W||a[53]!==l||a[54]!==u?(ve=n("cr:20184")&&W?m.jsx(n("cr:20184"),{pushPage:l,thread:u},"5"):null,a[52]=W,a[53]=l,a[54]=u,a[55]=ve):ve=a[55];var Se;a[56]!==Q||a[57]!==U||a[58]!==u.threadKey||a[59]!==u.threadType?(Se=Q&&U!=null?m.jsx(r("CometErrorBoundary.react"),{children:m.jsx(r("MWInboxInfoMessengerRestrict.react"),{buttonSource:o("MessengerRestrictButtonSource").thread_detail_settings,contactId:U,loggingEntryPoint:19,threadKey:u.threadKey,threadType:u.threadType})},"7"):null,a[56]=Q,a[57]=U,a[58]=u.threadKey,a[59]=u.threadType,a[60]=Se):Se=a[60];var Re;a[61]!==z||a[62]!==U||a[63]!==u?(Re=z&&U!=null?m.jsx(r("MWInboxInfoBlockMessages.react"),{contactId:U,loggingEntryPoint:19,loggingSource:p(u)?5:1,loggingSourceOwner:0,thread:u,children:h},"8"):null,a[61]=z,a[62]=U,a[63]=u,a[64]=Re):Re=a[64];var Le;a[65]!==te||a[66]!==u?(Le=te?m.jsx(r("MWCMInboxInfoPauseButton.react"),{thread:u},"9"):null,a[65]=te,a[66]=u,a[67]=Le):Le=a[67];var Ee;a[68]!==$||a[69]!==ie||a[70]!==u?(Ee=ie?m.jsx(r("MWCMInboxDeleteButton.react"),{isChannel:$,selected:!0,thread:u},"10"):null,a[68]=$,a[69]=ie,a[70]=u,a[71]=Ee):Ee=a[71];var ke;if(a[72]!==X||a[73]!==O||a[74]!==se||a[75]!==W||a[76]!==ge||a[77]!==fe||a[78]!==B||a[79]!==he||a[80]!==ye||a[81]!==Ce||a[82]!==be||a[83]!==ve||a[84]!==Se||a[85]!==Re||a[86]!==Le||a[87]!==Ee||a[88]!==u){var Ie;a[90]!==X||a[91]!==O||a[92]!==W||a[93]!==ge||a[94]!==fe||a[95]!==B?(Ie=W&&X?m.jsx(r("MWInboxInfoButton.react"),{addOnStart:m.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconLeave")}),label:B,onPress:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","privacy_support_section_leave_chat"),fe(),O(g),ge()},testid:void 0},"11"):null,a[90]=X,a[91]=O,a[92]=W,a[93]=ge,a[94]=fe,a[95]=B,a[96]=Ie):Ie=a[96],ke=[he,ye,Ce,be,ve,se,Se,Re,Le,Ee].concat(r("getMWInboxInfoReportMessageItems.react")(u),[Ie]).filter(Boolean),a[72]=X,a[73]=O,a[74]=se,a[75]=W,a[76]=ge,a[77]=fe,a[78]=B,a[79]=he,a[80]=ye,a[81]=Ce,a[82]=be,a[83]=ve,a[84]=Se,a[85]=Re,a[86]=Le,a[87]=Ee,a[88]=u,a[89]=ke}else ke=a[89];var Te=ke,De;return a[97]!==E||a[98]!==Te||a[99]!==k?(De=Te.length>0?m.jsx(r("MWXCollapsible.react"),{isOpen:E,label:s._(/*BTDS*/"Privacy & support"),onPress:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","privacy_support_section."+(E?"close":"open")),k(function(){return!E})},testid:void 0,children:Te}):null,a[97]=E,a[98]=Te,a[99]=k,a[100]=De):De=a[100],De}function g(){}function h(e,t,n){return m.jsx(r("MWInboxInfoButton.react"),{addOnStart:m.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconBlockCircle")}),label:t,onPress:function(){return e()},testid:void 0})}h.displayName=h.name+" [from "+i.id+"]";function y(e,t,n,a,i){return m.jsx(r("MWInboxInfoButton.react"),{addOnStart:m.jsx(r("MWXIconForListCell.react"),{icon:r(i?"MWXIconBell":"MWXIconBellCross")}),label:n,onPress:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","privacy_support_section_mute."+(i?"unmute":"mute")),e()},subLabel:a,testid:void 0})}y.displayName=y.name+" [from "+i.id+"]";function C(){}function b(t){var n=o("react-compiler-runtime").c(9),a=t.pushPage,l=t.threadKey,s=(e||(e=r("useReStore")))(),u;n[0]!==s.tables.threads||n[1]!==l?(u=function(){return o("ReQL").fromTableAscending(s.tables.threads,["authorityLevel","cannotUnsendReason","folderName","muteCallsExpireTimeMs","muteExpireTimeMs","parentThreadKey","threadKey","threadStatus","threadType","threadSubtype","cannotUnsendReason","needsAdminApprovalForNewParticipant","admodCount"].concat(o("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(l)},n[0]=s.tables.threads,n[1]=l,n[2]=u):u=n[2];var c;n[3]!==s||n[4]!==l?(c=[s,l],n[3]=s,n[4]=l,n[5]=c):c=n[5];var d=o("ReQLSuspense").useFirst(u,c,i.id+":404");if(d==null)return null;var p;return n[6]!==a||n[7]!==d?(p=m.jsx(f,{pushPage:a,thread:d}),n[6]=a,n[7]=d,n[8]=p):p=n[8],p}l.default=b}),226);
__d("MWXIconDocumentComplete",["MWXSvgIcon","SVGIcon","cr:22295","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22295")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconPhotoLibrary",["MWXSvgIcon","SVGIcon","cr:22433","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22433")),r("gkx")("23219"));l.default=e}),98);
__d("MWInboxInfoSharedContentSection.react",["fbt","LSMessagingThreadTypeUtil","MAWMpsGating","MAWThreadCutover","MWInboxInfoButton.react","MWInboxPersistedUIState","MWLSThreadCapabilities","MWPBumpEntityKey","MWXCollapsible.react","MWXIconDocumentComplete","MWXIconForListCell.react","MWXIconLink","MWXIconPhotoLibrary","MessengerWebUXLogger","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useCallback,d=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInboxInfoSharedContent.react").__setRef("MWInboxInfoSharedContentSection.react")),m=s._(/*BTDS*/"Media"),p=s._(/*BTDS*/"Files"),_=s._(/*BTDS*/"Links"),f=s._(/*BTDS*/"Media, files and links"),g=s._(/*BTDS*/"Media & files");function h(){var e=o("MWLSThreadCapabilities").useCapabilities();return[o("MWLSThreadCapabilities").canSeeSharedLinks(e),r("gkx")("24085")].every(Boolean)}function y(e){var t=o("react-compiler-runtime").c(35),n=e.pushPage,a=e.thread,i;t[0]!==a.threadType?(i=o("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),t[0]=a.threadType,t[1]=i):i=t[1];var l=i,s=o("MAWThreadCutover").useIsCutoverSecureThread(a.threadKey),c=o("MWInboxPersistedUIState").usePersistedUIState(!1,"__MWInboxInfoSharedContentSection.isOpen__"),y=c[0],b=c[1],v=h(),S;t[2]!==l||t[3]!==v?(S=l?v&&!o("MAWMpsGating").isMpsMediaGalleryFlowDeprecated("links_gallery"):v,t[2]=l,t[3]=v,t[4]=S):S=t[4];var R=S,L=r("MessengerWebUXLogger").useInteractionLogger(),E;t[5]!==s||t[6]!==l||t[7]!==n||t[8]!==R||t[9]!==a?(E=function(t){return n==null?void 0:n(function(e){var n=e.onReturn;return u.jsx(d,{initialTab:t,isCutoverThread:s,isSecureThread:l,onReturn:n,sharedLinksEnabled:R,thread:a})})},t[5]=s,t[6]=l,t[7]=n,t[8]=R,t[9]=a,t[10]=E):E=t[10];var k=E,I;t[11]!==y||t[12]!==L||t[13]!==b||t[14]!==a.threadKey||t[15]!==a.threadType?(I=function(){return y||L==null||L({eventName:"open_media_and_files",threadKey:a.threadKey,threadType:a.threadType}),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","media_section."+(y?"close":"open")),b(C)},t[11]=y,t[12]=L,t[13]=b,t[14]=a.threadKey,t[15]=a.threadType,t[16]=I):I=t[16];var T=I,D;t[17]===Symbol.for("react.memo_cache_sentinel")?(D=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconPhotoLibrary")}),t[17]=D):D=t[17];var x;t[18]!==k?(x=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:D,label:m,onPress:function(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","media_section_media"),k("media")},testid:void 0}),t[18]=k,t[19]=x):x=t[19];var $;t[20]===Symbol.for("react.memo_cache_sentinel")?($=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconDocumentComplete")}),t[20]=$):$=t[20];var P;t[21]!==k?(P=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:$,label:p,onPress:function(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","media_section_files"),k("files")},testid:void 0}),t[21]=k,t[22]=P):P=t[22];var N;t[23]!==R||t[24]!==k?(N=R?u.jsx(r("MWInboxInfoButton.react"),{addOnStart:u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconLink")}),label:_,onPress:function(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","media_section_links"),k("links")},testid:void 0}):null,t[23]=R,t[24]=k,t[25]=N):N=t[25];var M;t[26]!==x||t[27]!==P||t[28]!==N?(M=u.jsxs(u.Fragment,{children:[x,P,N]}),t[26]=x,t[27]=P,t[28]=N,t[29]=M):M=t[29];var w=M,A=R?f:g,F;return t[30]!==y||t[31]!==w||t[32]!==T||t[33]!==A?(F=u.jsx(r("MWXCollapsible.react"),{isOpen:y,label:A,onPress:T,testid:void 0,children:w}),t[30]=y,t[31]=w,t[32]=T,t[33]=A,t[34]=F):F=t[34],F}function C(e){return!e}l.default=y}),226);
__d("MWInboxInfoSubPagePlaceholder.react",["MWInboxMessageSearchPanelHeader.react","MWXColumn.react","MWXColumnItem.react","MWXGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={bodyGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",marginBottom:"x1yztbdb",$$css:!0},bodyGlimmerFirst:{width:"xktia5q",$$css:!0},bodyGlimmerSecond:{width:"xz84dc7",$$css:!0},headerGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"xh8yej3",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(7),n=e.onReturn,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:u.headerGlimmer}),t[0]=a):a=t[0];var i;t[1]!==n?(i=s.jsx(r("MWXColumnItem.react"),{children:s.jsx(r("MWInboxMessageSearchPanelHeader.react"),{onReturn:n,titleComponent:a})}),t[1]=n,t[2]=i):i=t[2];var l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:[u.bodyGlimmer,u.bodyGlimmerFirst]}),t[3]=l):l=t[3];var c;t[4]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsxs(r("MWXColumnItem.react"),{paddingHorizontal:16,children:[l,s.jsx(r("MWXGlimmer.react"),{index:2,xstyle:[u.bodyGlimmer,u.bodyGlimmerSecond]})]}),t[4]=c):c=t[4];var d;return t[5]!==i?(d=s.jsxs(r("MWXColumn.react"),{spacing:12,children:[i,c]}),t[5]=i,t[6]=d):d=t[6],d}l.default=c}),98);
__d("MWInboxInfo.react",["BaseMultiPageViewContext","BaseMultiStepContainer.react","CometList_DEPRECATED.react","CometPlaceholder.react","Int64Hooks","JSResourceForInteraction","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MWBroadcastChannelBestPracticesContent.react","MWCMThreadTypes.react","MWGroupOptionsSectionWrapper.react","MWInbox3PBotCommandsSection.react","MWInboxInfoActionsSection.react","MWInboxInfoDetailsSection.react","MWInboxInfoGroupInfoSectionWrapper.react","MWInboxInfoGroupOptionsSection.react","MWInboxInfoMemberRequestsPushPage.react","MWInboxInfoMembersSection.react","MWInboxInfoPanelContext.react","MWInboxInfoPendingRequestsSection.react","MWInboxInfoPrivacyAndSupportSection.react","MWInboxInfoSharedContentSection.react","MWInboxInfoSubPagePlaceholder.react","MWPActor.react","MWPConversationSearchContext.react","MWPThreadIsPage.react","MWXColumn.react","MWXColumnItem.react","MWXScrollableArea.react","MessengerWebUXLogger","ReQL","ReQLSuspense","WebUXLoggingSurfaceContextProvider","isMWNewSearchUXEnabled","lazyLoadComponent","nullthrows","react","react-compiler-runtime","useMWPCloseConversationSearchSession","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.use,m=c.useCallback,p=c.useContext,_=c.useEffect,f=c.useMemo,g=r("JSResourceForInteraction")("MWInboxMessageSearchPanel.react").__setRef("MWInboxInfo.react"),h=r("lazyLoadComponent")(g),y=r("isMWNewSearchUXEnabled")()?function(){return g.preload()}:void 0;function C(e){var t=o("react-compiler-runtime").c(3),n=e.pushPage,a=e.thread,i;return t[0]!==n||t[1]!==a?(i=o("LSThreadBitOffset").has(15,a)?u.jsx(r("MWInboxInfoSharedContentSection.react"),{pushPage:n,thread:a}):null,t[0]=n,t[1]=a,t[2]=i):i=t[2],i}function b(t){var n=o("react-compiler-runtime").c(8),a=(e||(e=r("useReStore")))(),l=o("MWPActor.react").useActor(),s;n[0]!==l||n[1]!==a.tables.participants||n[2]!==t?(s=function(){return o("ReQL").fromTableAscending(a.tables.participants,["isAdmin"]).getKeyRange(t,l)},n[0]=l,n[1]=a.tables.participants,n[2]=t,n[3]=s):s=n[3];var u;return n[4]!==l||n[5]!==a||n[6]!==t?(u=[l,a,t],n[4]=l,n[5]=a,n[6]=t,n[7]=u):u=n[7],o("ReQLSuspense").useFirst(s,u,i.id+":95")}function v(t){var n,a=o("react-compiler-runtime").c(91),l=t.pushPage,s=t.thread,c;a[0]!==l?(c=function(t){var e=function(n){return u.jsx(r("MWXScrollableArea.react"),{expanding:!0,horizontal:!1,children:u.jsx(t,babelHelpers.extends({},n))})};l(e)},a[0]=l,a[1]=c):c=a[1];var m=c,f=d(r("BaseMultiPageViewContext")),g;a[2]!==f||a[3]!==m?(g=f!=null?babelHelpers.extends({},f,{pushPage:m}):null,a[2]=f,a[3]=m,a[4]=g):g=a[4];var v=g,R;a[5]!==s.threadType?(R=o("LSMessagingThreadTypeUtil").isGroup(s.threadType),a[5]=s.threadType,a[6]=R):R=a[6];var L=R,E=b(s.threadKey),k=(n=E==null?void 0:E.isAdmin)!=null?n:!1,I;a[7]!==s?(I=o("LSThreadBitOffset").has(21,s),a[7]=s,a[8]=I):I=a[8];var T=I,D=o("MAWThreadCutover").useIsCutoverOpenThread(s.threadKey),x=o("MAWThreadCutover").useIsDualThreadCutoverOpenThread(s.threadKey),$;a[9]!==s.threadType?($=o("LSMessagingThreadTypeUtil").isArmadilloSecure(s.threadType),a[9]=s.threadType,a[10]=$):$=a[10];var P=$,N=!o("MWCMThreadTypes.react").isStandardCMThread(s.threadType)&&o("LSThreadBitOffset").has(66,s),M;a[11]!==s.threadType?(M=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(s.threadType),a[11]=s.threadType,a[12]=M):M=a[12];var w=M,A=N&&!P&&!w,F=L&&P&&k,O;a[13]!==s.threadType?(O=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(s.threadType),a[13]=s.threadType,a[14]=O):O=a[14];var B=O,W;a[15]!==k||a[16]!==B||a[17]!==s.threadSubtype?(W=B&&!k||o("LSMessagingThreadTypeUtil").isBusinessSupportThread(s.threadSubtype),a[15]=k,a[16]=B,a[17]=s.threadSubtype,a[18]=W):W=a[18];var q=W,U,V;a[19]!==m||a[20]!==s.threadKey?(V=function(t){return m(function(e){return u.jsx(r("MWInboxInfoMemberRequestsPushPage.react"),{onReturn:e.onReturn,parentSurface:t,threadKey:s.threadKey})})},U=[m,s.threadKey],a[19]=m,a[20]=s.threadKey,a[21]=U,a[22]=V):(U=a[21],V=a[22]);var H=o("Int64Hooks").useCallbackInt64(V,U),G,z;a[23]!==m||a[24]!==s?(G=function(){m(function(e){var t=e.onReturn;return u.jsx(r("MWBroadcastChannelBestPracticesContent.react"),{onReturn:t,thread:s})})},z=[m,s],a[23]=m,a[24]=s,a[25]=G,a[26]=z):(G=a[25],z=a[26]);var j=o("Int64Hooks").useCallbackInt64(G,z),K=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),Q=K.isOnBestPracticesPageRef,X=K.navToBestPracticesRef,Y=K.setPushBestPracticesPage,J=K.setPushMemberRequestsPage,Z=K.setShouldNavToMemberRequests,ee=K.setThreadInfoVisible,te=K.shouldNavToMemberRequests,ne=r("useMWPCloseConversationSearchSession")(),re=r("nullthrows")(p(o("MWPConversationSearchContext.react").context)),oe=re.shouldNavigateSidePanelToSearch,ae=(e||(e=r("useReStore")))(),ie;a[27]!==ae.tables.custom_thread_commands||a[28]!==s.threadKey?(ie=function(){return o("ReQL").fromTableAscending(ae.tables.custom_thread_commands).getKeyRange(s.threadKey).filter(S)},a[27]=ae.tables.custom_thread_commands,a[28]=s.threadKey,a[29]=ie):ie=a[29];var le;a[30]!==ae||a[31]!==s.threadKey?(le=[ae,s.threadKey],a[30]=ae,a[31]=s.threadKey,a[32]=le):le=a[32];var se=o("ReQLSuspense").useFirst(ie,le,i.id+":225"),ue;a[33]!==H||a[34]!==Y||a[35]!==J||a[36]!==j?(ue=function(){J(H),Y(j)},a[33]=H,a[34]=Y,a[35]=J,a[36]=j,a[37]=ue):ue=a[37];var ce;a[38]!==Q||a[39]!==H||a[40]!==Y||a[41]!==J||a[42]!==j?(ce=[H,Y,J,j,Q],a[38]=Q,a[39]=H,a[40]=Y,a[41]=J,a[42]=j,a[43]=ce):ce=a[43],_(ue,ce);var de,me;a[44]!==X||a[45]!==H||a[46]!==Z||a[47]!==te||a[48]!==j?(de=function(){te?(Z(!1),H()):X.current===!0&&(j(),X.current=!1)},me=[X,H,Z,te,j],a[44]=X,a[45]=H,a[46]=Z,a[47]=te,a[48]=j,a[49]=de,a[50]=me):(de=a[49],me=a[50]),_(de,me);var pe=A.toString(),_e;a[51]!==pe?(_e={canSeeGroupOptions:pe},a[51]=pe,a[52]=_e):_e=a[52];var fe;a[53]!==_e||a[54]!==s.threadKey||a[55]!==s.threadType?(fe={eventName:"thread_details_pane_impression",extraData:_e,threadKey:s.threadKey,threadType:s.threadType},a[53]=_e,a[54]=s.threadKey,a[55]=s.threadType,a[56]=fe):fe=a[56];var ge=r("MessengerWebUXLogger").useImpressionLoggerRef(fe);if(oe){var he;a[57]!==ne||a[58]!==ee?(he=function(){ne({shouldClearThreadSearch:!1,shouldResetNavigation:!1}),ee(!1)},a[57]=ne,a[58]=ee,a[59]=he):he=a[59];var ye=he,Ce;a[60]!==ye?(Ce=u.jsx(r("MWInboxInfoSubPagePlaceholder.react"),{onReturn:ye}),a[60]=ye,a[61]=Ce):Ce=a[61];var be;a[62]!==ye||a[63]!==s?(be=u.jsx(h,{onReturn:ye,thread:s}),a[62]=ye,a[63]=s,a[64]=be):be=a[64];var ve;return a[65]!==Ce||a[66]!==be?(ve=u.jsx(r("CometPlaceholder.react"),{fallback:Ce,name:"MWInboxInfo.SearchPanel",children:be}),a[65]=Ce,a[66]=be,a[67]=ve):ve=a[67],ve}var Se;a[68]!==s.threadKey?(Se=u.jsx(r("MWInboxInfoDetailsSection.react"),{preloadSearchPage:y,threadKey:s.threadKey}),a[68]=s.threadKey,a[69]=Se):Se=a[69];var Re;a[70]!==A||a[71]!==F||a[72]!==se||a[73]!==D||a[74]!==x||a[75]!==L||a[76]!==T||a[77]!==m||a[78]!==q||a[79]!==s?(Re=(!D||x)&&u.jsx(r("MWXColumnItem.react"),{paddingVertical:20,children:u.jsxs(r("CometList_DEPRECATED.react"),{withNegativeMargins:!0,children:[se!=null&&r("MWInbox3PBotCommandsSection.react")!=null&&u.jsx(r("MWInbox3PBotCommandsSection.react"),{threadKey:s.threadKey}),u.jsx(r("MWInboxInfoGroupInfoSectionWrapper.react"),{pushPage:m,thread:s}),T?null:u.jsx(r("MWInboxInfoActionsSection.react"),{thread:s}),A?u.jsxs(u.Fragment,{children:[u.jsx(o("MWInboxInfoGroupOptionsSection.react").MWInboxInfoGroupOptionsSection,{threadKey:s.threadKey}),u.jsx(r("MWInboxInfoPendingRequestsSection.react"),{threadKey:s.threadKey})]}):null,L?q?null:u.jsx(r("MWInboxInfoMembersSection.react"),{thread:s}):null,F&&u.jsx(r("MWGroupOptionsSectionWrapper.react"),{thread:s}),T?null:u.jsx(C,{pushPage:m,thread:s}),u.jsx(r("MWInboxInfoPrivacyAndSupportSection.react"),{pushPage:m,threadKey:s.threadKey})]})}),a[70]=A,a[71]=F,a[72]=se,a[73]=D,a[74]=x,a[75]=L,a[76]=T,a[77]=m,a[78]=q,a[79]=s,a[80]=Re):Re=a[80];var Le;a[81]!==Se||a[82]!==Re||a[83]!==s.threadKey?(Le=u.jsxs(o("MWPThreadIsPage.react").Provider,{threadKey:s.threadKey,children:[Se,Re]}),a[81]=Se,a[82]=Re,a[83]=s.threadKey,a[84]=Le):Le=a[84];var Ee;a[85]!==ge||a[86]!==Le?(Ee=u.jsx(r("MWXScrollableArea.react"),{expanding:!0,horizontal:!1,children:u.jsx(r("MWXColumn.react"),{ref:ge,children:Le})}),a[85]=ge,a[86]=Le,a[87]=Ee):Ee=a[87];var ke;return a[88]!==v||a[89]!==Ee?(ke=u.jsx(r("BaseMultiPageViewContext").Provider,{value:v,children:Ee}),a[88]=v,a[89]=Ee,a[90]=ke):ke=a[90],ke}function S(e){return!e.isOpenPersistentMenu}function R(e){var t=o("react-compiler-runtime").c(5),n=e.disableInitialAutoFocus,a=e.thread,i;t[0]!==a?(i=function(t){return u.jsx(v,{pushPage:t,thread:a})},t[0]=a,t[1]=i):i=t[1];var l;return t[2]!==n||t[3]!==i?(l=u.jsx(o("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"inbox_detail_info_pane",children:u.jsx(r("MWXColumn.react"),{expanding:!0,paddingVertical:0,children:u.jsx(r("MWXColumnItem.react"),{expanding:!0,children:u.jsx(r("BaseMultiStepContainer.react"),{disableFocusContainment:!0,disableInitialAutoFocus:n,expanding:!0,children:i})})})}),t[2]=n,t[3]=i,t[4]=l):l=t[4],l}l.default=R}),98);
__d("MWCMInboxInfoWithSubthreads.react",["BaseMultiStepContainer.react","CometPageletWithDiv.react","CometPlaceholder.react","GroupsCometChatsEngagementLogger","I64","JSResourceForInteraction","LSThreadBitOffset","MDSM5CoreStyles","MWCMThreadTypes.react","MWInboxInfo.react","MWInboxInfoPanelContext.react","MWInboxThreadMessagesSpinner.react","MWLayoutCard.react","MWResponsiveLayoutConstants","MWXColumn.react","MWXColumnItem.react","MWXRowItem.react","MWXSpinner.react","gkx","lazyLoadComponent","react","react-compiler-runtime","useMWPThreadHasSpectraUser","useMigrateURLParamsToRouteParams","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useEffect,d={info:{borderInlineStartColor:"x1nmn18",borderInlineStartStyle:"x1t7ytsu",borderInlineStartWidth:"xpilrb4",flexBasis:"x1yu6fn4",flexShrink:"xs83m0k",maxWidth:"x1dt7z5j",minWidth:"x2ixbly",$$css:!0}},m=r("gkx")("24031"),p=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWCMSubthreadThreadView.react").__setRef("MWCMInboxInfoWithSubthreads.react")),_=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWCMSubthreadListSection.react").__setRef("MWCMInboxInfoWithSubthreads.react"));function f(e){var t=o("react-compiler-runtime").c(31),n=e.thread,a=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),i=a.currentSubthreadView,l=a.openMethod,f=a.setCurrentSubthreadView,g=a.setShowSubthreadList,h=a.setSubthreadKey,y=a.sourceIsSubthreadNav,C=a.subthreadKey,b=a.threadInfoVisible,v=r("usePrevious")(b),S=r("useMigrateURLParamsToRouteParams")(),R=S.subthread_id,L=r("useMWPThreadHasSpectraUser")(n.threadKey),E;t[0]!==n?(E=o("LSThreadBitOffset").has(167,n)&&o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType),t[0]=n,t[1]=E):E=t[1];var k=E,I,T;if(t[2]!==f||t[3]!==h||t[4]!==R||t[5]!==k?(I=function(){typeof R=="string"&&k&&(h((s||(s=o("I64"))).of_float(Number(R))),f("subthreadView"),o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_subthread:"1"},event:"thread_open",parent_surface:"thread_view",source:"subthread_reply_notif",surface:"thread_view",thread_id:R}))},T=[f,h,R,k],t[2]=f,t[3]=h,t[4]=R,t[5]=k,t[6]=I,t[7]=T):(I=t[6],T=t[7]),c(I,T),L)return null;var D=null;if(b===!0&&i===null){var x=v===!0||l==="saved_state",$;t[8]!==x||t[9]!==n?($=u.jsx(r("MWInboxInfo.react"),{disableInitialAutoFocus:x,thread:n}),t[8]=x,t[9]=n,t[10]=$):$=t[10],D=$}else if(C!=null){var P;t[11]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx(r("MWInboxThreadMessagesSpinner.react"),{}),t[11]=P):P=t[11];var N;t[12]!==f||t[13]!==h?(N=function(){h(null),f(null)},t[12]=f,t[13]=h,t[14]=N):N=t[14];var M;t[15]!==C||t[16]!==N||t[17]!==n.threadKey?(M=u.jsx(r("MWXColumn.react"),{expanding:!0,paddingVertical:0,children:u.jsx(r("MWXColumnItem.react"),{expanding:!0,children:u.jsx(r("CometPlaceholder.react"),{fallback:P,name:"MWCMInboxInfoWithSubthreads.CMSubthreadThreadView",children:u.jsx(p,{isMainView:!0,onReturn:N,parentThreadKey:n.threadKey,threadKey:C})})})}),t[15]=C,t[16]=N,t[17]=n.threadKey,t[18]=M):M=t[18],D=M}else if(i==="subthreadList"){var w=v===!0,A;t[19]!==g||t[20]!==h||t[21]!==y.current||t[22]!==n?(A=function(t){return u.jsx(r("CometPlaceholder.react"),{fallback:u.jsx(r("MWInboxThreadMessagesSpinner.react"),{}),name:"MWCMInboxInfoWithSubthreads.CMSubthreadListSection",children:u.jsx(_,{isMainView:!0,onReturn:function(){h(null),g(!1)},pushPage:t,sourceIsSubthreadNav:y.current,thread:n})})},t[19]=g,t[20]=h,t[21]=y.current,t[22]=n,t[23]=A):A=t[23];var F;t[24]!==w||t[25]!==A?(F=u.jsx(r("MWXColumn.react"),{expanding:!0,paddingVertical:0,children:u.jsx(r("MWXColumnItem.react"),{expanding:!0,children:u.jsx(r("BaseMultiStepContainer.react"),{disableFocusContainment:!0,disableInitialAutoFocus:w,children:A})})}),t[24]=w,t[25]=A,t[26]=F):F=t[26],D=F}if(D==null)return null;var O,B;t[27]===Symbol.for("react.memo_cache_sentinel")?(O="x78zum5 x5yr21d xmz0i5r",B=u.jsx(r("MWXSpinner.react"),{color:"disabled_DEPRECATED",size:24}),t[27]=O,t[28]=B):(O=t[27],B=t[28]);var W;if(t[29]!==D){var q=u.jsx(o("CometPageletWithDiv.react").Placeholder,{className:O,fallback:B,name:"MWInboxDetail_ThreadDetail",children:D});W=r("MWLayoutCard.react")!=null?u.jsx(r("MWLayoutCard.react"),{panel:o("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL,children:q}):u.jsx(r("MWXRowItem.react"),{xstyle:[d.info,m&&o("MDSM5CoreStyles").MDSM5CoreStyles.pageSection],children:q}),t[29]=D,t[30]=W}else W=t[30];return W}l.default=f}),98);
__d("MWCMInboxLeftRailSidebarButton.react",["fbt","Box.react","FDSBadge.react","FDSBadgeContainer.react","FDSNumberedBadge.react","MDSListCellPressable.react","MWCMInboxLeftRailSidebarContext.react","MWPBumpEntityKey","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWXIconStrict.react","MWXText.react","MWXTooltip.react","react","react-compiler-runtime","useCurrentRoute"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext,p=c.useMemo,_={content:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",height:"xn3w4p2",paddingTop:"x1nn3v0j",paddingBottom:"x1120s5i",$$css:!0},icon:{paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},listCell:{alignItems:"x6s0dn4",paddingTop:"xexx8yu",paddingBottom:"x18d9i69",$$css:!0}};function f(e){var t=o("react-compiler-runtime").c(3),n=e.icon,a=e.selected,i=a?"primary":"inactive-tab",l;return t[0]!==n||t[1]!==i?(l=u.jsx(r("Box.react"),{xstyle:_.icon,children:u.jsx(r("MWXIconStrict.react"),{alt:"",color:i,icon:n,isDecorative:!0,size:20})}),t[0]=n,t[1]=i,t[2]=l):l=t[2],l}function g(e){var t,n=o("react-compiler-runtime").c(52),a=e.buildUrl,i=e.icon,l=e.id,c=e.label,d=e.selected,p=e.target,g=e.testid,h=e.unreadCount,y=p===void 0?"_self":p,C=h===void 0?0:h,b=r("useCurrentRoute")(),v=b==null||(t=b.params)==null?void 0:t.thread_key,S=typeof v=="string"?v:void 0,R;n[0]!==a||n[1]!==S?(R=a(S),n[0]=a,n[1]=S,n[2]=R):R=n[2];var L=R,E=r("MWCMInboxLeftRailSidebarContext.react").useHook(),k=E.isCollapsed,I;n[3]!==c||n[4]!==C?(I=C>0?s._(/*BTDS*/"{inbox} \u00b7 {unread count} unread",[s._param("inbox",c),s._param("unread count",String(C))]):c,n[3]=c,n[4]=C,n[5]=I):I=n[5];var T=I,D=m(r("MWResponsiveLayoutContext.react")),x=D.pushCard,$;n[6]!==l||n[7]!==x||n[8]!==d?($=function(){d&&x(o("MWResponsiveLayoutConstants").MWLayoutPanel.THREAD_LIST_PANEL),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar",l)},n[6]=l,n[7]=x,n[8]=d,n[9]=$):$=n[9];var P=$;if(k){var N=d?"page":!1,M;n[10]!==i||n[11]!==d||n[12]!==T||n[13]!==C?(M=C>0?u.jsx(r("FDSBadgeContainer.react"),{badge:u.jsx(r("FDSBadge.react"),{accessibilityText:T,border:"white",color:"blue",isProfileBadge:!0,size:8}),badgeAlign:"topRight",expanding:!0,children:u.jsx(f,{icon:i,selected:d})}):u.jsx(f,{icon:i,selected:d}),n[10]=i,n[11]=d,n[12]=T,n[13]=C,n[14]=M):M=n[14];var w="left-sidebar-button-"+l,A;n[15]!==y||n[16]!==L?(A={target:y,url:L},n[15]=y,n[16]=L,n[17]=A):A=n[17];var F;n[18]!==P||n[19]!==d||n[20]!==N||n[21]!==M||n[22]!==w||n[23]!==A||n[24]!==g||n[25]!==T?(F=u.jsx(r("MDSListCellPressable.react"),{"aria-current":N,"aria-label":T,content:M,contentXStyle:_.content,id:w,linkProps:A,onPress:P,selected:d,size:"medium",testid:void 0,xstyle:_.listCell}),n[18]=P,n[19]=d,n[20]=N,n[21]=M,n[22]=w,n[23]=A,n[24]=g,n[25]=T,n[26]=F):F=n[26];var O;return n[27]!==c||n[28]!==F||n[29]!==T?(O=u.jsx(r("MWXTooltip.react"),{align:"middle",position:"end",tooltip:T,children:F},c),n[27]=c,n[28]=F,n[29]=T,n[30]=O):O=n[30],O}var B;n[31]!==T||n[32]!==C?(B=C>0?u.jsx(r("FDSNumberedBadge.react"),{accessibilityText:T,color:"blue",value:C}):void 0,n[31]=T,n[32]=C,n[33]=B):B=n[33];var W;n[34]!==i||n[35]!==d?(W=u.jsx(f,{icon:i,selected:d}),n[34]=i,n[35]=d,n[36]=W):W=n[36];var q=d?"page":!1,U;n[37]===Symbol.for("react.memo_cache_sentinel")?(U={className:"xk50ysn"},n[37]=U):U=n[37];var V;n[38]!==c?(V=u.jsx(r("MWXText.react"),{color:"primary",type:"body3",children:u.jsx("span",babelHelpers.extends({},U,{children:c}))}),n[38]=c,n[39]=V):V=n[39];var H;n[40]!==L?(H={url:L},n[40]=L,n[41]=H):H=n[41];var G;return n[42]!==P||n[43]!==d||n[44]!==V||n[45]!==H||n[46]!==B||n[47]!==W||n[48]!==q||n[49]!==g||n[50]!==T?(G=u.jsx(r("MDSListCellPressable.react"),{addOnEnd:B,addOnStart:W,addOnStartVerticalAlign:"center","aria-current":q,"aria-label":T,content:V,contentXStyle:_.content,expanding:!0,linkProps:H,onPress:P,selected:d,size:"medium",testid:void 0}),n[42]=P,n[43]=d,n[44]=V,n[45]=H,n[46]=B,n[47]=W,n[48]=q,n[49]=g,n[50]=T,n[51]=G):G=n[51],G}l.default=g}),226);
__d("MWXIconBox",["MWXSvgIcon","SVGIcon","cr:22233","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22233")),r("gkx")("23219"));l.default=e}),98);
__d("MWCMInboxLeftRailSidebarArchivedButton.react",["fbt","MWCMInboxLeftRailSidebarButton.react","MWInboxArchivedThreadsRouteBuilder","MWXIconBox","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){return e==null?o("MWInboxArchivedThreadsRouteBuilder").buildURLWithoutThread():o("MWInboxArchivedThreadsRouteBuilder").buildURL({focus_target:1,thread_key:e})}function d(e){var t=o("react-compiler-runtime").c(3),n=e.selected,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Archive"),t[0]=a):a=t[0];var i=a,l;return t[1]!==n?(l=u.jsx(r("MWCMInboxLeftRailSidebarButton.react"),{buildUrl:c,icon:r("MWXIconBox"),id:"archived",label:i,selected:n}),t[1]=n,t[2]=l):l=t[2],l}var m=u.memo(d);l.default=m}),226);
__d("MWCMInboxLeftRailSidebarBusinessSupportButtonQuery.graphql",["MWCMInboxLeftRailSidebarBusinessSupportButtonQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:"result",args:null,kind:"ScalarField",name:"xfb_support_folder_visibility",storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWCMInboxLeftRailSidebarBusinessSupportButtonQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWCMInboxLeftRailSidebarBusinessSupportButtonQuery",selections:e},params:{id:n("MWCMInboxLeftRailSidebarBusinessSupportButtonQuery_facebookRelayOperation"),metadata:{},name:"MWCMInboxLeftRailSidebarBusinessSupportButtonQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("MWCMInboxLeftRailSidebarBusinessSupportButton.react",["fbt","CometErrorBoundary.react","CometPlaceholder.react","CometRelay","LSIntEnum","MWCMInboxLeftRailSidebarBusinessSupportButtonQuery.graphql","MWCMInboxLeftRailSidebarButton.react","MWCMUnreadThreadCountHooks","MWInboxBusinessSupportThreadsRouteBuilder","MWXIconQuestionChat","react","react-compiler-runtime","vulture"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=u||(u=o("react")),m=e!==void 0?e:e=n("MWCMInboxLeftRailSidebarBusinessSupportButtonQuery.graphql");function p(e){return e==null?o("MWInboxBusinessSupportThreadsRouteBuilder").buildURLWithoutThread({}):o("MWInboxBusinessSupportThreadsRouteBuilder").buildURL({focus_target:1,thread_key:e})}function _(e){var t=o("react-compiler-runtime").c(5),n=e.selected,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(c||(c=o("LSIntEnum"))).ofNumber(-18),t[0]=a):a=t[0];var i=r("MWCMUnreadThreadCountHooks").useUnreadThreadCount(a),l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Support"),t[1]=l):l=t[1];var u;return t[2]!==n||t[3]!==i?(u=d.jsx(r("MWCMInboxLeftRailSidebarButton.react"),{buildUrl:p,icon:r("MWXIconQuestionChat"),id:"business_support",label:l,selected:n,unreadCount:i}),t[2]=n,t[3]=i,t[4]=u):u=t[4],u}function f(e){var t=o("react-compiler-runtime").c(2),n=e.selected;r("vulture")("Lfbc3ThtlZsK-JlF7vTZ8JGOUZo=");var a=o("CometRelay").useLazyLoadQuery(m,{});if(a.result===!0){var i;return t[0]!==n?(i=d.jsx(_,{selected:n}),t[0]=n,t[1]=i):i=t[1],i}return null}function g(e){var t=o("react-compiler-runtime").c(2),n=e.queryRef,r=e.selected,a=o("CometRelay").usePreloadedQuery(m,n);if(a.result===!0){var i;return t[0]!==r?(i=d.jsx(_,{selected:r}),t[0]=r,t[1]=i):i=t[1],i}return null}function h(e){var t=o("react-compiler-runtime").c(3),n=e.queryRef,a=e.selected,i;return t[0]!==n||t[1]!==a?(i=d.jsx(r("CometErrorBoundary.react"),{children:d.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWCMInboxLeftRailSidebarBusinessSupportButton",children:n!=null?d.jsx(g,{queryRef:n,selected:a}):d.jsx(f,{selected:a})})}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}var y=d.memo(h);l.default=y}),226);
__d("MWCMInboxLeftRailSidebarHomeButton.react",["fbt","LSIntEnum","MWCMInboxLeftRailSidebarButton.react","MWCMUnreadThreadCountHooks","MWInboxRouteBuilder","MWXIconMessage","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react"));function d(e){return e==null?o("MWInboxRouteBuilder").buildHomeURL():o("MWInboxRouteBuilder").buildURL({focus_target:1,thread_key:e})}function m(e){var t=o("react-compiler-runtime").c(5),n=e.selected,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Chats"),t[0]=a):a=t[0];var i=a,l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=(u||(u=o("LSIntEnum"))).ofNumber(0),t[1]=l):l=t[1];var m=r("MWCMUnreadThreadCountHooks").useUnreadThreadCount(l),p;return t[2]!==n||t[3]!==m?(p=c.jsx(r("MWCMInboxLeftRailSidebarButton.react"),{buildUrl:d,icon:r("MWXIconMessage"),id:"chats",label:i,selected:n,unreadCount:m}),t[2]=n,t[3]=m,t[4]=p):p=t[4],p}var p=c.memo(m);l.default=p}),226);
__d("MWXIconMarketplace",["MWXSvgIcon","SVGIcon","cr:22393","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22393")),r("gkx")("23219"));l.default=e}),98);
__d("MWCMInboxLeftRailSidebarMarketplaceButton.react",["fbt","LSIntEnum","MWCMInboxLeftRailSidebarButton.react","MWCMUnreadThreadCountHooks","MWInboxMarketplaceThreadsRouteBuilder","MWXIconGroup","MWXIconMarketplace","react","react-compiler-runtime","useMWMarketplaceDMAOptOutStatus"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react"));function d(e){return e==null?o("MWInboxMarketplaceThreadsRouteBuilder").buildURLWithoutThread():o("MWInboxMarketplaceThreadsRouteBuilder").buildURL({focus_target:1,thread_key:e})}function m(e){var t=o("react-compiler-runtime").c(6),n=e.selected,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Marketplace"),t[0]=a):a=t[0];var i=a,l=r("useMWMarketplaceDMAOptOutStatus")(),m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=(u||(u=o("LSIntEnum"))).ofNumber(-12),t[1]=m):m=t[1];var p=r("MWCMUnreadThreadCountHooks").useUnreadThreadCount(m),_=r(l?"MWXIconGroup":"MWXIconMarketplace"),f;return t[2]!==n||t[3]!==_||t[4]!==p?(f=c.jsx(r("MWCMInboxLeftRailSidebarButton.react"),{buildUrl:d,icon:_,id:"marketplace",label:i,selected:n,testid:void 0,unreadCount:p}),t[2]=n,t[3]=_,t[4]=p,t[5]=f):f=t[5],f}var p=c.memo(m);l.default=p}),226);
__d("MWXIconMessageDots",["MWXSvgIcon","SVGIcon","cr:22397","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22397")),r("gkx")("23219"));l.default=e}),98);
__d("MWCMInboxLeftRailSidebarMessageRequestsButton.react",["fbt","LSIntEnum","MWCMInboxLeftRailSidebarButton.react","MWCMUnreadThreadCountHooks","MWInboxMessageRequestsRouteBuilder","MWXIconMessageDots","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react"));function d(e){return e==null?o("MWInboxMessageRequestsRouteBuilder").buildURLWithoutThread({}):o("MWInboxMessageRequestsRouteBuilder").buildURL({focus_target:2,thread_key:e})}function m(e){var t=o("react-compiler-runtime").c(5),n=e.selected,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=r("qex")._("4751")?s._(/*BTDS*/"Spam"):s._(/*BTDS*/"Requests"),t[0]=a):a=t[0];var i=a,l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=(u||(u=o("LSIntEnum"))).ofNumber(-1),t[1]=l):l=t[1];var m=r("MWCMUnreadThreadCountHooks").useUnreadThreadCount(l),p;return t[2]!==n||t[3]!==m?(p=c.jsx(r("MWCMInboxLeftRailSidebarButton.react"),{buildUrl:d,icon:r("MWXIconMessageDots"),id:"requests",label:i,selected:n,unreadCount:m}),t[2]=n,t[3]=m,t[4]=p):p=t[4],p}var p=c.memo(m);l.default=p}),226);
__d("MWCMInboxLeftRailSidebarButtons.react",["MWCMInboxLeftRailSidebarArchivedButton.react","MWCMInboxLeftRailSidebarBusinessSupportButton.react","MWCMInboxLeftRailSidebarHomeButton.react","MWCMInboxLeftRailSidebarMarketplaceButton.react","MWCMInboxLeftRailSidebarMessageRequestsButton.react","MessengerMSplitFlag","react","react-compiler-runtime","useMWFamilyCenterContext","useTopMostRouteCometEntityKey"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t,n=o("react-compiler-runtime").c(9),a=e.mCMInboxLeftRailSidebarBusinessSupportButtonQueryRef,i=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),l=i.familyCenterData,u=(t=r("useTopMostRouteCometEntityKey")())!=null?t:{},c=u.entity_type,d=c==="home",m;n[0]!==d?(m=s.jsx(r("MWCMInboxLeftRailSidebarHomeButton.react"),{selected:d}),n[0]=d,n[1]=m):m=n[1];var p;n[2]!==c||n[3]!==l.shouldHideSidebar||n[4]!==a?(p=!l.shouldHideSidebar&&s.jsxs(s.Fragment,{children:[!r("MessengerMSplitFlag").is_msplit_account&&s.jsx(r("MWCMInboxLeftRailSidebarMarketplaceButton.react"),{selected:c==="marketplace"}),s.jsx(r("MWCMInboxLeftRailSidebarBusinessSupportButton.react"),{queryRef:a,selected:c==="business_support"}),s.jsx(r("MWCMInboxLeftRailSidebarMessageRequestsButton.react"),{selected:c==="message_requests"}),s.jsx(r("MWCMInboxLeftRailSidebarArchivedButton.react"),{selected:c==="archived"})]}),n[2]=c,n[3]=l.shouldHideSidebar,n[4]=a,n[5]=p):p=n[5];var _;return n[6]!==m||n[7]!==p?(_=s.jsxs(s.Fragment,{children:[m,p]}),n[6]=m,n[7]=p,n[8]=_):_=n[8],_}l.default=u}),98);
__d("useFetchCommunityJoinInfo",["I64","Int64Hooks","LSCommunityInviteStatus","LSFactory","LSFetchCommunityJoinInfoStoredProcedure","LSIntEnum","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=o("react-compiler-runtime").c(8),a=t.folderId,l=t.invitedThreadId,c=t.inviteStatus,d=(u||(u=r("useReStore")))(),m;n[0]!==c?(m=(e||(e=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(r("LSCommunityInviteStatus").INVITED)),n[0]=c,n[1]=m):m=n[1];var p=m,_=l!=null?l:(e||(e=o("I64"))).zero,f,g;n[2]!==d||n[3]!==a||n[4]!==_||n[5]!==p?(f=function(){p&&_!=null&&r("promiseDone")(d.runInTransaction(function(e){return r("LSFetchCommunityJoinInfoStoredProcedure")(r("LSFactory")(e),{communityId:a,threadId:_})},"readwrite",void 0,void 0,i.id+":40"))},g=[d,p,a,_],n[2]=d,n[3]=a,n[4]=_,n[5]=p,n[6]=f,n[7]=g):(f=n[6],g=n[7]),o("Int64Hooks").useEffectInt64(f,g)}l.useFetchCommunityJoinInfo=c}),98);
__d("MWGAMECommunityTakedownDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9643593719012473"}),null);
__d("MWGAMECommunityTakedownDialogQuery$Parameters",["MWGAMECommunityTakedownDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWGAMECommunityTakedownDialogQuery_facebookRelayOperation"),metadata:{},name:"MWGAMECommunityTakedownDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWGAMECommunityTakedownDialog.entrypoint",["JSResourceForInteraction","MWGAMECommunityTakedownDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.communityID;return{queries:{queryReference:{parameters:r("MWGAMECommunityTakedownDialogQuery$Parameters"),variables:{communityID:e}}}}},root:r("JSResourceForInteraction")("MWGAMECommunityTakedownDialog.react").__setRef("MWGAMECommunityTakedownDialog.entrypoint")};l.default=e}),98);
__d("useMWCMCommunityTakedownEntrypointDialog",["MWCMCommunityTakenDownDialog.entrypoint","MWGAMECommunityTakedownDialog.entrypoint","gkx","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(4),n=e.communityID,a;t[0]!==n?(a={communityID:n},t[0]=n,t[1]=a):a=t[1];var i=r("useMWXEntryPointDialog")(r("MWCMCommunityTakenDownDialog.entrypoint"),a),l;t[2]!==n?(l={communityID:n},t[2]=n,t[3]=l):l=t[3];var s=r("useMWXEntryPointDialog")(r("MWGAMECommunityTakedownDialog.entrypoint"),l);return r("gkx")("23433")?s:i}l.default=e}),98);
__d("MWCMInboxLeftRailSidebarFolder.react",["fbt","Box.react","GroupsCometChatsEngagementLogger","I64","LSCommunityInviteStatus","LSIntEnum","MDSBadge.react","MDSBadgeContainer.react","MDSListCellPressable.react","MWCMDirectInviteJoinDialog.entrypoint","MWCMInboxLeftRailSidebarContext.react","MWCMStandaloneJoinDialog.entrypoint","MWCMUnreadThreadCountHooks","MWInboxCommunityThreadsRouteBuilder","MWPBumpEntityKey","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWXIconBellCross","MWXIconStrict.react","MWXProfilePhoto.react","MWXTextPairing.react","MWXTooltip.react","MessengerWebUXLogger","ReStoreVaulting","formatDate","getLSMediaCommunityFolderPictureUrl","isStringNotNullAndNotWhitespaceOnly","isStringNullOrEmpty","mwCMisStandAloneCommunity","qpl","react","react-compiler-runtime","requireDeferred","translatedServerString","useCurrentRoute","useFetchCommunityJoinInfo","useMWCMCommunityTakedownEntrypointDialog","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["folder","isGeoBlocked","isInCommunity","isInvitedToCommunity","isTakenDown"],u,c,d,m=u||(u=o("react")),p=u,_=p.useContext,f=p.useMemo,g=r("requireDeferred")("QuickPerformanceLogger").__setRef("MWCMInboxLeftRailSidebarFolder.react"),h={badgeCollapsed:{insetInlineEnd:"x1euzuty",left:null,right:null,position:"x10l6tqk",top:"xtu2xtp",$$css:!0},content:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",height:"xn3w4p2",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1nn3v0j",paddingBottom:"x1120s5i",$$css:!0},contentCollapsed:{width:"x187nhsf",$$css:!0},iconSpacer:{width:"x1xc55vz",$$css:!0},iconSpacerAfter:{width:"x51ohtg",$$css:!0},listCell:{paddingTop:"xexx8yu",paddingBottom:"x18d9i69",$$css:!0}},y=r("qpl")._(1072826272,"155"),C=r("qpl")._(269227335,"359");function b(e,t,n){if(n&&!r("isStringNullOrEmpty")(e.snippetText))return r("translatedServerString")(e.snippetText);var a=t==null?void 0:t.snippet;if(!r("isStringNullOrEmpty")(a))return o("ReStoreVaulting").maybeUnvault(a)}function v(e,t){var n=e.invitedThreadId!=null,o=r("MWCMUnreadThreadCountHooks").useHasUnreadThread(e.folderId);return t||n||o}function S(t){var n,a,i=o("react-compiler-runtime").c(35),l,s,u,d,p,f;i[0]!==t?(l=t.folder,s=t.isGeoBlocked,u=t.isInCommunity,d=t.isInvitedToCommunity,p=t.isTakenDown,f=babelHelpers.objectWithoutPropertiesLoose(t,e),i[0]=t,i[1]=l,i[2]=s,i[3]=u,i[4]=d,i[5]=p,i[6]=f):(l=i[1],s=i[2],u=i[3],d=i[4],p=i[5],f=i[6]);var h=(c||(c=o("I64"))).to_string(l.folderId),y;i[7]===Symbol.for("react.memo_cache_sentinel")?(y={},i[7]=y):y=i[7];var b=r("useMWXEntryPointDialog")(r("MWCMDirectInviteJoinDialog.entrypoint"),y),v=b[0],S;i[8]===Symbol.for("react.memo_cache_sentinel")?(S={},i[8]=S):S=i[8];var I=r("useMWXEntryPointDialog")(r("MWCMStandaloneJoinDialog.entrypoint"),S),T=I[0],D=r("useMWCMCommunityTakedownEntrypointDialog")({communityID:h}),x=D[0],$=r("useCurrentRoute")(),P=$==null||(n=$.params)==null?void 0:n.thread_key,N=typeof P=="string"?P:void 0,M,w=(a=l)==null?void 0:a.communityType,A;i[9]!==w?(A=r("mwCMisStandAloneCommunity")(w),i[9]=w,i[10]=A):A=i[10];var F=A;if(l.invitedThreadId!=null&&d){var O=l,B=O.invitedThreadId;M=o("MWInboxCommunityThreadsRouteBuilder").buildURL({folder_id:h,thread_key:(c||(c=o("I64"))).to_string(B)})}else N==null?M=o("MWInboxCommunityThreadsRouteBuilder").buildURLWithoutThread({folder_id:h}):M=o("MWInboxCommunityThreadsRouteBuilder").buildURL({folder_id:h,thread_key:N});var W=r("MessengerWebUXLogger").useInteractionLogger(),q=_(r("MWResponsiveLayoutContext.react")),U=q.pushCard,V;i[11]!==N||i[12]!==l||i[13]!==h||i[14]!==s||i[15]!==d||i[16]!==F||i[17]!==p||i[18]!==W||i[19]!==U||i[20]!==f||i[21]!==x||i[22]!==v||i[23]!==T||i[24]!==M?(V=function(t){if(o("GroupsCometChatsEngagementLogger").log({action:"tap",event:"community_folder_open",source:"community_list",surface:"messenger_inbox"}),p||s)return x({communityID:h},k);if(d)return g.onReady(E),F?T({folder:l},L):v({folder:l,url:M},R);var e=t.timeStamp;g.onReady(function(t){t.markerStart(C,(c||(c=o("I64"))).to_int32(l.folderId),e),t.markerAnnotate(C,{bool:{is_container:!1}},{instanceKey:c.to_int32(l.folderId)})}),W==null||W({eventName:"open_community_thread_on_messenger_dot_com",threadKey:(c||(c=o("I64"))).of_string(N!=null?N:"")}),f.selected&&U(o("MWResponsiveLayoutConstants").MWLayoutPanel.THREAD_LIST_PANEL),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","community_group")},i[11]=N,i[12]=l,i[13]=h,i[14]=s,i[15]=d,i[16]=F,i[17]=p,i[18]=W,i[19]=U,i[20]=f,i[21]=x,i[22]=v,i[23]=T,i[24]=M,i[25]=V):V=i[25];var H=V,G;i[26]!==s||i[27]!==u||i[28]!==p||i[29]!==M?(G=u&&!p&&!s?{url:M}:void 0,i[26]=s,i[27]=u,i[28]=p,i[29]=M,i[30]=G):G=i[30];var z=G,j;return i[31]!==z||i[32]!==H||i[33]!==f?(j=m.jsx(r("MDSListCellPressable.react"),babelHelpers.extends({linkProps:z,onPress:H},f)),i[31]=z,i[32]=H,i[33]=f,i[34]=j):j=i[34],j}function R(){}function L(){}function E(e){e.markerStart(y)}function k(){}function I(e){var t=o("react-compiler-runtime").c(85),n=e.entityId,a=e.entityType,i=e.folder,l=e.maybeThread,u=r("MWCMInboxLeftRailSidebarContext.react").useHook(),p=u.isCollapsed,_;t[0]!==i.notificationMutedUntil?(_=(c||(c=o("I64"))).equal(i.notificationMutedUntil,c.zero),t[0]=i.notificationMutedUntil,t[1]=_):_=t[1];var f=!_,g;t[2]!==n||t[3]!==a||t[4]!==i.folderId?(g=a==="community_folder"&&(c||(c=o("I64"))).to_string(i.folderId)===n,t[2]=n,t[3]=a,t[4]=i.folderId,t[5]=g):g=t[5];var y=g,C;t[6]!==i.inviteStatus?(C=(c||(c=o("I64"))).equal(i.inviteStatus,(d||(d=o("LSIntEnum"))).ofNumber(r("LSCommunityInviteStatus").INVITED)),t[6]=i.inviteStatus,t[7]=C):C=t[7];var R=C,L;t[8]!==i.inviteStatus?(L=(c||(c=o("I64"))).equal(i.inviteStatus,(d||(d=o("LSIntEnum"))).ofNumber(r("LSCommunityInviteStatus").IN_COMMUNITY))||(c||(c=o("I64"))).equal(i.inviteStatus,(d||(d=o("LSIntEnum"))).ofNumber(r("LSCommunityInviteStatus").UNENGAGED_MEMBER))||(c||(c=o("I64"))).equal(i.inviteStatus,(d||(d=o("LSIntEnum"))).ofNumber(r("LSCommunityInviteStatus").ADDED_BUT_UNCONFIRMED)),t[8]=i.inviteStatus,t[9]=L):L=t[9];var E=L;o("useFetchCommunityJoinInfo").useFetchCommunityJoinInfo(i);var k;t[10]!==i?(k=r("getLSMediaCommunityFolderPictureUrl")(i),t[10]=i,t[11]=k):k=t[11];var I=k,T=I!=null?I:"",D;t[12]!==T?(D=m.jsx(r("MWXProfilePhoto.react"),{shape:"roundedRect",size:28,source:{uri:T}}),t[12]=T,t[13]=D):D=t[13];var x=D,$=v(i,R),P;t[14]!==i.takedownState?(P=i.takedownState!=null&&(c||(c=o("I64"))).equal(i.takedownState,(d||(d=o("LSIntEnum"))).ofNumber(1)),t[14]=i.takedownState,t[15]=P):P=t[15];var N=P,M;t[16]!==i.takedownState?(M=i.takedownState!=null&&(c||(c=o("I64"))).equal(i.takedownState,(d||(d=o("LSIntEnum"))).ofNumber(3)),t[16]=i.takedownState,t[17]=M):M=t[17];var w=M,A;e:{var F,O,B,W;if(t[18]!==i||t[19]!==R||t[20]!==f||t[21]!==l){var q=r("translatedServerString")(i.name);O=l==null?void 0:l.lastActivityTimestampMs,B=b(i,l,R),F=f?s._(/*BTDS*/"{folder name} (muted)",[s._param("folder name",q)]):q,W=r("isStringNotNullAndNotWhitespaceOnly")(B),t[18]=i,t[19]=R,t[20]=f,t[21]=l,t[22]=F,t[23]=O,t[24]=B,t[25]=W}else F=t[22],O=t[23],B=t[24],W=t[25];if(!W){var U;t[26]!==F?(U=s._(/*BTDS*/"{folder name}",[s._param("folder name",F)]),t[26]=F,t[27]=U):U=t[27];var V;t[28]!==F||t[29]!==U?(V=[U,F],t[28]=F,t[29]=U,t[30]=V):V=t[30],A=V;break e}var H;t[31]!==F?(H=s._(/*BTDS*/"{folder name}",[s._param("folder name",F)]),t[31]=F,t[32]=H):H=t[32];var G;t[33]===Symbol.for("react.memo_cache_sentinel")?(G=m.jsx("br",{}),t[33]=G):G=t[33];var z;t[34]!==B?(z=s._(/*BTDS*/"{folder snippet text}",[s._param("folder snippet text",B)]),t[34]=B,t[35]=z):z=t[35];var j=O!=null?" \xB7 ":"",K;t[36]!==O?(K=O!=null?r("formatDate")(new Date((c||(c=o("I64"))).to_float(O)),{allOtherTimes:"F j",today:"g:ia",withinWeek:"D"}):null,t[36]=O,t[37]=K):K=t[37];var Q;t[38]!==H||t[39]!==z||t[40]!==j||t[41]!==K?(Q=m.jsxs("span",{children:[H,G,z,j,K]}),t[38]=H,t[39]=z,t[40]=j,t[41]=K,t[42]=Q):Q=t[42];var X;t[43]!==F||t[44]!==Q?(X=[Q,F],t[43]=F,t[44]=Q,t[45]=X):X=t[45],A=X}var Y=A,J=Y[0],Z=Y[1],ee;t[46]!==i.folderId?(ee=(c||(c=o("I64"))).to_string(i.folderId),t[46]=i.folderId,t[47]=ee):ee=t[47];var te;t[48]!==i.folderId||t[49]!==p||t[50]!==f||t[51]!==Z||t[52]!==$?(te=p||!$&&!f?void 0:m.jsxs(m.Fragment,{children:[f?m.jsx(r("Box.react"),{testid:void 0,children:m.jsx(r("MWXIconStrict.react"),{color:"disabled",icon:r("MWXIconBellCross"),size:12})}):null,f&&$?m.jsx(r("Box.react"),{xstyle:h.iconSpacer}):null,$?m.jsx(r("MDSBadge.react"),{accessibilityText:Z,color:"blue",isProfileBadge:!0,size:8,testid:void 0}):null,f&&$?m.jsx(r("Box.react"),{xstyle:h.iconSpacerAfter}):null]}),t[48]=i.folderId,t[49]=p,t[50]=f,t[51]=Z,t[52]=$,t[53]=te):te=t[53];var ne;t[54]!==p||t[55]!==Z||t[56]!==x||t[57]!==$?(ne=$&&p?m.jsx(r("MDSBadgeContainer.react"),{badge:m.jsx(r("Box.react"),{xstyle:h.badgeCollapsed,children:m.jsx(r("MDSBadge.react"),{accessibilityText:Z,border:"white",color:"blue",isProfileBadge:!0,size:8,testid:void 0})}),badgeAlign:"topRight",children:x}):x,t[54]=p,t[55]=Z,t[56]=x,t[57]=$,t[58]=ne):ne=t[58];var re=y?"page":!1,oe;t[59]!==i.name||t[60]!==i.snippetText||t[61]!==p||t[62]!==w||t[63]!==R||t[64]!==N?(oe=p?m.jsx(r("Box.react"),{}):m.jsx(r("MWXTextPairing.react"),{headline:i.name,headlineColor:N||w?"disabled":void 0,headlineLineLimit:1,level:4,meta:R&&i.snippetText!=null?i.snippetText:void 0,metaColor:N||w?"disabled":void 0,metaLineLimit:1,reduceEmphasis:!0}),t[59]=i.name,t[60]=i.snippetText,t[61]=p,t[62]=w,t[63]=R,t[64]=N,t[65]=oe):oe=t[65];var ae=p&&h.contentCollapsed,ie;t[66]!==ae?(ie=[h.content,ae],t[66]=ae,t[67]=ie):ie=t[67];var le;t[68]!==i||t[69]!==w||t[70]!==E||t[71]!==R||t[72]!==y||t[73]!==N||t[74]!==te||t[75]!==ne||t[76]!==re||t[77]!==oe||t[78]!==ie?(le=m.jsx(S,{addOnEnd:te,addOnStart:ne,"aria-current":re,"aria-label":i.name,content:oe,contentTestId:"mwcm-inbox-folder-name",contentXStyle:ie,folder:i,isGeoBlocked:w,isInCommunity:E,isInvitedToCommunity:R,isTakenDown:N,overlayDisabled:!0,selected:y,size:"medium",xstyle:h.listCell}),t[68]=i,t[69]=w,t[70]=E,t[71]=R,t[72]=y,t[73]=N,t[74]=te,t[75]=ne,t[76]=re,t[77]=oe,t[78]=ie,t[79]=le):le=t[79];var se;return t[80]!==Z||t[81]!==ee||t[82]!==le||t[83]!==J?(se=m.jsx(r("MWXTooltip.react"),{align:"middle",label:Z,position:"end",tooltip:J,children:le},ee),t[80]=Z,t[81]=ee,t[82]=le,t[83]=J,t[84]=se):se=t[84],se}var T=m.memo(I);l.default=T}),226);
__d("MWCMInboxLeftRailSidebarFolderEdit.react",["Box.react","I64","LSCommunityInviteStatus","LSDict","LSFactory","LSIntEnum","LSUpdateUserSettingsForCommunitiesStoredProcedure","LSVec","MDSCheckbox.react","MWPBumpEntityKey","MWXColumn.react","MWXColumnItem.react","MWXListCellPressable.react","MWXProfilePhoto.react","MWXText.react","MWXTooltip.react","ReQL","ReQLSuspense","getLSMediaCommunityFolderPictureUrl","promiseDone","react","useMWCMNavigateNextCommunity","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useMemo,f={checkbox:{marginTop:"x1kgmq87",marginBottom:"xmgb6t1",marginInlineEnd:"x1xegmmw",$$css:!0}};function g(t){var n,a=t.entityId,l=t.folder,c=(e||(e=r("useReStore")))(),m=r("useMWCMNavigateNextCommunity")(l.folderId),g=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(c.tables.community_folders)},[c],i.id+":54"),h=_(function(){return g.slice(0).sort(function(e,t){return e.name.localeCompare(t.name)})},[g]),y=p(function(){var e,t=!((e=l.isHidden)!=null&&e);o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","community_group_edit.community."+(t?"hide":"show"));var n=new(r("LSDict"))().set("community_id",l.folderId).set("is_hidden",t);if(r("promiseDone")(c.runInTransaction(function(e){return r("LSUpdateUserSettingsForCommunitiesStoredProcedure")(r("LSFactory")(e),{updates:r("LSVec").ofArray([n])})},"readwrite",void 0,void 0,i.id+":78")),!(a==null||a==="")){var u=(s||(s=o("I64"))).equal(l.folderId,(s||(s=o("I64"))).of_string(a))&&t===!0;if(u)return m()}},[c,(s||(s=o("I64"))).to_string(l.folderId),l.isHidden,h,a]),C=r("getLSMediaCommunityFolderPictureUrl")(l),b=d.jsxs(d.Fragment,{children:[d.jsx(r("Box.react"),{xstyle:f.checkbox,children:d.jsx(r("MDSCheckbox.react"),{checked:!((n=l.isHidden)!=null&&n),iconSize:16,label:"",labelIsHidden:!0,name:l.name,onChange:function(){},tabIndex:-1,value:"checked"})}),d.jsx(r("Box.react"),{children:d.jsx(r("MWXProfilePhoto.react"),{shape:"roundedRect",size:28,source:{uri:C!=null?C:""}})})]}),v=s.equal(l.inviteStatus,(u||(u=o("LSIntEnum"))).ofNumber(r("LSCommunityInviteStatus").INVITED));return d.jsx(r("MWXTooltip.react"),{align:"middle",label:l.name,position:"end",tooltip:l.name,children:d.jsx(r("MWXListCellPressable.react"),{addOnStart:b,"aria-label":l.name,content:d.jsxs(r("MWXColumn.react"),{verticalAlign:"center",children:[d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:"headline4",children:l.name})}),v&&l.snippetText!=null?d.jsx(r("MWXColumnItem.react"),{paddingTop:8,children:d.jsx(r("MWXText.react"),{align:"start",color:"primary",numberOfLines:1,type:"meta4",children:l.snippetText})}):null]}),onPress:function(){y(),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","community_group")},size:"medium"})},s.to_string(l.fbGroupId))}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);
__d("MWCMInboxLeftRailSidebarInfiniteScrollList.react",["CometHeroHoldTrigger.react","LSCommunityWebSurfaceType","LSFactory","LSIntEnum","LSIssueCommunityListFetchStoredProcedure","MDSInfiniteScrollList.react","MWCMInboxLeftRailSidebarFolderListGlimmer.react","MWXPageletPlaceholder.react","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect;function _(t){var n,a,l=o("react-compiler-runtime").c(24),u=t.items,d=t.onLoaded,m=t.renderItem,_=(e||(e=r("useReStore")))(),f;l[0]!==_.tables.community_surface_ranges?(f=function(){return o("ReQL").fromTableAscending(_.tables.community_surface_ranges).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(r("LSCommunityWebSurfaceType").COMMUNITY_LIST),s.ofNumber(-14))},l[0]=_.tables.community_surface_ranges,l[1]=f):f=l[1];var g;l[2]!==_?(g=[_],l[2]=_,l[3]=g):g=l[3];var h=o("ReQLSuspense").useFirst(f,g,i.id+":38"),y;l[4]!==_||l[5]!==(h==null?void 0:h.nextPageCursor)?(y=function(){return r("promiseDone")(_.runInTransaction(function(e){return r("LSIssueCommunityListFetchStoredProcedure")(r("LSFactory")(e),{nextPageCursor:h==null?void 0:h.nextPageCursor})},"readwrite",void 0,void 0,i.id+":51"))},l[4]=_,l[5]=h==null?void 0:h.nextPageCursor,l[6]=y):y=l[6],h==null||h.nextPageCursor;var C=y,b=h!=null,v,S;l[7]!==b||l[8]!==d?(v=function(){b&&d!=null&&d()},S=[b,d],l[7]=b,l[8]=d,l[9]=v,l[10]=S):(v=l[9],S=l[10]),p(v,S);var R;l[11]===Symbol.for("react.memo_cache_sentinel")?(R=c.jsx(r("MWCMInboxLeftRailSidebarFolderListGlimmer.react"),{}),l[11]=R):R=l[11];var L=!b,E;l[12]!==L?(E=c.jsx(r("CometHeroHoldTrigger.react"),{description:"Fetching MWCMInbox Community List",hold:L}),l[12]=L,l[13]=E):E=l[13];var k=(n=h==null?void 0:h.hasMoreAfter)!=null?n:!1,I=(a=h==null?void 0:h.isLoadingAfter)!=null?a:!1,T;l[14]===Symbol.for("react.memo_cache_sentinel")?(T=c.jsx(r("MWCMInboxLeftRailSidebarFolderListGlimmer.react"),{}),l[14]=T):T=l[14];var D;l[15]!==C||l[16]!==u||l[17]!==m||l[18]!==I||l[19]!==k?(D=c.jsx(r("MDSInfiniteScrollList.react"),{hasMore:k,isLoading:I,items:u,loadingIndicator:T,onLoadMore:C,renderItem:m}),l[15]=C,l[16]=u,l[17]=m,l[18]=I,l[19]=k,l[20]=D):D=l[20];var x;return l[21]!==D||l[22]!==E?(x=c.jsxs(r("MWXPageletPlaceholder.react"),{fallback:R,name:"MWCMInboxLeftRailSidebarFolderList",children:[E,D]}),l[21]=D,l[22]=E,l[23]=x):x=l[23],x}l.default=_}),98);
__d("MessengerAsyncStorage",["AsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("AsyncStorage")}),98);
__d("useMWCMVerifyActivityStatusOnMountAndFocus",["FBLogger","I64","LSDict","LSFactory","LSVec","LSVerifyThreadsActivityStatusStoredProcedure","MessengerAsyncStorage","MetaConfig","ServerTime","VisibilityAPI","clearInterval","promiseDone","react","react-compiler-runtime","setInterval","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=c.useCallback,m=c.useEffect,p=c.useMemo,_=c.useRef,f=c.useState,g=1e3*60*60,h=g*3;function y(e){return(u||(u=o("I64"))).add(u.lsl_(u.of_float(e[0]),32),u.of_float(e[1]))}function C(e){return[(u||(u=o("I64"))).to_float(u.lsr_(e,32)),u.to_float(u.and_(e,u.of_int32(4294967295)))]}function b(t,n){var a=o("react-compiler-runtime").c(30),l=(e||(e=r("useReStore")))(),s=_(null),c="__"+t+".fromTimestampMs__",d;a[0]===Symbol.for("react.memo_cache_sentinel")?(d=C((u||(u=o("I64"))).of_float(o("ServerTime").getMillis()-h)),a[0]=d):d=a[0];var p=d,b=f(p),S=b[0],R=b[1],L=_(S),E,k;a[1]!==S?(E=function(){L.current=S},k=[S],a[1]=S,a[2]=E,a[3]=k):(E=a[2],k=a[3]),m(E,k);var I=_(!1),T;a[4]===Symbol.for("react.memo_cache_sentinel")?(T=r("MetaConfig")._("55")?["JOINED_PUBLIC_CHANNELS"]:[],a[4]=T):T=a[4];var D=T,x;if(a[5]!==t){var $=r("MetaConfig")._("95")||t==="ContextSwitcher"?["JOINED_COMMUNITY_CHANNELS"]:[];x=[].concat(D,$),a[5]=t,a[6]=x}else x=a[6];var P=x,N;a[7]!==l||a[8]!==c||a[9]!==P?(N=function(){P.length>0&&r("promiseDone")(r("MessengerAsyncStorage").getItem(c).then(function(e){if(e!=null){var t=JSON.parse(e);t!=null&&r("promiseDone")(l.runInTransaction(function(e){return r("LSVerifyThreadsActivityStatusStoredProcedure")(r("LSFactory")(e),{fromTimestampMs:y(t),serverMode:r("LSVec").ofArray(P),threads:new(r("LSDict"))([])})},"readwrite",void 0,void 0,i.id+":98"))}}).catch(v),function(){I.current=!0;var e=C((u||(u=o("I64"))).of_float(o("ServerTime").getMillis()));r("promiseDone")(r("MessengerAsyncStorage").setItem(c,JSON.stringify(e)),function(){R(e)})})},a[7]=l,a[8]=c,a[9]=P,a[10]=N):N=a[10];var M=N,w;a[11]===Symbol.for("react.memo_cache_sentinel")?(w=function(){s.current!=null&&(r("clearInterval")(s.current),s.current=null)},a[11]=w):w=a[11];var A=w,F;a[12]!==M?(F=function(){if(s.current==null&&r("MetaConfig")._("96")){var e;s.current=r("setInterval")(M,(e=r("MetaConfig")._("43"))!=null?e:g)}},a[12]=M,a[13]=F):F=a[13];var O=F,B;a[14]!==O||a[15]!==M?(B=function(){var e,t=o("ServerTime").getMillis()-(u||(u=o("I64"))).to_float(y(L.current));s.current==null&&O(),t>=((e=r("MetaConfig")._("43"))!=null?e:g)&&M()},a[14]=O,a[15]=M,a[16]=B):B=a[16];var W=B,q;a[17]!==W||a[18]!==n?(q=function(){o("VisibilityAPI").isVisibilityHidden()?A():n&&r("MetaConfig")._("97")&&W()},a[17]=W,a[18]=n,a[19]=q):q=a[19];var U=q,V;a[20]!==O||a[21]!==M||a[22]!==U?(V=function(){var e=null;return I.current||(M(),o("VisibilityAPI").canUseVisibilityAPI&&(e=o("VisibilityAPI").onVisibilityChange(U)),O()),(function(){e!=null&&o("VisibilityAPI").removeVisibiltyChangeListener(e),s.current!=null&&(r("clearInterval")(s.current),s.current=null)})},a[20]=O,a[21]=M,a[22]=U,a[23]=V):V=a[23];var H;a[24]!==W||a[25]!==O||a[26]!==n||a[27]!==M||a[28]!==U?(H=[A,W,O,n,M,U],a[24]=W,a[25]=O,a[26]=n,a[27]=M,a[28]=U,a[29]=H):H=a[29],m(V,H)}function v(e){r("FBLogger")("messenger_web").catching(e).mustfix("Failed to set timestamp for thread activity status")}l.default=b}),98);
__d("MWCMInboxLeftRailSidebarFolderList.react",["fbt","Box.react","CometPlaceholder.react","I64","LSCommunityInviteStatus","LSFactory","LSIntEnum","LSVerifyCommunityFolderExistsStoredProcedure","MWCMInboxLeftRailSidebarContext.react","MWCMInboxLeftRailSidebarFolder.react","MWCMInboxLeftRailSidebarFolderEdit.react","MWCMInboxLeftRailSidebarFolderListGlimmer.react","MWCMInboxLeftRailSidebarInfiniteScrollList.react","MWFocusTable.react","MWPBumpEntityKey","MWXPressable.react","MWXRow.react","MWXRowItem.react","MWXText.react","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","react-strict-dom","useAsyncReStore","useGroupsCometChatsEngagementImpressionLogger","useMWCMVerifyActivityStatusOnMountAndFocus","useReStore","useTopMostRouteCometEntityKey"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=d,_=p.useEffect,f=p.useMemo,g=p.useRef,h=p.useState,y={column:{flexShrink:"xs83m0k",$$css:!0},divider:{borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",marginBottom:"x1fqp7bg",marginTop:"x1xmf6yo",width:"xh8yej3",$$css:!0},headerContainer:{alignItems:"x6s0dn4",display:"x78zum5",flexDirection:"x1q0g3np",justifyContent:"x1qughib",paddingBottom:"xwib8y2",paddingInlineStart:"x25sj25",paddingInlineEnd:"x1icxu4v",paddingLeft:null,paddingRight:null,paddingTop:"xyamay9",$$css:!0},manageButton:{opacity:"xg01cxk",paddingTop:"x1yrsyyn",paddingInlineEnd:"x1icxu4v",paddingBottom:"x10b6aqq",paddingInlineStart:"x25sj25",$$css:!0},manageButtonVisible:{opacity:"x1hc1fzr",$$css:!0},wrapper:{flexShrink:"xs83m0k",$$css:!0}},C="community_folder",b=o("MWFocusTable.react").createFocusTable(o("MWFocusTable.react").tabbableScopeQuery),v=b[0],S=b[1],R=b[2];function L(e){var t=o("react-compiler-runtime").c(16),n=e.children,a=e.isCollapsed,i=e.isEditing,l=e.setIsEditing,u=h(!1),c=u[0],d=u[1],p=h(!1),_=p[0],f=p[1],g;t[0]!==i?(g=i?s._(/*BTDS*/"Done"):s._(/*BTDS*/"Manage"),t[0]=i,t[1]=g):g=t[1];var C=g,b,S;t[2]===Symbol.for("react.memo_cache_sentinel")?(b=function(){return d(!0)},S=function(){return d(!1)},t[2]=b,t[3]=S):(b=t[2],S=t[3]);var R;t[4]!==C||t[5]!==a||t[6]!==i||t[7]!==_||t[8]!==c||t[9]!==l?(R=m.jsx(r("Box.react"),{xstyle:y.headerContainer,children:a?m.jsx(r("Box.react"),{xstyle:y.divider}):m.jsxs(m.Fragment,{children:[m.jsx(r("MWXText.react"),{isSemanticHeading:!0,type:"headlineEmphasized4",children:s._(/*BTDS*/"Communities")}),m.jsx(r("MWXPressable.react"),{"aria-label":C,onFocusChange:function(t){return f(t)},onPress:function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","community_group_edit."+(i?"start":"end")),l(function(){return!i})},overlayRadius:"compact",xstyle:[y.manageButton,c||_||i?y.manageButtonVisible:null],children:m.jsx(r("MWXText.react"),{color:"blueLink",numberOfLines:1,type:"button2",children:C})})]})}),t[4]=C,t[5]=a,t[6]=i,t[7]=_,t[8]=c,t[9]=l,t[10]=R):R=t[10];var L;t[11]!==n?(L=m.jsx(v,{tabScopeQuery:o("MWFocusTable.react").tabbableScopeQuery,children:n}),t[11]=n,t[12]=L):L=t[12];var E;return t[13]!==R||t[14]!==L?(E=m.jsxs(r("Box.react"),{"data-testid":void 0,onMouseEnter:b,onMouseLeave:S,xstyle:y.wrapper,children:[R,L]}),t[13]=R,t[14]=L,t[15]=E):E=t[15],E}function E(){var t=o("react-compiler-runtime").c(7),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.community_folders||t[1]!==n.tables.threads?(a=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(n.tables.community_folders),o("ReQL").fromTableAscending(n.tables.threads))},t[0]=n.tables.community_folders,t[1]=n.tables.threads,t[2]=a):a=t[2];var l;t[3]!==n?(l=[n],t[3]=n,t[4]=l):l=t[4];var s=o("ReQLSuspense").useArray(a,l,i.id+":155"),u;t[5]!==s?(u=s.filter(I).sort(k),t[5]=s,t[6]=u):u=t[6];var c=u;return c}function k(e,t){var n=e[0],r=t[0];return n.name.localeCompare(r.name)}function I(e){var t=e[0];return!(u||(u=o("I64"))).equal(t.inviteStatus,(c||(c=o("LSIntEnum"))).ofNumber(r("LSCommunityInviteStatus").REQUEST_PENDING))}function T(e){var t,n=o("react-compiler-runtime").c(36),a=e.onLoaded,l=(t=r("useTopMostRouteCometEntityKey")())!=null?t:{},c=l.entity_id,d=l.entity_type,p=r("useAsyncReStore")(),f=g(!1),b,v;n[0]!==p||n[1]!==c||n[2]!==d?(b=function(){!f.current&&d===C&&c!=null&&(f.current=!0,r("promiseDone")(p,function(e){r("promiseDone")(e.runInTransaction(function(e){return r("LSVerifyCommunityFolderExistsStoredProcedure")(r("LSFactory")(e),{fbGroupId:(u||(u=o("I64"))).zero,folderId:u.of_string(c)})},"readwrite",void 0,void 0,i.id+":202"))}))},v=[p,d,c,f],n[0]=p,n[1]=c,n[2]=d,n[3]=b,n[4]=v):(b=n[3],v=n[4]),_(b,v),r("useMWCMVerifyActivityStatusOnMountAndFocus")("FolderList",!0);var k=r("MWCMInboxLeftRailSidebarContext.react").useHook(),I=k.isCollapsed,T=h(!1),x=T[0],$=T[1],P=E(),N;n[5]!==P?(N=P.filter(D),n[5]=P,n[6]=N):N=n[6];var M=N,w;n[7]!==P.length?(w=P.length.toString(),n[7]=P.length,n[8]=w):w=n[8];var A;n[9]!==M.length?(A=M.length.toString(),n[9]=M.length,n[10]=A):A=n[10];var F;n[11]!==w||n[12]!==A?(F={client_extras:{folder_count:w,visible_folder_count:A},event:"community_folder_list_rendered",source:"community_list",surface:"messenger_inbox"},n[11]=w,n[12]=A,n[13]=F):F=n[13];var O=r("useGroupsCometChatsEngagementImpressionLogger")(F),B=null,W=P.length!==0;if(W)if(x&&!I){var q;n[14]!==c?(q=function(t){var e=t[0];return m.jsx(S,{children:m.jsx(R,{children:m.jsx(r("MWCMInboxLeftRailSidebarFolderEdit.react"),{entityId:c!=null?c:"",folder:e})})},(u||(u=o("I64"))).to_string(e.folderId))},n[14]=c,n[15]=q):q=n[15];var U;n[16]!==P||n[17]!==q?(U=m.jsx(r("MWCMInboxLeftRailSidebarInfiniteScrollList.react"),{items:P,renderItem:q}),n[16]=P,n[17]=q,n[18]=U):U=n[18],B=U}else{var V=M.length!==0;if(V){var G;n[21]!==c||n[22]!==d?(G=function(t){var e=t[0],n=t[1];return m.jsx(r("CometPlaceholder.react"),{fallback:m.jsx(r("MWCMInboxLeftRailSidebarFolderListGlimmer.react"),{rowCount:1}),name:"MWCMInboxLeftRailSidebarFolderList.SiderbarFolderList",children:m.jsx(S,{children:m.jsx(R,{children:m.jsx(r("MWCMInboxLeftRailSidebarFolder.react"),{entityId:c!=null?c:"",entityType:d!=null?d:"",folder:e,maybeThread:n})})})},(u||(u=o("I64"))).to_string(e.folderId))},n[21]=c,n[22]=d,n[23]=G):G=n[23];var z;n[24]!==a||n[25]!==G||n[26]!==M?(z=m.jsx(r("MWCMInboxLeftRailSidebarInfiniteScrollList.react"),{items:M,onLoaded:a,renderItem:G}),n[24]=a,n[25]=G,n[26]=M,n[27]=z):z=n[27],B=z}else{var H;n[19]!==I?(H=I?null:m.jsx(r("MWXRow.react"),{paddingTop:0,children:m.jsx(r("MWXRowItem.react"),{children:m.jsx(r("MWXText.react"),{type:"meta2",children:s._(/*BTDS*/"All communities are hidden")})})}),n[19]=I,n[20]=H):H=n[20],B=H}}var j;n[28]===Symbol.for("react.memo_cache_sentinel")?(j=[y.column],n[28]=j):j=n[28];var K;n[29]!==B||n[30]!==I||n[31]!==x?(K=B!==null?m.jsx(L,{isCollapsed:I,isEditing:x,setIsEditing:$,children:B}):null,n[29]=B,n[30]=I,n[31]=x,n[32]=K):K=n[32];var Q;return n[33]!==O||n[34]!==K?(Q=m.jsx(o("react-strict-dom").html.div,{ref:O,style:j,children:K}),n[33]=O,n[34]=K,n[35]=Q):Q=n[35],Q}function D(e){var t,n=e[0];return!((t=n.isHidden)!=null&&t)}l.default=T}),226);
__d("MWInboxSettingsMenuButton.react",["MWResponsiveLayoutContext.react","MWXDeferredPopoverTrigger.react","gkx","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=r("requireDeferred")("MWInboxSettingsMenu.react").__setRef("MWInboxSettingsMenuButton.react");function d(e){var t=o("react-compiler-runtime").c(9),n=e.children,a=e.position,i=e.showHidden,l=e.showMessageRequests,d=e.showRestrictedAccounts,m=a===void 0?"below":a,p=u(r("MWResponsiveLayoutContext.react")),_=p.maxCardsVisible,f=!r("gkx")("23433")&&_===1?"middle":"start",g;t[0]!==i||t[1]!==l||t[2]!==d?(g={showHidden:i,showMessageRequests:l,showRestrictedAccounts:d},t[0]=i,t[1]=l,t[2]=d,t[3]=g):g=t[3];var h;return t[4]!==f||t[5]!==n||t[6]!==m||t[7]!==g?(h=s.jsx(r("MWXDeferredPopoverTrigger.react"),{align:f,popoverProps:g,popoverResource:c,position:m,children:n}),t[4]=f,t[5]=n,t[6]=m,t[7]=g,t[8]=h):h=t[8],h}l.default=d}),98);
__d("MWXIconSidebarLeftClose",["MWXSvgIcon","SVGIcon","cr:22490","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22490")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconSidebarLeftOpen",["MWXSvgIcon","SVGIcon","cr:22491","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22491")),r("gkx")("23219"));l.default=e}),98);
__d("MWCMProfilePhotoMenu.react",["fbt","CometPlaceholder.react","MDSNoProfilePictureSvg.react","MWCMInboxLeftRailSidebarContext.react","MWInboxSettingsMenuButton.react","MWPActor.react","MWPBumpEntityKey","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconSidebarLeftClose","MWXIconSidebarLeftOpen","MWXPressable.react","MWXProfilePhoto.react","MWXRow.react","MWXRowItem.react","MWXText.react","ReQL","ReQLSuspense","cr:4007","emptyFunction","getLSMediaContactProfilePictureUrl","gkx","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.useState,m={actorName:{maxWidth:"x18qnofl",textOverflow:"xlyipyv",$$css:!0},pressableOverlay:{maxWidth:"x193iq5w",width:"xh8yej3",$$css:!0},pressableOverlayExpanded:{marginTop:"xifccgj",marginInlineEnd:"x1ws5yxj",marginBottom:"x4cne27",marginInlineStart:"xwklpps",paddingTop:"x1yrsyyn",paddingInlineEnd:"x1icxu4v",paddingBottom:"x10b6aqq",paddingInlineStart:"x25sj25",$$css:!0}};function p(e){var t=o("react-compiler-runtime").c(4),n=e.children,a=e.isCollapsed,i=a===void 0?!1:a;if(i){var l;return t[0]!==n?(l=c.jsx(r("MWXColumn.react"),{align:"center",paddingTop:12,spacing:8,verticalAlign:"center",children:n}),t[0]=n,t[1]=l):l=t[1],l}var s;return t[2]!==n?(s=c.jsx(r("MWXRow.react"),{align:"justify",expanding:!0,paddingHorizontal:0,paddingTop:12,paddingVertical:0,spacing:12,verticalAlign:"center",children:n}),t[2]=n,t[3]=s):s=t[3],s}function _(e){var t=o("react-compiler-runtime").c(6),n=e.children,a=e.expanding,i=e.isCollapsed,l=a===void 0?!1:a,s=i===void 0?!1:i;if(s){var u;return t[0]!==n||t[1]!==l?(u=c.jsx(r("MWXColumnItem.react"),{expanding:l,children:n}),t[0]=n,t[1]=l,t[2]=u):u=t[2],u}var d;return t[3]!==n||t[4]!==l?(d=c.jsx(r("MWXRowItem.react"),{expanding:l,children:n}),t[3]=n,t[4]=l,t[5]=d):d=t[5],d}function f(t){var a,l,u,f=t.isSmallViewport,g=o("MWPActor.react").useActor(),h=(e||(e=r("useReStore")))(),y=r("MWCMInboxLeftRailSidebarContext.react").useHook(),C=y.isCollapsed,b=y.setIsCollapsed,v=d(!1),S=v[0],R=v[1],L=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(h.tables.contacts).getKeyRange(g)},[h,g],i.id+":118"),E=(a=(l=L==null?void 0:L.firstName)!=null?l:L==null?void 0:L.name)!=null?a:"",k=(u=L==null?void 0:L.username)!=null?u:"",I=r("gkx")("772")&&k.length>0,T=I?E+" @"+k:E,D=L?r("getLSMediaContactProfilePictureUrl")(L):"",x=n("cr:4007")==null?void 0:n("cr:4007")();return c.jsxs(p,{isCollapsed:C,children:[c.jsx(_,{expanding:!0,isCollapsed:C,children:c.jsx("div",babelHelpers.extends({},{0:{},1:{className:"xvs2etk xg3wpu6 x1jwbhkm xgg4q86"}}[!!C<<0],{"data-testid":void 0,children:c.jsx(r("MWInboxSettingsMenuButton.react"),{showHidden:r("emptyFunction"),showMessageRequests:r("emptyFunction"),showRestrictedAccounts:r("emptyFunction"),children:function(t,n){return c.jsx(r("MWXPressable.react"),{"aria-expanded":S,"aria-haspopup":"menu","aria-label":s._(/*BTDS*/"{username} Settings, help and more",[s._param("username",T)]),onPress:function(){return R(!S),n(),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.sidebar","profile_overflow_menu")},overlayRadius:C?"inherit":"normal",ref:t,xstyle:[m.pressableOverlay,!C&&m.pressableOverlayExpanded],children:c.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:C?0:8,verticalAlign:"center",children:[c.jsx(r("MWXRowItem.react"),{children:D===""?c.jsx(r("MDSNoProfilePictureSvg.react"),{}):c.jsx(r("MWXProfilePhoto.react"),{addOnTopEnd:x!=null&&x>0?{number:x,type:"notificationBadge"}:void 0,size:32,source:{uri:D}})}),C?null:c.jsx(r("MWXRowItem.react"),{xstyle:m.actorName,children:I?c.jsxs(r("MWXColumn.react"),{spacing:4,children:[c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{color:"primary",numberOfLines:1,type:"headline4",children:E})}),c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{color:"secondary",numberOfLines:1,type:"meta4",children:k})})]}):c.jsx(r("MWXText.react"),{color:"primary",numberOfLines:2,type:"headline4",children:E})})]})})}})}))}),f?null:c.jsx(_,{isCollapsed:C,children:c.jsx(r("MWXCircleButton.react"),{"aria-expanded":!C,"aria-label":C?s._(/*BTDS*/"Expand inbox sidebar"):s._(/*BTDS*/"Collapse inbox sidebar"),color:"primary",icon:r(C?"MWXIconSidebarLeftOpen":"MWXIconSidebarLeftClose"),onPress:function(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.ia.sidebar_expand_collapse",C?"expand_clicked":"collapse_clicked"),b(function(e){return!e})},size:36,testid:void 0,type:"normal"})})]})}f.displayName=f.name+" [from "+i.id+"]";function g(e){var t=o("react-compiler-runtime").c(3),n=e.isSmallViewport,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"xh8yej3"},t[0]=a):a=t[0];var i;return t[1]!==n?(i=c.jsx("div",babelHelpers.extends({},a,{children:c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWCMProfilePhotoMenu",children:c.jsx(f,{isSmallViewport:n})})})),t[1]=n,t[2]=i):i=t[2],i}l.default=g}),226);
__d("MWCMInboxLeftRailSidebar.react",["CometPageletWithDiv.react","CometScrollView.react","MWCMInboxLeftRailSidebarButtons.react","MWCMInboxLeftRailSidebarContext.react","MWCMInboxLeftRailSidebarFolderList.react","MWCMInboxLeftRailSidebarLayout.react","MWCMProfilePhotoMenu.react","MWXColumn.react","MWXColumnItem.react","MessengerMSplitFlag","react","react-compiler-runtime","useMWFamilyCenterContext","useMWResponsiveLayoutBreakpoints","useMatchViewport"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={scrollView:{flexBasis:"x1r8uery",width:"xh8yej3",$$css:!0},scrollViewExpanded:{paddingInlineEnd:"xv54qhq",$$css:!0}};function c(e){var t,n,a=o("react-compiler-runtime").c(20),i=e.mCMInboxLeftRailSidebarBusinessSupportButtonQueryRef,l=(t=(n=r("useMWResponsiveLayoutBreakpoints")())==null?void 0:n.sidebarExpanded[1])!=null?t:900,c=r("useMatchViewport")("max","width",l),d=r("MWCMInboxLeftRailSidebarContext.react").useHook(),m=d.isCollapsed,p=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),_=p.familyCenterData,f=m?null:u.scrollViewExpanded,g;a[0]!==f?(g=[u.scrollView,f],a[0]=f,a[1]=g):g=a[1];var h;a[2]!==i?(h=s.jsx(r("MWXColumnItem.react"),{align:"stretch",testid:void 0,children:s.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWCMInboxLeftRailSidebarButtons",children:s.jsx(r("MWCMInboxLeftRailSidebarButtons.react"),{mCMInboxLeftRailSidebarBusinessSupportButtonQueryRef:i})})}),a[2]=i,a[3]=h):h=a[3];var y;a[4]!==_.shouldHideSidebar?(y=!_.shouldHideSidebar&&!r("MessengerMSplitFlag").is_msplit_account&&s.jsx(r("MWXColumnItem.react"),{align:"stretch",testid:void 0,children:s.jsx(r("MWCMInboxLeftRailSidebarFolderList.react"),{})}),a[4]=_.shouldHideSidebar,a[5]=y):y=a[5];var C;a[6]!==h||a[7]!==y?(C=s.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWCMInboxLeftRailSidebar",children:s.jsxs(r("MWXColumn.react"),{align:"start",spacing:0,children:[h,y]})}),a[6]=h,a[7]=y,a[8]=C):C=a[8];var b;a[9]!==m||a[10]!==g||a[11]!==C?(b=s.jsx(r("CometScrollView.react"),{hideScrollbar:m,showsHorizontalScrollIndicator:!1,showsVerticalScrollIndicator:!0,withBottomShadow:!0,withTopShadow:!0,xstyle:g,children:C}),a[9]=m,a[10]=g,a[11]=C,a[12]=b):b=a[12];var v;a[13]===Symbol.for("react.memo_cache_sentinel")?(v="xh8yej3",a[13]=v):v=a[13];var S;a[14]!==c?(S=s.jsx(o("CometPageletWithDiv.react").Placeholder,{className:v,fallback:null,name:"MWCMProfilePhotoMenu",children:s.jsx(r("MWCMProfilePhotoMenu.react"),{isSmallViewport:c})}),a[14]=c,a[15]=S):S=a[15];var R;return a[16]!==m||a[17]!==b||a[18]!==S?(R=s.jsxs(r("MWCMInboxLeftRailSidebarLayout.react"),{isCollapsed:m,children:[b,S]}),a[16]=m,a[17]=b,a[18]=S,a[19]=R):R=a[19],R}var d=s.memo(c);l.default=d}),98);
__d("MWCMSubthreadlistMenuItem.react",["fbt","I64","MWInboxInfoButton.react","MWInboxInfoPanelContext.react","MWXIconForListCell.react","MWXIconMenuItemThread","ReQL","ReQLSuspense","intlSummarizeNumber","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react"));function m(t){var n,a=o("react-compiler-runtime").c(10),l=t.threadKey,c=(e||(e=r("useReStore")))(),m=(n=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(c.tables.threads,["subthreadCount"]).getKeyRange(l)},[c,l],i.id+":29"))==null?void 0:n.subthreadCount,p;a[0]!==m?(p=m!=null?"("+r("intlSummarizeNumber")((u||(u=o("I64"))).to_int32(m))+")":"",a[0]=m,a[1]=p):p=a[1];var _=p,f;a[2]!==_?(f=s._(/*BTDS*/"Sidechats {subthread_count}",[s._param("subthread_count",_)]),a[2]=_,a[3]=f):f=a[3];var g=f,h=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),y=h.setShowSubthreadList,C;a[4]===Symbol.for("react.memo_cache_sentinel")?(C=d.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMenuItemThread")}),a[4]=C):C=a[4];var b;a[5]!==y?(b=function(){y(!0)},a[5]=y,a[6]=b):b=a[6];var v;return a[7]!==b||a[8]!==g?(v=d.jsx(r("MWInboxInfoButton.react"),{addOnStart:C,label:g,onPress:b}),a[7]=b,a[8]=g,a[9]=v):v=a[9],v}l.default=m}),226);
__d("MWChannelsPersonalInboxOptInPage.react",["fbt","CometPlaceholder.react","Int64Hooks","LSFactory","LSFetchDiscoverableChatsPersonalInboxInfoStoredProcedure","LSHideBroadcastChannelFromPersonalInboxStoredProcedure","LSShowBroadcastChannelInPersonalInboxStoredProcedure","Locale","MWAdminForBroadcastChannelUtils","MWLogBroadcastChannelFalcoEvent","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXGlimmer.react","MWXIconArrowLeft","MWXIconArrowRight","MWXListCell.react","MWXProfilePhoto.react","MWXRow.react","MWXRowItem.react","MWXSwitch.react","MWXText.react","MWXTextPairing.react","MWXThreadThemeColor","ReQL","ReQLSuspense","getLSMediaContactProfilePictureUrl","promiseDone","react","react-compiler-runtime","useReStore","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useId,_=d.useState,f={glimmerBase:{borderStartStartRadius:"xaur0o6",borderStartEndRadius:"x124ains",borderEndEndRadius:"x1ojmjj",borderEndStartRadius:"xj6tauk",marginInlineStart:"xdwrcjd",marginTop:"x1xmf6yo",$$css:!0},glimmerIcon:{height:"xc9qbxq",width:"x14qfxbe",$$css:!0},glimmerLabel:{height:"x17rw0jw",width:"x1dz1jew",$$css:!0}};function g(t){var n=o("react-compiler-runtime").c(34),a=t.channelCreator,l=t.personalInboxInfo,u=t.threadKey,d=_(l.isShownInPersonalInbox),m=d[0],f=d[1],g=p(),h=(e||(e=r("useReStore")))(),y;n[0]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Show channel in inbox"),n[0]=y):y=n[0];var C=y,b;n[1]!==h||n[2]!==u?(b=function(t){r("promiseDone")(t?h.runInTransaction(function(e){return r("LSShowBroadcastChannelInPersonalInboxStoredProcedure")(r("LSFactory")(e),{threadId:u})},"readwrite",void 0,void 0,i.id+":92"):h.runInTransaction(function(e){return r("LSHideBroadcastChannelFromPersonalInboxStoredProcedure")(r("LSFactory")(e),{threadId:u})},"readwrite",void 0,void 0,i.id+":92"),function(){f(t)})},n[1]=h,n[2]=u,n[3]=b):b=n[3];var v=b,S,R;n[4]!==u?(S=function(){o("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({action:2,event:276,parentSurface:11,source:62,surface:16,threadFbid:u})},R=[u],n[4]=u,n[5]=S,n[6]=R):(S=n[5],R=n[6]);var L=o("Int64Hooks").useCallbackInt64(S,R),E;n[7]!==L?(E={onImpressionStart:L},n[7]=L,n[8]=E):E=n[8];var k=r("useSinglePartialViewImpression")(E),I;n[9]!==m||n[10]!==v?(I=function(){v(!m)},n[9]=m,n[10]=v,n[11]=I):I=n[11];var T;n[12]!==g||n[13]!==m||n[14]!==I?(T=c.jsx(r("MWXSwitch.react"),{"aria-describedby":g,"aria-label":C,onValueChange:I,size:"small",value:m}),n[12]=g,n[13]=m,n[14]=I,n[15]=T):T=n[15];var D;n[16]!==a?(D=r("getLSMediaContactProfilePictureUrl")(a),n[16]=a,n[17]=D):D=n[17];var x;n[18]!==D?(x=c.jsx(r("MWXProfilePhoto.react"),{size:36,source:{uri:D}}),n[18]=D,n[19]=x):x=n[19];var $;n[20]===Symbol.for("react.memo_cache_sentinel")?($=c.jsx(r("MWXTextPairing.react"),{headline:c.jsx(r("MWXText.react"),{type:"headline4",children:C}),level:4}),n[20]=$):$=n[20];var P;n[21]!==k||n[22]!==T||n[23]!==x?(P=c.jsx(r("MWXRow.react"),{children:c.jsx(r("MWXRowItem.react"),{expanding:!0,children:c.jsx(r("MWXListCell.react"),{addOnEnd:T,addOnEndVerticalAlign:"center",addOnStart:x,content:$,ref:k,size:"large"})})}),n[21]=k,n[22]=T,n[23]=x,n[24]=P):P=n[24];var N;n[25]===Symbol.for("react.memo_cache_sentinel")?(N={className:"x135b78x x11lfxj5"},n[25]=N):N=n[25];var M;n[26]!==a.name||n[27]!==l.actingAccountName?(M=s._(/*BTDS*/"You can message as {page_name} while logged into {acting_account_name} on Messenger.",[s._param("page_name",a.name),s._param("acting_account_name",l.actingAccountName)]),n[26]=a.name,n[27]=l.actingAccountName,n[28]=M):M=n[28];var w;n[29]!==M?(w=c.jsx(r("MWXRow.react"),{paddingHorizontal:16,paddingVertical:16,children:c.jsx(r("MWXRowItem.react"),{children:c.jsx("div",babelHelpers.extends({},N,{children:c.jsx(r("MWXText.react"),{color:"tertiary",type:"body4",children:M})}))})}),n[29]=M,n[30]=w):w=n[30];var A;return n[31]!==P||n[32]!==w?(A=c.jsxs(c.Fragment,{children:[P,w]}),n[31]=P,n[32]=w,n[33]=A):A=n[33],A}function h(t){var n=o("react-compiler-runtime").c(24),a=t.onReturn,l=t.threadKey,u=(e||(e=r("useReStore")))(),d=o("MWAdminForBroadcastChannelUtils").useFetchBroadcastChannelCreator(l),m,p;n[0]!==u||n[1]!==l?(m=function(){r("promiseDone")(u.runInTransaction(function(e){return r("LSFetchDiscoverableChatsPersonalInboxInfoStoredProcedure")(r("LSFactory")(e),{threadKey:l})},"readwrite",void 0,void 0,i.id+":201"))},p=[u,l],n[0]=u,n[1]=l,n[2]=m,n[3]=p):(m=n[2],p=n[3]),o("Int64Hooks").useEffectInt64(m,p);var _;n[4]!==u.tables.discoverable_chats_personal_inbox_info||n[5]!==l?(_=function(){return o("ReQL").fromTableAscending(u.tables.discoverable_chats_personal_inbox_info).getKeyRange(l)},n[4]=u.tables.discoverable_chats_personal_inbox_info,n[5]=l,n[6]=_):_=n[6];var h;n[7]!==u||n[8]!==l?(h=[u,l],n[7]=u,n[8]=l,n[9]=h):h=n[9];var y=o("ReQLSuspense").useFirst(_,h,i.id+":212"),C,b;n[10]===Symbol.for("react.memo_cache_sentinel")?(C=s._(/*BTDS*/"Back"),b=o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),n[10]=C,n[11]=b):(C=n[10],b=n[11]);var v;n[12]!==a?(v=c.jsx(r("MWXRowItem.react"),{children:c.jsx(r("MWXCircleButton.react"),{"aria-label":C,color:b,icon:o("Locale").isRTL()?r("MWXIconArrowRight"):r("MWXIconArrowLeft"),onPress:a,size:32,type:"deemphasized"})}),n[12]=a,n[13]=v):v=n[13];var S;n[14]===Symbol.for("react.memo_cache_sentinel")?(S=c.jsx(r("MWXRowItem.react"),{children:c.jsx(r("MWXText.react"),{type:"headlineEmphasized2",children:s._(/*BTDS*/"Message from main profile")})}),n[14]=S):S=n[14];var R;n[15]!==v?(R=c.jsx(r("MWXColumnItem.react"),{children:c.jsxs(r("MWXRow.react"),{align:"start",verticalAlign:"center",children:[v,S]})}),n[15]=v,n[16]=R):R=n[16];var L;n[17]!==d||n[18]!==y||n[19]!==l?(L=c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWChannelsPersonalInboxOptInPage",children:d!=null&&y!=null?c.jsx(g,{channelCreator:d,personalInboxInfo:y,threadKey:l}):c.jsxs(r("MWXRow.react"),{align:"center",expanding:!0,paddingHorizontal:16,paddingVertical:20,verticalAlign:"center",children:[c.jsx(r("MWXRowItem.react"),{children:c.jsx(r("MWXGlimmer.react"),{index:0,xstyle:[f.glimmerIcon,f.glimmerBase]})}),c.jsx(r("MWXRowItem.react"),{expanding:!0,children:c.jsx(r("MWXGlimmer.react"),{index:1,xstyle:[f.glimmerLabel,f.glimmerBase]})})]})})}),n[17]=d,n[18]=y,n[19]=l,n[20]=L):L=n[20];var E;return n[21]!==L||n[22]!==R?(E=c.jsxs(r("MWXColumn.react"),{expanding:!0,children:[R,L]}),n[21]=L,n[22]=R,n[23]=E):E=n[23],E}l.default=h}),226);
__d("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react",["CometErrorBoundary.react","CometPlaceholder.react","HeroInteractionIgnoreWithDiv.react","deferredLoadComponent","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferred")("MWChatEncryptedBackupsHandleRestoreWrapper.react").__setRef("MWChatEncryptedBackupsHandleRestoreWrapperDeferred.react"));function c(e){return s.jsx(r("HeroInteractionIgnoreWithDiv.react"),{children:s.jsx(r("CometErrorBoundary.react"),{fallback:function(){return null},children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"EncryptedBackupsHandleRestoreWrapper",children:s.jsx(u,babelHelpers.extends({},e))})})})}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWChatEncryptedBackupsUpsellMessengerInboxWithEBCheck.react",["cr:10109","cr:13645","cr:7106","cr:9389","cr:9935"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(e=(s=(u=(c=n("cr:9935"))!=null?c:n("cr:10109"))!=null?u:n("cr:7106"))!=null?s:n("cr:9389"))!=null?e:n("cr:13645"),m=d;l.default=m}),98);
__d("MWChatRTCInfoButtonIcon.react",["cr:429"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:429")}),98);
__d("MWCircleButtonWithChildren.react",["CometPressable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ariaExpanded","label","ref","disabled"],s,u=s||(s=o("react")),c={button:{alignItems:"x6s0dn4",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxSizing:"x9f619",display:"x78zum5",height:"xc9qbxq",justifyContent:"xl56j7k",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x1n2onr6",width:"x14qfxbe",$$css:!0},pressed:{transform:"x1n5d1j9",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(12),a,i,l,s,c;n[0]!==t?(a=t.ariaExpanded,i=t.label,s=t.ref,c=t.disabled,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5]);var d=c===void 0?!1:c,p;return n[6]!==a||n[7]!==d||n[8]!==i||n[9]!==l||n[10]!==s?(p=u.jsx(r("CometPressable.react"),babelHelpers.extends({},l,{"aria-expanded":a,"aria-label":i,disabled:d,overlayRadius:"50%",ref:s,xstyle:m})),n[6]=a,n[7]=d,n[8]=i,n[9]=l,n[10]=s,n[11]=p):p=n[11],p}function m(e){return[c.button,e.pressed?c.pressed:!1]}l.default=d}),98);
__d("MessengerFamilyCenterTimeLimitLoggingHooks",["react","react-compiler-runtime","requireDeferred","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback,u=r("requireDeferred")("YpMessengerTimeLimitClientEventFalcoEvent").__setRef("MessengerFamilyCenterTimeLimitLoggingHooks");function c(){return d}function d(e){u.onReady(function(t){t.log(function(){return babelHelpers.extends({},e)})})}function m(e){var t=o("react-compiler-runtime").c(5),n=c(),a;t[0]!==e||t[1]!==n?(a=function(){n(babelHelpers.extends({},e))},t[0]=e,t[1]=n,t[2]=a):a=t[2];var i=a,l;return t[3]!==i?(l={onImpressionStart:i},t[3]=i,t[4]=l):l=t[4],r("useSinglePartialViewImpression")(l)}l.useLogEvent=c,l.useImpressionLogger=m}),98);
__d("MessengerSupervisionState",[],(function(t,n,r,o,a,i){var e=Object.freeze({IN_COOLDOWN_AFTER_SUPERVISION_REMOVAL:1});i.default=e}),66);
__d("useMWFamilyCenterNavigateToSupervisorThread",["FBLogger","I64","LSIntEnum","hasDefaultThreadOneToOneCapability","react","react-compiler-runtime","useMWNavigation","useMWPCreateOneToOneThreadThenNavigate","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback;function m(t){var n=o("react-compiler-runtime").c(5),a=(e||(e=r("useReStore")))(),i=r("useMWNavigation")(),l=r("useMWPCreateOneToOneThreadThenNavigate")(i,"familyCenterScheduledBreak"),c;return n[0]!==l||n[1]!==a||n[2]!==i||n[3]!==t?(c=async function(){if(t==null){r("FBLogger")("messenger_web_wellbeing").warn("Trying to chat with supervisor without loading the supervisor thread information");return}var e=(s||(s=o("I64"))).equal(t.threadType,(u||(u=o("LSIntEnum"))).ofNumber(1)),n=await r("hasDefaultThreadOneToOneCapability")(t.threadKey,a);if(!e||!n){i.openInbox(t,"familyCenterScheduledBreak");return}l(t.threadKey)},n[0]=l,n[1]=a,n[2]=i,n[3]=t,n[4]=c):c=n[4],c}l.default=m}),98);
__d("MWFamilyCenterEnforcementPage.react",["fbt","ix","JSResourceForInteraction","LSIntEnum","MWPBumpEntityKey","MWXColumn.react","MWXColumnItem.react","MWXDialog.react","MWXDialogFooter.react","MWXDialogHeader.react","MWXImage.react","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","MessengerFamilyCenterTimeLimitLoggingHooks","MessengerLogoSvg.react","MessengerSupervisionState","XMessengerDotComHelpContentControllerRouteBuilder","XMessengerFamilyCenterHomeControllerRouteBuilder","openMessengerLogOut","promiseDone","react","react-compiler-runtime","useCurrentDisplayMode","useMAWSecretConversationsLogOut","useMWFamilyCenterNavigateToSupervisorThread","useMWXLazyDialog"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react")),m={main:{marginTop:"xr1yuqi",marginInlineEnd:"x11t971q",marginBottom:"x4ii5y1",marginInlineStart:"xvc5jky",$$css:!0},textContainer:{paddingInlineStart:"x1oiqv2n",paddingInlineEnd:"x15zmtp0",paddingLeft:null,paddingRight:null,$$css:!0},timerImage:{marginBottom:"x9a3u73",marginTop:"x1d7yc3v",transform:"x1gqj70i",transformOrigin:"xtj8gnn",$$css:!0}},p="1946238052392522";function _(e){var t=o("react-compiler-runtime").c(65),n=e.description,a=e.enforcementEndTime,i=e.enforcementType,l=e.impressionLogger,_=e.supervisorData,b=e.title,v=_.supervisionStatus,S=_.supervisor,R=_.thread,L;t[0]!==v?(L=v!=null?(c||(c=o("LSIntEnum"))).toNumber(v)===r("MessengerSupervisionState").IN_COOLDOWN_AFTER_SUPERVISION_REMOVAL:!1,t[0]=v,t[1]=L):L=t[1];var E=L,k=r("useCurrentDisplayMode")(),I=k==="dark",T;t[2]!==I?(T=u(I?"210413":"210415"),t[2]=I,t[3]=T):T=t[3];var D=T,x=r("useMWFamilyCenterNavigateToSupervisorThread")(R),$;t[4]===Symbol.for("react.memo_cache_sentinel")?($=r("JSResourceForInteraction")("MWInboxBugReportDialog.react").__setRef("MWFamilyCenterEnforcementPage.react"),t[4]=$):$=t[4];var P=r("useMWXLazyDialog")($),N=P[0],M=r("useMAWSecretConversationsLogOut")(!0),w=o("MessengerFamilyCenterTimeLimitLoggingHooks").useLogEvent(),A=i==="DAILY_TIME_LIMIT",F;t[5]===Symbol.for("react.memo_cache_sentinel")?(F=d.jsx(r("MWXColumnItem.react"),{paddingVertical:12,children:d.jsx(r("MessengerLogoSvg.react"),{height:"37.5",width:"37.5"})}),t[5]=F):F=t[5];var O=S==null||R==null,B;t[6]!==S?(B=(S==null?void 0:S.name)!=null?s._(/*BTDS*/"Chat with {name}",[s._param("name",S.name)]):s._(/*BTDS*/"Chat with Supervisor"),t[6]=S,t[7]=B):B=t[7];var W;t[8]!==A||t[9]!==w||t[10]!==x?(W=function(){r("promiseDone")(x()),A&&w({event_name:"chat_with_parent_button_tapped",event_type:"interaction",module:"screen_time_daily_limit"})},t[8]=A,t[9]=w,t[10]=x,t[11]=W):W=t[11];var q;t[12]!==O||t[13]!==B||t[14]!==W?(q={disabled:O,label:B,onPress:W,type:"primary"},t[12]=O,t[13]=B,t[14]=W,t[15]=q):q=t[15];var U,V;if(t[16]===Symbol.for("react.memo_cache_sentinel")){var H;V=s._(/*BTDS*/"View settings"),U={url:(H=r("XMessengerFamilyCenterHomeControllerRouteBuilder").buildUri({src_fc:"MESSENGER"}).setSubDomain("familycenter"))==null?void 0:H.toString()},t[16]=U,t[17]=V}else U=t[16],V=t[17];var G;t[18]!==A||t[19]!==w?(G={label:V,linkProps:U,onPress:function(){A&&w({event_name:"view_settings_button_tapped",event_type:"interaction",module:"screen_time_daily_limit"})}},t[18]=A,t[19]=w,t[20]=G):G=t[20];var z;t[21]!==G||t[22]!==q?(z=d.jsx(r("MWXDialogFooter.react"),{callToActionGroupDirection:"backward",primaryCallToAction:q,secondaryCallToAction:G}),t[21]=G,t[22]=q,t[23]=z):z=t[23];var j;t[24]===Symbol.for("react.memo_cache_sentinel")?(j=d.jsx(r("MWXDialogHeader.react"),{}),t[24]=j):j=t[24];var K;t[25]!==D?(K=d.jsx(r("MWXColumnItem.react"),{align:"center",children:d.jsx(r("MWXImage.react"),{src:D,xstyle:m.timerImage})}),t[25]=D,t[26]=K):K=t[26];var Q;t[27]!==b?(Q=d.jsx(r("MWXColumnItem.react"),{paddingHorizontal:16,paddingTop:4,paddingVertical:16,children:d.jsx(r("MWXText.react"),{align:"center",isPrimaryHeading:!0,isSemanticHeading:!0,type:"headlineEmphasized2",children:b})}),t[27]=b,t[28]=Q):Q=t[28];var X;t[29]!==n||t[30]!==a||t[31]!==E?(X=E&&a!=null?s._(/*BTDS*/"It takes 24 hours after supervision is removed before your scheduled breaks are also removed. You can use Messenger again then or after your break ends at {time}",[s._param("time",a)]):n,t[29]=n,t[30]=a,t[31]=E,t[32]=X):X=t[32];var Y;if(t[33]===Symbol.for("react.memo_cache_sentinel")){var J;Y=(J=r("XMessengerDotComHelpContentControllerRouteBuilder").buildUri({cms_id:p,cms_platform:"www",helpref:"messenger"}))==null?void 0:J.toString(),t[33]=Y}else Y=t[33];var Z;t[34]===Symbol.for("react.memo_cache_sentinel")?(Z=d.jsx(r("MWXLink.react"),{color_DEPRECATED:"primary",display_DEPRECATED:"inline",href:Y,target:"_blank",children:s._(/*BTDS*/"Learn more")}),t[34]=Z):Z=t[34];var ee;t[35]!==X?(ee=d.jsx(r("MWXColumnItem.react"),{paddingHorizontal:20,children:d.jsxs(r("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:[X," ",Z]})}),t[35]=X,t[36]=ee):ee=t[36];var te;t[37]!==l||t[38]!==K||t[39]!==Q||t[40]!==ee?(te=d.jsxs(r("MWXColumn.react"),{paddingTop:4,paddingVertical:12,ref:l,xstyle:m.textContainer,children:[K,Q,ee]}),t[37]=l,t[38]=K,t[39]=Q,t[40]=ee,t[41]=te):te=t[41];var ne;t[42]!==z||t[43]!==te?(ne=d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWXDialog.react"),{footer:z,header:j,size:"small",children:te})}),t[42]=z,t[43]=te,t[44]=ne):ne=t[44];var re;t[45]!==M?(re=function(){return r("promiseDone")(M().then(C)),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.family_center_enforcement","logout")},t[45]=M,t[46]=re):re=t[46];var oe;t[47]===Symbol.for("react.memo_cache_sentinel")?(oe=d.jsx(r("MWXText.react"),{color:"primary",type:"meta4",children:s._(/*BTDS*/"Switch account")}),t[47]=oe):oe=t[47];var ae;t[48]!==re?(ae=d.jsx(r("MWXRowItem.react"),{children:d.jsx(r("MWXLink.react"),{color_DEPRECATED:"secondary",onClick:re,children:oe})}),t[48]=re,t[49]=ae):ae=t[49];var ie;t[50]!==N?(ie=function(){return N({initialProduct:"chat"},y),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.family_center_enforcement","report_problem")},t[50]=N,t[51]=ie):ie=t[51];var le;t[52]===Symbol.for("react.memo_cache_sentinel")?(le=d.jsx(r("MWXText.react"),{color:"primary",type:"meta4",children:s._(/*BTDS*/"Report a problem")}),t[52]=le):le=t[52];var se;t[53]!==ie?(se=d.jsx(r("MWXRowItem.react"),{children:d.jsx(r("MWXLink.react"),{color_DEPRECATED:"secondary",onClick:ie,children:le})}),t[53]=ie,t[54]=se):se=t[54];var ue;t[55]===Symbol.for("react.memo_cache_sentinel")?(ue=d.jsx(r("MWXRowItem.react"),{children:d.jsx(r("MWXLink.react"),{color_DEPRECATED:"secondary",href:"https://www.facebook.com/privacy/policy?entry_point=messenger_settings",onClick:h,target:"_blank",children:d.jsx(r("MWXText.react"),{color:"primary",type:"meta4",children:s._(/*BTDS*/"Privacy Policy")})})}),t[55]=ue):ue=t[55];var ce;t[56]===Symbol.for("react.memo_cache_sentinel")?(ce=d.jsx(r("MWXRowItem.react"),{children:d.jsx(r("MWXLink.react"),{color_DEPRECATED:"secondary",href:"https://www.facebook.com/policies",onClick:g,target:"_blank",children:d.jsx(r("MWXText.react"),{color:"primary",type:"meta4",children:s._(/*BTDS*/"Terms")})})}),t[56]=ce):ce=t[56];var de;t[57]===Symbol.for("react.memo_cache_sentinel")?(de=d.jsx(r("MWXRowItem.react"),{children:d.jsx(r("MWXLink.react"),{color_DEPRECATED:"secondary",href:"https://www.facebook.com/help/cookies",onClick:f,target:"_blank",children:d.jsx(r("MWXText.react"),{color:"primary",type:"meta4",children:s._(/*BTDS*/"Cookie Policy")})})}),t[57]=de):de=t[57];var me;t[58]===Symbol.for("react.memo_cache_sentinel")?(me=d.jsx(r("MWXRowItem.react"),{children:d.jsx(r("MWXText.react"),{color:"primary",type:"meta4",children:s._(/*BTDS*/"\u00a9 Meta {year}",[s._param("year",new Date().getFullYear())])})}),t[58]=me):me=t[58];var pe;t[59]!==ae||t[60]!==se?(pe=d.jsx(r("MWXColumnItem.react"),{paddingVertical:20,children:d.jsxs(r("MWXRow.react"),{spacing:16,children:[ae,se,ue,ce,de,me]})}),t[59]=ae,t[60]=se,t[61]=pe):pe=t[61];var _e;return t[62]!==ne||t[63]!==pe?(_e=d.jsxs(r("MWXColumn.react"),{align:"center",expanding:!0,paddingVertical:16,verticalAlign:"space-between",xstyle:m.main,children:[F,ne,pe]}),t[62]=ne,t[63]=pe,t[64]=_e):_e=t[64],_e}function f(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.family_center_enforcement","cookie_policy")}function g(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.family_center_enforcement","terms")}function h(){return o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.family_center_enforcement","privacy_policy")}function y(){}function C(){return r("openMessengerLogOut")()}l.default=_}),226);
__d("MWDailyTimeLimit.react",["fbt","MWFamilyCenterEnforcementPage.react","MessengerFamilyCenterTimeLimitLoggingHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.supervisorData,a=n.supervisor,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={event_name:"page_load",event_type:"impression",module:"screen_time_daily_limit"},t[0]=i):i=t[0];var l=o("MessengerFamilyCenterTimeLimitLoggingHooks").useImpressionLogger(i),c;t[1]!==a?(c=(a==null?void 0:a.name)!=null?s._(/*BTDS*/"It's time to close Messenger. You can still reach {name} but won't be able to chat with others until tomorrow.",[s._param("name",a.name)]):s._(/*BTDS*/"It's time to close Messenger. You can still reach your supervisor but won't be able to chat with others until tomorrow."),t[1]=a,t[2]=c):c=t[2];var d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"You've reached your daily time limit"),t[3]=d):d=t[3];var m;return t[4]!==l||t[5]!==n||t[6]!==c?(m=u.jsx(r("MWFamilyCenterEnforcementPage.react"),{description:c,enforcementType:"DAILY_TIME_LIMIT",impressionLogger:l,supervisorData:n,title:d}),t[4]=l,t[5]=n,t[6]=c,t[7]=m):m=t[7],m}l.default=c}),226);
__d("YPMessengerFamilyCenterModule",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({GUEST_PARENT_APPROVAL_DECLINE_SCREEN:"lopa_decline_screen",GUEST_PARENT_APPROVAL_EMAIL_CONFIRMATION:"lopa_email_confirmation",GUEST_PARENT_APPROVAL_EMAIL_INCORRECT:"lopa_email_incorrect_user",GUEST_PARENT_APPROVAL_EMAIL_SENT_SCREEN:"lopa_approval_email_sent",GUEST_PARENT_APPROVAL_GUARDIAN_INFO_ERROR:"lopa_guardian_info_error",GUEST_PARENT_APPROVAL_GUARDIAN_INFO_SCREEN:"lopa_guardian_info",GUEST_PARENT_APPROVAL_INTRODUCTION_SCREEN:"lopa_introduction",GUEST_PARENT_APPROVAL_SCREEN:"guest_parent_approval_screen",GUEST_PARENT_INVITATION_SCREEN:"lopa_invitation",IG_CA_PHASE_1_DAY_OF_INTERSTITIAL:"ig_ca_phase_1_day_of_interstitial",IG_CA_PHASE_2_DAY_OF_INTERSTITIAL:"ig_ca_phase_2_day_of_interstitial",IG_CA_PHASE_2_X_DAYS_AFTER_INTERSTITIAL:"ig_ca_phase_2_x_days_after_interstitial",IG_CA_PRE_PHASE_1_INTERSTITIAL:"ig_ca_pre_phase_1_interstitial",P1_CA_GS_DAY_OF_INTERSTITIAL:"p1_ca_gs_day_of_interstitial",P1_CA_GS_PRE_ENROLLMENT_INTERSTITIAL:"p1_ca_gs_preapproval_interstitial",P1_PREAPPROVAL_SETTING_OPTIONS:"p1_preapproval_setting_options",P1_SETTING_OPTIONS:"p1_setting_options",P1_SETTING_OPTIONS_DAISY:"p1_setting_options_daisy",P2_PREAPPROVAL_SETTING_OPTIONS:"p2_preapproval_setting_options",PAIRING_REQUEST_APPROVAL_SCREEN:"pairing_request_approval",PAIRING_REQUEST_DECLINE_SCREEN:"pairing_request_decline",PAIRING_REQUEST_PENDING:"pairing_request_pending",PARENT_REMOVE_APPROVAL:"parent_remove_approval",PARENT_REMOVES_APPROVAL_CONFIRMATION_SCREEN:"parent_remove_approval_confirmation_screen",PARENT_REMOVES_APPROVAL_FAILURE_SCREEN:"parent_remove_approval_failure_screen",PARENT_WITH_ACCOUNT_APPROVAL_ERROR_SCREEN:"parent_with_account_approval_error_screen",PARENT_WITH_ACCOUNT_INVITATION_SCREEN:"lipa_invitation",PARENTAL_APPROVALS_LINK_SHARING:"parental_approvals_link_sharing",PARENTAL_APPROVALS_PAGE:"parental_approvals_page",PARENTAL_APPROVALS_PAIRING_REQUEST_TARGET_SELECTION_EMPTY_RESULTS:"pairing_request_target_selection_empty_results",PARENTAL_APPROVALS_TEEN_SETUP_SUPERVISION:"parental_approvals_teen_setup_supervision",PARENTAL_APPROVALS_TEEN_SETUP_SUPERVISION_CONFIRMATION:"parental_approvals_teen_setup_supervision_confirmation",PENDING_SUPERVISION_REQUEST_SCREEN:"pending_supervision_request_screen",SEARCH_AND_SEND_SCREEN:"pairing_request_target_selection",SUPERVISED_TEEN_REMOVE_APPROVAL:"supervised_teen_remove_approval",TEEN_APPROVAL_REMOVED:"teen_approval_removed",TEEN_REQUEST_LINK:"teen_request_link",UNSUPERVISED_TEEN_MANAGES_PARENTAL_APPROVALS_RELATIONSHIP:"unsupervised_teen_manages_parental_approvals_relationship",UNSUPERVISED_TEEN_REMOVE_APPROVAL:"teen_remove_approval",ACCOUNT_OVERVIEW:"account_overview",ALLOW_PAYMENTS:"allow_payments",BIRTHDAY_DATA_CORRECTION:"birthday_data_correction",BLOCKED_LIST:"blocked_list",CANCEL_INVITE_SCREEN:"pairing_request_cancel",CONTACTS:"contacts",CONTENT_PREFERENCES_SETTINGS:"content_preferences_settings",CREATE_INVITE_SCREEN:"guardian_pairing_request_init",DAILY_LIMIT:"daily_limit",DATA_CORRECTION:"data_correction",DAY_OF_SUPERVISION_GRADUATION_NOTICE_FOR_GUARDIAN:"day_of_supervision_graduation_notice_for_guardian",DELETE_TEEN_ACCOUNT_CONFIRMATION:"delete_teen_account_confirm",DELETE_TEEN_ACCOUNT_CONTENT:"delete_teen_account_content",DELETE_TEEN_ACCOUNT_SURVEY:"delete_teen_account_survey",DMA_MSPLIT_SUPERVISION_UNAVAILABLE:"dma_msplit_supervision_unavailable",DYTI_MESSAGING_NOTICE:"dyti_messaging_notice",EDIT_DAILY_TIME_LIMIT:"edit_daily_time_limit",EDIT_QUIET_TIME:"edit_quiet_time",FB_BIRTH_DAY_REVIEW_PAGE:"fb_birth_day_review_page",FB_BIRTH_YEAR_REVIEW_PAGE:"fb_birth_year_review_page",FB_DAILY_TIME_LIMIT_REVIEW_PAGE:"fb_daily_time_limit_review_page",FB_EMAIL_REVIEW_PAGE:"fb_email_review_page",FB_FOLLOWED_PROFILES_LIST_VISIBILITY_REVIEW_PAGE:"fb_followed_profiles_list_visibility_review_page",FB_FRIENDS_LIST_VISIBILITY_REVIEW_PAGE:"fb_friends_list_visibility_review_page",FB_FRX_ACTIONS_PAGE:"fb_frx_actions_page",FB_LOW_QUALITY_CONTENT_REVIEW_PAGE:"fb_low_quality_content_review_page",FB_MISINFORMATION_CONTENT_REVIEW_PAGE:"fb_misinformation_content_review_page",FB_PHONE_NUMBER_REVIEW_PAGER:"fb_phone_number_review_page",FB_POLITICAL_CONTENT_REVIEW_PAGE:"fb_political_content_review_page",FB_POSTS_VISIBILITY_REVIEW_PAGE:"fb_posts_visibility_review_page",FB_PUBLIC_POST_COMMENTS_REVIEW_PAGE:"fb_public_post_comments_review_page",FB_REELS_REMIX_REVIEW_PAGE:"fb_reels_remix_review_page",FB_REELS_VISIBILITY_REVIEW_PAGE:"fb_reels_visibility_review_page",FB_REVIEW_TAGS_REVIEW_PAGE:"fb_review_tags_review_page",FB_SENSITIVE_CONTENT_REVIEW_PAGE:"fb_sensitive_content_review_page",FB_SLEEP_MODE_REVIEW_PAGE:"fb_sleep_mode_review_page",FB_STORIES_VISIBILITY_REVIEW_PAGE:"fb_stories_visibility_review_page",FB_TAGGED_POST_VISIBILITY_REVIEW_PAGE:"fb_tagged_post_visibility_review_page",FB_UNORIGINAL_CONTENT_REVIEW_PAGE:"fb_unoriginal_content_review_page",FB_USER_SETTING_CHANGE_REQUEST_REVIEW_PAGE:"fb_user_setting_change_request_review_page",FIRST_TIME_USER_SCREEN:"gurdian_pairing_intro",GEN_AI_NOTICE:"gen_ai_notice",GUARDIAN_ACCOUNT_OVERVIEW:"guardian_account_overview",HOME:"home",INVITATION:"invitation",INVITE_CREATION_ERROR:"invite_creation_error",INVITE_FINAL_CONFIRMATION_SCREEN:"supervision_invite_confirmation",INVITE_PENDING_FINAL_CONFIRMATION_SCREEN:"supervision_invite_pending_info",MESSAGE_DELIVERY:"message_delivery",MESSAGING_INSIGHTS:"messaging_insights_recent_contacts",MESSAGING_INSIGHTS_CONTEXTUAL_SCREEN:"messaging_insights_recent_contacts_bottom_sheet",MESSAGING_INSIGHTS_EXPLAINER_SCREEN:"messaging_insights_explainer_bottom_sheet",MESSAGING_INSIGHTS_GROUP_MEMBERS:"messaging_insights_group_chat_members",MESSAGING_INSIGHTS_GROUP_MEMBERS_SPECTRA_CLICK:"messaging_insights_group_chat_members_spectra_click",MESSAGING_INSIGHTS_NUX_PARENT_DAY_OF:"messaging_insights_parent_day_of_nux",MESSAGING_INSIGHTS_NUX_TEEN_ADVANCE:"messaging_insights_teen_advance_nux",MESSAGING_INSIGHTS_NUX_TEEN_DAY_OF:"messaging_insights_teen_day_of_nux",MESSAGING_REACHABILITY_SETTINGS:"messaging_reachability_settings",MESSENGER_FRX_ACTIONS_PAGE:"messenger_frx_actions_page",MESSENGER_REACHABILITY_FRIENDS_OF_FRIENDS_ON_FB_REVIEW_PAGE:"messenger_reachability_friends_of_friends_on_fb_review_page",MESSENGER_REACHABILITY_OTHERS_ON_FB_REVIEW_PAGE:"messenger_reachability_others_on_fb_review_page",MESSENGER_REACHABILITY_PEOPLE_WITH_PHONE_NUMBER_REVIEW_PAGE:"messenger_reachability_people_with_phone_number_review_page",MESSENGER_STORIES_VISIBILITY_REVIEW_PAGE:"messenger_stories_visibility_review_page",MUTUAL_BLOCK:"mutual_block",NAME_DATA_CORRECTION:"name_data_correction",NOTIFICATION_SURFACE:"notification_surface",PARENT_GETS_GS_REMOVAL:"parent_gets_gs_removal",PASSWORD_ENTRY_SCREEN:"password_entry_screen",PROFILE_AND_AUDIENCE_SETTINGS:"profile_and_audience_settings",PROFILE_SETTING:"profile_setting",QUIET_TIME_SCREEN_TAKEOVER:"quiet_time_screen_takeover",QUIET_TIME_SCREEN_TAKEOVER_REMINDER:"quiet_time_screen_takeover_reminder",RECONSENT:"reconsent",REGULATORY_CONTACT_FORM_REQUEST_SUCCESS_TEEN_NOTIFICATION_PAGE:"regulatory_contact_form_request_success_teen_notification_page",REGULATORY_GUARDIAN_CREATE_INVITE_SCREEN:"regulatory_guardian_pairing_request_init",REGULATORY_GUARDIAN_INVITE_RESPONSE_SCREEN:"regulatory_guardian_pairing_response",REGULATORY_SUPERVISION_CONTACT_FORM:"regulatory_supervision_contact_form",REGULATORY_SUPERVISION_PARENTAL_APPEALS_FORM:"regulatory_supervision_parental_appeals_form",REGULATORY_TEEN_CREATE_INVITE_SCREEN:"regulatory_teen_pairing_request_init",REGULATORY_TEEN_INVITE_RESPONSE_SCREEN:"regulatory_teen_pairing_response",REMOVE_GENERAL_SUPERVISION:"remove_general_supervision",REMOVE_SUPERVISION:"remove_supervision",REMOVE_SUPERVISION_GUARDIAN_CONFIRMATION:"remove_supervision_guardian_confirmation",REMOVE_SUPERVISION_O18_CONFIRMATION:"remove_supervision_o18_confirmation",REMOVE_SUPERVISION_POST_GRADUATION:"remove_supervision_post_graduation",REMOVE_SUPERVISION_TEEN_CONFIRMATION:"remove_supervision_teen_confirmation",REPORT_NOTIFICATION_PAGE:"report_notification_page",SCREEN_TIME_DAILY_LIMIT:"screen_time_daily_limit",SET_UP_SUPERVISION_SCREEN:"setup_supervision",SLEEP_MODE:"sleep_mode",SPECTRA_ADDING_CONTACT_PROFILE_PREVIEW:"spectra_adding_contact_profile_preview",SPECTRA_ADDING_CONTACT_SENT:"spectra_adding_contact_sent",SPECTRA_CONTACT_ADDITION:"spectra_contact_addition",SPECTRA_CONTACT_APPROVAL:"spectra_contact_approval",SPECTRA_CONTACT_MANAGEMENT_OVERVIEW:"spectra_contact_management_overview",SPECTRA_CONTACT_REQUEST_REVIEW:"spectra_contact_request_review",SPECTRA_CONTACT_REQUEST_REVIEW_BOTTOMSHEET:"spectra_contact_request_review_bottomsheet",SPECTRA_FRIEND_CODE_SHARING:"spectra_friend_code_sharing",SPECTRA_MESSAGING_INSIGHTS:"spectra_messaging_insights",SPECTRA_MESSAGING_INSIGHTS_PARENT_REVIEW_MESSAGES:"spectra_messaging_insights_parent_review_messages",SPECTRA_RESET_CODE_DIALOG:"spectra_reset_code_dialog",SPECTRA_SUPERVISED_PROFILE:"spectra_supervised_profile",SPECTRA_SUPERVISED_PROFILE_CONTACT_LIST:"spectra_supervised_profile_contact_list",SPECTRA_SUPERVISED_PROFILE_CONTACT_PROFILE:"spectra_supervised_profile_contact_profile",START_AUTONOMY_CONTROL_CONFIRMATION_PAGE:"start_autonomy_control_confirmaiton_page",STOP_AUTONOMY_CONTROL_CONFIRMATION_PAGE:"stop_autonomy_control_confirmaiton_page",STORY_PRIVACY:"story_privacy",SUPERVISION_ALREADY_DECLINED:"consent_onboarding_already_declined",SUPERVISION_ALREADY_SUPERVISED_ERROR:"already_supervised_error",SUPERVISION_COOLDOWN_GUARDIAN_VIEW:"supervision_cooldown_guardian_view",SUPERVISION_COOLDOWN_TEEN_VIEW:"supervision_cooldown_teen_view",SUPERVISION_DECLINED:"consent_onboarding_declined",SUPERVISION_DECLINED_NOTIFICATION_PAGE:"supervision_declined_notification_page",SUPERVISION_DURING_COOLDOWN_ERROR:"consent_onboarding_during_cooldown_error",SUPERVISION_GENERIC_ERROR:"unknown_reason_verification_failure",SUPERVISION_GRADUATION:"supervision_graduation",SUPERVISION_GRADUATION_NOTICE_FOR_TEEN:"supervision_graduation_notice_for_teen",SUPERVISION_INVITATION_EXPIRATION:"expiration",SUPERVISION_PENDING:"supervision_pending",SUPERVISION_SUCCESS:"supervision_success",TEEN_ACCOUNT_EXPLAINER_SCREEN:"teen_account_explainer_screen",TEEN_ACCOUNT_SCHEDULED_DELETION:"teen_account_scheduled_deletion",TEEN_AUTONOMY:"teen_autonomy",TEEN_CONFIRMS_REMOVE_GS:"teen_confirms_remove_gs",TEEN_DECIDE_O18_SUPERVISION_STATUS:"teen_decide_o18_supervision_status",TEEN_REMOVES_GS:"teen_removes_gs",TEEN_SETTING_REQUEST:"teen_setting_request",TEEN_SETTING_REQUESTS:"teen_setting_requests",THIRTY_DAY_SUPERVISION_GRADUATION_NOTICE_FOR_GUARDIAN:"thirty_day_supervision_graduation_notice_for_guardian",TIME_CONTROLS:"time_controls",UNKNOWN:"unknown",UPDATE_TEEN_BIRTHDAY:"update_teen_birthday",UPDATE_TEEN_INFO:"update_teen_info",UPDATE_TEEN_NAME:"update_teen_name",USF_SETTINGS:"usf_settings",VA_DAILY_LIMIT_DECISION:"va_daily_limit_decision",WAITING_ROOM:"guardian_pairing_request_pending"}),l=e;i.default=l}),66);
__d("MessengerFamilyCenterLoggingContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={current_module:"unknown"},c=[],d=2;function m(e){var t=c.length>0?c[c.length-1]:null;if(e!==t)return c.push(e),c.length>d&&c.shift(),t;for(var n=c.length-2;n>=0;n--)if(c[n]!=null&&c[n]!==e)return c[n];return"unknown"}var p=s.createContext(u);l.defaultValue=u,l.getAndUpdatePriorModule=m,l.MessengerFamilyCenterLoggingContext=p}),98);
__d("YPMessengerFamilyCenterEventName",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ADD_PARENT_TAPPED:"ADD_PARENT_TAPPED",ALLOW_APPROVAL_TAPPED:"ALLOW_APPROVAL_TAPPED",ALLOW_RESTRICTIVE_SETTING_CONTINUE_BUTTON_TAPPED:"allow_restrictive_setting_continue_button_tapped",ALLOW_RESTRICTIVE_SETTING_TAPPED:"allow_restrictive_setting_tapped",ASK_ANOTHER_WAY_TAPPED:"ask_another_way_tapped",CANCEL_SUPERVISION_REQUEST_FAILURE:"CANCEL_SUPERVISION_REQUEST_FAILURE",CANCEL_SUPERVISION_REQUEST_SUCCESS:"CANCEL_SUPERVISION_REQUEST_SUCCESS",CANCEL_TAPPED:"CANCEL_TAPPED",COPY_LINK_TAPPED:"COPY_LINK_TAPPED",DECLINE_APPROVAL_TAPPED:"DECLINE_APPROVAL_TAPPED",ERROR_MESSAGE:"ERROR_MESSAGE",GUARDIAN_INFO_VERIFICATION_SUCCESS:"GUARDIAN_INFO_VERIFICATION_SUCCESS",GUEST_PARENT_APPROVAL_EMAIL_CONFIRM_SUCCESS:"PARENT_APPROVAL_EMAIL_CONFIRM_SUCCESS",GUEST_PARENT_APPROVAL_EMAIL_DECLINE_SUCCESS:"PARENT_APPROVAL_EMAIL_DECLINE_SUCCESS",GUEST_PARENT_APPROVAL_EMAIL_REVOKE_SUCCESS:"PARENT_APPROVAL_EMAIL_REVOKE_SUCCESS",NOT_NOW_TAPPED:"NOT_NOW_TAPPED",PA_CONTINUE_BUTTON_TAPPED:"pa_continue_button_tapped",PA_EMPTY_SEARCH_RESULTS_CONTINUE_BUTTON_TAPPED:"PA_EMPTY_SEARCH_RESULTS_CONTINUE_BUTTON_TAPPED",PARENT_DECLINE_FAILURE:"PARENT_DECLINE_FAILURE",PARENT_DECLINE_SUCCESS:"PARENT_DECLINE_SUCCESS",PARENT_DOES_NOT_HAVE_ACCOUNT_LIST_CELL_TAPPED:"PARENT_DOES_NOT_HAVE_ACCOUNT_LIST_CELL_TAPPED",PARENTAL_APPROVAL_FAILURE:"PARENTAL_APPROVAL_FAILURE",PARENTAL_APPROVAL_FLOW_TAPPED:"parental_approval_flow_tapped",PARENTAL_APPROVAL_SUCCESS:"PARENTAL_APPROVAL_SUCCESS",PARENTAL_APPROVAL_TEEN_SETUP_SUPERVISION_FAILURE:"PARENTAL_APPROVAL_TEEN_SETUP_SUPERVISION_FAILURE",PARENTAL_APPROVAL_TEEN_SETUP_SUPERVISION_SUCCESS:"PARENTAL_APPROVAL_TEEN_SETUP_SUPERVISION_SUCCESS",REMOVE_PARENT_TAPPED:"REMOVE_PARENT_TAPPED",SEND_INVITE_FAILURE:"SEND_INVITE_FAILURE",SEND_INVITE_SUCCESS:"SEND_INVITE_SUCCESS",SEND_REQUEST_TAPPED:"send_request_tapped",SHARE_A_LINK_TAPPED:"share_a_link_tapped",TEEN_REMOVE_PARENTAL_APPROVAL_FAILURE:"TEEN_REMOVE_PARENTAL_APPROVAL_FAILURE",TEEN_REMOVE_PARENTAL_APPROVAL_SUCCESS:"TEEN_REMOVE_PARENTAL_APPROVAL_SUCCESS",VIEW_SUPERVISION_SETUP_REQUEST_TAPPED:"VIEW_SUPERVISION_SETUP_REQUEST_TAPPED",ACCEPT_INVITE_FINAL_CONFIRMATION_MUTATION_FAILURE:"supervision_request_accept_final_confirmation_failed",ACCEPT_INVITE_MUTATION_FAILURE:"supervision_request_accept_failed",ACCEPT_TEEN_INVITE_MUTATION_SUCCESS:"teen_supervision_request_accept_succeeded",ACCEPTED_INVITE_PENDING_FINAL_CONFIRMATION_TAPPED:"accepted_invite_pending_final_confirmation_tapped",ACCOUNT_SUSPENDED_U13_VIOLATION:"account_suspended_u13_violation",ACCOUNTS_CENTER_TAPPED:"accounts_center_tapped",ADD_CONTACTS_ROW_TAPPED:"add_contacts_row_tapped",ALLOW_PAYMENTS_BUTTON_TAPPED:"allow_payments_button_tapped",ALLOW_PAYMENTS_TURN_OFF:"allow_payments_turn_off",ALLOW_PAYMENTS_TURN_ON:"allow_payments_turn_on",APPROVE_TAPPED:"approve_tapped",APPROVE_TEEN_SETTINGS_CHANGES:"approve_teen_settings_changes",APPROVE_TEEN_SETTINGS_CHANGES_FAILURE:"approve_teen_settings_changes_failure",BACK_BUTTON_TAPPED:"back_button_tapped",BLOCK_TAPPED:"block_tapped",BLOCKED_ACCOUNTS_ROW_TAPPED:"blocked_accounts_row_tapped",BLOCKED_LIST_TAPPED:"blocked_list_tapped",CANCEL_BUTTON_TAPPED:"cancel_button_tapped",CANCEL_INVITE_MUTATION_FAILURE:"revoke_supervision_request_failure",CANCEL_INVITE_MUTATION_SUCCESS:"revoke_supervision_request_success",CANCEL_ONE_TIME_APPROVAL_BUTTON_IMPRESSION:"cancel_one_time_approval_button_impression",CANCEL_ONE_TIME_APPROVAL_MUTATION_FAILURE:"cancel_one_time_approval_mutation_failure",CANCEL_ONE_TIME_APPROVAL_MUTATION_SUCCESS:"cancel_one_time_approval_mutation_success",CANCEL_ONE_TIME_APPROVAL_TAPPED:"cancel_one_time_approval_tapped",CANCEL_REQUEST_TAPPED:"cancel_request_tapped",CLOSE_BUTTON_TAPPED:"close_button_tapped",CLOSE_RECONSENT_TAPPED:"close_reconsent_tapped",CONTACT_APPROVALS_ROW_TAPPED:"contact_approvals_row_tapped",CONTACT_APPROVALS_TOGGLE_CHANGE:"contact_approvals_toggle_change",CONTACT_APPROVALS_TOGGLE_OFF:"contact_approvals_toggle_off",CONTACT_APPROVALS_TOGGLE_ON:"contact_approvals_toggle_on",CONTACT_ROW_TAPPED:"contact_row_tapped",CONTACTS_LIST_ACCOUNT_TAPPED:"contacts_list_account_tapped",CONTENT_PREFERENCES_SETTINGS_TAPPED:"content_preferences_settings_tapped",CONTENT_PREFERENCES_SETTINGS_USF_TAPPED:"content_preferences_settings_usf_tapped",COPY_CODE_TAPPED:"copy_code_tapped",CREATE_INVITE_DMA_WARNING_VIEWED:"create_invite_dma_warning_viewed",CREATE_INVITE_ENTRYPOINT_BUTTON_TAPPED:"invite_entrypoint_tapped",CREATE_INVITE_MUTATION_FAILURE:"create_supervision_request_failure",CREATE_INVITE_MUTATION_SUCCESS:"create_supervision_request_success",DAILY_LIMIT_BLOCKING_TAPPED:"daily_limit_blocking_tapped",DAILY_LIMIT_REMINDER_TAPPED:"daily_limit_reminder_tapped",DAILY_LIMIT_VALUE_USF_TAPPED:"daily_limit_value_usf_tapped",DAILY_TIME_LIMIT_EDIT_TAPPED:"daily_time_limit_edit_tapped",DAILY_TIME_LIMIT_SET_CLICK:"daily_time_limit_set_click",DAILY_TIME_LIMIT_TURN_OFF_FAILURE:"daily_time_limit_turn_off_failure",DAILY_TIME_LIMIT_TURN_OFF_SUCCESS:"daily_time_limit_turn_off_success",DAILY_TIME_LIMIT_TURN_ON_FAILURE:"daily_time_limit_turn_on_failure",DAILY_TIME_LIMIT_TURN_ON_SUCCESS:"daily_time_limit_turn_on_success",DAILY_TIME_LIMIT_TURN_TOGGLE_CHANGE:"daily_time_limit_turn_toggle_change",DECLINE_INVITE_MUTATION_FAILURE:"supervision_request_decline_failed",DECLINE_INVITE_MUTATION_SUCCESS:"supervision_request_declined",DECLINE_TEEN_SETTINGS_CHANGES:"decline_teen_settings_changes",DECLINE_TEEN_SETTINGS_CHANGES_FAILURE:"decline_teen_settings_changes_failure",DELETE_SPECTRA_ACCOUNT_ROW_TAPPED:"delete_spectra_account_row_tapped",DELETE_TEEN_ACCOUNT_FAILURE:"delete_teen_account_failure",DELETE_TEEN_ACCOUNT_SUCCESS:"delete_teen_account_success",DELETE_TEEN_ACCOUNT_TAPPED:"delete_teen_account_tapped",DIALOG_LOAD:"dialog_load",DISMISS_BUTTON_TAPPED:"dismiss_button_tapped",DISMISS_TAPPED:"dismiss_tapped",DISMISS_TEEN_GRADUATION_BANNER_FAILURE:"dismiss_teen_graduation_banner_failure",DISMISS_TEEN_GRADUATION_BANNER_SUCCESS:"dismiss_teen_graduation_banner_success",DONE_TAPPED:"done_tapped",DONT_APPROVE_TAPPED:"dont_approve_tapped",EDIT_QUIET_TIME_TAPPED:"edit_quiet_time_tapped",EXPEDITE_SUPERVISION_REMOVAL_MUTATION_FAILED:"expedite_supervision_removal_mutation_failed",EXPEDITE_SUPERVISION_REMOVAL_MUTATION_SUCCEEDED:"expedite_supervision_removal_mutation_succeeded",FAMILY_MEMBER_TAPPED:"family_member_tapped",FB_HELP_CENTER_TAPPED:"fb_help_center_tapped",FB_NOTIF_LIST_ENTRYPOINT_TAPPED:"fb_notif_list_entrypoint_tapped",FB_NOTIF_REDIRECT_BUTTON_TAPPED:"fb_notif_redirect_button_tapped",FB_NOTIF_SURFACE_ENTRYPOINT_TAPPED:"fb_notif_surface_entrypoint_tapped",FIRST_NAME_INPUT_ROW_TAPPED:"first_name_input_row_tapped",FRIENDS_LIST_TAPPED:"friends_list_tapped",GENERAL_SUPERVISION_UPSELL_TAPPED:"general_supervision_upsell_tapped",GO_TO_FAMILY_CENTER_BUTTON_TAPPED:"go_to_family_center_button_tapped",IG_HELP_CENTER_TAPPED:"ig_help_center_tapped",INVITE_LINK_DMA_WARNING_VIEWED:"invite_link_dma_warning_viewed",INVITE_LINK_TAPPED:"invite_link_tapped",LAST_NAME_INPUT_ROW_TAPPED:"last_name_input_row_tapped",LEARN_MORE_BUTTON_TAPPED:"learn_more_button_tapped",LEARN_MORE_LINK_TAPPED:"learn_more_link_tapped",LEARN_MORE_TAPPED:"learn_more_tapped",LET_YOUR_PARENT_KNOW_BUTTON_TAPPED:"let_your_parent_know_button_tapped",LET_YOUR_TEEN_CHANGE_THESE_WITHOUT_YOU_CANCELED:"let_your_teen_change_these_without_you_canceled",LET_YOUR_TEEN_CHANGE_THESE_WITHOUT_YOU_CONFIRMED:"let_your_teen_change_these_without_you_confirmed",LET_YOUR_TEEN_CHANGE_THESE_WITHOUT_YOU_TAPPED:"let_your_teen_change_these_without_you_tapped",LOAD_MORE_NOTIF_ROWS:"load_more_notif_rows",MANAGE_TIME_LIMITS_TAPPED:"manage_time_limits_tapped",MARK_NOTIF_AS_SEEN_OR_READ_MUTATION_FAILURE:"mark_notif_as_seen_or_read_mutation_failure",MARK_NOTIF_AS_SEEN_OR_READ_MUTATION_SUCCESS:"mark_notif_as_seen_or_read_mutation_success",MAX_LIMIT_BIRTHDAY_EDIT_ERROR:"max_limit_birthday_edit_error",MESSAGE_DELIVERY_OTHER_PEOPLE_USF_TAPPED:"message_delivery_other_people_usf_tapped",MESSAGE_DELIVERY_POTENTIAL_CONNECTIONS_USF_TAPPED:"message_delivery_potential_connections_usf_tapped",MESSAGING_INSIGHTS_ENTRYPOINT_TAPPED:"who_they_have_chats_with_button_tapped",MESSAGING_INSIGHTS_GROUP_CHAT_LIST_ITEM_TAPPED:"messaging_insights_group_chat_list_account_tapped",MESSAGING_INSIGHTS_LIST_ITEM_TAPPED:"messaging_insights_list_account_tapped",MESSAGING_REACHABILITY_SETTINGS_TAPPED:"messaging_reachability_settings_tapped",MESSAGING_REACHABILITY_SETTINGS_USF_TAPPED:"messaging_reachability_settings_usf_tapped",MESSENGER_NOTIF_LIST_ENTRYPOINT_TAPPED:"messenger_notif_list_entrypoint_tapped",MESSENGER_NOTIF_SURFACE_ENTRYPOINT_TAPPED:"messenger_notif_surface_entrypoint_tapped",METRICS_IN_DEV_DISCLAIMER_TAPPED:"metrics_in_dev_disclaimer_tapped",MODIFY_DAILY_LIMIT_FAILURE:"modify_daily_limit_failure",MODIFY_DAILY_LIMIT_SUCCESS:"modify_daily_limit_success",MODIFY_SETTINGS_CONTACT_EMAIL_LINK_TAPPED:"modify_settings_contact_email_link_tapped",MODIFY_SLEEP_MODE_FAILURE:"modify_sleep_mode_failure",MODIFY_SLEEP_MODE_SUCCESS:"modify_sleep_mode_success",MODIFY_TEEN_SETTINGS_FAILURE:"modify_teen_settings_failure",MODIFY_TEEN_SETTINGS_SUCCESS:"modify_teen_settings_success",MUTUAL_BLOCK_PREVENTED:"mutual_block_prevented",NOTIF_ROW_TAPPED:"notif_row_tapped",NOTIF_ROW_VIEWED:"notif_row_viewed",OPEN_TEEN_TRANSPARENCY_LINK_TAPPED:"open_teen_transparency_link_tapped",OPTION_SELECTION_TAPPED:"option_selection_tapped",OWN_INVITE_PENDING_FINAL_CONFIRMATION_TAPPED:"own_invite_pending_final_confirmation_tapped",PAGE_LOAD:"page_load",PARENTAL_APPROVALS_LIST_CELL_TAPPED:"parental_approvals_list_cell_tapped",PENDING_INVITE_TAPPED:"pending_invite_tapped",PRIMARY_BUTTON_TAPPED:"primary_button_tapped",PROFILE_AND_AUDIENCE_SETTINGS_TAPPED:"profile_and_audience_settings_tapped",PROFILE_AND_AUDIENCE_SETTINGS_USF_TAPPED:"profile_and_audience_settings_usf_tapped",PROFILE_SETTING_TAPPED:"profile_setting_tapped",QUIET_TIME_SET_MUTATION_FAILURE:"quiet_time_set_mutation_failure",QUIET_TIME_SET_MUTATION_SUCCESS:"quiet_time_set_mutation_success",QUIET_TIME_TURN_OFF_MUTATION_FAILURE:"quiet_time_turn_off_mutation_failure",QUIET_TIME_TURN_OFF_MUTATION_SUCCESS:"quiet_time_turn_off_mutation_success",QUIET_TIME_TURN_ON_MUTATION_FAILURE:"quiet_time_turn_on_mutation_failure",QUIET_TIME_TURN_ON_MUTATION_SUCCESS:"quiet_time_turn_on_mutation_success",REACTIVATE_TEEN_ACCOUNT_FAILURE:"reactivate_teen_account_failure",REACTIVATE_TEEN_ACCOUNT_SUCCESS:"reactivate_teen_account_success",REAUTHENTICATION_FAILURE:"reauthentication_failure",REAUTHENTICATION_SUCCESS:"reauthentication_success",REGULATORY_SUPERVISION_CONTACT_FORM_LIST_CELL_TAPPED:"regulatory_supervision_contact_form_list_cell_tapped",REGULATORY_SUPERVISION_CONTACT_FORM_REQUEST_FAILED:"regulatory_supervision_contact_form_request_failed",REGULATORY_SUPERVISION_CONTACT_FORM_REQUEST_SUCCEEDED:"regulatory_supervision_contact_form_request_succeeded",REGULATORY_SUPERVISION_DYI_BUTTON_TAPPED:"regulatory_supervision_dyi_button_tapped",REGULATORY_SUPERVISION_HCA_LIST_CELL_TAPPED:"regulatory_supervision_hca_list_cell_tapped",REMOVE_CONTACT_ROW_TAPPED:"remove_contact_row_tapped",REMOVE_FEATURES_BUTTON_TAPPED:"remove_features_button_tapped",REMOVE_SUPERVISION_BUTTON_TAPPED:"remove_supervision_button_tapped",REMOVE_SUPERVISION_FAILURE:"remove_supervision_failure",REMOVE_SUPERVISION_SUCCESS:"remove_supervision_success",REPORT_TAPPED:"report_tapped",REPORTED_ACCOUNTS_ROW_TAPPED:"reported_accounts_row_tapped",REQUEST_ONE_TIME_APPROVAL_BUTTON_IMPRESSION:"request_one_time_approval_button_impression",REQUEST_ONE_TIME_APPROVAL_TAPPED:"request_one_time_approval_tapped",REQUESTS_TAPPED:"requests_tapped",RESET_CODE_DIALOG_CANCEL_TAPPED:"reset_code_dialog_cancel_tapped",RESET_CODE_DIALOG_OK_TAPPED:"reset_code_dialog_ok_tapped",RESET_CODE_TAPPED:"reset_code_tapped",RESOURCES_LINK_TAPPED:"resources_link_tapped",REVIEW_TAPPED:"review_tapped",REVIEW_TEEN_SETTINGS_CHANGES_TAPPED:"review_teen_settings_changes_tapped",SAVE_BUTTON_TAPPED:"save_button_tapped",SAVE_CHILD_NAME_CHANGES_TAPPED:"save_child_name_changes_tapped",SAVE_DAILY_LIMIT_ENFORCEMENT_OPTION_FAILURE:"save_daily_limit_enforcement_option_failure",SAVE_DAILY_LIMIT_ENFORCEMENT_OPTION_SUCCESS:"save_daily_limit_enforcement_option_success",SAVE_DAILY_LIMIT_FAILURE:"save_daily_limit_failure",SAVE_DAILY_LIMIT_SUCCESS:"save_daily_limit_success",SEARCH_FRIENDS_TAPPED:"search_friends_tapped",SEARCH_INPUT_TAPPED:"search_input_tapped",SECONDARY_BUTTON_TAPPED:"secondary_button_tapped",SECTION_LOAD:"section_load",SEE_ALL_CONTACTS_BUTTON_TAPPED:"see_all_contacts_button_tapped",SEE_ALL_CONTACTS_ROW_TAPPED:"see_all_contacts_row_tapped",SEE_ALL_REQUESTS_TAPPED:"see_all_requests_tapped",SET_O18_SUPERVISION_STATUS_DECISION_FAILURE:"set_o18_supervision_status_decision_failure",SET_O18_SUPERVISION_STATUS_DECISION_SUCCESS:"set_o18_supervision_status_decision_success",SHARE_CODE_TAPPED:"share_code_tapped",SLEEP_MODE_EDITING:"sleep_mode_editing",SLEEP_MODE_TIME_BLOCKING_TAPPED:"sleep_mode_time_blocking_tapped",SLEEP_MODE_TIME_RANGE_USF_TAPPED:"sleep_mode_time_range_usf_tapped",SLEEP_MODE_TIME_REMINDER_TAPPED:"sleep_mode_time_reminder_tapped",START_APPROVING_CHANGES_AGAIN_CANCELED:"start_approving_changes_again_canceled",START_APPROVING_CHANGES_AGAIN_CONFIRMED:"start_approving_changes_again_confirmed",START_APPROVING_CHANGES_AGAIN_TAPPED:"start_approving_changes_again_tapped",STORIES_PRIVACY_SETTING_WHO_CAN_SEE_MY_STORIES_USF_TAPPED:"stories_privacy_setting_who_can_see_my_stories_usf_tapped",STORIES_VISIBILITY_SETTING_TAPPED:"stories_visibility_setting_tapped",STORIES_VISIBILITY_SETTING_USF_TAPPED:"stories_visibility_setting_usf_tapped",SUBMIT_BUTTON_TAPPED:"submit_button_tapped",SUPERVISED_USER_ADDED:"supervised_user_added",TEEN_GRADUATION_BANNER_DISMISSED:"teen_graduation_banner_dismissed",TEEN_GRADUATION_BANNER_INFO_CLICKED:"teen_graduation_banner_info_clicked",TEEN_GRADUATION_BANNER_VIEWED:"teen_graduation_banner_viewed",UNDO_SUPERVISION_REMOVAL_MUTATION_FAILED:"teen_supervision_removal_undo_failed",UNDO_SUPERVISION_REMOVAL_MUTATION_SUCCEEDED:"teen_supervision_removal_undo_succeeded",UNDO_SUPERVISION_REMOVAL_TAPPED:"teen_supervision_removal_undo_tapped",UPDATE_TEEN_BIRTHDAY_FAILURE:"update_teen_birthday_failure",UPDATE_TEEN_BIRTHDAY_SUCCESS:"update_teen_birthday_success",UPDATE_TEEN_BIRTHDAY_TAPPED:"update_teen_birthday_tapped",UPDATE_TEEN_INFO_TAPPED:"update_teen_info_tapped",UPDATE_TEEN_NAME_FAILURE:"update_teen_name_failure",UPDATE_TEEN_NAME_SUCCESS:"update_teen_name_success",UPDATE_TEEN_NAME_TAPPED:"update_teen_name_tapped",VIEW_WHAT_THEY_CAN_SEE_TAPPED:"view_what_they_can_see_tapped",VR_HELP_CENTER_TAPPED:"vr_help_center_tapped"}),l=e;i.default=l}),66);
__d("useFXIsMobile",["useMatchViewport"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return r("useMatchViewport")("max","width",e)}function s(){return e(999)}l.default=s}),98);
__d("MessengerFamilyCenterLoggingHooks",["CometRouteParams","FCLoggingSession","MessengerFamilyCenterLoggingContext","react","react-compiler-runtime","requireDeferred","useFXIsMobile","useSinglePartialViewImpression","useVPVDImpression"],(function(t,n,r,o,a,i,l){"use strict";var e=["current_submodule"],s=["current_submodule"],u=["impressionEventName"],c=["impressionEventName"],d,m=d||(d=o("react")),p=d,_=p.useCallback,f=p.useContext,g=p.useEffect,h=p.useMemo,y=r("requireDeferred")("YpMessengerFamilyCenterCoreClientEventFalcoEvent").__setRef("MessengerFamilyCenterLoggingHooks"),C=r("requireDeferred")("YpMessengerFamilyCenterSetupClientEventFalcoEvent").__setRef("MessengerFamilyCenterLoggingHooks");function b(e){var t,n,r=o("react-compiler-runtime").c(6),a=f(o("MessengerFamilyCenterLoggingContext").MessengerFamilyCenterLoggingContext),i=(t=e==null?void 0:e.current_module)!=null?t:a.current_module,l=(n=e==null?void 0:e.current_submodule)!=null?n:a.current_submodule,s;r[0]!==a||r[1]!==i||r[2]!==l?(s=babelHelpers.extends({},a,{current_module:i,current_submodule:l}),r[0]=a,r[1]=i,r[2]=l,r[3]=s):s=r[3];var u=s,c;return r[4]!==u?(c=function(t){var e=t.children;return m.jsx(o("MessengerFamilyCenterLoggingContext").MessengerFamilyCenterLoggingContext.Provider,{value:u,children:e})},r[4]=u,r[5]=c):c=r[5],c}function v(){var t,n=o("react-compiler-runtime").c(9),a=f(o("MessengerFamilyCenterLoggingContext").MessengerFamilyCenterLoggingContext),i=r("useFXIsMobile")(),l=(t=o("FCLoggingSession")).useSrcFC(),u=t.useFCSessionID();t.useUpdateGlobalFCSessionID(u);var c=t.useTargetAccountID(),d=I(),m;n[0]!==d||n[1]!==l?(m=function(){o("FCLoggingSession").FCLoggingSessionObject.src_fc===null&&(o("FCLoggingSession").FCLoggingSessionObject.src_fc=l),(o("FCLoggingSession").FCLoggingSessionObject.entrypoint==null||o("FCLoggingSession").FCLoggingSessionObject.entrypoint==="")&&(o("FCLoggingSession").FCLoggingSessionObject.entrypoint=d)},n[0]=d,n[1]=l,n[2]=m):m=n[2],g(m,void 0);var p=o("FCLoggingSession").FCLoggingSessionObject.entrypoint,_=o("FCLoggingSession").FCLoggingSessionObject.src_fc,h=T(),b;return n[3]!==h||n[4]!==u||n[5]!==i||n[6]!==a||n[7]!==c?(b=function(n,r){var t,l=r===void 0?{}:r,d=(t=l==null?void 0:l.current_module)!=null?t:a.current_module,m=o("MessengerFamilyCenterLoggingContext").getAndUpdatePriorModule(d),f=babelHelpers.extends({},a,{entrypoint:p,event_name:n,fc_session_id:u,interface:i?"mobile_web":"desktop_web",prior_module:m});if(l.setup_flow_type){var g=f.current_submodule,b=babelHelpers.objectWithoutPropertiesLoose(f,e),v=l.current_submodule,S=babelHelpers.objectWithoutPropertiesLoose(l,s);C.onReady(function(e){e.log(function(){return babelHelpers.extends({},b,S)})})}else y.onReady(function(e){e.log(function(){return babelHelpers.extends({src_fc:_,target_account_type:h,targeting_user_fbid:c},f,l)})})},n[3]=h,n[4]=u,n[5]=i,n[6]=a,n[7]=c,n[8]=b):b=n[8],b}function S(){var e=o("react-compiler-runtime").c(2),t=v(),n;return e[0]!==t?(n=function(n,r){var e=r===void 0?{}:r;return t(n,e)},e[0]=t,e[1]=n):n=e[1],n}function R(e,t){var n=o("react-compiler-runtime").c(4),r=v(),a;return n[0]!==t||n[1]!==r||n[2]!==e?(a=function(o,a){var n=a===void 0?{}:a;return r(o,babelHelpers.extends({encrypted_invite_id:t,setup_flow_type:e},n))},n[0]=t,n[1]=r,n[2]=e,n[3]=a):a=n[3],a}function L(e){var t=o("react-compiler-runtime").c(9),n,a;t[0]!==e?(a=e.impressionEventName,n=babelHelpers.objectWithoutPropertiesLoose(e,u),t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]);var i=a===void 0?"page_load":a,l=v(),s;t[3]!==i||t[4]!==l||t[5]!==n?(s=function(){l(i,n)},t[3]=i,t[4]=l,t[5]=n,t[6]=s):s=t[6];var c=s,d;return t[7]!==c?(d={minVisiblePx:50,onVPVDEnd:E,onVPVDStart:c},t[7]=c,t[8]=d):d=t[8],r("useVPVDImpression")(d)}function E(){}function k(e){var t=o("react-compiler-runtime").c(9),n,a;t[0]!==e?(a=e.impressionEventName,n=babelHelpers.objectWithoutPropertiesLoose(e,c),t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]);var i=a===void 0?"page_load":a,l=v(),s;t[3]!==i||t[4]!==l||t[5]!==n?(s=function(){l(i,n)},t[3]=i,t[4]=l,t[5]=n,t[6]=s):s=t[6];var u=s,d;return t[7]!==u?(d={onImpressionStart:u},t[7]=u,t[8]=d):d=t[8],r("useSinglePartialViewImpression")(d)}function I(){var e=o("CometRouteParams").useRouteParams(),t=e.entrypoint;return t==null?null:String(t)}function T(){var e=String(o("CometRouteParams").useRouteParams().account_type);return e==="MESSENGER"?"MESSENGER":e==="FACEBOOK"?"FACEBOOK":null}l.useLogProvider=b,l.useLogMaybeSetupEvent=v,l.useLogEvent=S,l.useLogSetupEvent=R,l.useImpressionLogger=L,l.useSPVImpressionLogger=k}),98);
__d("MWScheduledBreak.react",["fbt","MWFamilyCenterEnforcementPage.react","MessengerFamilyCenterLoggingHooks","formatDate","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(13),n=e.currentActiveScheduledBreakInterval,a=e.supervisorData,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={current_module:"quiet_time_screen_takeover",impressionEventName:"page_load"},t[0]=i):i=t[0];var l=o("MessengerFamilyCenterLoggingHooks").useSPVImpressionLogger(i),c=a.supervisor,d,m,p;t[1]!==n.endTimestamp||t[2]!==c?(m=r("formatDate")(n.endTimestamp/1e3,"g:i a"),d=r("MWFamilyCenterEnforcementPage.react"),p=(c==null?void 0:c.name)!=null?s._(/*BTDS*/"You can still reach {name} but won't be able to chat with others until {time}.",[s._param("name",c.name),s._param("time",m)]):s._(/*BTDS*/"You can still reach your Supervisor but won't be able to chat with others until {time}.",[s._param("time",m)]),t[1]=n.endTimestamp,t[2]=c,t[3]=d,t[4]=m,t[5]=p):(d=t[3],m=t[4],p=t[5]);var _;t[6]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"You're on a scheduled break"),t[6]=_):_=t[6];var f;return t[7]!==d||t[8]!==m||t[9]!==l||t[10]!==a||t[11]!==p?(f=u.jsx(d,{description:p,enforcementEndTime:m,enforcementType:"QUIET_TIME",impressionLogger:l,supervisorData:a,title:_}),t[7]=d,t[8]=m,t[9]=l,t[10]=a,t[11]=p,t[12]=f):f=t[12],f}l.default=c}),226);
__d("useMWFamilyCenterEnforcementsMsgr",["cr:3037","useEmptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("cr:3037"))!=null?e:r("useEmptyFunction"),u=s;l.default=u}),98);
__d("MWFamilyCenterEnforcementRoot.react",["MWDailyTimeLimit.react","MWScheduledBreak.react","MessengerWebFamilyCenterUserCapabilities","react","react-compiler-runtime","useMWFamilyCenterContext","useMWFamilyCenterEnforcementsMsgr"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.children;r("useMWFamilyCenterEnforcementsMsgr")();var a=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),i=a.familyCenterData,l=i.currentActiveScheduledBreakInterval,u=i.isAllowedRoute,c=i.shouldShowDailyTimeLimit,d=i.supervisorData;if(l!=null&&!u){var m;return t[0]!==l||t[1]!==d?(m=s.jsx(r("MWScheduledBreak.react"),{currentActiveScheduledBreakInterval:l,supervisorData:d}),t[0]=l,t[1]=d,t[2]=m):m=t[2],m}if(c&&!u){var p;return t[3]!==d?(p=s.jsx(r("MWDailyTimeLimit.react"),{supervisorData:d}),t[3]=d,t[4]=p):p=t[4],p}return n}function c(e){var t=o("react-compiler-runtime").c(2),n=e.children,a=r("MessengerWebFamilyCenterUserCapabilities").can_see_messenger_fc,i=r("MessengerWebFamilyCenterUserCapabilities").is_supervised_user;if(a&&i){var l;return t[0]!==n?(l=s.jsx(u,{children:n}),t[0]=n,t[1]=l):l=t[1],l}return n}l.default=c}),98);
__d("MWLSMemberAddModes",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=Object.freeze({ADMINS_ONLY:e,ALL_MEMBERS:l});i.MemberAddModes=s}),66);
__d("MWGroupOptionsSection.react",["fbt","JSResourceForInteraction","MWLSMemberAddModes","MWXIconForListCell.react","MWXIconFriendGenericAdd","MWXListCellPressable.react","MWXText.react","MWXTextPairing.react","emptyFunction","react","react-compiler-runtime","useMWXLazyDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useState,p=r("JSResourceForInteraction")("MWLSWhoCanAddMembersDialog.react").__setRef("MWGroupOptionsSection.react"),_=s._(/*BTDS*/"Who can add people");function f(e){var t,n=o("react-compiler-runtime").c(23),a=e.renderingTracker,i=e.thread,l;n[0]===Symbol.for("react.memo_cache_sentinel")?(l={mode:"admin_add",title:s._(/*BTDS*/"Admins only")},n[0]=l):l=n[0];var c;n[1]===Symbol.for("react.memo_cache_sentinel")?(c=[l,{mode:"all_member_add",title:s._(/*BTDS*/"All Members")}],n[1]=c):c=n[1];var f=c,h=g,y=(t=i.needsAdminApprovalForNewParticipant)!=null?t:!1,C;n[2]!==y?(C=h(y),n[2]=y,n[3]=C):C=n[3];var b=m(C),v=b[0],S=b[1],R,L;n[4]!==i.needsAdminApprovalForNewParticipant?(R=function(){var e;S(h((e=i.needsAdminApprovalForNewParticipant)!=null?e:!1))},L=[i.needsAdminApprovalForNewParticipant],n[4]=i.needsAdminApprovalForNewParticipant,n[5]=R,n[6]=L):(R=n[5],L=n[6]),d(R,L);var E=r("useMWXLazyDialog")(p),k=E[0],I;n[7]!==a||n[8]!==v||n[9]!==k||n[10]!==i?(I=function(){i!=null&&k({renderingTracker:a,selectedMemberMode:v,thread:i,whoCanAddMembersOptions:f},r("emptyFunction"))},n[7]=a,n[8]=v,n[9]=k,n[10]=i,n[11]=I):I=n[11];var T=I,D;n[12]===Symbol.for("react.memo_cache_sentinel")?(D=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconFriendGenericAdd"),size:"large"}),n[12]=D):D=n[12];var x=f[v],$;n[13]!==x.title?($=u.jsx(r("MWXText.react"),{color:"secondary",type:"body4",children:x.title}),n[13]=x.title,n[14]=$):$=n[14];var P;n[15]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx(r("MWXText.react"),{type:"headline4",children:_}),n[15]=P):P=n[15];var N;n[16]!==$?(N=u.jsx(r("MWXTextPairing.react"),{body:$,headline:P,level:4}),n[16]=$,n[17]=N):N=n[17];var M;n[18]!==T?(M=function(){return T()},n[18]=T,n[19]=M):M=n[19];var w;return n[20]!==N||n[21]!==M?(w=u.jsx(r("MWXListCellPressable.react"),{addOnStart:D,content:N,onPress:M,size:"medium",testid:void 0}),n[20]=N,n[21]=M,n[22]=w):w=n[22],w}function g(e){return e===!0?o("MWLSMemberAddModes").MemberAddModes.ADMINS_ONLY:o("MWLSMemberAddModes").MemberAddModes.ALL_MEMBERS}l.default=f}),226);
__d("MWMessageListScrollContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useCallback,m=u.useContext,p=u.useMemo,_=u.useState,f=null,g=c(f);function h(){var e,t=o("react-compiler-runtime").c(3),n=(e=m(g))!=null?e:{},r=n.setIsThreadAtBottom,a=n.unsetIsThreadAtBottom,i;e:{if(r==null||a==null){i=null;break e}var l;t[0]!==r||t[1]!==a?(l={setIsThreadAtBottom:r,unsetIsThreadAtBottom:a},t[0]=r,t[1]=a,t[2]=l):l=t[2],i=l}return i}function y(e){var t=o("react-compiler-runtime").c(10),n=e.children,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=new Map,t[0]=r):r=t[0];var a=_(r),i=a[0],l=a[1],u;t[1]!==i?(u=function(t){var e=i.get(t);return e!=null?e:!1},t[1]=i,t[2]=u):u=t[2];var c=u,d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=function(t,n){l(function(e){var r=new Map(e);return r.set(t,n),r})},t[3]=d):d=t[3];var m=d,p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=function(t){l(function(e){var n=new Map(e);return n.delete(t),n})},t[4]=p):p=t[4];var f=p,h;t[5]!==c?(h={checkIsThreadAtBottom:c,setIsThreadAtBottom:m,unsetIsThreadAtBottom:f},t[5]=c,t[6]=h):h=t[6];var y=h,C;return t[7]!==n||t[8]!==y?(C=s.jsx(g.Provider,{value:y,children:n}),t[7]=n,t[8]=y,t[9]=C):C=t[9],C}l.MWMessageListScrollContext=g,l.useMWMessageListScrollContextSetters=h,l.MWMessageListScrollContextProvider=y}),98);
__d("useMWLSSendMDotMeRef",["I64","LSFactory","LSSendPlatformReferralEventStoredProcedure","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useEffect,d={contents:!0};function m(t,n){var a=o("react-compiler-runtime").c(5),l=(e||(e=r("useReStore")))(),u,m;a[0]!==t||a[1]!==l||a[2]!==n?(u=function(){var e=d.contents;if(t!=null&&n!=null&&e){r("promiseDone")(l.runInTransaction(function(e){return r("LSSendPlatformReferralEventStoredProcedure")(r("LSFactory")(e),{pageId:(s||(s=o("I64"))).of_string(n),ref:t})},"readwrite",void 0,void 0,i.id+":32")),d.contents=!1;return}},m=[n,t,l],a[0]=t,a[1]=l,a[2]=n,a[3]=u,a[4]=m):(u=a[3],m=a[4]),c(u,m)}l.default=m}),98);
__d("MWRecurringNotificationsOptinDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23962325466719284"}),null);
__d("MWRecurringNotificationsOptinDialogQuery$Parameters",["MWRecurringNotificationsOptinDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWRecurringNotificationsOptinDialogQuery_facebookRelayOperation"),metadata:{},name:"MWRecurringNotificationsOptinDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWRecurringNotificationsOptinDialogTopicRegisteredQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29265486336433064"}),null);
__d("MWRecurringNotificationsOptinDialogTopicRegisteredQuery$Parameters",["MWRecurringNotificationsOptinDialogTopicRegisteredQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWRecurringNotificationsOptinDialogTopicRegisteredQuery_facebookRelayOperation"),metadata:{},name:"MWRecurringNotificationsOptinDialogTopicRegisteredQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWRecurringNotificationsOptinDialog.entrypoint",["JSResourceForInteraction","MWRecurringNotificationsOptinDialogQuery$Parameters","MWRecurringNotificationsOptinDialogTopicRegisteredQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.app_id,r=t.cadence,o=t.ref,a=t.source,i=t.thread_key,l=t.topic;return{extraProps:{thread_key:i,topic:l},queries:{recurringNotificationsOptinDialogQueryRef:{parameters:n("MWRecurringNotificationsOptinDialogQuery$Parameters"),variables:{app_id:e,cadence:r,source:a,thread_key:i,topic:l}},recurringNotificationsOptinDialogToicRegisteredRef:{parameters:n("MWRecurringNotificationsOptinDialogTopicRegisteredQuery$Parameters"),variables:{app_id:e,cadence:r,ref:o,thread_key:i,topic:l}}}}},root:r("JSResourceForInteraction")("MWRecurringNotificationsOptinDialog.react").__setRef("MWRecurringNotificationsOptinDialog.entrypoint")};l.default=e}),98);
__d("RecurringNotificationsJsHelpers",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=[".facebook.com",".messenger.com",".instagram.com",".whatsapp.com"];if(t==null)return!1;try{var n=new URL(t);return e.some(function(e){var t;return n==null||(t=n.hostname)==null?void 0:t.includes(e)})}catch(e){return!1}};i.isRnReferrerUriInternal=e}),66);
__d("RnMDotMeErrorPageImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3383"),s=o("FalcoLoggerInternal").create("rn_m_dot_me_error_page_impression",e),u=s;l.default=u}),98);
__d("RnMDotMeLandingPageImpressionFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3385"),s=o("FalcoLoggerInternal").create("rn_m_dot_me_landing_page_impression",e),u=s;l.default=u}),98);
__d("useRecurringNotificationsOptinDialog",["fbt","CometRouteParams","FBLogger","MDotMeExtraData","MWRecurringNotificationsOptinDialog.entrypoint","RecurringNotificationsJsHelpers","RelayHooks","RnMDotMeErrorPageImpressionFalcoEvent","RnMDotMeLandingPageImpressionFalcoEvent","cometPushToast","react","react-compiler-runtime","useMWXEntryPointDialog","useRouteReferrer"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=u.useEffect,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(28),a=d(!1),i=o("CometRouteParams").useRouteParams(),l=r("useRouteReferrer")(),u=o("RelayHooks").useActorID(),m=i.recurring_notification,p=i.topic,_=i.app_id,f=i.cadence,g=i.source,h=i.ref,y=i.mm_user_ref,C=typeof _=="string"?_:"",b=typeof f=="string"?f:"",v=typeof h=="string"?h:"",S=typeof g=="string"?g:"",R=typeof p=="string"?p:"",L;t[0]!==C||t[1]!==b||t[2]!==v||t[3]!==S||t[4]!==R||t[5]!==e?(L={app_id:C,cadence:b,ref:v,source:S,thread_key:e,topic:R},t[0]=C,t[1]=b,t[2]=v,t[3]=S,t[4]=R,t[5]=e,t[6]=L):L=t[6];var E=r("useMWXEntryPointDialog")(r("MWRecurringNotificationsOptinDialog.entrypoint"),L),k=E[0],I;t[7]!==u||t[8]!==y||t[9]!==m||t[10]!==h||t[11]!==(l==null?void 0:l.url)||t[12]!==k||t[13]!==g||t[14]!==e||t[15]!==p?(I=function(){var t=!a.current,i=m===!0,c=p==null,d=i&&c&&t,_=i&&!c&&t;if(d)a.current=!0,r("RnMDotMeErrorPageImpressionFalcoEvent").log(function(){return{page:{id:e},request:{exception_message:"Missing topic parameter",id:null,is_onsite:o("RecurringNotificationsJsHelpers").isRnReferrerUriInternal(l==null?void 0:l.url),platform:"desktop",ref_param:typeof h=="string"?h:"",referrer_uri:l==null?void 0:l.url},user:{id:u}}}),o("cometPushToast").cometPushSimpleToast(s._(/*BTDS*/"Invalid link. The link you clicked does not exist.").toString());else if(_){var f=function(){return k({thread_key:e})};r("RnMDotMeLandingPageImpressionFalcoEvent").log(function(){var t=n("MDotMeExtraData"),r=y==null||y===""?g!=null?"source:"+String(g):null:String(t.MBS_FLAG);return{extra_data:r,page:{id:e},request:{id:null,is_onsite:o("RecurringNotificationsJsHelpers").isRnReferrerUriInternal(l==null?void 0:l.url),platform:"desktop",ref_param:typeof h=="string"?h:"",referrer_uri:l==null?void 0:l.url},user:{id:u}}}),a.current=!0;try{f()}catch(e){r("FBLogger")("messenger_web_notifications").mustfix("Error loading dialog modal")}}},t[7]=u,t[8]=y,t[9]=m,t[10]=h,t[11]=l==null?void 0:l.url,t[12]=k,t[13]=g,t[14]=e,t[15]=p,t[16]=I):I=t[16];var T=l==null?void 0:l.url,D;t[17]!==u||t[18]!==_||t[19]!==y||t[20]!==m||t[21]!==h||t[22]!==k||t[23]!==g||t[24]!==T||t[25]!==e||t[26]!==p?(D=[m,_,k,e,p,u,y,h,T,g],t[17]=u,t[18]=_,t[19]=y,t[20]=m,t[21]=h,t[22]=k,t[23]=g,t[24]=T,t[25]=e,t[26]=p,t[27]=D):D=t[27],c(I,D)}l.default=m}),226);
__d("useSubscribeToErrorTableAndShowToast",["ReQL","react","react-compiler-runtime","requireDeferred","translatedServerString","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useEffect,c=r("requireDeferred")("LSUserVisibleErrorsUtil").__setRef("useSubscribeToErrorTableAndShowToast"),d=r("requireDeferred")("mwPushToast").__setRef("useSubscribeToErrorTableAndShowToast"),m={contents:!1};function p(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),i,l;return n[0]!==a||n[1]!==t?(i=function(){if(!m.contents){m.contents=!0;var e=o("ReQL").fromTableAscending(a.tables.user_visible_errors).subscribe(function(e,n){switch(n.operation){case"add":{var o=n.value,i=o.presentationStyle;if(i!=null&&i!=="toast"&&i!=="undefined")return;d.onReady(function(e){e.mwPushErrorToast({body:o.errorBodyText!=null?r("translatedServerString")(o.errorBodyText):void 0,onDismiss:function(){c.onReady(function(e){e.removeUserVisibleErrorFromTable(a,o.errorId)})},title:r("translatedServerString")(o.errorTitleText)},t)});return}case"put":case"delete":return}});return(function(){return m.contents=!1,e()})}},l=[a,t],n[0]=a,n[1]=t,n[2]=i,n[3]=l):(i=n[2],l=n[3]),u(i,l)}l.default=p}),98);
__d("MWInbox.react",["CometErrorBoundary.react","CometPlaceholder.react","MWInboxProvider.react","MWLSCommunityChatPopper","MWLSThreadDisplayContext","MWMDotMeReferrerContext.react","MWMessageListScrollContext.react","WebUXLoggingEntryPointContextProvider","cr:108","cr:2090","cr:4330","cr:5447","cr:6574","cr:7026","cr:7101","cr:7937","react","react-compiler-runtime","useEmptyFunction","useMWLSChatPopperUpper","useMWLSSendMDotMeRef","useReStore","useRecurringNotificationsOptinDialog","useSubscribeToErrorTableAndShowToast"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=(e=n("cr:6574"))!=null?e:n("cr:4330"),m=n("cr:7101")||{},p=m.MWComposerKeyCommandFocusManager,_=n("cr:108")||r("useEmptyFunction");n("cr:7026")!=null&&n("cr:5447")!=null&&n("cr:7026").start(n("cr:5447").config);var f=1e4;function g(e){var t=o("react-compiler-runtime").c(26),a=e.children,i=e.queries,l=e.refParam,u=e.threadKey,m=(s||(s=r("useReStore")))(),g;t[0]!==m?(g={storage:m},t[0]=m,t[1]=g):g=t[1],r("useMWLSChatPopperUpper")(g);var y;t[2]!==m?(y={storage:m},t[2]=m,t[3]=y):y=t[3],o("MWLSCommunityChatPopper").useOpenCommunityChatTabs(y),r("useMWLSSendMDotMeRef")(l,u),r("useSubscribeToErrorTableAndShowToast")(f),r("useRecurringNotificationsOptinDialog")(u),_();var C;t[4]!==a?(C=n("cr:7937")!=null?c.jsx(n("cr:7937"),{children:a}):a,t[4]=a,t[5]=C):C=t[5];var b=C,v;t[6]!==b?(v=p==null?b:c.jsx(p,{children:b}),t[6]=b,t[7]=v):v=t[7];var S;t[8]!==v?(S=c.jsx(o("MWLSThreadDisplayContext").MWLSThreadDisplayContextProvider,{value:"Inbox",children:v}),t[8]=v,t[9]=S):S=t[9];var R;t[10]!==i?(R=n("cr:2090")&&i.mWChatEncryptedBackupsRestoreUpsellMessengerInboxQueryReference!=null&&c.jsx(n("cr:2090"),{mWChatEncryptedBackupsRestoreUpsellMessengerInboxQueryReference:i.mWChatEncryptedBackupsRestoreUpsellMessengerInboxQueryReference}),t[10]=i,t[11]=R):R=t[11];var L;t[12]!==R?(L=c.jsx(r("CometErrorBoundary.react"),{fallback:h,children:c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWInbox.EncryptedBackupsUpsell",children:R})}),t[12]=R,t[13]=L):L=t[13];var E;t[14]===Symbol.for("react.memo_cache_sentinel")?(E=c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWInbox.hatEncryptedBackupsHandleRestore",children:d&&c.jsx(d,{})}),t[14]=E):E=t[14];var k;t[15]!==S||t[16]!==L?(k=c.jsxs(c.Fragment,{children:[S,L,E]}),t[15]=S,t[16]=L,t[17]=k):k=t[17];var I=k,T;t[18]!==I?(T=c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWInbox.Body",children:I}),t[18]=I,t[19]=T):T=t[19];var D;t[20]!==l||t[21]!==T?(D=c.jsx(o("WebUXLoggingEntryPointContextProvider").WebUXLoggingEntryPointContextProvider,{value:"inbox",children:c.jsx(o("MWMessageListScrollContext.react").MWMessageListScrollContextProvider,{children:c.jsx(o("MWMDotMeReferrerContext.react").MWMDotMeReferrerContextProvider,{referrer:l,children:T})})}),t[20]=l,t[21]=T,t[22]=D):D=t[22];var x;return t[23]!==D||t[24]!==u?(x=c.jsx(o("MWInboxProvider.react").MWInboxProvider,{threadKey:u,children:D}),t[23]=D,t[24]=u,t[25]=x):x=t[25],x}function h(){return null}l.default=g}),98);
__d("MWInboxHeaderButton.react",["MWCircleButtonWithChildren.react","MWXTooltip.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["disabled","label","ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(13),a,i,l,s;n[0]!==t?(s=t.disabled,a=t.label,l=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s):(a=n[1],i=n[2],l=n[3],s=n[4]);var c=s===void 0?!1:s,d;n[5]!==c||n[6]!==a||n[7]!==i||n[8]!==l?(d=u.jsx(r("MWCircleButtonWithChildren.react"),babelHelpers.extends({},i,{disabled:c,label:a,ref:l})),n[5]=c,n[6]=a,n[7]=i,n[8]=l,n[9]=d):d=n[9];var m;return n[10]!==a||n[11]!==d?(m=u.jsx(r("MWXTooltip.react"),{align:"middle",position:"below",tooltip:a,children:d}),n[10]=a,n[11]=d,n[12]=m):m=n[12],m}l.default=c}),98);
__d("MWXChip.react",["MDSChip.react"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MDSChip.react")}),98);
__d("MessengerCheckmarkTriangleDownFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M22.331 10.878a1.25 1.25 0 0 0-2.162-1.255l-8.02 13.813a.25.25 0 0 1-.394.052l-5.121-5.122a1.25 1.25 0 0 0-1.768 1.768l6.5 6.5a1.25 1.25 0 0 0 1.965-.256l9-15.5zM24.751 17a.75.75 0 0 0-.624 1.166l2.999 4.498a.75.75 0 0 0 1.248 0l2.998-4.498A.75.75 0 0 0 30.75 17H24.75z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MWUserControlButton.react",["fbt","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWPThreadIsPage.react","MWXChip.react","MWXLazyPopoverTrigger.react","MWXSvgIcon","MessengerCheckmarkTriangleDownFilled.svg.react","SVGIcon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.color,a=e.thread,i=o("MWPThreadIsPage.react").useIsPage(),l=o("LSMessagingThreadTypeUtil").isDiscoverableChannel(a.threadType),c=o("LSMessagingThreadTypeUtil").isBusinessSupportThread(a.threadSubtype);if(!c&&i&&!l){var d;t[0]!==a?(d={thread:a},t[0]=a,t[1]=d):d=t[1];var m;t[2]===Symbol.for("react.memo_cache_sentinel")?(m=r("JSResourceForInteraction")("LSUserControlMenu.react").__setRef("MWUserControlButton.react"),t[2]=m):m=t[2];var p;t[3]!==n?(p=function(t,a){return u.jsx(r("MWXChip.react"),{"aria-label":s._(/*BTDS*/"Page options"),colorOverride:n,icon:o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(r("MessengerCheckmarkTriangleDownFilled.svg.react")),!0),onPress:a,ref:t})},t[3]=n,t[4]=p):p=t[4];var _;return t[5]!==d||t[6]!==p?(_=u.jsx(r("MWXLazyPopoverTrigger.react"),{align:"end",disableAutoFlip:!0,popoverProps:d,popoverResource:m,position:"below",children:p}),t[5]=d,t[6]=p,t[7]=_):_=t[7],_}return null}l.default=c}),226);
__d("MWInboxHeaderButtons.react",["fbt","CurrentEnvironment","FDSBadge.react","I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWChatRTCInfoButtonIcon.react","MWInboxHeaderButton.react","MWInboxInfoPanelContext.react","MWReQLChatRTCButtons.react","MWUserControlButton.react","MWXIconStrict.react","MWXIconThread","MWXRow.react","MWXRowItem.react","MWXThreadThemeColor","MWXTooltip.react","ReQL","ReQLSuspense","mwCMIsAnyCMThread","react","react-compiler-runtime","requireDeferred","stylex","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=d.useCallback,_=r("requireDeferred")("ZenonUserActionLoggerCommon").__setRef("MWInboxHeaderButtons.react"),f={iconOverlay:{borderStartStartRadius:"xaur0o6",borderStartEndRadius:"x124ains",borderEndEndRadius:"x1ojmjj",borderEndStartRadius:"xj6tauk",height:"x5yr21d",insetInlineStart:"x1o0tod",opacity:"xg01cxk",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},iconOverlayActive:{opacity:"xz5rk10",$$css:!0},rowItem:{alignItems:"x6s0dn4",display:"x78zum5",height:"xn3w4p2",justifyContent:"xl56j7k",paddingTop:"x1yrsyyn",paddingInlineEnd:"x1icxu4v",paddingBottom:"x10b6aqq",paddingInlineStart:"x25sj25",width:"x187nhsf",$$css:!0}},g=s._(/*BTDS*/"Sidechats");function h(e){return m.jsx(r("MWXRowItem.react"),{xstyle:f.rowItem,children:e})}h.displayName=h.name+" [from "+i.id+"]";function y(t){var n=o("react-compiler-runtime").c(8),a=t.threadKey,l=v,s=C,u=(e||(e=r("useReStore")))(),c;n[0]!==u.tables.threads||n[1]!==a?(c=function(){return o("ReQL").fromTableAscending(u.tables.threads,["threadKey","threadType","folderName","ongoingCallState","parentThreadKey"].concat(o("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(a)},n[0]=u.tables.threads,n[1]=a,n[2]=c):c=n[2];var d;n[3]!==u||n[4]!==a?(d=[u,a],n[3]=u,n[4]=a,n[5]=d):d=n[5];var p=o("ReQLSuspense").useFirst(c,d,i.id+":113");if(p!=null){var _;return n[6]!==p?(_=m.jsx(r("MWReQLChatRTCButtons.react"),{audioCallingSurface:"comet_inbox_audio_button",logAudio:l,logVideo:s,renderContainer:h,size:36,thread:p,videoCallingSurface:"comet_inbox_video_button"}),n[6]=p,n[7]=_):_=n[7],_}}function C(){_.onReady(b)}function b(e){return e.logClick({component:"video_button",surface:"messenger_header"})}function v(){_.onReady(S)}function S(e){return e.logClick({component:"audio_button",surface:"messenger_header"})}function R(t){var n,a=o("react-compiler-runtime").c(40),l=t.setThreadInfoVisible,u=t.thread,d=t.threadInfoVisible,p=(e||(e=r("useReStore")))(),_=(n=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(p.tables.threads,["numUnreadSubthreads"]).getKeyRange(u.threadKey).map(L)},[p,u.threadKey],i.id+":159"))!=null?n:!1,h;a[0]!==u?(h=o("MWCMThreadTypes.react").isJoinedCMThread(u.threadType)&&o("LSThreadBitOffset").has(195,u),a[0]=u,a[1]=h):h=a[1];var C=h,b=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),v=b.currentSubthreadView,S=b.setShowSubthreadList,R;a[2]!==u.threadType?(R=r("mwCMIsAnyCMThread")(u.threadType)?s._(/*BTDS*/"Chat Information"):o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(u.threadType)?s._(/*BTDS*/"Channel info"):s._(/*BTDS*/"Conversation information"),a[2]=u.threadType,a[3]=R):R=a[3];var E=R,k;a[4]!==u?(k=m.jsx(r("MWUserControlButton.react"),{thread:u}),a[4]=u,a[5]=k):k=a[5];var I;a[6]!==u.threadKey?(I=m.jsx(y,{threadKey:u.threadKey}),a[6]=u.threadKey,a[7]=I):I=a[7];var T;a[8]!==v||a[9]!==_||a[10]!==S||a[11]!==C||a[12]!==d?(T=C?m.jsx(r("MWXRowItem.react"),{xstyle:f.rowItem,children:m.jsx(r("MWXTooltip.react"),{align:"middle",position:"below",tooltip:g,children:m.jsx(r("MWInboxHeaderButton.react"),{ariaExpanded:d,label:g,onPress:function(){S(v!=="subthreadList",!0)},children:_?m.jsxs(m.Fragment,{children:[m.jsx(r("MWXIconStrict.react"),{color:o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),icon:r("MWXIconThread"),size:20}),m.jsx("div",{className:"xz03a8w x10l6tqk xs7f9wi",children:m.jsx(r("FDSBadge.react"),{border:"white",color:"red",isProfileBadge:!0,size:8})})]}):m.jsx(r("MWXIconStrict.react"),{color:o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),icon:r("MWXIconThread"),size:20})})})}):null,a[8]=v,a[9]=_,a[10]=S,a[11]=C,a[12]=d,a[13]=T):T=a[13];var D;a[14]!==l||a[15]!==d?(D=function(){l(!d)},a[14]=l,a[15]=d,a[16]=D):D=a[16];var x;a[17]===Symbol.for("react.memo_cache_sentinel")?(x={className:"x6s0dn4 x3nfvp2 x1fgtraw xl56j7k x1n2onr6 xgd8bvy"},a[17]=x):x=a[17];var $;a[18]!==d?($=(c||(c=r("stylex"))).props(f.iconOverlay,d&&r("CurrentEnvironment").facebookdotcom?f.iconOverlayActive:!1),a[18]=d,a[19]=$):$=a[19];var P;a[20]!==$?(P=m.jsx("div",babelHelpers.extends({},$)),a[20]=$,a[21]=P):P=a[21];var N;a[22]!==d?(N=m.jsx(r("MWChatRTCInfoButtonIcon.react"),{fill:"var(--mwp-header-button-color)",isInfoPanelOpen:d}),a[22]=d,a[23]=N):N=a[23];var M;a[24]!==N||a[25]!==P?(M=m.jsxs("div",babelHelpers.extends({},x,{children:[P,N]})),a[24]=N,a[25]=P,a[26]=M):M=a[26];var w;a[27]!==E||a[28]!==M||a[29]!==D||a[30]!==d?(w=m.jsx(r("MWInboxHeaderButton.react"),{ariaExpanded:d,label:E,onPress:D,children:M}),a[27]=E,a[28]=M,a[29]=D,a[30]=d,a[31]=w):w=a[31];var A;a[32]!==E||a[33]!==w?(A=m.jsx(r("MWXRowItem.react"),{xstyle:f.rowItem,children:m.jsx(r("MWXTooltip.react"),{align:"middle",position:"below",tooltip:E,children:w})}),a[32]=E,a[33]=w,a[34]=A):A=a[34];var F;return a[35]!==A||a[36]!==k||a[37]!==I||a[38]!==T?(F=m.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,verticalAlign:"center",children:[k,I,T,A]}),a[35]=A,a[36]=k,a[37]=I,a[38]=T,a[39]=F):F=a[39],F}function L(e){var t=e.numUnreadSubthreads;return(u||(u=o("I64"))).gt(t!=null?t:(u||(u=o("I64"))).zero,u.zero)}l.default=R}),226);
__d("MWLSParticipantDetails",["I64","LSContactReachabilityStatusType","LSIntEnum","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n=o("react-compiler-runtime").c(6),a=(u||(u=r("useReStore")))(),l;n[0]!==t||n[1]!==a.tables.contacts?(l=function(){return o("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((e||(e=o("I64"))).of_string(t)).map(d)},n[0]=t,n[1]=a.tables.contacts,n[2]=l):l=n[2];var s;return n[3]!==t||n[4]!==a?(s=[t,a],n[3]=t,n[4]=a,n[5]=s):s=n[5],o("ReQLSuspense").useFirst(l,s,i.id+":23")}function d(e){var t;return(t=e.firstName)!=null?t:e.name}function m(t){var n,a=(u||(u=r("useReStore")))();return(n=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(a.tables.contacts).getKeyRange((e||(e=o("I64"))).of_string(t)).map(p)},[t,a],i.id+":37"))!=null?n:!0}function p(t){var n=t.contactReachabilityStatusType;return n!=null?(e||(e=o("I64"))).equal((s||(s=o("LSIntEnum"))).ofNumber(r("LSContactReachabilityStatusType").REACHABLE),n):!0}l.useParticipantShortName=c,l.useParticipantReachabilityStatus=m}),98);
__d("MWInboxHeaderButtonsWrapper.react",["I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MWInboxHeaderButtons.react","MWLSParticipantDetails","react","react-compiler-runtime","useIsDefaultE2eeOpenThread","useMWPThreadHasSpectraUser"],(function(t,n,r,o,a,i,l){"use strict";var e=["thread"],s=["thread"],u,c,d=u||(u=o("react"));function m(t){var n=o("react-compiler-runtime").c(9),a,i;n[0]!==t?(i=t.thread,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;n[3]!==i.threadKey?(l=(c||(c=o("I64"))).to_string(i.threadKey),n[3]=i.threadKey,n[4]=l):l=n[4];var s=o("MWLSParticipantDetails").useParticipantReachabilityStatus(l),u;return n[5]!==s||n[6]!==a||n[7]!==i?(u=d.jsx(r("MWInboxHeaderButtons.react"),babelHelpers.extends({},a,{isReachable:s,thread:i})),n[5]=s,n[6]=a,n[7]=i,n[8]=u):u=n[8],u}function p(e){var t=o("react-compiler-runtime").c(6),n,a;t[0]!==e?(a=e.thread,n=babelHelpers.objectWithoutPropertiesLoose(e,s),t[0]=e,t[1]=n,t[2]=a):(n=t[1],a=t[2]);var i=o("LSThreadBitOffset").has(23,a),l=o("MAWThreadCutover").useIsCutoverOpenThread(a.threadKey),u=o("MAWThreadCutover").useIsDualThreadCutoverOpenThread(a.threadKey),c=r("useIsDefaultE2eeOpenThread")(a),p=r("useMWPThreadHasSpectraUser")(a.threadKey);if(l&&!u||!i||c||p)return null;var _;return t[3]!==n||t[4]!==a?(_=o("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)?d.jsx(m,babelHelpers.extends({},n,{thread:a})):d.jsx(r("MWInboxHeaderButtons.react"),babelHelpers.extends({},n,{thread:a})),t[3]=n,t[4]=a,t[5]=_):_=t[5],_}l.default=p}),98);
__d("MWInboxHeader.react",["BaseView.react","MWEditMessageOverlay.react","MWInboxHeaderButtonsWrapper.react","MWInboxHeaderDetailsContainer.react","MWInboxInfoPanelContext.react","MWLayoutBackButton.react","MWPConversationSearchContext.react","MWResponsiveLayoutConstants","MWXRow.react","MWXRowItem.react","MessengerWebUXLogger","WebUXLoggingSurfaceContextProvider","cr:2580","gkx","isMWNewSearchUXEnabled","nullthrows","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.memo,d=u.useCallback,m=u.useContext,p=u.useEffect,_=r("gkx")("23219");function f(e){var t=o("react-compiler-runtime").c(22),a=e.thread,i=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),l=i.setThreadInfoVisible,u=i.threadInfoVisible,c=r("MessengerWebUXLogger").useInteractionLogger(),d;t[0]!==c||t[1]!==l||t[2]!==a?(d=function(t){var e=a.threadKey,r=a.threadType;t&&(n("cr:2580")==null||n("cr:2580")({threadKey:e,threadType:r},"open_thread_settings_menu","thread_details"),c==null||c({eventName:"open_thread_details_pane",threadKey:e,threadType:r})),l(t)},t[0]=c,t[1]=l,t[2]=a,t[3]=d):d=t[3];var f=d,g=m(o("MWPConversationSearchContext.react").context),h;t[4]!==g?(h=r("nullthrows")(g),t[4]=g,t[5]=h):h=t[5];var y=h,C=y.shouldNavigateSidePanelToSearch,b,v;t[6]!==l||t[7]!==C||t[8]!==u?(b=function(){r("isMWNewSearchUXEnabled")()&&!u&&C&&l(!0)},v=[u,l,C],t[6]=l,t[7]=C,t[8]=u,t[9]=b,t[10]=v):(b=t[9],v=t[10]),p(b,v);var S;t[11]===Symbol.for("react.memo_cache_sentinel")?(S=s.jsx(r("MWEditMessageOverlay.react"),{}),t[11]=S):S=t[11];var R;t[12]===Symbol.for("react.memo_cache_sentinel")?(R=r("MWLayoutBackButton.react")!=null?s.jsx(r("MWLayoutBackButton.react"),{panel:o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL}):null,t[12]=R):R=t[12];var L;t[13]!==a.threadKey?(L=s.jsxs(r("MWXRow.react"),{align:"start",expanding:!0,paddingHorizontal:0,paddingVertical:0,children:[R,s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx(r("MWInboxHeaderDetailsContainer.react"),{badgeSize:_?9:10,photoSize:_?36:40,threadKey:a.threadKey,threadNameSize:_?"headlineEmphasized5":"headlineEmphasized3"})})]}),t[13]=a.threadKey,t[14]=L):L=t[14];var E;t[15]!==f||t[16]!==a||t[17]!==u?(E=s.jsx(r("MWInboxHeaderButtonsWrapper.react"),{setThreadInfoVisible:f,thread:a,threadInfoVisible:u}),t[15]=f,t[16]=a,t[17]=u,t[18]=E):E=t[18];var k;return t[19]!==L||t[20]!==E?(k=s.jsx(o("WebUXLoggingSurfaceContextProvider").WebUXLoggingSurfaceContextProvider,{value:"inbox_header",children:s.jsxs(r("BaseView.react"),{children:[S,s.jsxs(r("MWXRow.react"),{paddingHorizontal:_?12:16,paddingVertical:_?10:12,spacingVertical:0,verticalAlign:"center",children:[L,E]})]})}),t[19]=L,t[20]=E,t[21]=k):k=t[21],k}var g=c(f);l.default=g}),98);
__d("MWXIconChevronUp",["MWXSvgIcon","SVGIcon","cr:22270","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22270")),r("gkx")("23219"));l.default=e}),98);
__d("MWInboxSearchHeader.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","FocusRegion.react","I64","LSIntEnum","LSMessagingThreadTypeUtil","LSSearchRequestStatusType","MWPConversationSearchContext.react","MWPConversationSearchLogger","MWXButton.react","MWXCircleButton.react","MWXIconChevronDown","MWXIconChevronUp","MWXIconCross","MWXIconMagnifyingGlass","MWXIconStrict.react","MWXRoundedTextInput.react","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","MWXThreadThemeColor","focusScopeQueries","nullthrows","react","react-compiler-runtime","useMWPConversatioSearchQPLLogger","useMWPConversationSearch","useMWPStartConversationSearch"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=e||(e=o("react")),m=e,p=m.useContext,_=m.useEffect,f=m.useMemo,g=m.useState;function h(e){var t=o("react-compiler-runtime").c(76),n=e.onClose,a=e.setVisibleMessage,i=e.thread,l=r("useMWPConversationSearch")(i.threadKey),m=l.next,f=l.previous,h=l.query,y=l.resultCount,C=l.selectedSearchResultIndex,b=l.status,v=r("useMWPStartConversationSearch")(i.threadKey),S=p(o("MWPConversationSearchContext.react").context),R;t[0]!==S?(R=r("nullthrows")(S),t[0]=S,t[1]=R):R=t[1];var L=R,E=L.search,k=r("useMWPConversatioSearchQPLLogger")(),I=k.qplSuccess,T=k.updateCurrentResultCount,D;t[2]!==h?(D=function(){return h!=null?h:""},t[2]=h,t[3]=D):D=t[3];var x=g(D),$=x[0],P=x[1],N;t[4]!==(E==null?void 0:E.query)?(N=function(){var e;P((e=E==null?void 0:E.query)!=null?e:"")},t[4]=E==null?void 0:E.query,t[5]=N):N=t[5];var M;t[6]!==E?(M=[E],t[6]=E,t[7]=M):M=t[7],_(N,M);var w;e:{if(y==null){w=null;break e}var A;t[8]!==y?(A=y===0?s._(/*BTDS*/"No results"):s._(/*BTDS*/"_j{\"*\":\"{totalResults} results\",\"_1\":\"1 result\"}",[s._plural(y,"totalResults")]),t[8]=y,t[9]=A):A=t[9],w=A}var F=w,O;t[10]!==b?(O=b!=null&&(u||(u=o("I64"))).equal(b,(c||(c=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").PENDING))?d.jsx(r("MWXSpinner.react"),{color:"blue",size:16}):null,t[10]=b,t[11]=O):O=t[11];var B=O,W,q;t[12]!==I||t[13]!==y||t[14]!==b||t[15]!==T?(W=function(){b!=null&&(u||(u=o("I64"))).equal(b,(c||(c=o("LSIntEnum"))).ofNumber(r("LSSearchRequestStatusType").COMPLETE))&&(y!=null&&T(y),I())},q=[I,y,b,T],t[12]=I,t[13]=y,t[14]=b,t[15]=T,t[16]=W,t[17]=q):(W=t[16],q=t[17]),_(W,q);var U,V;t[18]!==a?(U=function(){a()},V=[a],t[18]=a,t[19]=U,t[20]=V):(U=t[19],V=t[20]),_(U,V);var H;t[21]!==y||t[22]!==C?(H=y!=null&&C!=null?[y===0||C===(y-1|0),C===0]:[!0,!0],t[21]=y,t[22]=C,t[23]=H):H=t[23];var G=H,z=G[0],j=G[1],K,Q;t[24]===Symbol.for("react.memo_cache_sentinel")?(K={key:r("CometKeys").ENTER},Q=s._(/*BTDS*/"Search"),t[24]=K,t[25]=Q):(K=t[24],Q=t[25]);var X;t[26]!==$||t[27]!==v||t[28]!==i.threadType?(X=[{command:K,description:Q,handler:function(){r("MWPConversationSearchLogger").logMessageSearchSearchClicked(),v($,o("LSMessagingThreadTypeUtil").isArmadilloSecure(i.threadType))},triggerFromInputs:!0}],t[26]=$,t[27]=v,t[28]=i.threadType,t[29]=X):X=t[29];var Y=X,J;t[30]===Symbol.for("react.memo_cache_sentinel")?(J={className:"xfpmyvw x1exxf4d x13fuv20 x178xt8z x78zum5"},t[30]=J):J=t[30];var Z;t[31]!==$?(Z=$!==""?d.jsx(r("MWXCircleButton.react"),{"aria-label":s._(/*BTDS*/"Clear conversation search"),color:o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),icon:r("MWXIconCross"),onPress:function(){return P("")},size:32}):null,t[31]=$,t[32]=Z):Z=t[32];var ee;t[33]===Symbol.for("react.memo_cache_sentinel")?(ee=s._(/*BTDS*/"Search"),t[33]=ee):ee=t[33];var te,ne,re,oe;t[34]===Symbol.for("react.memo_cache_sentinel")?(te=d.jsx(r("MWXIconStrict.react"),{color:o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),icon:r("MWXIconMagnifyingGlass"),size:20}),ne=s._(/*BTDS*/"Search"),re=function(t){t.target instanceof HTMLInputElement&&P(t.target.value)},oe=s._(/*BTDS*/"Search"),t[34]=te,t[35]=ne,t[36]=re,t[37]=oe):(te=t[34],ne=t[35],re=t[36],oe=t[37]);var ae;t[38]!==$||t[39]!==Z?(ae=d.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:o("focusScopeQueries").tabbableScopeQuery,children:d.jsx(r("MWXRoundedTextInput.react"),{addOnEnd:Z,"aria-label":ee,icon:te,label:ne,onChange:re,placeholder:oe,value:$})}),t[38]=$,t[39]=Z,t[40]=ae):ae=t[40];var ie;t[41]!==Y||t[42]!==ae?(ie=d.jsx(r("CometComponentWithKeyCommands.react"),{commandConfigs:Y,children:ae}),t[41]=Y,t[42]=ae,t[43]=ie):ie=t[43];var le;t[44]===Symbol.for("react.memo_cache_sentinel")?(le={className:"x12bfo1c x4ii5y1 xr1yuqi x10l6tqk xp4054r xwa60dl x1cb1t30"},t[44]=le):le=t[44];var se;t[45]!==F?(se=F===null?null:d.jsx("div",{className:"xuxw1ft",role:"alert",children:d.jsx(r("MWXText.react"),{testid:void 0,type:"meta3",children:F})}),t[45]=F,t[46]=se):se=t[46];var ue;t[47]!==B||t[48]!==se?(ue=d.jsxs("div",babelHelpers.extends({},le,{children:[B,se]})),t[47]=B,t[48]=se,t[49]=ue):ue=t[49];var ce;t[50]!==ie||t[51]!==ue?(ce=d.jsxs(r("MWXRowItem.react"),{expanding:!0,children:[ie,ue]}),t[50]=ie,t[51]=ue,t[52]=ce):ce=t[52];var de,me;t[53]===Symbol.for("react.memo_cache_sentinel")?(de=s._(/*BTDS*/"Next"),me=o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),t[53]=de,t[54]=me):(de=t[53],me=t[54]);var pe;t[55]!==m?(pe=function(){var e,t=(e=m())!=null?e:-1;r("MWPConversationSearchLogger").logMessageSearchMsgResultChosen("next",t)},t[55]=m,t[56]=pe):pe=t[56];var _e;t[57]!==z||t[58]!==pe?(_e=d.jsx(r("MWXRowItem.react"),{children:d.jsx(r("MWXCircleButton.react"),{"aria-label":de,color:me,disabled:z,icon:r("MWXIconChevronUp"),onPress:pe,size:24})}),t[57]=z,t[58]=pe,t[59]=_e):_e=t[59];var fe,ge;t[60]===Symbol.for("react.memo_cache_sentinel")?(fe=s._(/*BTDS*/"Previous"),ge=o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),t[60]=fe,t[61]=ge):(fe=t[60],ge=t[61]);var he;t[62]!==f?(he=function(){var e,t=(e=f())!=null?e:-1;r("MWPConversationSearchLogger").logMessageSearchMsgResultChosen("prev",t)},t[62]=f,t[63]=he):he=t[63];var ye;t[64]!==j||t[65]!==he?(ye=d.jsx(r("MWXRowItem.react"),{children:d.jsx(r("MWXCircleButton.react"),{"aria-label":fe,color:ge,disabled:j,icon:r("MWXIconChevronDown"),onPress:he,size:24})}),t[64]=j,t[65]=he,t[66]=ye):ye=t[66];var Ce,be;t[67]===Symbol.for("react.memo_cache_sentinel")?(Ce=s._(/*BTDS*/"Close conversation search"),be=s._(/*BTDS*/"Close"),t[67]=Ce,t[68]=be):(Ce=t[67],be=t[68]);var ve;t[69]!==n?(ve=d.jsx(r("MWXRowItem.react"),{children:d.jsx(r("MWXButton.react"),{"aria-label":Ce,label:be,onPress:n,type:"secondary"})}),t[69]=n,t[70]=ve):ve=t[70];var Se;return t[71]!==ce||t[72]!==_e||t[73]!==ye||t[74]!==ve?(Se=d.jsx("div",babelHelpers.extends({},J,{children:d.jsxs(r("MWXRow.react"),{expanding:!0,paddingVertical:10,verticalAlign:"center",children:[ce,_e,ye,ve]})})),t[71]=ce,t[72]=_e,t[73]=ye,t[74]=ve,t[75]=Se):Se=t[75],Se}l.default=h}),226);
__d("MWInboxThreadAndComposer.react",["I64","Int64Hooks","MWComposerGating.react","MWCreatorMessagingUtils","MWFullThreadProvider.react","MWOpenAndSecureThreadView.react","MWV2ComposerActionsContext.react","QPLUserFlow","cr:1113","emptyFunction","qpl","react","react-compiler-runtime","useC4gEngagementImpressionLogging","useEmptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useCallback,p=d.useRef,_=(e=n("cr:1113"))!=null?e:r("useEmptyFunction");function f(e){var t=o("react-compiler-runtime").c(20),n=e.thread,a=n.threadKey,i=n.threadType,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={jumpToMostRecentMessage:r("emptyFunction")},t[0]=l):l=t[0];var s=p(l),d;t[1]===Symbol.for("react.memo_cache_sentinel")?(d=function(){var e;(e=s.current)==null||e.jumpToMostRecentMessage()},t[1]=d):d=t[1];var m=d,f;t[2]!==n?(f={thread:n},t[2]=n,t[3]=f):f=t[3],_(f);var g;t[4]!==a||t[5]!==i?(g={threadKey:a,threadType:i},t[4]=a,t[5]=i,t[6]=g):g=t[6],r("useC4gEngagementImpressionLogging")(g);var h,y;t[7]!==n?(h=function(){o("MWCreatorMessagingUtils").isAPPlusMessageRequest(n)&&r("QPLUserFlow").endSuccess(r("qpl")._(421070823,"2981"),{annotations:{string:{action:"accept"}},instanceKey:(u||(u=o("I64"))).to_int32(n.threadKey)})},y=[n],t[7]=n,t[8]=h,t[9]=y):(h=t[8],y=t[9]);var C=o("Int64Hooks").useCallbackInt64(h,y),b;t[10]!==n?(b=c.jsx(r("MWOpenAndSecureThreadView.react"),{entryPoint:"thread_details",messageListRef:s,thread:n}),t[10]=n,t[11]=b):b=t[11];var v;t[12]!==C?(v=function(t){return c.jsx(o("MWComposerGating.react").MWInboxComposerGating,{afterSendMessage:C,isPreviewThread:!1,thread:t})},t[12]=C,t[13]=v):v=t[13];var S;t[14]!==v||t[15]!==n.threadKey?(S=c.jsx(o("MWV2ComposerActionsContext.react").MWV2ComposerActionsListener,{onMessageSendAttempt:m,children:c.jsx(r("MWFullThreadProvider.react"),{threadKey:n.threadKey,children:v})}),t[14]=v,t[15]=n.threadKey,t[16]=S):S=t[16];var R;return t[17]!==b||t[18]!==S?(R=c.jsxs(c.Fragment,{children:[b,S]}),t[17]=b,t[18]=S,t[19]=R):R=t[19],R}l.default=f}),98);
__d("useMWLSThreadReportingToken",["MWGetLSThreadReportingTokenFromThread","MWLSThread","MWThreadKey.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){var e=o("MWThreadKey.react").useMWThreadKeyMemoizedExn(),t=o("MWLSThread").useThread(e);return s(function(){if(t!=null)return r("MWGetLSThreadReportingTokenFromThread")(t)},[t])}l.default=u}),98);
__d("useMWShowProactiveWarningDialog",["Int64Hooks","JSResourceForInteraction","LSMessagingThreadTypeUtil","emptyFunction","react","react-compiler-runtime","useMWXLazyDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useRef;function u(e,t,n){var a=o("react-compiler-runtime").c(10),i=e.proactiveWarningDismissTime,l=e.threadKey,u=e.threadType,c=s(!1),d;a[0]===Symbol.for("react.memo_cache_sentinel")?(d=r("JSResourceForInteraction")("MWProactiveWarningDialog.react").__setRef("useMWShowProactiveWarningDialog"),a[0]=d):d=a[0];var m=r("useMWXLazyDialog")(d),p=m[0],_=o("LSMessagingThreadTypeUtil").isArmadilloSecure(u),f=_?i!=null:!0,g;a[1]!==t||a[2]!==p||a[3]!==f||a[4]!==n?(g=function(){t!=null&&!c.current&&f&&(c.current=!0,p({payload:t,token:n},r("emptyFunction")))},a[1]=t,a[2]=p,a[3]=f,a[4]=n,a[5]=g):g=a[5];var h=t!=null,y;a[6]!==f||a[7]!==h||a[8]!==l?(y=[f,l,h],a[6]=f,a[7]=h,a[8]=l,a[9]=y):y=a[9],o("Int64Hooks").useEffectInt64(g,y)}l.default=u}),98);
__d("MWProactiveWarningComponent.react",["useMWLSEnsureAdContextExists","useMWLSEnsureInThreadBannerExists","useMWLSSprocFetchProactiveWarningIfNeeded","useMWLSThreadReportingToken","useMWShowProactiveWarningDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.payload,n=e.thread;r("useMWLSSprocFetchProactiveWarningIfNeeded")(!0,n,!1),r("useMWLSEnsureInThreadBannerExists")(),r("useMWLSEnsureAdContextExists")();var o=r("useMWLSThreadReportingToken")();return r("useMWShowProactiveWarningDialog")(n,t,o),null}l.default=e}),98);
__d("MWQuickPromotionBroadcastChannelNUXesQuery$Parameters",["MWQuickPromotionBroadcastChannelNUXesQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWQuickPromotionBroadcastChannelNUXesQuery_facebookRelayOperation"),metadata:{},name:"MWQuickPromotionBroadcastChannelNUXesQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWQuickPromotionBroadcastChannelNUXes.entrypoint",["JSResourceForInteraction","MWQuickPromotionBroadcastChannelNUXesQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{broadcastChannelQueryRef:{parameters:r("MWQuickPromotionBroadcastChannelNUXesQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWQuickPromotionBroadcastChannelNUXes.react").__setRef("MWQuickPromotionBroadcastChannelNUXes.entrypoint")},s=e;l.default=s}),98);
__d("MWQuickPromotionBroadcastChannelNUXesContainer.react",["CometPlaceholder.react","CometRelay","MWQuickPromotionBroadcastChannelNUXes.entrypoint","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect;function m(e){var t=o("react-compiler-runtime").c(11),n=e.threadKey,a=e.threadName,i=e.userID,l=r("useCometRelayEntrypointContextualEnvironmentProvider")(),u=o("CometRelay").useEntryPointLoader(l,r("MWQuickPromotionBroadcastChannelNUXes.entrypoint")),c=u[0],m=u[1],p=u[2],_;t[0]!==m?(_=function(){m({})},t[0]=m,t[1]=_):_=t[1];var f=_,g,h;t[2]!==p||t[3]!==f?(g=function(){return f(),(function(){return p()})},h=[p,f],t[2]=p,t[3]=f,t[4]=g,t[5]=h):(g=t[4],h=t[5]),d(g,h);var y;return t[6]!==c||t[7]!==n||t[8]!==a||t[9]!==i?(y=c?s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWQuickPromotionBroadcastChannelNUXesContainer",children:s.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:c,props:{threadKey:n,threadName:a,userID:i}})}):null,t[6]=c,t[7]=n,t[8]=a,t[9]=i,t[10]=y):y=t[10],y}l.default=m}),98);
__d("MWQuickPromotionBroadcastChannelNuxQuery$Parameters",["MWQuickPromotionBroadcastChannelNuxQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWQuickPromotionBroadcastChannelNuxQuery_facebookRelayOperation"),metadata:{},name:"MWQuickPromotionBroadcastChannelNuxQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWQuickPromotionBroadcastChannelNux.entrypoint",["JSResourceForInteraction","MWQuickPromotionBroadcastChannelNuxQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{broadcastChannelQueryRef:{parameters:r("MWQuickPromotionBroadcastChannelNuxQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWQuickPromotionBroadcastChannelNux.react").__setRef("MWQuickPromotionBroadcastChannelNux.entrypoint")},s=e;l.default=s}),98);
__d("MWQuickPromotionBroadcastChannelNuxContainer.react",["CometPlaceholder.react","CometRelay","MWQuickPromotionBroadcastChannelNux.entrypoint","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect;function m(){var e=o("react-compiler-runtime").c(8),t=r("useCometRelayEntrypointContextualEnvironmentProvider")(),n=o("CometRelay").useEntryPointLoader(t,r("MWQuickPromotionBroadcastChannelNux.entrypoint")),a=n[0],i=n[1],l=n[2],u;e[0]!==i?(u=function(){i({})},e[0]=i,e[1]=u):u=e[1];var c=u,m,p;e[2]!==l||e[3]!==c?(m=function(){return c(),(function(){return l()})},p=[l,c],e[2]=l,e[3]=c,e[4]=m,e[5]=p):(m=e[4],p=e[5]),d(m,p);var _;return e[6]!==a?(_=a?s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWQuickPromotionBroadcastChannelNuxContainer",children:s.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:a,props:{}})}):null,e[6]=a,e[7]=_):_=e[7],_}l.default=m}),98);
__d("useMWCMReportThreadCoPresence",["Int64Hooks","LSCoPresenceAction","LSFactory","LSIntEnum","LSReportAndFetchAggregatedCoPresenceCountsForCommunityChatStoredProcedure","mwCMIsAnyCMThread","promiseDone","react-compiler-runtime","useCommunityFolder","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=o("react-compiler-runtime").c(8),a=t.parentThreadKey,l=t.threadKey,u=t.threadType,c=(s||(s=r("useReStore")))(),d;n[0]!==a?(d={parentThreadKey:a},n[0]=a,n[1]=d):d=n[1];var m=r("useCommunityFolder")(d),p,_;n[2]!==c||n[3]!==m||n[4]!==l||n[5]!==u?(p=function(){var t=r("mwCMIsAnyCMThread")(u);if(t&&m!=null)return r("promiseDone")(c.runInTransaction(function(t){return r("LSReportAndFetchAggregatedCoPresenceCountsForCommunityChatStoredProcedure")(r("LSFactory")(t),{action:(e||(e=o("LSIntEnum"))).ofNumber(r("LSCoPresenceAction").ENTER),folderId:m.folderId,threadId:l})},"readwrite",void 0,void 0,i.id+":40")),(function(){r("promiseDone")(c.runInTransaction(function(t){return r("LSReportAndFetchAggregatedCoPresenceCountsForCommunityChatStoredProcedure")(r("LSFactory")(t),{action:(e||(e=o("LSIntEnum"))).ofNumber(r("LSCoPresenceAction").EXIT),folderId:m.folderId,threadId:l})},"readwrite",void 0,void 0,i.id+":55"))})},_=[c,l,u,m],n[2]=c,n[3]=m,n[4]=l,n[5]=u,n[6]=p,n[7]=_):(p=n[6],_=n[7]),o("Int64Hooks").useEffectInt64(p,_)}l.default=u}),98);
__d("MWInboxDetail.react",["CometErrorBoundary.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRouteParams","I64","Int64Hooks","JSResourceForInteraction","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MDSM5CoreStyles","MWCMInboxInfoWithSubthreads.react","MWChatConnectionStatusCard.react","MWChatEncryptedBackupsQPLSource.enum","MWChatFocusComposerContext","MWChatTabFocusHandler","MWInboxHeader.react","MWInboxInfoPanelContext.react","MWInboxPinnedMessagesBanner.react","MWInboxSearchHeader.react","MWInboxThreadAndComposer.react","MWLSInThreadBannerComponent.react","MWLayoutCard.react","MWPActor.react","MWPConversationSearchContext.react","MWPNewMessageAnnouncementForScreenReaders.react","MWPVisibleMessageContext.react","MWProactiveWarningComponent.react","MWQuickPromotionBroadcastChannelNUXesContainer.react","MWQuickPromotionBroadcastChannelNuxContainer.react","MWResponsiveLayoutConstants","MWV2FileDropzone.react","MWXColumn.react","MWXRow.react","MWXRowItem.react","MetaConfig","ReQL","ReQLSuspense","cr:13469","cr:17333","gkx","isArmadillo","isE2EEConversationSearchEnabled","isMWNewSearchUXEnabled","lazyLoadComponent","nullthrows","react","react-compiler-runtime","useMWAriaLabelForThread","useMWCMReportThreadCoPresence","useMWPCloseConversationSearchSession","useMWPStartConversationSearch","useMWProactiveWarningPayload","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useCallback,p=d.useContext,_=d.useEffect,f=r("gkx")("24031"),g={communityRoot:{minWidth:"xczebs5",$$css:!0},dropzone:{zIndex:"x1ja2u2z",$$css:!0},focusHandler:{display:"x78zum5",flexGrow:"x1iyjqo2",$$css:!0},m5CommunityRoot:{backgroundColor:"xjbqb8w",overflowX:"xuce83p",overflowY:"x1bft6iq",$$css:!0},main:{display:"x78zum5",flexDirection:"xdt5ytf",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},messageList:{flexBasis:"x1ne3efk",flexGrow:"xgyuaek","@media (max-height: 280px)_overflowY":"xi1e3ro",$$css:!0},root:{backgroundColor:"xcrg951",fontSize:"x6prxxf",maxHeight:"x85a59c",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},threadContainer:{maxHeight:"x85a59c",overflowY:"x1odjw0f",$$css:!0}},h=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWRestrictReplacingIgnoreBannerNUXWrapper.react").__setRef("MWInboxDetail.react"));function y(t){var a,l=o("react-compiler-runtime").c(134),s=t.thread,d=r("useMWPCloseConversationSearchSession")(),m=s.threadKey,y=s.threadName,R=s.threadType;r("useMWCMReportThreadCoPresence")(s);var L=p(o("MWPConversationSearchContext.react").context),E;l[0]!==L?(E=r("nullthrows")(L),l[0]=L,l[1]=E):E=l[1];var k=E,I=k.isConversationSearchVisible,T=k.navigation,D=k.setIsConversationSearchVisible,x=k.setNavigation,$;l[2]!==D?($=function(){D(!0)},l[2]=D,l[3]=$):$=l[3];var P=$,N,M;l[4]!==d||l[5]!==T||l[6]!==P||l[7]!==x||l[8]!==m?(N=function(){if(!((T==null?void 0:T.targetThreadKey)!=null&&(u||(u=o("I64"))).equal(m,T.targetThreadKey)&&T.state===o("MWPConversationSearchContext.react").SearchNavigationState.NAVIGATED)){if(!T){d();return}e:switch(T.state){case o("MWPConversationSearchContext.react").SearchNavigationState.NAVIGATING:{(u||(u=o("I64"))).equal(m,T.targetThreadKey)&&(P(),x({state:o("MWPConversationSearchContext.react").SearchNavigationState.NAVIGATED,targetThreadKey:T.targetThreadKey}));break e}case o("MWPConversationSearchContext.react").SearchNavigationState.NAVIGATED:(u||(u=o("I64"))).equal(m,T.targetThreadKey)||(d(),x())}}},M=[d,P,m,T,x],l[4]=d,l[5]=T,l[6]=P,l[7]=x,l[8]=m,l[9]=N,l[10]=M):(N=l[9],M=l[10]),o("Int64Hooks").useEffectInt64(N,M);var w;l[11]!==R?(w=o("LSMessagingThreadTypeUtil").isArmadilloSecure(R),l[11]=R,l[12]=w):w=l[12];var A=w,F=o("CometRouteParams").useRouteParams(),O=F.search,B=String(O!=null?O:""),W=r("useMWPStartConversationSearch")(m),q,U;l[13]!==A||l[14]!==P||l[15]!==W||l[16]!==B?(q=function(){B!==""&&(W(B,A),P())},U=[A,P,W,B],l[13]=A,l[14]=P,l[15]=W,l[16]=B,l[17]=q,l[18]=U):(q=l[17],U=l[18]),_(q,U);var V=o("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),H=V.setVisibleMessage,G;l[19]!==R?(G=o("LSMessagingThreadTypeUtil").isGroup(R),l[19]=R,l[20]=G):G=l[20];var z=G,j=r("useMWAriaLabelForThread")(s),K;l[21]!==s?(K=o("LSThreadBitOffset").has(52,s),l[21]=s,l[22]=K):K=l[22];var Q=K,X;l[23]!==R?(X=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(R),l[23]=R,l[24]=X):X=l[24];var Y=X,J;l[25]!==R?(J=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(R),l[25]=R,l[26]=J):J=l[26];var Z=J,ee;l[27]!==R?(ee=o("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(R),l[27]=R,l[28]=ee):ee=l[28];var te=ee,ne=(e||(e=r("useReStore")))(),re=o("MWPActor.react").useActor(),oe=(a=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(ne.tables.participants,["contactId","isAdmin"]).getKeyRange(m).filter(v)},[ne,m],i.id+":261"))!=null?a:{contactId:(u||(u=o("I64"))).zero},ae;l[29]!==re||l[30]!==oe.contactId?(ae=(u||(u=o("I64"))).equal(oe.contactId,re),l[29]=re,l[30]=oe.contactId,l[31]=ae):ae=l[31];var ie=ae,le;l[32]!==R?(le=o("LSMessagingThreadTypeUtil").isUnjoinedDiscoverablePublicBroadcastChannel(R),l[32]=R,l[33]=le):le=l[33];var se=le,ue;l[34]!==R?(ue=o("LSMessagingThreadTypeUtil").isArmadilloSecure(R)?r("isE2EEConversationSearchEnabled")():!0,l[34]=R,l[35]=ue):ue=l[35];var ce=ue,de=o("MAWThreadCutover").useIsCutoverOpenThread(m),me=o("MAWThreadCutover").useIsDualThreadCutoverOpenThread(m),pe;l[36]===Symbol.for("react.memo_cache_sentinel")?(pe=r("isMWNewSearchUXEnabled")()&&!r("isE2EEConversationSearchEnabled")(),l[36]=pe):pe=l[36];var _e=pe,fe;l[37]!==s?(fe=o("LSThreadBitOffset").has(23,s),l[37]=s,l[38]=fe):fe=l[38];var ge=fe,he;l[39]!==s?(he=o("LSThreadBitOffset").has(106,s),l[39]=s,l[40]=he):he=l[40];var ye=he,Ce;l[41]!==s?(Ce=o("LSMessagingThreadTypeUtil").isOpenOrArmadilloFnFThread(s),l[41]=s,l[42]=Ce):Ce=l[42];var be=Ce,ve;l[43]!==ye||l[44]!==Z||l[45]!==be?(ve=ye&&(Z&&r("MetaConfig")._("105")||be),l[43]=ye,l[44]=Z,l[45]=be,l[46]=ve):ve=l[46];var Se=ve,Re=r("useMWProactiveWarningPayload")(void 0,s),Le;l[47]===Symbol.for("react.memo_cache_sentinel")?(Le="x78zum5 xdt5ytf x1iyjqo2 xs83m0k x1n2onr6",l[47]=Le):Le=l[47];var Ee;l[48]===Symbol.for("react.memo_cache_sentinel")?(Ee=[g.root,f&&g.m5CommunityRoot,r("gkx")("23433")&&g.communityRoot],l[48]=Ee):Ee=l[48];var ke;l[49]===Symbol.for("react.memo_cache_sentinel")?(ke="x78zum5 xdt5ytf x1iyjqo2 xs83m0k x1n2onr6",l[49]=ke):ke=l[49];var Ie;l[50]===Symbol.for("react.memo_cache_sentinel")?(Ie={className:"xfpmyvw x1u998qt x1vjfegm"},l[50]=Ie):Ie=l[50];var Te;l[51]!==s?(Te=c.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWInboxDetail_MessageList_Header",children:c.jsx(r("MWInboxHeader.react"),{thread:s})}),l[51]=s,l[52]=Te):Te=l[52];var De;l[53]!==Y||l[54]!==A||l[55]!==Re||l[56]!==m?(De=!A&&(Re!=null||Y)?null:c.jsx(r("MWLSInThreadBannerComponent.react"),{threadKey:m}),l[53]=Y,l[54]=A,l[55]=Re,l[56]=m,l[57]=De):De=l[57];var xe;l[58]!==z||l[59]!==Q?(xe=Q?c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWInboxDetail.RestrictReplacingIgnoreBanner",children:c.jsx(h,{isGroup:z})}):null,l[58]=z,l[59]=Q,l[60]=xe):xe=l[60];var $e;l[61]!==A||l[62]!==Re||l[63]!==s?($e=!A||r("isArmadillo")()?c.jsx(r("MWProactiveWarningComponent.react"),{payload:Re,thread:s}):null,l[61]=A,l[62]=Re,l[63]=s,l[64]=$e):$e=l[64];var Pe;l[65]!==d||l[66]!==ce||l[67]!==I||l[68]!==H||l[69]!==s?(Pe=!r("isMWNewSearchUXEnabled")()&&I&&ce?c.jsx(r("MWInboxSearchHeader.react"),{onClose:d,setVisibleMessage:H,thread:s},(u||(u=o("I64"))).to_string(s.threadKey)):null,l[65]=d,l[66]=ce,l[67]=I,l[68]=H,l[69]=s,l[70]=Pe):Pe=l[70];var Ne;l[71]!==Se||l[72]!==s?(Ne=Se&&c.jsx(r("MWInboxPinnedMessagesBanner.react"),{thread:s}),l[71]=Se,l[72]=s,l[73]=Ne):Ne=l[73];var Me;l[74]!==Te||l[75]!==De||l[76]!==xe||l[77]!==$e||l[78]!==Pe||l[79]!==Ne?(Me=c.jsxs("div",babelHelpers.extends({},Ie,{children:[Te,De,xe,$e,Pe,Ne]})),l[74]=Te,l[75]=De,l[76]=xe,l[77]=$e,l[78]=Pe,l[79]=Ne,l[80]=Me):Me=l[80];var we;l[81]===Symbol.for("react.memo_cache_sentinel")?(we="x78zum5 xdt5ytf x1iyjqo2 xs83m0k x1n2onr6",l[81]=we):we=l[81];var Ae;l[82]!==s.capabilities||l[83]!==s.capabilities2||l[84]!==s.capabilities3||l[85]!==s.capabilities4||l[86]!==s.capabilities5||l[87]!==s.threadKey||l[88]!==s.threadType?(Ae=n("cr:17333")&&c.jsx(n("cr:17333"),{source:r("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_QP,thread:{capabilities:s.capabilities,capabilities2:s.capabilities2,capabilities3:s.capabilities3,capabilities4:s.capabilities4,capabilities5:s.capabilities5,threadKey:s.threadKey,threadType:s.threadType}}),l[82]=s.capabilities,l[83]=s.capabilities2,l[84]=s.capabilities3,l[85]=s.capabilities4,l[86]=s.capabilities5,l[87]=s.threadKey,l[88]=s.threadType,l[89]=Ae):Ae=l[89];var Fe;l[90]!==s?(Fe=n("cr:13469")&&c.jsx(n("cr:13469"),{source:r("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_QP,thread:s}),l[90]=s,l[91]=Fe):Fe=l[91];var Oe;l[92]===Symbol.for("react.memo_cache_sentinel")?(Oe=c.jsx(r("MWChatConnectionStatusCard.react"),{}),l[92]=Oe):Oe=l[92];var Be;l[93]!==s?(Be=o("LSThreadBitOffset").has(56,s),l[93]=s,l[94]=Be):Be=l[94];var We=!Be,qe;l[95]!==s?(qe=c.jsx(r("MWInboxThreadAndComposer.react"),{thread:s}),l[95]=s,l[96]=qe):qe=l[96];var Ue;l[97]!==We||l[98]!==qe||l[99]!==s?(Ue=c.jsx(r("MWChatTabFocusHandler"),{xstyle:g.focusHandler,children:c.jsx(o("MWV2FileDropzone.react").MWV2FileDropzone,{isMediaOnly:We,thread:s,xstyle:g.dropzone,children:qe})}),l[97]=We,l[98]=qe,l[99]=s,l[100]=Ue):Ue=l[100];var Ve;l[101]!==Ae||l[102]!==Fe||l[103]!==Ue?(Ve=c.jsxs(o("CometPageletWithDiv.react").Placeholder,{className:we,fallback:null,name:"MWInboxDetail_MessageList_ThreadComposer",children:[Ae,Fe,Oe,Ue]}),l[101]=Ae,l[102]=Fe,l[103]=Ue,l[104]=Ve):Ve=l[104];var He;l[105]!==Me||l[106]!==Ve?(He=c.jsx(S,{children:c.jsxs(o("CometPageletWithDiv.react").Placeholder,{className:ke,fallback:null,name:"MWInboxDetail_MessageList",children:[Me,Ve]})}),l[105]=Me,l[106]=Ve,l[107]=He):He=l[107];var Ge;l[108]!==ge||l[109]!==de||l[110]!==me||l[111]!==s?(Ge=(!de||me||_e)&&ge?c.jsx(r("MWCMInboxInfoWithSubthreads.react"),{thread:s}):null,l[108]=ge,l[109]=de,l[110]=me,l[111]=s,l[112]=Ge):Ge=l[112];var ze;l[113]!==He||l[114]!==Ge?(ze=c.jsxs(r("MWXRow.react"),{expanding:!0,paddingHorizontal:0,paddingTop:0,spacing:0,xstyle:g.threadContainer,children:[He,Ge]}),l[113]=He,l[114]=Ge,l[115]=ze):ze=l[115];var je;l[116]!==j||l[117]!==ze?(je=c.jsx(r("MWXColumn.react"),{"aria-label":j,expanding:!0,role:"main",testid:void 0,xstyle:Ee,children:ze}),l[116]=j,l[117]=ze,l[118]=je):je=l[118];var Ke;l[119]!==s?(Ke=c.jsx(r("MWPNewMessageAnnouncementForScreenReaders.react"),{thread:s}),l[119]=s,l[120]=Ke):Ke=l[120];var Qe;l[121]!==se?(Qe=se&&c.jsx(r("CometErrorBoundary.react"),{fallback:b,children:c.jsx(r("MWQuickPromotionBroadcastChannelNuxContainer.react"),{})}),l[121]=se,l[122]=Qe):Qe=l[122];var Xe;l[123]!==oe.contactId||l[124]!==te||l[125]!==ie||l[126]!==m||l[127]!==y?(Xe=te&&ie&&m!=null&&y!=null&&c.jsx(r("CometErrorBoundary.react"),{fallback:C,children:c.jsx(r("MWQuickPromotionBroadcastChannelNUXesContainer.react"),{threadKey:m,threadName:y,userID:oe.contactId})}),l[123]=oe.contactId,l[124]=te,l[125]=ie,l[126]=m,l[127]=y,l[128]=Xe):Xe=l[128];var Ye;return l[129]!==je||l[130]!==Ke||l[131]!==Qe||l[132]!==Xe?(Ye=c.jsx(o("MWChatFocusComposerContext").MWChatFocusComposerContextProvider,{children:c.jsx(o("CometPageletWithDiv.react").Placeholder,{className:Le,fallback:null,name:"MWInboxDetail",children:c.jsxs(o("MWInboxInfoPanelContext.react").MWInboxInfoPanelProvider,{children:[je,Ke,Qe,Xe]})})}),l[129]=je,l[130]=Ke,l[131]=Qe,l[132]=Xe,l[133]=Ye):Ye=l[133],Ye}function C(){}function b(){}function v(e){var t=e.isAdmin;return!!t}function S(e){var t=o("react-compiler-runtime").c(5),n=e.children;if(r("MWLayoutCard.react")!=null){var a;return t[0]!==n?(a=c.jsx(r("MWLayoutCard.react"),{panel:o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL,xstyle:g.messageList,children:n}),t[0]=n,t[1]=a):a=t[1],a}var i;t[2]===Symbol.for("react.memo_cache_sentinel")?(i=[g.main,f&&o("MDSM5CoreStyles").MDSM5CoreStyles.pageSection],t[2]=i):i=t[2];var l;return t[3]!==n?(l=c.jsx(r("MWXRowItem.react"),{expanding:!0,xstyle:i,children:n}),t[3]=n,t[4]=l):l=t[4],l}l.default=y}),98);
__d("MWInboxInfoChannelCreatorProfileLink.react",["fbt","CometPageVerificationIcon.react","CurrentEnvironment","I64","LSContactBitOffset","MWAdminForBroadcastChannelUtils","MWXListCellPressable.react","MWXProfilePhoto.react","MWXText.react","MWXTextPairing.react","XCometProfileControllerRouteBuilder","getLSMediaContactProfilePictureUrl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d={creatorBadge:{display:"xt0psk2",marginInlineStart:"xdwrcjd",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(24),n=e.threadKey,a=o("MWAdminForBroadcastChannelUtils").useFetchBroadcastChannelCreator(n);if(a==null)return null;var i;if(t[0]!==a.id){var l;i=(l=r("XCometProfileControllerRouteBuilder").buildUri({id:(u||(u=o("I64"))).to_string(a.id)}).setDomain("www.facebook.com"))==null||(l=l.setProtocol("https"))==null?void 0:l.toString(),t[0]=a.id,t[1]=i}else i=t[1];var m=i,p=r("CurrentEnvironment").messengerdotcom?"_blank":"_self",_;t[2]!==a?(_=o("LSContactBitOffset").has(23,a!=null?a:{}),t[2]=a,t[3]=_):_=t[3];var f=_,g;t[4]!==a?(g=r("getLSMediaContactProfilePictureUrl")(a),t[4]=a,t[5]=g):g=t[5];var h;t[6]!==g?(h=c.jsx(r("MWXProfilePhoto.react"),{size:36,source:{uri:g}}),t[6]=g,t[7]=h):h=t[7];var y;t[8]!==a.name?(y=c.jsx(r("MWXText.react"),{type:"headline4",children:a.name}),t[8]=a.name,t[9]=y):y=t[9];var C;t[10]!==f?(C=f?c.jsx(r("CometPageVerificationIcon.react"),{size:"small",verificationBadge:"BLUE_VERIFIED",xstyle:d.creatorBadge}):null,t[10]=f,t[11]=C):C=t[11];var b;t[12]!==y||t[13]!==C?(b=c.jsxs(c.Fragment,{children:[y,C]}),t[12]=y,t[13]=C,t[14]=b):b=t[14];var v;t[15]===Symbol.for("react.memo_cache_sentinel")?(v=s._(/*BTDS*/"_j[\"Channel admin\",\"91d783db2fb886ee4801ae5e0a86e04c\",1]"),t[15]=v):v=t[15];var S;t[16]!==b?(S=c.jsx(r("MWXTextPairing.react"),{headline:b,level:4,meta:v}),t[16]=b,t[17]=S):S=t[17];var R;t[18]!==m?(R={target:p,url:m},t[18]=m,t[19]=R):R=t[19];var L;return t[20]!==R||t[21]!==h||t[22]!==S?(L=c.jsx(r("MWXListCellPressable.react"),{addOnStart:h,addOnStartVerticalAlign:"top",content:S,linkProps:R,size:"medium"}),t[20]=R,t[21]=h,t[22]=S,t[23]=L):L=t[23],L}l.default=m}),226);
__d("MWInboxInfoChannelPersonalInboxOptIn.react",["fbt","Int64Hooks","MWChannelsPersonalInboxOptInPage.react","MWInboxInfoButton.react","MWXIconAccountSwitch","MWXIconForListCell.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.pushPage,a=e.thread,i,l;t[0]!==n||t[1]!==a.threadKey?(i=function(){return n(function(e){return u.jsx(r("MWChannelsPersonalInboxOptInPage.react"),{onReturn:e.onReturn,threadKey:a.threadKey})})},l=[n,a.threadKey],t[0]=n,t[1]=a.threadKey,t[2]=i,t[3]=l):(i=t[2],l=t[3]);var c=o("Int64Hooks").useCallbackInt64(i,l),d,m;t[4]===Symbol.for("react.memo_cache_sentinel")?(d=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconAccountSwitch")}),m=s._(/*BTDS*/"Message from main profile"),t[4]=d,t[5]=m):(d=t[4],m=t[5]);var p;return t[6]!==c?(p=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:d,label:m,onPress:function(){return c()},subLabel:void 0}),t[6]=c,t[7]=p):p=t[7],p}l.default=c}),226);
__d("XCometEventCreateControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/events/create/",Object.freeze({default_is_online:!1,dialog_entry_point:"others"}),void 0),s=e;l.default=s}),98);
__d("XCometEventPermalinkControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/events/{event_id}/{?child_event_id}/",Object.freeze({active_tab:"about",show_created_event_toast:!1,hide_invite_flow_filter_groups:!1}),void 0),s=e;l.default=s}),98);
__d("MWInboxInfoEventsListSection.react",["fbt","GroupsCometChatsEngagementLogger","I64","LSCommunityBitOffset","MWCMGetValidId","MWInboxInfoSubPageHeader.react","MWLSThread","MWXButton.react","MWXCircleButton.react","MWXColumn.react","MWXColumnItem.react","MWXIconAppFacebook","MWXImage.react","MWXListCellPressable.react","MWXScrollableArea.react","MWXTextPairing.react","ReQL","ReQLSuspense","XCometEventCreateControllerRouteBuilder","XCometEventPermalinkControllerRouteBuilder","formatDate","react","react-compiler-runtime","useCommunityFolder","useGroupsCometChatsEngagementImpressionLogger","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=u||(u=o("react")),m=u,p=m.useCallback,_=m.useRef,f={eventImage:{borderStartStartRadius:"x1rgw4pv",borderStartEndRadius:"x1vjm0to",borderEndEndRadius:"xnqoqkk",borderEndStartRadius:"x16lu3ki",marginInlineEnd:"xbmvrgn",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(38),n=e.commonLoggingData,a=e.event,i=a.eventId,l=a.eventName,u=a.eventPictureUrl,m=a.eventPictureUrlFallback,p=a.numGoingUsers,_=a.numInterestedUsers,g=a.startTimeMs,h;t[0]!==p?(h=(c||(c=o("I64"))).to_string(p),t[0]=p,t[1]=h):h=t[1];var y=h,C;t[2]!==_?(C=(c||(c=o("I64"))).to_string(_),t[2]=_,t[3]=C):C=t[3];var b=C,v=u!=null?u:m,S,R;if(t[4]!==g){S=g!=null?(c||(c=o("I64"))).to_float(g):0;var L=new Date(S),E=r("formatDate")(L,"M d"),k=r("formatDate")(L,"g:ia");R=s._(/*BTDS*/"{Event start day} at {Event start time}",[s._param("Event start day",E),s._param("Event start time",k)]),t[4]=g,t[5]=S,t[6]=R}else S=t[5],R=t[6];var I=R,T=S<=Date.now()&&S!==0,D;t[7]!==y?(D=s._(/*BTDS*/"_j{\"*\":\"{number} went\",\"_1\":\"1 went\"}",[s._plural(Number(y),"number")]),t[7]=y,t[8]=D):D=t[8];var x=D,$;if(t[9]!==T||t[10]!==y||t[11]!==b||t[12]!==x){var P=s._(/*BTDS*/"_j{\"*\":\"{number} going\",\"_1\":\"1 going\"}",[s._plural(Number(y),"number")]),N=s._(/*BTDS*/"_j{\"*\":\"{number} interested\",\"_1\":\"1 interested\"}",[s._plural(Number(b),"number")]);$=T?x:P.toString()+" \u2022\xA0"+N.toString(),t[9]=T,t[10]=y,t[11]=b,t[12]=x,t[13]=$}else $=t[13];var M=$,w;if(t[14]!==i){var A;w=(A=r("XCometEventPermalinkControllerRouteBuilder").buildUri({event_id:(c||(c=o("I64"))).to_string(i)}).setProtocol("https"))==null||(A=A.setDomain("www.facebook.com"))==null?void 0:A.toString(),t[14]=i,t[15]=w}else w=t[15];var F=w,O;t[16]!==M||t[17]!==l||t[18]!==I?(O=d.jsx(r("MWXTextPairing.react"),{body:I,bodyColor:"secondary",bodyLineLimit:2,headline:l,level:4,meta:M}),t[16]=M,t[17]=l,t[18]=I,t[19]=O):O=t[19];var B=O,W;t[20]!==v?(W=d.jsx(r("MWXImage.react"),{height:50,src:v,xstyle:f.eventImage}),t[20]=v,t[21]=W):W=t[21];var q=W,U;t[22]===Symbol.for("react.memo_cache_sentinel")?(U=s._(/*BTDS*/"Go to Facebook event"),t[22]=U):U=t[22];var V;t[23]!==F?(V={target:"_blank",url:F},t[23]=F,t[24]=V):V=t[24];var H;t[25]!==n||t[26]!==i?(H=function(){o("GroupsCometChatsEngagementLogger").log(babelHelpers.extends({},n,{action:"tap",client_extras:{event_id:(c||(c=o("I64"))).to_string(i)},event:"transition_to_fb_group",parent_surface:"thread_view",source:"event_row",surface:"unknown"}))},t[25]=n,t[26]=i,t[27]=H):H=t[27];var G;t[28]!==V||t[29]!==H?(G=d.jsx(r("MWXCircleButton.react"),{"aria-label":U,icon:r("MWXIconAppFacebook"),linkProps:V,onPress:H,size:40}),t[28]=V,t[29]=H,t[30]=G):G=t[30];var z;t[31]!==i?(z=(c||(c=o("I64"))).to_string(i),t[31]=i,t[32]=z):z=t[32];var j="mwcm-event-row-"+z,K;return t[33]!==B||t[34]!==q||t[35]!==G||t[36]!==j?(K=d.jsx(r("MWXListCellPressable.react"),{addOnEnd:G,addOnStart:q,content:B,size:"medium",testid:void 0}),t[33]=B,t[34]=q,t[35]=G,t[36]=j,t[37]=K):K=t[37],K}function h(e){var t=Array.from(e).sort(function(e,t){var n,r,a,i;return(c||(c=o("I64"))).lt((n=e==null?void 0:e.startTimeMs)!=null?n:(c||(c=o("I64"))).zero,(r=t==null?void 0:t.startTimeMs)!=null?r:(c||(c=o("I64"))).zero)?-1:(c||(c=o("I64"))).gt((a=e==null?void 0:e.startTimeMs)!=null?a:(c||(c=o("I64"))).zero,(i=t==null?void 0:t.startTimeMs)!=null?i:(c||(c=o("I64"))).zero)?1:0}),n=[],r=[];return t.forEach(function(e){if(e==null)return e;var t=e.startTimeMs!=null?(c||(c=o("I64"))).to_float(e.startTimeMs):-1,a=t<=Date.now()&&t!==-1;a?n.push(e):r.push(e)}),r.concat(n)}function y(t){var n,a=t.loggingParentSurface,l=t.loggingSource,u=t.onReturn,m=t.threadKey,f=(e||(e=r("useReStore")))(),y=o("MWLSThread").useThreadExn(m),C=r("useCommunityFolder")(y),b=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(f.tables.cm_channel_events.index("eventsInThread")).getKeyRange(m).map(function(e){return o("ReQLSuspense").first(o("ReQL").fromTableAscending(f.tables.fb_events).getKeyRange(e.eventId),i.id+":242")})},[f,m],i.id+":237"),v=C!=null&&o("LSCommunityBitOffset").has(52,C),S=_(!1),R=p(function(){return S.current=!0,u()},[u]),L=s._(/*BTDS*/"Events"),E=!S.current&&v,k=(n=r("XCometEventCreateControllerRouteBuilder").buildUri({group_id:C!=null?(c||(c=o("I64"))).to_string(C.fbGroupId):void 0,group_thread_id:(c||(c=o("I64"))).to_string(y.threadKey)}).setProtocol("https"))==null||(n=n.setDomain("www.facebook.com"))==null?void 0:n.toString(),I={group_id:o("MWCMGetValidId").MWCMHasValidFbGroupId(C==null?void 0:C.fbGroupId)?(c||(c=o("I64"))).to_string(C.fbGroupId):null,surface:"event_list",thread_id:(c||(c=o("I64"))).to_string(m)},T=h(b),D=r("useGroupsCometChatsEngagementImpressionLogger")(babelHelpers.extends({},I,{client_extras:{event_id_list:T.map(function(e){return(c||(c=o("I64"))).to_string(e.eventId)}).join(",")},event:"event_list_rendered",parent_surface:a,source:l}));return d.jsxs("div",{className:"x78zum5 x1r8uery xdt5ytf x1iyjqo2 xs83m0k x2lwn1j",children:[d.jsx(r("MWInboxInfoSubPageHeader.react"),{onPressBack:R,title:L}),d.jsx("div",{className:"x78zum5 xdt5ytf xs83m0k x2lwn1j",children:d.jsx(r("MWXScrollableArea.react"),{expanding:!0,children:d.jsx(r("MWXColumn.react"),{hasDividers:!1,paddingHorizontal:8,ref:D,spacing:20,children:T.map(function(e){return d.jsx(r("MWXColumnItem.react"),{children:d.jsx(g,{commonLoggingData:I,event:e})},(c||(c=o("I64"))).to_string(e.eventId))})})})}),E&&d.jsx("div",{className:"xyamay9 x1l90r2v xf7dkkf xv54qhq",children:d.jsx(r("MWXButton.react"),{label:s._(/*BTDS*/"Create new event"),linkProps:{target:"_blank",url:k},onPress:function(){o("GroupsCometChatsEngagementLogger").log(babelHelpers.extends({},I,{action:"tap",event:"create_event_clicked",parent_surface:"thread_settings",source:"create_new_event_button"}))},type:"secondary"})})]})}y.displayName=y.name+" [from "+i.id+"]",l.default=y}),226);
__d("MWInboxInfoViewArchivedOpenThread.react",["fbt","I64","LSMessagingThreadTypeUtil","MAWThreadCutover","MWInboxInfoButton.react","MWXIconBox","MWXIconForListCell.react","MWXIconMessage","gkx","react","react-compiler-runtime","requireDeferred","useMWEntrypoint","useMWRedirectToOpenThreadOfDualThread"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=r("requireDeferred")("MessageThreadEventsFalcoEvent").__setRef("MWInboxInfoViewArchivedOpenThread.react"),m=r("gkx")("12491"),p=s._(/*BTDS*/"View archived chat");function _(e){var t=o("react-compiler-runtime").c(10),n=e.thread,a=n.threadKey,i=n.threadType,l=o("MAWThreadCutover").useIsCutoverSecureThread(a),s=r("useMWRedirectToOpenThreadOfDualThread")(a),_=r("useMWEntrypoint")(),f;t[0]!==i?(f=o("LSMessagingThreadTypeUtil").isArmadilloSecure(i),t[0]=i,t[1]=f):f=t[1];var g=f,h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=c.jsx(r("MWXIconForListCell.react"),{color:m?"primary":void 0,icon:r(m?"MWXIconBox":"MWXIconMessage")}),t[2]=h):h=t[2];var y;return t[3]!==_||t[4]!==l||t[5]!==g||t[6]!==s||t[7]!==a||t[8]!==i?(y=c.jsx(r("MWInboxInfoButton.react"),{addOnStart:h,label:p,onPress:function(){d.onReady(function(e){return e.log(function(){return{entry_point:_,event_type:"secret_conversation_post_cutover_thread_detail_entry_point_click_event",is_cutover:l,thread_id:(u||(u=o("I64"))).to_string(a),thread_type:u.to_string(i),transport_type:g?"ACT":"MI"}})}),s()},testid:void 0}),t[3]=_,t[4]=l,t[5]=g,t[6]=s,t[7]=a,t[8]=i,t[9]=y):y=t[9],y}l.default=_}),226);
__d("MWInboxInfoViewPinnedMessages.react",["fbt","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWBroadcastChannelLoggingShapes","MWInboxInfoButton.react","MWLogBroadcastChannelFalcoEvent","MWPBumpEntityKey","MWXIconForListCell.react","MWXIconPushpin","react","react-compiler-runtime","useMWXLazyDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"View pinned messages"),d=r("JSResourceForInteraction")("MWPinnedMessagesDialog.react").__setRef("MWInboxInfoViewPinnedMessages.react");function m(e){var t=o("react-compiler-runtime").c(13),n=e.thread,a=r("useMWXLazyDialog")(d),i=a[0],l;t[0]!==n.threadKey||t[1]!==n.threadType?(l={eventName:"open_view_pinned_messages_dialog",threadKey:n.threadKey,threadType:n.threadType},t[0]=n.threadKey,t[1]=n.threadType,t[2]=l):l=t[2];var s=l,m;t[3]!==n.threadType?(m=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(n.threadType),t[3]=n.threadType,t[4]=m):m=t[4];var p=m,_;t[5]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconPushpin")}),t[5]=_):_=t[5];var f;t[6]!==p||t[7]!==i||t[8]!==n.threadKey?(f=function(){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","view_pinned_messages"),p&&o("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent(babelHelpers.extends({},o("MWBroadcastChannelLoggingShapes").VIEW_PINNED_MESSAGES_FROM_THREAD_DETAIL,{threadFbid:n.threadKey})),i({threadKey:n.threadKey})},t[6]=p,t[7]=i,t[8]=n.threadKey,t[9]=f):f=t[9];var g;return t[10]!==s||t[11]!==f?(g=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:_,label:c,loggingEvent:s,onPress:f,testid:void 0}),t[10]=s,t[11]=f,t[12]=g):g=t[12],g}l.default=m}),226);
__d("MWInboxInfoGroupInfoSection.react",["LSCommunityBitOffset","MWBroadcastChannelBestPracticesMenuItem.react","MWCMInboxInfoGroupEventsButton.react","MWCMInboxInfoGroupLink.react","MWCMInboxInfoMemberRequests.react","MWCMSubthreadlistMenuItem.react","MWInboxInfoChannelCreatorProfileLink.react","MWInboxInfoChannelPersonalInboxOptIn.react","MWInboxInfoViewArchivedOpenThread.react","MWInboxInfoViewPinnedMessages.react","MWPActor.react","cr:3773","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(54),a=e.pushPage,i=e.thread,l=e.utilities,u=l.folder,d=l.inviteLink,m=l.isAdmin,p=l.isChannel,_=l.isSMCC,f=l.shouldShowPinnedMessagesLink,g=l.shouldShowViewArchivedOpenThread,h=l.showCMMemberRequestsMenuItem,y=l.showPublicChatMemberRequests,C=l.showSubthreadListButton,b;t[0]!==m||t[1]!==p?(b=p&&m&&o("MWPActor.react").isAPPlus(),t[0]=m,t[1]=p,t[2]=b):b=t[2];var v=b,S;t[3]!==m||t[4]!==p?(S=p&&m&&o("MWPActor.react").isPromode(),t[3]=m,t[4]=p,t[5]=S):S=t[5];var R=S,L;t[6]!==p||t[7]!==i?(L=p?s.jsx(r("MWInboxInfoChannelCreatorProfileLink.react"),{threadKey:i.threadKey},"creator-profile"):null,t[6]=p,t[7]=i,t[8]=L):L=t[8];var E;t[9]!==v||t[10]!==a||t[11]!==i?(E=v?s.jsx(r("MWInboxInfoChannelPersonalInboxOptIn.react"),{pushPage:a,thread:i},"channel-personal-inbox"):null,t[9]=v,t[10]=a,t[11]=i,t[12]=E):E=t[12];var k;t[13]!==u?(k=u!=null&&o("LSCommunityBitOffset").has(3,u)?s.jsx(r("MWCMInboxInfoGroupLink.react"),{folder:u},"group-link"):null,t[13]=u,t[14]=k):k=t[14];var I;t[15]!==C||t[16]!==i?(I=C?s.jsx(r("MWCMSubthreadlistMenuItem.react"),{threadKey:i.threadKey},"subthreads-button"):null,t[15]=C,t[16]=i,t[17]=I):I=t[17];var T=d!=null?d:null,D;t[18]!==u||t[19]!==_||t[20]!==a||t[21]!==i?(D=u!=null&&!_?s.jsx(r("MWCMInboxInfoGroupEventsButton.react"),{pushPage:a,threadKey:i.threadKey},"events-button"):null,t[18]=u,t[19]=_,t[20]=a,t[21]=i,t[22]=D):D=t[22];var x;t[23]!==f||t[24]!==i?(x=f?s.jsx(r("MWInboxInfoViewPinnedMessages.react"),{thread:i},"pin"):null,t[23]=f,t[24]=i,t[25]=x):x=t[25];var $;t[26]!==g||t[27]!==i?($=g?s.jsx(r("MWInboxInfoViewArchivedOpenThread.react"),{thread:i},"archived-open-thread"):null,t[26]=g,t[27]=i,t[28]=$):$=t[28];var P;t[29]!==a||t[30]!==y||t[31]!==i?(P=y&&n("cr:3773")!=null?s.jsx(n("cr:3773"),{pushPage:a,thread:i},"reqs"):null,t[29]=a,t[30]=y,t[31]=i,t[32]=P):P=t[32];var N;t[33]!==a||t[34]!==h||t[35]!==i?(N=h?s.jsx(r("MWCMInboxInfoMemberRequests.react"),{pushPage:a,thread:i},"cm-member-requests"):null,t[33]=a,t[34]=h,t[35]=i,t[36]=N):N=t[36];var M;t[37]!==v||t[38]!==R||t[39]!==a||t[40]!==i?(M=v||R?s.jsx(r("MWBroadcastChannelBestPracticesMenuItem.react"),{pushPage:a,thread:i},"channel-best-practices"):null,t[37]=v,t[38]=R,t[39]=a,t[40]=i,t[41]=M):M=t[41];var w;t[42]!==$||t[43]!==P||t[44]!==N||t[45]!==M||t[46]!==L||t[47]!==E||t[48]!==k||t[49]!==I||t[50]!==T||t[51]!==D||t[52]!==x?(w=[L,E,k,I,T,D,x,$,P,N,M],t[42]=$,t[43]=P,t[44]=N,t[45]=M,t[46]=L,t[47]=E,t[48]=k,t[49]=I,t[50]=T,t[51]=D,t[52]=x,t[53]=w):w=t[53];var A=w,F=A.some(c);return F?A:null}function c(e){return e!=null}l.default=u}),98);
__d("MWXIconShield",["MWXSvgIcon","SVGIcon","cr:22487","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22487")),r("gkx")("23219"));l.default=e}),98);
__d("MWInboxInfoLimitSharing.react",["fbt","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWInboxInfoButton.react","MWXIconForListCell.react","MWXIconShield","coerceMessagingThreadTypeToLSThreadType","deferredLoadComponent","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=r("requireDeferred")("MessagingAiAgentInteractionsFalcoEvent").__setRef("MWInboxInfoLimitSharing.react"),m=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInboxInfoLimitSharingPage.react").__setRef("MWInboxInfoLimitSharing.react"));function p(e){var t=o("react-compiler-runtime").c(20),n=e.pushPage,a=e.thread,i;t[0]!==a.threadType?(i=o("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType),t[0]=a.threadType,t[1]=i):i=t[1];var l=i,p,_;t[2]!==l||t[3]!==a.threadKey||t[4]!==a.threadType?(p=function(){d.onReady(function(e){return e.log(function(){return{action_type:1,is_e2ee:l,selected_item:"THREAD_DETAILS_MESSAGE_PERMISSION",thread_id:(u||(u=o("I64"))).to_string(a.threadKey),thread_type:r("coerceMessagingThreadTypeToLSThreadType")(a.threadType),view_name:2}})})},_=[l,a.threadKey,a.threadType],t[2]=l,t[3]=a.threadKey,t[4]=a.threadType,t[5]=p,t[6]=_):(p=t[5],_=t[6]);var f=o("Int64Hooks").useCallbackInt64(p,_),g;t[7]!==f?(g={onImpressionEnd:f},t[7]=f,t[8]=g):g=t[8];var h=r("useSinglePartialViewImpression")(g),y;t[9]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Message permissions"),t[9]=y):y=t[9];var C=y,b;t[10]!==l||t[11]!==n||t[12]!==a?(b=function(){d.onReady(function(e){return e.log(function(){return{action_type:0,is_e2ee:l,selected_item:"THREAD_DETAILS_MESSAGE_PERMISSION",thread_id:(u||(u=o("I64"))).to_string(a.threadKey),thread_type:r("coerceMessagingThreadTypeToLSThreadType")(a.threadType),view_name:2}})}),n(function(e){var t=e.onReturn;return c.jsx(m,{onReturn:t,thread:a})})},t[10]=l,t[11]=n,t[12]=a,t[13]=b):b=t[13];var v=b,S;t[14]===Symbol.for("react.memo_cache_sentinel")?(S=c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconShield")}),t[14]=S):S=t[14];var R;t[15]!==v?(R=function(){return v()},t[15]=v,t[16]=R):R=t[16];var L;return t[17]!==h||t[18]!==R?(L=c.jsx(r("MWInboxInfoButton.react"),{addOnStart:S,label:C,onPress:R,ref:h}),t[17]=h,t[18]=R,t[19]=L):L=t[19],L}l.default=p}),226);
__d("MWInboxInfoLimitSharingPage.react",["fbt","FBLogger","I64","Int64Hooks","LSFactory","LSMessagingThreadTypeUtil","LSOptimisticSetLimitSharingStoredProcedure","MWInboxInfoSubPageHeader.react","MWXColumn.react","MWXColumnItem.react","MWXLink.react","MWXListCell.react","MWXSwitch.react","MWXText.react","MWXTextPairing.react","coerceMessagingThreadTypeToLSThreadType","promiseDone","react","react-compiler-runtime","requireDeferred","useJSON","useReStore","useSinglePartialViewImpression","useThreadMetadata"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m=c.useId,p=r("requireDeferred")("MessagingAiAgentInteractionsFalcoEvent").__setRef("MWInboxInfoLimitSharingPage.react");function _(t){var n,a=o("react-compiler-runtime").c(43),l=t.onReturn,c=t.thread,_=m(),f=(e||(e=r("useReStore")))(),g=r("useThreadMetadata")(c.threadKey),h;a[0]!==c.threadType?(h=o("LSMessagingThreadTypeUtil").isArmadilloSecure(c.threadType),a[0]=c.threadType,a[1]=h):h=a[1];var y=h,C,b;a[2]!==y||a[3]!==c.threadKey||a[4]!==c.threadType?(C=function(){p.onReady(function(e){return e.log(function(){return{action_type:1,is_e2ee:y,thread_id:(u||(u=o("I64"))).to_string(c.threadKey),thread_type:r("coerceMessagingThreadTypeToLSThreadType")(c.threadType),view_name:80}})})},b=[y,c.threadKey,c.threadType],a[2]=y,a[3]=c.threadKey,a[4]=c.threadType,a[5]=C,a[6]=b):(C=a[5],b=a[6]);var v=o("Int64Hooks").useCallbackInt64(C,b),S;a[7]!==v?(S={onImpressionEnd:v},a[7]=v,a[8]=S):S=a[8];var R=r("useSinglePartialViewImpression")(S),L=(n=r("useJSON")(g!=null?g:"{}"))!=null?n:[];L==null&&r("FBLogger")("cm_web").mustfix("Thread metadata can't be null");var E=L==null?void 0:L.is_limit_sharing_enabled,k;a[9]!==f||a[10]!==E||a[11]!==y||a[12]!==c.threadKey||a[13]!==c.threadType?(k=function(){p.onReady(function(e){return e.log(function(){return{action_type:0,is_e2ee:y,selected_item:E?"MESSAGE_PERMISSIONS_OFF":"MESSAGE_PERMISSIONS_ON",thread_id:(u||(u=o("I64"))).to_string(c.threadKey),thread_type:r("coerceMessagingThreadTypeToLSThreadType")(c.threadType),view_name:80}})}),r("promiseDone")(f.runInTransaction(function(e){return r("LSOptimisticSetLimitSharingStoredProcedure")(r("LSFactory")(e),{isLimitSharingEnabled:!E,threadKey:c.threadKey})},"readwrite",void 0,void 0,i.id+":110"))},a[9]=f,a[10]=E,a[11]=y,a[12]=c.threadKey,a[13]=c.threadType,a[14]=k):k=a[14];var I=k,T;a[15]===Symbol.for("react.memo_cache_sentinel")?(T=s._(/*BTDS*/"Message permissions"),a[15]=T):T=a[15];var D;a[16]!==l?(D=d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWInboxInfoSubPageHeader.react"),{onPressBack:l,title:T})}),a[16]=l,a[17]=D):D=a[17];var x;a[18]!==I?(x=function(){return I()},a[18]=I,a[19]=x):x=a[19];var $=!E,P;a[20]!==_||a[21]!==$||a[22]!==x?(P=d.jsx(r("MWXSwitch.react"),{"aria-labelledby":_,onClick:x,value:$}),a[20]=_,a[21]=$,a[22]=x,a[23]=P):P=a[23];var N;a[24]===Symbol.for("react.memo_cache_sentinel")?(N=s._(/*BTDS*/"Allow message sharing"),a[24]=N):N=a[24];var M;a[25]===Symbol.for("react.memo_cache_sentinel")?(M=s._(/*BTDS*/"Everyone in this chat can share messages with Meta AI or auto-save photos. These features are not available on some versions of Messenger."),a[25]=M):M=a[25];var w;a[26]!==y||a[27]!==c.threadKey||a[28]!==c.threadType?(w=function(){p.onReady(function(e){return e.log(function(){return{action_type:0,is_e2ee:y,selected_item:"MESSAGE_PERMISSIONS_LEARN_MORE",thread_id:(u||(u=o("I64"))).to_string(c.threadKey),thread_type:r("coerceMessagingThreadTypeToLSThreadType")(c.threadType),view_name:80}})})},a[26]=y,a[27]=c.threadKey,a[28]=c.threadType,a[29]=w):w=a[29];var A;a[30]===Symbol.for("react.memo_cache_sentinel")?(A=s._(/*BTDS*/"Learn more"),a[30]=A):A=a[30];var F;a[31]!==w?(F=d.jsxs(r("MWXText.react"),{color:"secondary",type:"body4",children:[M," ",d.jsx(r("MWXLink.react"),{color_DEPRECATED:"blueLink",href:"https://www.facebook.com/help/messenger-app/2016594885417423?ref=ipl",onClick:w,target:"_blank",children:A})]}),a[31]=w,a[32]=F):F=a[32];var O;a[33]!==_||a[34]!==F?(O=d.jsx(r("MWXTextPairing.react"),{headline:N,headlineId:_,level:4,meta:F}),a[33]=_,a[34]=F,a[35]=O):O=a[35];var B;a[36]!==P||a[37]!==O?(B=d.jsx(r("MWXColumnItem.react"),{paddingHorizontal:16,children:d.jsx(r("MWXColumnItem.react"),{children:d.jsx(r("MWXListCell.react"),{addOnEnd:P,addOnEndVerticalAlign:"top",content:O})})}),a[36]=P,a[37]=O,a[38]=B):B=a[38];var W;return a[39]!==R||a[40]!==B||a[41]!==D?(W=d.jsxs(r("MWXColumn.react"),{ref:R,spacing:12,children:[D,B]}),a[39]=R,a[40]=B,a[41]=D,a[42]=W):W=a[42],W}l.default=_}),226);
__d("MWInboxInfoMemberList.react",["fbt","LSMessagingThreadTypeUtil","MWAddMemberToGroupListCell.react","MWGroupLimitContainer.react","MWGroupMembershipListItem","MWLSGroupMembershipMemberList.react","MWPParticipantsAndContactsForThread_DO_NOT_USE_THIS_WILL_KILL_PERFORMANCE","MWXListCell.react","MWXText.react","canMWAddMemberToGroupThread","isFeatureLimitEnabled","mwCMIsAnyCMThread","react","react-compiler-runtime","useIsReadOnlyFeatureLimitedWithThreadType","withCometPlaceholder"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(6),n=e.thread,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=u.jsx(r("MWXListCell.react"),{content:u.jsx(r("MWXText.react"),{color:"secondary",testid:void 0,type:"body4",children:s._(/*BTDS*/"You've reached the maximum number of members. To add another, please remove someone from the group.")}),size:"medium"}),t[0]=a):a=t[0];var i;t[1]!==n?(i=u.jsx(r("MWAddMemberToGroupListCell.react"),{thread:n}),t[1]=n,t[2]=i):i=t[2];var l;return t[3]!==i||t[4]!==n?(l=u.jsx(r("MWGroupLimitContainer.react"),{groupLimitReachedContent:a,thread:n,children:i}),t[3]=i,t[4]=n,t[5]=l):l=t[5],l}function d(e){var t=o("react-compiler-runtime").c(19),n=e.thread,a;t[0]!==n.threadType?(a=o("LSMessagingThreadTypeUtil").isArmadilloSecure(n.threadType),t[0]=n.threadType,t[1]=a):a=t[1];var i=a,l=r("useIsReadOnlyFeatureLimitedWithThreadType")(n.threadType)&&(!i||r("isFeatureLimitEnabled")()),s;t[2]!==l||t[3]!==n?(s=r("canMWAddMemberToGroupThread")(n,l),t[2]=l,t[3]=n,t[4]=s):s=t[4];var d=s,p=o("MWPParticipantsAndContactsForThread_DO_NOT_USE_THIS_WILL_KILL_PERFORMANCE").useValue(n),_;t[5]!==n.threadType?(_=r("mwCMIsAnyCMThread")(n.threadType),t[5]=n.threadType,t[6]=_):_=t[6];var f=!_,g;t[7]!==p?(g=p.map(m),t[7]=p,t[8]=g):g=t[8];var h;t[9]!==f||t[10]!==g||t[11]!==n?(h=u.jsx(r("MWLSGroupMembershipMemberList.react"),{disableScroll:!0,participantsAndContacts:g,showAdmodIndicator:f,showAdmodsOnly:!1,showHostsOnly:!1,showInvitedByViewerOnly:!1,thread:n}),t[9]=f,t[10]=g,t[11]=n,t[12]=h):h=t[12];var y;t[13]!==d||t[14]!==n?(y=d?u.jsx(c,{thread:n}):null,t[13]=d,t[14]=n,t[15]=y):y=t[15];var C;return t[16]!==h||t[17]!==y?(C=u.jsxs(u.Fragment,{children:[h,y]}),t[16]=h,t[17]=y,t[18]=C):C=t[18],C}function m(e){var t=e[0],n=e[1];return{contact:n,participant:t,type:o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact}}var p=o("withCometPlaceholder").withCometPlaceholder(d,null,"MWInboxInfoMemberListInternal");l.default=p}),226);
__d("MWInboxInfoReadReceipts.react",["fbt","MWInboxInfoButton.react","MWXIconEye","MWXIconForListCell.react","deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay","useMWIsReadReceiptsDisabledForThread","useMWReadReceiptsCanBeDisabledForThread"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWInboxInfoReadReceiptsPage.react").__setRef("MWInboxInfoReadReceipts.react"));function d(e){var t=o("react-compiler-runtime").c(12),n=e.pushPage,a=e.thread,i=r("useMWIsReadReceiptsDisabledForThread")(a.threadKey),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=s._(/*BTDS*/"Read receipts"),t[0]=l):l=t[0];var d=l,m;t[1]!==n||t[2]!==a.threadKey?(m=function(){n(function(e){var t=e.onReturn;return u.jsx(c,{onReturn:t,threadKey:a.threadKey})})},t[1]=n,t[2]=a.threadKey,t[3]=m):m=t[3];var p=m;if(!r("useMWReadReceiptsCanBeDisabledForThread")(a))return null;var _;t[4]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconEye")}),t[4]=_):_=t[4];var f;t[5]!==p?(f=function(){return p()},t[5]=p,t[6]=f):f=t[6];var g;t[7]!==i?(g=i?s._(/*BTDS*/"Off"):s._(/*BTDS*/"On"),t[7]=i,t[8]=g):g=t[8];var h;return t[9]!==f||t[10]!==g?(h=u.jsx(r("MWInboxInfoButton.react"),{addOnStart:_,label:d,onPress:f,subLabel:g}),t[9]=f,t[10]=g,t[11]=h):h=t[11],h}l.default=d}),226);
__d("MWInboxInfoReadReceiptsPage.react",["fbt","MWInboxInfoSubPageHeader.react","MWXColumn.react","MWXColumnItem.react","MWXListCell.react","MWXSwitch.react","MWXText.react","MWXTextPairing.react","react","react-compiler-runtime","useMWReadReceiptsPropsForThread"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useId;function d(e){var t=o("react-compiler-runtime").c(24),n=e.onReturn,a=e.threadKey,i=r("useMWReadReceiptsPropsForThread")(a),l=i.content,d=i.isReadReceiptsDisabled,m=i.onClick,p=c(),_=c(),f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=s._(/*BTDS*/"Read receipts"),t[0]=f):f=t[0];var g;t[1]!==n?(g=u.jsx(r("MWXColumnItem.react"),{children:u.jsx(r("MWInboxInfoSubPageHeader.react"),{onPressBack:n,title:f})}),t[1]=n,t[2]=g):g=t[2];var h;t[3]!==d||t[4]!==m?(h=function(){return m(!d)},t[3]=d,t[4]=m,t[5]=h):h=t[5];var y=!d,C;t[6]!==_||t[7]!==p||t[8]!==h||t[9]!==y?(C=u.jsx(r("MWXSwitch.react"),{"aria-describedby":_,"aria-labelledby":p,onClick:h,value:y}),t[6]=_,t[7]=p,t[8]=h,t[9]=y,t[10]=C):C=t[10];var b;t[11]===Symbol.for("react.memo_cache_sentinel")?(b=s._(/*BTDS*/"Show read receipts"),t[11]=b):b=t[11];var v;t[12]!==_||t[13]!==l?(v=u.jsx(r("MWXText.react"),{color:"secondary",type:"body4",children:u.jsx("span",{id:_,children:l})}),t[12]=_,t[13]=l,t[14]=v):v=t[14];var S;t[15]!==p||t[16]!==v?(S=u.jsx(r("MWXTextPairing.react"),{headline:b,headlineId:p,level:4,meta:v}),t[15]=p,t[16]=v,t[17]=S):S=t[17];var R;t[18]!==C||t[19]!==S?(R=u.jsx(r("MWXColumnItem.react"),{paddingHorizontal:16,children:u.jsx(r("MWXColumnItem.react"),{children:u.jsx(r("MWXListCell.react"),{addOnEnd:C,addOnEndVerticalAlign:"top",content:S})})}),t[18]=C,t[19]=S,t[20]=R):R=t[20];var L;return t[21]!==g||t[22]!==R?(L=u.jsxs(r("MWXColumn.react"),{spacing:12,children:[g,R]}),t[21]=g,t[22]=R,t[23]=L):L=t[23],L}l.default=d}),226);
__d("MWInboxInfoSharedContentLogger",["$InternalEnum","I64","LSIntEnum","MessengerWebEventsFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=n("$InternalEnum").Mirrored(["FilesTab","LinksTab","MediaTab","ThreadDetails"]);function c(t,n){var r=t.threadKey,a=t.threadType,i=(e||(e=o("I64"))).to_string(r),l=n||!(e||(e=o("I64"))).equal(a,(s||(s=o("LSIntEnum"))).ofNumber(2))?null:i,u=n||!(e||(e=o("I64"))).equal(a,(s||(s=o("LSIntEnum"))).ofNumber(1))?null:i;return[l,u]}function d(e){switch(e){case u.FilesTab:return"files_tab";case u.LinksTab:return"links_tab";case u.MediaTab:return"media_tab";case u.ThreadDetails:return"thread_details"}}function m(e){return r("MessengerWebEventsFalcoEvent").log(e)}function p(e,t,n){var r=d(t),o=c(e,n),a=o[0],i=o[1];m(function(){return{entry_point:r,event_name:"shared_file_click",interface:"Web Chat",is_secured:n,other_user_fbid:i,thread_fbid:a}})}function _(e,t,n){var r=d(t),o=c(e,n),a=o[0],i=o[1];m(function(){return{entry_point:r,event_name:"shared_media_click",interface:"Web Chat",is_secured:n,other_user_fbid:i,thread_fbid:a}})}function f(e,t,n){var r=d(t),o=c(e,n),a=o[0],i=o[1];m(function(){return{entry_point:r,event_name:"shared_link_click",interface:"Web Chat",is_secured:n,other_user_fbid:i,thread_fbid:a}})}l.SharedContentEntrypoint=u,l.getWebEntrypoint=d,l.logFilePress=p,l.logMediaPress=_,l.logLinkPress=f}),98);
__d("MWInboxInfoSharedContentFilesTab.react",["MWInboxInfoFileGallery.react","MWInboxInfoSharedContentLogger","MWSharedAttachmentsSectionHooks","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMWMediaLoadingQplLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useRef;function p(e){var t=o("react-compiler-runtime").c(25),n=e.isSecureThread,a=e.onFirstLoadedMedia,i=e.thread,l=o("MWSharedAttachmentsSectionHooks").useQueryFileAttachments(i.threadKey),u=l[0],c=l[1],p=l[2],_=l[4],f=m(!1),g;t[0]!==i.threadType?(g={entrypoint:"file_gallery",threadType:i.threadType},t[0]=i.threadType,t[1]=g):g=t[1];var h=r("useMWMediaLoadingQplLogger")(g),y=r("useLoadMoreThreadSharedAttachments.react")(c,i.threadKey,h.logLoadMediaStart),C=_!=null?_:!0,b;t[2]!==p||t[3]!==u||t[4]!==y||t[5]!==h.logLoadMediaCancel||t[6]!==h.logLoadMediaSuccess||t[7]!==C?(b={attachmentsRange:p,hasMore:C,loadMore:y,logLoadMediaCancel:h.logLoadMediaCancel,logLoadMediaSuccess:h.logLoadMediaSuccess,media:u},t[2]=p,t[3]=u,t[4]=y,t[5]=h.logLoadMediaCancel,t[6]=h.logLoadMediaSuccess,t[7]=C,t[8]=b):b=t[8];var v=o("MWSharedAttachmentsSectionHooks").useLoader(b),S=v[0],R=v[1],L=v[2],E,k;t[9]!==L||t[10]!==u||t[11]!==a?(E=function(){f.current===!1&&L===!0&&(f.current=!0,a(u))},k=[L,u,a],t[9]=L,t[10]=u,t[11]=a,t[12]=E,t[13]=k):(E=t[12],k=t[13]),d(E,k);var I;t[14]!==n||t[15]!==i?(I=function(){o("MWInboxInfoSharedContentLogger").logFilePress(i,o("MWInboxInfoSharedContentLogger").SharedContentEntrypoint.FilesTab,n)},t[14]=n,t[15]=i,t[16]=I):I=t[16];var T=I,D=_!=null?_:!0,x;return t[17]!==u||t[18]!==S||t[19]!==R||t[20]!==T||t[21]!==D||t[22]!==i.threadKey||t[23]!==i.threadType?(x=s.jsx(r("MWInboxInfoFileGallery.react"),{files:u,hasMore:D,isLoading:S,onLoadMore:R,onPressFile:T,threadKey:i.threadKey,threadType:i.threadType}),t[17]=u,t[18]=S,t[19]=R,t[20]=T,t[21]=D,t[22]=i.threadKey,t[23]=i.threadType,t[24]=x):x=t[24],x}l.default=p}),98);
__d("MWInboxInfoSharedLinks.react",["BaseTheme.react","CometInfiniteScrollTrigger.react","FDSProgressIndicator.react","MWInboxInfoSharedContentEmptyTab.react","MWInboxInfoSharedContentTheme","MWInboxInfoSharedLink.react","MWXColumn.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={progressIndicator:{display:"x78zum5",justifyContent:"xl56j7k",marginBottom:"x1e56ztr",marginTop:"x1xmf6yo",paddingTop:"x123j3cw",paddingInlineEnd:"x1gabggj",paddingBottom:"xs9asl8",paddingInlineStart:"xaso8d8",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(17),n=e.hasMore,a=e.isLoading,i=e.links,l=e.onLoadMore,c=e.onPressLink,d=e.thread;if(i.length===0&&!a&&!n){var m;return t[0]!==d.threadKey?(m=s.jsx(r("MWInboxInfoSharedContentEmptyTab.react"),{contentType:"links",threadKey:d.threadKey}),t[0]=d.threadKey,t[1]=m):m=t[1],m}else{var p;if(t[2]!==i||t[3]!==c||t[4]!==d){var _;t[6]!==c||t[7]!==d?(_=function(t){return s.jsx(r("MWInboxInfoSharedLink.react"),{attachment:t,onPress:c,threadType:d.threadType},t.attachmentFbid)},t[6]=c,t[7]=d,t[8]=_):_=t[8],p=i.map(_),t[2]=i,t[3]=c,t[4]=d,t[5]=p}else p=t[5];var f;t[9]===Symbol.for("react.memo_cache_sentinel")?(f=s.jsx(r("FDSProgressIndicator.react"),{size:"default"}),t[9]=f):f=t[9];var g;t[10]!==n||t[11]!==a||t[12]!==l?(g=s.jsx(r("CometInfiniteScrollTrigger.react"),{hasMore:n,isLoading:a,onLoadMore:l,xstyle:u.progressIndicator,children:f}),t[10]=n,t[11]=a,t[12]=l,t[13]=g):g=t[13];var h;return t[14]!==p||t[15]!==g?(h=s.jsx(r("BaseTheme.react"),{config:o("MWInboxInfoSharedContentTheme").config,children:s.jsxs(r("MWXColumn.react"),{hasDividers:!0,paddingHorizontal:16,spacing:20,children:[p,g]})}),t[14]=p,t[15]=g,t[16]=h):h=t[16],h}}l.default=c}),98);
__d("MWInboxInfoSharedLinksSection.react",["MWInboxInfoSharedContentLogger","MWInboxInfoSharedLinks.react","MWSharedAttachmentsSectionHooks","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useRef;function p(e){var t=o("react-compiler-runtime").c(23),n=e.isSecureThread,a=e.onFirstLoadedMedia,i=e.thread,l=o("MWSharedAttachmentsSectionHooks").useQueryLinkAttachments(i.threadKey),u=l[0],c=l[1],p=l[2],_=l[4],f=r("useLoadMoreThreadSharedAttachments.react")(c,i.threadKey),g=m(!1),h,y;t[0]!==f?(h=function(){f()},y=[f],t[0]=f,t[1]=h,t[2]=y):(h=t[1],y=t[2]),d(h,y);var C=_!=null?_:!0,b;t[3]!==p||t[4]!==u||t[5]!==f||t[6]!==C?(b={attachmentsRange:p,hasMore:C,loadMore:f,media:u},t[3]=p,t[4]=u,t[5]=f,t[6]=C,t[7]=b):b=t[7];var v=o("MWSharedAttachmentsSectionHooks").useLoader(b),S=v[0],R=v[1],L=v[2],E,k;t[8]!==L||t[9]!==u||t[10]!==a?(E=function(){g.current===!1&&L===!0&&(g.current=!0,a(u))},k=[L,u,a],t[8]=L,t[9]=u,t[10]=a,t[11]=E,t[12]=k):(E=t[11],k=t[12]),d(E,k);var I;t[13]!==n||t[14]!==i?(I=function(){o("MWInboxInfoSharedContentLogger").logLinkPress(i,o("MWInboxInfoSharedContentLogger").SharedContentEntrypoint.LinksTab,n)},t[13]=n,t[14]=i,t[15]=I):I=t[15];var T=I,D=_!=null?_:!0,x;return t[16]!==S||t[17]!==u||t[18]!==R||t[19]!==T||t[20]!==D||t[21]!==i?(x=s.jsx(r("MWInboxInfoSharedLinks.react"),{hasMore:D,isLoading:S,links:u,onLoadMore:R,onPressLink:T,thread:i}),t[16]=S,t[17]=u,t[18]=R,t[19]=T,t[20]=D,t[21]=i,t[22]=x):x=t[22],x}l.default=p}),98);
__d("MWInboxInfoSharedMediaTab.react",["MWInboxInfoPhotoGallery.react","MWInboxInfoSharedContentLogger","MWSharedAttachmentsSectionHooks","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMWMediaLoadingQplLogger","useMWV2MediaViewerOpenPlayableUrl","useMWV2MediaViewerOpenPreviewUrl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useMemo,p=u.useRef;function _(e){var t=o("react-compiler-runtime").c(32),n=e.isSecureThread,a=e.onFirstLoadedMedia,i=e.thread,l=p(!1),u=o("MWSharedAttachmentsSectionHooks").useQueryMediaAttachmentsWithMessages(i.threadKey),c=u[0],m=u[1],_=u[2],g=u[4],h=g===void 0?!0:g,y;t[0]!==c?(y=c.map(f),t[0]=c,t[1]=y):y=t[1];var C=y,b;t[2]!==i.threadType?(b={entrypoint:"media_gallery",threadType:i.threadType},t[2]=i.threadType,t[3]=b):b=t[3];var v=r("useMWMediaLoadingQplLogger")(b),S=r("useLoadMoreThreadSharedAttachments.react")(m,i.threadKey,v.logLoadMediaStart),R;t[4]!==_||t[5]!==h||t[6]!==S||t[7]!==C||t[8]!==v.logLoadMediaCancel||t[9]!==v.logLoadMediaSuccess?(R={attachmentsRange:_,hasMore:h,loadMore:S,logLoadMediaCancel:v.logLoadMediaCancel,logLoadMediaSuccess:v.logLoadMediaSuccess,media:C},t[4]=_,t[5]=h,t[6]=S,t[7]=C,t[8]=v.logLoadMediaCancel,t[9]=v.logLoadMediaSuccess,t[10]=R):R=t[10];var L=o("MWSharedAttachmentsSectionHooks").useLoader(R),E=L[0],k=L[1],I=L[2],T,D;t[11]!==I||t[12]!==C||t[13]!==a?(T=function(){l.current===!1&&I===!0&&(l.current=!0,a(C))},D=[I,C,a],t[11]=I,t[12]=C,t[13]=a,t[14]=T,t[15]=D):(T=t[14],D=t[15]),d(T,D);var x=r("useMWV2MediaViewerOpenPreviewUrl")(),$=r("useMWV2MediaViewerOpenPlayableUrl")(),P;t[16]!==x?(P=function(t,n,r){var e;return(e=x(t,n))!=null?e:""},t[16]=x,t[17]=P):P=t[17];var N=P,M;t[18]!==n||t[19]!==i?(M=function(){o("MWInboxInfoSharedContentLogger").logMediaPress(i,o("MWInboxInfoSharedContentLogger").SharedContentEntrypoint.MediaTab,n)},t[18]=n,t[19]=i,t[20]=M):M=t[20];var w=M,A;return t[21]!==$||t[22]!==N||t[23]!==h||t[24]!==E||t[25]!==C||t[26]!==c||t[27]!==k||t[28]!==w||t[29]!==i.threadKey||t[30]!==i.threadType?(A=s.jsx(r("MWInboxInfoPhotoGallery.react"),{getPlayableUrl:$,getPreviewUrl:N,hasMore:h,isLoading:E,media:C,mediaWithMessages:c,onLoadMore:k,onPressMedia:w,threadKey:i.threadKey,threadType:i.threadType}),t[21]=$,t[22]=N,t[23]=h,t[24]=E,t[25]=C,t[26]=c,t[27]=k,t[28]=w,t[29]=i.threadKey,t[30]=i.threadType,t[31]=A):A=t[31],A}function f(e){return e.attachment}l.default=_}),98);
__d("MWInboxInfoSharedTabContent.react",["MAWCutoverInboxInfoSharedFilesTab.react","MAWCutoverInboxInfoSharedMediaTab.react","MAWSecureInboxInfoSharedFilesTab.react","MAWSecureInboxInfoSharedLinksTab.react","MAWSecureInboxInfoSharedMediaTab.react","MWInboxInfoSharedContentFilesTab.react","MWInboxInfoSharedLinksSection.react","MWInboxInfoSharedMediaTab.react","MWXScrollableArea.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(16),n=e.isBackButtonPressed,r=e.isCutoverThread,a=e.isSecureThread,i=e.onFirstLoadedMedia,l=e.selectedTab,u=e.sharedLinksEnabled,c=e.thread;switch(l){case"media":{var _;return t[0]!==n||t[1]!==r||t[2]!==a||t[3]!==i||t[4]!==c?(_=s.jsx(d,{isBackButtonPressed:n,isCutoverThread:r,isSecureThread:a,onFirstLoadedMedia:i,thread:c}),t[0]=n,t[1]=r,t[2]=a,t[3]=i,t[4]=c,t[5]=_):_=t[5],_}case"files":{var f;return t[6]!==r||t[7]!==a||t[8]!==i||t[9]!==c?(f=s.jsx(m,{isCutoverThread:r,isSecureThread:a,onFirstLoadedMedia:i,thread:c}),t[6]=r,t[7]=a,t[8]=i,t[9]=c,t[10]=f):f=t[10],f}case"links":{var g;return t[11]!==a||t[12]!==i||t[13]!==u||t[14]!==c?(g=s.jsx(p,{isSecureThread:a,onFirstLoadedMedia:i,sharedLinksEnabled:u,thread:c}),t[11]=a,t[12]=i,t[13]=u,t[14]=c,t[15]=g):g=t[15],g}}return null}function c(e){var t=o("react-compiler-runtime").c(6),n=e.isSecureThread,a=e.onFirstLoadedMedia,i=e.sharedLinksEnabled,l=e.thread;if(!i)return null;if(n){var u;return t[0]!==l?(u=s.jsx(r("MAWSecureInboxInfoSharedLinksTab.react"),{thread:l}),t[0]=l,t[1]=u):u=t[1],u}var c;return t[2]!==n||t[3]!==a||t[4]!==l?(c=s.jsx(r("MWInboxInfoSharedLinksSection.react"),{isSecureThread:n,onFirstLoadedMedia:a,thread:l}),t[2]=n,t[3]=a,t[4]=l,t[5]=c):c=t[5],c}function d(e){var t=o("react-compiler-runtime").c(13),n=e.isBackButtonPressed,a=e.isCutoverThread,i=e.isSecureThread,l=e.onFirstLoadedMedia,u=e.thread;if(a){var c;return t[0]!==n||t[1]!==l||t[2]!==u.threadKey||t[3]!==u.threadType?(c=s.jsx(r("MAWCutoverInboxInfoSharedMediaTab.react"),{isBackButtonPressed:n,onFirstLoadedMedia:l,secureThreadKey:u.threadKey,threadType:u.threadType}),t[0]=n,t[1]=l,t[2]=u.threadKey,t[3]=u.threadType,t[4]=c):c=t[4],c}if(i){var d;return t[5]!==n||t[6]!==l||t[7]!==u?(d=s.jsx(r("MAWSecureInboxInfoSharedMediaTab.react"),{isBackButtonPressed:n,onFirstLoadedMedia:l,thread:u}),t[5]=n,t[6]=l,t[7]=u,t[8]=d):d=t[8],d}var m;return t[9]!==i||t[10]!==l||t[11]!==u?(m=s.jsx(r("MWInboxInfoSharedMediaTab.react"),{isSecureThread:i,onFirstLoadedMedia:l,thread:u}),t[9]=i,t[10]=l,t[11]=u,t[12]=m):m=t[12],m}function m(e){var t=o("react-compiler-runtime").c(11),n=e.isCutoverThread,a=e.isSecureThread,i=e.onFirstLoadedMedia,l=e.thread;if(n&&r("MAWCutoverInboxInfoSharedFilesTab.react")!=null){var u;return t[0]!==i||t[1]!==l.threadKey||t[2]!==l.threadType?(u=s.jsx(r("MAWCutoverInboxInfoSharedFilesTab.react"),{onFirstLoadedMedia:i,secureThreadKey:l.threadKey,threadType:l.threadType}),t[0]=i,t[1]=l.threadKey,t[2]=l.threadType,t[3]=u):u=t[3],u}if(a){var c;return t[4]!==i||t[5]!==l?(c=s.jsx(r("MAWSecureInboxInfoSharedFilesTab.react"),{onFirstLoadedMedia:i,thread:l}),t[4]=i,t[5]=l,t[6]=c):c=t[6],c}var d;return t[7]!==a||t[8]!==i||t[9]!==l?(d=s.jsx(r("MWInboxInfoSharedContentFilesTab.react"),{isSecureThread:a,onFirstLoadedMedia:i,thread:l}),t[7]=a,t[8]=i,t[9]=l,t[10]=d):d=t[10],d}function p(e){var t=o("react-compiler-runtime").c(5),n=e.isSecureThread,a=e.onFirstLoadedMedia,i=e.sharedLinksEnabled,l=e.thread,u;return t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l?(u=s.jsx(r("MWXScrollableArea.react"),{expanding:!0,children:s.jsx(c,{isSecureThread:n,onFirstLoadedMedia:a,sharedLinksEnabled:i,thread:l})}),t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=u):u=t[4],u}l.default=u}),98);
__d("MWInboxInfoSharedContent.react",["fbt","MWInboxInfoSharedTabContent.react","MWInboxInfoSubPageHeader.react","MWXColumn.react","MWXColumnItem.react","MWXTabs.react","MessengerWebUXLogger","react","react-compiler-runtime","usePrevious","withCometPlaceholder"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo,p=c.useRef,_=c.useState,f={root:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",minHeight:"x2lwn1j",$$css:!0}};function g(e,t,n){var r,o;switch(e){case"media":o="mw_shared_media_tab",r=s._(/*BTDS*/"Media");break;case"files":o="mw_shared_files_tab",r=s._(/*BTDS*/"Files");break;case"links":o="mw_shared_links_tab",r=s._(/*BTDS*/"Links");break}return{label:r!=null?r:"",onPress:function(){return n(e)},selected:t===e,testid:o!=null?o:""}}function h(e){var t=o("react-compiler-runtime").c(34),n=e.initialTab,a=e.isCutoverThread,i=e.isSecureThread,l=e.onReturn,c=e.sharedLinksEnabled,d=e.thread,m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=["media","files"],t[0]=m):m=t[0];var h;t[1]!==c?(h=m.concat(c?"links":[]),t[1]=c,t[2]=h):h=t[2];var y=h,C=_(n!=null?n:y[0]),b=C[0],v=C[1],S=r("usePrevious")(b),R;t[3]===Symbol.for("react.memo_cache_sentinel")?(R=new Set,t[3]=R):R=t[3];var L=p(R),E=r("MessengerWebUXLogger").useInteractionLogger(),k;t[4]!==a||t[5]!==E||t[6]!==S||t[7]!==b||t[8]!==d?(k=function(t){var e,n;if(S==null)e="thread_details";else e:switch(S){case"media":{e="media_tab";break e}case"files":{e="files_tab";break e}case"links":{e="links_tab";break e}default:e="thread_details"}var r=t.length;L.current.add(b);e:switch(b){case"media":{n="open_media_tab";break e}case"files":{n="open_files_tab";break e}case"links":{n="open_links_tab";break e}default:n="open_media_tab"}E==null||E({entryPoint:e,eventName:n,extraData:{isCutoverThread:a.toString(),numAttachments:r.toString()},threadKey:d.threadKey,threadType:d.threadType})},t[4]=a,t[5]=E,t[6]=S,t[7]=b,t[8]=d,t[9]=k):k=t[9];var I=k,T;t[10]!==b||t[11]!==y?(T=y.map(function(e){return g(e,b,v)}),t[10]=b,t[11]=y,t[12]=T):T=t[12];var D=T,x=_(!1),$=x[0],P=x[1],N;t[13]!==l?(N=function(){return P(!0),l()},t[13]=l,t[14]=N):N=t[14];var M=N,w;t[15]!==c?(w=c?s._(/*BTDS*/"Media, files and links"):s._(/*BTDS*/"Media and files"),t[15]=c,t[16]=w):w=t[16];var A;t[17]!==M||t[18]!==w?(A=u.jsx(r("MWXColumnItem.react"),{children:u.jsx(r("MWInboxInfoSubPageHeader.react"),{onPressBack:M,title:w})}),t[17]=M,t[18]=w,t[19]=A):A=t[19];var F;t[20]!==D?(F=u.jsx(r("MWXColumnItem.react"),{paddingHorizontal:16,children:u.jsx(r("MWXTabs.react"),{tabs:D})}),t[20]=D,t[21]=F):F=t[21];var O;t[22]!==a||t[23]!==$||t[24]!==i||t[25]!==I||t[26]!==b||t[27]!==c||t[28]!==d?(O=u.jsx(r("MWXColumnItem.react"),{expanding:!0,children:u.jsx(r("MWInboxInfoSharedTabContent.react"),{isBackButtonPressed:$,isCutoverThread:a,isSecureThread:i,onFirstLoadedMedia:I,selectedTab:b,sharedLinksEnabled:c,thread:d})}),t[22]=a,t[23]=$,t[24]=i,t[25]=I,t[26]=b,t[27]=c,t[28]=d,t[29]=O):O=t[29];var B;return t[30]!==O||t[31]!==A||t[32]!==F?(B=u.jsxs(r("MWXColumn.react"),{spacing:12,xstyle:f.root,children:[A,F,O]}),t[30]=O,t[31]=A,t[32]=F,t[33]=B):B=t[33],B}var y=o("withCometPlaceholder").withCometPlaceholder(h,null,"MWInboxInfoSharedContent");l.default=y}),226);
__d("MWInboxThreadViewContexts.react",["CometPlaceholder.react","MWCMInboxDetailUnjoinedState.react","MWCMSubthreadsInboxFocusContext.react","MWCMThreadTypes.react","MWPThreadIsPage.react","MWThreadKey.react","react","react-compiler-runtime","useIsChatPreviewsEnabled","useMWNavigateAfterLeavingGroup","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useMemo;function m(e){var t=o("react-compiler-runtime").c(20),n=e.children,a=e.thread,i=a.needsAdminApprovalForNewParticipant,l=a.threadKey,u=a.threadType,d=r("useMWNavigateAfterLeavingGroup")(a),m=r("usePrevious")(u),p;if(m!=null&&o("MWCMThreadTypes.react").isJoinedCMThread(m)){var _;t[0]!==u?(_=o("MWCMThreadTypes.react").isUnjoinedCMThread(u),t[0]=u,t[1]=_):_=t[1],p=_}else p=!1;var f=p,g=o("useIsChatPreviewsEnabled").useIsChatPreviewsEnabled(l),h;t[2]!==g||t[3]!==i||t[4]!==u?(h=g?i===!0:o("MWCMThreadTypes.react").isUnjoinedCMThread(u),t[2]=g,t[3]=i,t[4]=u,t[5]=h):h=t[5];var y=h,C;t[6]!==d||t[7]!==f?(C=function(){f&&d()},t[6]=d,t[7]=f,t[8]=C):C=t[8];var b;t[9]!==d||t[10]!==m||t[11]!==f?(b=[d,m,f],t[9]=d,t[10]=m,t[11]=f,t[12]=b):b=t[12],c(C,b);var v;return t[13]!==n||t[14]!==g||t[15]!==y||t[16]!==a||t[17]!==l||t[18]!==f?(v=y?s.jsx(r("MWCMInboxDetailUnjoinedState.react"),{reason:g?"needs-admin-approval-for-new-participant":"is-unjoined-cm-thread",thread:a,wasPreviouslyJoined:f}):s.jsx(o("MWPThreadIsPage.react").Provider,{threadKey:l,children:s.jsx(o("MWThreadKey.react").MWThreadKeyProvider,{id:l,children:s.jsx(o("MWCMSubthreadsInboxFocusContext.react").MWCMIsSubthreadFocusedContextProvider,{children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWInboxThreadViewContexts children",children:n})})})}),t[13]=n,t[14]=g,t[15]=y,t[16]=a,t[17]=l,t[18]=f,t[19]=v):v=t[19],v}l.default=m}),98);
__d("MWV2InboxDetailContainer.react",["CometTransientDialogProvider.react","MAWEditMessageContext.react","MWCMSubthreadsInboxFocusContext.react","MWInboxDetail.react","MWPReplyContext.react","MWPThemeCSSProvider.react","MWPThreadThemeProvider.react","MWV2IsTabFocusedContext.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(11),n=e.thread,a=o("MWCMSubthreadsInboxFocusContext.react").useIsSubthreadFocusedContext(),i=a.isSubthreadFocused,l=o("MWPThemeCSSProvider.react").useIsThemeV2(),u;t[0]!==l||t[1]!==n.themeFbid?(u=function(t){return l?s.jsx(r("CometTransientDialogProvider.react"),{children:s.jsx(r("MWPThreadThemeProvider.react"),{themeFbid:n.themeFbid,children:t})}):s.jsx(r("MWPThreadThemeProvider.react"),{themeFbid:n.themeFbid,children:s.jsx(r("CometTransientDialogProvider.react"),{children:t})})},t[0]=l,t[1]=n.themeFbid,t[2]=u):u=t[2];var c=u,d=!i,m;t[3]!==n?(m=s.jsx(o("MWPReplyContext.react").MWPReplyContextProvider,{children:s.jsx(o("MAWEditMessageContext.react").MAWEditMessageContext,{children:s.jsx(r("MWInboxDetail.react"),{thread:n})})}),t[3]=n,t[4]=m):m=t[4];var p;t[5]!==c||t[6]!==m?(p=c(m),t[5]=c,t[6]=m,t[7]=p):p=t[7];var _;t[8]!==d||t[9]!==p?(_=s.jsx(o("MWV2IsTabFocusedContext.react").MWV2IsTabFocusedContextProvider,{isFocused:d,children:p}),t[8]=d,t[9]=p,t[10]=_):_=t[10];var f=_;return f}l.default=u}),98);
__d("useIntegrityBlockUserInterstitialOnce",["ReQL","ReQLSubscribe","emptyFunction","promiseDone","react","react-compiler-runtime","useAsyncReStore","useBlockedUserInterstitial","useMaybeShowCSAMBlockAsync","useMaybeShowDOIBlockAsync","usePseudoBlockedUserInterstitial","useRestrictedUserInterstitial"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e,t){var n=o("react-compiler-runtime").c(21),a=d(!1),i=a[0],l=a[1],s=o("useBlockedUserInterstitial").useBlockedUserInterstitial(),m=o("useRestrictedUserInterstitial").useRestrictedUserInterstitial(),p=o("usePseudoBlockedUserInterstitial").usePseudoBlockedUserInterstitial(),_=r("useMaybeShowCSAMBlockAsync")(),f=r("useMaybeShowDOIBlockAsync")(),g=c(!1),h=r("useAsyncReStore")(),y;n[0]===Symbol.for("react.memo_cache_sentinel")?(y=function(){l(!0)},n[0]=y):y=n[0];var C=y,b;n[1]===Symbol.for("react.memo_cache_sentinel")?(b=function(){l(!1)},n[1]=b):b=n[1];var v=b,S;n[2]!==t||n[3]!==h||n[4]!==s||n[5]!==_||n[6]!==f||n[7]!==p||n[8]!==m||n[9]!==e?(S=function(){g.current||(g.current=!0,r("promiseDone")(h,function(n){var a=o("ReQLSubscribe").subscribeToFirst(o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(e),function(n){n!=null&&(a(),p({damagingActionsEntryPoint:t,onOptIn:v,onProceed:r("emptyFunction"),onShow:C,shouldSubscribe:!0,thread:n,threadKey:e}),s({onOptIn:v,onProceed:r("emptyFunction"),onShow:C,shouldSubscribe:!0,thread:n,threadKey:e}),m({onOptIn:v,onProceed:r("emptyFunction"),onShow:C,shouldSubscribe:!0,thread:n,threadKey:e}),_({onShow:C,shouldSubscribe:!0,threadKey:e}),f({onShow:C,shouldSubscribe:!0,threadKey:e}))})}))},n[2]=t,n[3]=h,n[4]=s,n[5]=_,n[6]=f,n[7]=p,n[8]=m,n[9]=e,n[10]=S):S=n[10];var R;return n[11]!==t||n[12]!==h||n[13]!==i||n[14]!==s||n[15]!==_||n[16]!==f||n[17]!==p||n[18]!==m||n[19]!==e?(R=[i,!0,_,m,p,s,t,e,h,f],n[11]=t,n[12]=h,n[13]=i,n[14]=s,n[15]=_,n[16]=f,n[17]=p,n[18]=m,n[19]=e,n[20]=R):R=n[20],u(S,R),i}l.default=m}),98);
__d("MWV2OpenThreadViewContainer.react",["Int64Hooks","LSFactory","LSIntEnum","LSMailboxType","LSThreadBitOffset","LSVec","LSVerifyThreadRowExistsStoredProcedure","LSVerifyThreadViewStoredProcedure","MWInboxDetailNullState.react","MWInboxThreadViewContexts.react","MWV2InboxDetailContainer.react","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useIntegrityBlockUserInterstitialOnce","useIsChatPreviewsEnabled","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s.useCallback,m=(u||(u=o("LSIntEnum"))).ofNumber(22);function p(t){var n=o("react-compiler-runtime").c(16),a=t.threadKey,l=(e||(e=r("useReStore")))(),s;n[0]!==l.tables.threads||n[1]!==a?(s=function(){return o("ReQL").fromTableAscending(l.tables.threads,["authorityLevel","cannotReplyReason","cannotUnsendReason","folderName","hasPersistentMenu","joinRequestApprovalSetting","needsAdminApprovalForNewParticipant","parentThreadKey","pendingJoinRequestsCount","proactiveWarningDismissTime","themeFbid","threadKey","threadName","threadStatus","threadSubtype","threadType","admodCount","consistentThreadFbid","metadata"].concat(o("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(a)},n[0]=l.tables.threads,n[1]=a,n[2]=s):s=n[2];var d;n[3]!==l||n[4]!==a?(d=[l,a],n[3]=l,n[4]=a,n[5]=d):d=n[5];var p=o("ReQLSuspense").useFirst(s,d,i.id+":47"),_=o("useIsChatPreviewsEnabled").useIsChatPreviewsEnabled(a),f;n[6]!==l||n[7]!==_?(f=function(t){return _?l.runInTransaction(function(e){return r("LSVerifyThreadViewStoredProcedure")(r("LSFactory")(e),{contacts:r("LSVec").ofArray([]),mailboxType:(u||(u=o("LSIntEnum"))).ofNumber(r("LSMailboxType").MESSENGER),threadKey:t,threadType:u.ofNumber(1)})},"readwrite",void 0,void 0,i.id+":77"):l.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(u||(u=o("LSIntEnum"))).ofNumber(1),threadKey:t})},"readwrite",void 0,void 0,i.id+":77")},n[6]=l,n[7]=_,n[8]=f):f=n[8];var g=f,h,y;n[9]!==a||n[10]!==g?(h=function(){r("promiseDone")(g(a))},y=[a,g],n[9]=a,n[10]=g,n[11]=h,n[12]=y):(h=n[11],y=n[12]),o("Int64Hooks").useEffectInt64(h,y);var C=r("useIntegrityBlockUserInterstitialOnce")(a,m);if(C){var b;return n[13]===Symbol.for("react.memo_cache_sentinel")?(b=c.jsx(r("MWInboxDetailNullState.react"),{reason:"integrity-block-shown-open-thread"}),n[13]=b):b=n[13],b}var v;return n[14]!==p?(v=p!=null?c.jsx(r("MWInboxThreadViewContexts.react"),{thread:p,children:c.jsx(r("MWV2InboxDetailContainer.react"),{thread:p})}):null,n[14]=p,n[15]=v):v=n[15],v}l.default=p}),98);
__d("useMWCMShowContentTakedownEnforcementDialog",["Int64Hooks","MWCMContentTakedownEnforcementNoticeDialog.entrypoint","MWInboxPersistedUIState","gkx","react-compiler-runtime","useMWCMFetchSafetyInterventions","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e="__MWCMInboxFolderChats.interventionId__";function s(){var t=o("react-compiler-runtime").c(8),n=r("useMWCMFetchSafetyInterventions")(),a=o("MWInboxPersistedUIState").usePersistedUIState("",e),i=a[0],l=a[1],s;t[0]!==n?(s={interventions_ids:n},t[0]=n,t[1]=s):s=t[1];var c=r("useMWXEntryPointDialog")(r("MWCMContentTakedownEnforcementNoticeDialog.entrypoint"),s),d=c[0],m,p;t[2]!==n||t[3]!==i||t[4]!==l||t[5]!==d?(m=function(){if(!(!r("gkx")("23433")||n.length===0)){var e=n[0],t=function(){return l(e)};i!==e&&d({interventionsIds:n,onImpression:t},u)}},p=[n,i,l,d],t[2]=n,t[3]=i,t[4]=l,t[5]=d,t[6]=m,t[7]=p):(m=t[6],p=t[7]),o("Int64Hooks").useEffectInt64(m,p)}function u(){}l.default=s}),98);
__d("MWInboxMaster.react",["FBLogger","I64","JSResourceForInteraction","MWChatInteraction","MWInboxProvider.react","MWPUniversalSearchContext.react","MWResponsiveLayoutConstants","MWThreadListNewMessageState.react","MWV2OpenThreadViewContainer.react","cr:5433","cr:5434","cr:9762","lazyLoadComponent","react","react-compiler-runtime","useEmptyFunction","useEnsureViewerContactExistAndUpdated","useMWCMShowContentTakedownEnforcementDialog","useMWInboxURIState","useMWResponsiveOpenOnChange","useTopMostRouteCometEntityKey"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=u||(u=o("react")),m=u.useContext,p=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWInboxDetailNullState.react").__setRef("MWInboxMaster.react")),_=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWInboxUnsupportedThreadNullState.react").__setRef("MWInboxMaster.react")),f=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWInboxNewMessage.react").__setRef("MWInboxMaster.react")),g=(e=n("cr:5434"))!=null?e:r("useEmptyFunction");function h(){return null}var y=(s=n("cr:5433"))!=null?s:{useFetchPendingGroupInvitations:h},C=y.useFetchPendingGroupInvitations;function b(){var e,t,a=o("react-compiler-runtime").c(26);r("useEnsureViewerContactExistAndUpdated")();var i=m(o("MWInboxProvider.react").MWInboxProviderContext),l=C();g(l),r("useMWCMShowContentTakedownEnforcementDialog")();var s=r("useTopMostRouteCometEntityKey")(),u=(e=s==null?void 0:s.entity_id)!=null?e:void 0,h=(t=s==null?void 0:s.entity_type)!=null?t:void 0,y=m(o("MWThreadListNewMessageState.react").context),b=o("MWPUniversalSearchContext.react").useMWPUniversalSearchContext(),S=b.isUniversalSearchOpen,R;if(a[0]!==i){var L;R=(i==null||(L=i.uriStateDetails)==null?void 0:L.fbid)!=null?(c||(c=o("I64"))).to_string(i.uriStateDetails.fbid):i==null?void 0:i.type,a[0]=i,a[1]=R}else R=a[1];if(r("useMWResponsiveOpenOnChange")(o("MWResponsiveLayoutConstants").MWLayoutPanel.MESSAGE_LIST_PANEL,R,S),i!=null)switch(i.type){case o("useMWInboxURIState").MWInboxURIStateTag.Null:{var E;return a[2]!==u||a[3]!==h?(E=d.jsx(p,{entityId:u,entityType:h,reason:"inbox-master-uri-state-null"}),a[2]=u,a[3]=h,a[4]=E):E=a[4],E}case o("useMWInboxURIState").MWInboxURIStateTag.UnsupportedThread:{var k;return a[5]!==i.fbid?(k=d.jsx(_,{threadKey:i.fbid}),a[5]=i.fbid,a[6]=k):k=a[6],k}case o("useMWInboxURIState").MWInboxURIStateTag.Recent:{var I=i.uriStateDetails;switch(I.type){case o("useMWInboxURIState").MWInboxURIStateDetailsType.Compose:{var T=I.initialTogglePosition,D=y.initialOpenChatSearchTypeahead,x;a[7]!==y.entries?(x=y.entries.map(v).join(),a[7]=y.entries,a[8]=x):x=a[8];var $;return a[9]!==T||a[10]!==y.initialOpenChatSearchTypeahead||a[11]!==x?($=d.jsx(f,{initialOpenChatSearchTypeahead:D,startingSecureTogglePositionOn:T},x),a[9]=T,a[10]=y.initialOpenChatSearchTypeahead,a[11]=x,a[12]=$):$=a[12],$}case o("useMWInboxURIState").MWInboxURIStateDetailsType.Thread:{var P=I.fbid;o("MWChatInteraction").get("inbox_init")==null&&o("MWChatInteraction").set("inbox_init",(c||(c=o("I64"))).to_string(P));var N;a[13]!==P?(N=P!=null?(c||(c=o("I64"))).to_string(P):"",a[13]=P,a[14]=N):N=a[14];var M;return a[15]!==N||a[16]!==P?(M=d.jsx(r("MWV2OpenThreadViewContainer.react"),{threadKey:P},N),a[15]=N,a[16]=P,a[17]=M):M=a[17],M}case o("useMWInboxURIState").MWInboxURIStateDetailsType.SecureThread:{var w=I.fbid;if(n("cr:9762")==null)r("FBLogger")("messenger_web").warn("Missing MWV2SecureThreadViewContainer on secure thread route");else{var A;a[18]!==w?(A=w!=null?(c||(c=o("I64"))).to_string(w):"",a[18]=w,a[19]=A):A=a[19];var F;return a[20]!==A||a[21]!==w?(F=d.jsx(n("cr:9762"),{threadKey:w},A),a[20]=A,a[21]=w,a[22]=F):F=a[22],F}}}}}r("FBLogger")("messenger_comet").mustfix("Unimplemented master view");var O;return a[23]!==u||a[24]!==h?(O=d.jsx(p,{entityId:u,entityType:h,reason:"unimplemented-master-view"}),a[23]=u,a[24]=h,a[25]=O):O=a[25],O}function v(e){return e.key}l.default=b}),98);
__d("MWInboxPrecutoverOpenThreadBannerDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWInboxPrecutoverOpenThreadBannerDialog.react").__setRef("MWInboxPrecutoverOpenThreadBannerDialog.entrypoint")};l.default=e}),98);
__d("MWInboxPrecutoverOpenThreadBannerV1.react",["fbt","ix","I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MWEncryptedBackupsLocalStorageEntryEnum","MWPActor.react","MWXQPCard.react","ReQL","ReQLSuspense","getMWInlineQPBannerStyles","getMWLocalStorageThreadsWithBannerDismissed","react","react-compiler-runtime","requireDeferred","setHasDismissedSecretConversationsDeprecationBanner.react","stylex","useMWEntrypoint","useMWRedirectToEncryptedThreadOfDualThread","useReStore","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d,m,p=m||(m=o("react")),_=m.useState,f=r("requireDeferred")("MessageThreadEventsFalcoEvent").__setRef("MWInboxPrecutoverOpenThreadBannerV1.react");function g(t){var n=o("react-compiler-runtime").c(38),a=t.thread,l=a.threadKey,m=a.threadType,g=(e||(e=r("useReStore")))(),y=o("MWPActor.react").useActor(),C;n[0]!==y||n[1]!==l?(C=(d||(d=o("I64"))).equal(y,l),n[0]=y,n[1]=l,n[2]=C):C=n[2];var b=C,v,S;n[3]!==y||n[4]!==g||n[5]!==b||n[6]!==l||n[7]!==m?(v=function(){return o("LSMessagingThreadTypeUtil").isOneToOne(m)?o("ReQL").mergeJoin(o("ReQL").fromTableAscending(g.tables.participants).getKeyRange(l),o("ReQL").fromTableAscending(g.tables.contacts)).filter(function(e){var t=e[1];return b||!(d||(d=o("I64"))).equal(t.id,y)}).map(h):o("ReQL").empty()},S=[g,l,m,y,b],n[3]=y,n[4]=g,n[5]=b,n[6]=l,n[7]=m,n[8]=v,n[9]=S):(v=n[8],S=n[9]);var R=o("ReQLSuspense").useFirst(v,S,i.id+":63"),L=o("MAWThreadCutover").useIsCutoverOpenThread(l),E=o("MAWThreadCutover").useIsDualThreadCutoverOpenThread(l),k;n[10]!==a?(k=o("LSThreadBitOffset").has(260,a),n[10]=a,n[11]=k):k=n[11];var I=k,T=r("useMWRedirectToEncryptedThreadOfDualThread")(l),D;n[12]!==l?(D=function(){var e=o("getMWLocalStorageThreadsWithBannerDismissed").parseLocalStorageThreadsWithBannerDismissed(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_PRECUTOVER_BANNER_ON_OPEN_THREAD_DISMISSED);return!Object.prototype.hasOwnProperty.call(e,(d||(d=o("I64"))).to_string(l))},n[12]=l,n[13]=D):D=n[13];var x=_(D),$=x[0],P=x[1],N;if(n[14]!==b||n[15]!==(R==null?void 0:R.firstName)||n[16]!==(R==null?void 0:R.name)){var M;N=b?s._(/*BTDS*/"Messenger is upgrading security, so only your end-to-end encrypted chat will remain active."):s._(/*BTDS*/"Messenger is upgrading security, so only your end-to-end encrypted chat with {name} will remain active.",[s._param("name",(M=R==null?void 0:R.firstName)!=null?M:R==null?void 0:R.name)]),n[14]=b,n[15]=R==null?void 0:R.firstName,n[16]=R==null?void 0:R.name,n[17]=N}else N=n[17];var w=N,A=r("useMWEntrypoint")(),F;n[18]!==m?(F=o("LSMessagingThreadTypeUtil").isArmadilloSecure(m),n[18]=m,n[19]=F):F=n[19];var O=F,B;n[20]!==A||n[21]!==L||n[22]!==O||n[23]!==l||n[24]!==m?(B={onVisible:function(){f.onReady(function(e){return e.log(function(){return{entry_point:A,event_type:"secret_conversation_open_thread_banner_impression_event",is_cutover:L,thread_id:(d||(d=o("I64"))).to_string(l),thread_type:d.to_string(m),transport_type:O?"ACT":"MI"}})})}},n[20]=A,n[21]=L,n[22]=O,n[23]=l,n[24]=m,n[25]=B):B=n[25];var W=r("useVisibilityObserver")(B),q;return n[26]!==w||n[27]!==A||n[28]!==L||n[29]!==E||n[30]!==I||n[31]!==O||n[32]!==T||n[33]!==W||n[34]!==$||n[35]!==l||n[36]!==m?(q=$&&I&&!L&&!E&&p.jsx("div",babelHelpers.extends({"data-testid":void 0},(c||(c=r("stylex"))).props(o("getMWInlineQPBannerStyles").inlineQPBannerStyles.inlineQPBannerWrapper),{children:p.jsx(r("MWXQPCard.react"),{addOnPrimary:{label:s._(/*BTDS*/"Switch to other chat"),onPress:function(){f.onReady(function(e){return e.log(function(){return{entry_point:A,event_type:"secret_conversation_open_thread_banner_cta_click_event",is_cutover:L,thread_id:(d||(d=o("I64"))).to_string(l),thread_type:d.to_string(m),transport_type:O?"ACT":"MI"}})}),T()},type:"secondary"},body:w,headline:s._(/*BTDS*/"This chat will be archived soon"),icon:{props:{src:u("876158")},type:"image"},onClose:function(){o("setHasDismissedSecretConversationsDeprecationBanner.react").setHasDismissedSecretConversationsDeprecationBanner((d||(d=o("I64"))).to_string(l),r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_PRECUTOVER_BANNER_ON_OPEN_THREAD_DISMISSED),f.onReady(function(e){return e.log(function(){return{entry_point:A,event_type:"secret_conversation_open_thread_banner_dismissed_event",is_cutover:L,thread_id:(d||(d=o("I64"))).to_string(l),thread_type:d.to_string(m),transport_type:O?"ACT":"MI"}})}),P(!1)},ref:W,xstyle:o("getMWInlineQPBannerStyles").inlineQPBannerStyles.inlineQPBanner})})),n[26]=w,n[27]=A,n[28]=L,n[29]=E,n[30]=I,n[31]=O,n[32]=T,n[33]=W,n[34]=$,n[35]=l,n[36]=m,n[37]=q):q=n[37],q}function h(e){var t=e[1];return t}l.default=g}),226);
__d("MWInboxPrecutoverOpenThreadBannerV2.react",["fbt","ix","I64","LSMessagingThreadTypeUtil","LSThreadBitOffset","MAWThreadCutover","MWEncryptedBackupsLocalStorageEntryEnum","MWInboxPrecutoverOpenThreadBannerDialog.entrypoint","MWPActor.react","MWXQPCard.react","ReQL","ReQLSuspense","getMWInlineQPBannerStyles","getMWLocalStorageThreadsWithBannerDismissed","gkx","react","react-compiler-runtime","requireDeferred","setHasDismissedSecretConversationsDeprecationBanner.react","stylex","useMWEntrypoint","useMWRedirectToEncryptedThreadOfDualThread","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d,m,p=m||(m=o("react")),_=m.useState,f=r("requireDeferred")("MessageThreadEventsFalcoEvent").__setRef("MWInboxPrecutoverOpenThreadBannerV2.react"),g="MI";function h(t){var n=o("react-compiler-runtime").c(43),a=t.source,l=t.thread,m=l.threadKey,h=l.threadType,C=(e||(e=r("useReStore")))(),b=o("MWPActor.react").useActor(),v;n[0]!==b||n[1]!==m?(v=(d||(d=o("I64"))).equal(b,m),n[0]=b,n[1]=m,n[2]=v):v=n[2];var S=v,R,L;n[3]!==b||n[4]!==C||n[5]!==S||n[6]!==m||n[7]!==h?(R=function(){return o("LSMessagingThreadTypeUtil").isOneToOne(h)?o("ReQL").mergeJoin(o("ReQL").fromTableAscending(C.tables.participants).getKeyRange(m),o("ReQL").fromTableAscending(C.tables.contacts)).filter(function(e){var t=e[1];return S||!(d||(d=o("I64"))).equal(t.id,b)}).map(y):o("ReQL").empty()},L=[C,m,h,b,S],n[3]=b,n[4]=C,n[5]=S,n[6]=m,n[7]=h,n[8]=R,n[9]=L):(R=n[8],L=n[9]);var E=o("ReQLSuspense").useFirst(R,L,i.id+":71"),k=o("MAWThreadCutover").useIsCutoverOpenThread(m),I=o("MAWThreadCutover").useIsDualThreadCutoverOpenThread(m),T;n[10]!==l?(T=o("LSThreadBitOffset").has(260,l),n[10]=l,n[11]=T):T=n[11];var D=T,x=r("useMWRedirectToEncryptedThreadOfDualThread")(m),$=r("useMWEntrypoint")(),P;n[12]!==m?(P=function(){var e=o("getMWLocalStorageThreadsWithBannerDismissed").parseLocalStorageThreadsWithBannerDismissed(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_PRECUTOVER_BANNER_ON_OPEN_THREAD_DISMISSED_V2);return!Object.prototype.hasOwnProperty.call(e,(d||(d=o("I64"))).to_string(m))},n[12]=m,n[13]=P):P=n[13];var N=_(P),M=N[0],w=N[1],A;n[14]!==$||n[15]!==k||n[16]!==m||n[17]!==h?(A={onVisible:function(){f.onReady(function(e){return e.log(function(){return{entry_point:$,event_type:"secret_conversation_pre_cutover_thread_banner_impression_event",is_cutover:k,thread_id:(d||(d=o("I64"))).to_string(m),thread_type:d.to_string(h),transport_type:g}})})}},n[14]=$,n[15]=k,n[16]=m,n[17]=h,n[18]=A):A=n[18];var F=r("useVisibilityObserver")(A),O;if(n[19]!==S||n[20]!==(E==null?void 0:E.firstName)||n[21]!==(E==null?void 0:E.name)){var B;O=S?s._(/*BTDS*/"You have two chats with yourself. The other chat is end-to-end encrypted, so it will stay active. Archived chats are still viewable."):s._(/*BTDS*/"You have two chats with {name}. The other chat is end-to-end encrypted, so it will stay active. Archived chats are still viewable.",[s._param("name",(B=E==null?void 0:E.firstName)!=null?B:E==null?void 0:E.name)]),n[19]=S,n[20]=E==null?void 0:E.firstName,n[21]=E==null?void 0:E.name,n[22]=O}else O=n[22];var W=O,q;n[23]===Symbol.for("react.memo_cache_sentinel")?(q=r("gkx")("23433")?u("876158"):u("781429"),n[23]=q):q=n[23];var U=q,V;n[24]===Symbol.for("react.memo_cache_sentinel")?(V={},n[24]=V):V=n[24];var H=r("useMWXEntryPointDialog")(r("MWInboxPrecutoverOpenThreadBannerDialog.entrypoint"),V),G=H[0],z=H[1],j=H[2],K=H[3],Q;return n[25]!==W||n[26]!==$||n[27]!==M||n[28]!==k||n[29]!==I||n[30]!==D||n[31]!==S||n[32]!==z||n[33]!==j||n[34]!==K||n[35]!==G||n[36]!==E||n[37]!==x||n[38]!==F||n[39]!==a||n[40]!==m||n[41]!==h?(Q=M&&D&&!k&&!I&&p.jsx("div",babelHelpers.extends({"data-testid":void 0},(c||(c=r("stylex"))).props(o("getMWInlineQPBannerStyles").inlineQPBannerStyles.inlineQPBannerWrapper),{children:p.jsx(r("MWXQPCard.react"),{addOnPrimary:{label:s._(/*BTDS*/"Open other chat"),onPress:function(){f.onReady(function(e){return e.log(function(){return{entry_point:$,event_type:"secret_conversation_pre_cutover_thread_banner_other_chat_cta_click_event",is_cutover:k,thread_id:(d||(d=o("I64"))).to_string(m),thread_type:d.to_string(h),transport_type:g}})}),x()},type:"secondary"},addOnSecondary:{label:s._(/*BTDS*/"Learn more"),onHoverIn:z,onHoverOut:j,onPress:function(){f.onReady(function(e){return e.log(function(){return{entry_point:$,event_type:"secret_conversation_pre_cutover_thread_banner_learn_more_cta_click_event",is_cutover:k,thread_id:(d||(d=o("I64"))).to_string(m),thread_type:d.to_string(h),transport_type:g}})}),G({entryPoint:$,isCutoverOpenThread:k,isSecure:!1,isSelfThread:S,otherUserOrSelf:E,source:a,threadKey:m,threadType:h})},onPressIn:K},body:W,headline:s._(/*BTDS*/"This chat will be archived soon"),icon:{props:{isDecorative:!0,src:U},type:"image"},onClose:function(){o("setHasDismissedSecretConversationsDeprecationBanner.react").setHasDismissedSecretConversationsDeprecationBanner((d||(d=o("I64"))).to_string(m),r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_PRECUTOVER_BANNER_ON_OPEN_THREAD_DISMISSED_V2),f.onReady(function(e){return e.log(function(){return{entry_point:$,event_type:"secret_conversation_pre_cutover_thread_banner_dismissed_event",is_cutover:k,thread_id:(d||(d=o("I64"))).to_string(m),thread_type:d.to_string(h),transport_type:g}})}),w(!1)},ref:F,secondaryReduceEmphasis:!1,xstyle:o("getMWInlineQPBannerStyles").inlineQPBannerStyles.inlineQPBanner})})),n[25]=W,n[26]=$,n[27]=M,n[28]=k,n[29]=I,n[30]=D,n[31]=S,n[32]=z,n[33]=j,n[34]=K,n[35]=G,n[36]=E,n[37]=x,n[38]=F,n[39]=a,n[40]=m,n[41]=h,n[42]=Q):Q=n[42],Q}function y(e){var t=e[1];return t}l.default=h}),226);
__d("MWInboxRootContent.react",["BaseHeadingContext","CometLeftRailLayoutContext","CometLeftRailPrimaryContext","CometPlaceholder.react","CometRelay","CometRouterFocusRegion.react","CometTransientDialogProvider.react","MWCMInboxLeftRailSidebar.react","MWDraftMessages.react","MWInbox.react","MWInboxLayout.react","MWInboxMaster.react","MWInboxPlaceholderWithSidebar.react","MWPConversationSearchContext.react","MWPUniversalSearchContext.react","MWPVisibleMessageContext.react","MWPreloadedText","MWThreadListNewMessageState.react","XPlatWebAudioPlaybackContextProvider.react","react","react-compiler-runtime","useMWFamilyCenterContext","useMWGetInboxFocusTargetFromRoute"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo;function m(e){var t,n,a,i=o("react-compiler-runtime").c(31),l=e.entryPoints,u=e.props,d=e.queries,m=u.routeProps,p=l.contentEntryPoint.rootModuleID,_=""+p+((t=m.folder_id)!=null?t:""),f=c(r("BaseHeadingContext")),g=r("useMWGetInboxFocusTargetFromRoute")(),h=g===0?r("CometRouterFocusRegion.react"):s.Fragment,y;i[0]!==m.text_param?(y={text:m.text_param},i[0]=m.text_param,i[1]=y):y=i[1];var C=y,b=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),v=b.familyCenterData,S=f+1,R;i[2]===Symbol.for("react.memo_cache_sentinel")?(R=s.jsx(r("MWInboxMaster.react"),{}),i[2]=R):R=i[2];var L;i[3]!==S?(L=s.jsx(r("CometLeftRailLayoutContext").Provider,{value:!0,children:s.jsx(r("BaseHeadingContext").Provider,{value:S,children:R})}),i[3]=S,i[4]=L):L=i[4];var E;i[5]!==C||i[6]!==L?(E=s.jsx(r("MWPreloadedText").Provider,{value:C,children:L}),i[5]=C,i[6]=L,i[7]=E):E=i[7];var k;i[8]!==h||i[9]!==E?(k=s.jsx(h,{children:E}),i[8]=h,i[9]=E,i[10]=k):k=i[10];var I=k,T=(n=m.ref_param)!=null?n:void 0,D=(a=m.thread_key)!=null?a:void 0,x;i[11]===Symbol.for("react.memo_cache_sentinel")?(x=s.jsx(o("MWInboxPlaceholderWithSidebar.react").MWInboxSidebarPlaceholder,{}),i[11]=x):x=i[11];var $;i[12]!==d.mCMInboxLeftRailSidebarBusinessSupportButtonQueryRef?($=s.jsx(o("MWInboxLayout.react").LeftRailSidebarRow,{children:s.jsx(r("CometPlaceholder.react"),{fallback:x,name:"MWInboxRootContent.LeftRailSidebar",children:s.jsx(r("MWCMInboxLeftRailSidebar.react"),{mCMInboxLeftRailSidebarBusinessSupportButtonQueryRef:d.mCMInboxLeftRailSidebarBusinessSupportButtonQueryRef})})}),i[12]=d.mCMInboxLeftRailSidebarBusinessSupportButtonQueryRef,i[13]=$):$=i[13];var P;i[14]!==_||i[15]!==l.contentEntryPoint||i[16]!==v.shouldHideSidebar||i[17]!==d||i[18]!==m?(P=!v.shouldHideSidebar&&s.jsx(o("MWInboxLayout.react").LeftRailListRow,{contentKey:_,children:s.jsx(r("CometTransientDialogProvider.react"),{children:s.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:l.contentEntryPoint,props:{queries:d,routeProps:m}})})}),i[14]=_,i[15]=l.contentEntryPoint,i[16]=v.shouldHideSidebar,i[17]=d,i[18]=m,i[19]=P):P=i[19];var N;i[20]!==I?(N=s.jsx(o("MWInboxLayout.react").MainContent,{children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWInboxRootContent.Content",children:I})}),i[20]=I,i[21]=N):N=i[21];var M;i[22]!==$||i[23]!==P||i[24]!==N?(M=s.jsx(o("MWInboxLayout.react").Container,{children:s.jsx(o("MWPConversationSearchContext.react").MWPConversationSearchContext,{children:s.jsx(o("MWPVisibleMessageContext.react").MWPVisibleMessageContextProvider,{children:s.jsx(r("XPlatWebAudioPlaybackContextProvider.react"),{children:s.jsx(r("CometLeftRailPrimaryContext").Provider,{value:!1,children:s.jsx(o("MWPUniversalSearchContext.react").MWPUniversalSearchContextProvider,{children:s.jsxs(o("MWDraftMessages.react").MWDraftProvider,{children:[$,P,N]})})})})})})}),i[22]=$,i[23]=P,i[24]=N,i[25]=M):M=i[25];var w;return i[26]!==d||i[27]!==M||i[28]!==T||i[29]!==D?(w=s.jsx(o("MWThreadListNewMessageState.react").MWThreadListNewMessageStateProvider,{children:s.jsx(r("MWInbox.react"),{queries:d,refParam:T,threadKey:D,children:M})}),i[26]=d,i[27]=M,i[28]=T,i[29]=D,i[30]=w):w=i[30],w}l.default=m}),98);
__d("MWInfoMemberListWrapper.react",["LSMessagingThreadTypeUtil","MWCMInboxInfoMemberList.react","MWInboxInfoMemberList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(10),n=e.folder,a=e.isCMThread,i=e.thread,l;t[0]!==i.threadType?(l=o("LSMessagingThreadTypeUtil").isJoinedSocialChannelV2(i.threadType),t[0]=i.threadType,t[1]=l):l=t[1];var u=l,c;t[2]!==i.threadType?(c=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(i.threadType),t[2]=i.threadType,t[3]=c):c=t[3];var d=c,m;return t[4]!==n||t[5]!==a||t[6]!==d||t[7]!==u||t[8]!==i?(m=r("MWCMInboxInfoMemberList.react")==null||!(n!=null&&a)&&!u&&!d?s.jsx(r("MWInboxInfoMemberList.react"),{thread:i}):s.jsx(r("MWCMInboxInfoMemberList.react"),{folder:n,thread:i}),t[4]=n,t[5]=a,t[6]=d,t[7]=u,t[8]=i,t[9]=m):m=t[9],m}l.default=u}),98);
__d("MWV2SecureThreadViewContainer.react",["Int64Hooks","LSFactory","LSIntEnum","LSVerifyThreadRowExistsStoredProcedure","MAWMiActMaybeCreateActThread","MAWThreadCutover","MWInboxDetailNullState.react","MWInboxThreadViewContexts.react","MWLSThread","MWV2InboxDetailContainer.react","promiseDone","react","react-compiler-runtime","useIntegrityBlockUserInterstitialOnce","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=(u||(u=o("LSIntEnum"))).ofNumber(22);function m(e,t){return e.runInTransaction(function(e){return r("LSVerifyThreadRowExistsStoredProcedure")(r("LSFactory")(e),{syncGroup:(u||(u=o("LSIntEnum"))).ofNumber(1),threadKey:t})},"readwrite",void 0,void 0,i.id+":40")}function p(t){var n=o("react-compiler-runtime").c(5),a=(e||(e=r("useReStore")))(),i=o("MAWThreadCutover").useCutoverOpenThread(t),l,s;n[0]!==i||n[1]!==a||n[2]!==t?(l=function(){r("promiseDone")(r("MAWMiActMaybeCreateActThread")(a,t,"MWV2SecureThreadViewContainer")),i&&r("promiseDone")(m(a,i.threadKey))},s=[a,t,i],n[0]=i,n[1]=a,n[2]=t,n[3]=l,n[4]=s):(l=n[3],s=n[4]),o("Int64Hooks").useEffectInt64(l,s)}function _(e){var t=o("react-compiler-runtime").c(3),n=e.threadKey,a=o("MWLSThread").useThread(n);p(n);var i=r("useIntegrityBlockUserInterstitialOnce")(n,d);if(i){var l;return t[0]===Symbol.for("react.memo_cache_sentinel")?(l=c.jsx(r("MWInboxDetailNullState.react"),{reason:"integrity-block-shown-secure-thread"}),t[0]=l):l=t[0],l}var s;return t[1]!==a?(s=a!=null?c.jsx(r("MWInboxThreadViewContexts.react"),{thread:a,children:c.jsx(r("MWV2InboxDetailContainer.react"),{thread:a})}):c.jsx(r("MWInboxDetailNullState.react"),{reason:"null-secure-thread"}),t[1]=a,t[2]=s):s=t[2],s}l.default=_}),98);
__d("MessengerAppInstagramReelsFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M21.75 12.792 18.875 8h-4.333c-.334 0-.625 0-.875.042l2.5 4.75h5.583zM14.542 12.792l-2.417-4.5c-1 .25-1.75.708-2.417 1.375-.833.875-1.333 1.791-1.541 3.125h6.375zM21.208 8h-.666l2.875 4.792h4.416c-.208-1.334-.708-2.25-1.541-3.084C25.083 8.5 23.708 8 21.208 8z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M8 14.25h20v4.47c0 3.248 0 4.873-.632 6.113a5.799 5.799 0 0 1-2.535 2.535C23.593 28 21.968 28 18.72 28h-1.44c-3.248 0-4.873 0-6.113-.632a5.8 5.8 0 0 1-2.535-2.535C8 23.593 8 21.968 8 18.72v-4.47zm7.5 3.786c0-.604.711-.97 1.255-.645l4.487 2.674a.74.74 0 0 1 0 1.29l-4.488 2.674c-.543.324-1.254-.041-1.254-.645v-5.348z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerBroadcastChatFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 28.07c6.393 0 11-4.467 11-10.57v-.002C29 11.396 24.393 7 18 7S7 11.396 7 17.498v.002c0 2.091.414 3.98 1.383 5.562.458.747.564 1.664.29 2.5l-.727 2.411c-.2.614.373 1.188.964.986l3.668-1.126a4.261 4.261 0 0 1 2.39-.09c.952.233 1.966.328 3.032.328zm0-8.27a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm4.31-5.888a.75.75 0 0 1 1.06.008l.176.179a5.293 5.293 0 0 1 0 7.402l-.175.178a.75.75 0 0 1-1.061.01l-.357-.351a.75.75 0 0 1-.008-1.061l.175-.178a3.293 3.293 0 0 0 0-4.598l-.175-.178a.75.75 0 0 1 .008-1.06l.357-.351zm-8.255 1.411a.75.75 0 0 0-.008-1.06l-.357-.351a.75.75 0 0 0-1.06.008l-.176.179a5.293 5.293 0 0 0 0 7.402l.175.178a.75.75 0 0 0 1.061.01l.357-.351a.75.75 0 0 0 .008-1.061l-.175-.178a3.293 3.293 0 0 1 0-4.598l.175-.178z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerCamcorderIncomingFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5 13.5a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v9a4 4 0 0 1-4 4H9a4 4 0 0 1-4-4v-9zm11.577 8.06a1 1 0 0 0 .49-1.683l-1.585-1.585a.25.25 0 0 1 0-.354l3.225-3.224c.391-.391.395-1.035.004-1.426a1.005 1.005 0 0 0-1.419.01l-3.225 3.225a.25.25 0 0 1-.353 0L12.12 14.93a1 1 0 0 0-1.683.49l-1.414 6.36a1 1 0 0 0 1.193 1.194l6.361-1.414z"}),s.jsx(o("XPlatReactSVG").Path,{d:"m25.829 21.532 3.723 1.861A1 1 0 0 0 31 22.5V13.5a1 1 0 0 0-1.448-.894l-3.723 1.861A1.5 1.5 0 0 0 25 15.81v4.38a1.5 1.5 0 0 0 .829 1.342z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerCamcorderMissedFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5 13.5a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v9a4 4 0 0 1-4 4H9a4 4 0 0 1-4-4v-9zm13.703 7.785c.391.39.395 1.035.004 1.425-.39.391-1.028.38-1.419-.01l-3.113-3.113a.25.25 0 0 0-.353 0L10.709 22.7a1.005 1.005 0 0 1-1.42.01 1.013 1.013 0 0 1 .005-1.425l3.113-3.113a.25.25 0 0 0 0-.354L9.3 14.712a1.005 1.005 0 0 1-.01-1.42 1.013 1.013 0 0 1 1.425.005l3.107 3.106a.25.25 0 0 0 .353 0l3.107-3.106a1.013 1.013 0 0 1 1.425-.004c.391.39.38 1.028-.01 1.419l-3.107 3.107a.25.25 0 0 0 0 .353l3.113 3.113z"}),s.jsx(o("XPlatReactSVG").Path,{d:"m25.829 21.532 3.723 1.861A1 1 0 0 0 31 22.5V13.5a1 1 0 0 0-1.448-.894l-3.723 1.861A1.5 1.5 0 0 0 25 15.81v4.38a1.5 1.5 0 0 0 .829 1.342z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerCamcorderOutgoingFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M5 13.5a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4v9a4 4 0 0 1-4 4H9a4 4 0 0 1-4-4v-9zm6.424.938a1 1 0 0 0-.49 1.683l1.585 1.585a.25.25 0 0 1 0 .354l-3.225 3.225a1.013 1.013 0 0 0-.004 1.425c.39.391 1.028.38 1.419-.01l3.225-3.225a.25.25 0 0 1 .353 0l1.594 1.594a1 1 0 0 0 1.683-.49l1.414-6.361a1 1 0 0 0-1.193-1.194l-6.361 1.414z"}),s.jsx(o("XPlatReactSVG").Path,{d:"m25.829 21.532 3.723 1.861A1 1 0 0 0 31 22.5V13.5a1 1 0 0 0-1.448-.894l-3.723 1.861A1.5 1.5 0 0 0 25 15.81v4.38a1.5 1.5 0 0 0 .829 1.342z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerChevronUpFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M27.134 21.884a1.25 1.25 0 0 1-1.768 0l-7.19-7.19a.25.25 0 0 0-.353 0l-7.19 7.19a1.25 1.25 0 0 1-1.767-1.768l8.25-8.25a1.25 1.25 0 0 1 1.768 0l8.25 8.25a1.25 1.25 0 0 1 0 1.768z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerDocumentCompleteFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 8a1 1 0 0 0-1-1h-6a2 2 0 0 0-2 2v18a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V17a1 1 0 0 0-1-1h-4a4 4 0 0 1-4-4V8zm-6 7a1 1 0 0 1 1-1h2a1 1 0 1 1 0 2h-2a1 1 0 0 1-1-1zm1 3.5a1 1 0 1 0 0 2h10a1 1 0 1 0 0-2H13zm0 4.5a1 1 0 1 0 0 2h10a1 1 0 1 0 0-2H13z"}),s.jsx(o("XPlatReactSVG").Path,{d:"M22 14h4.01a.99.99 0 0 0 .7-1.69l-5.02-5.02a.99.99 0 0 0-1.69.7V12a2 2 0 0 0 2 2z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerFaceSparklesFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M22.489 5.582c1.624.27 1.654.3 1.924 1.925a.59.59 0 0 0 1.164 0c.27-1.624.3-1.654 1.925-1.925A.595.595 0 0 0 28 5a.594.594 0 0 0-.498-.582c-1.624-.27-1.654-.3-1.925-1.925a.59.59 0 0 0-1.164 0c-.27 1.625-.3 1.654-1.924 1.925a.59.59 0 0 0 0 1.164zM28.489 11.582c1.624.27 1.654.3 1.924 1.925a.59.59 0 0 0 1.164 0c.27-1.624.3-1.654 1.925-1.925A.595.595 0 0 0 34 11a.594.594 0 0 0-.498-.582c-1.624-.27-1.654-.3-1.925-1.925a.59.59 0 0 0-1.164 0c-.27 1.625-.3 1.654-1.924 1.925a.59.59 0 0 0 0 1.164z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M27 19c0 5.523-4.477 10-10 10S7 24.523 7 19 11.477 9 17 9s10 4.477 10 10zm-13.344-4c-.879 0-1.406.703-1.406 1.875 0 1.172.527 1.875 1.406 1.875.88 0 1.406-.703 1.406-1.875 0-1.172-.527-1.875-1.406-1.875zm6.69 0c-.879 0-1.406.703-1.406 1.875 0 1.172.527 1.875 1.406 1.875.88 0 1.407-.703 1.407-1.875 0-1.172-.528-1.875-1.407-1.875zm-6.774 6.925a1 1 0 0 0-1.144 1.64A7.968 7.968 0 0 0 17 25c1.698 0 3.276-.53 4.572-1.434a1 1 0 0 0-1.144-1.64A5.967 5.967 0 0 1 17 23a5.967 5.967 0 0 1-3.428-1.075z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerInboxFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M25.896 9.537A3 3 0 0 0 22.932 7h-9.864a3 3 0 0 0-2.964 2.537L8.06 22.617a5 5 0 0 0-.06.771V26a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2.612a5 5 0 0 0-.06-.772l-2.044-13.08zM13.068 9.5h9.864a.5.5 0 0 1 .494.423l1.954 12.5a.5.5 0 0 1-.494.577h-2.459a1.5 1.5 0 0 0-1.342.83l-.67 1.34a1.5 1.5 0 0 1-1.342.83h-2.146a1.5 1.5 0 0 1-1.342-.83l-.67-1.34a1.5 1.5 0 0 0-1.342-.83h-2.459a.5.5 0 0 1-.494-.577l1.954-12.5a.5.5 0 0 1 .494-.423z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerMarketplaceFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M12.164 14.88A3 3 0 0 1 6.5 13.5c0-1.03.967-3.294 1.699-4.858C8.674 7.625 9.705 7 10.828 7h14.345c1.122 0 2.153.625 2.628 1.642.732 1.564 1.699 3.827 1.699 4.858a3 3 0 0 1-5.664 1.38c-.066-.126-.276-.126-.342 0a3 3 0 0 1-5.324.008c-.066-.126-.274-.126-.34 0a3 3 0 0 1-5.324-.008c-.066-.126-.276-.126-.342 0zM12.479 17.714a.267.267 0 0 0-.288 0 4.976 4.976 0 0 1-3.086.77c-.315-.024-.605.211-.605.528v7.984a2 2 0 0 0 2 2h4a1 1 0 0 0 1-1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5a1 1 0 0 0 1 1h4a2 2 0 0 0 2-2v-7.984c0-.317-.29-.552-.605-.527a4.976 4.976 0 0 1-3.086-.77.267.267 0 0 0-.288 0c-.776.496-1.7.785-2.691.785-.99 0-1.911-.288-2.687-.783a.267.267 0 0 0-.286 0 4.975 4.975 0 0 1-2.687.783 4.976 4.976 0 0 1-2.691-.786z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerMessageDotsFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 28.074c6.394 0 11-4.467 11-10.57v-.002c0-6.103-4.606-10.498-11-10.498-6.392 0-10.998 4.395-11 10.498v.002c.001 2.091.415 3.98 1.384 5.562.458.747.563 1.664.29 2.5l-.728 2.41c-.2.614.373 1.188.964.986l3.668-1.125a4.26 4.26 0 0 1 2.39-.09c.953.232 1.967.327 3.032.327zM13 19.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm6.5-1.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0zm5 0a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPhoneIncomingFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M27.507 13.096a.93.93 0 0 1-.456 1.566l-5.918 1.315a.93.93 0 0 1-1.11-1.11l1.315-5.918a.93.93 0 0 1 1.566-.456l1.418 1.418a.25.25 0 0 0 .353 0l2.618-2.618a1 1 0 1 1 1.414 1.414l-2.618 2.618a.25.25 0 0 0 0 .354l1.418 1.417z"}),s.jsx(o("XPlatReactSVG").Path,{d:"M28.176 25.975c-.607.95-1.353 1.868-2.423 2.224-3.528 1.174-8.462-1.187-12.614-5.338-4.151-4.152-6.512-9.086-5.338-12.614.356-1.07 1.274-1.816 2.224-2.423a2.05 2.05 0 0 1 2.151-.037c.343.207.675.435.963.723a11.587 11.587 0 0 1 2.112 2.889c.299.579.213 1.271-.158 1.807l-1.453 2.098a.472.472 0 0 0-.055.437 11.554 11.554 0 0 0 2.63 4.045 11.557 11.557 0 0 0 4.044 2.63.472.472 0 0 0 .437-.056l2.098-1.453c.536-.37 1.228-.457 1.808-.158 1.04.536 2.016 1.24 2.888 2.112.288.288.516.62.723.963a2.05 2.05 0 0 1-.037 2.15z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPhoneMissedFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M28.707 7.293a1 1 0 0 1 0 1.414l-2.616 2.616a.25.25 0 0 0 0 .354l2.616 2.616a1 1 0 0 1-1.414 1.414l-2.616-2.616a.25.25 0 0 0-.354 0l-2.616 2.616a1 1 0 0 1-1.414-1.414l2.616-2.616a.25.25 0 0 0 0-.354l-2.616-2.616a1 1 0 0 1 1.414-1.414l2.616 2.616a.25.25 0 0 0 .354 0l2.616-2.616a1 1 0 0 1 1.414 0z"}),s.jsx(o("XPlatReactSVG").Path,{d:"M28.176 25.975c-.607.95-1.353 1.868-2.423 2.224-3.528 1.174-8.462-1.187-12.614-5.338-4.151-4.152-6.512-9.086-5.338-12.614.356-1.07 1.274-1.816 2.224-2.423a2.05 2.05 0 0 1 2.151-.037c.343.207.675.435.963.723a11.587 11.587 0 0 1 2.112 2.889c.299.579.213 1.271-.158 1.807l-1.453 2.098a.472.472 0 0 0-.055.437 11.554 11.554 0 0 0 2.63 4.045 11.557 11.557 0 0 0 4.044 2.63.472.472 0 0 0 .437-.056l2.098-1.453c.536-.37 1.228-.457 1.808-.158 1.04.536 2.016 1.24 2.888 2.112.288.288.516.62.723.963a2.05 2.05 0 0 1-.037 2.15z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPhoneOutgoingFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M21.493 9.904a.93.93 0 0 1 .456-1.566l5.918-1.315a.93.93 0 0 1 1.11 1.11l-1.315 5.918a.93.93 0 0 1-1.566.456l-1.418-1.418a.25.25 0 0 0-.353 0l-2.618 2.618a1 1 0 0 1-1.414-1.414l2.618-2.618a.25.25 0 0 0 0-.354l-1.418-1.417z"}),s.jsx(o("XPlatReactSVG").Path,{d:"M28.176 25.975c-.607.95-1.353 1.868-2.423 2.224-3.528 1.174-8.462-1.187-12.614-5.338-4.151-4.152-6.512-9.086-5.338-12.614.356-1.07 1.274-1.816 2.224-2.423a2.05 2.05 0 0 1 2.151-.037c.343.207.675.435.963.723a11.587 11.587 0 0 1 2.112 2.889c.299.579.213 1.271-.158 1.807l-1.453 2.098a.472.472 0 0 0-.055.437 11.554 11.554 0 0 0 2.63 4.045 11.557 11.557 0 0 0 4.044 2.63.472.472 0 0 0 .437-.056l2.098-1.453c.536-.37 1.228-.457 1.808-.158 1.04.536 2.016 1.24 2.888 2.112.288.288.516.62.723.963a2.05 2.05 0 0 1-.037 2.15z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPhotoLibraryFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M17.5 19.75a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12.75c0 .138.112.25.25.25H27a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H15a3 3 0 0 1-3-3v-2.75a.25.25 0 0 0-.25-.25H9a3 3 0 0 1-3-3V10a3 3 0 0 1 3-3h12a3 3 0 0 1 3 3v2.75zM21 9.5H9a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h2.75a.25.25 0 0 0 .25-.25V16a3 3 0 0 1 3-3h6.25a.25.25 0 0 0 .25-.25V10a.5.5 0 0 0-.5-.5zM14.5 16a.5.5 0 0 1 .5-.5h12a.5.5 0 0 1 .5.5v7.577a.25.25 0 0 1-.375.217l-3.725-2.15a4.8 4.8 0 0 0-4.8 0l-3.725 2.15a.25.25 0 0 1-.375-.217V16z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerShieldFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M8.34 10.61c-.52.227-.84.75-.84 1.319v.073C7.5 23 15 29 18 29s10.5-6 10.5-16.998v-.073c0-.569-.32-1.092-.84-1.319-.809-.351-1.652-.655-2.529-.972-1.918-.692-4-1.444-6.247-2.88a1.644 1.644 0 0 0-1.768 0c-2.246 1.436-4.329 2.188-6.247 2.88-.877.317-1.72.62-2.529.973z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerSidebarLeftFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M10 13.25a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1-.75-.75zM10 16.25a.75.75 0 0 1 .75-.75h2a.75.75 0 0 1 0 1.5h-2a.75.75 0 0 1-.75-.75zM10.75 18.5a.75.75 0 0 0 0 1.5h2a.75.75 0 0 0 0-1.5h-2z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M9 8a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h18a3 3 0 0 0 3-3V11a3 3 0 0 0-3-3H9zm6 3a.5.5 0 0 0-.5-.5H9a.5.5 0 0 0-.5.5v14a.5.5 0 0 0 .5.5h5.5a.5.5 0 0 0 .5-.5V11zm3-.5a.5.5 0 0 0-.5.5v14a.5.5 0 0 0 .5.5h9a.5.5 0 0 0 .5-.5V11a.5.5 0 0 0-.5-.5h-9z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerSupervisionUserType",[],(function(t,n,r,o,a,i){var e=Object.freeze({TEEN:1,GUARDIAN:2});i.default=e}),66);
__d("getCurrentDateInfo",["ServerTime"],(function(t,n,r,o,a,i,l){"use strict";var e=["SUNDAY","MONDAY","TUESDAY","WEDNESDAY","THURSDAY","FRIDAY","SATURDAY"];function s(){var t=o("ServerTime").getMillis(),n=new Date(t).getDay(),r=e[n];n===0&&(n=7);var a=new Date(t).setHours(0,0,0,0);return{currentDay:n,currentDayName:r,currentServerTimestamp:t,midnightTimestamp:a}}l.default=s}),98);
__d("getEligibleIntervalsForSpecificDay",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.quietTimeIntervals,n=e.specificDay;return t.filter(function(e){return e.enforcedDays.split(",").includes(String(n))})}i.default=e}),66);
__d("getMWFamilyCenterCurrentTimeInformation",[],(function(t,n,r,o,a,i){"use strict";function e(){var e,t=new Date;return{timestamp:t.getTime(),timezoneId:(e=Intl.DateTimeFormat().resolvedOptions().timeZone)!=null?e:"America/New_York",timezoneOffset:t.getTimezoneOffset()}}i.default=e}),66);
__d("getMWFamilyCenterFormattedReport",["FBLogger","I64","QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return t.startTime.timezoneId!==t.endTime.timezoneId&&(r("QPLUserFlow").addPoint(r("qpl")._(25306191,"2077"),"different-timezones"),r("FBLogger")("messenger_web_wellbeing").warn("Start and end times must have same timezone",t.startTime.timezoneId,t.endTime.timezoneId)),{endTimestampSec:(e||(e=o("I64"))).of_int32(t.endTime.timestamp/1e3),startTimestampSec:e.of_int32(t.startTime.timestamp/1e3),timeZoneId:t.endTime.timezoneId}}l.default=s}),98);
__d("getMWFamilyCenterIsNotTooCloseTimestamps",["DateConsts"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return Math.abs(e-t)>=o("DateConsts").MS_PER_SEC}l.default=e}),98);
__d("getTimestampFromSeconds",["DateConsts","I64"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.midnightTimestamp,r=t.secondsFromMidnight;return n+(e||(e=o("I64"))).to_int32(r)*o("DateConsts").MS_PER_SEC}l.default=s}),98);
__d("getNextClosestInterval",["getTimestampFromSeconds"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.currentServerTimestamp,n=e.midnightTimestamp,o=e.todayEligibleQuietTimeIntervals;if(o.length===0)return null;var a=null;for(var i of o){var l=r("getTimestampFromSeconds")({midnightTimestamp:n,secondsFromMidnight:i.startTime}),s=r("getTimestampFromSeconds")({midnightTimestamp:n,secondsFromMidnight:i.endTime}),u=t<=s;if(u)if(a!=null){var c=r("getTimestampFromSeconds")({midnightTimestamp:n,secondsFromMidnight:a.startTime});l<c&&(a=i)}else a=i}return a!=null?a:null}l.default=e}),98);
__d("getTimerInfoFromIntervalTimestamps",["DateConsts"],(function(t,n,r,o,a,i,l){"use strict";var e=10*o("DateConsts").MS_PER_MIN;function s(t){var n=t.currentServerTimestamp,r=t.intervalTimestamps,o=r.startTimestamp-n;return{timeToEndMs:r.endTimestamp-n,timeToReminderMs:o>0?o-e:null,timeToStartMs:o}}l.default=s}),98);
__d("maybeGetOngoingOrNextIntervalTimestamps",["getEligibleIntervalsForSpecificDay","getNextClosestInterval","getTimestampFromSeconds"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.currentDay,n=e.currentServerTimestamp,o=e.midnightTimestamp,a=e.quietTimeIntervals,i=r("getEligibleIntervalsForSpecificDay")({quietTimeIntervals:a,specificDay:t}),l=r("getNextClosestInterval")({currentServerTimestamp:n,midnightTimestamp:o,todayEligibleQuietTimeIntervals:i});return a.length===0||l==null?null:{endTimestamp:r("getTimestampFromSeconds")({midnightTimestamp:o,secondsFromMidnight:l.endTime}),startTimestamp:r("getTimestampFromSeconds")({midnightTimestamp:o,secondsFromMidnight:l.startTime})}}l.default=e}),98);
__d("maybeGetOverNightOngoingIntervalTimestamps",["DateConsts","I64","getTimestampFromSeconds"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.currentDay,a=t.currentServerTimestamp,i=t.midnightTimestamp,l=t.quietTimeIntervals;for(var s of l){var u=n!==1?n-1:7,c=s.enforcedDays.split(",").includes(String(u)),d=(e||(e=o("I64"))).to_int32(s.endTime),m=d>o("DateConsts").SEC_PER_DAY,p=r("getTimestampFromSeconds")({midnightTimestamp:i,secondsFromMidnight:e.of_int32(d-o("DateConsts").SEC_PER_DAY)}),_=p>=a;if(c&&m&&_)return{endTimestamp:p,startTimestamp:i}}return null}l.default=s}),98);
__d("useDeviceAlertCountQuery.graphql",["MAWDeviceChangeState-resolver"],(function(t,n,r,o,a,i){"use strict";var e={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useDeviceAlertCountQuery",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,fragment:null,kind:"RelayLiveResolver",name:"deviceAlertCount",resolverModule:n("MAWDeviceChangeState-resolver").deviceAlertCount,path:"deviceAlertCount"}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useDeviceAlertCountQuery",selections:[{kind:"ClientExtension",selections:[{name:"deviceAlertCount",args:null,fragment:null,kind:"RelayResolver",storageKey:null,isOutputType:!0}]}]},params:{cacheID:"6e4038dfa7eed674d7e97d2aca3aeb1f",id:null,metadata:{},name:"useDeviceAlertCountQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("useDeviceAlertCount",["CometRelay","MAWStateContext.react","gkx","react-compiler-runtime","useDeviceAlertCountQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var e=u;return o("MAWStateContext.react").useMAWSelector(e)}function u(e){return e.unArchivedSelfDeviceChangeAlerts}function c(){var t,r=o("react-compiler-runtime").c(2),a,i;r[0]===Symbol.for("react.memo_cache_sentinel")?(a=e!==void 0?e:e=n("useDeviceAlertCountQuery.graphql"),i={},r[0]=a,r[1]=i):(a=r[0],i=r[1]);var l=o("CometRelay").useClientQuery(a,i);return(t=l.deviceAlertCount)!=null?t:0}var d=r("gkx")("12254")?c:s;l.useDeviceAlertCount=d}),98);
__d("useMWDailyTimeLimitEnforcementQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25193236367032587"}),null);
__d("useMWDailyTimeLimitEnforcementQuery.graphql",["useMWDailyTimeLimitEnforcementQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:null,kind:"LocalArgument",name:"timezoneID"},t={defaultValue:null,kind:"LocalArgument",name:"userID"},r=[{kind:"Variable",name:"supervised_user_id",variableName:"userID"}],o=[{kind:"Literal",name:"controls_use_case_filter_params",value:{usecase:"MESSENGER"}}],a={alias:null,args:null,concreteType:"XIGScreenTimePeriodicDailyLimit",kind:"LinkedField",name:"periodic_daily_limits",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"daily_limit_before_override_seconds",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"day_of_week",storageKey:null}],storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"periodic_daily_limits_enabled",storageKey:null},l={alias:null,args:null,concreteType:"XFBYouthPlatformInsights",kind:"LinkedField",name:"insights",plural:!1,selections:[{alias:null,args:o,concreteType:"XFBYouthPlatformScreenTimeInsights",kind:"LinkedField",name:"screen_time",plural:!1,selections:[{alias:null,args:[{kind:"Variable",name:"time_zone_id",variableName:"timezoneID"}],concreteType:"XFBXMFCScreenTimeInsightsScreenTime",kind:"LinkedField",name:"today_screen_time",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"screen_time_seconds",storageKey:null}],storageKey:null}],storageKey:'screen_time(controls_use_case_filter_params:{"usecase":"MESSENGER"})'}],storageKey:null};return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"useMWDailyTimeLimitEnforcementQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:r,concreteType:"XFBYouthPlatformSupervisedUser",kind:"LinkedField",name:"supervised_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformControls",kind:"LinkedField",name:"controls",plural:!1,selections:[{alias:null,args:o,concreteType:"XFBYouthPlatformScreenTimeControls",kind:"LinkedField",name:"screen_time",plural:!1,selections:[a,i],storageKey:'screen_time(controls_use_case_filter_params:{"usecase":"MESSENGER"})'}],storageKey:null},l],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"useMWDailyTimeLimitEnforcementQuery",selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformApi",kind:"LinkedField",name:"xfb_youth_platform",plural:!1,selections:[{alias:null,args:r,concreteType:"XFBYouthPlatformSupervisedUser",kind:"LinkedField",name:"supervised_user",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBYouthPlatformControls",kind:"LinkedField",name:"controls",plural:!1,selections:[{alias:null,args:o,concreteType:"XFBYouthPlatformScreenTimeControls",kind:"LinkedField",name:"screen_time",plural:!1,selections:[a,i,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:'screen_time(controls_use_case_filter_params:{"usecase":"MESSENGER"})'}],storageKey:null},l],storageKey:null}],storageKey:null}]},params:{id:n("useMWDailyTimeLimitEnforcementQuery_facebookRelayOperation"),metadata:{live:{config_id:""}},name:"useMWDailyTimeLimitEnforcementQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("useMWDailyTimeLimitEnforcement",["Actor","CometRelay","DateConsts","JSResourceForInteraction","getCurrentDateInfo","react","useMWDailyTimeLimitEnforcementQuery.graphql","useMWXLazyDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useEffect,d=u.useRef,m=r("JSResourceForInteraction")("MWDailyTimeLimitReminderDialog.react").__setRef("useMWDailyTimeLimitEnforcement"),p=10*o("DateConsts").MS_PER_MIN,_=e!==void 0?e:e=n("useMWDailyTimeLimitEnforcementQuery.graphql");function f(){var e,t=o("Actor").useActor(),n=t[0],a=(e=Intl.DateTimeFormat().resolvedOptions().timeZone)!=null?e:"UTC",i=r("useMWXLazyDialog")(m),l=i[0],s=d(-1),u=o("CometRelay").useLazyLoadQuery(_,{timezoneID:a,userID:n},{fetchPolicy:"store-and-network"}),f=g(u),h=f.currentDay,C=f.isEnabled,b=f.isEnforced,v=f.timeUntilDTLEnforcementMs;return c(function(){v!=null&&C&&v>0&&v<=p&&(s.current===-1||!y(h,s.current))&&(s.current=h,l({timeUntilDTLEnforcementMs:v}))},[l,v,C,s,h]),{isEnforced:b}}function g(e){var t=h(e),n=t.dailyLimitMsByDay,o=t.isEnabled,a=t.todayScreenTimeMs,i=r("getCurrentDateInfo")(),l=i.currentDay,s=i.currentDayName,u=n.get(s),c=u!=null?u-a:null,d=o&&c!=null&&c<=0;return{currentDay:l,isEnabled:o,isEnforced:d,timeUntilDTLEnforcementMs:d?null:c}}function h(e){var t,n,r,a,i,l,s,u=(t=e==null||(n=e.xfb_youth_platform)==null?void 0:n.supervised_user)!=null?t:{},c=u.controls,d=u.insights,m=new Map((r=c==null||(a=c.screen_time)==null||(a=a.periodic_daily_limits)==null?void 0:a.map(function(e){var t;return[e.day_of_week,((t=e.daily_limit_before_override_seconds)!=null?t:0)*o("DateConsts").MS_PER_SEC]}))!=null?r:[]);return{dailyLimitMsByDay:m,isEnabled:!!(!(c==null||(i=c.screen_time)==null)&&i.periodic_daily_limits_enabled),todayScreenTimeMs:((l=d==null||(s=d.screen_time)==null||(s=s.today_screen_time)==null?void 0:s.screen_time_seconds)!=null?l:0)*o("DateConsts").MS_PER_SEC}}function y(e,t){return e===t}l.default=f}),98);
__d("useMWFamilyCenterIsAllowedRoute",["I64","LSIntEnum","ReQL","ReQLSuspense","react-compiler-runtime","useMWInboxURIState","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n,a=o("react-compiler-runtime").c(17),l=(u||(u=r("useReStore")))(),c=o("useMWInboxURIState").useMWInboxURIState(),d;a[0]!==c.type||a[1]!==c.uriStateDetails?(d=null,c.type===o("useMWInboxURIState").MWInboxURIStateTag.Recent&&c.uriStateDetails.type===o("useMWInboxURIState").MWInboxURIStateDetailsType.Thread&&(d=c.uriStateDetails.fbid),a[0]=c.type,a[1]=c.uriStateDetails,a[2]=d):d=a[2];var m=(n=t.supervisor)==null?void 0:n.id,p;a[3]!==d||a[4]!==l||a[5]!==m?(p=function(){return d!=null&&m!=null?o("ReQL").fromTableAscending(l.tables.participants).getKeyRange(d,m):o("ReQL").empty()},a[3]=d,a[4]=l,a[5]=m,a[6]=p):p=a[6];var _;a[7]!==d||a[8]!==l||a[9]!==m?(_=[d,l,m],a[7]=d,a[8]=l,a[9]=m,a[10]=_):_=a[10];var f=o("ReQLSuspense").useFirst(p,_,i.id+":42"),g;a[11]!==d||a[12]!==l?(g=function(){return d!=null?o("ReQL").fromTableAscending(l.tables.threads).getKeyRange(d):o("ReQL").empty()},a[11]=d,a[12]=l,a[13]=g):g=a[13];var h;a[14]!==d||a[15]!==l?(h=[d,l],a[14]=d,a[15]=l,a[16]=h):h=a[16];var y=o("ReQLSuspense").useFirst(g,h,i.id+":51"),C=y?(e||(e=o("I64"))).equal(y.threadType,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(y.threadType,(s||(s=o("LSIntEnum"))).ofNumber(15)):!1;if(f&&C)return!0;if(d!=null){var b,v=m,S=(b=t.thread)==null?void 0:b.threadKey,R=[v,S],L=R.filter(function(t){return t!=null&&d!=null?(e||(e=o("I64"))).equal(t,d):!1}).filter(Boolean).length>0;if(L)return!0}return!1}l.default=c}),98);
__d("useMWFamilyCenterReportScreenTime",["FBLogger","LSFactory","LSInsertScreenTimeRecordAndUploadToServerStoredProcedure","LSSupervisionEnabledForScreenTimeStoredProcedure","QPLUserFlow","getMWFamilyCenterFormattedReport","qpl","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t=o("react-compiler-runtime").c(2),n=(e||(e=r("useReStore")))(),a;return t[0]!==n?(a=function(t){n.runInTransaction(_,"readonly",void 0,void 0,i.id+":37").then(function(e){var o=e[0];o?n.runInTransaction(function(e){return r("LSInsertScreenTimeRecordAndUploadToServerStoredProcedure")(r("LSFactory")(e),r("getMWFamilyCenterFormattedReport")(t))},"readwrite",void 0,void 0,i.id+":46").then(p).catch(m):r("QPLUserFlow").endCancel(r("qpl")._(25306191,"2077"),{annotations:{string:{reason:"supervision-disabled"}}})}).catch(d)},t[0]=n,t[1]=a):a=t[1],a}function d(e){r("QPLUserFlow").endFailure(r("qpl")._(25306191,"2077"),"fetch-enabled-failure"),r("FBLogger")("messenger_web_wellbeing").mustfix("Error fetching Supervision Enabled",e)}function m(e){r("QPLUserFlow").endFailure(r("qpl")._(25306191,"2077"),"submit-report-failure"),r("FBLogger")("messenger_web_wellbeing").mustfix("Error reporting screen time",e)}function p(){r("QPLUserFlow").endSuccess(r("qpl")._(25306191,"2077"))}function _(e){return r("LSSupervisionEnabledForScreenTimeStoredProcedure")(r("LSFactory")(e))}l.default=c}),98);
__d("useMWFamilyCenterScreenTimeTracker",["DateConsts","FBLogger","QPLUserFlow","clearTimeout","getMWFamilyCenterCurrentTimeInformation","getMWFamilyCenterIsNotTooCloseTimestamps","qpl","react","setTimeout","useGlobalEventListener","useMWFamilyCenterReportScreenTime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=10*o("DateConsts").MS_PER_MIN;function p(e){var t=r("useMWFamilyCenterReportScreenTime")(),n=d(),o=d(null);function a(){o.current!==null&&(r("clearTimeout")(o.current),o.current=null)}var i=e,l=u(function(e){var o=e===void 0?{isReportingOnDisable:!1}:e,l=o.isReportingOnDisable;if(!(i&&!l)){var s=n.current;if(s==null){r("QPLUserFlow").endFailure(r("qpl")._(25306191,"2077"),"end-time-without-start"),r("FBLogger")("messenger_web_wellbeing").mustfix("Trying to end a report without starting one");return}var u=r("getMWFamilyCenterCurrentTimeInformation")();r("getMWFamilyCenterIsNotTooCloseTimestamps")(s.timestamp,u.timestamp)?t({endTime:u,startTime:s}):r("QPLUserFlow").endCancel(r("qpl")._(25306191,"2077"),{annotations:{string:{reason:"too-close-timestamps"}}}),n.current=null,a()}},[i,t]),s=u(function(){var e=document.hasFocus();i||!e||(r("QPLUserFlow").start(r("qpl")._(25306191,"2077")),n.current=r("getMWFamilyCenterCurrentTimeInformation")(),a(),o.current=r("setTimeout")(function(){r("QPLUserFlow").addPoint(r("qpl")._(25306191,"2077"),"automatic-report-timer-fired"),l(),s()},m))},[i,l]);c(function(){return s(),function(){r("QPLUserFlow").endCancel(r("qpl")._(25306191,"2077"),{annotations:{string:{reason:"hook-unmounted"}}}),a()}},[s]),c(function(){var e=n.current!=null,t=i&&e;t&&l({isReportingOnDisable:!0})},[i,l]),r("useGlobalEventListener")("focus",s),r("useGlobalEventListener")("blur",function(){l()}),r("useGlobalEventListener")("beforeunload",function(){l()})}l.default=p}),98);
__d("useMWFamilyCenterSupervisor",["I64","LSIntEnum","MAWThreadCutover","MessengerSupervisionUserType","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useMemo;function m(){var t,n=o("react-compiler-runtime").c(31),a=(e||(e=r("useReStore")))(),l;n[0]!==a.tables.contacts||n[1]!==a.tables.supervision_edge?(l=function(){return o("ReQL").fromTableAscending(a.tables.supervision_edge).filter(p).map(function(e){var t=e.targetUserId;return o("ReQLSuspense").first(o("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(t),i.id+":43")})},n[0]=a.tables.contacts,n[1]=a.tables.supervision_edge,n[2]=l):l=n[2];var c;n[3]!==a?(c=[a],n[3]=a,n[4]=c):c=n[4];var d=o("ReQLSuspense").useFirst(l,c,i.id+":34"),m;n[5]!==d?(m=d?(s||(s=o("I64"))).to_string(d.id):null,n[5]=d,n[6]=m):m=n[6];var _=o("MAWThreadCutover").useGetCutoverSecureThreadKey(m),f;n[7]!==_||n[8]!==(d==null?void 0:d.id)?(f=_!=null?(s||(s=o("I64"))).of_string(_):d==null?void 0:d.id,n[7]=_,n[8]=d==null?void 0:d.id,n[9]=f):f=n[9];var g=f,h;n[10]!==a.tables.threads||n[11]!==g?(h=function(){return g!=null?o("ReQL").fromTableAscending(a.tables.threads).getKeyRange(g):o("ReQL").empty()},n[10]=a.tables.threads,n[11]=g,n[12]=h):h=n[12];var y;n[13]!==a||n[14]!==g?(y=[a,g],n[13]=a,n[14]=g,n[15]=y):y=n[15];var C=o("ReQLSuspense").useFirst(h,y,i.id+":55"),b=(t=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(a.tables.supervision_metadata).take(1)},[a],i.id+":61"))==null?void 0:t.supervisionStatus;C==null||C.threadKey,C==null||C.threadType;var v;e:{var S;if(d==null){var R;n[16]!==b?(R={supervisionStatus:b,supervisor:null,thread:null},n[16]=b,n[17]=R):R=n[17],v=R;break e}var L;n[18]!==d.firstName||n[19]!==d.id||n[20]!==d.name?(L={firstName:d.firstName,id:d.id,name:d.name},n[18]=d.firstName,n[19]=d.id,n[20]=d.name,n[21]=L):L=n[21];var E=(S=C==null?void 0:C.threadKey)!=null?S:d.id,k;if(n[22]!==(C==null?void 0:C.threadType)){var I;k=(I=C==null?void 0:C.threadType)!=null?I:(u||(u=o("LSIntEnum"))).ofNumber(1),n[22]=C==null?void 0:C.threadType,n[23]=k}else k=n[23];var T;n[24]!==E||n[25]!==k?(T={threadKey:E,threadType:k},n[24]=E,n[25]=k,n[26]=T):T=n[26];var D;n[27]!==b||n[28]!==T||n[29]!==L?(D={supervisionStatus:b,supervisor:L,thread:T},n[27]=b,n[28]=T,n[29]=L,n[30]=D):D=n[30],v=D}return v}function p(e){return(s||(s=o("I64"))).equal(e.targetUserType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessengerSupervisionUserType").GUARDIAN))}l.default=m}),98);
__d("useMWWatchQuietTime",["DateConsts","I64","JSResourceForInteraction","MessengerWebQuietTime","ReQL","clearTimeout","getCurrentDateInfo","getTimerInfoFromIntervalTimestamps","maybeGetOngoingOrNextIntervalTimestamps","maybeGetOverNightOngoingIntervalTimestamps","promiseDone","react","react-compiler-runtime","setTimeout","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useMemo,p=c.useRef,_=c.useState,f=r("JSResourceForInteraction")("MWScheduledBreakReminderDialog.react").__setRef("useMWWatchQuietTime");function g(){var t=o("react-compiler-runtime").c(7),n=(e||(e=r("useReStore")))(),a=r("useMWXLazyDialog")(f),i=a[0],l=!1,s=_(null),u=s[0],c=s[1],m=p(null),g=p(null),y=p(null),C=p(null),b;t[0]===Symbol.for("react.memo_cache_sentinel")?(b=function(){var e;(e=r("clearTimeout"))(m.current),m.current=null,e(g.current),g.current=null,e(y.current),y.current=null,e(C.current),C.current=null},t[0]=b):b=t[0];var v=b,S;t[1]!==n.tables.msgr_quiet_time||t[2]!==i?(S=function(){var e=!0,t=null;a({useServerInitialData:!0}),t=n.tables.msgr_quiet_time.subscribe(function(){a()});function a(e){var t=e===void 0?{useServerInitialData:!1}:e,a=t.useServerInitialData;v(),a?l(h(),!0):r("promiseDone")(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(n.tables.msgr_quiet_time)).then(function(e){l(e,!1)}))}function l(t,n){if(e){if(t.length===0){c(null);return}var l=r("getCurrentDateInfo")(),s=l.currentDay,u=l.currentServerTimestamp,d=l.midnightTimestamp,p=r("maybeGetOverNightOngoingIntervalTimestamps")({currentDay:s,currentServerTimestamp:u,midnightTimestamp:d,quietTimeIntervals:t}),_=p!=null?p:r("maybeGetOngoingOrNextIntervalTimestamps")({currentDay:s,currentServerTimestamp:u,midnightTimestamp:d,quietTimeIntervals:t});if(!_){c(null);var f=d+o("DateConsts").MS_PER_DAY-u;y.current=r("setTimeout")(function(){a()},f);return}var h=r("getTimerInfoFromIntervalTimestamps")({currentServerTimestamp:u,intervalTimestamps:_}),b=h.timeToStartMs>0;b&&c(null),h.timeToReminderMs!=null&&!n&&(C.current=r("setTimeout")(function(){i({intervalInfo:_})},h.timeToReminderMs)),m.current=r("setTimeout")(function(){c(_)},h.timeToStartMs),g.current=r("setTimeout")(function(){a()},h.timeToEndMs)}}return(function(){e=!1,v(),t==null||t()})},t[1]=n.tables.msgr_quiet_time,t[2]=i,t[3]=S):S=t[3];var R;return t[4]!==n||t[5]!==i?(R=[n,!1,i],t[4]=n,t[5]=i,t[6]=R):R=t[6],d(S,R),u}function h(){return r("MessengerWebQuietTime").msgr_quiet_time.map(function(e){return{endTime:(s||(s=o("I64"))).of_string(e.endTime),enforcedDays:e.enforcedDays,quietTimeId:s.of_string(e.quietTimeId),startTime:s.of_string(e.startTime)}})}l.default=g}),98);
__d("useMWFamilyCenterEnforcements",["react","react-compiler-runtime","useMWDailyTimeLimitEnforcement","useMWFamilyCenterContext","useMWFamilyCenterIsAllowedRoute","useMWFamilyCenterScreenTimeTracker","useMWFamilyCenterSupervisor","useMWWatchQuietTime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo,d={supervisor:null,thread:null};function m(){var e,t=o("react-compiler-runtime").c(8),n=r("useMWWatchQuietTime")(),a=n!=null,i=r("useMWDailyTimeLimitEnforcement")(),l=i!=null&&i.isEnforced,s=a||l;r("useMWFamilyCenterScreenTimeTracker")(s);var c=r("useMWFamilyCenterSupervisor")(),m=c!=null?c:d,p=(e=r("useMWFamilyCenterIsAllowedRoute")(m))!=null?e:!1,_=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),f=_.setFamilyCenterData,g,h;t[0]!==n||t[1]!==s||t[2]!==p||t[3]!==f||t[4]!==l||t[5]!==m?(g=function(){f({currentActiveScheduledBreakInterval:n,hasActiveMsgrFamilyCenterEnforcement:s,isAllowedRoute:p,shouldHideSidebar:s&&p,shouldShowDailyTimeLimit:l,supervisorData:m})},h=[n,s,p,l,m,f],t[0]=n,t[1]=s,t[2]=p,t[3]=f,t[4]=l,t[5]=m,t[6]=g,t[7]=h):(g=t[6],h=t[7]),u(g,h)}l.default=m}),98);
__d("useMWSettingsButtonSecurityAlertsBadge",["react","useDeviceAlertCount","useMAWSecurityAlertsPreferences"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){var e=r("useMAWSecurityAlertsPreferences")(),t=e.securityAlertsPreferences,n=o("useDeviceAlertCount").useDeviceAlertCount();return t==null||t.allowSecurityAlertForSelf,t!=null&&t.allowSecurityAlertForSelf&&n>0?n:null}l.default=u}),98);
__d("useMWV2RedirectToLatestReadThread",["I64","LSIntEnum","MAWODSProxy","ReQL","WAOdsEnums","getFirstReadThread","promiseDone","react","react-compiler-runtime","useCurrentRoute","useMWInboxURIState","useMWNavigation","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useCallback,p=d.useEffect,_=d.useRef,f={contents:!1};function g(){var t=o("react-compiler-runtime").c(13),n=(e||(e=r("useReStore")))(),a=r("useCurrentRoute")(),i=_(a==null?void 0:a.url),l=_(!1),c;t[0]!==(a==null?void 0:a.url)?(c=function(){i.current!==(a==null?void 0:a.url)&&(l.current=!0)},t[0]=a==null?void 0:a.url,t[1]=c):c=t[1];var d;t[2]!==a?(d=[a],t[2]=a,t[3]=d):d=t[3],p(c,d);var m=r("useMWNavigation")(),g;t[4]!==n||t[5]!==m?(g=function(){var e=!1;if(i.current!=null){var t=o("useMWInboxURIState").getRouteTokens(i.current);if(t.length>=3)e=!1;else e:switch(t.length){case 0:{e=!1;break e}case 1:{e=t[0]==="";break e}case 2:t:switch(t[1]){case"":case"t":{e=!0;break t}default:e=!1}}}if(e&&!f.contents&&!l.current){f.contents=!0,r("promiseDone")(r("getFirstReadThread")(n).then(function(e){if(e!=null)return o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_DEPRECATED_REDIRECT,key:"called"}),m.openInbox({clientThreadKey:e.clientThreadKey,threadKey:e.threadKey,threadType:e.threadType},"inboxInitialLoad")}));return}},t[4]=n,t[5]=m,t[6]=g):g=t[6];var h=g,y;t[7]!==n.tables.sync_groups||t[8]!==h?(y=function(){var e=n.tables.sync_groups.subscribe(function(){r("promiseDone")(o("ReQL").firstExnAsync(o("ReQL").fromTableAscending(n.tables.sync_groups).getKeyRange((s||(s=o("LSIntEnum"))).ofNumber(95))),function(t){var n=t.syncStatus;(u||(u=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(2))&&(h(),e())})});return e},t[7]=n.tables.sync_groups,t[8]=h,t[9]=y):y=t[9];var C;t[10]!==n||t[11]!==h?(C=[n,i,h],t[10]=n,t[11]=h,t[12]=C):C=t[12],p(y,C)}l.default=g}),98);/*FB_PKG_DELIM*/
__d("EBLSResignCdnUrlDeferred",["gkx","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("EBLSResignCdnUrl").__setRef("EBLSResignCdnUrlDeferred");function s(t){return e.load().then(function(e){return r("gkx")("12896")?e.resignCdnUrlUsingEbdb(t):e.DEPRECATED_eblsResignCdnUrlWithGraphQL(t)})}l.eblsResignCdnUrlWithGraphQL=s}),98);
__d("EncryptedBackupsUtils",["FBLogger","WAJids","WAStanzaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return Date.now()-t>o("WATimeUtils").DAY_MILLISECONDS*30},s=function(t){return Date.now()-t>o("WATimeUtils").DAY_MILLISECONDS*30};function u(e,t,n,r,o){var a={frankingTag:r==null?void 0:r.frankingTag,reportingTag:r==null?void 0:r.reportingTag},i={frankingMetadata:a,messageId:t,senderId:e,timestampMs:n};return{encryptedTransportMessage:o,metadata:i}}function c(e){return JSON.stringify([e.author,e.chat,e.externalId])}function d(e){var t=JSON.parse(e);if(!Array.isArray(t))throw r("FBLogger")("wmi_eb").mustfixThrow("Unable to parse msg id string as proper json");if(t.length!==3)throw r("FBLogger")("wmi_eb").mustfixThrow("Parsed array should have 3 components");var n=o("WAJids").unsafeCoerceToUserJid(t[0]),a=o("WAJids").unsafeCoerceToChatJid(t[1]),i=o("WAStanzaUtils").toStanzaId(t[2]);return{author:n,chat:a,externalId:i}}l.entryOlderThan30Days=e,l.timestampOlderThan30Days=s,l.asBackupMessage=u,l.convertWAMsgIdToStringId=c,l.convertStringIdToWAMsgId=d}),98);
__d("MAWArmadilloAppDataTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={},b={},v={},S={},R={},L={};s.name="ProtocolMsgId",s.internalSpec={externalId:[1,(e=o("WAProtoConst")).TYPES.STRING],author:[2,e.TYPES.STRING],chat:[3,e.TYPES.STRING]},u.name="MetaSyncMessageKeyProto",u.internalSpec={fromMe:[1,e.TYPES.BOOL],id:[2,e.TYPES.STRING]},c.name="MetaSyncMessageProto",c.internalSpec={key:[1,e.TYPES.MESSAGE,u],ts:[2,e.TYPES.INT64]},d.name="MetaSyncMessageRangeProto",d.internalSpec={lastMessageTimestamp:[1,e.TYPES.INT64],lastSystemMessageTimestamp:[2,e.TYPES.INT64],messages:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,c]},m.name="MetaSyncChatActionProto",m.internalSpec={type:[1,e.TYPES.STRING],chatJid:[2,e.TYPES.STRING],archived:[3,e.TYPES.BOOL],ts:[4,e.TYPES.INT64],messageRange:[5,e.TYPES.MESSAGE,d],read:[6,e.TYPES.BOOL]},p.name="MetaSyncMessageActionProto",p.internalSpec={type:[1,e.TYPES.STRING],protocolMsgId:[2,e.TYPES.MESSAGE,s]},_.name="MetaSyncActionProto",_.internalSpec={chatAction:[1,e.TYPES.MESSAGE,m],messageAction:[2,e.TYPES.MESSAGE,p],__oneofs__:{action:["chatAction","messageAction"]}},f.name="MetaSyncAppDataProto",f.internalSpec={actions:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_]},g.name="EncryptedBackupsSecretsEpochProto",g.internalSpec={id:[1,e.TYPES.UINT64],anonId:[2,e.TYPES.BYTES],rootKey:[3,e.TYPES.BYTES],status:[4,e.TYPES.INT32]},h.name="EncryptedBackupsSecretsProto",h.internalSpec={backupId:[1,e.TYPES.UINT64],serverDataId:[2,e.TYPES.UINT64],epoch:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,g],tempOcmfClientState:[4,e.TYPES.BYTES],mailboxRootKey:[5,e.TYPES.BYTES],obliviousValidationToken:[6,e.TYPES.BYTES]},y.name="FingerprintProto",y.internalSpec={currentIndex:[1,e.TYPES.UINT32],deviceIndexes:[2,e.FLAGS.REPEATED|e.TYPES.UINT32],rawId:[3,e.TYPES.UINT32]},C.name="SyncKeyDataProto",C.internalSpec={keyId:[1,e.TYPES.BYTES],keyData:[2,e.TYPES.BYTES],keyEpoch:[3,e.TYPES.UINT32],timestamp:[4,e.TYPES.INT64],fingerprint:[5,e.TYPES.MESSAGE,y]},b.name="SyncKeyShareProto",b.internalSpec={keys:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,C],orphanKeys:[2,e.FLAGS.REPEATED|e.TYPES.BYTES]},v.name="SyncKeyRequestProto",v.internalSpec={keyIds:[1,e.FLAGS.REPEATED|e.TYPES.BYTES]},S.name="AppDataProto",S.internalSpec={type:[1,e.TYPES.STRING],actions:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_],encryptedBackupsSecrets:[3,e.TYPES.MESSAGE,h],syncKeyShare:[4,e.TYPES.MESSAGE,b],syncKeyRequest:[5,e.TYPES.MESSAGE,v]},R.name="IdentitiesPerDeviceProto",R.internalSpec={deviceJid:[1,e.TYPES.STRING],serializedPubKey:[2,e.TYPES.BYTES],baseKey:[3,e.TYPES.BYTES]},L.name="AppDataTableSchemaProto",L.internalSpec={externalId:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64],contents:[3,e.TYPES.MESSAGE,S],permittedIdentitiesPerDevice:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,R],ack:[5,e.TYPES.INT32],appDataId:[6,e.TYPES.INT32],recipientDevices:[7,e.FLAGS.REPEATED|e.TYPES.STRING],sendPartial:[8,e.TYPES.BOOL]},l.ProtocolMsgIdSpec=s,l.MetaSyncMessageKeyProtoSpec=u,l.MetaSyncMessageProtoSpec=c,l.MetaSyncMessageRangeProtoSpec=d,l.MetaSyncChatActionProtoSpec=m,l.MetaSyncMessageActionProtoSpec=p,l.MetaSyncActionProtoSpec=_,l.MetaSyncAppDataProtoSpec=f,l.EncryptedBackupsSecretsEpochProtoSpec=g,l.EncryptedBackupsSecretsProtoSpec=h,l.FingerprintProtoSpec=y,l.SyncKeyDataProtoSpec=C,l.SyncKeyShareProtoSpec=b,l.SyncKeyRequestProtoSpec=v,l.AppDataProtoSpec=S,l.IdentitiesPerDeviceProtoSpec=R,l.AppDataTableSchemaProtoSpec=L}),98);
__d("MAWArmadilloAppMetaTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="DbAppMetaValuesProto",s.internalSpec={msgTypeVersion:[1,(e=o("WAProtoConst")).TYPES.INT32],hmacKey:[2,e.TYPES.BYTES],allowSecurityAlert:[3,e.TYPES.BOOL],hotlikeSticker:[4,e.TYPES.BYTES],isBackfilledForOccamadillo:[5,e.TYPES.BOOL],allowSecurityAlertForSelf:[11,e.TYPES.BOOL],hasMigratedFromDexie:[12,e.TYPES.BOOL],restoreMigrationAttempts:[13,e.TYPES.INT32],deviceJid:[14,e.TYPES.STRING],restoreToDexieMigrationComplete:[15,e.TYPES.BOOL],dbMigrationVersion:[16,e.TYPES.INT32]},u.name="AppMetaTableSchemaProto",u.internalSpec={key:[1,e.TYPES.STRING],value:[2,e.TYPES.MESSAGE,s]},l.DbAppMetaValuesProtoSpec=s,l.AppMetaTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloCollectionVersionsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="CollectionVersionsTableSchemaProto",s.internalSpec={collection:[1,(e=o("WAProtoConst")).TYPES.STRING],version:[2,e.TYPES.INT32],state:[3,e.TYPES.STRING],finiteFailureStartTime:[4,e.TYPES.INT64],ltHash:[5,e.TYPES.BYTES],isCollectionInMacMismatchFatal:[6,e.TYPES.BOOL],isCollectionLthashInconsistent:[7,e.TYPES.BOOL]},l.CollectionVersionsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloContactsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="EphemeralSettingProto",s.internalSpec={ephemeralExpirationInSec:[1,(e=o("WAProtoConst")).TYPES.UINT32],ephemeralLastUpdatedOrSetTimestamp:[2,e.TYPES.INT64]},u.name="EphemeralSyncResponseBackoffInfo",u.internalSpec={syncResponseRetries:[1,e.TYPES.INT32],syncResponseSentTs:[2,e.TYPES.INT64]},l.EphemeralSettingProtoSpec=s,l.EphemeralSyncResponseBackoffInfoSpec=u}),98);
__d("MAWArmadilloDeletedMessagesTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="DeletedMessagesTableSchemaProto",s.internalSpec={author:[1,(e=o("WAProtoConst")).TYPES.STRING],chat:[2,e.TYPES.STRING],externalId:[3,e.TYPES.STRING],reason:[4,e.TYPES.STRING]},l.DeletedMessagesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloDeviceChangeAlertsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="DeviceChangeAlertsTableSchemaProto",s.internalSpec={action:[1,(e=o("WAProtoConst")).TYPES.STRING],isArchived:[2,e.TYPES.BOOL],deviceChangeAlertsId:[3,e.TYPES.INT64],location:[4,e.TYPES.STRING],model:[5,e.TYPES.STRING],ts:[6,e.TYPES.INT64],loggedOut:[7,e.TYPES.BOOL],deviceJid:[8,e.TYPES.STRING],identity:[9,e.TYPES.BYTES],platform:[10,e.TYPES.STRING],latitude:[11,e.TYPES.STRING],longitude:[12,e.TYPES.STRING],isConfirmed:[13,e.TYPES.BOOL],isNotified:[14,e.TYPES.BOOL]},l.DeviceChangeAlertsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloDyiBatchTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={BACKUP_RESTORE:0,E2E_DYI:1},u={};u.name="DyiBatchTableSchemaProto",u.internalSpec={batchId:[1,(e=o("WAProtoConst")).TYPES.INT32],numMessages:[2,e.TYPES.INT32],oldestTs:[3,e.TYPES.INT64],threadId:[4,e.TYPES.STRING],isThread:[5,e.TYPES.BOOL],numMessagesRestored:[6,e.TYPES.INT32],qplInstanceKeyForThread:[7,e.TYPES.INT64],qplFlowDescriptor:[8,e.TYPES.ENUM,s],qplInstanceKeyE2E:[9,e.TYPES.INT64],numThreadsRestored:[10,e.TYPES.INT64]},l.DYI_BATCH_TABLE_SCHEMA_PROTO_QPL_FLOW_DESCRIPTOR=s,l.DyiBatchTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloEBMsgRangesTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="EBMsgRangesTableSchemaProto",s.internalSpec={rangeId:[1,(e=o("WAProtoConst")).TYPES.UINT32],threadJid:[2,e.TYPES.STRING],minMsgExternalId:[3,e.TYPES.STRING],maxMsgExternalId:[4,e.TYPES.STRING],minMsgSortOrderMs:[5,e.TYPES.UINT64],maxMsgSortOrderMs:[6,e.TYPES.UINT64],creationTime:[7,e.TYPES.INT64]},l.EBMsgRangesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={},f={},g={},h={},y={};s.name="MsgContentProto",s.internalSpec={content:[1,(e=o("WAProtoConst")).TYPES.STRING],adminMsgContent:[2,e.FLAGS.REPEATED|e.TYPES.STRING],adminType:[3,e.TYPES.STRING],obsoleteExpiration:[4,e.TYPES.INT32],obsoleteTs:[5,e.TYPES.INT64],subtype:[6,e.TYPES.STRING],protobuf:[7,e.TYPES.BYTES],screenshotActionType:[8,e.TYPES.INT32],authorName:[9,e.TYPES.STRING],version:[10,e.TYPES.INT32],mentionedJids:[11,e.FLAGS.REPEATED|e.TYPES.STRING],commands:[12,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u]},u.name="MsgContentCommandProto",u.internalSpec={commandType:[1,e.TYPES.INT32],offset:[2,e.TYPES.INT32],length:[3,e.TYPES.INT32],validationToken:[4,e.TYPES.STRING]},c.name="ReportingMetaProto",c.internalSpec={frankingTag:[1,e.TYPES.BYTES],frankingVersion:[2,e.TYPES.INT32],reportingContent:[3,e.TYPES.BYTES],reportingTag:[4,e.TYPES.BYTES],frankingKey:[5,e.TYPES.BYTES]},d.name="DbQuotedMsgProto",d.internalSpec={remoteJid:[1,e.TYPES.STRING],content:[2,e.TYPES.MESSAGE,h]},m.name="VideoMsgContentProto",m.internalSpec={duration:[1,e.TYPES.INT32],width:[2,e.TYPES.INT32],height:[3,e.TYPES.INT32],mimetype:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],jpegThumbnailHeight:[6,e.TYPES.INT32],jpegThumbnailWidth:[7,e.TYPES.INT32]},p.name="ImageMsgContentProto",p.internalSpec={width:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],jpegThumbnail:[3,e.TYPES.BYTES],jpegThumbnailHeight:[4,e.TYPES.INT32],jpegThumbnailWidth:[5,e.TYPES.INT32]},_.name="AudioMsgContentProto",_.internalSpec={duration:[1,e.TYPES.INT32],mimetype:[2,e.TYPES.STRING],played:[3,e.TYPES.BOOL],waveform:[4,e.TYPES.BYTES]},f.name="DocumentFileMsgContentProto",f.internalSpec={filename:[1,e.TYPES.STRING],mimetype:[2,e.TYPES.STRING]},g.name="QuotedDbMediaProto",g.internalSpec={mediaType:[1,e.TYPES.STRING],plaintextHash:[2,e.TYPES.STRING],size:[3,e.TYPES.INT32],ts:[4,e.TYPES.INT64],mediaEntry:[5,e.TYPES.BYTES],validatedVideoInfo:[6,e.TYPES.MESSAGE,m],validatedImageInfo:[7,e.TYPES.MESSAGE,p],validatedAudioInfo:[8,e.TYPES.MESSAGE,_],validatedDocumentFileInfo:[9,e.TYPES.MESSAGE,f]},h.name="DbQuotedMsgContentProto",h.internalSpec={type:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64],externalId:[3,e.TYPES.STRING],author:[4,e.TYPES.STRING],msgContent:[5,e.TYPES.MESSAGE,s],obsoleteMedia:[6,e.TYPES.MESSAGE,g],msgId:[7,e.TYPES.STRING],mediaId:[8,e.TYPES.INT32],sourceId:[9,e.TYPES.STRING],xmaMessageType:[10,e.TYPES.INT32],specialTextSize:[11,e.TYPES.INT32],plaintextHash:[12,e.TYPES.STRING],expirationTs:[13,e.TYPES.INT64]},y.name="MessagesTableSchemaProto",y.internalSpec={type:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64],externalId:[3,e.TYPES.STRING],msgId:[4,e.TYPES.STRING],author:[5,e.TYPES.STRING],ack:[6,e.TYPES.INT32],resendCount:[7,e.TYPES.INT32],msgContent:[8,e.TYPES.MESSAGE,s],altIndex:[9,e.TYPES.STRING],forwardingScore:[10,e.TYPES.INT32],quote:[11,e.TYPES.MESSAGE,d],messageExpirationTs:[12,e.TYPES.INT64],ephemeralSetting:[13,e.TYPES.MESSAGE,o("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],revokedExternalId:[14,e.TYPES.STRING],isForwarded:[15,e.TYPES.BOOL],originalTs:[17,e.TYPES.INT64],sortOrderMs:[18,e.TYPES.INT64],reportingMeta:[19,e.TYPES.MESSAGE,c],messageDeleteTs:[20,e.TYPES.INT64],ephemeralCounterStarted:[21,e.TYPES.BOOL],quoteExternalId:[22,e.TYPES.STRING],unsendMsgContentDeleteTs:[23,e.TYPES.INT64],rowId:[24,e.TYPES.INT32],thread:[25,e.TYPES.INT32],mediaId:[26,e.TYPES.INT32],ephemeralMsgDisappeared:[27,e.TYPES.BOOL],threadJid:[28,e.TYPES.STRING],xmaId:[29,e.TYPES.INT32],specialTextSize:[30,e.TYPES.INT32],xmaMessageType:[31,e.TYPES.INT32],isExpiredXmaMsg:[32,e.TYPES.BOOL],ravenEphemeralType:[33,e.TYPES.INT32],ravenEphemeralMediaState:[34,e.TYPES.INT32],editCount:[35,e.TYPES.INT32],groupId:[36,e.TYPES.STRING],groupIndex:[37,e.TYPES.INT64],groupSize:[38,e.TYPES.INT64],receiverFetchId:[39,e.TYPES.STRING],source:[40,e.TYPES.STRING],quoteExpirationTs:[41,e.TYPES.INT64],applicationErrorCode:[42,e.TYPES.INT32],hdType:[43,e.TYPES.INT32],pollStanzaId:[44,e.TYPES.STRING],collapsibleId:[45,e.TYPES.STRING],isCollapsed:[46,e.TYPES.BOOL]},l.MsgContentProtoSpec=s,l.MsgContentCommandProtoSpec=u,l.ReportingMetaProtoSpec=c,l.DbQuotedMsgProtoSpec=d,l.VideoMsgContentProtoSpec=m,l.ImageMsgContentProtoSpec=p,l.AudioMsgContentProtoSpec=_,l.DocumentFileMsgContentProtoSpec=f,l.QuotedDbMediaProtoSpec=g,l.DbQuotedMsgContentProtoSpec=h,l.MessagesTableSchemaProtoSpec=y}),98);
__d("MAWArmadilloEditMsgHistoryTableSchema.pb",["MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="EditMsgHistoryTableSchemaProto",s.internalSpec={author:[1,(e=o("WAProtoConst")).TYPES.STRING],editMsgHistoryId:[2,e.TYPES.INT32],editTs:[3,e.TYPES.INT64],msgContent:[4,e.TYPES.MESSAGE,o("MAWArmadilloMessagesTableSchema.pb").MsgContentProtoSpec],originalMsgExternalId:[5,e.TYPES.STRING],specialTextSize:[6,e.TYPES.INT32],threadJid:[7,e.TYPES.STRING],editExternalId:[8,e.TYPES.STRING],sendStatus:[9,e.TYPES.INT32]},l.EditMsgHistoryTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloGroupInfoTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="GroupInfoSchemaProto",s.internalSpec={groupJid:[1,(e=o("WAProtoConst")).TYPES.STRING],threadId:[2,e.TYPES.INT32],creator:[3,e.TYPES.STRING],creationTs:[4,e.TYPES.INT64],name:[5,e.TYPES.STRING],nameOwner:[6,e.TYPES.STRING],nameTs:[7,e.TYPES.INT64],msgExpiration:[8,e.TYPES.INT32],participantVersion:[9,e.TYPES.STRING],inviter:[10,e.TYPES.STRING],memberAddMode:[11,e.TYPES.STRING]},l.GroupInfoSchemaProtoSpec=s}),98);
__d("MAWArmadilloGroupInvitesTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="GroupInvitesTableSchemaProto",s.internalSpec={inviterJid:[1,(e=o("WAProtoConst")).TYPES.STRING],invitedParticipantId:[2,e.TYPES.STRING],inviteCode:[3,e.TYPES.STRING],inviteExpirationTs:[4,e.TYPES.INT64],caption:[5,e.TYPES.STRING]},l.GroupInvitesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloMediaTablesSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={NONE:0,LQ_4K:1,HQ_4K:2},u={},c={},d={},m={},p={},_={},f={},g={},h={};u.name="ChunkTableSchemaProto",u.internalSpec={plaintextHash:[1,(e=o("WAProtoConst")).TYPES.STRING],blobData:[2,e.TYPES.BYTES],mimetype:[3,e.TYPES.STRING],hashedPlaintextHash:[4,e.TYPES.STRING],chunkId:[5,e.TYPES.INT32]},c.name="MediaBackupSchemaProto",c.internalSpec={mediaBackupId:[1,e.TYPES.INT32],mediaId:[2,e.TYPES.INT32],objectId:[3,e.TYPES.STRING],msgId:[4,e.TYPES.STRING],fbid:[5,e.TYPES.STRING]},d.name="MediaEntriesProto",d.internalSpec={msgId:[1,e.TYPES.STRING],mediaEntryData:[2,e.TYPES.BYTES]},m.name="VideoMsgContentProto",m.internalSpec={duration:[1,e.TYPES.UINT32],width:[2,e.TYPES.UINT32],height:[3,e.TYPES.UINT32],mimetype:[4,e.TYPES.STRING],jpegThumbnail:[5,e.TYPES.BYTES],jpegThumbnailHeight:[6,e.TYPES.UINT32],jpegThumbnailWidth:[7,e.TYPES.UINT32],thumbnailPlaintextHash:[8,e.TYPES.STRING],gifPlayback:[9,e.TYPES.BOOL]},p.name="ImageMsgContentProto",p.internalSpec={width:[1,e.TYPES.UINT32],height:[2,e.TYPES.UINT32],jpegThumbnail:[3,e.TYPES.BYTES],jpegThumbnailHeight:[4,e.TYPES.UINT32],jpegThumbnailWidth:[5,e.TYPES.UINT32],thumbnailPlaintextHash:[6,e.TYPES.STRING],hdType:[7,e.TYPES.ENUM,s]},_.name="AudioMsgContentProto",_.internalSpec={duration:[1,e.TYPES.UINT32],mimetype:[2,e.TYPES.STRING],played:[3,e.TYPES.BOOL],waveform:[4,e.TYPES.BYTES]},f.name="DocumentFileMsgContentProto",f.internalSpec={filename:[1,e.TYPES.STRING],mimetype:[2,e.TYPES.STRING]},g.name="ValidatedResult",g.internalSpec={validatedMimeType:[1,e.TYPES.STRING],videoStreamType:[2,e.TYPES.STRING],videoCalculatedFps:[3,e.TYPES.UINT32],videoNominalFps:[4,e.TYPES.UINT32],videoWidth:[5,e.TYPES.UINT32],videoHeight:[6,e.TYPES.UINT32],videoDuration:[7,e.TYPES.UINT32],videoAvgBitsPerSecond:[8,e.TYPES.UINT32],audioStreamType:[9,e.TYPES.STRING],audioSamplingRate:[10,e.TYPES.UINT32],audioNumberOfChannels:[11,e.TYPES.UINT32],audioAvgBitsPerSecond:[12,e.TYPES.UINT32]},h.name="MediaTableSchemaProto",h.internalSpec={mediaType:[1,e.TYPES.STRING],plaintextHash:[2,e.TYPES.STRING],size:[3,e.TYPES.UINT64],mediaEntries:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d],ts:[5,e.TYPES.INT64],validatedVideoInfo:[6,e.TYPES.MESSAGE,m],validatedImageInfo:[7,e.TYPES.MESSAGE,p],validatedAudioInfo:[8,e.TYPES.MESSAGE,_],hashedPlaintextHash:[9,e.TYPES.STRING],mediaId:[10,e.TYPES.INT32],msgIds:[11,e.FLAGS.REPEATED|e.TYPES.STRING],objectId:[12,e.TYPES.STRING],fbid:[13,e.TYPES.STRING],validatedDocumentFileInfo:[14,e.TYPES.MESSAGE,f],validatedResult:[15,e.TYPES.MESSAGE,g],accessibilitySummaryText:[16,e.TYPES.STRING],isVideoGif:[17,e.TYPES.BOOL]},l.HD_TYPE=s,l.ChunkTableSchemaProtoSpec=u,l.MediaBackupSchemaProtoSpec=c,l.MediaEntriesProtoSpec=d,l.VideoMsgContentProtoSpec=m,l.ImageMsgContentProtoSpec=p,l.AudioMsgContentProtoSpec=_,l.DocumentFileMsgContentProtoSpec=f,l.ValidatedResultSpec=g,l.MediaTableSchemaProtoSpec=h}),98);
__d("MAWArmadilloMissingKeysTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="DeviceResponse",s.internalSpec={deviceId:[1,(e=o("WAProtoConst")).TYPES.INT32],deviceResponse:[2,e.TYPES.BOOL]},u.name="MissingKeysTableSchemaProto",u.internalSpec={keyHex:[1,e.TYPES.STRING],keyId:[2,e.TYPES.BYTES],timestamp:[3,e.TYPES.INT64],deviceResponses:[4,e.FLAGS.REPEATED|e.TYPES.MESSAGE,s]},l.DeviceResponseSpec=s,l.MissingKeysTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloParticipantsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ParticipantsTableSchemaProto",s.internalSpec={id:[1,(e=o("WAProtoConst")).TYPES.STRING],userJid:[2,e.TYPES.STRING],deliveredWatermarkTs:[3,e.TYPES.INT64],lastReadWatermarkTs:[4,e.TYPES.INT64],type:[5,e.TYPES.STRING],addressable:[6,e.TYPES.BOOL],lastReadActionTs:[7,e.TYPES.INT64],threadId:[9,e.TYPES.INT32],threadJid:[10,e.TYPES.STRING]},l.ParticipantsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloPendingMutationsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={SET:0,REMOVE:1},u={};u.name="PendingMutationsTableSchemaProto",u.internalSpec={id:[1,(e=o("WAProtoConst")).TYPES.INT32],collection:[2,e.TYPES.STRING],index:[3,e.TYPES.STRING],binarySyncAction:[4,e.TYPES.BYTES],version:[5,e.TYPES.INT32],operation:[6,e.TYPES.ENUM,s],timestamp:[7,e.TYPES.INT64],action:[8,e.TYPES.STRING]},l.SYNCD_MUTATION_SYNCD_OPERATION=s,l.PendingMutationsTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="PersonalSenderKeyStatusTableSchemaProto",s.internalSpec={groupJid:[1,(e=o("WAProtoConst")).TYPES.STRING],senderKeyId:[2,e.TYPES.INT32],rotateSenderKey:[4,e.TYPES.BOOL],senderKeyTs:[5,e.TYPES.INT64],hasSenderKey:[6,e.FLAGS.REPEATED|e.TYPES.STRING]},l.PersonalSenderKeyStatusTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloPollTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={OPEN:0,FROZEN:1},u={},c={},d={},m={};u.name="PollOptionProto",u.internalSpec={optionText:[1,(e=o("WAProtoConst")).TYPES.STRING],voteAuthors:[2,e.FLAGS.REPEATED|e.TYPES.STRING]},c.name="PollOptionsProto",c.internalSpec={pollOptionHash:[1,e.TYPES.STRING],pollOption:[2,e.TYPES.MESSAGE,u]},d.name="LatestSenderTimestampsMsProto",d.internalSpec={author:[1,e.TYPES.STRING],latestSenderTimestampMs:[2,e.TYPES.INT64]},m.name="PollTableSchemaProto",m.internalSpec={chatJid:[1,e.TYPES.STRING],encKey:[2,e.TYPES.BYTES],pollAuthor:[3,e.TYPES.STRING],pollStanzaId:[4,e.TYPES.STRING],pollOptions:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,c],pollParticipantCount:[6,e.TYPES.UINT32],pollState:[7,e.TYPES.ENUM,s],selectableOptionsCount:[8,e.TYPES.UINT32],title:[9,e.TYPES.STRING],latestSenderTimestampsMs:[10,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d]},l.POLL_STATE=s,l.PollOptionProtoSpec=u,l.PollOptionsProtoSpec=c,l.LatestSenderTimestampsMsProtoSpec=d,l.PollTableSchemaProtoSpec=m}),98);
__d("MAWArmadilloReactionsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ReactionsTableSchemaProto",s.internalSpec={ack:[1,(e=o("WAProtoConst")).TYPES.INT32],author:[2,e.TYPES.STRING],externalId:[3,e.TYPES.STRING],reactionId:[4,e.TYPES.STRING],reactToExternalId:[5,e.TYPES.STRING],reactToAuthor:[6,e.TYPES.STRING],reactToMsgId:[7,e.TYPES.STRING],threadJid:[8,e.TYPES.STRING],reaction:[9,e.TYPES.STRING],groupingKey:[10,e.TYPES.STRING],ts:[11,e.TYPES.INT64],rowId:[12,e.TYPES.INT32],senderTimestampMs:[13,e.TYPES.INT64]},l.ReactionsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloReceiptTablesSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={},c={},d={},m={},p={},_={};s.name="DbUserStatusTsProto",s.internalSpec={deliveredTs:[1,(e=o("WAProtoConst")).TYPES.INT64],readTs:[2,e.TYPES.INT64]},u.name="StatusTsPerUserProto",u.internalSpec={userJid:[1,e.TYPES.STRING],dbUserStatusTs:[2,e.TYPES.MESSAGE,s]},c.name="IdentitiesPerDeviceProto",c.internalSpec={deviceJid:[1,e.TYPES.STRING],serializedPubKey:[2,e.TYPES.BYTES],baseKey:[3,e.TYPES.BYTES]},d.name="RetryCountPerDeviceProto",d.internalSpec={deviceJid:[1,e.TYPES.STRING],count:[2,e.TYPES.INT32]},m.name="ReceiptsTableSchemaProto",m.internalSpec={msgId:[1,e.TYPES.STRING],statusTsPerUser:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u],permittedIdentitiesPerDevice:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,c],recipientDevices:[4,e.FLAGS.REPEATED|e.TYPES.STRING],retryCountsPerDevice:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,d],waMsgId:[6,e.TYPES.STRING]},p.name="Receipts",p.internalSpec={device:[1,e.TYPES.STRING],ts:[2,e.TYPES.INT64]},_.name="PendingReceiptsTableSchemaProto",_.internalSpec={pendingReceiptId:[1,e.TYPES.STRING],thread:[2,e.TYPES.STRING],externalId:[3,e.TYPES.STRING],author:[4,e.TYPES.STRING],deliveryReceipts:[5,e.FLAGS.REPEATED|e.TYPES.MESSAGE,p],readReceipts:[6,e.FLAGS.REPEATED|e.TYPES.MESSAGE,p]},l.DbUserStatusTsProtoSpec=s,l.StatusTsPerUserProtoSpec=u,l.IdentitiesPerDeviceProtoSpec=c,l.RetryCountPerDeviceProtoSpec=d,l.ReceiptsTableSchemaProtoSpec=m,l.ReceiptsSpec=p,l.PendingReceiptsTableSchemaProtoSpec=_}),98);
__d("MAWArmadilloReceiverFetchInfoTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ReceiverFetchInfoTableSchemaProto",s.internalSpec={mimetype:[1,(e=o("WAProtoConst")).TYPES.STRING],previewHeight:[2,e.TYPES.UINT32],previewWidth:[3,e.TYPES.UINT32],receiverFetchId:[4,e.TYPES.STRING],type:[5,e.TYPES.STRING],previewUrl:[6,e.TYPES.STRING],previewUrlExpirationTimestampMs:[7,e.TYPES.UINT64],accessibilitySummaryText:[8,e.TYPES.STRING]},l.ReceiverFetchInfoTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloSyncActionsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="SyncActionsTableSchemaProto",s.internalSpec={index:[1,(e=o("WAProtoConst")).TYPES.STRING],binarySyncData:[2,e.TYPES.BYTES],actionState:[3,e.TYPES.STRING],version:[4,e.TYPES.INT32],keyId:[5,e.TYPES.BYTES],modelId:[6,e.TYPES.STRING],modelType:[7,e.TYPES.STRING],indexMac:[8,e.TYPES.BYTES],valueMac:[9,e.TYPES.BYTES],collection:[10,e.TYPES.STRING],timestamp:[11,e.TYPES.INT64],action:[12,e.TYPES.STRING]},l.SyncActionsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloSyncKeysTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="SyncKeyFingerprint",s.internalSpec={currentIndex:[1,(e=o("WAProtoConst")).TYPES.INT32],deviceIndexes:[2,e.FLAGS.REPEATED|e.TYPES.INT32],rawId:[3,e.TYPES.INT64]},u.name="SyncKeysTableSchemaProto",u.internalSpec={id:[1,e.TYPES.BYTES],keyId:[2,e.TYPES.BYTES],keyData:[3,e.TYPES.BYTES],keyEpoch:[4,e.TYPES.INT64],timestamp:[5,e.TYPES.INT64],fingerprint:[6,e.TYPES.MESSAGE,s]},l.SyncKeyFingerprintSpec=s,l.SyncKeysTableSchemaProtoSpec=u}),98);
__d("MAWArmadilloTasksTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e={};e.name="TasksTableSchemaProto",e.internalSpec={taskName:[1,o("WAProtoConst").TYPES.STRING],scheduledTime:[2,o("WAProtoConst").TYPES.INT64]},l.TasksTableSchemaProtoSpec=e}),98);
__d("MAWArmadilloThreadsTableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="ThreadsTableSchemaProto",s.internalSpec={jid:[1,(e=o("WAProtoConst")).TYPES.STRING],threadOrder:[2,e.TYPES.STRING],folder:[4,e.TYPES.INT32],newestMsg:[5,e.TYPES.STRING],oldestMsg:[6,e.TYPES.STRING],lastReadMsg:[7,e.TYPES.STRING],lastReadMsgReceiptSent:[8,e.TYPES.STRING],lastReadMsgTs:[9,e.TYPES.INT64],newestMsgTs:[10,e.TYPES.INT64],muteExpireTimeMs:[11,e.TYPES.INT64],muteCallsExpireTimeMs:[12,e.TYPES.INT64],archived:[13,e.TYPES.BOOL],cannotReplyReason:[14,e.TYPES.STRING],chatId:[15,e.TYPES.INT32],optimisticThreadKey:[16,e.TYPES.STRING],isMigratedLocally:[17,e.TYPES.BOOL],snippetMsg:[18,e.TYPES.STRING],deduplicationKey:[19,e.TYPES.STRING],authoritativeThreadKey:[20,e.TYPES.STRING],snippetMsgTs:[21,e.TYPES.INT64],didInsertDualThreadCutoverAdminMsg:[22,e.TYPES.BOOL],unbumpFromTs:[23,e.TYPES.INT64],unbumpToTs:[24,e.TYPES.INT64]},l.ThreadsTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloUnrenderedMessagesTableSchema.pb",["MAWArmadilloContactsTableSchema.pb","MAWArmadilloMessagesTableSchema.pb","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={};s.name="UnrenderedMessagesTableSchemaProto",s.internalSpec={type:[1,(e=o("WAProtoConst")).TYPES.STRING],ts:[2,e.TYPES.INT64],externalId:[3,e.TYPES.STRING],msgId:[4,e.TYPES.STRING],author:[5,e.TYPES.STRING],ack:[6,e.TYPES.INT32],resendCount:[7,e.TYPES.INT32],ephemeralSetting:[8,e.TYPES.MESSAGE,o("MAWArmadilloContactsTableSchema.pb").EphemeralSettingProtoSpec],messageDeleteForMeTs:[9,e.TYPES.INT64],rowId:[10,e.TYPES.INT32],thread:[11,e.TYPES.INT32],mediaId:[12,e.TYPES.INT32],msgContent:[13,e.TYPES.STRING],threadJid:[14,e.TYPES.STRING],reportingMeta:[15,e.TYPES.MESSAGE,o("MAWArmadilloMessagesTableSchema.pb").ReportingMetaProtoSpec],invitedParticipantUserJid:[16,e.TYPES.STRING],groupName:[17,e.TYPES.STRING],quote:[18,e.TYPES.MESSAGE,o("MAWArmadilloMessagesTableSchema.pb").DbQuotedMsgProtoSpec],xmaMessageType:[19,e.TYPES.INT32],sortOrderMs:[20,e.TYPES.INT64]},l.UnrenderedMessagesTableSchemaProtoSpec=s}),98);
__d("MAWArmadilloXMATableSchema.pb",["WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s={},u={};s.name="XMATableSchemaProto",s.internalSpec={associatedMessageId:[1,(e=o("WAProtoConst")).TYPES.STRING],author:[2,e.TYPES.STRING],ctas:[3,e.FLAGS.REPEATED|e.TYPES.MESSAGE,u],defaultCTA:[4,e.TYPES.MESSAGE,u],defaultPreviewMediaId:[5,e.TYPES.INT32],externalId:[6,e.TYPES.STRING],faviconMediaId:[7,e.TYPES.INT32],headerMediaId:[8,e.TYPES.INT32],headerTitle:[9,e.TYPES.STRING],isTombstoned:[10,e.TYPES.BOOL],maxSubtitleNumOfLines:[11,e.TYPES.INT32],maxTitleNumOfLines:[12,e.TYPES.INT32],msgId:[13,e.TYPES.STRING],overlayDescription:[14,e.TYPES.STRING],overlayIconGlyph:[15,e.TYPES.INT32],overlayTitle:[16,e.TYPES.STRING],previewMediaIds:[17,e.FLAGS.REPEATED|e.TYPES.INT32],subtitleText:[18,e.TYPES.STRING],targetExpiringAtSec:[19,e.TYPES.INT64],targetId:[20,e.TYPES.STRING],targetType:[21,e.TYPES.INT32],targetUsername:[22,e.TYPES.STRING],threadJid:[23,e.TYPES.STRING],titleText:[24,e.TYPES.STRING],xmaId:[25,e.TYPES.INT32],xmaLayoutType:[26,e.TYPES.INT32],defaultPreviewMediaPlaintextHash:[27,e.TYPES.STRING],faviconPlaintextHash:[28,e.TYPES.STRING],headerMediaPlaintextHash:[29,e.TYPES.STRING]},u.name="CTAProto",u.internalSpec={buttonType:[1,e.TYPES.INT32],title:[2,e.TYPES.STRING],actionUrl:[3,e.TYPES.STRING],nativeUrl:[4,e.TYPES.STRING],ctaType:[5,e.TYPES.STRING]},l.XMATableSchemaProtoSpec=s,l.CTAProtoSpec=u}),98);
__d("MAWAuthor",["MAWUserJidWrapper","WAJids","isStringNullOrEmpty"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){if(t==null||t===o("WAJids").AUTHOR_SYSTEM)return null;if(o("WAJids").isAuthorMe(t))return o("MAWUserJidWrapper").getMyUserJid();var e=o("WAJids").authorAsUserJid(t);return e==null||r("isStringNullOrEmpty")(o("WAJids").userIdFromJid(e))?null:o("WAJids").authorAsUserJid(t)};l.getAuthorUserJid=e}),98);
__d("MAWAuthoritativeThreadsCache",[],(function(t,n,r,o,a,i){"use strict";var e=new Set;i.AuthoritativeThreadsCache=e}),66);
__d("MAWBridgeReceiverFetchInfo",["WALogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,r,o){var a=o.accessibilitySummaryText,i=o.mimetype,l=o.previewHeight,s=o.previewUrl,u=o.previewUrlExpirationTimestampMs,m=o.previewWidth,p=o.receiverFetchId,_=o.type;return{accessibilitySummaryText:a,mimetype:i,msgId:t,previewHeight:l,previewUrl:s,previewUrlExpirationTimestampMs:d(u),previewWidth:m,receiverFetchId:p,sortOrderMs:c(n,r),threadJid:e,type:_}}function u(e,t,n,r,o){var a=o.mimetype,i=o.previewHeight,l=o.previewWidth,s=o.receiverFetchId,u=o.type;return{mimetype:a,msgId:t,previewHeight:i,previewWidth:l,receiverFetchId:s,sortOrderMs:c(n,r),threadJid:e,type:u}}function c(e,t){return o("WATimeUtils").castToMillisTime(e!=null?e:t*1e3)}function d(t){if(t!=null)try{return o("WATimeUtils").castLongIntToMillisTime(t)}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to cast previewUrlExpirationTimestampMs to millis time: ",""])),t);return}}l.createBridgeReceiverFetchInfoPayloadFromDbInfo=s,l.createBridgeReceiverFetchInfoPayloadFromUnstoredInfo=u}),98);
__d("MAWBridgeTypesCreators",["FBLogger","MAWAudioUtils","MAWDbMsg","MAWImageUtils","MAWMsgType","MAWUserJidWrapper","WAJids","WAMediaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{threadJid:e}}function s(e){var t,n=e.ts;switch(e.type){case o("MAWMsgType").MSG_TYPE.REVOKED:n=(t=e.originalTs)!=null?t:e.ts;break;default:n=o("MAWDbMsg").getCanonicalTsFromMsg(e)}return{msgId:e.msgId,ts:n}}function u(e,t){var n=t.map(s);return{messages:n,threadJid:e}}function c(e){return{ravenMsgId:e.msgId,threadJid:e.threadJid}}function d(e,t){return e.filter(function(e){return t===e.threadJid}).map(function(e){return e.msgId})}function m(e){var t,n,a,i,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R=e.chatJid,L=e.filteredMsgIds,E=e.hasMediaForUI,k=e.hdTypes,I=e.media,T=e.offlineAttachmentId,D=e.ravenSettings,x=e.sortOrderMs,$=e.transportKey;switch(I.mediaType){case"Image":return{duration:null,ephemeralMediaState:D==null?void 0:D.ephemeralMediaState,ephemeralMediaViewMode:D==null?void 0:D.ephemeralMediaViewMode,filesize:I.size,hasMedia:E,hasPreviewMedia:((t=I.validatedImageInfo)==null?void 0:t.jpegThumbnail)!=null,hdTypes:k,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:(n=I.validatedImageInfo)==null?void 0:n.jpegThumbnailHeight,previewHeightLarge:(a=I.validatedImageInfo)==null?void 0:a.height,previewWidth:(i=I.validatedImageInfo)==null?void 0:i.jpegThumbnailWidth,previewWidthLarge:(l=I.validatedImageInfo)==null?void 0:l.width,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)};case"Video":return{duration:((s=I.validatedVideoInfo)==null?void 0:s.duration)!=null?((u=I.validatedVideoInfo)==null?void 0:u.duration)*1e3:0,ephemeralMediaState:D==null?void 0:D.ephemeralMediaState,ephemeralMediaViewMode:D==null?void 0:D.ephemeralMediaViewMode,filesize:I.size,gifPlayback:((c=I.validatedVideoInfo)==null?void 0:c.gifPlayback)===!0||I.isVideoGif===!0,hasMedia:E,hasPreviewMedia:((d=I.validatedVideoInfo)==null?void 0:d.jpegThumbnail)!=null,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:(m=I.validatedVideoInfo)==null?void 0:m.jpegThumbnailHeight,previewHeightLarge:(p=I.validatedVideoInfo)==null?void 0:p.height,previewWidth:(_=I.validatedVideoInfo)==null?void 0:_.jpegThumbnailWidth,previewWidthLarge:(f=I.validatedVideoInfo)==null?void 0:f.width,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)};case"Ptt":return{duration:(g=I.validatedAudioInfo)!=null&&g.duration?I.validatedAudioInfo.duration*1e3:null,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts),waveformData:((h=I.validatedAudioInfo)==null?void 0:h.waveform)!=null?o("MAWAudioUtils").serializeWaveform(I.validatedAudioInfo.waveform):void 0};case"Gif":return{accessibilitySummaryText:(y=I.accessibilitySummaryText)!=null?y:void 0,duration:null,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:I.msgIds,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:(C=I.validatedImageInfo)==null?void 0:C.jpegThumbnailHeight,previewHeightLarge:(b=I.validatedImageInfo)==null?void 0:b.height,previewWidth:(v=I.validatedImageInfo)==null?void 0:v.jpegThumbnailWidth,previewWidthLarge:(S=I.validatedImageInfo)==null?void 0:S.width,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)};case"Sticker":{var P,N,M,w=o("MAWImageUtils").boundHeightWidth((P=I.validatedImageInfo)==null?void 0:P.jpegThumbnailHeight,(N=I.validatedImageInfo)==null?void 0:N.jpegThumbnailWidth,o("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE),A=w.height,F=w.width;return{accessibilitySummaryText:(M=I.accessibilitySummaryText)!=null?M:void 0,duration:null,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:I.msgIds,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:A,previewHeightLarge:A,previewWidth:F,previewWidthLarge:F,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)}}case"DocumentFile":{var O,B={};for(var W of I.mediaEntries){var q=W[0],U=W[1],V=o("WAMediaUtils").mediaEntryDataToRawData(I.plaintextHash,U),H=V.filename;H!=null&&(B[q]=H)}return{defaultFilename:(O=I.validatedDocumentFileInfo)==null?void 0:O.filename,duration:null,filenames:B,filesize:I.size,hasMedia:E,mediaId:I.mediaId,mediaType:I.mediaType,msgIds:L,offlineAttachmentId:T,plaintextHash:I.plaintextHash,previewHeight:null,previewHeightLarge:null,previewWidth:null,previewWidthLarge:null,sortOrderMs:o("WATimeUtils").castToMillisTime(x!=null?x:I.ts*1e3),threadJid:R,transportKey:$,ts:o("WATimeUtils").castToUnixTime(x!=null?x/1e3:I.ts)}}default:throw I.mediaType,r("FBLogger")("messenger_web").mustfixThrow("[createBridgeMedia] Unsupported media type: "+I.mediaType)}}function p(e,t,n){return{chatJid:e,deliveredWatermarkTs:n!=null?n:o("WATimeUtils").castToUnixTime(0),fbid:t,lastReadActionTs:o("WATimeUtils").castToUnixTime(0),lastReadWatermarkTs:o("WATimeUtils").castToUnixTime(0)}}function _(e){var t=e.cannotReplyReason,n=e.folder,r=e.snippetParams,o=e.snippetSenderContactId,a=e.snippetType,i=e.threadJid;return{cannotReplyReason:t,folder:n,snippetContactIDs:r==null?void 0:r.contactIDs,snippetMentionJIDs:r==null?void 0:r.mentionJIDs,snippetParams:r==null?void 0:r.strings,snippetSenderContactId:o,snippetType:a,threadJid:i}}function f(e){return{chatJid:e.groupJid,memberAddMode:e.memberAddMode,threadName:e.name}}var g={snippetContactIDs:[],snippetMentionJIDs:[],snippetParams:[],snippetSenderContactId:null,snippetType:null};function h(e){var t,n=e.bumpTimestampMs,r=e.description,o=e.isMessageAuthorMe,a=e.isUnbump,i=e.skipBumpTimestampValidation,l=e.skipServerThreadBump,s=e.snippetData,u=e.threadJid,c=s==null?g:{snippetContactIDs:s.params.contactIDs,snippetMentionJIDs:(t=s.params.mentionJIDs)!=null?t:[],snippetParams:s.params.strings,snippetSenderContactId:s.senderContactId,snippetType:s.type};return babelHelpers.extends({},c,{bumpTimestampMs:n,description:r,isMessageAuthorMe:o,isUnbump:a,skipBumpTimestampValidation:i!=null?i:!1,skipServerThreadBump:l!=null?l:!1,threadJid:u})}function y(e){var t=e.author,n=e.chatJid,r=e.reaction,a=e.reactToMsgId,i=e.ts;return{actorId:o("WAJids").authorToUserId(t,o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid())),chatJid:n,messageId:a,reaction:r,ts:i}}function C(e){var t=o("WAJids").extractUserId(o("MAWUserJidWrapper").getMyUserJid()),n=e.author,r=e.chatJid,a=e.reactToMsgId;return{actorId:o("WAJids").authorToUserId(n,t),chatJid:r,messageId:a}}function b(e){return{creationTs:e.creationTs,creator:e.creator,groupJid:e.groupJid,msgExpiration:e.msgExpiration,name:e.name,nameOwner:e.nameOwner,nameTs:e.nameTs,participantVersion:e.participantVersion}}function v(e){var t=e.threadJid,n=e.inviteeJid;return{caption:e.caption,inviteCode:e.inviteCode,inviteeId:n,inviteExpireTs:e.inviteExpirationTs,inviterId:o("WAJids").extractUserId(e.inviterJid),threadJid:t}}function S(e){return{threadJid:e}}function R(e,t,n){return{senderId:o("WAJids").extractUserId(t),state:n,threadJid:e}}l.createBridgeUpdateE2EEMetadataParticipants=e,l.createBridgeDeletedMessage=s,l.createBridgeDeleteMessages=u,l.createBridgeRavenAction=c,l.getMsgIdsFilteredByJid=d,l.createBridgeMedia=m,l.createBridgeReceivedReceipt=p,l.createBridgeUpdatedThread=_,l.createBridgeUpdatedGroupInfo=f,l.createBridgeBumpedThreadV2=h,l.createBridgeUpsertReaction=y,l.createBridgeDeleteReaction=C,l.createBridgeGroupInfo=b,l.createBridgeGroupInvite=v,l.createBridgeDeleteGroupInvite=S,l.createBridgeReceivedChatState=R}),98);
__d("MAWCacheServiceBase",["MAWCacheServiceDB","MAWUICacheServicesBase"],(function(t,n,r,o,a,i,l){"use strict";var e=["id"],s=(function(){function t(e){this.$1=new Map,this.namespace=e}var n=t.prototype;return n.$2=function(t){var e;return(e=this.$1.get(t))!=null?e:null},n.updateInMemoryCache=function(t,n){this.$1.set(t,n)},n.updateInMemoryCacheBulk=function(t){var e=this;t.forEach(function(t){var n=t[0],r=t[1];e.updateInMemoryCache(n,r)})},n.getValueFromCache=async function(n){var t=this,r=this.$2(n);if(r!=null)return r;var a=await o("MAWCacheServiceDB").getOrSetupMAWCacheDB(),i=await a.runInTransaction([this.namespace],"readonly",function(e){return e.stores[t.namespace].getByIndex("key",[o("MAWUICacheServicesBase").adjustCacheKey(n)])},"read_from_persisted_"+this.namespace);if(i==null)return null;var l=i.id,s=babelHelpers.objectWithoutPropertiesLoose(i,e);return this.updateInMemoryCache(n,s),s},t})();l.default=s}),98);
__d("MAWDbParticipant",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e+"_"+t}i.craftParticipantId=e}),66);
__d("MAWDbThread",["MAWHexUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return o("MAWHexUtils").orderPreservingHex(e)+"_"+t}l.craftThreadOrder=e}),98);
__d("MAWDexie",["cr:10766"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:10766")}),34);
__d("MAWDexieTable",["MAWDexie","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return Promise.resolve(e)}function s(e){return e.reduce(function(e,t,n){return e.then(function(e){return t(n).then(function(t){return e.push(t),e})})},f([]))}function u(e){return r("MAWDexie").Promise.all(e)}function c(e){return r("MAWDexie").Promise.allSettled(e)}function d(e){return r("MAWDexie").Promise.PSD[e]}function m(e,t){r("MAWDexie").Promise.PSD[e]=t}function p(e){r("MAWDexie").Promise.PSD[e]=void 0}var _=(function(){function t(e,t,n,o){n===void 0&&(n=!0);var a=new(r("MAWDexie"))(e,babelHelpers.extends({},o,{chromeTransactionDurability:"relaxed",modifyChunkSize:r("justknobx")._("3166")}));t(a),this.name=e,this.stores=a,n&&this.open()}var n=t.prototype;return n.open=function(){this.stores.open()},n.close=function(){this.stores.close()},n.transact=function(n,r,o){var t=this;return e(this.stores.transaction(n,r.map(function(e){return t.stores[e]}),async function(){var e=await o();return e}))},babelHelpers.createClass(t,[{key:"tables",get:function(){return this.stores.tables}}])})();function f(e){return r("MAWDexie").Promise.resolve(e)}l.DEXIE_MIN_KEY=o("MAWDexie").Dexie.minKey,l.DEXIE_MAX_KEY=o("MAWDexie").Dexie.maxKey,l.undexify=e,l.dexieSequentialAll=s,l.dexieAll=u,l.dexieAllSettled=c,l.getDexiePSDItem=d,l.setDexiePSDItem=m,l.clearDexiePSDItem=p,l.DexieTable=_,l.dexieResolve=f}),98);
__d("MAWDbSchema.dexie",["FBLogger","MAWDbMsg","MAWDbParticipant","MAWDbThread","MAWDbVersionList","MAWDexie","MAWDexieTable","MAWFolderTypes","MAWLocalizationType","MAWODSProxy","MAWTimeUtils","WAJids","WALogger","WAMsg","WAMsgType","WAOdsEnums","WAStanzaUtils","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(t){var e=function(t){var e,n=(e=t.quote)==null?void 0:e.content;return t.quoteExternalId!=null&&(n==null?void 0:n.media)!=null};return t.messages.where("quoteExternalId").between(o("WAStanzaUtils").toStanzaId("0"),o("WAStanzaUtils").toStanzaId("["),!0,!0).filter(e).toArray().catch(function(){return t.messages.filter(e).toArray()}).then(function(e){var n=new Set(e.map(function(e){var t,n,r=(t=e.quote)==null?void 0:t.content;return r==null||(n=r.media)==null?void 0:n.plaintextHash}).filter(Boolean)),r=e.map(function(e){var t=e.msgId;return t});return t.media.filter(function(e){var t=e.plaintextHash;return n.has(t)}).toArray().then(function(e){var n=new Map(e.map(function(e){var t=e.mediaId,n=e.plaintextHash;return[n,t]}));return t.messages.where("msgId").anyOf(r).modify(function(e){var t,r=(t=e.quote)==null?void 0:t.content;e.quote.content.mediaId=n.get(r.media.plaintextHash),delete e.quote.content.media})})})},c=function(t){return t.groupInfo.toCollection().modify(function(e){typeof e.inviter=="number"&&delete e.inviter})},d=function(){return o("MAWDexieTable").dexieResolve()},m=function(t){return t.threads.filter(function(e){return o("WAJids").switchOnMsgrChatJidType(e.jid,{group:function(){return!1},user:function(){return e.oldestMsg!=null}})}).toArray().then(function(e){var n=[];return e.forEach(function(e){n.push(e.oldestMsg),n.push(o("MAWDbMsg").toMsgId__UNSAFE_DO_NOT_USE(e.newestMsg))}),t.messages.where("msgId").anyOf(n.filter(Boolean)).toArray().then(function(n){var r=new Map,a=[],i=[];n.forEach(function(e){r.set(e.msgId,e)}),e.forEach(function(e){var n=r.get(e.oldestMsg),l=r.get(e.newestMsg);return(n==null?void 0:n.type)==="Admin"&&(l==null?void 0:l.type)==="Admin"&&(n.msgId===l.msgId?i.push(e.chatId):a.push(e)),o("MAWDexieTable").dexieAll(a.map(function(e){return t.messages.where("thread").equals(e.chatId).toArray()})).then(function(e){return e.forEach(function(e){if(e.length!==0){var t=e[0].thread,n=e.filter(function(e){return e.type!=="Admin"});n.length>0||i.push(t)}}),o("MAWDexieTable").dexieAll([t.threads.bulkDelete(i),t.messages.where("thread").anyOf(i).delete()])})})})})},p=function(t){return t.unrenderedMessages.toCollection().modify(function(e){if(e.type===o("WAMsgType").MSG_TYPE.DELETE_FOR_ME){var t=e.messageDeleteForMeTs;e.messageDeleteForMeTs=t}})},_=function(t){var e=0,n=0,a=r("MAWDexie").currentTransaction;if(a==null)throw r("FBLogger")("maw_db").mustfixThrow("transaction does not exist");return a.on("complete",function(){e>0&&o("MAWODSProxy").odsBumpEntityKey({amount:e,entity:o("WAOdsEnums").Entity.MESSAGE_MISSING_THREAD_JID,key:"fail"}),n>0&&o("MAWODSProxy").odsBumpEntityKey({amount:n,entity:o("WAOdsEnums").Entity.MESSAGE_MISSING,key:"fail"})}),t.threads.toArray().then(function(r){var a=r.reduce(function(e,t){return t!=null&&e.set(t.chatId,t),e},new Map);return o("MAWDexieTable").dexieAll([t.messages.toCollection().modify(function(t){if(t!=null){var r=a.get(t.thread);r!=null?t.threadJid=r.jid:e+=1}else n+=1}),t.unrenderedMessages.toCollection().modify(function(t){if(t!=null){var r=a.get(t.thread);r!=null?t.threadJid=r.jid:e+=1}else n+=1})])})},f=function(t){return t.isDualSend.toCollection().modify(function(e){e.version==null&&(e.version=1)})},g=function(t){return t.messages.toCollection().modify(function(e){e.type===o("WAMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION&&(e.altIndex=o("MAWDbMsg").craftE2eeAdminMsgAltIndex(e.thread))})},h=function(t){return t.messages.toCollection().modify(function(e){e.sortOrderMs=o("MAWDbMsg").getSortOrderWithFallback(e)})},y=function(t){return t.threads.toCollection().modify(function(e){e.folder==null&&(e.folder=o("MAWFolderTypes").FOLDER_ID.INBOX)})},C=function(t){return t.messages.toCollection().modify(function(e){e.sortOrderMs=o("MAWDbMsg").getSortOrderWithFallback(e)})},b=function(t){return t.personalSenderKeyStatuses.toCollection().modify(function(e){e.rotateSenderKey=!0,e.hasSenderKey=new Set})},v=function(t){return t.messages.toCollection().modify(function(e){e.type===o("WAMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&e.sortOrderMs!=null&&e.sortOrderMs>0&&(e.sortOrderMs=0)})},S=function(t){return t.messages.toCollection().modify(function(e){!(e.type===o("WAMsgType").MSG_TYPE.ADMIN&&(e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE||e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION))&&e.sortOrderMs!=null&&e.sortOrderMs<1661204086&&(e.sortOrderMs=o("MAWDbMsg").getCanonicalTsFromMsg(e)*1e3)})},R=function(t){return t.threads.filter(function(e){return e.isMigratedLocally===!0&&e.newestMsg!=null}).toArray().then(function(e){var n=e.map(function(e){return e.chatId}),r=new Map;return o("MAWDexieTable").dexieAll(e.map(function(e){return t.messages.where(["thread","sortOrderMs"]).between([e.chatId,0],[e.chatId,Number.MAX_VALUE]).last().then(function(e){e!=null&&r.set(e.thread,e.msgId)})})).then(function(){return t.threads.where("chatId").anyOf(n)})})},L=function(){return o("MAWDexieTable").dexieResolve()},E=function(t){return t.threads.toCollection().modify(function(e){if(e.lastReadMsgTs!=null&&e.lastReadMsgTs<o("WATimeUtils").MAX_INT&&(e.lastReadMsgTs=o("MAWTimeUtils").ensureValidMillisTime(e.lastReadMsgTs)),e.newestMsgTs!=null&&e.newestMsgTs<o("WATimeUtils").MAX_INT){var t=o("MAWTimeUtils").ensureValidMillisTime(e.newestMsgTs);e.newestMsgTs=t,t!=null&&(e.threadOrder=o("MAWDbThread").craftThreadOrder(t,e.jid))}})},k=function(t){return t.messages.toCollection().modify(function(e){e.type===o("WAMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_THREAD_ADMIN_MESSAGE&&(e.altIndex=o("MAWDbMsg").craftCutoverAdminMsgAltIndex(e.thread))})},I=function(){return o("MAWDexieTable").dexieResolve()},T=function(){return o("MAWDexieTable").dexieResolve()},D=function(){return o("MAWDexieTable").dexieResolve()},x=function(t){return t.participants.toCollection().modify(function(e){var t;e==null||((t=e.userJid)==null?void 0:t.indexOf("@msgr@msgr"))===!1||(e.id=e.id.replace("@msgr@msgr","@msgr"),e.userJid=e.userJid.replace("@msgr@msgr","@msgr"))}).then(r("emptyFunction"))},$=function(t){var e=t.threads.filter(function(e){return e.snippetMsg!=null&&e.snippetMsgTs==null});return e.toArray().then(function(n){var r=n.reduce(function(e,t){return t!=null&&t.snippetMsg!=null&&e.set(t.jid,t.snippetMsg),e},new Map),a=Array.from(r.values());return t.messages.where("msgId").anyOf(a).toArray().then(function(t){var n=t.reduce(function(e,t){return t!=null&&t.serverTs!=null&&e.set(t.msgId,t.serverTs),e},new Map);e.modify(function(e){var t=r.get(e.jid);if(t!=null){var a=n.get(t);a!=null&&(e.snippetMsgTs=o("WATimeUtils").castUnixTimeToMillisTime(a))}})})})},P=function(t){return t.threads.toArray().then(function(e){return o("MAWDexieTable").dexieAll(e.map(function(e){return t.participants.where("threadId").equals(e.chatId).modify(function(t){var n;t.threadJid=(n=t.threadJid)!=null?n:e.jid})}))})},N=P,M=function(t){var e=[];return t.groupInvites.toArray().then(function(n){var r=n.map(function(e){return e.invitedParticipantId});return t.participants.bulkGet(r).then(function(r){r.forEach(function(t,r){if(t==null){var o=n[r];e.push(o)}});var o=r.filter(Boolean);return t.groupInvites.bulkPut(n.map(function(t){var n=o.find(function(e){return e.id===t.invitedParticipantId});return n!=null?(t.inviteeJid=n.userJid,t.threadJid=n.threadJid,babelHelpers.extends({},t,{inviteeJid:n.userJid,threadJid:n.threadJid})):(e.push(t),t)}))})}).then(function(){return t.groupInvites.bulkDelete(e.map(function(e){return[e.invitedParticipantId,e.inviterJid]}))})},w=function(n){var t=new Map;return n.receipts.toArray().then(function(a){return o("MAWDexieTable").dexieAll(a.map(function(a){return n.messages.get({msgId:a.msgId}).then(function(i){if(i==null)return n.receipts.delete(a.msgId).then(r("emptyFunction"));var l=o("WAMsg").craftWAMsgIdString({author:i.author,chat:i.threadJid,externalId:i.externalId});if(t.has(l)){var s,u=(s=t.get(l))!=null?s:1;return t.set(l,u),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Duplicate waMsgId found for receipt, number of duplicates: ",""])),u),n.receipts.delete(a.msgId).then(r("emptyFunction"))}else return t.set(l,1),n.receipts.where("msgId").equals(i.msgId).modify(function(e){e.waMsgId=l}).then(r("emptyFunction"))})}))})},A=function(){return o("MAWDexieTable").dexieResolve()},F=function(t){return t.participants.toArray().then(function(e){var n=e.map(function(e){return babelHelpers.extends({},e,{id:o("MAWDbParticipant").craftParticipantId(e.threadJid,e.userJid)})}),r=e.map(function(e){return e.id});return t.participants.bulkDelete(r).then(function(){t.participants.bulkPut(n)})})},O=function(t){return t.reactions.toCollection().modify(function(e){e.ts=e.ts})},B=new Map([[(s=o("MAWDbVersionList")).VERSION.V26,u],[s.VERSION.V27,c],[s.VERSION.V28,d],[s.VERSION.V29,m],[s.VERSION.V30,p],[s.VERSION.V31,_],[s.VERSION.V43,f],[s.VERSION.V44,g],[s.VERSION.V45,h],[s.VERSION.V46,y],[s.VERSION.V47,C],[s.VERSION.V53,b],[s.VERSION.V54,v],[s.VERSION.V55,S],[s.VERSION.V56,R],[s.VERSION.V57,L],[s.VERSION.V58,E],[s.VERSION.V60,k],[s.VERSION.V66,I],[s.VERSION.V68,T],[s.VERSION.V71,D],[s.VERSION.V72,x],[s.VERSION.V82,$],[s.VERSION.V85,P],[s.VERSION.V87,N],[s.VERSION.V90,M],[s.VERSION.V91,w],[s.VERSION.V101,A],[s.VERSION.V104,F],[s.VERSION.V116,O]]);l.dbUpgrades=B}),98);
__d("MAWDbSchemaReStoreDexieUtils",["FBLogger","MAWDbSchema","MAWDbSchema.dexie","sortBy"],(function(t,n,r,o,a,i,l){"use strict";var e=r("sortBy")(Array.from(new Set([].concat(Array.from(o("MAWDbSchema").dbSchema.keys()),Array.from(o("MAWDbSchema.dexie").dbUpgrades.keys())))).map(function(e){return{schema:o("MAWDbSchema").dbSchema.get(e),upgrade:o("MAWDbSchema.dexie").dbUpgrades.get(e),version:e}}),function(e){var t=e.version;return t}),s=function(t,n){return Array.from(t.filter(function(e){return e.version<=n&&e.schema!=null}).reduce(function(e,t){var n;return(n=t.schema)==null||n.forEach(function(t){e.set(t.name,t)}),e},new Map).values())},u=function(t,n){return s(t,n).reduce(function(e,t){var n=t.autoIncrement,o=t.dexieOnly_primaryKeyUnique,a=t.name,i=t.primaryKey,l=t.removed,s=a.replace(/^e2ee_/,"");if(l===!0)return e[s]=null,e;if(n&&o===!0)throw r("FBLogger")("messenger_web").mustfixThrow("Invalid schema, cannot have both autoincremnet and unique constraints "+JSON.stringify(t));var u=n?"++":"",c=o===!0?"&":"",d=(i.length>1?"[":"")+i.join("+")+(i.length>1?"]":""),m=Object.values(t.indexes).map(function(e){var t=e.columns,n=e.unique!==!1,r=t.length>1,o=e.multiEntry_DO_NOT_USE===!0,a=n&&!o?"&":"",i=o?"*":"",l=""+a+i;return""+l+(r?"[":"")+t.join("+")+(r?"]":"")}).join(",");return e[s]=[""+u+c+d,m].filter(Boolean).join(","),e},{})},c=function(n){return u(e,n)};l.MAW_DB_VERSION_CHANGES=e,l.getDexieSchemaForVersion=u,l.getCompleteDexieSchemaForVersion=c}),98);
__d("MAWDbVersion",["MAWCurrentUser","MAWDbSchemaReStoreDexieUtils","MAWDbVersionList","MAWGetDbVersion","MAWIndexedDbMetadata","MAWODSProxy","MWFBLogger","Promise","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h=o("MWFBLogger").MWLogger().tags(["db","getDexieDbVersion"]),y=o("MAWGetDbVersion").getArmadilloDbVersion(),C=o("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(Math.min(o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version,y>0?y:1/0));function b(e,t){var n=t.schema,r=t.upgrade,o=t.version;return n!=null&&r!=null?e.version(o).stores(n).upgrade(r):n!=null?e.version(o).stores(n):r!=null?e.version(o).upgrade(r):e.version(o),o}function v(t){return new(g||(g=n("Promise")))(function(n){if(!indexedDB){n();return}var r=indexedDB.open(t);r.onupgradeneeded=function(r){r.target.transaction.abort();var o=r.target.result;h.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose([""," onupgradeneeded - closing db"])),t),o==null||o.close(),n()},r.onsuccess=function(e){var r=e.target.result,a=r==null?void 0:r.version;h.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose([""," version: ",""])),t,a!=null?a:"null"),r==null||r.close(),a!=null?(a%10>=1&&o("MAWODSProxy").odsBumpEntityKey({amount:1,entity:o("WAOdsEnums").Entity.MAW_DB_UNEXPECTED_VERSION,key:"fail_"+a%10}),n(o("MAWDbVersionList").toVersion(a/10))):n()},r.onerror=function(e){var r;h.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose([""," error ",""])),t,e==null||(r=e.target)==null||(r=r.error)==null?void 0:r.message),n()},r.onblocked=function(e){var n=e.target.result,r=n==null?void 0:n.version;h.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose([""," blocked, version: ",""])),t,r!=null?r:"null"),n==null||n.close()}})}function S(){var e=o("MAWCurrentUser").getID();return v(o("MAWIndexedDbMetadata").dbName(e))}function R(e,t){if(e.upgrade!=null||t.upgrade!=null)return!0;var n=Object.keys((e==null?void 0:e.schema)||{}),r=Object.keys((t==null?void 0:t.schema)||{}),o=[].concat(n,r),a=new Set(o);return a.size!==o.length}function L(e){return e.reduce(function(e,t,n){if(n===0)return[babelHelpers.extends({},t,{schema:o("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(t.version)})];var r=e[e.length-1],a=babelHelpers.extends({},t,{schema:t.schema!=null?o("MAWDbSchemaReStoreDexieUtils").getDexieSchemaForVersion([t],t.version):null});return R(r,a)?(e.push(a),e):(e.splice(e.length-1,1,babelHelpers.extends({},r,a,{schema:babelHelpers.extends({},r==null?void 0:r.schema,a==null?void 0:a.schema)})),e)},[])}function E(e,t,n,r){var a=r!=null?r:o("MAWGetDbVersion").getArmadilloDbVersion==null?void 0:o("MAWGetDbVersion").getArmadilloDbVersion();h.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["current db version: ",", target db version: ",""])),n,a),a==null&&h.WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["version is not set in QE"]))),n!=null&&n>a&&(h.WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["current db version is greater than target db version"]))),a=n);var i=o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(e){var t=e.version;return n==null||t>n}).filter(function(e){var t=e.version;return a==null||a>=t}),l=o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.filter(function(e){var t=e.version;return a==null||a>=t});if(i.length===0||i.length===l.length){h.DEBUG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Skipping db upgrade and just applying latest schema"]))),t.addAnnotations({bool:{isUpgradeNeeded:!1}});var s=o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES[o("MAWDbSchemaReStoreDexieUtils").MAW_DB_VERSION_CHANGES.length-1].version,u=Math.min(a!=null&&a>0?a:s,s);return e.version(u).stores(o("MAWDbSchemaReStoreDexieUtils").getCompleteDexieSchemaForVersion(u)),u}var c=L(i);h.DEBUG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Applying "," updates between "," and ",""])),c.length,i[0].version,i[i.length-1].version);var g=c.filter(function(e){return!!e.upgrade}).map(function(e){return e.version.toString()}),y=c.filter(function(e){return!!e.schema}).map(function(e){return e.version.toString()});g.length&&t.addAnnotations({string_array:{dataMigrationVersions:g}}),y.length&&t.addAnnotations({string_array:{schemaUpgradeVersions:y}}),t.addAnnotations({bool:{isUpgradeNeeded:!0}});var C=0;return c.forEach(function(t){var n;C=Math.max((n=b(e,t))!=null?n:0,C!=null?C:0)}),C}l.CURRENT_MAW_STORES=C,l.getDexieDbVersion=v,l.getDBVersion=S,l.updateDB=E}),98);
__d("MAWDexieError",[],(function(t,n,r,o,a,i){"use strict";var e="ModifyError",l="BulkError",s="OpenFailedError",u="VersionChangeError",c="SchemaError",d="UpgradeError",m="InvalidTableError",p="MissingAPIError",_="NoSuchDatabaseError",f="InvalidArgumentError",g="SubTransactionError",h="UnsupportedError",y="InternalError",C="DatabaseClosedError",b="PrematureCommitError",v="ForeignAwaitError",S="UnknownError",R="ConstraintError",L="DataError",E="TransactionInactiveError",k="ReadOnlyError",I="VersionError",T="NotFoundError",D="InvalidStateError",x="InvalidAccessError",$="AbortError",P="TimeoutError",N="QuotaExceededError",M="SyntaxError",w="DataCloneError",A={AbortError:$,BulkError:l,ConstraintError:R,DatabaseClosedError:C,DataCloneError:w,DataError:L,ForeignAwaitError:v,InternalError:y,InvalidAccessError:x,InvalidArgumentError:f,InvalidStateError:D,InvalidTableError:m,MissingAPIError:p,ModifyError:e,NoSuchDatabaseError:_,NotFoundError:T,OpenFailedError:s,PrematureCommitError:b,QuotaExceededError:N,ReadOnlyError:k,SchemaError:c,SubTransactionError:g,SyntaxError:M,TimeoutError:P,TransactionInactiveError:E,UnknownError:S,UnsupportedError:h,UpgradeError:d,VersionChangeError:u,VersionError:I};i.DEXIE_ERROR=A}),66);
__d("MAWIDbSetupQplEventListener",["MAWDexieError","MAWQplProxy","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null;function u(t){var n=new Set(Object.keys(o("MAWDexieError").DEXIE_ERROR));n.has(t.reason)&&e!=null&&(e.endFail(t.reason),o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25310776,"6155"),"database_setup_failed"),s!=null&&(s(),s=null))}var c=function(r,o){return e=r,s=o,t.addEventListener("unhandledrejection",u),function(){return t.removeEventListener("unhandledrejection",u)}};l.trackDbSetupFailure=c}),98);
__d("MAWLowLevelApiTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e={EXISTING_GROUP_INVITE:"existing_group_invite",MISSING_GROUP:"missing_group"},l={EXPIRED_GROUP_INVITE:"expired_group_invite",MISSING_GROUP:"missing_group",MISSING_GROUP_INVITE:"missing_group_invite"},s=n("$InternalEnum")({Initializing:"initializing",Open:"open",Closed:"closed",Error:"error",Upgrading:"upgrading"});i.WRITE_GROUP_INVITE_ERROR=e,i.GET_GROUP_INVITE_ERROR=l,i.DatabaseState=s}),66);
__d("MAWDbFactory",["ClientConsistencyEventEmitter","Deferred","MAWCurrentUser","MAWDbVersion","MAWDexieTable","MAWGetDbVersion","MAWIDbSetupQplEventListener","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWLowLevelApiTypes","MAWQplProxy","MAWReliabilityMonitor","MWFBLogger","getErrorSafe","gkx","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=["backendInitPromise","middleware","onDbPopulate"];function h(t,n){var a=null,i=o("MWFBLogger").MWLogger().tags(["db",t,n]),l=new(r("Deferred")),h=!1,y=!1,C,b=!1,v=null,S=n!=="worker"?null:o("MAWReliabilityMonitor").MAWReliabilityMonitorSingleton.startMonitoring("DB_"+t+"_"+n,function(){return{extra:{isMakingDB:String(h),willBeSetup:String(y)},reason:String(v),state:(function(){if(v==null)return o("MAWReliabilityMonitor").HealthReportState.UNKNOWN;switch(v){case o("MAWLowLevelApiTypes").DatabaseState.Initializing:case o("MAWLowLevelApiTypes").DatabaseState.Upgrading:return o("MAWReliabilityMonitor").HealthReportState.PENDING;case o("MAWLowLevelApiTypes").DatabaseState.Open:return o("MAWReliabilityMonitor").HealthReportState.OK;case o("MAWLowLevelApiTypes").DatabaseState.Closed:case o("MAWLowLevelApiTypes").DatabaseState.Error:return o("MAWReliabilityMonitor").HealthReportState.ERROR}})()}});function R(){l=new(r("Deferred")),C==null||C(),h=!1,y=!1}function L(){return y}function E(){return l.getPromise().then(function(){return b})}async function k(L,E,k){var I=E.backendInitPromise,T=E.middleware,D=E.onDbPopulate,x=babelHelpers.objectWithoutPropertiesLoose(E,g),$=o("MAWCurrentUser").getID(),P=o("MAWIndexedDbMetadata").dbName($),N=r("qpl")._(25310776,"6155");function M(e){v=e,S==null||S.updateState()}if(a!=null){i.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["DB exists"]))),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_exsists");return}var w=o("MAWQplProxy").startQplUserFlow(r("qpl")._(1056836116,"905"),{string:{db:t,name:P}});if(y=!0,h)return o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_make_in_progress"),l.getPromise();i.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Starting DB Setup"]))),h=!0,o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_make_started"),C=o("MAWIDbSetupQplEventListener").trackDbSetupFailure(w,function(){M(o("MAWLowLevelApiTypes").DatabaseState.Error),l.reject("DB setup failed"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_setup_failed"),R()}),M(o("MAWLowLevelApiTypes").DatabaseState.Initializing);var A=await o("MAWDbVersion").getDexieDbVersion(P);A==null&&(b=!0),w.addAnnotations({int:{currentVersion:A}});var F=k!=null?k:o("MAWGetDbVersion").getArmadilloDbVersion();if(w.addAnnotations({int:{targetVersion:F}}),I&&(A||0)<F){w.addPoint("separate_read_waiting_on_worker_upgrade"),i.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Waiting for worker to upgrade schema..."])));try{await I}catch(e){throw i.catching(r("getErrorSafe")(e)).mustfixThrow("Worker startup promise rejected, schema upgrade failed.")}var O=await o("MAWDbVersion").getDexieDbVersion(P);if(O!==F)throw i.mustfixThrow("Main thread waiting on worker schema upgrade from %s to %s, upgrade failed with version %s",A,F,O);A=O}else n==="worker"&&(o("MAWQplProxy").sendQPLIntAnnotationThroughBridge(r("qpl")._(1056839232,"112"),"dbVersion",A!=null?A:0),o("MAWQplProxy").sendQPLIntAnnotationThroughBridge(r("qpl")._(1056839232,"112"),"useSentBytesCache",r("gkx")("33008")?1:0));var B=function(a){var e=o("MAWDbVersion").updateDB(a,w,A,k);return!I&&n==="worker"&&o("MAWQplProxy").sendQPLBoolAnnotationThroughBridge(r("qpl")._(1056839232,"112"),"dbUpgradeNeeded",A!==e),i.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["latest pushed version: ",", current: ",", requested: ",""])),e,A,k!=null?k:"<latest>"),n==="worker"&&(A!==e?o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_version_upgraded"):o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_version_upgrade_not_required")),e};return a=new(o("MAWDexieTable")).DexieTable(P,function(e){T.forEach(function(t){e.use(t(L))});var a=B(e);e.on("populate",function(e){if(!e){M(o("MAWLowLevelApiTypes").DatabaseState.Error),l.reject("Missing DB for populate event"),w.endFail("on_populata-missing_txn"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_on_populate_missing_txn");return}i.info("MAWDB populated. HasPopulateEvent: %s",!!D),D==null||D(e)}),e.on("blocked",function(){i.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["DB Open blocked"]))),M(o("MAWLowLevelApiTypes").DatabaseState.Error),l.reject("DB Open blocked"),w.endFail("db_blocked"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_blocked"),R()}),e.on("ready",function(e){if(i.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["MAW DB setup complete"]))),h=!1,e==null){M(o("MAWLowLevelApiTypes").DatabaseState.Error),i.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["DB is null"]))),l.reject("DB is null"),w.endFail("db_null"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_null"),R();return}M(o("MAWLowLevelApiTypes").DatabaseState.Open),C==null||C(),l.resolve(),w.endSuccess({int:{dbVersion:a}}),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_ready")}),e.on("close",function(){M(o("MAWLowLevelApiTypes").DatabaseState.Closed),i.WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["DB forcibly closed"]))),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_forcibly_closed")}),e.on("versionchange",function(e){i.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Versionchange detected: ("," -> "," (event version: ",", highestUsed: (","), name: ",""])),e==null?void 0:e.oldVersion,e==null?void 0:e.newVersion,String(e==null?void 0:e.version),a,e==null?void 0:e.name),M(o("MAWLowLevelApiTypes").DatabaseState.Upgrading),n!=="worker"&&r("ClientConsistencyEventEmitter").emit("softRefresh","mawdb_versionchange"),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_versionchange")})},void 0,x),o("MAWQplProxy").sendQplPointThroughBridge(N,"database_"+t+"_make_requested"),l.getPromise()}function I(e){if(a==null)throw i.mustfixThrow('IndexDB has not been initialized before executing "'+(e!=null?e:"unnamed")+'"');return a}function T(e){return a!=null&&!h?Promise.resolve(a):(l=l||new(r("Deferred")),l.getPromise().then(function(){return I(e)}))}async function D(){var e=await T();e!=null&&(e.close(),a=null),R()}function x(){a=null,R()}function $(e){r("promiseDone")(D());var t=o("MAWIndexedDbMetadata").dbName(e!=null?e:o("MAWCurrentUser").getID());r("promiseDone")(o("MAWIndexedDBDeletion").deleteDB(t,"maw")),S==null||S.stopMonitoring()}return{closeDB:D,deleteDb:$,getDB:T,getDBExn:I,isNewDb:E,makeDB:k,reset_singleton_INTERNAL_ONLY:x,setupPromise:function(){return l.getPromise()},willSetupDB:L}}l.makeIDBFactory=h}),98);
__d("MAWIndexedDbUI",["ExecutionEnvironment","MAWDbFactory","MAWDbMutationMiddleware","MAWDbProtocolMsgIdMiddleware","MAWDexieTable","MAWIndexedDb","MAWTransactor","Promise","cr:3527","gkx","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){var e=o("MAWDbFactory").makeIDBFactory("ui_idb","main");return{closeDB:e.closeDB,deleteDb:e.deleteDb,getDB:e.getDB,makeDB:function(a,i,l){var t=[o("MAWDbMutationMiddleware").getMAWDbMutationMiddleware];r("gkx")("1760")&&t.push(o("MAWDbProtocolMsgIdMiddleware").MAWDbProtocolMsgIdMiddleware),n("cr:3527")!=null&&t.push(n("cr:3527"));var s=e.makeDB(a,{autoOpen:r("gkx")("6817"),backendInitPromise:i.backendInitPromise,cache:"disabled",middleware:t,onDbPopulate:i.onDbPopulate},l);return s},reset_singleton_INTERNAL_ONLY:e.reset_singleton_INTERNAL_ONLY}}var d=c(),m=d.makeDB,p=d.closeDB,_=d.getDB,f=d.deleteDb,g=d.reset_singleton_INTERNAL_ONLY,h=(s||(s=r("ExecutionEnvironment"))).isInBrowser?_("MawDbInUISingleton_INTERNAL_ONLY").then(function(e){return{openReadonlyTransaction:function(n,a,i){return e.stores.transaction("r",a,function(){return o("MAWDexieTable").setDexiePSDItem("transactorName",n),o("MAWDexieTable").setDexiePSDItem("transactionRequested",(u||(u=r("performance"))).now()+u.timeOrigin),i(e.stores)})},openReadWriteTransaction:function(n,a,i){return e.stores.transaction("rw",a,function(){return o("MAWDexieTable").setDexiePSDItem("transactorName",n),o("MAWDexieTable").setDexiePSDItem("transactionRequested",(u||(u=r("performance"))).now()+u.timeOrigin),i(e.stores)})}}}):new(e||(e=n("Promise")))(function(){});l.makeMsgrTransactor=o("MAWTransactor").makeMsgrUITransactor_IMPORT_FROM_MAWIndexedDbUI_INSTEAD,l.afterTransaction=o("MAWIndexedDb").afterTransaction,l.makeMAWIndexedDBFactory=c,l.makeDB=m,l.closeDB=p,l.getDB=_,l.deleteDb=f,l.reset_singleton_INTERNAL_ONLY=g,l.MawDbInUISingleton=h}),98);
__d("MAWWorkerCacheServiceRegistry",["MAWSnippetsCacheService"],(function(t,n,r,o,a,i,l){"use strict";var e={snippets:o("MAWSnippetsCacheService").getMAWSnippetsCacheService()};function s(){return e}l.getWorkerRegistry=s}),98);
__d("MAWDbMsgOrReaction",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}function l(e,t){return e==null?t.forNull():e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}function s(e,t){return e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}function u(e,t){return e==null?t.forNull():e.reactToExternalId!=null?t.forReaction(e):t.forMessage(e)}i.switchOnMsgOrReaction=e,i.switchOnMsgOrReactionNullish=l,i.switchOnMsgOrReactionMaybeUnstored=s,i.switchOnMsgOrReactionMaybeUnstoredNullish=u}),66);
__d("WorkerSchedulerError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this,"Task execution exceeds timeout "+t+":"+n)||this,r.name="WorkerSchedulerTimeoutError",r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.WorkerSchedulerTimeoutError=e}),66);
__d("WorkerSchedulerPriority",[],(function(t,n,r,o,a,i){"use strict";var e=2,l=1,s=0;i.BACKGROUND_PRIORITY=e,i.REGULAR_PRIORITY=l,i.BLOCKING_PRIORITY=s}),66);
__d("WorkerScheduler",["$InternalEnum","Promise","QPLFlow","QuickPerformanceLogger","WAResolvable","WAShiftTimer","WATagsLogger","WATimeUtils","WorkerSchedulerError","WorkerSchedulerPriority","err","getSafeQplErrorMessage","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v=o("WATagsLogger").TAGS(["WorkerScheduler"]),S=0,R=100,L=3e4,E=10,k=6e4,I=n("$InternalEnum")({CREATED:0,SCHEDULED:1,RUNNING:2,COMPLETED:3,CANCELLED:-3,FAILED:-2,STUCK:-1}),T=(function(){function t(e,t){var n;this.$3=!1,this.$4=new Map,this.$5=new Map,this.$6=new Map,this.$7=[new Set,new Set,new Set],this.$8=[new(n=o("WAResolvable")).Resolvable,new n.Resolvable,new n.Resolvable],this.$9=new n.Resolvable,this.$1=e,this.config=t,this.$2=v.TAGS([e])}var a=t.prototype;return a.waitUntilEndReached=function(){return this.$9.promise},a.waitUntilBlockingEnded=function(){return this.$8[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].promise},a.waitUntilRegularEnded=function(){return this.$8[o("WorkerSchedulerPriority").REGULAR_PRIORITY].promise},a.waitUntilBackgroundEnded=function(){return this.$8[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].promise},a.getDebugState=function(){var e=this,t=Date.now();return{activeTasks:Array.from(this.$6.entries()).map(function(n){var r=n[0],o=n[1],a=e.$5.get(r);return!a||a.startTime==null?null:{executionTimeMs:t-a.startTime,priority:o,task:a.name,waitTimeMs:t-a.scheduledTime}}).filter(Boolean),pendingTasksByPriority:this.$7.map(function(n){var r=[];return n.forEach(function(n){var o=e.$5.get(n);o&&r.push({task:o.name,waitTimeMs:t-o.scheduledTime})}),r})}},a.$10=function(){if(this.$6.size<this.config.maxTaskLimit){var e=this.pendingTasksTick({increaseCounter:!1,lowestTier:this.$3?o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:o("WorkerSchedulerPriority").BLOCKING_PRIORITY,tasksToPick:1,tickDelta:0}),t=e.candidates,n=x.getHighestActivePriority();t.length>0&&this.maybeStartTask(t[0].id,n)}},a.runTask=function(t){return this.task(t).run()},a.task=function(t){var e,n=this.$1+":"+t.name+":"+S++,r=(e=t.priority)!=null?e:o("WorkerSchedulerPriority").REGULAR_PRIORITY,a=this.$11(n,{annotations:t.annotations,customFlags:t.customFlags,eventSamplingRate:t.eventSamplingRate,fn:t.fn,name:t.name,priority:r});return this.$4.set(n,a),a.publicApi},a.$12=function(t){var e=this.$4.get(t);return e==null?(b||(b=n("Promise"))).reject(r("err")("Cannot run task from Scheduler:"+this.$1+" Task was already cancelled")):(e.publicApi.status=I.SCHEDULED,this.$5.set(t,e),this.$7[e.priority].add(t),this.$13(e.priority),e.metric.addPoint("schedule_start"),x.scheduleTimerIfNeeded(),this.$10(),e.resolvable.promise)},a.$11=function(n,r){var t,a,i,l=this,s=new(o("WAResolvable")).Resolvable,u=o("QPLFlow").startQplFlowWithCoinflip($,r.eventSamplingRate!=null?r.eventSamplingRate:this.config.defaultSamplingRate,{annotations:{bool:babelHelpers.extends({},(t=r.annotations)==null?void 0:t.bool,r.customFlags),int:babelHelpers.extends({},(a=r.annotations)==null?void 0:a.int,{originalPriority:r.priority}),string:babelHelpers.extends({},(i=r.annotations)==null?void 0:i.string,{name:r.name,scheduler:this.$1,workerID:self!=null&&"worker_id"in self?self.worker_id:void 0})}}),c={fn:r.fn,id:n,loggingParams:{},maxTickDelta:0,metric:u,name:r.name,priority:r.priority,publicApi:{cancel:function(){return c.publicApi.status!==I.CREATED&&c.publicApi.status!==I.SCHEDULED?!1:(l.$14(n,I.CANCELLED),l.$4.delete(n))},id:n,name:r.name,promise:s.promise,promote:function(n){return l.$2.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Promoting "," from "," to ",""])),c.id,c.priority,n),(c.publicApi.status===I.CREATED||c.publicApi.status===I.SCHEDULED)&&c.priority>n?(l.$15(c,n),!0):!1},run:function(){return l.$12(n)},status:I.CREATED},resolvable:s,scheduledTime:Date.now(),startTime:null,tickCounter:0,waitCounter:0};return c},a.$14=function(t,n){var e=this.$5.get(t),r=e==null?void 0:e.publicApi.status;if(!(e==null||r===I.COMPLETED||r===I.FAILED||r===I.STUCK)){this.$5.delete(t),this.$6.delete(t),e.publicApi.status=n;var a=[this.$7[o("WorkerSchedulerPriority").BLOCKING_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").REGULAR_PRIORITY].size===0,this.$7[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY].size===0];this.$6.forEach(function(e){a[e]=!1}),a[o("WorkerSchedulerPriority").BLOCKING_PRIORITY]&&a[o("WorkerSchedulerPriority").REGULAR_PRIORITY]&&a[o("WorkerSchedulerPriority").BACKGROUND_PRIORITY]&&this.$9.resolve();for(var i=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;i<=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY;i++)a[i]&&this.$8[i].resolve()}},a.maybeStartTask=function(t,n){var e=this.$5.get(t);if(e==null){this.$2.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Task without corresponding record: Task: ",", Scheduler: ",""])),t,this.$1);return}if(n==null||this.$3===!0)return this.$16(e);if(!(n<e.priority))return this.$16(e)},a.$16=function(t){var e=this;this.$7[t.priority].delete(t.id),this.$6.set(t.id,t.priority),this.$2.TAGS([t.name]).LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Started: ",""])),t.id),t.startTime=Date.now(),t.publicApi.status=I.RUNNING,t.metric.addPoint("schedule_end",{int:{priorityTier:t.priority,waitTicks:t.waitCounter}}),t.metric.addPoint("run_start",{int:{startPriority:t.priority}});var r;try{r=t.fn({metric:t.metric})}catch(e){r=(b||(b=n("Promise"))).reject(e)}this.config.warnTaskLimit!=null&&this.$6.size>=this.config.warnTaskLimit&&this.$6.entries().forEach(function(t){var n=t[0],r=t[1],o=e.$5.get(n);o!=null&&o.metric.addAnnotations({bool:{exceedsWarnLimit:!0}})}),r.then(function(n){t.resolvable.resolve(n),e.$2.TAGS([t.name]).LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Completed: ",""])),t.id),t.metric.addPoint("run_end",{int:{executionTicks:t.tickCounter}}),e.$14(t.id,I.COMPLETED),t.metric.endSuccess({int:{maxTickDeltaMs:t.maxTickDelta}}),e.$10()}).catch(function(n){t.resolvable.reject(n),e.$2.TAGS([t.name]).WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed: ",""])),t.id),t.metric.addPoint("run_fail"),e.$2.TAGS([t.name]).ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Debug params: "," failed: ",""])),t.loggingParams,n),e.$14(t.id,I.FAILED),t.metric.endFail("runtime",{int:{maxTickDeltaMs:t.maxTickDelta},string:{jsError:o("getSafeQplErrorMessage").getSafeQPLErrorMessage(n)}}),e.$10()})},a.$13=function(t){for(var e=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;e<=t;e++)this.$8[e].resolveWasCalled()&&(this.$8[e]=new(o("WAResolvable")).Resolvable);this.$9.resolveWasCalled()&&(this.$9=new(o("WAResolvable")).Resolvable)},a.getHighestActivePriority=function(){var e=this,t=null;return this.$6.forEach(function(n,r){var o=e.$5.get(r);if(o==null){v.ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),r,e.$1),e.$6.delete(r);return}(t==null||t>o.priority)&&(t=o.priority)}),t},a.activeTasksTick=function(t){var e=this,n=null;return this.$6.forEach(function(r,a){var i=e.$5.get(a);if(i==null){v.ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Active task without corresponding record: Task: ",", Scheduler: ",""])),a,e.$1),e.$6.delete(a);return}i.tickCounter++,i.maxTickDelta=Math.max(t,i.maxTickDelta),(n==null||n>i.priority)&&(n=i.priority),i.tickCounter>e.config.ticksToTimeout&&i.publicApi.status===I.RUNNING&&(v.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Possibly stuck: ",""])),i.name),e.$14(i.id,I.STUCK),e.config.shouldContinueAfterTimeout||i.resolvable.reject(new(o("WorkerSchedulerError")).WorkerSchedulerTimeoutError(e.$1,i.id)),i.metric.endCancel(113,{int:{maxTickDeltaMs:i.maxTickDelta}}))}),n},a.$15=function(t,n){function e(){switch(r){case o("WorkerSchedulerPriority").BACKGROUND_PRIORITY:return o("WorkerSchedulerPriority").REGULAR_PRIORITY;case o("WorkerSchedulerPriority").REGULAR_PRIORITY:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY;default:return o("WorkerSchedulerPriority").BLOCKING_PRIORITY}}var r=t.priority,a=n!=null?n:e();a!==r&&(t.metric.addPoint("promote_to_"+a),this.$7[r].delete(t.id),t.priority=a,this.$7[a].add(t.id))},a.pendingTasksTick=function(t){for(var e=this,n=t.increaseCounter,r=t.lowestTier,a=t.tasksToPick,i=t.tickDelta,l=[],s=!0,u=function(r){s&&(s=e.$7[r].size===0),e.$7[r].forEach(function(t){var s=e.$5.get(t);if(s==null){v.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Safeguard: Pending task without corresponding record: Task: ",", Scheduler: ",""])),t,e.$1),e.$7[r].delete(t);return}n&&(s.waitCounter++,s.maxTickDelta=Math.max(i,s.maxTickDelta),s.priority>o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=e.config.throttleTicks&&e.$15(s),s.priority===o("WorkerSchedulerPriority").REGULAR_PRIORITY&&s.waitCounter>=x.maxWaitTicksMultiplierForFinalPromotion*e.config.throttleTicks&&(v.LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Promoting task ",":"," to blocking priority"])),e.$1,s.name),e.$15(s))),!(l.length>=a)&&(e.$6.size+l.length>=e.config.maxTaskLimit||l.push(s))})},c=o("WorkerSchedulerPriority").BLOCKING_PRIORITY;c<=r;c++)u(c);return{candidates:l.map(function(e){return{id:e.id,priority:e.priority}}),isEmpty:s}},a.TEST_ONLY_ignore_delays=function(){this.$3=!0},t})(),D=(function(){function e(){var e=this;this.$1=new Map,this.tickFrequencyMs=R,this.maxThrottleMs=k,this.maxWaitTicksMultiplierForFinalPromotion=E,this.$2=null,this.$3=new(o("WAShiftTimer")).ShiftTimer(function(){var t=!1;try{var n,r=o("WATimeUtils").performanceAbsoluteNow();t=e.$4(r-((n=e.$2)!=null?n:r))}catch(e){v.ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Scheduler fatal: ",""])),e)}finally{t===!1?(e.$2=o("WATimeUtils").performanceAbsoluteNow(),e.$3.onOrBefore(e.tickFrequencyMs)):e.$2=null}}),this.$5=new Map}var t=e.prototype;return t.getHighestActivePriority=function(){var e=null;return this.$5.forEach(function(t){var n=t.getHighestActivePriority();e!=null&&n!=null&&e<n&&(e=n),e==null&&n!=null&&(e=n)}),e},t.$4=function(t){var e,n=!0,r=null;this.$5.forEach(function(e){var n=e.activeTasksTick(t);r!=null&&n!=null&&r<n&&(r=n),r==null&&n!=null&&(r=n)});var a=[[],[],[]];this.$5.forEach(function(e){var r=e.pendingTasksTick({increaseCounter:!0,lowestTier:o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,tasksToPick:e.config.concurrency,tickDelta:t}),i=r.candidates,l=r.isEmpty;n&&(n=l),i.forEach(function(t){a[t.priority].push({id:t.id,scheduler:e})})});var i=(e=a.find(function(e){return e.length>0}))!=null?e:[];for(var l of i){var s=l.id,u=l.scheduler;u.maybeStartTask(s,r)}return n},t.scheduleTimerIfNeeded=function(){this.$3.onOrBefore(this.tickFrequencyMs)},t.newScheduler=function(t,n){var e=this.$5.get(t);return e||(e=new T(t,n),this.$5.set(t,e),e)},t.TEST_ONLY_reset=function(){this.$5=new Map,this.$1=new Map},e})(),x=new D,$=r("qpl")._(1056838280,"1566");function P(e,t){var n,r,o,a,i;return x.newScheduler(e,{concurrency:(n=t.concurrency)!=null?n:1,defaultSamplingRate:(r=t.defaultSamplingRate)!=null?r:1e4,maxTaskLimit:t.maxTaskLimit,shouldContinueAfterTimeout:(o=t.shouldContinueAfterTimeout)!=null?o:!1,throttleTicks:Math.round(((a=t.maxThrottleMs)!=null?a:x.maxThrottleMs)/x.tickFrequencyMs),ticksToTimeout:Math.round(((i=t.timeoutMs)!=null?i:L)/x.tickFrequencyMs),warnTaskLimit:t.warnTaskLimit})}function N(e){e.tickFrequencyMs!=null&&(x.tickFrequencyMs=e.tickFrequencyMs),e.maxThrottleMs!=null&&(x.maxThrottleMs=e.maxThrottleMs),e.maxWaitTicksMultiplierForFinalPromotion!=null&&(x.maxWaitTicksMultiplierForFinalPromotion=e.maxWaitTicksMultiplierForFinalPromotion),e.qplEventType!=null&&($=e.qplEventType),(C||(C=r("QuickPerformanceLogger"))).setAlwaysOnSampleRate($,1)}function M(){x.TEST_ONLY_reset()}l.BACKGROUND_PRIORITY=o("WorkerSchedulerPriority").BACKGROUND_PRIORITY,l.BLOCKING_PRIORITY=o("WorkerSchedulerPriority").BLOCKING_PRIORITY,l.REGULAR_PRIORITY=o("WorkerSchedulerPriority").REGULAR_PRIORITY,l.SchedulerExecutionState=I,l.makeScheduler=P,l.configWorkerScheduler=N,l.TEST_ONLY_reset=M}),98);
__d("MAWWorkerCacheServices",["FBLogger","MAWBridge","MAWCacheServiceDB","MAWCacheServiceQPL","MAWCacheServiceUtils","MAWDbMsgOrReaction","MAWLoggerUtils","MAWSnippetsCacheCalculateDelta","MAWWorkerCacheServiceRegistry","WorkerScheduler","cr:2354","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=o("MAWCacheServiceUtils").getMAWCacheServiceBroadcastChannel();var e=o("MAWWorkerCacheServiceRegistry").getWorkerRegistry();this.registry=e,this.schedulerRegistry=Object.keys(e).reduce(function(e,t){var n;return babelHelpers.extends({},e,(n={},n[t]=o("WorkerScheduler").makeScheduler(o("MAWCacheServiceUtils").getSchedulerName(t),o("MAWCacheServiceUtils").SCHEDULER_CONFIG),n))},{})}var t=e.prototype;return t.$2=function(t,n,r,a){var e={cache:n,instanceKey:a,namespace:t,source:r};this.$1==null?o("MAWBridge").getBridge().fireAndForget("event","broadcastChannelFallback",{event:{data:e},namespace:o("MAWCacheServiceUtils").MAW_CACHE_SERVICE_BROADCAST_CHANNEL}):this.$1.postMessage(e)},t.$3=async function(t,n,a,i,l){var e=o("MAWCacheServiceUtils").findDuplicates(n,function(e){var t=e[0],n=e[1];return t});if(e.length>0&&(r("FBLogger")("MAWCacheService").mustfix("Found duplicate keys in cache: %s. Original keys: %s, Namespace: %s, Source: %s",e.map(function(e){var t=e[0],n=e[1];return t}).join(", "),n.map(function(e){var t=e[0],n=e[1];return t}).join(", "),t,a),i!=null&&r("MAWCacheServiceQPL").addAnnotationsQPL(i,{bool:{hasDuplicateKeys:!0},string_array:{duplicateKeys:r("MAWCacheServiceQPL").redactKeysForNonEmployee(e.map(function(e){var t=e[0],n=e[1];return t}))}})),n.length===0){i!=null&&(r("MAWCacheServiceQPL").addPointQPL(i,"nothing_to_update_in_cache",a),r("MAWCacheServiceQPL").endSuccessQPL(i));return}i!=null&&r("MAWCacheServiceQPL").addPointQPL(i,"updating_cache_in_persisted_start",a);var s=this.registry[t];s.updateInMemoryCacheBulk(n);try{var u=o("MAWCacheServiceDB").convertCacheValueToDBRawValue(n),c=await o("MAWCacheServiceDB").getOrSetupMAWCacheDB();await c.runInTransaction([t],"readwrite",function(e){var n=u.map(function(e){return{item:e,selector:[e.key]}});return e.stores[t].bulkUpsert("key",n)},"update_cache_"+t),l==null||l(u.map(function(e){var t=e.key;return t})),i!=null&&r("MAWCacheServiceQPL").addPointQPL(i,"updating_cache_in_persisted_end",a)}catch(e){var d=r("getErrorSafe")(e);i!=null&&(r("MAWCacheServiceQPL").addAnnotationsQPL(i,{string:{error:d.message}}),r("MAWCacheServiceQPL").addPointQPL(i,"updating_cache_in_persisted_failed",a)),r("FBLogger")("MAWCacheService").catching(d).mustfix("Failed to update persisted cache")}i!=null&&r("MAWCacheServiceQPL").addPointQPL(i,"broadcasting_to_ui_start",a),this.$2(t,n,a,i)},t.calculateDelta=function(t){var e=this,a=Object.values(this.registry).map(function(a){var i=a.shouldDropDelta(t);return i.then(function(i){if(!i){var l=e.schedulerRegistry[a.namespace];return l.runTask({fn:function(){return a.calculateDelta(t).then(function(i){var u=i.map(function(e){var t=e[0],n=e[1];return t}),c=o("MAWLoggerUtils").getInstanceKey();i.length!==0&&(r("MAWCacheServiceQPL").startQPL(c,a.namespace),r("MAWCacheServiceQPL").addAnnotationsQPL(c,{bool:{isRealtimeUpdate:!0},int:{instanceKey:c},string_array:{realtimeUpdatedKeys:u}}));var d=s(t);return e.$3(a.namespace,i,"realtime-update",c,function(e){n("cr:2354")==null||n("cr:2354").notifyCacheWrite(e,l,d)})}).catch(function(e){r("FBLogger")("MAWCacheService").catching(e).warn("Failed to calculate delta for: %s",a.namespace)})},name:"maw_calculate_delta",priority:o("WorkerScheduler").REGULAR_PRIORITY})}})});Promise.all([].concat(a)).catch(function(e){r("FBLogger")("MAWCacheService").catching(e).mustfix("Failed to calculate delta for all services")})},t.computeCachePayloadFromScratch=function(t,n,a,i){var e=this;i!=null&&r("MAWCacheServiceQPL").registerInstanceKeyInWorker(i),r("MAWCacheServiceQPL").addPointQPL(i,"compute_from_scratch_start",a),r("MAWCacheServiceQPL").addAnnotationsQPL(i,{string_array:{keysReceivedInWorker:r("MAWCacheServiceQPL").redactKeysForNonEmployee(n)}});var l=this.registry[t],s=this.schedulerRegistry[l.namespace];if(l==null)throw r("FBLogger")("messenger_web").mustfixThrow("No service found for namespace: "+t);return s.runTask({fn:function(){return l.computeCachePayloadFromScratch(n).then(function(n){return r("MAWCacheServiceQPL").addPointQPL(i,"compute_from_scratch_end",a),e.$3(t,n,a,i)}).catch(function(e){r("MAWCacheServiceQPL").endFailureQPL(i,"compute_from_scratch_failed",a),r("FBLogger")("MAWCacheService").catching(e).warn("Failed to compute cache payload from scratch")})},name:"maw_compute_cache_payload_from_scratch",priority:o("WorkerScheduler").REGULAR_PRIORITY})},e})();function s(e){var t=e.filter(function(e){var t=e[0];return["messages","reactions"].includes(t)}),n=o("MAWSnippetsCacheCalculateDelta").parseAndGetMostRecentSnippetUpdateMutateRequestForChatJids(t.map(function(e){var t=e[0],n=e[1];return n})),r=n.values().every(function(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e.value,{forMessage:function(t){return t.source==="eb_restore"},forReaction:function(){return!0}})});return r?"eb_restore":"whatsapp"}var u=null,c=function(){return u==null&&(u=new e),u};l.getMAWWorkerCacheServices=c}),98);
__d("MAWExtractMsFromExternalId",["I64","MAWExternalId","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=2199023255551;function c(t){try{var n=(s||(s=o("I64"))).of_string_opt(t);if(n!=null){var r;return(r=d(n))!=null?r:0}}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to convert externalId to number: ",""])),t)}return 0}function d(e){var t=Number((s||(s=o("I64"))).to_string(s.and_(s.lsr_(e,22),s.of_float(u))));return o("MAWExternalId").getThreeMostSignificantDigitsForSortOrderTimestamp(t)}l.extractMsFromStanzaId=c,l.extractMsFromExternalId=d}),98);
__d("MAWGetBumpTimestampMs",["I64","MAWAckLevel","MAWDbMsgOrReaction","MAWExtractMsFromExternalId","MAWTimeUtils","WALongInt","WATimeUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var r=n==null?null:o("MAWExtractMsFromExternalId").extractMsFromExternalId(n);return(e||(e=o("I64"))).add(o("MAWTimeUtils").millisTimeToTimestamp(t),e.of_int32(r!=null?r:0))}function u(t){var n=t.msg,a=t.throwIfNoServerTs,i=a?r("nullthrows")(n.serverTs):n.serverTs;return s(o("WATimeUtils").castUnixTimeToMillisTime(i!=null?i:n.ts),(e||(e=o("I64"))).of_string(n.externalId))}function c(t){return t.senderTimestampMs!=null?(e||(e=o("I64"))).of_string(o("WALongInt").longIntToDecimalString(t.senderTimestampMs)):s(o("WATimeUtils").castUnixTimeToMillisTime(t.ts),(e||(e=o("I64"))).of_string(t.externalId))}function d(t){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstoredNullish(t,{forMessage:function(n){return o("MAWAckLevel").isMsgAuthoritative(n.ack)&&n.sortOrderMs!=null?(e||(e=o("I64"))).of_float(n.sortOrderMs):u({msg:n,throwIfNoServerTs:!1})},forNull:function(){return(e||(e=o("I64"))).zero},forReaction:c})}l.calculateBumpTimestampMs=s,l.getBumpTimestampMs=d}),98);
__d("MAWSnippetsCacheServiceUtils",["I64","MAWDbMsgOrReaction","MAWGetBumpTimestampMs"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionNullish(t,{forMessage:function(n){return{msgAckLevel:n.ack,msgId:n.msgId,reactionId:void 0,timestamp:n.sortOrderMs!=null?n.sortOrderMs:(e||(e=o("I64"))).to_float(o("MAWGetBumpTimestampMs").getBumpTimestampMs(n))}},forNull:function(){return{msgAckLevel:void 0,msgId:void 0,reactionId:void 0,timestamp:Number.MIN_SAFE_INTEGER}},forReaction:function(n){return{msgAckLevel:void 0,msgId:void 0,reactionId:n.reactionId,timestamp:(e||(e=o("I64"))).to_float(o("MAWGetBumpTimestampMs").getBumpTimestampMs(n))}}})}l.getMsgOrReactionIdAndTimestamp=s}),98);
__d("MAWUpdateThreadListItemUtils",["MAWAckLevel","MAWDbMsg","MAWDbMsgOrReaction","MAWMsgType","MAWXMAUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(e,{forMessage:function(t){return t.altIndex===o("MAWDbMsg").SPAM_ALT_INDEX||t.altIndex===o("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX},forReaction:function(){return!1}})}function s(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(e,{forMessage:function(t){return t.ack===o("MAWAckLevel").ACK.clock},forReaction:function(){return!1}})}function u(e){var t;return e.msgId!=null&&e.type===o("MAWMsgType").MSG_TYPE.XMA&&((t=e.msgContent)==null?void 0:t.content)===""}function c(e){return e.type===o("MAWMsgType").MSG_TYPE.XMA&&o("MAWXMAUtils").isRtcXMA(e==null?void 0:e.xmaMessageType)}l.isSpamMessage=e,l.isOptimisticMessage=s,l.isXMAThreadSnippet=u,l.isRTCXMAMessage=c}),98);
__d("MAWSnippetsCacheCalculateDelta",["FBLogger","MAWDbMsgOrReaction","MAWGetThreadUpdateType","MAWSnippetsCacheServiceUtils","MAWUpdateThreadListItemUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="[SnippetsCacheService][Worker]";function s(e){var t=new Set(e.map(function(e){var t,n,r=(t=e.decryptedValues)!=null?t:[],o=(n=e.deletedValues)!=null?n:[];return[].concat(r,o)}).flat().map(function(e){return o("MAWUpdateThreadListItemUtils").isOptimisticMessage(e)?null:e.msgId}).filter(Boolean));return e.reduce(function(e,n){var r=n.type==="delete"?n.deletedValues:n.decryptedValues,o=p(r);return o=_(t,o),o.length===0||o.forEach(function(t){var r=t.threadJid,o=e.get(r),a=m({type:n.type,value:t},o);e.set(r,a)}),e},new Map)}function u(e){return e.some(function(e){var t=e.chatJid,n=e.lastComputedCacheValue,r=e.mutateReq;return!c(r)||d(r.value)})}function c(e){return!(e.type==="delete"||e.type==="deleteRange"||o("MAWUpdateThreadListItemUtils").isXMAThreadSnippet(e.value)||h(e.value)||y(e.value))}function d(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(t){return!1},forReaction:function(t){return t.reaction!=null&&o("MAWGetThreadUpdateType").canReactionAffectBump(t)}})}function m(e,t){if(t==null)return e;var n=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(e.value),r=n.timestamp,a=e.value.externalId,i=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(t.value),l=i.timestamp,s=t.value.externalId;return r===l?e.type==="delete"||e.type==="deleteRange"?e:t.type==="delete"||t.type==="deleteRange"?t:a.localeCompare(s)>0?e:t:r==null?t:l==null||r>l?e:t}function p(e){return e==null||e.length===0?[]:e.filter(function(e){return f(e)})}function _(e,t){return t.reduce(function(t,n){var r=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(n),a=r.msgId;return a!=null&&o("MAWUpdateThreadListItemUtils").isOptimisticMessage(n)&&e.has(a)?t:[].concat(t,[n])},[])}function f(e){var t=g(e)&&!o("MAWUpdateThreadListItemUtils").isSpamMessage(e);return t||C(e),t}function g(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(n){return o("MAWGetThreadUpdateType").isThreadUpdateTypeEligibleForSnippet(e)},forReaction:function(n){return o("MAWGetThreadUpdateType").canReactionAffectBump(n)&&h(n)||o("MAWGetThreadUpdateType").isThreadUpdateTypeEligibleForSnippet(e)}})}function h(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(t){return!1},forReaction:function(t){return t.reaction==null}})}function y(e){return o("MAWDbMsgOrReaction").switchOnMsgOrReaction(e,{forMessage:function(t){return t.ephemeralMsgDisappeared===!0},forReaction:function(t){return!1}})}function C(t){var n=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(t),a=n.msgId,i=n.reactionId;r("FBLogger")("MAWCacheService").info(e+" msg or reaction is not eligible for snippet update, msgId: %s, reactionId: %s",a,i)}l.parseAndGetMostRecentSnippetUpdateMutateRequestForChatJids=s,l.isDbTransactionRequiredForSnippetUpdate=u,l.canCalculateSnippetUpdateFromDelta=c,l.isNeededToCheckMessageExistence=d}),98);
__d("MAWSnippetsCacheService",["FBLogger","MAWAckLevel","MAWCacheServiceBase","MAWDbMsgOrReaction","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWSnippetsCacheCalculateDelta","MAWSnippetsCacheServiceUtils","MAWThreadSnippetBuildTxns","MAWThreadSnippetUtils","MAWTransactionMode","MAWUpdateThreadListItemUtils","MAWVault","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=["messages","reactions"],s="[SnippetsCacheService][Worker]",u=(function(t){function n(){return t.call(this,"snippets")||this}babelHelpers.inheritsLoose(n,t);var r=n.prototype;return r.$MAWSnippetsCacheService$p_1=function(n){var t=this,r=n.filter(function(t){var n=t[0];return e.includes(n)}),a=o("MAWSnippetsCacheCalculateDelta").parseAndGetMostRecentSnippetUpdateMutateRequestForChatJids(r.map(function(e){var t=e[0],n=e[1];return n}));return Promise.all(Array.from(a.entries()).map(async function(e){var n=e[0],r=e[1],o=await t.getValueFromCache(n);return{chatJid:n,lastComputedCacheValue:o,mutateReq:r}}))},r.calculateDelta=function(t){var e=this;return this.$MAWSnippetsCacheService$p_1(t).then(function(t){return t.length===0?Promise.resolve([]):o("MAWSnippetsCacheCalculateDelta").isDbTransactionRequiredForSnippetUpdate(t)?o("MAWIndexedDb").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY,reactions:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"MAWSnippetsCacheService:calculateDelta",function(t){return(function(n){return e.$MAWSnippetsCacheService$p_2(t,n)})})(t):e.$MAWSnippetsCacheService$p_3(t)})},r.computeCachePayloadFromScratch=function(t){var e=this;return o("MAWIndexedDb").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY,reactions:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"MAWSnippetsCacheService:computeCachePayloadFromScratch",function(t){return function(n){return o("MAWDexieTable").dexieAll(n.map(function(n){var r=o("WAJids").unsafeCoerceToChatJid(n);return e.$MAWSnippetsCacheService$p_4(t,r,"from-scratch")})).then(function(e){return e.filter(Boolean)})}})(t)},r.$MAWSnippetsCacheService$p_5=function(t,n){if(n==null)return"no-value-calculated-from-scratch";if(o("MAWUpdateThreadListItemUtils").isOptimisticMessage(t.value))return null;var e=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(t.value),r=e.msgAckLevel,a=e.msgId,i=e.reactionId,l=e.timestamp;return l==null?"missing-timestamp":a!=null&&a===n.value.snippetMsgId||i!=null&&i===n.value.snippetReactionId?null:a!=null&&r!==o("MAWAckLevel").ACK.received&&n.value.snippetMsgAckLevel===o("MAWAckLevel").ACK.clock?"optimistic-snippet-in-cache":l<n.timestamp?"older-than-last-snippet-value":null},r.shouldDropDelta=function(t){var e=this;return this.$MAWSnippetsCacheService$p_1(t).then(function(t){return t.length===0?Promise.resolve(!0):Promise.all(t.map(async function(t){var n=t.chatJid,r=t.lastComputedCacheValue,o=t.mutateReq,a=await e.$MAWSnippetsCacheService$p_5(o,r);return a!=null?(d({dropReason:a,key:n,msgOrReaction:o.value,operation:o.type}),!0):!1})).then(function(e){return!!e.every(function(e){return e===!0})})})},r.$MAWSnippetsCacheService$p_4=function(t,n,r){var e=this;return o("MAWThreadSnippetUtils").getThreadSnippetFromScratch(t,n).then(function(t){var a=e.$MAWSnippetsCacheService$p_6(n,t,r);if(a!=null)return o("MAWDexieTable").dexieResolve([n,a])})},r.$MAWSnippetsCacheService$p_3=function(t){var e=this;return t.map(function(t){var n=e.$MAWSnippetsCacheService$p_7(t);if(n!=null)return[t.chatJid,n]}).filter(Boolean)},r.$MAWSnippetsCacheService$p_2=function(t,n){var e=this;return o("MAWDexieTable").dexieAll(n.map(function(n){return o("MAWSnippetsCacheCalculateDelta").canCalculateSnippetUpdateFromDelta(n.mutateReq)?e.$MAWSnippetsCacheService$p_8(t,n.mutateReq.value).then(function(t){if(!t){var r=e.$MAWSnippetsCacheService$p_7(n);if(r!=null)return o("MAWDexieTable").dexieResolve([n.chatJid,r])}}):e.$MAWSnippetsCacheService$p_4(t,n.chatJid,"realtime-from-scratch")})).then(function(e){return e.filter(Boolean)})},r.$MAWSnippetsCacheService$p_7=function(t){var e=o("MAWThreadSnippetBuildTxns").buildThreadSnippetForMsgOrIncomingReaction(t.chatJid,t.mutateReq.value),n=this.$MAWSnippetsCacheService$p_6(t.chatJid,{snippet:e,snippetMsgOrReaction:t.mutateReq.value},"realtime-calculate-delta");return n},r.$MAWSnippetsCacheService$p_6=function(t,n,r){if(n==null){c({flow:r,key:t,threadSnippetResult:n});return}var e=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(n.snippetMsgOrReaction),a=e.msgAckLevel,i=e.msgId,l=e.reactionId,s=e.timestamp;if(c({flow:r,key:t,msgAckLevel:a,msgId:i,reactionId:l,threadSnippetResult:n,timestamp:s}),s!=null){var u=babelHelpers.extends({},n.snippet.snippetParams,{strings:n.snippet.snippetParams.strings.map(function(e){return o("MAWVault").unvault(e)})});return{key:t,timestamp:s,value:{snippet:babelHelpers.extends({},n.snippet,{snippetParams:u}),snippetMsgAckLevel:a,snippetMsgId:i,snippetReactionId:l}}}},r.$MAWSnippetsCacheService$p_8=function(t,n){if(!o("MAWSnippetsCacheCalculateDelta").isNeededToCheckMessageExistence(n))return o("MAWDexieTable").dexieResolve(!1);var e=o("MAWDbMsgOrReaction").switchOnMsgOrReaction(n,{forMessage:function(t){return null},forReaction:function(t){return t.reactToMsgId}});return e==null?o("MAWDexieTable").dexieResolve(!0):o("MAWDbMsgTxns").getMsgsByMsgIds(t,[e]).then(function(e){return e.length===0})},n})(r("MAWCacheServiceBase"));function c(e){var t=e.flow,n=e.key,o=e.msgAckLevel,a=e.msgId,i=e.reactionId,l=e.threadSnippetResult,u=e.timestamp;if(l==null){r("FBLogger")("MAWCacheService").warn(s+"["+t+"] Failed to calculate thread snippet, key: %s",n);return}if(u==null){r("FBLogger")("MAWCacheService").warn(s+"["+t+`] No timestamp found for the thread snippet, key: %s,
      msgId: %s, reactionId: %s`,n,a,i);return}r("FBLogger")("MAWCacheService").info(s+"["+t+`] Snippet successfully calculated, key: %s,
    timestamp: %s, msgId: %s, reactionId: %s, ack level %s`,n,u,a,i,o)}function d(e){var t=e.dropReason,n=e.key,a=e.msgOrReaction,i=e.operation,l=o("MAWSnippetsCacheServiceUtils").getMsgOrReactionIdAndTimestamp(a),u=l.msgAckLevel,c=l.msgId,d=l.reactionId,m=l.timestamp;r("FBLogger")("MAWCacheService").info(s+" Drop update for msg or reaction, reason: %s, key: %s, msgId: %s, reactionId: %s, timestamp: %s, ackLevel: %s, operation: %s",t,n,c,d,m,u,i)}var m=new u,p=function(){return m};l.getMAWSnippetsCacheService=p}),98);
__d("MAWDataSyncQueue",["WALogger","getErrorSafe","qex","throttle"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qex")._("853")||1e3,c=r("qex")._("855")||1e3,d=function(){return _=!1,C({isUnloading:!0})},m=[],p=[],_=!1,f=[],g=function(){var e,t=m.splice(0,m.length);(e=p).push.apply(e,t)},h=function(){return p.splice(0,u)},y=function(n){var t=h();if(t.length!==0)return Promise.all(f.map(function(r,a){return r(t,n).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unhandled exception caught in middleware "," sync: ",""])),a,t)})})).then(function(){return y(n)})},C=async function(t){if(!_){_=!0,g();try{await y(t)}catch(t){var e,n=r("getErrorSafe")(t);throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[MAWIndexedDbMiddleware] error handling queue batch: ",""])),(e=n==null?void 0:n.message)!=null?e:n.toString()),t}finally{_=!1,m.length>0&&b()}}},b=r("throttle")(C,c),v=function(t,n){m.push({type:t,value:n}),b()},S=function(t){f.some(function(e){return e===t})||f.push(t)},R=function(){f=[]},L=function(){m=[],p=[]},E=function(){return m};l.forceFlushDataSyncQueue=d,l.addSyncItem=v,l.registerDataSyncCallback=S,l.clearDataSyncCallbacks=R,l.clearDataSyncQueue_FOR_TESTING_ONLY=L,l.getDataSyncQueue_FOR_TESTING_ONLY=E}),98);
__d("MAWDataSyncMiddleware",["FBLogger","MAWDataSyncQueue","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set(["contacts","groupInfo","messages","participants","threads","reactions","xma","pendingStanzas"]);function s(t,n){var r=t.table(n);return e.has(n)?babelHelpers.extends({},r,{mutate:function(t){return r.mutate(t).then(function(e){return t.type==="delete"?(t.keys.forEach(function(e){o("MAWDataSyncQueue").addSyncItem(t.type,{key:e,tableName:n})}),e):(e.results!=null?e.results.forEach(function(e){o("MAWDataSyncQueue").addSyncItem(t.type,{key:e,tableName:n,values:t.values})}):e.lastResult!=null&&o("MAWDataSyncQueue").addSyncItem(t.type,{key:e.lastResult,tableName:n,values:t.values}),e)})}}):r}function u(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return s(t,n)}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(e).mustfix("Error applying DataSync Middleware, messages made during this session will not be properly synced to registered consumers"),t}},name:"MAWDataSyncMiddleware",stack:"dbcore"}}l.getDataSyncMiddleware=u}),98);
__d("MAWIndexedDb",["ExecutionEnvironment","FBLogger","MAWBridge","MAWCacheServiceMiddleware","MAWDataSyncMiddleware","MAWDbFactory","MAWDbMutationMiddleware","MAWDbMutationValidator","MAWDbProtocolMsgIdMiddleware","MAWDbSchema","MAWDexie","MAWLSDataSyncMiddleware","MAWMpsGating","MAWTransactor","MWFBLogger","cr:10181","cr:10182","cr:17239","cr:3527","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){e===void 0&&(e="idb");var t=o("MAWDbFactory").makeIDBFactory(e,"worker");function a(e){return t.setupPromise().then(function(){return t.getDBExn(e)})}return babelHelpers.extends({},t,{getSignalDB:a,makeDB:async function(a,i,l){var e=[o("MAWDbMutationMiddleware").getMAWDbMutationMiddleware];return o("MAWMpsGating").isMpsMessageRendering()||e.push(o("MAWLSDataSyncMiddleware").getMAWLSDataSyncMiddleware),r("gkx")("1760")&&e.push(o("MAWDbProtocolMsgIdMiddleware").MAWDbProtocolMsgIdMiddleware),e.push(r("MAWCacheServiceMiddleware")),i.enableDataSyncMiddleware&&e.push(o("MAWDataSyncMiddleware").getDataSyncMiddleware),i.enableMutationValidator===!0&&e.push(o("MAWDbMutationValidator").getMutationValidatorMiddleware),n("cr:3527")!=null&&e.push(n("cr:3527")),r("justknobx")._("4087")&&n("cr:17239")!=null&&await n("cr:17239")(a),t.makeDB(a,{autoOpen:!0,middleware:e,onDbPopulate:i.onDbPopulate},l)}})}var c=u(),d="idle",m=c.isNewDb,p=c.willSetupDB,_=function(t,n,r){return c.makeDB(t,n,r).then(function(){d="ready"})},f=c.closeDB,g=c.getDBExn,h=c.getSignalDB,y=c.getDB,C=function(t){return c.reset_singleton_INTERNAL_ONLY()},b=c.deleteDb;function v(){return d}function S(e){var t=d;return d="migrating",e.finally(function(){d=t})}var R=new WeakMap,L=new WeakMap,E=o("MWFBLogger").MWLogger().tags(["db","afterTransaction"]);function k(e){var t=r("MAWDexie").currentTransaction;if(t==null)throw E.mustfixThrow("afterTransactionEffect called outside of dexie transaction");if(typeof e=="function"){var n=R.get(t)||[];n.push(e),R.set(t,n),n.length===1&&t.on("complete",function(){var e=R.get(t)||[];e.forEach(function(e){e()}),R.delete(t)})}}function I(e){var t=r("MAWDexie").currentTransaction;if(t==null)throw E.mustfixThrow("afterTransaction called outside of dexie transaction","maw_db");var a=L.get(t);if(a!=null)a.push(e);else{var i=[e];L.set(t,i),t.on("complete",function(){L.delete(t),r("gkx")("5675")&&(s||(s=r("ExecutionEnvironment"))).isInMainThread&&n("cr:10182")!==null&&n("cr:10181")!==null?n("cr:10182").handleEvents(n("cr:10181").LSDatabaseSingleton,i):o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:i})})}}var T=new Set(["NewMsg","NewMsgs","MsgUpdated","NewMedia","NewMediaRange","MediaExpired","XMAShareExpired","DeleteMessagesOfThread","UpsertReaction","DeleteReaction","DeleteMessages","NewXMA","EditMsgHistoryAdded","MsgsStartCountdown","MsgClearCountdown","XMAShareTombstoned","NewReceiverFetchInfo","NewXMAs","NewPoll","RavenActionUpdate"]);function D(t,n){if(n!==!0&&o("MAWMpsGating").isMpsMessageRendering()&&T.has(t.tag)){r("FBLogger")("wmi").INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MpsMessageRendering] Ignoring afterTxn event: ",""])),t.tag);return}if(t.tag==="UpdateThreadActivity"&&r("FBLogger")("wmi").mustfix("Thread consistency uses MAW DB mechanism instead of new one"),t.tag==="ThreadUpdated")try{var a=t.value.snippetContactIDs;a!=null&&a.some(function(e){return e==="Facebook User"})&&(E.mustfix('Something is still setting a contact id as "Facebook User"'),t.value=babelHelpers.extends({},t.value,{snippetContactIDs:a.map(function(e){return e==="Facebook User"?"0":e})}))}catch(e){}I(t)}function x(e,t){var n=r("MAWDexie").currentTransaction;if(n==null)throw E.mustfixThrow("afterTransactionForThreadEvent called outside of dexie transaction","maw_db");n.on("complete",function(){o("MAWBridge").getBridge().fireAndForget("threadEvent",t,e)})}l.TABLES_TO_ENCRYPT=o("MAWDbSchema").TABLES_TO_ENCRYPT,l.makeMsgrTransactor=o("MAWTransactor").makeMsgrTransactor,l.makeMAWIndexedDBFactory=u,l.isNewDb=m,l.willSetupDB=p,l.makeDB=_,l.closeDB=f,l.getDBExn=g,l.getSignalDB=h,l.getDB=y,l.setDB_INTERNAL_USE_ONLY=C,l.deleteDb=b,l.getDbStatus=v,l.updateStatusDuringMigration=S,l.afterTransactionEffect=k,l.afterTransaction=D,l.afterTransactionThreadEvent=x}),98);
__d("MAWLLAMigrationUtils",["Random","gkx","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("652"),s=Math.max(e,10),u=s*10,c=new Map([["FTS",u]]);function d(e){if(r("gkx")("9340"))return 1;var t=c.get(e);return t!=null?t:s}function m(e,t){t===void 0&&(t={});var n=d(e);return e==="debug"||e==="test"?[]:r("gkx")("23956")&&o("Random").coinflip(n)?[r("qpl")._(1056839327,"560"),babelHelpers.extends({double:{sampleRate:1/n},string:{transactor:e}},t)]:[]}l.getTransactorQPLParam=m}),98);
__d("MAWTransactor",["MAWDexie","MAWDexieTable","MAWErrorObject","MAWIndexedDb","MAWIndexedDbUI","MAWLLAMigrationUtils","MAWQplProxy","MAWTransactionMode","MWFBLogger","WAExceededStorageQuota","WALogger","gkx","performance"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=["MWPTransactor"],d=o("MWFBLogger").MWLogger();function m(t,n,a,i,l,s){return i!=null&&r("MAWDexie").currentTransaction!=null&&i.endFail("invoked_in_nested_transaction",{string:{current_transaction_mode:r("MAWDexie").currentTransaction.mode},string_array:{current_transaction_store_names:r("MAWDexie").currentTransaction.storeNames}}),r("MAWDexie").currentTransaction!=null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["makeMsgrTransactor "," should not be called inside another transaction. The transaction will be forced to execute on top-level"])),l),t.transact(n,a,s)}function p(e){var t=o("MAWLLAMigrationUtils").getTransactorQPLParam(e),n=t.length===2?t:[null,void 0],r=n[0],a=n[1];return r!=null?o("MAWQplProxy").startQplUserFlow(r,a,{sendThroughBridge:!1}):null}function _(e,t,n,r){return C(e,t,function(e){return o("MAWIndexedDb").getDB(e)},n,r)}function f(e,t,n){return C(e,t,o("MAWIndexedDbUI").getDB,n)}function g(e,t,n){return C(e,t,o("MAWIndexedDbUI").getDB,n)}var h=0,y=new Map;function C(e,t,n,a,i){var l=Object.keys(e),_=l.some(function(t){return e[t]===o("MAWTransactionMode").READWRITE})?o("MAWTransactionMode").READWRITE:o("MAWTransactionMode").READONLY;return function(){for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];var C=p(t),S=null,R=function(){return self.clearInterval(S)};if(C!=null&&(C.addAnnotations({string:{mode:_===o("MAWTransactionMode").READWRITE?"readwrite":"readonly"},string_array:{stores:l}}),r("gkx")("1006")&&t==="bulkCreateThreadByJid")){var L=1e3,E=Date.now();S=self.setInterval(function(){C.addAnnotations({int:{heartbeatLatestAliveSinceStartMs:Date.now()-E}})},L),self.setTimeout(R,o("MAWQplProxy").DEFAULT_WORKER_QPL_TIMEOUT_MS)}var k=(u||(u=r("performance"))).now()+u.timeOrigin;return n(t).then(function(e){var n=Array.from(y.values());C==null||C.addPoint("lock_wait_start",{string_array:{maybeLockedOn:n}});var p=(u||(u=r("performance"))).now();return i==null||i.onTxnRequestedCb==null||i.onTxnRequestedCb.apply(i,f),m(e,_,l,C,t,function(){o("MAWDexieTable").setDexiePSDItem("transactionRequested",k),o("MAWDexieTable").setDexiePSDItem("transactorName",t),C==null||C.addPoint("dexie_transaction_start"),h+=1;var m=h;y.set(m,t);var _=C!=null?e.stores[l[0]].get("").then(function(){C==null||C.addPoint("lock_wait_end"),C==null||C.addPoint("transaction_opened"),C==null||C.addPoint("transactor_execution_start")}):o("MAWDexieTable").dexieResolve();return _.then(function(){return a(e.stores).apply(void 0,f)}).then(function(e){if(r("gkx")("6795")&&(i==null?void 0:i.explicitlyCloseTxn)===!0){var a;(a=r("MAWDexie").currentTransaction)==null||(a=a.idbtrans)==null||a.commit==null||a.commit()}y.delete(m),C==null||C.addPoint("transactor_execution_end"),C==null||C.endSuccess(),R();var l=(u||(u=r("performance"))).now()-p;return l>5e3&&(o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[Slow maw transaction] "," took ","ms to complete. Potentially waiting for locks on ",""])),t,l,n.join(", ")),d.mustfix("[Slow maw transaction] %s took long to complete. Potentially waiting for locks on $s",t,n.join(", "))),e}).catch(function(e){y.delete(m),o("WAExceededStorageQuota").checkQuotaExceededError(e);var n=e.name==="AbortError"?e==null?void 0:e.inner:null,r=b(n);if(C==null||C.markError("transaction_error",null,e),e instanceof Error){var a=e,i=typeof(a==null?void 0:a.stack)=="string"?a.stack:typeof(a==null?void 0:a.stack),l=typeof(a==null?void 0:a.message)=="string"?a.message:typeof(a==null?void 0:a.message);C==null||C.addAnnotations({string:{errMessage:l,errStack:i,innerError:r}})}C==null||C.endFail("transaction_fail"),R();var s=o("MAWErrorObject").getErrorObject(e);throw v(s).mustfixThrow("[%s] Error performing %s transaction. Inner error: %s",c.join("|"),t!=null?t:"",r!=null?r:"unknown")})})}).catch(function(e){o("WAExceededStorageQuota").checkQuotaExceededError(e),C==null||C.endFail("transaction_fail"),R();var n=o("MAWErrorObject").getErrorObject(e);throw v(n).mustfixThrow("[%s] Error performing %s transaction",c.join("|"),t!=null?t:"")})}}function b(e){if(typeof e=="string")return e;if(e instanceof Error)return e.name+": "+e.message;if(typeof e=="object")try{return JSON.stringify(e)}catch(e){}return null}function v(e){return e?d.catching(e):d}l.makeMsgrTransactor=_,l.makeMsgrUITransactor_IMPORT_FROM_MAWIndexedDbUI_INSTEAD=f,l.makeMsgrUIWritableTransactor=g}),98);
__d("MAWThreadUpdateType",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1,s=2,u=3,c=Object.freeze({BUMP_THREAD:s,MARK_THREAD_AS_UNREAD:u,NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:e,SNIPPET_ONLY:l});i.THREAD_UPDATE_TYPE=c}),66);
__d("MAWGetThreadUpdateTypeForAdminMsg",["FBLogger","MAWAdminMsgTypesGrouped","MAWLocalizationType","MAWThreadUpdateType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e;return t==null?(r("FBLogger")("messenger_web").mustfix("nullAdminType"),o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE):s(t)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:u(t)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:c(t)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:(d(t)||r("FBLogger")("messenger_web").mustfix("unsupportedAdminMsgType"),o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE)}function s(e){return o("MAWAdminMsgTypesGrouped").otherUserAddRemoveParticipant.includes(e)||o("MAWAdminMsgTypesGrouped").chatCustomizedByOtherUser.includes(e)||o("MAWAdminMsgTypesGrouped").callActionToNotifyAbout.includes(e)||o("MAWAdminMsgTypesGrouped").twoUsersConnected.includes(e)||o("MAWAdminMsgTypesGrouped").fallbackMsgFromOtherUser.includes(e)||o("MAWAdminMsgTypesGrouped").otherUserBumpsMessage.includes(e)||o("MAWAdminMsgTypesGrouped").otherNonAdminMsgToBeMarkedAsUnread.includes(e)||e===o("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR}function u(e){return o("MAWAdminMsgTypesGrouped").currentUserAddRemoveParticipant.includes(e)||o("MAWAdminMsgTypesGrouped").chatCustomizedByCurrentUser.includes(e)||o("MAWAdminMsgTypesGrouped").callActionNotToNotifyAbout.includes(e)||o("MAWAdminMsgTypesGrouped").fallbackMsgFromCurrentUser.includes(e)||o("MAWAdminMsgTypesGrouped").currentUserBumpsMessage.includes(e)||o("MAWAdminMsgTypesGrouped").otherNonAdminMsgToBeBumped.includes(e)||o("MAWAdminMsgTypesGrouped").limitSharingUpdate.includes(e)}function c(e){return e===o("MAWLocalizationType").LOCALIZATION_TYPE.CUTOVER_ROLLBACK_ADMIN_MESSAGE||o("MAWAdminMsgTypesGrouped").dualThreadCutoverAdminMsgs.includes(e)||o("MAWAdminMsgTypesGrouped").ephemeralSettingChanges.includes(e)||o("MAWAdminMsgTypesGrouped").groupPermissionsChanged.includes(e)||o("MAWAdminMsgTypesGrouped").participantLeftGroup.includes(e)||o("MAWAdminMsgTypesGrouped").pinnedMessageUpdate.includes(e)}function d(e){return o("MAWAdminMsgTypesGrouped").cutoverAdminMsgs.includes(e)||o("MAWAdminMsgTypesGrouped").deviceChanges.includes(e)||o("MAWAdminMsgTypesGrouped").icdcAlerts.includes(e)||o("MAWAdminMsgTypesGrouped").otherNonAdminMsgToNotTriggerUpdate.includes(e)||e===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION||e===o("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET||e===o("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG||e===o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE}l.getThreadUpdateTypeForAdminMsg=e}),98);
__d("MAWGetThreadUpdateType",["FBLogger","MAWDbMsgOrReaction","MAWGetThreadUpdateTypeForAdminMsg","MAWThreadSnippetUtils","MAWThreadUpdateType","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.reaction==null;return u(e,t)}function s(e){return c(e.reactToAuthor)&&!c(e.author)}function u(e,t){return s(e)&&!t?e.senderTimestampMs==null?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE}function c(e){return e===o("WAJids").AUTHOR_ME||e===o("MAWUserJidWrapper").getMyUserJid()}function d(e){var t=e.adminType,n=e.author,a=e.msgType,i=e.xmaMessageType,l=function(t){var e=t.me,r=t.other;return o("WAJids").isAuthorMe(n)?e:r};switch(a){case"Text":case"ReceiverFetch":case"Sticker":case"Unavailable":case"Video":case"Futureproof":case"DocumentFile":case"EphemeralScreenshotAction":case"Gif":case"Image":case"Ptt":case"RavenAction":case"Raven":case"GroupPollCreate":case"GroupPollUpdate":case"BumpExistingMessage":return l({me:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD,other:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD});case"XMA":return o("MAWThreadSnippetUtils").shouldIgnoreXMAMsgForSnippet(i)?o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:l({me:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD,other:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD});case"Revoked":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;case"DeleteForMe":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE;case"EditAction":return l({me:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY,other:o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE});case"GroupInvite":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;case"Admin":{if(a==="Admin")return o("MAWGetThreadUpdateTypeForAdminMsg").getThreadUpdateTypeForAdminMsg(t);throw r("FBLogger")("messenger_web").mustfixThrow("Non-admin msg passed in "+(a!=null?a:"UNKNOWN"))}case"SenderKeyDistribution":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE;case"AlertICDC":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;case"Ciphertext":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD;case"EphemeralSettingAdmin":case"EphemeralSettingChangeFromCurrentDevice":case"EphemeralSyncResponse":return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWGetThreadUpdateType] Unexpected message type: %s",a!=null?a:"UNKNOWN")}}function m(t){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstoredNullish(t,{forMessage:function(t){var e;return d({adminType:(e=t.msgContent)==null?void 0:e.adminType,author:t.author,msgType:t.type,xmaMessageType:t.xmaMessageType})},forNull:function(){return o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE},forReaction:function(n){return e(n)}})}function p(e){var t=m(e);switch(t){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:return!1;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return!0;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate][snippet] Unhandled threadUpdateType: "+t)}}function _(e){var t=m(e);switch(t){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:return!1;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return!0;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate][bump] Unhandled threadUpdateType: "+t)}}l.getThreadUpdateTypeForReaction=e,l.canReactionAffectBump=s,l.getReactionThreadUpdateType=u,l.getThreadUpdateTypeForMsg=d,l.getThreadUpdateTypeForMsgOrReaction=m,l.isThreadUpdateTypeEligibleForSnippet=p,l.isThreadUpdateTypeEligibleForBump=_}),98);
__d("MAWCacheServiceMiddleware",["FBLogger","MAWIndexedDb","MAWMpsGating","MAWWorkerCacheServices","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=["messages","reactions"],s=["messages","reactions"];function u(e,t,n){var r,o,a=n.trans,i=(r=(o=a._transactorMeta)==null?void 0:o.mawCacheServiceAccumulatedRequests)!=null?r:[];if(n.type==="delete"&&s.includes(t.name))return p(e,t.name,n).then(function(e){var r=babelHelpers.extends({},n,{deletedValues:e});return i.push([t.name,r]),a._transactorMeta=babelHelpers.extends({},a._transactorMeta,{mawCacheServiceAccumulatedRequests:i}),t.mutate(n)});var l=babelHelpers.extends({},n,{decryptedValues:n.values?n.values:void 0});return i.push([t.name,l]),a._transactorMeta=babelHelpers.extends({},a._transactorMeta,{mawCacheServiceAccumulatedRequests:i}),t.mutate(n)}function c(e){var t,n=e.trans;((t=n._transactorMeta)==null?void 0:t.mawCacheServiceAfterTransactionScheduled)!==!0&&(o("MAWIndexedDb").afterTransactionEffect(function(){var e,t,r=(e=(t=n._transactorMeta)==null?void 0:t.mawCacheServiceAccumulatedRequests)!=null?e:[];r.length!==0&&o("MAWWorkerCacheServices").getMAWWorkerCacheServices().calculateDelta(r)}),n._transactorMeta=babelHelpers.extends({},n._transactorMeta,{mawCacheServiceAfterTransactionScheduled:!0}))}function d(t,n){var r=t.table(n);return!e.includes(n)||o("MAWMpsGating").isMpsSnippetsCacheServiceEnabled()?r:babelHelpers.extends({},r,{mutate:function(n){return c(n),u(t,r,n)}})}function m(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return d(t,n)}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("MAWCacheService").catching(e).mustfix("Error applying MAW Cache Service Middleware"),t}},name:"MAWCacheServiceMiddleware",stack:"dbcore"}}function p(e,t,n){var r=n.keys,o=n.trans;return e.table(t).getMany({keys:r,trans:o}).then(function(e){return e.filter(Boolean)})}l.default=m}),98);
__d("isEncryptionAtRestEnabled",["isInstamadillo","qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("507")===!0?!0:r("isInstamadillo")()}l.default=e}),98);
__d("MAWDbMiddlewareMutations",["MAWDbObjEncryption","MAWVaultDb","MAWVaultDefinitions","gkx","isEncryptionAtRestEnabled"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("23909");function s(t,n,a){if(!e&&!(r("isEncryptionAtRestEnabled")()||r("gkx")("23910")))return t;var i=babelHelpers.extends({},t);return i=o("MAWVaultDb").unvaultDbRow(i,n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS),i=o("MAWDbObjEncryption").encryptDbObj(i,n,a),i}function u(t,n){return e?o("MAWVaultDb").unvaultDbRow(babelHelpers.extends({},t),n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS):t}function c(t,n,r){var a=o("MAWDbObjEncryption").decryptDbObj(babelHelpers.extends({},t),n,r);return e?o("MAWVaultDb").vaultDbRow(a,n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS):a}function d(t,n){if(t!=null)return e?o("MAWVaultDb").vaultDbRow(t,n,o("MAWVaultDefinitions").ARMADILLO_IDB_VAULT_DEFINITIONS):t}l.mutateValue=s,l.mutateVaultedValue=u,l.getValue=c,l.getVaultedValue=d}),98);
__d("MAWDbMutationValidator",["FBLogger","MAWIndexedDb","MAWMessageHasNonNullServerTsOnReceivedAckValidator","MAWMessageHasUniqueExternalIdValidator","MAWODSProxy","MAWParticipantMatchOneOnOneThreadValidator","MAWReactionHasUniqueProtocolMsgIdValidator","Promise","Random","WAOdsEnums","getErrorSafe","gkx","justknobx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=[o("MAWMessageHasUniqueExternalIdValidator").MAWMessageHasUniqueExternalIdValidator,o("MAWParticipantMatchOneOnOneThreadValidator").MAWParticipantMatchOneOnOneThreadValidator,o("MAWReactionHasUniqueProtocolMsgIdValidator").MAWReactionHasUniqueProtocolMsgIdValidator,o("MAWMessageHasNonNullServerTsOnReceivedAckValidator").MAWMessageHasNonNullServerTsOnReceivedAckValidator],u=r("justknobx")._("2610"),c=r("gkx")("5906"),d=function(t){return o("Random").coinflip(t!=null?t:u)||c};function m(t,a){var i=t.table(a),l=s.filter(function(e){return e.table===a});return l.length===0?i:babelHelpers.extends({},i,{mutate:function(a){return o("MAWIndexedDb").getDbStatus()!=="ready"?i.mutate(a):i.mutate(a).then(function(t){var i=l.filter(function(e){var t=e.sampleRate,n=e.type;return n.includes(a.type)&&d(t)});return o("MAWIndexedDb").afterTransactionEffect(function(){var l=i.flatMap(function(e){var n,r=e.description,o=e.isValid;return((n=t.results)!=null?n:[]).map(function(e){return o(e).then(function(e){return babelHelpers.extends({validatorName:r},e)})})});r("promiseDone")((e||(e=n("Promise"))).all(l).then(function(e){e.forEach(function(e){switch(e.result){case"valid":o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MUTATION_VALIDATOR,key:e.validatorName+"."+a.type+".valid"});break;case"invalid":o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MUTATION_VALIDATOR,key:e.validatorName+"."+a.type+".invalid"}),r("FBLogger")("maw_mutation_validator").mustfix("Validator %s failed for %s mutation, with description: %s",e.validatorName,a.type,e.description);break;case"skipped":break}})}))}),t})}})}function p(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return m(t,n)}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(e).mustfix("Error applying Mutation Validator Middleware"),t}},name:"MAWMutationValidatorMiddleware",stack:"dbcore"}}l.getMutationValidatorMiddleware=p}),98);
__d("MAWDbProtocolMsgIdMiddleware",["FBLogger","MAWDBMigrationUtils","MAWJidUtils","MAWODSProxy","Random","WAOdsEnums","getErrorSafe","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3300");function s(t){return babelHelpers.extends({},t,{get:function(n){return t.get(n).then(function(e){return d(e,"get"),e})},getMany:function(n){return t.getMany(n).then(function(e){return e==null?void 0:e.map(function(e){return d(e,"getMany"),e})})},mutate:function(a){return a.type==="add"?a.values.map(function(e){return u(e)}):a.type==="put"&&r("gkx")("11791")&&r("justknobx")._("3947")&&a.values.map(function(t){t.protocolMsgId==null&&(o("MAWDBMigrationUtils").mawDbMigrationVersion.version>=o("MAWDBMigrationUtils").MAWDB_DEDUPE_MSGS_MIGRATION_VERSION?(o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.put_operation_after_migration_complete.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version}),u(t)):t.rowId<o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.cursorValue?(o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.put_operation_below_migration_cursor.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version}),u(t)):o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.isRunning&&t.rowId<o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.cursorValue+o("MAWDBMigrationUtils").mawDbDedupeMsgsMigrationStatus.batchSize&&(o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.put_operation_in_current_migration_batch.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version}),u(t)))}),t.mutate(a)},query:function(n){return t.query(n).then(function(e){var t;return e==null||(t=e.result)==null||t.map(function(e){d(e,"query")}),e})}})}function u(e){e.protocolMsgId=o("MAWJidUtils").toProtocolMsgIdStringForMAWStorage(e)}function c(e){return(e==null?void 0:e.rowId)==null&&(e==null?void 0:e.externalId)==null}function d(t,n){try{var a=r("justknobx")._("3947");if(c(t)){n!=="get"&&o("Random").coinflip(e)&&r("FBLogger")("messenger_web").warn("Corrupted message row returned from DB, msg is null:%s, queryType: %s",t==null,n);return}(t==null?void 0:t.protocolMsgId)==null&&o("Random").coinflip(e)&&(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"null_protocol_msg_id.migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version+".append_protocol_msg_id_for_put_operation_jk_"+String(a)}),o("MAWDBMigrationUtils").mawDbMigrationVersion.version>=o("MAWDBMigrationUtils").MAWDB_DEDUPE_MSGS_MIGRATION_VERSION&&r("FBLogger")("maw_db_migration").warn("Message with null protocolMsgId after the msg dedupe migration. type: %s, rowId: %s, externalId: %s",t==null?void 0:t.type,t==null?void 0:t.rowId,t==null?void 0:t.externalId)),t!=null&&t.protocolMsgId!=null&&t.protocolMsgId!==o("MAWJidUtils").toProtocolMsgIdStringForMAWStorage(t)&&o("Random").coinflip(e)&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_PROTOCOL_MSG_ID_INDEX,key:"inconsistent_protocol_msg_id."+(t==null?void 0:t.type)+".migration_version_"+o("MAWDBMigrationUtils").mawDbMigrationVersion.version+".append_protocol_msg_id_for_put_operation_jk_"+String(a)})}catch(e){var i=r("getErrorSafe")(e);r("FBLogger")("messenger_web").catching(i).mustfix("Error while checking protocol msg id")}}function m(){return{create:function(t){try{return babelHelpers.extends({},t,{table:function(n){return n!=="messages"?t.table(n):s(t.table(n))}})}catch(n){var e=r("getErrorSafe")(n);return r("FBLogger")("messenger_web").catching(e).mustfix("Error applying Protocol MsgId Middleware"),t}},name:"MAWDbProtocolMsgIdMiddleware",stack:"dbcore"}}l.appendProtocolMsgId=u,l.isCorruptedMsgRow=c,l.MAWDbProtocolMsgIdMiddleware=m}),98);
__d("MAWLSDataSyncMiddleware",["FBLogger","MAWBridge","MAWLSEditMsgHistoryAddedDataSyncHandler","MAWLSMsgsDataSync","MAWLSReactionsDataSyncHandler","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(){var t=new Set;t.add(o("MAWLSReactionsDataSyncHandler").mawLSReactionsDataSyncHandler),t.add(o("MAWLSEditMsgHistoryAddedDataSyncHandler").mawLSEditHistoryDataSyncHandler),t.add(o("MAWLSMsgsDataSync").mawLSMsgsDataSyncHandler),t.forEach(function(t){e.set(t.tableName,t)})}function u(t){return babelHelpers.extends({},t,{mutate:function(r){var n=e.get(t.name);return n!=null?n.performAndSyncMutation(r,t):t.mutate(r)}})}function c(){return s(),{create:function(n){try{return babelHelpers.extends({},n,{table:function(r){return e.has(r)?u(n.table(r)):n.table(r)}})}catch(e){var t=r("getErrorSafe")(e);return r("FBLogger")("maw_db").catching(t).mustfix("Error applying MAW to LS data sync middleware"),n}},name:"MAWLSDataSyncMiddleware",stack:"dbcore"}}function d(e){o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[e]})}l.getMAWLSDataSyncMiddleware=c,l.syncToLS=d}),98);
__d("MAWLSEditMsgHistoryAddedDataSyncHandler",["MAWIndexedDb","MAWLSDataSyncMiddleware"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.map(function(e){return babelHelpers.extends({},e)});o("MAWLSDataSyncMiddleware").syncToLS({tag:"EditMsgHistoryAdded",value:t})}var s={performAndSyncMutation:function(n,r){switch(n.type){case"put":case"add":{var t=[].concat(n.values);o("MAWIndexedDb").afterTransactionEffect(function(){return e(t)})}break}return r.mutate(n)},tableName:"editMsgHistory"};l.mawLSEditHistoryDataSyncHandler=s}),98);
__d("MAWLSMsgsDataSync",["MAWBridgeTypesCreators","MAWIndexedDb","MAWLSDataSyncMiddleware"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=t.keys,r=t.trans;return e.getMany({keys:n,trans:r}).then(function(e){return e.filter(Boolean)})}function s(e){var t=e.reduce(function(e,t){var n,r=o("MAWBridgeTypesCreators").createBridgeDeletedMessage(t);return e.has(t.threadJid)||e.set(t.threadJid,[]),(n=e.get(t.threadJid))==null||n.push(r),e},new Map);t.entries().forEach(function(e){var t=e[0],n=e[1],r={messages:n,threadJid:t};o("MAWLSDataSyncMiddleware").syncToLS({tag:"DeleteMessages",value:r})})}var u={performAndSyncMutation:function(n,r){switch(n.type){case"delete":return e(r,n).then(function(e){return o("MAWIndexedDb").afterTransactionEffect(function(){return s(e)}),r.mutate(n)});default:return r.mutate(n)}},tableName:"messages"};l.mawLSMsgsDataSyncHandler=u}),98);
__d("MAWLSReactionsDataSyncHandler",["MAWBridgeTypesCreators","MAWIndexedDb","MAWLSDataSyncMiddleware"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.reaction,r=e.reactToMsgId,a=e.threadJid,i=e.ts;r!=null&&o("MAWLSDataSyncMiddleware").syncToLS({tag:"UpsertReaction",value:o("MAWBridgeTypesCreators").createBridgeUpsertReaction({author:t,chatJid:a,reaction:n||"",reactToMsgId:r,ts:i})})}function s(e){var t=e.author,n=e.reactToMsgId,r=e.threadJid;n!=null&&o("MAWLSDataSyncMiddleware").syncToLS({tag:"DeleteReaction",value:o("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:t,chatJid:r,reactToMsgId:n})})}function u(t){t.forEach(function(t){t.reaction==null?s(t):e(t)})}var c={performAndSyncMutation:function(t,n){switch(t.type){case"put":case"add":{var e=[].concat(t.values);o("MAWIndexedDb").afterTransactionEffect(function(){return u(e)})}break}return n.mutate(t)},tableName:"reactions"};l.mawLSReactionsDataSyncHandler=c}),98);
__d("MAWDbReaction",["FBLogger","I64","MAWAckLevel","MAWGetBumpTimestampMs","MAWUserJidWrapper","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=e.author,n=e.reaction,r=e.reactToAuthor,a=o("MAWUserJidWrapper").getMyUserJid();return!(n==null||n===""||r!=="@me"&&r!==a||t==="@me"||t==="@system"||t===a)}function u(e){var t=o("MAWUserJidWrapper").getMyUserJid();if(e.reactToAuthor!=="@me"&&e.reactToAuthor!==t||e.reaction==null)return null;var n=e.author==="@me"||e.author==="@system"?null:e.author;return n==null?null:babelHelpers.extends({},e,{author:n,reaction:e.reaction,reactToAuthor:"@me"})}function c(e){var t=u(e);if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot cast reaction to incomingDbReaction");return t}function d(e,t,n){var r=o("MAWUserJidWrapper").getMyUserJid();return e.find(function(e){return e.threadJid===t&&o("WAJids").authorToUserId(e.author,r)===o("WAJids").authorToUserId(n,r)})}function m(e){return e}function p(e,t,n,r,a,i,l,s,u,c,d,m,p){m===void 0&&(m=o("MAWAckLevel").ACK.clock);var _={ack:m,author:c,externalId:t,groupingKey:i,reaction:a,reactionId:n,reactToAuthor:l,reactToExternalId:r,reactToMsgId:s,senderTimestampMs:p,threadJid:e,ts:u};return d!=null?babelHelpers.extends({},_,{rowId:d}):_}function _(t){var n=o("MAWGetBumpTimestampMs").getBumpTimestampMs(t);return o("WATimeUtils").castToMillisTime((e||(e=o("I64"))).to_float(n))}l.isIncomingReaction=s,l.maybeCastToIncomingDbReaction=u,l.castToIncomingDbReaction=c,l.findMatchingReaction=d,l.reactionIdToMsgId=m,l.formatReactionForDb=p,l.getReactionTimeMs=_}),98);
__d("last",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=null;if(Array.isArray(e)||typeof e=="string")e.length&&(t={value:e[e.length-1]});else for(var n of e)t=t||{},t.value=n;return t?t.value:null}i.default=e}),66);
__d("MAWThreadNewestMsgOrReactionUtils",["FBLogger","MAWDbMsg","MAWDbMsgTxns","MAWDbReaction","MAWDbReactionsTxns","MAWDexieTable","MAWGetThreadUpdateType","MAWODSProxy","MAWThreadUpdateType","WALogger","WAMsg","WAOdsEnums","WATimeUtils","first","last"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return _(e,t,u)}function u(e,t){switch(e){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return t!==!0;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:return!1;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate] Unhandled threadUpdateType to create filter function : "+e)}}function c(e,t){return _(e,t,m)}function d(e){var t=e.db,n=e.jid,r=e.limit;return o("MAWDbMsgTxns").fetchMessagesFromDbWithSortOrderMs(t,n,null,!0,r,function(e){var t;return p(o("MAWGetThreadUpdateType").getThreadUpdateTypeForMsg({adminType:(t=e.msgContent)==null?void 0:t.adminType,author:e.author,msgType:e.type,xmaMessageType:e.xmaMessageType}),e.ephemeralMsgDisappeared===!0)},"before")}function m(e,t){switch(e){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return t!==!0;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:return!1;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCentralizedThreadUpdate] Unhandled threadUpdateType to create filter function : %s",e)}}function p(e,t){switch(e){case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.MARK_THREAD_AS_UNREAD:return t!==!0;case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.NO_SNIPPET_OR_ACTIVITY_TS_UPDATE:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.SNIPPET_ONLY:case o("MAWThreadUpdateType").THREAD_UPDATE_TYPE.BUMP_THREAD:return!1;default:throw r("FBLogger")("messenger_web").mustfixThrow("[MAWCacheService] Unhandled threadUpdateType to create filter function : %s",e)}}function _(t,n,r){var a=function(a){return a==null?o("MAWDexieTable").dexieResolve(null):g(t,n,r,a)};return f(t,n,r).then(function(t){return a(t).then(function(r){if(t==null&&r==null)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[CentralizedThreadUpdate] No Reaction or Message in "," is eligible for snippet"])),n),null;if(r==null)return t;if(t==null)return r;var a=o("WATimeUtils").castToMillisTime(o("MAWDbMsg").getSortOrderWithFallback(t)),i=o("MAWDbReaction").getReactionTimeMs(r);return a>=i?t:r})})}function f(e,t,n){return o("MAWDbMsgTxns").fetchMessagesFromDbWithSortOrderMs(e,t,null,!0,1,function(e){var t;return n(o("MAWGetThreadUpdateType").getThreadUpdateTypeForMsg({adminType:(t=e.msgContent)==null?void 0:t.adminType,author:e.author,msgType:e.type,xmaMessageType:e.xmaMessageType}),e.ephemeralMsgDisappeared===!0)},"before").then(r("first"))}function g(e,t,n,a){var i=o("MAWDbMsg").getSortOrderWithFallback(a),l=function(a,l){return o("MAWDbReactionsTxns").fetchReactionsFromDbWithTimestamp(e,t,o("WATimeUtils").castToMillisTime(i),l,l==null,a,function(e){return n(o("MAWGetThreadUpdateType").getThreadUpdateTypeForReaction(e),!1)&&o("MAWDbReaction").getReactionTimeMs(e)>i})},s=[1,10],u=100,c=new Set,d=function(n,a){var t;return l((t=s[n])!=null?t:u,a).then(function(t){var a=t.filter(function(e){return!c.has(C(e))});return a.length===0?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_THREAD_GET_NEWEST_REACTION_BATCH_NUM,key:"new."+n}),null):h(e,a).then(function(e){var a=e.newestReaction,i=e.nullMsgIds;return a!=null?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_THREAD_GET_NEWEST_REACTION_BATCH_NUM,key:"new."+n}),a):(i.forEach(function(e){return c.add(e)}),d(n+1,r("last")(t)))})})};return d(0,null)}function h(e,t){return o("MAWDbMsgTxns").getUniqueMsgsByProtocolMsgIds(e,t.map(y)).then(function(e){var n=new Set(e.map(b)),r=new Set,o=null;return t.forEach(function(e){var t=C(e);n.has(t)?o=v(o,e):r.add(t)}),{newestReaction:o,nullMsgIds:r}})}function y(e){return{author:e.reactToAuthor,chat:e.threadJid,externalId:e.reactToExternalId}}function C(e){return o("WAMsg").craftWAMsgIdString(y(e))}function b(e){return o("WAMsg").craftWAMsgIdString({author:e.author,chat:e.threadJid,externalId:e.externalId})}function v(e,t){return e==null?t:t==null||o("MAWDbReaction").getReactionTimeMs(e)>o("MAWDbReaction").getReactionTimeMs(t)?e:t}l.getNewestMsgOrReactionForBump=s,l.filterForBump=u,l.getNewestMsgOrReactionForSnippet=c,l.getNewestIncomingMsgsForSnippet=d,l.filterForSnippet=m,l.filterForSnippetNewestIncomingMessages=p,l.getNewestReactionToNonNullMsg=h}),98);
__d("MAWLocalizationUtils",["MAWAckLevel","MAWLocalizationType","MAWMsgType","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set([(e=o("MAWLocalizationType")).LOCALIZATION_TYPE.CURRENT_USER_CREATED_POLL,e.LOCALIZATION_TYPE.PARTICIPANT_CREATED_POLL,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_OPTION,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_OPTION,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_OPTIONS,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_OPTIONS,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_POLL_VOTE,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_POLL_VOTE,e.LOCALIZATION_TYPE.CURRENT_USER_ADDED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.PARTICIPANT_ADDED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_POLL_VOTE,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_POLL_VOTE,e.LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.CURRENT_USER_MIXED_POLL_UPDATE,e.LOCALIZATION_TYPE.PARTICIPANT_MIXED_POLL_UPDATE,e.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_POLL_VOTE,e.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_POLL_VOTE,e.LOCALIZATION_TYPE.CURRENT_USER_CHANGED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.PARTICIPANT_CHANGED_MULTIPLE_POLL_VOTES,e.LOCALIZATION_TYPE.POLL_UNSENT_UPDATE]);function u(e,t,n,r,a,i){return{ack:o("MAWAckLevel").ACK.sent,altIndex:a!=null?a:void 0,author:o("WAJids").AUTHOR_SYSTEM,externalId:n,msgContent:e,sortOrderMs:i,threadJid:t,ts:r!=null?r:o("WATimeUtils").unixTime(),type:o("MAWMsgType").MSG_TYPE.ADMIN}}function c(e){if(s.has(e))return!0;switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_NAMED_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_PROMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_GOT_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PROMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SELF_DEMOTED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_DEMOTED_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_HOTLIKE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_THEME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PHOTO:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_PINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNPINNED_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CUSTOMIZE_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_CLEAR_PARTICIPANT_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_OWN_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_CLEAR_CURRENT_USER_NICKNAME:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_MINUTES:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_HOURS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_DAYS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_OFF:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_TURNED_ON_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_SETTING_CHANGE_SECONDS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_TAKE_SCREENSHOT:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_EPHEMERAL_RECORD_SCREEN:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ADMIN_ONLY:case o("MAWLocalizationType").LOCALIZATION_TYPE.SERVER_SET_ADD_MODE_ALL_MEMBERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_UK_OSA_ADMIN_MESSAGE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_DISABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LIMIT_SHARING_ENABLED:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_OTHER_USER_NAME_UNKNOWN:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_SELF_THREAD:case o("MAWLocalizationType").LOCALIZATION_TYPE.DUAL_THREAD_CUTOVER_ADMIN_MESSAGE_WITH_OTHER_USER_NAME:return!0}return!1}function d(e){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UPDATED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_DEVICE:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UPDATED_DEVICE:return!0}return!1}function m(e){switch(e){case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_ADDED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_ADDED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_ONE_PARTICIPANT:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_REMOVED_MORE_THAN_TWO_PARTICIPANTS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_YOU_AND_MORE_THAN_ONE_USERS:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REMOVED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_YOU_AND_MORE_THAN_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_ONE_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.UNKNOWN_USER_REMOVED_MORE_THAN_TWO_USER:case o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_LEFT_GROUP:return!0}return!1}l.POLL_ADMIN_MSG_TYPES=s,l.buildUnstoredDbAdminMsg=u,l.isAdminMsgNormalized=c,l.isDeviceChangeAdminMsg=d,l.isParticipantChangeAdminMsg=m}),98);
__d("MAWThreadSnippetForAdminOrEphemeralMsg",["FBLogger","MAWAdminMsgNormalized","MAWLocalizationType","MAWLocalizationUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.adminMsgContent,n=e.adminType,a=e.snippetSenderContactId,i=n;if(i==null||t==null)return r("FBLogger")("GroupPollsE2EE").mustfix("MAWThreadSnippetForAdminOrEphemeralMsg: snippetType or adminMsgContent is null"),{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:a,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET};var l=o("MAWLocalizationUtils").isAdminMsgNormalized(i)?o("MAWAdminMsgNormalized").deconstructContactIdsFromAdminContent(i,t):{contactIds:[],contents:t},s=l.contactIds,u=l.contents;return{snippetParams:{contactIDs:[].concat(s.map(function(e){return e==="Facebook User"?"0":e})),strings:[].concat(u)},snippetSenderContactId:a,snippetType:i}}l.default=e}),98);
__d("MAWThreadSnippetForBumpExistingMessageMsg",["MAWLocalizationType","WAGlobals","WAJids","WALogger","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t,n){return{snippetParams:{contactIDs:n!=null?n:[],strings:[]},snippetSenderContactId:e,snippetType:t}}var m=function(t){return d(t,o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)};function p(t){var n=t.author,r=t.replyAuthor,a=t.replyType,i=t.snippetSenderContactId;if(o("WAJids").isAuthorSystem(n))return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Bumped message can not have AUTHOR_SYSTEM"]))),m(i);var l=a;if(l===o("WAMsgType").UNAVAILABLE)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Bump message has unavailable content type"]))),m(i);var p=r;return p==null?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Bump message has no quoted author"]))),m(i)):o("WAJids").isAuthorMe(n)||n===o("WAGlobals").getMyUserJid()?o("WAJids").isAuthorMe(p)||p===o("WAGlobals").getMyUserJid()?d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_OWN_MESSAGE):d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE,[o("WAJids").userIdFromJid(p)]):i==null?(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Bump message sender is null"]))),m(i)):o("WAJids").isAuthorMe(p)||p===o("WAGlobals").getMyUserJid()?d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_CURRENT_USER_MESSAGE,[i]):p===n?d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_OWN_MESSAGE,[i]):d(i,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE,[i,o("WAJids").userIdFromJid(p)])}l.default=p}),98);
__d("MAWThreadSnippetForCiphertextMsg",["MAWLocalizationType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:e,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.USER_SEND_ENCRYPTED_MESSAGE_FALLBACK}}l.default=e}),98);
__d("MAWThreadSnippetForDocumentFileMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Document file message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForFallbackMessageMsg",["MAWLocalizationType","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return{snippetParams:{contactIDs:n!=null?n:[],strings:[]},snippetSenderContactId:e,snippetType:t}}function s(t){var n=t.author,r=t.snippetSenderContactId,a=t.unsupportedType;if(o("WAJids").isAuthorMe(n))switch(a){case"liveLocationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LIVE_LOCATION_FALLBACK);case"locationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION_FALLBACK);case"contactShareMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE_FALLBACK);case"storyMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION_FALLBACK);case"postMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POST_MENTION_FALLBACK);case"pollCreationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POLL_CREATION_FALLBACK);case"bumpMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_BUMPED_MESSAGE);case"stickerReceiverFetchMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK);case"messengerMemory":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK);default:return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)}else switch(a){case"liveLocationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LIVE_LOCATION_FALLBACK);case"locationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION_FALLBACK);case"contactShareMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE_FALLBACK);case"storyMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION_FALLBACK);case"postMentionMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POST_MENTION_FALLBACK);case"pollCreationMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POLL_CREATION_FALLBACK);case"bumpMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_BUMPED_PARTICIPANT_MESSAGE);case"metaAiMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.META_AI_SEND_MESSAGE_FALLBACK);case"stickerReceiverFetchMessage":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER_RECEIVER_FETCH_MESSAGE_FALLBACK);case"messengerMemory":return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.MESSENGER_MEMORY_ENCRYPTED_MESSAGE_FALLBACK);default:return e(r,o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET)}}l.default=s}),98);
__d("MAWThreadSnippetForGifMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Animated message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForImageMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Image message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForPttMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_AUDIO:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Ptt message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_AUDIO,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForRavenMsg",["MAWLocalizationType","MAWMsg","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.ravenMediaType,i=t.snippetSenderContactId,l=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,s={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?l=a===o("MAWMsg").MAWRavenMsgMediaType.IMAGE?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_IMAGE:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:o("WAJids").isAuthorSystem(n)||i==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Animated message can not have AUTHOR_SYSTEM"]))):(l=a===o("MAWMsg").MAWRavenMsgMediaType.IMAGE?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_IMAGE:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,s.contactIDs.push(i)),{snippetParams:s,snippetSenderContactId:i,snippetType:l}}l.default=s}),98);
__d("MAWThreadSnippetForMsgUtils",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r){var a=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,i={contactIDs:[],mentionJIDs:n!=null?n:[],strings:[]};return o("WAJids").isAuthorMe(t)?a=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STICKER:o("WAJids").isAuthorSystem(t)||r==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Sticker message can not have AUTHOR_SYSTEM"]))):(a=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STICKER,i.contactIDs.push(r)),{snippetParams:i,snippetSenderContactId:r,snippetType:a}}l.getMAWThreadSnippetForStickerMsg=s}),98);
__d("MAWThreadSnippetForReceiverFetchMsg",["MAWThreadSnippetForMsgUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.mentionedJids,r=e.snippetSenderContactId;return o("MAWThreadSnippetForMsgUtils").getMAWThreadSnippetForStickerMsg(t,n,r)}l.default=e}),98);
__d("MAWThreadSnippetForRevokedMsg",["MAWLocalizationType","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.mentionedJids,a=t.snippetSenderContactId,i=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,l={contactIDs:[],mentionJIDs:r,strings:[]};return o("WAJids").isAuthorMe(n)?i=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_UNSENT_MESSAGE:o("WAJids").isAuthorSystem(n)||a==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Revoked message can not have AUTHOR_SYSTEM"]))):(i=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_UNSENT_MESSAGE,l.contactIDs.push(a)),{snippetParams:l,snippetSenderContactId:a,snippetType:i}}l.default=s}),98);
__d("MAWThreadSnippetForStickerMsg",["MAWThreadSnippetForMsgUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.mentionedJids,r=e.snippetSenderContactId;return o("MAWThreadSnippetForMsgUtils").getMAWThreadSnippetForStickerMsg(t,n,r)}l.default=e}),98);
__d("MAWThreadSnippetForTextMsg",["MAWLocalizationType","MAWVault","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,r=t.content,a=t.isGroup,i=t.mentionedJids,l=t.snippetSenderContactId,s=t.specialTextSize,u=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,c={contactIDs:[],mentionJIDs:i,strings:[]};if(o("WAJids").isAuthorMe(n)?u=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_TEXT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Text message can not have AUTHOR_SYSTEM"]))):(u=a?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT_IN_GROUP:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_TEXT,c.contactIDs.push(l)),r!=null)if(s===1||s===2||s===3){var d=o("MAWVault").unvault(r);c.strings.push(d==="\uD83D\uDC4D"?"(Y)":r)}else c.strings.push(r);return{snippetParams:c,snippetSenderContactId:l,snippetType:u}}l.default=s}),98);
__d("MAWThreadSnippetForVideoMsg",["MAWLocalizationType","WAJids","WALogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=t.author,a=t.gifPlayback,i=t.mentionedJids,l=t.snippetSenderContactId,s=a===!0&&r("gkx")("5398"),u=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,c={contactIDs:[],mentionJIDs:i,strings:[]};return o("WAJids").isAuthorMe(n)?u=s?o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_GIF:o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_VIDEO:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Video message can not have AUTHOR_SYSTEM"]))):(u=s?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_GIF:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_VIDEO,c.contactIDs.push(l)),{snippetParams:c,snippetSenderContactId:l,snippetType:u}}l.default=s}),98);
__d("MAWThreadSnippetForXMAMsg",["MAWLocalizationType","WAArmadilloXMA.pb","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P;function N(t){var n=t.author,r=t.chatJid,a=t.content,i=t.mentionedJids,l=t.snippetSenderContactId,N=t.xmaMessageType,w=o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET,A={contactIDs:[],mentionJIDs:i,strings:[]};switch(N==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["XMA message does not have xmaMessageType"]))),N){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:if(o("WAJids").isAuthorMe(n))if(a!=null){var F=a;w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT,F!=null&&A.strings.push(F)}else w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_ATTACHMENT;else if(o("WAJids").isAuthorSystem(n)||l==null)o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"])));else{w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_ATTACHMENT,A.contactIDs.push(l);var O=a;O!=null&&A.strings.push(O)}break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_POST_MENTION:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_POST_MENTION:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_POST_MENTION;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_MEMORIES_SHARE:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_MEMORIES_SHARE;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_STORY_MENTION:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_STORY_MENTION;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_LOCATION:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_LOCATION;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_AI_CONTACT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SEND_CONTACT_SHARE:w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SEND_CONTACT_SHARE;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_REEL:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_REEL;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_POST:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_POST;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_STORY_HIGHLIGHT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_STORY_HIGHLIGHT;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MENTIONED_STORY_IG;var B;if(r!=null&&(B=o("WAJids").interpretAsUserJid(r)),B!=null){var W=o("WAJids").userIdFromJid(B);A.contactIDs.push(W)}else o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["XMA story mentions must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)?o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_RECEIVED_STORY_MENTION_IG;break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_AUDIO_CALLED;var q=M(r);q!=null?A.contactIDs.push(q):o("WALogger").ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_AUDIO_CALLED,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:if(o("WAJids").isAuthorMe(n)&&l!=null){w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_VIDEO_CALLED;var U=M(r);U!=null?A.contactIDs.push(U):o("WALogger").ERROR(R||(R=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(L||(L=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_VIDEO_CALLED,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_AUDIO_CALL;var V=M(r);V!=null?A.contactIDs.push(V):o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_AUDIO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:if(o("WAJids").isAuthorMe(n)){w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_MISSED_VIDEO_CALL;var H=M(r);H!=null?A.contactIDs.push(H):o("WALogger").ERROR(I||(I=babelHelpers.taggedTemplateLiteralLoose(["RTC XMA must have a target Jid"])))}else o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(T||(T=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_MISSED_VIDEO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:o("WAJids").isAuthorMe(n)&&l!=null?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_AUDIO_CALL:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(D||(D=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_AUDIO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:o("WAJids").isAuthorMe(n)&&l!=null?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_STARTED_GROUP_VIDEO_CALL:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR(x||(x=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_STARTED_GROUP_VIDEO_CALL,A.contactIDs.push(l));break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:o("WAJids").isAuthorMe(n)?w=o("MAWLocalizationType").LOCALIZATION_TYPE.CURRENT_USER_SENT_EVENT:o("WAJids").isAuthorSystem(n)||l==null?o("WALogger").ERROR($||($=babelHelpers.taggedTemplateLiteralLoose(["XMA message can not have AUTHOR_SYSTEM"]))):(w=o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_SENT_EVENT,A.contactIDs.push(l));break;default:o("WALogger").ERROR(P||(P=babelHelpers.taggedTemplateLiteralLoose(["Encountered unexpected XMAMessageType when building a thread snippet: ",""])),N)}return{snippetParams:A,snippetSenderContactId:l,snippetType:w}}function M(e){var t=e!=null?o("WAJids").interpretAsUserJid(e):null;return t!=null?o("WAJids").userIdFromJid(t):null}l.default=N}),98);
__d("MAWThreadSnippet",["FBLogger","MAWLocalizationType","MAWMsgType","MAWThreadSnippetForAdminOrEphemeralMsg","MAWThreadSnippetForBumpExistingMessageMsg","MAWThreadSnippetForCiphertextMsg","MAWThreadSnippetForDocumentFileMsg","MAWThreadSnippetForFallbackMessageMsg","MAWThreadSnippetForGifMsg","MAWThreadSnippetForImageMsg","MAWThreadSnippetForPttMsg","MAWThreadSnippetForRavenMsg","MAWThreadSnippetForReceiverFetchMsg","MAWThreadSnippetForRevokedMsg","MAWThreadSnippetForStickerMsg","MAWThreadSnippetForTextMsg","MAWThreadSnippetForVideoMsg","MAWThreadSnippetForXMAMsg","MAWUserJidWrapper","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return/^\d+$/.test(e)}function s(t){if(!o("WAJids").isAuthorSystem(t)){var n=o("WAJids").isAuthorMe(t)?o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid()):o("WAJids").userIdFromJid(t);if(!e(n)){r("FBLogger")("messenger_web").mustfix("[MAWThreadSnippetBuildTxns] Snippet sender contact id is invalid");return}return n}}function u(e){var t=e.adminMsgContent,n=e.adminType,a=e.author,i=e.chatJid,l=e.content,u=e.gifPlayback,c=e.mentionedJids,d=e.msgType,m=e.ravenMediaType,p=e.replyAuthor,_=e.replyType,f=e.specialTextSize,g=e.unsupportedType,h=e.xmaMessageType,y=o("WAJids").switchOnMsgrChatJidType(i,{group:function(t){return!0},user:function(t){return!1}}),C=s(a);switch(d){case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return r("MAWThreadSnippetForCiphertextMsg")(C);case o("MAWMsgType").MSG_TYPE.TEXT:return r("MAWThreadSnippetForTextMsg")({author:a,content:l,isGroup:y,mentionedJids:c,snippetSenderContactId:C,specialTextSize:f});case o("MAWMsgType").MSG_TYPE.IMAGE:return r("MAWThreadSnippetForImageMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.VIDEO:return r("MAWThreadSnippetForVideoMsg")({author:a,gifPlayback:u,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.PTT:return r("MAWThreadSnippetForPttMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:return r("MAWThreadSnippetForAdminOrEphemeralMsg")({adminMsgContent:t,adminType:n,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.GIF:return r("MAWThreadSnippetForGifMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.STICKER:return r("MAWThreadSnippetForStickerMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return r("MAWThreadSnippetForDocumentFileMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.REVOKED:return r("MAWThreadSnippetForRevokedMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.XMA:return r("MAWThreadSnippetForXMAMsg")({author:a,chatJid:i,content:l,mentionedJids:c,snippetSenderContactId:C,xmaMessageType:h});case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return r("MAWThreadSnippetForBumpExistingMessageMsg")({author:a,replyAuthor:p,replyType:_,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return r("MAWThreadSnippetForFallbackMessageMsg")({author:a,snippetSenderContactId:C,unsupportedType:g});case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return r("MAWThreadSnippetForReceiverFetchMsg")({author:a,mentionedJids:c,snippetSenderContactId:C});case o("MAWMsgType").MSG_TYPE.RAVEN:return r("MAWThreadSnippetForRavenMsg")({author:a,mentionedJids:c,ravenMediaType:m,snippetSenderContactId:C});default:return{snippetParams:{contactIDs:[],strings:[]},snippetSenderContactId:C,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.UNAVAILABLE_SNIPPET}}}l.getSnippetContactId=s,l.buildThreadSnippet=u}),98);
__d("WAProtocolMsgId",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e.externalId===t.externalId&&e.author===t.author&&e.chat===t.chat}i.equals=e}),66);
__d("MAWThreadSnippetBuildTxns",["FBLogger","MAWDbMsg","MAWDbMsgOrReaction","MAWDbReaction","MAWDexieTable","MAWJidUtils","MAWLocalizationType","MAWThreadSnippet","MAWThreadSnippetUtils","MAWUserJidWrapper","WAJids","WAProtocolMsgId","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return o("WAJids").switchOnMsgrChatJidType(n,{group:function(r){return u(e,t,!0)},user:function(r){return u(e,t,!1)}})}function s(t,n){return o("MAWDbMsgOrReaction").switchOnMsgOrReactionMaybeUnstored(n,{forMessage:function(n){var e,r,a,i,l,s,u;return o("MAWThreadSnippet").buildThreadSnippet({adminMsgContent:(e=n.msgContent)==null?void 0:e.adminMsgContent,adminType:(r=n.msgContent)==null?void 0:r.adminType,author:n.author,chatJid:t,content:(a=n.msgContent)==null?void 0:a.content,mentionedJids:(i=n.msgContent)==null?void 0:i.mentionedJids,msgType:n.type,ravenMediaType:n.ravenMediaType,replyAuthor:(l=n.quote)==null?void 0:l.content.author,replyType:(s=n.quote)==null?void 0:s.content.type,specialTextSize:n.specialTextSize,unsupportedType:(u=n.msgContent)==null?void 0:u.subtype,xmaMessageType:n.xmaMessageType})},forReaction:function(n){var t=o("MAWDbReaction").castToIncomingDbReaction(n);return e(t.author,t.reaction,t.threadJid)}})}function u(e,t,n){var a;o("WAJids").isAuthorMe(e)?(r("FBLogger")("messenger_web").warn("[MAWThreadSnippetBuildTxns] Reaction snippet author should not be @me"),a=o("WAJids").userIdFromJid(o("MAWUserJidWrapper").getMyUserJid())):a=o("WAJids").userIdFromJid(e);var i={contactIDs:[],strings:[]},l=n?o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE_IN_GROUP:o("MAWLocalizationType").LOCALIZATION_TYPE.PARTICIPANT_REACT_MESSAGE;return i.contactIDs.push(a),i.strings.push(t),{snippetParams:i,snippetSenderContactId:a,snippetType:l}}function c(e,t,n,r){var a,i=n.newestReaction,l=n.reactionsToClear;if(i!=null&&o("WATimeUtils").castUnixTimeToMillisTime(i.ts)>((a=t.snippetMsgTs)!=null?a:0))return o("MAWDexieTable").dexieResolve({newestReaction:i,thread:d(t,i,r)});var s=l!=null&&l.length>0;return s&&t.snippetMsg!=null?e.reactions.get({reactionId:t.snippetMsg}).then(function(n){var r=!1;if(n==null)r=!0;else{var a=o("MAWJidUtils").maybeToProtocolMsgId(n.author,n.threadJid,n.reactToExternalId);a!=null&&(r=l.some(function(e){var t=o("MAWJidUtils").maybeToProtocolMsgId(e.author,e.threadJid,e.reactToExternalId);return t!=null&&o("WAProtocolMsgId").equals(t,a)}))}return r?m(e,t).then(function(e){return{newestReaction:null,thread:e}}):o("MAWDexieTable").dexieResolve({newestReaction:null,thread:t})}):o("MAWDexieTable").dexieResolve({newestReaction:null,thread:t})}function d(e,t,n){return babelHelpers.extends({},e,{snippetMsg:t.reactionId,snippetMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(t.ts)})}function m(e,t){return o("MAWThreadSnippetUtils").recalculateSnippetFromScratch_EXPENSIVE(e,t).then(function(e){if(e==null)return r("FBLogger")("messenger_web").mustfix("[Occamadillo] ThreadUpdated handler called for clear snippet when centralized thread bump is enabled"),babelHelpers.extends({},t,{snippetMsg:void 0,snippetMsgTs:void 0});var n=o("WATimeUtils").castUnixTimeToMillisTime(o("MAWDbMsg").getCanonicalTsFromMsg(e));return babelHelpers.extends({},t,{snippetMsg:e.msgId,snippetMsgTs:n})})}function p(e,t){return m(e,t).then(function(t){return e.threads.put(t).then(r("emptyFunction"))})}l.buildReactionThreadSnippet=e,l.buildThreadSnippetForMsgOrIncomingReaction=s,l.getReactionSnippetParams=u,l.getThreadChangesetForReactionChanges=c,l.getThreadChangesetForNewReaction=d,l.refreshThreadSnippet=p}),98);
__d("MAWEphemeralMsgUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return function(t){return!e.has(t.msgId)&&t.ephemeralMsgDisappeared!==!0}}i.filterNonExpiredMsg=e}),66);
__d("MAWThreadSnippetUtils",["MAWDbReaction","MAWEphemeralMsgUtils","MAWJidUtils","MAWLocalizationType","MAWLocalizationUtils","MAWMsgType","MAWThreadNewestMsgOrReactionUtils","MAWThreadSnippet","MAWThreadSnippetBuildTxns","MAWXMAUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;if(d(e.xmaMessageType))return!0;var n=((t=e.msgContent)==null?void 0:t.adminType)!=null?o("MAWLocalizationUtils").isDeviceChangeAdminMsg(e.msgContent.adminType):!1;if(e.type!==o("MAWMsgType").MSG_TYPE.ADMIN)return!1;var r=e.msgContent.adminType;return r===o("MAWLocalizationType").LOCALIZATION_TYPE.DEBUG_MSG?!0:n}function s(t,n,r){return t.messages.where("[threadJid+sortOrderMs]").between([n.jid,Number.MIN_SAFE_INTEGER],[n.jid,Number.MAX_SAFE_INTEGER],!1,!1).filter(function(t){return(r==null||o("MAWEphemeralMsgUtils").filterNonExpiredMsg(r)(t))&&!e(t)}).reverse().first()}var u={snippetParams:{contactIDs:[],mentionJIDs:[],strings:[]},snippetSenderContactId:null,snippetType:o("MAWLocalizationType").LOCALIZATION_TYPE.EMPTY_SNIPPET};function c(e,t){return o("MAWThreadNewestMsgOrReactionUtils").getNewestMsgOrReactionForSnippet(e,t).then(function(e){return e==null?{snippet:u}:m(t,e)})}function d(e){return o("MAWXMAUtils").isXMAStoryReply(e)||o("MAWXMAUtils").isXMAMsgHighlightsTabFriendUpdatesReply(e)}function m(e,t){var n,r,a,i,l,s,c;if(t.reactionId!=null){var d=o("MAWDbReaction").maybeCastToIncomingDbReaction(t);return d==null?{snippet:u}:{snippet:o("MAWThreadSnippetBuildTxns").buildReactionThreadSnippet(d.author,d.reaction,e),snippetMsgOrReaction:t}}switch(t.type){case o("MAWMsgType").MSG_TYPE.XMA:{var m,p,_,f,g,h,y,C=o("MAWJidUtils").toProtocolMsgId(t);return C==null?{snippet:u}:{snippet:o("MAWThreadSnippet").buildThreadSnippet({adminMsgContent:(m=t.msgContent)==null?void 0:m.adminMsgContent,adminType:(p=t.msgContent)==null?void 0:p.adminType,author:t.author,chatJid:t.threadJid,content:(_=t.msgContent)==null?void 0:_.content,mentionedJids:(f=t.msgContent)==null?void 0:f.mentionedJids,msgType:t.type,ravenMediaType:t.ravenMediaType,replyAuthor:(g=t.quote)==null?void 0:g.content.author,replyType:(h=t.quote)==null?void 0:h.content.type,specialTextSize:t.specialTextSize,unsupportedType:(y=t.msgContent)==null?void 0:y.subtype,xmaMessageType:t.xmaMessageType}),snippetMsgOrReaction:t}}default:return{snippet:o("MAWThreadSnippet").buildThreadSnippet({adminMsgContent:(n=t.msgContent)==null?void 0:n.adminMsgContent,adminType:(r=t.msgContent)==null?void 0:r.adminType,author:t.author,chatJid:t.threadJid,content:(a=t.msgContent)==null?void 0:a.content,mentionedJids:(i=t.msgContent)==null?void 0:i.mentionedJids,msgType:t.type,ravenMediaType:t.ravenMediaType,replyAuthor:(l=t.quote)==null?void 0:l.content.author,replyType:(s=t.quote)==null?void 0:s.content.type,specialTextSize:t.specialTextSize,unsupportedType:(c=t.msgContent)==null?void 0:c.subtype,xmaMessageType:t.xmaMessageType}),snippetMsgOrReaction:t}}}l.isDbMsgDisabledForThreadSnippet=e,l.recalculateSnippetFromScratch_EXPENSIVE=s,l.EMPTY_SNIPPET_DATA=u,l.getThreadSnippetFromScratch=c,l.shouldIgnoreXMAMsgForSnippet=d}),98);
__d("MAWDbAppMeta",[],(function(t,n,r,o,a,i){"use strict";var e={allowSecurityAlert:"allowSecurityAlert",allowSecurityAlertForSelf:"allowSecurityAlertForSelf",dbMigrationVersion:"dbMigrationVersion",deviceJid:"deviceJid",hasMigratedFromDexie:"hasMigratedFromDexie",hmacKey:"hmacKey",hotlikeSticker:"hotlikeSticker",isBackfilledForOccamadillo:"isBackfilledForOccamadillo",msgTypeVersion:"msgTypeVersion",restoreMigrationAttempts:"restoreMigrationAttempts",restoreToDexieMigrationComplete:"restoreToDexieMigrationComplete"};i.AppMetaKeysEnum=e}),66);
__d("MAWDBMigrationUtils",["MAWDbAppMeta","MAWIndexedDb","MAWTransactionMode"],(function(t,n,r,o,a,i,l){"use strict";var e={batchSize:0,cursorValue:0,isRunning:!1},s={version:0},u=o("MAWIndexedDb").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READONLY},"getMigrationVersion",function(e){return function(){return e.appMeta.get(o("MAWDbAppMeta").AppMetaKeysEnum.dbMigrationVersion).then(function(e){var t,n=(t=e==null?void 0:e.value.dbMigrationVersion)!=null?t:0;return s.version=n,n})}}),c=6;l.mawDbDedupeMsgsMigrationStatus=e,l.mawDbMigrationVersion=s,l.getMigrationVersion=u,l.MAWDB_DEDUPE_MSGS_MIGRATION_VERSION=c}),98);
__d("MAWLoadReplyMediaTxns",["MAWBridgeReceiverFetchInfo","MAWDbMedia","MAWDbMsg","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWMediaUtils","MAWMsgType","MAWUserJidWrapper","MAWXMAUtils","MWPBumpEntityKey","WAAssertUnreachable","WAJids","WALogger","WAMsgType","WAResultOrError","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_;function f(e,t,n){if(r("gkx")("2419")&&n!=null){var a=o("MAWMediaUtils").genHMACPlaintextHash(n);return e.media.where("hashedPlaintextHash").equals(a).first()}else return e.media.get(t)}var g=new Set([(_=o("MAWDbMedia")).MEDIA_TYPE.IMAGE,_.MEDIA_TYPE.GIF,_.MEDIA_TYPE.PTT,_.MEDIA_TYPE.STICKER,_.MEDIA_TYPE.VIDEO,_.MEDIA_TYPE.DOCUMENT_FILE]);function h(e){var t;switch(e.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:case o("MAWDbMedia").MEDIA_TYPE.GIF:case o("MAWDbMedia").MEDIA_TYPE.STICKER:t=e.validatedImageInfo;break;case o("MAWDbMedia").MEDIA_TYPE.VIDEO:t=e.validatedVideoInfo;break}var n=t||{},r=n.height,a=n.jpegThumbnailHeight,i=n.jpegThumbnailWidth,l=n.width;return{replyMediaPreviewHeight:a!=null?a:r,replyMediaPreviewWidth:i!=null?i:l}}function y(e){switch(e.type){case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return!0;case o("MAWMsgType").MSG_TYPE.XMA:return r("gkx")("9921")?!0:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(e.xmaMessageType)||o("MAWXMAUtils").isXMAStoryReply(e.xmaMessageType);case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("WAMsgType").NOTE_REPLY:case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:case o("MAWMsgType").MSG_TYPE.RAVEN:return!1;default:return r("WAAssertUnreachable")(e.type)}}function C(t,n,r){if(n==null)return o("MAWDexieTable").dexieResolve();var a=f(t,n,r).then(function(e){if(e==null)return o("WAResultOrError").makeError("reply_media_not_found");if(!g.has(e.mediaType))return o("WAResultOrError").makeError("reply_media_type_unknown");var t=h(e),r=t.replyMediaPreviewHeight,a=t.replyMediaPreviewWidth;return n!=null&&e.plaintextHash==null&&o("MWPBumpEntityKey").bumpEntityKeyWithAppId("maw.reply_attachment_media_missing_plaintext_hash","load_reply_media_txns_for_reply_type_'unknown'}"),o("WAResultOrError").makeResult({replyMediaId:n,replyMediaPreviewHeight:r,replyMediaPreviewWidth:a,replyPlaintextHash:e.plaintextHash})});return a.then(function(t){if(t.success!==!0){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unable to fetch reply media with id ",": ",""])),n,t.error);return}return t.value})}function b(e,t){var n=t.defaultPreviewMediaId;if(n==null)return o("MAWDexieTable").dexieResolve({replyXMAId:t.xmaId});var r=f(e,n).then(function(e){if(e==null)return o("WAResultOrError").makeError("reply_xma_media_not_found - "+t.targetType);if(!g.has(e.mediaType))return o("WAResultOrError").makeError("reply_xma_media_type_unknown");var n=h(e),r=n.replyMediaPreviewHeight,a=n.replyMediaPreviewWidth;return o("WAResultOrError").makeResult({replyMediaPreviewHeight:r,replyMediaPreviewWidth:a,replyPlaintextHash:e.plaintextHash,replyXMAId:t.xmaId})});return r.then(function(e){if(e.success!==!0){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Unable to fetch reply media XMA with id ",": ",""])),t.xmaId,e.error);return}return e.value})}function v(e,t,n){var a,i,l;n===void 0&&(n=!1);var s=((a=t.quote)==null?void 0:a.content)||{},u=s.author,c=s.externalId,d=s.mediaId,m=s.msgId,p=s.plaintextHash,_=s.type,f=s.xmaMessageType;if(((i=t.quote)==null?void 0:i.content)==null||!y((l=t.quote)==null?void 0:l.content))return o("MAWDexieTable").dexieResolve();var g=t.threadJid,h=u===o("MAWUserJidWrapper").getMyUserJid(),b=h?o("WAJids").AUTHOR_ME:u;return(r("gkx")("9921")?_===o("MAWMsgType").MSG_TYPE.XMA:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(f))?S(e,o("MAWJidUtils").maybeToProtocolMsgId(b,g,c)):_===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH?E(e,m):C(e,d,n?null:p)}function S(e,t){return t==null?o("MAWDexieTable").dexieResolve():o("MAWDbXMATxns").maybeGetXMAFromProtocolMsgId(e,t).then(function(t){if(!(t==null||o("MAWXMAUtils").isXMAExpired(t.isTombstoned,t.targetExpiringAtSec)))return b(e,t)})}function R(e,t){var n=t.author,a=t.externalId,i=t.mediaId,l=t.plaintextHash,s=t.threadJid,u=t.type,c=t.xmaMessageType,d=r("gkx")("9921")?u===o("MAWMsgType").MSG_TYPE.XMA:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(c),m=u===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH;return!o("MAWDbMsg").isMediaMsg(t)&&!d&&!m?o("MAWDexieTable").dexieResolve():d?S(e,o("MAWJidUtils").maybeToProtocolMsgId(n,s,a)):m?L(e,t.receiverFetchId):C(e,i,l)}function L(e,t,n){return t==null?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Missing receiverFetchId for getReplyMediaForReceiverFetchWithReceiverFetchId"]))),o("MAWDexieTable").dexieResolve()):e.receiverFetchInfo.get({receiverFetchId:t}).then(function(e){if(e==null){o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Missing receiverFetchInfo for getReplyMediaForReceiverFetchWithReceiverFetchId"])));return}try{var t=o("MAWDbMedia").convertNumberToMediaId(parseInt(e.receiverFetchId,10));return n!=null&&o("MAWIndexedDb").afterTransaction({tag:"NewReceiverFetchInfo",value:o("MAWBridgeReceiverFetchInfo").createBridgeReceiverFetchInfoPayloadFromDbInfo(n.threadJid,n.msgId,n.sortOrderMs,n.ts,e)}),{replyMediaId:t,replyMediaPreviewHeight:e.previewHeight,replyMediaPreviewWidth:e.previewWidth}}catch(e){o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unable to convert receiver fetch id to media id: ",""])),e);return}})}function E(e,t){return t==null?(o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Missing msgId for getReplyMediaForReceiverFetch"]))),o("MAWDexieTable").dexieResolve()):e.messages.get({msgId:t}).then(function(t){if(t==null||t.type!==o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH||t.receiverFetchId==null){o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Invalid msg for getReplyMediaForReceiverFetch with type: ",""])),t==null?void 0:t.type);return}return L(e,t.receiverFetchId,t)})}l.getMedia=f,l.MSG_MEDIA_TYPE=g,l.getImageAttributes=h,l.isMediaReplyContent=y,l.getReplyMediaForMsgQuote=v,l.getReplyMediaForMsg=R}),98);
__d("MAWDbChunkTxns",["MAWDexieTable","MAWMediaUtils","MAWODSProxy","MWFBLogger","WAErrorMessage","WAOdsEnums"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["maw_db","txn","MAWDbChunkTxns"]),m=function(t,n,r,a,i,l){l===void 0&&(l=0);var e=o("MAWMediaUtils").genHMACPlaintextHash(n);return p(t,n,e,r,a,i,l)},p=function(n,r,a,i,l,m,_){return _===void 0&&(_=0),n.chunk.where("hashedPlaintextHash").equals(a).first().then(function(t){var f={blobData:i,hashedPlaintextHash:a,isProgressivePreview:m!=null?m:void 0,mimetype:l,plaintextHash:r};if(t){_>0&&d.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Chunk found after retry for hashedPlaintextHash: ",""])),a);var g=m!==!0&&t.isProgressivePreview===!0;if(g){var h=babelHelpers.extends({},f,{chunkId:t.chunkId});return n.chunk.put(h).then(function(){return h})}else return t}return n.chunk.add(f).then(function(e){return babelHelpers.extends({},f,{chunkId:e})}).catch(function(e){var t=o("WAErrorMessage").maybeGetMessageFromError(e);if(_>0)throw d.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk for hashedPlaintextHash: ",". Error: ",""])),a,t),d.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk after retry. Error: ",""])),t),e;return d.WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to add chunk. Possible duplicate? Will attempt a retry. For hashedPlaintextHash: ",". Error: ",""])),a,t),o("MAWODSProxy").odsBumpEntityKey({amount:1,entity:o("WAOdsEnums").Entity.MAW_MEDIA_DB_DUPLICATE_CHUNK,key:"retry"}),p(n,r,a,i,l,m,_+1)})})},_=function(t,n){return t.chunk.where("hashedPlaintextHash").equals(n)},f=function(t,n){return _(t,n).count().then(function(e){return e>0})},g=function(t,n){return o("MAWDexieTable").dexieAll(n.map(function(e){return f(t,e).then(function(t){return[e,t]})})).then(function(e){return new Map(e)})},h=function(t,n){return _(t,n).first()},y=function(t,n){return t.chunk.where("hashedPlaintextHash").anyOf(n).toArray().then(function(e){return new Map(e.map(function(e){return[e.hashedPlaintextHash,e]}))})},C=function(t,n){var e=n.map(o("MAWMediaUtils").genHMACPlaintextHash);return t.chunk.where("hashedPlaintextHash").anyOf(e).toArray().then(function(e){return new Map(e.map(function(e){return[e.plaintextHash,e]}))})};function b(e,t){return e.chunk.bulkGet(t)}var v=function(t,n){var e=o("MAWMediaUtils").genHMACPlaintextHash(n);return t.chunk.get({hashedPlaintextHash:e})};l.getOrCreateMediaChunkWithPlaintextHash=m,l.getOrCreateMediaChunkWithHashedPlaintextHash=p,l.hasMediaChunk=f,l.hasMediaChunks=g,l.maybeGetChunkFromHash=h,l.maybeBulkGetChunksFromHash=y,l.maybeBulkGetChunksFromPlaintextHash=C,l.bulkGetChunks=b,l.maybeGetChunkByPlaintextHash=v}),98);
__d("MAWDbMediaTxns",["MAWDbMsg","MAWDexieTable","MAWMediaUtils","MAWMsgType","MAWODSProxy","WAHashUtils","WALogger","WAOdsEnums","WAResultOrError","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.media.get({mediaId:t})}function m(e,t){return t.length===0?o("MAWDexieTable").dexieResolve(new Map):e.media.bulkGet(t).then(function(e){return new Map(e.filter(Boolean).map(function(e){return[e.mediaId,e]}))})}function p(e,t){return e.media.where("hashedPlaintextHash").equals(t).first()}function _(e,t){var n=o("MAWMediaUtils").genHMACPlaintextHash(t);return p(e,n)}function f(e,t){var n=t.map(function(e){return o("MAWMediaUtils").genHMACPlaintextHash(e)});return g(e,n)}function g(e,t){return e.media.where("hashedPlaintextHash").anyOf(t).toArray()}function h(e,t){return t==null?o("MAWDexieTable").dexieResolve():y(e,t).then(function(n){var r=n==null?void 0:n.mediaId;return r!=null?e.media.get({mediaId:r}):e.media.get({objectId:t})})}function y(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.mediaBackup.get({objectId:t})}function C(e,t){if(t==null)return o("MAWDexieTable").dexieResolve();var n=e.mediaBackup.where("msgId").equals(t).toArray();return n}function b(t,n){var a=n.filter(o("MAWDbMsg").isMediaMsg);if(a.length===0)return o("MAWDexieTable").dexieResolve([]);o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[getMsgMediaPairFromMsgs] msgs: ",""])),a.map(function(e){return""+e.msgId}));var i=a.reduce(function(e,t){return t.mediaId==null?(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["mediaId is null for media msg with msgId: "," and msg type ",""])),t.msgId,t.type),e):e.set(t.mediaId,t)},new Map),l=Array.from(i.keys());return R(t,l).then(function(e){var t=[];return e.forEach(function(e){if(e==null)throw r("err")("Error missing media");var n=i.get(e.mediaId);if(n==null)throw r("err")("Error missing media");var a=o("MAWMediaUtils").genHMACPlaintextHash(e.plaintextHash);a!==e.hashedPlaintextHash&&(o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[getMsgMediaPairFromMsgs] encountered mismatched hashedPlaintextHash for media. PlaintextHash: ",""])),o("WAHashUtils").sanitisePlaintextHash(e.plaintextHash)),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MEDIA_MISMATCH_HASHED_PLAINTEXT_HASH,key:"mismatch."+n.type})),t.push([n,e])}),t})}function v(e,t){if(t.length===0)return o("MAWDexieTable").dexieResolve([]);var n=t.filter(o("MAWDbMsg").isMediaMsg).map(function(e){var t=e.mediaId;if(t==null)throw o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["mediaId is null for media msg with msgId: ",""])),e.msgId),r("err")("mediaId is missing");return t});return R(e,n).then(function(e){var t=[];return e.forEach(function(e){e!=null&&t.push(e)}),t})}function S(e,t){if(t.type===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME||o("MAWDbMsg").isMediaMsg(t)){var n=t.mediaId;return n==null?t.type===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME?o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeResult()):o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeError("missing")):e.media.get(n).then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}else return o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeResult())}function R(e,t){return e.media.bulkGet(t)}function L(e,t){var n=t.previewMediaIds!=null?R(e,t.previewMediaIds):o("MAWDexieTable").dexieResolve(),r=t.headerMediaId!=null?e.media.get(t.headerMediaId):o("MAWDexieTable").dexieResolve(),a=t.faviconMediaId!=null?e.media.get(t.faviconMediaId):o("MAWDexieTable").dexieResolve(),i=t.defaultPreviewMediaId!=null?e.media.get(t.defaultPreviewMediaId):o("MAWDexieTable").dexieResolve();return o("MAWDexieTable").dexieAll([n,r,a,i]).then(function(e){var n=e[0],r=e[1],a=e[2],i=e[3];if(t.headerMediaId!=null&&r==null||t.faviconMediaId!=null&&a==null||n==null)return o("WAResultOrError").makeError("missing");var l=[];for(var s of n){if(s==null)return o("WAResultOrError").makeError("missing");l.push(s)}return o("WAResultOrError").makeResult({defaultPreview:i,favicon:a,header:r,previews:l})})}function E(e,t,n){var r=babelHelpers.extends({},t,n);return e.media.put(r)}l.maybeGetMediaFromMediaId=d,l.maybeBulkGetMediaFromMediaId=m,l.maybeGetMediaFromHashedPlaintextHash=p,l.maybeGetMediaFromPlaintextHash=_,l.maybeBulkGetMediaFromPlaintextHash=f,l.maybeBulkGetMediaFromHashedPlaintextHash=g,l.maybeGetMediaFromObjectId=h,l.maybeGetMediaBackupRowFromObjectId=y,l.maybeGetMediaBackupRowFromMsgId=C,l.getMsgMediaPairFromMsgs=b,l.getMediaFromMsgs=v,l.getAndCheckMediaFromMsg=S,l.bulkGetMedias=R,l.getMediaForXMA=L,l.updateMedia=E}),98);
__d("WAMsgMap",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){var t=this;this.$1=new Map,e==null||e.forEach(function(e){var n=e[0],r=e[1];t.set(n,r)})}var t=e.prototype;return t.clear=function(){this.$1.clear()},t.delete=function(t){var e;(e=this.$1.get(t.externalId))==null||(e=e.get(t.author))==null||e.delete(t.chat)},t.get=function(t){var e;return(e=this.$1.get(t.externalId))==null||(e=e.get(t.author))==null?void 0:e.get(t.chat)},t.has=function(t){var e,n;return(e=(n=this.$1.get(t.externalId))==null||(n=n.get(t.author))==null?void 0:n.has(t.chat))!=null?e:!1},t.set=function(t,n){var e,r,o=(e=this.$1.get(t.externalId))!=null?e:new Map;this.$1.has(t.externalId)||this.$1.set(t.externalId,o);var a=(r=o.get(t.author))!=null?r:new Map;return o.has(t.author)||o.set(t.author,a),a.set(t.chat,n),this},t.keys=function(){var e=[],t=this.$1;for(var n of t.keys()){var r,o=(r=t.get(n))!=null?r:new Map;for(var a of o.keys()){var i,l=(i=o.get(a))!=null?i:new Map;for(var s of l.keys())e.push({externalId:n,author:a,chat:s})}}return e},t.entries=function(){var e=[],t=this.$1;for(var n of t.keys()){var r,o=(r=t.get(n))!=null?r:new Map;for(var a of o.keys()){var i,l=(i=o.get(a))!=null?i:new Map;for(var s of l.keys()){var u=l.get(s);u!=null&&e.push([{externalId:n,author:a,chat:s},u])}}}return e},t.values=function(){return this.entries().map(function(e){return e[1]})},e})();i.MsgMap=e}),66);
__d("MAWDbMsgUtil",["WAJids","WALogger","WAMsgMap"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return t.reduce(function(t,n){var r=n.threadJid;return r==null?(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Missing jid prevents adding message to array map"]))),t):n.author==="@system"?(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Invalid author when converting msg array to map"]))),t):(t.set({author:n.author,chat:r,externalId:n.externalId},n),t)},new(o("WAMsgMap")).MsgMap)}function c(e){return o("WAJids").isAuthorSystem(e.author)||e.threadJid==null?null:{author:e.author,chat:e.threadJid,externalId:e.externalId}}l.convertMsgArrayToMap=u,l.getProtocolMsgIdFromDbMsg=c}),98);
__d("MAWDbUnrenderedMsgTxns",["MAWAckLevel","MAWDbMsg","MAWDbMsgUtil","MAWDexieTable","WAJids","WALogger","WAMsgMap","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){var n=t.author,r=t.chat,a=t.externalId;return e.threads.get({jid:r}).then(function(t){return t==null?o("WAResultOrError").makeError("missing_thread_unrendered_msg"):m(e,a,r,n).then(function(e){return e==null?o("WAResultOrError").makeError("missing_unrendered_msg"):o("WAResultOrError").makeResult(e)})})}function d(e,t){var n=t.map(function(e){var t=e.externalId;return t});return e.unrenderedMessages.where("externalId").anyOf(n).toArray().then(function(e){var n=o("MAWDbMsgUtil").convertMsgArrayToMap(e),r=new(o("WAMsgMap")).MsgMap;return t.forEach(function(e){var t=n.get(e);t!=null&&r.set(e,t)}),r})}function m(e,t,n,r){return e.unrenderedMessages.where("externalId").equals(t).filter(function(e){return e.author===r&&e.threadJid===n}).first()}function p(e,t){return e+"_"+t}function _(e,t){var n=t.map(function(e){var t=e.externalId;return t}),r=Array.from(new Set(t.map(function(e){return e.chat})));return o("MAWDexieTable").dexieAll([e.threads.where("jid").anyOf(r).toArray(),e.unrenderedMessages.where("externalId").anyOf(n).toArray()]).then(function(e){var n=e[0],r=e[1];if(r.length===0||n.length===0)return[];var o=new Map;return t.forEach(function(e){var t=e.author,n=e.chat,r=e.externalId,a=o.get(r)||new Set;a.add(p(t,n)),o.set(r,a)}),r.filter(function(e){var t=e.author,n=e.externalId,r=e.threadJid,a=o.get(n);return a!=null&&r!=null&&a.has(p(t,r))})})}function f(t,n,r){return g(t,[{ack:r,msgId:n}]).then(function(t){var n=t[0];return n==null?(o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["updateSystemAckForUnrenderedMsg on non existing message"]))),null):n})}function g(e,t){var n=t.map(function(e){return e.msgId}),r=new Map;return t.forEach(function(e){return r.set(e.msgId,{ack:e.ack})}),e.unrenderedMessages.where("msgId").anyOf(n).toArray().then(function(t){if(t.length===0)return t;var n=[],a=[];return t.forEach(function(e){var t;if(e.author!==o("WAJids").AUTHOR_ME){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck on incoming message"]))),n.push(e);return}if(e.ack>o("MAWAckLevel").ACK.clock){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck on sent message"]))),n.push(e);return}var i=(t=r.get(e.msgId))==null?void 0:t.ack;if(i==null)return null;var l=babelHelpers.extends({},e,{ack:i});i===o("MAWAckLevel").ACK.sent&&delete l.resendCount,a.push(l)}),e.unrenderedMessages.bulkPut(a).then(function(){return[].concat(a,n)})})}function h(e,t){var n=t.map(function(t){return e.unrenderedMessages.get({msgId:t})});return o("MAWDexieTable").dexieAll(n)}function y(e,t){return e.unrenderedMessages.where("msgId").between(o("MAWDbMsg").msgIdsInChatLowerBound(t.chatId),o("MAWDbMsg").msgIdsInChatUpperBound(t.chatId)).last().then(function(e){var t=e==null?0:o("MAWDbMsg").getInChatMsgIdFromMsgId(e.msgId);return t+1})}l.maybeGetUnrenderedMsgByProtocolMsgId=c,l.getUnrenderedMsgMapByProtocolMsgId=d,l.maybeGetUnrenderedMsgByExternalId=m,l.getUnrenderedMsgsByProtocolMsgId=_,l.updateSystemAckForUnrenderedMsg=f,l.bulkUpdateSystemAckForUnrenderedMsgs=g,l.getUnrenderedMsgsByMsgIds=h,l.getNextUnrenderedMsgIdNumberForThread=y}),98);
__d("MAWMessageSortOrderUtils",["I64","MAWDbMsg","MAWExtractMsFromExternalId","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d;function m(t){var n=t.revokedExternalId!=null?t.revokedExternalId:t.externalId;n==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["generateAuthoritativeMessageSortOrder called without ID"])));var r=(d||(d=o("I64"))).of_string_opt(n);if(t.serverTs==null){var a;if(t.sortOrderMs!=null)return t.sortOrderMs;r==null&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] ExternalId is not present"])));var i=r==null?null:o("MAWExtractMsFromExternalId").extractMsFromExternalId(r);return Math.floor((a=t.originalTs)!=null?a:o("MAWDbMsg").getCanonicalTsFromMsg(t))*1e3+(i!=null?i:0)}if(r!=null){var l=o("MAWExtractMsFromExternalId").extractMsFromExternalId(r);if(l!=null){var m=t.originalTs!=null?t.originalTs:t.serverTs;return Number(m)*1e3+l}else o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] Timestamp bits in externalId not valid"])))}else o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] externalId is not a valid int64"])));return o("MAWDbMsg").getSortOrderWithFallback(t)}l.generateAuthoritativeMessageSortOrder=m}),98);
__d("WAArrayGroupBy",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=new Map,r=0;r<e.length;r++){var o=t(e[r]),a=n.get(o);a==null?n.set(o,[e[r]]):a.push(e[r])}return Array.from(n.entries())}i.groupBy=e}),66);
__d("MAWDbMsgTxns",["EncryptedBackupsUtils","FBLogger","MAWAckLevel","MAWBridgeMsg","MAWDbMsg","MAWDbMsgUtil","MAWDbThreadTxns","MAWDbUnrenderedMsgTxns","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWLoadReplyMediaTxns","MAWMessageSortOrderUtils","MAWMsgType","MAWODSProxy","MAWTransactionMode","MAWTransactor","Random","WAArrayGroupBy","WAJids","WALogger","WAMsg","WAMsgMap","WAOdsEnums","WAResultOrError","WATimeUtils","emptyFunction","gkx","justknobx","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g;function h(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.messages.get({msgId:t})}function y(e,t){return e.messages.where("threadJid").equals(t).count().then(function(e){return e===0})}function C(e,t,n){return e.messages.where("threadJid").equals(t).filter(n).first().then(function(e){return e!=null})}function b(e,t,n,r){return e.messages.where(["threadJid","sortOrderMs"]).between([t,Number.MIN_SAFE_INTEGER],[t,Number.MAX_SAFE_INTEGER],n,r)}function v(e,t){return b(e,t,!1,!1).last()}function S(e,t){return v(e,t).then(function(e){return e==null?void 0:e.msgId})}function R(e,t){return v(e,t).then(function(e){return(e==null?void 0:e.sortOrderMs)==null?null:o("WATimeUtils").castToMillisTime(e.sortOrderMs)})}function L(e,t,n){return r("vulture")("ST6o7qk-BKGl46ZXS71LYr_2y6I="),b(e,t,!1,!1).reverse().limit(n).toArray()}function E(e,t){return b(e,t,!1,!1).first()}function k(e,t){return E(e,t).then(function(e){return e==null?void 0:e.msgId})}function I(e,t){return e.messages.where("externalId").equals(t.externalId).filter(function(e){return e.author===t.author&&e.threadJid===t.chat}).toArray().then(D)}function T(e,t){var n=new Set(t.map(function(e){var t=e.author,n=e.chat,r=e.externalId;return o("WAMsg").craftWAMsgIdString({author:t,chat:n,externalId:r})}));return e.messages.where("externalId").anyOf(t.map(function(e){var t=e.externalId;return t})).filter(function(e){var t=e.author,r=e.externalId,a=e.threadJid;return n.has(o("WAMsg").craftWAMsgIdString({author:t,chat:a,externalId:r}))}).toArray().then(function(e){return o("WAArrayGroupBy").groupBy(e,function(e){return o("WAMsg").craftWAMsgIdString({author:e.author,chat:e.threadJid,externalId:e.externalId})}).map(function(e){var t=e[0],n=e[1];return D(n)}).filter(Boolean)})}function D(t){if(t.length>1){var n=t.map(function(e){var t,n;return e.type+":"+((t=e.serverTs)!=null?t:0).toString()+":"+((n=e.ts)!=null?n:0).toString()}),a=new Set(n).size===1;a?o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[maybeGetMsgByProtocolMsgId] Suspected multiple instances of same message!"]))):o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[maybeGetMsgByProtocolMsgId] Can't have "," messages with the same protocolMsgId!"])),t.length),(r("gkx")("5039")||o("Random").coinflip(r("justknobx")._("3594")))&&x(t)}return t[0]}function x(e){var t=e.length;if(!(t<=1)){var n=t-1,a=e[n],i={editCount:0,mediaId:0,revokedStatus:0,serverTs:0,sortOrderMs:0,ts:0,type:0};e.slice(0,n).forEach(function(e){var t=[];if((e==null?void 0:e.editCount)!==(a==null?void 0:a.editCount)){var n,l;i.editCount++,t.push("editCount, reference: "+((n=a==null?void 0:a.editCount)!=null?n:"")+", duplicate: "+((l=e==null?void 0:e.editCount)!=null?l:"")+". ")}if((e==null?void 0:e.mediaId)!==(a==null?void 0:a.mediaId)&&(i.mediaId++,t.push("mediaId, reference: "+((a==null?void 0:a.mediaId)!=null?String(a.mediaId):"")+", duplicate: "+((e==null?void 0:e.mediaId)!=null?String(e.mediaId):"")+". ")),e.sortOrderMs!==a.sortOrderMs&&(i.sortOrderMs++,t.push("sortOrderMs, reference: "+String(a.sortOrderMs)+", duplicate: "+String(e.sortOrderMs)+". ")),e.serverTs!==a.serverTs&&(i.serverTs++,t.push("serverTs, reference: "+String(a.serverTs)+", duplicate: "+String(e.serverTs)+". ")),e.ts!==a.ts&&(i.ts++,t.push("ts, reference: "+String(a.ts)+", duplicate: "+String(e.ts)+". ")),e.type!==a.type){var s,u;(e.type===o("MAWMsgType").MSG_TYPE.REVOKED||a.type===o("MAWMsgType").MSG_TYPE.REVOKED)&&(i.revokedStatus++,r("FBLogger")("MAWDuplicateMessageComparison").info("Revoked duplicate msg conflict, duplicate message, %s, has type: %s, externalId: %s, revokedExternalId: %s, sortOrderMs: %s, serverTs: %s, ts: %s, rowId: %s, reference msg, %s, has type: %s, externalId: %s, revokedExternalId: %s, sortOrderMs: %s, serverTs: %s, ts: %s, rowId: %s",e.msgId,e.type,e.externalId,e.revokedExternalId,e.sortOrderMs,e.serverTs,e.ts,e.rowId,a.msgId,a.type,a.externalId,a.revokedExternalId,e.sortOrderMs,e.serverTs,e.ts,e.rowId)),i.type++,t.push("type, reference: "+((s=a.type)!=null?s:"")+", duplicate: "+((u=e.type)!=null?u:"")+". ")}var c=t.join("");c.length>0?r("FBLogger")("MAWDuplicateMessageComparison").info("Duplicate msg, %s, has conflicting field values to reference msg, %s: %s",e.msgId,a.msgId,c):r("FBLogger")("MAWDuplicateMessageComparison").info("Duplicate msg, %s, has no conflicting field values to reference msg, %s",e.msgId,a.msgId)}),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"sets_of_duplicate_msgs"}),Object.keys(i).forEach(function(e){var t=i[e];t>0&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"sets_of_duplicate_msgs_with_"+e+"_field_differences"})}),o("MAWODSProxy").odsBumpEntityKey({amount:t-1,entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"number_of_duplicate_msgs"}),Object.keys(i).forEach(function(e){var t=i[e];t>0&&o("MAWODSProxy").odsBumpEntityKey({amount:t,entity:o("WAOdsEnums").Entity.MAW_DUPLICATE_MSGS,key:"number_of_duplicate_msgs_with_"+e+"_field_differences"})})}}function $(e,t,n,r){var o={author:r,chat:n,externalId:t};return I(e,o)}function P(e,t){return e.messages.where("msgId").equals(t).toArray()}function N(e,t){return A(e,t).then(function(e){return e.success,e})}function M(e,t){var n=t.map(function(e){var t=e.externalId;return t});return e.messages.where("externalId").anyOf(n).toArray().then(function(e){var n=o("MAWDbMsgUtil").convertMsgArrayToMap(e),r=new(o("WAMsgMap")).MsgMap;return t.forEach(function(e){var t=n.get(e);t!=null&&r.set(e,t)}),r})}function w(e,t){return e.messages.where("msgId").equals(t).first().then(function(e){return e==null?void 0:e.sortOrderMs})}function A(e,t){var n=t.author,r=t.chat,a=t.externalId;return e.threads.get({jid:r}).then(function(t){return t==null?o("WAResultOrError").makeError("missing_thread_msg"):$(e,a,t.jid,n).then(function(e){return e==null?o("WAResultOrError").makeError("missing_msg"):o("WAResultOrError").makeResult(e)})})}function F(e,t){var n=t.author,r=t.chat,o=t.externalId;return e.threads.get({jid:r}).then(function(t){if(t!=null)return e.messages.where("revokedExternalId").equals(o).filter(function(e){return e.author===n&&e.threadJid===t.jid&&e.type==="Revoked"}).first()})}function O(e,t,n,r){var a=e.messages.where("revokedExternalId").equals(t).filter(function(e){return e.author===r&&e.threadJid===n&&e.type===o("MAWMsgType").MSG_TYPE.REVOKED}).first(),i=o("MAWDbUnrenderedMsgTxns").maybeGetUnrenderedMsgByExternalId(e,t,n,r).then(function(e){if((e==null?void 0:e.type)===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME)return e});return o("MAWDexieTable").dexieAll([a,i]).then(function(e){var t=e[0],n=e[1];return t!=null||n!=null})}function B(e,t){var n=new Array(t.length),r=new Set;return t.forEach(function(e){n.push(e.externalId),r.add(o("EncryptedBackupsUtils").convertWAMsgIdToStringId(e))}),e.messages.where("externalId").anyOf(n).filter(function(e){return r.has(o("EncryptedBackupsUtils").convertWAMsgIdToStringId({author:e.author,chat:e.threadJid,externalId:e.externalId}))}).toArray()}function W(e,t,n,r,a,i){return q(e,[{ack:n,applicationErrorCode:i,msgId:t,reportingMeta:a,serverTs:r}]).then(function(e){var n=e.find(function(e){return e.msgId===t});return n==null?(o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["updateSystemAck on non existing message"]))),null):n})}function q(e,t){var n=t.map(function(e){return e.msgId});return o("MAWDbXMATxns").getXMAMsgIdsFromAssociatedMsgIds(e,n).then(function(r){var a=new Map;t.forEach(function(e){a.set(e.msgId,{ack:e.ack,applicationErrorCode:e.applicationErrorCode,reportingMeta:e.reportingMeta,serverTs:e.serverTs});var t=r.get(e.msgId);t!=null&&a.set(t,{ack:e.ack,applicationErrorCode:e.applicationErrorCode,reportingMeta:e.reportingMeta,serverTs:e.serverTs})});var i=Array.from(new Set(n.concat(Array.from(r.values()))));return e.messages.where("msgId").anyOf(i).toArray().then(function(t){if(t.length===0)return t;var n=[],r=[];return t.forEach(function(e){var t,i,l;if(e.author!==o("WAJids").AUTHOR_ME||e.ack>o("MAWAckLevel").ACK.clock){n.push(e);return}var s=(t=a.get(e.msgId))==null?void 0:t.ack,u=(i=a.get(e.msgId))==null?void 0:i.serverTs;if(s==null)return null;var c=babelHelpers.extends({},e,{ack:s});U(c,u);var d=(l=a.get(e.msgId))==null?void 0:l.reportingMeta;d!=null&&(c.reportingMeta=d),s===o("MAWAckLevel").ACK.sent&&delete c.resendCount,r.push(c)}),n.length>0&&o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateSystemAck: not updating ",""])),n.map(function(e){return e.msgId}).toString()),e.messages.bulkPut(r).then(function(){return o("MAWDexieTable").dexieAll(r.map(function(t){return o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(e,t)}))}).then(function(e){return r.forEach(function(t,n){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(t,e[n])})}),[].concat(r,n)})})})}function U(e,t){if(t!=null){e.serverTs=t;var n=e.sortOrderMs;e.type===o("MAWMsgType").MSG_TYPE.REVOKED&&r("justknobx")._("3841")||(e.sortOrderMs=o("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder(e),o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Message was acked by server (serverTs = ","), override sortOrderMs: "," -> ",""])),t,n,e.sortOrderMs))}}function V(e,t,n,a){return o("MAWDbThreadTxns").getThread(e,t).then(function(t){if(!(!t.success||a==null)){var i=t.value,l=[e.messages.where(["threadJid","sortOrderMs"]).above([i.jid,a]).first(),e.messages.where(["threadJid","sortOrderMs"]).below([i.jid,a]).last()];return o("MAWDexieTable").dexieAll(l).then(function(t){var a=t[0],l=t[1];return o("MAWDbThreadTxns").updateThread(e,babelHelpers.extends({},i,{newestMsgTs:(l==null?void 0:l.ts)==null?i.newestMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(l.ts),oldestMsg:i.oldestMsg===n?a==null?void 0:a.msgId:i.oldestMsg})).then(r("emptyFunction"))})}})}function H(e){return e.messages.where("altIndex").equals(o("MAWDbMsg").FUTUREPROOF_ALT_INDEX).toArray().then(function(e){var t=[];return e.forEach(function(e){if(e.type!==o("MAWMsgType").MSG_TYPE.FUTUREPROOF){o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["getFutureproofMsg gets a message "," with unsupported type ",""])),e.msgId,e.type);return}t.push(e)}),t})}function G(e){return e.toString()}function z(e,t,n,a){var i=t.mediaId;if(i===n)return o("WALogger").LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["updateMediaId on message "," that already has this mediaId ",""])),t.msgId,n),o("MAWDexieTable").dexieResolve();var l=i!=null?e.media.get(i):o("MAWDexieTable").dexieResolve();return l.then(function(i){i&&o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Replacing mediaId for message with pre-existing media. type=",""])),t.type);var l=a!=null?a:void 0,s=babelHelpers.extends({},t,{mediaId:n,plaintextHash:l});return e.messages.put(s).then(r("emptyFunction"))})}function j(e,t){var n=Array.from(t.keys());return e.messages.where("msgId").anyOf(n).toArray().then(function(n){var a=[];return n.map(function(e){var n=t.get(e.msgId),i=e.mediaId;if(i!=null&&i!==n){if(n!=null)throw r("FBLogger")("messenger_web").mustfixThrow("mediaId "+G(i)+" in message "+e.msgId+" is different with the "+G(n)+" in bulkUpdateMediaId");o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["updateMediaId on message "," that already has this mediaId ",""])),e.msgId,n);return}var l=babelHelpers.extends({},e,{mediaId:n,plaintextHash:e.plaintextHash});a.push(l)}),e.messages.bulkPut(a).then(r("emptyFunction"))})}function K(e,t){return Q(e,[t]).then(r("emptyFunction"))}function Q(e,t){return e.messages.where("msgId").anyOf(t).toArray().then(function(t){var n=t.map(function(e){return babelHelpers.extends({},e,{isExpiredXmaMsg:!0})});return e.messages.bulkPut(n).then(function(){return n})})}function X(e,t,n,r){if(r!=null&&r<=0)return o("MAWDexieTable").dexieResolve([]);var a=e.messages.where("altIndex").equals(o("MAWDbMsg").craftToBeReadAltIndex(t)).filter(function(e){return o("MAWDbMsg").getSortOrderWithFallback(e)<=n});return r!=null&&(a=a.limit(r)),a.toArray()}function Y(e,t,n){return X(e,t,n).then(function(t){var n=t.map(function(e){return babelHelpers.extends({altIndex:null},e)});return e.messages.bulkPut(n).then(function(){return n})})}function J(e,t){return e.messages.delete(t)}function Z(e,t){return e.messages.bulkDelete(t)}function ee(e,t,n){var r=t.map(function(e){return e.rowId}),a=n!=null?t.map(function(e){var t=o("MAWJidUtils").toProtocolMsgId(e);if(t)return babelHelpers.extends({},t,{reason:n})}).filter(Boolean):[];return o("MAWDexieTable").dexieAll([e.deletedMessages.bulkAdd(a),e.messages.bulkDelete(r)]).then(function(e){var t=e[0],n=e[1];o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Successfull deleted "," messages"])),n)})}function te(e,t){return e.messages.where("msgId").anyOf(t).toArray()}function ne(e){return e.messages.where("altIndex").anyOf([o("MAWDbMsg").SPAM_ALT_INDEX,o("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX]).toArray()}function re(e,t,n,r,a,i,l,s){l===void 0&&(l="before"),s===void 0&&(s=null);var u=n==null?null:o("MAWDbMsg").getSortOrderWithFallback(n);return l==="before"?e.messages.where(["threadJid","sortOrderMs"]).between([t,s!=null?s:Number.MIN_SAFE_INTEGER],[t,u!=null?u:Number.MAX_SAFE_INTEGER],!0,r).reverse().filter(i).limit(a).toArray():e.messages.where(["threadJid","sortOrderMs"]).between([t,u!=null?u:Number.MIN_SAFE_INTEGER],[t,s!=null?s:Number.MAX_SAFE_INTEGER],r,!0).filter(i).limit(a).toArray().then(function(e){return e.sort(function(e,t){return t.ts-e.ts})})}function oe(e,t,n,r){var o=n.msgId;if(r==null){var a;return{oldestMsg:(a=e==null?void 0:e.msgId)!=null?a:o}}var i=[e,t,n].filter(Boolean);return{oldestMsg:i.reduce(function(e,t){return ae(e,o,r)<ae(t,o,r)?e:t}).msgId}}function ae(e,t,n){return e.msgId===t?n:o("MAWDbMsg").getSortOrderWithFallback(e)}function ie(e,t){return e.messages.where("msgId").between(o("MAWDbMsg").msgIdsInChatLowerBound(t.chatId),o("MAWDbMsg").msgIdsInChatUpperBound(t.chatId)).last().then(function(e){var t=e==null?0:o("MAWDbMsg").getInChatMsgIdFromMsgId(e.msgId);return t+1})}function le(e){return o("MAWTransactor").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"checkMessagesExistenceByProtocolMsgIds",function(t){return function(){return o("MAWDexieTable").dexieAll(e.map(function(e){return t.messages.get({protocolMsgId:e.chat+"."+e.externalId})}))}})()}function se(e,t){return e.messages.where("externalId").anyOf(t).toArray()}l.maybeGetMsg=h,l.getIsThreadEmpty=y,l.doesThreadHaveMsgsMatchCriteria=C,l.getThreadMessagesBySortOrder=b,l.getThreadNewestMessageBySortOrder=v,l.getThreadNewestMessageId=S,l.getThreadNewestMessageMs=R,l.getThreadNewestNumMessagesBySortOrder=L,l.getThreadOldestMessageBySortOrder=E,l.getThreadOldestMessageId=k,l.maybeGetMsgByProtocolMsgId=I,l.getUniqueMsgsByProtocolMsgIds=T,l.maybeGetMsgByExternalId=$,l.maybeGetMsgListByMsgId_I_KNOW_WHAT_I_AM_DOING=P,l.maybeGetMsgResultByProtocolMsgId=N,l.getMsgMapByProtocolMsgId=M,l.getSortOrderFromMsgId=w,l.maybeGetRevokedMsgByProtocolMsgId=F,l.checkIfMsgIsDeletedForMeOrRevoked=O,l.getMsgsByProtocolMsgId=B,l.updateSystemAck=W,l.bulkUpdateSystemAck=q,l.maybeUpdateThreadMsgsForDeleteForMe=V,l.getFutureProofMsgs=H,l.updateMediaId=z,l.bulkUpdateMediaId=j,l.updateDbMsgXMAExpiration=K,l.bulkUpdateDbMsgXMAExpired=Q,l.getMsgsNeedingRetroactiveReadReceiptsUpTo=X,l.clearRetroactiveReadReceiptStatusFromMsgsUpTo=Y,l.deleteDbMsg=J,l.bulkDeleteDbMsg=Z,l.deleteMessages=ee,l.getMsgsByMsgIds=te,l.getSpamMsgs=ne,l.fetchMessagesFromDbWithSortOrderMs=re,l.calculateOldestMsg=oe,l.getNextMsgIdNumberForThread=ie,l.checkMessagesExistenceByProtocolMsgIds=le,l.UNSAFE_getMultipleMsgsByExternalId=se}),98);
__d("MAWDbMsgTypeVersionTxns",["MAWDbAppMeta","MAWDexieTable","MAWTransactionMode","MAWTransactor","MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return e.appMeta.get({key:o("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion}).then(function(e){return e==null?void 0:e.value.msgTypeVersion})}function u(e,t){return e.appMeta.add({key:o("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:t}})}function c(e,t){return e.appMeta.put({key:o("MAWDbAppMeta").AppMetaKeysEnum.msgTypeVersion,value:{msgTypeVersion:t}})}function d(e,t){return e.appMeta.add({key:o("MAWDbAppMeta").AppMetaKeysEnum.hmacKey,value:{hmacKey:t}})}function m(e){return e.appMeta.get({key:o("MAWDbAppMeta").AppMetaKeysEnum.hmacKey}).then(function(e){return e==null?void 0:e.value.hmacKey})}function p(e,t){return e.appMeta.get({key:t})}function _(e,t){return o("MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor").setCachedShouldSaveSecurityAlert(t),e.appMeta.put({key:o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert,value:{allowSecurityAlert:t}}).then(r("emptyFunction"))}function f(e,t){return e.appMeta.put({key:o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf,value:{allowSecurityAlertForSelf:t}}).then(r("emptyFunction"))}function g(){return o("MAWTransactor").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READONLY},"handleInstructions",function(e){return function(){return h(e)}})()}function h(e){return p(e,o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlert).then(function(e){var t;return(t=e==null?void 0:e.value.allowSecurityAlert)!=null?t:!1})}function y(e){return p(e,o("MAWDbAppMeta").AppMetaKeysEnum.allowSecurityAlertForSelf).then(function(e){var t;return(t=e==null?void 0:e.value.allowSecurityAlertForSelf)!=null?t:!0})}function C(e,t){return e.appMeta.add({key:o("MAWDbAppMeta").AppMetaKeysEnum.hotlikeSticker,value:{hotlikeSticker:t}})}function b(e){return o("MAWDexieTable").dexieAll([y(e),h(e)]).then(function(e){var t=e[0],n=e[1];return{allowSecurityAlertForContact:n,allowSecurityAlertForSelf:t}})}l.MSG_TYPE_VERSION=(e=o("MAWDbAppMeta")).AppMetaKeysEnum.msgTypeVersion,l.ALLOW_SECURITY_ALERT_FOR_CONTACT=e.AppMetaKeysEnum.allowSecurityAlert,l.ALLOW_SECURITY_ALERT_FOR_SELF=e.AppMetaKeysEnum.allowSecurityAlertForSelf,l.HOT_LIKE=e.AppMetaKeysEnum.hotlikeSticker,l.getMsgTypeVersion=s,l.addMsgTypeVersion=u,l.updateMsgTypeVersion=c,l.addHMACKey=d,l.getHMACKey=m,l.getAppMetaValue=p,l.updateSecurityAlertValueForContact=_,l.updateSecurityAlertValueForSelf=f,l.getSecuritySettingForContactTxn=g,l.getSecuritySettingForContact=h,l.getSecuritySettingForSelf=y,l.addHotLike=C,l.maybeBulkGetSecuritySetting=b}),98);
__d("MAWDbReactionsTxns",["FBLogger","MAWAuthor","MAWBridgeTypesCreators","MAWDbMsg","MAWDexieTable","MAWIndexedDb","WALogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=function(t){return t};function d(e,t){return e.reactions.put(c(t))}function m(t,n){return t.reactions.delete(n.rowId).then(function(){var t=n.author,r=n.reactionId,a=n.reactToMsgId,i=n.threadJid;a!=null&&(o("MAWIndexedDb").afterTransaction({tag:"DeleteReaction",value:o("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:t,chatJid:i,reactToMsgId:a})}),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted reaction with id : ","."])),r))})}function p(e,t){var n=o("MAWAuthor").getAuthorUserJid(t.author);return e.reactions.where("reactToExternalId").equals(t.externalId).filter(function(e){return(e.reactToAuthor===n||e.reactToAuthor===t.author)&&e.threadJid===t.chat}).toArray()}function _(e,t){var n=t.reduce(function(e,t){return e.set(t.msgId,t),e},new Map);return e.reactions.where("reactToMsgId").anyOf(t.map(function(e){return e.msgId})).toArray().then(function(e){var t=e.filter(function(e){var t,r=e.reactToExternalId,o=e.reactToMsgId;return o!=null&&r===((t=n.get(o))==null?void 0:t.externalId)});return t.length<e.length&&r("FBLogger")("messenger_web").mustfix("Reactions query by reactToMsgId returns reactions with mismatching externalId"),t})}function f(e,t){return e.reactions.where("reactToMsgId").equals(t.msgId).toArray().then(function(e){var n=e.filter(function(e){var n=e.reactToExternalId;return n===t.externalId});return n.length<e.length&&r("FBLogger")("messenger_web").mustfix("Reactions query by reactToMsgId returns reactions with mismatching externalId"),n})}function g(e,t){return _(e,[t])}function h(e,t){var n=t.author,r=t.chat,o=t.externalId;return e.reactions.where("externalId").equals(o).filter(function(e){return e.author===n&&e.threadJid===r}).first()}function y(e,t){return o("MAWDexieTable").dexieAll(t.map(function(t){var n=t.author,r=t.externalId,a=o("MAWAuthor").getAuthorUserJid(n);return e.reactions.where("reactToExternalId").equals(r).filter(function(e){return o("MAWAuthor").getAuthorUserJid(e.reactToAuthor)===a}).toArray()})).then(function(t){var n=t.flat();if(n.forEach(function(e){var t=e.author,n=e.reactToMsgId,r=e.threadJid;n!=null&&o("MAWIndexedDb").afterTransaction({tag:"DeleteReaction",value:o("MAWBridgeTypesCreators").createBridgeDeleteReaction({author:t,chatJid:r,reactToMsgId:n})})}),n.length!==0)return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Successfully deleted: "," reactions rows."])),n.length),e.reactions.bulkDelete(n.map(function(e){return e.rowId}))})}function C(e,t){return e.reactions.where("reactToMsgId").anyOf(t.map(function(e){return e.msgId})).delete().then(function(e){o("WALogger").LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Deleted "," reactions"])),e)})}function b(e,t){return e.reactions.where("reactionId").between(o("MAWDbMsg").msgIdsInChatLowerBound(t.chatId),o("MAWDbMsg").msgIdsInChatUpperBound(t.chatId)).last().then(function(e){var t=e==null?0:o("MAWDbMsg").getInChatMsgIdFromMsgId(e.reactionId);return t+1})}function v(e,t,n,r,a,i,l){var s,u,c=(s=r==null?void 0:r.ts)!=null?s:o("WATimeUtils").unixTime();return e.reactions.where(["threadJid","ts"]).between([t,(u=o("WATimeUtils").castMillisTimeToUnixTime(n))!=null?u:o("WATimeUtils").castToUnixTime(0)],[t,c],!0,a).reverse().filter(l).limit(i).toArray()}l.coerceToReaction=c,l.putReaction=d,l.deleteReaction=m,l.getReactionForEcho=p,l.getReactionsFromMessages=_,l.getReactionsForMessage=f,l.getReactionsFromMessage=g,l.maybeGetReactionByProtocolMsgId=h,l.deleteReactionsByUniqueMsgIdentifiers=y,l.deleteAllReactionsForMessages=C,l.getNextReactionIdNumberForThread=b,l.fetchReactionsFromDbWithTimestamp=v}),98);
__d("MaybeCreateOrUpdateThreadResultCache",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){e.delete(t)}i.cache__I_KNOW_WHAT_I_AM_DOING=e,i.deleteCachedThreadResult=l}),66);
__d("MAWDbThreadTxns",["MAWAuthoritativeThreadsCache","MAWBridgeTypesCreators","MAWDbMsgTxns","MAWDexieTable","MAWFolderTypes","MAWIndexedDb","MaybeCreateOrUpdateThreadResultCache","WAArrayZip","WALogger","WAResultOrError","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t){return e.threads.get({deduplicationKey:t}).then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function d(e,t){return e.threads.get({jid:t}).then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function m(e,t){return e.threads.where("jid").anyOf(t).toArray()}function p(e,t){return e.threads.where("jid").startsWith(t+"@").first().then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function _(e){o("MaybeCreateOrUpdateThreadResultCache").deleteCachedThreadResult(e),o("MAWAuthoritativeThreadsCache").AuthoritativeThreadsCache.delete(e)}function f(e,t){return e.threads.where("jid").equals(t).delete().then(function(){return _(t)})}function g(e,t){return e.participants.where("userJid").equals(t).toArray().then(function(t){var n=t.map(function(e){return e.threadJid});return m(e,n)})}function h(e,t){return e.participants.where("userJid").anyOf(t).toArray().then(function(t){var n=new Map,r=new Set;return t.forEach(function(e){var t,o=e.userJid,a=(t=n.get(o))!=null?t:[];a.push(e.threadJid),n.set(o,a),r.add(e.threadJid)}),m(e,Array.from(r)).then(function(e){var t=e.reduce(function(e,t){return e.set(t.jid,t),e},new Map);return new Map(Array.from(n.entries()).map(function(e){var n=e[0],r=e[1];return[n,r.map(function(e){return t.get(e)}).filter(Boolean)]}))})})}function y(e,t,n){return(t==null?void 0:t.lastReadMsgReceiptSent)==null?o("MAWDexieTable").dexieResolve(!1):o("MAWDbMsgTxns").getSortOrderFromMsgId(e,t.lastReadMsgReceiptSent).then(function(e){return n.sortOrderMs==null||e==null?!1:n.sortOrderMs<=e})}function C(e,t){return e.threads.get({jid:t.threadJid}).then(function(n){return y(e,n,t)})}function b(e,t){return e.threads.where("jid").anyOf(t.map(function(e){return e.threadJid})).toArray().then(function(n){return o("MAWDexieTable").dexieAll(o("WAArrayZip").zip(t,n).map(function(t){var n=t[0],r=t[1];return y(e,r,n)}))})}function v(e,t,n){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var r=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{archived:!0,cannotReplyReason:n?"viewer_not_subscribed":e.cannotReplyReason,folder:o("MAWFolderTypes").FOLDER_ID.ARCHIVED})});return e.threads.bulkPut(r).then(function(){r.forEach(function(e){n&&o("WALogger").LOG(["[Occamadillo] Leaving a group thread\n          "+e.jid.toString()+", showing a VIEWER_NOT_SUBSCRIBED composer blocker"]),o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:e.cannotReplyReason,folder:o("MAWFolderTypes").FOLDER_ID.ARCHIVED,threadJid:e.jid})})})})})}function S(e,t){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var n=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{cannotReplyReason:null})});return e.threads.bulkPut(n).then(function(){n.forEach(function(e){var t={cannotReplyReason:null,threadJid:e.jid};o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread(t)})})})})}function R(e,t){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var n=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{archived:!1,cannotReplyReason:e.cannotReplyReason==="viewer_not_subscribed"?e.cannotReplyReason:null,folder:o("MAWFolderTypes").FOLDER_ID.INBOX})});return e.threads.bulkPut(n).then(function(){n.forEach(function(e){o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:e.cannotReplyReason,folder:o("MAWFolderTypes").FOLDER_ID.INBOX,threadJid:e.jid})})})})})}function L(e,t){return e.threads.where("jid").anyOf(t).toArray().then(function(t){var n=t.filter(Boolean).map(function(e){return babelHelpers.extends({},e,{cannotReplyReason:"viewer_not_subscribed"})});return e.threads.bulkPut(n).then(function(){n.forEach(function(e){var t={cannotReplyReason:"viewer_not_subscribed",threadJid:e.jid};o("WALogger").LOG(["[Occamadillo] User is unsubscribed from thread\n          "+e.jid.toString()+", showing a VIEWER_NOT_SUBSCRIBED composer blocker"]),o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread(t)})})})})}function E(t,n){return d(t,n).then(function(n){if(!n.success){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["markThreadAsMigratedLocally failed to get the thread"])));return}var a=n.value;if(a.isMigratedLocally===!0){o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["markThreadAsMigratedLocally failed because thread is already migrated"])));return}var i=babelHelpers.extends({},a,{isMigratedLocally:!0});return t.threads.put(i).then(r("emptyFunction"))})}function k(e,t){if(t.isMigratedLocally===!1)return o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["markCutoverThreadAsNotMigratedLocally failed because thread is already unmigrated"]))),o("MAWDexieTable").dexieResolve(t);var n=babelHelpers.extends({},t,{isMigratedLocally:!1});return e.threads.put(n).then(function(){return n})}function I(e,t){return e.threads.put(t).then(r("emptyFunction"))}function T(e,t,n,r,a){return I(e,babelHelpers.extends({},t,{newestMsgTs:(a==null?void 0:a.ts)==null?t.newestMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(a.ts),oldestMsg:r==null?void 0:r.msgId}))}l.getThreadByDeduplicationKey=c,l.getThread=d,l.getThreads=m,l.getThreadPrimaryId=p,l.deleteThread=f,l.getAllThreadsForUser=g,l.getAllThreadsForUsers=h,l.needsRetroactiveReadReceiptInThread=C,l.bulkNeedsRetroactiveReadReceiptInThread=b,l.archiveThreads=v,l.subscribeToThreads=S,l.unarchiveThreads=R,l.unsubscribeFromThreads=L,l.markCutoverThreadAsMigratedLocally=E,l.markCutoverThreadAsNotMigratedLocally=k,l.updateThread=I,l.updateThreadMsgsForUndefinedOldestOrNewestMsgs=T}),98);
__d("MAWDbXMATxns",["MAWDbChunkTxns","MAWDbMediaTxns","MAWDbMsg","MAWDbMsgTxns","MAWDbThreadTxns","MAWDexieTable","MAWJidUtils","MAWXMAUtils","WAResultOrError","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return e.xma.bulkGet(t)}function s(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.xma.get({xmaId:t})}function u(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.xma.where("associatedMessageId").equals(t).first()}function c(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.xma.where("externalId").equals(t.externalId).filter(function(e){return e.author===t.author&&e.threadJid===t.chat}).first()}function d(e,t){return c(e,t).then(function(t){return t==null?o("WAResultOrError").makeError("missing"):o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").getMediaForXMA(e,t),o("MAWDbMsgTxns").maybeGetMsg(e,t.associatedMessageId)]).then(function(e){var n=e[0],r=e[1];if(!n.success)return o("WAResultOrError").makeError("missing");var a=n.value,i=a.defaultPreview,l=a.favicon,s=a.header,u=a.previews;return o("WAResultOrError").makeResult({associatedMessage:r,defaultPreview:i,favicon:l,header:s,previews:u,xma:t})})})}function m(e,t){return u(e,t).then(function(t){if(t!=null)return o("MAWDbMsgTxns").maybeGetMsg(e,t.msgId)})}function p(e,t){if(t.length===0)return o("MAWDexieTable").dexieResolve([]);var n=t.filter(o("MAWDbMsg").isXMAMsg).map(function(e){return o("MAWJidUtils").maybeToProtocolMsgId(e.author,e.threadJid,e.externalId)}).filter(Boolean),r=n.map(function(t){return c(e,t)});return o("MAWDexieTable").dexieAll(r).then(function(e){return e.filter(Boolean)})}function _(e,t){return e.xma.where("associatedMessageId").anyOf(t).toArray().then(function(e){var t=e.filter(function(e){return e.msgId!=null&&r("gkx")("9841")?e.targetType!=null:o("MAWXMAUtils").isXMAShare_DO_NOT_USE(e.targetType)});return t.reduce(function(e,t){return t.associatedMessageId!=null&&t.msgId!=null?e.set(t.associatedMessageId,t.msgId):e},new Map)})}function f(e,t){return e.xma.where("associatedMessageId").equals(t).first()}function g(e,t){return e.xma.where("associatedMessageId").equals(t).first().then(function(t){if(t!=null){var n=o("MAWJidUtils").maybeToProtocolMsgId(t.author,t.threadJid,t.externalId);if(n!=null)return o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(e,n)}})}function h(e,t){return f(e,t).then(function(t){return t==null?o("WAResultOrError").makeResult():o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").getMediaForXMA(e,t),o("MAWDbMsgTxns").maybeGetMsg(e,t.associatedMessageId)]).then(function(e){var n=e[0],r=e[1];if(!n.success)return o("WAResultOrError").makeError("missing");var a=n.value,i=a.defaultPreview,l=a.favicon,s=a.header,u=a.previews;return o("WAResultOrError").makeResult({associatedMessage:r,defaultPreview:i,favicon:l,header:s,previews:u,xma:t})})})}function y(e,t,n){return o("MAWDbThreadTxns").getThread(e,n).then(function(n){if(n.success){var r=n.value;if(t==null)return o("MAWDexieTable").dexieResolve();var a={author:t.author,chat:r.jid,externalId:t.externalId};return o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(e,a)}})}function C(e,t){return c(e,t).then(function(t){if(t==null)return o("MAWDexieTable").dexieResolve();if(!o("MAWXMAUtils").isXMAStoryReply(t.targetType))return o("MAWDbMediaTxns").maybeGetMediaFromMediaId(e,t.defaultPreviewMediaId).then(function(n){return n==null?{hasMedia:!1,xma:t}:o("MAWDexieTable").dexieAll([n,o("MAWDbChunkTxns").hasMediaChunk(e,n.hashedPlaintextHash)]).then(function(e){var n=e[0],r=e[1];return{hasMedia:r,previewMedia:n,xma:t}})})})}function b(e,t){return e.xma.where("externalId").anyOf(t).toArray()}l.bulkGetXMAs=e,l.maybeGetXMAFromXMAId=s,l.maybeGetXMAFromAssociatedMsgId=u,l.maybeGetXMAFromProtocolMsgId=c,l.maybeGetXMAPayloadFromProtocolMsgId=d,l.getDbXMAMsgFromAssociatedMsgId=m,l.getXMAFromMsgs=p,l.getXMAMsgIdsFromAssociatedMsgIds=_,l.maybeGetDbXMAMsgByAssociatedMsgId=g,l.maybeGetXMAPayloadFromAssociatedMsgId=h,l.maybeGetAssociatedXMAMsg=y,l.maybeGetXMAAndDefaultPreviewMediaFromProtocolMsg=C,l.getMultipleXMAByExternalId=b}),98);
__d("MAWMessageHasNonNullServerTsOnReceivedAckValidator",["MAWAckLevel","MAWTransactionMode","MAWTransactor"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWTransactor").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"isMessageHasNonNullServerTsOnReceivedAckValidator",function(e){return function(t){return e.messages.get(t).then(function(e){return e==null||e.ack<o("MAWAckLevel").ACK.sent?{key:t,result:"skipped"}:e.serverTs!=null?{key:t,result:"valid"}:{description:"Message with "+e.ack+" ack has empty serverTs.",key:t,result:"invalid"}})}}),s={description:"MAWMessageHasNonNullServerTsOnReceivedAckValidator",isValid:e,table:"messages",type:["add","put"]};l.MAWMessageHasNonNullServerTsOnReceivedAckValidator=s}),98);
__d("MAWMessageHasUniqueExternalIdValidator",["MAWDexieTable","MAWTransactionMode","MAWTransactor","WAStanzaUtils","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3288"),s=o("MAWTransactor").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"isMessageWithUniqueExternalIdValidator",function(e){return function(t){return e.messages.get(t).then(function(n){var r=n==null?void 0:n.externalId;return n==null||r==null?o("MAWDexieTable").dexieResolve({key:t,result:"skipped"}):e.messages.where("externalId").equals(o("WAStanzaUtils").toStanzaId(r)).filter(function(e){return e.author===n.author&&e.threadJid===n.threadJid}).toArray().then(function(e){if(e.length===1)return{key:t,result:"valid"};var r=u(t,n,e);return{description:r,key:t,result:"invalid"}})})}});function u(e,t,n){var r,o=n.every(function(e){return e.serverTs===t.serverTs}),a=n.filter(function(t){return t.rowId!==e}),i="Message has duplicate externalId."+("New message type: "+((r=t.type)!=null?r:"")+". ")+("Existing message types: "+a.map(function(e){return e.type}).join(", ")+". ")+("Messages have same serverTS: "+o.toString()+". ")+("Message has null protocolMsgId: "+(t.protocolMsgId==null).toString()+". ");return i}var c={description:"MAWMessageHasUniqueExternalIdValidator",isValid:s,sampleRate:e,table:"messages",type:["add","put"]};l.MAWMessageHasUniqueExternalIdValidator=c}),98);
__d("MAWParticipantMatchOneOnOneThreadValidator",["MAWIndexedDb","MAWTransactionMode","MAWUserJidWrapper","WAJids","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("3121"),s=o("MAWIndexedDb").makeMsgrTransactor({participants:o("MAWTransactionMode").READONLY},"isParticipantMatchingOneOnOneThreadValidator",function(e){return function(t){return e.participants.get(t).then(function(e){return e==null?{key:t,result:"skipped"}:o("WAJids").switchOnMsgrChatJidType(e.threadJid,{group:function(){return{key:t,result:"skipped"}},user:function(r){return e.userJid!==r&&e.userJid!==o("MAWUserJidWrapper").getMyUserJid()?{description:"Participants added to 1:1 thread is neither self or the other user",key:t,result:"invalid"}:{key:t,result:"valid"}}})})}}),u={description:"MAWParticipantMatchOneOnOneThreadValidator",isValid:s,sampleRate:e,table:"participants",type:["add","put"]};l.MAWParticipantMatchOneOnOneThreadValidator=u}),98);
__d("MAWReactionHasUniqueProtocolMsgIdValidator",["MAWDexieTable","MAWTransactionMode","MAWTransactor","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWTransactor").makeMsgrTransactor({reactions:o("MAWTransactionMode").READONLY},"isReactionWithUniqueProtocolMsgIdValidator",function(e){return function(t){return e.reactions.get(t).then(function(n){var r=n==null?void 0:n.externalId;return r==null?o("MAWDexieTable").dexieResolve({key:t,result:"skipped"}):e.reactions.where("externalId").equals(o("WAStanzaUtils").toStanzaId(r)).filter(function(e){return e.threadJid===(n==null?void 0:n.threadJid)}).toArray().then(function(e){if(e.length===1)return{key:t,result:"valid"};var r=e.find(function(e){return e.author!==(n==null?void 0:n.author)})!=null;return{description:"Reaction has duplicate protocolMsgId, has existing with different author: "+r.toString(),key:t,result:"invalid"}})})}}),s={description:"MAWReactionHasUniqueProtocolMsgIdValidator",isValid:e,table:"reactions",type:["add","put"]};l.MAWReactionHasUniqueProtocolMsgIdValidator=s}),98);
__d("MAWDbMutationMiddleware",["FBLogger","MAWDbMiddlewareMutations","getErrorSafe","vulture"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{create:function(n){return babelHelpers.extends({},n,{table:function(a){var t=n.table(a);try{return babelHelpers.extends({},t,{get:function(r){return t.get(r).then(function(t){if(t!=null)return o("MAWDbMiddlewareMutations").getValue(t,a,e)})},getMany:function(r){return t.getMany(r).then(function(t){return t.map(function(t){if(t!=null)return o("MAWDbMiddlewareMutations").getValue(t,a,e)})})},mutate:function(r){var n=null;switch(r.type){case"add":case"put":n=r.values.map(function(t){return o("MAWDbMiddlewareMutations").mutateValue(t,a,e)});break;case"delete":break;case"deleteRange":break}return r.type==="delete"||r.type==="deleteRange"||n==null?t.mutate(r):(r.values=n,t.mutate(r).then(function(e){return e}))},openCursor:function(r){return t.openCursor(r).then(function(t){return t==null||t.value==null?t:u(t,a,e)})},query:function(r){return t.query(r).then(function(t){if(t.result.length===0||typeof t.result[0]!="object")return t;var n=t.result.map(function(t){return o("MAWDbMiddlewareMutations").getValue(t,a,e)});return t.result=n,t})}})}catch(e){var i=r("getErrorSafe")(e);return r("FBLogger")("messenger_web").catching(i).mustfix("Error applying MAWDbMiddleware"),t}}})},name:"MAWDbMutationMiddleware",stack:"dbcore"}}function s(){return{create:function(t){return babelHelpers.extends({},t,{table:function(n){var e=t.table(n);try{return babelHelpers.extends({},e,{get:function(r){return e.get(r).then(function(e){return o("MAWDbMiddlewareMutations").getVaultedValue(e,n)})},getMany:function(a){return e.getMany(a).then(function(e){return r("vulture")("SMxI1wxhqOhNsUbqaKEGeOiO21w="),e.map(function(e){return o("MAWDbMiddlewareMutations").getVaultedValue(e,n)})})},mutate:function(r){return r.type==="delete"||r.type==="deleteRange"||(r.values=r.values.map(function(e){return o("MAWDbMiddlewareMutations").mutateVaultedValue(e,n)})),e.mutate(r)},openCursor:function(r){return e.openCursor(r).then(function(e){return e==null||e.value==null?e:c(e,n)})},query:function(r){return e.query(r).then(function(e){return e.result.length===0||typeof e.result[0]!="object"?e:babelHelpers.extends({},e,{result:e.result.map(function(e){return o("MAWDbMiddlewareMutations").getVaultedValue(e,n)})})})}})}catch(t){var a=r("getErrorSafe")(t);return r("FBLogger")("messenger_web").catching(a).mustfix("Error applying MAWDbMiddleware"),e}}})},name:"getMAWVaultMiddleware",stack:"dbcore"}}function u(e,t,n){var r;return Object.create(e,{continue:{get:function(){return e.continue}},continuePrimaryKey:{get:function(){return e.continuePrimaryKey}},key:{get:function(){return e.key}},primaryKey:{get:function(){return e.primaryKey}},start:{value:function(i){return e.start(function(){r=o("MAWDbMiddlewareMutations").getValue(e.value,t,n);try{e.value=r}catch(e){}i()})}},value:{get:function(){return r}}})}function c(e,t){var n;return Object.create(e,{continue:{get:function(){return e.continue}},continuePrimaryKey:{get:function(){return e.continuePrimaryKey}},key:{get:function(){return e.key}},primaryKey:{get:function(){return e.primaryKey}},start:{value:function(a){return e.start(function(){n=o("MAWDbMiddlewareMutations").getVaultedValue(e.value,t);try{e.value=n}catch(e){}a()})}},value:{get:function(){return n}}})}l.getMAWDbMutationMiddleware=e,l.getMAWVaultMiddleware=s}),98);
__d("MAWDbEncryptObjContent",["MAWKeychainNaClCrypto"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return o("MAWKeychainNaClCrypto").encryptTweetNaClArrayBuffer(e,t,n)}l.encryptContent=e}),98);
__d("MAWXMACTAUtil",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.actionUrl,n=e.buttonType,r=e.ctaType,o=e.nativeUrl,a=e.title;return{actionUrl:t,buttonType:n,ctaType:r,nativeUrl:o,title:a}}function l(e){var t=e.actionUrl,n=e.buttonType,r=e.ctaType,o=e.nativeUrl,a=e.title;return{actionUrl:t,buttonType:n,ctaType:r,nativeUrl:o,title:a}}i.toMAWCTAEncode=e,i.fromMAWCTAEncode=l}),66);
__d("WAServerSync.pb",["$InternalEnum","WAProtoConst"],(function(t,n,r,o,a,i,l){var e,s=n("$InternalEnum")({SET:0,REMOVE:1}),u={},c={},d={},m={},p={},_={},f={},g={},h={},y={},C={};u.name="SyncdVersion",u.internalSpec={version:[1,(e=o("WAProtoConst")).TYPES.UINT64]},c.name="ExitCode",c.internalSpec={code:[1,e.TYPES.UINT64],text:[2,e.TYPES.STRING]},d.name="SyncdIndex",d.internalSpec={blob:[1,e.TYPES.BYTES]},m.name="SyncdValue",m.internalSpec={blob:[1,e.TYPES.BYTES]},p.name="KeyId",p.internalSpec={id:[1,e.TYPES.BYTES]},_.name="SyncdRecord",_.internalSpec={index:[1,e.TYPES.MESSAGE,d],value:[2,e.TYPES.MESSAGE,m],keyId:[3,e.TYPES.MESSAGE,p]},f.name="ExternalBlobReference",f.internalSpec={mediaKey:[1,e.TYPES.BYTES],directPath:[2,e.TYPES.STRING],handle:[3,e.TYPES.STRING],fileSizeBytes:[4,e.TYPES.UINT64],fileSha256:[5,e.TYPES.BYTES],fileEncSha256:[6,e.TYPES.BYTES]},g.name="SyncdSnapshot",g.internalSpec={version:[1,e.TYPES.MESSAGE,u],records:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,_],mac:[3,e.TYPES.BYTES],keyId:[4,e.TYPES.MESSAGE,p]},h.name="SyncdMutations",h.internalSpec={mutations:[1,e.FLAGS.REPEATED|e.TYPES.MESSAGE,y]},y.name="SyncdMutation",y.internalSpec={operation:[1,e.TYPES.ENUM,s],record:[2,e.TYPES.MESSAGE,_]},C.name="SyncdPatch",C.internalSpec={version:[1,e.TYPES.MESSAGE,u],mutations:[2,e.FLAGS.REPEATED|e.TYPES.MESSAGE,y],externalMutations:[3,e.TYPES.MESSAGE,f],snapshotMac:[4,e.TYPES.BYTES],patchMac:[5,e.TYPES.BYTES],keyId:[6,e.TYPES.MESSAGE,p],exitCode:[7,e.TYPES.MESSAGE,c],deviceIndex:[8,e.TYPES.UINT32],clientDebugData:[9,e.TYPES.BYTES]},l.SyncdMutation$SyncdOperation=s,l.SyncdVersionSpec=u,l.ExitCodeSpec=c,l.SyncdIndexSpec=d,l.SyncdValueSpec=m,l.KeyIdSpec=p,l.SyncdRecordSpec=_,l.ExternalBlobReferenceSpec=f,l.SyncdSnapshotSpec=g,l.SyncdMutationsSpec=h,l.SyncdMutationSpec=y,l.SyncdPatchSpec=C}),98);
__d("MAWDbObjDecode",["FBLogger","MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloCollectionVersionsTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloMissingKeysTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPendingMutationsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloPollTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloReceiverFetchInfoTableSchema.pb","MAWArmadilloSyncActionsTableSchema.pb","MAWArmadilloSyncKeysTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWODSProxy","MAWXMACTAUtil","WAOdsEnums","WAServerSync.pb","decodeProtobuf"],(function(t,n,r,o,a,i,l){var e={appData:function(t){return I(t)},appMeta:function(t){return T(t)},chunk:function(t){return D(t)},collectionVersions:function(t){return O(t)},deletedMessages:function(t){return _(t)},deviceChangeAlerts:function(t){return u(t)},dualSendMedia:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},dyiBatch:function(t){return N(t)},ebMessageRestoreTasks:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ebMsgRanges:function(t){return M(t)},ebRestoreQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ebUploadQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},editMsgHistory:function(t){return q(t)},encryptionMetaV3:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ephemeralSettings:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},existingUsers:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsBackloggedMessages:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsEncryptionMeta:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsIndexV3:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsPurgeBacklog:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},ftsPurgeThreadBacklog:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},groupInfo:function(t){return h(t)},groupInvites:function(t){return L(t)},historySyncQRCodeData:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},historySyncQRCodeSecretKey:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},igMessageAuxiliaryInfo:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},isDualSend:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},media:function(t){return $(t)},mediaBackup:function(t){return x(t)},mediaKeys:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},messages:function(t){return p(t)},missingKeys:function(t){return A(t)},participants:function(t){return R(t)},pendingMessageStanzaQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},pendingMutations:function(t){return F(t)},pendingReceipts:function(t){return v(t)},pendingStanzas:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},personalSenderKeyStatuses:function(t){return k(t)},poll:function(t){return V(t)},reactions:function(t){return P(t)},receipts:function(t){return b(t)},receiverFetchInfo:function(t){return U(t)},sentBytesCache:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},staleQueue:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for decryption")},syncActions:function(t){return w(t)},syncKeys:function(t){return B(t)},tasks:function(t){return E(t)},threads:function(t){return S(t)},unrenderedMessages:function(t){return f(t)},xma:function(t){return W(t)}};function s(t,n){var o=null;if(Object.prototype.hasOwnProperty.call(e,n))o=e[n](t);else throw r("FBLogger")("messenger_web").mustfixThrow("not a valid table name");return o}function u(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,e);return{action:t.action,deviceJid:t.deviceJid,identity:t.identity,isArchived:t.isArchived,latitude:t.latitude,location:t.location,loggedOut:t.loggedOut,longitude:t.longitude,model:t.model,platform:t.platform,ts:t.ts}}function c(e){var t=e.quote,n;if(t!=null){if(t.content==null)throw r("FBLogger")("messenger_web").mustfixThrow("QuotedMsgContent missing upon decoding");var o=t.content,a=o.author,i=o.expirationTs,l=o.externalId,s=o.mediaId,u=o.msgContent,c=o.msgId,d=o.plaintextHash,m=o.sourceId,p=o.specialTextSize,_=o.ts,f=o.type,g=o.xmaMessageType;n={content:babelHelpers.extends({},t.content,{author:a,expirationTs:i,externalId:l,mediaId:s,msgContent:u,msgId:c,plaintextHash:d,sourceId:m,specialTextSize:p,ts:_,type:f,xmaMessageType:g}),remoteJid:t.remoteJid}}return n}function d(e){return e==null?e:new Uint8Array(e)}function m(e){return e==null||e.length===0?new Set:new Set(e)}function p(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,e),n=t.msgContent;if(t.type===o("MAWMsgType").MSG_TYPE.FUTUREPROOF){if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("MsgContent missing upon decoding futureproof message");n.subtype=n.subtype}var a=c(t),i=g(t.reportingMeta);return babelHelpers.extends({},t,{msgContent:n,quote:a,reportingMeta:i})}function _(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,e);return babelHelpers.extends({},t)}function f(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,e),n=c(t),r=g(t.reportingMeta);return babelHelpers.extends({},t,{quote:n,reportingMeta:r})}function g(e){if(e!=null)return{frankingKey:e.frankingKey!=null?new Uint8Array(e.frankingKey):e.frankingKey,frankingTag:e.frankingTag!=null?new Uint8Array(e.frankingTag):e.frankingTag,frankingVersion:e.frankingVersion,reportingContent:e.reportingContent,reportingTag:e.reportingTag!=null?new Uint8Array(e.reportingTag):e.reportingTag}}function h(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,e);return{creationTs:t.creationTs,creator:t.creator,inviter:t.inviter,memberAddMode:t.memberAddMode,msgExpiration:t.msgExpiration,name:t.name,nameOwner:t.nameOwner,nameTs:t.nameTs,participantVersion:t.participantVersion}}function y(e){return e.length===0?null:new Map(e.map(function(e){var t=e.deviceJid;if(t==null||e.serializedPubKey==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected deviceJid or serializedPubKey are missing ");var n=new Uint8Array(e.serializedPubKey),o=d(e.baseKey),a={baseKey:o,pubKey:n};return[t,a]}))}function C(e){return e==null?null:new Map(e.map(function(e){var t;if(e.deviceJid==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected deviceJID is missing ");return[e.deviceJid,(t=e.count)!=null?t:0]}))}function b(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,e),n=t.recipientDevices,r=m(n);return{permittedIdentitiesPerDevice:y(t.permittedIdentitiesPerDevice),recipientDevices:r,retryCountsPerDevice:C(t.retryCountsPerDevice)}}function v(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,e)}function S(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,e);return{archived:t.archived,cannotReplyReason:t.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:t.didInsertDualThreadCutoverAdminMsg,folder:t.folder,isMigratedLocally:t.isMigratedLocally,lastReadMsg:t.lastReadMsg,lastReadMsgReceiptSent:t.lastReadMsgReceiptSent,muteCallsExpireTimeMs:t.muteCallsExpireTimeMs,muteExpireTimeMs:t.muteExpireTimeMs,newestMsg:t.newestMsg,newestMsgTs:t.newestMsgTs,oldestMsg:t.oldestMsg,optimisticThreadKey:t.optimisticThreadKey,snippetMsg:t.snippetMsg,snippetMsgTs:t.snippetMsgTs}}function R(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,e)}function L(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,e)}function E(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,e)}function k(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,e),n=t.hasSenderKey,r=m(n);return{hasSenderKey:r,rotateSenderKey:t.rotateSenderKey,senderKeyId:t.senderKeyId,senderKeyTs:t.senderKeyTs}}function I(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,e);return{ack:t.ack,contents:t.contents,permittedIdentitiesPerDevice:y(t.permittedIdentitiesPerDevice),recipientDevices:new Set(t.recipientDevices),sendPartial:t.sendPartial,ts:t.ts}}function T(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,e)}function D(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,e)}function x(e){return o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,e)}function $(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,e),n,a=t.mediaEntries;return a==null?n=new Map:n=new Map(a.map(function(e){if(e.msgId==null||e.mediaEntryData==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected msgId or mediaEntryData are missing ");return[e.msgId,new Uint8Array(e.mediaEntryData)]})),{accessibilitySummaryText:t.accessibilitySummaryText,isVideoGif:t.isVideoGif,mediaEntries:n,mediaType:t.mediaType,plaintextHash:t.plaintextHash,size:t.size,ts:t.ts,validatedAudioInfo:t.validatedAudioInfo,validatedDocumentFileInfo:t.validatedDocumentFileInfo,validatedImageInfo:t.validatedImageInfo,validatedResult:t.validatedResult,validatedVideoInfo:t.validatedVideoInfo}}function P(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,e);return t.ts!=null&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MIGRATE_REACTION_TS_AS_INDEX,key:"reaction_ts_encrypted"}),babelHelpers.extends({ack:t.ack,author:t.author,groupingKey:t.groupingKey,reaction:t.reaction,reactToAuthor:t.reactToAuthor,senderTimestampMs:t.senderTimestampMs},t.ts!=null?{ts:t.ts}:{})}function N(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,e);return{isThread:t.isThread,numMessages:t.numMessages,numMessagesRestored:t.numMessagesRestored,numThreadsRestored:t.numThreadsRestored,oldestTs:t.oldestTs,qplFlowDescriptor:t.qplFlowDescriptor,qplInstanceKeyE2E:t.qplInstanceKeyE2E,qplInstanceKeyForThread:t.qplInstanceKeyForThread,threadId:t.threadId}}function M(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,e);return{creationTime:t.creationTime,maxMsgExternalId:t.maxMsgExternalId,maxMsgSortOrderMs:t.maxMsgSortOrderMs,minMsgExternalId:t.minMsgExternalId,minMsgSortOrderMs:t.minMsgSortOrderMs}}function w(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloSyncActionsTableSchema.pb").SyncActionsTableSchemaProtoSpec,e);return{binarySyncData:t.binarySyncData,keyId:t.keyId,timestamp:t.timestamp,valueMac:t.valueMac,version:t.version}}function A(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloMissingKeysTableSchema.pb").MissingKeysTableSchemaProtoSpec,e),n;return t.deviceResponses==null?n=new Map:n=new Map(t.deviceResponses.map(function(e){if(e.deviceId==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected deviceId is missing");return[e.deviceId,e.deviceResponse]})),{deviceResponses:n,keyId:t.keyId,timestamp:t.timestamp}}function F(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloPendingMutationsTableSchema.pb").PendingMutationsTableSchemaProtoSpec,e),n;switch(t.operation){case o("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.SET:n=o("WAServerSync.pb").SyncdMutation$SyncdOperation.SET;break;case o("MAWArmadilloPendingMutationsTableSchema.pb").SYNCD_MUTATION_SYNCD_OPERATION.REMOVE:n=o("WAServerSync.pb").SyncdMutation$SyncdOperation.REMOVE;break;default:throw r("FBLogger")("messenger_web").mustfixThrow("operation missing when decoding PendingMutation")}return{binarySyncAction:t.binarySyncAction,operation:n,timestamp:t.timestamp,version:t.version}}function O(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloCollectionVersionsTableSchema.pb").CollectionVersionsTableSchemaProtoSpec,e);return{finiteFailureStartTime:t.finiteFailureStartTime,isCollectionInMacMismatchFatal:t.isCollectionInMacMismatchFatal,isCollectionLthashInconsistent:t.isCollectionLthashInconsistent,ltHash:t.ltHash,state:t.state,version:t.version}}function B(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloSyncKeysTableSchema.pb").SyncKeysTableSchemaProtoSpec,e);return{fingerprint:t.fingerprint,keyData:t.keyData,timestamp:t.timestamp}}function W(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,e);return{author:t.author,ctas:t.ctas.map(function(e){return o("MAWXMACTAUtil").fromMAWCTAEncode(e)}),defaultCTA:t.defaultCTA==null?t.defaultCTA:o("MAWXMACTAUtil").fromMAWCTAEncode(t.defaultCTA),defaultPreviewMediaPlaintextHash:t.defaultPreviewMediaPlaintextHash,faviconPlaintextHash:t.faviconPlaintextHash,headerMediaPlaintextHash:t.headerMediaPlaintextHash,headerTitle:t.headerTitle,isTombstoned:t.isTombstoned,maxSubtitleNumOfLines:t.maxSubtitleNumOfLines,maxTitleNumOfLines:t.maxTitleNumOfLines,msgId:t.msgId,overlayDescription:t.overlayDescription,overlayIconGlyph:t.overlayIconGlyph,overlayTitle:t.overlayTitle,previewMediaIds:t.previewMediaIds,subtitleText:t.subtitleText,targetId:t.targetId,targetType:t.targetType,targetUsername:t.targetUsername,threadJid:t.threadJid,titleText:t.titleText,xmaLayoutType:t.xmaLayoutType}}function q(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,e);return{author:t.author,editExternalId:t.editExternalId,editTs:t.editTs,msgContent:t.msgContent,sendStatus:t.sendStatus,specialTextSize:t.specialTextSize}}function U(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloReceiverFetchInfoTableSchema.pb").ReceiverFetchInfoTableSchemaProtoSpec,e);return{accessibilitySummaryText:t.accessibilitySummaryText,mimetype:t.mimetype,previewHeight:t.previewHeight,previewUrl:t.previewUrl,previewUrlExpirationTimestampMs:t.previewUrlExpirationTimestampMs,previewWidth:t.previewWidth,type:t.type}}function V(e){var t=o("decodeProtobuf").decodeProtobuf(o("MAWArmadilloPollTableSchema.pb").PollTableSchemaProtoSpec,e),n=new Map(t.pollOptions.map(function(e){var t=e.pollOptionHash;if(t==null||e.pollOption==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected pollOptionHash or pollOption is missing");return[t,{optionText:e.pollOption.optionText,voteAuthors:new Set(e.pollOption.voteAuthors)}]}).filter(Boolean)),a=new Map(t.latestSenderTimestampsMs.map(function(e){if(e.author==null||e.latestSenderTimestampMs==null)throw r("FBLogger")("messenger_web").mustfixThrow("Expected author or latestSenderTimestampMs are missing");return[e.author,e.latestSenderTimestampMs]}));return{encKey:t.encKey,latestSenderTimestampsMs:a,pollAuthor:t.pollAuthor,pollOptions:n,pollParticipantCount:t.pollParticipantCount,pollState:t.pollState,selectableOptionsCount:t.selectableOptionsCount,title:t.title}}l.decodeDbObj=s}),98);
__d("WASyncdKeyTypes",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}function l(e){return e}function s(e){return e}function u(e){return e}i.toSyncKeyId=e,i.fromSyncKeyId=l,i.toSyncKeyData=s,i.fromSyncKeyData=u}),66);
__d("MAWDbObjEncode",["FBLogger","MAWArmadilloAppDataTableSchema.pb","MAWArmadilloAppMetaTableSchema.pb","MAWArmadilloDeletedMessagesTableSchema.pb","MAWArmadilloDeviceChangeAlertsTableSchema.pb","MAWArmadilloDyiBatchTableSchema.pb","MAWArmadilloEBMsgRangesTableSchema.pb","MAWArmadilloEditMsgHistoryTableSchema.pb","MAWArmadilloGroupInfoTableSchema.pb","MAWArmadilloGroupInvitesTableSchema.pb","MAWArmadilloMediaTablesSchema.pb","MAWArmadilloMessagesTableSchema.pb","MAWArmadilloParticipantsTableSchema.pb","MAWArmadilloPersonalSenderKeyStatusTableSchema.pb","MAWArmadilloPollTableSchema.pb","MAWArmadilloReactionsTableSchema.pb","MAWArmadilloReceiptTablesSchema.pb","MAWArmadilloReceiverFetchInfoTableSchema.pb","MAWArmadilloTasksTableSchema.pb","MAWArmadilloThreadsTableSchema.pb","MAWArmadilloUnrenderedMessagesTableSchema.pb","MAWArmadilloXMATableSchema.pb","MAWMsgType","MAWXMACTAUtil","WASyncdKeyTypes","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e=["ack","altIndex","collapsibleId","externalId","messageDeleteTs","messageExpirationTs","msgId","pollStanzaId","protocolMsgId","quoteExpirationTs","quoteExternalId","revokedExternalId","rowId","serverTs","sortOrderMs","threadJid","unsendMsgContentDeleteTs"],s=["author","chat","externalId","rowId"],u={appData:k,appMeta:I,chunk:T,deletedMessages:_,deviceChangeAlerts:c,dualSendMedia:d,dyiBatch:P,ebMessageRestoreTasks:d,ebMsgRanges:N,ebRestoreQueue:d,ebUploadQueue:d,editMsgHistory:w,encryptionMetaV3:d,ephemeralSettings:d,existingUsers:d,ftsBackloggedMessages:d,ftsEncryptionMeta:d,ftsIndexV3:d,ftsPurgeBacklog:d,ftsPurgeThreadBacklog:d,groupInfo:g,groupInvites:R,historySyncQRCodeData:d,historySyncQRCodeSecretKey:d,igMessageAuxiliaryInfo:d,isDualSend:d,media:x,mediaBackup:D,mediaKeys:d,messages:p,participants:S,pendingMessageStanzaQueue:d,pendingReceipts:b,pendingStanzas:d,personalSenderKeyStatuses:E,poll:F,reactions:$,receipts:C,receiverFetchInfo:A,sentBytesCache:d,staleQueue:d,tasks:L,threads:v,unrenderedMessages:f,xma:M};function c(e){var t={action:e.action,deviceJid:e.deviceJid,identity:e.identity,isArchived:e.isArchived,latitude:e.latitude,location:e.location,loggedOut:e.loggedOut,longitude:e.longitude,model:e.model,platform:e.platform,ts:e.ts};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloDeviceChangeAlertsTableSchema.pb").DeviceChangeAlertsTableSchemaProtoSpec,t).readByteArrayView()}}function d(e){throw r("FBLogger")("messenger_web").mustfixThrow("unexpected table for encryption")}function m(e,t){var n=null;if(Object.prototype.hasOwnProperty.call(u,t))n=u[t](e);else throw r("FBLogger")("messenger_web").mustfixThrow("not a valid table name");return n}function p(t){var n=t.ack,r=t.altIndex,a=t.collapsibleId,i=t.externalId,l=t.messageDeleteTs,s=t.messageExpirationTs,u=t.msgId,c=t.pollStanzaId,d=t.protocolMsgId,m=t.quoteExpirationTs,p=t.quoteExternalId,_=t.revokedExternalId,f=t.rowId,g=t.serverTs,h=t.sortOrderMs,y=t.threadJid,C=t.unsendMsgContentDeleteTs,b=babelHelpers.objectWithoutPropertiesLoose(t,e),v=b,S;if(v.quote==null)S=v.quote;else{var R,L={author:v.quote.content.author,expirationTs:v.quote.content.expirationTs,externalId:(R=v.quote)==null?void 0:R.content.externalId,mediaId:v.quote.content.mediaId,msgContent:v.quote.content.msgContent,msgId:v.quote.content.msgId,plaintextHash:v.quote.content.plaintextHash,sourceId:v.quote.content.sourceId,specialTextSize:v.quote.content.specialTextSize,ts:v.quote.content.ts,type:v.quote.content.type,xmaMessageType:v.quote.content.xmaMessageType},E={content:L,remoteJid:v.quote.remoteJid};S=E}var k=v.msgContent;v.type===o("MAWMsgType").MSG_TYPE.FUTUREPROOF&&(k={protobuf:v.msgContent.protobuf,subtype:v.msgContent.subtype});var I=v.ravenEphemeralType,T=v.ravenEphemeralMediaState,D=I!=null?I:null,x=T!=null?T:null,$={applicationErrorCode:v.applicationErrorCode,author:v.author,editCount:v.editCount,ephemeralCounterStarted:v.ephemeralCounterStarted,ephemeralMsgDisappeared:v.ephemeralMsgDisappeared,ephemeralSetting:v.ephemeralSetting,forwardingScore:v.forwardingScore,groupId:v.groupId,groupIndex:v.groupIndex,groupSize:v.groupSize,hdType:v.hdType,isCollapsed:v.isCollapsed,isExpiredXmaMsg:v.isExpiredXmaMsg,isForwarded:v.isForwarded,mediaId:v.mediaId,msgContent:k,originalTs:v.originalTs,quote:S,ravenEphemeralMediaState:x,ravenEphemeralType:D,receiverFetchId:v.receiverFetchId,reportingMeta:v.reportingMeta,resendCount:v.resendCount,source:v.source,specialTextSize:v.specialTextSize,ts:v.ts,type:v.type,xmaMessageType:v.xmaMessageType};return{encodedFields:$,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMessagesTableSchema.pb").MessagesTableSchemaProtoSpec,$).readByteArrayView()}}function _(e){var t=e.author,n=e.chat,r=e.externalId,a=e.rowId,i=babelHelpers.objectWithoutPropertiesLoose(e,s),l={reason:String(i.reason)};return{encodedFields:l,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloDeletedMessagesTableSchema.pb").DeletedMessagesTableSchemaProtoSpec,l).readByteArrayView()}}function f(e){var t;if(e.quote==null)t=e.quote;else{var n,r={author:e.quote.content.author,expirationTs:e.quote.content.expirationTs,externalId:(n=e.quote)==null?void 0:n.content.externalId,mediaId:e.quote.content.mediaId,msgContent:e.quote.content.msgContent,msgId:e.quote.content.msgId,plaintextHash:e.quote.content.plaintextHash,sourceId:e.quote.content.sourceId,ts:e.quote.content.ts,type:e.quote.content.type,xmaMessageType:e.quote.content.xmaMessageType},a={content:r,remoteJid:e.quote.remoteJid};t=a}var i={ack:e.ack,author:e.author,ephemeralSetting:e.ephemeralSetting,groupName:e.groupName,invitedParticipantUserJid:e.invitedParticipantUserJid,mediaId:e.mediaId,msgContent:e.msgContent,quote:t,reportingMeta:e.reportingMeta,resendCount:e.resendCount,ts:e.ts,type:e.type,xmaMessageType:e.xmaMessageType};return{encodedFields:i,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloUnrenderedMessagesTableSchema.pb").UnrenderedMessagesTableSchemaProtoSpec,i).readByteArrayView()}}function g(e){var t={creationTs:e.creationTs,creator:e.creator,inviter:e.inviter,memberAddMode:e.memberAddMode,msgExpiration:e.msgExpiration,name:e.name,nameOwner:e.nameOwner,nameTs:e.nameTs,participantVersion:e.participantVersion};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloGroupInfoTableSchema.pb").GroupInfoSchemaProtoSpec,t).readByteArrayView()}}function h(e){return e==null?e:Array.from(e,function(e){var t=e[0],n=e[1];return{baseKey:n.baseKey,deviceJid:t,serializedPubKey:n.pubKey}})}function y(e){return e==null?null:Array.from(e,function(e){var t=e[0],n=e[1];return{count:n,deviceJid:t}})}function C(e){var t=Array.from(e.recipientDevices),n={permittedIdentitiesPerDevice:h(e.permittedIdentitiesPerDevice),recipientDevices:t,retryCountsPerDevice:y(e.retryCountsPerDevice)};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").ReceiptsTableSchemaProtoSpec,n).readByteArrayView()}}function b(e){var t={author:e.author,deliveryReceipts:e.deliveryReceipts,externalId:e.externalId,readReceipts:e.readReceipts,thread:e.thread};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReceiptTablesSchema.pb").PendingReceiptsTableSchemaProtoSpec,t).readByteArrayView()}}function v(e){var t={archived:e.archived,cannotReplyReason:e.cannotReplyReason,didInsertDualThreadCutoverAdminMsg:e.didInsertDualThreadCutoverAdminMsg,folder:e.folder,isMigratedLocally:e.isMigratedLocally,lastReadMsg:e.lastReadMsg,lastReadMsgReceiptSent:e.lastReadMsgReceiptSent,newestMsgTs:e.newestMsgTs,oldestMsg:e.oldestMsg,optimisticThreadKey:e.optimisticThreadKey,snippetMsg:e.snippetMsg,snippetMsgTs:e.snippetMsgTs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloThreadsTableSchema.pb").ThreadsTableSchemaProtoSpec,t).readByteArrayView()}}function S(e){var t={addressable:e.addressable,deliveredWatermarkTs:e.deliveredWatermarkTs,lastReadActionTs:e.lastReadActionTs,lastReadWatermarkTs:e.lastReadWatermarkTs,type:e.type};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloParticipantsTableSchema.pb").ParticipantsTableSchemaProtoSpec,t).readByteArrayView()}}function R(e){var t={caption:e.caption,inviteCode:e.inviteCode,inviteExpirationTs:e.inviteExpirationTs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloGroupInvitesTableSchema.pb").GroupInvitesTableSchemaProtoSpec,t).readByteArrayView()}}function L(e){var t={scheduledTime:e.scheduledTime};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloTasksTableSchema.pb").TasksTableSchemaProtoSpec,t).readByteArrayView()}}function E(e){var t=Array.from(e.hasSenderKey),n={hasSenderKey:t,rotateSenderKey:e.rotateSenderKey,senderKeyId:e.senderKeyId,senderKeyTs:e.senderKeyTs};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloPersonalSenderKeyStatusTableSchema.pb").PersonalSenderKeyStatusTableSchemaProtoSpec,n).readByteArrayView()}}function k(e){var t;switch(e.contents.type){case"meta_sync":{var n=[];for(var a of e.contents.actions)a.chatAction?n.push({chatAction:a.chatAction}):a.messageAction&&n.push({messageAction:a.messageAction});t={actions:n,type:"meta_sync"};break}case"backups_secrets":{t={encryptedBackupsSecrets:e.contents.encryptedBackupsSecrets,type:"backups_secrets"};break}case"sync_key_share":{var i;t={syncKeyShare:{keys:e.contents.syncKeyShare.keys,orphanKeys:(i=e.contents.syncKeyShare)==null||(i=i.orphanKeys)==null?void 0:i.map(o("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_share"};break}case"sync_key_request":{t={syncKeyRequest:{keyIds:e.contents.syncKeyRequest.keyIds.map(o("WASyncdKeyTypes").fromSyncKeyId)},type:"sync_key_request"};break}default:throw e.contents.type,r("FBLogger")("messenger_web").mustfixThrow("Unknown appdata type: "+e.contents.type)}var l={ack:e.ack,contents:t,permittedIdentitiesPerDevice:h(e.permittedIdentitiesPerDevice),recipientDevices:Array.from(e.recipientDevices),sendPartial:e.sendPartial,ts:e.ts};return{encodedFields:l,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloAppDataTableSchema.pb").AppDataTableSchemaProtoSpec,l).readByteArrayView()}}function I(e){var t={value:e.value};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloAppMetaTableSchema.pb").AppMetaTableSchemaProtoSpec,t).readByteArrayView()}}function T(e){var t={blobData:e.blobData,mimetype:e.mimetype,plaintextHash:e.plaintextHash};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").ChunkTableSchemaProtoSpec,t).readByteArrayView()}}function D(e){var t={fbid:e.fbid};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaBackupSchemaProtoSpec,t).readByteArrayView()}}function x(e){var t=Array.from(e.mediaEntries,function(e){var t=e[0],n=e[1];return{mediaEntryData:n,msgId:t}}),n={accessibilitySummaryText:e.accessibilitySummaryText,isVideoGif:e.isVideoGif,mediaEntries:t,mediaType:e.mediaType,plaintextHash:e.plaintextHash,size:e.size,ts:e.ts,validatedAudioInfo:e.validatedAudioInfo,validatedDocumentFileInfo:e.validatedDocumentFileInfo,validatedImageInfo:e.validatedImageInfo,validatedResult:e.validatedResult,validatedVideoInfo:e.validatedVideoInfo};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloMediaTablesSchema.pb").MediaTableSchemaProtoSpec,n).readByteArrayView()}}function $(e){var t={ack:e.ack,author:e.author,groupingKey:e.groupingKey,reaction:e.reaction,reactToAuthor:e.reactToAuthor,senderTimestampMs:e.senderTimestampMs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReactionsTableSchema.pb").ReactionsTableSchemaProtoSpec,t).readByteArrayView()}}function P(e){var t={isThread:e.isThread,numMessages:e.numMessages,numMessagesRestored:e.numMessagesRestored,numThreadsRestored:e.numThreadsRestored,oldestTs:e.oldestTs,qplFlowDescriptor:e.qplFlowDescriptor,qplInstanceKeyE2E:e.qplInstanceKeyE2E,qplInstanceKeyForThread:e.qplInstanceKeyForThread,threadId:e.threadId};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloDyiBatchTableSchema.pb").DyiBatchTableSchemaProtoSpec,t).readByteArrayView()}}function N(e){var t={creationTime:e.creationTime,maxMsgExternalId:e.maxMsgExternalId,maxMsgSortOrderMs:e.maxMsgSortOrderMs,minMsgExternalId:e.minMsgExternalId,minMsgSortOrderMs:e.minMsgSortOrderMs};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloEBMsgRangesTableSchema.pb").EBMsgRangesTableSchemaProtoSpec,t).readByteArrayView()}}function M(e){var t=e.ctas==null?[]:e.ctas.map(function(e){return o("MAWXMACTAUtil").toMAWCTAEncode(e)}),n={author:e.author,ctas:t,defaultCTA:e.defaultCTA==null?e.defaultCTA:o("MAWXMACTAUtil").toMAWCTAEncode(e.defaultCTA),defaultPreviewMediaPlaintextHash:e.defaultPreviewMediaPlaintextHash,faviconPlaintextHash:e.faviconPlaintextHash,headerMediaPlaintextHash:e.headerMediaPlaintextHash,headerTitle:e.headerTitle,isTombstoned:e.isTombstoned,maxSubtitleNumOfLines:e.maxSubtitleNumOfLines,maxTitleNumOfLines:e.maxTitleNumOfLines,msgId:e.msgId,overlayDescription:e.overlayDescription,overlayIconGlyph:e.overlayIconGlyph,overlayTitle:e.overlayTitle,previewMediaIds:e.previewMediaIds,subtitleText:e.subtitleText,targetId:e.targetId,targetType:e.targetType,targetUsername:e.targetUsername,threadJid:e.threadJid,titleText:e.titleText,xmaLayoutType:e.xmaLayoutType};return{encodedFields:n,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloXMATableSchema.pb").XMATableSchemaProtoSpec,n).readByteArrayView()}}function w(e){var t={author:e.author,editExternalId:e.editExternalId,editTs:e.editTs,msgContent:e.msgContent,sendStatus:e.sendStatus,specialTextSize:e.specialTextSize};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloEditMsgHistoryTableSchema.pb").EditMsgHistoryTableSchemaProtoSpec,t).readByteArrayView()}}function A(e){var t={accessibilitySummaryText:e.accessibilitySummaryText,mimetype:e.mimetype,previewHeight:e.previewHeight,previewUrl:e.previewUrl,previewUrlExpirationTimestampMs:e.previewUrlExpirationTimestampMs,previewWidth:e.previewWidth,type:e.type};return{encodedFields:t,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloReceiverFetchInfoTableSchema.pb").ReceiverFetchInfoTableSchemaProtoSpec,t).readByteArrayView()}}function F(e){var t=Array.from(e.pollOptions,function(e){var t=e[0],n=e[1];return{pollOption:{optionText:n.optionText,voteAuthors:Array.from(n.voteAuthors)},pollOptionHash:t}}),n=Array.from(e.latestSenderTimestampsMs,function(e){var t=e[0],n=e[1];return{author:t,latestSenderTimestampMs:n}}),r={encKey:e.encKey,latestSenderTimestampsMs:n,pollAuthor:e.pollAuthor,pollOptions:t,pollParticipantCount:e.pollParticipantCount,pollState:e.pollState,selectableOptionsCount:e.selectableOptionsCount,title:e.title};return{encodedFields:r,proto:o("encodeProtobuf").encodeProtobuf(o("MAWArmadilloPollTableSchema.pb").PollTableSchemaProtoSpec,r).readByteArrayView()}}l.encodeDbObj=m,l.encodeDbPollForEncryption=F}),98);
__d("MAWMpsMigrationRunningState",[],(function(t,n,r,o,a,i){"use strict";var e=!1;function l(){return e}function s(t){e=t}i.isMawMpsMigrationRunning=l,i.setIsMawMpsMigrationRunning=s}),66);
__d("MAWDbObjEncryption",["ExecutionEnvironment","FBLogger","MAWBridge","MAWCryptoConsts","MAWDbEncryptObjContent","MAWDbObjDecode","MAWDbObjEncode","MAWDexieTable","MAWIndexedDb","MAWKeychainCrypto","MAWKeychainNaClCrypto","MAWKeychainUtil","MAWMpsMigrationRunningState","MAWQplProxy","MAWUnrecoverableDbErrors","MWEARKeychainV3","MWEARKeychainV3Errors","ODS","WABase64","WATimeUtils","getErrorSafe","gkx","isEncryptionAtRestEnabled","justknobx","pageID","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="_encryptedContent",c=new Set(["threads","messages","participants"]);function d(e,t,n){if(!(r("isEncryptionAtRestEnabled")()||r("gkx")("23910")===!0)||!o("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(t))return e;var a=o("MAWQplProxy").startQplUserFlow(r("qpl")._(25300256,"115"),{bool:{isWorker:(s||(s=r("ExecutionEnvironment"))).isInWorker,useMawEar:o("MWEARKeychainV3").isKeychainSettled("maw_ear")},string:{pageID:r("pageID"),tableName:t}});try{var i=babelHelpers.extends({},e),l=n(o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear"),d=l.keys,m=d[0],p=l.version,_=l.randomisedVersion;o("MWEARKeychainV3").isKeychainSettled("maw_ear")===!1&&r("FBLogger")("messenger_web").mustfix("[EAR] Encrypting %s data with global ear. Transactor: %s",t,o("MAWDexieTable").getDexiePSDItem("transactorName")),a.addAnnotations({int:{keyVersion:p,randomisedVersion:_}});var f=o("MAWKeychainUtil").makeAAD(p,o("MAWCryptoConsts").CIPHER_ID),g=o("MAWDbObjEncode").encodeDbObj(e,t),h=g.encodedFields,y=g.proto;Object.keys(h).forEach(function(t){Object.prototype.hasOwnProperty.call(e,t)&&delete i[t]});var C=o("MAWDbEncryptObjContent").encryptContent(m,y,f);return i[u]=C,c.has(t)&&(i.updatedAt_S456130=Date.now(),i.randomisedVersion_S456130=_,i.encryptedWith_S456130=o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear",i.keyVersion_S456130=p),a==null||a.endSuccess(),i}catch(e){var b=r("getErrorSafe")(e);throw a==null||a.endFail("ear_encrypt_fail"),r("FBLogger")("messenger_web").catching(b).mustfixThrow("[%s] %s - Encrypted dexie was unable to encrypt an entity for table %s",b.name,b.message,t)}}function m(t,n,a){if(!o("MAWIndexedDb").TABLES_TO_ENCRYPT.includes(n)||!Object.prototype.hasOwnProperty.call(t,u))return t;var i=(s||(s=r("ExecutionEnvironment"))).isInMainThread&&r("justknobx")._("3378")?null:o("MAWQplProxy").startQplUserFlow(r("qpl")._(25313004,"118"));i==null||i.addAnnotations({bool:{isWorker:(s||(s=r("ExecutionEnvironment"))).isInWorker,useMawEar:o("MWEARKeychainV3").isKeychainSettled("maw_ear")},string:{pageID:r("pageID"),tableName:n}});var l;try{var d=t[u],m=babelHelpers.extends({},t);(e||(e=o("ODS"))).bumpEntityKey(3185,"maw_db_ear_decryption","encrypted_content_type."+n+"."+(d instanceof ArrayBuffer?"ArrayBuffer":"string"));var f=d instanceof ArrayBuffer?d:o("WABase64").decodeB64(d),g=o("MAWKeychainCrypto").getKeyVersionFromCipherDataString(f),h=g.aadLengthInBytes,y=g.keyVersion,C=a(o("MWEARKeychainV3").isKeychainSettled("maw_ear")?"maw_ear":"global_ear",y);l=C;var b=C.dbEntry,v=C.keys,S=C.randomisedVersion;i==null||i.addAnnotations({int:{contentVersion:t==null?void 0:t.keyVersion_S456130,keyVersion:y,randomisedVersion:S},string:{encryptedWith:t==null?void 0:t.encryptedWith_S456130,randomisedVersionEncryption:t==null?void 0:t.randomisedVersion_S456130}});var R={},L,E;for(var k of v)try{L=o("MAWKeychainNaClCrypto").decryptArrayBuffer(k,f,y,b.formatVersion,h);break}catch(e){E=e}if(L==null)throw r("getErrorSafe")(E);var I=o("MAWDbObjDecode").decodeDbObj(L,n);Object.keys(I).forEach(function(e){R[e]=I[e]}),delete m[u];var T=babelHelpers.extends({},m,R);return i==null||i.endSuccess(),T}catch(e){var D,x,$;if(c.has(n)){var P;i==null||i.addAnnotations({int:{updatedAt:(P=t==null?void 0:t.updatedAt_S456130)!=null?P:-1}})}if((e instanceof o("MAWKeychainNaClCrypto").EARDecryptionError||e instanceof o("MWEARKeychainV3Errors").EARKeychainNotFoundError)&&o("MAWMpsMigrationRunningState").isMawMpsMigrationRunning()){i==null||i.addAnnotations({bool:{earDecryptionErrorSuppressed:!0}}),r("FBLogger")("messenger_web").mustfix("[EAR] Ignoring EAR decryption error during MAW->MPS migration. Table: %s.",n);return}(s||(s=r("ExecutionEnvironment"))).isInWorker&&(e instanceof o("MAWKeychainNaClCrypto").EARDecryptionError||e instanceof o("MWEARKeychainV3Errors").EARKeychainNotFoundError)&&(r("FBLogger")("messenger_web").mustfix("[EAR] Encountered EAR Error - submitting unrecoverableDbError. Table: %s.",n),i==null||i.addAnnotations({bool:{unrecoverableDbError:!0}}),o("MAWBridge").getBridge().fireAndForget("event","unrecoverableDbError",{error:new(o("MAWUnrecoverableDbErrors")).EarRuntimeError}));var N=r("getErrorSafe")(e);throw i==null||i.markError("ear_decrypt_exception",null,N),i==null||i.endFail("ear_decrypt_fail"),r("FBLogger")("messenger_web").catching(N).mustfixThrow("[%s] %s - (v2) Encrypted dexie was unable to decrypt an entity for table %s. UpdatedAt: %s. KeyStatus: %s. Signature matches: %s. Key source: %s. Using MAW EAR: %s. Worker: %s. Encrypted With: %s. PageID: %s. Source: %s",N.name,N.message,n,p(t==null?void 0:t.updatedAt_S456130),_(t,l),(t==null?void 0:t.randomisedVersion_S456130)!=null&&((D=l)==null?void 0:D.randomisedVersion)!=null?t.randomisedVersion_S456130===l.randomisedVersion:null,(x=($=l)==null?void 0:$.dbEntry.source)!=null?x:"-1",o("MWEARKeychainV3").isKeychainSettled("maw_ear"),(s||(s=r("ExecutionEnvironment"))).isInWorker,t==null?void 0:t.encryptedWith_S456130,r("pageID"),o("MAWDexieTable").getDexiePSDItem("transactorName"))}}function p(e){if(e==null)return"unknown";var t=Date.now()-e,n=Math.floor(t/(1e3*60*60*24));return n<1?"0-1 days":n<7?"1-7 days":n<14?"7-14 days":n<30?"14-30 days":"30+ days"}function _(e,t){if((e==null?void 0:e.updatedAt_S456130)==null||t==null)return null;var n=o("WATimeUtils").castToUnixTime(e.updatedAt_S456130/1e3),r=t.dbEntry.expiration-o("MAWCryptoConsts").ENC_KEY_TTL;return n===r?"same":n>r?"key_older":"key_newer"}l.ENCRYPTED_COLUMN_NAME=u,l.encryptDbObj=d,l.decryptDbObj=m}),98);
__d("MAWHMACKey",["MAWCryptoConsts","MAWDbMsgTypeVersionTxns","MAWIndexedDb","MAWKeychainUtil","MAWSubtleCrypto","MAWTransactionMode","WABase64","tweetnacl-auth"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MAWKeychainUtil").getBufferWithRandomValuesFromLength(o("MAWCryptoConsts").HKDF_SEED_LENGTH_IN_BYTES);return c(e).then(function(e){return o("MAWSubtleCrypto").MAWSubtleCrypto.exportKey("raw",e)})}function s(e,t){var n=new TextEncoder().encode(e),a=new Uint8Array(t),i=r("tweetnacl-auth")(n,a);return o("WABase64").encodeB64UrlSafe(i)}function u(){return e().then(function(e){return o("MAWIndexedDb").makeMsgrTransactor({appMeta:o("MAWTransactionMode").READWRITE},"generateAndInsertHMACKey",function(t){return function(){return o("MAWDbMsgTypeVersionTxns").getHMACKey(t).then(function(n){return n!=null?n:o("MAWDbMsgTypeVersionTxns").addHMACKey(t,e).then(function(){return e})})}})()})}function c(e){return o("MAWSubtleCrypto").MAWSubtleCrypto.importKey("raw",e,{hash:"SHA-256",name:"HMAC"},!0,["sign"])}l.genHMACKey=e,l.hmacTweetNaCl=s,l.generateAndInsertHMACKey=u}),98);
__d("WAMsgIdToMessageKey",["WAGlobals","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.author,n=e.externalId,r=e.chat,a=o("WAJids").isAuthorMe(t),i=o("WAJids").interpretAsGroupJid(r),l=a?o("WAGlobals").getMyUserJid():t,s=r,u=i!=null?l:void 0;return{fromMe:a,id:n,remoteJid:s,participant:u}}l.msgIdToMessageKey=e}),98);
__d("WAAsConsumerApplication",["WAAssertUnreachable","WAConsumerApplication.pb","WAMsgIdToMessageKey","WAMsgType","err"],(function(t,n,r,o,a,i,l){"use strict";var e="image/jpeg",s="video/mp4",u="audio/wav",c="image/gif",d="image/webp";function m(e){switch(e.type){case o("WAMsgType").MSG_TYPE.TEXT:return p(e);case o("WAMsgType").MSG_TYPE.REACTION:return _(e);case o("WAMsgType").MSG_TYPE.REVOKED:return f(e);default:return r("WAAssertUnreachable")(e.type)}}function p(e){var t={payload:{content:{messageText:{mentionedJid:[],text:e.msgContent.content}}}};if(e.specialTextSize!=null){var n=e.specialTextSize===1?o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.SMALL:e.specialTextSize===2?o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.MEDIUM:o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.LARGE;t.metadata={specialTextSize:n}}return t}function _(e){if(e.reactToMsgId==null)throw r("err")("cannot send reaction that reacts to no message");var t=o("WAMsgIdToMessageKey").msgIdToMessageKey(e.reactToMsgId),n={groupingKey:e.groupingKey==null?void 0:e.groupingKey,key:t,senderTimestampMs:e.ts,text:e.reaction==null?void 0:e.reaction};return{payload:{content:{reactionMessage:n}}}}function f(e){var t={remoteJid:e.id.chat,fromMe:!0,id:e.revokedExternalId};return{payload:{applicationData:{revoke:{key:t}}}}}l.IMAGE_MIME_TYPE=e,l.VIDEO_MIME_TYPE=s,l.AUDIO_MIME_TYPE=u,l.GIF_MIME_TYPE=c,l.STICKER_MIME_TYPE=d,l.asConsumerApplication=m,l.encodeTextMessage=p,l.encodeReactionMessage=_}),98);
__d("MAWMediaUtils",["FBLogger","MAWDbMedia","MAWDexieTable","MAWHMACKey","MAWImageUtils","MAWMsgType","WAAsConsumerApplication","WABlobToArrayBuffer","WAGlobals","WAHashUtils","WAMsgType","WATimeUtils","getErrorSafe","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){switch(t===void 0&&(t="media"),e){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:return t==="xma-media"?"xma-image":"image";case o("MAWDbMedia").MEDIA_TYPE.VIDEO:return"video";case o("MAWDbMedia").MEDIA_TYPE.PTT:return"ptt";case o("MAWDbMedia").MEDIA_TYPE.GIF:return"gif";case o("MAWDbMedia").MEDIA_TYPE.STICKER:return"sticker";case o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return"document";default:throw r("FBLogger")("messenger_web").mustfixThrow("get a wrong media file with type %s",e)}}function s(e){try{return o("WABlobToArrayBuffer").blobToArrayBuffer(e).then(u)}catch(e){var t=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").mustfixThrow("Got %s when convert the blob to Uint8Array",t.message)}}function u(e){return self.crypto.subtle.digest("SHA-256",e).then(function(e){return new Uint8Array(e)})}async function c(e){var t=await s(e),n=o("WAHashUtils").toPlaintextHash(t),r=m(n);return[n,r]}async function d(e){var t=await u(e),n=o("WAHashUtils").toPlaintextHash(t);return n}function m(e){var t=o("WAGlobals").getHMACKey();return o("WAHashUtils").toHashedPlaintextHash(o("MAWHMACKey").hmacTweetNaCl(e,t))}function p(e){if(e==null)return null;var t="preview-"+o("WATimeUtils").unixTime().toString()+".jpeg";return _(e,t,"image/jpeg")}function _(e,t,n){return new File([new Blob([new Uint8Array(e)],{type:n})],t,{type:n})}function f(e,t,n){var r=function(){return n!=null?o("MAWDexieTable").dexieResolve(n.filter(function(e){return e.type!==o("WAMsgType").REVOKED&&t.msgIds.includes(e.msgId)})):e.messages.where("msgId").anyOf(t.msgIds).filter(function(e){return e.type!==o("WAMsgType").REVOKED}).toArray()};return r().then(function(e){return h(t,e)})}function g(e){return e.reduce(function(e,t){var n=t.hdType;return n!=null&&(e[t.msgId]=n),e},{})}function h(e,t){var n=t.filter(function(t){return t.type!==o("WAMsgType").REVOKED&&e.msgIds.includes(t.msgId)}),a=n.map(function(e){return e.msgId}),i=babelHelpers.extends({},e,{msgIds:a}),l=n.reduce(function(e,t){return e[t.msgId]=o("WATimeUtils").castToMillisTime(t.sortOrderMs!=null?t.sortOrderMs:t.ts*1e3),e},{});if(i=babelHelpers.extends({},i,{messagesSortOrderMs:l}),n.every(function(e){return e.type===o("WAMsgType").STICKER})){var s=o("MAWImageUtils").boundHeightWidth(i.previewHeight,i.previewWidth,o("MAWImageUtils").STICKER_THUMBNAIL_MAX_SIZE),u=s.height,c=s.width;i=babelHelpers.extends({},i,{mediaType:o("MAWDbMedia").MEDIA_TYPE.STICKER,previewHeight:u,previewHeightLarge:u,previewWidth:c,previewWidthLarge:c})}var d=new Set(n.map(function(e){return e.type}));return d.forEach(function(t){t!==o("MAWMsgType").MSG_TYPE.RAVEN&&e.mediaType!==y(t)&&r("FBLogger")("messenger_web").mustfix("Message and media type mismatch: message with type %s is associated with media with type %s",t,e.mediaType)}),i}function y(e){switch(e){case o("MAWMsgType").MSG_TYPE.IMAGE:return o("MAWDbMedia").MEDIA_TYPE.IMAGE;case o("MAWMsgType").MSG_TYPE.VIDEO:return o("MAWDbMedia").MEDIA_TYPE.VIDEO;case o("MAWMsgType").MSG_TYPE.PTT:return o("MAWDbMedia").MEDIA_TYPE.PTT;case o("MAWMsgType").MSG_TYPE.GIF:return o("MAWDbMedia").MEDIA_TYPE.GIF;case o("MAWMsgType").MSG_TYPE.STICKER:return o("MAWDbMedia").MEDIA_TYPE.STICKER;case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE}}function C(e){var t,n,a=((t=e.ancillary)==null?void 0:t.gifPlayback)===!0,i=((n=e.integral)==null||(n=n.transport)==null||(n=n.ancillary)==null?void 0:n.mimetype)===o("WAAsConsumerApplication").GIF_MIME_TYPE,l=!r("gkx")("5398");return a&&(l||i)}l.getServerMediaTypeFromMediaType=e,l.hashBlob=s,l.hashArrayBuffer=u,l.genBlobHashes=c,l.genHashFromArrayBuffer=d,l.genHMACPlaintextHash=m,l.convertJpegThumbnailArrayBufferToFile=p,l.getBridgeMediaAnnotatedForDisplay=f,l.createHdTypesForBridgeMedia=g,l.annotateBridgeMediaForDisplay=h,l.getMediaTypeFromMsgType=y,l.isTransportLegacyGif=C}),98);
__d("mergeMaps",[],(function(t,n,r,o,a,i){"use strict";function e(){for(var e=new Map,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var o=0;o<n.length;o++)for(var a=n[o].keys(),i=void 0;!(i=a.next()).done;)e.set(i.value,n[o].get(i.value));return e}i.default=e}),66);
__d("MpsPreprocessor",["Promise","getSafeQplErrorMessage","mergeMaps"],(function(t,n,r,o,a,i,l){"use strict";var e=["errors"],s;function u(t,a){return function(r){r.ctx.messageToQpl.all().addPoint(a+"_start");var o=r.errors,l=babelHelpers.objectWithoutPropertiesLoose(r,e),u=t(l);return u instanceof(s||(s=n("Promise")))?u.then(function(e){return i(e,o!=null?o:new Map)}):i(u,o!=null?o:new Map)};function i(e,t){return e.ctx.messageToQpl.all().addPoint(a+"_end"),e.errors.entries().forEach(function(t){var n=t[0],r=t[1];e.ctx.messageToQpl.endFail(n,a.toLowerCase()+"-error",o("getSafeQplErrorMessage").getSafeQPLErrorMessage(r))}),babelHelpers.extends({},e,{errors:r("mergeMaps")(t,e.errors)})}}l.preprocessor=u}),98);
__d("MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor",["MAWDbMsgTypeVersionTxns","MAWProtobufDeserializers","MpsPreprocessor","WAGlobals"],(function(t,n,r,o,a,i,l){"use strict";var e=null;function s(t){e=t}var u=o("MpsPreprocessor").preprocessor(async function(t){var n=t.ctx,r=t.payloadList,a=new Map,i=[];for(var l of r){var s,u,c=l.directive,d=l.insertionSource,m=l.message,p=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(m.payload),_=(s=p.payload().proto)==null||(s=s.event)==null?void 0:s.deviceChange;if(_==null){i.push({directive:c,insertionSource:d,message:m});continue}((u=p.proto.metadata)==null?void 0:u.senderId)!==o("WAGlobals").getMyUserJid()&&(e===null&&(e=await o("MAWDbMsgTypeVersionTxns").getSecuritySettingForContactTxn()),e===!0&&i.push({directive:c,insertionSource:d,message:m}))}return{ctx:n,errors:a,payloadList:i}},"maybe_drop_security_alerts");l.setCachedShouldSaveSecurityAlert=s,l.MawMpsDropDeviceNotificationsForTurnedOffSecurityAlertsPreprocessor=u}),98);
__d("MAWJobsIndexedDb",["FBLogger","MAWCurrentUser","MAWErrorObject","MAWIndexedDbMetadata","MAWQplProxy","MAWTransactionMode","Promise","WAExceededStorageQuota","WALogger","WAWorkerGlobalScope","emptyFunction","promiseDone","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=null,c=null,d="jobs";function m(){return r("qex")._("940")}function p(){if(u==null)throw r("FBLogger")("messenger_web").mustfixThrow("JobDB IndexDB should've been initialized");return u}function _(){if(c==null)throw r("FBLogger")("messenger_web").mustfixThrow("JobDB IndexDB should've been initialized");return c.then(function(){return p()})}function f(){return u!=null}var g=[function(e){var t=e.target.result,n=t.createObjectStore(d,{autoIncrement:!0,keyPath:"jobId"});n.createIndex("uniqKey","uniqKey")},r("emptyFunction"),r("emptyFunction")];function h(e){return c=null,u=null,y(e).then(function(){return u.version})}function y(t){var a;if(c!=null)return c;if(u!=null)return(s||(s=n("Promise"))).resolve();var i=o("MAWCurrentUser").getID(),l=o("MAWIndexedDbMetadata").jobsDbName(i),d=(a=t!=null?t:m())!=null?a:g.length,p=r("qpl")._(25310776,"6155");return c=new(s||(s=n("Promise")))(function(t,n){var r=indexedDB.open(l,d);r.onupgradeneeded=function(e){for(var t=0;t<g.length;t++){var n=g[t],r=t+1;C(e,r)&&n(e)}},r.onsuccess=function(n){var r=n.target.result;r.onversionchange=function(){var t;o("MAWQplProxy").sendQplPointThroughBridge(p,"database_jobs_db_versionchange"),o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[JobsDb initialization] upgradeneeded is triggered in another worker. This should not happen."]))),r.close(),(t=o("WAWorkerGlobalScope").workerGlobalScope.location)==null||t.reload==null||t.reload()},u=r,o("MAWQplProxy").sendQplPointThroughBridge(p,"database_jobs_db_ready"),t()},r.onerror=function(){o("MAWQplProxy").sendQplPointThroughBridge(p,"database_jobs_db_failed"),n(r.error)}}),c}function C(e,t){var n=e.newVersion,r=e.oldVersion;return r<t&&n>=t}function b(e){return e===o("MAWTransactionMode").READWRITE?"readwrite":"readonly"}function v(e,t,n,a){var i=b(t);return function(t){return function(){for(var l=arguments.length,s=new Array(l),d=0;d<l;d++)s[d]=arguments[d];var m=a!=null?o("MAWQplProxy").startQplUserFlow(a):null,p=function(l){return _().then(function(n){var r=function(r){var t=n.transaction(e,r!=null?b(r):i,{durability:"relaxed"});return o("WAExceededStorageQuota").listenToQuotaExceededError(t),t.objectStore(e)};return t.apply(void 0,[r].concat(s))}).then(function(e){return m==null||m.endSuccess(),e}).catch(function(t){m==null||m.endFail("job_transaction_fail");var a=o("MAWErrorObject").getErrorObject(t);if((a==null?void 0:a.name)==="InvalidStateError"&&l===1)return c=null,u=null,r("promiseDone")(y()),p(l-1);throw a instanceof Error?r("FBLogger")("maw_db").catching(a).mustfixThrow("%s:%s - Error performing transaction in jobDB transactor v2",n,e):r("FBLogger")("maw_db").mustfixThrow("%s:%s - Error performing transaction in jobDB transactor v2",n,e)})};return p(1)}}}l.getJobsDbVersion=m,l.getJobDB=p,l.isJobDBInitted=f,l.dbMigrations=g,l.makeJobsDbIgnoringPreviousCreations=h,l.makeJobsDb=y,l.makeJobsTransactor=v}),98);
__d("MAWLoadDbMigrationVersion",["ExecutionEnvironment","MAWBridge","MAWCurrentUser","MAWDBMigrationUtils","MAWDbAppMeta","MAWDbObjEncryption","MAWIndexedDbMetadata","MAWUnrecoverableDbErrors","MWFBLogger","Promise","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=o("MWFBLogger").MWLogger().tags(["db","MAWLoadDbMigrationVersion"]);function h(t){var a=o("MAWCurrentUser").getID(),i=o("MAWIndexedDbMetadata").dbName(a);return new(f||(f=n("Promise")))(function(n){if(!indexedDB){n();return}var a=indexedDB.open(i);a.onupgradeneeded=function(t){t.target.transaction.abort();var r=t.target.result;g.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," onupgradeneeded - closing db"])),i),r==null||r.close(),n()},a.onsuccess=function(e){var a=e.target.result;if(a==null){n();return}try{var i=a.transaction("appMeta","readonly");i.onerror=function(e){var t;g.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Transaction error: ",""])),(t=e.target.error)==null?void 0:t.message),a.close(),n()};var l=i.objectStore("appMeta"),m=l.get(o("MAWDbAppMeta").AppMetaKeysEnum.dbMigrationVersion);m.onerror=function(e){var t;g.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Request error: ",""])),(t=e.target.error)==null?void 0:t.message),a.close(),n()},m.onsuccess=function(e){a.close();var i=e.target.result;if(i!=null)try{var l=o("MAWDbObjEncryption").decryptDbObj(babelHelpers.extends({},i),"appMeta",t),s=l.value.dbMigrationVersion;s!=null&&(o("MAWDBMigrationUtils").mawDbMigrationVersion.version=s)}catch(e){var u=r("getErrorSafe")(e);g.catching(u).MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Failed to decrypt appMeta row"]))),(_||(_=r("ExecutionEnvironment"))).isInWorker&&o("MAWBridge").getBridge().fireAndForget("event","unrecoverableDbError",{error:new(o("MAWUnrecoverableDbErrors")).EarRuntimeError})}n()}}catch(e){var p=r("getErrorSafe")(e);g.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Error accessing appMeta: ",""])),p.message),a.close(),n()}},a.onerror=function(e){var t;g.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," error ",""])),i,e==null||(t=e.target)==null||(t=t.error)==null?void 0:t.message),n()},a.onblocked=function(e){var t=e.target.result;g.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," blocked"])),i),t==null||t.close()}})}l.default=h}),98);
__d("MAWMessageDropError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="MAWMessageDropError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.MAWMessageDropError=e}),66);
__d("MAWMessageParseError",[],(function(t,n,r,o,a,i){"use strict";var e=(function(e){function t(t){var n;return n=e.call(this,t)||this,n.name="MAWMessageParseError",n.message=t,n}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.MAWMessageParseError=e}),66);
__d("WAMessageKey",["WAGlobals","WAJids","WAStanzaUtils","err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e===o("WAJids").AUTHOR_ME||e==o("WAGlobals").getMyUserJid()}function s(t,n,a){if(a==null)throw r("err")("messageKey is null");var i=a.id,l=a.remoteJid;if(i==null)throw r("err")("messageKey.id is null");if(l==null)throw r("err")("messageKey.remoteJid is null");var s=o("WAJids").interpretAndValidateJid(l);if(s.jidType==="unknown")throw r("err")("messageKey.remoteJid is invalid");var u,c=o("WAJids").AUTHOR_ME;if(s.jidType==="group")if(u=s.groupJid,e(n)&&a.fromMe===!0)c=o("WAJids").AUTHOR_ME;else if(a.fromMe==!0)c=n;else{var d=a.participant;if(d==null)throw r("err")("key.participant is null");var m=o("WAJids").interpretAndValidateJid(d);if(m.jidType==="msgrUser")c=m.userJid;else throw r("err")("key.participant is invalid")}else if(s.jidType==="msgrUser"||s.jidType==="msgrDevice"){var p=o("WAJids").interpretAndValidateJid(t);if(p.jidType!=="msgrUser")throw r("err")("expected user type jid.");u=p.userJid,e(n)?a.fromMe===!0?c=o("WAJids").AUTHOR_ME:c=p.userJid:a.fromMe===!0&&(c=p.userJid)}else throw r("err")("Unsupported jidtype type");return{chat:u,author:e(c)?o("WAJids").AUTHOR_ME:c,externalId:o("WAStanzaUtils").toStanzaId(i)}}l.extractProtocolMessageId=s}),98);
__d("WAParseConsumerMessagePollCreation",["WAGlobals","WAHex","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a={unstoredMsg:{type:o("WAMsgType").MSG_TYPE.FUTUREPROOF,msgContent:{protobuf:o("WAHex").bytesToBuffer(e),subtype:"pollCreationMessage"},id:t.id,ts:t.ts,sentTs:t.sentTs,serverTs:t.serverTs,ack:t.ack,reportingMeta:n},unstoredMedia:null,unstoredQuotedMedia:null};if(!r||!o("WAGlobals").getConfig().isPollsEnabled())return a;var i=r.encKey,l=r.options,s=r.name,u=r.selectableOptionsCount,c=t.id,d=t.ts,m=t.ack;if(i==null||s==null||u==null)return a;var p=l.map(function(e){return e.optionName}).filter(Boolean);return{unstoredMsg:{ack:m,id:c,ts:d,type:o("WAMsgType").MSG_TYPE.GROUP_POLL_CREATE},unstoredGroupPollCreateInfo:{encKey:i,name:s,selectableOptionsCount:u,options:p},unstoredMedia:null,unstoredQuotedMedia:null}}l.default=e}),98);
__d("WAParseConsumerMessagePollUpdate",["WAGlobals","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r){var a=t.id,i=t.ts,l=t.ack;return r==null||!o("WAGlobals").getConfig().isPollsEnabled()?{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null}:{unstoredMsg:{ack:l,id:a,ts:i,type:o("WAMsgType").MSG_TYPE.GROUP_POLL_UPDATE},unstoredGroupPollUpdateInfo:{pollUpdateMessage:r,type:o("WAMsgType").MSG_TYPE.GROUP_POLL_UPDATE},unstoredMedia:null,unstoredQuotedMedia:null}}l.default=e}),98);
__d("WAParseProtocolUtils",["WAGlobals","WALogger","WALongInt","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=c(t,e.serverTs),r=n==null?void 0:n.expirationTs,o=n==null?void 0:n.deleteTs,a=n==null?void 0:n.ephemeralSetting;return{expirationTs:r,deleteTs:o,ephemeralSetting:a}}function u(e,t){var n=d(t);return n!=null&&(e.reportingMeta=n),n}function c(e,t){var n,r,a=e==null||(n=e.chatEphemeralSetting)==null?void 0:n.ephemeralExpiration,i=e==null||(r=e.chatEphemeralSetting)==null?void 0:r.ephemeralSettingTimestamp;if(a==null||i==null||a===0)return null;var l=o("WATimeUtils").castToUnixTime(t+o("WAGlobals").getDependencies().ephemeralMaxDeletionWindowForUnseenMessage()),s=l,u=null;try{var c=o("WALongInt").numberOrThrowIfTooLarge(i)/1e3;u=o("WATimeUtils").castToUnixTime(c)}catch(e){return null}return{expirationTs:l,deleteTs:s,ephemeralSetting:{expirationTs:a,updatedTs:u}}}function d(t){var n=t==null?void 0:t.frankingVersion;return n!=null&&n!==0&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Unsupported franking version ",""])),n),{frankingKey:void 0,frankingTag:void 0,frankingVersion:n,reportingContent:void 0,reportingTag:void 0}}l.parseEphemerality=s,l.enhanceReportingMeta=u}),98);
__d("WAParseConsumerMessageProtocol",["WACommon.pb","WAConsumerApplication.pb","WAGlobals","WAHex","WAJids","WALogger","WAMediaTransport.pb","WAMessageKey","WAMsgType","WAParseConsumerMessagePollCreation","WAParseConsumerMessagePollUpdate","WAParseMediaTransportProtocol","WAParseProtocolUtils","WAParseReadOnlyMetadataDataclassUtils","WAResultOrError","WAStanzaUtils","WATimeUtils","decodeProtobuf","err","maybeConvertMessageTextMentionsV2ToV1"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=90*o("WATimeUtils").DAY_SECONDS,c=1,d=0,m=1,p=o("WAGlobals").getConfig().armadilloWebProcessFutureproof()?m+1:m;function _(t,n,a,i,l,c){var d,m,p,_,f=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAConsumerApplication.pb").ConsumerApplicationSpec,n),g=(d=f.payload)==null||(d=d.applicationData)==null||(d=d.revoke)==null||(d=d.key)==null?void 0:d.id;if(g!=null)return{unstoredMsg:{type:o("WAMsgType").MSG_TYPE.REVOKED,id:a.id,ts:a.ts,sentTs:a.sentTs,serverTs:a.serverTs,ack:a.ack,reportingMeta:a.reportingMeta,revokedExternalId:o("WAStanzaUtils").toStanzaId(g),unsendMsgContentDeleteTs:null,msgContent:null,ebTimestampMs:c},unstoredMedia:null,unstoredQuotedMedia:null};var h=(l==null?void 0:l.isForwarded)||!1,k=o("WAParseProtocolUtils").parseEphemerality(a,l),I=k.expirationTs,T=k.deleteTs,D=k.ephemeralSetting;if(D!=null&&(D.expirationTs<0||D.expirationTs>u)){var x=o("WAJids").interpretAndValidateJid(t),$=x.jidType,P=D.expirationTs;o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["WAParseConsumerMessageProtocol - ephemeralSetting duration is invalid ",", jidType: ",""])),P,$)}var N=o("WAParseProtocolUtils").enhanceReportingMeta(a,l),M=(m=C(l))!=null?m:void 0,w=(p=f.payload)==null?void 0:p.content;if(!w)return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null};var A=(_=f.metadata)==null?void 0:_.specialTextSize,F=L(w),O={contentTypeForLogging:F,unstoredMsg:{type:o("WAMsgType").MSG_TYPE.FUTUREPROOF,msgContent:{protobuf:o("WAHex").bytesToBuffer(i),subtype:null},id:a.id,ts:a.ts,sentTs:a.sentTs,serverTs:a.serverTs,ack:a.ack,reportingMeta:N},unstoredMedia:null,unstoredQuotedMedia:null},B=function(t){return babelHelpers.extends({},O,{unstoredMsg:babelHelpers.extends({},O.unstoredMsg,{msgContent:babelHelpers.extends({},O.unstoredMsg.msgContent,{subtype:t})})})},W=(function(){try{switch(F){case"messageText":{var e,n=w[F]&&r("maybeConvertMessageTextMentionsV2ToV1")(w[F]);if(n==null)throw r("err")("consumerMessage has no messageText");var u=((e=n.commands)==null?void 0:e.some(function(e){return e.commandType===o("WACommon.pb").COMMAND_COMMAND_TYPE.AI}))===!0;if(u&&!o("WAGlobals").getConfig().isMetaAiInvocationMessageRenderEnabled())return B("metaAiMessage");if(o("WAParseReadOnlyMetadataDataclassUtils").isNoteMention(l))return B("noteMention");if(n.text==null)throw r("err")("consumerMessage has no messageText");return{unstoredMsg:babelHelpers.extends({type:o("WAMsgType").MSG_TYPE.TEXT,msgContent:{content:n.text,mentionedJids:n.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),commands:n.commands},quote:M,expirationTs:I,deleteTs:T,ephemeralSetting:D,isForwarded:h},a,{specialTextSize:A,ebTimestampMs:c}),unstoredMedia:null,unstoredQuotedMedia:null}}case"reactionMessage":return{unstoredMsg:y(t,a,w[F]),unstoredMedia:null,unstoredQuotedMedia:null};case"imageMessage":{var d=b(w,a.ts);return{unstoredMsg:babelHelpers.extends({type:o("WAMsgType").MSG_TYPE.IMAGE,quote:M,expirationTs:I,deleteTs:T,ephemeralSetting:D,isForwarded:h,mediaId:d.plaintextHash},a,{ebTimestampMs:c}),unstoredMedia:d,unstoredQuotedMedia:null}}case"videoMessage":{var m,p,_,f,g=w[F];if(g==null)throw r("err")("consumerMessage has no videoMessage");var C=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").VideoTransportSpec,g==null||(m=g.video)==null?void 0:m.payload),L=C==null||(p=C.integral)==null||(p=p.transport)==null||(p=p.ancillary)==null?void 0:p.mimetype,k=(C==null||(_=C.ancillary)==null?void 0:_.gifPlayback)===!0&&L==="image/gif",x=o("WAParseMediaTransportProtocol").parseVideoMsg(C,a.ts,k);if(x==null)throw r("err")("consumerMessage has no video media info");if(o("WAParseReadOnlyMetadataDataclassUtils").isPowerUp(l)&&((f=g.caption)==null?void 0:f.text)!=null){var $;return{unstoredMsg:babelHelpers.extends({type:o("WAMsgType").MSG_TYPE.TEXT,msgContent:{content:($=g.caption)==null?void 0:$.text,mentionedJids:g.caption.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean)},quote:M,expirationTs:I,deleteTs:T,ephemeralSetting:D,isForwarded:h},a,{specialTextSize:A,ebTimestampMs:c}),unstoredMedia:null,unstoredQuotedMedia:null}}return{unstoredMsg:k?babelHelpers.extends({type:o("WAMsgType").MSG_TYPE.GIF},a,{quote:M,expirationTs:I,deleteTs:T,ephemeralSetting:D,isForwarded:h,reportingMeta:N,mediaId:x.plaintextHash}):babelHelpers.extends({type:o("WAMsgType").MSG_TYPE.VIDEO},a,{quote:M,expirationTs:I,deleteTs:T,ephemeralSetting:D,isForwarded:h,mediaId:x.plaintextHash}),unstoredMedia:x,unstoredQuotedMedia:null}}case"audioMessage":{var P=v(w,a.ts);return{unstoredMsg:babelHelpers.extends({type:o("WAMsgType").MSG_TYPE.PTT,quote:M,expirationTs:I,deleteTs:T,ephemeralSetting:D,isForwarded:h,mediaId:P.plaintextHash},a,{ebTimestampMs:c}),unstoredMedia:P,unstoredQuotedMedia:null}}case"stickerMessage":{if(o("WAGlobals").getConfig().isStickerEnabled()){var W,q,U=S(w),V=o("WAParseMediaTransportProtocol").parseStickerMsg(U,a.ts),H=((W=U.integral)==null?void 0:W.receiverFetchId)!=null||((q=U.ancillary)==null?void 0:q.receiverFetchId)!=null,G=o("WAGlobals").getConfig().isStickerReceiverFetchEnabled();if(V==null){if(H){if(G){var z=o("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(U);if(z==null)throw r("err")("consumerMessage has no sticker receiver fetch info");return{unstoredMsg:babelHelpers.extends({type:o("WAMsgType").MSG_TYPE.RECEIVER_FETCH,quote:M,expirationTs:I,deleteTs:T,ephemeralSetting:D,isForwarded:h,reportingMeta:N},a,{ebTimestampMs:c}),unstoredMedia:null,unstoredQuotedMedia:null,unstoredReceiverFetchInfo:z}}return B("stickerReceiverFetchMessage")}throw r("err")("consumerMessage has no sticker media info")}return{unstoredMsg:babelHelpers.extends({type:o("WAMsgType").MSG_TYPE.STICKER,quote:M,expirationTs:I,deleteTs:T,ephemeralSetting:D,isForwarded:h,reportingMeta:N,mediaId:V.plaintextHash},a,{ebTimestampMs:c}),unstoredMedia:V,unstoredQuotedMedia:null}}return O}case"documentMessage":{if(o("WAGlobals").getConfig().isDocumentReceiveEnabled()){var j=R(w,a.ts);return{unstoredMsg:babelHelpers.extends({type:o("WAMsgType").MSG_TYPE.DOCUMENT_FILE,quote:M,expirationTs:I,deleteTs:T,ephemeralSetting:D,isForwarded:h,reportingMeta:N,mediaId:j.plaintextHash},a,{ebTimestampMs:c}),unstoredMedia:j,unstoredQuotedMedia:null}}return O}case"groupInviteMessage":return{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null,unstoredIncomingGroupInvite:E(a,w)};case"editMessage":{var K,Q=w[F],X=Q==null?void 0:Q.message,Y=X==null?void 0:X.text,J=Q==null||(K=Q.key)==null?void 0:K.id;if(Q==null||X==null||Y==null)throw r("err")("consumerMessage with editMessage type has no editMessage");if(J==null)throw r("err")("consumerMessage with editMessage type has no original Msg External Id.");var Z=o("WAStanzaUtils").toStanzaId(J);return{unstoredEditMsg:{type:o("WAMsgType").MSG_TYPE.EDIT_ACTION,editMsgContent:{content:Y,mentionedJids:X.mentionedJid.map(o("WAJids").validateUserJid).filter(Boolean),commands:X.commands},originalMsgExternalId:Z,id:a.id,ts:a.ts,sentTs:a.sentTs,serverTs:a.serverTs,ack:a.ack,reportingMeta:N,specialTextSize:A},unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null}}case"pollCreationMessage":return r("WAParseConsumerMessagePollCreation")(i,a,N,w[F]);case"pollUpdateMessage":return r("WAParseConsumerMessagePollUpdate")(i,a,N,w[F]);case"contactMessage":case"locationMessage":case"extendedTextMessage":case"statusTextMessage":case"contactsArrayMessage":case"liveLocationMessage":case"viewOnceMessage":default:return O}}catch(e){return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["parseConsumerMessageProtocol error :",""])),e),{unstoredMsg:null,unstoredMedia:null,unstoredQuotedMedia:null}}})();return babelHelpers.extends({},W,{contentTypeForLogging:F})}function f(e){if(o("WAJids").isAuthorSystem(e))throw r("err")("Got system author");return e}var g=30;function h(e){return e==null?o("WAResultOrError").makeResult(null):e.length>g?o("WAResultOrError").makeError("invalid-reaction-text-length"):o("WAResultOrError").makeResult(e)}function y(e,t,n){if(n==null)throw r("err")("consumerMessage has no reactionMessage");var a=f(t.id.author),i=o("WAMessageKey").extractProtocolMessageId(e,a,n.key),l=n.text,s=n.groupingKey,u=n.senderTimestampMs,c=h(l);if(!c.success)throw r("err")('"'+(l!=null?l:"")+'" is not a valid reaction ['+c.error+"]");return{type:o("WAMsgType").MSG_TYPE.REACTION,ack:t.ack,id:t.id,reactToExternalId:i.externalId,reactToAuthor:i.author,reaction:c.value,groupingKey:s,ts:t.ts,senderTimestampMs:u}}function C(e){var t,n,a,i=e==null||(t=e.quotedMessage)==null?void 0:t.stanzaId,l=e==null||(n=e.quotedMessage)==null?void 0:n.participant,s=e==null||(a=e.quotedMessage)==null?void 0:a.remoteJid,u=l!=null?o("WAJids").interpretAndValidateJid(l):null,c;if((u==null?void 0:u.jidType)==="msgrUser"&&u.userJid===o("WAGlobals").getMyUserJid()?c=o("WAJids").AUTHOR_ME:(u==null?void 0:u.jidType)==="msgrUser"?c=u.userJid:c=o("WAJids").AUTHOR_ME,i==null)return null;var d={type:o("WAMsgType").MSG_TYPE.UNAVAILABLE,author:c,externalId:o("WAStanzaUtils").toStanzaId(i),ts:null};if(s!=null){var m=o("WAJids").interpretAndValidateJid(s);if(m.jidType==="group")return{remoteJid:m.groupJid,content:d};throw r("err")("not supported")}else return{remoteJid:null,content:d}}function b(e,t){var n,a=e.imageMessage;if(a==null)throw r("err")("consumerMessage has no imageMessage");return o("WAParseMediaTransportProtocol").decodeImageTransport(a==null||(n=a.image)==null?void 0:n.payload,t,"image")}function v(e,t){var n,a=e.audioMessage;if(a==null)throw r("err")("consumerMessage has no audioMessage");var i=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").AudioTransportSpec,a==null||(n=a.audio)==null?void 0:n.payload),l=o("WAParseMediaTransportProtocol").parseAudioMsg(i,(a==null?void 0:a.ptt)||!1,t);if(l==null)throw r("err")("consumerMessage has no audio media info");return l}function S(e){var t,n=e.stickerMessage;if(n==null)throw r("err")("consumerMessage has no stickerMessage");return o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").StickerTransportSpec,n==null||(t=n.sticker)==null?void 0:t.payload)}function R(e,t){var n,a=e.documentMessage;if(a==null)throw r("err")("consumerMessage has no documentMessage");var i=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").DocumentTransportSpec,a==null||(n=a.document)==null?void 0:n.payload),l=a==null?void 0:a.fileName,s=o("WAParseMediaTransportProtocol").parseDocumentMsg(i,l,t);if(s==null)throw r("err")("consumerMessage has no document media info");return s}function L(e){var t=Object.keys(e).filter(function(e){return e!=="$$unknownFieldCount"});if(t.length!==1)throw r("err")(JSON.stringify(e)+" consumerMessage payload content should have exactly one field, instead found "+JSON.stringify(t));return t[0]}function E(e,t){var n=t.groupInviteMessage;if(n==null)throw r("err")("consumerMessage has no GroupInvite Data");return babelHelpers.extends({ack:e.ack,author:e.id.author,externalId:e.id.externalId,ts:e.ts},n)}l.MINIMAL_MEDIA_DURATION=c,l.DEFAULT_FILE_SIZE=d,l.SUPPORTED_TYPES_VERSION=p,l.parseConsumerMessageProtocol=_,l.interpretAsNonSystemAuthor=f,l.validReactionMessageText=h,l.parseReactionMessage=y,l.parsedQuotedConsumerMessage=C,l.parseOneOfContentType=L}),98);
__d("WAParseMediaTransportProtocol",["WAHashUtils","WALogger","WALongInt","WAMedia","WAMediaHdType","WAMediaTransport.pb","WAMediaUtils","WAMsgMap","WAParseConsumerMessageProtocol","WAProgressiveJpegGetScanLengths","WATimeUtils","decodeProtobuf","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,n,r,a){var i,l,c,d,m,p,_,f,g,h,y,C,b,v;if(!((i=t.integral)!=null&&i.transport))return null;var S=(l=t.integral)==null?void 0:l.transport;if(o("decodeProtobuf").getUnknownFields(S.integral)!=null)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["There is unknown fileds in integral of VideoTransport"]))),null;var R=(c=S.integral)==null?void 0:c.fileSha256;if(!R)return r||o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["protobuf msg with no plaintext hash"]))),null;var L=null;if(((d=t.ancillary)==null?void 0:d.scansSidecar)!=null&&((m=t.ancillary)==null?void 0:m.scanLengths)!=null){var E,k;L={sidecar:(E=t.ancillary)==null?void 0:E.scansSidecar,scanLengths:(k=t.ancillary)==null||(k=k.scanLengths)==null?void 0:k.map(o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength)}}if(((p=S.integral)==null?void 0:p.fileSha256)==null||((_=S.integral)==null?void 0:_.fileEncSha256)==null||((f=S.integral)==null?void 0:f.mediaKey)==null||((g=S.integral)==null?void 0:g.directPath)==null||((h=S.integral)==null?void 0:h.mediaKeyTimestamp)==null||((y=S.ancillary)==null?void 0:y.objectId)==null)return o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["cannot compose mediaEntry with the media message"]))),null;var I=(C=S.ancillary)==null?void 0:C.fileLength,T=(b=S.ancillary.thumbnail)==null?void 0:b.downloadableThumbnail,D=o("WAMediaUtils").rawDataToMediaEntry({fileSha256:S.integral.fileSha256,fileEncSha256:S.integral.fileEncSha256,mediaKey:S.integral.mediaKey,directPath:S.integral.directPath,mediaKeyTimestamp:o("WATimeUtils").castLongIntToUnixTime(S.integral.mediaKeyTimestamp),serverMediaType:n,objectId:(v=S.ancillary)==null?void 0:v.objectId,fbid:void 0,downloadableThumbnail:{directPath:T==null?void 0:T.directPath,fileEncSha256:T==null?void 0:T.fileEncSha256,fileSha256:T==null?void 0:T.fileSha256,mediaKey:T==null?void 0:T.mediaKey,mediaKeyTimestamp:(T==null?void 0:T.mediaKeyTimestamp)==null?null:o("WATimeUtils").castLongIntToUnixTime(T==null?void 0:T.mediaKeyTimestamp),objectId:T==null?void 0:T.objectId},filename:a,progressiveJpegDetails:L,size:I==null?I:o("WALongInt").numberOrThrowIfTooLarge(I)});return{size:I==null?o("WAParseConsumerMessageProtocol").DEFAULT_FILE_SIZE:o("WALongInt").numberOrThrowIfTooLarge(I),plaintextHash:o("WAHashUtils").toPlaintextHash(new Uint8Array(R)),mediaEntry:D}}function d(e){switch(e){case o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.NONE:return o("WAMediaHdType").HD_TYPE_NONE;case o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.LQ_4K:return o("WAMediaHdType").HD_TYPE_LQ_4K;case o("WAMediaTransport.pb").IMAGE_TRANSPORT_ANCILLARY_HD_TYPE.HQ_4K:return o("WAMediaHdType").HD_TYPE_HQ_4K;default:return o("WAMediaHdType").HD_TYPE_NONE}}function m(e,t,n){var r,a,i,l,s,u,m=c(e,n,!1);if(!m)return null;var p=C(m,t),_=(r=e.ancillary)==null?void 0:r.width,f=(a=e.ancillary)==null?void 0:a.height;e.ancillary!=null&&(e.ancillary.width!=null&&e.ancillary.width===4294967295&&(_=void 0),e.ancillary.height!=null&&e.ancillary.height===4294967295&&(f=void 0));var g=babelHelpers.extends({},p,{mediaType:o("WAMedia").MEDIA_TYPE.IMAGE,validatedVideoInfo:null,validatedImageInfo:{width:_,height:f,jpegThumbnail:(i=e.integral)==null||(i=i.transport)==null||(i=i.ancillary)==null||(i=i.thumbnail)==null?void 0:i.jpegThumbnail,jpegThumbnailHeight:(l=e.integral)==null||(l=l.transport)==null||(l=l.ancillary)==null||(l=l.thumbnail)==null?void 0:l.thumbnailHeight,jpegThumbnailWidth:(s=e.integral)==null||(s=s.transport)==null||(s=s.ancillary)==null||(s=s.thumbnail)==null?void 0:s.thumbnailWidth,hdType:d((u=e.ancillary)==null?void 0:u.hdType)},validatedAudioInfo:null,validatedDocumentFileInfo:null});return g}function p(e,t,n){var a=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,e),i=m(a,t,n);if(i==null)throw r("err")("consumerMessage has no image media info");return i}function _(e,t,n){var r,a,i,l,s,u,d,m,p,_,f,g,h,y,b,v,S;if(!((r=e.integral)!=null&&r.transport))return null;var R=c(e,n?"gif":"video",!1);if(!R)return null;var L=C(R,t),E=babelHelpers.extends({},L,{accessibilitySummaryText:(a=e.ancillary)==null?void 0:a.accessibilityLabel,mediaType:n?o("WAMedia").MEDIA_TYPE.GIF:o("WAMedia").MEDIA_TYPE.VIDEO,validatedVideoInfo:n?null:{duration:(e==null||(i=e.ancillary)==null?void 0:i.seconds)!=null&&(e==null||(l=e.ancillary)==null?void 0:l.seconds)>o("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION?e==null||(s=e.ancillary)==null?void 0:s.seconds:o("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION,width:e==null||(u=e.ancillary)==null?void 0:u.width,height:e==null||(d=e.ancillary)==null?void 0:d.height,mimetype:e==null||(m=e.integral)==null||(m=m.transport)==null||(m=m.ancillary)==null?void 0:m.mimetype,jpegThumbnail:(p=e.integral)==null||(p=p.transport)==null||(p=p.ancillary)==null||(p=p.thumbnail)==null?void 0:p.jpegThumbnail,jpegThumbnailHeight:(_=e.integral)==null||(_=_.transport)==null||(_=_.ancillary)==null||(_=_.thumbnail)==null?void 0:_.thumbnailHeight,jpegThumbnailWidth:(f=e.integral)==null||(f=f.transport)==null||(f=f.ancillary)==null||(f=f.thumbnail)==null?void 0:f.thumbnailWidth,gifPlayback:(g=e.ancillary)==null?void 0:g.gifPlayback},validatedImageInfo:n?{width:(h=e.ancillary)==null?void 0:h.width,height:(y=e.ancillary)==null?void 0:y.height,jpegThumbnail:(b=e.integral)==null||(b=b.transport)==null||(b=b.ancillary)==null||(b=b.thumbnail)==null?void 0:b.jpegThumbnail,jpegThumbnailHeight:(v=e.integral)==null||(v=v.transport)==null||(v=v.ancillary)==null||(v=v.thumbnail)==null?void 0:v.thumbnailHeight,jpegThumbnailWidth:(S=e.integral)==null||(S=S.transport)==null||(S=S.ancillary)==null||(S=S.thumbnail)==null?void 0:S.thumbnailWidth}:null,validatedAudioInfo:null,validatedDocumentFileInfo:null});return E}function f(e,t,n){var r,a,i,l,s,u;if(!((r=e.integral)!=null&&r.transport))return null;var d=c(e,"ptt",!1);if(!d)return null;var m=C(d,n),p=babelHelpers.extends({},m,{mediaType:o("WAMedia").MEDIA_TYPE.PTT,validatedVideoInfo:null,validatedImageInfo:null,validatedDocumentFileInfo:null,validatedAudioInfo:{duration:(e==null||(a=e.ancillary)==null?void 0:a.seconds)!=null&&(e==null||(i=e.ancillary)==null?void 0:i.seconds)>o("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION?e==null||(l=e.ancillary)==null?void 0:l.seconds:o("WAParseConsumerMessageProtocol").MINIMAL_MEDIA_DURATION,mimetype:e==null||(s=e.integral)==null||(s=s.transport)==null||(s=s.ancillary)==null?void 0:s.mimetype,played:!1,waveform:e==null||(u=e.ancillary)==null?void 0:u.waveform}});return p}function g(e,t){var n,r,a,i,l,s,u,d;if(!((n=e.integral)!=null&&n.transport))return null;var m=((r=e.integral)==null?void 0:r.receiverFetchId)!=null,p=c(e,"sticker",m);if(!p)return null;var _=C(p,t),f=babelHelpers.extends({},_,{accessibilitySummaryText:(a=e.ancillary)==null?void 0:a.accessibilityLabel,mediaType:o("WAMedia").MEDIA_TYPE.STICKER,validatedVideoInfo:null,validatedImageInfo:{width:(i=e.ancillary)==null?void 0:i.width,height:(l=e.ancillary)==null?void 0:l.height,jpegThumbnail:(s=e.integral)==null||(s=s.transport)==null||(s=s.ancillary)==null||(s=s.thumbnail)==null?void 0:s.jpegThumbnail,jpegThumbnailHeight:(u=e.integral)==null||(u=u.transport)==null||(u=u.ancillary)==null||(u=u.thumbnail)==null?void 0:u.thumbnailHeight,jpegThumbnailWidth:(d=e.integral)==null||(d=d.transport)==null||(d=d.ancillary)==null||(d=d.thumbnail)==null?void 0:d.thumbnailWidth},validatedAudioInfo:null,validatedDocumentFileInfo:null});return f}function h(e){var t,n,r,o,a,i,l;if(!((t=e.integral)!=null&&t.transport))return null;var s=(n=e.ancillary)==null?void 0:n.width,u=(r=e.ancillary)==null?void 0:r.height,c=(o=(a=e.integral)==null?void 0:a.receiverFetchId)!=null?o:(i=e.ancillary)==null?void 0:i.receiverFetchId,d=e==null||(l=e.integral)==null||(l=l.transport)==null||(l=l.ancillary)==null?void 0:l.mimetype;if(s==null||u==null||c==null||d==null)return null;var m={receiverFetchId:c,previewWidth:s,previewHeight:u,mimetype:d,type:"sticker"};return m}function y(e,t,n){var r,a;if(!((r=e.integral)!=null&&r.transport))return null;var i=c(e,"document",!1,t);if(!i)return null;var l=C(i,n);return babelHelpers.extends({},l,{mediaType:o("WAMedia").MEDIA_TYPE.DOCUMENT_FILE,validatedVideoInfo:null,validatedImageInfo:null,validatedAudioInfo:null,validatedDocumentFileInfo:{mimetype:e==null||(a=e.integral)==null||(a=a.transport)==null||(a=a.ancillary)==null?void 0:a.mimetype,filename:t!=null?t:void 0}})}function C(e,t){return{mediaEntry:e.mediaEntry,plaintextHash:e.plaintextHash,size:e.size,msgIds:[],mediaEntries:new(o("WAMsgMap")).MsgMap,ts:t}}l.getMediaMeta=c,l.decodeImageTransport=p,l.parseVideoMsg=_,l.parseAudioMsg=f,l.parseStickerMsg=g,l.parseStickerReceiverFetchInfo=h,l.parseDocumentMsg=y}),98);
__d("MAWParseBumpExistingMessageMsg",["FBLogger","WAMessageKey","WAParseConsumerMessageProtocol","WAParseProtocolUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.chat,n=e.content,a=e.meta,i=e.metadata,l=n.bumpExistingMessage;if(l==null)throw r("FBLogger")("messenger_web").mustfixThrow("bumpExistingMessage has no content");var s=l.key;if(s==null)throw r("FBLogger")("messenger_web").mustfixThrow("bumpExistingMessage has no message key");var u=o("WAParseConsumerMessageProtocol").interpretAsNonSystemAuthor(a.id.author),c=o("WAMessageKey").extractProtocolMessageId(t,u,s),d=c.author,m=c.externalId,p=o("WAParseProtocolUtils").parseEphemerality(a,i),_=p.deleteTs,f=p.ephemeralSetting,g=p.expirationTs,h={ack:a.ack,deleteTs:_,ephemeralSetting:f,expirationTs:g,id:{author:a.id.author,chat:a.id.chat,externalId:a.id.externalId},quote:{content:{author:d,externalId:m,ts:null,type:"Unavailable"},remoteJid:t},reportingMeta:a.reportingMeta,sentTs:a.sentTs,serverTs:a.serverTs,ts:a.serverTs,type:"BumpExistingMessage"};return{contentTypeForLogging:"bumpExistingMessage",unstoredMedia:null,unstoredMsg:h,unstoredQuotedMedia:null,unstoredXMA:null}}l.default=e}),98);
__d("MAWParseNetworkVerificationMsg",["MAWMessageDropError","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){throw o("WALogger").EXPECTED_ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Web does not support network verification code"]))),new(o("MAWMessageDropError")).MAWMessageDropError("Web does not support network verification")}l.parseNetworkVerificationMsg=s}),98);
__d("MAWParseNoteReplyMsg",["FBLogger","MAWJids","MAWMsgType","WAGlobals","WAJids","WALongInt","WAMediaTransport.pb","WAMsgType","WAParseMediaTransportProtocol","WAParseProtocolUtils","WAParseReadOnlyMetadataDataclassUtils","WATimeUtils","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a=e.content,i=e.ebTimestampMs,l=e.meta,s=e.metadata,u=a.noteReplyMessage;if(o("WAParseReadOnlyMetadataDataclassUtils").isNoteMention(s))return"noteMention";if(u==null)throw r("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage has no content");var c=(t=u.noteText)==null?void 0:t.text;if(c==null)throw r("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage has no note text");var d=u.noteTimestampMs!=null?o("WATimeUtils").castMilliSecondsToUnixTime(o("WALongInt").numberOrThrowIfTooLarge(u.noteTimestampMs)):void 0,m=o("MAWJids").toUserJid(l.id.author),p=o("MAWJids").toUserJid(l.id.chat),_=p===m?o("WAJids").AUTHOR_ME:p,f=o("WAParseProtocolUtils").parseEphemerality(l,s),g=f.deleteTs,h=f.ephemeralSetting,y=f.expirationTs,C={ack:l.ack,deleteTs:g,ebTimestampMs:i,ephemeralSetting:h,expirationTs:y,forwardingScore:l.forwardingScore,id:{author:l.id.author,chat:l.id.chat,externalId:l.id.externalId},quote:{content:{author:_,expirationTs:d,externalId:l.id.externalId,msgContent:{content:c},ts:l.serverTs,type:o("WAMsgType").NOTE_REPLY},remoteJid:l.id.chat},ts:l.serverTs},b,v,S,R=(n=u.textContent)==null?void 0:n.text,L=u.stickerContent,E=u.videoContent;if(R!=null){var k=babelHelpers.extends({msgContent:{content:R},type:o("MAWMsgType").MSG_TYPE.TEXT},C);b=k}else if(L!=null){var I=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,L==null?void 0:L.payload);if(v=o("WAParseMediaTransportProtocol").parseStickerMsg(I,l.ts),v){var T=babelHelpers.extends({mediaId:v.plaintextHash,type:o("MAWMsgType").MSG_TYPE.STICKER},C);b=T}else{var D;if(((D=I.integral)==null?void 0:D.receiverFetchId)!=null)if(o("WAGlobals").getConfig().isStickerReceiverFetchEnabled()){if(S=o("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(I),S==null)throw r("FBLogger")("messenger_web").mustfixThrow("consumerMessage has no sticker receiver fetch info");var x=babelHelpers.extends({type:o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH},C);b=x}else throw r("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage sticker receiver fetch is not enabled");else throw r("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage sticker has no media")}}else if(E!=null){var $,P,N=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,E==null?void 0:E.payload),M=N==null||($=N.integral)==null||($=$.transport)==null||($=$.ancillary)==null?void 0:$.mimetype,w=(N==null||(P=N.ancillary)==null?void 0:P.gifPlayback)===!0&&M==="image/gif";if(v=o("WAParseMediaTransportProtocol").parseVideoMsg(N,l.ts,w),v&&w){var A=babelHelpers.extends({mediaId:v.plaintextHash,type:o("MAWMsgType").MSG_TYPE.GIF},C);b=A}else throw v?r("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage video is not a gif"):r("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage video has no media")}else throw r("FBLogger")("messenger_web").mustfixThrow("noteReplyMessage has no valid content");return{contentTypeForLogging:"noteReplyMessage",unstoredMedia:v,unstoredMsg:b,unstoredQuotedMedia:null,unstoredReceiverFetchInfo:S,unstoredXMA:null}}l.default=e}),98);
__d("MAWParseRavenActionNotificationMsg",["FBLogger","MAWMsg","WAStanzaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n,a,i,l=e.content,s=e.meta,u=(t=l.ravenActionNotifMessage)==null?void 0:t.actionType,c=o("MAWMsg").MAWRavenActionNotifType.cast(u),d=(n=l.ravenActionNotifMessage)==null?void 0:n.actionTimestamp,m;if(d!=null){var p=Number(d);p>o("WATimeUtils").MAX_INT?m=o("WATimeUtils").castMilliSecondsToUnixTime(p):m=o("WATimeUtils").castToUnixTime(p)}var _=((a=l.ravenActionNotifMessage)==null||(a=a.key)==null?void 0:a.id)!=null?o("WAStanzaUtils").toStanzaId((i=l.ravenActionNotifMessage)==null||(i=i.key)==null?void 0:i.id):null;if(c==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error when getting actionType for RavenNotificationMessage "+s.id.externalId);if(m==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error when getting actionTimestamp for RavenNotificationMessage "+s.id.externalId);if(_==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error when getting ravenActionToMsgExternalId for RavenNotificationMessage "+s.id.externalId);var f={ack:s.ack,actionTimestamp:m,actionType:c,id:s.id,ravenActionToMsgExternalId:_,sentTs:s.sentTs,serverTs:s.serverTs,ts:s.serverTs,type:"RavenAction"};return{unstoredMedia:null,unstoredMsg:f,unstoredQuotedMedia:null,unstoredXMA:null}}l.parseRavenActionNotificationMessage=e}),98);
__d("MAWParseSubprotocolVersionConsts",[],(function(t,n,r,o,a,i){"use strict";var e=2,l=2,s=1,u=2,c=1,d=1;i.ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION=e,i.XMA_PREVIEW_SUBPROTOCOL_VERSION=l,i.XMA_FAVICON_SUBPROTOCOL_VERSION=s,i.XMA_HEADER_SUBPROTOCOL_VERSION=u,i.RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION=c,i.RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION=d}),66);
__d("MAWParseRavenMsg",["FBLogger","MAWMsg","MAWMsgType","MAWParseSubprotocolVersionConsts","WALogger","WAMediaTransport.pb","WAParseMediaTransportProtocol","WAParseProtocolUtils","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=t.content,a=t.ebTimestampMs,i=t.meta,l=t.metadata,u=n.ravenMessageMsgr;if(u==null)throw r("FBLogger")("messenger_web").mustfixThrow("Raven message payload has no content");var c=o("MAWMsg").MAWRavenMsgEphemeralType.cast(u.ephemeralType);if(c==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error when casting ephemeralType for Raven message");var d=void 0,m=void 0;if(u.imageMessage)(u.imageMessage.version==null||u.imageMessage.version<o("MAWParseSubprotocolVersionConsts").RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION)&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["\n        received image messsage version is older than expected ",". "])),o("MAWParseSubprotocolVersionConsts").RAVEN_IMAGE_MESSAGE_SUBPROTOCOL_VERSION),d=o("WAParseMediaTransportProtocol").decodeImageTransport(u.imageMessage.payload,i.ts,"image"),m=o("MAWMsg").MAWRavenMsgMediaType.IMAGE;else if(u.videoMessage){(u.videoMessage.version==null||u.videoMessage.version<o("MAWParseSubprotocolVersionConsts").RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION)&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["\n        received video messsage version is older than expected ",". "])),o("MAWParseSubprotocolVersionConsts").RAVEN_VIDEO_MESSAGE_SUBPROTOCOL_VERSION);var p=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").VideoTransportSpec,u.videoMessage.payload);d=o("WAParseMediaTransportProtocol").parseVideoMsg(p,i.ts,!1),m=o("MAWMsg").MAWRavenMsgMediaType.VIDEO}else throw r("FBLogger")("messenger_web").mustfixThrow("Error unsupported Raven message type");if(d==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error Raven message has no associated image or video");var _=o("WAParseProtocolUtils").parseEphemerality(i,l),f=_.deleteTs,g=_.ephemeralSetting,h=_.expirationTs,y={ack:i.ack,deleteTs:f,ebTimestampMs:a,ephemeralSetting:g,expirationTs:h,id:i.id,mediaId:d.plaintextHash,ravenEphemeralMediaState:c===o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT?o("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN,ravenEphemeralType:c,ravenMediaType:m,reportingMeta:i.reportingMeta,sentTs:i.sentTs,serverTs:i.serverTs,ts:i.ts,type:o("MAWMsgType").MSG_TYPE.RAVEN};return{unstoredMedia:d,unstoredMsg:y,unstoredQuotedMedia:null,unstoredXMA:null}}l.parseRavenMessage=u}),98);
__d("MAWParseScreenshotActionMsg",["FBLogger","MAWExternalId","MAWMsgType","WAAckLevel","WAArmadilloApplication.pb","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.content,n=e.meta,a=t.screenshotAction;if(a==null)throw r("FBLogger")("messenger_web").mustfixThrow("screenshotAction has no content");var i=a.screenshotType;if(i==null)throw r("FBLogger")("messenger_web").mustfixThrow("Missing screenshot type in payload");if(![o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE,o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING].includes(i))throw r("FBLogger")("messenger_web").mustfixThrow("Received unexpected screenshot action type");var l={ack:o("WAAckLevel").ACK.SENT,id:{author:o("WAJids").AUTHOR_SYSTEM,chat:n.id.chat,externalId:o("MAWExternalId").generateExternalId()},msgContent:{adminMsgContent:[],adminType:"youEphemeralTakeScreenshot",screenshotActionType:i},ts:n.serverTs,type:o("MAWMsgType").EPHEMERAL_SCREENSHOT_ACTION};return{contentTypeForLogging:"screenshotAction",unstoredMedia:null,unstoredMsg:l,unstoredQuotedMedia:null,unstoredXMA:null}}l.parseEphemeralScreenshotActionProtocol=e}),98);
__d("MAWParseArmadilloProtocol",["FBLogger","MAWMessageParseError","MAWMsgType","MAWParseBumpExistingMessageMsg","MAWParseNetworkVerificationMsg","MAWParseNoteReplyMsg","MAWParseRavenActionNotificationMsg","MAWParseRavenMsg","MAWParseScreenshotActionMsg","MAWParseXMAProtocol","WAArmadilloApplication.pb","WAHex","WALogger","decodeProtobuf","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={unstoredMedia:null,unstoredMsg:null,unstoredQuotedMedia:null,unstoredXMA:null},c=new Map([["screenshotAction",o("MAWParseScreenshotActionMsg").parseEphemeralScreenshotActionProtocol],["extendedContentMessage",o("MAWParseXMAProtocol").parseXMAProtocol],["paymentsTransactionMessage",o("MAWParseXMAProtocol").parseXMAProtocol],["noteReplyMessage",r("MAWParseNoteReplyMsg")],["bumpExistingMessage",r("MAWParseBumpExistingMessageMsg")],["ravenMessageMsgr",o("MAWParseRavenMsg").parseRavenMessage],["ravenActionNotifMessage",o("MAWParseRavenActionNotificationMsg").parseRavenActionNotificationMessage],["networkVerificationMessage",o("MAWParseNetworkVerificationMsg").parseNetworkVerificationMsg]]);function d(t,n,a,i,l,u){var d,_=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAArmadilloApplication.pb").ArmadilloSpec,n),f=(d=_.payload)==null?void 0:d.content;if(!f)throw new(o("MAWMessageParseError")).MAWMessageParseError("parse_armadillo_protocol_error:: empty_payload_content");var g=p(f);try{var h=c.get(g),y=null;if(h!=null){var C=h({chat:t,content:f,ebTimestampMs:u,meta:a,metadata:l,protobuf:i});if(typeof C!="string")return C;y=C}return o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MAWParseArmadilloProtocol - handling futureproof message for contentType: ",""])),g),{contentTypeForLogging:g,unstoredMedia:null,unstoredMsg:{ack:a.ack,id:a.id,msgContent:{protobuf:o("WAHex").bytesToBuffer(i),subtype:y!=null?y:m(g)},reportingMeta:a.reportingMeta,sentTs:a.sentTs,serverTs:a.serverTs,ts:a.ts,type:o("MAWMsgType").MSG_TYPE.FUTUREPROOF},unstoredQuotedMedia:null,unstoredXMA:null}}catch(e){var b=r("getErrorSafe")(e);throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["MAWParseArmadilloProtocol - Dropping message. contentType: ",", reason: ",""])),g,b.message),new(o("MAWMessageParseError")).MAWMessageParseError("parse_armadillo_protocol_error:: contentType:: "+g+" reason:: "+b.message)}}function m(e){switch(e){case"bumpExistingMessage":return"bumpMessage";default:return null}}function p(e){var t=Object.keys(e).filter(function(e){return e!=="$$unknownFieldCount"});if(t.length!==1)throw r("FBLogger")("messenger_web").mustfixThrow(JSON.stringify(e)+" armadillo payload content should only have one field");var n=t[0];return n}l.EMPTY_CONTENT=u,l.parseArmadilloProtocol=d,l.parseOneOfContentType=p}),98);
__d("MAWXMALoggingUtils",["WAArmadilloXMA.pb","objectEntries"],(function(t,n,r,o,a,i,l){"use strict";var e=r("objectEntries")(o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function s(t){return t!=null?e.get(t):void 0}l.getXmaTargetTypeStringFromEnum=s}),98);
__d("MAWParseXMAProtocol",["FBLogger","MAWMsgType","MAWODSProxy","MAWParseArmadilloProtocol","MAWParseCollapsibleIdFromXMADataClass","MAWParseSubprotocolVersionConsts","MAWParseXMAFBConfig","MAWParseXMAUnsupportedMessageType","MAWXMALoggingUtils","MWXMAV2IsCollapsibleXMA","MWXMAV2XmaDataClass","WAArmadilloXMA.pb","WAGetPlatformFromStanzaId","WAHex","WAJids","WALogger","WAMedia","WAMsgApplication.pb","WAOdsEnums","WAParseConsumerMessageProtocol","WAParseMediaTransportProtocol","WAParseMessageApplication","WAParseProtocolUtils","WAStanzaUtils","WATimeUtils","decodeProtobuf","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=["actionContentBlob"],s,u,c,d,m,p,_,f,g,h,y,C,b,v=new Set([o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY]);function S(e,t){if(!(e==null||e.payload==null))return o("WAParseMediaTransportProtocol").decodeImageTransport(e.payload,t,"xma-image")}function R(e,t,n,a,i){if(t==null||t.payload==null)return null;t.version!==o("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION&&o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[XMA] received associated message with incorrect version ",""])),t.version);var l=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMsgApplication.pb").MessageApplicationSpec,t.payload),u=o("WAParseMessageApplication").parseMessageApplication(l);if(u.type==="error")throw r("FBLogger")("messenger_web").mustfixThrow("XMA contains unparseable message application.");var c=u;if(c.subprotocolType!=="consumerMessage")throw r("FBLogger")("messenger_web").mustfixThrow("XMA contains incorrect message application type: "+c.subprotocolType);return o("WAParseConsumerMessageProtocol").parseConsumerMessageProtocol(e,c.payload,n,a,i)}var L="https://www.instagram.com/stories/",E="https://www.instagram.com/reel/",k="https://www.instagram.com/tv/",I="https://www.instagram.com/_n/profile_shop?",T="https://www.instagram.com/",D="https://www.alpha.facebook.com/share/",x="https://m.facebook.com/share/",$="https://www.facebook.com/share/",P="https://m.alpha.facebook.com/share/",N="https://facebook.com/share/",M="https://www.alpha.facebook.com/stories/",w="https://www.facebook.com/stories/",A="https://fb.gg/",F="https://www.facebook.com/",O="https://m.facebook.com/",B="https://www.alpha.facebook.com/",W="https://m.alpha.facebook.com/",q="https://facebook.com/",U="https://fb.watch/",V="https://www.facebook.com/l.php",H="https://m.facebook.com/l.php",G="https://www.alpha.facebook.com/l.php",z="https://m.alpha.facebook.com/l.php",j="https://facebook.com/l.php",K="https://l.facebook.com/l.php",Q="https://facebook.com/events/",X="https://www.facebook.com/events/",Y="https://www.alpha.facebook.com/events/",J="https://m.facebook.com/events/",Z="https://m.alpha.facebook.com/events/",ee="fb-messenger://payments/receipt?product_id=",te="messenger://location_share",ne="http://m.me/",re=":",oe="http://",ae="https://";function ie(t){var n,a,i,l,s,_=t.chat,f=t.content,g=t.ebTimestampMs,h=t.meta,y=t.metadata,C=t.protobuf,b=o("MAWParseArmadilloProtocol").parseOneOfContentType(f),L=b==="paymentsTransactionMessage",E=null;if(L){var k;E=(k=f.paymentsTransactionMessage)==null?void 0:k.extendedContentMessage}else E=f.extendedContentMessage;if(E==null&&L)return"paymentsTransactionMessage";if(E==null)throw r("FBLogger")("messenger_web").mustfixThrow("extendedContentMessage has no content");var I=E,T=I.targetType,D=I.xmaDataclass,x=o("WAGetPlatformFromStanzaId").getPlatformFromStanzaId(h.id.externalId);if(D!=null&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_dataclass.exists."+(T!=null?T:"null")}),T==null||!o("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:T,xmaDataclass:D}))return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:{ack:h.ack,id:h.id,msgContent:{protobuf:o("WAHex").bytesToBuffer(C),subtype:o("MAWParseXMAUnsupportedMessageType").getXMAUnsupportedMessageType(T,D,L)},reportingMeta:h.reportingMeta,sentTs:h.sentTs,serverTs:h.serverTs,ts:h.ts,type:o("MAWMsgType").MSG_TYPE.FUTUREPROOF},unstoredQuotedMedia:null,unstoredXMA:null,xmaTargetTypeForLogging:T};var $=o("WAParseProtocolUtils").parseEphemerality(h,y),P=$.deleteTs,N=$.ephemeralSetting,M=$.expirationTs,w=o("WAParseProtocolUtils").enhanceReportingMeta(h,y),A=E,F=A.associatedMessage,O=A.commands,B=A.contentRef,W=A.ctas,q=A.favicon,U=A.headerImage,V=A.headerTitle,H=A.maxSubtitleNumOfLines,G=A.maxTitleNumOfLines,z=A.mentionedJid,j=A.messageText,K=A.overlayDescription,Q=A.overlayIconGlyph,X=A.overlayTitle,Y=A.previews,J=A.sentWithMessageId,Z=A.subtitleText,ee=A.targetId,te=A.targetUsername,ne=A.titleText,re=A.xmaLayoutType;F!=null&&(F.version==null||F.version<o("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION)&&o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["\n      received associatedMessage version is older than expected "," as expected. "])),o("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION),U!=null&&(U.version==null||U.version<o("MAWParseSubprotocolVersionConsts").XMA_HEADER_SUBPROTOCOL_VERSION)&&o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["\n    received headerImage version is older than expected ",". "])),o("MAWParseSubprotocolVersionConsts").XMA_HEADER_SUBPROTOCOL_VERSION),q!=null&&(q.version==null||q.version<o("MAWParseSubprotocolVersionConsts").XMA_FAVICON_SUBPROTOCOL_VERSION)&&o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["\n    received favicon version is older than expected ",". "])),o("MAWParseSubprotocolVersionConsts").XMA_FAVICON_SUBPROTOCOL_VERSION),Y.every(function(e){(e.version==null||e.version<o("MAWParseSubprotocolVersionConsts").XMA_PREVIEW_SUBPROTOCOL_VERSION)&&o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["\n      received previews version is older than expected ",". "])),o("MAWParseSubprotocolVersionConsts").XMA_PREVIEW_SUBPROTOCOL_VERSION)});var oe=E.targetExpiringAtSec!=null?o("WATimeUtils").castLongIntToUnixTime(E.targetExpiringAtSec):void 0,ae=F!=null&&J!=null?[o("WAStanzaUtils").toStanzaId(J),h.id.externalId]:[h.id.externalId,void 0],ie=ae[0],le=ae[1],se=[];if(Y!=null)for(var ue=0;ue<Y.length;ue++){var ce,de,me=S(Y[ue],h.ts);me!=null&&!((T===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE||T===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE)&&me.mediaType===o("WAMedia").MEDIA_TYPE.IMAGE&&((ce=me.validatedImageInfo)==null?void 0:ce.height)===1&&((de=me.validatedImageInfo)==null?void 0:de.width)===1)&&se.push(me)}var pe=S(U,h.ts),_e=S(q,h.ts),fe=(n=o("WAParseConsumerMessageProtocol").parsedQuotedConsumerMessage(y))!=null?n:void 0,ge=o("MWXMAV2XmaDataClass").parseXmaDataClass(D),he;if(o("MWXMAV2IsCollapsibleXMA").isCollapsibleXMA(ge))try{he=o("MAWParseCollapsibleIdFromXMADataClass").parseCollapsibleIdFromXMADataClass(ge)}catch(e){var ye=r("getErrorSafe")(e);throw o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"xma_validation."+x+"."+(T||0)+".error"}),r("FBLogger")("messenger_web").mustfixThrow("Unexpected error trying to parse collapsible ID: "+ye.message)}var Ce=babelHelpers.extends({collapsibleId:he,deleteTs:P,ebTimestampMs:g,ephemeralSetting:N,expirationTs:M,id:babelHelpers.extends({},h.id,{externalId:ie}),quote:fe,reportingMeta:w,type:o("MAWMsgType").MSG_TYPE.XMA},h),be=W.map(function(t){var n=t.actionContentBlob,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return r}),ve=be.slice(1);T===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE&&W.length===1&&(ve=be);var Se=T===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT,Re={author:h.id.author,commands:O,contentRef:B,ctas:ve,defaultCTA:be[0],externalId:ie,faviconMediaId:Se?pe==null?void 0:pe.plaintextHash:_e==null?void 0:_e.plaintextHash,headerMediaId:Se?_e==null?void 0:_e.plaintextHash:pe==null?void 0:pe.plaintextHash,headerTitle:V,isTombstoned:oe!=null?o("WATimeUtils").unixTime()>oe:!1,maxSubtitleNumOfLines:H,maxTitleNumOfLines:G,mentionedJids:z.map(o("WAJids").validateUserJid).filter(Boolean),overlayDescription:K,overlayIconGlyph:Q,overlayTitle:X,previewMediaIds:se.length>0?se.map(function(e){return e.plaintextHash}):void 0,sentWithMessage:j,subtitleText:Z,targetExpiringAtSec:oe,targetId:ee,targetType:T,targetUsername:te,threadJid:_,titleText:ne,xmaDataclass:D,xmaLayoutType:re},Le;if(F!=null&&J==null)throw r("FBLogger")("messenger_web").mustfixThrow("XMA associatedMessage cannot be received without sentWithMessageId field");F!=null&&le!=null&&(Le=R(_,F,h,C,y));var Ee=(a=(i=Le)==null?void 0:i.unstoredMedia)!=null?a:null,ke=v.has(T);if(Ee!=null&&!ke){var Ie=o("MAWXMALoggingUtils").getXmaTargetTypeStringFromEnum(T);throw o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_XMA_PROTOCOL_PARSING,key:"assoc_msg_media_"+(Ie!=null?Ie:"unknown")}),r("FBLogger")("messenger_web").mustfixThrow("XMA associated msg cannot have additioinal dbMedia")}var Te=(l=(s=Le)==null?void 0:s.unstoredMsg)!=null?l:null;if(le!=null&&Te!=null&&(o("WALogger").DEV(p||(p=babelHelpers.taggedTemplateLiteralLoose(["ExternalId: "," textId: ",""])),ie,le),Te.id=babelHelpers.extends({},Te.id,{externalId:le}),Ce.id=babelHelpers.extends({},Te.id,{externalId:ie}),Re.externalId=ie),ke&&Ee!=null&&((Te==null?void 0:Te.type)==="Gif"||(Te==null?void 0:Te.type)==="Sticker"))return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:Ce,unstoredQuotedMedia:null,unstoredXMA:{unstoredAssociatedMedia:Ee,unstoredAssociatedMsg:Te,unstoredFavicon:Se?se[0]:_e,unstoredHeaderMedia:pe,unstoredPreviews:se.length>0?se:void 0,xma:Re},xmaTargetTypeForLogging:T};if(Te!=null&&Te.type!=="Text")throw r("FBLogger")("messenger_web").mustfixThrow('XMA associated msg cannot have type different from "Text". Received type: '+Te.type);return{contentTypeForLogging:"extendedContentMessage",unstoredMedia:null,unstoredMsg:Ce,unstoredQuotedMedia:null,unstoredXMA:{unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:Te,unstoredFavicon:Se?se[0]:_e,unstoredHeaderMedia:pe,unstoredPreviews:se.length>0&&!Se?se:void 0,xma:Re},xmaTargetTypeForLogging:T}}function le(e){var t=e.ebRestore,n=e.hasActionUrl,r=e.hasNativeUrl,a=e.isActionUrlValid,i=e.isNativeUrlValid,l=e.targetType;!i&&!a?o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid action and native URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."])),t!=null&&t?"[labyrinth_web]":"[S410301][transport]",l,r,n):i&&!a?o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid action URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."])),t!=null&&t?"[labyrinth_web]":"[S410301][transport]",l,r,n):a&&!i&&o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose([""," XMA has invalid native URL for target type: ",". hasNativeUrl: ",". hasActionUrl: ","."])),t!=null&&t?"[labyrinth_web]":"[S410301][transport]",l,r,n)}function se(e,t,n){var r=e.nativeUrl,o=e.actionUrl,a=ue(r,t,n),i=ue(o,t,n);return le({ebRestore:n,hasActionUrl:o!=null,hasNativeUrl:r!=null,isActionUrlValid:i,isNativeUrlValid:a,targetType:t}),a&&i}function ue(e,t,n,r){return r===void 0&&(r=!1),e==null?!0:_e(e,t)===!1?(n!=null&&n&&!r&&o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid url prefix during XMA restore"]))),!1):fe(e)?!0:(n!=null&&n&&!r&&o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid message text during XMA restore"]))),!1)}function ce(e){return e.startsWith(D)||e.startsWith(x)||e.startsWith($)||e.startsWith(P)||e.startsWith(N)}function de(e){return e.startsWith(V)||e.startsWith(H)||e.startsWith(G)||e.startsWith(z)||e.startsWith(j)||e.startsWith(K)}function me(e){return e.startsWith(F)||e.startsWith(O)||e.startsWith(B)||e.startsWith(W)||e.startsWith(q)}function pe(e){return e.startsWith(Q)||e.startsWith(X)||e.startsWith(Y)||e.startsWith(J)||e.startsWith(Z)}function _e(e,t){if(e==null)return!0;switch(t){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_HIGHLIGHT_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_HIGHLIGHT_REACTION:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_MENTION:return e.startsWith(L);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE:return e.startsWith(E);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE:return e.startsWith(k);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE:return e.startsWith(I);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_PROFILE_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_IG_MEDIA_SHARE:return e.startsWith(T);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION:return e.startsWith(w)||e.startsWith(M)||ce(e);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PROFILE_DIRECTORY_ITEM:return me(e);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE:return e.startsWith(A);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_PRIVATE_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_FRIEND_UPDATES_REPLY:return(me(e)||e.startsWith(U))&&!de(e);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2:return e.startsWith(te);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_HIGHLIGHTS_TAB_LOCAL_EVENT_REPLY:return pe(e);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT:return pe(e)||ce(e);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_CONTACT:return me(e)||e.startsWith(ne);case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_EXTERNAL_LINK:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_AUDIO_CALL:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_GROUP_VIDEO_CALL:if(e.includes(re)&&!e.startsWith(oe)&&!e.startsWith(ae)){var n=e.indexOf("://");return n===-1&&o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(['S410301 The url is invalid. It contains a colon separator, but not "://"']))),!1}break;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_RECEIVER_FETCH:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.DATACLASS_SENDER_COPY:return!0;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_P2P_PAYMENT:return e.startsWith(ee)}return!0}function fe(e){for(var t=0;t<e.length;t++){var n=e.charAt(t);switch(n){case"\u202C":case"\u202D":case"\u202E":return o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(["S410301 The url contains RTL characters"]))),!1;default:break}}return!0}l.SUPPORTED_XMA_ASSOC_MEDIA_TARGET_TYPES=v,l.kIGStoryCtaPrefix=L,l.kIGClipsCtaPrefix=E,l.kIGTVCtaPrefix=k,l.kIGShopCtaPrefix=I,l.kIGDefaultCtaPrefix=T,l.kFBStoryCtaPrefix=w,l.kFBGamingCustomUpdateCtaPrefix=A,l.kFBDefaultWWWCtaPrefix=F,l.kFBEventCtaPrefix=Q,l.kMSGP2PPaymentUrlPrefix=ee,l.kMessengerLocationSharePrefix=te,l.kHttpPrefix=oe,l.parseXMAProtocol=ie,l.isValidCTA=se,l.isURLValid=ue}),98);
__d("MAWSupportedDocumentTypes",[],(function(t,n,r,o,a,i){"use strict";var e=["apk","pyc","7z","z","gz","xz","rar","zip","zipx","ace","arc","zpaq","quad","balz","cab","arj","lzh","uue","bz","bz2","bzip2","jar","iso","tar","ade","adp","air","app","application","bas","bat","chm","cmd","com","command","cpl","crt","dll","dmg","dpkg","exe","hlp","hta","inf","ins","isp","jnlp","js","jse","lib","lnk","lua","mde","msc","msi","msp","mst","ocx","pcd","pif","pkg","ps1","reg","scr","sct","sh","shb","shs","sys","term","url","vb","vbe","vbs","vxd","webarchive","wsc","wsf","wsh","xbap"];function l(t){if(t==null)return!1;var n=t.includes(".")?t.split(".").pop():null;return n!=null&&!e.includes(n)}i.isAllowedType=l}),66);
__d("WAAPI",["cr:21048"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:21048")}),98);
__d("WAPREList",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({APP_STATE_SYNC_DAILY:"app_state_sync_daily",DECRYPT_MESSAGE_FINAL:"decrypt_message_final",DOWNLOAD_AND_DECRYPT:"download_and_decrypt",FRANKING_VALIDATION:"franking_validation",GET_DEVICES:"get_devices",ICDC_ERROR:"icdc_error",MEDIA_DOWNLOAD:"media_download",MEDIA_UPLOAD:"media_upload",MEDIA_VALIDATE:"media_validate",MESSAGE_DECRYPTION:"message_decryption",MESSAGE_ENCRYPTION:"message_encryption",OFFLINE_QUEUE:"offline_queue",OFFLINE_RETRY:"offline_retry",ONE_QUEUE:"one_queue",QUERY_GROUP:"query_group",QUERY_GROUPS:"query_groups",RECEIVE_MESSAGE:"receive_message",SEND_MESSAGE:"send_message",STANZA_QUEUE_MESSAGE_CONSUMER:"stanza_queue_message_consumer",SYNCD:"syncd",SYNCD_BOOTSTRAP_APP_STATE_DOWNLOAD:"syncd_bootstrap_app_state_download",SYNCD_BOOTSTRAP_DATA_APPLIED:"syncd_bootstrap_data_applied",SYNCD_CRITICAL_BOOTSTRAP_STAGE:"syncd_critical_bootstrap_stage",SYNCD_CRITICAL_EVENT:"syncd_critical_event",SYNCD_DECRYPT_MUTATIONS:"syncd_decrypt_mutations",SYNCD_FATAL_ERROR:"syncd_fatal_error",SYNCD_KEY_ROTATION:"syncd_key_rotation",WA_DISCONNECT:"wa_disconnect",WA_FAIL_STANZA_QUEUE_ITEM:"stanza_queue_item_failure",WA_JOB_MANAGER:"wa_job_manager",WA_JOBS_ORCHESTRATOR:"wa_jobs_orchestrator",WA_NO_SIGNED_PRE_KEY:"wa_no_signed_pre_key"});i.PRE_METRIC=e}),66);
__d("WAPREMetrics",["WALogger","WAPREList"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=6e4,d=18e4,m=600*1e3,p=0;function _(){var t=[];function n(e){t.push(e)}function r(){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Removing all listeners from PRE_METRICS"]))),t.length=0}function a(e){t.length===0&&o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[PRE] There are no subscribers to PRE events "," ",""])),e.name,e.stage),t.forEach(function(t){t(e)})}return{subscribe:n,notify:a,clear:r}}var f=_(),g=f.notify,h=f.clear,y=f.subscribe,C;"FinalizationRegistry"in self&&"WeakRef"in self&&(C=new FinalizationRegistry(function(e){var t=e.event,n=e.eventFlow;if(n.isActive())try{o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[PRE][","] EventFlow still active during garbage collection"])),t)}catch(e){}}));var b=new Set([o("WAPREList").PRE_METRIC.SEND_MESSAGE,o("WAPREList").PRE_METRIC.MEDIA_DOWNLOAD]);function v(e,t,n,r){n==null&&p++;var o=n!=null?n:p,a="open";n==null?g({name:e,stage:"START",instanceKey:o,annotations:t,timeoutInMs:r}):g({name:e,stage:"RESUME",instanceKey:o,annotations:t});var i;function l(){if(i!=null){var e=i.deref();if(e!=null){var t;(t=C)==null||t.unregister(e)}}}var s={addPoint:function(n,r){g({name:e,stage:"POINT",reason:n,instanceKey:o,annotations:r})},addAnnotations:function(n){g({name:e,stage:"ANNOTATE",instanceKey:o,annotations:n})},endSuccess:function(n){g({name:e,stage:"SUCCESS",instanceKey:o,annotations:n}),a="closed",l()},endCancel:function(n){g({name:e,stage:"CANCEL",instanceKey:o,annotations:n}),l()},endFail:function(n,r){g({name:e,stage:"FAIL",reason:n,instanceKey:o,annotations:r}),a="closed",l()},getFlowDetails:function(){return{name:e,instanceKey:o}},isActive:function(){return a==="open"}};return C&&!b.has(e)&&n==null&&(C.register(s,{event:e,eventFlow:{endCancel:s.endCancel,isActive:s.isActive}}),i=new WeakRef(s)),s}l.QPL_DEFAULT_TIMEOUT_IN_MS=c,l.QPL_RECEIVE_MESSAGE_TIMEOUT_IN_MS=d,l.QPL_MEDIA_DOWNLOAD_TIMEOUT_IN_MS=m,l.clear=h,l.subscribe=y,l.startMetric=v}),98);
__d("WAAPIMetrics",["WAGlobals","WAJids","WAPREList","WAPREMetrics"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return n===void 0&&(n={}),function(){for(var r=u(t,n),o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return e.apply(void 0,[r].concat(a)).then(function(e){return r.endSuccess(),e}).catch(function(e){throw r.endFail("error",{string:{error:""+e.toString()}}),e})}}function s(e,t,n){return n===void 0&&(n={}),function(){var r=u(t,n);return e.apply(void 0,arguments).then(function(e){return r.endSuccess(),e}).catch(function(e){throw r.endFail("error",{string:{error:""+e.toString()}}),e})}}function u(e,t){var n,r;t===void 0&&(t={});var a=null;try{a=o("WAGlobals").getDependencies().isEmployee()&&o("WAGlobals").getDependencies().isUseridAnnotationEnabled()?o("WAJids").extractUserId(o("WAGlobals").getMyUserJid()).slice(-5):null}catch(e){}return o("WAPREMetrics").startMetric(o("WAPREList").PRE_METRIC.WA_JOB_MANAGER,babelHelpers.extends({},t,{string:babelHelpers.extends({},(n=(r=t)==null?void 0:r.string)!=null?n:{},{name:e,userHash:a})}))}l.withMetrics=e,l.withMetricWrapper=s}),98);
__d("WAAPIDeferred",["WAAPIMetrics","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("requireDeferred"))("WADbPersonalSenderKeyStatusTxns").__setRef("WAAPIDeferred"),u=e("WADbRegistrationApi").__setRef("WAAPIDeferred"),c=e("WADownloadMedia").__setRef("WAAPIDeferred"),d=e("WAGenerateAndUploadPreKeys").__setRef("WAAPIDeferred"),m=e("WAGetCurrentUserDeviceList").__setRef("WAAPIDeferred"),p=e("WAGetDevices").__setRef("WAAPIDeferred"),_=e("WAGetIdentityKeys").__setRef("WAAPIDeferred"),f=e("WANotifyDeviceChange").__setRef("WAAPIDeferred"),g=e("WAPublishAppDataProtocol").__setRef("WAAPIDeferred"),h=e("WAPublishMessage").__setRef("WAAPIDeferred"),y=e("WAQueryGroups").__setRef("WAAPIDeferred"),C=e("WARemoveCurrentDevice").__setRef("WAAPIDeferred"),b=e("WARemoveDevice").__setRef("WAAPIDeferred"),v=e("WASendAppDataFanoutProtocol").__setRef("WAAPIDeferred"),S=e("WASendMsgUtilV2").__setRef("WAAPIDeferred"),R=e("WASendPing").__setRef("WAAPIDeferred"),L=e("WASyncAbProps").__setRef("WAAPIDeferred"),E={getCurrentUserDeviceList:function(){return m.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.getCurrentUserDeviceList,"getCurrentUserDeviceList")()})},syncAbProps:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return L.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.syncAbProps,"syncAbProps").apply(void 0,t)})},generateAndUploadPreKeys:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.generateAndUploadPreKeys,"generateAndUploadPreKeys",{bool:{deferred_load:!0}}).apply(void 0,t)})},publishAppData:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return g.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.publishAppData,"publishAppData",{bool:{deferred_load:!0}}).apply(void 0,t)})},getDevicesBeforeSend:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S.load().then(function(e){var n=e.getDevicesBeforeSend;return o("WAAPIMetrics").withMetrics(n,"getDevicesBeforeSend",{bool:{deferred_load:!0}}).apply(void 0,t)})},getIdentityKeys:function(){return _.load().then(function(e){var t=e.getIdentityKeysInWorker;return o("WAAPIMetrics").withMetrics(t,"getIdentityKeys",{bool:{deferred_load:!0}})()})},publishMessage:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.load().then(function(e){var n=e.publishMessage;return o("WAAPIMetrics").withMetricWrapper(n,"publishMessage",{bool:{deferred_load:!0}}).apply(void 0,t)})},sendChatMessage:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return S.load().then(function(e){var n=e.sendChatMessage;return o("WAAPIMetrics").withMetrics(n,"sendChatMessage",{bool:{deferred_load:!0}}).apply(void 0,t)})},updateClockSkew:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return R.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.updateClockSkew,"updateClockSkew",{bool:{deferred_load:!0}}).apply(void 0,t)})},queryGroups:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,t.concat([!1]))})},queryGroupsForce:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return y.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.queryGroups,"queryGroups",{bool:{deferred_load:!0}}).apply(void 0,t.concat([!0]))})},getDevices:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.getDevices,"getDevices",{bool:{deferred_load:!0}}).apply(void 0,t)})},removeDevice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return b.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.removeDevice,"=>",{bool:{deferred_load:!0}}).apply(void 0,t)})},removeCurrentDevice:function(){return C.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.removeCurrentDevice,"removeCurrentDevice",{bool:{deferred_load:!0}})()})},notifyDeviceChange:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return f.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.notifyDeviceChange,"notifyDeviceChange",{bool:{deferred_load:!0}}).apply(void 0,t)})},saveLastSessionDeviceWasLinkedTo:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.saveLastSessionDeviceWasLinkedTo,"saveLastSessionDeviceWasLinkedTo").apply(void 0,t)})},sendAppData:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.load().then(function(e){return o("WAAPIMetrics").withMetrics(e.sendAppDataToDevicesProtocol,"sendAppData",{bool:{deferred_load:!0}}).apply(void 0,t)})},setRotateSenderKeyToTrue:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.load().then(function(e){return o("WAAPIMetrics").withMetrics(function(t,n){return e.bulkSetRotateSenderKeyToTrue(n)},"setRotateSenderKeyToTrue").apply(void 0,t)})},downloadMedia:function(t){return c.load().then(function(e){return e.downloadMedia(t)})},cachedDownloadFullMediaOnly:function(t){return c.load().then(function(e){return e.cachedDownloadFullMediaOnly(t)})}},k=E;l.default=k}),98);
__d("WADbDeviceRegistration",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=25,s=6,u=s,c="https://reg-e2ee.facebook.com",d=r("gkx")("13108")?"https://reg-e2ee.messenger.com":c,m="https://v.whatsapp.net",p="https://reg-e2ee.instagram.com",_="/v2/fb_icdc_fetch",f="/v2/fb_register_v2",g="Device has already been registered to WA servers",h="Device registration finished successfully",y="Device registration retries failed "+s+" times. No longer attempting registration.",C="Device registration response was null",b="Current user id is zero",v="CryptoAuthToken is empty",S="CryptoAuthToken is expired",R={failed:"failed",finished:"finished"};l.MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE=e,l.MAX_DEVICE_REGISTRATION_RETRIES=s,l.MAX_ROTATE_CRYPTO_AUTH_TOKEN_RETRIES=u,l.REG_FB_DOMAIN=c,l.REG_MSGR_DOMAIN=d,l.REG_WA_DOMAIN=m,l.REG_IGD_DOMAIN=p,l.ICDC_ENDPOINT=_,l.REGISTRATION_ENDPOINT=f,l.DEVICE_ALREADY_REGISTERED=g,l.DEVICE_SUCCESSFULLY_REGISTERED=h,l.FAILED_REGISTRATION_RETRIES=y,l.NULL_RESPONSE_FROM_SERVER=C,l.DEVICE_REGISTER_ERROR_ZERO_AS_USER_ID=b,l.DEVICE_REGISTER_ERROR_EMPTY_CAT_TOKEN=v,l.DEVICE_REGISTER_ERROR_EXPIRED_CAT_TOKEN=S,l.RegistrationStatesEnum=R}),98);
__d("WAPromiseBackoffs",["Promise","err"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){if(e===0)return 0;for(var n=g(t.algo),r=1;r<e;r++)n();return d(t,n())}function u(e){var t=e.relativeDelay,n=t===void 0?!1:t,r=null,o=g(e.algo);return function(){var t=r;if(t==null)return r=n?Date.now():0,0;var a=d(e,o());if(n){var i=Date.now(),l=i-t;l>0&&(a=Math.max(0,a-l)),r=i}return a}}function c(t){var r=u(t);return function(o){return new(e||(e=n("Promise")))(function(e){var t=r();t>0?setTimeout(e,t,o):e(o)})}}function d(e,t){var n=e.max,r=e.min,o=e.jitter,a=o===void 0?.1:o,i=t;return n!=null&&i>n&&(i=n),r!=null&&i<r&&(i=r),a!==0&&(i=Math.ceil(i*(1+a*Math.random()))),i}function m(e){var t=e.second-e.first,n=e.first-t;return function(){var e=t+n;return n=t,t=e,e}}function p(e){var t=e.base,n=t===void 0?2:t,r=e.first;return function(){var e=r;return r*=n,e}}function _(e){var t=e.delay;return function(){return t}}function f(e){var t=e.toMs,n=e.backoff,r=g(n);return function(){return t(r())}}function g(e){switch(e.type){case"fibonacci":return m(e);case"exponential":return p(e);case"constant":return _(e);case"adjust":return f(e);default:throw r("err")("makeTimeFunc unrecognized backoff "+e.type)}}l.getDelay=s,l.createTimer=u,l.createPromiseTimer=c}),98);/*FB_PKG_DELIM*/
__d("AutoplayRulesEngine",[],(function(t,n,r,o,a,i){"use strict";var e=-2,l=-1,s=(function(){function t(t){this.$1=e,this.$2=t}var n=t.prototype;return n.evaluateAutoplay=function(t,n){var e=n(),r=l;if(t)for(var o=0;o<this.$2.length;o++){var a=this.$2[o](t);if(a!=="SKIP"){e=a,r=o;break}}return this.$1=r,e},n.getIndexOfLastWinningRule=function(){return this.$1},n.getRules=function(){return this.$2},t})();i.default=s}),66);
__d("CVCv3DisabledPlayerOrigins",[],(function(t,n,r,o,a,i){var e=Object.freeze({BEEPER:"beeper",FB_STORIES:"fb_stories"});i.default=e}),66);
__d("CVCv3DisabledPlayerSubOrigins",[],(function(t,n,r,o,a,i){var e=Object.freeze({LIVE_BEEPER:"live_beeper"});i.default=e}),66);
__d("CvcV3HttpEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1856513"),s=o("FalcoLoggerInternal").create("cvc_v3_http_event",e),u=s;l.default=u}),98);
__d("CVCv3SubscriptionHelper",["CvcV3HttpEventFalcoEvent","DateConsts","guid"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=r("guid")(),this.$3=(t!=null?t:"null")+"::"+(n!=null?n:"null"),this.$4=null,this.$5=null}var t=e.prototype;return t.isValidSubscription=function(){return!!this.$1},t.makeCVCv3StateUpdate=function(t,n,r,a){var e=null;t!=null&&!Number.isNaN(t)&&n!=null&&!Number.isNaN(n)&&(e={m:a,pf:Math.floor((n-t)*o("DateConsts").MS_PER_SEC),s:r,sa:Math.floor(t*o("DateConsts").MS_PER_SEC)});var i={pps:this.$4,ps:e,si:this.$2,so:this.$3,vi:this.$1};return this.$4=e,i},t.makeUnifiedVideoCVCUpdate=function(t,n,r,o,a){var e=this.makeCVCv3StateUpdate(t,n,r,o);return this.$5!=null&&(e.tk=this.$5),babelHelpers.extends({},e,a)},t.processUnifiedResponse=function(t){var e=t;return this.$5=e.tk,e},t.clearAnyPreviousContext=function(){this.$4=null},t.logHttpRequestSuccess=function(t){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_success",duration_ms:t!=null?t.toString():null,countable_id:e.$1}})},t.logHttpRequestFailure=function(t,n){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_failed",error_msg:t,duration_ms:n!=null?n.toString():null,countable_id:e.$1}})},t.logHttpRequestTimeout=function(t){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_request_timeout",duration_ms:t!=null?t.toString():null,countable_id:e.$1}})},t.logHttpResponseBad=function(t,n){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:"http_response_bad",error_msg:t,duration_ms:n!=null?n.toString():null,countable_id:e.$1}})},t.logDebugInfo=function(t){var e=this;r("CvcV3HttpEventFalcoEvent").log(function(){return{name:t,countable_id:e.$1}})},e})();l.default=e}),98);
__d("CappedListItemContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext();l.default=u}),98);
__d("CometAudioManagerHooks",["CometAudioManagerContexts","FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=s(o("CometAudioManagerContexts").AudioApiContext);return e}l.useAudioApi=u}),98);
__d("CometFullScreen",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){var r=t.requestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen||t.webkitRequestFullscreen;return typeof r=="function"?r.call(t):(e||(e=n("Promise"))).reject()}function s(){var t=document.exitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen||document.webkitExitFullscreen;return typeof t=="function"?t.call(document):(e||(e=n("Promise"))).reject()}function u(){return(document.webkitFullscreenEnabled===!0||document.mozFullScreenEnabled===!0||document.msFullscreenEnabled===!0||document.fullscreenEnabled===!0)&&(typeof document.webkitExitFullscreen=="function"||typeof document.mozCancelFullScreen=="function"||typeof document.msExitFullscreen=="function"||typeof document.exitFullscreen=="function")}function c(){return document.fullscreenElement||document.webkitFullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||null}function d(){return c()!=null}function m(){return["webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange","fullscreenchange"]}function p(e){var t=window.document,n=!1,r=!0;return m().forEach(function(o){t.addEventListener(o,e,{capture:n,passive:r})}),function(){m().forEach(function(r){t.removeEventListener(r,e,n)})}}i.requestFullScreen=l,i.exitFullScreen=s,i.isSupported=u,i.getFullScreenElement=c,i.isFullScreen=d,i.getFullScreenChangeEventNames=m,i.subscribeToFullScreenChangeEvent=p}),66);
__d("CometLightweightVideoAttachmentContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({isLightweightVideoAttachment:!1});l.default=u}),98);
__d("CometVideoPlayerLoggingConfigForDisabledLogging",[],(function(t,n,r,o,a,i){"use strict";function e(){return{disableCVCSubscription:!0,disableLogging:!0,loggingToSNAPLCreateMetadataProvider:null,loggingToSNAPLEnabled:!1,loggingToVPLEnabled:!1}}i.createCometVideoPlayerLoggingConfigForDisabledLogging=e}),66);
__d("useStatesInMap",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e,t){var n=o("react-compiler-runtime").c(11),r=c(e),a;n[0]===Symbol.for("react.memo_cache_sentinel")?(a={},n[0]=a):a=n[0];var i=c(a),l=d(t),s=l[0],m=l[1],p,_;n[1]!==e||n[2]!==t?(p=function(){if(r.current!==e){var n;r.current=e,m((n=i.current[e])!=null?n:t)}},_=[i,m,r,e,t],n[1]=e,n[2]=t,n[3]=p,n[4]=_):(p=n[3],_=n[4]),u(p,_);var f,g;n[5]!==s||n[6]!==e?(f=function(){i.current[e]=s},g=[s,e],n[5]=s,n[6]=e,n[7]=f,n[8]=g):(f=n[7],g=n[8]),u(f,g);var h;return n[9]!==s?(h=[s,m],n[9]=s,n[10]=h):h=n[10],h}l.default=m}),98);
__d("CometWarningScreenContext",["react","react-compiler-runtime","useStatesInMap"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useCallback,m=u.useContext,p=u.useMemo,_=c({makeContentVisibleDespiteOverlay:function(){},overlaySettings:{additionalRequiredHeight:0,isContentVisibleDespiteOverlay:null,isOnFeedMedia:!1,overlayExists:!1,overlayShown:!1,parentRenderInstructions:"CLIP_TO_MEDIA",videoController:null},setAdditionalRequiredHeight:function(){},setIsOnFeedMedia:function(){},setOverlayExists:function(){},setParentRenderInstructions:function(){},showOverlay:function(){}});function f(e){var t=o("react-compiler-runtime").c(28),n=e.children,a=e.identifier,i=e.isOnFeedMedia,l=e.overlayExists,u=e.overlayShownOverride,c=e.videoController,d=u!=null?u:l,m;t[0]!==i||t[1]!==l||t[2]!==d||t[3]!==c?(m={additionalRequiredHeight:0,isContentVisibleDespiteOverlay:null,isOnFeedMedia:i,overlayExists:l,overlayShown:d,parentRenderInstructions:"CLIP_TO_MEDIA",videoController:c},t[0]=i,t[1]=l,t[2]=d,t[3]=c,t[4]=m):m=t[4];var p=r("useStatesInMap")(a,m),f=p[0],g=p[1],h;t[5]!==g?(h=function(t){g(function(e){return babelHelpers.extends({},e,{overlayShown:t})})},t[5]=g,t[6]=h):h=t[6];var y=h,C;t[7]!==g?(C=function(t){g(function(e){return babelHelpers.extends({},e,{isContentVisibleDespiteOverlay:t})})},t[7]=g,t[8]=C):C=t[8];var b=C,v;t[9]!==g?(v=function(t){g(function(e){return babelHelpers.extends({},e,{overlayExists:t})})},t[9]=g,t[10]=v):v=t[10];var S=v,R;t[11]!==g?(R=function(t){g(function(e){return babelHelpers.extends({},e,{isOnFeedMedia:t})})},t[11]=g,t[12]=R):R=t[12];var L=R,E;t[13]!==g?(E=function(t){g(function(e){return babelHelpers.extends({},e,{additionalRequiredHeight:t})})},t[13]=g,t[14]=E):E=t[14];var k=E,I;t[15]!==g?(I=function(t){g(function(e){return babelHelpers.extends({},e,{parentRenderInstructions:t})})},t[15]=g,t[16]=I):I=t[16];var T=I,D;t[17]!==b||t[18]!==f||t[19]!==k||t[20]!==L||t[21]!==S||t[22]!==T||t[23]!==y?(D={makeContentVisibleDespiteOverlay:b,overlaySettings:f,setAdditionalRequiredHeight:k,setIsOnFeedMedia:L,setOverlayExists:S,setParentRenderInstructions:T,showOverlay:y},t[17]=b,t[18]=f,t[19]=k,t[20]=L,t[21]=S,t[22]=T,t[23]=y,t[24]=D):D=t[24];var x=D,$;return t[25]!==n||t[26]!==x?($=s.jsx(_.Provider,{value:x,children:n}),t[25]=n,t[26]=x,t[27]=$):$=t[27],$}function g(){var e=m(_),t=e.overlaySettings;return t.overlayExists}function h(){var e=m(_),t=e.overlaySettings;return t.videoController}function y(){var e=m(_),t=e.overlaySettings;return t.overlayShown}function C(){var e=m(_),t=e.overlaySettings;return t.isOnFeedMedia}function b(){var e=m(_),t=e.overlaySettings;return t.isContentVisibleDespiteOverlay}function v(){var e=y(),t=b();return e?t:!0}function S(){var e=m(_),t=e.overlaySettings;return t.additionalRequiredHeight}function R(){var e=m(_),t=e.overlaySettings;return t.parentRenderInstructions}function L(){var e=m(_),t=e.showOverlay;return t}function E(){var e=m(_),t=e.makeContentVisibleDespiteOverlay;return t}function k(){var e=m(_),t=e.setOverlayExists;return t}function I(){var e=m(_),t=e.setIsOnFeedMedia;return t}function T(){var e=m(_),t=e.setAdditionalRequiredHeight;return t}function D(){var e=m(_),t=e.setParentRenderInstructions;return t}l.CometWarningScreenContextProvider=f,l.useHasOverlay=g,l.useHasVideoController=h,l.useIsOverlayShown=y,l.useIsOnFeedMedia=C,l.useIsContentVisibleDespiteOverlay=b,l.useIsContentVisible=v,l.useAdditionalRequiredHeight=S,l.useParentRenderInstructions=R,l.useShowOverlay=L,l.useMakeContentVisibleDespiteOverlay=E,l.useSetOverlayExists=k,l.useSetIsOnFeedMedia=I,l.useSetAdditionalRequiredHeight=T,l.useSetParentRenderInstructions=D}),98);
__d("makeAudioSymbol",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t+"::"+e}i.default=e}),66);
__d("CoreVideoPlayerAudioClient.react",["CometAudioManagerContexts","CometAudioManagerHooks","CometThrottle","VideoPlayerHooks","VideoPlayerPortalingPlaceInfoProvider.react","createVideoStateHook","makeAudioSymbol","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useContext,d=u.useEffect,m=u.useId,p=u.useMemo,_=u.useRef,f=u.useState,g=o("createVideoStateHook").createVideoStateHook(),h=g.stateHook,y=.01;function C(){var e=o("react-compiler-runtime").c(5),t=(s||(s=o("VideoPlayerHooks"))).useController(),n;e[0]!==t?(n=function(){return t.getCurrentState().volume},e[0]=t,e[1]=n):n=e[1];var r=f(n),a=r[0],i=r[1],l,u;return e[2]!==t?(l=function(){var e=t.subscribe(function(){var e=t.getCurrentState().volume;i(function(t){return e===0||e===1||Math.abs(t-e)>y?e:t})});return i(t.getCurrentState().volume),(function(){e.remove()})},u=[t],e[2]=t,e[3]=l,e[4]=u):(l=e[3],u=e[4]),d(l,u),a}function b(){"use no memo";var e=h(!1),t=e[0],n=e[1],a=m(),i=(s||(s=o("VideoPlayerHooks"))).useInstanceKey(),l=p(function(){return r("makeAudioSymbol")(a,i)},[a,i]),u=o("CometAudioManagerHooks").useAudioApi(),g=_(u);d(function(){g.current=u},[u]);var y=s.useController(),b=s.useLastPlayReason(),v=s.useLastMuteReason(),S=s.useMuted(),R=C(),L=r("usePrevious")(R),E=s.usePaused(),k=c(o("CometAudioManagerContexts").CometAudioLocalScopeContext),I=c(o("CometAudioManagerContexts").CometAudioGroupContext),T=o("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),D=s.useVolumeSetting(),x=p(function(){return(I==null?void 0:I.groupID)||o("CometAudioManagerContexts").makeAudioGroupID()},[I==null?void 0:I.groupID]),$=f(!0),P=$[0],N=$[1],M=_(!0),w=_(null),A=f(function(){return r("CometThrottle")(function(e){g.current&&g.current.update(e)},50,{leading:!0,trailing:!0})}),F=A[0],O=p(function(){return{audioLocalScope:k,controller:y,groupID:x,instanceKey:i,lastMuteReason:v,lastPlayReason:b,muted:S,paused:E,previousVolume:L,symbol:l,videoPlayerPortalingPlaceInfo:T,volume:R}},[k,y,x,i,v,b,S,E,L,l,T,R]);d(function(){if(D!=null&&!t){var e=w.current!==D;(M.current||e)&&(M.current=!1,w.current=D,y.setVolume(D),n(!0))}},[y,t,n,D]);var B=p(function(){return I||{allowSound:P,groupID:x,setAllowSound:N}},[I,P,x,N]),W=_(B),q=_(!1);d(function(){if(u&&!q.current){q.current=!0;try{u.register(O,W.current)}finally{q.current=!1}}return function(){u&&u.unregister(l,x)}},[u,O,x,l]),d(function(){u&&F(O)},[u,O,F]),d(function(){return function(){F&&F.cancel&&F.cancel()}},[F]);var U=_(!1),V=_(null);return d(function(){var e=V.current!==P;if(!P&&g.current&&!U.current&&e){U.current=!0;try{y.setMuted(!0,"audio_manager_initiated"),V.current=P}finally{U.current=!1}}},[P,g,y]),null}l.default=b}),98);
__d("VideoPlayerAutoplayHooks",["FBLogger","VideoPlayerAutoplayContexts","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e=s(o("VideoPlayerAutoplayContexts").AutoplayApiContext);if(e==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Empty AutoplayApiContext. Are you rendering useAutoplayApi outside of VideoAutoplayManagerX?");return e}function c(){return s(o("VideoPlayerAutoplayContexts").VideoAutoplayLocalScopeContext)}l.useAutoplayApi=u,l.useVideoAutoplayLocalScope=c}),98);
__d("VideoPlayerDebugAutoplayAPI",["cr:1453865","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=n("cr:1453865"))!=null?e:{useVideoPlayerDebugAPI:r("emptyFunction").thatReturns(null),useVideoPlayerDebugAPIDefinition:r("emptyFunction"),useVideoPlayerDebugInfo:r("emptyFunction").thatReturns(null)};l.default=s}),98);
__d("evaluateVideoAutoplayDefaultAllowRule",[],(function(t,n,r,o,a,i){"use strict";function e(){return"ALLOW"}e.displayName="evaluateVideoAutoplayDefaultRule",i.default=e}),66);
__d("makeSelectedAutoplayVideoSymbol",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return t+"::"+e}i.default=e}),66);
__d("useAutoplayRulesEngine",["AutoplayRulesEngine","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e){var t=o("react-compiler-runtime").c(8),n=c(e),a;t[0]!==e?(a=function(){return new(r("AutoplayRulesEngine"))(e)},t[0]=e,t[1]=a):a=t[1];var i=d(a),l=i[0],s=i[1],m,p;t[2]!==e?(m=function(){n.current!==e&&s(function(){return new(r("AutoplayRulesEngine"))(e)})},p=[e],t[2]=e,t[3]=m,t[4]=p):(m=t[3],p=t[4]),u(m,p);var _,f;return t[5]!==l?(_=function(){n.current=l.getRules()},f=[l],t[5]=l,t[6]=_,t[7]=f):(_=t[6],f=t[7]),u(_,f),l}l.default=m}),98);
__d("useConcurrentAutoplayManagementAPI",["react","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useId,c=s.useState;function d(){return u()}function m(){var e=[];return{isControllingComponent:function(n){var t=e.length;return e[t-1]===n},registerControllingComponent:function(n){r("removeFromArray")(e,n),e.push(n)},unregisterControllingComponent:function(n){var t=e.length;return t>1&&r("removeFromArray")(e,n),t>1}}}function p(){var e=c(_),t=e[0];return t}function _(){return m()}l.useAutoplayControlID=d,l.createConcurrentAutoplayManagementAPI=m,l.useConcurrentAutoplayManagementAPI=p}),98);
__d("VideoPlayerContextSensitiveConfigUtils",[],(function(t,n,r,o,a,i){"use strict";var e=function(t,n){return n.every(function(e){return t[e.name]===e.value})},l=function(n,r){return r.find(function(t){return e(n,t.contexts)})};i.getFirstMatchingValueAndContextTargets=l}),66);
__d("VideoPlayerContextSensitiveConfigResolver",["VideoPlayerContextSensitiveConfigPayload","VideoPlayerContextSensitiveConfigUtils","cr:1724253"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1={},this.$2={},e==null?(this.$3=r("VideoPlayerContextSensitiveConfigPayload").static_values,this.$4=r("VideoPlayerContextSensitiveConfigPayload").context_sensitive_values):(this.$3=e.staticValues,this.$4=e.contextSensitiveValues)}var t=e.prototype;return t.setContexts=function(t){this.$1=t,this.$2=this.$5(t)},t.getValue=function(t){return this.$2[t]!=null?this.$2[t]:this.$3[t]!=null?this.$3[t]:null},t.$5=function(t){var e=this;return Object.keys(this.$4).reduce(function(n,r){var a=e.$4[r];if(a!=null){var i=o("VideoPlayerContextSensitiveConfigUtils").getFirstMatchingValueAndContextTargets(t,a);i!=null&&(n[r]=i.value)}return n},{})},e.getPayload=function(){return r("VideoPlayerContextSensitiveConfigPayload")},e.getSources=function(){return n("cr:1724253")},e})();l.default=e}),98);
__d("VideoPlayerShakaGlobalConfig",["VideoPlayerContextSensitiveConfigResolver"],(function(t,n,r,o,a,i,l){var e=new(r("VideoPlayerContextSensitiveConfigResolver")),s={},u=function(t){s=t},c=function(n,r){if(s&&typeof s[n]=="boolean")return s[n];var t=e.getValue(n);return t!=null&&typeof t=="boolean"?t:r},d=function(n,r){if(s&&typeof s[n]=="number")return s[n];var t=e.getValue(n);return t!=null&&typeof t=="number"?t:r},m=function(n,r){if(s&&typeof s[n]=="string")return s[n];var t=e.getValue(n);return t!=null&&typeof t=="string"?t:r};l.setGlobalOverrideConfig=u,l.getBool=c,l.getNumber=d,l.getString=m}),98);
__d("VideoPlayerViewabilityHooks",["VideoPlayerHooks"],(function(t,n,r,o,a,i,l){"use strict";var e;l.useVideoPlayerExtendedPassiveViewabilityInfo=(e||(e=o("VideoPlayerHooks"))).useVideoPlayerExtendedPassiveViewabilityInfo,l.useVideoPlayerPassiveViewabilityInfo=e.useVideoPlayerPassiveViewabilityInfo,l.useVideoPlayerViewabilityInfo=e.useVideoPlayerViewabilityInfo}),98);
__d("useEventCallbackOn",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t,n){var r=o("react-compiler-runtime").c(5),a,i;r[0]!==n||r[1]!==t||r[2]!==e?(a=function(){return e.addEventListener(t,n),(function(){e.removeEventListener(t,n)})},i=[e,t,n],r[0]=n,r[1]=t,r[2]=e,r[3]=a,r[4]=i):(a=r[3],i=r[4]),s(a,i)}l.default=u}),98);
__d("useIsBackgrounded",["emptyFunction","react","useEventCallbackOn"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useState;function d(){var e=t.document;return typeof e.hidden!="undefined"?"visibilitychange":typeof e.mozHidden!="undefined"?"mozvisibilitychange":typeof e.msHidden!="undefined"?"msvisibilitychange":typeof e.webkitHidden!="undefined"?"webkitvisibilitychange":"visibilitychange"}function m(){var e=t.document;return typeof e.hidden!="undefined"?e.hidden:typeof e.mozHidden!="undefined"?e.mozHidden:typeof e.msHidden!="undefined"?e.msHidden:typeof e.webkitHidden!="undefined"?e.webkitHidden:!1}var p=d();function _(e){var n=t.document.hasFocus?t.document.hasFocus():!0,r=m();return r||(e?!1:!n)}function f(){return m()}function g(e){"use no memo";var n=(e==null?void 0:e.noPauseOnBlurOrFocus)===!0,o=c(function(){return _(n)}),a=o[0],i=o[1],l=c(function(){return f()}),s=l[0],d=l[1],m=!!e&&e.scrollTerminatesHiddenOrBlurred===!0,g=u(function(){i(_(n)),d(f())},[i,n]),h=g,y=u(function(){var e=_(n);e&&m&&a&&i(!1)},[a,n,m]);return n&&(h=r("emptyFunction")),r("useEventCallbackOn")(t.window,"blur",h),r("useEventCallbackOn")(t.window,"focus",h),r("useEventCallbackOn")(t.document,p,g),r("useEventCallbackOn")(t.window,"scroll",y),{isDocumentHidden:s,isDocumentHiddenOrBlurred:a}}l.default=g}),98);
__d("VideoPlayerOzWWWGlobalConfig",["VideoPlayerShakaGlobalConfig"],(function(t,n,r,o,a,i,l){"use strict";var e="oz_www_",s={getBool:function(n,r){return o("VideoPlayerShakaGlobalConfig").getBool(e+n,r)},getNumber:function(n,r){return o("VideoPlayerShakaGlobalConfig").getNumber(e+n,r)},getString:function(n,r){return o("VideoPlayerShakaGlobalConfig").getString(e+n,r)}},u=s;l.default=u}),98);
__d("useVideoPlayerBandwidthEstimate",["VideoPlayerOzWWWGlobalConfig","oz-player/networks/OzBandwidthEstimator","react","react-compiler-runtime","useInterval"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState,u=5e3;function c(){var e=o("react-compiler-runtime").c(2),t=d,n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=t(),e[0]=n):n=e[0];var a=s(n),i=a[0],l=a[1],c;return e[1]===Symbol.for("react.memo_cache_sentinel")?(c=function(){return l(t())},e[1]=c):c=e[1],r("useInterval")(c,u),i}function d(){return r("oz-player/networks/OzBandwidthEstimator").getBandwidth(r("VideoPlayerOzWWWGlobalConfig"))}l.default=c}),98);
__d("useVideoAutoplayState",["HiddenSubtreePassiveContext","VideoPlayerHooks","VideoPlayerShakaGlobalConfig","VideoPlayerViewabilityHooks","react","useIsBackgrounded","useVideoPlayerBandwidthEstimate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.startTransition,d=u.useContext,m=u.useEffect,p=u.useMemo,_=u.useRef,f=u.useState;function g(e){"use no memo";var t=(s||(s=o("VideoPlayerHooks"))).useAdClientToken(),n=s.useAutoplayGatingResult(),a=s.useBroadcastStatus(),i=s.useEnded(),l=s.useIsFrozenPassive(),u=s.useLastPauseReason(),g=s.useLastPlayReason(),h=s.useMuted(),y=s.usePaused(),C=d(r("HiddenSubtreePassiveContext")),b=!t,v=(e==null?void 0:e.noPauseOnBlurOrFocus)===!0||o("VideoPlayerShakaGlobalConfig").getBool("comet_www_no_pause_on_blur_or_focus_events",!1),S=r("useIsBackgrounded")({noPauseOnBlurOrFocus:v,scrollTerminatesHiddenOrBlurred:b}),R=S.isDocumentHidden,L=S.isDocumentHiddenOrBlurred,E=r("useVideoPlayerBandwidthEstimate")(),k=o("VideoPlayerViewabilityHooks").useVideoPlayerPassiveViewabilityInfo(),I=o("VideoPlayerViewabilityHooks").useVideoPlayerExtendedPassiveViewabilityInfo(),T=f(C.getCurrentState().backgrounded),D=T[0],x=T[1],$=f(C.getCurrentState().hidden),P=$[0],N=$[1];m(function(){var e=function(){c(function(){var e=C.getCurrentState();N(e.hidden),x(e.backgrounded)})},t=C.subscribeToChanges(e);return e(),function(){t.remove()}},[C,x,N]);var M=f(function(){return l.getCurrentState()}),w=M[0],A=M[1];m(function(){var e=l.subscribeToChanges(function(e){A(e)}),t=l.getCurrentState();return A(t),function(){e.remove()}},[l,A]);var F=p(function(){return{adClientToken:t,autoplayGatingResult:n,bandwidthEstimate:E,broadcastStatus:a,controllerIsFrozen:w,currentSubtreeIsBackgrounded:D,currentSubtreeIsHidden:P,ended:i,hiddenSubtreePassive:C,isDocumentHidden:R,isDocumentHiddenOrBlurred:L,isFrozenPassive:l,lastPauseReason:u,lastPlayReason:g,muted:h,paused:y,videoPlayerExtendedPassiveViewabilityInfo:I,videoPlayerPassiveViewabilityInfo:k}},[t,n,E,a,w,D,P,i,C,R,L,l,u,g,h,y,I,k]),O=f(F),B=O[0],W=O[1],q=_(B);return m(function(){q.current=B},[B]),m(function(){var e=!1;for(var t in F)if(Object.prototype.hasOwnProperty.call(F,t)&&F[t]!==q.current[t]){e=!0;break}e&&W(F)},[F,W]),B}l.default=g}),98);
__d("CoreVideoPlayerAutoplayClient.react",["CoreVideoPlayerAutoplayClientUtils","HiddenSubtreePassiveContext","VideoPlayerAutoplayHooks","VideoPlayerDebugAutoplayAPI","VideoPlayerHooks","VideoPlayerViewabilityConstants","WwwCometVideoAutoplayFalcoEvent","evaluateVideoAutoplayDefaultAllowRule","evaluateVideoAutoplayDefaultIgnoreRule","makeSelectedAutoplayVideoSymbol","react","react-compiler-runtime","useAutoplayRulesEngine","useConcurrentAutoplayManagementAPI","useVideoAutoplayState"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useId,_=u.useMemo,f=u.useRef,g=u.useState;function h(){var e=o("react-compiler-runtime").c(70),t=p(),n=(s||(s=o("VideoPlayerHooks"))).useCanAutoplay(),a=s.useInstanceKey(),i;e[0]!==t||e[1]!==a?(i=r("makeSelectedAutoplayVideoSymbol")(t,a),e[0]=t,e[1]=a,e[2]=i):i=e[2];var l=i,u=f(l),c,_;e[3]!==l?(c=function(){u.current=l},_=[l],e[3]=l,e[4]=c,e[5]=_):(c=e[4],_=e[5]),m(c,_);var h=d(r("HiddenSubtreePassiveContext")),y=s.useController(),C=f(!1),b=o("useConcurrentAutoplayManagementAPI").useAutoplayControlID(),v,S;e[6]!==b||e[7]!==y?(v=function(){o("CoreVideoPlayerAutoplayClientUtils").log(u.current,"[ASSUME CONTROL] "+b),y.registerControllingComponent(b)},S=[y,b],e[6]=b,e[7]=y,e[8]=v,e[9]=S):(v=e[8],S=e[9]),m(v,S);var R=s.useVideoPlayerPassiveViewabilityInfo(),L=s.usePaused(),E=f(L),k=o("VideoPlayerAutoplayHooks").useVideoAutoplayLocalScope(),I=f(k),T,D;e[10]!==k?(T=function(){I.current=k},D=[k],e[10]=k,e[11]=T,e[12]=D):(T=e[11],D=e[12]),m(T,D);var x;e[13]!==y||e[14]!==R?(x=function(){var e=y.getCurrentState(),t=e.lastPlayReason,n=e.paused,o=E.current;E.current=n;var a=R==null?void 0:R.getCurrent();if(a){var i=a.visiblePercentage,l=!n&&n!==o,s=i<r("VideoPlayerViewabilityConstants").DEFAULT_VIEWABILITY_PERCENTAGE_FOR_PAUSE&&i>0;I.current.disableScrollBeforePlayWhenOffscreen!==!0&&l&&t==="user_initiated"&&s&&(C.current=!0)}},e[13]=y,e[14]=R,e[15]=x):x=e[15];var $=x,P=f($),N,M;e[16]!==$?(N=function(){P.current=$},M=[$],e[16]=$,e[17]=N,e[18]=M):(N=e[17],M=e[18]),m(N,M);var w,A;e[19]!==y||e[20]!==$?(w=function(){var e=y.subscribe(function(){$()});return(function(){e.remove()})},A=[y,$],e[19]=y,e[20]=$,e[21]=w,e[22]=A):(w=e[21],A=e[22]),m(w,A);var F;e[23]!==k.noPauseOnBlurOrFocus?(F={noPauseOnBlurOrFocus:k.noPauseOnBlurOrFocus},e[23]=k.noPauseOnBlurOrFocus,e[24]=F):F=e[24];var O=r("useVideoAutoplayState")(F),B=r("useAutoplayRulesEngine")(k.autoplayLocalRules),W=r(n==="allow"?"evaluateVideoAutoplayDefaultAllowRule":"evaluateVideoAutoplayDefaultIgnoreRule"),q;e[25]!==W?(q=function(){return W},e[25]=W,e[26]=q):q=e[26];var U=g(q),V=U[0],H=U[1],G=g(null),z=G[0],j=G[1],K;e[27]!==B||e[28]!==W||e[29]!==O?(K=function(){return B.evaluateAutoplay(O,W)},e[27]=B,e[28]=W,e[29]=O,e[30]=K):K=e[30];var Q=g(K),X=Q[0],Y=Q[1],J=g(null),Z=J[0],ee=J[1],te=f(X),ne=o("VideoPlayerAutoplayHooks").useAutoplayApi(),re=f(ne),oe,ae;e[31]!==ne?(oe=function(){re.current=ne},ae=[ne],e[31]=ne,e[32]=oe,e[33]=ae):(oe=e[32],ae=e[33]),m(oe,ae);var ie=n!=="dangerously_disable_autoplay_management",le,se;e[34]!==ne||e[35]!==k||e[36]!==y||e[37]!==h||e[38]!==a||e[39]!==ie||e[40]!==l?(le=function(){return ne.register(l,a,k,y,h,ie),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"register",autoplay_scope_id:I.current.autoplayScopeID,event_creation_time:Date.now(),initiator:u.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:ne.getAutoplayManagerDebugInfo(I.current).selectedAutoplayVideoSymbol,target:u.current,target_current_autoplay_decision:te.current}}),(function(){ne.unregister(l),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"unregister",autoplay_scope_id:I.current.autoplayScopeID,event_creation_time:Date.now(),initiator:u.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:ne.getAutoplayManagerDebugInfo(I.current).selectedAutoplayVideoSymbol,target:u.current,target_current_autoplay_decision:te.current}})})},se=[ne,k,y,h,a,ie,l],e[34]=ne,e[35]=k,e[36]=y,e[37]=h,e[38]=a,e[39]=ie,e[40]=l,e[41]=le,e[42]=se):(le=e[41],se=e[42]),m(le,se);var ue,ce;e[43]!==ne||e[44]!==b||e[45]!==B||e[46]!==y||e[47]!==W||e[48]!==h||e[49]!==z||e[50]!==Z||e[51]!==l||e[52]!==O||e[53]!==R?(ue=function(){var e=function(){var e=B.evaluateAutoplay(O,W);te.current=e;var t=B.getRules(),n=B.getIndexOfLastWinningRule(),a=n>=0?t[n]:W,i=R&&R.getCurrent(),s=y.getCurrentState(),c=s.paused;if((Z===null||Z!==e)&&(Y(e),ee(e)),e==="PAUSE"&&!c&&y.isControllingComponent(b)){var d=!0;if(P.current(),C.current){C.current=!1;var m=i==null?void 0:i.positionToViewport;m&&y.scrollIntoView(m.top<0),d=!1}if(d){var p="[PAUSE] via short-circuit on "+(a.displayName||a.name)+".";o("CoreVideoPlayerAutoplayClientUtils").log(u.current,p),y.pause("autoplay_initiated"),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:I.current.autoplayScopeID,event_creation_time:Date.now(),initiator:u.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:ne.getAutoplayManagerDebugInfo(I.current).selectedAutoplayVideoSymbol,target:u.current,target_current_autoplay_decision:e}})}}(z===null||z!==a)&&(H(function(){return a}),j(function(){return a}),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"rule_changed",autoplay_scope_id:I.current.autoplayScopeID,event_creation_time:Date.now(),initiator:u.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:ne.getAutoplayManagerDebugInfo(I.current).selectedAutoplayVideoSymbol,target:u.current,target_current_autoplay_decision:e}})),o("CoreVideoPlayerAutoplayClientUtils").log(u.current,"[DECISION: "+e+"] from "+(a.displayName||a.name)),i&&ne.update(l,e,i)},t=h.subscribeToChanges(function(e){h.getCurrentState().hidden||h.getCurrentState().backgrounded?y.isControllingComponent(b)||y.unregisterControllingComponent(b):y.registerControllingComponent(b)}),n=R?R.subscribe(function(){h.getCurrentState().hidden||h.getCurrentState().backgrounded?y.isControllingComponent(b)||y.unregisterControllingComponent(b):y.registerControllingComponent(b),e()}):null;return e(),(function(){t.remove(),n&&n.remove()})},ce=[ne,b,B,y,W,h,z,Z,H,Y,j,ee,l,O,R],e[43]=ne,e[44]=b,e[45]=B,e[46]=y,e[47]=W,e[48]=h,e[49]=z,e[50]=Z,e[51]=l,e[52]=O,e[53]=R,e[54]=ue,e[55]=ce):(ue=e[54],ce=e[55]),m(ue,ce);var de,me;e[56]!==b||e[57]!==X||e[58]!==y?(de=function(){var e=y.isControllingComponent(b),t=y.getCurrentState(),n=t.paused;o("CoreVideoPlayerAutoplayClientUtils").componentShouldPause(X,te.current,n,e)&&(o("CoreVideoPlayerAutoplayClientUtils").log(u.current,"[PAUSE] the video for "+X),y.pause("autoplay_initiated"),r("WwwCometVideoAutoplayFalcoEvent").log(function(){return{autoplay_event_name:"pause",autoplay_scope_id:I.current.autoplayScopeID,event_creation_time:Date.now(),initiator:u.current,initiator_type:"autoplay_component",selected_autoplay_video_symbol:re.current.getAutoplayManagerDebugInfo(I.current).selectedAutoplayVideoSymbol,target:u.current,target_current_autoplay_decision:X}}))},me=[X,y,b],e[56]=b,e[57]=X,e[58]=y,e[59]=de,e[60]=me):(de=e[59],me=e[60]),m(de,me);var pe,_e;e[61]!==b||e[62]!==y?(pe=function(){return(function(){o("CoreVideoPlayerAutoplayClientUtils").log(u.current,"[RELEASE CONTROL] "+b),y.unregisterControllingComponent(b)})},_e=[y,b],e[61]=b,e[62]=y,e[63]=pe,e[64]=_e):(pe=e[63],_e=e[64]),m(pe,_e);var fe;return e[65]!==V||e[66]!==X||e[67]!==k||e[68]!==l?(fe={applicableRule:V,autoplayApiRef:re,autoplayDecision:X,autoplayLocalScope:k,symbol:l},e[65]=V,e[66]=X,e[67]=k,e[68]=l,e[69]=fe):fe=e[69],r("VideoPlayerDebugAutoplayAPI").useVideoPlayerDebugAPIDefinition(fe),null}l.default=h}),98);
__d("normalizeVideoPlayerLoopCount",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){t===void 0&&(t=null),n===void 0&&(n=null);var o=0;if(e==null){var a=t!=null&&t&&n!=null?n:0;a===-1?o=-1:a<0||!Number.isFinite(a)||Math.floor(a)!==a?o=0:a===0&&t===!0?o=-1:o=a}else if(e===-1||e===Number.POSITIVE_INFINITY)o=-1;else{if(e<0||!Number.isFinite(e)||Math.floor(e)!==e)throw r("FBLogger")("comet_video_player").mustfixThrow("Invalid loopingCount: %s",e);o=e}return o}l.default=e}),98);
__d("CoreVideoPlayerMetaData",["VideoPlayerAudioAvailabilityInfo","normalizeVideoPlayerLoopCount"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e!=null&&isFinite(e)&&e>0?e:0}var s=[];function u(t){var n,a,i,l,u=t.sideLoadCaptionsExpected===!0||t.sideLoadCaptionsUrl!=null,c=t.isLiveStreaming===!0;return babelHelpers.extends({},t,{audioAvailabilityInfo:(n=t.audioAvailabilityInfo)!=null?n:o("VideoPlayerAudioAvailabilityInfo").VideoPlayerAudioAvailabilityInfoDefault,autoplayGatingResult:t.autoplayGatingResult!=null?t.autoplayGatingResult:"unknown",canAutoplay:t.canAutoplay!=null?t.canAutoplay:"allow",desiredLatencyMs:(a=t.desiredLatencyMs)!=null?a:0,inbandCaptionsExpected:c,initialRepresentationIds:(i=t.initialRepresentationIds)!=null?i:s,isNCSR:!!t.isNCSR,isPremiumMusicVideo:!!t.isPremiumMusicVideo,latencyToleranceMs:(l=t.latencyToleranceMs)!=null?l:0,loopCount:r("normalizeVideoPlayerLoopCount")(t.loopCount),sideLoadCaptionsExpected:u,startTimestamp:e(t.startTimestamp)})}l.applyDefaultsToCoreVideoPlayerMetaData=u}),98);
__d("VideoPlayerViewabilityProvider.react",["VideoPlayerViewabilityContexts","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(9),n=e.children,r=e.isDesktopPictureInPicture,a=e.isFullscreen,i=e.videoPlayerPassiveViewabilityInfo,l;t[0]!==n||t[1]!==a?(l=s.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerFullscreenContext.Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=l):l=t[2];var u;t[3]!==r||t[4]!==l?(u=s.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerDesktopPictureInPictureContext.Provider,{value:r,children:l}),t[3]=r,t[4]=l,t[5]=u):u=t[5];var c;return t[6]!==u||t[7]!==i?(c=s.jsx(o("VideoPlayerViewabilityContexts").VideoPlayerPassiveViewabilityInfoContext.Provider,{value:i,children:u}),t[6]=u,t[7]=i,t[8]=c):c=t[8],c}l.default=u}),98);
__d("useBlockCappedListItemWhenPlayingVideo",["CappedListItemContext","err","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect;function d(e,t){var n,a=o("react-compiler-runtime").c(4),i=(n=u(r("CappedListItemContext")))==null?void 0:n.registerBlocker,l,s;a[0]!==e||a[1]!==i?(l=function(){if(i){var t=null,n=null,r=function(){var r=e.getCurrentState().playing;if(r!==t&&(t=r,n&&(n(),n=null),r)){var o;n=i({reason:"playing_video",source:o})}};r();var o=e.subscribe(r);return(function(){o.remove(),n&&(n(),n=null)})}},s=[e,i],a[0]=e,a[1]=i,a[2]=l,a[3]=s):(l=a[2],s=a[3]),c(l,s)}l.default=d}),98);
__d("useDisableVirtualizationWhenPlayingVideo",["VirtualizationContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect;function d(e,t){var n=o("react-compiler-runtime").c(5),a=u(r("VirtualizationContext")),i,l;n[0]!==a||n[1]!==e||n[2]!==t?(i=function(){if(a!=null){var n=a.createFlag,r=a.createPin,o=null,i=null,l=function(){i==null&&(i=n("HAS_PLAYER","playerInstanceKey: "+t));var a=e.getCurrentState();a.playing||a.stalling?o||(o=r("player "+t+" is playing")):a.isFullscreen?o||(o=r("player "+t+" is fullscreen")):(o==null||o(),o=null)};l();var s=e.subscribe(l);return(function(){s.remove(),i==null||i(),i=null,o==null||o(),o=null})}},l=[e,t,a],n[0]=a,n[1]=e,n[2]=t,n[3]=i,n[4]=l):(i=n[3],l=n[4]),c(i,l)}l.default=d}),98);
__d("wrapWithContextProviders",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e,t){return t.reduceRight(function(e,t){return t(e)},e)}u.displayName=u.name+" [from "+i.id+"]";function c(e,t){return function(n){return s.jsx(e.Provider,{value:t,children:n})}}l.wrapWithContextProviders=u,l.makeRenderProviderFn=c}),98);
__d("VideoPlayerComponentContainer.react",["CometSSRRenderingStateHooks","CometVisualCompletionAttributes","VideoPlayerContexts","VideoPlayerHooks","VideoPlayerViewabilityProvider.react","clearTimeout","cr:6094","react","react-compiler-runtime","setTimeout","useBlockCappedListItemWhenPlayingVideo","useDisableVirtualizationWhenPlayingVideo","wrapWithContextProviders"],(function(t,n,r,o,a,i,l){"use strict";var e=["children"],s,u,c,d=s||(s=o("react")),m=s,p=m.useCallback,_=m.useEffect,f=m.useRef,g=m.useState;function h(e){var t=o("react-compiler-runtime").c(10),n=f(e),a,i;t[0]!==e?(a=function(){n.current=e},i=[e],t[0]=e,t[1]=a,t[2]=i):(a=t[1],i=t[2]),_(a,i);var l=g(!1),s=l[0],u=l[1],c;t[3]===Symbol.for("react.memo_cache_sentinel")?(c=function(){var e=null;return{cleanup:function(){e&&e()},pingNotIdle:function(){e&&e(),u(!1);var t=r("setTimeout")(function(){u(!0)},n.current);e=function(){r("clearTimeout")(t),e=null}}}},t[3]=c):c=t[3];var d=g(c),m=d[0],p=m.cleanup,h=m.pingNotIdle,y,C;t[4]!==p?(y=function(){return p},C=[p],t[4]=p,t[5]=y,t[6]=C):(y=t[5],C=t[6]),_(y,C);var b;return t[7]!==s||t[8]!==h?(b={isIdle:s,pingNotIdle:h},t[7]=s,t[8]=h,t[9]=b):b=t[9],b}function y(){var e=o("react-compiler-runtime").c(18),t=g(!1),n=t[0],r=t[1],a=h(3e3),i=a.isIdle,l=a.pingNotIdle,s;e[0]!==l?(s=function(){r(!0),l()},e[0]=l,e[1]=s):s=e[1];var u=s,c;e[2]!==l?(c=function(){r(!1),l()},e[2]=l,e[3]=c):c=e[3];var d=c,m;e[4]!==l?(m=function(){r(!0),l()},e[4]=l,e[5]=m):m=e[5];var p=m,_;e[6]!==l?(_=function(){l()},e[6]=l,e[7]=_):_=e[7];var f=_,y;e[8]!==l?(y=function(){l()},e[8]=l,e[9]=y):y=e[9];var C=y,b;return e[10]!==n||e[11]!==i||e[12]!==f||e[13]!==u||e[14]!==d||e[15]!==p||e[16]!==C?(b={isHovering:n,isIdle:i,onMouseDown:f,onMouseEnter:u,onMouseLeave:d,onMouseMove:p,onMouseUp:C},e[10]=n,e[11]=i,e[12]=f,e[13]=u,e[14]=d,e[15]=p,e[16]=C,e[17]=b):b=e[17],b}function C(e){var t=o("react-compiler-runtime").c(17),n=e.children,a=y(),i=a.isHovering,l=a.isIdle,s=a.onMouseDown,m=a.onMouseEnter,p=a.onMouseLeave,_=a.onMouseMove,f=a.onMouseUp,g=(u||(u=o("VideoPlayerHooks"))).useIsFullscreen(),h;t[0]!==g||t[1]!==l?(h={0:"x5yr21d x10l6tqk x13vifvy xh8yej3",1:"x5yr21d x10l6tqk x13vifvy xh8yej3 xjfk50j"}[!!(g&&l)<<0],t[0]=g,t[1]=l,t[2]=h):h=t[2];var C;t[3]!==n||t[4]!==l?(C=d.jsx((c||(c=o("VideoPlayerContexts"))).VideoPlayerMouseIdleContext.Provider,{value:l,children:n}),t[3]=n,t[4]=l,t[5]=C):C=t[5];var b;t[6]!==i||t[7]!==C?(b=d.jsx((c||(c=o("VideoPlayerContexts"))).VideoPlayerMouseHoverContext.Provider,{value:i,children:C}),t[6]=i,t[7]=C,t[8]=b):b=t[8];var v;return t[9]!==s||t[10]!==m||t[11]!==p||t[12]!==_||t[13]!==f||t[14]!==h||t[15]!==b?(v=d.jsx("div",babelHelpers.extends({className:h},r("CometVisualCompletionAttributes").IGNORE,{onMouseDown:s,onMouseEnter:m,onMouseLeave:p,onMouseMove:_,onMouseUp:f,children:b})),t[9]=s,t[10]=m,t[11]=p,t[12]=_,t[13]=f,t[14]=h,t[15]=b,t[16]=v):v=t[16],v}function b(t){var a=o("react-compiler-runtime").c(5),i=t.children,l=babelHelpers.objectWithoutPropertiesLoose(t,e),s=l.implementationController,u=l.implementationExposedState,m=l.videoPlayerPassiveViewabilityInfo,p=u.activeCaptions,_=u.activeEmsgBoxes,f=u.availableAudioTracks,g=u.availableVideoQualities,h=u.availableVideoTracks,y=u.bufferEnd,b=u.captionDisplayStyle,v=u.captionsLoaded,S=u.captionsVisible,R=u.currentAudioTrackID,L=u.currentVideoQuality,E=u.currentVideoTrackID,k=u.duration,I=u.ended,T=u.error,D=u.inbandCaptionsAutogenerated,x=u.inPlayStalling,$=u.internal_coreVideoPlayerMetaData,P=u.isAbrEnabled,N=u.isDesktopPictureInPicture,M=u.isFullscreen,w=u.isLiveRewindActive,A=u.isLiveRewindAvailable,F=u.lastMuteReason,O=u.lastPauseReason,B=u.lastPlayedTimeMs,W=u.lastPlayReason,q=u.latencyLevel,U=u.loopCount,V=u.loopCurrent,H=u.muted,G=u.paused,z=u.playerInstanceKey,j=u.playerVersion,K=u.playerViewportDimensions,Q=u.playing,X=u.seekableRanges,Y=u.seeking,J=u.selectedVideoQuality,Z=u.stalling,ee=u.streamInterrupted,te=u.targetAudioTrack,ne=u.targetPlaybackRate,re=u.targetVideoQuality,oe=u.videoFBID,ae=u.videoPixelsAspectRatio,ie=u.volume,le=u.watchTimeMs,se=$.adClientToken,ue=$.audioAvailabilityInfo,ce=$.autoplayGatingResult,de=$.broadcastStatus,me=$.canAutoplay,pe=$.disableDubbing,_e=$.initialTracePolicy,fe=$.isNCSR,ge=$.isPremiumMusicVideo,he=$.volumeSetting,ye;a[0]!==i?(ye=d.jsx(C,{children:i}),a[0]=i,a[1]=ye):ye=a[1];var Ce=ye;n("cr:6094")(z,{controller:s,coreVideoStates:l,videoPlayerPassiveViewabilityInfo:m});var be=o("wrapWithContextProviders").wrapWithContextProviders(Ce,[o("wrapWithContextProviders").makeRenderProviderFn((c||(c=o("VideoPlayerContexts"))).VideoFBIDContext,oe),o("wrapWithContextProviders").makeRenderProviderFn(c.StallingContext,Z),o("wrapWithContextProviders").makeRenderProviderFn(c.PlayingContext,Q),o("wrapWithContextProviders").makeRenderProviderFn(c.InPlayStallingContext,x),o("wrapWithContextProviders").makeRenderProviderFn(c.BufferEndContext,y),o("wrapWithContextProviders").makeRenderProviderFn(c.LastMuteReasonContext,F),o("wrapWithContextProviders").makeRenderProviderFn(c.LastPlayReasonContext,W),o("wrapWithContextProviders").makeRenderProviderFn(c.LastPauseReasonContext,O),o("wrapWithContextProviders").makeRenderProviderFn(c.PausedContext,G),o("wrapWithContextProviders").makeRenderProviderFn(c.CurrentAudioTrackIDContext,R),o("wrapWithContextProviders").makeRenderProviderFn(c.CurrentVideoTrackIDContext,E),o("wrapWithContextProviders").makeRenderProviderFn(c.CurrentVideoQualityContext,L),o("wrapWithContextProviders").makeRenderProviderFn(c.MutedContext,H),o("wrapWithContextProviders").makeRenderProviderFn(c.TargetAudioTrackContext,te),o("wrapWithContextProviders").makeRenderProviderFn(c.VolumeContext,ie),o("wrapWithContextProviders").makeRenderProviderFn(c.SelectedVideoQualityContext,J),o("wrapWithContextProviders").makeRenderProviderFn(c.SeekingContext,Y),o("wrapWithContextProviders").makeRenderProviderFn(c.DurationContext,k),o("wrapWithContextProviders").makeRenderProviderFn(c.EndedContext,I),o("wrapWithContextProviders").makeRenderProviderFn(c.ErrorContext,T),o("wrapWithContextProviders").makeRenderProviderFn(c.DimensionsContext,K||null),o("wrapWithContextProviders").makeRenderProviderFn(c.InstanceKeyContext,z),o("wrapWithContextProviders").makeRenderProviderFn(c.ControllerContext,s),o("wrapWithContextProviders").makeRenderProviderFn(c.AvailableAudioTracksContext,f),o("wrapWithContextProviders").makeRenderProviderFn(c.AvailableVideoQualitiesContext,g),o("wrapWithContextProviders").makeRenderProviderFn(c.AvailableVideoTracksContext,h),o("wrapWithContextProviders").makeRenderProviderFn(c.PlayerVersionContext,j),o("wrapWithContextProviders").makeRenderProviderFn(c.IsAbrEnabledContext,P),o("wrapWithContextProviders").makeRenderProviderFn(c.TargetVideoQualityContext,re),o("wrapWithContextProviders").makeRenderProviderFn(c.PlaybackRateContext,ne),o("wrapWithContextProviders").makeRenderProviderFn(c.CanAutoplayContext,me),o("wrapWithContextProviders").makeRenderProviderFn(c.VolumeSettingContext,he),o("wrapWithContextProviders").makeRenderProviderFn(c.AutoplayGatingResultContext,ce),o("wrapWithContextProviders").makeRenderProviderFn(c.BroadcastStatusContext,de),o("wrapWithContextProviders").makeRenderProviderFn(c.LoopCountContext,U),o("wrapWithContextProviders").makeRenderProviderFn(c.LoopCurrentContext,V),o("wrapWithContextProviders").makeRenderProviderFn(c.AdClientTokenContext,se),o("wrapWithContextProviders").makeRenderProviderFn(c.ActiveCaptionsContext,p),o("wrapWithContextProviders").makeRenderProviderFn(c.CaptionsVisibleContext,S),o("wrapWithContextProviders").makeRenderProviderFn(c.CaptionDisplayStyleContext,b),o("wrapWithContextProviders").makeRenderProviderFn(c.CaptionsLoadedContext,v),o("wrapWithContextProviders").makeRenderProviderFn(c.InbandCaptionsAutogeneratedContext,D),o("wrapWithContextProviders").makeRenderProviderFn(c.StreamInterruptedContext,ee),o("wrapWithContextProviders").makeRenderProviderFn(c.WatchTimeContext,le),o("wrapWithContextProviders").makeRenderProviderFn(c.LastPlayedTimeContext,B),o("wrapWithContextProviders").makeRenderProviderFn(c.SeekableRangesContext,X),o("wrapWithContextProviders").makeRenderProviderFn(c.LatencyLevelContext,q),o("wrapWithContextProviders").makeRenderProviderFn(c.IsLiveRewindActiveContext,w),o("wrapWithContextProviders").makeRenderProviderFn(c.IsLiveRewindAvailableContext,A),o("wrapWithContextProviders").makeRenderProviderFn(c.AudioAvailabilityInfoContext,ue),o("wrapWithContextProviders").makeRenderProviderFn(c.IsNCSRContext,fe),o("wrapWithContextProviders").makeRenderProviderFn(c.IsPremiumMusicVideoContext,ge),o("wrapWithContextProviders").makeRenderProviderFn(c.InitialTracePolicyContext,_e),o("wrapWithContextProviders").makeRenderProviderFn(c.ActiveEmsgBoxesContext,_),o("wrapWithContextProviders").makeRenderProviderFn(c.VideoPixelsAspectRatioContext,ae!=null?ae:null),o("wrapWithContextProviders").makeRenderProviderFn(c.DisableDubbingContext,pe!=null?pe:!1),function(e){return d.jsx(r("VideoPlayerViewabilityProvider.react"),{isDesktopPictureInPicture:N,isFullscreen:M,videoPlayerPassiveViewabilityInfo:m,children:e})}]);r("useBlockCappedListItemWhenPlayingVideo")(s,z),r("useDisableVirtualizationWhenPlayingVideo")(s,z);var ve=o("CometSSRRenderingStateHooks").useIsServerRenderingOrHydrating(),Se=ve?void 0:z,Re;return a[2]!==be||a[3]!==Se?(Re=d.jsx("div",{"data-instancekey":Se,"data-testid":void 0,children:be}),a[2]=be,a[3]=Se,a[4]=Re):Re=a[4],Re}var v=d.memo(b);l.default=v}),98);
__d("GlobalVideoPortsID",["FBLogger","cometUniqueID"],(function(t,n,r,o,a,i,l){"use strict";function e(){return"id-pv-"+r("cometUniqueID")()}function s(e){if(typeof e=="string"){var t="id-pv-";if(e.indexOf(t)===0&&e.length>t.length)return e;throw r("FBLogger")("comet_video_player").mustfixThrow('Expected a GlobalVideoPortsVideoID, got a string that does not look like it: "%s"',e)}else return null}function u(){return"id-pp-"+r("cometUniqueID")()}l.makeVideoID=e,l.ensureVideoID=s,l.makePlaceID=u}),98);
__d("VideoPlayerFullscreenController",["CometFullScreen","FBLogger","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.current!=null&&o("CometFullScreen").getFullScreenElement()===e.current}function s(t){var n=[];function a(){n.forEach(function(e){e()})}var i=null;return{getIsFullscreen:function(){return e(t)},requestSetIsFullscreen:function(a,i){var n=t.current;if(n==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Requested full screen while the element is not present");o("CometFullScreen").isSupported()?a!==e(t)&&(a===!0?o("CometFullScreen").requestFullScreen(n):a===!1&&o("CometFullScreen").exitFullScreen()):a&&i!=null&&typeof i.webkitEnterFullScreen=="function"?i.webkitEnterFullScreen():!a&&i!=null&&typeof i.webkitExitFullScreen=="function"&&i.webkitExitFullscreen()},subscribe:function(t){return n.length===0&&i==null&&(i=o("CometFullScreen").subscribeToFullScreenChangeEvent(a)),n.push(t),{remove:function(){r("removeFromArray")(n,t),n.length===0&&i!=null&&(i(),i=null)}}}}}l.createFullscreenController=s}),98);
__d("VideoPlayerPortalingPlaceState",["GlobalVideoPortsContexts","GlobalVideoPortsID","gkx","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){var n=o("react-compiler-runtime").c(5),a=r("usePrevious")(e),i,l;n[0]!==e||n[1]!==a||n[2]!==t?(i=function(){e!==a&&a!==null&&a&&!e&&t(o("GlobalVideoPortsID").makeVideoID())},l=[e,a,t],n[0]=e,n[1]=a,n[2]=t,n[3]=i,n[4]=l):(i=n[3],l=n[4]),u(i,l)}function m(e,t){var n=c(null),r=n[0],a=n[1];e!==r&&(r!==null&&r&&!e&&t(o("GlobalVideoPortsID").makeVideoID()),a(e))}var p=r("gkx")("24382")?m:d;function _(e){var t=o("react-compiler-runtime").c(11),n=e.portalingEnabled,r=e.portalingFromVideoID,a=o("GlobalVideoPortsContexts").useGlobalVideoPortsLoader(),i=o("GlobalVideoPortsContexts").useGlobalVideoPortsManager(),l=o("GlobalVideoPortsContexts").useGlobalVideoPortsState(),s=i!=null&&l!=null,d=(s||a!=null)&&(n||r!=null),m=c(g),_=m[0],h=c(f),y=h[0],C=h[1],b=d&&n&&r!=null,v=b&&r!=null?r:y;p(b,C);var S,R;t[0]!==s||t[1]!==d||t[2]!==a?(S=function(){d&&!s&&a&&a()},R=[s,d,a],t[0]=s,t[1]=d,t[2]=a,t[3]=S,t[4]=R):(S=t[3],R=t[4]),u(S,R);var L;return t[5]!==d||t[6]!==v||t[7]!==i||t[8]!==l||t[9]!==_?(L={canBecomePortableLater:d,currentVideoID:v,globalVideoPortsManager:i,globalVideoPortsState:l,thisPlaceID:_},t[5]=d,t[6]=v,t[7]=i,t[8]=l,t[9]=_,t[10]=L):L=t[10],L}function f(){return o("GlobalVideoPortsID").makeVideoID()}function g(){return o("GlobalVideoPortsID").makePlaceID()}l.useRegenerateUniqueVideoID_exportedForTest=p,l.useVideoPlayerPortalingPlaceState=_}),98);
__d("VideoPlayerPortalingPlaceWithPortaling.react",["BaseContextualLayerAnchorRootContext","CoreVideoPlayerFitParentContainer.react","GlobalVideoPortsRenderers.react","deepEquals","getOwnObjectValues","gkx","react","react-compiler-runtime","shallowEqual"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useEffect,m=u.useRef,p=u.useState;function _(e){var t=e.coreVideoPlayerMetaData,n=e.currentVideoID,o=e.fullscreenController,a=e.globalVideoPortsManager,i=e.implementations,l=e.injectCoreVideoStatesRef,s=e.isFullscreen,u=e.portablePlaceContainer,c=e.portablePlaceMetaData,m=e.renderComponents,p=e.renderPlaceholder,_=e.thisPlaceID,f=e.trackingDataEncrypted,g=e.trackingNodes,h=e.viewportMarginsForViewability;d(function(){a.addOrUpdatePlace({coreVideoPlayerMetaData:t,fullscreenController:o,implementations:i,injectCoreVideoStatesRef:l,isFullscreen:s,portablePlaceContainer:u,portablePlaceID:_,portablePlaceMetaData:c,portableVideoID:n,renderComponents:m,renderPlaceholder:p,trackingDataEncrypted:f,trackingNodes:g,viewportMarginsForViewability:h})},[].concat(r("getOwnObjectValues")(t),[n,o,s,a,u],r("getOwnObjectValues")(c||{}),[m,p,_,f,g,h])),d(function(){return function(){a.removePlace({portablePlaceID:_})}},[a,_])}function f(e){var t=o("react-compiler-runtime").c(20),n=e.coreVideoPlayerMetaData,a=e.currentVideoID,i=e.fullscreenController,l=e.globalVideoPortsManager,s=e.implementations,u=e.injectCoreVideoStatesRef,c=e.isFullscreen,p=e.portablePlaceContainer,_=e.portablePlaceMetaData,f=e.renderComponents,g=e.renderPlaceholder,h=e.thisPlaceID,y=e.trackingDataEncrypted,C=e.trackingNodes,b=e.viewportMarginsForViewability,v=m(null),S=m(null),R;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==s||t[5]!==u||t[6]!==c||t[7]!==p||t[8]!==_||t[9]!==f||t[10]!==g||t[11]!==h||t[12]!==y||t[13]!==C||t[14]!==b?(R=function(){var e={coreVideoPlayerMetaData:n,implementations:s,isFullscreen:c,portablePlaceID:h,portablePlaceMetaData:_,portableVideoID:a,trackingDataEncrypted:y,trackingNodes:C,viewportMarginsForViewability:b},t={fullscreenController:i,injectCoreVideoStatesRef:u,portablePlaceContainer:p,renderComponents:f,renderPlaceholder:g};r("deepEquals")(e,v.current)&&r("shallowEqual")(t,S.current)||(v.current=e,S.current=t,l.addOrUpdatePlace(babelHelpers.extends({},e,t)))},t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=s,t[5]=u,t[6]=c,t[7]=p,t[8]=_,t[9]=f,t[10]=g,t[11]=h,t[12]=y,t[13]=C,t[14]=b,t[15]=R):R=t[15],d(R);var L,E;t[16]!==l||t[17]!==h?(L=function(){return(function(){v.current=null,S.current=null,l.removePlace({portablePlaceID:h})})},E=[l,h],t[16]=l,t[17]=h,t[18]=L,t[19]=E):(L=t[18],E=t[19]),d(L,E)}var g=r("gkx")("17097")?f:_;function h(e){var t,n,a,i,l=o("react-compiler-runtime").c(17),u=e.currentPlaceID,d=e.currentVideoID,_=e.globalVideoPortsManager,f=e.globalVideoPortsState_DEPRECATED,h=e.isFullscreen,C=e.previousPlaceMetaData,b=e.renderComponents,v=e.thisPlaceID,S=p(y),R=S[0],L=m(null),E;l[0]!==R||l[1]!==e?(E=babelHelpers.extends({},e,{injectCoreVideoStatesRef:L,portablePlaceContainer:R}),l[0]=R,l[1]=e,l[2]=E):E=l[2],g(E);var k=c(r("BaseContextualLayerAnchorRootContext")),I=m(null),T=h?I:k,D;l[3]!==R||l[4]!==v?(D=s.jsx(o("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentDOMContainer,{debugRole:null,domElement:R},v),l[3]=R,l[4]=v,l[5]=D):D=l[5];var x=f!=null?(t=(n=_.getCurrentPlaceStateForVideo(f,d))==null?void 0:n.portablePlaceID)!=null?t:null:u,$=f!=null?(a=(i=_.getPortableVideoState(f,d))==null?void 0:i.previousPlaceMetaData)!=null?a:null:C,P;l[6]!==d||l[7]!==b||l[8]!==x||l[9]!==$||l[10]!==v?(P=s.jsx(o("GlobalVideoPortsRenderers.react").GlobalVideoPortsVideoComponentsRenderer,{currentPlaceID:x,currentVideoID:d,injectCoreVideoStatesRef:L,previousPlaceMetaData:$,renderComponents:b,thisPlaceID:v}),l[6]=d,l[7]=b,l[8]=x,l[9]=$,l[10]=v,l[11]=P):P=l[11];var N;l[12]===Symbol.for("react.memo_cache_sentinel")?(N=s.jsx("div",{ref:I}),l[12]=N):N=l[12];var M;return l[13]!==T||l[14]!==D||l[15]!==P?(M=s.jsxs(r("BaseContextualLayerAnchorRootContext").Provider,{value:T,children:[D,P,N]}),l[13]=T,l[14]=D,l[15]=P,l[16]=M):M=l[16],M}function y(){return o("CoreVideoPlayerFitParentContainer.react").createFitParentContainerDiv({debugRole:null})}l.default=h}),98);
__d("VideoPlayerPortalingPlace.react",["BaseViewportMarginsContext","CometTrackingCodeContext","CometTrackingNodesContext","CoreVideoPlayer.react","CoreVideoPlayerFitParentContainer.react","FBLogger","GlobalVideoPortsID","GlobalVideoPortsRenderers.react","VideoPlayerFullscreenController","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerPortalingPlaceState","VideoPlayerPortalingPlaceWithPortaling.react","react","react-compiler-runtime","useStable","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useEffect,p=c.useState,_={bottom:0,left:0,right:0,top:0};function f(e){var t=o("react-compiler-runtime").c(5),n=e.ref,r=e.children,a=e.debugRole,i=e.testid,l;return t[0]!==r||t[1]!==a||t[2]!==n||t[3]!==i?(l=u.jsx(o("CoreVideoPlayerFitParentContainer.react").CoreVideoPlayerFitParentContainer,{debugRole:a,ref:n,testid:void 0,children:r}),t[0]=r,t[1]=a,t[2]=n,t[3]=i,t[4]=l):l=t[4],l}function g(t){var n,a=o("react-compiler-runtime").c(69),i=t.coreVideoPlayerMetaData,l=t.implementations,s=t.portalingEnabled,c=t.portalingFromVideoID,g=t.portalingPlaceMetaData,y=t.renderComponents,C=t.renderPlaceholder,b;a[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],a[0]=b):b=a[0],m(h,b);var v;a[1]!==c?(v=c!=null?o("GlobalVideoPortsID").ensureVideoID(c):null,a[1]=c,a[2]=v):v=a[2];var S=v;c!=null&&S==null&&r("FBLogger")("comet_video_player").mustfix("The provided portalingFromVideoID (%s) does not look like such an ID. The video player will not use portaling until a valid ID is provided",String(c));var R;a[3]!==s||a[4]!==S?(R={portalingEnabled:s,portalingFromVideoID:S},a[3]=s,a[4]=S,a[5]=R):R=a[5];var L=o("VideoPlayerPortalingPlaceState").useVideoPlayerPortalingPlaceState(R),E=L.canBecomePortableLater,k=L.currentVideoID,I=L.globalVideoPortsManager,T=L.globalVideoPortsState,D=L.thisPlaceID,x=d(r("BaseViewportMarginsContext")),$=(e||(e=r("useUnsafeRef_DEPRECATED")))(null),P;a[6]!==$?(P=function(){return o("VideoPlayerFullscreenController").createFullscreenController($)},a[6]=$,a[7]=P):P=a[7];var N=r("useStable")(P),M;a[8]!==N?(M=N.getIsFullscreen(),a[8]=N,a[9]=M):M=a[9];var w=p(M),A=w[0],F=w[1],O,B;a[10]!==N?(O=function(){var e=N.subscribe(function(){var e=N.getIsFullscreen();F(e)});return F(N.getIsFullscreen()),(function(){e.remove()})},B=[N,F],a[10]=N,a[11]=O,a[12]=B):(O=a[11],B=a[12]),m(O,B);var W=d(r("CometTrackingNodesContext")),q;a[13]!==W?(q=W.join(""),a[13]=W,a[14]=q):q=a[14];var U=q,V=d(r("CometTrackingCodeContext")),H=(n=V.encrypted_tracking[0])!=null?n:"",G=A?_:x,z="comet-video-player-place"+(i.videoFBID!=null?"-vid-"+i.videoFBID:"");if(!E){var j;a[15]!==i||a[16]!==G||a[17]!==N||a[18]!==l||a[19]!==A||a[20]!==y||a[21]!==H||a[22]!==U?(j=u.jsx(r("CoreVideoPlayer.react"),{coreVideoPlayerMetaData:i,fullscreenController:N,implementations:l,isFullscreen:A,renderWithCoreVideoStates:y,trackingDataEncrypted:H,trackingNodes:U,viewportMarginsForViewability:G}),a[15]=i,a[16]=G,a[17]=N,a[18]=l,a[19]=A,a[20]=y,a[21]=H,a[22]=U,a[23]=j):j=a[23];var K;a[24]!==k||a[25]!==j||a[26]!==D?(K=u.jsx(o("VideoPlayerPortalingPlaceInfoProvider.react").VideoPlayerPortalingPlaceInfoProvider,{currentPlaceID:D,currentVideoID:k,portalingEnabled:!1,previousPlaceMetaData:null,thisPlaceID:D,children:j}),a[24]=k,a[25]=j,a[26]=D,a[27]=K):K=a[27];var Q;return a[28]!==K||a[29]!==z||a[30]!==$?(Q=u.jsx(f,{debugRole:null,ref:$,testid:void 0,children:K}),a[28]=K,a[29]=z,a[30]=$,a[31]=Q):Q=a[31],Q}if(I&&T){var X;if(a[32]!==k||a[33]!==I||a[34]!==T){var Y,J;X=(Y=(J=I.getCurrentPlaceStateForVideo(T,k))==null?void 0:J.portablePlaceID)!=null?Y:null,a[32]=k,a[33]=I,a[34]=T,a[35]=X}else X=a[35];var Z;if(a[36]!==k||a[37]!==I||a[38]!==T){var ee,te;Z=(ee=(te=I.getPortableVideoState(T,k))==null?void 0:te.previousPlaceMetaData)!=null?ee:null,a[36]=k,a[37]=I,a[38]=T,a[39]=Z}else Z=a[39];var ne;a[40]!==i||a[41]!==k||a[42]!==G||a[43]!==N||a[44]!==I||a[45]!==l||a[46]!==A||a[47]!==g||a[48]!==y||a[49]!==C||a[50]!==Z||a[51]!==X||a[52]!==D||a[53]!==H||a[54]!==U?(ne=u.jsx(r("VideoPlayerPortalingPlaceWithPortaling.react"),{coreVideoPlayerMetaData:i,currentPlaceID:X,currentVideoID:k,fullscreenController:N,globalVideoPortsManager:I,globalVideoPortsState_DEPRECATED:null,implementations:l,isFullscreen:A,portablePlaceMetaData:g,previousPlaceMetaData:Z,renderComponents:y,renderPlaceholder:C,thisPlaceID:D,trackingDataEncrypted:H,trackingNodes:U,viewportMarginsForViewability:G}),a[40]=i,a[41]=k,a[42]=G,a[43]=N,a[44]=I,a[45]=l,a[46]=A,a[47]=g,a[48]=y,a[49]=C,a[50]=Z,a[51]=X,a[52]=D,a[53]=H,a[54]=U,a[55]=ne):ne=a[55];var re;return a[56]!==ne||a[57]!==z||a[58]!==$?(re=u.jsx(f,{debugRole:null,ref:$,testid:void 0,children:ne}),a[56]=ne,a[57]=z,a[58]=$,a[59]=re):re=a[59],re}else{var oe,ae=(oe=i.videoPixelsAspectRatio)!=null?oe:null,ie;a[60]!==k||a[61]!==C||a[62]!==ae||a[63]!==D?(ie=u.jsx(o("GlobalVideoPortsRenderers.react").GlobalVideoPortsPlaceholderRenderer,{currentPlaceID:null,currentVideoID:k,previousPlaceMetaData:null,renderPlaceholder:C,thisPlaceID:D,videoPixelsAspectRatio:ae}),a[60]=k,a[61]=C,a[62]=ae,a[63]=D,a[64]=ie):ie=a[64];var le;return a[65]!==ie||a[66]!==z||a[67]!==$?(le=u.jsx(f,{debugRole:null,ref:$,testid:void 0,children:ie}),a[65]=ie,a[66]=z,a[67]=$,a[68]=le):le=a[68],le}}function h(){return y}function y(){}l.default=g}),98);
__d("VideoPlayerTracePolicyContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={initialTracePolicy:null,routeTracePolicy:null},d=s.createContext(c);function m(){return u(d)}l.VideoPlayerTracePolicyContext=d,l.useVideoPlayerTracePolicy=m}),98);
__d("VideoPlayerTracePolicyProvider.react",["VideoPlayerTracePolicyContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(12),n=e.children,r=e.initialTracePolicy,a=e.routeTracePolicy,i=d(r),l=i[0],u=i[1],m=d(a),p=m[0],_=m[1],f,g;t[0]!==r||t[1]!==a||t[2]!==l||t[3]!==p?(f=function(){l!==r&&u(r),p!==a&&_(a)},g=[r,a,l,p],t[0]=r,t[1]=a,t[2]=l,t[3]=p,t[4]=f,t[5]=g):(f=t[4],g=t[5]),c(f,g);var h;t[6]!==l||t[7]!==p?(h={initialTracePolicy:l,routeTracePolicy:p},t[6]=l,t[7]=p,t[8]=h):h=t[8];var y;return t[9]!==n||t[10]!==h?(y=s.jsx(o("VideoPlayerTracePolicyContext").VideoPlayerTracePolicyContext.Provider,{value:h,children:n}),t[9]=n,t[10]=h,t[11]=y):y=t[11],y}l.default=m}),98);
__d("CoreVideoPlayerWithComponents.react",["VideoPlayerComponentContainer.react","VideoPlayerPortalingPlace.react","VideoPlayerTracePolicyProvider.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback;function c(e){var t=o("react-compiler-runtime").c(14),n=e.children,a=e.coreVideoPlayerMetaData,i=e.implementations,l=e.portalingEnabled,u=e.portalingFromVideoID,c=e.portalingPlaceMetaData,d=e.portalingRenderPlaceholder,m;t[0]!==n?(m=function(t){return s.jsx(r("VideoPlayerComponentContainer.react"),babelHelpers.extends({},t,{children:n}))},t[0]=n,t[1]=m):m=t[1];var p=m,_;t[2]!==a||t[3]!==i||t[4]!==l||t[5]!==u||t[6]!==c||t[7]!==d||t[8]!==p?(_=s.jsx(r("VideoPlayerPortalingPlace.react"),{coreVideoPlayerMetaData:a,implementations:i,portalingEnabled:l,portalingFromVideoID:u,portalingPlaceMetaData:c,renderComponents:p,renderPlaceholder:d}),t[2]=a,t[3]=i,t[4]=l,t[5]=u,t[6]=c,t[7]=d,t[8]=p,t[9]=_):_=t[9];var f;return t[10]!==a.initialTracePolicy||t[11]!==a.routeTracePolicy||t[12]!==_?(f=s.jsx(r("VideoPlayerTracePolicyProvider.react"),{initialTracePolicy:a.initialTracePolicy,routeTracePolicy:a.routeTracePolicy,children:_}),t[10]=a.initialTracePolicy,t[11]=a.routeTracePolicy,t[12]=_,t[13]=f):f=t[13],f}l.default=c}),98);
__d("DataViewReader",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$1=0,this.$2=e}var t=e.prototype;return t.seek=function(t){this.$1=t},t.skip=function(t){var e=this.$1;return this.$1+=t,e},t.readUint8=function(){return this.$2.getUint8(this.skip(1))},t.readUint16=function(t){return t===void 0&&(t=!1),this.$2.getUint16(this.skip(2),t)},t.readUint32=function(t){return t===void 0&&(t=!1),this.$2.getUint32(this.skip(4),t)},t.readUint64=function(t){t===void 0&&(t=!1);var e,n;if(t?(n=this.$2.getUint32(this.skip(4),!0),e=this.$2.getUint32(this.skip(4),!0)):(e=this.$2.getUint32(this.skip(4)),n=this.$2.getUint32(this.skip(4))),e>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*e+n},t.readInt64=function(t){t===void 0&&(t=!1);var e,n;if(t?(n=this.$2.getInt32(this.skip(4),!0),e=this.$2.getInt32(this.skip(4),!0)):(e=this.$2.getInt32(this.skip(4)),n=this.$2.getInt32(this.skip(4))),e>2097151)throw new RangeError("Overflow reading 64-bit value.");return Math.pow(2,32)*(e|0)+n},t.readInt16=function(t){return t===void 0&&(t=!1),this.$2.getInt16(this.skip(2),t)},t.readInt32=function(t){return t===void 0&&(t=!1),this.$2.getInt32(this.skip(4),t)},t.readZeroTerminatedString=function(t){for(var e="",n=0,r;n++<t&&(r=this.readUint8());)e+=String.fromCharCode(r);return e},t.readChars=function(t){for(var e="";t-- >0;)e+=String.fromCharCode(this.$2.getUint8(this.skip(1)));return e},t.readBytes=function(t){for(var e=[];t-- >0;)e.push(this.$2.getUint8(this.skip(1)));return e},t.getDataView=function(){return this.$2},t.getCursor=function(){return this.$1},t.hasMoreData=function(){return this.$2.byteLength-this.getCursor()>0},e})();i.default=e}),66);
__d("GraphQLVideoAutoplayGatingResult",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=e!=null?e:"unknown",o=t||null;return{autoplayGatingResult:r,autoplaySetting:o,canAutoplay:n!=null?n:!1}}i.makeGraphQLVideoAutoplayGatingResult=e}),66);
__d("LSIssueAttachmentsRangeQuery",["LSGetCursor","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[5]=n.syncGroup,t.i64.neq(r[5],void 0)?r[4]=r[5]:r[4]=t.i64.cast([0,1]),r[0]=r[4])})},function(e){return t.storedProcedure(n("LSGetCursor"),r[0]).then(function(e){var t;return t=e,r[2]=t[0],t})},function(o){return t.db.table(17).fetch([[[e[0],e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[4]=t.i64.cast([0,1]):(n=a.item,r[9]=n.syncGroup,t.i64.neq(r[9],void 0)?r[8]=r[9]:r[8]=t.i64.cast([0,1]),r[4]=r[8])})},function(o){return r[6]=new t.Map,r[6].set("thread_key",e[0]),r[6].set("media_group",e[1]),r[6].set("max_timestamp_ms",t.i64.cast([2328,1316134911])),r[6].set("cursor",r[2]),r[6].set("sync_group",r[4]),r[6].set("last_loaded_message_id",void 0),r[7]=t.toJSON(r[6]),t.storedProcedure(n("LSIssueNewTask"),"arq",t.i64.cast([0,105]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):(a=l.item,a.hasMoreBefore?t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[4]=t.i64.cast([0,1]):(n=a.item,r[9]=n.syncGroup,t.i64.neq(r[9],void 0)?r[8]=r[9]:r[8]=t.i64.cast([0,1]),r[4]=r[8])})},function(o){return r[6]=new t.Map,r[6].set("thread_key",e[0]),r[6].set("media_group",e[1]),r[6].set("max_timestamp_ms",a.minTimestampMs),r[6].set("cursor",r[2]),r[6].set("sync_group",r[4]),r[6].set("last_loaded_message_id",void 0),r[7]=t.toJSON(r[6]),t.storedProcedure(n("LSIssueNewTask"),"arq",t.i64.cast([0,105]),r[7],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]):t.resolve())})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxIssueAttachmentsRangeQueryStoredProcedure",e.__tables__=["threads","attachments_ranges_v2__generated"],a.exports=e}),null);
__d("LSIssueAttachmentsRangeQueryStoredProcedure",["LSIssueAttachmentsRangeQuery","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueAttachmentsRangeQuery"),a.threadKey,a.mediaGroup);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LiveTraceWwwVideoPlayerFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1743810"),s=o("FalcoLoggerInternal").create("live_trace_www_video_player",e),u=s;l.default=u}),98);
__d("MAWMediaRestoreEBRange",["I64","MpsTypes","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e,s=0xffffffffffff,u={hasMoreBefore:!0,isDefault:!0,nextTimestampMsBefore:o("MpsTypes").toTimestamp(s)},c=new Map,d=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.updateRange=function(n,r){this.$1.set((e||(e=o("I64"))).to_string(n),r)},n.updatePageSize=function(t,n){var e=this.getRange(t);this.updateRange(t,babelHelpers.extends({},e,{pageSize:n}))},n.getRange=function(n){var t;return(t=this.$1.get((e||(e=o("I64"))).to_string(n)))!=null?t:u},n.resetRange=function(n){this.$1.set((e||(e=o("I64"))).to_string(n),u)},t})();function m(e){if(c.has(e))return r("nullthrows")(c.get(e));var t=new d;return c.set(e,t),t}l.getMediaRestoreEBRange=m}),98);
__d("MAWFetchAndPersistMedia",["I64","LSDatabaseSingleton","LSIntEnum","LSMEBTaskCreationSource","LSThreadMediaGalleryGroup","MAWJobDefinitions","MAWMediaRestoreEBRange","MAWProtobufDeserializers","MAWRestoreProtobufsFromEncryptedBackupsDeferred","MSGDataclassTypes.flow","MpsMediaToBridge","MpsOverBridge","MpsTypes","ReQL","WAJids","WALogger","WAResultOrError","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=r("justknobx")._("3177"),m=r("justknobx")._("2538"),p=r("justknobx")._("3916"),_="timeout";function f(e,t,n,r,a){var i,l=o("WAJids").threadIdForChatJid(e),s=a.getRange(t);if(r==null||r.addAnnotations({bool:{rangeHasMoreBefore:s.hasMoreBefore,rangeIsDefault:s.isDefault===!0}}),s.hasMoreBefore===!1)return Promise.resolve();r==null||r.addPoint("eb_fetch_and_persist_start",{int:{mediaGalleryGroup:n}});var u=s.nextTimestampMsBefore;return y({jid:e,mediaGalleryGroup:n,nextTimestampMsBefore:u,numMessages:(i=s.pageSize)!=null?i:d,threadId:l}).then(function(e){var i=e.error;if(e.success===!1)r==null||r.addPoint("eb_fetch_and_persist_error",{string:{error:i}});else{var s;r==null||r.addAnnotations({bool:{responseHasMoreBefore:e.value.cursorInfo.hasNext},int:{responseProtoMessages:(s=e.value.messages)==null?void 0:s.length}})}if(i!==_){var c,d,m,p;a.updateRange(t,{hasMoreBefore:(c=(d=e.value)==null?void 0:d.cursorInfo.hasNext)!=null?c:!1,nextTimestampMsBefore:(m=(p=e.value)==null||(p=p.cursorInfo)==null||(p=p.endCursor)==null?void 0:p[0])!=null?m:o("MpsTypes").toTimestamp(0)})}return g(e,l,t,u,n).then(function(){return r==null||r.addPoint("eb_fetch_and_persist_end"),h(t,n,{hasMoreBefore:!0})})})}function g(t,n,a,i,l){if(t.success===!1)return Promise.resolve();var u=t.value,c=u.cursorInfo,d=u.messages;if(d.length===0)return Promise.resolve();var p=d.filter(function(e){var t,n=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e.toplevelProtobuf.payload).encryptedTransportMessage(),r=n==null?void 0:n.consumerMessage(),a=r!=null&&o("MpsMediaToBridge").getMediaTypeForMessage(r)!=null,i=(n==null||(t=n.armadillo())==null?void 0:t.extendedContentMessage())!=null;return i||a});if(d.length!==p.length){var _=o("MAWMediaRestoreEBRange").getMediaRestoreEBRange(l);_.updatePageSize(a,m)}return o("MAWRestoreProtobufsFromEncryptedBackupsDeferred").call("AdvancedCrypto",o("MAWJobDefinitions").toThreadJidPrimaryId(n),p.map(o("MAWJobDefinitions").mpsMessageToEncryptedBackupsMessage),c.hasNext,void 0,c.hasPrevious,void 0,!1,void 0,i.toString(),void 0,void 0,(s||(s=o("I64"))).of_int32(l===r("LSThreadMediaGalleryGroup").FILES_ONLY?r("LSMEBTaskCreationSource").FILE_GALLERY_RESTORE:r("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE)).catch(function(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["MediaPersist Protobuf error: ",""])),t)})}async function h(e,t,n){var r=await(u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton;return r.runInTransaction(async function(a){var i=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(r.tables.attachments_ranges_v2__generated).getKeyRange(e).filter(function(e){return(s||(s=o("I64"))).equal(e.mediaGroup,(c||(c=o("LSIntEnum"))).ofNumber(t))}));if(i!=null){var l=babelHelpers.extends({},i,n);return a.attachments_ranges_v2__generated.upsert([i.threadKey,i.mediaGroup,i.minTimestampMs],l)}},"readwrite","ui",void 0,i.id+":192")}async function y(e){var t,n,a=e.jid,i=e.mediaGalleryGroup,l=e.nextTimestampMsBefore,s=e.numMessages,u=e.threadId,c=i===r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS?[o("MSGDataclassTypes.flow").MpsMessageTag.Photo,o("MSGDataclassTypes.flow").MpsMessageTag.Video]:i===r("LSThreadMediaGalleryGroup").FILES_ONLY?[o("MSGDataclassTypes.flow").MpsMessageTag.File]:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i)})(),d=o("MpsOverBridge").mps().loadMessages({config:{persistToReverb:"no-persist",shouldFetchSupplementals:!1,shouldFetchTags:!0,shouldIgnoreLocalOnly:!0,strategy:"remote-only",tagsFilter:new Set(c)},debug:{purpose:"MAWFetchAndPersistMedia"},direction:"desc",from:[o("MpsTypes").toTimestamp(Number(l)),null],numMessages:20,threadId:o("MpsTypes").toThreadId(a)}),f=null,g=await Promise.race([d,new Promise(function(e){f=window.setTimeout(function(){return e(o("WAResultOrError").makeError(_))},p)})]);if(window.clearTimeout(f),g.success===!1)return g;var h=g.value.cursorInfo,C=(t=(n=h.endCursor)==null?void 0:n[0])!=null?t:o("MpsTypes").toTimestamp(0);return l===C?s===m?o("WAResultOrError").makeError("Retried with max pageSize: "+m+". Still stuck"):y({jid:a,mediaGalleryGroup:i,nextTimestampMsBefore:C,numMessages:m,threadId:u}):g}l.MAWFetchAndPersistMedia=f,l.updateLocalAttachmentsRange=h,l.fetchMediaFromEB=y}),98);
__d("MediaPlaybackCompoundEventUtils",["CometProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null&&e.v2&&(e==null?void 0:e.v2.length)>0){var t=e==null?void 0:e.v2,n=t[t.length-1];return[n.class,n.module].map(o("CometProductAttribution").filterEntryValue).join(":")}return""}function s(e){var t=0;switch(e){case"autoplay_initiated":t=1;break;case"loop_initiated":t=7;break;case"product_initiated":t=8;break;case"user_initiated":t=2;break;default:break}return t}function u(e){var t="unknown";switch(e){case"EXCELLENT":t="excellent";break;case"GOOD":t="good";break;case"MODERATE":t="moderate";break;case"POOR":t="poor";break;default:break}return t}function c(e){return e?"on":"off"}function d(e){if(typeof e=="string")return e;if(typeof e=="number")return e.toString()}function m(t){return t.productAttribution!=null?e(t.productAttribution):void 0}function p(e){return e.productAttribution!=null?o("CometProductAttribution").minifyProductAttributionV2(e.productAttribution):void 0}l.minifyProductAttributionV2Root=e,l.getMediaPlaybackPlayReason=s,l.getMediaPlaybackDataConnectionQuality=u,l.getMediaPlaybackCaptionState=c,l.stringifyMediaPlaybackMetadata=d,l.getMediaPlaybackAttributionIDV2Root=m,l.getMediaPlaybackAttributionIDV2=p}),98);
__d("isSSR",["ExecutionEnvironment","XPlatReactEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("XPlatReactEnvironment").isWeb()&&!(e||(e=r("ExecutionEnvironment"))).canUseDOM,u=s;l.default=u}),98);
__d("VideoPlayerConnectionQuality",["isSSR"],(function(t,n,r,o,a,i,l){"use strict";var e={POOR:"POOR",MODERATE:"MODERATE",GOOD:"GOOD",EXCELLENT:"EXCELLENT"},s=[{bandwidth:5e5,connectionQuality:e.POOR},{bandwidth:2e6,connectionQuality:e.MODERATE},{bandwidth:1e7,connectionQuality:e.GOOD}],u=100,c=null,d=null,m=function(n){if(r("isSSR"))return"MODERATE";if(c!=null&&d!=null&&c>=Date.now()-u)return d!=null?d:"MODERATE";var t=n(),o=null;if(t!=null){for(var a=0;a<s.length;a++)if(t<s[a].bandwidth){o=s[a].connectionQuality;break}}return o===null&&(o=e.EXCELLENT),c=Date.now(),d=o,o!=null?o:e.EXCELLENT};l.evaluate=m}),98);
__d("VideoPlayerImplementationErrorNormalization",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.getType(),n=e.getDescription();switch(t){case"OZ_NETWORK":{var r,o,a=(r=(o=e.getExtra())==null?void 0:o.code)!=null?r:"0",i=parseInt(a,10);return i<100||i>599?"NetworkError":"HTTPError"}case"OZ_SOURCE_BUFFER_QUOTA_EXCEEDED":{var l,s=(l=e.getExtra())==null?void 0:l.mimeType;return s!=null&&s.indexOf("video")>-1?"VideoDecodeError":s!=null&&s.indexOf("audio")>-1?"AudioDecodeError":"GenericDecodeError"}case"OZ_XML_PARSER":case"OZ_MPD_PARSER":case"OZ_REPRESENTATION_PARSER":return"ManifestParseError";case"OZ_DRM_MANAGER":case"OZ_INITIALIZATION":return/(OZ_XML_PARSER)|(OZ_MPD_PARSER)|(OZ_REPRESENTATION_PARSER)/.test(n)?"ManifestParseError":"RuntimeError";case"OZ_JAVASCRIPT_NATIVE":case"OZ_SOURCE_BUFFER":case"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR":case"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR":return"RuntimeError"}return null}function l(e,t){switch(e){case"OZ_XML_PARSER":case"OZ_MPD_PARSER":case"OZ_REPRESENTATION_PARSER":return"ManifestParseError";case"OZ_DRM_MANAGER":case"OZ_INITIALIZATION":return/(OZ_XML_PARSER)|(OZ_MPD_PARSER)|(OZ_REPRESENTATION_PARSER)/.test(t)?"ManifestParseError":"RuntimeError";case"OZ_JAVASCRIPT_NATIVE":case"OZ_SOURCE_BUFFER":case"OZ_STREAM_APPEND_QUOTA_EXCEEDED_HANDLER_ERROR":case"OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR":return"RuntimeError";case"BUFFERING_TIMEOUT":return"RuntimeError";default:{var n=[[["MEDIA_ERR_NETWORK"],"NetworkError"],[["MEDIA_ERR_ABORTED","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_UNKNOWN"],"GenericDecodeError"]];for(var r of n){var o=r[0],a=r[1];if(o.some(function(t){return e.includes(t)}))return a}}}return null}i.getVideoPlayerNormalizedErrorTypeFromOzError=e,i.getErrorTypeFromErrorName=l}),66);
__d("getPlayerFormatForLogData",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=e.isFullscreen;return n===!0?"full_screen":t!=null?t:"inline"}i.default=e}),66);
__d("MediaPlaybackMetadataProvider",["MediaPlaybackCompoundEventUtils","VideoPlayerConnectionQuality","VideoPlayerImplementationErrorNormalization","getPlayerFormatForLogData","mapObject"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=function(t){return s=s!=null?s:document.createElement("video"),"canPlayType"in s?s.canPlayType(t):""};function c(e){var t=e.controlledState.playbackState;switch(t){case"playing":case"stalling":return"playing";case"paused":return"paused";case"ended":return"finished";default:return"unknown"}}function d(t,n,o,a,i){var l=t.controlledState.error===o?babelHelpers.extends({},t,{controlledState:babelHelpers.extends({},t.controlledState,{error:{$ref:"$.player.lastError"}})}):t;t.uncontrolledState.videoElementError!=null&&(l=babelHelpers.extends({},l,{uncontrolledState:babelHelpers.extends({},l.uncontrolledState,{videoElementError:{code:t.uncontrolledState.videoElementError.code,message:t.uncontrolledState.videoElementError.message}})}));var s=n;{var d=typeof n.payload=="object"&&n.payload!=null?n.payload:null;if(d!=null){var m={};Object.keys(d).forEach(function(e){var t=d[e];t===o?m[e]={$ref:"$.player.lastError"}:m[e]=t}),s=babelHelpers.extends({},n,{payload:m})}}var p={"application/vnd.apple.mpegurl":"application/vnd.apple.mpegurl","application/x-mpegURL":"application/x-mpegURL","video/mp4":"video/mp4","video/ogg":"video/ogg","video/webm":"video/webm"};return{currentVideo:{audioStreamId:t.uncontrolledState.audioRepresentationID,dashAudioFormat:void 0,hasHD:void 0,hasRateLimit:void 0,hasSubtitles:t.controlledState.captionsLoaded,isDrm:!!i.graphQLVideoDRMInfo,isHD:void 0,isLiveStream:i.isLiveStreaming,isRateLimited:void 0,liveManifestUrl:void 0,projection:t.uncontrolledState.videoProjection,resourceUrl:void 0,streamId:t.uncontrolledState.videoRepresentationID,streamType:t.controlledState.streamingFormat,tagHD:void 0,tagSD:void 0,videoID:i.videoFBID},player:{canPlayType:(e||(e=r("mapObject")))(p,u),dimensions:a.dimensions?{height:a.dimensions.height,width:a.dimensions.width}:null,droppedFrames:t.uncontrolledState.videoElementDroppedFrameCount,initializationTime:void 0,initializationTimestamp:void 0,inPlayStallCount:void 0,inPlayStallTime:void 0,interruptCount:void 0,interruptTime:void 0,lastError:o,loggedError:void 0,stallCount:void 0,stallTime:void 0,state:c(t),totalFrames:t.uncontrolledState.videoElementTotalFrameCount,version:t.playerVersion,videoSource:void 0,viewabilityPercentage:t.uncontrolledState.viewabilityPercentage},playerStateMachine:{action:s,state:l}}}function m(e){var t=e.action,n=e.coreVideoPlayerMetaData,r=e.loggingMetaData,a=e.state,i=e.videoPlayerError,l=i.errorMessageFormat,s=i.errorName,u=i.errorType,c=i.errorCode==null||i.errorCode===""?s:i.errorCode,m=d(a,t,i,r,n),p={code:c,description:l,domain:s,error:s,type:String(u!=null?u:o("VideoPlayerImplementationErrorNormalization").getErrorTypeFromErrorName(s,l)),user_info:JSON.stringify(m)};return p}function p(e,t,n,r){var o,a,i,l=_(e,t,n);return{attribution_id_v2_root:void 0,author_id:r.author_id,current_watching_module:(o=r.current_watching_module)!=null?o:"",is_audio_only:t.audioOnly,is_live_streaming:(a=t.isLiveStreaming)!=null?a:void 0,media_id:t.videoFBID,nav_chain:r.nav_chain,player_format:l.player_format,player_origin:t.playerOriginOverride,player_suborigin:t.subOrigin,player_version:e.playerVersion,sessionizer_nav_chain:void 0,tracking_data_encrypted:n.trackingDataEncrypted,tracking_token:r.tracking_token,tracking_type:(i=r.tracking_type)!=null?i:"none",video_play_reason:l.video_play_reason}}function _(e,t,n){var a,i,l,s,u,c,d,m;return{attribution_id_v2:o("MediaPlaybackCompoundEventUtils").getMediaPlaybackAttributionIDV2(n),audio_representation_id:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.audioRepresentationID),autoplay_eligible:t.canAutoplay==="allow",autoplay_failure_reasons:JSON.stringify(t.autoplayGatingResult?[t.autoplayGatingResult]:[]),autoplay_setting:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(t.autoplaySetting),available_qualities_count:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.availableQualities.length),caption_format:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.controlledState.captionFormat),caption_locale:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.controlledState.captionsLocale),caption_state:o("MediaPlaybackCompoundEventUtils").getMediaPlaybackCaptionState(e.controlledState.captionsVisible),client_latency_setting:e.controlledState.latencyLevel,current_viewability:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.viewabilityPercentage),dash_manifest_identifier:e.uncontrolledState.manifestIdentifier,data_connection_quality:o("MediaPlaybackCompoundEventUtils").getMediaPlaybackDataConnectionQuality(o("VideoPlayerConnectionQuality").evaluate(function(){return e.uncontrolledState.estimatedBandwidth})),downstream_share_origin_uri:(a=n.downstreamShareSignalTracking)==null?void 0:a.downstream_share_session_origin_uri,downstream_share_start_time:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata((i=n.downstreamShareSignalTracking)==null?void 0:i.downstream_share_session_start_time),downstream_share_visit_uuid:(l=n.downstreamShareSignalTracking)==null?void 0:l.downstream_share_session_id,dropped_frame_count:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.videoElementDroppedFrameCount),external_log_id:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(t.externalLogID),external_log_type:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(t.externalLogType),is_abr_enabled:e.isAbrEnabled,is_fbms:(s=e.uncontrolledState.isFBMS)!=null?s:void 0,is_live_video_rewound:e.controlledState.isLiveRewindActive,is_mixed_codec_manifest:(u=e.uncontrolledState.isMixedCodecManifest)!=null?u:void 0,is_predictive_playback:e.uncontrolledState.isPredictiveDash,mpd_validation_errors:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.mpdValidationErrors),playback_speed:e.uncontrolledState.videoElementPlaybackRate,player_format:r("getPlayerFormatForLogData")({isDesktopPictureInPicture:(c=e.controlledState.isDesktopPictureInPicture)!=null?c:!1,isFullscreen:e.uncontrolledState.isFullscreen},t.playerFormat),player_sound_on:!(e.controlledState.muted||e.controlledState.volume===0),projection:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.videoProjection),streaming_format:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.controlledState.streamingFormat),total_frame_count:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.videoElementTotalFrameCount),video_bandwidth:(d=e.uncontrolledState.estimatedBandwidth)!=null?d:void 0,video_play_reason:e.controlledState.lastPlayReason!=null?o("MediaPlaybackCompoundEventUtils").getMediaPlaybackPlayReason(e.controlledState.lastPlayReason):null,video_projection:(m=e.uncontrolledState.videoProjection)!=null?m:void 0,video_representation_id:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(e.uncontrolledState.videoRepresentationID),view_height:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(Math.floor(n.dimensions.height)),view_width:o("MediaPlaybackCompoundEventUtils").stringifyMediaPlaybackMetadata(Math.floor(n.dimensions.width))}}l.getSNAPLErrorMetadataCommon=m,l.getSNAPLRequiredMetadataCommon=p,l.getSNAPLTagMetadataCommon=_}),98);
__d("getVideoBrowserTabId",["guid"],(function(t,n,r,o,a,i,l){var e=r("guid")().slice(-8);function s(){return e}l.default=s}),98);
__d("MWThumbnailDurationPill",["getFormattedTimestamp","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(7),n=e.spacing,a=e.videoDuration,i;t[0]!==n?(i={0:{className:"x6s0dn4 x18l40ae xqbdsaf xpf24wh x14a4ghu x1a4jp9x x14ctfv x1ncwhqj x1nn3v0j x1icxu4v x1120s5i x25sj25 x10l6tqk xxymvpz xqo3gd x11dcrhx"},1:{className:"x6s0dn4 x18l40ae xqbdsaf xpf24wh x14a4ghu x1a4jp9x x14ctfv x1ncwhqj x1nn3v0j x1icxu4v x1120s5i x25sj25 x10l6tqk xxymvpz xbfrwjf xxx7yvo"}}[(n==="TIGHT")<<0],t[0]=n,t[1]=i):i=t[1];var l;t[2]!==a?(l=r("getFormattedTimestamp")(a),t[2]=a,t[3]=l):l=t[3];var u;return t[4]!==i||t[5]!==l?(u=s.jsx("div",babelHelpers.extends({},i,{children:l})),t[4]=i,t[5]=l,t[6]=u):u=t[6],u}l.default=u}),98);
__d("VideoPlayerFullscreenControl.react",["fbt","ix","VideoPlayerControlIcon.react","VideoPlayerHooks","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c,d=e||(e=o("react"));function m(e){var t=o("react-compiler-runtime").c(18),n=e.onPress,a=e.onUserInteraction,i=e.shouldUnmute,l=e.showTooltip,m=e.useOutlineIcons,p=l===void 0?!0:l,_=m===void 0?!1:m,f=(c||(c=o("VideoPlayerHooks"))).useController(),g=c.useIsFullscreen(),h=c.useLastMuteReason(),y;t[0]!==g?(y=g?s._(/*BTDS*/"Exit fullscreen"):s._(/*BTDS*/"Enter fullscreen"),t[0]=g,t[1]=y):y=t[1];var C=y,b;t[2]!==f||t[3]!==g||t[4]!==h||t[5]!==n||t[6]!==a||t[7]!==i?(b=function(){n&&n(),f.requestSetIsFullscreen(!g),i===!0&&h!=="user_initiated"&&f.setMuted(!1,"product_initiated"),a&&a({name:"video_fullscreen_button",type:"happened"})},t[2]=f,t[3]=g,t[4]=h,t[5]=n,t[6]=a,t[7]=i,t[8]=b):b=t[8];var v=b,S;t[9]!==_?(S=_?o("fbicon")._(u("528442"),20):o("fbicon")._(u("517758"),20),t[9]=_,t[10]=S):S=t[10];var R=S,L;t[11]!==_?(L=_?o("fbicon")._(u("595830"),20):o("fbicon")._(u("517763"),20),t[11]=_,t[12]=L):L=t[12];var E=L,k=g?R:E,I=p?C:null,T;return t[13]!==C||t[14]!==v||t[15]!==k||t[16]!==I?(T=d.jsx(r("VideoPlayerControlIcon.react"),{icon:k,label:C,onPress:v,tooltip:I}),t[13]=C,t[14]=v,t[15]=k,t[16]=I,t[17]=T):T=t[17],T}l.default=m}),226);
__d("useVideoPlayerHasStartedSeekingSinceLastPlay",["VideoPlayerHooks","createVideoStateHook","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=o("createVideoStateHook").createVideoStateHook(null),d=c.stateHook;function m(){var e=o("react-compiler-runtime").c(5),t=d(!1),n=t[0],r=t[1],a=(s||(s=o("VideoPlayerHooks"))).useSeeking(),i=s.usePlaying(),l,c;return e[0]!==i||e[1]!==a||e[2]!==r?(l=function(){a&&!i&&r(!0),i&&r(!1)},c=[i,a,r],e[0]=i,e[1]=a,e[2]=r,e[3]=l,e[4]=c):(l=e[3],c=e[4]),u(l,c),n}l.default=m}),98);
__d("useMWVideoPlayerBigPlayButtonOverlay.react",["MWVideoPlayerPlayButton.react","VideoPlayerHooks","react","react-compiler-runtime","useVideoPlayerHasStartedPlayingAtLeastOnce","useVideoPlayerHasStartedSeekingSinceLastPlay"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(14),n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];var a=n,i=a.buttonSize,l=a.forceVisible,c=a.overrideInteraction,d=a.shouldUnmute,m=i===void 0?"large":i,p=(s||(s=o("VideoPlayerHooks"))).usePaused(),_=s.useEnded(),f=r("useVideoPlayerHasStartedPlayingAtLeastOnce")(),g=r("useVideoPlayerHasStartedSeekingSinceLastPlay")(),h=s.useLastMuteReason(),y=s.useController(),C;t[2]!==y||t[3]!==h||t[4]!==d?(C=function(){y.play("user_initiated"),d===!0&&h!=="user_initiated"&&y.setMuted(!1,"product_initiated")},t[2]=y,t[3]=h,t[4]=d,t[5]=C):C=t[5];var b=C,v=c!=null?c.handler:b,S=l===!0||l===!1?l:!f&&p,R=m==="small"?"SMALL":"LARGE",L=_&&!g?"REPLAY":"PLAY",E;t[6]!==S||t[7]!==v||t[8]!==R||t[9]!==L?(E=u.jsx(r("MWVideoPlayerPlayButton.react"),{isVisible:S,onClick:v,size:R,type:L}),t[6]=S,t[7]=v,t[8]=R,t[9]=L,t[10]=E):E=t[10];var k=E,I;return t[11]!==k||t[12]!==S?(I={bigPlayButtonElement:k,bigPlayButtonIsVisible:S},t[11]=k,t[12]=S,t[13]=I):I=t[13],I}l.default=d}),98);
__d("useVideoPlayerDefaultControlsVisibility",["VideoPlayerHooks","VideoPlayerInstreamAdsStateHooks","VideoPlayerUserInteractionCounter","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useState,m=5e3;function p(e){var t=o("react-compiler-runtime").c(9),n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];var a=n,i=a.forceVisible,l=a.forceVisibleOnMount,u=o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteractionCounter(),p=u.ongoingInteractionsCount,_=u.onUserInteraction,f=(s||(s=o("VideoPlayerHooks"))).useEnded(),g=s.useIsHovering(),h=s.usePaused(),y=s.useIsMouseIdle(),C=s.useVideoPlaybackEnded(),b=o("VideoPlayerInstreamAdsStateHooks").useInstreamAdsIsStart();o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_pointer_active",g&&!y,_);var v=d(l===!0),S=v[0],R=v[1],L,E;t[2]!==S||t[3]!==h?(L=function(){if(!h&&S){var e=r("setTimeout")(function(){R(!1)},m);return(function(){r("clearTimeout")(e)})}},E=[S,h],t[2]=S,t[3]=h,t[4]=L,t[5]=E):(L=t[4],E=t[5]),c(L,E);var k;i===!0||i===!1?k=i:b?k=!1:p>0||S?k=!0:h?k=f?C:!0:k=!1;var I;return t[6]!==k||t[7]!==_?(I={isControlsVisible:k,onUserInteraction:_},t[6]=k,t[7]=_,t[8]=I):I=t[8],I}l.default=p}),98);
__d("MWChatVideoPlayerControls.react",["MWThumbnailDurationPill","VideoPlayerControlsContainerOverlay.react","VideoPlayerControlsGroups.react","VideoPlayerFullscreenControl.react","VideoPlayerHooks","VideoPlayerPlaybackControl.react","VideoPlayerPlaybackTimer.react","VideoPlayerScrubber.react","VideoPlayerVolumeControl.react","react","react-compiler-runtime","useMWVideoPlayerBigPlayButtonOverlay.react","useVideoPlayerDefaultControlsVisibility","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(3),n=e.children,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r={className:"x12y6twl x1g0ag68"},t[0]=r):r=t[0];var a;return t[1]!==n?(a=u.jsx("span",babelHelpers.extends({},r,{children:n})),t[1]=n,t[2]=a):a=t[2],a}function d(e){var t=o("react-compiler-runtime").c(15),n=e.hideControls,a=e.hideExpandButton,i=e.isMediaViewer,l=r("useVideoPlayerDefaultControlsVisibility")(),d=l.isControlsVisible,m=l.onUserInteraction,p=(s||(s=o("VideoPlayerHooks"))).useIsTransitioningToNextLoop(),_=s.usePaused(),f;t[0]!==_?(f={forceVisible:_},t[0]=_,t[1]=f):f=t[1];var g=r("useMWVideoPlayerBigPlayButtonOverlay.react")(f),h=g.bigPlayButtonElement,y=!p,C=s.useIsFullscreen(),b=s.useDuration(),v=r("useVideoPlayerHasStartedPlayingAtLeastOnce")(),S=s.usePlaying(),R=s.useEnded(),L=!v&&!S||R,E;t[2]!==b||t[3]!==a||t[4]!==C||t[5]!==i||t[6]!==m||t[7]!==L?(E=C?u.jsxs(u.Fragment,{children:[u.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{children:[u.jsx(r("VideoPlayerPlaybackControl.react"),{}),u.jsx(r("VideoPlayerPlaybackTimer.react"),{})]}),u.jsx(o("VideoPlayerControlsGroups.react").Expanded,{children:u.jsx(r("VideoPlayerScrubber.react"),{onUserInteraction:m})}),u.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{children:[u.jsx(r("VideoPlayerFullscreenControl.react"),{onUserInteraction:m}),u.jsx(r("VideoPlayerVolumeControl.react"),{onUserInteraction:m})]})]}):L?u.jsx(r("MWThumbnailDurationPill"),{spacing:"WIDE",videoDuration:b}):u.jsxs(u.Fragment,{children:[u.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{children:[i===!0?u.jsx(r("VideoPlayerPlaybackTimer.react"),{}):null,u.jsx(c,{children:u.jsx(r("VideoPlayerPlaybackControl.react"),{})})]}),u.jsx(o("VideoPlayerControlsGroups.react").Expanded,{children:u.jsx(r("VideoPlayerScrubber.react"),{onUserInteraction:m})}),u.jsxs(o("VideoPlayerControlsGroups.react").Contracted,{children:[a?null:u.jsx(c,{children:u.jsx(r("VideoPlayerFullscreenControl.react"),{onUserInteraction:m})}),u.jsx(c,{children:u.jsx(r("VideoPlayerVolumeControl.react"),{onUserInteraction:m})})]})]}),t[2]=b,t[3]=a,t[4]=C,t[5]=i,t[6]=m,t[7]=L,t[8]=E):E=t[8];var k;t[9]!==d||t[10]!==E?(k=u.jsx(r("VideoPlayerControlsContainerOverlay.react"),{isVisible:d,children:E}),t[9]=d,t[10]=E,t[11]=k):k=t[11];var I=k,T=n!==!0,D=y&&h,x=T&&I,$;return t[12]!==D||t[13]!==x?($=u.jsxs(u.Fragment,{children:[D,x]}),t[12]=D,t[13]=x,t[14]=$):$=t[14],$}l.default=d}),98);
__d("MWSetupMediaRenderQpl.react",["FBLogger","VideoPlayerHooks","performanceAbsoluteNow","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=c.useEffect,m=c.useRef;function p(t){var n=o("react-compiler-runtime").c(5),a=t.context,i=t.mediaRenderQpl,l=(u||(u=o("VideoPlayerHooks"))).useController(),s=m(),c,p;return n[0]!==a||n[1]!==i||n[2]!==l?(c=function(){i==null||i.addPoint("setup-video-media-render-qpl",{string:{context:a}});var t=function(){var t,n=l.getCurrentState();if(n.error!=null){var o,u=n.error.errorName,c=n.error.errorType,d=n.error.errorMessageFormat+" - "+n.error.errorMessageParams.join(",");i==null||i.endFail("load-video-error",{string:{video_error_message:d,video_error_name:u,video_error_type:c}}),r("FBLogger")("messenger_web_media","load-video-error").warn("%s Video Player Error: %s",a,d),(o=s.current)==null||o.remove()}var m=n.domEventsLatestPerfMs.loadeddata!=null&&n.domEventsLatestPerfMs.loadeddata>0;m&&(i==null||i.addPoint("video-state-loaded-data"));var p=n.domEventsLatestPerfMs.loadedmetadata!=null&&n.domEventsLatestPerfMs.loadedmetadata>0;p&&(i==null||i.addPoint("video-state-loaded-metadata"));var _=(t=l.internal_getStateMachineState())==null?void 0:t.uncontrolledState,f=_==null?void 0:_.videoElementReadyState;f!=null&&f>0&&(i==null||i.addPoint("video-state-ready-state",{int:{ready_state:f}}));var g=n.domEventsLatestPerfMs.canplay!=null&&n.domEventsLatestPerfMs.canplay>0;if(g){var h=(e||(e=r("performanceAbsoluteNow")))();i==null||i.addPoint("video-state-can-play"),r("setTimeout")(function(){var e;i==null||i.endSuccess(void 0,h),(e=s.current)==null||e.remove()},500)}};return s.current=l.subscribe(function(){t()}),t(),(function(){var e;(e=s.current)==null||e.remove()})},p=[a,i,l],n[0]=a,n[1]=i,n[2]=l,n[3]=c,n[4]=p):(c=n[3],p=n[4]),d(c,p),null}l.default=p}),98);
__d("VideoPlayerDefaultControls_video.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"VideoPlayerDefaultControls_video",selections:[{args:null,kind:"FragmentSpread",name:"VideoPlayerDefaultControlsImplLive_video"},{args:null,kind:"FragmentSpread",name:"VideoPlayerDefaultControlsImplNotLive_video"}],type:"Video",abstractKey:null};a.exports=e}),null);
__d("VideoPlayerDefaultControls.react",["CometPlaceholder.react","CometRelay","CometWarningScreenContext","VideoPlayerDefaultControlsProperties","VideoPlayerDefaultControls_video.graphql","VideoPlayerFullscreenControl.react","VideoPlayerHooks","cr:1875194","deferredLoadComponent","react","react-compiler-runtime","requireDeferred","useEmptyFunction","useVideoPlayerBigPlayButtonOverlay","useVideoPlayerDefaultControlsVisibility"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=u||(u=o("react")),m=(s=n("cr:1875194"))!=null?s:r("useEmptyFunction"),p=r("deferredLoadComponent")(r("requireDeferred")("VideoPlayerDefaultControlsImplLive.react").__setRef("VideoPlayerDefaultControls.react")),_=r("deferredLoadComponent")(r("requireDeferred")("VideoPlayerDefaultControlsImplNotLive.react").__setRef("VideoPlayerDefaultControls.react"));function f(t){var a,l=o("react-compiler-runtime").c(36),s=t.availableCaptionsLocales,u=t.forceVisible,f=t.forceVisibleOnMount,g=t.initialCaptionsUrl,h=t.mutedButtonVisibility,y=t.pictureInPictureControl,C=t.renderExpandControl,b=t.scrubberTimelinePlayedXStyle,v=t.shouldRenderBigPlayButton,S=t.shouldRenderCaptionsControl,R=t.shouldRenderCostreamControl,L=t.shouldRenderExpandSidePanelControl,E=t.shouldRenderLivePauseControl,k=t.shouldRenderModeratorControl,I=t.shouldRenderQuietModeControl,T=t.shouldRenderWatchAndScrollControl,D=t.shouldUnmuteForBigPlayButton,x=t.skipControl,$=t.subOrigin,P=t.video,N=t.videoChapters,M=t.videoTahoeUrl,w=o("CometRelay").useFragment(e!==void 0?e:e=n("VideoPlayerDefaultControls_video.graphql"),P),A=(a=o("CometWarningScreenContext").useIsContentVisible())!=null?a:!1,F=m(),O=F!=null?F.isSilentAtPlayhead:!1,B=(c||(c=o("VideoPlayerHooks"))).useMuted(),W=c.useIsLive(),q;l[0]!==u||l[1]!==f?(q={forceVisible:u,forceVisibleOnMount:f},l[0]=u,l[1]=f,l[2]=q):q=l[2];var U=r("useVideoPlayerDefaultControlsVisibility")(q),V=U.isControlsVisible,H=U.onUserInteraction,G=v!=null?v:u===!1?!1:void 0,z;l[3]!==D||l[4]!==G?(z={forceVisible:G,shouldUnmute:D},l[3]=D,l[4]=G,l[5]=z):z=l[5];var j=r("useVideoPlayerBigPlayButtonOverlay")(z),K=j.bigPlayButtonElement,Q=j.bigPlayButtonIsVisible,X=V&&!Q&&A,Y=h===o("VideoPlayerDefaultControlsProperties").MutedButtonVisibility.SAME_AS_OTHER_CONTROLS?X:(B||X||O)&&!Q,J;l[6]!==H||l[7]!==C?(J=C!=null?C({onUserInteraction:H}):d.jsx(r("VideoPlayerFullscreenControl.react"),{onUserInteraction:H}),l[6]=H,l[7]=C,l[8]=J):J=l[8];var Z=J,ee;l[9]!==s||l[10]!==Z||l[11]!==g||l[12]!==X||l[13]!==W||l[14]!==Y||l[15]!==H||l[16]!==y||l[17]!==b||l[18]!==S||l[19]!==R||l[20]!==L||l[21]!==E||l[22]!==k||l[23]!==I||l[24]!==T||l[25]!==x||l[26]!==$||l[27]!==w||l[28]!==N||l[29]!==M?(ee=W?d.jsx(p,{expandControl:Z,isControlsVisible:X,isVolumeControlVisible:Y,onUserInteraction:H,pictureInPictureControl:y,shouldRenderCaptionsControl:S,shouldRenderCostreamControl:R,shouldRenderExpandSidePanelControl:L,shouldRenderModeratorControl:k,shouldRenderPauseControl:E,shouldRenderQuietModeControl:I,shouldRenderWatchAndScrollControl:T,subOrigin:$,video:w,videoTahoeUrl:M}):d.jsx(_,{availableCaptionsLocales:s,expandControl:Z,initialCaptionsUrl:g,isControlsVisible:X,isVolumeControlVisible:Y,onUserInteraction:H,scrubberTimelinePlayedXStyle:b,shouldRenderCaptionsControl:S,shouldRenderExpandSidePanelControl:L,shouldRenderQuietModeControl:I,shouldRenderWatchAndScrollControl:T,skipControl:x,subOrigin:$,video:w,videoChapters:N,videoTahoeUrl:M}),l[9]=s,l[10]=Z,l[11]=g,l[12]=X,l[13]=W,l[14]=Y,l[15]=H,l[16]=y,l[17]=b,l[18]=S,l[19]=R,l[20]=L,l[21]=E,l[22]=k,l[23]=I,l[24]=T,l[25]=x,l[26]=$,l[27]=w,l[28]=N,l[29]=M,l[30]=ee):ee=l[30];var te=ee,ne;l[31]!==te?(ne=d.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:te}),l[31]=te,l[32]=ne):ne=l[32];var re;return l[33]!==K||l[34]!==ne?(re=d.jsxs(d.Fragment,{children:[K,ne]}),l[33]=K,l[34]=ne,l[35]=re):re=l[35],re}l.default=f}),98);
__d("VideoPlayerProgressiveImplementationData",["err"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return/\.mpd(\?|$)/.test(e)}function s(t){var n=t.hdSrc,o=t.hdSrcPreferred,a=t.sdSrc;if(n==null&&a==null){var i=r("err")("Both HD and SD browser-native URLs are not available");return i.name="GotNoBrowserNativeURLs",i}var l=a!=null&&e(a),s=n!=null&&e(n);if(l||s){var u=r("err")("HD or SD browser-native URL points to a DASH manifest");return u.name="GotBrowserNativeURLsPointToDASH",u}return{hdSrc:n,hdSrcPreferred:o,sdSrc:a}}l.makeProgressiveImplementationData=s}),98);
__d("MediaPlaybackTagMetadataHighFrequencyCategory",[],(function(t,n,r,o,a,i){var e=Object.freeze({FB_BANDWIDTH:"fb_bandwidth",VIDEO_BANDWIDTH:"video_bandwidth",TOTAL_FRAME_COUNT:"total_frame_count",DROPPED_FRAME_COUNT:"dropped_frame_count",LARGE_DROPPED_FRAME_COUNT:"large_dropped_frame_count",VERY_LARGE_DROPPED_FRAME_COUNT:"very_large_dropped_frame_count",TASOS_VIDEO_TRANSPORT_BWE_BITS_PER_SEC:"tasos_video_transport_bwe_bits_per_sec",LIVE_LATENCY_FRAMES:"live_latency_frames",DROPPED_FRAME_BUCKETIZED:"dropped_frame_bucketized"});i.default=e}),66);
__d("MediaPlaybackCompoundEventStateMachineLogger",["MediaPlaybackTagMetadataHighFrequencyCategory","NetworkStatus","SiteData","emptyFunction","gkx","hashString","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=6e4,u=1e3,c=Object.freeze(["paused","completed","cancelled","error","heartbeat"]),d=e=r("emptyFunction"),m=e,p=e,_=e,f=!1;r("gkx")("494")&&(f=!0,d=function(t,n){try{for(var e,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(e=window.console).info.apply(e,["["+t+"][SNAPL]"+n].concat(o))}catch(e){}},m=function(t,n,r,o){d(t,"[handleMetaData]",{loggingMetaData:r,loggingMetaDataPrevious:n,trackedChanges:o})},p=function(t,n,r,o){d(t,"[handleStateMachine]",{prevState:n,state:r,action:o})},_=function(t,n){d(t,"[setAdditionalLogData(SNAPL)]",{values:n})});function g(){return{bufferingSequenceStartClockTimestamp:null,canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,errorRecoveryAttemptState:{eventsLogged:0},hasLoggedStartedPlaying:!1,hasPendingRequestedPlaying:!1,isLoggingScrubbingSequence:!1,lastLoggedError:null,lastLoggedTagMetadata:{},nextHeartbeatTime:null,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,warningState:{eventsLoggedPerKey:new Map,eventsLoggedTotal:0,eventsMaxLoggedPerKey:(function(){try{return Math.max(0,r("justknobx")._("1831")||0)}catch(e){return 0}})(),eventsMaxLoggedTotal:(function(){try{return Math.max(0,r("justknobx")._("1832")||0)}catch(e){return 0}})()}}}function h(e){var t={},n=e.initialLoggingMetaData,o=e.initialCoreVideoPlayerMetaData,a=n,i=[],l=g(),h=[],y={};function C(t){var r,a,s=t.events,u=t.state,c=babelHelpers.extends({},o.loggingToSNAPLAdditionalData,y),m=(r=(a=e.metadataProvider)==null?void 0:a.getRequiredMetadata({coreVideoPlayerMetaData:o,logDataAdditions:c,loggingMetaData:n,state:u}))!=null?r:{current_watching_module:"",media_id:"",tracking_type:"none"},p={events:s,required_metadata:m};i.push(p),f&&d(e.debugLogId,"[_push] "+p.events.map(function(e){return e.event_name}).join(","),{loggedEvent:p,loggerEventsLength:i.length,loggingState:JSON.stringify(l)})}function b(n){var r=n.event,o=n.state;if(h.push(r),f&&d(e.debugLogId,"[_addEvent] "+r.event_name,{event:r,eventsListLength:h.length,loggingState:JSON.stringify(l)}),c.includes(r.event_name)){var a=[].concat(h);h=[],C({events:a,state:o})}return t}function v(){return l.hasLoggedStartedPlaying?"unpaused":"started"}function S(e,t){var o=e.uncontrolledState.videoElementDuration;return{client_time_ms:r("gkx")("18028")?Math.floor(e.uncontrolledState.clockTimestamp).toString():Math.round(e.uncontrolledState.clockTimestamp).toString(),event_name:t,media_time_ms:e.uncontrolledState.videoElementPlayheadPosition!=null?Math.round(e.uncontrolledState.videoElementPlayheadPosition*1e3).toString():"0",player_instance_id:Math.abs(r("hashString")(n.instanceKey)).toString(),player_instance_key:n.instanceKey,video_client_duration:o!=null?Math.trunc(o*1e3).toString():void 0}}function R(t){if(a=n,t.type==="notify_logging_metadata_change"){var r=t.payload,i=r.coreVideoPlayerMetaData,l=r.loggingMetaData;if(f){var s=i.initialTracePolicy!==o.initialTracePolicy;m(e.debugLogId,n,l,{initialTracePolicyChanged:s})}n=l,o=i}}function L(e,n,r){if(e.controlledState.playbackState!==n.controlledState.playbackState&&n.controlledState.playbackState==="ended"&&l.canLogPausedOrFinishedPlaying){k(n);var o=S(n,"completed");return b({event:o,state:n}),l.canLogPausedOrFinishedPlaying=!1,t}else return t}function E(e,n){var r=S(e,"requested_playing"),o=n!=null?babelHelpers.extends({},r,{media_time_ms:Math.round(n*1e3).toString(),start_state:v()}):babelHelpers.extends({},r,{start_state:v()});return b({event:o,state:e}),l.hasPendingRequestedPlaying=!0,l.canLogPausedOrFinishedPlaying=!0,t}function k(r,a){var i,l=babelHelpers.extends({},o.loggingToSNAPLAdditionalData,y),s=(i=e.metadataProvider)==null?void 0:i.getTagMetadata({coreVideoPlayerMetaData:o,logDataAdditions:l,loggingMetaData:n,state:r});if(Object.keys(s!=null?s:{}).length>0){a&&(s=babelHelpers.extends({},s,a));var u=babelHelpers.extends({},S(r,"tags_changed"),{tag_metadata:s});b({event:u,state:r})}return t}function I(e){if(l.canLogPausedOrFinishedPlaying){if(l.hasPendingRequestedPlaying)return k(e),T(e),l.canLogPausedOrFinishedPlaying=!1,l.hasPendingRequestedPlaying=!1,t;k(e);var n=S(e,"paused");return b({event:n,state:e}),l.canLogPausedOrFinishedPlaying=!1,l.hasPendingRequestedPlaying=!1,t}else return t}function T(e){var n=S(e,"cancelled");return b({event:n,state:e}),t}function D(e,n,r){if(r.type==="dom_event_play_promise_rejected"&&l.hasPendingRequestedPlaying){var o=r.payload.playPromiseRejectionReason;return o!=null&&o.name==="NotAllowedError"&&T(n),t}else return t}function x(e,n,r){return(r.type==="controller_play_requested"||r.type==="dom_event_play"&&!l.shouldIgnoreDomPlay)&&e.controlledState.playbackState!==n.controlledState.playbackState&&E(n),t}function $(e){var n=S(e,"requested_seek");return b({event:n,state:e}),t}function P(e,n,r){var o=n.controlledState.playbackState,a=e.controlledState.playbackState;return r.type==="controller_scrub_begin_requested"&&!e.controlledState.scrubbing&&o!=="paused"&&o!=="ended"?(I(n),$(n),l.isLoggingScrubbingSequence=!0,t):!e.controlledState.seeking&&n.controlledState.seeking&&!l.isLoggingScrubbingSequence&&o!=="paused"&&o!=="ended"&&!l.hasPendingRequestedPlaying?(I(n),$(n),l.shouldLogRequestedPlayingForScrub=!0,t):r.type==="controller_scrub_end_requested"&&e.controlledState.scrubbing&&o!=="paused"&&o!=="ended"?(E(n,r.payload.seekTargetPosition),t):(e.controlledState.seeking&&!n.controlledState.seeking&&(l.shouldLogRequestedPlayingForScrub&&o!=="paused"&&o!=="ended"&&E(n),l.isLoggingScrubbingSequence=!1,l.shouldLogRequestedPlayingForScrub=!1,a!=="paused"&&a!=="ended"&&(l.canLogPlayingEvent=!0)),t)}function N(e,n,o){if(e.controlledState.playbackState==="stalling"&&n.controlledState.playbackState==="playing"&&l.canLogPlayingEvent){var a=babelHelpers.extends({},S(n,"started_playing"),{start_state:v()});return b({event:a,state:n}),l.canLogPlayingEvent=!1,l.hasPendingRequestedPlaying=!1,l.hasLoggedStartedPlaying=!0,k(n,{web_client_revision:String(r("SiteData").client_revision)}),t}else return t}function M(e,n,r){return(r.type==="controller_pause_requested"||r.type==="dom_event_pause"&&!l.shouldIgnoreDomPause)&&e.controlledState.playbackState!==n.controlledState.playbackState&&I(n),t}function w(e,n,r){var o=n.controlledState.playbackState;return o!=="paused"&&o!=="ended"&&(r.type==="implementation_video_node_unmounted"?I(e):(r.type==="implementation_unmounted"||r.type==="implementation_engine_destroy_requested")&&I(n)),t}function A(r,a,i){var s=a.controlledState.error;if(s!=null&&s!==l.lastLoggedError&&s.errorCode!=="410"){var u;k(a);var c=babelHelpers.extends({},(u=e.metadataProvider)==null?void 0:u.getErrorMetadata({action:i,coreVideoPlayerMetaData:o,loggingMetaData:n,state:a,videoPlayerError:s}),{name:"failed_playing"}),d=babelHelpers.extends({},S(a,"error"),{error_metadata:c});b({event:d,state:a}),l.lastLoggedError=s}return t}function F(a,i,s){if(s.type==="error_recovery_attempt"&&l.errorRecoveryAttemptState.eventsLogged<u){var c,d=s.payload.recoverableError;if(d!=null&&d.errorName==="OZ_NETWORK"&&!r("NetworkStatus").isOnline())return t;var m=babelHelpers.extends({},(c=e.metadataProvider)==null?void 0:c.getErrorMetadata({action:s,coreVideoPlayerMetaData:o,loggingMetaData:n,state:i,videoPlayerError:d}),{name:"error_recovery_attempt"}),p=babelHelpers.extends({},S(i,"error"),{error_metadata:m});b({event:p,state:i}),l.errorRecoveryAttemptState.eventsLogged++}return t}function O(e,n,r){var o=e.controlledState.playbackState,a=n.controlledState.playbackState;if(l.hasPendingRequestedPlaying||l.shouldLogRequestedPlayingForScrub||l.bufferingSequenceStartClockTimestamp!=null)return t;if(o!=="stalling"&&a==="stalling"){var i=S(n,"started_buffering");b({event:i,state:n}),l.bufferingSequenceStartClockTimestamp=n.uncontrolledState.clockTimestamp,l.shouldIgnoreDomPause=!0,l.shouldIgnoreDomPlay=!0}return t}function B(e,n,o){var a=e.controlledState.playbackState,i=n.controlledState.playbackState,s=l.bufferingSequenceStartClockTimestamp;if(s==null)return t;if((o.type==="dom_event_playing"||o.type==="buffering_end_requested")&&a==="stalling"&&i!=="stalling"){var u=0;o.payload.domEventPerfTimestamp!=null&&(u=Math.max(n.uncontrolledState.perfTimestamp-o.payload.domEventPerfTimestamp,0));var c=Math.round(r("gkx")("18028")?Math.max(s,n.uncontrolledState.clockTimestamp-u):n.uncontrolledState.clockTimestamp-u),d=babelHelpers.extends({},S(n,"stopped_buffering"),{client_time_ms:c.toString()});b({event:d,state:n}),l.bufferingSequenceStartClockTimestamp=null,l.shouldIgnoreDomPause=!1,l.shouldIgnoreDomPlay=!1}return t}function W(e,n,r){var o=n.controlledState.playbackState;o==="paused"||o==="ended"?l.nextHeartbeatTime=null:o!=="stalling"&&l.nextHeartbeatTime==null&&(l.nextHeartbeatTime=n.uncontrolledState.clockTimestamp+s);var a=l.nextHeartbeatTime;if(a!=null){var i=n.uncontrolledState.clockTimestamp;if(i>=a){if(o!=="stalling"){var u=S(n,"heartbeat");b({event:u,state:n})}l.nextHeartbeatTime=i+s}}return t}function q(e){var t=e.errorMessageFormat,n=e.errorName,r=e.errorCode==null||e.errorCode===""?n:e.errorCode,o=n+"#"+r+": "+U(t);return o}function U(e){return e.replace(/([0-9]{2,})/g,function(e){for(var t="";t.length<e.length;)t+="#";return t})}function V(a,i,s){if(r("justknobx")._("3727"))return t;if(s.type==="implementation_warning"){var u,c=s.payload.warningError,d=q(c),m=l.warningState.eventsLoggedTotal,p=(u=l.warningState.eventsLoggedPerKey.get(d))!=null?u:0;if(m<l.warningState.eventsMaxLoggedTotal&&p<l.warningState.eventsMaxLoggedPerKey){var _;l.warningState.eventsLoggedTotal++,l.warningState.eventsLoggedPerKey.set(d,p+1);var f=babelHelpers.extends({},(_=e.metadataProvider)==null?void 0:_.getErrorMetadata({action:s,coreVideoPlayerMetaData:o,loggingMetaData:n,state:i,videoPlayerError:c}),{name:"player_warning"}),g=babelHelpers.extends({},S(i,"error"),{error_metadata:f});b({event:g,state:i})}}return t}function H(a,i,s){var u,c=babelHelpers.extends({},o.loggingToSNAPLAdditionalData,y),d=l.lastLoggedTagMetadata,m=(u=e.metadataProvider)==null?void 0:u.getTagMetadata({coreVideoPlayerMetaData:o,logDataAdditions:c,loggingMetaData:n,state:i});if(m&&JSON.stringify(m)!==JSON.stringify(d)){var p={};Object.keys(m).forEach(function(e){if(m[e]!==d[e]){var t;p=babelHelpers.extends({},p,(t={},t[e]=m[e],t))}});var _=Object.values(r("MediaPlaybackTagMetadataHighFrequencyCategory")),f=Object.keys(p).every(function(e){return _.includes(e)});if(f)return t;var g=babelHelpers.extends({},S(i,"tags_changed"),{tag_metadata:p});b({event:g,state:i}),l.lastLoggedTagMetadata=babelHelpers.extends({},d,m)}return t}return{consumeLoggerEvents:function(){return i.length>0?i.splice(0):[]},handleStateMachine:function(n,r,o){R(o);var t=r.controlledState.playbackState,a=[H,D,x,P,O,B,N,L,M,w,A,F,V,W];a.forEach(function(e){e(n,r,o)}),f&&p(e.debugLogId,n,r,o),(t==="paused"||t==="ended")&&(l.canLogPlayingEvent=!0),o.type==="controller_pause_requested"&&(l.shouldIgnoreDomPause=!0),o.type==="controller_play_requested"&&(l.shouldIgnoreDomPlay=!0),o.type==="dom_event_pause"&&(l.shouldIgnoreDomPause=!1),o.type==="dom_event_play"&&(l.shouldIgnoreDomPlay=!1)},logPausedOnBeforeUnload:function(t){I(t)},setLoggingToSNAPLAdditionalData:function(n){Object.assign(y,n),f&&_(e.debugLogId,n)}}}l.HEARTBEAT_INTERVAL=s,l.createMediaPlaybackCompoundEventStateMachineLogger=h}),98);
__d("MediaPlaybackCompoundFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("2074"),s=o("FalcoLoggerInternal").create("media_playback_compound",e),u=s;l.default=u}),98);
__d("MediaPlaybackCompoundEventLogger",["MediaPlaybackCompoundFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";var e={logComet:function(t){r("MediaPlaybackCompoundFalcoEvent").log(function(){return t})},logCometImmediately:function(t){r("MediaPlaybackCompoundFalcoEvent").logImmediately(function(){return t})}},s=e;l.default=s}),98);
__d("MediaPlaybackLogFlusher",["MediaPlaybackCompoundEventLogger","emptyFunction","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("emptyFunction"),s=!1;r("gkx")("494")&&(s=!0,e=function(t,n){try{for(var e,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(e=window.console).info.apply(e,["["+t+"][SNAPL]"+n].concat(o))}catch(e){}});var u=(function(){function t(e,t){this.$1=e,this.$2=t}var n=t.prototype;return n.flushLogs=function(n){n===void 0&&(n=!1);var t=this.$2.consumeLoggerEvents();s&&e(this.$1,"[flushLogs] "+t.map(function(e){var t,n;return(t=(n=e.events)==null?void 0:n.map(function(e){return e.event_name}))!=null?t:[]}).flat(1).join(","),{loggerEvents:t}),t.forEach(function(e){n||e.required_metadata.tracking_type==="paid"?r("MediaPlaybackCompoundEventLogger").logCometImmediately(e):r("MediaPlaybackCompoundEventLogger").logComet(e)})},n.discardLogsWithoutFlushing=function(){var t=this.$2.consumeLoggerEvents();s&&e(this.$1,"[discardLogsWithoutFlushing] "+t.map(function(e){var t,n;return(t=(n=e.events)==null?void 0:n.map(function(e){return e.event_name}))!=null?t:[]}).flat(1).join(","),{loggerEvents:t})},t})();l.default=u}),98);
__d("Mp4DASHEventMessageBox",[],(function(t,n,r,o,a,i){var e=(function(){function e(e,t){this.$1=t,this.$2=null,t.getVersion()==0?this.$2={version:0,schemeIdUri:e.readZeroTerminatedString(this.$4(e,t)),value:e.readZeroTerminatedString(this.$4(e,t)),timescale:e.readUint32(),presentationTimeDelta:e.readUint32(),eventDuration:e.readUint32(),id:e.readUint32()}:t.getVersion()==1&&(this.$2={version:1,timescale:e.readUint32(),presentationTime:e.readUint64(),eventDuration:e.readUint32(),id:e.readUint32(),schemeIdUri:e.readZeroTerminatedString(this.$4(e,t)),value:e.readZeroTerminatedString(this.$4(e,t))}),this.$3=new DataView(e.getDataView().buffer,e.getCursor())}var t=e.prototype;return t.getFullBox=function(){return this.$1},t.getEmsgFields=function(){return this.$2},t.getMessageData=function(){return this.$3},t.getStartTime=function(){var e=this.$2;if(e==null)return null;switch(e.version){case 0:return null;case 1:return this.$5(e)}},t.getDuration=function(){var e=this.$2;if(e==null)return null;var t=e.eventDuration,n=e.timescale;return n!==0?t/n:t},t.$5=function(t){var e=t.timescale,n=t.presentationTime;return e!==0?n/e:n},t.$4=function(t,n){return n.getBox().getSize()-(t.getCursor()-n.getBox().getStart())},e})();e.canonicalType="emsg",i.default=e}),66);
__d("Mp4Box",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e){this.$4=e.getCursor(),this.$1=e.readUint32(),this.$2=e.readChars(4),this.$1===1?this.$1=e.readUint64():this.$1===0&&(this.$1=e.getDataView().byteLength-this.$4),this.$2==="uuid"&&(this.$3=e.readChars(16)),this.$5=e.getCursor()}var t=e.prototype;return t.getBodyStart=function(){return this.$5},t.getBodySize=function(){var e=this.$5-this.$4;return this.getSize()-e},t.getSize=function(){return this.$1},t.getType=function(){return this.$2},t.getUuid=function(){return this.$3},t.getStart=function(){return this.$4},t.inspect=function(){return"{ size: "+this.$1+", type: "+this.$2+" }"},e})();i.default=e}),66);
__d("Mp4FullBox",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t){this.$2=e.readUint8(),this.$1=e.readUint8(),this.$1=e.readUint8()+(this.$1<<8),this.$1=e.readUint8()+(this.$1<<8),this.$3=t}var t=e.prototype;return t.getVersion=function(){return this.$2},t.getFlags=function(){return this.$1},t.getBox=function(){return this.$3},e})();i.default=e}),66);
__d("Mp4Demuxer",["DataViewReader","Mp4Box","Mp4FullBox"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$1=new(r("DataViewReader"))(e)}var t=e.prototype;return t.parseBox=function(){return new(r("Mp4Box"))(this.$1)},t.parseFullBox=function(t){return new(r("Mp4FullBox"))(this.$1,t)},t.parseCanonicalBox=function(t,n){return new t(this.$1,n)},t.skipBox=function(t){this.$1.seek(t.getStart()+t.getSize())},t.withinBox=function(t){var e=this.$1.getCursor();return e>=t.getStart()&&e<t.getStart()+t.getSize()},t.atEnd=function(){return this.$1.getCursor()>=this.$1.getDataView().byteLength},t.reset=function(){this.$1.seek(0)},t.readBoxBodyText=function(t){this.$1.seek(t.getBodyStart());var e=new TextDecoder,n=new Uint8Array(this.$1.readBytes(t.getBodySize()));return e.decode(n)},e})();l.default=e}),98);
__d("VideoLiveTrace",["DataViewReader","LiveTraceWwwVideoPlayerFalcoEvent","Mp4DASHEventMessageBox","Mp4Demuxer","throttle"],(function(t,n,r,o,a,i,l){var e="x-fb-video-livetrace-ids",s="x-fb-video-livetrace-parentsource",u="x-fb-video-livetrace-streamtype",c="x-fb-origin-hit",d="x-fb-edge-hit",m="PLY:WWW:",p=m+"DL:",_=m+"DIS:",f=1e3,g=/[\r\n]+/,h=(function(){function t(e,t,n){var o=this;this.$6=[],this.$1=e,this.$2=null;var a=n+":"+t.substring(0,5);this.$3=m+a,this.$4=p+a,this.$5=_+a,this.$7=r("throttle")(function(e){return o.$8(e)},f)}var n=t.prototype;return n.setStreamType=function(t){this.$2=t},n.$9=function(t,n,o,a,i,l){var e,s=this,u=Date.now(),c=(e=this.$2)!=null?e:0;r("LiveTraceWwwVideoPlayerFalcoEvent").log(function(){return{stream_id:s.$1,stream_type:c,event_name:n,event_severity:i,event_creation_time:u,source:t,trace_id:o,parent_source:a,metadata:l}})},n.onUpdateStatus=function(t){this.$7(t)},n.$8=function(t){for(var e=t.position*1e3,n=this.$6.length-1;n>=0;n--){var r=this.$6[n];if(!(r.presentationTimestamp>e)){if(r.displayTimestamp==null)r.displayTimestamp=Date.now();else continue;this.$9(this.$5,"FRAME",r.traceId,this.$4,"SUCCESS",null)}}},n.getAndFlushTracedFrames=function(){var e,t={currentTimeMs:Date.now(),streamId:this.$1},n={dl:[],dis:[]},r=[];return this.$6.forEach(function(e){e.hasBeenFlushedAsDownloaded||(n.dl.push({id:e.traceId,timeMs:e.downloadTimestamp}),e.hasBeenFlushedAsDownloaded=!0),e.displayTimestamp!=null?n.dis.push({id:e.traceId,timeMs:e.displayTimestamp}):r.push(e)}),this.$6=r,t[(e=this.$2)!=null?e:0]=n,n.dl.length>0||n.dis.length>0?t:null},n.handleHeadersString=function(t,n){var e=t.trim().split(g);this.$10(e.map(function(e){var t=e.split(": ");return[t.shift().toLowerCase(),t.shift()]}),n)},n.handleHeaders=function(t,n){this.$10(this.$11(t),n)},n.handleHeadersAndBody=function(t,n,r){this.$12(this.$11(t),n,r)},n.$11=function(t){var e=[];for(var n of t.entries())e.push(n);return e},n.$13=function(t){var e=Date.now(),n=new Map,o=t.reduce(function(e,t){return e+t.byteLength},0),a=new Uint8Array(o),i=0;t.forEach(function(e){a.set(e,i),i+=e.byteLength});for(var l=new(r("Mp4Demuxer"))(new DataView(a.buffer,a.byteOffset,a.byteLength));!l.atEnd();){var s=l.parseBox();if(s.getType()===r("Mp4DASHEventMessageBox").canonicalType){var u=l.parseCanonicalBox(r("Mp4DASHEventMessageBox"),l.parseFullBox(s));if(u instanceof r("Mp4DASHEventMessageBox")){var c,d=(c=u.getEmsgFields())==null?void 0:c.schemeIdUri;if(d!=null&&d.startsWith("livedash:trace:")){var m=u.getMessageData(),p=new(r("DataViewReader"))(m).readZeroTerminatedString(m.byteLength);try{var _=JSON.parse(p);Array.isArray(_)&&_.filter(function(e){return Array.isArray(e)&&e.length===2}).forEach(function(t){var r=t[0],o=t[1];n.set(r,{displayTimestamp:null,downloadTimestamp:e,hasBeenFlushedAsDownloaded:!1,presentationTimestamp:o,traceId:r})})}catch(e){}}}}l.skipBox(s)}return n},n.$14=function(n,r){var t=this,o="null",a=Date.now(),i=new Map,l="";n.forEach(function(n){var r=n[0].toLowerCase(),m=n[1];if(r===e&&m){var p=m.split(",");p.forEach(function(e){var t=e.split(":"),n=+t[0],r=+t[1];i.set(n,{displayTimestamp:null,downloadTimestamp:a,hasBeenFlushedAsDownloaded:!1,presentationTimestamp:r,traceId:n})})}r===s&&(l=m),t.$2===null&&r===u&&(t.$2=parseInt(m,10)),(r===c||r===d)&&parseInt(m,10)&&(o=r===c?"origin":"edge")});var m=r||{};return m.hit=o,l!==""?{tracedFrames:i,eventMetaData:m,parentSource:l,streamType:this.$2}:null},n.$12=function(t,n,r){var e=this.$14(t,r);if(!(e==null||e.parentSource==="")){if(n!=null&&n.length){var o=this.$13(n);o.forEach(function(t,n){e.tracedFrames.set(n,t)})}this.$6=this.$6.concat(Array.from(e.tracedFrames.values()));var a=e.tracedFrames.keys();for(var i of a)this.$9(this.$4,"SEGMENT",i,e.parentSource,"SUCCESS",e.eventMetaData)}},n.$10=function(t,n){this.$12(t,null,n)},n.handleXHR=function(t,n){this.handleHeadersString(t.getAllResponseHeaders(),n)},n.getLiveTraceContext=function(){return this.$2!=null?{streamId:this.$1,streamType:this.$2,sourceId:this.$3}:null},t})();l.default=h}),98);
__d("VideoPlayerWwwFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1914651"),s=o("FalcoLoggerInternal").create("video_player_www",e),u=s;l.default=u}),98);
__d("VideoPlayerWwwLogger",["VideoPlayerWwwFalcoEvent"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=e.logData.live_trace_stream_id!==null&&e.logData.live_trace_stream_type!==null;return{access_token:e.logData.access_token,ad_client_token:e.logData.ad_client_token,attribution_id:e.logData.attribution_id,attribution_id_v2:e.logData.attribution_id_v2,attribution_id_v2_root:e.logData.attribution_id_v2_root,audio_only:e.logData.audio_only,audio_representation_id:e.logData.audio_representation_id,autoplay_eligible:e.logData.autoplay_eligible,autoplay_failure_reasons:e.logData.autoplay_failure_reasons,autoplay_setting:e.logData.autoplay_setting,available_qualities:e.logData.available_qualities,broadcaster_origin:e.logData.broadcaster_origin,browser_tab_id:e.logData.browser_tab_id,caption_state:e.logData.caption_state,cast_client_app_id:e.logData.cast_client_app_id,client_latency_setting:e.logData.client_latency_setting,current_playback_speed:e.logData.current_playback_speed,current_viewability_percentage:Number(e.logData.current_viewability_percentage),current_volume:e.logData.current_volume,dash_perf_logging_enabled:e.logData.dash_perf_logging_enabled,data_connection_quality:e.logData.data_connection_quality,debug_reason:e.logData.debug_reason,device_id:e.logData.device_id,device_type:e.logData.device_type,downstream_share_origin_uri:e.logData.downstream_share_origin_uri,downstream_share_start_time:e.logData.downstream_share_start_time,downstream_share_visit_uuid:e.logData.downstream_share_visit_uuid,dropped_frame_count:Number(e.logData.dropped_frame_count),error:e.logData.error,error_code:e.logData.error_code,error_description:e.logData.error_description,error_domain:e.logData.error_domain,error_type:e.logData.error_type,error_user_info:e.logData.error_user_info,event_name:e.eventType,event_seq_num:e.logData.event_seq_num,external_log_id:e.logData.external_log_id,external_log_type:e.logData.external_log_id,fb_manifest_identifier:e.logData.fb_manifest_identifier,feed_aggregation_type:e.logData.feed_aggregation_type,feed_position:e.logData.feed_position,frame_events:e.logData.frame_events,ft:e.logData.ft,imf_emsg_id:e.logData.imf_emsg_id,imf_event_type:e.logData.imf_event_type,imf_topic:e.logData.imf_topic,interrupt_count:e.logData.interrupt_count!==null?Number(e.logData.interrupt_count):null,interrupt_time:Number(e.logData.interrupt_time),is_abr_enabled:e.logData.is_abr_enabled,is_fbms:e.logData.is_fbms,is_live_preview:(t=e.logData.is_live_preview)!=null?t:!1,is_live_video_rewound:e.logData.is_live_video_rewound,is_mixed_codec_manifest:e.logData.is_mixed_codec_manifest,is_p2p_playback:e.logData.is_p2p_playback,is_pip:e.logData.is_pip,is_predictive_playback:e.logData.is_predictive_playback,is_sound_on:e.logData.is_sound_on,is_stalling:e.logData.is_stalling,is_templated_manifest:e.logData.is_templated_manifest,last_viewability_percentage:Number(e.logData.last_viewability_percentage),live_trace_source_id:e.logData.live_trace_source_id,live_trace_stream_id:n?e.logData.live_trace_stream_id:null,live_trace_stream_type:n?e.logData.live_trace_stream_type:null,mpd_validation_errors:e.logData.mpd_validation_errors,network_connected:e.logData.network_connected,next_quality_label:e.logData.next_quality_label,next_representation_id:e.logData.next_representation_id,next_video_codecs:e.logData.next_video_codecs,notification_id:e.logData.notification_id,notification_medium:e.logData.notification_medium,offset_ms:e.logData.offset_ms!=null?String(e.logData.offset_ms):null,permalink_share_id:e.logData.permalink_share_id,playback_caption_format:e.logData.playback_caption_format,playback_caption_locale:e.logData.playback_caption_locale,playback_duration:e.logData.playback_duration,playback_is_broadcast:e.logData.playback_is_broadcast,playback_is_drm:e.logData.playback_is_drm,playback_is_live_streaming:e.logData.playback_is_live_streaming,player_format:e.logData.player_format,player_instance_key:e.logData.player_instance_key,player_mode:e.logData.player_mode,player_origin:e.logData.player_origin,player_state:e.logData.player_state,player_suborigin:e.logData.player_suborigin,player_version:e.logData.player_version,projection:e.logData.projection,quality_label:e.logData.quality_label,reaction_video_channel_type:e.logData.reaction_video_channel_type,representation_id:e.logData.representation_id,resource_url:e.logData.resource_url,routeTracePolicy:e.routeTracePolicy,seq_num:e.logData.seq_num,source:e.source_VPL_LOGGING_HACK,source_VPL_LOGGING_HACK:e.logData.source_VPL_LOGGING_HACK,srt_job_id:e.logData.srt_job_id,srt_job_tracking_id:e.logData.srt_job_tracking_id,stall_count:Number(e.logData.stall_count),stall_count_200_ms:Number(e.logData.stall_count_200_ms),stall_time:Number(e.logData.stall_time),state:e.logData.state,streaming_format:e.logData.streaming_format,time_ms:e.logData.time_ms,total_frame_count:Number(e.logData.total_frame_count),tracking_data_encrypted:e.logData.tracking_data_encrypted,tracking_nodes:e.logData.tracking_nodes,tv_session_id:e.logData.tv_session_id,v2_heart_beat:e.logData.v2_heart_beat,video_bandwidth:e.logData.video_bandwidth,video_buffer_end_position:e.logData.video_buffer_end_position,video_chaining_depth_level:e.logData.video_chaining_depth_level,video_chaining_parent_video_id:e.logData.video_chaining_parent_video_id,video_chaining_session_id:e.logData.video_chaining_session_id,video_channel_id:e.logData.video_channel_id,video_codecs:e.logData.video_codecs,video_id:e.logData.video_id,video_last_start_time_position:e.logData.video_last_start_time_position,video_play_reason:e.logData.video_play_reason,video_player_height:Number(e.logData.video_player_height),video_player_width:Number(e.logData.video_player_width),video_time_position:e.logData.video_time_position,vpts:e.logData.vpts,web_client_revision:e.logData.web_client_revision}}var s={logComet:function(n){r("VideoPlayerWwwFalcoEvent").log(function(){return e(n)})},logCometImmediately:function(n){r("VideoPlayerWwwFalcoEvent").logImmediately(function(){return e(n)})}},u=s;l.default=u}),98);
__d("VideoPlayerBanzaiLogFlusher",["ODS","VideoPlayerWwwLogger","emptyFunction","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("emptyFunction"),u=!1;r("gkx")("5551")&&(u=!0,s=function(t,n){try{for(var e,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(e=window.console).info.apply(e,["["+t+"][VideoPlayerBanzaiLogFlusher]"+n].concat(o))}catch(e){}});var c=(function(){function t(e,t){this.$1=e,this.$2=t}var n=t.prototype;return n.flushLogs=function(){var t=this,n=this.$2.consumeLoggerEvents();n.forEach(function(n){var a,i={event:n.eventType,logData:n.logData,routeTracePolicy:n.routeTracePolicy,source:n.source_VPL_LOGGING_HACK};if(n.source_VPL_LOGGING_HACK==="animated_image_share"){u&&s(t.$1,"[flushLogs] "+n.eventType+" SKIP ANIMATED_IMAGE_SHARE",{videoPlayerLogData:i});return}var l=(a=n.logData)==null?void 0:a.ad_client_token;u&&s(t.$1,"[flushLogs] "+n.eventType,{videoPlayerLogData:i}),(e||(e=o("ODS"))).bumpEntityKey(2079,"comet_video_player.banzai_log_flusher",n.eventType),l!=null?r("VideoPlayerWwwLogger").logCometImmediately(n):r("VideoPlayerWwwLogger").logComet(n)})},n.discardLogsWithoutFlushing=function(){var e=this.$2.consumeLoggerEvents();u&&s(this.$1,"[discardLogsWithoutFlushing] "+e.map(function(e){return e.eventType}).join(","),e)},t})();l.default=c}),98);
__d("VideoPlayerCaptionsController",["FBLogger","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("VideoPlayerHTML5ApiCea608State").__setRef("VideoPlayerCaptionsController"),s=r("JSResourceForInteraction")("VideoPlayerHTML5ApiWebVttState").__setRef("VideoPlayerCaptionsController");function u(t){var n=t.captionsUrl,o=t.inbandCaptionsExpected,a=t.onCaptionsLoaded,i=null,l=null,u=null,c=null;function d(e){var t=s.load().then(function(n){t===u&&(i=new n({captionsDisplay:null,onCaptionsLoaded:a,onReady:function(n){n.loadFromUrl(e)}}))}).catch(function(e){t===u&&r("FBLogger")("comet_video_player").catching(e).mustfix("Failed to load the VideoPlayerHTML5ApiWebVttState module")});return t}function m(){var t=e.load().then(function(e){t===c&&(l=new e({captionsDisplay:null,onCaptionsLoaded:a,onReady:function(t){t.processQueue()}}))}).catch(function(e){t===c&&r("FBLogger")("comet_video_player").catching(e).mustfix("Failed to load the VideoPlayerHTML5ApiCea608State module")});return t}return n!=null?u=d(n):o===!0&&(c=m()),{destroy:function(){i&&(i.destroy(),i=null),l&&(l.destroy(),l=null),u&&(u=null),c&&(c=null)},getCaptionFormat:function(){return i?"webvtt":l?"cea608":null},handleCea608BytesReceived:function(t){l&&l.enqueueBytes(t)},handleTimeUpdate:function(t){if(i){var e,n;return i.source&&i.source.handleTimeUpdate(t),(e=(n=i)==null?void 0:n.getCurrentScreenRepresentation())!=null?e:null}else if(l){var r,o;return l.source&&l.source.handleTimeUpdate(t),(r=(o=l)==null?void 0:o.getCurrentScreenRepresentation())!=null?r:null}return null},updateCaptionsUrl:function(t){i&&(i.destroy(),i=null),t!=null&&(u=d(t))},updateInbandCaptionsExpected:function(t){l&&(l.destroy(),l=null),t&&(c=m())}}}l.createCaptionsController=u}),98);
__d("VideoPlaybackQuality",[],(function(t,n,r,o,a,i){function e(e){if(typeof e.getVideoPlaybackQuality=="function")return e.getVideoPlaybackQuality().droppedVideoFrames;var t=e.webkitDroppedFrameCount;return typeof t=="number"?t:0}function l(e){if(typeof e.getVideoPlaybackQuality=="function")return e.getVideoPlaybackQuality().totalVideoFrames;var t=e.webkitDecodedFrameCount;return typeof t=="number"?t:0}i.getDroppedFrames=e,i.getTotalFrames=l}),66);
__d("VideoPlayerImplementationEngineVideoElementAPI",["Promise","VideoPlaybackQuality","VideoPlayerOzWWWGlobalConfig"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return isNaN(e)?0:e}function u(e){return s(e.duration)}function c(e){var t=[];try{for(var n=e.buffered,r=0;r<n.length;++r)t.push({endTime:n.end(r),startTime:n.start(r)})}catch(e){}return t}function d(e){try{var t=e.buffered;if(t.length>0)return t.end(t.length-1)}catch(e){}return 0}function m(e){return s(e.currentTime)}function p(e){try{var t=e.buffered;if(t.length>0)return t.start(0)}catch(e){}return 0}function _(t){return{exitPictureInPicture:function(){window.document.exitPictureInPicture()},getBufferedRanges:function(){return c(t)},getCanPlayPromise:function(){return new(e||(e=n("Promise")))(function(e,n){t.readyState===4?e():t.addEventListener("canplay",function(){return e()})})},getDOMLoadedMetadataPromise:function(){return new(e||(e=n("Promise")))(function(e,n){t.addEventListener("loadedmetadata",function(){return e()})})},getDroppedFrameCount:function(){return o("VideoPlaybackQuality").getDroppedFrames(t)},getDuration:function(){return u(t)},getEnded:function(){return t.ended},getError:function(){return t.error},getLastBufferEndPosition:function(){return d(t)},getMuted:function(){return t.muted},getNetworkState:function(){return t.networkState},getPaused:function(){return t.paused},getPlaybackRate:function(){return t.playbackRate},getPlayheadPosition:function(){return m(t)},getReadyState:function(){return t.readyState},getTotalFrameCount:function(){return o("VideoPlaybackQuality").getTotalFrames(t)},getUnderlyingVideoElement:function(){return t},getVideoPixelsDecodedDimensions:function(){var e=t.videoWidth,n=t.videoHeight;return e<=0||n<=0?null:{height:n,width:e}},getVideoPixelsPaintedDimensions:function(){if(t.readyState<t.HAVE_CURRENT_DATA)return null;var e=t.videoWidth,n=t.videoHeight;if(e<=0||n<=0)return null;var r=t.offsetWidth,o=t.offsetHeight;if(r<=0||o<=0)return null;var a=e/n,i=r/o;return i>a?r=o*a:o=r/a,{height:o,width:r}},getVolume:function(){return t.volume},pause:function(){t.pause()},play:function(){var r=t.play(),o=r&&typeof r.then=="function"?(e||(e=n("Promise"))).resolve(r):null;return o},requestPictureInPicture:function(){typeof t.requestPictureInPicture=="function"&&t.requestPictureInPicture()},setDuration:function(n){t.duration=n},setMuted:function(n){t.muted=n},setPlaybackRate:function(n){t.playbackRate=n},setPlayheadPosition:function(n){var e=n;if(n===0){var o=r("VideoPlayerOzWWWGlobalConfig").getNumber("clamp_seek_to_first_buffer_range_epsilon",0);if(o>0){var a=p(t);a>0&&a<=o&&(e=a)}}t.currentTime=e},setVolume:function(n){t.volume=n}}}l.getDurationFromVideoElement=u,l.getBufferedRangesFromVideoElement=c,l.getLastBufferEndPositionFromVideoElement=d,l.getPlayheadPositionFromVideoElement=m,l.createVideoPlayerImplementationEngineVideoElementAPI=_}),98);
__d("VideoPlayerImplementationReactVideoElement.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e!=null?e:[],n=t[0],r=t[1];if(n==null&&r==null)return null;var o="";if(typeof n=="string")o=n;else if(Array.isArray(n)){var a=n[0],i=n[1];o=a+" "+i}var l="";if(typeof r=="string")l=r;else if(Array.isArray(r)){var s=r[0],u=r[1];l=s+" "+u}return o+" "+l}function c(e){var t=o("react-compiler-runtime").c(21),n=e.alt,r=e.audioOnly,a=e.isSpatial,i=e.poster,l=e.seoSrc,c=e.seoWebCrawlerVideoTracks,d=e.videoElementCallbacks,m=e.videoElementHDRPatchEnabled_EXPERIMENTAL,p=e.videoElementPreloadDisabled,_=e.videoElementRefCallback,f=e.videoPixelsFit,g=a===void 0?!1:a,h;t[0]!==l||t[1]!==d?(h=l!=null?babelHelpers.extends({},d,{src:l}):d,t[0]=l,t[1]=d,t[2]=h):h=t[2];var y=h,C=f==null?void 0:f.objectPosition,b;t[3]!==C?(b=u(C),t[3]=C,t[4]=b):b=t[4];var v=b,S=n!=null?n:void 0,R;t[5]!==r||t[6]!==m?(R={0:"x1lliihq x5yr21d xh8yej3",2:"x1lliihq x5yr21d xh8yej3 x1ihime0",1:"x5yr21d xh8yej3 x1s85apg",3:"x5yr21d xh8yej3 x1ihime0 x1s85apg"}[(m===!0)<<1|(r===!0)<<0],t[5]=r,t[6]=m,t[7]=R):R=t[7];var L=p===!0?"none":void 0,E;t[8]!==g||t[9]!==v||t[10]!==f?(E=g?{width:"200%"}:f?{objectFit:f.objectFit,objectPosition:v}:void 0,t[8]=g,t[9]=v,t[10]=f,t[11]=E):E=t[11];var k;return t[12]!==i||t[13]!==y||t[14]!==c||t[15]!==S||t[16]!==R||t[17]!==L||t[18]!==E||t[19]!==_?(k=s.jsx("video",babelHelpers.extends({"aria-label":S,className:R,controls:!1,"data-testid":void 0,muted:!0,playsInline:!0,preload:L},y,{poster:i,ref:_,style:E,children:c})),t[12]=i,t[13]=y,t[14]=c,t[15]=S,t[16]=R,t[17]=L,t[18]=E,t[19]=_,t[20]=k):k=t[20],k}l.default=c}),98);
__d("VideoPlayerEmsgForStateMachine",["deepEquals"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r,o;return[e.type,e.emsgScheme,(n=e.emsgId)!=null?n:""].concat(t?[(r=e.emsgStartTimeInSec)!=null?r:"",(o=e.emsgDurationInSec)!=null?o:""]:[]).join(":")}function s(t,n){return t.set(e(n,!0),n),t}function u(e,t){return t.reduce(s,new Map(e))}function c(t,n,o){var a=n==null?[]:Array.from(t.values()).filter(function(e){var t=e.emsgStartTimeInSec,r=e.emsgDurationInSec||0;return t!=null&&n>=t&&n<t+r}).sort(function(e,t){return(e.emsgStartTimeInSec||0)-(t.emsgStartTimeInSec||0)}),i=Array.from(a.reduce(function(t,n){return t.set(e(n,!1),n),t},new Map).values());return r("deepEquals")(o,i)?o:i}l.makeEmsgBoxDedupKey=e,l.makeUpdatedAllEmsgBoxes=u,l.makeUpdatedActiveEmsgBoxes=c}),98);
__d("getErrorMessageFromMediaErrorCode",[],(function(t,n,r,o,a,i){"use strict";function e(e){switch(e){case 1:return"The fetching process for the media resource was aborted by the user agent at the users request.";case 2:return"A network error of some description caused the user agent to stop fetching the media resource, after the resource was established to be usable.";case 3:return"An error of some description occurred while decoding the media resource, after the resource was established to be usable.";case 4:return"The media resource indicated by the src attribute was not suitable."}return null}i.default=e}),66);
__d("getMoreGranularErrorNameFromHTMLVideoElementErrorMessage",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t,n,r=/^([A-Z_]+:)|([A-Z_]+\s+\(0x[0-9A-Fa-f]+\))/.exec(e),o=((t=(n=r==null?void 0:r[1])!=null?n:r==null?void 0:r[2])!=null?t:"").replace(/\s+/,"_").replace(/[^A-Za-z0-9_]/g,"");return o!==""?o:null}i.default=e}),66);
__d("VideoPlayerImplementationErrors",["VideoPlayerImplementationErrorNormalization","getErrorMessageFromMediaErrorCode","getErrorNameFromMediaErrorCode","getErrorSafe","getMoreGranularErrorNameFromHTMLVideoElementErrorMessage","oz-player/utils/OzErrorUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.errorLocation,n=e.hostCallError,o=e.videoElementError,a=e.videoElementNetworkState,i=e.videoElementReadyState,l=o==null?void 0:o.code,s=n!=null&&typeof n.message=="string"?n.message:null;s==null&&(s=o==null?void 0:o.message),s==null&&l!=null&&(s=r("getErrorMessageFromMediaErrorCode")(l));var u=r("getErrorNameFromMediaErrorCode")(l);return{createdTimestamp:Date.now(),errorLocation:t,errorMessageFormat:(s!=null?s:"Empty error")+("; code: "+(l!=null?l:"undefined"))+("; readyState: "+i)+("; networkState: "+a),errorMessageParams:[],errorName:u,originalError:n}}function s(e,t){var n,o,a=r("getErrorSafe")(e);return{createdTimestamp:Date.now(),errorCode:typeof e=="object"&&e!=null?typeof e.code=="string"?e.code:typeof e.code=="number"?String(e.code):void 0:void 0,errorLocation:t,errorMessageFormat:(n=a.messageFormat)!=null?n:a.message,errorMessageParams:a.messageFormat!=null?(o=a.messageParams)!=null?o:[]:[],errorName:"VideoElementPlayPromiseRejectionReason_"+(a.name||"UnknownError")}}function u(e,t,n,o){var a,i;o===void 0&&(o=null);var l=r("getErrorSafe")(t);return{createdTimestamp:Date.now(),errorCode:null,errorLocation:n,errorMessageFormat:(l.name||"UnknownError")+" "+((a=l.messageFormat)!=null?a:l.message),errorMessageParams:l.messageFormat!=null?(i=l.messageParams)!=null?i:[]:[],errorName:e,stack:l.stack,url:o!=null?o:null}}function c(e,t){if(o("oz-player/utils/OzErrorUtils").isOzError(e)){var n=e,r=n.getExtra();return{createdTimestamp:Date.now(),errorCode:r.code,errorLocation:t,errorMessageFormat:n.getDescription(),errorMessageParams:[],errorName:n.getType(),errorType:o("VideoPlayerImplementationErrorNormalization").getVideoPlayerNormalizedErrorTypeFromOzError(n),stack:n.stack,url:r.url}}else return u("OZ_JAVASCRIPT_NATIVE",e,t)}function d(e,t){var n=r("getMoreGranularErrorNameFromHTMLVideoElementErrorMessage")(e.message),o=n!=null?e.name+"_"+n:e.name,a=e.message,i=[];return{createdTimestamp:Date.now(),errorLocation:t,errorMessageFormat:a,errorMessageParams:i,errorName:o,errorType:"GenericDecodeError"}}l.createVideoPlayerErrorFromHTMLVideoElementError=e,l.createVideoPlayerErrorFromVideoElementPlayPromiseRejectionReason=s,l.createVideoPlayerErrorFromGenericError=u,l.createVideoPlayerErrorFromOzImplementationError=c,l.createVideoPlayerErrorFromOzImplementationVideoNodeError=d}),98);
__d("VideoPlayerImplementationStateMachine",["FBLogger","VideoPlayerEmsgForStateMachine","VideoPlayerImplementationErrors","VideoPlayerODS","gkx","shallowEqual"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.bufferingDetected,n=e.seeking,r=e.waitingForDomPlaying;return!t&&!n&&!r}function s(t){var n=t.bufferingDetected,o=t.prevPlaybackState,a=t.seeking,i=t.waitingForDomPlaying,l=e({bufferingDetected:n,seeking:a,waitingForDomPlaying:i}),s=o;switch(o){case"stalling":s=l?"playing":"stalling";break;case"ended":case"paused":case"playing":break;default:r("FBLogger")("comet_video_player").mustfix("unexpected playbackState: %s",o);break}return s}function u(e){return e.loopCount>0&&e.loopCurrent<e.loopCount||e.loopCount===-1}function c(e,t,n,a){var i,l;switch(n.type){case"host_call_pause":case"host_call_play":case"host_call_set_current_time":case"host_call_set_volume":case"host_call_set_muted":case"host_call_set_playback_rate":case"host_call_set_video_quality":case"host_call_set_latency_level":return babelHelpers.extends({},e,{hostCallQueue:e.hostCallQueue.concat([n])});case"controller_set_latency_level_requested":case"implementation_set_latency_level_requested":return babelHelpers.extends({},e,{latencyLevel:n.payload.latencyLevel,ullIneligibilityReason:n.payload.ullIneligibilityReason});case"dom_event_loadedmetadata":return babelHelpers.extends({},e,{domEventsLatestPerfMs:babelHelpers.extends({},e.domEventsLatestPerfMs,{clockMs:t.clockTimestamp,loadedmetadata:n.payload.domEventPerfTimestamp,perfMs:t.perfTimestamp})});case"dom_event_loadeddata":return babelHelpers.extends({},e,{domEventsLatestPerfMs:babelHelpers.extends({},e.domEventsLatestPerfMs,{clockMs:t.clockTimestamp,loadeddata:n.payload.domEventPerfTimestamp,perfMs:t.perfTimestamp})});case"dom_event_canplay":return babelHelpers.extends({},e,{domEventsLatestPerfMs:babelHelpers.extends({},e.domEventsLatestPerfMs,{canplay:n.payload.domEventPerfTimestamp,clockMs:t.clockTimestamp,perfMs:t.perfTimestamp})});case"dom_event_ended":return babelHelpers.extends({},e,{playbackState:"ended",waitingForDomPlaying:!1});case"dom_event_pause":return e.playbackState==="ended"?e:t.videoElementEnded===!0?babelHelpers.extends({},e,{playbackState:"ended",waitingForDomPlaying:!1}):e.playbackState==="paused"?e:babelHelpers.extends({},e,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play":{var c=e.playbackState,d=c;switch(c){case"playing":case"stalling":case"ended":case"paused":d="stalling";break;default:r("FBLogger")("comet_video_player").mustfix("unexpected playbackState: %s",c);break}var m=!0;return babelHelpers.extends({},e,{playbackState:d,waitingForDomPlaying:m})}case"dom_event_playing":{var p=e.bufferingDetected,_=e.seeking,f=!1,g=e.playbackState;return babelHelpers.extends({},e,{playbackState:s({bufferingDetected:p,prevPlaybackState:g,seeking:_,waitingForDomPlaying:f}),waitingForDomPlaying:f})}case"dom_event_timeupdate":{var h=o("VideoPlayerEmsgForStateMachine").makeUpdatedActiveEmsgBoxes(e.allEmsgBoxes,t.videoElementPlayheadPosition,e.activeEmsgBoxes);if(e.waitingForDomTimeUpdateAfterSeeked){var y=e.bufferingDetected,C=e.seeking,b=!1,v=e.playbackState;return babelHelpers.extends({},e,{activeEmsgBoxes:h,playbackState:s({bufferingDetected:y,prevPlaybackState:v,seeking:C,waitingForDomPlaying:b}),waitingForDomPlaying:b,waitingForDomTimeUpdateAfterSeeked:!1})}return babelHelpers.extends({},e,{activeEmsgBoxes:h})}case"dom_event_seeking":{var S=e.playbackState,R=S;switch(S){case"paused":case"ended":break;case"stalling":case"playing":R="stalling";break;default:r("FBLogger")("comet_video_player").mustfix("unexpected playbackState: %s",S)}return babelHelpers.extends({},e,{playbackState:R,seeking:!0,waitingForDomPlaying:!0})}case"dom_event_seeked":{var L=e.bufferingDetected,E=e.waitingForDomPlaying,k=!1,I=e.playbackState;return babelHelpers.extends({},e,{implementationSeekSourcePosition:null,playbackState:s({bufferingDetected:L,prevPlaybackState:I,seeking:k,waitingForDomPlaying:E}),seeking:k,waitingForDomTimeUpdateAfterSeeked:!0})}case"dom_event_error":return n.payload.videoElementError==null&&o("VideoPlayerODS").bumpEntityKey("comet_video_player","dom_event_error.error_is_nullish",14),babelHelpers.extends({},e,{playbackState:"paused",waitingForDomPlaying:!1});case"dom_event_play_promise_created":return babelHelpers.extends({},e,{hostCallPlayIDLast:n.payload.hostCallPlayID});case"dom_event_play_promise_resolved":return e.hostCallPlayIDLast!==n.payload.hostCallPlayID?e:babelHelpers.extends({},e,{hostCallPlayIDLast:null});case"dom_event_play_promise_rejected":if(e.hostCallPlayIDLast!==n.payload.hostCallPlayID)return e;if(a==="comet_nextgendash"){var T=n.payload.playPromiseRejectionReason;return babelHelpers.extends({},e,{hostCallPlayIDLast:null},!(T!=null&&T.name==="AbortError")&&e.playbackState==="stalling"?{playbackState:"paused",waitingForDomPlaying:!1}:{})}return babelHelpers.extends({},e,{hostCallPlayIDLast:null,playbackState:e.playbackState==="stalling"?"paused":e.playbackState,waitingForDomPlaying:!1});case"dom_event_durationchange":{if(a==="comet_nextgendash"){var D=t.videoElementEnded===!0?"ended":t.videoElementPaused===!0?"paused":e.playbackState;if((e.playbackState==="stalling"||e.playbackState==="playing")&&D!==e.playbackState)return babelHelpers.extends({},e,{playbackState:D,waitingForDomPlaying:!1})}return e}case"implementation_host_call_queue_flushed":return babelHelpers.extends({},e,{hostCallQueue:[]});case"implementation_host_call_failed":{var x=o("VideoPlayerImplementationErrors").createVideoPlayerErrorFromHTMLVideoElementError({errorLocation:n.payload.errorLocation,hostCallError:n.payload.hostCallError,videoElementError:n.payload.videoElementError,videoElementNetworkState:n.payload.videoElementNetworkState,videoElementReadyState:n.payload.videoElementReadyState});return babelHelpers.extends({},e,{error:x,playbackState:"paused",waitingForDomPlaying:!1})}case"implementation_mounted":return babelHelpers.extends({},e,{mountState:"mounted_onscreen"});case"implementation_unmounted":return babelHelpers.extends({},e,{mountState:"unmounted"});case"implementation_onscreen":return babelHelpers.extends({},e,{mountState:"mounted_onscreen"});case"implementation_offscreen":return babelHelpers.extends({},e,{mountState:"mounted_offscreen"});case"implementation_video_node_unmounted":return babelHelpers.extends({},e,{hostCallPlayIDLast:null});case"implementation_engine_initialized":{var $,P=($=n.payload.streamingFormat)!=null?$:e.streamingFormat;return babelHelpers.extends({},e,{hostCallCanApply:!0,selectedVideoQuality:n.payload.selectedVideoQuality,streamingFormat:P})}case"implementation_engine_qualities_changed":{var N,M=(N=n.payload.streamingFormat)!=null?N:e.streamingFormat;return babelHelpers.extends({},e,{selectedVideoQuality:n.payload.selectedVideoQuality,streamingFormat:M})}case"implementation_engine_destroyed":return babelHelpers.extends({},e,{hostCallPlayIDLast:null});case"implementation_fatal_error":return babelHelpers.extends({},e,{error:n.payload.fatalError,hostCallPlayIDLast:null,playbackState:"paused",waitingForDomPlaying:!1});case"controller_inject_fatal_error":return babelHelpers.extends({},e,{error:n.payload.fatalError,hostCallPlayIDLast:null,playbackState:"paused",waitingForDomPlaying:!1});case"implementation_seek_requested":return babelHelpers.extends({},e,{implementationSeekSourcePosition:n.payload.seekSourcePosition});case"representation_changed":return babelHelpers.extends({},e);case"controller_pause_requested":return e.playbackState==="ended"?e:babelHelpers.extends({},e,{lastPausedTimeMs:Date.now(),lastPauseReason:n.payload.reason,lastPlayedTimeMs:0,playbackState:"paused",waitingForDomPlaying:!1,watchTimeMs:e.lastPlayedTimeMs>0?e.watchTimeMs+(Date.now()-e.lastPlayedTimeMs):e.watchTimeMs});case"controller_play_requested":return e.playbackState!=="paused"&&e.playbackState!=="ended"?e:babelHelpers.extends({},e,{hasPlayEverBeenRequested:!0,lastPlayedTimeMs:e.lastPlayedTimeMs===0?Date.now():e.lastPlayedTimeMs,lastPlayReason:n.payload.reason,loopCurrent:u(e)?n.payload.reason==="loop_initiated"?e.loopCurrent+1:e.loopCurrent:0,playbackState:"stalling",waitingForDomPlaying:!0});case"controller_seek_requested":return babelHelpers.extends({},e,{implementationSeekSourcePosition:(i=t.videoElementPlayheadPosition)!=null?i:e.implementationSeekSourcePosition,seeking:!0,seekTargetPosition:n.payload.seekTargetPosition});case"controller_quality_requested":return babelHelpers.extends({},e,{selectedVideoQuality:n.payload.selectedVideoQuality});case"controller_video_variant_requested":return babelHelpers.extends({},e,{selectedVideoVariant:n.payload.selectedVideoVariant});case"controller_set_caption_display_style_requested":return babelHelpers.extends({},e,{captionDisplayStyle:n.payload.captionDisplayStyle});case"controller_set_picture_in_picture_state_requested":return babelHelpers.extends({},e,{isDesktopPictureInPicture:n.payload.isInPictureInPictureMode});case"controller_set_caption_format_requested":return babelHelpers.extends({},e,{captionFormat:n.payload.captionFormat});case"controller_set_playback_rate":return babelHelpers.extends({},e,{targetPlaybackRate:n.payload.playbackRate});case"controller_muted_requested":return babelHelpers.extends({},e,{lastMuteReason:n.payload.reason,muted:n.payload.muted});case"controller_volume_requested":return babelHelpers.extends({},e,{volume:n.payload.volume});case"controller_scrub_begin_requested":return e.scrubbing?e:babelHelpers.extends({},e,{scrubbing:!0,seekTargetPosition:null});case"controller_scrub_end_requested":return e.scrubbing?babelHelpers.extends({},e,{implementationSeekSourcePosition:(l=t.videoElementPlayheadPosition)!=null?l:e.implementationSeekSourcePosition,scrubbing:!1,seeking:n.payload.seekTargetPosition!=null,seekTargetPosition:n.payload.seekTargetPosition}):e;case"buffering_begin_requested":{var w=e.playbackState,A=w;switch(w){case"paused":case"ended":break;case"playing":case"stalling":A="stalling";break;default:r("FBLogger")("comet_video_player").mustfix("unexpected playbackState: %s",w);break}var F=n.payload.bufferingType;return babelHelpers.extends({},e,{bufferingDetected:!0,lastBufferingType:F,playbackState:A})}case"buffering_end_requested":{var O=e.seeking,B=e.waitingForDomPlaying,W=!1,q=e.playbackState;return babelHelpers.extends({},e,{bufferingDetected:W,playbackState:s({bufferingDetected:W,prevPlaybackState:q,seeking:O,waitingForDomPlaying:B})})}case"controller_set_captions_visible_requested":{var U=n.payload.captionsVisible;return e.captionsVisible===U?e:babelHelpers.extends({},e,{activeCaptions:U?e.activeCaptions:null,captionsLocale:U?e.captionsLocale:null,captionsVisible:U})}case"controller_set_active_captions_requested":{var V,H,G=n.payload.activeCaptions,z=(V=G==null?void 0:G.rows)!=null?V:[],j=n.payload.captionsLocale,K=e.activeCaptions,Q=(H=K==null?void 0:K.rows)!=null?H:[];return Q.length===z.length&&z.every(function(e,t){return Q[t]===e})?e:babelHelpers.extends({},e,{activeCaptions:G,captionsLocale:j})}case"captions_loaded":return babelHelpers.extends({},e,{activeCaptions:e.activeCaptions,captionsLoaded:!0});case"captions_unloaded":return babelHelpers.extends({},e,{activeCaptions:null,captionsLoaded:!1,captionsLocale:null});case"inband_captions_autogenerated_changed":{var X=n.payload.inbandCaptionsAutogenerated;return e.inbandCaptionsAutogenerated===X?e:babelHelpers.extends({},e,{inbandCaptionsAutogenerated:X})}case"stream_ended":return babelHelpers.extends({},e,{streamEnded:!0});case"stream_gone_before_start":return babelHelpers.extends({},e,{playbackState:"ended",streamEnded:!0,waitingForDomPlaying:!1});case"stream_interrupted":return babelHelpers.extends({},e,{streamInterrupted:!0});case"stream_resumed":return babelHelpers.extends({},e,{streamInterrupted:!1});case"seekable_ranges_changed":var Y=n.payload.seekableRanges;return babelHelpers.extends({},e,{seekableRanges:Y});case"controller_set_is_live_rewind_active_requested":var J=n.payload.isLiveRewindActive;return babelHelpers.extends({},e,{isLiveRewindActive:J});case"loop_count_change_requested":var Z=n.payload.loopCount;return Z===e.loopCount?e:babelHelpers.extends({},e,{loopCount:Z,loopCurrent:0});case"player_dimensions_changed":{var ee=n.payload.dimensions,te=ee.height,ne=ee.width;return ne===e.dimensions.width&&te===e.dimensions.height?e:babelHelpers.extends({},e,{dimensions:{height:te,width:ne}})}case"emsg_boxes_parsed":{var re=o("VideoPlayerEmsgForStateMachine").makeUpdatedAllEmsgBoxes(e.allEmsgBoxes,n.payload.emsgBoxes),oe=o("VideoPlayerEmsgForStateMachine").makeUpdatedActiveEmsgBoxes(re,t.videoElementPlayheadPosition,e.activeEmsgBoxes);return babelHelpers.extends({},e,{activeEmsgBoxes:oe,allEmsgBoxes:re})}case"register_emsg_observer":{var ae=new Set(e.emsgObserverTokens);return ae.add(n.payload.token),babelHelpers.extends({},e,{emsgObserverTokens:ae})}case"unregister_emsg_observer":{var ie=new Set(e.emsgObserverTokens);return ie.delete(n.payload.token),babelHelpers.extends({},e,{emsgObserverTokens:ie})}default:return e}}function d(e,t,n){var o=t.type!=="dom_seeking",a=o?n:e.uncontrolledState,i=!r("shallowEqual")(a,e.uncontrolledState),l=c(e.controlledState,a,t,e.playerVersion),s=!r("shallowEqual")(l,e.controlledState);return i||s?babelHelpers.extends({},e,{controlledState:s?l:e.controlledState,uncontrolledState:i?a:e.uncontrolledState}):e}var m,p;function _(e){var t=e.collectUncontrolledState,n=e.debugLogId,o=e.initialState,a=e.onDispatched,i=e.onFatalError,l=o,s=l,u=0,c=!1,m=!1,p=!0,_=!0;return{dispatch:function(n){if(_){var e=null,o=null;try{if(++u,u>=10){if(c)return;throw c=!0,r("FBLogger")("comet_video_player").mustfixThrow("Video player state machine loop detected")}var l=s.uncontrolledState;if(p)try{l=t()}catch(e){p=!1,o=e}var f=s,g=d(f,n,l);s=g,a(f,g,n)}catch(t){_=!1,e=t}finally{if(!m&&(e!=null||o!=null)){m=!0;try{i(e!=null?e:o)}catch(e){}}--u}}},getCurrentState:function(){return s},getInitialState:function(){return l}}}var f,g;function h(e){var t=e.collectUncontrolledState,n=e.debugLogId,r=e.initialState,o=e.onFatalError,a=e.stateTransitionHandlers;function i(e,t,n){try{for(var r=!0,o=0;r&&o<a.length;){var i=a[o];r=i(e,t,n),++o}}finally{}}return _({collectUncontrolledState:t,debugLogId:n,initialState:r,onDispatched:i,onFatalError:o})}function y(e,t){function n(){}function r(e){return e}function o(n){return function(o){var a=o.currentTarget;t(a,["reactEvent("+o.type+")"]),e.dispatch(n)}}function a(n){return function(o){var a=o.currentTarget;t(a,["reactEvent("+o.type+")"]),e.dispatch(n(o,a))}}return{onAbort:n,onCanPlay:a(function(e){return{payload:{domEventPerfTimestamp:e.timeStamp},type:"dom_event_canplay"}}),onCanPlayThrough:n,onDurationChange:o({type:"dom_event_durationchange"}),onEmptied:n,onEncrypted:n,onEnded:o({type:"dom_event_ended"}),onError:a(function(e,t){return{payload:{videoElementError:t.error,videoElementNetworkState:t.networkState,videoElementReadyState:t.readyState},type:"dom_event_error"}}),onLoadedData:a(function(e){return{payload:{domEventPerfTimestamp:e.timeStamp},type:"dom_event_loadeddata"}}),onLoadedMetadata:a(function(e){return{payload:{domEventPerfTimestamp:e.timeStamp},type:"dom_event_loadedmetadata"}}),onLoadStart:n,onPause:o({type:"dom_event_pause"}),onPlay:o({type:"dom_event_play"}),onPlaying:a(function(e){return{payload:{domEventPerfTimestamp:e.timeStamp},type:"dom_event_playing"}}),onProgress:o({type:"dom_event_progress"}),onRateChange:o({type:"dom_event_ratechange"}),onSeeked:o({type:"dom_event_seeked"}),onSeeking:o({type:"dom_event_seeking"}),onStalled:n,onSuspend:n,onTimeUpdate:o({type:"dom_event_timeupdate"}),onVolumeChange:o({type:"dom_event_volumechange"}),onWaiting:o({type:"dom_event_waiting"})}}l.createVideoPlayerImplementationStateMachine=_,l.createVideoPlayerImplementationStateMachineWithStateTransitionHandlers=h,l.createReactVideoElementCallbacksForStateMachine=y}),98);
__d("VideoPlayerImplementationStateMachineHostCallQueue",["cometUniqueID","emptyFunction","getErrorSafe","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=r("emptyFunction");function s(){return"id-vpdom-"+r("cometUniqueID")()}function u(e){var t=e.engineExtrasAPI,n=e.hostCall,o=e.machine,a=e.videoElementAPI;switch(n.type){case"host_call_play":{var i=a.play();i&&(o.dispatch({payload:{hostCallPlayID:n.payload.hostCallID},type:"dom_event_play_promise_created"}),r("promiseDone")(i.then(function(){o.dispatch({payload:{hostCallPlayID:n.payload.hostCallID},type:"dom_event_play_promise_resolved"})},function(e){o.dispatch({payload:{hostCallPlayID:n.payload.hostCallID,playPromiseRejectionReason:e},type:"dom_event_play_promise_rejected"})})))}break;case"host_call_pause":a.pause();break;case"host_call_set_playback_rate":a.setPlaybackRate(n.payload.playbackRate);break;case"host_call_set_muted":a.setMuted(n.payload.muted);break;case"host_call_set_volume":a.setVolume(n.payload.volume);break;case"host_call_set_current_time":a.setPlayheadPosition(n.payload.currentTime);break;case"host_call_set_video_quality":t.setUserSelectedVideoQuality(n.payload.selectedVideoQuality);break;case"host_call_set_video_variant":t.setUserSelectedVideoVariant(n.payload.selectedVideoVariant);break;case"host_call_set_latency_level":t.setLatencyLevel(n.payload.latencyLevel);break;case"host_call_picture_in_picture":a.requestPictureInPicture();break;case"host_call_exit_picture_in_picture":a.exitPictureInPicture();break;default:return n.type,!1}return!0}function c(e){var t=e.engineExtrasAPI,n=e.hostCall,o=e.machine,a=e.videoElementAPI;if(!a||!t||r("gkx")("18183")&&!o.getCurrentState().controlledState.hostCallCanApply)o.dispatch(n);else{var i=!1;try{i=u({engineExtrasAPI:t,hostCall:n,machine:o,videoElementAPI:a})}catch(e){var l=r("getErrorSafe")(e);o.dispatch({payload:{errorLocation:"apply_host_call_catch",hostCall:n,hostCallError:e,videoElementError:a.getError(),videoElementNetworkState:a.getNetworkState(),videoElementReadyState:a.getReadyState()},type:"implementation_host_call_failed"})}i&&o.dispatch({payload:{hostCall:n},type:"implementation_host_call_applied"})}}function d(e){var t=[];function n(){t=t.filter(function(e){return e.type!=="host_call_play"&&e.type!=="host_call_pause"})}function r(e){t=t.filter(function(t){return t.type!==e})}return e.forEach(function(e){switch(e.type){case"host_call_play":n();break;case"host_call_pause":n();break;case"host_call_set_playback_rate":r(e.type);break;case"host_call_set_muted":r(e.type);break;case"host_call_set_volume":r(e.type);break;case"host_call_set_current_time":r(e.type);break;case"host_call_set_video_quality":r(e.type);break;case"host_call_set_video_variant":r(e.type);break;case"host_call_set_latency_level":r(e.type);break;case"host_call_picture_in_picture":r(e.type);break;case"host_call_exit_picture_in_picture":r(e.type);break;default:e.type}t=t.concat([e])}),t}function m(e){var t=e.engineExtrasAPI,n=e.machine,r=e.reason,o=e.state,a=e.videoElementAPI,i=[{payload:{hostCallID:s(),reason:r,volume:o.controlledState.volume},type:"host_call_set_volume"},{payload:{hostCallID:s(),muted:o.controlledState.muted,reason:r},type:"host_call_set_muted"},{payload:{hostCallID:s(),reason:r,selectedVideoQuality:o.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"},{payload:{hostCallID:s(),reason:r,selectedVideoVariant:o.controlledState.selectedVideoVariant},type:"host_call_set_video_variant"}],l=d(o.controlledState.hostCallQueue.concat(i));l.forEach(function(e){c({engineExtrasAPI:t,hostCall:e,machine:n,videoElementAPI:a})}),n.dispatch({payload:{hostCallsFlushed:l},type:"implementation_host_call_queue_flushed"})}l.makeHostCallID=s,l.applyOrQueueHostCall=c,l.flushHostCallQueue=m}),98);
__d("VideoMimeTypes",[],(function(t,n,r,o,a,i){function e(e,t,n){return e+'; codecs="'+t+", "+n+'"'}var l="mp4a.40.2";function s(e){return"avc1.42E0"+e.toString(16).toUpperCase()}function u(e){return"avc1.4D40"+e.toString(16).toUpperCase()}function c(e){return"avc1.6400"+e.toString(16).toUpperCase()}var d="video/mp4",m=e(d,s(30),l),p=e(d,u(30),l),_=e(d,u(31),l),f=e(d,c(50),l),g=e(d,c(51),l),h={h264baseline:m,h264main30avc:p,h264main31avc:_,h264high50avc:f,h264high51avc:g};i.default=h}),66);
__d("VideoPlayerLoggerPlayerStates",[],(function(t,n,r,o,a,i){var e="started",l="unpaused",s={STARTED:e,UNPAUSED:l};i.default=s}),66);
__d("VideoPlayerMutedStateChange",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=e.currMuted,n=e.currVolume,r=e.prevMuted,o=e.prevVolume,a=t||n===0,i=r||o===0;return i===a?null:a?"muted":"unmuted"}i.getVideoPlayerMutedStateChange=e}),66);
__d("VideoPlayerStateBasedLoggingEvents.experimental",["cr:10759"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:10759")}),98);
__d("VideoPlayerImplementationStateMachineLogger",["CometProductAttribution","FBLogger","NetworkStatus","PlaybackSpeedExperiments","SiteData","VideoMimeTypes","VideoPlayerConnectionQuality","VideoPlayerImplementationErrorNormalization","VideoPlayerLoggerPlayerStates","VideoPlayerMutedStateChange","VideoPlayerStateBasedLoggingEvents.experimental","emptyFunction","getPlayerFormatForLogData","getVideoBrowserTabId","gkx","justknobx","mapObject","performanceAbsoluteNow","qex","removeFromArray"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=6e4,m=(e=r("qex")._("1675"))!=null?e:0,p=1e3,_=null,f=function(t){return _=_!=null?_:document.createElement("video"),"canPlayType"in _?_.canPlayType(t):""},g=r("emptyFunction"),h=r("emptyFunction"),y=r("emptyFunction"),C=r("emptyFunction"),b=!1;r("gkx")("5551")&&(b=!0,g=function(t,n){try{for(var e,r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];(e=window.console).info.apply(e,["["+t+"][VideoPlayerImplementationStateMachineLogger]"+n].concat(o))}catch(e){}},h=function(t,n,r,o){g(t,"[handleMetaData]",{loggingMetaData:r,loggingMetaDataPrevious:n,trackedChanges:o})},y=function(t,n,r,o){g(t,"[handleStateMachine]",{prevState:n,state:r,action:o})},C=function(t,n,r){g(t,"[setAdditionalLogData]",{key:n,value:r})});var v=(s=o("PlaybackSpeedExperiments").enablePlaybackSpeedLogging())!=null?s:!1;function S(){return{canLogPausedOrFinishedPlaying:!1,canLogPlayingEvent:!0,debugSubscribers:[],dontLogPauseOnUnpausedSeeking:!1,errorRecoveryAttemptState:{currentRecoverableError:null,eventsLogged:0,repeatCount:0},hasLoggedStallData:!1,hasLoggedStartedPlaying:!1,hasPausedOnce:!1,hasPendingRequestedPlaying:!1,initialSuborigin:void 0,inPlayStallCount200ms:0,interruptCount:0,interruptDuration:0,interruptEndTimestamp:0,interruptStartTimestamp:0,isLoggingScrubbingSequence:!1,lastLoggedError:null,lastLoggedFullscreenState:!1,lastLoggedPlaybackSpeed:null,lastLoggedViewabilityPercentage:void 0,lastStartTimePosition:null,lastTrackedAudioRepresentation:null,lastTrackedVideoRepresentation:null,nextHeartbeatTime:null,sequenceNumber:0,shouldIgnoreDomPause:!1,shouldIgnoreDomPlay:!1,shouldLogRequestedPlayingForScrub:!1,stallCount:0,stallCount200ms:0,stallCountTotal:0,stallDuration:0,stallDurationTotal:0,stallStartTimestamp:0,startStallCountTotal:0,startStallDurationTotal:0,vplEventSequenceNumber:0,warningState:{eventsLoggedPerKey:new Map,eventsLoggedTotal:0,eventsMaxLoggedPerKey:(function(){try{return Math.max(0,r("justknobx")._("1831")||0)}catch(e){return 0}})(),eventsMaxLoggedTotal:(function(){try{return Math.max(0,r("justknobx")._("1832")||0)}catch(e){return 0}})()}}}function R(e,t){return t==="muted"||t==="unmuted"||t==="started_playing"||t==="caption_change"||t==="unpaused"?e.controlledState.captionsVisible?"on":"off":void 0}function L(e){var t=new Map,n=e.initialLoggingMetaData,a=e.initialCoreVideoPlayerMetaData,i=n,l=a,s=[],_=S(),L=new Set(r("VideoPlayerStateBasedLoggingEvents.experimental").StateBasedLoggingEventNames);function E(e){return _.debugSubscribers.push(e),function(){r("removeFromArray")(_.debugSubscribers,e)}}function k(e){_.debugSubscribers.forEach(function(t){return t(e)})}function I(e){var t=_.stallStartTimestamp;if(t>0){_.stallCount+=1,_.stallCountTotal+=1,_.hasPendingRequestedPlaying&&(_.startStallCountTotal+=1);var n=e-t,r=n>200;_.stallDurationTotal+=n,_.stallDuration+=n,_.stallCount200ms+=r?1:0,_.inPlayStallCount200ms+=r&&!_.hasPendingRequestedPlaying?1:0,_.hasPendingRequestedPlaying&&(_.startStallDurationTotal+=n)}}function T(e,t){var n=e.uncontrolledState.videoElementPlayheadPosition==null?null:e.uncontrolledState.videoElementPlayheadPosition,r=null;switch(t){case"paused":case"cancelled_requested_playing":case"finished_playing":case"heart_beat":case"playback_speed_changed":case"representation_ended":r=_.lastStartTimePosition;break;case"scrubbed":r=n;break;default:break}switch(t){case"paused":case"cancelled_requested_playing":case"finished_playing":case"scrubbed":_.lastStartTimePosition=null;break;case"started_playing":case"unpaused":case"heart_beat":case"playback_speed_changed":case"representation_ended":_.lastStartTimePosition=n;break;default:break}return{video_last_start_time_position:r}}function D(e,t){var n=t.uncontrolledState.clockTimestamp,r=e.controlledState.streamInterrupted,o=t.controlledState.streamInterrupted;!r&&o?_.interruptStartTimestamp=n:r&&!o&&_.interruptStartTimestamp>0&&(_.interruptEndTimestamp=n,_.interruptCount+=1,_.interruptDuration+=_.interruptEndTimestamp-_.interruptStartTimestamp)}function x(e,t,n){var r=t.uncontrolledState.clockTimestamp,o=e.controlledState.playbackState,a=t.controlledState.playbackState;if(o!=="stalling"&&a==="stalling"&&(k("stall_start"),_.stallStartTimestamp=r),o==="stalling"&&a!=="stalling"){var i=0;(n.type==="dom_event_playing"||n.type==="buffering_end_requested")&&n.payload.domEventPerfTimestamp!=null&&(i=Math.max(t.uncontrolledState.perfTimestamp-n.payload.domEventPerfTimestamp,0)),I(t.uncontrolledState.clockTimestamp-i),_.stallStartTimestamp=0,k("stall_end")}}function $(e,t,n){if(_.interruptCount>0&&_.interruptDuration>0){var r={interrupt_count:_.interruptCount,interrupt_time:_.interruptDuration};return _.interruptCount=0,_.interruptDuration=0,_.interruptStartTimestamp=0,_.interruptEndTimestamp=0,r}return{interrupt_count:null,interrupt_time:null}}function P(e,t,n){var r={stall_count:null,stall_count_200_ms:null,stall_time:null},o=t.uncontrolledState.clockTimestamp,a=function(){var e={stall_count:_.stallCount,stall_count_200_ms:_.stallCount200ms,stall_time:_.stallDuration};return _.stallCount=0,_.stallCount200ms=0,_.stallDuration=0,_.stallStartTimestamp=0,e},i=e.controlledState.playbackState,l=t.controlledState.playbackState;switch(i!=="stalling"&&l==="stalling"&&(_.stallStartTimestamp=o),n){case"started_playing":case"unpaused":case"finished_playing":case"paused":case"cancelled_requested_playing":case"representation_ended":I(t.uncontrolledState.clockTimestamp),r=a();break;case"heart_beat":t.controlledState.playbackState!=="stalling"&&(I(t.uncontrolledState.clockTimestamp),r=a());break;default:break}return r}function N(e,t,n){var r=t.controlledState.playbackState==="paused"&&e.controlledState.playbackState==="stalling";return n>0&&(t.controlledState.playbackState==="stalling"||r)}function M(e,t){var n=e.current,r=null;switch(t){case"finished_playing":case"paused":case"heart_beat":return n&&(r=n.getAndFlushTracedFrames()),r!=null?JSON.stringify(r):null;default:return null}}function w(e){var t=e.controlledState.playbackState;switch(t){case"playing":case"stalling":return"playing";case"paused":return"paused";case"ended":return"finished";default:return"unknown"}}function A(e){switch(e){case"normal":return"normal";case"low":return"low";case"ultra-low":return"ultra_low";default:return null}}function F(){return{state:_.hasLoggedStartedPlaying?r("VideoPlayerLoggerPlayerStates").UNPAUSED:r("VideoPlayerLoggerPlayerStates").STARTED}}function O(e){var t,n;if(e!=null&&e.v2&&(e==null?void 0:e.v2.length)>0){var r=e==null?void 0:e.v2,a=r[r.length-1];return[a.class,a.module].map(o("CometProductAttribution").filterEntryValue).join(":")}return(t=e==null||(n=e.v2)==null?void 0:n.map(function(e){return[e.class,e.module].map(o("CometProductAttribution").filterEntryValue).join(":")}).join(";"))!=null?t:""}function B(i){var l,c,d,m,p,f,h,y,C,S=i.eventType,E=i.logDataOverrides,k=i.prevState,I=i.state,D=T(I,S),x=D.video_last_start_time_position,F=P(k,I,S),B=F.stall_count,W=F.stall_count_200_ms,q=F.stall_time,U=$(k,I,S),V=U.interrupt_count,H=U.interrupt_time,G=M(e.videoLiveTraceRef,S),z=[],j=e.initialCoreVideoPlayerMetaData.autoplayGatingResult;j&&z.push(j);var K=S==="entered_fs"?!0:S==="exited_fs"?!1:_.lastLoggedFullscreenState,Q=r("getPlayerFormatForLogData")({isDesktopPictureInPicture:(l=I.controlledState.isDesktopPictureInPicture)!=null?l:!1,isFullscreen:K},a.playerFormat),X=I.uncontrolledState.viewabilityPercentage,Y=!!I.uncontrolledState.isFBIsLiveTemplated,J=!!I.uncontrolledState.isFBWasLive,Z=I.uncontrolledState.videoElementPlaybackRate,ee=Z==null||Z===0?_.lastLoggedPlaybackSpeed:Z,te=e.initialLoggingMetaData.productAttribution;if(Q==="watch_scroll"&&te&&te.v2){var ne,re={0:babelHelpers.extends({},te[0]),v2:[babelHelpers.extends({},te.v2[0])]},oe=(ne=n.productAttribution)==null||(ne=ne.v2)==null?void 0:ne[0];if(oe){var ae=re.v2[0];ae.class=oe.class,ae.scope_id=oe.scope_id,ae.ts=oe.ts}te=re}var ie=null,le=null;ie=te!=null?o("CometProductAttribution").minifyProductAttributionV2(te):null,le=te!=null?O(te):null;var se=N(k,I,q!=null?q:0),ue={access_token:e.initialLoggingMetaData.accessToken,ad_client_token:a.adClientToken,attribution_id:te!=null&&Object.prototype.hasOwnProperty.call(te,"0")?JSON.stringify({0:te[0]}):null,attribution_id_v2:ie,attribution_id_v2_root:le,audio_only:a.audioOnly,audio_representation_id:I.uncontrolledState.audioRepresentationID,autoplay_eligible:e.initialCoreVideoPlayerMetaData.canAutoplay==="allow",autoplay_failure_reasons:JSON.stringify(z),autoplay_setting:e.initialCoreVideoPlayerMetaData.autoplaySetting,available_qualities:I.uncontrolledState.availableQualities.length,broadcaster_origin:e.initialCoreVideoPlayerMetaData.broadcasterOrigin,browser_tab_id:r("getVideoBrowserTabId")(),caption_state:R(I,S),client_latency_setting:A(I.controlledState.latencyLevel),current_playback_speed:v?ee:null,current_viewability_percentage:X,dash_perf_logging_enabled:a.VideoPlayerShakaPerformanceLoggerClass!=null&&a.VideoPlayerShakaPerformanceLoggerClass.isEnabled(),data_connection_quality:o("VideoPlayerConnectionQuality").evaluate(function(){return I.uncontrolledState.estimatedBandwidth}),downstream_share_origin_uri:(c=n.downstreamShareSignalTracking)==null?void 0:c.downstream_share_session_origin_uri,downstream_share_start_time:(d=n.downstreamShareSignalTracking)==null?void 0:d.downstream_share_session_start_time,downstream_share_visit_uuid:(m=n.downstreamShareSignalTracking)==null?void 0:m.downstream_share_session_id,dropped_frame_count:I.uncontrolledState.videoElementDroppedFrameCount,external_log_id:a.externalLogID,external_log_type:a.externalLogType,fb_manifest_identifier:I.uncontrolledState.manifestIdentifier,frame_events:G,interrupt_count:V,interrupt_time:H,is_abr_enabled:I.isAbrEnabled,is_fbms:I.uncontrolledState.isFBMS,is_live_video_rewound:I.controlledState.isLiveRewindActive,is_mixed_codec_manifest:I.uncontrolledState.isMixedCodecManifest,is_pip:I.controlledState.isDesktopPictureInPicture,is_predictive_playback:I.uncontrolledState.isPredictiveDash,is_sound_on:!I.controlledState.muted,is_stalling:se,is_templated_manifest:Y||J,last_viewability_percentage:_.lastLoggedViewabilityPercentage,mpd_validation_errors:I.uncontrolledState.mpdValidationErrors,network_connected:I.uncontrolledState.networkConnected,playback_caption_format:I.controlledState.captionFormat,playback_caption_locale:I.controlledState.captionsLocale,playback_duration:I.uncontrolledState.videoElementDuration,playback_is_broadcast:e.initialCoreVideoPlayerMetaData.isVideoBroadcast,playback_is_drm:!!e.initialCoreVideoPlayerMetaData.graphQLVideoDRMInfo,playback_is_live_streaming:e.initialCoreVideoPlayerMetaData.isLiveStreaming,player_format:Q,player_instance_key:n.instanceKey,player_origin:a.playerOriginOverride,player_state:w(I),player_suborigin:a.subOrigin,player_version:I.playerVersion,projection:I.uncontrolledState.videoProjection,representation_id:I.uncontrolledState.videoRepresentationID,source_VPL_LOGGING_HACK:a.source_VPL_LOGGING_HACK,stall_count:B,stall_count_200_ms:W,stall_time:q,streaming_format:I.controlledState.streamingFormat,total_frame_count:I.uncontrolledState.videoElementTotalFrameCount,tracking_data_encrypted:e.initialLoggingMetaData.trackingDataEncrypted,tracking_nodes:e.initialLoggingMetaData.trackingNodes,v2_heart_beat:r("gkx")("24377")&&S==="heart_beat"?!0:null,video_bandwidth:I.uncontrolledState.estimatedBandwidth,video_buffer_end_position:I.uncontrolledState.videoElementLastBufferEndPosition,video_id:a.videoFBID,video_last_start_time_position:x,video_play_reason:I.controlledState.lastPlayReason,video_player_height:(p=n.dimensions)==null?void 0:p.height,video_player_width:(f=n.dimensions)==null?void 0:f.width,video_time_position:I.uncontrolledState.videoElementPlayheadPosition,web_client_revision:r("SiteData").client_revision},ce=L.has(S)?++_.sequenceNumber:null,de={event_seq_num:++_.vplEventSequenceNumber,seq_num:ce,time_ms:Date.now(),vpts:(u||(u=r("performanceAbsoluteNow")))()},me={};t.forEach(function(e,t){me[t]=e});var pe=a.loggingToVPLAdditionalData,_e=babelHelpers.extends({},pe,me),fe=babelHelpers.extends({},_e,ue,E,de),ge=(h=_.initialSuborigin)!=null?h:a.subOrigin,he=(y=fe.source_VPL_LOGGING_HACK)!=null?y:ge,ye=(C=a.initialTracePolicy)!=null?C:a.routeTracePolicy,Ce={eventType:S,logData:fe,routeTracePolicy:ye,source_VPL_LOGGING_HACK:he};s.push(Ce),_.initialSuborigin==null&&ge!=null&&(_.initialSuborigin=ge),_.lastLoggedFullscreenState=K,_.lastLoggedPlaybackSpeed=ee,S==="viewability_changed"&&(_.lastLoggedViewabilityPercentage=X),b&&g(e.debugLogId,"[_push] "+S,{loggedEvent:Ce,loggerEventsLength:s.length,loggingState:JSON.stringify(_)})}var W={};function q(e,t,n){return B({eventType:"requested_playing",logDataOverrides:babelHelpers.extends({},n,F()),prevState:e,state:t}),_.hasPendingRequestedPlaying=!0,_.canLogPausedOrFinishedPlaying=!0,W}function U(e,t,n){return _.canLogPausedOrFinishedPlaying?_.hasPendingRequestedPlaying?(V(e,t,n),_.canLogPausedOrFinishedPlaying=!1,_.hasPendingRequestedPlaying=!1,W):(B({eventType:"paused",logDataOverrides:babelHelpers.extends({},n,{error_user_info:JSON.stringify({is_document_hidden:t.uncontrolledState.isDocumentHidden})}),prevState:e,state:t}),_.canLogPausedOrFinishedPlaying=!1,_.hasPendingRequestedPlaying=!1,W):W}function V(e,t,n){var r=t.uncontrolledState.liveTraceContext,o=babelHelpers.extends({},n,F(),{live_trace_source_id:r?r.sourceId:void 0,live_trace_stream_id:r?r.streamId:void 0,live_trace_stream_type:r?r.streamType:void 0});return B({eventType:"cancelled_requested_playing",logDataOverrides:o,prevState:e,state:t}),W}function H(e,t,n){if(n.type==="dom_event_play_promise_rejected"&&n.payload.hostCallPlayID===e.controlledState.hostCallPlayIDLast&&t.controlledState.hostCallPlayIDLast==null&&_.hasPendingRequestedPlaying){var r=n.payload.playPromiseRejectionReason;return r!=null&&r.name==="NotAllowedError"?(V(e,t,{debug_reason:"not_allowed"}),W):(t.playerVersion!=="comet_nextgendash"&&r!=null&&r.name==="AbortError"&&V(e,t,{debug_reason:"aborted"}),W)}else return W}function G(e,t,n){if((n.type==="controller_play_requested"||n.type==="dom_event_play"&&!_.shouldIgnoreDomPlay)&&e.controlledState.playbackState!==t.controlledState.playbackState){var r=t.uncontrolledState.liveTraceContext,o=r?{live_trace_source_id:r.sourceId,live_trace_stream_id:r.streamId,live_trace_stream_type:r.streamType}:null;return q(e,t,o),W}else return W}function z(e,t,n){if(e.controlledState.playbackState==="stalling"&&t.controlledState.playbackState==="playing"&&_.canLogPlayingEvent){var r=t.uncontrolledState.liveTraceContext,o=r?{live_trace_source_id:r.sourceId,live_trace_stream_id:r.streamId,live_trace_stream_type:r.streamType}:null;return B({eventType:_.hasLoggedStartedPlaying?"unpaused":"started_playing",logDataOverrides:o,prevState:e,state:t}),_.hasLoggedStartedPlaying=!0,_.canLogPlayingEvent=!1,_.hasPendingRequestedPlaying=!1,W}else return W}function j(e,t,n){var r=t.controlledState.playbackState,o=e.controlledState.playbackState;return n.type==="controller_scrub_begin_requested"&&!e.controlledState.scrubbing&&r!=="paused"&&r!=="ended"?(U(e,t),_.isLoggingScrubbingSequence=!0,W):!e.controlledState.seeking&&t.controlledState.seeking&&!_.isLoggingScrubbingSequence&&r!=="paused"&&r!=="ended"&&!_.hasPendingRequestedPlaying?(U(e,t),_.shouldLogRequestedPlayingForScrub=!0,W):n.type==="controller_scrub_end_requested"&&e.controlledState.scrubbing&&r!=="paused"&&r!=="ended"?(q(e,t,{video_time_position:n.payload.seekTargetPosition}),W):(e.controlledState.seeking&&!t.controlledState.seeking&&(_.shouldLogRequestedPlayingForScrub&&r!=="paused"&&r!=="ended"&&q(e,t),B({eventType:"scrubbed",prevState:e,state:t}),_.isLoggingScrubbingSequence=!1,_.shouldLogRequestedPlayingForScrub=!1,o!=="paused"&&o!=="ended"&&(_.canLogPlayingEvent=!0)),W)}function K(e,t,n){return e.controlledState.playbackState!==t.controlledState.playbackState&&t.controlledState.playbackState==="ended"&&_.canLogPausedOrFinishedPlaying&&(B({eventType:"finished_playing",prevState:e,state:t}),_.canLogPausedOrFinishedPlaying=!1),W}function Q(e,t,n){return(n.type==="controller_pause_requested"||n.type==="dom_event_pause"&&!_.shouldIgnoreDomPause)&&e.controlledState.playbackState!==t.controlledState.playbackState&&U(e,t,{debug_reason:"paused"}),W}function X(e,t,n){var r=t.controlledState.playbackState;return r!=="paused"&&r!=="ended"&&(n.type==="implementation_video_node_unmounted"?U(e,e,{debug_reason:"unloaded"}):(n.type==="implementation_unmounted"||n.type==="implementation_engine_destroy_requested")&&U(e,t,{debug_reason:"unloaded"})),W}function Y(e,t,n){if(n.type==="implementation_engine_representation_blocked"){var r=n.payload.blockedRepresentationID;B({eventType:"video_playback_fallback",logDataOverrides:{representation_id:r},prevState:e,state:t})}return W}function J(e,t,n){var a=t.controlledState.muted,i=t.controlledState.volume,l=e.controlledState.muted,s=e.controlledState.volume,u=o("VideoPlayerMutedStateChange").getVideoPlayerMutedStateChange({currMuted:a,currVolume:i,prevMuted:l,prevVolume:s}),c={current_volume:Math.round(i*100)};switch(u){case"muted":return B({eventType:"muted",logDataOverrides:c,prevState:e,state:t}),W;case"unmuted":return B({eventType:"unmuted",logDataOverrides:c,prevState:e,state:t}),W;case null:return s<i?(B({eventType:"volume_increase",logDataOverrides:c,prevState:e,state:t}),W):(s>i&&B({eventType:"volume_decrease",logDataOverrides:c,prevState:e,state:t}),W);default:return r("FBLogger")("comet_video_player").mustfix("Unexpected mutedStateChange %s",u),W}}function Z(e,t,n){var r=t.uncontrolledState.videoRepresentationID,o=_.lastTrackedVideoRepresentation,a=t.uncontrolledState.audioRepresentationID,i=_.lastTrackedAudioRepresentation,l=t.controlledState.playbackState,s=t.controlledState.seeking;if(!s&&l!=="paused"&&l!=="ended"&&o!=null&&o!==r){var u=t.uncontrolledState.availableVideoTracks.find(function(e){return e.id===t.uncontrolledState.videoRepresentationID}),c=t.uncontrolledState.availableVideoTracks.find(function(e){return e.id===_.lastTrackedVideoRepresentation});B({eventType:"representation_ended",logDataOverrides:{next_quality_label:u==null?void 0:u.qualityLabel,next_representation_id:u==null?void 0:u.id,next_video_codecs:u==null?void 0:u.codec,quality_label:c==null?void 0:c.qualityLabel,representation_id:c==null?void 0:c.id,video_codecs:c==null?void 0:c.codec},prevState:e,state:t}),_.lastTrackedVideoRepresentation=r,k("quality_change")}else o==null&&o!==r&&(_.lastTrackedVideoRepresentation=r);return!s&&l!=="paused"&&l!=="ended"&&i!=null&&i!==a?(B({eventType:"representation_ended",logDataOverrides:{audio_representation_id:i,next_representation_id:a},prevState:e,state:t}),_.lastTrackedAudioRepresentation=a,k("audio_change")):i==null&&i!==a&&(_.lastTrackedAudioRepresentation=a),W}function ee(e,t,o){var i=e.controlledState.error===o?babelHelpers.extends({},e,{controlledState:babelHelpers.extends({},e.controlledState,{error:{$ref:"$.player.lastError"}})}):e;e.uncontrolledState.videoElementError!=null&&(i=babelHelpers.extends({},i,{uncontrolledState:babelHelpers.extends({},i.uncontrolledState,{videoElementError:{code:e.uncontrolledState.videoElementError.code,message:e.uncontrolledState.videoElementError.message}})}));var l=t;{var s=typeof t.payload=="object"&&t.payload!=null?t.payload:null;if(s!=null){var u={};Object.keys(s).forEach(function(e){var t=s[e];t===o?u[e]={$ref:"$.player.lastError"}:u[e]=t}),l=babelHelpers.extends({},t,{payload:u})}}return{currentVideo:{audioStreamId:e.uncontrolledState.audioRepresentationID,dashAudioFormat:void 0,hasHD:void 0,hasRateLimit:void 0,hasSubtitles:e.controlledState.captionsLoaded,isDrm:!!a.graphQLVideoDRMInfo,isHD:void 0,isLiveStream:a.isLiveStreaming,isRateLimited:void 0,liveManifestUrl:void 0,projection:e.uncontrolledState.videoProjection,resourceUrl:void 0,streamId:e.uncontrolledState.videoRepresentationID,streamType:e.controlledState.streamingFormat,tagHD:void 0,tagSD:void 0,videoID:a.videoFBID},player:{canPlayType:(c||(c=r("mapObject")))(r("VideoMimeTypes"),f),dimensions:n.dimensions?{height:n.dimensions.height,width:n.dimensions.width}:null,droppedFrames:e.uncontrolledState.videoElementDroppedFrameCount,initializationTime:void 0,initializationTimestamp:void 0,inPlayStallCount:void 0,inPlayStallTime:void 0,interruptCount:void 0,interruptTime:void 0,lastError:o,loggedError:_.lastLoggedError===o?{$ref:"$.player.lastError"}:_.lastLoggedError,stallCount:_.stallCount,stallTime:_.stallDuration,state:w(e),totalFrames:e.uncontrolledState.videoElementTotalFrameCount,version:e.playerVersion,videoSource:void 0,viewabilityPercentage:e.uncontrolledState.viewabilityPercentage},playerStateMachine:{action:l,state:i}}}function te(e){var t=e.errorMessageFormat,n=e.errorName,r=e.errorCode==null||e.errorCode===""?n:e.errorCode,o=n+"#"+r+": "+re(t);return o}function ne(e,t,n,r){var a=ee(e,t,n),i=n.errorMessageFormat,l=n.errorName,s=n.errorType,u=n.url,c=n.errorCode==null||n.errorCode===""?l:n.errorCode;return{error:l,error_code:c,error_description:i,error_domain:l,error_type:s!=null?s:o("VideoPlayerImplementationErrorNormalization").getErrorTypeFromErrorName(l,i),error_user_info:JSON.stringify(babelHelpers.extends({},a,r)),resource_url:u}}var re=function(t){return t.replace(/([0-9]{2,})/g,function(e){for(var t="";t.length<e.length;)t+="#";return t})};function oe(e,t,n){if(r("justknobx")._("3727"))return W;if(n.type==="implementation_warning"){var o,a=n.payload.warningError,i=te(a),l=_.warningState.eventsLoggedTotal,s=(o=_.warningState.eventsLoggedPerKey.get(i))!=null?o:0;if(l<_.warningState.eventsMaxLoggedTotal&&s<_.warningState.eventsMaxLoggedPerKey){_.warningState.eventsLoggedTotal++,_.warningState.eventsLoggedPerKey.set(i,s+1);var u=ne(t,n,a,{warning:{loggedPerKey:s+1,loggedTotal:l+1}});B({eventType:"player_warning",logDataOverrides:babelHelpers.extends({},F(),u),prevState:e,state:t})}}return W}function ae(e,t,n){var r=t.controlledState.error;if(r!=null&&r!==_.lastLoggedError&&r.errorCode!=="410"){var o=ne(t,n,r);B({eventType:"error",logDataOverrides:babelHelpers.extends({},F(),o),prevState:e,state:t}),_.lastLoggedError=r}return W}function ie(e,t,n){var r=_.errorRecoveryAttemptState.currentRecoverableError;if(r!=null){var o=ne(t,n,r);_.errorRecoveryAttemptState.eventsLogged++,_.errorRecoveryAttemptState.repeatCount=0,B({eventType:"error_recovery_attempt",logDataOverrides:babelHelpers.extends({},o),prevState:e,state:t})}return W}function le(e,t,n){if(n.type==="error_recovery_attempt"&&_.errorRecoveryAttemptState.eventsLogged<p){var o=_.errorRecoveryAttemptState.currentRecoverableError,a=n.payload.recoverableError;if(a!=null&&a.errorName==="OZ_NETWORK"&&!r("NetworkStatus").isOnline())return W;_.errorRecoveryAttemptState.currentRecoverableError=a,o==null||o.errorName!==a.errorName||o.errorCode!==a.errorCode?ie(e,t,n):(_.errorRecoveryAttemptState.repeatCount++,_.errorRecoveryAttemptState.repeatCount>m&&ie(e,t,n))}return W}function se(e,t,n){if(!v)return W;var r=t.uncontrolledState.videoElementPlaybackRate;return n.type==="dom_event_ratechange"&&_.lastLoggedPlaybackSpeed!=null&&r!==0&&r!==_.lastLoggedPlaybackSpeed&&B({eventType:"playback_speed_changed",prevState:e,state:t}),W}function ue(e,t,n){var r=t.controlledState.playbackState;r==="paused"||r==="ended"?_.nextHeartbeatTime=null:r!=="stalling"&&_.nextHeartbeatTime==null&&(_.nextHeartbeatTime=Date.now()+d);var o=_.nextHeartbeatTime;if(o!=null){var a=Date.now();a>=o&&(r!=="stalling"&&B({eventType:"heart_beat",prevState:e,state:t}),_.nextHeartbeatTime=a+d)}return W}function ce(e,t,n){return n.type==="implementation_mounted"&&B({eventType:"player_loaded",prevState:e,state:t}),W}function de(e,t,n){B({eventType:n?"entered_fs":"exited_fs",prevState:e,state:t})}function me(e,t,n){return a.playerFormat!==l.playerFormat&&B({eventType:"player_format_changed",prevState:e,state:t}),W}function pe(e,t,n){if(n.type!=="notify_fullscreen_changed")return W;var r=_.lastLoggedFullscreenState,o=t.uncontrolledState.isFullscreen;return r!==!0&&o===!0?(de(e,t,o),W):(r===!0&&o===!1&&de(e,t,o),W)}function _e(e,t,n){var o=a,i=o.adClientToken;if((i==null||i==="")&&r("gkx")("24380"))return W;var l=t.controlledState.playbackState,s=_.lastLoggedViewabilityPercentage,u=t.uncontrolledState.viewabilityPercentage;return l!=="paused"&&l!=="ended"&&s!=null&&s!==u&&B({eventType:"viewability_changed",prevState:e,state:t}),W}function fe(e,t,n){return n.type==="controller_set_captions_visible_requested"&&B({eventType:"caption_change",prevState:e,state:t}),W}function ge(t){if(i=n,l=a,t.type==="notify_logging_metadata_change"){var r=t.payload,o=r.coreVideoPlayerMetaData,s=r.loggingMetaData;if(b){var u=o.initialTracePolicy!==a.initialTracePolicy;h(e.debugLogId,n,s,{initialTracePolicyChanged:u})}n=s,a=o}}return{addDebugSubscriber:function(t){return E(t)},consumeLoggerEvents:function(){var t=s.splice(0);return b&&t.length>0&&g(e.debugLogId,"[consumeLoggerEvents] ("+t.length+" events)",t),t},getLoggerState:function(){return _},handleStateMachine:function(n,r,o){ge(o);var t=r.controlledState.playbackState;x(n,r,o),D(n,r);var a=[me,pe,_e,H,G,j,z,K,Q,Y,J,X,ce,fe,Z,oe,ae,le,ue,se];a.forEach(function(e){e(n,r,o)}),b&&y(e.debugLogId,n,r,o),(t==="paused"||t==="ended")&&(_.canLogPlayingEvent=!0),o.type==="controller_pause_requested"&&(_.hasPausedOnce=!0,_.shouldIgnoreDomPause=!0),o.type==="controller_play_requested"&&(_.hasPausedOnce=!0,_.shouldIgnoreDomPlay=!0),o.type==="dom_event_pause"&&(_.shouldIgnoreDomPause=!1),o.type==="dom_event_play"&&(_.shouldIgnoreDomPlay=!1,_.lastLoggedViewabilityPercentage=r.uncontrolledState.viewabilityPercentage)},logVPLEvent:function(t){var e=t.eventType,n=t.logDataOverrides,r=t.state;B({eventType:e,logDataOverrides:n,prevState:r,state:r})},setLoggingToVPLAdditionalData:function(n,r){t.set(n,r),b&&C(n,r)}}}l.HEARTBEAT_INTERVAL=d,l.createVideoPlayerImplementationStateMachineLogger=L}),98);
__d("convertToViewabilityPercentage",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e>=.99?100:e>=.75?75:e>=.5?50:e>=.25?25:e>=0?0:-2}i.default=e}),66);
__d("VideoPlayerImplementationStateMachineStateUncontrolledState",["NetworkStatus","convertToViewabilityPercentage","gkx","performance"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,o,a,i,l,s,u,c,d=t.engineExtrasAPI,m=t.fullscreenControllerRef,p=t.videoElementAPI,_=t.videoLiveTraceRef,f=t.videoPlayerPassiveViewabilityInfo,g=_.current,h=Date.now(),y=typeof(e||(e=r("performance"))).now=="function"?(e||(e=r("performance"))).now():0;if(p==null){var C;return{audioRepresentationID:void 0,availableAudioTracks:[],availableQualities:[],availableVideoTracks:[],clockTimestamp:h,currentPlayingAudioTrackID:void 0,currentPlayingVideoQuality:void 0,currentPlayingVideoTrackID:void 0,estimatedBandwidth:void 0,isDocumentHidden:document.hidden,isDRM:void 0,isFBIsLiveTemplated:void 0,isFBMS:void 0,isFBWasLive:void 0,isFullscreen:m.current?m.current.getIsFullscreen():void 0,isLiveRewindAvailable:void 0,isMixedCodecManifest:null,isPredictiveDash:void 0,liveTraceContext:g&&(C=g.getLiveTraceContext())!=null?C:void 0,manifestIdentifier:void 0,mpdValidationErrors:void 0,networkConnected:void 0,perfTimestamp:y,targetAudioTrack:null,targetVideoQuality:"",videoElementDebugCurrentSrc:void 0,videoElementDebugSrc:void 0,videoElementDroppedFrameCount:void 0,videoElementDuration:void 0,videoElementEnded:void 0,videoElementError:void 0,videoElementLastBufferEndPosition:void 0,videoElementMuted:void 0,videoElementNetworkState:void 0,videoElementPaused:void 0,videoElementPlaybackRate:void 0,videoElementPlayheadPosition:void 0,videoElementReadyState:void 0,videoElementTotalFrameCount:void 0,videoElementVolume:void 0,videoProjection:void 0,videoRepresentationID:void 0,viewabilityPercentage:void 0}}var b=p.getPlayheadPosition(),v=f.getCurrent();return{audioRepresentationID:d?d.getCurrentPlayingAudioRepresentationID():void 0,availableAudioTracks:(n=d==null?void 0:d.getAvailableAudioTracks())!=null?n:[],availableQualities:(o=d==null?void 0:d.getAvailableVideoQualities())!=null?o:[],availableVideoTracks:(a=d==null?void 0:d.getAvailableVideoTracks())!=null?a:[],clockTimestamp:h,currentPlayingAudioTrackID:d?d.getCurrentPlayingAudioRepresentationID():void 0,currentPlayingVideoQuality:d?d.getCurrentPlayingVideoQuality():void 0,currentPlayingVideoTrackID:d?d.getCurrentPlayingVideoRepresentationID():void 0,estimatedBandwidth:d?d.getEstimatedBandwidth():void 0,isDocumentHidden:document.hidden,isDRM:d?d.isDrm():void 0,isFBIsLiveTemplated:d?d.isFBIsLiveTemplated():void 0,isFBMS:d?d.isFBMS():void 0,isFBWasLive:d?d.isFBWasLive():void 0,isFullscreen:m.current?m.current.getIsFullscreen():void 0,isLiveRewindAvailable:d?d.isLiveRewindAvailable():void 0,isMixedCodecManifest:d?d.isMixedCodecManifest():null,isPredictiveDash:d?d.isPredictiveDash():void 0,liveTraceContext:g&&(i=g.getLiveTraceContext())!=null?i:void 0,manifestIdentifier:d?d.getManifestIdentifier():void 0,mpdValidationErrors:d?d.getMpdValidationErrors():void 0,networkConnected:r("NetworkStatus").isOnline(),perfTimestamp:y,targetAudioTrack:(l=d==null?void 0:d.getTargetAudioTrack())!=null?l:null,targetVideoQuality:(s=d==null?void 0:d.getCurrentTargetVideoQuality())!=null?s:"",videoElementDebugCurrentSrc:r("gkx")("24351")?(u=p.getUnderlyingVideoElement())==null?void 0:u.currentSrc:void 0,videoElementDebugSrc:r("gkx")("24351")?(c=p.getUnderlyingVideoElement())==null?void 0:c.src:void 0,videoElementDroppedFrameCount:p.getDroppedFrameCount(),videoElementDuration:p.getDuration(),videoElementEnded:p.getEnded(),videoElementError:p.getError(),videoElementLastBufferEndPosition:p.getLastBufferEndPosition(),videoElementMuted:p.getMuted(),videoElementNetworkState:p.getNetworkState(),videoElementPaused:p.getPaused(),videoElementPlaybackRate:p.getPlaybackRate(),videoElementPlayheadPosition:b,videoElementReadyState:p.getReadyState(),videoElementTotalFrameCount:p.getTotalFrameCount(),videoElementVolume:p.getVolume(),videoProjection:d==null?void 0:d.getVideoProjectionType(),videoRepresentationID:d?d.getCurrentPlayingVideoRepresentationID():void 0,viewabilityPercentage:v?r("convertToViewabilityPercentage")(v.visiblePercentage):void 0}}l.createVideoPlayerImplementationStateMachineStateUncontrolledState=s}),98);
__d("VideoPlayerImplementationStateMachineState",["VideoPlayerImplementationStateMachineStateUncontrolledState"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.alwaysShowCaptions,n=e.areCaptionsAutogenerated,r=e.captionDisplayStyle,a=e.dimensions,i=e.isAbrEnabled,l=e.playerVersion,s=e.streamingFormat,u=e.videoPlayerPassiveViewabilityInfo,c=!0,d=1,m=o("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:null,fullscreenControllerRef:{current:null},videoElementAPI:null,videoLiveTraceRef:{current:null},videoPlayerPassiveViewabilityInfo:u});return{controlledState:{activeCaptions:null,activeEmsgBoxes:[],allEmsgBoxes:new Map,bufferingDetected:!1,captionDisplayStyle:r,captionFormat:null,captionsLoaded:!1,captionsLocale:null,captionsVisible:t,dimensions:a,domEventsLatestPerfMs:{},emsgObserverTokens:new Set,error:null,hasPlayEverBeenRequested:!1,hostCallCanApply:!1,hostCallPlayIDLast:null,hostCallQueue:[],implementationSeekSourcePosition:null,inbandCaptionsAutogenerated:n,isDesktopPictureInPicture:!1,isLiveRewindActive:!1,lastBufferingType:null,lastMuteReason:null,lastPausedTimeMs:0,lastPauseReason:null,lastPlayedTimeMs:0,lastPlayReason:null,latencyLevel:"normal",loopCount:0,loopCurrent:0,mountState:"before_mounted",muted:c,playbackState:"paused",scrubbing:!1,seekableRanges:null,seeking:!1,seekTargetPosition:null,selectedVideoQuality:"notselected",selectedVideoVariant:null,streamEnded:!1,streamingFormat:s,streamInterrupted:!1,targetPlaybackRate:1,ullIneligibilityReason:null,volume:d,waitingForDomPlaying:!1,waitingForDomTimeUpdateAfterSeeked:!1,watchTimeMs:0},isAbrEnabled:i,playerVersion:l,uncontrolledState:m}}l.createVideoPlayerImplementationStateMachineInitialState=e}),98);
__d("useSEOLoggedOutWebCrawler",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("23157")}l.default=e}),98);
__d("VideoPlayerImplementationEngineAPI",["CometEventListener","CometVideoPictureInPictureManagerContext","CometVisualCompletion","CurrentUser","ErrorMetadata","FBLogger","MediaPlaybackCompoundEventStateMachineLogger","MediaPlaybackLogFlusher","PlaybackSpeedExperiments","RunComet","SubscriptionsHandler","VideoLiveTrace","VideoPlayerBanzaiLogFlusher","VideoPlayerCaptionsController","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationReactVideoElement.react","VideoPlayerImplementationStateMachine","VideoPlayerImplementationStateMachineHostCallQueue","VideoPlayerImplementationStateMachineLogger","VideoPlayerImplementationStateMachineState","VideoPlayerImplementationStateMachineStateUncontrolledState","VideoPlayerVideoPixelsFitContext","clearTimeout","cr:2336","cr:355","cr:4596","cr:506","deepEquals","emptyFunction","err","getErrorSafe","gkx","performanceNow","react","removeFromArray","setTimeout","useConcurrentAutoplayManagementAPI","useSEOLoggedOutWebCrawler","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useRef,p=c.useState,_=(function(){function e(e){var t=e.pauseRequestCallbacks,n=e.playRequestCallbacks,r=e.scrubBeginRequestCallbacks,o=e.scrubEndRequestCallbacks;this.$1=n,this.$2=t,this.$3=r,this.$4=o}var t=e.prototype;return t.playRequest=function(t){var e=this;return this.$1.push(t),function(){r("removeFromArray")(e.$1,t)}},t.pauseRequest=function(t){var e=this;return this.$2.push(t),function(){r("removeFromArray")(e.$2,t)}},t.scrubBeginRequest=function(t){var e=this;return this.$3.push(t),function(){r("removeFromArray")(e.$3,t)}},t.scrubEndRequest=function(t){var e=this;return this.$4.push(t),function(){r("removeFromArray")(e.$4,t)}},e})();function f(e){var t=e.concurrentAutoplayManagementAPI,n=e.debugAPI,o=e.exitPictureInPictureImpl,a=e.fullscreenControllerRef,i=e.getCurrentExposedState,l=e.getCurrentIsDesktopPictureInPicture,s=e.getCurrentIsFullscreen,u=e.getCurrentLiveRewindPlayheadPosition,c=e.getCurrentPlayheadPosition,d=e.internal_getCurrentStateMachineState,m=e.internal_injectFatalError,p=e.loggerAPI,f=e.pauseImpl,g=e.playImpl,h=e.registerEmsgObserverImpl,y=e.requestPictureInPictureImpl,C=e.scrubBeginImpl,b=e.scrubEndImpl,v=e.seekImpl,S=e.selectVideoQualityImpl,R=e.selectVideoVariantImpl,L=e.setCaptionsDisplayStyleImpl,E=e.setCaptionsUrlImpl,k=e.setCaptionsVisibleImpl,I=e.setIsLiveRewindActiveImpl,T=e.setLatencyLevelImpl,D=e.setMutedImpl,x=e.setPictureInPictureStateImpl,$=e.setPlaybackRateImpl,P=e.setVolumeImpl,N=e.subscribers,M=e.unregisterEmsgObserverImpl,w=e.videoElementAPIRef,A=e.videoPlayerPassiveViewabilityInfo,F=new Set,O=!1,B=null,W=[],q=[],U=[],V=[],H=new _({pauseRequestCallbacks:q,playRequestCallbacks:W,scrubBeginRequestCallbacks:U,scrubEndRequestCallbacks:V}),G={freeze:function(){if(!i().paused)throw r("FBLogger")("comet_video_player").mustfixThrow("Video player must be paused before the controller freeze");var e={};try{var t=!1;F.size===0&&(t=!0,B={exposedState:i(),isFullscreen:s(),liveRewindPlayheadPosition:u(),playheadPosition:c(),stateMachineState:d()}),F.add(e),t&&(O=!0,N.forEach(function(e){e()}))}finally{O=!1}return e},isFrozen:function(){return B!=null},unfreeze:function(t){if(!F.has(t))throw r("FBLogger")("comet_video_player").mustfixThrow("Video player controller unfreeze token not found");F.delete(t),F.size===0&&(B=null,N.forEach(function(e){e()}))}},z=function(){return B!=null?B.exposedState:i()},j=babelHelpers.extends({},t,G,p,{debugAPI:n,exitPictureInPicture:function(){G.isFrozen()||o()},getCurrentState:z,getIsDesktopPictureInPicture:function(){return B!=null?B.isFullscreen:l()},getIsFullscreen:function(){return B!=null?B.isFullscreen:s()},getLiveRewindPlayheadPosition:function(){return B!=null?B.liveRewindPlayheadPosition:u()},getPlayheadPosition:function(){return B!=null?B.playheadPosition:c()},internal_getCoreVideoStates:function(){return{implementationController:j,implementationExposedState:z(),videoPlayerPassiveViewabilityInfo:A}},internal_getStateMachineState:function(){return B!=null?B.stateMachineState:d()},internal_getVideoElement:function(){var e=w.current;if(e!=null){var t=e.getUnderlyingVideoElement();return t}return null},internal_getVideoPixelsDecodedDimensions:function(){var e,t=w.current;return(e=t==null?void 0:t.getVideoPixelsDecodedDimensions())!=null?e:null},internal_getVideoPixelsPaintedDimensions:function(){var e,t=w.current;return(e=t==null?void 0:t.getVideoPixelsPaintedDimensions())!=null?e:null},internal_injectFatalError:m,observeOn:function(){return H},pause:function(t){G.isFrozen()||(q.forEach(function(e){return e(t)}),f(t))},play:function(t){G.isFrozen()||(W.forEach(function(e){return e(t)}),g(t))},registerEmsgObserver:function(){var e={};return h(e),e},requestPictureInPicture:function(){G.isFrozen()||y()},requestSetIsFullscreen:function(t){if(!G.isFrozen()){var e=a.current;if(e){var n=j.internal_getVideoElement();e.requestSetIsFullscreen(t,n)}}},scrollIntoView:function(t){var e=j.internal_getVideoElement();e&&e.scrollIntoView(t)},scrubBegin:function(){G.isFrozen()||(U.forEach(function(e){return e()}),C())},scrubEnd:function(t){G.isFrozen()||(V.forEach(function(e){return e(t)}),b(t))},seek:function(t){G.isFrozen()||v(t)},selectVideoQuality:function(t){G.isFrozen()||S(t)},selectVideoVariant:function(t){G.isFrozen()||R(t)},setCaptionsDisplayStyle:function(t){G.isFrozen()||L(t)},setCaptionsUrl:function(t){G.isFrozen()||E(t)},setCaptionsVisible:function(t){G.isFrozen()||k(t)},setIsLiveRewindActive:function(t){G.isFrozen()||I(t)},setLatencyLevel:function(t){G.isFrozen()||T(t)},setMuted:function(t,n){G.isFrozen()||D(t,n)},setPictureInPictureState:function(t){G.isFrozen()||x(t)},setPlaybackRate:function(t){G.isFrozen()||$(t)},setVolume:function(t){G.isFrozen()||P(t)},subscribe:function(t){var e=function(){G.isFrozen()&&!O||t()},n=a.current,o=n?n.subscribe(e):null;return N.push(e),{remove:function(){o&&o.remove(),r("removeFromArray")(N,e)}}},unregisterEmsgObserver:function(t){M(t)},videoElementAPIRef:w});return j}function g(e){var t=e.concurrentAutoplayManagementAPI,n=e.createExposedState,r=e.debugAPI,o=e.fullscreenControllerRef,a=e.loggerToSNAPL,i=e.loggerToVPL,l=e.machine,s=e.subscribers,u=e.videoElementAPIRef,c=e.videoPlayerPassiveViewabilityInfo,d={logVPLEvent_DO_NOT_USE:function(t,n){i.logVPLEvent({eventType:t,logDataOverrides:n,state:l.getCurrentState()})},setLoggingToSNAPLAdditionalData:function(t){a==null||a.setLoggingToSNAPLAdditionalData(t)},setLoggingToVPLAdditionalData:function(t,n){i.setLoggingToVPLAdditionalData(t,n)}};return f({concurrentAutoplayManagementAPI:t,debugAPI:r,exitPictureInPictureImpl:function(){l.dispatch({type:"controller_picture_in_picture_exit_requested"})},fullscreenControllerRef:o,getCurrentExposedState:function(){return n(l.getCurrentState())},getCurrentIsDesktopPictureInPicture:function(){var e;return(e=l.getCurrentState().controlledState.isDesktopPictureInPicture)!=null?e:!1},getCurrentIsFullscreen:function(){var e=o.current;return e?e.getIsFullscreen():!1},getCurrentLiveRewindPlayheadPosition:function(){var e,t=l.getCurrentState(),n=t.controlledState,r=n.isLiveRewindActive,o=n.seekableRanges,a=n.seekTargetPosition;if(!r||a==null)return null;var i=(e=o==null?void 0:o.end(0))!=null?e:0;return a-i},getCurrentPlayheadPosition:function(){var e,t,n,r=0;return(e=(t=(n=u.current)==null?void 0:n.getPlayheadPosition())!=null?t:l.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?e:r},internal_getCurrentStateMachineState:function(){return l.getCurrentState()},internal_injectFatalError:function(t){l.dispatch({payload:{fatalError:t},type:"controller_inject_fatal_error"})},loggerAPI:d,pauseImpl:function(t){l.dispatch({payload:{reason:t},type:"controller_pause_requested"})},playImpl:function(t){l.dispatch({payload:{reason:t},type:"controller_play_requested"})},registerEmsgObserverImpl:function(t){l.dispatch({payload:{token:t},type:"register_emsg_observer"})},requestPictureInPictureImpl:function(){l.dispatch({type:"controller_picture_in_picture_requested"})},scrubBeginImpl:function(){l.dispatch({type:"controller_scrub_begin_requested"})},scrubEndImpl:function(t){l.dispatch({payload:{seekTargetPosition:t},type:"controller_scrub_end_requested"})},seekImpl:function(t){l.dispatch({payload:{seekTargetPosition:t},type:"controller_seek_requested"})},selectVideoQualityImpl:function(t){l.dispatch({payload:{selectedVideoQuality:t},type:"controller_quality_requested"})},selectVideoVariantImpl:function(t){l.dispatch({payload:{selectedVideoVariant:t},type:"controller_video_variant_requested"})},setCaptionsDisplayStyleImpl:function(t){l.dispatch({payload:{captionDisplayStyle:t},type:"controller_set_caption_display_style_requested"})},setCaptionsUrlImpl:function(t){l.dispatch({payload:{captionsUrl:t},type:"controller_set_captions_url_requested"})},setCaptionsVisibleImpl:function(t){l.dispatch({payload:{captionsVisible:t},type:"controller_set_captions_visible_requested"})},setIsLiveRewindActiveImpl:function(t){l.dispatch({payload:{isLiveRewindActive:t},type:"controller_set_is_live_rewind_active_requested"})},setLatencyLevelImpl:function(t){l.dispatch({payload:{latencyLevel:t},type:"controller_set_latency_level_requested"})},setMutedImpl:function(t,n){l.dispatch({payload:{muted:t,reason:n},type:"controller_muted_requested"})},setPictureInPictureStateImpl:function(t){l.dispatch({payload:{isInPictureInPictureMode:t},type:"controller_set_picture_in_picture_state_requested"})},setPlaybackRateImpl:function(t){l.dispatch({payload:{playbackRate:t},type:"controller_set_playback_rate"})},setVolumeImpl:function(t){l.dispatch({payload:{volume:t},type:"controller_volume_requested"})},subscribers:s,unregisterEmsgObserverImpl:function(t){l.dispatch({payload:{token:t},type:"unregister_emsg_observer"})},videoElementAPIRef:u,videoPlayerPassiveViewabilityInfo:c})}function h(e){var t=e.current;if(t==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Attempted to access VideoElementAPI while it is not available.");return t}function y(e){var t=e.alwaysShowCaptions,n=e.areCaptionsAutogenerated,a=e.captionDisplayStyle,i=e.captionsControllerRef,l=e.debugLogId,s=e.dimensions,u=e.engineExtrasAPI,c=e.engineMetadata,d=e.fullscreenControllerRef,m=e.handleFatalError,p=e.handleStateMachine,_=e.videoElementAPIRef,f=e.videoLiveTraceRef,g=e.videoPlayerPassiveViewabilityInfo;function y(e){o("VideoPlayerImplementationStateMachineHostCallQueue").applyOrQueueHostCall({engineExtrasAPI:u,hostCall:e,machine:S,videoElementAPI:_.current})}var b=null,v=[function(e,t,n){return n.type==="implementation_host_call_applied"&&n.payload.hostCall.type==="host_call_play"&&t.controlledState.lastPlayReason==="autoplay_initiated"?r("CometVisualCompletion").addFirstMarkerPoint("firstVideoAutoplayStalling"):t.controlledState.playbackState!==e.controlledState.playbackState&&t.controlledState.playbackState==="playing"&&t.controlledState.lastPlayReason==="autoplay_initiated"&&r("CometVisualCompletion").addFirstMarkerPoint("firstVideoAutoplayPlaying"),!0},function(e,t,n){return p(e,t,n),!0},function(e,t,n){return!0},function(e,t,n){if(e.controlledState.bufferingDetected===!1&&t.controlledState.bufferingDetected===!0||e.controlledState.bufferingDetected===!0&&t.controlledState.bufferingDetected===!1)if(t.controlledState.bufferingDetected){var r,o=(r=t.controlledState.lastBufferingType)!=null?r:"in_play",a=u.getPerfLoggerProvider();b=a?a.getOperationLogger("buffering").setState("buffering").setType(o).start():null}else!t.controlledState.bufferingDetected&&b!=null&&(b.log(),b=null);return!0},function(e,t,n){return n.type!=="implementation_engine_destroy_requested"},function(e,t,n){if(n.type!=="implementation_engine_initialized")return!0;var r=h(_),a=n.type;return o("VideoPlayerImplementationStateMachineHostCallQueue").flushHostCallQueue({engineExtrasAPI:u,machine:S,reason:a,state:t,videoElementAPI:r}),!1},function(e,t,n){if(n.type!=="dom_event_ended")return!0;var r=t.controlledState;return(r.loopCount>0&&r.loopCurrent<r.loopCount||r.loopCount===-1)&&S.dispatch({payload:{reason:"loop_initiated"},type:"controller_play_requested"}),!1},function(e,t,n){if(n.type!=="controller_pause_requested")return!0;var r=t.controlledState.playbackState;return r!=="paused"||y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_pause"}),!1},function(e,t,n){if(n.type!=="controller_play_requested")return!0;var r=t.controlledState.playbackState;return r!=="stalling"||y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_play"}),!1},function(e,t,n){if(n.type!=="controller_seek_requested")return!0;var r=t.controlledState,a=r.seeking,i=r.seekTargetPosition;return a&&i!=null&&y({payload:{currentTime:i,hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_set_current_time"}),!1},function(e,t,n){if(n.type!=="controller_muted_requested")return!0;var r=t.controlledState.muted;return r!==n.payload.muted||y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),muted:r,reason:n.type},type:"host_call_set_muted"}),!1},function(e,t,n){return n.type!=="controller_scrub_begin_requested"?!0:(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:n.type},type:"host_call_set_playback_rate"}),!1)},function(e,t,n){if(n.type!=="controller_scrub_end_requested")return!0;var r=t.controlledState,a=r.seeking,i=r.seekTargetPosition,l=r.targetPlaybackRate;return a&&i!=null?(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:l,reason:n.type+":seek"},type:"host_call_set_playback_rate"}),y({payload:{currentTime:i,hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type+":seek"},type:"host_call_set_current_time"})):y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:l,reason:n.type+":cancel"},type:"host_call_set_playback_rate"}),!1},function(e,t,n){return n.type!=="buffering_begin_requested"?!0:(n.payload.disableZeroPlaybackRate===!0||y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:0,reason:n.type},type:"host_call_set_playback_rate"}),!1)},function(e,t,n){return n.type!=="controller_set_playback_rate"?!0:(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:n.payload.playbackRate,reason:n.type},type:"host_call_set_playback_rate"}),!1)},function(e,t,n){return n.type!=="buffering_end_requested"?!0:(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),playbackRate:t.controlledState.targetPlaybackRate,reason:n.type},type:"host_call_set_playback_rate"}),!1)},function(e,t,n){return n.type!=="controller_volume_requested"?!0:(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type,volume:t.controlledState.volume},type:"host_call_set_volume"}),!1)},function(e,t,n){return n.type!=="controller_video_variant_requested"?!0:(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type,selectedVideoVariant:t.controlledState.selectedVideoVariant},type:"host_call_set_video_variant"}),!1)},function(e,t,n){return n.type!=="controller_quality_requested"?!0:(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type,selectedVideoQuality:t.controlledState.selectedVideoQuality},type:"host_call_set_video_quality"}),!1)},function(e,t,n){return n.type==="controller_set_latency_level_requested"||n.type==="implementation_set_latency_level_requested"?(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),latencyLevel:n.payload.latencyLevel,reason:n.type},type:"host_call_set_latency_level"}),!1):!0},function(e,t,n){if(!(n.type==="dom_event_timeupdate"||n.type==="captions_loaded"))return!0;var r=i.current,a=t.controlledState.captionsVisible,l=_.current,s=l?l.getPlayheadPosition():0;if(o("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&t.controlledState.isLiveRewindActive){var c,d=t.controlledState.seekableRanges,m=d!=null&&(c=d.end(d.length()-1))!=null?c:0;s>=m&&S.dispatch({payload:{isLiveRewindActive:!1},type:"controller_set_is_live_rewind_active_requested"})}if(!u.getRepresentationCaptionsExpectedFromManifest()&&r&&a&&t.controlledState.captionsLoaded){var p=r.handleTimeUpdate(s),g=r.getCaptionFormat(),h=e.controlledState.activeCaptions,y=e.controlledState.captionFormat;g!==y&&S.dispatch({payload:{captionFormat:g},type:"controller_set_caption_format_requested"}),C(h,p)&&S.dispatch({payload:{activeCaptions:p,captionsLocale:null},type:"controller_set_active_captions_requested"})}var b=f.current;return b!=null&&b.onUpdateStatus({position:s}),!1},function(e,t,n){if(n.type!=="cea608_bytes_received")return!0;var r=i.current;if(r){var o=n.payload,a=o.timescale,l=o.videoBytes;r.handleCea608BytesReceived({timescale:a,videoBytes:l})}return!1},function(e,t,n){if(n.type!=="controller_set_captions_url_requested")return!0;var r=i.current;if(r){var o=n.payload.captionsUrl;r.updateCaptionsUrl(o)}return!1},function(e,t,n){return n.type!=="controller_set_is_live_rewind_active_requested"?!0:(u.setEnableLiveheadCatchup(!n.payload.isLiveRewindActive),o("PlaybackSpeedExperiments").enableCometPlaybackSpeedControl()&&!n.payload.isLiveRewindActive&&S.dispatch({payload:{playbackRate:1},type:"controller_set_playback_rate"}),!1)},function(e,t,n){return n.type!=="controller_picture_in_picture_requested"?!0:(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_picture_in_picture"}),!1)},function(e,t,n){return n.type!=="controller_picture_in_picture_exit_requested"?!0:(y({payload:{hostCallID:o("VideoPlayerImplementationStateMachineHostCallQueue").makeHostCallID(),reason:n.type},type:"host_call_exit_picture_in_picture"}),!1)}],S=o("VideoPlayerImplementationStateMachine").createVideoPlayerImplementationStateMachineWithStateTransitionHandlers({collectUncontrolledState:function(){var e=_.current;return o("VideoPlayerImplementationStateMachineStateUncontrolledState").createVideoPlayerImplementationStateMachineStateUncontrolledState({engineExtrasAPI:u,fullscreenControllerRef:d,videoElementAPI:e,videoLiveTraceRef:f,videoPlayerPassiveViewabilityInfo:g})},debugLogId:l,initialState:o("VideoPlayerImplementationStateMachineState").createVideoPlayerImplementationStateMachineInitialState({alwaysShowCaptions:t,areCaptionsAutogenerated:n,captionDisplayStyle:a,dimensions:s,isAbrEnabled:c.isAbrEnabled,playerVersion:c.playerVersion,streamingFormat:c.streamingFormat,videoPlayerPassiveViewabilityInfo:g}),onFatalError:m,stateTransitionHandlers:v});return S}function C(e,t){var n,r;if(e===null&&t===null)return!1;if(e===null||t===null)return!0;var o=(n=t.rows)!=null?n:[],a=(r=e.rows)!=null?r:[];return a.length!==o.length||a.some(function(e,t){return e!==o[t]})}function b(e,t,n,r){e!==t.current&&(n.current&&(n.current.remove(),n.current=null),t.current=e),t.current&&!n.current&&(n.current=t.current.subscribe(function(){r.dispatch({type:"notify_fullscreen_changed"})}))}function v(e,t,n){t.current&&(t.current.remove(),t.current=null),e!=null&&(t.current=e.subscribe(function(){n.dispatch({type:"notify_viewability_changed"})}))}function S(e){var t=e.coreVideoPlayerMetaData,n=e.engineMetadata,r=e.state,o=r.controlledState,a=o.activeCaptions,i=o.activeEmsgBoxes,l=o.captionDisplayStyle,s=o.captionsLoaded,u=o.captionsVisible,c=o.dimensions,d=o.domEventsLatestPerfMs,m=o.error,p=o.hasPlayEverBeenRequested,_=o.implementationSeekSourcePosition,f=o.inbandCaptionsAutogenerated,g=o.isDesktopPictureInPicture,h=o.isLiveRewindActive,y=o.lastMuteReason,C=o.lastPauseReason,b=o.lastPlayedTimeMs,v=o.lastPlayReason,S=o.latencyLevel,R=o.loopCount,L=o.loopCurrent,E=o.muted,k=o.playbackState,I=o.scrubbing,T=o.seekableRanges,D=o.seeking,x=o.seekTargetPosition,$=o.selectedVideoQuality,P=o.streamingFormat,N=o.streamInterrupted,M=o.targetPlaybackRate,w=o.ullIneligibilityReason,A=o.volume,F=o.watchTimeMs,O=r.uncontrolledState,B=O.availableAudioTracks,W=O.availableQualities,q=O.availableVideoTracks,U=O.currentPlayingAudioTrackID,V=O.currentPlayingVideoQuality,H=O.currentPlayingVideoTrackID,G=O.isDRM,z=O.isFullscreen,j=O.isLiveRewindAvailable,K=O.targetAudioTrack,Q=O.targetVideoQuality,X=O.videoElementDuration,Y=O.videoElementLastBufferEndPosition,J=O.videoProjection,Z=O.videoRepresentationID,ee=k==="ended",te=k==="paused"||ee,ne=k==="playing",re=k==="inPlayStalling",oe=k==="stalling"||re,ae={activeCaptions:a,activeEmsgBoxes:i,availableAudioTracks:B,availableVideoQualities:W,availableVideoTracks:q,bufferEnd:Y!=null?Y:0,captionDisplayStyle:l,captionsLoaded:s,captionsVisible:u,currentAudioTrackID:U!=null?U:null,currentVideoQuality:V!=null?V:"",currentVideoTrackID:H!=null?H:null,domEventsLatestPerfMs:d,duration:X!=null?X:0,ended:ee,error:m,hasPlayEverBeenRequested:p,inbandCaptionsAutogenerated:f,inPlayStalling:re,internal_coreVideoPlayerMetaData:t,isAbrEnabled:n.isAbrEnabled,isDesktopPictureInPicture:g!=null?g:!1,isDRM:G!=null?G:null,isFullscreen:z!=null?z:!1,isLiveRewindActive:h,isLiveRewindAvailable:j!=null?j:!1,lastMuteReason:y,lastPauseReason:C,lastPlayedTimeMs:b,lastPlayReason:v,latencyLevel:S,loopCount:R,loopCurrent:L,muted:E,paused:te,playerInstanceKey:n.playerInstanceKey,playerVersion:r.playerVersion,playerViewportDimensions:c,playing:ne,scrubbing:I,seekableRanges:T,seeking:D,seekSourcePosition:_,seekTargetPosition:x,selectedVideoQuality:$,stalling:oe,streamingFormat:P,streamInterrupted:N,targetAudioTrack:K,targetPlaybackRate:M,targetVideoQuality:Q,ullIneligibilityReason:w,videoFBID:t.videoFBID,videoPixelsAspectRatio:t.videoPixelsAspectRatio,videoProjection:J,videoRepresentationID:Z,volume:A,watchTimeMs:F};return ae}var R=r("emptyFunction"),L=!1;r("gkx")("13250")&&(L=!0,R=function(t,n){var e=t.debugLogId,r=t.engineMetadata;try{for(var o,a=arguments.length,i=new Array(a>2?a-2:0),l=2;l<a;l++)i[l-2]=arguments[l];(o=window.console).info.apply(o,["["+e+"][VideoPlayerEngine:"+r.playerVersion+"]"+n].concat(i))}catch(e){}});function E(t){var a,i,l=t.createDebugAPI,s=t.createVideoPlayerError,u=t.destroyEngineParts,c=t.engineCreateArgs,d=t.engineExtrasAPI,m=t.engineMetadata,p=t.handleVideoElementChanged,_=t.handleVideoInfoChange,f=c.checkInDOM,h=c.handleFatalError,C=c.initialProps,E=c.setExposedStateInReact,k=C.loggingMetaData.instanceKey,I="#"+((e||(e=r("performanceNow")))()*1e3).toFixed(0),T=k+";vid="+C.coreVideoPlayerMetaData.videoFBID+";"+I,D=r("emptyFunction");if(L){var x={debugLogId:T,engineMetadata:m};D=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return R.apply(void 0,[x,t].concat(n))},D("[creating]",C)}var $=C.coreVideoPlayerMetaData,P=$.broadcastId,N=$.isLiveStreaming,M=$.isLiveTraceEnabled,w={current:N&&M&&P!=null?new(r("VideoLiveTrace"))(P,k,r("CurrentUser").getAccountID()):null},A=C.coreVideoPlayerMetaData.loggingConfig,F=A.loggingToVPLEnabled==null?!0:A.loggingToVPLEnabled,O=o("VideoPlayerImplementationStateMachineLogger").createVideoPlayerImplementationStateMachineLogger({debugLogId:T,initialCoreVideoPlayerMetaData:C.coreVideoPlayerMetaData,initialLoggingMetaData:C.loggingMetaData,videoLiveTraceRef:w}),B=new(r("VideoPlayerBanzaiLogFlusher"))(T,O),W=A.loggingToSNAPLEnabled==null?r("gkx")("8610"):A.loggingToSNAPLEnabled,q=A.loggingToSNAPLCreateMetadataProvider,U=W?o("MediaPlaybackCompoundEventStateMachineLogger").createMediaPlaybackCompoundEventStateMachineLogger({debugLogId:T,initialCoreVideoPlayerMetaData:C.coreVideoPlayerMetaData,initialLoggingMetaData:C.loggingMetaData,metadataProvider:q==null?void 0:q()}):null,V=U!=null?new(r("MediaPlaybackLogFlusher"))(T,U):null,H={current:C.coreVideoPlayerMetaData},G={current:(a=C.fullscreenController)!=null?a:null},z={current:null},j=o("useConcurrentAutoplayManagementAPI").createConcurrentAutoplayManagementAPI(),K=[],Q=function(){K.forEach(function(e){e()}),!F||A.disableLogging===!0?B.discardLogsWithoutFlushing():B.flushLogs(),!W||A.disableLogging===!0?V==null||V.discardLogsWithoutFlushing():V==null||V.flushLogs()},X={current:C.onExposedStateChanged},Y={current:null},J=null,Z={current:{inbandCaptionsAutogeneratedFromManifest:!1,inbandCaptionsExpectedFromManifest:!1,inbandCaptionsExpectedFromProps:C.coreVideoPlayerMetaData.inbandCaptionsExpected,representationCaptionsExpectedFromManifest:!1,sideLoadCaptionsExpectedFromProps:C.coreVideoPlayerMetaData.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(i=C.coreVideoPlayerMetaData.sideLoadCaptionsUrl)!=null?i:null}},ee={current:null},te={current:null},ne=new(r("SubscriptionsHandler")),re=new(r("SubscriptionsHandler")),oe="before_mounted";function ae(e){return r("gkx")("24349")?e.controlledState.mountState==="mounted_onscreen"||e.controlledState.mountState==="mounted_offscreen":oe==="mounted"}var ie={current:null},le=function(t){var e=S({coreVideoPlayerMetaData:H.current,engineMetadata:m,state:t});return e},se={current:null},ue={current:null},ce=function(t){if(ae(t)){if(t===se.current)return;var e=le(t);if(ue.current!=null&&r("deepEquals")(ue.current,e))return;se.current=t,ue.current=e,E(e);var n=X.current;n&&n({implementationController:Pe,implementationExposedState:e})}},de=function(t,n,r){O.handleStateMachine(t,n,r),U==null||U.handleStateMachine(t,n,r),ce(n),Q()},me=function(t,n){},pe=function(t){me(t,"state_machine_fatal_error")},_e=y({alwaysShowCaptions:!!C.coreVideoPlayerMetaData.alwaysShowCaptions,areCaptionsAutogenerated:!!C.coreVideoPlayerMetaData.areCaptionsAutogenerated,captionDisplayStyle:C.coreVideoPlayerMetaData.captionDisplayStyle,captionsControllerRef:z,debugLogId:T,dimensions:C.dimensions,engineExtrasAPI:d,engineMetadata:m,fullscreenControllerRef:G,handleFatalError:pe,handleStateMachine:de,videoElementAPIRef:ie,videoLiveTraceRef:w,videoPlayerPassiveViewabilityInfo:C.videoPlayerPassiveViewabilityInfo}),fe=!1,ge=function(t){var e=Y.current!=null,n=ie.current!=null;ne.release(),r("gkx")("18183")&&ne.engage(),_e.dispatch({payload:{reason:t,videoElementAPIExisted:n,videoElementExisted:e},type:"implementation_engine_destroy_requested"});var o=["destroyEngine("+t+")"];try{if(fe)L&&D("[destroyEngineParts] skip callChain:"+o.join(":"));else{fe=!0,L&&D("[destroyEngineParts] begin callChain:"+o.join(":"));try{u(o)}finally{L&&D("[destroyEngineParts] end callChain:"+o.join(":"))}}}catch(o){var a=r("getErrorSafe")(o);try{var i=r("FBLogger")("comet_video_player").catching(a),l=C.coreVideoPlayerMetaData.videoFBID;l!=null&&(i=i.addMetadata("COMET_VIDEO","VIDEO_ID",l)),i=i.addMetadata("COMET_VIDEO","VIDEO_IMPLEMENTATION_DEBUG_DATA",JSON.stringify({destroy_reason:t,player_instance_key:k,player_version:m.playerVersion,video_element_api_existed:n,video_element_existed:e})),i.warn("Error thrown by destroyEngineParts: %s",a.message)}catch(e){}}var s=z.current;s!=null&&(_e.getCurrentState().controlledState.captionsLoaded&&_e.dispatch({type:"captions_unloaded"}),z.current=null,s.destroy()),b(null,G,ee,_e),v(null,te,_e),_e.dispatch({payload:{reason:t,videoElementAPIExisted:n,videoElementExisted:e},type:"implementation_engine_destroyed"}),e&&(r("gkx")("17338")||r("gkx")("18183"))&&Le(null,["destroy",t])};me=function(t,n){var e=s(t,n);_e.dispatch({payload:{fatalError:e},type:"implementation_fatal_error"}),ge("implementation_fatal_error"),h(e)};function he(e){return e.sideLoadCaptionsExpectedFromProps||e.sideLoadCaptionsUrlFromProps!=null}function ye(e){var t;return e.inbandCaptionsExpectedFromProps&&((t=e.inbandCaptionsExpectedFromManifest)!=null?t:!1)}function Ce(e){var t;return(t=e.inbandCaptionsAutogeneratedFromManifest)!=null?t:!1}var be=function(t){var e=he(t),n=ye(t),r=Ce(t),a=z.current;r!==Ce(Z.current)&&_e.dispatch({payload:{inbandCaptionsAutogenerated:r},type:"inband_captions_autogenerated_changed"}),a!=null?n!==ye(Z.current)&&(a.updateInbandCaptionsExpected(n),!n&&_e.getCurrentState().controlledState.captionsLoaded&&_e.dispatch({type:"captions_unloaded"})):(e||n)&&a==null&&(z.current=o("VideoPlayerCaptionsController").createCaptionsController({captionsUrl:e?t.sideLoadCaptionsUrlFromProps:null,inbandCaptionsExpected:n,onCaptionsLoaded:function(){_e.dispatch({type:"captions_loaded"})}})),Z.current=t},ve=function(t){d!=null&&t&&t.width>0&&t.height>0&&(d.setDimensions(t),_e.dispatch({payload:{dimensions:{height:t.height,width:t.width}},type:"player_dimensions_changed"}))},Se=function(t){t!==_e.getCurrentState().controlledState.loopCount&&_e.dispatch({payload:{loopCount:t},type:"loop_count_change_requested"})},Re=function(t){L&&D("[cleanupVideoElement]"),"srcObject"in t&&(t.srcObject=null),t.removeAttribute("src"),re.release(),re.engage()},Le=function(t,a){if(Y.current!==t){L&&D("[handleVideoElement] callChain:"+a.join(":"),{videoElementMaybe:t}),t!=null&&Y.current!=null&&Y.current!==t&&r("FBLogger")("comet_video_player").mustfix("The video element was recreated"),J!=null&&J();var e=Y.current;if(e&&Re(e),Y.current=t,r("gkx")("18183")&&(t?(ie.current==null||t!==ie.current.getUnderlyingVideoElement())&&(ie.current=o("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(t)):ie.current=null),n("cr:506")!=null&&t!=null&&(J=n("cr:506")(t,T)),t!=null){re.addSubscriptions(r("CometEventListener").listen(t,"enterpictureinpicture",function(){var e=o("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp();e&&_e.dispatch({payload:{isInPictureInPictureMode:!0},type:"controller_set_picture_in_picture_state_requested"})}),r("CometEventListener").listen(t,"leavepictureinpicture",function(){var e=o("CometVideoPictureInPictureManagerContext").isInPictureInPictureExp();e&&_e.dispatch({payload:{isInPictureInPictureMode:!1},type:"controller_set_picture_in_picture_state_requested"})})),_e.dispatch({type:"implementation_video_node_mounted"});var i=[].concat(a,["handleVideoElement(non-null)"]);try{L&&D("[handleVideoElementChanged(non-null)] begin callChain:"+i.join(":"),{videoElementMaybe:t}),p(t,i)}finally{L&&D("[handleVideoElementChanged(non-null)] end callChain:"+i.join(":"),{videoElementMaybe:t})}}else{_e.dispatch({type:"implementation_video_node_unmounted"});var l=[].concat(a,["handleVideoElement(null)"]);try{L&&D("[handleVideoElementChanged(null)] begin callChain:"+l.join(":"),{videoElementMaybe:t}),p(null,l)}finally{L&&D("[handleVideoElementChanged(null)] end callChain:"+l.join(":"),{videoElementMaybe:t})}}}},Ee=C.loggingMetaData.instanceKey,ke=function(t){var e,n;if(X.current=t.onExposedStateChanged,H.current=t.coreVideoPlayerMetaData,!!ae(_e.getCurrentState())){if(L&&(t.loggingMetaData.instanceKey!==Ee&&(D("[handleReactPropsChanged][WARNING] instanceKey changed from "+Ee+" to "+t.loggingMetaData.instanceKey),Ee=t.loggingMetaData.instanceKey),D("[handleReactPropsChanged]",t)),b((e=t.fullscreenController)!=null?e:null,G,ee,_e),v((n=t.videoPlayerPassiveViewabilityInfo)!=null?n:null,te,_e),!_(t)){var r,o,a={inbandCaptionsAutogeneratedFromManifest:Z.current.inbandCaptionsAutogeneratedFromManifest,inbandCaptionsExpectedFromManifest:Z.current.inbandCaptionsExpectedFromManifest,inbandCaptionsExpectedFromProps:t.coreVideoPlayerMetaData.inbandCaptionsExpected,representationCaptionsExpectedFromManifest:Z.current.representationCaptionsExpectedFromManifest,sideLoadCaptionsExpectedFromProps:t.coreVideoPlayerMetaData.sideLoadCaptionsExpected,sideLoadCaptionsUrlFromProps:(r=t.coreVideoPlayerMetaData.sideLoadCaptionsUrl)!=null?r:null};be(a),ve(t.dimensions),Se((o=t.coreVideoPlayerMetaData.loopCount)!=null?o:0)}_e.dispatch({payload:{coreVideoPlayerMetaData:t.coreVideoPlayerMetaData,loggingMetaData:t.loggingMetaData},type:"notify_logging_metadata_change"})}},Ie=null,Te=function(){var e=_e.getCurrentState().controlledState.mountState;switch(e){case"before_mounted":{ne.addSubscriptions(o("RunComet").onUnload(function(){ge("page_unload")})),_e.dispatch({type:"implementation_mounted"}),p(Y.current,["handleReactEffectInit(before_mounted)"]);break}case"mounted_onscreen":break;case"mounted_offscreen":{r("clearTimeout")(Ie),Ie=null,_e.dispatch({type:"implementation_onscreen"});break}case"unmounted":break;default:}},De=function(){var e=function(){if(r("clearTimeout")(Ie),Ie=null,_e.getCurrentState().controlledState.mountState!=="unmounted"){var t=f();t?Ie=r("setTimeout")(e,1e3):(_e.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"}),ge("implementation_unmounted:react_effect_cleanup"))}},t=_e.getCurrentState().controlledState.mountState;switch(t){case"before_mounted":break;case"mounted_onscreen":{_e.dispatch({type:"implementation_offscreen"}),e();break}case"mounted_offscreen":{e();break}case"unmounted":break}},xe=function(){ae(_e.getCurrentState())||(oe="mounted",ne.addSubscriptions(o("RunComet").onUnload(function(){ge("page_unload")})),_e.dispatch({type:"implementation_mounted"}),p(Y.current,["handleReactMount"]))},$e=function(){ae(_e.getCurrentState())&&(oe="unmounted",_e.dispatch({payload:{reason:"react_effect_cleanup"},type:"implementation_unmounted"}),ge("implementation_unmounted:react_effect_cleanup"))},Pe=g({concurrentAutoplayManagementAPI:j,createExposedState:le,debugAPI:l({getVideoElementAPI:function(){return ie.current},loggerToVPL:O}),fullscreenControllerRef:G,loggerToSNAPL:U,loggerToVPL:O,machine:_e,subscribers:K,videoElementAPIRef:ie,videoPlayerPassiveViewabilityInfo:C.videoPlayerPassiveViewabilityInfo}),Ne=o("VideoPlayerImplementationStateMachine").createReactVideoElementCallbacksForStateMachine(_e,Le),Me=le(_e.getInitialState()),we=L?function(e,t){return function(){D("["+t+"] begin");try{e()}finally{D("["+t+"] end")}}}:function(e,t){return e},Ae={handleOnBeforeUnload:function(){C.coreVideoPlayerMetaData.loggingConfig.enablePauseAndFlushOnBeforeUnload===!0&&(U==null||U.logPausedOnBeforeUnload(_e.getCurrentState()),V==null||V.flushLogs(!0))},handleReactEffectCleanup:r("gkx")("24349")?we(De,"handleReactEffectCleanup"):we($e,"handleReactEffectCleanup->handleReactUnmount"),handleReactEffectInit:r("gkx")("24349")?we(Te,"handleReactEffectInit"):we(xe,"handleReactEffectInit->handleReactMount"),handleReactPropsChanged:ke,implementationController:Pe,initialExposedState:Me,logFlusherToVPL:B,machine:_e,notifySubscribers:Q,videoElementCallbacks:Ne,videoElementRefCallback:function(t){t==null&&r("gkx")("17338")||Le(t,["videoElementRefCallback"])}};return L&&D("[created]",{engine:Ae,machine:_e,videoElementRef:Y}),{debugLog:D,engine:Ae,getCaptionsInfo:function(){return Z.current},getVideoElement:function(){return Y.current},getVideoLiveTrace:function(){return w.current},handleCaptionsInfoChange:be,handleFatalImplementationError:me,loggerToVPL:O,machine:_e,videoElementAPIRef:ie}}function k(e,t){var n,o,a=r("err").apply(void 0,[e.errorName+": "+e.errorMessageFormat].concat(e.errorMessageParams));a.name=e.errorName,a.errorName=e.errorName,a.type="error",e.stack!=null&&e.stack!==""&&(a.stack=e.stack);var i=new(r("ErrorMetadata"));i.addEntries(["COMET_VIDEO","ERROR_LOCATION",e.errorLocation],["COMET_VIDEO","ERROR_CODE",(n=e.errorCode)!=null?n:""],["COMET_VIDEO","ERROR_URL",(o=e.url)!=null?o:""]),t!=null&&i.addEntry("COMET_VIDEO","VIDEO_ID",t);var l=e.originalError;return l!=null&&(typeof l=="string"?i.addEntry("COMET_VIDEO","ORIGINAL_ERROR",l):l instanceof Error&&l.message!=null&&i.addEntry("COMET_VIDEO","ORIGINAL_ERROR",l.message)),a.metadata=i,a}function I(e,t){var a,i=p(null),l=i[0],s=i[1],c=p(null),_=c[0],f=c[1],g=e.coreVideoPlayerMetaData.wrapVideoPixels_EXPERIMENTAL,h=m(e),y=m(t),C=m(null),b=r("useStable")(function(){return y.current({checkInDOM:function(){var e=document.body,t=C.current;return e!=null&&t!=null&&e.contains(t)},handleFatalError:function(t){},initialProps:h.current,setExposedStateInReact:s})}),v=l!=null?l:b.initialExposedState,S=(a=v.error)!=null?a:_;if(S!=null){var R=e.coreVideoPlayerMetaData.VideoPlayerShakaPerformanceLoggerClass;throw R&&R.flushQueuedLogs(),k(S,h.current.coreVideoPlayerMetaData.videoFBID)}d(function(){return b.handleReactEffectInit(),function(){b.handleReactEffectCleanup()}},[b]),d(function(){var e=o("RunComet").onBeforeUnload(function(){b.handleOnBeforeUnload()});return function(){e.remove()}},[b]);var L=m(null);d(function(){e!==L.current&&b.handleReactPropsChanged(e),L.current=e},void 0);var E=r("useSEOLoggedOutWebCrawler")(),I=e.coreVideoPlayerMetaData.renderVideoPixelsFit,T=I?I(v):null,D=E?u.jsx(r("VideoPlayerImplementationReactVideoElement.react"),{alt:e.coreVideoPlayerMetaData.alt,audioOnly:e.coreVideoPlayerMetaData.audioOnly,poster:e.coreVideoPlayerMetaData.poster,seoSrc:e.coreVideoPlayerMetaData.seoWebCrawlerLookasideUrl,seoWebCrawlerVideoTracks:e.coreVideoPlayerMetaData.seoWebCrawlerVideoTracks,videoElementCallbacks:null,videoElementHDRPatchEnabled_EXPERIMENTAL:e.coreVideoPlayerMetaData.videoElementHDRPatchEnabled_EXPERIMENTAL,videoElementPreloadDisabled:e.coreVideoPlayerMetaData.preloadForProgressiveDisabled,videoElementRefCallback:null,videoPixelsFit:T}):u.jsx(r("VideoPlayerImplementationReactVideoElement.react"),{alt:e.coreVideoPlayerMetaData.alt,audioOnly:e.coreVideoPlayerMetaData.audioOnly,isSpatial:e.coreVideoPlayerMetaData.isSpatial,poster:e.coreVideoPlayerMetaData.poster,videoElementCallbacks:b.videoElementCallbacks,videoElementHDRPatchEnabled_EXPERIMENTAL:e.coreVideoPlayerMetaData.videoElementHDRPatchEnabled_EXPERIMENTAL,videoElementPreloadDisabled:e.coreVideoPlayerMetaData.preloadForProgressiveDisabled,videoElementRefCallback:b.videoElementRefCallback,videoPixelsFit:T}),x=e.renderWithExposedState({implementationController:b.implementationController,implementationExposedState:v}),$=u.jsxs(u.Fragment,{children:[r("gkx")("24349")?u.jsx("div",{ref:C,style:{display:"none"}}):null,v.isDRM===!0?n("cr:2336")?u.jsx(n("cr:2336"),{controller:b.implementationController}):n("cr:4596")?u.jsx(n("cr:4596"),{controller:b.implementationController}):null:null,g?g(D):D,n("cr:355")!=null&&v.playerVersion==="comet_nextgendash"?u.jsx(n("cr:355"),{}):null,u.jsx(r("VideoPlayerVideoPixelsFitContext").Provider,{value:T,children:x})]});return{engine:b,exposedState:v,reactVideoComponents:x,reactVideoFrame:D,reactVideoFrameAndComponents:$}}l.internal_createVideoPlayerImplementationControllerImpl=f,l.ensureVideoElementAPI=h,l.internal_createVideoPlayerImplementationEngineStateMachineWithEffects=y,l.internal_createVideoPlayerImplementationExposedStateFromStateMachineState=S,l.createVideoPlayerImplementationEngine=E,l.internal_makeExpandedErrorFromVideoPlayerError=k,l.useVideoPlayerImplementationEngine=I}),98);
__d("VideoPlayerProgressiveImplementationEngineExtrasAPI",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e!==null&&e.indexOf(".m3u8")!==-1}function s(t){var n=t.getPlayingVideoInfo,o=t.setUserSelectedVideoQuality;function a(){var t=n(),r="progressive_SD",o="progressive_HD";return t==null||e(t.hdSrc)||e(t.sdSrc)?null:t.hdSrc!=null&&t.playingSrc===t.hdSrc?o:t.sdSrc!=null&&t.playingSrc===t.sdSrc?r:null}return{getApproximateFBLSToPlayerDisplayLatency:function(){return null},getAvailableAudioTracks:function(){var e,t;return(e=(t=n())==null?void 0:t.availableAudioTracks)!=null?e:[]},getAvailableVideoQualities:function(){var e,t;return(e=(t=n())==null?void 0:t.availableQualities)!=null?e:[]},getAvailableVideoTracks:function(){var e,t;return(e=(t=n())==null?void 0:t.availableVideoTracks)!=null?e:[]},getCurrentAudioRepresentation:function(){return null},getCurrentPlayingAudioRepresentationID:function(){return r("gkx")("440")?a():null},getCurrentPlayingAudioTrackID:function(){var e,t;return(e=(t=n())==null?void 0:t.playingAudioTrackID)!=null?e:null},getCurrentPlayingVideoQuality:function(){var e,t;return(e=(t=n())==null?void 0:t.targetQuality)!=null?e:""},getCurrentPlayingVideoRepresentationID:function(){return r("gkx")("440")?a():"oep_hd"},getCurrentTargetVideoQuality:function(){var e,t;return(e=(t=n())==null?void 0:t.targetQuality)!=null?e:""},getCurrentVideoRepresentation:function(){return null},getEstimatedBandwidth:function(){return null},getInbandCaptionsAutogeneratedFromManifest:function(){return!1},getInbandCaptionsExpectedFromManifest:function(){return!1},getManifestIdentifier:function(){return null},getMpdValidationErrors:function(){return null},getPerfLoggerProvider:function(){return null},getRepresentationCaptionsExpectedFromManifest:function(){return!1},getStreamType:function(){var t=n();return t==null?"progressive":e(t.hdSrc)||e(t.sdSrc)?"hls":"progressive"},getTargetAudioTrack:function(){return null},getUserSelectedVideoQuality:function(){var e,t;return(e=(t=n())==null?void 0:t.selectedQuality)!=null?e:"notselected"},getUserSelectedVideoVariant:function(){return null},getVideoProjectionType:function(){return"cubemap"},getVideoRepresentations:function(){return null},isDrm:function(){var e;return((e=n())==null?void 0:e.graphQLVideoDRMInfo)!=null},isFBIsLiveTemplated:function(){return!1},isFBMS:function(){return!1},isFBWasLive:function(){return!1},isLiveRewindAvailable:function(){return!1},isMixedCodecManifest:function(){return!1},isPredictiveDash:function(){return!1},setDimensions:function(t){},setEnableLiveheadCatchup:function(){},setLatencyLevel:function(){},setUserSelectedVideoQuality:o,setUserSelectedVideoVariant:function(t){}}}l.createVideoPlayerProgressiveImplementationEngineExtrasAPI=s}),98);
__d("VideoPlayerProgressiveImplementationEngineUtils",[],(function(t,n,r,o,a,i){"use strict";var e="hd",l="sd";function s(t,n,r){return t?n!=null?e:l:r!=null?l:n!=null?e:l}function u(t){var n=[];t.sdSrc!=null&&n.push(l),t.hdSrc!=null&&n.push(e);var r=[],o=[],a=s(t.hdSrcPreferred,t.hdSrc,t.sdSrc);return babelHelpers.extends({},t,{availableAudioTracks:r,availableQualities:n,availableVideoTracks:o,playingAudioTrackID:null,playingQuality:null,playingSrc:null,selectedQuality:a,targetQuality:a,targetSrc:null})}function c(t,n){var r=t.hdSrc,o=t.sdSrc,a,i;return n==="notselected"||n==="auto"?(a=o!=null?l:r!=null?e:l,i=o!=null?o:r!=null?r:null):n===e&&r!=null?(a=e,i=r):n===l&&o!=null?(a=l,i=o):(a=l,i=null),i===""&&(i=null),babelHelpers.extends({},t,{selectedQuality:n,targetQuality:a,targetSrc:i})}function d(e,t,n){return babelHelpers.extends({},e,{playingQuality:t,playingSrc:n})}i.createResolvedVideoInfoProgressive=u,i.updatePlayingVideoInfoProgressiveWithUserSelectedQuality=c,i.updatePlayingVideoInfoProgressiveWithCurrentPlayingQuality=d}),66);
__d("videoUrlUtils",[],(function(t,n,r,o,a,i){"use strict";var e=-2147483648,l=~e,s=e+1;function u(e){var t=e|0;return Math.max(s,Math.min(t,l))}function c(e){var t=Number.parseInt(e,16);return Number.isFinite(t)?new Date(u(t)*1e3):null}function d(){return u(Date.now()/1e3)}var m={OE:"oe"};function p(e){var t=e instanceof URL?e.searchParams:new URL(e).searchParams,n=t.get(m.OE),r=n==null?void 0:c(n);return{expirationDate:r}}function _(e){var t=p(e),n=t.expirationDate;return n!=null&&n<=new Date(d()*1e3)}i.DEFAULT_UNIXTIME=e,i.MAX_INT=l,i.parseCdnUrlParams=p,i.isCdnUrlExpired=_}),66);
__d("VideoPlayerProgressiveImplementationEngine",["FBLogger","Promise","UserAgent","VideoPlayerImplementationEngineAPI","VideoPlayerImplementationEngineVideoElementAPI","VideoPlayerImplementationErrors","VideoPlayerODS","VideoPlayerProgressiveImplementationEngineExtrasAPI","VideoPlayerProgressiveImplementationEngineUtils","cr:1607","cr:1680308","err","getErrorNameFromMediaErrorCode","getErrorSafe","getMoreGranularErrorNameFromHTMLVideoElementErrorMessage","gkx","promiseDone","videoUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){var r=typeof e=="object"&&e!=null&&typeof e.name=="string"?e.name:null;return o("VideoPlayerImplementationErrors").createVideoPlayerErrorFromGenericError(["PROGRESSIVE_JAVASCRIPT_NATIVE",r].filter(Boolean).join("/"),e,t,n)}function u(t){var a=t.initialProps,i={current:null},l={current:null},u={current:null},m={current:null},p=a.loggingMetaData.instanceKey,_=function(){var t=R(),i=l.current;if(!(t==null||i==null)){t.addEventListener("error",function(o){var i=t.error,l=i==null?void 0:i.code,s=r("getErrorNameFromMediaErrorCode")(l),u=i==null?void 0:i.message,c=u==null||u===""?"Unknown media error":u,d=[],m=u!=null?r("getMoreGranularErrorNameFromHTMLVideoElementErrorMessage")(u):null,p=t.src;if(!i&&t.poster!=null&&t.poster!==""&&(c+="(possible_poster_load_failure)"),p!==""){var _=null;(e||(e=n("Promise"))).resolve().then(function(){return a.coreVideoPlayerMetaData.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING==="use-credentials"&&r("gkx")("19391")?window.fetch(p,{credentials:"include",method:"GET"}):window.fetch(p)}).then(function(e){var t,n=e.status,r=(t=e.headers.get("Content-Type"))!=null?t:"unknown";if(c=c+". Fetched video content with Status:"+n+" Content-Type:"+r,_="URL_RESPONSE_HTTP_"+n,n<200||n>=300)return e.text().then(function(e){d.push(e.length.toString()),c+=" Body:%s:"+e.substr(0,200)+(e.length>200?"...":"")},function(){})}).catch(function(e){typeof e=="object"&&e!=null&&typeof e.name=="string"&&typeof e.message=="string"?(_=_!=null?_:"URL_RESPONSE_FETCH_FAILED/"+e.name,c=c+". Failed fetching video content with error: "+e.name+" "+e.message):(_=_!=null?_:"URL_RESPONSE_FETCH_FAILED",c=c+". Failed fetching video content with unknown error")}).finally(function(){var e=r("err").apply(void 0,[c].concat(d));e.name=[s,m,_].filter(Boolean).join("/"),E(e,"progressive_implementation_error_with_more_info")})}else{var f=r("err").apply(void 0,[c].concat(d));f.name=[s,m,"VIDEO_ELEMENT_SRC_EMPTY"].filter(Boolean).join("/"),E(f,"progressive_implementation_error_with_empty_src")}});try{var s,c=i.graphQLVideoDRMInfo,d=i.videoFBID,p=c&&(s=c.fairplayCert)!=null?s:null;if(n("cr:1680308")&&c&&p!=null&&d!=null)if(m.current=n("cr:1680308").newIfSupported(p,t,d,c.videoLicenseUriMap),m.current==null){var _=r("err")("Fairplay not supported");E(_,"progressive_player_fairplay_handler_missing")}else m.current.addListener("error",function(e){var t=r("err")(e.error);E(t,"progressive_player_fairplay_handler_error")});var f=r("gkx")("18183")?o("VideoPlayerImplementationEngineAPI").ensureVideoElementAPI(I):I.current=o("VideoPlayerImplementationEngineVideoElementAPI").createVideoPlayerImplementationEngineVideoElementAPI(t);u.current=i;{var g=S();L({inbandCaptionsAutogeneratedFromManifest:h.getInbandCaptionsAutogeneratedFromManifest(),inbandCaptionsExpectedFromManifest:h.getInbandCaptionsExpectedFromManifest(),inbandCaptionsExpectedFromProps:g==null?void 0:g.inbandCaptionsExpectedFromProps,representationCaptionsExpectedFromManifest:h.getRepresentationCaptionsExpectedFromManifest(),sideLoadCaptionsExpectedFromProps:g==null?void 0:g.sideLoadCaptionsExpectedFromProps,sideLoadCaptionsUrlFromProps:g==null?void 0:g.sideLoadCaptionsUrlFromProps})}k.dispatch({payload:{selectedVideoQuality:h.getUserSelectedVideoQuality(),streamingFormat:h.getStreamType()},type:"implementation_engine_initialized"});var y=function(){f.setPlayheadPosition(a.coreVideoPlayerMetaData.startTimestamp)};r("UserAgent").isBrowser("IE11")?r("promiseDone")(f.getDOMLoadedMetadataPromise().then(y)):y()}catch(e){E(e,"progressive_player_create_exception")}}},f=function(t,n){if(n==null)return!0;if(t.videoFBID!==n.videoFBID){var e=14;return o("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.video_fbid_changed",e),!1}else if(t.hdSrc!==n.hdSrc||t.sdSrc!==n.sdSrc){var r=14;return o("VideoPlayerODS").bumpEntityKey("comet_video_player","ProgressiveImplementation.src_changed",r),!1}else return!1},g=function(t){var e,n,a,s={audioOnly:t.coreVideoPlayerMetaData.audioOnly,graphQLVideoDRMInfo:(e=t.coreVideoPlayerMetaData.graphQLVideoDRMInfo)!=null?e:null,hdSrc:t.hdSrc===""?null:(n=t.hdSrc)!=null?n:null,hdSrcPreferred:t.hdSrcPreferred,sdSrc:t.sdSrc===""?null:(a=t.sdSrc)!=null?a:null,videoFBID:t.coreVideoPlayerMetaData.videoFBID};if(!f(s,i.current))return!1;if(s.hdSrc==null&&s.sdSrc==null)throw r("FBLogger")("comet_video_player").mustfixThrow("Empty hdSrc and sdSrc");return i.current=s,l.current=o("VideoPlayerProgressiveImplementationEngineUtils").createResolvedVideoInfoProgressive(s),_(),!0},h=o("VideoPlayerProgressiveImplementationEngineExtrasAPI").createVideoPlayerProgressiveImplementationEngineExtrasAPI({getPlayingVideoInfo:function(){if(r("gkx")("440")){var e,t=u.current;if(!t)return null;var n=(e=I.current)==null?void 0:e.getUnderlyingVideoElement().currentSrc;return babelHelpers.extends({},t,{playingSrc:n!=null&&n!==""?n:null})}else return u.current},setUserSelectedVideoQuality:function(t){var e=u.current;if(!e)throw r("FBLogger")("comet_video_player").mustfixThrow("Attempt to switch quality when playingVideoInfo does not exist");var n=o("VideoPlayerImplementationEngineAPI").ensureVideoElementAPI(I);u.current=o("VideoPlayerProgressiveImplementationEngineUtils").updatePlayingVideoInfoProgressiveWithUserSelectedQuality(e,t);var i=u.current.targetSrc;if(i===null){r("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",a.coreVideoPlayerMetaData.videoFBID).warn("Received null targetSrc from setUserSelectedVideoQuality, selectedQuality: %s",String(t));return}c(i,a.coreVideoPlayerMetaData.expiredVideoUrlRefreshHandler).then(function(e){var t,r,o;if(((t=u.current)==null?void 0:t.targetSrc)===i){d(n.getUnderlyingVideoElement(),{crossOrigin:(r=a.coreVideoPlayerMetaData.crossOrigin_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOURE_DOING)!=null?r:a.coreVideoPlayerMetaData.isSpherical===!0?"anonymous":null},e);var l=(o=k.getCurrentState().uncontrolledState.videoElementPlayheadPosition)!=null?o:0;l>0&&n.setPlayheadPosition(l),k.getCurrentState().controlledState.playbackState==="playing"&&n.play(),k.dispatch({payload:{},type:"representation_changed"})}}).catch(function(e){var t;if(((t=u.current)==null?void 0:t.targetSrc)===i){var n=r("getErrorSafe")(e);r("FBLogger")("comet_video_player").addMetadata("COMET_VIDEO","VIDEO_ID",a.coreVideoPlayerMetaData.videoFBID).catching(n).warn("Failed refreshing video URL with original error: %s",String(n))}})}}),y=function(){m.current&&(m.current.destroy(),m.current=null)},C=o("VideoPlayerImplementationEngineAPI").createVideoPlayerImplementationEngine({createDebugAPI:function(t){var e=t.getVideoElementAPI,r=t.loggerToVPL;return n("cr:1607")?n("cr:1607").createVideoPlayerImplementationDebugAPI({engineExtrasAPI:h,getVideoElementAPI:e,loggerToVPL:r}):null},createVideoPlayerError:function(t,n){var e;return s(t,n,(e=u.current)==null?void 0:e.targetSrc)},destroyEngineParts:function(){y()},engineCreateArgs:t,engineExtrasAPI:h,engineMetadata:{isAbrEnabled:!1,playerInstanceKey:p,playerVersion:"comet_progressive",streamingFormat:"progressive"},handleVideoElementChanged:function(t){t!=null&&_()},handleVideoInfoChange:g}),b=C.debugLog,v=C.engine,S=C.getCaptionsInfo,R=C.getVideoElement,L=C.handleCaptionsInfoChange,E=C.handleFatalImplementationError,k=C.machine,I=C.videoElementAPIRef;return v}function c(t,a){return a&&o("videoUrlUtils").isCdnUrlExpired(t)?a(t).then(function(t){var o;return(o=t.refreshedUrl)!=null?o:(e||(e=n("Promise"))).reject(r("err")("Failed refreshing URL"+(t.reason!==null?" with reason: "+t.reason:"")))}):(e||(e=n("Promise"))).resolve(t)}function d(e,t,n){var r=t.crossOrigin;if(n==null||n==="")e.removeAttribute("src");else{var o=e.playbackRate;e.setAttribute("src",n);var a=null;if(r!=null){try{a=new URL(n).origin}catch(e){}if(a!=null&&location.origin!==a)switch(r){case"anonymous":case"use-credentials":e.setAttribute("crossOrigin",r);break;default:e.removeAttribute("crossOrigin");break}}e.playbackRate=o}}l.createVideoPlayerProgressiveImplementationEngine=u,l.internal_setHTMLVideoElementSrc=d}),98);
__d("VideoPlayerProgressiveImplementationV2.react",["VideoPlayerImplementationEngineAPI","VideoPlayerProgressiveImplementationEngine"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("VideoPlayerImplementationEngineAPI").useVideoPlayerImplementationEngine(e,o("VideoPlayerProgressiveImplementationEngine").createVideoPlayerProgressiveImplementationEngine),n=t.reactVideoFrameAndComponents;return n}l.default=e}),98);
__d("VideoPlayerSurface.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.children;return t!=null?t:null}var c=s.memo(u);l.default=c}),98);
__d("VideoPlayerErrorBoundary.react",["FBLogger","getErrorSafe","oz-player/utils/OzErrorUtils","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t.state={error:null},t.suppressReactDefaultErrorLoggingIUnderstandThisWillMakeBugsHarderToFindAndFix=!0,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e),t.getDerivedStateFromError=function(t){return{error:r("getErrorSafe")(t)}};var n=t.prototype;return n.componentDidCatch=function(t,n){var e=n.componentStack,a=r("getErrorSafe")(t);a.componentStack=e;var i=this.props,l=i.description,s=i.onError,u=i.project,c=o("oz-player/utils/OzErrorUtils").isOzError(t)?t.getType():t!=null&&typeof t.name=="string"?t.name:a.name;try{a.name=c}catch(e){}var d="VideoPlayerErrorBoundary caught an "+c;l!=null&&(d=d+" ("+l+")");var m=["OZ_NETWORK","BUFFERING_TIMEOUT","MEDIA_ERR_DECODE","OZ_NETWORK_REQUEST_STREAM_RETRY_HANDLER_ERROR"],p=["Network failure:","Network failure.","HTTP error.","Bad URL timestamp","URL signature expired","No license for com.widevine.alpha","OZ_DRM_MANAGER: Endpoint returned error: DEVICE_CERTIFICATE_REVOKED"],_=m.every(function(e){return a.name!==e})&&p.every(function(e){return!a.message.startsWith(e)}),f=r("FBLogger")(u==null?"comet_video_player":u).catching(a);["OZ_DRM_MANAGER","OZ_JAVASCRIPT_NATIVE","OZ_INITIALIZATION"].includes(a.name)&&(f=f.addToCategoryKey(a.message)),_?f.fatal(d):f.warn(d),s!=null&&s(a)},n.render=function(){var e=this.props,t=e.children,n=e.fallback,r=this.state.error;return r?typeof n=="function"?n(r):n:t},t})(s.PureComponent);l.default=u}),98);
__d("VideoPlayerCaptionsAreaDeferred.react",["deferredLoadComponent","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e=r("deferredLoadComponent")(r("requireDeferredForDisplay")("VideoPlayerCaptionsArea.react").__setRef("VideoPlayerCaptionsAreaDeferred.react"));l.default=e}),98);
__d("VideoPlayerIMFMetadataContext",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={imfExpectedFromEmsg:!1,specInlineJson:null},d=s.createContext(c);d.displayName="VideoPlayerIMFMetadataContext";var m=d.Provider;function p(){var e=u(d);if(e===c)throw r("FBLogger")("comet_video_player").mustfixThrow("useVideoPlayerIMFMetadata is not called from a component nested under VideoPlayerRelay/VideoPlayerX.");return e}l.VideoPlayerIMFMetadataContextProvider=m,l.useVideoPlayerIMFMetadataFromContext=p}),98);
__d("VideoPlayerWebSessionExtender.react",["VideoPlayerHooks","WebSessionExtender","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useId;function m(){var e=o("react-compiler-runtime").c(4),t=(s||(s=o("VideoPlayerHooks"))).usePlaying(),n=d(),r,a;return e[0]!==t||e[1]!==n?(r=function(){if(t)return o("WebSessionExtender").subscribe(n,"video"),(function(){o("WebSessionExtender").unsubscribe(n)})},a=[t,n],e[0]=t,e[1]=n,e[2]=r,e[3]=a):(r=e[2],a=e[3]),c(r,a),null}l.default=m}),98);
__d("useVideoPlayerDefaultLoadingIndicatorsLogic",["VideoPlayerHooks","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(4),n=(e||(e=o("VideoPlayerHooks"))).useStalling(),r=e.useStreamInterrupted(),a=e.useIsLiveRewindActive(),i=r&&!a,l=n,s=i?"live_video_interrupted_overlay":l?"spinner":"none",u;return t[0]!==i||t[1]!==s||t[2]!==l?(u={liveVideoInterruptedOverlayVisible:i,loadingIndicatorType:s,spinnerVisible:l},t[0]=i,t[1]=s,t[2]=l,t[3]=u):u=t[3],u}l.default=s}),98);
__d("useVideoPlayerDefaultLoadingIndicators",["CometPlaceholder.react","deferredLoadComponent","once","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","useVideoPlayerDefaultLoadingIndicatorsLogic"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("VideoPlayerSpinner.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),c=r("deferredLoadComponent")(r("requireDeferred")("VideoPlayerWithLiveVideoInterruptedOverlay.react").__setRef("useVideoPlayerDefaultLoadingIndicators")),d=r("once")(function(){return s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(c,{})})});function m(){var e=o("react-compiler-runtime").c(6),t=r("useVideoPlayerDefaultLoadingIndicatorsLogic")(),n=t.loadingIndicatorType,a=t.spinnerVisible,i;e[0]!==a?(i=s.jsx(u,{isVisible:a}),e[0]=a,e[1]=i):i=e[1];var l=i,c;e:switch(n){case"spinner":{c=l;break e}case"live_video_interrupted_overlay":{var m;e[2]===Symbol.for("react.memo_cache_sentinel")?(m=d(),e[2]=m):m=e[2],c=m;break e}case"none":default:c=l}var p;return e[3]!==c||e[4]!==n?(p={loadingIndicatorElement:c,loadingIndicatorType:n},e[3]=c,e[4]=n,e[5]=p):p=e[5],p}l.default=m}),98);
__d("XVideoUnifiedCVCControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/video/unified_cvc/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("UnifiedVideoCVCSubscription",["CVCv3DisabledPlayerOrigins","CVCv3DisabledPlayerSubOrigins","CVCv3SubscriptionHelper","DateConsts","XVideoUnifiedCVCControllerRouteBuilder","clearTimeout","cometAsyncFetch","promiseDone","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=Object.values(r("CVCv3DisabledPlayerOrigins")),s=Object.values(r("CVCv3DisabledPlayerSubOrigins")),u=10,c=(function(){function t(t,n,o,a,i,l){var u=this;this.$1=new(r("CVCv3SubscriptionHelper"))(t,n,o),this.$5=i,this.$6=null,this.$9=null,this.$10=!this.$1.isValidSubscription(),this.$3=null,this.$2=null;var c=n!=null?e.includes(n):!1,d=o!=null?s.includes(o):!1;!c&&!d&&(this.$3=a,this.$11=l,this.$4=a.subscribe(function(){if(u.$3==null){u.$1.logDebugInfo("empty_video_controller");return}var e=u.$3.getCurrentState();e.playing?u.$12(e):u.$13()}))}var n=t.prototype;return n.$12=function(t){if(this.$3==null){this.$1.logDebugInfo("empty_video_controller");return}if(t.playing){if(this.$2==null){var e=this.$3.getPlayheadPosition();e>=0&&(this.$2=e)}}else this.$2=null;this.$14(0)},n.stopUnifiedCVC=function(){this.$13()},n.destroy=function(){this.$13(),this.$4!=null&&this.$4.remove(),this.$4=null,this.$3=null},n.$13=function(){r("clearTimeout")(this.$8),r("clearTimeout")(this.$7),this.$8=null,this.$7=null,this.$2=null,this.$1.clearAnyPreviousContext(),this.$9=null},n.$15=function(){r("clearTimeout")(this.$7),this.$7=null},n.$16=function(){this.$9=null,this.$15(),this.$14(0)},n.$14=function(t){var e=this;this.$3==null||this.$8!=null||this.$9!=null||this.$10||(this.$8=r("setTimeout")(function(){e.$8=null;var t=e.$17();if(t==null){e.$1.logDebugInfo("empty_request");return}e.$9=t;var n=Date.now(),a=!1;r("promiseDone")(t,function(r){if(t===e.$9)if(e.$9=null,r!=null){var o=e.$1.processUnifiedResponse(r);e.$18(o,n)}else e.$1.logHttpResponseBad("null payload",Date.now()-n)},function(t){a=!0,e.$1.logHttpRequestFailure(t!=null?JSON.stringify(t):null,Date.now()-n)}),e.$7=r("setTimeout")(function(){a||e.$1.logHttpRequestTimeout(Date.now()-n),e.$16()},u*o("DateConsts").MS_PER_SEC)},t))},n.$18=function(t,n){this.$15();var e=Date.now()-n;if(t.d!=null?(this.$1.logHttpRequestSuccess(e),this.$11!=null&&this.$11(t.d)):this.$1.logHttpResponseBad("no data field",e),t.a!=null){var r=t.a.t;switch(r){case"p":var a=t.a.pi;a==null&&(a=u),this.$14(a*o("DateConsts").MS_PER_SEC);break;case"s":this.$10=!0;break}}},n.$17=function(){var e=this.$19();if(e==null)return null;var t={d:JSON.stringify(e)};return r("cometAsyncFetch")(r("XVideoUnifiedCVCControllerRouteBuilder").buildURL({}),{data:t,method:"POST"})},n.$19=function(){if(this.$3==null)return null;var e={};this.$6!=null&&(e.lc=this.$6),this.$5&&(e.ls=!0);var t=0,n=0;this.$2!=null&&(t=this.$2,n=this.$3.getPlayheadPosition());var r=this.$3.getCurrentState(),o=this.$1.makeUnifiedVideoCVCUpdate(t,n,this.$20(r),r.muted,e);return o},n.$20=function(t){return t.playing||t.seeking?"playing":t.ended?"ended":t.paused?"paused":"unknown"},n.testing_setLastStartPosition=function(t){this.$2=t},n.testing_makeUnifiedStateUpdate=function(){return this.$19()},n.testing_handleUnifiedResponse=function(t){return this.$18(t,Date.now())},t})();l.default=c}),98);
__d("useVideoPlayerUnifiedCVCProvider",["CvcV3HttpEventFalcoEvent","UnifiedVideoCVCSubscription","VideoPlayerHooks","createVideoStateHook","getPlayerFormatForLogData","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=o("createVideoStateHook").createVideoStateHook(null),d=c.setterHook,m=o("createVideoStateHook").createVideoStateHook(null),p=m.setterHook,_=m.valueHook;function f(e){var t=o("react-compiler-runtime").c(12),n=e.disableSubscription,a=e.playerFormat,i=e.subOrigin,l=e.videoFBID,c=(s||(s=o("VideoPlayerHooks"))).useIsLive(),m=s.useIsFullscreen(),_=s.useIsDesktopPictureInPicture(),f=s.useController(),g=d(),h=p(),y,C;t[0]!==n||t[1]!==_||t[2]!==m||t[3]!==c||t[4]!==a||t[5]!==h||t[6]!==g||t[7]!==i||t[8]!==f||t[9]!==l?(y=function(){if(n===!0){r("CvcV3HttpEventFalcoEvent").log(function(){return{countable_id:l,name:"disable_subscription"}});return}var e=new(r("UnifiedVideoCVCSubscription"))(l,r("getPlayerFormatForLogData")({isDesktopPictureInPicture:_,isFullscreen:m},a),i,f,c,function(e){h(e)});return g(e),(function(){e.destroy()})},C=[_,m,c,n,a,h,g,i,f,l],t[0]=n,t[1]=_,t[2]=m,t[3]=c,t[4]=a,t[5]=h,t[6]=g,t[7]=i,t[8]=f,t[9]=l,t[10]=y,t[11]=C):(y=t[10],C=t[11]),u(y,C)}var g=_;l.useVideoPlayerUnifiedCVCProvider=f,l.useVideoPlayerUnifiedCVCData=g}),98);
__d("VideoPlayerXImplSurface.react",["CoreVideoPlayerAudioClient.react","CoreVideoPlayerAutoplayClient.react","VideoPlayerCaptionsAreaDeferred.react","VideoPlayerHooks","VideoPlayerIMFMetadataContext","VideoPlayerInteractionOverlay.react","VideoPlayerPortalingPlaceInfoProvider.react","VideoPlayerWebSessionExtender.react","cr:1954434","cr:99","gkx","react","react-compiler-runtime","useVideoPlayerDefaultLoadingIndicators","useVideoPlayerUnifiedCVCProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s.useImperativeHandle,m=(e=n("cr:99"))==null?void 0:e.VideoPlayerWithDebugOverlay;function p(e){var t=o("react-compiler-runtime").c(25),a=e.apiRef,i=e.children,l=e.disableCVCSubscription,s=e.disableLoadingIndicator,p=e.disableLogging,_=e.instreamVideoAdBreaksPlayer,f=e.playerFormat,g=e.subOrigin,h=e.videoFBID,y=e.videoPlayerIMFFromVideoMetadata,C=e.videoPlayerSpherical,b=s===void 0?!1:s,v=(u||(u=o("VideoPlayerHooks"))).useController(),S=o("VideoPlayerPortalingPlaceInfoProvider.react").useVideoPlayerPortalingPlaceInfo(),R,L;t[0]!==v||t[1]!==S?(R=function(){return{controller:v,portalingPlaceInfo:S}},L=[v,S],t[0]=v,t[1]=S,t[2]=R,t[3]=L):(R=t[2],L=t[3]),d(typeof a=="function"?a:null,R,L);var E=p===!0||l===!0,k;t[4]!==f||t[5]!==g||t[6]!==E||t[7]!==h?(k={disableSubscription:E,playerFormat:f,subOrigin:g,videoFBID:h},t[4]=f,t[5]=g,t[6]=E,t[7]=h,t[8]=k):k=t[8],o("useVideoPlayerUnifiedCVCProvider").useVideoPlayerUnifiedCVCProvider(k);var I=r("useVideoPlayerDefaultLoadingIndicators")(),T=I.loadingIndicatorElement,D=y!=null?y:null,x=b?null:T,$;t[9]===Symbol.for("react.memo_cache_sentinel")?($=r("gkx")("24328")?c.jsx(o("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{}):null,t[9]=$):$=t[9];var P;t[10]!==i||t[11]!==_?(P=c.jsxs(r("VideoPlayerCaptionsAreaDeferred.react"),{children:[i,_]}),t[10]=i,t[11]=_,t[12]=P):P=t[12];var N,M,w;t[13]===Symbol.for("react.memo_cache_sentinel")?(N=c.jsx(r("CoreVideoPlayerAutoplayClient.react"),{}),M=c.jsx(r("CoreVideoPlayerAudioClient.react"),{}),w=n("cr:1954434")?c.jsx(n("cr:1954434"),{}):null,t[13]=N,t[14]=M,t[15]=w):(N=t[13],M=t[14],w=t[15]);var A;t[16]!==g?(A=m?c.jsx(m,{subOrigin:g}):null,t[16]=g,t[17]=A):A=t[17];var F;t[18]===Symbol.for("react.memo_cache_sentinel")?(F=c.jsx(r("VideoPlayerWebSessionExtender.react"),{}),t[18]=F):F=t[18];var O;return t[19]!==A||t[20]!==D||t[21]!==x||t[22]!==P||t[23]!==C?(O=c.jsxs(o("VideoPlayerIMFMetadataContext").VideoPlayerIMFMetadataContextProvider,{value:D,children:[C,x,$,P,N,M,w,A,F]}),t[19]=A,t[20]=D,t[21]=x,t[22]=P,t[23]=C,t[24]=O):O=t[24],O}l.default=p}),98);
__d("VideoPlayerXImpl.react",["CoreVideoPlayerMetaData","CoreVideoPlayerWithComponents.react","VideoPlayerXImplSurface.react","react","react-compiler-runtime","usePlayerOriginRouteTracePolicy","useRouteProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";var e=["apiRef","children","disableLoadingIndicator","implementations","instreamVideoAdBreaksPlayer","portalingEnabled","portalingFromVideoID","portalingPlaceMetaData","portalingRenderPlaceholder","videoPlayerIMFFromVideoMetadata","videoPlayerSpherical"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(20),a=t.apiRef,i=t.children,l=t.disableLoadingIndicator,s=t.implementations,c=t.instreamVideoAdBreaksPlayer,d=t.portalingEnabled,m=t.portalingFromVideoID,p=t.portalingPlaceMetaData,_=t.portalingRenderPlaceholder,f=t.videoPlayerIMFFromVideoMetadata,g=t.videoPlayerSpherical,h=babelHelpers.objectWithoutPropertiesLoose(t,e),y=r("usePlayerOriginRouteTracePolicy")(),C=r("useRouteProductAttribution")();C||(C=h.productAttribution);var b=o("CoreVideoPlayerMetaData").applyDefaultsToCoreVideoPlayerMetaData(babelHelpers.extends({},h,{productAttribution:C,routeTracePolicy:y})),v;n[0]!==a||n[1]!==i||n[2]!==b.loggingConfig.disableCVCSubscription||n[3]!==b.loggingConfig.disableLogging||n[4]!==b.playerFormat||n[5]!==b.subOrigin||n[6]!==b.videoFBID||n[7]!==l||n[8]!==c||n[9]!==f||n[10]!==g?(v=u.jsx(r("VideoPlayerXImplSurface.react"),{apiRef:a,children:i,disableCVCSubscription:b.loggingConfig.disableCVCSubscription,disableLoadingIndicator:l,disableLogging:b.loggingConfig.disableLogging,instreamVideoAdBreaksPlayer:c,playerFormat:b.playerFormat,subOrigin:b.subOrigin,videoFBID:b.videoFBID,videoPlayerIMFFromVideoMetadata:f,videoPlayerSpherical:g}),n[0]=a,n[1]=i,n[2]=b.loggingConfig.disableCVCSubscription,n[3]=b.loggingConfig.disableLogging,n[4]=b.playerFormat,n[5]=b.subOrigin,n[6]=b.videoFBID,n[7]=l,n[8]=c,n[9]=f,n[10]=g,n[11]=v):v=n[11];var S;return n[12]!==b||n[13]!==s||n[14]!==d||n[15]!==m||n[16]!==p||n[17]!==_||n[18]!==v?(S=u.jsx(r("CoreVideoPlayerWithComponents.react"),{coreVideoPlayerMetaData:b,implementations:s,portalingEnabled:d,portalingFromVideoID:m,portalingPlaceMetaData:p,portalingRenderPlaceholder:_,children:v}),n[12]=b,n[13]=s,n[14]=d,n[15]=m,n[16]=p,n[17]=_,n[18]=v,n[19]=S):S=n[19],S}l.default=c}),98);
__d("VideoPlayerFallbackLearnMoreLink.react",["fbt","CometFacebookHelpURLConstants","FDSLink.react","FDSText.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(2),t=r("gkx")("20836")?"/help/work/1876956335887765/i-cant-view-or-play-videos-on-workplace":o("CometFacebookHelpURLConstants").FACEBOOK_HELP_BASE_URL+"/396404120401278/list",n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=s._(/*BTDS*/"Learn more about video playback issues"),e[0]=n):n=e[0];var a;return e[1]===Symbol.for("react.memo_cache_sentinel")?(a=u.jsx(r("FDSText.react"),{color:"primaryOnMedia",type:"headlineEmphasized3",children:u.jsx(r("FDSLink.react"),{"aria-label":n,href:t,target:"_blank",children:s._(/*BTDS*/"Learn more")})}),e[1]=a):a=e[1],a}l.default=c}),226);
__d("VideoPlayerFallbackCoverImplWithoutRetry.react",["FDSText.react","VideoPlayerFallbackLearnMoreLink.react","cr:2324","cr:4149","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(21),a=e.background,i=e.debugError,l=e.message,u=e.showDebugWithoutError,c=e.showLearnMoreLink,d=u===void 0?!0:u,m=c===void 0?!0:c,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p={className:"x6s0dn4 xatbrnm x9f619 x78zum5 x5yr21d xl56j7k x6ikm8r x10wlt62 x889kno x2vl965 x1a8lsjc xe2zdcy x1n2onr6 xh8yej3"},t[0]=p):p=t[0];var _;t[1]!==a?(_={0:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox"},1:{className:"x6s0dn4 x78zum5 xdt5ytf x3es6ox x1vjfegm"}}[(a!=null)<<0],t[1]=a,t[2]=_):_=t[2];var f;t[3]===Symbol.for("react.memo_cache_sentinel")?(f={className:"x6s0dn4 x78zum5 xdt5ytf x193iq5w"},t[3]=f):f=t[3];var g;t[4]!==l?(g=s.jsx("div",babelHelpers.extends({},f,{children:s.jsx(r("FDSText.react"),{align:"center",color:"primaryOnMedia",type:"bodyLink3",children:l})})),t[4]=l,t[5]=g):g=t[5];var h;t[6]!==m?(h=m&&s.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf xw7yly9 x193iq5w",children:s.jsx(r("VideoPlayerFallbackLearnMoreLink.react"),{})}),t[6]=m,t[7]=h):h=t[7];var y;t[8]!==i||t[9]!==d?(y=(i!=null||d)&&s.jsxs(s.Fragment,{children:[n("cr:4149")?s.jsx(n("cr:4149"),{error:i}):null,n("cr:2324")?s.jsx(n("cr:2324"),{error:i}):null]}),t[8]=i,t[9]=d,t[10]=y):y=t[10];var C;t[11]!==_||t[12]!==g||t[13]!==h||t[14]!==y?(C=s.jsxs("div",babelHelpers.extends({},_,{children:[g,h,y]})),t[11]=_,t[12]=g,t[13]=h,t[14]=y,t[15]=C):C=t[15];var b;t[16]!==a?(b=a!=null&&s.jsx("div",{className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy",children:a}),t[16]=a,t[17]=b):b=t[17];var v;return t[18]!==b||t[19]!==C?(v=s.jsxs("div",babelHelpers.extends({},p,{children:[C,b]})),t[18]=b,t[19]=C,t[20]=v):v=t[20],v}l.default=u}),98);
__d("VideoPlayerFallbackCover.react",["fbt","VideoPlayerFallbackCoverImplWithoutRetry.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.background,a=e.debugError,i=e.message,l=e.showDebugWithoutError,c=e.showLearnMoreLink,d;t[0]!==i?(d=i!=null?i:s._(/*BTDS*/"Sorry, we're having trouble playing this video."),t[0]=i,t[1]=d):d=t[1];var m=d,p;return t[2]!==n||t[3]!==a||t[4]!==m||t[5]!==l||t[6]!==c?(p=u.jsx(r("VideoPlayerFallbackCoverImplWithoutRetry.react"),{background:n,debugError:a,message:m,showDebugWithoutError:l,showLearnMoreLink:c}),t[2]=n,t[3]=a,t[4]=m,t[5]=l,t[6]=c,t[7]=p):p=t[7],p}l.default=c}),226);
__d("defaultErrorBoundaryFallback",["VideoPlayerFallbackCover.react","getVideoPlayerUserFacingErrorMessageFromError","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=r("getVideoPlayerUserFacingErrorMessageFromError")(e);return s.jsx(r("VideoPlayerFallbackCover.react"),{debugError:e,message:t})}u.displayName=u.name+" [from "+i.id+"]",l.default=u}),98);
__d("computeAspectRatio",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){return e!=null&&t!=null&&e!==0&&t!==0?e/t:null}i.default=e}),66);
__d("getVideoPlayerAutoplayProps",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=t!=null?t:"respect_user_settings",o=r==="dangerously_always_autoplay",a=n!=null?n:"unknown",i=e.autoplaySetting||"default_autoplay",l=i==="off",s=o||r==="respect_user_settings"&&!l&&e.canAutoplay,u=r==="do_not_autoplay"?a:e.autoplayGatingResult,c=s?"allow":r==="dangerously_disable_autoplay_management"?"dangerously_disable_autoplay_management":"deny";return{autoplayGatingResult:u,autoplaySetting:i,canAutoplay:c}}i.default=e}),66);
__d("useVideoPlayerClickToPauseInteraction",["fbt","VideoPlayerHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=(e||(e=o("react"))).useCallback;function d(){var e=o("react-compiler-runtime").c(5),t=(u||(u=o("VideoPlayerHooks"))).usePlaying(),n=u.useController(),r=u.useIsLive(),a;e[0]!==n?(a=function(){n.pause("user_initiated")},e[0]=n,e[1]=a):a=e[1];var i=a,l=t&&!r,c;return e[2]!==l||e[3]!==i?(c=l?{ariaLabel:s._(/*BTDS*/"Pause reel"),handler:i,overlayLabel:""}:null,e[2]=l,e[3]=i,e[4]=c):c=e[4],c}l.default=d}),226);
__d("useVideoPlayerClickToPlayInteraction",["fbt","VideoPlayerHooks","react","react-compiler-runtime","useFeedClickEventHandler"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=(e||(e=o("react"))).useCallback;function d(e){var t=o("react-compiler-runtime").c(9),n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];var a=n,i=a.shouldUnmute,l=(u||(u=o("VideoPlayerHooks"))).usePaused(),c=u.useController(),d=u.useLastMuteReason(),m;t[2]!==c||t[3]!==d||t[4]!==i?(m=function(){c.play("user_initiated"),i===!0&&d!=="user_initiated"&&c.setMuted(!1,"product_initiated")},t[2]=c,t[3]=d,t[4]=i,t[5]=m):m=t[5];var p=m,_=r("useFeedClickEventHandler")(p),f=l,g;return t[6]!==f||t[7]!==_?(g=f?{ariaLabel:s._(/*BTDS*/"Play reel"),handler:_,overlayLabel:""}:null,t[6]=f,t[7]=_,t[8]=g):g=t[8],g}l.default=d}),226);
__d("MWChatVideoPlayer.react",["CometProductAttribution","CometVideoPlayerLoggingConfigForMWChat","GraphQLVideoAutoplayGatingResult","MWAnimatedImageControlsUtil","MWChatVideoPlayerControls.react","MWSetupMediaRenderQpl.react","MWVideoPlayerControllerContext.react","VideoAutoplayLocalScopeProvider.react","VideoPlayerAutoplayRulesProvider","VideoPlayerDefaultControls.react","VideoPlayerHooks","VideoPlayerInteractionOverlay.react","VideoPlayerProgressiveImplementationData","VideoPlayerProgressiveImplementationV2.react","VideoPlayerSurface.react","VideoPlayerX.react","computeAspectRatio","getVideoPlayerAutoplayProps","react","react-compiler-runtime","useVideoPlayerClickToPauseInteraction","useVideoPlayerClickToPlayInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.useContext,m=c.useEffect,p={link_context:null,navChainContent:null,rootName:"MWChatMediaRoot.react",tap_point:"unexpected",tracePolicy:"comet.sharedmediaviewer.media",trackingNodes:null},_=-1,f=o("VideoPlayerAutoplayRulesProvider").provideAutoplayRules("gif");function g(e){var t=o("react-compiler-runtime").c(11),n=e.controls,a=e.hideControls,i=e.hideExpandButton,l=e.isMediaViewer,c=e.shouldForcePauseOnClick,d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={shouldUnmute:!0},t[0]=d):d=t[0];var m=r("useVideoPlayerClickToPlayInteraction")(d),p=r("useVideoPlayerClickToPauseInteraction")(),_=(s||(s=o("VideoPlayerHooks"))).usePaused(),f=_&&!c?m:p,g;t[1]!==f?(g=u.jsx(o("VideoPlayerInteractionOverlay.react").VideoPlayerInteractionOverlay,{pressInteraction:f}),t[1]=f,t[2]=g):g=t[2];var y;t[3]!==n||t[4]!==a||t[5]!==i||t[6]!==l?(y=h(n,i,l,a),t[3]=n,t[4]=a,t[5]=i,t[6]=l,t[7]=y):y=t[7];var C;return t[8]!==g||t[9]!==y?(C=u.jsxs(u.Fragment,{children:[g,y]}),t[8]=g,t[9]=y,t[10]=C):C=t[10],C}var h=function(t,n,o,a){switch(t){case"mwchat":return u.jsx(r("MWChatVideoPlayerControls.react"),{hideControls:a,hideExpandButton:n===!0,isMediaViewer:o===!0});case"default":return u.jsx(r("VideoPlayerDefaultControls.react"),{});case"none":return null;default:return null}},y=function(t){return t!=null?function(e){return{objectFit:t}}:null};function C(e){var t=e.children,n=(s||(s=o("VideoPlayerHooks"))).useController(),a=d(r("MWVideoPlayerControllerContext.react"));return m(function(){return a.ref.current=n,function(){a.ref.current=null}},[a,n]),t}C.displayName=C.name+" [from "+i.id+"]";function b(e){var t=o("react-compiler-runtime").c(49),n=e.autoPlaySetting,a=e.controls,i=e.errorBoundaryFallback,l=e.fbid,s=e.gifPlayback,c=e.hdSrc,d=e.hideExpandButton,h=e.initialForceHD,b=e.isMediaViewer,v=e.loopCount,S=e.mediaRenderQpl,R=e.originalHeight,L=e.originalWidth,E=e.pixelsFit,k=e.sdSrc,I=e.shouldForcePauseOnClick,T=e.startTimestamp,D=e.volumeSetting,x=o("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting()===o("MWAnimatedImageControlsUtil").MWAutoplayAnimationsSetting.ON?"on":"off",$=h!=null?h:!1,P;t[0]!==c||t[1]!==k||t[2]!==$?(P=o("VideoPlayerProgressiveImplementationData").makeProgressiveImplementationData({hdSrc:c,hdSrcPreferred:$,sdSrc:k}),t[0]=c,t[1]=k,t[2]=$,t[3]=P):P=t[3];var N=P,M,w;if(t[4]!==N||t[5]!==S?(M=function(){S==null||S.addPoint("render-chat-video-player"),N instanceof Error&&(S==null||S.endFail("load-video-player-error",{string:{player_implementation_error_message:N.message,player_implementation_error_name:N.name}}))},w=[N,S],t[4]=N,t[5]=S,t[6]=M,t[7]=w):(M=t[6],w=t[7]),m(M,w),N instanceof Error){var A;return t[8]!==i?(A=i==null?void 0:i(),t[8]=i,t[9]=A):A=t[9],A}var F;t[10]!==N?(F=[{Component:r("VideoPlayerProgressiveImplementationV2.react"),data:N,typename:"VideoPlayerProgressiveImplementation"}],t[10]=N,t[11]=F):F=t[11];var O=F,B;t[12]!==n||t[13]!==s||t[14]!==x?(B=r("getVideoPlayerAutoplayProps")(o("GraphQLVideoAutoplayGatingResult").makeGraphQLVideoAutoplayGatingResult(s===!0?"gif_allowed":"unknown",x,n),"respect_user_settings",null),t[12]=n,t[13]=s,t[14]=x,t[15]=B):B=t[15];var W=B,q;t[16]!==R||t[17]!==L?(q=r("computeAspectRatio")(L,R),t[16]=R,t[17]=L,t[18]=q):q=t[18];var U=q,V;t[19]===Symbol.for("react.memo_cache_sentinel")?(V=o("CometVideoPlayerLoggingConfigForMWChat").createCometVideoPlayerLoggingConfigForMWChat({withMWChatSNAPLGK:!0}),t[19]=V):V=t[19];var H=v!=null?v:_,G;t[20]===Symbol.for("react.memo_cache_sentinel")?(G={v2:[o("CometProductAttribution").getProductAttributionEntryV2(p)]},t[20]=G):G=t[20];var z;t[21]!==E?(z=y(E),t[21]=E,t[22]=z):z=t[22];var j;t[23]!==S?(j=u.jsx(r("MWSetupMediaRenderQpl.react"),{context:"MWChat",mediaRenderQpl:S}),t[23]=S,t[24]=j):j=t[24];var K=s===!0,Q=d===!0,X=b===!0,Y;t[25]!==a||t[26]!==I||t[27]!==K||t[28]!==Q||t[29]!==X?(Y=u.jsx(C,{children:u.jsx(g,{controls:a,hideControls:K,hideExpandButton:Q,isMediaViewer:X,shouldForcePauseOnClick:I})}),t[25]=a,t[26]=I,t[27]=K,t[28]=Q,t[29]=X,t[30]=Y):Y=t[30];var J;t[31]!==j||t[32]!==Y?(J=u.jsxs(r("VideoPlayerSurface.react"),{children:[j,Y]}),t[31]=j,t[32]=Y,t[33]=J):J=t[33];var Z;t[34]!==i||t[35]!==l||t[36]!==O||t[37]!==T||t[38]!==z||t[39]!==J||t[40]!==V||t[41]!==H||t[42]!==U||t[43]!==W||t[44]!==D?(Z=u.createElement(r("VideoPlayerX.react"),babelHelpers.extends({},W,{errorBoundaryFallback:i,implementations:O,key:l,loggingConfig:V,loopCount:H,playerOriginOverride:"messaging",portalingEnabled:!1,productAttribution:G,renderVideoPixelsFit:z,startTimestamp:T,subOrigin:"messenger_thread",videoFBID:l,videoPixelsAspectRatio:U,volumeSetting:D}),J),t[34]=i,t[35]=l,t[36]=O,t[37]=T,t[38]=z,t[39]=J,t[40]=V,t[41]=H,t[42]=U,t[43]=W,t[44]=D,t[45]=Z):Z=t[45];var ee=Z,te;return t[46]!==ee||t[47]!==s?(te=s===!0?u.jsx(r("VideoAutoplayLocalScopeProvider.react"),{autoplayLocalRules:f,children:ee}):ee,t[46]=ee,t[47]=s,t[48]=te):te=t[48],te}l.default=b}),98);
__d("MWMediaGalleryVideoThumbnail.react",["FDSImageCover.react","MWXVideoStatusListener.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(22),n=e.alt,a=e.fallbackVideoUrl,i=e.mediaRenderQpl,l=e.previewUrl,u=d(null),c;t[0]!==i?(c=function(t){i==null||i.endFail("load-video-error",{string:{video_error_name:t}})},t[0]=i,t[1]=c):c=t[1];var m=c,p;t[2]!==i?(p=function(){i==null||i.endSuccess()},t[2]=i,t[3]=p):p=t[3];var _=p;if(l!==""){var f=n!=null?n:"video thumbnail",g,h;t[4]!==i?(g=function(){return i==null?void 0:i.endFail("load-image-error")},h=function(){return i==null?void 0:i.endSuccess()},t[4]=i,t[5]=g,t[6]=h):(g=t[5],h=t[6]);var y;return t[7]!==l||t[8]!==f||t[9]!==g||t[10]!==h?(y=s.jsx(r("FDSImageCover.react"),{alt:f,onError:g,onLoad:h,src:l}),t[7]=l,t[8]=f,t[9]=g,t[10]=h,t[11]=y):y=t[11],y}var C;t[12]!==m||t[13]!==_?(C=s.jsx(r("MWXVideoStatusListener.react"),{onError:m,onLoad:_,videoRef:u}),t[12]=m,t[13]=_,t[14]=C):C=t[14];var b=n!=null?n:"video thumbnail",v;t[15]===Symbol.for("react.memo_cache_sentinel")?(v={className:"x5yr21d xl1xv1r xh8yej3"},t[15]=v):v=t[15];var S;t[16]!==a||t[17]!==b?(S=s.jsx("video",babelHelpers.extends({alt:b},v,{controls:!1,ref:u,src:a})),t[16]=a,t[17]=b,t[18]=S):S=t[18];var R;return t[19]!==C||t[20]!==S?(R=s.jsxs(s.Fragment,{children:[C,S]}),t[19]=C,t[20]=S,t[21]=R):R=t[21],R}l.default=m}),98);
__d("MWSharedAttachmentsSectionHooks",["I64","LSIntEnum","LSThreadMediaGalleryGroup","MessagingAttachmentType","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","usePrevious","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useCallback,p=d.useEffect,_=d.useState;function f(e){var t,n,a=o("react-compiler-runtime").c(33),i=e.attachmentsRange,l=e.hasMore,s=e.loadMore,u=e.logLoadMediaCancel,c=e.logLoadMediaSuccess,d=e.media,m=e.skipInitialLoad,f=_(!1),g=f[0],h=f[1],y=d.length,C=(t=r("usePrevious")(y))!=null?t:0,b=r("usePrevious")(l),v=(n=r("usePrevious")(g))!=null?n:!1,S=i!=null,R,L;a[0]!==S||a[1]!==s||a[2]!==m?(R=function(){!S&&m!==!0&&(s(),h(!0))},L=[S,s,m],a[0]=S,a[1]=s,a[2]=m,a[3]=R,a[4]=L):(R=a[3],L=a[4]),p(R,L);var E;a[5]!==i||a[6]!==l||a[7]!==g||a[8]!==s||a[9]!==c||a[10]!==y||a[11]!==b||a[12]!==v||a[13]!==C?(E=function(){var e=C!==y,t=b===!0&&!l||i==null&&l===!1&&b===!1&&C===y;g&&(t||e)?(h(!1),c==null||c({fetchedMediaCount:y-C,startMediaCount:C})):C===y&&l&&g&&v===!0&&(c==null||c({fetchedMediaCount:y-C,isAlreadyPreloaded:!0,startMediaCount:C}),s())},a[5]=i,a[6]=l,a[7]=g,a[8]=s,a[9]=c,a[10]=y,a[11]=b,a[12]=v,a[13]=C,a[14]=E):E=a[14];var k;a[15]!==i||a[16]!==l||a[17]!==g||a[18]!==s||a[19]!==u||a[20]!==c||a[21]!==y||a[22]!==b||a[23]!==v||a[24]!==C?(k=[y,l,g,C,b,i,s,v,c,u],a[15]=i,a[16]=l,a[17]=g,a[18]=s,a[19]=u,a[20]=c,a[21]=y,a[22]=b,a[23]=v,a[24]=C,a[25]=k):k=a[25],p(E,k);var I;a[26]!==g||a[27]!==s?(I=function(){if(!g)return s(),h(!0)},a[26]=g,a[27]=s,a[28]=I):I=a[28];var T=I,D=y>0||!g&&!l,x;return a[29]!==D||a[30]!==g||a[31]!==T?(x=[g,T,D],a[29]=D,a[30]=g,a[31]=T,a[32]=x):x=a[32],x}function g(e,t,n,r){var a=o("react-compiler-runtime").c(9),i;a[0]!==r?(i=babelHelpers.extends({},r,{fetchMessages:!1}),a[0]=r,a[1]=i):i=a[1];var l=y(e,t,n,i),s=l[0],u=l[1],c=l[2],d=l[3],m;a[2]!==s?(m=s.map(h),a[2]=s,a[3]=m):m=a[3];var p=m,_;return a[4]!==p||a[5]!==u||a[6]!==d||a[7]!==c?(_=[p,u,c,d],a[4]=p,a[5]=u,a[6]=d,a[7]=c,a[8]=_):_=a[8],_}function h(e){var t=e.attachment;return t}function y(t,n,a,l){var s=o("react-compiler-runtime").c(20),u;s[0]!==l?(u=l===void 0?{}:l,s[0]=l,s[1]=u):u=s[1];var c=u,d=c.fetchMessages,m=c.removeUnsentMessages,p=d===void 0?!0:d,_=m===void 0?!1:m,f=(e||(e=r("useReStore")))(),g=k(t,n),h=g.attachmentsRange,y=g.hasMoreBefore,C=g.minTimestampMs,b=g.query,v;s[2]!==f||s[3]!==p||s[4]!==a||s[5]!==_?(v=function(t){if(!a(t))return null;if(!_&&!p)return{attachment:t,message:null};var e=o("ReQLSuspense").first(o("ReQL").fromTableAscending(f.tables.messages.index("messageId")).getKeyRange(t.messageId),i.id+":185");return e==null||e.isUnsent?null:{attachment:t,message:e}},s[2]=f,s[3]=p,s[4]=a,s[5]=_,s[6]=v):v=s[6];var S=v,R;s[7]!==S||s[8]!==b?(R=function(){return b.map(S).filter(Boolean)},s[7]=S,s[8]=b,s[9]=R):R=s[9];var L;s[10]!==f||s[11]!==C||s[12]!==S||s[13]!==t?(L=[f,t,S,C],s[10]=f,s[11]=C,s[12]=S,s[13]=t,s[14]=L):L=s[14];var E=o("ReQLSuspense").useArray(R,L,i.id+":198"),I;return s[15]!==h||s[16]!==E||s[17]!==y||s[18]!==C?(I=[E,h,C,y],s[15]=h,s[16]=E,s[17]=y,s[18]=C,s[19]=I):I=s[19],I}function C(e){var t=e.attachmentType,n=e.defaultCtaType;return(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))?n==="xma_web_url"||n==="xma_open_native":!1}function b(e,t){var n=o("react-compiler-runtime").c(7),a;n[0]===Symbol.for("react.memo_cache_sentinel")?(a=(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").LINKS),n[0]=a):a=n[0];var i=g(e,a,C,t),l=i[0],s=i[1],c=i[2],d=i[3],m;n[1]===Symbol.for("react.memo_cache_sentinel")?(m=(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").LINKS),n[1]=m):m=n[1];var p;return n[2]!==l||n[3]!==s||n[4]!==d||n[5]!==c?(p=[l,m,s,c,d],n[2]=l,n[3]=s,n[4]=d,n[5]=c,n[6]=p):p=n[6],p}function v(e){var t=e.attachmentType,n=e.gifPlayback,a=(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)),i=s.equal(t,u.ofNumber(r("MessagingAttachmentType").VIDEO)),l=n!==!0;return(a||i)&&(l||!r("gkx")("5398"))}function S(e,t){var n=o("react-compiler-runtime").c(7),a;n[0]===Symbol.for("react.memo_cache_sentinel")?(a=(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),n[0]=a):a=n[0];var i=g(e,a,v,t),l=i[0],s=i[1],c=i[2],d=i[3],m;n[1]===Symbol.for("react.memo_cache_sentinel")?(m=(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),n[1]=m):m=n[1];var p;return n[2]!==l||n[3]!==s||n[4]!==d||n[5]!==c?(p=[l,m,s,c,d],n[2]=l,n[3]=s,n[4]=d,n[5]=c,n[6]=p):p=n[6],p}function R(e,t){var n=o("react-compiler-runtime").c(7),a;n[0]===Symbol.for("react.memo_cache_sentinel")?(a=(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),n[0]=a):a=n[0];var i=y(e,a,v,t),l=i[0],s=i[1],c=i[2],d=i[3],m;n[1]===Symbol.for("react.memo_cache_sentinel")?(m=(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),n[1]=m):m=n[1];var p;return n[2]!==s||n[3]!==l||n[4]!==d||n[5]!==c?(p=[l,m,s,c,d],n[2]=s,n[3]=l,n[4]=d,n[5]=c,n[6]=p):p=n[6],p}function L(e){var t=e.attachmentType;return(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE))}function E(e,t){var n=o("react-compiler-runtime").c(7),a;n[0]===Symbol.for("react.memo_cache_sentinel")?(a=(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").FILES_ONLY),n[0]=a):a=n[0];var i=g(e,a,L,t),l=i[0],s=i[1],c=i[2],d=i[3],m;n[1]===Symbol.for("react.memo_cache_sentinel")?(m=(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").FILES_ONLY),n[1]=m):m=n[1];var p;return n[2]!==l||n[3]!==s||n[4]!==d||n[5]!==c?(p=[l,m,s,c,d],n[2]=l,n[3]=s,n[4]=d,n[5]=c,n[6]=p):p=n[6],p}function k(t,n){var a=o("react-compiler-runtime").c(17),l=(e||(e=r("useReStore")))(),u;a[0]!==l.tables.attachments_ranges_v2__generated||a[1]!==n||a[2]!==t?(u=function(){return o("ReQL").fromTableDescending(l.tables.attachments_ranges_v2__generated).getKeyRange(t).filter(function(e){return(s||(s=o("I64"))).equal(e.mediaGroup,n)})},a[0]=l.tables.attachments_ranges_v2__generated,a[1]=n,a[2]=t,a[3]=u):u=a[3];var c;a[4]!==l||a[5]!==n||a[6]!==t?(c=[l,t,n],a[4]=l,a[5]=n,a[6]=t,a[7]=c):c=a[7];var d=o("ReQLSuspense").useFirst(u,c,i.id+":368"),m=d==null?void 0:d.minTimestampMs,p=d==null?void 0:d.hasMoreBefore,_;if(a[8]!==l.tables.attachments||a[9]!==m||a[10]!==t){var f=o("ReQL").fromTableDescending(l.tables.attachments.index("fk_messages")).getKeyRange(t);_=m!=null&&(s||(s=o("I64"))).to_float(m)!==Number.MAX_SAFE_INTEGER?f.bounds({gte:o("ReQL").key(m)}):f,a[8]=l.tables.attachments,a[9]=m,a[10]=t,a[11]=_}else _=a[11];var g=_,h;return a[12]!==d||a[13]!==p||a[14]!==m||a[15]!==g?(h={attachmentsRange:d,hasMoreBefore:p,minTimestampMs:m,query:g},a[12]=d,a[13]=p,a[14]=m,a[15]=g,a[16]=h):h=a[16],h}l.useLoader=f,l.useQueryLinkAttachments=b,l.filterMediaAttachments=v,l.useQueryMediaAttachments=S,l.useQueryMediaAttachmentsWithMessages=R,l.useQueryFileAttachments=E,l.useAttachmentsQuery=k}),98);
__d("MessengerChevronLeftFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M21.884 8.866a1.25 1.25 0 0 1 0 1.768l-7.19 7.19a.25.25 0 0 0 0 .353l7.19 7.19a1.25 1.25 0 0 1-1.768 1.767l-8.25-8.25a1.25 1.25 0 0 1 0-1.768l8.25-8.25a1.25 1.25 0 0 1 1.768 0z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("VideoPlayerCaptionsDisplayConfigContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({liveCaptionsTextAlignment:null,textSizeMapping:null});l.default=u}),98);
__d("VideoPlayerCaptionsDisplay.react",["FBLogger","VideoPlayerCaptionsDisplayConfigContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerHooks","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s.useContext,m={captionsCenterAlign:{justifyContent:"xl56j7k",textAlign:"x2b8uid",$$css:!0},captionsContainer:{bottom:"xfqi8uc",boxSizing:"x9f619",display:"x78zum5",justifyContent:"xl56j7k",position:"x10l6tqk",textAlign:"x2b8uid",transitionDuration:"xu6gjpd",transitionProperty:"x11xpdln",transitionTimingFunction:"x1r7x56h",width:"xh8yej3",$$css:!0},captionsLeftAlign:{justifyContent:"x1nhvcw1",textAlign:"x1yc453h",$$css:!0},captionsRightAlign:{justifyContent:"x13a6bvl",textAlign:"xp4054r",$$css:!0}},p={BIG:"25px",BIGGER:"30px",BIGGEST:"34px",DEFAULT:"17px",MEDIUM:"21px",SMALL:"13px",SMALLEST:"8px"},_={DARK:.75,DEFAULT:.45,LIGHT:.25,OPAQUE:1,TRANSPARENT:0},f={BLACK:"20, 22, 26",BLUE:"0, 0, 255",CYAN:"0, 255, 255",GREEN:"0, 255, 0",MAGENTA:"255, 0, 255",RED:"255, 0, 0",WHITE:"255, 255, 255",YELLOW:"255, 255, 0"};function g(e){switch(e){case"center":return m.captionsCenterAlign;case"left":return m.captionsLeftAlign;case"right":return m.captionsRightAlign;default:r("FBLogger")("comet_video_player").mustfix("Unsupported captions text alignment: %s",e)}}function h(e,t,n){var r={},o=e.captionsBackgroundColor,a=e.captionsBackgroundOpacity,i=e.captionsTextColor,l=e.captionsTextSize;if(o!==null){var s=a!==null?_[a]:1;r.backgroundColor="rgba("+f[o]+","+s+")"}return i!==null&&(r.color="rgba("+f[i]+")"),l!==null&&(r.fontSize=t!=null?babelHelpers.extends({},p,t)[l]:p[l]),n&&(r.marginBottom=35),r}function y(t){var n,a,i=o("react-compiler-runtime").c(14),l=t.activeCaptions,s=t.adjustments,p=t.captionDisplayStyle,_=l==null?void 0:l.rows,f=d(r("VideoPlayerCaptionsDisplayConfigContext")),y=f.liveCaptionsTextAlignment,S=f.textSizeMapping,R=d(o("VideoPlayerControlsBottomRowAddOnContext").VideoPlayerControlsBottomRowAddOnContext),L;i[0]!==R?(L=R==null?void 0:R.getBottomRowAddOn(),i[0]=R,i[1]=L):L=i[1];var E=L!=null,k;i[2]===Symbol.for("react.memo_cache_sentinel")?(k={},i[2]=k):k=i[2];var I=k;if(p){var T;i[3]!==p||i[4]!==E||i[5]!==S?(T=h(p,S,E),i[3]=p,i[4]=E,i[5]=S,i[6]=T):T=i[6],I=T}var D=(u||(u=o("VideoPlayerHooks"))).useIsLive(),x=(n=l==null||(a=l.styles)==null?void 0:a.textAlignment)!=null?n:"center";if(_!=null&&_.length>0){var $;if(i[7]!==s||i[8]!==I||i[9]!==x||i[10]!==D||i[11]!==y||i[12]!==_){var P=_.map(v).filter(b);$=P.length>0?c.jsx("div",{className:(e||(e=r("stylex")))(m.captionsContainer,g(D&&y!=null?y:x)),style:{paddingLeft:s.left,paddingRight:s.right,transform:"translateY("+-s.bottom+"px)"},children:c.jsx("div",{className:"x18l40ae x14ctfv x1lkfr7t xk50ysn x37zpob xdj266r x32vodv xat24cr x1v6o4qg xulzisn xoge9qh x1uwfbks xytt9sc",style:I,children:P.map(C)})}):null,i[7]=s,i[8]=I,i[9]=x,i[10]=D,i[11]=y,i[12]=_,i[13]=$}else $=i[13];return $}return null}function C(e,t){return c.jsxs("span",{children:[e,c.jsx("br",{})]},t)}C.displayName=C.name+" [from "+i.id+"]";function b(e){return!!e}function v(e){return e.trim()}var S=c.memo(y),R=S;l.default=R}),98);
__d("useVideoPlayerCaptionsDisplayAdjustments",["VideoPlayerHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useMemo;function c(){var e=o("react-compiler-runtime").c(2),t=(s||(s=o("VideoPlayerHooks"))).useVideoPlayerCaptionsReservations(),n;return e[0]!==t?(n={bottom:0,left:0,right:0,top:0},t.length>0&&t.forEach(function(e){n[e.location]=n[e.location]+e.size}),e[0]=t,e[1]=n):n=e[1],n}l.default=c}),98);
__d("VideoPlayerCaptions.react",["VideoPlayerCaptionsDisplay.react","VideoPlayerHooks","react","react-compiler-runtime","useVideoPlayerCaptionsDisplayAdjustments"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react"));function c(){var e=o("react-compiler-runtime").c(4),t=(s||(s=o("VideoPlayerHooks"))).useActiveCaptions(),n=r("useVideoPlayerCaptionsDisplayAdjustments")(),a=s.useCaptionDisplayStyle(),i;return e[0]!==t||e[1]!==n||e[2]!==a?(i=u.jsx(r("VideoPlayerCaptionsDisplay.react"),{activeCaptions:t,adjustments:n,captionDisplayStyle:a}),e[0]=t,e[1]=n,e[2]=a,e[3]=i):i=e[3],i}l.default=c}),98);
__d("VideoPlayerCaptionsArea.react",["VideoPlayerCaptions.react","VideoPlayerContexts","VideoPlayerHooks","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.useReducer,p=d.useState;function _(e,t){switch(t.type){case"reserve":return e.concat(t.reservation);case"release":return e.filter(function(e){return e!==t.reservation});default:return e}}function f(e){var t=o("react-compiler-runtime").c(11),n=e.children,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],t[0]=a):a=t[0];var i=m(_,a),l=i[0],d=i[1],f;t[1]===Symbol.for("react.memo_cache_sentinel")?(f={release:function(t){d({reservation:t,type:"release"})},reserve:function(t){return d({reservation:t,type:"reserve"}),t}},t[1]=f):f=t[1];var g=p(f),h=g[0],y=(s||(s=o("VideoPlayerHooks"))).useCaptionsVisible(),C;t[2]!==y?(C=y?c.jsx(r("VideoPlayerCaptions.react"),{}):null,t[2]=y,t[3]=C):C=t[3];var b;t[4]!==n||t[5]!==l||t[6]!==C?(b=c.jsxs((u||(u=o("VideoPlayerContexts"))).VideoPlayerCaptionsReservationsContext.Provider,{value:l,children:[C,n]}),t[4]=n,t[5]=l,t[6]=C,t[7]=b):b=t[7];var v;return t[8]!==h||t[9]!==b?(v=c.jsx((u||(u=o("VideoPlayerContexts"))).VideoPlayerCaptionsReservationActionsContext.Provider,{value:h,children:b}),t[8]=h,t[9]=b,t[10]=v):v=t[10],v}l.default=f}),98);
__d("VideoPlayerSpinner.react",["CometLightweightVideoAttachmentContext","FDSLoadingAnimation.react","gkx","react","react-compiler-runtime","stylex","useDebouncedValue"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useContext,d=36,m={spinner:{height:"xc9qbxq",insetInlineStart:"xbudbmw",opacity:"x1hc1fzr",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",transitionDelay:"x5w5eug",transitionDuration:"x13dflua",transitionProperty:"x19991ni",transitionTimingFunction:"xl405pv",width:"x14qfxbe",$$css:!0},spinnerHidden:{opacity:"xg01cxk",transitionDelay:"x2p8vrm",transitionDuration:"x13dflua",transitionProperty:"x1jl3cmp",transitionTimingFunction:"xl405pv",visibility:"xlshs6z",$$css:!0},spinnerSnappier:{transitionDelay:"x2p8vrm",$$css:!0},spinnerSnappierHidden:{transitionDelay:"x1ahifba",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(8),a=t.isVisible,i=r("useDebouncedValue")(a,a?200:500),l=c(r("CometLightweightVideoAttachmentContext")),s=l.isLightweightVideoAttachment,p;n[0]!==a?(p=(e||(e=r("stylex"))).props(m.spinner,r("gkx")("24333")?[m.spinnerSnappier,!a&&m.spinnerHidden,!a&&m.spinnerSnappierHidden]:[!a&&m.spinnerHidden]),n[0]=a,n[1]=p):p=n[1];var _=!i,f=s?"media":"default",g;n[2]!==_||n[3]!==f?(g=u.jsx(r("FDSLoadingAnimation.react"),{animationPaused:_,color:f,size:d}),n[2]=_,n[3]=f,n[4]=g):g=n[4];var h;return n[5]!==p||n[6]!==g?(h=u.jsx("div",babelHelpers.extends({},p,{children:g})),n[5]=p,n[6]=g,n[7]=h):h=n[7],h}l.default=p}),98);
__d("VideoPlayerStateBasedLoggingEventsJSModuleWrapper",["VideoPlayerStateBasedLoggingEvents"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("VideoPlayerStateBasedLoggingEvents")}),98);
__d("useAudioAvailabilityAtPlayhead",["VideoPlayerAudioAvailabilityInfo","VideoPlayerHooks","react-compiler-runtime","useVideoPlayerControllerSubscription"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(2),n=(e||(e=o("VideoPlayerHooks"))).useAudioAvailabilityInfo(),a;t[0]!==n?(a=function(t,r){var e=t.getPlayheadPosition(),a=o("VideoPlayerAudioAvailabilityInfo").makeVideoPlayerAudioAvailabilityAtPlayheadInfo(n,{playheadPosition:e});return r!=null&&r.isPlayheadWithinMutedSegment===a.isPlayheadWithinMutedSegment&&r.isSilentAtPlayhead===a.isSilentAtPlayhead&&r.volumeControlState===a.volumeControlState?r:a},t[0]=n,t[1]=a):a=t[1];var i=a;return r("useVideoPlayerControllerSubscription")(i)}l.default=s}),98);
__d("useLoadMoreThreadSharedAttachments.react",["Int64Hooks","LSFactory","LSIssueAttachmentsRangeQueryStoredProcedure","MAWThreadCutover","MWThreadKey.react","promiseDone","react-compiler-runtime","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var a=o("react-compiler-runtime").c(6),l=r("useAsyncReStore")(),s=o("MWThreadKey.react").useMWThreadKeyMemoized();s==null&&(s=t);var u=o("MAWThreadCutover").useGetCutoverOpenThreadKey(s),c=u!=null?u:s,d,m;return a[0]!==l||a[1]!==c||a[2]!==n||a[3]!==e?(d=function(){n==null||n(),r("promiseDone")(l,function(t){return t.runInTransaction(function(t){return r("LSIssueAttachmentsRangeQueryStoredProcedure")(r("LSFactory")(t),{mediaGroup:e,threadKey:c})},"readwrite",void 0,void 0,i.id+":40")})},m=[n,l,e,c],a[0]=l,a[1]=c,a[2]=n,a[3]=e,a[4]=d,a[5]=m):(d=a[4],m=a[5]),o("Int64Hooks").useCallbackInt64(d,m)}l.default=e}),98);
__d("useMAWLoadMoreThreadSharedAttachments",["I64","Int64Hooks","LSThreadMediaGalleryGroup","MAWBridgeSendAndReceive","MAWEBCombinedSwitch","MAWMediaGalleryEBTaggingUtils","MAWMediaRestoreEBRange","MAWMiActOnActThreadReady","MAWMpsGating","MAWMsgType","MAWProtobufDeserializers","MSGDataclassTypes.flow","MpsMediaToBridge","MpsMessageToBridge","MpsOverBridge","MpsTypes","WAJids","WAResultOrError","cr:20241","err","gkx","justknobx","nullthrows","promiseDone","react-compiler-runtime","requireDeferred","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("MAWBridgeNewMediaHandler").__setRef("useMAWLoadMoreThreadSharedAttachments"),c=r("requireDeferred")("MAWBridgeNewMediaRangeHandler").__setRef("useMAWLoadMoreThreadSharedAttachments"),d=r("requireDeferred")("MAWBridgeNewMsgHandler").__setRef("useMAWLoadMoreThreadSharedAttachments"),m=r("justknobx")._("2538"),p=r("justknobx")._("3916"),_=r("justknobx")._("3177"),f="timeout";async function g(e){var t,n,a=e.jid,i=e.mediaGalleryGroup,l=e.nextTimestampMsBefore,s=e.numMessages,u=e.threadId,c=i===r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS?[o("MSGDataclassTypes.flow").MpsMessageTag.Photo,o("MSGDataclassTypes.flow").MpsMessageTag.Video]:i===r("LSThreadMediaGalleryGroup").FILES_ONLY?[o("MSGDataclassTypes.flow").MpsMessageTag.File]:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+i)})(),d=r("justknobx")._("3251")&&!o("MAWEBCombinedSwitch").MAWEBCombinedSwitch.isEnabled(),_=o("MpsOverBridge").mps().loadMessages({config:{persistToReverb:"persist",shouldFetchSupplementals:!1,shouldFetchTags:!0,shouldIgnoreLocalOnly:!0,strategy:"full-fetch",tagsFilter:d?"all":new Set(c)},debug:{purpose:"MAWFetchMedia"},direction:"desc",from:[o("MpsTypes").toTimestamp(Number(l)),null],numMessages:20,threadId:o("MpsTypes").toThreadId(a)}),h=null,y=await Promise.race([_,new Promise(function(e){h=window.setTimeout(function(){return e(o("WAResultOrError").makeError(f))},p)})]);if(window.clearTimeout(h),y.success===!1)return y;var C=y.value.cursorInfo,b=(t=(n=C.endCursor)==null?void 0:n[0])!=null?t:o("MpsTypes").toTimestamp(0);return l===b?s===m?o("WAResultOrError").makeError("Retried with max pageSize: "+m+". Still stuck"):g({jid:a,mediaGalleryGroup:i,nextTimestampMsBefore:b,numMessages:m,threadId:u}):y}function h(e,t){var n,a=t.jid,l=t.mediaGalleryGroup,s=t.result,m=t.threadKey;if(s.success===!1)return Promise.reject(r("err")("Failed to fetch media using EB tags filter"));var p=[],_=[],f=s.value.messages.filter(function(e){var t=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e.toplevelProtobuf.payload).encryptedTransportMessage(),n=t==null?void 0:t.consumerMessage();return l===r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS?n!=null&&(o("MpsMediaToBridge").getMediaTypeForMessage(n)===o("MAWMsgType").MSG_TYPE.IMAGE||o("MpsMediaToBridge").getMediaTypeForMessage(n)===o("MAWMsgType").MSG_TYPE.VIDEO):l===r("LSThreadMediaGalleryGroup").FILES_ONLY?n!=null&&o("MpsMediaToBridge").getMediaTypeForMessage(n)===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+l)})()});f.forEach(function(e){var t,n=(t=o("MpsMessageToBridge").mpsFullMessagetoBridge(e))!=null?t:{},r=n.supplementals,a=n.topLevel;r==null||r.forEach(function(e){e.kind==="bridgeMedia"&&p.push(e.value)}),(a==null?void 0:a.kind)==="bridgeMsg"&&_.push(a.value)});var g=(n=s.value)==null?void 0:n.cursorInfo.hasNext,h=o("MAWMediaRestoreEBRange").getMediaRestoreEBRange(l);return g===!1&&h.updateRange(m,babelHelpers.extends({},h.getRange(m),{hasMoreBefore:!1})),Promise.all([c.load(),u.load(),d.load()]).then(function(t){var n=t[0],r=t[1],o=t[2];return e.runInTransaction(async function(e){var t;await Promise.all([n.call(e,{earliestLoadedMediaTs:((t=s.value.cursorInfo)==null||(t=t.endCursor)==null?void 0:t[0])!=null?Number(s.value.cursorInfo.endCursor[0]):Number.MAX_SAFE_INTEGER,hasMoreBefore:g,lastLoadedMessageId:void 0,mediaGalleryGroup:l,threadJid:a})].concat(p.map(function(t){return r.call(e,babelHelpers.extends({},t,{skipShouldUpdateHasMore:!0}))}),_.map(function(t){return o.call(e,t)})))},"readwrite",void 0,void 0,i.id+":237")})}function y(t){var a=o("react-compiler-runtime").c(18),i=t.earliestLoadedMediaMessageId,l=t.hasMoreBefore,u=t.mediaGalleryGroup,c=t.minTimestampMs,d=t.pageSize,m=t.qplLogger,p=t.threadKey,f=(s||(s=r("useReStore")))(),y;a[0]!==u?(y=o("MAWMediaGalleryEBTaggingUtils").toMediaGalleryGroupForTaggedRestore(u),a[0]=u,a[1]=y):y=a[1];var b=y,v=n("cr:20241")!=null&&b!=null,S,R;a[2]!==v||a[3]!==l||a[4]!==c?(S=function(){return l!=null&&l&&c!=null?(e||(e=o("I64"))).to_float(c):v?0xffffffffffff:Number.MAX_SAFE_INTEGER},R=[l,c,v],a[2]=v,a[3]=l,a[4]=c,a[5]=S,a[6]=R):(S=a[5],R=a[6]);var L=o("Int64Hooks").useCallbackInt64(S,R),E,k;return a[7]!==f||a[8]!==i||a[9]!==v||a[10]!==L||a[11]!==u||a[12]!==b||a[13]!==d||a[14]!==m||a[15]!==p?(E=function(){p!=null&&(m==null||m.logLoadMediaStart==null||m.logLoadMediaStart(),r("promiseDone")(o("MAWMiActOnActThreadReady").onActThreadReady(f.tables,p,"useMAWLoadMoreThreadSharedAttachments",function(e,t){var a=o("MAWMediaRestoreEBRange").getMediaRestoreEBRange(u),l=r("gkx")("13725")&&(b===r("LSThreadMediaGalleryGroup").FILES_ONLY||b===r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS&&o("MAWMpsGating").isMpsMessageRendering());if(l){var s=r("nullthrows")(b);return g({jid:t,mediaGalleryGroup:s,nextTimestampMsBefore:o("MpsTypes").toTimestamp(L()),numMessages:_,threadId:o("WAJids").threadIdForChatJid(t)}).then(function(e){return h(f,{jid:t,mediaGalleryGroup:s,result:e,threadKey:p})}).then(C)}return(v?r("nullthrows")(n("cr:20241")).MAWFetchAndPersistMedia(t,p,r("nullthrows")(b),m,a):Promise.resolve()).then(function(){return m==null||m.addPoint("fetch_from_maw_db",{int:{mediaGalleryGroup:u}}),o("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMedia",{earliestLoadedMediaMessageId:i,earliestLoadedMediaTs:L(),mediaGalleryGroup:u,pageSize:d,threadJid:t})})})))},k=[f,p,u,m,i,L,d,b,v],a[7]=f,a[8]=i,a[9]=v,a[10]=L,a[11]=u,a[12]=b,a[13]=d,a[14]=m,a[15]=p,a[16]=E,a[17]=k):(E=a[16],k=a[17]),o("Int64Hooks").useCallbackInt64(E,k)}function C(){}l.default=y}),98);
__d("useMAWQuerySecureMediaAttachments",["I64","LSIntEnum","LSThreadMediaGalleryGroup","MWSharedAttachmentsSectionHooks","ReQL","ReQLSuspense","justknobx","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useCallback,p=d.useMemo;function _(t,n,a){var l=o("react-compiler-runtime").c(29),c;l[0]!==a?(c=a===void 0?{}:a,l[0]=a,l[1]=c):c=l[1];var d=c,m=d.removeUnsentMessages,p=m===void 0?!1:m,_=(e||(e=r("useReStore")))(),h;l[2]!==n?(h=n==null?r("justknobx")._("1132"):n,l[2]=n,l[3]=h):h=l[3];var C=h,b;l[4]===Symbol.for("react.memo_cache_sentinel")?(b=(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),l[4]=b):b=l[4];var v=o("MWSharedAttachmentsSectionHooks").useAttachmentsQuery(t,b),S=v.attachmentsRange,R=v.hasMoreBefore,L=v.minTimestampMs,E=v.query,k;l[5]!==_||l[6]!==p?(k=function(t){if(!o("MWSharedAttachmentsSectionHooks").filterMediaAttachments(t))return null;var e=o("ReQLSuspense").first(o("ReQL").fromTableAscending(_.tables.messages.index("messageId")).getKeyRange(t.messageId),i.id+":81");return p&&(e==null||e.isUnsent)?null:e==null?{attachment:t}:{attachment:t,message:e}},l[5]=_,l[6]=p,l[7]=k):k=l[7];var I=k,T;l[8]!==C||l[9]!==I||l[10]!==L||l[11]!==E?(T=function(){var e=E.map(I).filter(Boolean);return(L==null||(u||(u=o("I64"))).equal(L,(u||(u=o("I64"))).zero))&&(e=e.take(C)),e},l[8]=C,l[9]=I,l[10]=L,l[11]=E,l[12]=T):T=l[12];var D;l[13]!==_||l[14]!==I||l[15]!==L||l[16]!==t?(D=[_,t,I,L],l[13]=_,l[14]=I,l[15]=L,l[16]=t,l[17]=D):D=l[17];var x=o("ReQLSuspense").useArray(T,D,i.id+":99"),$;l[18]!==x?($=g(x),$.sort(y),l[18]=x,l[19]=$):$=l[19];var P=$,N;l[20]!==P?(N=P.map(f),l[20]=P,l[21]=N):N=l[21];var M=N,w;l[22]===Symbol.for("react.memo_cache_sentinel")?(w=(s||(s=o("LSIntEnum"))).ofNumber(r("LSThreadMediaGalleryGroup").PHOTOS_AND_VIDEOS),l[22]=w):w=l[22];var A;return l[23]!==M||l[24]!==S||l[25]!==x||l[26]!==R||l[27]!==L?(A=[M,w,S,L,R,x],l[23]=M,l[24]=S,l[25]=x,l[26]=R,l[27]=L,l[28]=A):A=l[28],A}function f(e){var t=e.attachment;return t}function g(e){var t=h(e);return e.map(function(e){var n,r=e.attachment,a=e.message,i=a==null?void 0:a.groupId,l=t.get(i!=null?i:"");if(i==null||l==null){var s,c,d;return{attachment:r,message:a,sortKey:{sortingMessageGroupIndex:Number.MAX_SAFE_INTEGER,sortingMessageId:r.messageId,sortingMessagePrimarySortTS:(s=a==null?void 0:a.primarySortKey)!=null?s:r.timestampMs,sortingMessageSecondarySortTS:(c=(d=a==null?void 0:a.secondarySortKey)!=null?d:a==null?void 0:a.timestampMs)!=null?c:r.timestampMs}}}return{attachment:r,message:a,sortKey:{sortingMessageGroupIndex:(u||(u=o("I64"))).to_int32((n=a==null?void 0:a.groupIndex)!=null?n:(u||(u=o("I64"))).zero),sortingMessageId:l.messageId,sortingMessagePrimarySortTS:l.primarySortTs,sortingMessageSecondarySortTS:l.secondarySortTs}}})}function h(e){var t=new Map;return e.forEach(function(e){var n,r,a,i=e.message;if(!(!i||i.groupId==null||i.groupIndex==null)){var l=i.groupId,s=(u||(u=o("I64"))).to_int32(i.groupIndex),c=Math.min((n=(r=t.get(l))==null?void 0:r.groupIndex)!=null?n:Number.MAX_SAFE_INTEGER,s),d=s===c?{groupIndex:s,messageId:i.messageId,primarySortTs:i.primarySortKey,secondarySortTs:(a=i.secondarySortKey)!=null?a:i.timestampMs}:t.get(l);d&&t.set(l,d)}}),t}function y(e,t){var n=e.sortKey,r=t.sortKey,a=e.message,i=t.message;return(u||(u=o("I64"))).equal(n.sortingMessagePrimarySortTS,r.sortingMessagePrimarySortTS)?(u||(u=o("I64"))).equal(r.sortingMessageSecondarySortTS,n.sortingMessageSecondarySortTS)?n.sortingMessageId!==r.sortingMessageId?r.sortingMessageId.localeCompare(n.sortingMessageId):(a==null?void 0:a.groupId)!=null&&(i==null?void 0:i.groupId)!=null&&a.groupId===i.groupId?r.sortingMessageGroupIndex-n.sortingMessageGroupIndex:0:(u||(u=o("I64"))).compare(r.sortingMessageSecondarySortTS,n.sortingMessageSecondarySortTS):(u||(u=o("I64"))).compare(r.sortingMessagePrimarySortTS,n.sortingMessagePrimarySortTS)}l.default=_}),98);
__d("useMWMediaLoadingQplLogger",["MWMediaRenderQplUtils","QPLUserFlow","QuickPerformanceLogger","Random","gkx","isEbEnabledWithIGDEligibilityCheck","promiseDone","qpl","react","react-compiler-runtime","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useEffect,m=u.useMemo;function p(t){var n=o("react-compiler-runtime").c(13),a=t.entrypoint,i=t.threadType,l=r("useAsyncReStore")(),s;n[0]===Symbol.for("react.memo_cache_sentinel")?(s=C(),n[0]=s):s=n[0];var u=s,c;n[1]!==l||n[2]!==a||n[3]!==i?(c=function(t){var e,n;_({dbPromise:l,entrypoint:a,instanceKey:u,isCutoverThread:(e=t==null?void 0:t.isCutoverThread)!=null?e:!1,isPreCutoverMedia:(n=t==null?void 0:t.isPreCutoverMedia)!=null?n:!1,threadType:i})},n[1]=l,n[2]=a,n[3]=i,n[4]=c):c=n[4];var m=c,p;n[5]===Symbol.for("react.memo_cache_sentinel")?(p=function(t){var e=t.fetchedMediaCount,n=t.isAlreadyPreloaded,r=t.startMediaCount;f({fetchedMediaCount:e,instanceKey:u,isAlreadyPreloaded:n,startMediaCount:r})},n[5]=p):p=n[5];var b=p,v;n[6]===Symbol.for("react.memo_cache_sentinel")?(v=function(){g({instanceKey:u})},n[6]=v):v=n[6];var S=v,R;n[7]===Symbol.for("react.memo_cache_sentinel")?(R=function(t,n){h({annotations:n,instanceKey:u,name:t})},n[7]=R):R=n[7];var L=R,E;n[8]===Symbol.for("react.memo_cache_sentinel")?(E=function(t){y({annotations:t,instanceKey:u})},n[8]=E):E=n[8];var k=E,I,T;n[9]===Symbol.for("react.memo_cache_sentinel")?(I=function(){return(function(){var t=(e||(e=r("QuickPerformanceLogger"))).isMarkerOn(r("qpl")._(25300395,"1954"),u);t&&S()})},T=[u,S],n[9]=I,n[10]=T):(I=n[9],T=n[10]),d(I,T);var D;return n[11]!==m?(D={addAnnotations:k,addPoint:L,logLoadMediaCancel:S,logLoadMediaStart:m,logLoadMediaSuccess:b},n[11]=m,n[12]=D):D=n[12],D}function _(e){var t=e.dbPromise,n=e.entrypoint,a=e.instanceKey,i=e.isCutoverThread,l=i===void 0?!1:i,s=e.isPreCutoverMedia,u=s===void 0?!1:s,c=e.threadType;r("QPLUserFlow").start(r("qpl")._(25300395,"1954"),{annotations:{bool:{hasEBTagging:r("gkx")("13725"),isCutoverThread:l,isPreCutoverMedia:u},string:{entrypoint:n,threadType:o("MWMediaRenderQplUtils").getThreadTypeStringFromEnum(c)}},cancelOnUnload:!0,instanceKey:a,timeoutInMs:60*1e3}),r("promiseDone")(t.then(function(e){return o("isEbEnabledWithIGDEligibilityCheck").isEbEnabledWithIGDEligibilityCheck(e)}),function(e){y({annotations:{bool:{isEBEnabled:e}},instanceKey:a})})}function f(e){var t=e.fetchedMediaCount,n=e.instanceKey,o=e.isAlreadyPreloaded,a=e.startMediaCount;r("QPLUserFlow").endSuccess(r("qpl")._(25300395,"1954"),{annotations:{bool:{isAlreadyPreloaded:o!=null?o:!1},int:{fetchedMediaCount:t,startMediaCount:a}},instanceKey:n})}function g(e){var t=e.instanceKey;r("QPLUserFlow").endCancel(r("qpl")._(25300395,"1954"),{instanceKey:t})}function h(e){var t=e.annotations,n=e.instanceKey,o=e.name;r("QPLUserFlow").addPoint(r("qpl")._(25300395,"1954"),o,{data:t,instanceKey:n})}function y(e){var t=e.annotations,n=e.instanceKey;r("QPLUserFlow").addAnnotations(r("qpl")._(25300395,"1954"),t,{instanceKey:n})}function C(){return Date.now()+Math.round(o("Random").random()*1e4)}l.default=p}),98);
__d("useMAWLoadMoreCutoverThreadSharedAttachments",["MAWDbMsg","MWSharedAttachmentsSectionHooks","react","react-compiler-runtime","useLoadMoreThreadSharedAttachments.react","useMAWLoadMoreThreadSharedAttachments","useMAWQuerySecureMediaAttachments","useMWMediaLoadingQplLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e,t,n,a,i,l,s){var u=o("react-compiler-runtime").c(55),d=r("useMAWQuerySecureMediaAttachments")(e,s),m=d[0],p=d[1],_=d[2],f=d[3],g=d[4],h;u[0]!==(_==null?void 0:_.lastLoadedMessageId)?(h=(_==null?void 0:_.lastLoadedMessageId)!=null?o("MAWDbMsg").toMsgId(_==null?void 0:_.lastLoadedMessageId):void 0,u[0]=_==null?void 0:_.lastLoadedMessageId,u[1]=h):h=u[1];var y=h,C=g!=null?g:!0,b;u[2]!==a.entrypoint||u[3]!==n?(b={entrypoint:a.entrypoint,threadType:n},u[2]=a.entrypoint,u[3]=n,u[4]=b):b=u[4];var v=r("useMWMediaLoadingQplLogger")(b),S;u[5]!==v?(S=function(){v.logLoadMediaStart({isCutoverThread:!0,isPreCutoverMedia:!1})},u[5]=v,u[6]=S):S=u[6];var R=S,L=y!=null?y:void 0,E;u[7]!==R||u[8]!==v?(E=babelHelpers.extends({},v,{logLoadMediaStart:R}),u[7]=R,u[8]=v,u[9]=E):E=u[9];var k;u[10]!==g||u[11]!==i||u[12]!==f||u[13]!==s||u[14]!==e||u[15]!==L||u[16]!==E?(k={earliestLoadedMediaMessageId:L,hasMoreBefore:g,mediaGalleryGroup:i,minTimestampMs:f,pageSize:s,qplLogger:E,threadKey:e},u[10]=g,u[11]=i,u[12]=f,u[13]=s,u[14]=e,u[15]=L,u[16]=E,u[17]=k):k=u[17];var I=r("useMAWLoadMoreThreadSharedAttachments")(k),T=o("MWSharedAttachmentsSectionHooks").useQueryMediaAttachments(t),D=T[0],x=T[2],$=T[4],P=$!=null?$:!1,N;u[18]!==v?(N=function(){v.logLoadMediaStart({isCutoverThread:!0,isPreCutoverMedia:!0})},u[18]=v,u[19]=N):N=u[19];var M=N,w=r("useLoadMoreThreadSharedAttachments.react")(p,t,M),A;u[20]!==_||u[21]!==C||u[22]!==I||u[23]!==m||u[24]!==v.logLoadMediaCancel||u[25]!==v.logLoadMediaSuccess?(A={attachmentsRange:_,hasMore:C,loadMore:I,logLoadMediaCancel:v.logLoadMediaCancel,logLoadMediaSuccess:v.logLoadMediaSuccess,media:m},u[20]=_,u[21]=C,u[22]=I,u[23]=m,u[24]=v.logLoadMediaCancel,u[25]=v.logLoadMediaSuccess,u[26]=A):A=u[26];var F=o("MWSharedAttachmentsSectionHooks").useLoader(A),O=F[0],B=F[1],W=F[2],q=C||O,U;u[27]!==x||u[28]!==P||u[29]!==w||u[30]!==D||u[31]!==v.logLoadMediaCancel||u[32]!==v.logLoadMediaSuccess||u[33]!==q?(U={attachmentsRange:x,hasMore:P,loadMore:w,logLoadMediaCancel:v.logLoadMediaCancel,logLoadMediaSuccess:v.logLoadMediaSuccess,media:D,skipInitialLoad:q},u[27]=x,u[28]=P,u[29]=w,u[30]=D,u[31]=v.logLoadMediaCancel,u[32]=v.logLoadMediaSuccess,u[33]=q,u[34]=U):U=u[34];var V=o("MWSharedAttachmentsSectionHooks").useLoader(U),H=V[0],G=V[1],z=V[2];if(C||O||l===!0){var j;return u[35]!==W||u[36]!==C||u[37]!==O||u[38]!==m||u[39]!==B?(j={attachments:m,completedFirstLoad:W,hasMore:C,isLoadingMore:O,onLoadMore:B},u[35]=W,u[36]=C,u[37]=O,u[38]=m,u[39]=B,u[40]=j):j=u[40],j}else if(P||H){var K;u[41]!==D||u[42]!==m?(K=m.concat(D),u[41]=D,u[42]=m,u[43]=K):K=u[43];var Q;return u[44]!==z||u[45]!==P||u[46]!==H||u[47]!==G||u[48]!==K?(Q={attachments:K,completedFirstLoad:z,hasMore:P,isLoadingMore:H,onLoadMore:G},u[44]=z,u[45]=P,u[46]=H,u[47]=G,u[48]=K,u[49]=Q):Q=u[49],Q}else{var X;u[50]!==D||u[51]!==m?(X=m.concat(D),u[50]=D,u[51]=m,u[52]=X):X=u[52];var Y;return u[53]!==X?(Y={attachments:X,completedFirstLoad:!0,hasMore:!1,isLoadingMore:!1,onLoadMore:c},u[53]=X,u[54]=Y):Y=u[54],Y}}function c(){}l.default=u}),98);
__d("useMWV2MediaViewerOpenPlayableUrl",["I64","LSIntEnum","LSMediaUrlAttachment","MessagingAttachmentType","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e||(e=o("react"))).useCallback;function d(){return m}function m(e){if(e!=null)return(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))?o("LSMediaUrlAttachment").previewUrl(e):o("LSMediaUrlAttachment").playableUrl(e)}l.default=d}),98);
__d("useMWV2MediaViewerOpenPreviewUrl",["LSMediaUrlAttachment","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){return c}function c(e){return e!=null?o("LSMediaUrlAttachment").previewUrl(e):void 0}l.default=u}),98);
__d("useMWV2MediaViewerSecurePreviewUrl_CausesSuspense",["cr:5931","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){return c}function c(e,t,r){return n("cr:5931")==null?void 0:n("cr:5931").getThumbnailBlob_CausesSuspense(e,t,r)}l.default=u}),98);
__d("useVideoPlayerVolumeControlAudioAvailabilityUI",["fbt","CometTooltipImpl.react","VideoPlayerControlsHiddenContext","clearTimeout","emptyFunction","react","setTimeout","useAudioAvailabilityAtPlayhead","usePrevious","useStable"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useContext,m=c.useEffect,p=c.useRef,_=c.useState,f=3e3;function g(e){var t=e.canPlayerProduceSound,n=e.isHovering,o=r("useAudioAvailabilityAtPlayhead")(),a=o.isSilentAtPlayhead,l=o.volumeControlState,c=null;switch(l){case"VOLUME_SILENT":c=s._(/*BTDS*/"Video has no sound");break;case"VOLUME_COPYRIGHT_FULL":c=s._(/*BTDS*/"Muted due to copyright claim");break;case"VOLUME_COPYRIGHT_PARTIAL_SILENCED":c=s._(/*BTDS*/"Partially muted due to copyright claim");break;case"VOLUME_COPYRIGHT_PARTIAL_NOT_SILENCED":break;case"VOLUME_DEFAULT":break;default:}var g=r("usePrevious")(a),h=_(!1),y=h[0],C=h[1],b=p(r("emptyFunction")),v=p(!1),S=_(!1),R=S[0],L=S[1],E=r("useStable")(function(){return function(e){v.current=e,L(e),b.current(e),e||C(!1)}}),k=d(r("VideoPlayerControlsHiddenContext"));m(function(){k||c==null?E(!1):(n||y||a!==g&&a&&t)&&E(!0)},[c,t,k,n,y,a,g,E]),m(function(){if(R){var e=r("setTimeout")(function(){E(!1)},f);return function(){r("clearTimeout")(e)}}},[R,E]);var I=r("useStable")(function(){return function(){C(function(e){return!e})}}),T=r("useStable")(function(){function e(e){var t=_(!1),n=t[0],o=t[1];return m(function(){return b.current=o,function(){b.current=r("emptyFunction")}},[o]),m(function(){e.isVisible||E(!1)},[e.isVisible]),u.jsx(r("CometTooltipImpl.react"),babelHelpers.extends({},e,{isVisible:n}))}return e.displayName=e.name+" [from "+i.id+"]",e}),D=l==="VOLUME_COPYRIGHT_FULL"||l==="VOLUME_SILENT",x=t?a:D;return c==null?null:{onVolumeControlPress:I,shouldDisableVolumeControl:D,shouldShowNullIcon:x,tooltipContent:c,tooltipImpl:T,volumeControlState:l}}l.default=g}),226);/*FB_PKG_DELIM*/
__d("BaseGridFocusTable.react",["FocusTable.react","focusScopeQueries"],(function(t,n,r,o,a,i,l){"use strict";var e=o("FocusTable.react").createFocusTable(o("focusScopeQueries").focusableScopeQuery),s=e[0],u=e[1],c=e[2];l.BaseGridFocusTable=s,l.BaseGridFocusRow=u,l.BaseGridFocusCell=c}),98);
__d("BaseGrid.react",["BaseGridFocusTable.react","focusScopeQueries","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(13),n=e["aria-describedby"],r=e["aria-multiselectable"],a=e.children,i=e.wrapNavigation,l=e.xstyle,u=e["aria-label"],d=e["aria-labelledby"],m=i===void 0?"none":i,p;t[0]===Symbol.for("react.memo_cache_sentinel")?(p=["row","both"],t[0]=p):p=t[0];var _=p.includes(m),f;t[1]===Symbol.for("react.memo_cache_sentinel")?(f=["column","both"],t[1]=f):f=t[1];var g=f.includes(m),h;t[2]!==n||t[3]!==u||t[4]!==d||t[5]!==r||t[6]!==a||t[7]!==l?(h=s.jsx(o("react-strict-dom").html.div,{"aria-describedby":n,"aria-label":u,"aria-labelledby":d,"aria-multiselectable":r,role:"grid",style:l,children:a}),t[2]=n,t[3]=u,t[4]=d,t[5]=r,t[6]=a,t[7]=l,t[8]=h):h=t[8];var y;return t[9]!==_||t[10]!==g||t[11]!==h?(y=s.jsx(o("BaseGridFocusTable.react").BaseGridFocusTable,{tabScopeQuery:o("focusScopeQueries").tabbableScopeQuery,withinCellTabScopeQuery:c,wrapXToNextLine:_,wrapYToNextColumn:g,children:h}),t[9]=_,t[10]=g,t[11]=h,t[12]=y):y=t[12],y}var c=function(t,n){return n.role==="gridcell"||n.role==="row"?!1:o("focusScopeQueries").tabbableScopeQuery(t,n)};l.default=u}),98);
__d("BaseGridCell.react",["BaseGridFocusTable.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["aria-selected","children","data-type","ref","testid","xstyle"],s,u,c=u||(u=o("react")),d={focusRing:{boxShadow:"x59fq91",outline:"x1a2a7pz x1uvtmcs x1i4ix8p",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(18),a,i,l,u,m,p,_;n[0]!==t?(i=t["aria-selected"],l=t.children,u=t["data-type"],m=t.ref,p=t.testid,_=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=m,n[6]=p,n[7]=_):(a=n[1],i=n[2],l=n[3],u=n[4],m=n[5],p=n[6],_=n[7]);var f;n[8]!==_?(f=(s||(s=r("stylex"))).props(_,d.focusRing),n[8]=_,n[9]=f):f=n[9];var g;return n[10]!==a||n[11]!==i||n[12]!==l||n[13]!==u||n[14]!==m||n[15]!==f||n[16]!==p?(g=c.jsx(o("BaseGridFocusTable.react").BaseGridFocusCell,{children:c.jsx("div",babelHelpers.extends({},a,{"aria-selected":i,"data-testid":void 0,"data-type":u,ref:m,role:"gridcell"},f,{tabIndex:0,children:l}))}),n[10]=a,n[11]=i,n[12]=l,n[13]=u,n[14]=m,n[15]=f,n[16]=p,n[17]=g):g=n[17],g}l.default=m}),98);
__d("BaseGridRow.react",["BaseGridFocusTable.react","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.xstyle,a;return t[0]!==n||t[1]!==r?(a=s.jsx(o("BaseGridFocusTable.react").BaseGridFocusRow,{children:s.jsx(o("react-strict-dom").html.div,{role:"row",style:r,children:n})}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}l.default=u}),98);
__d("BaseGridRowScrollableArea.react",["BaseScrollableArea.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["addonEnd","addonStart","children","ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(12),a,i,l,s,c;n[0]!==t?(a=t.addonEnd,i=t.addonStart,l=t.children,s=t.ref,c=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5]);var d;return n[6]!==a||n[7]!==i||n[8]!==l||n[9]!==s||n[10]!==c?(d=u.jsxs(r("BaseScrollableArea.react"),babelHelpers.extends({},c,{ref:s,children:[i,l,a]})),n[6]=a,n[7]=i,n[8]=l,n[9]=s,n[10]=c,n[11]=d):d=n[11],d}l.default=c}),98);
__d("BaseHScrollContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({role:void 0,spacing:void 0});l.default=u}),98);
__d("BaseHScrollChild",["BaseGridCell.react","BaseHScrollContext","FocusInertRegion.react","Locale","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["aria-hidden","children","expanding","role","testid","type","xstyle"],s,u,c=u||(u=o("react")),d=u.useContext,m={flexBasis:"x1mz2wy7",$$css:!0},p={":last-of-type_marginInlineEnd":"x10xlvfm",$$css:!0},_={card:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",minWidth:"xeuugli",scrollSnapAlign:"x1bhewko",$$css:!0},cardExpanding:{display:"x78zum5",$$css:!0},cardRTL:{scrollSnapAlign:"x83psoy",$$css:!0},flexBasis:function(t){return[{flexBasis:t!=null?"x1mz2wy7":t,$$css:!0},{"--x-flexBasis":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},flexBasisDoubleWidth:function(t,n){return[m,{"--x-flexBasis":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})("calc(("+t+") * 2 + "+n+"px)")}]},gap:function(t){return[p,{marginInlineEnd:t!=null?"x1c9tiao":t,$$css:!0},{"--x-marginInlineEnd":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]}},f=o("Locale").isRTL();function g(t){var n=o("react-compiler-runtime").c(21),a,i,l,u,m,p,g,h;n[0]!==t?(u=t["aria-hidden"],i=t.children,m=t.expanding,l=t.role,g=t.testid,p=t.type,h=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=m,n[6]=p,n[7]=g,n[8]=h):(a=n[1],i=n[2],l=n[3],u=n[4],m=n[5],p=n[6],g=n[7],h=n[8]);var y=u===void 0?!1:u,C=m===void 0?!1:m,b=p===void 0?"default":p,v=d(r("BaseHScrollContext")),S=v.role,R=v.spacing;if(R==null)return null;var L=R.gap,E=R.width,k;if(n[9]!==a||n[10]!==i||n[11]!==C||n[12]!==L||n[13]!==y||n[14]!==S||n[15]!==l||n[16]!==g||n[17]!==b||n[18]!==E||n[19]!==h){var I;e:switch(b){case"custom":{I=void 0;break e}case"doubleWidth":{I=_.flexBasisDoubleWidth(E,L);break e}default:I=_.flexBasis(E)}var T=[_.card,f&&_.cardRTL,_.gap(L),C&&_.cardExpanding,h,I];k=S==="grid"?c.jsx(r("BaseGridCell.react"),babelHelpers.extends({},a,{"data-type":"hscroll-child",testid:void 0,xstyle:T,children:i})):c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(T),{"data-testid":void 0,"data-type":"hscroll-child",role:S==="list"?"listitem":l,children:c.jsx(r("FocusInertRegion.react"),{disabled:!y,children:i})})),n[9]=a,n[10]=i,n[11]=C,n[12]=L,n[13]=y,n[14]=S,n[15]=l,n[16]=g,n[17]=b,n[18]=E,n[19]=h,n[20]=k}else k=n[20];return k}l.default=g}),98);
__d("BaseHScrollConstants",[],(function(t,n,r,o,a,i){"use strict";var e=1600,l=10;i.MAX_CONTAINER_WIDTH=e,i.WIGGLE_ROOM=l}),66);
__d("BaseHScrollPeek.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.maxContentWindowWidth,r=e.padding,a=e.width,i;return t[0]!==n||t[1]!==r||t[2]!==a?(i=n!=null&&r==null?s.jsx("span",{style:{flexShrink:0,minWidth:a,width:"calc((100% - "+n+"px) / 2)"}}):s.jsx("span",{style:{minWidth:r!=null?r:a}}),t[0]=n,t[1]=r,t[2]=a,t[3]=i):i=t[3],i}l.default=u}),98);
__d("BaseHScrollScrollableArea.react",["BaseScrollableArea.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["addonEnd","addonStart"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(8),a,i,l;n[0]!==t?(a=t.addonEnd,i=t.addonStart,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var s;return n[4]!==a||n[5]!==i||n[6]!==l?(s=u.jsxs(r("BaseScrollableArea.react"),babelHelpers.extends({},l,{children:[i,l.children,a]})),n[4]=a,n[5]=i,n[6]=l,n[7]=s):s=n[7],s}l.default=c}),98);
__d("getBaseHScrollAccessibilityAlert",["fbt","compactMap","intlList"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e,t,n,o,a){var i=r("compactMap")(n,function(n,r){var i=n.getBoundingClientRect(),l=Math.round(i.left+i.width-e+a-o)<=0,s=Math.round(i.left-e-t.clientWidth-a-o)>=0;return!l&&!s?(r+1).toString():null});return s._(/*BTDS*/"Item {number} of {total}",[s._param("number",r("intlList")(i)),s._param("total",n.length)])}l.default=e}),226);
__d("setBaseHscrollChildrenAriaHidden",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=Array.from(e.children[0].children).filter(function(e){return e.tagName==="DIV"}),n=e.getBoundingClientRect();t.forEach(function(e){var t=e.getBoundingClientRect();if(n!=null){var r=t.right<n.left,o=t.left>n.right;(o||r)&&e.getAttribute("aria-hidden")!=="true"&&e.setAttribute("aria-hidden","true"),!o&&!r&&e.getAttribute("aria-hidden")==="true"&&e.removeAttribute("aria-hidden")}})}i.default=e}),66);
__d("useContainerBreakpoints",["$InternalEnum","gkx","react","react-compiler-runtime","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useState,d=n("$InternalEnum")({BiggerContainerSmallerChild:0,BiggerContainerBiggerChild:1});function m(e,t){var n=e[0],r=n.maxContainerWidth,o=n.width,a=babelHelpers.arrayLikeToArray(e).slice(1);if(r===1/0||a.length===0)return o;switch(t){case d.BiggerContainerSmallerChild:{var i="calc(("+r+"px - 100%) * 9999)",l=m(a,t);return typeof l=="number"&&(l="min("+l+"px, (100% - "+(r+.1)+"px) * 9999)"),"max("+l+", min("+o+", "+i+"))"}case d.BiggerContainerBiggerChild:{var s="calc((100% - "+r+"px) * 9999)",u=m(a,t);return"min("+u+", max("+o+", "+s+"))"}}}function p(e,t){var n=o("react-compiler-runtime").c(5),a=c(null),i=a[0],l=a[1],s;n[0]!==e?(s=function(n){var t=n.width,r;for(var o of e)if(!(t>o.maxContainerWidth)){r=o.width;break}l(r)},n[0]=e,n[1]=s):s=n[1];var u=s,d=r("useResizeObserver")(u),m;return n[2]!==i||n[3]!==d?(m=[d,i],n[2]=i,n[3]=d,n[4]=m):m=n[4],m}function _(e,t){var n=o("react-compiler-runtime").c(5),r;n[0]!==e||n[1]!==t?(r=m(e,t),n[0]=e,n[1]=t,n[2]=r):r=n[2];var a=r,i;return n[3]!==a?(i=[void 0,a],n[3]=a,n[4]=i):i=n[4],i}var f=r("gkx")("24318")?_:p;l.BreakpointRelationship=d,l.useContainerBreakpoints=f}),98);
__d("BaseHScroll.react",["BaseGrid.react","BaseGridRow.react","BaseGridRowScrollableArea.react","BaseHScrollChild","BaseHScrollConstants","BaseHScrollContext","BaseHScrollPeek.react","BaseHScrollScrollableArea.react","BaseView.react","HiddenSubtreePassiveContext","Locale","UserAgent","emptyFunction","getBaseHScrollAccessibilityAlert","react","setBaseHscrollChildrenAriaHidden","smoothScrollTo","stylex","useBaseHScrollFakeCards","useContainerBreakpoints","useEventHandler","useMergeRefs","useTriggerAccessibilityAlert","useUnsafeRef_DEPRECATED"],(function(t,n,r,o,a,i,l){"use strict";var e=["accessibilityLabel","buttonWrapperStyle","cardWidth","containerXStyle","outerContainerXStyle","scrollViewXStyle","scrollContainerXStyle","disableScrolling","gap","hideArrows","initialScrollToIndex","initialScrollSmoothing","isButtonInward","maxContentWindowWidth","nextButton","peekWidth","prevButton","onPressNext","onPressPrev","peek","peekPaddingStart","peekPaddingEnd","scrollRef","testid","role"],s,u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useContext,f=m.useLayoutEffect,g=m.useMemo,h=m.useRef,y=m.useState,C=o("Locale").isRTL(),b=r("UserAgent").isBrowser("Safari < 14")||r("UserAgent").isBrowser("Mobile Safari < 14"),v=r("UserAgent").isBrowser("Chrome"),S=r("UserAgent").isBrowser("IE")||r("UserAgent").isBrowser("Edge"),R=C&&b;function L(t){var n,a=t.accessibilityLabel,i=t.buttonWrapperStyle,l=t.cardWidth,c=t.containerXStyle,m=c===void 0?T.containerPaddingDefault:c,b=t.outerContainerXStyle,v=t.scrollViewXStyle,L=t.scrollContainerXStyle,E=t.disableScrolling,I=E===void 0?!1:E,D=t.gap,x=D===void 0?0:D,$=t.hideArrows,P=$===void 0?!1:$,N=t.initialScrollToIndex,M=t.initialScrollSmoothing,w=M===void 0?!1:M,A=t.isButtonInward,F=A===void 0?!1:A,O=t.maxContentWindowWidth,B=t.nextButton,W=t.peekWidth,q=t.prevButton,U=t.onPressNext,V=U===void 0?r("emptyFunction"):U,H=t.onPressPrev,G=H===void 0?r("emptyFunction"):H,z=t.peek,j=z===void 0?!1:z,K=t.peekPaddingStart,Q=t.peekPaddingEnd,X=t.scrollRef,Y=t.testid,J=t.role,Z=babelHelpers.objectWithoutPropertiesLoose(t,e),ee=O!=null&&j&&Q!=null&&K!=null,te=l.type==="responsive"?l.minWidth:l.width,ne=g(function(){var e=[];if(l.type==="fixed")e.push({maxContainerWidth:1/0,width:te+"px"});else if(j&&O!=null){for(var t=W*2,n=2*te+x+t,r=1;n<O+t;){var a=r<=1||x===0?0:(r-1)*x,i=a+t,s=i===0?"100%":"(100% - "+i+"px)";e.push({maxContainerWidth:n,width:"calc("+s+" / "+r+")"}),n+=x+te,r++}var u=r<=1||x===0?0:(r-1)*x,c=u+t,d=c===0?"100%":"(100% - "+c+"px)";e.push({maxContainerWidth:O+t,width:"calc("+d+" / "+r+")"}),e.push({maxContainerWidth:1/0,width:(O-u)/r})}else{for(var m=j?W*2:0,p=2*te+x+m,_=1;p<o("BaseHScrollConstants").MAX_CONTAINER_WIDTH;){var f=_<=1||x===0?0:(_-1)*x,g=f+m,h=g===0?"100%":"(100% - "+g+"px)";e.push({maxContainerWidth:p,width:"calc("+h+" / "+_+")"}),p+=x+te,_++}var y=_<=1||x===0?0:(_-1)*x,C=y+m,b=C===0?"100%":"(100% - "+C+"px)";e.push({maxContainerWidth:1/0,width:"calc("+b+" / "+_+")"})}return e},[l.type,j,O,te,W,x]),re=r("useTriggerAccessibilityAlert")(),oe=o("useContainerBreakpoints").useContainerBreakpoints(ne,o("useContainerBreakpoints").BreakpointRelationship.BiggerContainerSmallerChild),ae=oe[0],ie=oe[1],le=g(function(){return j&&O!=null?[{maxContainerWidth:O+W*2,width:W},{maxContainerWidth:1/0,width:"calc((100% - "+O+"px) / 2)"}]:j?[{maxContainerWidth:1/0,width:W}]:[{maxContainerWidth:1/0,width:0}]},[O,j,W]),se=o("useContainerBreakpoints").useContainerBreakpoints(le,o("useContainerBreakpoints").BreakpointRelationship.BiggerContainerBiggerChild),ue=se[0],ce=se[1],de=O!=null&&typeof ce=="string"&&ce.includes("min(")?"max("+W+"px, (100% - "+O+"px) / 2)":ce,me=(s||(s=r("useUnsafeRef_DEPRECATED")))(null),pe=d.Children.count(Z.children),_e=y(Z.isCircular?!1:!C),fe=_e[0],ge=_e[1],he=y(Z.isCircular?!1:C),ye=he[0],Ce=he[1],be=h(!1);f(function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null&&C){var n=t.clientWidth,r=t.scrollLeft,o=t.scrollWidth;r>50&&r>o-n-50&&(be.current=!0)}},[]);var ve=r("useEventHandler")(function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null){var n=t.getBoundingClientRect(),r=n.width,o=t.scrollLeft,a=t.scrollWidth;if(!Z.isCircular)C&&!S?be.current?(ge(o>a-r-x),Ce(o<=x)):(ge(o>=-x),Ce(o<-a+r+x)):(ge(o<=x),Ce(o>a-r-x));else{var i=$e.current(t),l=i.childCards;if(l==null||l[0]==null)return;ke({isRTL:C,isRTLScrollFromMaxScroll:be,scrollRef:me})}}}),Se=r("useBaseHScrollFakeCards")({children:Z.isCircular?Z.children:[],fakeCardXStyle:Z.isCircular?Z.fakeCardXStyle:null,gap:x,isCircular:(n=Z.isCircular)!=null?n:!1,minWidth:te,onResize:function(){var e;ve();var t=(e=me.current)==null?void 0:e.getDOMNode();t!=null&&r("setBaseHscrollChildrenAriaHidden")(t)},peek:j,peekWidth:W}),Re=Se[0],Le=Se[1],Ee=Se[2],ke=Se[3],Ie=r("useMergeRefs")(ae,ue,Ee),Te=_(r("HiddenSubtreePassiveContext"));f(function(){var e=Te.subscribeToChanges(function(e){e.hidden||ve()});return function(){return e.remove()}},[Te,ve]),f(function(){ve()},[pe,ve]);var De=h(x);f(function(){De.current=x},[x]);var xe=p(function(e){var t=e.getBoundingClientRect(),n=O!=null?Math.min(t.width-(j?2*W:0),O):j?t.width-2*W:t.width,r=(t.width-n)/2,o=t.left+r,a=t.right-r,i=Array.from(e.querySelectorAll('[data-type="hscroll-child"]'));return{childCards:i,containerLeft:o,containerRight:a,containerWidth:n}},[O,j,W]),$e=h(xe);f(function(){$e.current=xe},[xe]);var Pe=(Re!=null?Re:[]).length;f(function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null){if(N==null&&Pe===0){r("setBaseHscrollChildrenAriaHidden")(t);return}var n=$e.current(t),o=n.childCards,a=0;if(N!=null)for(var i=0;i<Math.min(N,o.length);i++)a+=o[i].getBoundingClientRect().width+De.current;if(Pe!==0)for(var l=N==null?0:N,s=l;s<Math.min(l+Pe,o.length);s++)a+=o[s].getBoundingClientRect().width+De.current;var u=function(n){w?r("smoothScrollTo")(t,{left:n},function(){r("setBaseHscrollChildrenAriaHidden")(t)}):(t.scrollTo(n,0),r("setBaseHscrollChildrenAriaHidden")(t))};if(C&&!S)if(be.current){var c=t.scrollWidth-t.getBoundingClientRect().width;u(c-a)}else u(-a);else u(a)}},[N,w,Pe]);var Ne=function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null){r("setBaseHscrollChildrenAriaHidden")(t);for(var n=xe(t),a=n.childCards,i=n.containerLeft,l=n.containerRight,s,u=C?0:a.length-1;C?u<a.length:u>=0;C?u++:u--){var c=a[u].getBoundingClientRect();if(c.left<=i-o("BaseHScrollConstants").WIGGLE_ROOM){s=c;break}}if(s!=null){var d=s.right-l;if(d!==0){var m=C&&S?t.scrollLeft-d:t.scrollLeft+d;r("smoothScrollTo")(t,{left:m},function(){r("setBaseHscrollChildrenAriaHidden")(t)}),G(),re(r("getBaseHScrollAccessibilityAlert")(m<0?-t.scrollLeft:d,t,a,i,x))}}}},Me=function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();if(t!=null){r("setBaseHscrollChildrenAriaHidden")(t);for(var n=xe(t),a=n.childCards,i=n.containerLeft,l=n.containerRight,s,u=C?a.length-1:0;C?u>=0:u<a.length;C?u--:u++){var c=a[u].getBoundingClientRect();if(c.right>=l+o("BaseHScrollConstants").WIGGLE_ROOM){s=c;break}}if(s!=null){var d=s.left-i;if(d!==0){var m=C&&S?t.scrollLeft-d:t.scrollLeft+d;r("smoothScrollTo")(t,{left:m},function(){r("setBaseHscrollChildrenAriaHidden")(t)}),V(),re(r("getBaseHScrollAccessibilityAlert")(m+t.clientWidth>t.scrollWidth?t.scrollWidth-t.scrollLeft-t.clientWidth:d,t,a,i,x))}}}},we=function(){var e,t=(e=me.current)==null?void 0:e.getDOMNode();t!=null&&r("setBaseHscrollChildrenAriaHidden")(t)},Ae=g(function(){return{role:J,spacing:ie!=null?{gap:x,width:ie}:null}},[J,ie,x]);k(me,pe);var Fe=j?d.jsx(r("BaseHScrollPeek.react"),{maxContentWindowWidth:O,padding:K,width:W}):void 0,Oe=j?d.jsx(r("BaseHScrollPeek.react"),{maxContentWindowWidth:O,padding:Q,width:W}):void 0,Be=J==="grid",We=r(Be?"BaseGridRowScrollableArea.react":"BaseHScrollScrollableArea.react"),qe=r("useMergeRefs")(me,X),Ue=d.jsx(We,{addonEnd:d.jsxs(d.Fragment,{children:[Le,Oe]}),addonStart:d.jsxs(d.Fragment,{children:[Fe,Re]}),hideScrollbar:!0,horizontal:!0,onScroll:ve,onScrollEnd:we,ref:qe,style:{scrollPadding:de},vertical:!1,xstyle:[T.scrollView,!R&&T.scrollViewSnap,I&&T.scrollViewNoScroll,v],children:Z.children}),Ve;switch(J){case"grid":Ve=void 0;break;case"list":Ve="list";break;default:Ve=a?"region":void 0;break}var He=Ve?a:void 0;return d.jsxs(r("BaseView.react"),{ref:Ie,testid:void 0,xstyle:b,children:[d.jsx("div",{"aria-hidden":P||!!fe,className:(u||(u=r("stylex")))(T.buttonWrapper,(P||!!fe)&&T.hidden,i),style:C?{right:de!=null&&!ee?de:j?W:0,transform:"translate(calc("+(!j&&F?0:50)+"% + "+(j?x/2:0)+"px), -50%)"}:{left:de!=null&&!ee?de:j?W:0,transform:"translate(calc(-"+(!j&&F?0:50)+"% - "+(j?x/2:0)+"px), -50%)"},suppressHydrationWarning:!Z.isCircular,children:q&&q(C?Me:Ne,!!fe)}),d.jsx(r("BaseView.react"),{"aria-label":He,role:Ve,xstyle:[T.scrollContainer,m,L],children:d.jsx(r("BaseHScrollContext").Provider,{value:Ae,children:Be?d.jsx(r("BaseGrid.react"),{"aria-label":a,children:d.jsx(r("BaseGridRow.react"),{children:Ue})}):Ue})}),d.jsx("div",{"aria-hidden":P||!!ye,className:u(T.buttonWrapper,(P||!!ye)&&T.hidden,i),style:C?{left:de!=null&&!ee?de:j?W:0,transform:"translate(calc(-"+(!j&&F?0:50)+"% - "+(j?x/2:0)+"px), -50%)"}:{right:de!=null&&!ee?de:j?W:0,transform:"translate(calc("+(!j&&F?0:50)+"% + "+(j?x/2:0)+"px), -50%)"},suppressHydrationWarning:!Z.isCircular,children:B&&B(C?Ne:Me,!!ye)})]})}L.displayName=L.name+" [from "+i.id+"]";function E(e,t){}var k=E;if(v){var I=function(t,n){var e,o=(s||(s=r("useUnsafeRef_DEPRECATED")))(null);f(function(){var e,n=o.current,r=(e=t.current)==null?void 0:e.getDOMNode();n!=null&&r!=null&&(r.scrollLeft=n)},[n,t]);var a=(e=t.current)==null?void 0:e.getDOMNode();a!=null&&(o.current=a.scrollLeft)};k=I}var T={buttonWrapper:{opacity:"x1hc1fzr",position:"x10l6tqk",top:"xwa60dl",transitionDuration:"x1d8287x",transitionProperty:"x19991ni",transitionTimingFunction:"xwji4o3",zIndex:"x1vjfegm",$$css:!0},containerPaddingDefault:{paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",$$css:!0},hidden:{opacity:"xg01cxk",pointerEvents:"x47corl",$$css:!0},scrollContainer:{marginBottom:"x1wsgfga",marginTop:"x9otpla",$$css:!0},scrollView:{boxSizing:"x9f619",marginBottom:"xat24cr",paddingBottom:"xwib8y2",paddingTop:"x1y1aw1k",scrollbarWidth:"x1rohswg",$$css:!0},scrollViewNoScroll:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},scrollViewSnap:{scrollSnapType:"xhfbhpw",$$css:!0}};l.HScrollContainer=L,l.HScrollChild=r("BaseHScrollChild")}),98);
__d("useBaseHScrollFakeCards",["BaseHScroll.react","BaseHScrollConstants","DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE","UserAgent","react","react-compiler-runtime","setBaseHscrollChildrenAriaHidden","useEventHandler","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState;function c(e){var t=o("react-compiler-runtime").c(23),n=e.children,a=e.fakeCardXStyle,i=e.gap,l=e.isCircular,c=e.minWidth,d=e.onResize,m=e.peek,p=e.peekWidth,_=u(0),f=_[0],g=_[1],h;t[0]!==n.length||t[1]!==i||t[2]!==l||t[3]!==c||t[4]!==d||t[5]!==m||t[6]!==p?(h=function(t,r,a){var e=t.width,s=Math.min(e,o("BaseHScrollConstants").MAX_CONTAINER_WIDTH),u=m?p*2:0;if(l){var _=Math.floor((s-u+i)/(c+i));n.length<_?g(0):g(_)}d()},t[0]=n.length,t[1]=i,t[2]=l,t[3]=c,t[4]=d,t[5]=m,t[6]=p,t[7]=h):h=t[7];var y=r("useEventHandler")(h),C=r("useResizeObserver")(y),b,v;if(t[8]!==n||t[9]!==a||t[10]!==l||t[11]!==f){var S=f!==0?n.slice(-f):[],R=n.slice(0,f);b=l?S.map(function(e,t){return s.createElement(o("BaseHScroll.react").HScrollChild,babelHelpers.extends({},r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(e).props,{"aria-hidden":!0,key:"head-"+t,xstyle:[r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(e).props.xstyle,a]}))}):null,v=l?R.map(function(e,t){return s.createElement(o("BaseHScroll.react").HScrollChild,babelHelpers.extends({},r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(e).props,{"aria-hidden":!0,key:"tail-"+t,xstyle:[r("DangerouslyAccessReactElementInternals_DO_NOT_USE_IN_NEW_CODE")(e).props.xstyle,a]}))}):null,t[8]=n,t[9]=a,t[10]=l,t[11]=f,t[12]=b,t[13]=v}else b=t[12],v=t[13];var L=v,E;t[14]!==i||t[15]!==m||t[16]!==p?(E=function(t){var e,n=t.isRTL,a=t.isRTLScrollFromMaxScroll,l=t.scrollRef,s=(e=l.current)==null?void 0:e.getDOMNode();if(s!=null){var u=r("UserAgent").isBrowser("IE")||r("UserAgent").isBrowser("Edge"),c=s.offsetWidth,d=s.scrollLeft,_=s.scrollWidth,f=n?-(_-c):_-c,g=function(t){var e=function(t){s.scrollTo==null||s.scrollTo(t,0),"onscrollend"in s&&s.addEventListener("scrollend",function(){r("setBaseHscrollChildrenAriaHidden")(s)},{once:!0})};if(n&&!u)if(a.current){var o=s.scrollWidth-s.getBoundingClientRect().width;e(o-t)}else e(-t);else e(t)},h=m?p*2:0,y=o("BaseHScrollConstants").WIGGLE_ROOM/2;if(d>=0-y&&d<=0+y){var C=_-2*c+h-i;g(C)}if(d>=f-y&&d<=f+y){var b=c-h+i;g(b)}}},t[14]=i,t[15]=m,t[16]=p,t[17]=E):E=t[17];var k=E,I;return t[18]!==b||t[19]!==k||t[20]!==C||t[21]!==L?(I=[b,L,C,k],t[18]=b,t[19]=k,t[20]=C,t[21]=L,t[22]=I):I=t[22],I}l.default=c}),98);
__d("BaseHovercardStateContext.react",["fbt","emptyFunction","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=u.createContext({active:!1,"aria-label":s._(/*BTDS*/"Press Alt-F1 or the up arrow key to access the link preview"),label:s._(/*BTDS*/"Press the up arrow key to access the link preview"),labelId:null,onClose:r("emptyFunction")});l.default=c}),226);
__d("BaseHovercardTrigger.react",["cr:3843"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:3843")}),98);
__d("BaseHovercardTriggerWrapper.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["display"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(11),r,a;if(n[0]!==t?(r=t.display,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=r,n[2]=a):(r=n[1],a=n[2]),r==="inline"){var i;n[3]===Symbol.for("react.memo_cache_sentinel")?(i="xt0psk2",n[3]=i):i=n[3];var l;return n[4]!==a?(l=u.jsx("span",babelHelpers.extends({},a,{className:i})),n[4]=a,n[5]=l):l=n[5],l}var s;n[6]!==r?(s={0:"",1:"x1rg5ohu"}[(r==="inline-block")<<0],n[6]=r,n[7]=s):s=n[7];var c;return n[8]!==a||n[9]!==s?(c=u.jsx("div",babelHelpers.extends({},a,{className:s})),n[8]=a,n[9]=s,n[10]=c):c=n[10],c}l.default=c}),98);
__d("BaseNestedHovercardContext.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(!1),c=u;l.default=c}),98);
__d("useBaseHovercardTriggerAccessible",["fbt","BaseContextualLayer.react","BaseHovercardStateContext.react","BaseHovercardTriggerWrapper.react","CometErrorBoundary.react","CometHeroInteractionContextPassthrough.react","CometPlaceholder.react","FocusWithinHandler.react","HiddenSubtreeContextProvider.react","clearTimeout","react","react-compiler-runtime","setTimeout","useCometDisplayTimingTrackerForInteraction","useCometPrerenderer","useDelayedState","useFadeEffect","useMergeRefs"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["children","display","fallback","onLoadEntryPoint","onVisibilityChange","showDelay"],u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useId,f=d.useMemo,g=d.useRef,h=d.useState,y=300,C=100,b={disablePointerEvents:{pointerEvents:"x47corl",$$css:!0}};function v(t){var n=o("react-compiler-runtime").c(91),a,l,u,d,m,f,v;n[0]!==t?(a=t.children,u=t.display,d=t.fallback,m=t.onLoadEntryPoint,f=t.onVisibilityChange,v=t.showDelay,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=l,n[3]=u,n[4]=d,n[5]=m,n[6]=f,n[7]=v):(a=n[1],l=n[2],u=n[3],d=n[4],m=n[5],f=n[6],v=n[7]);var R=r("useDelayedState")(!1),L=R[0],E=R[1],k=h(!1),I=k[0],T=k[1],D=h(!1),x=D[0],$=D[1],P=h(!1),N=P[0],M=P[1],w=h(!1),A=w[0],F=w[1],O=h(!1),B=O[0],W=O[1],q=N&&A&&!x,U;n[8]!==B?(U=function(t){F(t),!t&&!B&&$(!1)},n[8]=B,n[9]=U):U=n[9];var V=U,H=g(null),G=g(null),z=g(null),j=r("useCometDisplayTimingTrackerForInteraction")("HoverCard"),K=function(){ue&&W(!0)},Q,X;n[10]!==B?(Q=function(){if(B){var e=de.current;if(!e)return;var t=e.querySelector(S);t==null||t.focus()}},X=[B],n[10]=B,n[11]=Q,n[12]=X):(Q=n[11],X=n[12]),p(Q,X);var Y;n[13]!==B?(Y=function(){if(B){W(!1);var e=G.current;e==null||e.focus()}},n[13]=B,n[14]=Y):Y=n[14];var J=Y,Z=g(K),ee=g(J),te;n[15]!==E?(te=function(){E(!1),T(!1),$(!0),ee.current()},n[15]=E,n[16]=te):te=n[16];var ne=te,re=g(ne),oe;n[17]!==K||n[18]!==ne||n[19]!==J?(oe=function(){Z.current=K,ee.current=J,re.current=ne},n[17]=K,n[18]=ne,n[19]=J,n[20]=oe):oe=n[20],p(oe,void 0);var ae;n[21]!==ne?(ae=function(t){t.key==="Escape"&&(t.stopPropagation(),ne())},n[21]=ne,n[22]=ae):ae=n[22];var ie=ae,le;n[23]!==ne?(le=function(t){(t.key==="Escape"||t.key===" "||t.keyCode===9)&&(t.stopPropagation(),ne()),(["ArrowDown","ArrowUp"].includes(t.key)||t.altKey&&t.key==="F1")&&(Z.current(),t.preventDefault(),t.stopPropagation())},n[23]=ne,n[24]=le):le=n[24];var se=le,ue=L||I||q||B,ce=g(ue),de=g(),me;n[25]!==ue||n[26]!==f?(me=function(){ce.current!==ue&&(f&&f(ue),ue||W(!1)),ce.current=ue},n[25]=ue,n[26]=f,n[27]=me):me=n[27];var pe;n[28]!==ue||n[29]!==f?(pe=[ue,f],n[28]=ue,n[29]=f,n[30]=pe):pe=n[30],p(me,pe);var _e=r("useFadeEffect")(ue),fe=_e[0],ge=_e[1],he=_e[2],ye=r("useCometPrerenderer")("tooltip",ue),Ce=ye[0],be=ye[1],ve=ye[2],Se=Ce.shouldPrerender,Re=Se===void 0?!1:Se,Le;n[31]!==m?(Le=function(){m&&m()},n[31]=m,n[32]=Le):Le=n[32];var Ee=Le,ke;n[33]!==q||n[34]!==L||n[35]!==I||n[36]!==Ee||n[37]!==be||n[38]!==E||n[39]!==v?(ke=function(t){L?r("clearTimeout")(H.current):(E(!0,v!=null?v:y),Ee()),!q&&!I&&be(t)},n[33]=q,n[34]=L,n[35]=I,n[36]=Ee,n[37]=be,n[38]=E,n[39]=v,n[40]=ke):ke=n[40];var Ie=ke,Te;n[41]!==ve||n[42]!==E?(Te=function(){H.current=r("setTimeout")(function(){E(!1)},C),ve()},n[41]=ve,n[42]=E,n[43]=Te):Te=n[43];var De=Te,xe;n[44]===Symbol.for("react.memo_cache_sentinel")?(xe=function(){T(!1)},n[44]=xe):xe=n[44];var $e=xe,Pe;n[45]===Symbol.for("react.memo_cache_sentinel")?(Pe=function(){T(!1)},n[45]=Pe):Pe=n[45];var Ne=Pe,Me;n[46]!==I||n[47]!==Ee?(Me=function(){I||(T(!0),Ee())},n[46]=I,n[47]=Ee,n[48]=Me):Me=n[48];var we=Me,Ae;n[49]!==Ee?(Ae=function(){Ee()},n[49]=Ee,n[50]=Ae):Ae=n[50];var Fe=Ae,Oe=_(),Be,We;n[51]===Symbol.for("react.memo_cache_sentinel")?(Be=s._(/*BTDS*/"Press Alt-F1 or the up arrow key to access the link preview"),We=s._(/*BTDS*/"Press the up arrow key to access the link preview"),n[51]=Be,n[52]=We):(Be=n[51],We=n[52]);var qe=q?Oe:null,Ue;n[53]!==ne?(Ue=function(){ee.current(),ne()},n[53]=ne,n[54]=Ue):Ue=n[54];var Ve;n[55]!==B||n[56]!==qe||n[57]!==Ue?(Ve={active:B,"aria-label":Be,label:We,labelId:qe,onClose:Ue},n[55]=B,n[56]=qe,n[57]=Ue,n[58]=Ve):Ve=n[58];var He=Ve,Ge;n[59]!==ne?(Ge=function(t){t.key==="Escape"&&ne()},n[59]=ne,n[60]=Ge):Ge=n[60];var ze=Ge,je=r("useMergeRefs")(he,de),Ke,Qe;n[61]!==q||n[62]!==Oe?(Ke=function(){var e=G.current;e!=null&&(q?e.setAttribute("aria-describedby",Oe):e.removeAttribute("aria-describedby"))},Qe=[q,Oe],n[61]=q,n[62]=Oe,n[63]=Ke,n[64]=Qe):(Ke=n[63],Qe=n[64]),p(Ke,Qe);var Xe;n[65]!==a||n[66]!==l||n[67]!==u||n[68]!==j||n[69]!==d||n[70]!==x||n[71]!==ue||n[72]!==q||n[73]!==I||n[74]!==je||n[75]!==V||n[76]!==Fe||n[77]!==He||n[78]!==ze||n[79]!==ie||n[80]!==se||n[81]!==Ie||n[82]!==De||n[83]!==we||n[84]!==ge||n[85]!==Re||n[86]!==fe?(Xe=function(t){var e=t;return d!=null&&(e=c.jsx(r("CometPlaceholder.react"),{fallback:d,name:i.id,children:e})),c.jsxs(r("BaseHovercardTriggerWrapper.react"),{display:u,onKeyDown:ie,onMouseEnter:Ie,onMouseLeave:De,onTouchCancel:$e,onTouchEnd:Ne,onTouchStart:we,children:[c.jsx(r("FocusWithinHandler.react"),{onFocusChange:M,onFocusVisibleChange:V,onFocusWithin:Fe,children:c.jsx("span",{className:"xjp7ctv",onKeyDown:se,children:a(G)})}),(q||I||Re||fe)&&!x&&c.jsx(r("CometHeroInteractionContextPassthrough.react"),{clear:!0,children:c.jsx(r("CometErrorBoundary.react"),{children:c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"HovercardTriggerPopover",children:c.jsx(r("BaseContextualLayer.react"),babelHelpers.extends({align:"middle",contextRef:G,hidden:!ue&&Re,imperativeRef:z,ref:j,xstyle:!ue&&fe?b.disablePointerEvents:void 0},l,{children:c.jsx(r("HiddenSubtreeContextProvider.react"),{isHidden:!ue&&Re,children:c.jsx("div",babelHelpers.extends({},{0:{className:"xg01cxk x1n2onr6 x1ebt8du x19991ni x1dhq9h"},1:{className:"x1n2onr6 x19991ni x1hc1fzr xhb22t3 xls3em1"}}[!!ge<<0],{onKeyDown:ze,ref:je,children:c.jsx(r("BaseHovercardStateContext.react").Provider,{value:He,children:e})}))})}))})})})]})},n[65]=a,n[66]=l,n[67]=u,n[68]=j,n[69]=d,n[70]=x,n[71]=ue,n[72]=q,n[73]=I,n[74]=je,n[75]=V,n[76]=Fe,n[77]=He,n[78]=ze,n[79]=ie,n[80]=se,n[81]=Ie,n[82]=De,n[83]=we,n[84]=ge,n[85]=Re,n[86]=fe,n[87]=Xe):Xe=n[87];var Ye=Xe,Je;return n[88]!==ne||n[89]!==Ye?(Je=[Ye,ne],n[88]=ne,n[89]=Ye,n[90]=Je):Je=n[90],Je}var S=['a[href]:not([href=""]):not([rel="ignore"])',"button:not(:disabled)","[tabindex]"].map(function(e){return e+':not([tabindex="-1"])'}).join(", ");l.default=v}),226);
__d("BaseHovercardTriggerAccessible.react",["BaseHovercardTriggerWrapper.react","BaseNestedHovercardContext.react","CometRelay","react","react-compiler-runtime","useBaseHovercardTriggerAccessible","useCometRelayEntrypointContextualEnvironmentProvider"],(function(t,n,r,o,a,i,l){"use strict";var e=["popoverEntryPoint","popoverOtherProps","popoverProps","preventNested"],s=["preventNested"],u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext,_=d.useRef,f={};function g(t){var n=o("react-compiler-runtime").c(19),a,i,l,s;if(n[0]!==t){var u=t.popoverEntryPoint,d=t.popoverOtherProps,m=t.popoverProps,p=t.preventNested,_=babelHelpers.objectWithoutPropertiesLoose(t,e);i=u,s=d,l=m,a=_,n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s}else a=n[1],i=n[2],l=n[3],s=n[4];var g=s===void 0?f:s,h=r("useCometRelayEntrypointContextualEnvironmentProvider")(),y=o("CometRelay").useEntryPointLoader(h,i),C=y[0],b=y[1],v;n[5]!==b||n[6]!==l?(v=function(){b(l)},n[5]=b,n[6]=l,n[7]=v):v=n[7];var S=v,R;n[8]!==a||n[9]!==S?(R=babelHelpers.extends({},a,{onLoadEntryPoint:S}),n[8]=a,n[9]=S,n[10]=R):R=n[10];var L=r("useBaseHovercardTriggerAccessible")(R),E=L[0],k;n[11]!==C||n[12]!==g?(k=C!=null&&c.jsx(o("CometRelay").EntryPointContainer,{entryPointReference:C,props:g}),n[11]=C,n[12]=g,n[13]=k):k=n[13];var I;n[14]!==k?(I=c.jsx(c.Fragment,{children:k}),n[14]=k,n[15]=I):I=n[15];var T;return n[16]!==I||n[17]!==E?(T=E(I),n[16]=I,n[17]=E,n[18]=T):T=n[18],T}function h(e){var t=e.preventNested,n=t===void 0?!1:t,o=babelHelpers.objectWithoutPropertiesLoose(e,s),a=p(r("BaseNestedHovercardContext.react")),i=_(null);return a?c.jsx(r("BaseHovercardTriggerWrapper.react"),{display:e.display,children:e.children(i)}):c.jsx(r("BaseNestedHovercardContext.react").Provider,{value:n,children:c.jsx(g,babelHelpers.extends({},o))})}h.displayName=h.name+" [from "+i.id+"]",l.default=h}),98);
__d("BaseTimestamp.react",["TimestampUtils","react","react-compiler-runtime","react-strict-dom","useServerTime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(5),n=e.date,a=r("useServerTime")(),i;t[0]!==n||t[1]!==a?(i=o("TimestampUtils").getTimestamp(a,n),t[0]=n,t[1]=a,t[2]=i):i=t[2];var l=i,u;return t[3]!==l?(u=s.jsx(o("react-strict-dom").html.span,{suppressHydrationWarning:!0,children:l}),t[3]=l,t[4]=u):u=t[4],u}l.default=u}),98);
__d("CometLogImpressionFBNuxMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9723864714359536"}),null);
__d("CometLogImpressionFBNuxMutation.graphql",["CometLogImpressionFBNuxMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],t=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],r={alias:null,args:null,kind:"ScalarField",name:"nux_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometLogImpressionFBNuxMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"log_nux_view",plural:!1,selections:[r],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometLogImpressionFBNuxMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"log_nux_view",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("CometLogImpressionFBNuxMutation_facebookRelayOperation"),metadata:{},name:"CometLogImpressionFBNuxMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="29635405182772969"}),null);
__d("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation.graphql",["CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"nux_id"}],t=[{kind:"Variable",name:"nux_id",variableName:"nux_id"}],r={alias:null,args:null,kind:"ScalarField",name:"nux_id",storageKey:null};return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"log_nux_view_and_increment_view_count",plural:!1,selections:[r],storageKey:null}],type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation",selections:[{alias:null,args:t,concreteType:null,kind:"LinkedField",name:"log_nux_view_and_increment_view_count",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},r,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:n("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation_facebookRelayOperation"),metadata:{},name:"CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("encodeNUXIDForRelay",[],(function(t,n,r,o,a,i){"use strict";var e="NUX_ID:";function l(t){return typeof t=="string"&&t.startsWith(e)?{nuxID:Number(t.replace(e,"")),relayID:t}:{nuxID:Number(t),relayID:e+t}}i.default=l}),66);
__d("CometLogImpressionFBNuxMutation",["CometLogImpressionFBNuxMutation.graphql","CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation.graphql","CometRelay","encodeNUXIDForRelay"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e!==void 0?e:e=n("CometLogImpressionFBNuxMutation.graphql");function c(e,t,n,a){var i=r("encodeNUXIDForRelay")(t),l=i.nuxID;return o("CometRelay").commitMutation(e,{mutation:u,onCompleted:n,onError:a,variables:{nux_id:l}})}var d=s!==void 0?s:s=n("CometLogImpressionFBNuxMutationWithNoImpressionLimitMutation.graphql");function m(e,t,n,a){var i=r("encodeNUXIDForRelay")(t),l=i.nuxID;return o("CometRelay").commitMutation(e,{mutation:d,onCompleted:n,onError:a,variables:{nux_id:l}})}l.commit=c,l.commitNuxWithNoImpressionLimit=m}),98);
__d("CometUFI_dedicated_comment_routable_dialog_gk.relayprovider",["qex"],(function(t,n,r,o,a,i,l){"use strict";var e={get:function(){var e;return(e=r("qex")._("2648"))!=null?e:!1}};l.default=e}),98);
__d("FBP2MECPCheckoutDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{}},root:r("JSResourceForInteraction")("FBP2MECPCheckoutDialog.react").__setRef("FBP2MECPCheckoutDialog.entrypoint")};l.default=e}),98);
__d("FDSDocumentFilled16PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("908355"),16),u=e;l.default=u}),98);
__d("FDSPhotoAddFilled24PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("481777"),24),u=e;l.default=u}),98);
__d("FDSPressableFacepileProfilePhoto.react",["CometPressable.react","FDSProfilePhoto.react","react","react-compiler-runtime","useIntersectionObserver"],(function(t,n,r,o,a,i,l){"use strict";var e=["Container","FocusItemComponent","divClassName","parentRef","pressableProps"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useState;function p(t){var n=o("react-compiler-runtime").c(25),a,i,l,s,c,d;n[0]!==t?(d=t.Container,a=t.FocusItemComponent,i=t.divClassName,l=t.parentRef,s=t.pressableProps,c=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6]);var p=d===void 0?u.Fragment:d,_=m(!1),f=_[0],g=_[1],h;n[7]===Symbol.for("react.memo_cache_sentinel")?(h=function(t){var e=t.intersectionRatio;g(e<.5)},n[7]=h):h=n[7];var y=h,C;n[8]!==l?(C={root:function(){var e;return(e=l.current)!=null?e:null},threshold:.5},n[8]=l,n[9]=C):C=n[9];var b=r("useIntersectionObserver")(y,C),v;n[10]!==f||n[11]!==s||n[12]!==c?(v=s!=null?u.jsx(r("CometPressable.react"),babelHelpers.extends({},s,{disabled:f,children:u.jsx(r("FDSProfilePhoto.react"),babelHelpers.extends({},c,{overlayDisabled:!0}))})):u.jsx(r("FDSProfilePhoto.react"),babelHelpers.extends({},c,{overlayDisabled:!0})),n[10]=f,n[11]=s,n[12]=c,n[13]=v):v=n[13];var S;n[14]!==p||n[15]!==v?(S=u.jsx(p,{children:v}),n[14]=p,n[15]=v,n[16]=S):S=n[16];var R;n[17]!==a||n[18]!==f||n[19]!==S?(R=u.jsx(a,{disabled:f,children:S}),n[17]=a,n[18]=f,n[19]=S,n[20]=R):R=n[20];var L;return n[21]!==i||n[22]!==b||n[23]!==R?(L=u.jsx("div",{className:i,ref:b,role:"listitem",children:R}),n[21]=i,n[22]=b,n[23]=R,n[24]=L):L=n[24],L}l.default=p}),98);
__d("FDSPressableFacepile.react",["fbt","ix","BaseContainerQueryElement.react","CometComponentWithKeyCommands.react","CometKeys","CometPressable.react","FDSIcon.react","FDSPressableFacepileProfilePhoto.react","FDSText.react","FDSTooltip.react","FocusGroup.react","ReactDOM","fbicon","focusScopeQueries","react","react-compiler-runtime","useIntersectionObserver"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e=["addOn","alt","containerComponent","isDecorative","source","testid"],c=["FocusItemComponent","ellipsisTooltip","parentRef","size","spacing"],d,m=d||(d=o("react")),p=d,_=p.useCallback,f=p.useId,g=p.useRef,h=p.useState,y=o("FocusGroup.react").createFocusGroup(o("focusScopeQueries").tabbableScopeQuery),C=y[0],b=y[1],v=4,S=6,R=-4,L={overflow24:{height:"xxk0z11",width:"xvy4d1p",$$css:!0},overflow28:{height:"x1fgtraw",width:"xgd8bvy",$$css:!0},overflow32:{height:"x10w6t97",width:"x1td3qas",$$css:!0},overflow40:{height:"x1vqgdyp",width:"x100vrsf",$$css:!0},overflow48:{height:"xsdox4t",width:"x1useyqa",$$css:!0},overflowItem:{alignItems:"x6s0dn4",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x78zum5",flexShrink:"x2lah0s",justifyContent:"xl56j7k",pointerEvents:"x71s49j",$$css:!0},pressableItem:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x1lliihq",$$css:!0}};function E(t){var n=o("react-compiler-runtime").c(41),a=t.count,i=t.ellipsisTooltip,l=t.isOverlapping,u=t.isTextInline,c=t.items,d=t.linkProps,p=t.onPress,_=t.size,h=t.testid,y=t.testOnly_pressed,E=t.text,P=t.withWrapper,N=l===void 0?!1:l,M=u===void 0?!1:u,w=y===void 0?!1:y,A=a!=null?a:c.length,F;n[0]!==c?(F=c.some(D),n[0]=c,n[1]=F):F=n[1];var O=F,B=c.some(T),W=N?R:B?S:v,q=Math.min(A,c.length,M?3:1/0),U=g(null),V=f(),H=f(),G;n[2]===Symbol.for("react.memo_cache_sentinel")?(G=[{command:{key:r("CometKeys").LEFT},description:s._(/*BTDS*/"Previous item"),handler:I},{command:{key:r("CometKeys").RIGHT},description:s._(/*BTDS*/"Next item"),handler:k}],n[2]=G):G=n[2];var z=G,j;n[3]===Symbol.for("react.memo_cache_sentinel")?(j={className:"x78zum5 x1q0g3np xhsvlbd x16pr9af x6ikm8r x889kno x1a8lsjc x1n2onr6"},n[3]=j):j=n[3];var K=E!=null?H:void 0,Q="list",X=c.slice(0,q).map(function(t,n){var o=t.addOn,a=t.alt,i=t.containerComponent,l=t.isDecorative,s=t.source,u=t.testid,c=babelHelpers.objectWithoutPropertiesLoose(t,e);return m.jsxs(m.Fragment,{children:[m.jsx(r("BaseContainerQueryElement.react"),{breakpoint:(n+1)*(_+W)-W,inverseToContainer:!0,maxWidth:"100%",minWidth:0}),m.jsx(r("FDSPressableFacepileProfilePhoto.react"),{Container:i,FocusItemComponent:b,addOn:o,alt:a,divClassName:{0:"x1n2onr6",4:"x1n2onr6 xdwrcjd",2:"x1n2onr6 xdzw4kq",6:"x1n2onr6 xdzw4kq",1:"x1n2onr6 x165d6jo",5:"x1n2onr6 x165d6jo",3:"x1n2onr6 x165d6jo",7:"x1n2onr6 x165d6jo"}[(n>0)<<2|!!(n>0&&B)<<1|!!(n>0&&N)<<0],isOverlapped:N&&n>0,parentRef:U,pressableProps:c.onPress||c.linkProps?babelHelpers.extends({},c,{display:"inline",overlayDisabled:N,overlayRadius:_/2,xstyle:L.pressableItem}):null,role:"listitem",shape:"circle",size:_,source:s,testid:void 0})]},n)}),Y;n[4]!==A||n[5]!==i||n[6]!==O||n[7]!==N||n[8]!==c||n[9]!==d||n[10]!==V||n[11]!==q||n[12]!==p||n[13]!==_||n[14]!==W||n[15]!==w||n[16]!==h?(Y=!O&&(p||d)&&m.jsxs("div",{className:"x1jn9clo x78zum5 x1q0g3np xtijo5x x1o0tod x47corl x10l6tqk x1eu8d0j",role:"listitem",children:[c.slice(0,Math.min(c.length,q<A?q:A)).map(function(e,t){return t===0&&A>1?null:m.jsx(r("BaseContainerQueryElement.react"),{breakpoint:(t+1)*(_+W)-W,maxWidth:t===A-1?"100%":_+W,minWidth:0},"overflowPusher"+t)}),m.jsx($,{FocusItemComponent:b,"aria-label":s._(/*BTDS*/"See everyone"),ellipsisTooltip:i,linkProps:d,onPress:p,overlayDisabled:!0,parentRef:U,size:_,spacing:W,testid:void 0,xstyle:[L.overflowItem,_===24&&L.overflow24,_===28&&L.overflow28,_===32&&L.overflow32,_===40&&L.overflow40,_===48&&L.overflow48],children:function(t){var e=t.hovered,n=t.pressed;return m.jsxs(m.Fragment,{children:[m.jsxs("svg",{"aria-hidden":!0,className:"x1ey2m1c xtijo5x x1o0tod x10l6tqk x13vifvy",height:_,viewBox:"0 0 "+_+" "+_,width:_,children:[N&&q>1&&m.jsxs("mask",{id:V,suppressHydrationWarning:!0,children:[m.jsx("circle",{cx:_/2,cy:_/2,fill:"white",r:_/2}),m.jsx("circle",{cx:-_/2+4,cy:_/2,fill:"black",r:_/2+2})]}),m.jsx("circle",babelHelpers.extends({className:"x1wnuiir",cx:_/2,cy:_/2,r:_/2,suppressHydrationWarning:!0},N&&q>1?{mask:"url(#"+V+")"}:null)),m.jsx("circle",babelHelpers.extends({className:{0:"x1wnuiir xg01cxk x1ebt8du x19991ni x1dhq9h",2:"x19991ni x1dhq9h x4bmajx x1hc1fzr x1mq3mr6",1:"x19991ni x1dhq9h x1tgjyoi x1hc1fzr x1mq3mr6",3:"x19991ni x1dhq9h x1tgjyoi x1hc1fzr x1mq3mr6"}[!!e<<1|!!(n||w)<<0],cx:_/2,cy:_/2,r:_/2,suppressHydrationWarning:!0},N&&q>1?{mask:"url(#"+V+")"}:null))]}),m.jsx(r("FDSIcon.react"),{color:"white",icon:x(_)})]})}})]}),n[4]=A,n[5]=i,n[6]=O,n[7]=N,n[8]=c,n[9]=d,n[10]=V,n[11]=q,n[12]=p,n[13]=_,n[14]=W,n[15]=w,n[16]=h,n[17]=Y):Y=n[17];var J;n[18]!==X||n[19]!==Y||n[20]!==j||n[21]!==K?(J=m.jsxs("div",babelHelpers.extends({},j,{"aria-describedby":K,ref:U,role:Q,children:[X,Y]})),n[18]=X,n[19]=Y,n[20]=j,n[21]=K,n[22]=J):J=n[22];var Z=J,ee;n[23]!==M?(ee={0:{className:"x78zum5 xdt5ytf"},1:{className:"x78zum5 x6s0dn4 x1q0g3np"}}[!!M<<0],n[23]=M,n[24]=ee):ee=n[24];var te;n[25]!==Z?(te=m.jsx(C,{orientation:"horizontal",tabScopeQuery:o("focusScopeQueries").tabbableScopeQuery,wrap:!0,children:Z}),n[25]=Z,n[26]=te):te=n[26];var ne;n[27]!==z||n[28]!==te?(ne=m.jsx(r("CometComponentWithKeyCommands.react"),{commandConfigs:z,children:te}),n[27]=z,n[28]=te,n[29]=ne):ne=n[29];var re;n[30]!==M||n[31]!==E?(re=E!=null?m.jsx("div",babelHelpers.extends({},{0:{className:"xz9dl7a"},1:{className:"x135b78x xexx8yu"}}[!!M<<0],{children:m.jsx(r("FDSText.react"),{color:"secondary",type:"body3",children:E})})):null,n[30]=M,n[31]=E,n[32]=re):re=n[32];var oe;n[33]!==ee||n[34]!==ne||n[35]!==re||n[36]!==h?(oe=m.jsxs("div",babelHelpers.extends({},ee,{"data-testid":void 0,children:[ne,re]})),n[33]=ee,n[34]=ne,n[35]=re,n[36]=h,n[37]=oe):oe=n[37];var ae=oe,ie;return n[38]!==ae||n[39]!==P?(ie=P?m.jsx("div",{className:"xpdmqnj xf7dkkf xyamay9",children:ae}):ae,n[38]=ae,n[39]=P,n[40]=ie):ie=n[40],ie}function k(){}function I(){}function T(e){var t;return((t=e.addOn)==null?void 0:t.type)==="activityBadge"}function D(e){return e.addOn!=null}function x(e){switch(e){case 32:return o("fbicon")._(u("484386"),16);case 40:case 48:return o("fbicon")._(u("484388"),24);default:return o("fbicon")._(u("484385"),12)}}function $(e){var t=o("react-compiler-runtime").c(26),n,a,i,l,s,u;t[0]!==e?(n=e.FocusItemComponent,a=e.ellipsisTooltip,i=e.parentRef,s=e.size,u=e.spacing,l=babelHelpers.objectWithoutPropertiesLoose(e,c),t[0]=e,t[1]=n,t[2]=a,t[3]=i,t[4]=l,t[5]=s,t[6]=u):(n=t[1],a=t[2],i=t[3],l=t[4],s=t[5],u=t[6]);var d=h(!1),p=d[0],_=d[1],f=h(null),g=f[0],y=f[1],C;t[7]===Symbol.for("react.memo_cache_sentinel")?(C=function(t){var e=t.intersectionRatio;o("ReactDOM").flushSync(function(){_(e<.5)})},t[7]=C):C=t[7];var b=C,v;t[8]!==i?(v={root:function(){var e;return(e=i.current)!=null?e:null},threshold:.5},t[8]=i,t[9]=v):v=t[9];var S=r("useIntersectionObserver")(b,v),R;t[10]!==i||t[11]!==s||t[12]!==u?(R=function(t){if(t){var e=i.current;if(e){var n=e.getBoundingClientRect(),r=n.width,o=Math.floor((r+u)/(s+u));y(o-1)}}},t[10]=i,t[11]=s,t[12]=u,t[13]=R):R=t[13];var L=R,E;t[14]!==S||t[15]!==l?(E=m.jsx(r("CometPressable.react"),babelHelpers.extends({},l,{ref:S})),t[14]=S,t[15]=l,t[16]=E):E=t[16];var k=E,I;t[17]!==k||t[18]!==a||t[19]!==g||t[20]!==L?(I=a?m.jsx(r("FDSTooltip.react"),{align:"middle",onVisibilityChange:L,position:"below",tooltip:g!=null?a(g):"",children:k}):k,t[17]=k,t[18]=a,t[19]=g,t[20]=L,t[21]=I):I=t[21];var T;return t[22]!==n||t[23]!==p||t[24]!==I?(T=m.jsx(n,{disabled:p,children:I}),t[22]=n,t[23]=p,t[24]=I,t[25]=T):T=t[25],T}l.default=E}),226);
__d("FDSUnitHeaderHierarchyLevelContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).createContext,u=s(2);l.default=u}),98);
__d("FDSUnitHeaderHierarchyLevelContextProvider",["FDSUnitHeaderHierarchyLevelContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=e.level,i;return t[0]!==n||t[1]!==a?(i=s.jsx(r("FDSUnitHeaderHierarchyLevelContext").Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=u}),98);
__d("FDSUnitHeader.react",["BaseView.react","CometColumn.react","CometColumnItem.react","CometFocusTableContext","CometPressable.react","FDSIcon.react","FDSText.react","FDSTextPairing.react","FDSUnitHeaderHierarchyLevelContextProvider","IconSource","SVGIcon","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e=["action","action_DEPRECATED","actionAccessibilityLabel","actionAddOn","actionDisabled","actionHidden","actionIcon","actionLabel","actionLinkProps","actionRef","actiontestid","actionWrapper","addOn_DEPRECATED","body","bodyColor","bodyLineLimit","disabled","hasTopDivider","headline","headlineColor","headlineId","iconColor","iconSize","isSemanticHeading","level","meta","metaColor","metaLocation","metaTestID","onActionHoverIn","onActionHoverOut","onActionPress","onActionPressIn","onActionPressOut","paddingHorizontal","paddingTop","showActionOnHover","testOnly_actionPressed","testOnly_pressed","useFocusCell"],s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useState,p=8,_={action:{backgroundColor:null,borderTopStyle:"x1ejq31n",borderInlineEndStyle:"x18oe1m7",borderBottomStyle:"x1sy0etr",borderInlineStartStyle:"xstzfhl",display:"x1rg5ohu",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x1n2onr6",verticalAlign:"x3ajldb",$$css:!0},actionButton:{color:"x1fey0fg",cursor:"x1ypdohk",$$css:!0},actionHidden:{opacity:"xg01cxk",$$css:!0},hairline:{backgroundColor:"x14nfmen",height:"xjm9jq1",marginBottom:"x1jyxor1",$$css:!0},root:{paddingBottom:"xjkvuk6",$$css:!0},showActionOnHover:{visibility:"xlshs6z","@media (pointer: coarse)_visibility":"xwtlbus",$$css:!0}},f={0:{paddingTop:"xexx8yu",$$css:!0},8:{paddingTop:"x1y1aw1k",$$css:!0},12:{paddingTop:"xz9dl7a",$$css:!0},16:{paddingTop:"xyamay9",$$css:!0},20:{paddingTop:"x1cnzs8",$$css:!0}};function g(t){var n=o("react-compiler-runtime").c(134),a,i,l,s,c,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A,F,O,B,W,q,U,V,H,G,z,j,K,Q;if(n[0]!==t){var X=t.action,Y=t.action_DEPRECATED,J=t.actionAccessibilityLabel,Z=t.actionAddOn,ee=t.actionDisabled,te=t.actionHidden,ne=t.actionIcon,re=t.actionLabel,oe=t.actionLinkProps,ae=t.actionRef,ie=t.actiontestid,le=t.actionWrapper,se=t.addOn_DEPRECATED,ue=t.body,ce=t.bodyColor,de=t.bodyLineLimit,me=t.disabled,pe=t.hasTopDivider,_e=t.headline,fe=t.headlineColor,ge=t.headlineId,he=t.iconColor,ye=t.iconSize,Ce=t.isSemanticHeading,be=t.level,ve=t.meta,Se=t.metaColor,Re=t.metaLocation,Le=t.metaTestID,Ee=t.onActionHoverIn,ke=t.onActionHoverOut,Ie=t.onActionPress,Te=t.onActionPressIn,De=t.onActionPressOut,xe=t.paddingHorizontal,$e=t.paddingTop,Pe=t.showActionOnHover,Ne=t.testOnly_actionPressed,Me=t.testOnly_pressed,we=t.useFocusCell,Ae=babelHelpers.objectWithoutPropertiesLoose(t,e);a=X,C=Y,i=J,l=Z,w=ee,q=te,s=ne,c=re,g=oe,h=ae,b=ie,y=le,v=se,S=ue,U=ce,V=de,H=pe,L=_e,G=fe,E=ge,z=he,j=ye,K=Ce,k=be,I=ve,A=Se,T=Re,D=Le,x=Ee,$=ke,P=Ie,N=Te,M=De,F=xe,O=$e,B=Pe,Q=Ne,W=we,R=Ae,n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=g,n[7]=h,n[8]=y,n[9]=C,n[10]=b,n[11]=v,n[12]=S,n[13]=R,n[14]=L,n[15]=E,n[16]=k,n[17]=I,n[18]=T,n[19]=D,n[20]=x,n[21]=$,n[22]=P,n[23]=N,n[24]=M,n[25]=w,n[26]=A,n[27]=F,n[28]=O,n[29]=B,n[30]=W,n[31]=q,n[32]=U,n[33]=V,n[34]=H,n[35]=G,n[36]=z,n[37]=j,n[38]=K,n[39]=Q}else a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],g=n[6],h=n[7],y=n[8],C=n[9],b=n[10],v=n[11],S=n[12],R=n[13],L=n[14],E=n[15],k=n[16],I=n[17],T=n[18],D=n[19],x=n[20],$=n[21],P=n[22],N=n[23],M=n[24],w=n[25],A=n[26],F=n[27],O=n[28],B=n[29],W=n[30],q=n[31],U=n[32],V=n[33],H=n[34],G=n[35],z=n[36],j=n[37],K=n[38],Q=n[39];var Fe=w===void 0?!1:w,Oe=q===void 0?!1:q,Be=U===void 0?"secondary":U,We=V===void 0?3:V,qe=H===void 0?!1:H,Ue=G===void 0?"primary":G,Ve=z===void 0?"primary":z,He=j===void 0?16:j,Ge=K===void 0?!0:K,ze=A===void 0?"secondary":A,je=F===void 0?16:F,Ke=O===void 0?20:O,Qe=B===void 0?!1:B,Xe=W===void 0?!1:W,Ye=m(!1),Je=Ye[0],Ze=Ye[1],et=d(r("CometFocusTableContext")),tt=et.FocusCell,nt,rt=Q!=null?Q:!1,ot;n[40]!==Fe||n[41]!==g||n[42]!==b||n[43]!==x||n[44]!==$||n[45]!==P||n[46]!==N||n[47]!==M||n[48]!==rt?(ot={disabled:Fe,linkProps:g,onHoverIn:x,onHoverOut:$,onPress:P,onPressIn:N,onPressOut:M,testid:b,testOnly_pressed:rt},n[40]=Fe,n[41]=g,n[42]=b,n[43]=x,n[44]=$,n[45]=P,n[46]=N,n[47]=M,n[48]=rt,n[49]=ot):ot=n[49];var at=ot;if(a!=null)nt=a;else{if(l!=null)nt=l;else if(s!=null){var it;n[50]!==i||n[51]!==s||n[52]!==at||n[53]!==h||n[54]!==Ve?(it=u.jsx(r("FDSIcon.react"),babelHelpers.extends({},at,{"aria-label":i,color:Ve,icon:s,ref:h})),n[50]=i,n[51]=s,n[52]=at,n[53]=h,n[54]=Ve,n[55]=it):it=n[55],nt=it}else if(c!=null){var lt=i!=null?i:c,st=Oe&&!Je&&_.actionHidden,ut=Qe&&_.showActionOnHover,ct;n[56]!==st||n[57]!==ut?(ct=[_.actionButton,_.action,st,ut],n[56]=st,n[57]=ut,n[58]=ct):ct=n[58];var dt=Fe?"disabled":"blueLink",mt=k===2?"body2":"body3",pt;n[59]!==c||n[60]!==dt||n[61]!==mt?(pt=u.jsx(r("FDSText.react"),{color:dt,numberOfLines:1,type:mt,children:c}),n[59]=c,n[60]=dt,n[61]=mt,n[62]=pt):pt=n[62];var _t;n[63]!==at||n[64]!==h||n[65]!==lt||n[66]!==ct||n[67]!==pt?(_t=u.jsx(r("CometPressable.react"),babelHelpers.extends({},at,{"aria-label":lt,onFocusVisibleChange:Ze,overlayOffset:p,overlayRadius:4,ref:h,xstyle:ct,children:pt})),n[63]=at,n[64]=h,n[65]=lt,n[66]=ct,n[67]=pt,n[68]=_t):_t=n[68],nt=_t}else if(C!=null)if(C instanceof r("IconSource")){var ft;n[69]!==i||n[70]!==at||n[71]!==h||n[72]!==C||n[73]!==Ve?(ft=u.jsx(r("FDSIcon.react"),babelHelpers.extends({},at,{"aria-label":i,color:Ve,icon:C,ref:h})),n[69]=i,n[70]=at,n[71]=h,n[72]=C,n[73]=Ve,n[74]=ft):ft=n[74],nt=ft}else if(C instanceof o("SVGIcon").SVGIcon){var gt;n[75]!==i||n[76]!==at||n[77]!==h||n[78]!==C||n[79]!==Ve||n[80]!==He?(gt=u.jsx(r("FDSIcon.react"),babelHelpers.extends({},at,{"aria-label":i,color:Ve,icon:C,ref:h,size:He})),n[75]=i,n[76]=at,n[77]=h,n[78]=C,n[79]=Ve,n[80]=He,n[81]=gt):gt=n[81],nt=gt}else{var ht=i!=null?i:C,yt=Oe&&!Je&&_.actionHidden,Ct=Qe&&_.showActionOnHover,bt;n[82]!==yt||n[83]!==Ct?(bt=[_.actionButton,_.action,yt,Ct],n[82]=yt,n[83]=Ct,n[84]=bt):bt=n[84];var vt=Fe?"disabled":"blueLink",St=k===2?"body2":"body3",Rt;n[85]!==C||n[86]!==vt||n[87]!==St?(Rt=u.jsx(r("FDSText.react"),{color:vt,numberOfLines:1,type:St,children:C}),n[85]=C,n[86]=vt,n[87]=St,n[88]=Rt):Rt=n[88];var Lt;n[89]!==at||n[90]!==h||n[91]!==ht||n[92]!==bt||n[93]!==Rt?(Lt=u.jsx(r("CometPressable.react"),babelHelpers.extends({},at,{"aria-label":ht,onFocusVisibleChange:Ze,overlayOffset:p,overlayRadius:4,ref:h,xstyle:bt,children:Rt})),n[89]=at,n[90]=h,n[91]=ht,n[92]=bt,n[93]=Rt,n[94]=Lt):Lt=n[94],nt=Lt}else if(v!=null){var Et;n[95]!==v?(Et=u.jsx(o("react-strict-dom").html.div,{style:_.action,children:v}),n[95]=v,n[96]=Et):Et=n[96],nt=Et}if(y!=null){var kt=y.component,It=nt,Tt;n[97]!==kt||n[98]!==y.props||n[99]!==It?(Tt=u.jsx(kt,babelHelpers.extends({},y.props,{children:It})),n[97]=kt,n[98]=y.props,n[99]=It,n[100]=Tt):Tt=n[100],nt=Tt}}if(Xe===!0&&tt!=null){var Dt;n[101]!==tt||n[102]!==nt?(Dt=u.jsx(tt,{children:nt}),n[101]=tt,n[102]=nt,n[103]=Dt):Dt=n[103],nt=Dt}var xt;n[104]!==nt||n[105]!==k?(xt=u.jsx(r("FDSUnitHeaderHierarchyLevelContextProvider"),{level:k,children:nt}),n[104]=nt,n[105]=k,n[106]=xt):xt=n[106];var $t=T!=null?T:"below",Pt;n[107]!==S||n[108]!==Be||n[109]!==We||n[110]!==L||n[111]!==Ue||n[112]!==E||n[113]!==Ge||n[114]!==k||n[115]!==I||n[116]!==ze||n[117]!==D||n[118]!==xt||n[119]!==$t?(Pt=u.jsx(r("FDSTextPairing.react"),{body:S,bodyColor:Be,bodyLineLimit:We,headline:L,headlineAddOn:xt,headlineColor:Ue,headlineId:E,headlineLineLimit:2,isSemanticHeading:Ge,level:k,meta:I,metaColor:ze,metaLineLimit:1,metaLocation:$t,metaTestID:D}),n[107]=S,n[108]=Be,n[109]=We,n[110]=L,n[111]=Ue,n[112]=E,n[113]=Ge,n[114]=k,n[115]=I,n[116]=ze,n[117]=D,n[118]=xt,n[119]=$t,n[120]=Pt):Pt=n[120];var Nt=Pt,Mt=qe?0:je,wt=f[Ke],At;n[121]!==wt?(At=[_.root,wt],n[121]=wt,n[122]=At):At=n[122];var Ft;n[123]!==Nt?(Ft=u.jsx(r("CometColumnItem.react"),{children:Nt}),n[123]=Nt,n[124]=Ft):Ft=n[124];var Ot;n[125]!==R||n[126]!==Mt||n[127]!==At||n[128]!==Ft?(Ot=u.jsx(r("CometColumn.react"),babelHelpers.extends({},R,{paddingHorizontal:Mt,xstyle:At,children:Ft})),n[125]=R,n[126]=Mt,n[127]=At,n[128]=Ft,n[129]=Ot):Ot=n[129];var Bt=Ot;if(qe){var Wt;n[130]===Symbol.for("react.memo_cache_sentinel")?(Wt=u.jsx(r("CometColumnItem.react"),{children:u.jsx(r("BaseView.react"),{xstyle:_.hairline})}),n[130]=Wt):Wt=n[130];var qt;return n[131]!==Bt||n[132]!==je?(qt=u.jsxs(r("CometColumn.react"),{paddingHorizontal:je,children:[Wt,Bt]}),n[131]=Bt,n[132]=je,n[133]=qt):qt=n[133],qt}return Bt}l.default=g}),98);
__d("LSClearCommunityMembersRangeTable",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return e[1]!==void 0?n[0]=e[1]:n[0]="",t.i64.neq(e[0],void 0)?n[1]=!1:n[1]=!0,t.forEach(t.filter(t.db.table(189).fetch(),function(r){return(n[1]||t.i64.eq(r.source,e[0]))&&r.requestId===n[0]}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxClearCommunityMembersRangeTableStoredProcedure",e.__tables__=["community_members_ranges_v2__generated"],a.exports=e}),null);
__d("LSClearCommunityMembersTable",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return e[1]!==void 0?n[0]=e[1]:n[0]="",t.i64.neq(e[0],void 0)?n[1]=!1:n[1]=!0,t.i64.neq(e[2],void 0)?t.forEach(t.filter(t.db.table(170).fetch(),function(r){return(n[1]||t.i64.eq(r.source,e[0]))&&t.i64.eq(r.groupThreadId,e[2])&&r.requestId===n[0]}),function(e){return e.delete()}):t.forEach(t.filter(t.db.table(170).fetch(),function(r){return(n[1]||t.i64.eq(r.source,e[0]))&&r.requestId===n[0]}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxClearCommunityMembersTableStoredProcedure",e.__tables__=["community_members"],a.exports=e}),null);
__d("LSClearCommunityMembersAndRange",["LSClearCommunityMembersRangeTable","LSClearCommunityMembersTable"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(r){return t.storedProcedure(n("LSClearCommunityMembersTable"),e[0],e[1],e[2])},function(r){return t.storedProcedure(n("LSClearCommunityMembersRangeTable"),e[0],e[1])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxClearCommunityMembersAndRangeStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSClearCommunityMembersAndRangeStoredProcedure",["LSClearCommunityMembersAndRange","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){a===void 0&&(a={});var i=t.storedProcedure(r("LSClearCommunityMembersAndRange"),a.source,a.requestId,a.threadId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpsertCommunityMemberRanges",["LSArrayGetObjectAt"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.createArray(),r[3]=(r[0].push(t.i64.cast([0,0])),r[0]),e[2]===!0?t.resolve(r[1]=!0):t.sequence([function(o){return r[3]=!1,r[4]=t.i64.of_int32(e[1].length),t.i64.gt(r[4],t.i64.cast([0,0]))?t.loopAsync(r[4],function(o){return r[5]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[1],r[5]).then(function(e){var t;return t=e,r[6]=t[0],r[7]=t[1],t})},function(e){return r[3]=r[3]||t.i64.eq(t.i64.cast([0,1]),r[6])}])}):t.resolve()},function(e){return r[1]=r[3]}])},function(n){return e[9]!==void 0?r[2]=e[9]:r[2]="",t.db.table(189).put({communityId:e[0],isAdmin:r[1],minName:"",source:e[7],requestId:r[2],maxName:e[6],isLoadingBefore:!1,isLoadingAfter:e[4],hasMoreBefore:!1,hasMoreAfter:e[3],nextPageCursor:e[5]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpsertCommunityMemberRangesStoredProcedure",e.__tables__=["community_members_ranges_v2__generated"],a.exports=e}),null);
__d("LSIssueCommunityMemberListFetch",["LSIssueNewTaskWithExtraOperations","LSUpsertCommunityMemberRanges"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.createArray(),r[4]=(r[0].push(t.i64.cast([0,0])),r[0]),r[1]=t.createArray(),t.storedProcedure(n("LSUpsertCommunityMemberRanges"),e[0],e[1],e[2],!1,!0,"",e[5],e[6],e[9],e[11])},function(o){return r[2]=new t.Map,r[2].set("community_id",e[0]),r[2].set("roles",e[1]),r[2].set("fetch_admins_only",e[2]),r[2].set("cursor",e[4]),r[2].set("source",e[6]),r[2].set("thread_key",e[7]),r[2].set("search_text",e[8]),r[2].set("thread_roles",e[9]),r[2].set("group_thread_id",e[10]),r[2].set("request_id",e[11]),r[3]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"fetch_community_member_list",t.i64.cast([0,355]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxIssueCommunityMemberListFetchStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSIssueCommunityMemberListFetchStoredProcedure",["LSIssueCommunityMemberListFetch","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSIssueCommunityMemberListFetch"),a.communityId,a.roles,a.fetchAdminsOnly,a.fetchFriendMembersOnly,a.nextPageCursor,a.maxName,a.source,a.threadKey,a.searchText,a.threadRoles,a.groupThreadId,a.requestId,a.maxTimestampMs);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<51a1bdf7ccdb90bd81c950f38cd9ecfb>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("Lexical.prod",[],(function $module_Lexical_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _I,_F;function t(t){var n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams();r.append("code",t);for(var _len=arguments.length,e=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){e[_key-1]=arguments[_key];}for(var _t2 of e)r.append("v",_t2);throw n.search=r.toString(),Error("Minified Lexical error #"+t+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}function e(t){for(var _len2=arguments.length,e=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){e[_key2-1]=arguments[_key2];}var n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams();r.append("code",t);for(var _t3 of e)r.append("v",_t3);n.search=r.toString(),console.warn("Minified Lexical warning #"+t+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}var n="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,r=n&&"documentMode"in document?document.documentMode:null,o=n&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),i=n&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),s=!(!n||!("InputEvent"in window)||r)&&"getTargetRanges"in new window.InputEvent("input"),l=n&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),c=n&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,a=n&&/Android/.test(navigator.userAgent),u=n&&/^(?=.*Chrome).*/i.test(navigator.userAgent),f=n&&a&&u,d=n&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&o&&!u;function h(){var e=[];for(var _len3=arguments.length,t=new Array(_len3),_key3=0;_key3<_len3;_key3++){t[_key3]=arguments[_key3];}for(var _n2 of t)if(_n2&&"string"==typeof _n2)for(var _ref2 of _n2.matchAll(/\S+/g)){var _t4=_ref2[0];e.push(_t4);}return e;}var g=0,_=1,p=2,y=128,m=1,x=2,C=3,S=4,N=5,T=6,v=l||c||d?"":"",k="\n\n",E=i?"":v,O="---",b="A-Za-z--------",M=new RegExp("^[^"+b+"]*["+O+"]"),A=new RegExp("^[^"+O+"]*["+b+"]"),w={bold:1,capitalize:1024,code:16,highlight:y,italic:2,lowercase:256,strikethrough:4,subscript:32,superscript:64,underline:8,uppercase:512},D={directionless:1,unmergeable:2},P={center:2,end:6,justify:4,left:1,right:3,start:5},I=(_I={},_I[x]="center",_I[T]="end",_I[S]="justify",_I[m]="left",_I[C]="right",_I[N]="start",_I),L={normal:0,segmented:2,token:1},F=(_F={},_F[g]="normal",_F[p]="segmented",_F[_]="token",_F),R="$config";function K(t,e,n,r,o,i){var s=t.getFirstChild();for(;null!==s;){var _t5=s.__key;s.__parent===e&&(co(s)&&K(s,_t5,n,r,o,i),n.has(_t5)||i["delete"](_t5),o.push(_t5)),s=s.getNextSibling();}}var B=!1,z=0;function W(t){z=t.timeStamp;}function $(t,e,n){var r="BR"===t.nodeName,o=e.__lexicalLineBreak;return o&&(t===o||r&&t.previousSibling===o)||r&&void 0!==Zo(t,n);}function U(t,e,n){var r=Ji(Li(n));var o=null,i=null;null!==r&&r.anchorNode===t&&(o=r.anchorOffset,i=r.focusOffset);var s=t.nodeValue;null!==s&&di(e,s,o,i,!1);}function J(t,e,n){if(ar(t)){var _e2=t.anchor.getNode();if(_e2.is(n)&&t.format!==_e2.getFormat())return!1;}return $o(e)&&n.isAttached();}function Y(t,e,n,r){for(var _o2=t;_o2&&!os(_o2);_o2=Mi(_o2)){var _t6=Zo(_o2,e);if(void 0!==_t6){var _e3=Xo(_t6,n);if(_e3)return fo(_e3)||!ji(_o2)?void 0:[_o2,_e3];}else if(_o2===r)return[r,oi(n)];}}function j(t,e,n){B=!0;var r=performance.now()-z>100;try{oo(t,function(){var o=kr()||function(t){return t.getEditorState().read(function(){var t=kr();return null!==t?t.clone():null;});}(t),s=new Map(),l=t.getRootElement(),c=t._editorState,a=t._blockCursorElement;var u=!1,f="";for(var _n3=0;_n3<e.length;_n3++){var _d=e[_n3],_h=_d.type,_g=_d.target,_2=Y(_g,t,c,l);if(!_2)continue;var _p=_2[0],_y=_2[1];if("characterData"===_h)r&&Zn(_y)&&$o(_g)&&J(o,_g,_y)&&U(_g,_y,t);else if("childList"===_h){u=!0;var _e4=_d.addedNodes;for(var _n4=0;_n4<_e4.length;_n4++){var _r2=_e4[_n4],_o3=Qo(_r2),_s4=_r2.parentNode;if(null!=_s4&&_r2!==a&&null===_o3&&!$(_r2,_s4,t)){if(i){var _t7=(ji(_r2)?_r2.innerText:null)||_r2.nodeValue;_t7&&(f+=_t7);}_s4.removeChild(_r2);}}var _n5=_d.removedNodes,_r3=_n5.length;if(_r3>0){var _e5=0;for(var _o4=0;_o4<_r3;_o4++){var _r4=_n5[_o4];($(_r4,_g,t)||a===_r4)&&(_g.appendChild(_r4),_e5++);}_r3!==_e5&&s.set(_p,_y);}}}if(s.size>0)for(var _ref4 of s){var _e6=_ref4[0];var _n6=_ref4[1];_n6.reconcileObservedMutation(_e6,t);}var d=n.takeRecords();if(d.length>0){for(var _e7=0;_e7<d.length;_e7++){var _n7=d[_e7],_r5=_n7.addedNodes,_o5=_n7.target;for(var _e8=0;_e8<_r5.length;_e8++){var _n8=_r5[_e8],_i2=_n8.parentNode;null==_i2||"BR"!==_n8.nodeName||$(_n8,_o5,t)||_i2.removeChild(_n8);}}n.takeRecords();}null!==o&&(u&&ii(o),i&&ki(t)&&o.insertRawText(f));});}finally{B=!1;}}function H(t){var e=t._observer;if(null!==e){j(t,e.takeRecords(),e);}}function V(t){!function(t){0===z&&Li(t).addEventListener("textInput",W,!0);}(t),t._observer=new MutationObserver(function(e,n){j(t,e,n);});}var G=function G(t,e){this.key=t,this.parse=e.parse.bind(e),this.unparse=(e.unparse||nt).bind(e),this.isEqual=(e.isEqual||Object.is).bind(e),this.defaultValue=this.parse(void 0);};function q(t,e,n){if(n===void 0){n="latest";}var r=("latest"===n?t.getLatest():t).__state;return r?r.getValue(e):e.defaultValue;}function X(t){var e=new Map(),n=new Set();for(var _r6="function"==typeof t?t:t.replace;_r6.prototype&&void 0!==_r6.prototype.getType;_r6=Object.getPrototypeOf(_r6)){var _ss=ss(_r6),_t8=_ss.ownNodeConfig;if(_t8&&_t8.stateConfigs)for(var _r7 of _t8.stateConfigs){var _t9=void 0;"stateConfig"in _r7?(_t9=_r7.stateConfig,_r7.flat&&n.add(_t9.key)):_t9=_r7,e.set(_t9.key,_t9);}}return{flatKeys:n,sharedConfigMap:e};}var _Q=function(){function Q(t,e,n,r,o){if(n===void 0){n=void 0;}if(r===void 0){r=new Map();}if(o===void 0){o=void 0;}this.node=t,this.sharedNodeState=e,this.unknownState=n,this.knownState=r;var i=this.sharedNodeState.sharedConfigMap,s=void 0!==o?o:function(t,e,n){var r=n.size;if(e)for(var _o6 in e){var _e9=t.get(_o6);_e9&&n.has(_e9)||r++;}return r;}(i,n,r);this.size=s;}var _proto=Q.prototype;_proto.getValue=function getValue(t){var e=this.knownState.get(t);if(void 0!==e)return e;this.sharedNodeState.sharedConfigMap.set(t.key,t);var n=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){var _e0=this.unknownState[t.key];void 0!==_e0&&(n=t.parse(_e0)),this.updateFromKnown(t,n);}return n;};_proto.getInternalState=function getInternalState(){return[this.unknownState,this.knownState];};_proto.toJSON=function toJSON(){var t=babelHelpers["extends"]({},this.unknownState),e={};for(var _ref6 of this.knownState){var _e1=_ref6[0];var _n9=_ref6[1];_e1.isEqual(_n9,_e1.defaultValue)?delete t[_e1.key]:t[_e1.key]=_e1.unparse(_n9);}for(var _n0 of this.sharedNodeState.flatKeys)_n0 in t&&(e[_n0]=t[_n0],delete t[_n0]);return et(t)&&(e.$=t),e;};_proto.getWritable=function getWritable(t){if(this.node===t)return this;var e=this.sharedNodeState,n=this.unknownState,r=new Map(this.knownState);return new Q(t,e,function(t,e,n){var r;if(n)for(var _ref8 of Object.entries(n)){var _o7=_ref8[0];var _i3=_ref8[1];{var _n1=t.get(_o7);_n1?e.has(_n1)||e.set(_n1,_n1.parse(_i3)):(r=r||{},r[_o7]=_i3);}}return r;}(e.sharedConfigMap,r,n),r,this.size);};_proto.updateFromKnown=function updateFromKnown(t,e){var n=t.key;this.sharedNodeState.sharedConfigMap.set(n,t);var r=this.knownState,o=this.unknownState;r.has(t)||o&&n in o||(o&&(delete o[n],this.unknownState=et(o)),this.size++),r.set(t,e);};_proto.updateFromUnknown=function updateFromUnknown(t,e){var n=this.sharedNodeState.sharedConfigMap.get(t);n?this.updateFromKnown(n,n.parse(e)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=e);};_proto.updateFromJSON=function updateFromJSON(t){var e=this.knownState;for(var _t0 of e.keys())e.set(_t0,_t0.defaultValue);if(this.size=e.size,this.unknownState=void 0,t)for(var _ref0 of Object.entries(t)){var _e10=_ref0[0];var _n10=_ref0[1];this.updateFromUnknown(_e10,_n10);}};return Q;}();function Z(t){var e=t.getWritable(),n=e.__state?e.__state.getWritable(e):new _Q(e,tt(e));return e.__state=n,n;}function tt(t){return t.__state?t.__state.sharedNodeState:wo(Qi(),t.getType()).sharedNodeState;}function et(t){if(t)for(var _e11 in t)return t;}function nt(t){return t;}function rt(t,e,n){for(var _ref10 of e.knownState){var _r8=_ref10[0];var _o8=_ref10[1];{if(t.has(_r8.key))continue;t.add(_r8.key);var _e12=n?n.getValue(_r8):_r8.defaultValue;if(_e12!==_o8&&!_r8.isEqual(_e12,_o8))return!0;}}return!1;}function ot(t,e,n){var r=e.unknownState,o=n?n.unknownState:void 0;if(r)for(var _ref12 of Object.entries(r)){var _e13=_ref12[0];var _n11=_ref12[1];if(t.has(_e13))continue;t.add(_e13);if(_n11!==(o?o[_e13]:void 0))return!0;}return!1;}function it(t,e){var n=t.__state;return n&&n.node===t?n.getWritable(e):n;}function st(t,e){var n=t.__mode,r=t.__format,o=t.__style,i=e.__mode,s=e.__format,l=e.__style,c=t.__state,a=e.__state;return(null===n||n===i)&&(null===r||r===s)&&(null===o||o===l)&&(null===t.__state||c===a||function(t,e){if(t===e)return!0;if(t&&e&&t.size!==e.size)return!1;var n=new Set();return!(t&&rt(n,t,e)||e&&rt(n,e,t)||t&&ot(n,t,e)||e&&ot(n,e,t));}(c,a));}function lt(t,e){var n=t.mergeWithSibling(e),r=jr()._normalizedNodes;return r.add(t.__key),r.add(e.__key),n;}function ct(t){var e,n,r=t;if(""!==r.__text||!r.isSimpleText()||r.isUnmergeable()){for(;null!==(e=r.getPreviousSibling())&&Zn(e)&&e.isSimpleText()&&!e.isUnmergeable();){if(""!==e.__text){if(st(e,r)){r=lt(e,r);break;}break;}e.remove();}for(;null!==(n=r.getNextSibling())&&Zn(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(""!==n.__text){if(st(r,n)){r=lt(r,n);break;}break;}n.remove();}}else r.remove();}function at(t){return ut(t.anchor),ut(t.focus),t;}function ut(t){for(;"element"===t.type;){var _e14=t.getNode(),_n12=t.offset;var _r9=void 0,_o9=void 0;if(_n12===_e14.getChildrenSize()?(_r9=_e14.getChildAtIndex(_n12-1),_o9=!0):(_r9=_e14.getChildAtIndex(_n12),_o9=!1),Zn(_r9)){t.set(_r9.__key,_o9?_r9.getTextContentSize():0,"text",!0);break;}if(!co(_r9))break;t.set(_r9.__key,_o9?_r9.getChildrenSize():0,"element",!0);}}var ft,dt,ht,gt,_t,pt,yt,mt,xt,Ct,St="",Nt=null,Tt=null,vt="",kt=!1,Et=!1;function Ot(t,e){var n=yt.get(t);if(null!==e){var _n13=Jt(t);_n13.parentNode===e&&e.removeChild(_n13);}if(mt.has(t)||dt._keyToDOMMap["delete"](t),co(n)){var _t1=Bt(n,yt);bt(_t1,0,_t1.length-1,null);}void 0!==n&&Ni(Ct,ht,gt,n,"destroyed");}function bt(t,e,n,r){var o=e;for(;o<=n;++o){var _e15=t[o];void 0!==_e15&&Ot(_e15,r);}}function Mt(t,e){t.setProperty("text-align",e);}var At="40px";function wt(t,e){var n=ft.theme.indent;if("string"==typeof n){var _r0=t.classList.contains(n);e>0&&!_r0?t.classList.add(n):e<1&&_r0&&t.classList.remove(n);}var r=getComputedStyle(t).getPropertyValue("--lexical-indent-base-value")||At;t.style.setProperty("padding-inline-start",0===e?"":"calc("+e+" * "+r+")");}function Dt(t,e){var n=t.style;0===e?Mt(n,""):1===e?Mt(n,"left"):2===e?Mt(n,"center"):3===e?Mt(n,"right"):4===e?Mt(n,"justify"):5===e?Mt(n,"start"):6===e&&Mt(n,"end");}function Pt(t,e){var n=function(t){var e=t.__dir;if(null!==e)return e;if(go(t))return null;var n=t.getParentOrThrow();return go(n)&&null===n.__dir?"auto":null;}(e);null!==n?t.dir=n:t.removeAttribute("dir");}function It(e,n){var r=mt.get(e);void 0===r&&t(60);var o=r.createDOM(ft,dt);if(function(t,e,n){var r=n._keyToDOMMap;(function(t,e,n){var r="__lexicalKey_"+e._key;t[r]=n;})(e,n,t),r.set(t,e);}(e,o,dt),Zn(r)?o.setAttribute("data-lexical-text","true"):fo(r)&&o.setAttribute("data-lexical-decorator","true"),co(r)){var _t10=r.__indent,_e16=r.__size;if(Pt(o,r),0!==_t10&&wt(o,_t10),0!==_e16){var _t11=_e16-1;Lt(Bt(r,mt),r,0,_t11,r.getDOMSlot(o));}var _n14=r.__format;0!==_n14&&Dt(o,_n14),r.isInline()||Rt(null,r,o),Oi(r)&&(St+=k,vt+=k);}else{var _t12=r.getTextContent();if(fo(r)){var _t13=r.decorate(dt,ft);null!==_t13&&Wt(e,_t13),o.contentEditable="false";}St+=_t12,vt+=_t12;}return null!==n&&n.insertChild(o),Ni(Ct,ht,gt,r,"created"),o;}function Lt(t,e,n,r,o){var i=St;St="";var s=n;for(;s<=r;++s){It(t[s],o);var _e17=mt.get(t[s]);null!==_e17&&Zn(_e17)&&null===Nt&&(Nt=_e17.getFormat(),Tt=_e17.getStyle());}Oi(e)&&(St+=k);o.element.__lexicalTextContent=St,St=i+St;}function Ft(t,e){if(t){var _n15=t.__last;if(_n15){var _t14=e.get(_n15);if(_t14)return Ln(_t14)?"line-break":fo(_t14)&&_t14.isInline()?"decorator":null;}return"empty";}return null;}function Rt(t,e,n){var r=Ft(t,yt),o=Ft(e,mt);r!==o&&e.getDOMSlot(n).setManagedLineBreak(o);}function Kt(e,n,r){var o;Nt=null,Tt=null,function(e,n,r){var o=St,i=e.__size,s=n.__size;St="";var l=r.element;if(1===i&&1===s){var _t15=e.__first,_r1=n.__first;if(_t15===_r1)zt(_t15,l);else{var _e18=Jt(_t15),_n16=It(_r1,null);try{l.replaceChild(_n16,_e18);}catch(o){if("object"==typeof o&&null!=o){var _i4=o.toString()+" Parent: "+l.tagName+", new child: {tag: "+_n16.tagName+" key: "+_r1+"}, old child: {tag: "+_e18.tagName+", key: "+_t15+"}.";throw new Error(_i4);}throw o;}Ot(_t15,null);}var _o0=mt.get(_r1);Zn(_o0)&&null===Nt&&(Nt=_o0.getFormat(),Tt=_o0.getStyle());}else{var _o1=Bt(e,yt),_c=Bt(n,mt);if(_o1.length!==i&&t(227),_c.length!==s&&t(228),0===i)0!==s&&Lt(_c,n,0,s-1,r);else if(0===s){if(0!==i){var _t16=null==r.after&&null==r.before&&null==r.element.__lexicalLineBreak;bt(_o1,0,i-1,_t16?null:l),_t16&&(l.textContent="");}}else!function(t,e,n,r,o,i){var s=r-1,l=o-1;var c,a,u=i.getFirstChild(),f=0,d=0;for(;f<=s&&d<=l;){var _t17=e[f],_r10=n[d];if(_t17===_r10)u=$t(zt(_r10,i.element)),f++,d++;else{void 0===c&&(c=new Set(e)),void 0===a&&(a=new Set(n));var _o10=a.has(_t17),_s5=c.has(_r10);if(_o10){if(_s5){var _t18=bi(dt,_r10);_t18===u?u=$t(zt(_r10,i.element)):(i.withBefore(u).insertChild(_t18),zt(_r10,i.element)),f++,d++;}else It(_r10,i.withBefore(u)),d++;}else u=$t(Jt(_t17)),Ot(_t17,i.element),f++;}var _o11=mt.get(_r10);null!==_o11&&Zn(_o11)&&null===Nt&&(Nt=_o11.getFormat(),Tt=_o11.getStyle());}var h=f>s,g=d>l;if(h&&!g){var _e19=n[l+1],_r11=void 0===_e19?null:dt.getElementByKey(_e19);Lt(n,t,d,l,i.withBefore(_r11));}else g&&!h&&bt(e,f,s,i.element);}(n,_o1,_c,i,s,r);}Oi(n)&&(St+=k);l.__lexicalTextContent=St,St=o+St;}(e,n,n.getDOMSlot(r)),o=n,null==Nt||Nt===o.__textFormat||Et||o.setTextFormat(Nt),function(t){null==Tt||Tt===t.__textStyle||Et||t.setTextStyle(Tt);}(n);}function Bt(e,n){var r=[];var o=e.__first;for(;null!==o;){var _e20=n.get(o);void 0===_e20&&t(101),r.push(o),o=_e20.__next;}return r;}function zt(e,n){var r=yt.get(e);var o=mt.get(e);void 0!==r&&void 0!==o||t(61);var i=kt||pt.has(e)||_t.has(e),s=bi(dt,e);if(r===o&&!i){if(co(r)){var _t19=s.__lexicalTextContent;void 0!==_t19&&(St+=_t19,vt+=_t19);}else{var _t20=r.getTextContent();vt+=_t20,St+=_t20;}return s;}if(r!==o&&i&&Ni(Ct,ht,gt,o,"updated"),o.updateDOM(r,s,ft)){var _r12=It(e,null);return null===n&&t(62),n.replaceChild(_r12,s),Ot(e,null),_r12;}if(co(r)&&co(o)){var _t21=o.__indent;(kt||_t21!==r.__indent)&&wt(s,_t21);var _e21=o.__format;if((kt||_e21!==r.__format)&&Dt(s,_e21),i&&(Kt(r,o,s),go(o)||o.isInline()||Rt(r,o,s)),Oi(o)&&(St+=k,vt+=k),(kt||o.__dir!==r.__dir)&&(Pt(s,o),go(o)&&!kt))for(var _t22 of o.getChildren())if(co(_t22)){Pt(bi(dt,_t22.getKey()),_t22);}}else{var _t23=o.getTextContent();if(fo(o)){var _t24=o.decorate(dt,ft);null!==_t24&&Wt(e,_t24);}St+=_t23,vt+=_t23;}if(!Et&&go(o)&&o.__cachedText!==vt){var _t25=o.getWritable();_t25.__cachedText=vt,o=_t25;}return s;}function Wt(t,e){var n=dt._pendingDecorators;var r=dt._decorators;if(null===n){if(r[t]===e)return;n=ei(dt);}n[t]=e;}function $t(t){var e=t.nextSibling;return null!==e&&e===dt._blockCursorElement&&(e=e.nextSibling),e;}function Ut(t,e,n,r,o,i){St="",vt="",kt=2===r,dt=n,ft=n._config,ht=n._nodes,gt=dt._listeners.mutation,_t=o,pt=i,yt=t._nodeMap,mt=e._nodeMap,Et=e._readOnly,xt=new Map(n._keyToDOMMap);var s=new Map();return Ct=s,zt("root",null),dt=void 0,ht=void 0,_t=void 0,pt=void 0,yt=void 0,mt=void 0,ft=void 0,xt=void 0,Ct=void 0,s;}function Jt(e){var n=xt.get(e);return void 0===n&&t(75,e),n;}function Yt(t){return{type:t};}var jt=Yt("SELECTION_CHANGE_COMMAND"),Ht=Yt("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),Vt=Yt("CLICK_COMMAND"),Gt=Yt("BEFORE_INPUT_COMMAND"),qt=Yt("INPUT_COMMAND"),Xt=Yt("COMPOSITION_START_COMMAND"),Qt=Yt("COMPOSITION_END_COMMAND"),Zt=Yt("DELETE_CHARACTER_COMMAND"),te=Yt("INSERT_LINE_BREAK_COMMAND"),ee=Yt("INSERT_PARAGRAPH_COMMAND"),ne=Yt("CONTROLLED_TEXT_INSERTION_COMMAND"),re=Yt("PASTE_COMMAND"),oe=Yt("REMOVE_TEXT_COMMAND"),ie=Yt("DELETE_WORD_COMMAND"),se=Yt("DELETE_LINE_COMMAND"),le=Yt("FORMAT_TEXT_COMMAND"),ce=Yt("UNDO_COMMAND"),ae=Yt("REDO_COMMAND"),ue=Yt("KEYDOWN_COMMAND"),fe=Yt("KEY_ARROW_RIGHT_COMMAND"),de=Yt("MOVE_TO_END"),he=Yt("KEY_ARROW_LEFT_COMMAND"),ge=Yt("MOVE_TO_START"),_e=Yt("KEY_ARROW_UP_COMMAND"),pe=Yt("KEY_ARROW_DOWN_COMMAND"),ye=Yt("KEY_ENTER_COMMAND"),me=Yt("KEY_SPACE_COMMAND"),xe=Yt("KEY_BACKSPACE_COMMAND"),Ce=Yt("KEY_ESCAPE_COMMAND"),Se=Yt("KEY_DELETE_COMMAND"),Ne=Yt("KEY_TAB_COMMAND"),Te=Yt("INSERT_TAB_COMMAND"),ve=Yt("INDENT_CONTENT_COMMAND"),ke=Yt("OUTDENT_CONTENT_COMMAND"),Ee=Yt("DROP_COMMAND"),Oe=Yt("FORMAT_ELEMENT_COMMAND"),be=Yt("DRAGSTART_COMMAND"),Me=Yt("DRAGOVER_COMMAND"),Ae=Yt("DRAGEND_COMMAND"),we=Yt("COPY_COMMAND"),De=Yt("CUT_COMMAND"),Pe=Yt("SELECT_ALL_COMMAND"),Ie=Yt("CLEAR_EDITOR_COMMAND"),Le=Yt("CLEAR_HISTORY_COMMAND"),Fe=Yt("CAN_REDO_COMMAND"),Re=Yt("CAN_UNDO_COMMAND"),Ke=Yt("FOCUS_COMMAND"),Be=Yt("BLUR_COMMAND"),ze=Yt("KEY_MODIFIER_COMMAND"),We=Object.freeze({}),$e=[["keydown",function(t,e){if(Ue=t.timeStamp,Je=t.key,e.isComposing())return;Ei(e,ue,t);}],["pointerdown",function(t,e){var n=t.target,r=t.pointerType;Hi(n)&&"touch"!==r&&"pen"!==r&&0===t.button&&oo(e,function(){Io(n)||(qe=!0);});}],["compositionstart",function(t,e){Ei(e,Xt,t);}],["compositionend",function(t,e){i?Qe=!0:c||!l&&!d?Ei(e,Qt,t):(Ze=!0,tn=t.data);}],["input",function(t,e){t.stopPropagation(),oo(e,function(){e.dispatchCommand(qt,t);},{event:t}),je=null;}],["click",function(t,e){oo(e,function(){var n=kr(),r=Ji(Li(e)),o=Er();if(r)if(ar(n)){var _e22=n.anchor,_i5=_e22.getNode();if("element"===_e22.type&&0===_e22.offset&&n.isCollapsed()&&!go(_i5)&&1===ri().getChildrenSize()&&_i5.getTopLevelElementOrThrow().isEmpty()&&null!==o&&n.is(o))r.removeAllRanges(),n.dirty=!0;else if(3===t.detail&&!n.isCollapsed()){if(_i5!==n.focus.getNode()){var _t26=ls(_i5,function(t){return co(t)&&!t.isInline();});co(_t26)&&_t26.select(0);}}}else if("touch"===t.pointerType||"pen"===t.pointerType){var _n17=r.anchorNode;if(ji(_n17)||$o(_n17)){ii(vr(o,r,e,t));}}Ei(e,Vt,t);});}],["cut",We],["copy",We],["dragstart",We],["dragover",We],["dragend",We],["paste",We],["focus",We],["blur",We],["drop",We]];s&&$e.push(["beforeinput",function(t,e){return function(t,e){var n=t.inputType;if("deleteCompositionText"===n||i&&ki(e))return;if("insertCompositionText"===n)return;Ei(e,Gt,t);}(t,e);}]);var Ue=0,Je=null,Ye=0,je=null;var He=new WeakMap(),Ve=new WeakMap();var Ge=!1,qe=!1,Xe=!1,Qe=!1,Ze=!1,tn="",en=null,nn=[0,"",0,"root",0];function rn(t,e,n,r,o){var i=t.anchor,l=t.focus,c=i.getNode(),a=jr(),u=Ji(Li(a)),f=null!==u?u.anchorNode:null,d=i.key,h=a.getElementByKey(d),g=n.length;return d!==l.key||!Zn(c)||(!o&&(!s||Ye<r+50)||c.isDirty()&&g<2||li(n))&&i.offset!==l.offset&&!c.isComposing()||Wo(c)||c.isDirty()&&g>1||(o||!s)&&null!==h&&!c.isComposing()&&f!==Jo(h)||null!==u&&null!==e&&(!e.collapsed||e.startContainer!==u.anchorNode||e.startOffset!==u.anchorOffset)||c.getFormat()!==t.format||c.getStyle()!==t.style||function(t,e){if(e.isSegmented())return!0;if(!t.isCollapsed())return!1;var n=t.anchor.offset,r=e.getParentOrThrow(),o=zo(e);return 0===n?!e.canInsertTextBefore()||!r.canInsertTextBefore()&&!e.isComposing()||o||function(t){var e=t.getPreviousSibling();return(Zn(e)||co(e)&&e.isInline())&&!e.canInsertTextAfter();}(e):n===e.getTextContentSize()&&(!e.canInsertTextAfter()||!r.canInsertTextAfter()&&!e.isComposing()||o);}(t,c);}function on(t,e){return $o(t)&&null!==t.nodeValue&&0!==e&&e!==t.nodeValue.length;}function sn(e,n,r){var o=e.anchorNode,i=e.anchorOffset,s=e.focusNode,l=e.focusOffset;Ge&&(Ge=!1,on(o,i)&&on(s,l)&&!en)||oo(n,function(){if(!r)return void ii(null);if(!Fo(n,o,s))return;var c=kr();if(en&&ar(c)&&c.isCollapsed()){var _t27=c.anchor,_e23=en.anchor;(_t27.key===_e23.key&&_t27.offset===_e23.offset+1||1===_t27.offset&&_e23.getNode().is(_t27.getNode().getPreviousSibling()))&&(c=en.clone(),ii(c));}if(en=null,ar(c)){var _r13=c.anchor,_o12=_r13.getNode();if(c.isCollapsed()){"Range"===e.type&&e.anchorNode===e.focusNode&&(c.dirty=!0);var _i6=Li(n).event,_s6=_i6?_i6.timeStamp:performance.now(),_nn=nn,_l=_nn[0],_a=_nn[1],_u=_nn[2],_f=_nn[3],_d2=_nn[4],_h2=ri(),_g2=!1===n.isComposing()&&""===_h2.getTextContent();if(_s6<_d2+200&&_r13.offset===_u&&_r13.key===_f)ln(c,_l,_a);else if("text"===_r13.type)Zn(_o12)||t(141),cn(c,_o12);else if("element"===_r13.type&&!_g2){co(_o12)||t(259);var _e24=_r13.getNode();_e24.isEmpty()?function(t,e){var n=e.getTextFormat(),r=e.getTextStyle();ln(t,n,r);}(c,_e24):ln(c,0,"");}}else{var _t28=_r13.key,_e25=c.focus.key,_n18=c.getNodes(),_o13=_n18.length,_s7=c.isBackward(),_a2=_s7?l:i,_u2=_s7?i:l,_f2=_s7?_e25:_t28,_d3=_s7?_t28:_e25;var _h3=2047,_g3=!1;for(var _t29=0;_t29<_o13;_t29++){var _e26=_n18[_t29],_r14=_e26.getTextContentSize();if(Zn(_e26)&&0!==_r14&&!(0===_t29&&_e26.__key===_f2&&_a2===_r14||_t29===_o13-1&&_e26.__key===_d3&&0===_u2)&&(_g3=!0,_h3&=_e26.getFormat(),0===_h3))break;}c.format=_g3?_h3:0;}}Ei(n,jt,void 0);});}function ln(t,e,n){t.format===e&&t.style===n||(t.format=e,t.style=n,t.dirty=!0);}function cn(t,e){ln(t,e.getFormat(),e.getStyle());}function an(t){if(!t.getTargetRanges)return null;var e=t.getTargetRanges();return 0===e.length?null:e[0];}function un(e){var n=e.inputType,r=an(e),o=jr(),i=kr();if("deleteContentBackward"===n){if(null===i){var _t30=Er();if(!ar(_t30))return!0;ii(_t30.clone());}if(ar(i)){var _n19=i.anchor.key===i.focus.key;if(s=e.timeStamp,"MediaLast"===Je&&s<Ue+30&&o.isComposing()&&_n19){if(Go(null),Ue=0,setTimeout(function(){oo(o,function(){Go(null);});},30),ar(i)){var _e27=i.anchor.getNode();_e27.markDirty(),Zn(_e27)||t(142),cn(i,_e27);}}else{Go(null),e.preventDefault();var _t31=i.anchor.getNode(),_r15=_t31.getTextContent(),_s8=_t31.canInsertTextAfter(),_l2=0===i.anchor.offset&&i.focus.offset===_r15.length;var _c2=f&&_n19&&!_l2&&_s8;if(_c2&&i.isCollapsed()&&(_c2=!fo(vi(i.anchor,!0))),!_c2){Ei(o,Zt,!0);var _t32=kr();f&&ar(_t32)&&_t32.isCollapsed()&&(en=_t32,setTimeout(function(){return en=null;}));}}return!0;}}var s;if(!ar(i))return!0;var l=e.data;null!==je&&fi(!1,o,je),i.dirty&&null===je||!i.isCollapsed()||go(i.anchor.getNode())||null===r||i.applyDOMRange(r),je=null;var a=i.anchor,u=i.focus,d=a.getNode(),h=u.getNode();if("insertText"===n||"insertTranspose"===n){if("\n"===l)e.preventDefault(),Ei(o,te,!1);else if(l===k)e.preventDefault(),Ei(o,ee,void 0);else if(null==l&&e.dataTransfer){var _t33=e.dataTransfer.getData("text/plain");e.preventDefault(),i.insertRawText(_t33);}else null!=l&&rn(i,r,l,e.timeStamp,!0)?(e.preventDefault(),Ei(o,ne,l)):je=l;return Ye=e.timeStamp,!0;}switch(e.preventDefault(),n){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":Ei(o,ne,e);break;case"insertFromComposition":Go(null),Ei(o,ne,e);break;case"insertLineBreak":Go(null),Ei(o,te,!1);break;case"insertParagraph":Go(null),Xe&&!c?(Xe=!1,Ei(o,te,!1)):Ei(o,ee,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":Ei(o,re,e);break;case"deleteByComposition":(function(t,e){return t!==e||co(t)||co(e)||!zo(t)||!zo(e);})(d,h)&&Ei(o,oe,e);break;case"deleteByDrag":case"deleteByCut":Ei(o,oe,e);break;case"deleteContent":Ei(o,Zt,!1);break;case"deleteWordBackward":Ei(o,ie,!0);break;case"deleteWordForward":Ei(o,ie,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":Ei(o,se,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":Ei(o,se,!1);break;case"formatStrikeThrough":Ei(o,le,"strikethrough");break;case"formatBold":Ei(o,le,"bold");break;case"formatItalic":Ei(o,le,"italic");break;case"formatUnderline":Ei(o,le,"underline");break;case"historyUndo":Ei(o,ce,void 0);break;case"historyRedo":Ei(o,ae,void 0);}return!0;}function fn(t){if(ji(t.target)&&Io(t.target))return!0;var e=jr(),n=kr(),r=t.data,o=an(t);if(null!=r&&ar(n)&&rn(n,o,r,t.timeStamp,!1)){Qe&&(gn(e,r),Qe=!1);var _o14=n.anchor.getNode(),_a3=Ji(Li(e));if(null===_a3)return!0;var _u3=n.isBackward(),_f3=_u3?n.anchor.offset:n.focus.offset,_h4=_u3?n.focus.offset:n.anchor.offset;s&&!n.isCollapsed()&&Zn(_o14)&&null!==_a3.anchorNode&&_o14.getTextContent().slice(0,_f3)+r+_o14.getTextContent().slice(_f3+_h4)===ui(_a3.anchorNode)||Ei(e,ne,r);var _g4=r.length;i&&_g4>1&&"insertCompositionText"===t.inputType&&!e.isComposing()&&(n.anchor.offset-=_g4),l||c||d||!e.isComposing()||(Ue=0,Go(null));}else{fi(!1,e,null!==r?r:void 0),Qe&&(gn(e,r||void 0),Qe=!1);}return function(){Ur();var t=jr();H(t);}(),!0;}function dn(t){var e=jr(),n=kr();if(ar(n)&&!e.isComposing()){var _r16=n.anchor,_o15=n.anchor.getNode();Go(_r16.key),(t.timeStamp<Ue+30||"element"===_r16.type||!n.isCollapsed()||_o15.getFormat()!==n.format||Zn(_o15)&&_o15.getStyle()!==n.style)&&Ei(e,ne,E);}return!0;}function hn(t){return gn(jr(),t.data),!0;}function gn(t,e){var n=t._compositionKey;if(Go(null),null!==n&&null!=e){if(""===e){var _e28=Xo(n),_r17=Jo(t.getElementByKey(n));return void(null!==_r17&&null!==_r17.nodeValue&&Zn(_e28)&&di(_e28,_r17.nodeValue,null,null,!0));}if("\n"===e[e.length-1]){var _e29=kr();if(ar(_e29)){var _n20=_e29.focus;return _e29.anchor.set(_n20.key,_n20.offset,_n20.type),void Ei(t,ye,null);}}}fi(!0,t,e);}function _n(t){var e=jr();if(null==t.key)return!0;if(Ze&&xi(t))return oo(e,function(){gn(e,tn);}),Ze=!1,tn="",!0;if(function(t){return pi(t,"ArrowRight",{shiftKey:"any"});}(t))Ei(e,fe,t);else if(function(t){return pi(t,"ArrowRight",yi);}(t))Ei(e,de,t);else if(function(t){return pi(t,"ArrowLeft",{shiftKey:"any"});}(t))Ei(e,he,t);else if(function(t){return pi(t,"ArrowLeft",yi);}(t))Ei(e,ge,t);else if(function(t){return pi(t,"ArrowUp",{altKey:"any",shiftKey:"any"});}(t))Ei(e,_e,t);else if(function(t){return pi(t,"ArrowDown",{altKey:"any",shiftKey:"any"});}(t))Ei(e,pe,t);else if(function(t){return pi(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0});}(t))Xe=!0,Ei(e,ye,t);else if(function(t){return" "===t.key;}(t))Ei(e,me,t);else if(function(t){return o&&pi(t,"o",{ctrlKey:!0});}(t))t.preventDefault(),Xe=!0,Ei(e,te,!0);else if(function(t){return pi(t,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"});}(t))Xe=!1,Ei(e,ye,t);else if(function(t){return pi(t,"Backspace",{shiftKey:"any"})||o&&pi(t,"h",{ctrlKey:!0});}(t))xi(t)?Ei(e,xe,t):(t.preventDefault(),Ei(e,Zt,!0));else if(function(t){return"Escape"===t.key;}(t))Ei(e,Ce,t);else if(function(t){return pi(t,"Delete",{})||o&&pi(t,"d",{ctrlKey:!0});}(t))!function(t){return"Delete"===t.key;}(t)?(t.preventDefault(),Ei(e,Zt,!1)):Ei(e,Se,t);else if(function(t){return pi(t,"Backspace",mi);}(t))t.preventDefault(),Ei(e,ie,!0);else if(function(t){return pi(t,"Delete",mi);}(t))t.preventDefault(),Ei(e,ie,!1);else if(function(t){return o&&pi(t,"Backspace",{metaKey:!0});}(t))t.preventDefault(),Ei(e,se,!0);else if(function(t){return o&&(pi(t,"Delete",{metaKey:!0})||pi(t,"k",{ctrlKey:!0}));}(t))t.preventDefault(),Ei(e,se,!1);else if(function(t){return pi(t,"b",yi);}(t))t.preventDefault(),Ei(e,le,"bold");else if(function(t){return pi(t,"u",yi);}(t))t.preventDefault(),Ei(e,le,"underline");else if(function(t){return pi(t,"i",yi);}(t))t.preventDefault(),Ei(e,le,"italic");else if(function(t){return pi(t,"Tab",{shiftKey:"any"});}(t))Ei(e,Ne,t);else if(function(t){return pi(t,"z",yi);}(t))t.preventDefault(),Ei(e,ce,void 0);else if(function(t){if(o)return pi(t,"z",{metaKey:!0,shiftKey:!0});return pi(t,"y",{ctrlKey:!0})||pi(t,"z",{ctrlKey:!0,shiftKey:!0});}(t))t.preventDefault(),Ei(e,ae,void 0);else{var _n21=e._editorState._selection;null===_n21||ar(_n21)?Ci(t)&&(t.preventDefault(),Ei(e,Pe,t)):!function(t){return pi(t,"c",yi);}(t)?!function(t){return pi(t,"x",yi);}(t)?Ci(t)&&(t.preventDefault(),Ei(e,Pe,t)):(t.preventDefault(),Ei(e,De,t)):(t.preventDefault(),Ei(e,we,t));}return function(t){return t.ctrlKey||t.shiftKey||t.altKey||t.metaKey;}(t)&&e.dispatchCommand(ze,t),!0;}function pn(t){var e=t.__lexicalEventHandles;return void 0===e&&(e=[],t.__lexicalEventHandles=e),e;}var yn=new Map();function mn(t){var e=Yi(t.target);if(null===e)return;var n=Ko(e.anchorNode);if(null===n)return;qe&&(qe=!1,oo(n,function(){var r=Er(),o=e.anchorNode;if(ji(o)||$o(o)){ii(vr(r,e,n,t));}}));var r=ci(n),o=r[r.length-1],i=o._key,s=yn.get(i),l=s||o;l!==n&&sn(e,l,!1),sn(e,n,!0),n!==o?yn.set(i,n):s&&yn["delete"](i);}function xn(t){t._lexicalHandled=!0;}function Cn(t){return!0===t._lexicalHandled;}var Sn=function Sn(){};function Nn(e){var n=He.get(e);if(void 0===n)return void Sn();var r=Ve.get(n);if(void 0===r)return void Sn();var o=r-1;o>=0||t(164),He["delete"](e),Ve.set(n,o),0===o&&n.removeEventListener("selectionchange",mn);var i=Bo(e);Ro(i)?(!function(t){if(null!==t._parentEditor){var _e30=ci(t),_n22=_e30[_e30.length-1]._key;yn.get(_n22)===t&&yn["delete"](_n22);}else yn["delete"](t._key);}(i),e.__lexicalEditor=null):i&&t(198);var s=pn(e);for(var _t34=0;_t34<s.length;_t34++)s[_t34]();e.__lexicalEventHandles=[];}function Tn(t,e,n){Ur();var r=t.__key,o=t.getParent();if(null===o)return;var i=function(t){var e=kr();if(!ar(e)||!co(t))return e;var n=e.anchor,r=e.focus,o=n.getNode(),i=r.getNode();Pi(o,t)&&n.set(t.__key,0,"element");Pi(i,t)&&r.set(t.__key,0,"element");return e;}(t);var s=!1;if(ar(i)&&e){var _e31=i.anchor,_n23=i.focus;_e31.key===r&&(Mr(_e31,t,o,t.getPreviousSibling(),t.getNextSibling()),s=!0),_n23.key===r&&(Mr(_n23,t,o,t.getPreviousSibling(),t.getNextSibling()),s=!0);}else fr(i)&&e&&t.isSelected()&&t.selectPrevious();if(ar(i)&&e&&!s){var _e32=t.getIndexWithinParent();Ho(t),Or(i,o,_e32,-1);}else Ho(t);n||Ri(o)||o.canBeEmpty()||!o.isEmpty()||Tn(o,e),e&&i&&go(o)&&o.isEmpty()&&o.selectEnd();}var vn=Symbol["for"]("ephemeral");function kn(t){return t[vn]||!1;}var _En5=function(){function En(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),jo(this,t);}En.getType=function getType(){var _ss2=ss(this),e=_ss2.ownNodeType;return void 0===e&&t(64,this.name),e;};En.clone=function clone(e){t(65,this.name);};var _proto2=En.prototype;_proto2.$config=function $config(){return{};};_proto2.config=function config(t,e){var _ref13;var n=e["extends"]||Object.getPrototypeOf(this.constructor);return Object.assign(e,{"extends":n,type:t}),_ref13={},_ref13[t]=e,_ref13;};_proto2.afterCloneFrom=function afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this));};_proto2.getType=function getType(){return this.__type;};_proto2.isInline=function isInline(){t(137,this.constructor.name);};_proto2.isAttached=function isAttached(){var t=this.__key;for(;null!==t;){if("root"===t)return!0;var _e33=Xo(t);if(null===_e33)break;t=_e33.__parent;}return!1;};_proto2.isSelected=function isSelected(t){var _this12=this;var e=t||kr();if(null==e)return!1;var n=e.getNodes().some(function(t){return t.__key===_this12.__key;});if(Zn(this))return n;if(ar(e)&&"element"===e.anchor.type&&"element"===e.focus.type){if(e.isCollapsed())return!1;var _t35=this.getParent();if(fo(this)&&this.isInline()&&_t35){var _n24=e.isBackward()?e.focus:e.anchor;if(_t35.is(_n24.getNode())&&_n24.offset===_t35.getChildrenSize()&&this.is(_t35.getLastChild()))return!1;}}return n;};_proto2.getKey=function getKey(){return this.__key;};_proto2.getIndexWithinParent=function getIndexWithinParent(){var t=this.getParent();if(null===t)return-1;var e=t.getFirstChild(),n=0;for(;null!==e;){if(this.is(e))return n;n++,e=e.getNextSibling();}return-1;};_proto2.getParent=function getParent(){var t=this.getLatest().__parent;return null===t?null:Xo(t);};_proto2.getParentOrThrow=function getParentOrThrow(){var e=this.getParent();return null===e&&t(66,this.__key),e;};_proto2.getTopLevelElement=function getTopLevelElement(){var e=this;for(;null!==e;){var _n25=e.getParent();if(Ri(_n25))return co(e)||e===this&&fo(e)||t(194),e;e=_n25;}return null;};_proto2.getTopLevelElementOrThrow=function getTopLevelElementOrThrow(){var e=this.getTopLevelElement();return null===e&&t(67,this.__key),e;};_proto2.getParents=function getParents(){var t=[];var e=this.getParent();for(;null!==e;)t.push(e),e=e.getParent();return t;};_proto2.getParentKeys=function getParentKeys(){var t=[];var e=this.getParent();for(;null!==e;)t.push(e.__key),e=e.getParent();return t;};_proto2.getPreviousSibling=function getPreviousSibling(){var t=this.getLatest().__prev;return null===t?null:Xo(t);};_proto2.getPreviousSiblings=function getPreviousSiblings(){var t=[],e=this.getParent();if(null===e)return t;var n=e.getFirstChild();for(;null!==n&&!n.is(this);)t.push(n),n=n.getNextSibling();return t;};_proto2.getNextSibling=function getNextSibling(){var t=this.getLatest().__next;return null===t?null:Xo(t);};_proto2.getNextSiblings=function getNextSiblings(){var t=[];var e=this.getNextSibling();for(;null!==e;)t.push(e),e=e.getNextSibling();return t;};_proto2.getCommonAncestor=function getCommonAncestor(t){var e=co(this)?this:this.getParent(),n=co(t)?t:t.getParent(),r=e&&n?Bs(e,n):null;return r?r.commonAncestor:null;};_proto2.is=function is(t){return null!=t&&this.__key===t.__key;};_proto2.isBefore=function isBefore(e){var n=Bs(this,e);return null!==n&&("descendant"===n.type||("branch"===n.type?-1===Fs(n):("same"!==n.type&&"ancestor"!==n.type&&t(279),!1)));};_proto2.isParentOf=function isParentOf(t){var e=Bs(this,t);return null!==e&&"ancestor"===e.type;};_proto2.getNodesBetween=function getNodesBetween(e){var n=this.isBefore(e),r=[],o=new Set();var i=this;for(;null!==i;){var _s9=i.__key;if(o.has(_s9)||(o.add(_s9),r.push(i)),i===e)break;var _l3=co(i)?n?i.getFirstChild():i.getLastChild():null;if(null!==_l3){i=_l3;continue;}var _c3=n?i.getNextSibling():i.getPreviousSibling();if(null!==_c3){i=_c3;continue;}var _a4=i.getParentOrThrow();if(o.has(_a4.__key)||r.push(_a4),_a4===e)break;var _u4=null,_f4=_a4;do{if(null===_f4&&t(68),_u4=n?_f4.getNextSibling():_f4.getPreviousSibling(),_f4=_f4.getParent(),null===_f4)break;null!==_u4||o.has(_f4.__key)||r.push(_f4);}while(null===_u4);i=_u4;}return n||r.reverse(),r;};_proto2.isDirty=function isDirty(){var t=jr()._dirtyLeaves;return null!==t&&t.has(this.__key);};_proto2.getLatest=function getLatest(){if(kn(this))return this;var e=Xo(this.__key);return null===e&&t(113),e;};_proto2.getWritable=function getWritable(){if(kn(this))return this;Ur();var t=Yr(),e=jr(),n=t._nodeMap,r=this.__key,o=this.getLatest(),i=e._cloneNotNeeded,s=kr();if(null!==s&&s.setCachedNodes(null),i.has(r))return Vo(o),o;var l=ns(o);return i.add(r),Vo(l),n.set(r,l),l;};_proto2.getTextContent=function getTextContent(){return"";};_proto2.getTextContentSize=function getTextContentSize(){return this.getTextContent().length;};_proto2.createDOM=function createDOM(e,n){t(70);};_proto2.updateDOM=function updateDOM(e,n,r){t(71);};_proto2.exportDOM=function exportDOM(t){return{element:this.createDOM(t._config,t)};};_proto2.exportJSON=function exportJSON(){var t=this.__state?this.__state.toJSON():void 0;return babelHelpers["extends"]({type:this.__type,version:1},t);};En.importJSON=function importJSON(e){t(18,this.name);};_proto2.updateFromJSON=function updateFromJSON(t){return function(t,e){var n=t.getWritable(),r=e.$;var o=r;for(var _t36 of tt(n).flatKeys)_t36 in e&&(void 0!==o&&o!==r||(o=babelHelpers["extends"]({},r)),o[_t36]=e[_t36]);return(n.__state||o)&&Z(t).updateFromJSON(o),n;}(this,t);};En.transform=function transform(){return null;};_proto2.remove=function remove(t){Tn(this,!0,t);};_proto2.replace=function replace(e,n){Ur();var r=kr();null!==r&&(r=r.clone()),zi(this,e);var o=this.getLatest(),i=this.__key,s=e.__key,l=e.getWritable(),c=this.getParentOrThrow().getWritable(),a=c.__size;Ho(l);var u=o.getPreviousSibling(),f=o.getNextSibling(),d=o.__prev,h=o.__next,g=o.__parent;if(Tn(o,!1,!0),null===u)c.__first=s;else{u.getWritable().__next=s;}if(l.__prev=d,null===f)c.__last=s;else{f.getWritable().__prev=s;}if(l.__next=h,l.__parent=g,c.__size=a,n&&(co(this)&&co(l)||t(139),this.getChildren().forEach(function(t){l.append(t);})),ar(r)){ii(r);var _t37=r.anchor,_e34=r.focus;_t37.key===i&&lr(_t37,l),_e34.key===i&&lr(_e34,l);}return qo()===i&&Go(s),l;};_proto2.insertAfter=function insertAfter(t,e){if(e===void 0){e=!0;}Ur(),zi(this,t);var n=this.getWritable(),r=t.getWritable(),o=r.getParent(),i=kr();var s=!1,l=!1;if(null!==o){var _e35=t.getIndexWithinParent();if(Ho(r),ar(i)){var _t38=o.__key,_n26=i.anchor,_r18=i.focus;s="element"===_n26.type&&_n26.key===_t38&&_n26.offset===_e35+1,l="element"===_r18.type&&_r18.key===_t38&&_r18.offset===_e35+1;}}var c=this.getNextSibling(),a=this.getParentOrThrow().getWritable(),u=r.__key,f=n.__next;if(null===c)a.__last=u;else{c.getWritable().__prev=u;}if(a.__size++,n.__next=u,r.__next=f,r.__prev=n.__key,r.__parent=n.__parent,e&&ar(i)){var _t39=this.getIndexWithinParent();Or(i,a,_t39+1);var _e36=a.__key;s&&i.anchor.set(_e36,_t39+2,"element"),l&&i.focus.set(_e36,_t39+2,"element");}return t;};_proto2.insertBefore=function insertBefore(t,e){if(e===void 0){e=!0;}Ur(),zi(this,t);var n=this.getWritable(),r=t.getWritable(),o=r.__key;Ho(r);var i=this.getPreviousSibling(),s=this.getParentOrThrow().getWritable(),l=n.__prev,c=this.getIndexWithinParent();if(null===i)s.__first=o;else{i.getWritable().__next=o;}s.__size++,n.__prev=o,r.__prev=l,r.__next=n.__key,r.__parent=n.__parent;var a=kr();if(e&&ar(a)){Or(a,this.getParentOrThrow(),c);}return t;};_proto2.isParentRequired=function isParentRequired(){return!1;};_proto2.createParentElementNode=function createParentElementNode(){return No();};_proto2.selectStart=function selectStart(){return this.selectPrevious();};_proto2.selectEnd=function selectEnd(){return this.selectNext(0,0);};_proto2.selectPrevious=function selectPrevious(t,e){Ur();var n=this.getPreviousSibling(),r=this.getParentOrThrow();if(null===n)return r.select(0,0);if(co(n))return n.select();if(!Zn(n)){var _t40=n.getIndexWithinParent()+1;return r.select(_t40,_t40);}return n.select(t,e);};_proto2.selectNext=function selectNext(t,e){Ur();var n=this.getNextSibling(),r=this.getParentOrThrow();if(null===n)return r.select();if(co(n))return n.select(0,0);if(!Zn(n)){var _t41=n.getIndexWithinParent();return r.select(_t41,_t41);}return n.select(t,e);};_proto2.markDirty=function markDirty(){this.getWritable();};_proto2.reconcileObservedMutation=function reconcileObservedMutation(t,e){this.markDirty();};return En;}();var On="history-merge",bn="collaboration",Mn="skip-scroll-into-view",An="skip-dom-selection",wn="skip-selection-focus";var _Dn=function(_En){function Dn(t){return _En.call(this,t)||this;}babelHelpers.inheritsLoose(Dn,_En);Dn.getType=function getType(){return"linebreak";};Dn.clone=function clone(t){return new Dn(t.__key);};var _proto3=Dn.prototype;_proto3.getTextContent=function getTextContent(){return"\n";};_proto3.createDOM=function createDOM(){return document.createElement("br");};_proto3.updateDOM=function updateDOM(){return!1;};_proto3.isInline=function isInline(){return!0;};Dn.importDOM=function importDOM(){return{br:function br(t){return function(t){var e=t.parentElement;if(null!==e&&qi(e)){var _n27=e.firstChild;if(_n27===t||_n27.nextSibling===t&&Fn(_n27)){var _n28=e.lastChild;if(_n28===t||_n28.previousSibling===t&&Fn(_n28))return!0;}}return!1;}(t)||function(t){var e=t.parentElement;if(null!==e&&qi(e)){var _n29=e.firstChild;if(_n29===t||_n29.nextSibling===t&&Fn(_n29))return!1;var _r19=e.lastChild;if(_r19===t||_r19.previousSibling===t&&Fn(_r19))return!0;}return!1;}(t)?null:{conversion:Pn,priority:0};}};};Dn.importJSON=function importJSON(t){return In().updateFromJSON(t);};return Dn;}(_En5);function Pn(t){return{node:In()};}function In(){return Bi(new _Dn());}function Ln(t){return t instanceof _Dn;}function Fn(t){return $o(t)&&/^( |\t|\r?\n)+$/.test(t.textContent||"");}function Rn(t,e){return 16&e?"code":e&y?"mark":32&e?"sub":64&e?"sup":null;}function Kn(t,e){return 1&e?"strong":2&e?"em":"span";}function Bn(t,e,n,r,o){var i=r.classList;var s=Si(o,"base");void 0!==s&&i.add.apply(i,s),s=Si(o,"underlineStrikethrough");var l=!1;var c=8&e&&4&e;void 0!==s&&(8&n&&4&n?(l=!0,c||i.add.apply(i,s)):c&&i.remove.apply(i,s));for(var _t42 in w){var _r20=w[_t42];if(s=Si(o,_t42),void 0!==s)if(n&_r20){if(l&&("underline"===_t42||"strikethrough"===_t42)){e&_r20&&i.remove.apply(i,s);continue;}(0===(e&_r20)||c&&"underline"===_t42||"strikethrough"===_t42)&&i.add.apply(i,s);}else e&_r20&&i.remove.apply(i,s);}}function zn(t,e,n){var r=e.firstChild,o=n.isComposing(),s=t+(o?v:"");if(null==r)e.textContent=s;else{var _t43=r.nodeValue;if(_t43!==s)if(o||i){var _ref14=function(t,e){var n=t.length,r=e.length;var o=0,i=0;for(;o<n&&o<r&&t[o]===e[o];)o++;for(;i+o<n&&i+o<r&&t[n-i-1]===e[r-i-1];)i++;return[o,n-o-i,e.slice(o,r-i)];}(_t43,s),_e37=_ref14[0],_n30=_ref14[1],_o16=_ref14[2];0!==_n30&&r.deleteData(_e37,_n30),r.insertData(_e37,_o16);}else r.nodeValue=s;}}function Wn(t,e,n,r,o,i){zn(o,t,e);var s=i.theme.text;void 0!==s&&Bn(0,0,r,t,s);}function $n(t,e){var n=document.createElement(e);return n.appendChild(t),n;}var _Un2=function(_En2){function Un(t,e){var _this;if(t===void 0){t="";}_this=_En2.call(this,e)||this,_this.__text=t,_this.__format=0,_this.__style="",_this.__mode=0,_this.__detail=0;return _this;}babelHelpers.inheritsLoose(Un,_En2);Un.getType=function getType(){return"text";};Un.clone=function clone(t){return new Un(t.__text,t.__key);};var _proto4=Un.prototype;_proto4.afterCloneFrom=function afterCloneFrom(t){_En2.prototype.afterCloneFrom.call(this,t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail;};_proto4.getFormat=function getFormat(){return this.getLatest().__format;};_proto4.getDetail=function getDetail(){return this.getLatest().__detail;};_proto4.getMode=function getMode(){var t=this.getLatest();return F[t.__mode];};_proto4.getStyle=function getStyle(){return this.getLatest().__style;};_proto4.isToken=function isToken(){return 1===this.getLatest().__mode;};_proto4.isComposing=function isComposing(){return this.__key===qo();};_proto4.isSegmented=function isSegmented(){return 2===this.getLatest().__mode;};_proto4.isDirectionless=function isDirectionless(){return!!(1&this.getLatest().__detail);};_proto4.isUnmergeable=function isUnmergeable(){return!!(2&this.getLatest().__detail);};_proto4.hasFormat=function hasFormat(t){var e=w[t];return 0!==(this.getFormat()&e);};_proto4.isSimpleText=function isSimpleText(){return"text"===this.__type&&0===this.__mode;};_proto4.getTextContent=function getTextContent(){return this.getLatest().__text;};_proto4.getFormatFlags=function getFormatFlags(t,e){return Yo(this.getLatest().__format,t,e);};_proto4.canHaveFormat=function canHaveFormat(){return!0;};_proto4.isInline=function isInline(){return!0;};_proto4.createDOM=function createDOM(t,e){var n=this.__format,r=Rn(0,n),o=Kn(0,n),i=null===r?o:r,s=document.createElement(i);var l=s;this.hasFormat("code")&&s.setAttribute("spellcheck","false"),null!==r&&(l=document.createElement(o),s.appendChild(l));Wn(l,this,0,n,this.__text,t);var c=this.__style;return""!==c&&(s.style.cssText=c),s;};_proto4.updateDOM=function updateDOM(e,n,r){var o=this.__text,i=e.__format,s=this.__format,l=Rn(0,i),c=Rn(0,s),a=Kn(0,i),u=Kn(0,s);if((null===l?a:l)!==(null===c?u:c))return!0;if(l===c&&a!==u){var _e38=n.firstChild;null==_e38&&t(48);var _i7=document.createElement(u);return Wn(_i7,this,0,s,o,r),n.replaceChild(_i7,_e38),!1;}var f=n;null!==c&&null!==l&&(f=n.firstChild,null==f&&t(49)),zn(o,f,this);var d=r.theme.text;void 0!==d&&i!==s&&Bn(0,i,s,f,d);var h=e.__style,g=this.__style;return h!==g&&(n.style.cssText=g),!1;};Un.importDOM=function importDOM(){return{"#text":function text(){return{conversion:Vn,priority:0};},b:function b(){return{conversion:Yn,priority:0};},code:function code(){return{conversion:Xn,priority:0};},em:function em(){return{conversion:Xn,priority:0};},i:function i(){return{conversion:Xn,priority:0};},mark:function mark(){return{conversion:Xn,priority:0};},s:function s(){return{conversion:Xn,priority:0};},span:function span(){return{conversion:Jn,priority:0};},strong:function strong(){return{conversion:Xn,priority:0};},sub:function sub(){return{conversion:Xn,priority:0};},sup:function sup(){return{conversion:Xn,priority:0};},u:function u(){return{conversion:Xn,priority:0};}};};Un.importJSON=function importJSON(t){return Qn().updateFromJSON(t);};_proto4.updateFromJSON=function updateFromJSON(t){return _En2.prototype.updateFromJSON.call(this,t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style);};_proto4.exportDOM=function exportDOM(e){var _En2$prototype$export=_En2.prototype.exportDOM.call(this,e),n=_En2$prototype$export.element;return ji(n)||t(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=$n(n,"b")),this.hasFormat("italic")&&(n=$n(n,"i")),this.hasFormat("strikethrough")&&(n=$n(n,"s")),this.hasFormat("underline")&&(n=$n(n,"u")),{element:n};};_proto4.exportJSON=function exportJSON(){return babelHelpers["extends"]({detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent()},_En2.prototype.exportJSON.call(this));};_proto4.selectionTransform=function selectionTransform(t,e){};_proto4.setFormat=function setFormat(t){var e=this.getWritable();return e.__format="string"==typeof t?w[t]:t,e;};_proto4.setDetail=function setDetail(t){var e=this.getWritable();return e.__detail="string"==typeof t?D[t]:t,e;};_proto4.setStyle=function setStyle(t){var e=this.getWritable();return e.__style=t,e;};_proto4.toggleFormat=function toggleFormat(t){var e=Yo(this.getFormat(),t,null);return this.setFormat(e);};_proto4.toggleDirectionless=function toggleDirectionless(){var t=this.getWritable();return t.__detail^=1,t;};_proto4.toggleUnmergeable=function toggleUnmergeable(){var t=this.getWritable();return t.__detail^=2,t;};_proto4.setMode=function setMode(t){var e=L[t];if(this.__mode===e)return this;var n=this.getWritable();return n.__mode=e,n;};_proto4.setTextContent=function setTextContent(t){if(this.__text===t)return this;var e=this.getWritable();return e.__text=t,e;};_proto4.select=function select(t,e){Ur();var n=t,r=e;var o=kr(),i=this.getTextContent(),s=this.__key;if("string"==typeof i){var _t44=i.length;void 0===n&&(n=_t44),void 0===r&&(r=_t44);}else n=0,r=0;if(!ar(o))return Sr(s,n,s,r,"text","text");{var _t45=qo();_t45!==o.anchor.key&&_t45!==o.focus.key||Go(s),o.setTextNodeRange(this,n,this,r);}return o;};_proto4.selectStart=function selectStart(){return this.select(0,0);};_proto4.selectEnd=function selectEnd(){var t=this.getTextContentSize();return this.select(t,t);};_proto4.spliceText=function spliceText(t,e,n,r){var o=this.getWritable(),i=o.__text,s=n.length;var l=t;l<0&&(l=s+l,l<0&&(l=0));var c=kr();if(r&&ar(c)){var _e39=t+s;c.setTextNodeRange(o,_e39,o,_e39);}var a=i.slice(0,l)+n+i.slice(l+e);return o.__text=a,o;};_proto4.canInsertTextBefore=function canInsertTextBefore(){return!0;};_proto4.canInsertTextAfter=function canInsertTextAfter(){return!0;};_proto4.splitText=function splitText(){Ur();var e=this.getLatest(),n=e.getTextContent();if(""===n)return[];var r=e.__key,o=qo(),i=n.length;for(var _len4=arguments.length,t=new Array(_len4),_key4=0;_key4<_len4;_key4++){t[_key4]=arguments[_key4];}t.sort(function(t,e){return t-e;}),t.push(i);var s=[],l=t.length;for(var _e40=0,_r21=0;_e40<i&&_r21<=l;_r21++){var _o17=t[_r21];_o17>_e40&&(s.push(n.slice(_e40,_o17)),_e40=_o17);}var c=s.length;if(1===c)return[e];var a=s[0],u=e.getParent();var f;var d=e.getFormat(),h=e.getStyle(),g=e.__detail;var _=!1,p=null,y=null;var m=kr();if(ar(m)){var _ref15=m.isBackward()?[m.focus,m.anchor]:[m.anchor,m.focus],_t46=_ref15[0],_e41=_ref15[1];"text"===_t46.type&&_t46.key===r&&(p=_t46),"text"===_e41.type&&_e41.key===r&&(y=_e41);}e.isSegmented()?(f=Qn(a),f.__format=d,f.__style=h,f.__detail=g,f.__state=it(e,f),_=!0):f=e.setTextContent(a);var x=[f];for(var _t47=1;_t47<c;_t47++){var _n31=Qn(s[_t47]);_n31.__format=d,_n31.__style=h,_n31.__detail=g,_n31.__state=it(e,_n31);var _i8=_n31.__key;o===r&&Go(_i8),x.push(_n31);}var C=p?p.offset:null,S=y?y.offset:null;var N=0;for(var _t48 of x){if(!p&&!y)break;var _e42=N+_t48.getTextContentSize();if(null!==p&&null!==C&&C<=_e42&&C>=N&&(p.set(_t48.getKey(),C-N,"text"),C<_e42&&(p=null)),null!==y&&null!==S&&S<=_e42&&S>=N){y.set(_t48.getKey(),S-N,"text");break;}N=_e42;}if(null!==u){!function(t){var e=t.getPreviousSibling(),n=t.getNextSibling();null!==e&&Vo(e);null!==n&&Vo(n);}(this);var _t49=u.getWritable(),_e43=this.getIndexWithinParent();_?(_t49.splice(_e43,0,x),this.remove()):_t49.splice(_e43,1,x),ar(m)&&Or(m,u,_e43,c-1);}return x;};_proto4.mergeWithSibling=function mergeWithSibling(e){var n=e===this.getPreviousSibling();n||e===this.getNextSibling()||t(50);var r=this.__key,o=e.__key,i=this.__text,s=i.length;qo()===o&&Go(r);var l=kr();if(ar(l)){var _t50=l.anchor,_i9=l.focus;null!==_t50&&_t50.key===o&&Ar(_t50,n,r,e,s),null!==_i9&&_i9.key===o&&Ar(_i9,n,r,e,s);}var c=e.__text,a=n?c+i:i+c;this.setTextContent(a);var u=this.getWritable();return e.remove(),u;};_proto4.isTextEntity=function isTextEntity(){return!1;};return Un;}(_En5);function Jn(t){return{forChild:tr(t.style),node:null};}function Yn(t){var e=t,n="normal"===e.style.fontWeight;return{forChild:tr(e.style,n?void 0:"bold"),node:null};}var jn=new WeakMap();function Hn(t){if(!ji(t))return!1;if("PRE"===t.nodeName)return!0;var e=t.style.whiteSpace;return"string"==typeof e&&e.startsWith("pre");}function Vn(e){var n=e;null===e.parentElement&&t(129);var r=n.textContent||"";if(null!==function(t){var e,n=t.parentNode;var r=[t];for(;null!==n&&void 0===(e=jn.get(n))&&!Hn(n);)r.push(n),n=n.parentNode;var o=void 0===e?n:e;for(var _t51=0;_t51<r.length;_t51++)jn.set(r[_t51],o);return o;}(n)){var _t52=r.split(/(\r?\n|\t)/),_e44=[],_n32=_t52.length;for(var _r22=0;_r22<_n32;_r22++){var _n33=_t52[_r22];"\n"===_n33||"\r\n"===_n33?_e44.push(In()):"\t"===_n33?_e44.push(nr()):""!==_n33&&_e44.push(Qn(_n33));}return{node:_e44};}if(r=r.replace(/\r/g,"").replace(/[ \t\n]+/g," "),""===r)return{node:null};if(" "===r[0]){var _t53=n,_e45=!0;for(;null!==_t53&&null!==(_t53=Gn(_t53,!1));){var _n34=_t53.textContent||"";if(_n34.length>0){/[ \t\n]$/.test(_n34)&&(r=r.slice(1)),_e45=!1;break;}}_e45&&(r=r.slice(1));}if(" "===r[r.length-1]){var _t54=n,_e46=!0;for(;null!==_t54&&null!==(_t54=Gn(_t54,!0));){if((_t54.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){_e46=!1;break;}}_e46&&(r=r.slice(0,r.length-1));}return""===r?{node:null}:{node:Qn(r)};}function Gn(t,e){var n=t;for(;;){var _t55=void 0;for(;null===(_t55=e?n.nextSibling:n.previousSibling);){var _t56=n.parentElement;if(null===_t56)return null;n=_t56;}if(n=_t55,ji(n)){var _t57=n.style.display;if(""===_t57&&!Gi(n)||""!==_t57&&!_t57.startsWith("inline"))return null;}var _r23=n;for(;null!==(_r23=e?n.firstChild:n.lastChild);)n=_r23;if($o(n))return n;if("BR"===n.nodeName)return null;}}var qn={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Xn(t){var e=qn[t.nodeName.toLowerCase()];return void 0===e?{node:null}:{forChild:tr(t.style,e),node:null};}function Qn(t){if(t===void 0){t="";}return Bi(new _Un2(t));}function Zn(t){return t instanceof _Un2;}function tr(t,e){var n=t.fontWeight,r=t.textDecoration.split(" "),o="700"===n||"bold"===n,i=r.includes("line-through"),s="italic"===t.fontStyle,l=r.includes("underline"),c=t.verticalAlign;return function(t){return Zn(t)?(o&&!t.hasFormat("bold")&&t.toggleFormat("bold"),i&&!t.hasFormat("strikethrough")&&t.toggleFormat("strikethrough"),s&&!t.hasFormat("italic")&&t.toggleFormat("italic"),l&&!t.hasFormat("underline")&&t.toggleFormat("underline"),"sub"!==c||t.hasFormat("subscript")||t.toggleFormat("subscript"),"super"!==c||t.hasFormat("superscript")||t.toggleFormat("superscript"),e&&!t.hasFormat(e)&&t.toggleFormat(e),t):t;};}var _er=function(_Un){function er(t){var _this2;_this2=_Un.call(this,"\t",t)||this,_this2.__detail=2;return _this2;}babelHelpers.inheritsLoose(er,_Un);er.getType=function getType(){return"tab";};er.clone=function clone(t){return new er(t.__key);};er.importDOM=function importDOM(){return null;};var _proto5=er.prototype;_proto5.createDOM=function createDOM(t){var e=_Un.prototype.createDOM.call(this,t),n=Si(t.theme,"tab");if(void 0!==n){var _e$classList;(_e$classList=e.classList).add.apply(_e$classList,n);}return e;};er.importJSON=function importJSON(t){return nr().updateFromJSON(t);};_proto5.setTextContent=function setTextContent(t){return"\t"!==t&&""!==t&&e(126),_Un.prototype.setTextContent.call(this,"\t");};_proto5.spliceText=function spliceText(e,n,r,o){return""===r&&0===n||"\t"===r&&1===n||t(286),this;};_proto5.setDetail=function setDetail(e){return 2!==e&&t(127),this;};_proto5.setMode=function setMode(e){return"normal"!==e&&t(128),this;};_proto5.canInsertTextBefore=function canInsertTextBefore(){return!1;};_proto5.canInsertTextAfter=function canInsertTextAfter(){return!1;};return er;}(_Un2);function nr(){return Bi(new _er());}function rr(t){return t instanceof _er;}var _or=function(){function or(t,e,n){this._selection=null,this.key=t,this.offset=e,this.type=n;}var _proto6=or.prototype;_proto6.is=function is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type;};_proto6.isBefore=function isBefore(t){if(this.key===t.key)return this.offset<t.offset;return Ls(Gs(zs(this,"next")),Gs(zs(t,"next")))<0;};_proto6.getNode=function getNode(){var e=Xo(this.key);return null===e&&t(20),e;};_proto6.set=function set(t,e,n,r){var o=this._selection,i=this.key;r&&this.key===t&&this.offset===e&&this.type===n||(this.key=t,this.offset=e,this.type=n,$r()||(qo()===i&&Go(t),null!==o&&(o.setCachedNodes(null),o.dirty=!0)));};return or;}();function ir(t,e,n){return new _or(t,e,n);}function sr(t,e){var n=e.__key,r=t.offset,o="element";if(Zn(e)){o="text";var _t58=e.getTextContentSize();r>_t58&&(r=_t58);}else if(!co(e)){var _t59=e.getNextSibling();if(Zn(_t59))n=_t59.__key,r=0,o="text";else{var _t60=e.getParent();_t60&&(n=_t60.__key,r=e.getIndexWithinParent()+1);}}t.set(n,r,o);}function lr(t,e){if(co(e)){var _n35=e.getLastDescendant();co(_n35)||Zn(_n35)?sr(t,_n35):sr(t,e);}else sr(t,e);}var _cr=function(){function cr(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1;}var _proto7=cr.prototype;_proto7.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto7.setCachedNodes=function setCachedNodes(t){this._cachedNodes=t;};_proto7.is=function is(t){if(!fr(t))return!1;var e=this._nodes,n=t._nodes;return e.size===n.size&&Array.from(e).every(function(t){return n.has(t);});};_proto7.isCollapsed=function isCollapsed(){return!1;};_proto7.isBackward=function isBackward(){return!1;};_proto7.getStartEndPoints=function getStartEndPoints(){return null;};_proto7.add=function add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null;};_proto7["delete"]=function _delete(t){this.dirty=!0,this._nodes["delete"](t),this._cachedNodes=null;};_proto7.clear=function clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null;};_proto7.has=function has(t){return this._nodes.has(t);};_proto7.clone=function clone(){return new cr(new Set(this._nodes));};_proto7.extract=function extract(){return this.getNodes();};_proto7.insertRawText=function insertRawText(t){};_proto7.insertText=function insertText(){};_proto7.insertNodes=function insertNodes(t){var e=this.getNodes(),n=e.length,r=e[n-1];var o;if(Zn(r))o=r.select();else{var _t61=r.getIndexWithinParent()+1;o=r.getParentOrThrow().select(_t61,_t61);}o.insertNodes(t);for(var _t62=0;_t62<n;_t62++)e[_t62].remove();};_proto7.getNodes=function getNodes(){var t=this._cachedNodes;if(null!==t)return t;var e=this._nodes,n=[];for(var _t63 of e){var _e47=Xo(_t63);null!==_e47&&n.push(_e47);}return $r()||(this._cachedNodes=n),n;};_proto7.getTextContent=function getTextContent(){var t=this.getNodes();var e="";for(var _n36=0;_n36<t.length;_n36++)e+=t[_n36].getTextContent();return e;};_proto7.deleteNodes=function deleteNodes(){var t=this.getNodes();if((kr()||Er())===this&&t[0]){var _e48=Ns(t[0],"next");$s(Ps(_e48,_e48));}for(var _e49 of t)_e49.remove();};return cr;}();function ar(t){return t instanceof _ur;}var _ur=function(){function ur(t,e,n,r){this.anchor=t,this.focus=e,t._selection=this,e._selection=this,this._cachedNodes=null,this.format=n,this.style=r,this.dirty=!1;}var _proto8=ur.prototype;_proto8.getCachedNodes=function getCachedNodes(){return this._cachedNodes;};_proto8.setCachedNodes=function setCachedNodes(t){this._cachedNodes=t;};_proto8.is=function is(t){return!!ar(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style;};_proto8.isCollapsed=function isCollapsed(){return this.anchor.is(this.focus);};_proto8.getNodes=function getNodes(){var t=this._cachedNodes;if(null!==t)return t;var e=function(t){var e=[],_t$getTextSlices=t.getTextSlices(),n=_t$getTextSlices[0],r=_t$getTextSlices[1];n&&e.push(n.caret.origin);var o=new Set(),i=new Set();for(var _n37 of t)if(ms(_n37)){var _t64=_n37.origin;0===e.length?o.add(_t64):(i.add(_t64),e.push(_t64));}else{var _t65=_n37.origin;co(_t65)&&i.has(_t65)||e.push(_t65);}r&&e.push(r.caret.origin);if(ys(t.focus)&&co(t.focus.origin)&&null===t.focus.getNodeAtCaret())for(var _n38=Es(t.focus.origin,"previous");ms(_n38)&&o.has(_n38.origin)&&!_n38.origin.isEmpty()&&_n38.origin.is(e[e.length-1]);_n38=bs(_n38))o["delete"](_n38.origin),e.pop();for(;e.length>1;){var _t66=e[e.length-1];if(!co(_t66)||i.has(_t66)||_t66.isEmpty()||o.has(_t66))break;e.pop();}if(0===e.length&&t.isCollapsed()){var _n39=Gs(t.anchor),_r24=Gs(t.anchor.getFlipped()),_o18=function _o18(t){return ps(t)?t.origin:t.getNodeAtCaret();},_i0=_o18(_n39)||_o18(_r24)||(t.anchor.getNodeAtCaret()?_n39.origin:_r24.origin);e.push(_i0);}return e;}(Qs(Js(this),"next"));return $r()||(this._cachedNodes=e),e;};_proto8.setTextNodeRange=function setTextNodeRange(t,e,n,r){this.anchor.set(t.__key,e,"text"),this.focus.set(n.__key,r,"text");};_proto8.getTextContent=function getTextContent(){var t=this.getNodes();if(0===t.length)return"";var e=t[0],n=t[t.length-1],r=this.anchor,o=this.focus,i=r.isBefore(o),_hr=hr(this),s=_hr[0],l=_hr[1];var c="",a=!0;for(var _u5=0;_u5<t.length;_u5++){var _f5=t[_u5];if(co(_f5)&&!_f5.isInline())a||(c+="\n"),a=!_f5.isEmpty();else if(a=!1,Zn(_f5)){var _t67=_f5.getTextContent();_f5===e?_f5===n?"element"===r.type&&"element"===o.type&&o.offset!==r.offset||(_t67=s<l?_t67.slice(s,l):_t67.slice(l,s)):_t67=i?_t67.slice(s):_t67.slice(l):_f5===n&&(_t67=i?_t67.slice(0,l):_t67.slice(0,s)),c+=_t67;}else!fo(_f5)&&!Ln(_f5)||_f5===n&&this.isCollapsed()||(c+=_f5.getTextContent());}return c;};_proto8.applyDOMRange=function applyDOMRange(t){var e=jr(),n=e.getEditorState()._selection,r=Cr(t.startContainer,t.startOffset,t.endContainer,t.endOffset,e,n);if(null===r)return;var o=r[0],i=r[1];this.anchor.set(o.key,o.offset,o.type,!0),this.focus.set(i.key,i.offset,i.type,!0),at(this);};_proto8.clone=function clone(){var t=this.anchor,e=this.focus;return new ur(ir(t.key,t.offset,t.type),ir(e.key,e.offset,e.type),this.format,this.style);};_proto8.toggleFormat=function toggleFormat(t){this.format=Yo(this.format,t,null),this.dirty=!0;};_proto8.setFormat=function setFormat(t){this.format=t,this.dirty=!0;};_proto8.setStyle=function setStyle(t){this.style=t,this.dirty=!0;};_proto8.hasFormat=function hasFormat(t){var e=w[t];return 0!==(this.format&e);};_proto8.insertRawText=function insertRawText(t){var e=t.split(/(\r?\n|\t)/),n=[],r=e.length;for(var _t68=0;_t68<r;_t68++){var _r25=e[_t68];"\n"===_r25||"\r\n"===_r25?n.push(In()):"\t"===_r25?n.push(nr()):n.push(Qn(_r25));}this.insertNodes(n);};_proto8.insertText=function insertText(e){var n=this.anchor,r=this.focus,o=this.format,i=this.style;var s=n,l=r;!this.isCollapsed()&&r.isBefore(n)&&(s=r,l=n),"element"===s.type&&function(t,e,n,r){var o=t.getNode(),i=o.getChildAtIndex(t.offset),s=Qn();if(s.setFormat(n),s.setStyle(r),To(i))i.splice(0,0,[s]);else{var _t69=go(o)?No().append(s):s;null===i?o.append(_t69):i.insertBefore(_t69);}t.is(e)&&e.set(s.__key,0,"text"),t.set(s.__key,0,"text");}(s,l,o,i),"element"===l.type&&Ws(l,Gs(zs(l,"next")));var c=s.offset;var a=l.offset;var u=this.getNodes(),f=u.length;var d=u[0];Zn(d)||t(26);var h=d.getTextContent().length,g=d.getParentOrThrow();var _=u[f-1];if(1===f&&"element"===l.type&&(a=h,l.set(s.key,a,"text")),this.isCollapsed()&&c===h&&(Wo(d)||!d.canInsertTextAfter()||!g.canInsertTextAfter()&&null===d.getNextSibling())){var _t70=d.getNextSibling();if(Zn(_t70)&&_t70.canInsertTextBefore()&&!Wo(_t70)||(_t70=Qn(),_t70.setFormat(o),_t70.setStyle(i),g.canInsertTextAfter()?d.insertAfter(_t70):g.insertAfter(_t70)),_t70.select(0,0),d=_t70,""!==e)return void this.insertText(e);}else if(this.isCollapsed()&&0===c&&(Wo(d)||!d.canInsertTextBefore()||!g.canInsertTextBefore()&&null===d.getPreviousSibling())){var _t71=d.getPreviousSibling();if(Zn(_t71)&&!Wo(_t71)||(_t71=Qn(),_t71.setFormat(o),g.canInsertTextBefore()?d.insertBefore(_t71):g.insertBefore(_t71)),_t71.select(),d=_t71,""!==e)return void this.insertText(e);}else if(d.isSegmented()&&c!==h){var _t72=Qn(d.getTextContent());_t72.setFormat(o),d.replace(_t72),d=_t72;}else if(!this.isCollapsed()&&""!==e){var _t73=_.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||co(_t73)&&(!_t73.canInsertTextBefore()||!_t73.canInsertTextAfter()))return this.insertText(""),xr(this.anchor,this.focus,null),void this.insertText(e);}if(1===f){if(zo(d)){var _t74=Qn(e);return _t74.select(),void d.replace(_t74);}var _t75=d.getFormat(),_n40=d.getStyle();if(c!==a||_t75===o&&_n40===i){if(rr(d)){var _t76=Qn(e);return _t76.setFormat(o),_t76.setStyle(i),_t76.select(),void d.replace(_t76);}}else{if(""!==d.getTextContent()){var _t77=Qn(e);if(_t77.setFormat(o),_t77.setStyle(i),_t77.select(),0===c)d.insertBefore(_t77,!1);else{var _d$splitText=d.splitText(c),_e50=_d$splitText[0];_e50.insertAfter(_t77,!1);}return void(_t77.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length));}d.setFormat(o),d.setStyle(i);}var _r26=a-c;d=d.spliceText(c,_r26,e,!0),""===d.getTextContent()?d.remove():"text"===this.anchor.type&&(d.isComposing()?this.anchor.offset-=e.length:(this.format=_t75,this.style=_n40));}else{var _t78=new Set([].concat(d.getParentKeys(),_.getParentKeys())),_n41=co(d)?d:d.getParentOrThrow();var _r27=co(_)?_:_.getParentOrThrow(),_o19=_;if(!_n41.is(_r27)&&_r27.isInline())do{_o19=_r27,_r27=_r27.getParentOrThrow();}while(_r27.isInline());if("text"===l.type&&(0!==a||""===_.getTextContent())||"element"===l.type&&_.getIndexWithinParent()<a){if(Zn(_)&&!zo(_)&&a!==_.getTextContentSize()){if(_.isSegmented()){var _t79=Qn(_.getTextContent());_.replace(_t79),_=_t79;}go(l.getNode())||"text"!==l.type||(_=_.spliceText(0,a,"")),_t78.add(_.__key);}else{var _t80=_.getParentOrThrow();_t80.canBeEmpty()||1!==_t80.getChildrenSize()?_.remove():_t80.remove();}}else _t78.add(_.__key);var _i1=_r27.getChildren(),_s0=new Set(u),_g5=_n41.is(_r27),_p2=_n41.isInline()&&null===d.getNextSibling()?_n41:d;for(var _t81=_i1.length-1;_t81>=0;_t81--){var _e51=_i1[_t81];if(_e51.is(d)||co(_e51)&&_e51.isParentOf(d))break;_e51.isAttached()&&(!_s0.has(_e51)||_e51.is(_o19)?_g5||_p2.insertAfter(_e51,!1):_e51.remove());}if(!_g5){var _e52=_r27,_n42=null;for(;null!==_e52;){var _r28=_e52.getChildren(),_o20=_r28.length;(0===_o20||_r28[_o20-1].is(_n42))&&(_t78["delete"](_e52.__key),_n42=_e52),_e52=_e52.getParent();}}if(zo(d)){if(c===h)d.select();else{var _t82=Qn(e);_t82.select(),d.replace(_t82);}}else d=d.spliceText(c,h-c,e,!0),""===d.getTextContent()?d.remove():d.isComposing()&&"text"===this.anchor.type&&(this.anchor.offset-=e.length);for(var _e53=1;_e53<f;_e53++){var _n43=u[_e53],_r29=_n43.__key;_t78.has(_r29)||_n43.remove();}}};_proto8.removeText=function removeText(){var t=kr()===this;Us(this,Vs(Js(this))),t&&kr()!==this&&ii(this);};_proto8.formatText=function formatText(t,e){var _d$splitText2,_p$splitText;if(e===void 0){e=null;}if(this.isCollapsed())return this.toggleFormat(t),void Go(null);var n=this.getNodes(),r=[];for(var _t83 of n)Zn(_t83)&&r.push(_t83);var o=function o(e){n.forEach(function(n){if(co(n)){var _r30=n.getFormatFlags(t,e);n.setTextFormat(_r30);}});},i=r.length;if(0===i)return this.toggleFormat(t),Go(null),void o(e);var s=this.anchor,l=this.focus,c=this.isBackward(),a=c?l:s,u=c?s:l;var f=0,d=r[0],h="element"===a.type?0:a.offset;if("text"===a.type&&h===d.getTextContentSize()&&(f=1,d=r[1],h=0),null==d)return;var g=d.getFormatFlags(t,e);o(g);var _=i-1;var p=r[_];var y="text"===u.type?u.offset:p.getTextContentSize();if(d.is(p)){if(h===y)return;if(Wo(d)||0===h&&y===d.getTextContentSize())d.setFormat(g);else{var _t84=d.splitText(h,y),_e54=0===h?_t84[0]:_t84[1];_e54.setFormat(g),"text"===a.type&&a.set(_e54.__key,0,"text"),"text"===u.type&&u.set(_e54.__key,y-h,"text");}return void(this.format=g);}0===h||Wo(d)||(_d$splitText2=d.splitText(h),d=_d$splitText2[1],h=0),d.setFormat(g);var m=p.getFormatFlags(t,g);y>0&&(y===p.getTextContentSize()||Wo(p)||(_p$splitText=p.splitText(y),p=_p$splitText[0],_p$splitText),p.setFormat(m));for(var _e55=f+1;_e55<_;_e55++){var _n44=r[_e55],_o21=_n44.getFormatFlags(t,m);_n44.setFormat(_o21);}"text"===a.type&&a.set(d.__key,h,"text"),"text"===u.type&&u.set(p.__key,y,"text"),this.format=g|m;};_proto8.insertNodes=function insertNodes(e){if(0===e.length)return;if(this.isCollapsed()||this.removeText(),"root"===this.anchor.key){this.insertParagraph();var _n45=kr();return ar(_n45)||t(134),_n45.insertNodes(e);}var n=(this.isBackward()?this.focus:this.anchor).getNode(),r=ls(n,Xi),o=e[e.length-1];if(co(r)&&"__language"in r){if("__language"in e[0])this.insertText(e[0].getTextContent());else{var _t85=Pr(this);r.splice(_t85,0,e),o.selectEnd();}return;}if(!e.some(function(t){return(co(t)||fo(t))&&!t.isInline();})){co(r)||t(211,n.constructor.name,n.getType());var _i10=Pr(this);return r.splice(_i10,0,e),void o.selectEnd();}var i=function(t){var e=No();var n=null;for(var _r31=0;_r31<t.length;_r31++){var _o22=t[_r31],_i11=Ln(_o22);if(_i11||fo(_o22)&&_o22.isInline()||co(_o22)&&_o22.isInline()||Zn(_o22)||_o22.isParentRequired()){if(null===n&&(n=_o22.createParentElementNode(),e.append(n),_i11))continue;null!==n&&n.append(_o22);}else e.append(_o22),n=null;}return e;}(e),s=i.getLastDescendant(),l=i.getChildren(),c=!co(r)||!r.isEmpty()?this.insertParagraph():null,a=l[l.length-1];var u=l[0];var f;co(f=u)&&Xi(f)&&!f.isEmpty()&&co(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(co(r)||t(211,n.constructor.name,n.getType()),r.append.apply(r,u.getChildren()),u=l[1]),u&&(null===r&&t(212,n.constructor.name,n.getType()),function(e,n){var r=n.getParentOrThrow().getLastChild();var o=n;var i=[n];for(;o!==r;)o.getNextSibling()||t(140),o=o.getNextSibling(),i.push(o);var s=e;for(var _t86 of i)s=s.insertAfter(_t86);}(r,u));var d=ls(s,Xi);c&&co(d)&&(c.canMergeWhenEmpty()||Xi(a))&&(d.append.apply(d,c.getChildren()),c.remove()),co(r)&&r.isEmpty()&&r.remove(),s.selectEnd();var h=co(r)?r.getLastChild():null;Ln(h)&&d!==r&&h.remove();};_proto8.insertParagraph=function insertParagraph(){if("root"===this.anchor.key){var _t87=No();return ri().splice(this.anchor.offset,0,[_t87]),_t87.select(),_t87;}var e=Pr(this),n=ls(this.anchor.getNode(),Xi);co(n)||t(213);var r=n.getChildAtIndex(e),o=r?[r].concat(r.getNextSiblings()):[],i=n.insertNewAfter(this,!1);return i?(i.append.apply(i,o),i.selectStart(),i):null;};_proto8.insertLineBreak=function insertLineBreak(t){var e=In();if(this.insertNodes([e]),t){var _t88=e.getParentOrThrow(),_n46=e.getIndexWithinParent();_t88.select(_n46,_n46);}};_proto8.extract=function extract(){var _n$splitText;var t=[].concat(this.getNodes()),e=t.length;var n=t[0],r=t[e-1];var _hr2=hr(this),o=_hr2[0],i=_hr2[1],s=this.isBackward(),_ref16=s?[this.focus,this.anchor]:[this.anchor,this.focus],l=_ref16[0],c=_ref16[1],_ref17=s?[i,o]:[o,i],a=_ref17[0],u=_ref17[1];if(0===e)return[];if(1===e){if(Zn(n)&&!this.isCollapsed()){var _t89=n.splitText(a,u),_e56=0===a?_t89[0]:_t89[1];return _e56?(l.set(_e56.getKey(),0,"text"),c.set(_e56.getKey(),_e56.getTextContentSize(),"text"),[_e56]):[];}return[n];}if(Zn(n)&&(a===n.getTextContentSize()?t.shift():0!==a&&(_n$splitText=n.splitText(a),n=_n$splitText[1],t[0]=n,l.set(n.getKey(),0,"text"))),Zn(r)){var _r$splitText;var _e57=r.getTextContent().length;0===u?t.pop():u!==_e57&&(_r$splitText=r.splitText(u),r=_r$splitText[0],t[t.length-1]=r,c.set(r.getKey(),r.getTextContentSize(),"text"));}return t;};_proto8.modify=function modify(t,e,n){if(Lr(this,t,e,n))return;var r="move"===t,o=jr(),i=Ji(Li(o));if(!i)return;var s=o._blockCursorElement,l=o._rootElement,c=this.focus.getNode();if(null===l||null===s||!co(c)||c.isInline()||c.canBeEmpty()||Ui(s,o,l),this.dirty){var _t90=bi(o,this.anchor.key),_e58=bi(o,this.focus.key);"text"===this.anchor.type&&(_t90=Jo(_t90)),"text"===this.focus.type&&(_e58=Jo(_e58)),_t90&&_e58&&wr(i,_t90,this.anchor.offset,_e58,this.focus.offset);}if(function(t,e,n,r){t.modify(e,n,r);}(i,t,e?"backward":"forward",n),i.rangeCount>0){var _t91=i.getRangeAt(0),_n47=this.anchor.getNode(),_o23=go(_n47)?_n47:Fi(_n47);if(this.applyDOMRange(_t91),this.dirty=!0,!r){var _n48=this.getNodes(),_r32=[];var _s1=!1;for(var _t92=0;_t92<_n48.length;_t92++){var _e59=_n48[_t92];Pi(_e59,_o23)?_r32.push(_e59):_s1=!0;}if(_s1&&_r32.length>0)if(e){var _t93=_r32[0];co(_t93)?_t93.selectStart():_t93.getParentOrThrow().selectStart();}else{var _t94=_r32[_r32.length-1];co(_t94)?_t94.selectEnd():_t94.getParentOrThrow().selectEnd();}i.anchorNode===_t91.startContainer&&i.anchorOffset===_t91.startOffset||function(t){var e=t.focus,n=t.anchor,r=n.key,o=n.offset,i=n.type;n.set(e.key,e.offset,e.type,!0),e.set(r,o,i,!0);}(this);}}"lineboundary"===n&&Lr(this,t,e,n,"decorators");};_proto8.forwardDeletion=function forwardDeletion(t,e,n){if(!n&&("element"===t.type&&co(e)&&t.offset===e.getChildrenSize()||"text"===t.type&&t.offset===e.getTextContentSize())){var _t95=e.getParent(),_n49=e.getNextSibling()||(null===_t95?null:_t95.getNextSibling());if(co(_n49)&&_n49.isShadowRoot())return!0;}return!1;};_proto8.deleteCharacter=function deleteCharacter(t){var e=this.isCollapsed();if(this.isCollapsed()){var _e60=this.anchor;var _n50=_e60.getNode();if(this.forwardDeletion(_e60,_n50,t))return;var _r33=ws(zs(_e60,t?"previous":"next"));if(_r33.getTextSlices().every(function(t){return null===t||0===t.distance;})){var _t96={type:"initial"};for(var _e61 of _r33.iterNodeCarets("shadowRoot"))if(ms(_e61)){if(_e61.origin.isInline());else{if(_e61.origin.isShadowRoot()){if("merge-block"===_t96.type)break;if(co(_r33.anchor.origin)&&_r33.anchor.origin.isEmpty()){var _t97=Gs(_e61);Us(this,Ps(_t97,_t97)),_r33.anchor.origin.remove();}return;}"merge-next-block"!==_t96.type&&"merge-block"!==_t96.type||(_t96={block:_t96.block,caret:_e61,type:"merge-block"});}}else{if("merge-block"===_t96.type)break;if(ys(_e61)){if(co(_e61.origin)){if(_e61.origin.isInline()){if(!_e61.origin.isParentOf(_r33.anchor.origin))break;}else _t96={block:_e61.origin,type:"merge-next-block"};continue;}if(fo(_e61.origin)){if(_e61.origin.isIsolated());else if("merge-next-block"===_t96.type&&(_e61.origin.isKeyboardSelectable()||!_e61.origin.isInline())&&co(_r33.anchor.origin)&&_r33.anchor.origin.isEmpty()){_r33.anchor.origin.remove();var _t98=Tr();_t98.add(_e61.origin.getKey()),ii(_t98);}else _e61.origin.remove();return;}break;}}if("merge-block"===_t96.type){var _t99=_t96,_e62=_t99.caret,_n51=_t99.block;return Us(this,Ps(!_e62.origin.isEmpty()&&_n51.isEmpty()?Ys(Ns(_n51,_e62.direction)):_r33.anchor,_e62)),this.removeText();}}var _o24=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&0===_e60.offset&&gr(this,_e60.getNode()))return;}else{var _r34="text"===_o24.type?_o24.getNode():null;if(_n50="text"===_e60.type?_e60.getNode():null,null!==_r34&&_r34.isSegmented()){var _e63=_o24.offset,_i12=_r34.getTextContentSize();if(_r34.is(_n50)||t&&_e63!==_i12||!t&&0!==_e63)return void pr(_r34,t,_e63);}else if(null!==_n50&&_n50.isSegmented()){var _o25=_e60.offset,_i13=_n50.getTextContentSize();if(_n50.is(_r34)||t&&0!==_o25||!t&&_o25!==_i13)return void pr(_n50,t,_o25);}!function(t,e){var n=t.anchor,r=t.focus,o=n.getNode(),i=r.getNode();if(o===i&&"text"===n.type&&"text"===r.type){var _t100=n.offset,_i14=r.offset,_s10=_t100<_i14,_l4=_s10?_t100:_i14,_c4=_s10?_i14:_t100,_a5=_c4-1;if(_l4!==_a5){(function(t){return!(li(t)||_r(t));})(o.getTextContent().slice(_l4,_c4))&&(e?r.set(r.key,_a5,r.type):n.set(n.key,_a5,n.type));}}}(this,t);}}if(this.removeText(),t&&!e&&this.isCollapsed()&&"element"===this.anchor.type&&0===this.anchor.offset){var _t101=this.anchor.getNode();_t101.isEmpty()&&go(_t101.getParent())&&null===_t101.getPreviousSibling()&&gr(this,_t101);}};_proto8.deleteLine=function deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText();};_proto8.deleteWord=function deleteWord(t){if(this.isCollapsed()){var _e64=this.anchor,_n52=_e64.getNode();if(this.forwardDeletion(_e64,_n52,t))return;this.modify("extend",t,"word");}this.removeText();};_proto8.isBackward=function isBackward(){return this.focus.isBefore(this.anchor);};_proto8.getStartEndPoints=function getStartEndPoints(){return[this.anchor,this.focus];};return ur;}();function fr(t){return t instanceof _cr;}function dr(t){var e=t.offset;if("text"===t.type)return e;var n=t.getNode();return e===n.getChildrenSize()?n.getTextContent().length:0;}function hr(t){var e=t.getStartEndPoints();if(null===e)return[0,0];var n=e[0],r=e[1];return"element"===n.type&&"element"===r.type&&n.key===r.key&&n.offset===r.offset?[0,0]:[dr(n),dr(r)];}function gr(t,e){for(var _n53=e;_n53;_n53=_n53.getParent()){if(co(_n53)){if(_n53.collapseAtStart(t))return!0;if(Ri(_n53))break;}if(_n53.getPreviousSibling())break;}return!1;}var _r=function(){try{var _t102=new RegExp("\\p{Emoji}","u"),_e65=_t102.test.bind(_t102);if(_e65("")&&_e65("#")&&_e65(""))return _e65;}catch(t){}return function(){return!1;};}();function pr(t,e,n){var r=t,o=r.getTextContent().split(/(?=\s)/g),i=o.length;var s=0,l=0;for(var _t103=0;_t103<i;_t103++){var _r35=_t103===i-1;if(l=s,s+=o[_t103].length,e&&s===n||s>n||_r35){o.splice(_t103,1),_r35&&(l=void 0);break;}}var c=o.join("").trim();""===c?r.remove():(r.setTextContent(c),r.select(l,l));}function yr(e,n,r,o){var i,s=n;if(ji(e)){var _l5=!1;var _c5=e.childNodes,_a6=_c5.length,_u6=o._blockCursorElement;s===_a6&&(_l5=!0,s=_a6-1);var _f6=_c5[s],_d4=!1;if(_f6===_u6)_f6=_c5[s+1],_d4=!0;else if(null!==_u6){var _t104=_u6.parentNode;if(e===_t104){n>Array.prototype.indexOf.call(_t104.children,_u6)&&s--;}}if(i=si(_f6),Zn(i))s=vs(i,_l5?"next":"previous");else{var _c6=si(e);if(null===_c6)return null;if(co(_c6)){var _u7$resolveChildIndex;var _a7=o.getElementByKey(_c6.getKey());null===_a7&&t(214);var _u7=_c6.getDOMSlot(_a7);_u7$resolveChildIndex=_u7.resolveChildIndex(_c6,_a7,e,n),_c6=_u7$resolveChildIndex[0],s=_u7$resolveChildIndex[1],co(_c6)||t(215),_l5&&s>=_c6.getChildrenSize()&&(s=Math.max(0,_c6.getChildrenSize()-1));var _f7=_c6.getChildAtIndex(s);if(co(_f7)&&function(t,e,n){var r=t.getParent();return null===n||null===r||!r.canBeEmpty()||r!==n.getNode();}(_f7,0,r)){var _t105=_l5?_f7.getLastDescendant():_f7.getFirstDescendant();null===_t105?_c6=_f7:(_f7=_t105,_c6=co(_f7)?_f7:_f7.getParentOrThrow()),s=0;}Zn(_f7)?(i=_f7,_c6=null,s=vs(_f7,_l5?"next":"previous")):_f7!==_c6&&_l5&&!_d4&&(co(_c6)||t(216),s=Math.min(_c6.getChildrenSize(),s+1));}else{var _t106=_c6.getIndexWithinParent();s=0===n&&fo(_c6)&&si(e)===_c6?_t106:_t106+1,_c6=_c6.getParentOrThrow();}if(co(_c6))return ir(_c6.__key,s,"element");}}else i=si(e);return Zn(i)?ir(i.__key,vs(i,s,"clamp"),"text"):null;}function mr(t,e,n){var r=t.offset,o=t.getNode();if(0===r){var _r36=o.getPreviousSibling(),_i15=o.getParent();if(e){if((n||!e)&&null===_r36&&co(_i15)&&_i15.isInline()){var _e66=_i15.getPreviousSibling();Zn(_e66)&&t.set(_e66.__key,_e66.getTextContent().length,"text");}}else co(_r36)&&!n&&_r36.isInline()?t.set(_r36.__key,_r36.getChildrenSize(),"element"):Zn(_r36)&&t.set(_r36.__key,_r36.getTextContent().length,"text");}else if(r===o.getTextContent().length){var _r37=o.getNextSibling(),_i16=o.getParent();if(e&&co(_r37)&&_r37.isInline())t.set(_r37.__key,0,"element");else if((n||e)&&null===_r37&&co(_i16)&&_i16.isInline()&&!_i16.canInsertTextAfter()){var _e67=_i16.getNextSibling();Zn(_e67)&&t.set(_e67.__key,0,"text");}}}function xr(t,e,n){if("text"===t.type&&"text"===e.type){var _r38=t.isBefore(e),_o26=t.is(e);mr(t,_r38,_o26),mr(e,!_r38,_o26),_o26&&e.set(t.key,t.offset,t.type);var _i17=jr();if(_i17.isComposing()&&_i17._compositionKey!==t.key&&ar(n)){var _r39=n.anchor,_o27=n.focus;t.set(_r39.key,_r39.offset,_r39.type,!0),e.set(_o27.key,_o27.offset,_o27.type,!0);}}}function Cr(t,e,n,r,o,i){if(null===t||null===n||!Fo(o,t,n))return null;var s=yr(t,e,ar(i)?i.anchor:null,o);if(null===s)return null;var l=yr(n,r,ar(i)?i.focus:null,o);if(null===l)return null;if("element"===s.type&&"element"===l.type){var _e68=si(t),_r40=si(n);if(fo(_e68)&&fo(_r40))return null;}return xr(s,l,i),[s,l];}function Sr(t,e,n,r,o,i){var s=Yr(),l=new _ur(ir(t,e,o),ir(n,r,i),0,"");return l.dirty=!0,s._selection=l,l;}function Nr(){var t=ir("root",0,"element"),e=ir("root",0,"element");return new _ur(t,e,0,"");}function Tr(){return new _cr(new Set());}function vr(t,e,n,r){var o=n._window;if(null===o)return null;var i=r||o.event,s=i?i.type:void 0,l="selectionchange"===s,c=!B&&(l||"beforeinput"===s||"compositionstart"===s||"compositionend"===s||"click"===s&&i&&3===i.detail||"drop"===s||void 0===s);var a,u,f,d;if(ar(t)&&!c)return t.clone();if(null===e)return null;if(a=e.anchorNode,u=e.focusNode,f=e.anchorOffset,d=e.focusOffset,(l||void 0===s)&&ar(t)&&!Fo(n,a,u))return t.clone();var h=Cr(a,f,u,d,n,t);if(null===h)return null;var g=h[0],_=h[1];return new _ur(g,_,ar(t)?t.format:0,ar(t)?t.style:"");}function kr(){return Yr()._selection;}function Er(){return jr()._editorState._selection;}function Or(t,e,n,r){if(r===void 0){r=1;}var o=t.anchor,i=t.focus,s=o.getNode(),l=i.getNode();if(!e.is(s)&&!e.is(l))return;var c=e.__key;if(t.isCollapsed()){var _e69=o.offset;if(n<=_e69&&r>0||n<_e69&&r<0){var _n54=Math.max(0,_e69+r);o.set(c,_n54,"element"),i.set(c,_n54,"element"),br(t);}}else{var _s11=t.isBackward(),_l6=_s11?i:o,_a8=_l6.getNode(),_u8=_s11?o:i,_f8=_u8.getNode();if(e.is(_a8)){var _t107=_l6.offset;(n<=_t107&&r>0||n<_t107&&r<0)&&_l6.set(c,Math.max(0,_t107+r),"element");}if(e.is(_f8)){var _t108=_u8.offset;(n<=_t108&&r>0||n<_t108&&r<0)&&_u8.set(c,Math.max(0,_t108+r),"element");}}br(t);}function br(t){var e=t.anchor,n=e.offset,r=t.focus,o=r.offset,i=e.getNode(),s=r.getNode();if(t.isCollapsed()){if(!co(i))return;var _t109=i.getChildrenSize(),_o28=n>=_t109,_s12=_o28?i.getChildAtIndex(_t109-1):i.getChildAtIndex(n);if(Zn(_s12)){var _t110=0;_o28&&(_t110=_s12.getTextContentSize()),e.set(_s12.__key,_t110,"text"),r.set(_s12.__key,_t110,"text");}return;}if(co(i)){var _t111=i.getChildrenSize(),_r41=n>=_t111,_o29=_r41?i.getChildAtIndex(_t111-1):i.getChildAtIndex(n);if(Zn(_o29)){var _t112=0;_r41&&(_t112=_o29.getTextContentSize()),e.set(_o29.__key,_t112,"text");}}if(co(s)){var _t113=s.getChildrenSize(),_e70=o>=_t113,_n55=_e70?s.getChildAtIndex(_t113-1):s.getChildAtIndex(o);if(Zn(_n55)){var _t114=0;_e70&&(_t114=_n55.getTextContentSize()),r.set(_n55.__key,_t114,"text");}}}function Mr(t,e,n,r,o){var i=null,s=0,l=null;null!==r?(i=r.__key,Zn(r)?(s=r.getTextContentSize(),l="text"):co(r)&&(s=r.getChildrenSize(),l="element")):null!==o&&(i=o.__key,Zn(o)?l="text":co(o)&&(l="element")),null!==i&&null!==l?t.set(i,s,l):(s=e.getIndexWithinParent(),-1===s&&(s=n.getChildrenSize()),t.set(n.__key,s,"element"));}function Ar(t,e,n,r,o){"text"===t.type?t.set(n,t.offset+(e?0:o),"text"):t.offset>r.getIndexWithinParent()&&t.set(t.key,t.offset-1,"element");}function wr(t,e,n,r,o){try{t.setBaseAndExtent(e,n,r,o);}catch(t){}}function Dr(t,e,n,r,o,i,s){var l=r.anchorNode,c=r.focusNode,a=r.anchorOffset,u=r.focusOffset,f=document.activeElement;if(o.has(bn)&&f!==i||null!==f&&Lo(f))return;if(!ar(e))return void(null!==t&&Fo(n,l,c)&&r.removeAllRanges());var d=e.anchor,h=e.focus,g=d.key,_=h.key,p=bi(n,g),y=bi(n,_),m=d.offset,x=h.offset,C=e.format,S=e.style,N=e.isCollapsed();var T=p,v=y,k=!1;if("text"===d.type){T=Jo(p);var _t115=d.getNode();k=_t115.getFormat()!==C||_t115.getStyle()!==S;}else ar(t)&&"text"===t.anchor.type&&(k=!0);var E,O,b,M,A;if(("text"===h.type&&(v=Jo(y)),null!==T&&null!==v)&&(N&&(null===t||k||ar(t)&&(t.format!==C||t.style!==S))&&(E=C,O=S,b=m,M=g,A=performance.now(),nn=[E,O,b,M,A]),a!==m||u!==x||l!==T||c!==v||"Range"===r.type&&N||(null!==f&&i.contains(f)||o.has(wn)||i.focus({preventScroll:!0}),"element"===d.type))){if(wr(r,T,m,v,x),!o.has(Mn)&&e.isCollapsed()&&null!==i&&i===document.activeElement){var _t116=ar(e)&&"element"===e.anchor.type?T.childNodes[m]||null:r.rangeCount>0?r.getRangeAt(0):null;if(null!==_t116){var _e71;if(_t116 instanceof Text){var _n56=document.createRange();_n56.selectNode(_t116),_e71=_n56.getBoundingClientRect();}else _e71=_t116.getBoundingClientRect();!function(t,e,n){var r=Ai(n),o=Ii(r);if(null===r||null===o)return;var i=e.top,s=e.bottom,l=0,c=0,a=n;for(;null!==a;){var _e72=a===r.body;if(_e72)l=0,c=Li(t).innerHeight;else{var _t117=a.getBoundingClientRect();l=_t117.top,c=_t117.bottom;}var _n57=0;if(i<l?_n57=-(l-i):s>c&&(_n57=s-c),0!==_n57)if(_e72)o.scrollBy(0,_n57);else{var _t118=a.scrollTop;a.scrollTop+=_n57;var _e73=a.scrollTop-_t118;i-=_e73,s-=_e73;}if(_e72)break;a=Mi(a);}}(n,_e71,i);}}Ge=!0;}}function Pr(e){var n=e;e.isCollapsed()||n.removeText();var r=kr();ar(r)&&(n=r),ar(n)||t(161);var o=n.anchor;var i=o.getNode(),s=o.offset;for(;!Xi(i);){var _Ir;var _t119=i;if(_Ir=Ir(i,s),i=_Ir[0],s=_Ir[1],_t119.is(i))break;}return s;}function Ir(t,e){var n=t.getParent();if(!n){var _t120=No();return ri().append(_t120),_t120.select(),[ri(),0];}if(Zn(t)){var _r42=t.splitText(e);if(0===_r42.length)return[n,t.getIndexWithinParent()];var _o30=0===e?0:1;return[n,_r42[0].getIndexWithinParent()+_o30];}if(!co(t)||0===e)return[n,t.getIndexWithinParent()];var r=t.getChildAtIndex(e);if(r){var _n58=new _ur(ir(t.__key,e,"element"),ir(t.__key,e,"element"),0,""),_o31=t.insertNewAfter(_n58);_o31&&_o31.append.apply(_o31,[r].concat(r.getNextSiblings()));}return[n,t.getIndexWithinParent()+1];}function Lr(t,e,n,r,o){if(o===void 0){o="decorators-and-blocks";}if("move"===e&&"character"===r&&!t.isCollapsed()){var _ref18=n===t.isBackward()?[t.focus,t.anchor]:[t.anchor,t.focus],_e74=_ref18[0],_r43=_ref18[1];return _r43.set(_e74.key,_e74.offset,_e74.type),!0;}var i=zs(t.focus,n?"previous":"next"),s="lineboundary"===r,l="move"===e;var c=i,a="decorators-and-blocks"===o;if(!qs(c)){for(var _t121 of c){a=!1;var _e75=_t121.origin;if(!fo(_e75)||_e75.isIsolated()||(c=_t121,!s||!_e75.isInline()))break;}if(a)for(var _t122 of ws(i).iterNodeCarets("extend"===e?"shadowRoot":"root")){if(ms(_t122))_t122.origin.isInline()||(c=_t122);else{if(co(_t122.origin))continue;fo(_t122.origin)&&!_t122.origin.isInline()&&(c=_t122);}break;}}if(c===i)return!1;if(l&&!s&&fo(c.origin)&&c.origin.isKeyboardSelectable()){var _t123=Tr();return _t123.add(c.origin.getKey()),ii(_t123),!0;}return c=Gs(c),l&&Ws(t.anchor,c),Ws(t.focus,c),a||!s;}var Fr=null,Rr=null,Kr=!1,Br=!1,zr=0;var Wr={characterData:!0,childList:!0,subtree:!0};function $r(){return Kr||null!==Fr&&Fr._readOnly;}function Ur(){Kr&&t(13);}function Jr(){zr>99&&t(14);}function Yr(){return null===Fr&&t(195,Hr()),Fr;}function jr(){return null===Rr&&t(196,Hr()),Rr;}function Hr(){var t=0;var e=new Set(),n=_Oo.version;if("undefined"!=typeof window)for(var _r44 of document.querySelectorAll("[contenteditable]")){var _o32=Bo(_r44);if(Ro(_o32))t++;else if(_o32){var _t124=String(_o32.constructor.version||"<0.17.1");_t124===n&&(_t124+=" (separately built, likely a bundler configuration issue)"),e.add(_t124);}}var r=" Detected on the page: "+t+" compatible editor(s) with version "+n;return e.size&&(r+=" and incompatible editors with versions "+Array.from(e).join(", ")),r;}function Vr(){return Rr;}function Gr(t,e,n){var r=e.__type,o=wo(t,r);var i=n.get(r);void 0===i&&(i=Array.from(o.transforms),n.set(r,i));var s=i.length;for(var _t125=0;_t125<s&&(i[_t125](e),e.isAttached());_t125++);}function qr(t,e){return void 0!==t&&t.__key!==e&&t.isAttached();}function Xr(t,e){if(!e)return;var n=t._updateTags;var r=e;Array.isArray(e)||(r=[e]);for(var _t126 of r)n.add(_t126);}function Qr(e,n){var r=e.type,o=n.get(r);void 0===o&&t(17,r);var i=o.klass;e.type!==i.getType()&&t(18,i.name);var s=i.importJSON(e),l=e.children;if(co(s)&&Array.isArray(l))for(var _t127=0;_t127<l.length;_t127++){var _e76=Qr(l[_t127],n);s.append(_e76);}return s;}function Zr(t,e,n){var r=Fr,o=Kr,i=Rr;Fr=e,Kr=!0,Rr=t;try{return n();}finally{Fr=r,Kr=o,Rr=i;}}function to(t,e){var n=t._pendingEditorState,r=t._rootElement,o=t._headless||null===r;if(null===n)return;var i=t._editorState,s=i._selection,l=n._selection,c=0!==t._dirtyType,a=Fr,u=Kr,f=Rr,d=t._updating,g=t._observer;var _=null;if(t._pendingEditorState=null,t._editorState=n,!o&&c&&null!==g){Rr=t,Fr=n,Kr=!1,t._updating=!0;try{var _e77=t._dirtyType,_r45=t._dirtyElements,_o33=t._dirtyLeaves;g.disconnect(),_=Ut(i,n,t,_e77,_r45,_o33);}catch(e){if(e instanceof Error&&t._onError(e),Br)throw e;return ko(t,null,r,n),V(t),t._dirtyType=2,Br=!0,to(t,i),void(Br=!1);}finally{g.observe(r,Wr),t._updating=d,Fr=a,Kr=u,Rr=f;}}n._readOnly||(n._readOnly=!0);var p=t._dirtyLeaves,y=t._dirtyElements,m=t._normalizedNodes,x=t._updateTags,C=t._deferred;c&&(t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set(),t._dirtyElements=new Map(),t._normalizedNodes=new Set(),t._updateTags=new Set()),function(t,e){var n=t._decorators;var r=t._pendingDecorators||n;var o=e._nodeMap;var i;for(i in r)o.has(i)||(r===n&&(r=ei(t)),delete r[i]);}(t,n);var S=o?null:Ji(Li(t));if(t._editable&&null!==S&&(c||null===l||l.dirty||!l.is(s))&&null!==r&&!x.has(An)){Rr=t,Fr=n;try{if(null!==g&&g.disconnect(),c||null===l||l.dirty){var _e78=t._blockCursorElement;null!==_e78&&Ui(_e78,t,r),Dr(s,l,t,S,x,r);}!function(t,e,n){var r=t._blockCursorElement;if(ar(n)&&n.isCollapsed()&&"element"===n.anchor.type&&e.contains(document.activeElement)){var _o34=n.anchor,_i18=_o34.getNode(),_s13=_o34.offset;var _l7=!1,_c7=null;if(_s13===_i18.getChildrenSize()){$i(_i18.getChildAtIndex(_s13-1))&&(_l7=!0);}else{var _e79=_i18.getChildAtIndex(_s13);if(null!==_e79&&$i(_e79)){var _n59=_e79.getPreviousSibling();(null===_n59||$i(_n59))&&(_l7=!0,_c7=t.getElementByKey(_e79.__key));}}if(_l7){var _n60=t.getElementByKey(_i18.__key);return null===r&&(t._blockCursorElement=r=function(t){var e=t.theme,n=document.createElement("div");n.contentEditable="false",n.setAttribute("data-lexical-cursor","true");var r=e.blockCursor;if(void 0!==r){var _n$classList;if("string"==typeof r){var _t128=h(r);r=e.blockCursor=_t128;}void 0!==r&&(_n$classList=n.classList).add.apply(_n$classList,r);}return n;}(t._config)),e.style.caretColor="transparent",void(null===_c7?_n60.appendChild(r):_n60.insertBefore(r,_c7));}}null!==r&&Ui(r,t,e);}(t,r,l);}finally{null!==g&&g.observe(r,Wr),Rr=f,Fr=a;}}null!==_&&function(t,e,n,r,o){var i=Array.from(t._listeners.mutation),s=i.length;for(var _t129=0;_t129<s;_t129++){var _i$_t=i[_t129],_s14=_i$_t[0],_l8=_i$_t[1];for(var _t130 of _l8){var _i19=e.get(_t130);void 0!==_i19&&_s14(_i19,{dirtyLeaves:r,prevEditorState:o,updateTags:n});}}}(t,_,x,p,i),ar(l)||null===l||null!==s&&s.is(l)||t.dispatchCommand(jt,void 0);var N=t._pendingDecorators;null!==N&&(t._decorators=N,t._pendingDecorators=null,eo("decorator",t,!0,N)),function(t,e,n){var r=ni(e),o=ni(n);r!==o&&eo("textcontent",t,!0,o);}(t,e||i,n),eo("update",t,!0,{dirtyElements:y,dirtyLeaves:p,editorState:n,mutatedNodes:_,normalizedNodes:m,prevEditorState:e||i,tags:x}),function(t,e){if(t._deferred=[],0!==e.length){var _n61=t._updating;t._updating=!0;try{for(var _t131=0;_t131<e.length;_t131++)e[_t131]();}finally{t._updating=_n61;}}}(t,C),function(t){var e=t._updates;if(0!==e.length){var _n62=e.shift();if(_n62){var _e80=_n62[0],_r46=_n62[1];ro(t,_e80,_r46);}}}(t);}function eo(t,e,n){var o=e._updating;e._updating=n;try{var _n63=Array.from(e._listeners[t]);for(var _len5=arguments.length,r=new Array(_len5>3?_len5-3:0),_key5=3;_key5<_len5;_key5++){r[_key5-3]=arguments[_key5];}for(var _t132=0;_t132<_n63.length;_t132++)_n63[_t132].apply(null,r);}finally{e._updating=o;}}function no(e,n){var r=e._updates;var o=n||!1;for(;0!==r.length;){var _n64=r.shift();if(_n64){var _r47=_n64[0],_i20=_n64[1],_s15=e._pendingEditorState;var _l9=void 0;void 0!==_i20&&(_l9=_i20.onUpdate,_i20.skipTransforms&&(o=!0),_i20.discrete&&(null===_s15&&t(191),_s15._flushSync=!0),_l9&&e._deferred.push(_l9),Xr(e,_i20.tag)),null==_s15?ro(e,_r47,_i20):_r47();}}return o;}function ro(e,n,r){var o=e._updateTags;var i,s=!1,l=!1;void 0!==r&&(i=r.onUpdate,Xr(e,r.tag),s=r.skipTransforms||!1,l=r.discrete||!1),i&&e._deferred.push(i);var c=e._editorState;var a=e._pendingEditorState,u=!1;(null===a||a._readOnly)&&(a=e._pendingEditorState=_o(a||c),u=!0),a._flushSync=l;var f=Fr,d=Kr,h=Rr,g=e._updating;Fr=a,Kr=!1,e._updating=!0,Rr=e;var _=e._headless||null===e.getRootElement();Mo(null);try{u&&(_?null!==c._selection&&(a._selection=c._selection.clone()):a._selection=function(t,e){var n=t.getEditorState()._selection,r=Ji(Li(t));return ar(n)||null==n?vr(n,r,t,e):n.clone();}(e,r&&r.event||null));var _o35=e._compositionKey;n(),s=no(e,s),function(t,e){var n=e.getEditorState()._selection,r=t._selection;if(ar(r)){var _t133=r.anchor,_e81=r.focus;var _o36;if("text"===_t133.type&&(_o36=_t133.getNode(),_o36.selectionTransform(n,r)),"text"===_e81.type){var _t134=_e81.getNode();_o36!==_t134&&_t134.selectionTransform(n,r);}}}(a,e),0!==e._dirtyType&&(s?function(t,e){var n=e._dirtyLeaves,r=t._nodeMap;for(var _t135 of n){var _e82=r.get(_t135);Zn(_e82)&&_e82.isAttached()&&_e82.isSimpleText()&&!_e82.isUnmergeable()&&ct(_e82);}}(a,e):function(t,e){var n=e._dirtyLeaves,r=e._dirtyElements,o=t._nodeMap,i=qo(),s=new Map();var l=n,c=l.size,a=r,u=a.size;for(;c>0||u>0;){if(c>0){e._dirtyLeaves=new Set();for(var _t136 of l){var _r48=o.get(_t136);Zn(_r48)&&_r48.isAttached()&&_r48.isSimpleText()&&!_r48.isUnmergeable()&&ct(_r48),void 0!==_r48&&qr(_r48,i)&&Gr(e,_r48,s),n.add(_t136);}if(l=e._dirtyLeaves,c=l.size,c>0){zr++;continue;}}e._dirtyLeaves=new Set(),e._dirtyElements=new Map(),a["delete"]("root")&&a.set("root",!0);for(var _t137 of a){var _n65=_t137[0],_l0=_t137[1];if(r.set(_n65,_l0),!_l0)continue;var _c8=o.get(_n65);void 0!==_c8&&qr(_c8,i)&&Gr(e,_c8,s);}l=e._dirtyLeaves,c=l.size,a=e._dirtyElements,u=a.size,zr++;}e._dirtyLeaves=n,e._dirtyElements=r;}(a,e),no(e),function(t,e,n,r){var o=t._nodeMap,i=e._nodeMap,s=[];for(var _ref20 of r){var _t138=_ref20[0];{var _e83=i.get(_t138);void 0!==_e83&&(_e83.isAttached()||(co(_e83)&&K(_e83,_t138,o,i,s,r),o.has(_t138)||r["delete"](_t138),s.push(_t138)));}}for(var _t139 of s)i["delete"](_t139);for(var _t140 of n){var _e84=i.get(_t140);void 0===_e84||_e84.isAttached()||(o.has(_t140)||n["delete"](_t140),i["delete"](_t140));}}(c,a,e._dirtyLeaves,e._dirtyElements));_o35!==e._compositionKey&&(a._flushSync=!0);var _i21=a._selection;if(ar(_i21)){var _e85=a._nodeMap,_n66=_i21.anchor.key,_r49=_i21.focus.key;void 0!==_e85.get(_n66)&&void 0!==_e85.get(_r49)||t(19);}else fr(_i21)&&0===_i21._nodes.size&&(a._selection=null);}catch(t){return t instanceof Error&&e._onError(t),e._pendingEditorState=c,e._dirtyType=2,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set(),e._dirtyElements.clear(),void to(e);}finally{Fr=f,Kr=d,Rr=h,e._updating=g,zr=0;}var p=0!==e._dirtyType||e._deferred.length>0||function(t,e){var n=e.getEditorState()._selection,r=t._selection;if(null!==r){if(r.dirty||!r.is(n))return!0;}else if(null!==n)return!0;return!1;}(a,e);p?a._flushSync?(a._flushSync=!1,to(e)):u&&Po(function(){to(e);}):(a._flushSync=!1,u&&(o.clear(),e._deferred=[],e._pendingEditorState=null));}function oo(t,e,n){Rr===t&&void 0===n?e():ro(t,e,n);}var _io=function(){function io(t,e,n){this.element=t,this.before=e||null,this.after=n||null;}var _proto9=io.prototype;_proto9.withBefore=function withBefore(t){return new io(this.element,t,this.after);};_proto9.withAfter=function withAfter(t){return new io(this.element,this.before,t);};_proto9.withElement=function withElement(t){return this.element===t?this:new io(t,this.before,this.after);};_proto9.insertChild=function insertChild(e){var n=this.before||this.getManagedLineBreak();return null!==n&&n.parentElement!==this.element&&t(222),this.element.insertBefore(e,n),this;};_proto9.removeChild=function removeChild(e){return e.parentElement!==this.element&&t(223),this.element.removeChild(e),this;};_proto9.replaceChild=function replaceChild(e,n){return n.parentElement!==this.element&&t(224),this.element.replaceChild(e,n),this;};_proto9.getFirstChild=function getFirstChild(){var t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t;};_proto9.getManagedLineBreak=function getManagedLineBreak(){return this.element.__lexicalLineBreak||null;};_proto9.setManagedLineBreak=function setManagedLineBreak(t){if(null===t)this.removeManagedLineBreak();else{var _e86="decorator"===t&&(d||c||l);this.insertManagedLineBreak(_e86);}};_proto9.removeManagedLineBreak=function removeManagedLineBreak(){var t=this.getManagedLineBreak();if(t){var _e87=this.element,_n67="IMG"===t.nodeName?t.nextSibling:null;_n67&&_e87.removeChild(_n67),_e87.removeChild(t),_e87.__lexicalLineBreak=void 0;}};_proto9.insertManagedLineBreak=function insertManagedLineBreak(t){var e=this.getManagedLineBreak();if(e){if(t===("IMG"===e.nodeName))return;this.removeManagedLineBreak();}var n=this.element,r=this.before,o=document.createElement("br");if(n.insertBefore(o,r),t){var _t141=document.createElement("img");_t141.setAttribute("data-lexical-linebreak","true"),_t141.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",_t141.alt="",n.insertBefore(_t141,o),n.__lexicalLineBreak=_t141;}else n.__lexicalLineBreak=o;};_proto9.getFirstChildOffset=function getFirstChildOffset(){var t=0;for(var _e88=this.after;null!==_e88;_e88=_e88.previousSibling)t++;return t;};_proto9.resolveChildIndex=function resolveChildIndex(t,e,n,r){if(n===this.element){var _e89=this.getFirstChildOffset();return[t,Math.min(_e89+t.getChildrenSize(),Math.max(_e89,r))];}var o=so(e,n);o.push(r);var i=so(e,this.element);var s=t.getIndexWithinParent();for(var _t142=0;_t142<i.length;_t142++){var _e90=o[_t142],_n68=i[_t142];if(void 0===_e90||_e90<_n68)break;if(_e90>_n68){s+=1;break;}}return[t.getParentOrThrow(),s];};return io;}();function so(e,n){var r=[];var o=n;for(;o!==e&&null!==o;o=o.parentNode){var _t143=0;for(var _e91=o.previousSibling;null!==_e91;_e91=_e91.previousSibling)_t143++;r.push(_t143);}return o!==e&&t(225),r.reverse();}var _lo4=function(_En3){function lo(t){var _this3;_this3=_En3.call(this,t)||this,_this3.__first=null,_this3.__last=null,_this3.__size=0,_this3.__format=0,_this3.__style="",_this3.__indent=0,_this3.__dir=null,_this3.__textFormat=0,_this3.__textStyle="";return _this3;}babelHelpers.inheritsLoose(lo,_En3);var _proto0=lo.prototype;_proto0.afterCloneFrom=function afterCloneFrom(t){_En3.prototype.afterCloneFrom.call(this,t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle;};_proto0.getFormat=function getFormat(){return this.getLatest().__format;};_proto0.getFormatType=function getFormatType(){var t=this.getFormat();return I[t]||"";};_proto0.getStyle=function getStyle(){return this.getLatest().__style;};_proto0.getIndent=function getIndent(){return this.getLatest().__indent;};_proto0.getChildren=function getChildren(){var t=[];var e=this.getFirstChild();for(;null!==e;)t.push(e),e=e.getNextSibling();return t;};_proto0.getChildrenKeys=function getChildrenKeys(){var t=[];var e=this.getFirstChild();for(;null!==e;)t.push(e.__key),e=e.getNextSibling();return t;};_proto0.getChildrenSize=function getChildrenSize(){return this.getLatest().__size;};_proto0.isEmpty=function isEmpty(){return 0===this.getChildrenSize();};_proto0.isDirty=function isDirty(){var t=jr()._dirtyElements;return null!==t&&t.has(this.__key);};_proto0.isLastChild=function isLastChild(){var t=this.getLatest(),e=this.getParentOrThrow().getLastChild();return null!==e&&e.is(t);};_proto0.getAllTextNodes=function getAllTextNodes(){var t=[];var e=this.getFirstChild();for(;null!==e;){if(Zn(e)&&t.push(e),co(e)){var _n69=e.getAllTextNodes();t.push.apply(t,_n69);}e=e.getNextSibling();}return t;};_proto0.getFirstDescendant=function getFirstDescendant(){var t=this.getFirstChild();for(;co(t);){var _e92=t.getFirstChild();if(null===_e92)break;t=_e92;}return t;};_proto0.getLastDescendant=function getLastDescendant(){var t=this.getLastChild();for(;co(t);){var _e93=t.getLastChild();if(null===_e93)break;t=_e93;}return t;};_proto0.getDescendantByIndex=function getDescendantByIndex(t){var e=this.getChildren(),n=e.length;if(t>=n){var _t144=e[n-1];return co(_t144)&&_t144.getLastDescendant()||_t144||null;}var r=e[t];return co(r)&&r.getFirstDescendant()||r||null;};_proto0.getFirstChild=function getFirstChild(){var t=this.getLatest().__first;return null===t?null:Xo(t);};_proto0.getFirstChildOrThrow=function getFirstChildOrThrow(){var e=this.getFirstChild();return null===e&&t(45,this.__key),e;};_proto0.getLastChild=function getLastChild(){var t=this.getLatest().__last;return null===t?null:Xo(t);};_proto0.getLastChildOrThrow=function getLastChildOrThrow(){var e=this.getLastChild();return null===e&&t(96,this.__key),e;};_proto0.getChildAtIndex=function getChildAtIndex(t){var e=this.getChildrenSize();var n,r;if(t<e/2){for(n=this.getFirstChild(),r=0;null!==n&&r<=t;){if(r===t)return n;n=n.getNextSibling(),r++;}return null;}for(n=this.getLastChild(),r=e-1;null!==n&&r>=t;){if(r===t)return n;n=n.getPreviousSibling(),r--;}return null;};_proto0.getTextContent=function getTextContent(){var t="";var e=this.getChildren(),n=e.length;for(var _r50=0;_r50<n;_r50++){var _o37=e[_r50];t+=_o37.getTextContent(),co(_o37)&&_r50!==n-1&&!_o37.isInline()&&(t+=k);}return t;};_proto0.getTextContentSize=function getTextContentSize(){var t=0;var e=this.getChildren(),n=e.length;for(var _r51=0;_r51<n;_r51++){var _o38=e[_r51];t+=_o38.getTextContentSize(),co(_o38)&&_r51!==n-1&&!_o38.isInline()&&(t+=2);}return t;};_proto0.getDirection=function getDirection(){return this.getLatest().__dir;};_proto0.getTextFormat=function getTextFormat(){return this.getLatest().__textFormat;};_proto0.hasFormat=function hasFormat(t){if(""!==t){var _e94=P[t];return 0!==(this.getFormat()&_e94);}return!1;};_proto0.hasTextFormat=function hasTextFormat(t){var e=w[t];return 0!==(this.getTextFormat()&e);};_proto0.getFormatFlags=function getFormatFlags(t,e){return Yo(this.getLatest().__textFormat,t,e);};_proto0.getTextStyle=function getTextStyle(){return this.getLatest().__textStyle;};_proto0.select=function select(t,e){Ur();var n=kr();var r=t,o=e;var i=this.getChildrenSize();if(!this.canBeEmpty())if(0===t&&0===e){var _t145=this.getFirstChild();if(Zn(_t145)||co(_t145))return _t145.select(0,0);}else if(!(void 0!==t&&t!==i||void 0!==e&&e!==i)){var _t146=this.getLastChild();if(Zn(_t146)||co(_t146))return _t146.select();}void 0===r&&(r=i),void 0===o&&(o=i);var s=this.__key;return ar(n)?(n.anchor.set(s,r,"element"),n.focus.set(s,o,"element"),n.dirty=!0,n):Sr(s,r,s,o,"element","element");};_proto0.selectStart=function selectStart(){var t=this.getFirstDescendant();return t?t.selectStart():this.select();};_proto0.selectEnd=function selectEnd(){var t=this.getLastDescendant();return t?t.selectEnd():this.select();};_proto0.clear=function clear(){var t=this.getWritable();return this.getChildren().forEach(function(t){return t.remove();}),t;};_proto0.append=function append(){for(var _len6=arguments.length,t=new Array(_len6),_key6=0;_key6<_len6;_key6++){t[_key6]=arguments[_key6];}return this.splice(this.getChildrenSize(),0,t);};_proto0.setDirection=function setDirection(t){var e=this.getWritable();return e.__dir=t,e;};_proto0.setFormat=function setFormat(t){return this.getWritable().__format=""!==t?P[t]:0,this;};_proto0.setStyle=function setStyle(t){return this.getWritable().__style=t||"",this;};_proto0.setTextFormat=function setTextFormat(t){var e=this.getWritable();return e.__textFormat=t,e;};_proto0.setTextStyle=function setTextStyle(t){var e=this.getWritable();return e.__textStyle=t,e;};_proto0.setIndent=function setIndent(t){return this.getWritable().__indent=t,this;};_proto0.splice=function splice(e,n,r){kn(this)&&t(324,this.__key,this.__type);var o=this.getChildrenSize(),i=this.getWritable();e+n<=o||t(226,String(e),String(n),String(o));var s=i.__key,l=[],c=[],a=this.getChildAtIndex(e+n);var u=null,f=o-n+r.length;if(0!==e)if(e===o)u=this.getLastChild();else{var _t147=this.getChildAtIndex(e);null!==_t147&&(u=_t147.getPreviousSibling());}if(n>0){var _e95=null===u?this.getFirstChild():u.getNextSibling();for(var _r52=0;_r52<n;_r52++){null===_e95&&t(100);var _n70=_e95.getNextSibling(),_r53=_e95.__key;Ho(_e95.getWritable()),c.push(_r53),_e95=_n70;}}var d=u;for(var _e96 of r){null!==d&&_e96.is(d)&&(u=d=d.getPreviousSibling());var _n71=_e96.getWritable();_n71.__parent===s&&f--,Ho(_n71);var _r54=_e96.__key;if(null===d)i.__first=_r54,_n71.__prev=null;else{var _t148=d.getWritable();_t148.__next=_r54,_n71.__prev=_t148.__key;}_e96.__key===s&&t(76),_n71.__parent=s,l.push(_r54),d=_e96;}if(e+n===o){if(null!==d){d.getWritable().__next=null,i.__last=d.__key;}}else if(null!==a){var _t149=a.getWritable();if(null!==d){var _e97=d.getWritable();_t149.__prev=d.__key,_e97.__next=a.__key;}else _t149.__prev=null;}if(i.__size=f,c.length){var _t150=kr();if(ar(_t150)){var _e98=new Set(c),_n72=new Set(l),_r55=_t150.anchor,_o39=_t150.focus;ao(_r55,_e98,_n72)&&Mr(_r55,_r55.getNode(),this,u,a),ao(_o39,_e98,_n72)&&Mr(_o39,_o39.getNode(),this,u,a),0!==f||this.canBeEmpty()||Ri(this)||this.remove();}}return i;};_proto0.getDOMSlot=function getDOMSlot(t){return new _io(t);};_proto0.exportDOM=function exportDOM(t){var _En3$prototype$export=_En3.prototype.exportDOM.call(this,t),e=_En3$prototype$export.element;if(ji(e)){var _t151=this.getIndent();_t151>0&&(e.style.paddingInlineStart=40*_t151+"px");var _n73=this.getDirection();_n73&&(e.dir=_n73);}return{element:e};};_proto0.exportJSON=function exportJSON(){var t=babelHelpers["extends"]({children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent()},_En3.prototype.exportJSON.call(this)),e=this.getTextFormat(),n=this.getTextStyle();return 0===e&&""===n||Ri(this)||this.getChildren().some(Zn)||(0!==e&&(t.textFormat=e),""!==n&&(t.textStyle=n)),t;};_proto0.updateFromJSON=function updateFromJSON(t){return _En3.prototype.updateFromJSON.call(this,t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"");};_proto0.insertNewAfter=function insertNewAfter(t,e){return null;};_proto0.canIndent=function canIndent(){return!0;};_proto0.collapseAtStart=function collapseAtStart(t){return!1;};_proto0.excludeFromCopy=function excludeFromCopy(t){return!1;};_proto0.canReplaceWith=function canReplaceWith(t){return!0;};_proto0.canInsertAfter=function canInsertAfter(t){return!0;};_proto0.canBeEmpty=function canBeEmpty(){return!0;};_proto0.canInsertTextBefore=function canInsertTextBefore(){return!0;};_proto0.canInsertTextAfter=function canInsertTextAfter(){return!0;};_proto0.isInline=function isInline(){return!1;};_proto0.isShadowRoot=function isShadowRoot(){return!1;};_proto0.canMergeWith=function canMergeWith(t){return!1;};_proto0.extractWithChild=function extractWithChild(t,e,n){return!1;};_proto0.canMergeWhenEmpty=function canMergeWhenEmpty(){return!1;};_proto0.reconcileObservedMutation=function reconcileObservedMutation(t,e){var n=this.getDOMSlot(t);var r=n.getFirstChild();for(var _t152=this.getFirstChild();_t152;_t152=_t152.getNextSibling()){var _o40=e.getElementByKey(_t152.getKey());null!==_o40&&(null==r?(n.insertChild(_o40),r=_o40):r!==_o40&&n.replaceChild(_o40,r),r=r.nextSibling);}};return lo;}(_En5);function co(t){return t instanceof _lo4;}function ao(t,e,n){var r=t.getNode();for(;r;){var _t153=r.__key;if(e.has(_t153)&&!n.has(_t153))return!0;r=r.getParent();}return!1;}var _uo=function(_En4){function uo(){return _En4.apply(this,arguments)||this;}babelHelpers.inheritsLoose(uo,_En4);var _proto1=uo.prototype;_proto1.decorate=function decorate(t,e){return null;};_proto1.isIsolated=function isIsolated(){return!1;};_proto1.isInline=function isInline(){return!0;};_proto1.isKeyboardSelectable=function isKeyboardSelectable(){return!0;};return uo;}(_En5);function fo(t){return t instanceof _uo;}var _ho=function(_lo){function ho(){var _this4;_this4=_lo.call(this,"root")||this,_this4.__cachedText=null;return _this4;}babelHelpers.inheritsLoose(ho,_lo);ho.getType=function getType(){return"root";};ho.clone=function clone(){return new ho();};var _proto10=ho.prototype;_proto10.getTopLevelElementOrThrow=function getTopLevelElementOrThrow(){t(51);};_proto10.getTextContent=function getTextContent(){var t=this.__cachedText;return!$r()&&0!==jr()._dirtyType||null===t?_lo.prototype.getTextContent.call(this):t;};_proto10.remove=function remove(){t(52);};_proto10.replace=function replace(e){t(53);};_proto10.insertBefore=function insertBefore(e){t(54);};_proto10.insertAfter=function insertAfter(e){t(55);};_proto10.updateDOM=function updateDOM(t,e){return!1;};_proto10.splice=function splice(e,n,r){for(var _e99 of r)co(_e99)||fo(_e99)||t(282);return _lo.prototype.splice.call(this,e,n,r);};ho.importJSON=function importJSON(t){return ri().updateFromJSON(t);};_proto10.collapseAtStart=function collapseAtStart(){return!0;};return ho;}(_lo4);function go(t){return t instanceof _ho;}function _o(t){return new _mo(new Map(t._nodeMap));}function po(){return new _mo(new Map([["root",new _ho()]]));}function yo(e){var n=e.exportJSON(),r=e.constructor;if(n.type!==r.getType()&&t(130,r.name),co(e)){var _o41=n.children;Array.isArray(_o41)||t(59,r.name);var _i22=e.getChildren();for(var _t154=0;_t154<_i22.length;_t154++){var _e100=yo(_i22[_t154]);_o41.push(_e100);}}return n;}var _mo=function(){function mo(t,e){this._nodeMap=t,this._selection=e||null,this._flushSync=!1,this._readOnly=!1;}var _proto11=mo.prototype;_proto11.isEmpty=function isEmpty(){return 1===this._nodeMap.size&&null===this._selection;};_proto11.read=function read(t,e){return Zr(e&&e.editor||null,this,t);};_proto11.clone=function clone(t){var e=new mo(this._nodeMap,void 0===t?this._selection:t);return e._readOnly=!0,e;};_proto11.toJSON=function toJSON(){return Zr(null,this,function(){return{root:yo(ri())};});};return mo;}();var _xo=function(_lo2){function xo(){return _lo2.apply(this,arguments)||this;}babelHelpers.inheritsLoose(xo,_lo2);xo.getType=function getType(){return"artificial";};var _proto12=xo.prototype;_proto12.createDOM=function createDOM(t){return document.createElement("div");};return xo;}(_lo4);var _Co=function(_lo3){function Co(){return _lo3.apply(this,arguments)||this;}babelHelpers.inheritsLoose(Co,_lo3);Co.getType=function getType(){return"paragraph";};Co.clone=function clone(t){return new Co(t.__key);};var _proto13=Co.prototype;_proto13.createDOM=function createDOM(t){var e=document.createElement("p"),n=Si(t.theme,"paragraph");if(void 0!==n){var _e$classList2;(_e$classList2=e.classList).add.apply(_e$classList2,n);}return e;};_proto13.updateDOM=function updateDOM(t,e,n){return!1;};Co.importDOM=function importDOM(){return{p:function p(t){return{conversion:So,priority:0};}};};_proto13.exportDOM=function exportDOM(t){var _lo3$prototype$export=_lo3.prototype.exportDOM.call(this,t),e=_lo3$prototype$export.element;if(ji(e)){this.isEmpty()&&e.append(document.createElement("br"));var _t155=this.getFormatType();_t155&&(e.style.textAlign=_t155);}return{element:e};};Co.importJSON=function importJSON(t){return No().updateFromJSON(t);};_proto13.exportJSON=function exportJSON(){var t=_lo3.prototype.exportJSON.call(this);if(void 0===t.textFormat||void 0===t.textStyle){var _e101=this.getChildren().find(Zn);_e101?(t.textFormat=_e101.getFormat(),t.textStyle=_e101.getStyle()):(t.textFormat=this.getTextFormat(),t.textStyle=this.getTextStyle());}return t;};_proto13.insertNewAfter=function insertNewAfter(t,e){var n=No();n.setTextFormat(t.format),n.setTextStyle(t.style);var r=this.getDirection();return n.setDirection(r),n.setFormat(this.getFormatType()),n.setStyle(this.getStyle()),this.insertAfter(n,e),n;};_proto13.collapseAtStart=function collapseAtStart(){var t=this.getChildren();if(0===t.length||Zn(t[0])&&""===t[0].getTextContent().trim()){if(null!==this.getNextSibling())return this.selectNext(),this.remove(),!0;if(null!==this.getPreviousSibling())return this.selectPrevious(),this.remove(),!0;}return!1;};return Co;}(_lo4);function So(t){var e=No();return t.style&&(e.setFormat(t.style.textAlign),rs(t,e)),{node:e};}function No(){return Bi(new _Co());}function To(t){return t instanceof _Co;}var vo=0;function ko(t,e,n,r){var o=t._keyToDOMMap;o.clear(),t._editorState=po(),t._pendingEditorState=r,t._compositionKey=null,t._dirtyType=0,t._cloneNotNeeded.clear(),t._dirtyLeaves=new Set(),t._dirtyElements.clear(),t._normalizedNodes=new Set(),t._updateTags=new Set(),t._updates=[],t._blockCursorElement=null;var i=t._observer;null!==i&&(i.disconnect(),t._observer=null),null!==e&&(e.textContent=""),null!==n&&(n.textContent="",o.set("root",n));}function Eo(t){var e=new Set(),n=new Set();var r=t;for(;r;){var _ss3=ss(r),_t156=_ss3.ownNodeConfig,_o42=r.transform;if(!n.has(_o42)){n.add(_o42);var _t157=r.transform();_t157&&e.add(_t157);}if(_t156){var _n74=_t156.$transform;_n74&&e.add(_n74),r=_t156["extends"];}else{var _t158=Object.getPrototypeOf(r);r=_t158.prototype instanceof _En5&&_t158!==_En5?_t158:void 0;}}return e;}var _Oo=function(){function Oo(t,e,n,r,o,i,s,l){this._createEditorArgs=l,this._parentEditor=e,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map(),this._updates=[],this._updating=!1,this._listeners={decorator:new Set(),editable:new Set(),mutation:new Map(),root:new Set(),textcontent:new Set(),update:new Set()},this._commands=new Map(),this._config=r,this._nodes=n,this._decorators={},this._pendingDecorators=null,this._dirtyType=0,this._cloneNotNeeded=new Set(),this._dirtyLeaves=new Set(),this._dirtyElements=new Map(),this._normalizedNodes=new Set(),this._updateTags=new Set(),this._observer=null,this._key=ai(),this._onError=o,this._htmlConversions=i,this._editable=s,this._headless=null!==e&&e._headless,this._window=null,this._blockCursorElement=null;}var _proto14=Oo.prototype;_proto14.isComposing=function isComposing(){return null!=this._compositionKey;};_proto14.registerUpdateListener=function registerUpdateListener(t){var e=this._listeners.update;return e.add(t),function(){e["delete"](t);};};_proto14.registerEditableListener=function registerEditableListener(t){var e=this._listeners.editable;return e.add(t),function(){e["delete"](t);};};_proto14.registerDecoratorListener=function registerDecoratorListener(t){var e=this._listeners.decorator;return e.add(t),function(){e["delete"](t);};};_proto14.registerTextContentListener=function registerTextContentListener(t){var e=this._listeners.textcontent;return e.add(t),function(){e["delete"](t);};};_proto14.registerRootListener=function registerRootListener(t){var _this13=this;var e=this._listeners.root;return t(this._rootElement,null),e.add(t),function(){t(null,_this13._rootElement),e["delete"](t);};};_proto14.registerCommand=function registerCommand(e,n,r){void 0===r&&t(35);var o=this._commands;o.has(e)||o.set(e,[new Set(),new Set(),new Set(),new Set(),new Set()]);var i=o.get(e);void 0===i&&t(36,String(e));var s=i[r];return s.add(n),function(){s["delete"](n),i.every(function(t){return 0===t.size;})&&o["delete"](e);};};_proto14.registerMutationListener=function registerMutationListener(t,e,n){var r=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,o=this._listeners.mutation;var i=o.get(e);void 0===i&&(i=new Set(),o.set(e,i)),i.add(r);var s=n&&n.skipInitialization;return void 0!==s&&s||this.initializeMutationListener(e,r),function(){i["delete"](r),0===i.size&&o["delete"](e);};};_proto14.getRegisteredNode=function getRegisteredNode(e){var n=this._nodes.get(e.getType());return void 0===n&&t(37,e.name),n;};_proto14.resolveRegisteredNodeAfterReplacements=function resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t;};_proto14.initializeMutationListener=function initializeMutationListener(t,e){var n=this._editorState,r=es(n).get(e.getType());if(!r)return;var o=new Map();for(var _t159 of r.keys())o.set(_t159,"created");o.size>0&&t(o,{dirtyLeaves:new Set(),prevEditorState:n,updateTags:new Set(["registerMutationListener"])});};_proto14.registerNodeTransformToKlass=function registerNodeTransformToKlass(t,e){var n=this.getRegisteredNode(t);return n.transforms.add(e),n;};_proto14.registerNodeTransform=function registerNodeTransform(t,e){var n=this.registerNodeTransformToKlass(t,e),r=[n],o=n.replaceWithKlass;if(null!=o){var _t160=this.registerNodeTransformToKlass(o,e);r.push(_t160);}return function(t,e){var n=es(t.getEditorState()),r=[];for(var _t161 of e){var _e102=n.get(_t161);_e102&&r.push(_e102);}if(0===r.length)return;t.update(function(){for(var _t162 of r)for(var _e103 of _t162.keys()){var _t163=Xo(_e103);_t163&&_t163.markDirty();}},null===t._pendingEditorState?{tag:On}:void 0);}(this,r.map(function(t){return t.klass.getType();})),function(){r.forEach(function(t){return t.transforms["delete"](e);});};};_proto14.hasNode=function hasNode(t){return this._nodes.has(t.getType());};_proto14.hasNodes=function hasNodes(t){return t.every(this.hasNode.bind(this));};_proto14.dispatchCommand=function dispatchCommand(t,e){return Ei(this,t,e);};_proto14.getDecorators=function getDecorators(){return this._decorators;};_proto14.getRootElement=function getRootElement(){return this._rootElement;};_proto14.getKey=function getKey(){return this._key;};_proto14.setRootElement=function setRootElement(t){var e=this._rootElement;if(t!==e){var _e$classList3;var _n75=Si(this._config.theme,"root"),_r56=this._pendingEditorState||this._editorState;if(this._rootElement=t,ko(this,e,t,_r56),null!==e&&(this._config.disableEvents||Nn(e),null!=_n75&&(_e$classList3=e.classList).remove.apply(_e$classList3,_n75)),null!==t){var _t$classList;var _e104=Ii(t),_r57=t.style;_r57.userSelect="text",_r57.whiteSpace="pre-wrap",_r57.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=_e104,this._dirtyType=2,V(this),this._updateTags.add(On),to(this),this._config.disableEvents||function(t,e,_Ve$get){var n=t.ownerDocument;He.set(t,n);var r=(_Ve$get=Ve.get(n))!=null?_Ve$get:0;r<1&&n.addEventListener("selectionchange",mn),Ve.set(n,r+1),t.__lexicalEditor=e;var o=pn(t);var _loop=function _loop(){var _$e$_n=$e[_n76],r=_$e$_n[0],i=_$e$_n[1],s="function"==typeof i?function(t){Cn(t)||(xn(t),(e.isEditable()||"click"===r)&&i(t,e));}:function(t){if(Cn(t))return;xn(t);var n=e.isEditable();switch(r){case"cut":return n&&Ei(e,De,t);case"copy":return Ei(e,we,t);case"paste":return n&&Ei(e,re,t);case"dragstart":return n&&Ei(e,be,t);case"dragover":return n&&Ei(e,Me,t);case"dragend":return n&&Ei(e,Ae,t);case"focus":return n&&Ei(e,Ke,t);case"blur":return n&&Ei(e,Be,t);case"drop":return n&&Ei(e,Ee,t);}};t.addEventListener(r,s),o.push(function(){t.removeEventListener(r,s);});};for(var _n76=0;_n76<$e.length;_n76++){_loop();}}(t,this),null!=_n75&&(_t$classList=t.classList).add.apply(_t$classList,_n75);}else this._window=null,this._updateTags.add(On),to(this);eo("root",this,!1,t,e);}};_proto14.getElementByKey=function getElementByKey(t){return this._keyToDOMMap.get(t)||null;};_proto14.getEditorState=function getEditorState(){return this._editorState;};_proto14.setEditorState=function setEditorState(e,n){e.isEmpty()&&t(38);var r=e;r._readOnly&&(r=_o(e),r._selection=e._selection?e._selection.clone():null),H(this);var o=this._pendingEditorState,i=this._updateTags,s=void 0!==n?n.tag:null;null===o||o.isEmpty()||(null!=s&&i.add(s),to(this)),this._pendingEditorState=r,this._dirtyType=2,this._dirtyElements.set("root",!1),this._compositionKey=null,null!=s&&i.add(s),this._updating||to(this);};_proto14.parseEditorState=function parseEditorState(t,e){return function(t,e,n){var r=po(),o=Fr,i=Kr,s=Rr,l=e._dirtyElements,c=e._dirtyLeaves,a=e._cloneNotNeeded,u=e._dirtyType;e._dirtyElements=new Map(),e._dirtyLeaves=new Set(),e._cloneNotNeeded=new Set(),e._dirtyType=0,Fr=r,Kr=!1,Rr=e,Mo(null);try{var _o43=e._nodes;Qr(t.root,_o43),n&&n(),r._readOnly=!0;}catch(t){t instanceof Error&&e._onError(t);}finally{e._dirtyElements=l,e._dirtyLeaves=c,e._cloneNotNeeded=a,e._dirtyType=u,Fr=o,Kr=i,Rr=s;}return r;}("string"==typeof t?JSON.parse(t):t,this,e);};_proto14.read=function read(t){return to(this),this.getEditorState().read(t,{editor:this});};_proto14.update=function update(t,e){!function(t,e,n){t._updating?t._updates.push([e,n]):ro(t,e,n);}(this,t,e);};_proto14.focus=function focus(t,e){if(e===void 0){e={};}var n=this._rootElement;null!==n&&(n.setAttribute("autocapitalize","off"),oo(this,function(){var r=kr(),o=ri();null!==r?r.dirty||ii(r.clone()):0!==o.getChildrenSize()&&("rootStart"===e.defaultSelection?o.selectStart():o.selectEnd()),wi("focus"),Di(function(){n.removeAttribute("autocapitalize"),t&&t();});}),null===this._pendingEditorState&&n.removeAttribute("autocapitalize"));};_proto14.blur=function blur(){var t=this._rootElement;null!==t&&t.blur();var e=Ji(this._window);null!==e&&e.removeAllRanges();};_proto14.isEditable=function isEditable(){return this._editable;};_proto14.setEditable=function setEditable(t){this._editable!==t&&(this._editable=t,eo("editable",this,!0,t));};_proto14.toJSON=function toJSON(){return{editorState:this._editorState.toJSON()};};return Oo;}();_Oo.version="0.38.2+prod.cjs";var bo=null;function Mo(t){bo=t;}var Ao=1;function wo(e,n){var r=Do(e,n);return void 0===r&&t(30,n),r;}function Do(t,e){return t._nodes.get(e);}var Po="function"==typeof queueMicrotask?queueMicrotask:function(t){Promise.resolve().then(t);};function Io(t){return fo(ti(t));}function Lo(t){var e=document.activeElement;if(!ji(e))return!1;var n=e.nodeName;return fo(ti(t))&&("INPUT"===n||"TEXTAREA"===n||"true"===e.contentEditable&&null==Bo(e));}function Fo(t,e,n){var r=t.getRootElement();try{return null!==r&&r.contains(e)&&r.contains(n)&&null!==e&&!Lo(e)&&Ko(e)===t;}catch(t){return!1;}}function Ro(t){return t instanceof _Oo;}function Ko(t){var e=t;for(;null!=e;){var _t164=Bo(e);if(Ro(_t164))return _t164;e=Mi(e);}return null;}function Bo(t){return t?t.__lexicalEditor:null;}function zo(t){return rr(t)||t.isToken();}function Wo(t){return zo(t)||t.isSegmented();}function $o(t){return Hi(t)&&3===t.nodeType;}function Uo(t){return Hi(t)&&9===t.nodeType;}function Jo(t){var e=t;for(;null!=e;){if($o(e))return e;e=e.firstChild;}return null;}function Yo(t,e,n){var r=w[e];if(null!==n&&(t&r)===(n&r))return t;var o=t^r;return"subscript"===e?o&=~w.superscript:"superscript"===e?o&=~w.subscript:"lowercase"===e?(o&=~w.uppercase,o&=~w.capitalize):"uppercase"===e?(o&=~w.lowercase,o&=~w.capitalize):"capitalize"===e&&(o&=~w.lowercase,o&=~w.uppercase),o;}function jo(t,e){var n=function(){var t=bo;return bo=null,t;}();if(null!=(e=e||n&&n.__key))return void(t.__key=e);Ur(),Jr();var r=jr(),o=Yr(),i=""+Ao++;o._nodeMap.set(i,t),co(t)?r._dirtyElements.set(i,!0):r._dirtyLeaves.add(i),r._cloneNotNeeded.add(i),r._dirtyType=1,t.__key=i;}function Ho(t){var e=t.getParent();if(null!==e){var _n77=t.getWritable(),_r58=e.getWritable(),_o44=t.getPreviousSibling(),_i23=t.getNextSibling(),_s16=null!==_i23?_i23.__key:null,_l1=null!==_o44?_o44.__key:null,_c9=null!==_o44?_o44.getWritable():null,_a9=null!==_i23?_i23.getWritable():null;null===_o44&&(_r58.__first=_s16),null===_i23&&(_r58.__last=_l1),null!==_c9&&(_c9.__next=_s16),null!==_a9&&(_a9.__prev=_l1),_n77.__prev=null,_n77.__next=null,_n77.__parent=null,_r58.__size--;}}function Vo(e){Jr(),kn(e)&&t(323,e.__key,e.__type);var n=e.getLatest(),r=n.__parent,o=Yr(),i=jr(),s=o._nodeMap,l=i._dirtyElements;null!==r&&function(t,e,n){var r=t;for(;null!==r;){if(n.has(r))return;var _t165=e.get(r);if(void 0===_t165)break;n.set(r,!1),r=_t165.__parent;}}(r,s,l);var c=n.__key;i._dirtyType=1,co(e)?l.set(c,!0):i._dirtyLeaves.add(c);}function Go(t){Ur();var e=jr(),n=e._compositionKey;if(t!==n){if(e._compositionKey=t,null!==n){var _t166=Xo(n);null!==_t166&&_t166.getWritable();}if(null!==t){var _e105=Xo(t);null!==_e105&&_e105.getWritable();}}}function qo(){if($r())return null;return jr()._compositionKey;}function Xo(t,e){var n=(e||Yr())._nodeMap.get(t);return void 0===n?null:n;}function Qo(t,e){var n=Zo(t,jr());return void 0!==n?Xo(n,e):null;}function Zo(t,e){return t["__lexicalKey_"+e._key];}function ti(t,e){var n=t;for(;null!=n;){var _t167=Qo(n,e);if(null!==_t167)return _t167;n=Mi(n);}return null;}function ei(t){var e=t._decorators,n=Object.assign({},e);return t._pendingDecorators=n,n;}function ni(t){return t.read(function(){return ri().getTextContent();});}function ri(){return oi(Yr());}function oi(t){return t._nodeMap.get("root");}function ii(t){Ur();var e=Yr();null!==t&&(t.dirty=!0,t.setCachedNodes(null)),e._selection=t;}function si(t){var e=jr(),n=function(t,e){var n=t;for(;null!=n;){var _t168=Zo(n,e);if(void 0!==_t168)return _t168;n=Mi(n);}return null;}(t,e);if(null===n){return t===e.getRootElement()?Xo("root"):null;}return Xo(n);}function li(t){return /[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(t);}function ci(t){var e=[];var n=t;for(;null!==n;)e.push(n),n=n._parentEditor;return e;}function ai(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5);}function ui(t){return $o(t)?t.nodeValue:null;}function fi(t,e,n){var r=Ji(Li(e));if(null===r)return;var o=r.anchorNode;var i=r.anchorOffset,s=r.focusOffset;if(null!==o){var _e106=ui(o);var _r59=ti(o);if(null!==_e106&&Zn(_r59)){if(_e106===v&&n){var _t169=n.length;_e106=n,i=_t169,s=_t169;}null!==_e106&&di(_r59,_e106,i,s,t);}}}function di(t,e,n,r,o){var i=t;if(i.isAttached()&&(o||!i.isDirty())){var _s17=i.isComposing();var _a0=e;(_s17||o)&&e[e.length-1]===v&&(_a0=e.slice(0,-1));var _u9=i.getTextContent();if(o||_a0!==_u9){if(""===_a0){if(Go(null),l||c||d)i.remove();else{var _t170=jr();setTimeout(function(){_t170.update(function(){i.isAttached()&&i.remove();});},20);}return;}var _e107=i.getParent(),_o45=Er(),_u0=i.getTextContentSize(),_f9=qo(),_h5=i.getKey();if(i.isToken()||null!==_f9&&_h5===_f9&&!_s17||ar(_o45)&&(null!==_e107&&!_e107.canInsertTextBefore()&&0===_o45.anchor.offset||_o45.anchor.key===t.__key&&0===_o45.anchor.offset&&!i.canInsertTextBefore()&&!_s17||_o45.focus.key===t.__key&&_o45.focus.offset===_u0&&!i.canInsertTextAfter()&&!_s17))return void i.markDirty();var _g6=kr();if(!ar(_g6)||null===n||null===r)return void hi(i,_a0,_g6);if(_g6.setTextNodeRange(i,n,i,r),i.isSegmented()){var _t171=Qn(i.getTextContent());i.replace(_t171),i=_t171;}hi(i,_a0,_g6);}}}function hi(t,e,n){if(t.setTextContent(e),ar(n)){var _e108=t.getKey();for(var _r60 of["anchor","focus"]){var _o46=n[_r60];"text"===_o46.type&&_o46.key===_e108&&(_o46.offset=vs(t,_o46.offset,"clamp"));}}}function gi(t,e,n){var r=e[n]||!1;return"any"===r||r===t[n];}function _i(t,e){return gi(t,e,"altKey")&&gi(t,e,"ctrlKey")&&gi(t,e,"shiftKey")&&gi(t,e,"metaKey");}function pi(t,e,n){return _i(t,n)&&t.key.toLowerCase()===e.toLowerCase();}var yi={ctrlKey:!o,metaKey:o},mi={altKey:o,ctrlKey:!o};function xi(t){return"Backspace"===t.key;}function Ci(t){return pi(t,"a",yi);}function Si(t,e){void 0===t.__lexicalClassNameCache&&(t.__lexicalClassNameCache={});var n=t.__lexicalClassNameCache,r=n[e];if(void 0!==r)return r;var o=t[e];if("string"==typeof o){var _t172=h(o);return n[e]=_t172,_t172;}return o;}function Ni(e,n,r,o,i){if(0===r.size)return;var s=o.__type,l=o.__key,c=n.get(s);void 0===c&&t(33,s);var a=c.klass;var u=e.get(a);void 0===u&&(u=new Map(),e.set(a,u));var f=u.get(l),d="destroyed"===f&&"created"===i;(void 0===f||d)&&u.set(l,d?"updated":i);}function Ti(t,e,n){var r=t.getParent();var o=n,i=t;return null!==r&&(e&&0===n?(o=i.getIndexWithinParent(),i=r):e||n!==i.getChildrenSize()||(o=i.getIndexWithinParent()+1,i=r)),i.getChildAtIndex(e?o-1:o);}function vi(t,e){var n=t.offset;if("element"===t.type){return Ti(t.getNode(),e,n);}{var _r61=t.getNode();if(e&&0===n||!e&&n===_r61.getTextContentSize()){var _t173=e?_r61.getPreviousSibling():_r61.getNextSibling();return null===_t173?Ti(_r61.getParentOrThrow(),e,_r61.getIndexWithinParent()+(e?0:1)):_t173;}}return null;}function ki(t){var e=Li(t).event,n=e&&e.inputType;return"insertFromPaste"===n||"insertFromPasteAsQuotation"===n;}function Ei(t,e,n){return function(t,e,n){var r=ci(t);for(var _o47=4;_o47>=0;_o47--){var _loop2=function _loop2(){var s=r[_i24],l=s._commands.get(e);if(void 0!==l){var _e109=l[_o47];if(void 0!==_e109){var _r62=Array.from(_e109),_o48=_r62.length;var _i25=!1;if(oo(s,function(){for(var _e110=0;_e110<_o48;_e110++)if(_r62[_e110](n,t))return void(_i25=!0);}),_i25)return{v:_i25};}}},_ret;for(var _i24=0;_i24<r.length;_i24++){_ret=_loop2();if(_ret)return _ret.v;}}return!1;}(t,e,n);}function Oi(t){return!go(t)&&!t.isLastChild()&&!t.isInline();}function bi(e,n){var r=e._keyToDOMMap.get(n);return void 0===r&&t(75,n),r;}function Mi(t){var e=t.assignedSlot||t.parentElement;return Vi(e)?e.host:e;}function Ai(t){return Uo(t)?t:ji(t)?t.ownerDocument:null;}function wi(t){Ur();jr()._updateTags.add(t);}function Di(t){Ur();jr()._deferred.push(t);}function Pi(t,e){var n=t.getParent();for(;null!==n;){if(n.is(e))return!0;n=n.getParent();}return!1;}function Ii(t){var e=Ai(t);return e?e.defaultView:null;}function Li(e){var n=e._window;return null===n&&t(78),n;}function Fi(t){var e=t.getParentOrThrow();for(;null!==e;){if(Ri(e))return e;e=e.getParentOrThrow();}return e;}function Ri(t){return go(t)||co(t)&&t.isShadowRoot();}function Ki(t){var e=t.constructor.clone(t);return jo(e,null),e.afterCloneFrom(t),e;}function Bi(e){var n=jr(),r=e.getType(),o=Do(n,r);void 0===o&&t(200,e.constructor.name,r);var i=o.replace,s=o.replaceWithKlass;if(null!==i){var _n78=i(e),_o49=_n78.constructor;return null!==s?_n78 instanceof s||t(201,s.name,s.getType(),_o49.name,_o49.getType(),e.constructor.name,r):_n78 instanceof e.constructor&&_o49!==e.constructor||t(202,_o49.name,_o49.getType(),e.constructor.name,r),_n78.__key===e.__key&&t(203,e.constructor.name,r,_o49.name,_o49.getType()),_n78;}return e;}function zi(e,n){!go(e.getParent())||co(n)||fo(n)||t(99);}function Wi(e){var n=Xo(e);return null===n&&t(63,e),n;}function $i(t){return(fo(t)||co(t)&&!t.canBeEmpty())&&!t.isInline();}function Ui(t,e,n){n.style.removeProperty("caret-color"),e._blockCursorElement=null;var r=t.parentElement;null!==r&&r.removeChild(t);}function Ji(t){return n?(t||window).getSelection():null;}function Yi(t){var e=Ii(t);return e?e.getSelection():null;}function ji(t){return Hi(t)&&1===t.nodeType;}function Hi(t){return"object"==typeof t&&null!==t&&"nodeType"in t&&"number"==typeof t.nodeType;}function Vi(t){return Hi(t)&&11===t.nodeType;}function Gi(t){var e=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return null!==t.nodeName.match(e);}function qi(t){var e=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return null!==t.nodeName.match(e);}function Xi(t){if(fo(t)&&!t.isInline())return!0;if(!co(t)||Ri(t))return!1;var e=t.getFirstChild(),n=null===e||Ln(e)||Zn(e)||e.isInline();return!t.isInline()&&!1!==t.canBeEmpty()&&n;}function Qi(){return jr();}var Zi=new WeakMap(),ts=new Map();function es(e){if(!e._readOnly&&e.isEmpty())return ts;e._readOnly||t(192);var n=Zi.get(e);return n||(n=function(t){var e=new Map();for(var _ref22 of t._nodeMap){var _n79=_ref22[0];var _r63=_ref22[1];{var _t174=_r63.__type;var _o50=e.get(_t174);_o50||(_o50=new Map(),e.set(_t174,_o50)),_o50.set(_n79,_r63);}}return e;}(e),Zi.set(e,n)),n;}function ns(t){var e=t.constructor.clone(t);return e.afterCloneFrom(t),e;}function rs(t,e){var n=parseInt(t.style.paddingInlineStart,10)||0,r=Math.round(n/40);e.setIndent(r);}function os(t){return!0===t.__lexicalUnmanaged;}function is(t,e){return function(t,e){return Object.prototype.hasOwnProperty.call(t,e);}(t,e)&&t[e]!==_En5[e];}function ss(e){var n=R in e.prototype?e.prototype[R]():void 0,r=function(e){if(!(e===_En5||e.prototype instanceof _En5)){var _n80="<unknown>",_r64="<unknown>";try{_n80=e.getType();}catch(t){}try{_Oo.version&&(_r64=JSON.parse(_Oo.version));}catch(t){}t(290,e.name,_n80,_r64);}return e===_uo||e===_lo4||e===_En5;}(e),o=!r&&is(e,"getType")?e.getType():void 0;var i,s=o;if(n)if(o)i=n[o];else for(var _ref24 of Object.entries(n)){var _t175=_ref24[0];var _e111=_ref24[1];s=_t175,i=_e111;}if(!r&&s&&(is(e,"getType")||(e.getType=function(){return s;}),is(e,"clone")||(e.clone=function(t){return Mo(t),new e();}),is(e,"importJSON")||(e.importJSON=i&&i.$importJSON||function(t){return new e().updateFromJSON(t);}),!is(e,"importDOM")&&i)){var _i26=i,_t176=_i26.importDOM;_t176&&(e.importDOM=function(){return _t176;});}return{ownNodeConfig:i,ownNodeType:s};}var ls=function ls(t,e){var n=t;for(;null!=n&&!go(n);){if(e(n))return n;n=n.getParent();}return null;},cs={next:"previous",previous:"next"};var _as4=function(){function as(t){this.origin=t;}var _proto15=as.prototype;_proto15[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return Is({hasNext:ys,initial:this.getAdjacentCaret(),map:function map(t){return t;},step:function step(t){return t.getAdjacentCaret();}});};_proto15.getAdjacentCaret=function getAdjacentCaret(){return Ns(this.getNodeAtCaret(),this.direction);};_proto15.getSiblingCaret=function getSiblingCaret(){return Ns(this.origin,this.direction);};_proto15.remove=function remove(){var t=this.getNodeAtCaret();return t&&t.remove(),this;};_proto15.replaceOrInsert=function replaceOrInsert(t,e){var n=this.getNodeAtCaret();return t.is(this.origin)||t.is(n)||(null===n?this.insert(t):n.replace(t,e)),this;};_proto15.splice=function splice(e,n,r){if(r===void 0){r="next";}var o=r===this.direction?n:Array.from(n).reverse();var i=this;var s=this.getParentAtCaret(),l=new Map();for(var _t177=i.getAdjacentCaret();null!==_t177&&l.size<e;_t177=_t177.getAdjacentCaret()){var _e112=_t177.origin.getWritable();l.set(_e112.getKey(),_e112);}for(var _e113 of o){if(l.size>0){var _n81=i.getNodeAtCaret();if(_n81){if(l["delete"](_n81.getKey()),l["delete"](_e113.getKey()),_n81.is(_e113)||i.origin.is(_e113));else{var _t178=_e113.getParent();_t178&&_t178.is(s)&&_e113.remove(),_n81.replace(_e113);}}else null===_n81&&t(263,Array.from(l).join(" "));}else i.insert(_e113);i=Ns(_e113,this.direction);}for(var _t179 of l.values())_t179.remove();return this;};return as;}();var _us3=function(_as){function us(){var _this5;for(var _len7=arguments.length,args=new Array(_len7),_key7=0;_key7<_len7;_key7++){args[_key7]=arguments[_key7];}return(_this5=_as.call.apply(_as,[this].concat(args))||this,_this5.type="child",babelHelpers.assertThisInitialized(_this5))||babelHelpers.assertThisInitialized(_this5);}babelHelpers.inheritsLoose(us,_as);var _proto16=us.prototype;_proto16.getLatest=function getLatest(){var t=this.origin.getLatest();return t===this.origin?this:Es(t,this.direction);};_proto16.getParentCaret=function getParentCaret(t){if(t===void 0){t="root";}return Ns(hs(this.getParentAtCaret(),t),this.direction);};_proto16.getFlipped=function getFlipped(){var t=ds(this.direction);return Ns(this.getNodeAtCaret(),t)||Es(this.origin,t);};_proto16.getParentAtCaret=function getParentAtCaret(){return this.origin;};_proto16.getChildCaret=function getChildCaret(){return this;};_proto16.isSameNodeCaret=function isSameNodeCaret(t){return t instanceof us&&this.direction===t.direction&&this.origin.is(t.origin);};_proto16.isSamePointCaret=function isSamePointCaret(t){return this.isSameNodeCaret(t);};return us;}(_as4);var fs={root:go,shadowRoot:Ri};function ds(t){return cs[t];}function hs(t,e){if(e===void 0){e="root";}return fs[e](t)?null:t;}var _gs3=function(_as2){function gs(){var _this6;for(var _len8=arguments.length,args=new Array(_len8),_key8=0;_key8<_len8;_key8++){args[_key8]=arguments[_key8];}return(_this6=_as2.call.apply(_as2,[this].concat(args))||this,_this6.type="sibling",babelHelpers.assertThisInitialized(_this6))||babelHelpers.assertThisInitialized(_this6);}babelHelpers.inheritsLoose(gs,_as2);var _proto17=gs.prototype;_proto17.getLatest=function getLatest(){var t=this.origin.getLatest();return t===this.origin?this:Ns(t,this.direction);};_proto17.getSiblingCaret=function getSiblingCaret(){return this;};_proto17.getParentAtCaret=function getParentAtCaret(){return this.origin.getParent();};_proto17.getChildCaret=function getChildCaret(){return co(this.origin)?Es(this.origin,this.direction):null;};_proto17.getParentCaret=function getParentCaret(t){if(t===void 0){t="root";}return Ns(hs(this.getParentAtCaret(),t),this.direction);};_proto17.getFlipped=function getFlipped(){var t=ds(this.direction);return Ns(this.getNodeAtCaret(),t)||Es(this.origin.getParentOrThrow(),t);};_proto17.isSamePointCaret=function isSamePointCaret(t){return t instanceof gs&&this.direction===t.direction&&this.origin.is(t.origin);};_proto17.isSameNodeCaret=function isSameNodeCaret(t){return(t instanceof gs||t instanceof _s20)&&this.direction===t.direction&&this.origin.is(t.origin);};return gs;}(_as4);var _s20=function(_as3){function _s(t,e){var _this7;_this7=_as3.call(this,t)||this,_this7.type="text",_this7.offset=e;return _this7;}babelHelpers.inheritsLoose(_s,_as3);var _proto18=_s.prototype;_proto18.getLatest=function getLatest(){var t=this.origin.getLatest();return t===this.origin?this:Ts(t,this.direction,this.offset);};_proto18.getParentAtCaret=function getParentAtCaret(){return this.origin.getParent();};_proto18.getChildCaret=function getChildCaret(){return null;};_proto18.getParentCaret=function getParentCaret(t){if(t===void 0){t="root";}return Ns(hs(this.getParentAtCaret(),t),this.direction);};_proto18.getFlipped=function getFlipped(){return Ts(this.origin,ds(this.direction),this.offset);};_proto18.isSamePointCaret=function isSamePointCaret(t){return t instanceof _s&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset;};_proto18.isSameNodeCaret=function isSameNodeCaret(t){return(t instanceof _gs3||t instanceof _s)&&this.direction===t.direction&&this.origin.is(t.origin);};_proto18.getSiblingCaret=function getSiblingCaret(){return Ns(this.origin,this.direction);};return _s;}(_as4);function ps(t){return t instanceof _s20;}function ys(t){return t instanceof _gs3;}function ms(t){return t instanceof _us3;}var xs={next:function(_s2){function _class(){var _this8;for(var _len9=arguments.length,args=new Array(_len9),_key9=0;_key9<_len9;_key9++){args[_key9]=arguments[_key9];}return(_this8=_s2.call.apply(_s2,[this].concat(args))||this,_this8.direction="next",babelHelpers.assertThisInitialized(_this8))||babelHelpers.assertThisInitialized(_this8);}babelHelpers.inheritsLoose(_class,_s2);var _proto19=_class.prototype;_proto19.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getNextSibling();};_proto19.insert=function insert(t){return this.origin.insertAfter(t),this;};return _class;}(_s20),previous:function(_s3){function _class3(){var _this9;for(var _len0=arguments.length,args=new Array(_len0),_key0=0;_key0<_len0;_key0++){args[_key0]=arguments[_key0];}return(_this9=_s3.call.apply(_s3,[this].concat(args))||this,_this9.direction="previous",babelHelpers.assertThisInitialized(_this9))||babelHelpers.assertThisInitialized(_this9);}babelHelpers.inheritsLoose(_class3,_s3);var _proto20=_class3.prototype;_proto20.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getPreviousSibling();};_proto20.insert=function insert(t){return this.origin.insertBefore(t),this;};return _class3;}(_s20)},Cs={next:function(_gs){function _class5(){var _this0;for(var _len1=arguments.length,args=new Array(_len1),_key1=0;_key1<_len1;_key1++){args[_key1]=arguments[_key1];}return(_this0=_gs.call.apply(_gs,[this].concat(args))||this,_this0.direction="next",babelHelpers.assertThisInitialized(_this0))||babelHelpers.assertThisInitialized(_this0);}babelHelpers.inheritsLoose(_class5,_gs);var _proto21=_class5.prototype;_proto21.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getNextSibling();};_proto21.insert=function insert(t){return this.origin.insertAfter(t),this;};return _class5;}(_gs3),previous:function(_gs2){function _class7(){var _this1;for(var _len10=arguments.length,args=new Array(_len10),_key10=0;_key10<_len10;_key10++){args[_key10]=arguments[_key10];}return(_this1=_gs2.call.apply(_gs2,[this].concat(args))||this,_this1.direction="previous",babelHelpers.assertThisInitialized(_this1))||babelHelpers.assertThisInitialized(_this1);}babelHelpers.inheritsLoose(_class7,_gs2);var _proto22=_class7.prototype;_proto22.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getPreviousSibling();};_proto22.insert=function insert(t){return this.origin.insertBefore(t),this;};return _class7;}(_gs3)},Ss={next:function(_us){function _class9(){var _this10;for(var _len11=arguments.length,args=new Array(_len11),_key11=0;_key11<_len11;_key11++){args[_key11]=arguments[_key11];}return(_this10=_us.call.apply(_us,[this].concat(args))||this,_this10.direction="next",babelHelpers.assertThisInitialized(_this10))||babelHelpers.assertThisInitialized(_this10);}babelHelpers.inheritsLoose(_class9,_us);var _proto23=_class9.prototype;_proto23.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getFirstChild();};_proto23.insert=function insert(t){return this.origin.splice(0,0,[t]),this;};return _class9;}(_us3),previous:function(_us2){function _class1(){var _this11;for(var _len12=arguments.length,args=new Array(_len12),_key12=0;_key12<_len12;_key12++){args[_key12]=arguments[_key12];}return(_this11=_us2.call.apply(_us2,[this].concat(args))||this,_this11.direction="previous",babelHelpers.assertThisInitialized(_this11))||babelHelpers.assertThisInitialized(_this11);}babelHelpers.inheritsLoose(_class1,_us2);var _proto24=_class1.prototype;_proto24.getNodeAtCaret=function getNodeAtCaret(){return this.origin.getLastChild();};_proto24.insert=function insert(t){return this.origin.splice(this.origin.getChildrenSize(),0,[t]),this;};return _class1;}(_us3)};function Ns(t,e){return t?new Cs[e](t):null;}function Ts(t,e,n){return t?new xs[e](t,vs(t,n)):null;}function vs(t,n,r){if(r===void 0){r="error";}var o=t.getTextContentSize();var i="next"===n?o:"previous"===n?0:n;return(i<0||i>o)&&("clamp"!==r&&e(284,String(n),String(o),t.getKey()),i=i<0?0:o),i;}function ks(t,e){return new _As(t,e);}function Es(t,e){return co(t)?new Ss[e](t):null;}function Os(t){return t&&t.getChildCaret()||t;}function bs(t){return t&&Os(t.getAdjacentCaret());}var _Ms=function(){function Ms(t,e,n){this.type="node-caret-range";this.anchor=t,this.focus=e,this.direction=n;}var _proto25=Ms.prototype;_proto25.getLatest=function getLatest(){var t=this.anchor.getLatest(),e=this.focus.getLatest();return t===this.anchor&&e===this.focus?this:new Ms(t,e,this.direction);};_proto25.isCollapsed=function isCollapsed(){return this.anchor.isSamePointCaret(this.focus);};_proto25.getTextSlices=function getTextSlices(){var _this14=this;var t=function t(_t180){var e=_this14[_t180].getLatest();return ps(e)?function(t,e){var n=t.direction,r=t.origin,o=vs(r,"focus"===e?ds(n):n);return ks(t,o-t.offset);}(e,_t180):null;},e=t("anchor"),n=t("focus");if(e&&n){var _t181=e.caret,_r65=n.caret;if(_t181.isSameNodeCaret(_r65))return[ks(_t181,_r65.offset-_t181.offset),null];}return[e,n];};_proto25.iterNodeCarets=function iterNodeCarets(t){if(t===void 0){t="root";}var e=ps(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),n=this.focus.getLatest(),r=ps(n),o=function o(e){return e.isSameNodeCaret(n)?null:bs(e)||e.getParentCaret(t);};return Is({hasNext:function hasNext(t){return null!==t&&!(r&&n.isSameNodeCaret(t));},initial:e.isSameNodeCaret(n)?null:o(e),map:function map(t){return t;},step:o});};_proto25[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return this.iterNodeCarets("root");};return Ms;}();var _As=function(){function As(t,e){this.type="slice";this.caret=t,this.distance=e;}var _proto26=As.prototype;_proto26.getSliceIndices=function getSliceIndices(){var t=this.distance,e=this.caret.offset,n=e+t;return n<e?[n,e]:[e,n];};_proto26.getTextContent=function getTextContent(){var _this$getSliceIndices=this.getSliceIndices(),t=_this$getSliceIndices[0],e=_this$getSliceIndices[1];return this.caret.origin.getTextContent().slice(t,e);};_proto26.getTextContentSize=function getTextContentSize(){return Math.abs(this.distance);};_proto26.removeTextSlice=function removeTextSlice(){var _this$caret=this.caret,t=_this$caret.origin,e=_this$caret.direction,_this$getSliceIndices2=this.getSliceIndices(),n=_this$getSliceIndices2[0],r=_this$getSliceIndices2[1],o=t.getTextContent();return Ts(t.setTextContent(o.slice(0,n)+o.slice(r)),e,n);};return As;}();function ws(t){return Ps(t,Ns(ri(),t.direction));}function Ds(t){return Ps(t,t);}function Ps(e,n){return e.direction!==n.direction&&t(265),new _Ms(e,n,e.direction);}function Is(t){var _ref25;var e=t.initial,n=t.hasNext,r=t.step,o=t.map;var i=e;return _ref25={},_ref25[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]=function(){return this;},_ref25.next=function next(){if(!n(i))return{done:!0,value:void 0};var t={done:!1,value:o(i)};return i=r(i),t;},_ref25;}function Ls(e,n){var r=Bs(e.origin,n.origin);switch(null===r&&t(275,e.origin.getKey(),n.origin.getKey()),r.type){case"same":{var _t182="text"===e.type,_r66="text"===n.type;return _t182&&_r66?function(t,e){return Math.sign(t-e);}(e.offset,n.offset):e.type===n.type?0:_t182?-1:_r66?1:"child"===e.type?-1:1;}case"ancestor":return"child"===e.type?-1:1;case"descendant":return"child"===n.type?1:-1;case"branch":return Fs(r);}}function Fs(t){var e=t.a,n=t.b,r=e.__key,o=n.__key;var i=e,s=n;for(;i&&s;i=i.getNextSibling(),s=s.getNextSibling()){if(i.__key===o)return-1;if(s.__key===r)return 1;}return null===i?1:-1;}function Rs(t,e){return e.is(t);}function Ks(t){return co(t)?[t.getLatest(),null]:[t.getParent(),t.getLatest()];}function Bs(e,n){if(e.is(n))return{commonAncestor:e,type:"same"};var r=new Map();for(var _Ks=Ks(e),_t183=_Ks[0],_n82=_Ks[1];_t183;_n82=_t183,_t183=_t183.getParent())r.set(_t183,_n82);for(var _Ks2=Ks(n),_o51=_Ks2[0],_i27=_Ks2[1];_o51;_i27=_o51,_o51=_o51.getParent()){var _s18=r.get(_o51);if(void 0!==_s18)return null===_s18?(Rs(e,_o51)||t(276),{commonAncestor:_o51,type:"ancestor"}):null===_i27?(Rs(n,_o51)||t(277),{commonAncestor:_o51,type:"descendant"}):((co(_s18)||Rs(e,_s18))&&(co(_i27)||Rs(n,_i27))&&_o51.is(_s18.getParent())&&_o51.is(_i27.getParent())||t(278),{a:_s18,b:_i27,commonAncestor:_o51,type:"branch"});}return null;}function zs(e,n){var r=e.type,o=e.key,i=e.offset,s=Wi(e.key);return"text"===r?(Zn(s)||t(266,s.getType(),o),Ts(s,n,i)):(co(s)||t(267,s.getType(),o),Zs(s,e.offset,n));}function Ws(e,n){var r=n.origin,o=n.direction,i="next"===o;ps(n)?e.set(r.getKey(),n.offset,"text"):ys(n)?Zn(r)?e.set(r.getKey(),vs(r,o),"text"):e.set(r.getParentOrThrow().getKey(),r.getIndexWithinParent()+(i?1:0),"element"):(ms(n)&&co(r)||t(268),e.set(r.getKey(),i?0:r.getChildrenSize(),"element"));}function $s(t){var e=kr(),n=ar(e)?e:Nr();return Us(n,t),ii(n),n;}function Us(t,e){Ws(t.anchor,e.anchor),Ws(t.focus,e.focus);}function Js(t){var e=t.anchor,n=t.focus,r=zs(e,"next"),o=zs(n,"next"),i=Ls(r,o)<=0?"next":"previous";return Ps(Xs(r,i),Xs(o,i));}function Ys(t){var e=t.direction,n=t.origin,r=Ns(n,ds(e)).getNodeAtCaret();return r?Ns(r,e):Es(n.getParentOrThrow(),e);}function js(t,e){if(e===void 0){e="root";}var n=[t];for(var _r67=ms(t)?t.getParentCaret(e):t.getSiblingCaret();null!==_r67;_r67=_r67.getParentCaret(e))n.push(Ys(_r67));return n;}function Hs(t){return!!t&&t.origin.isAttached();}function Vs(e,n){if(n===void 0){n="removeEmptySlices";}if(e.isCollapsed())return e;var r="root",o="next";var i=n;var s=Qs(e,o),l=js(s.anchor,r),c=js(s.focus.getFlipped(),r),a=new Set(),u=[];for(var _t184 of s.iterNodeCarets(r))if(ms(_t184))a.add(_t184.origin.getKey());else if(ys(_t184)){var _e114=_t184.origin;co(_e114)&&!a.has(_e114.getKey())||u.push(_e114);}for(var _t185 of u)_t185.remove();for(var _t186 of s.getTextSlices()){if(!_t186)continue;var _e115=_t186.caret.origin,_n83=_e115.getTextContentSize(),_r68=Ys(Ns(_e115,o)),_s19=_e115.getMode();if(Math.abs(_t186.distance)===_n83&&"removeEmptySlices"===i||"token"===_s19&&0!==_t186.distance)_r68.remove();else if(0!==_t186.distance){i="removeEmptySlices";var _e116=_t186.removeTextSlice();var _n84=_t186.caret.origin;if("segmented"===_s19){var _t187=_e116.origin,_n85=Qn(_t187.getTextContent()).setStyle(_t187.getStyle()).setFormat(_t187.getFormat());_r68.replaceOrInsert(_n85),_e116=Ts(_n85,o,_e116.offset);}_n84.is(l[0].origin)&&(l[0]=_e116),_n84.is(c[0].origin)&&(c[0]=_e116.getFlipped());}}var f,d;for(var _t188 of l)if(Hs(_t188)){f=Gs(_t188);break;}for(var _t189 of c)if(Hs(_t189)){d=Gs(_t189);break;}var h=function(t,e,n){if(!t||!e)return null;var r=t.getParentAtCaret(),o=e.getParentAtCaret();if(!r||!o)return null;var i=r.getParents().reverse();i.push(r);var s=o.getParents().reverse();s.push(o);var l=Math.min(i.length,s.length);var c;for(c=0;c<l&&i[c]===s[c];c++);var a=function a(t,e){var n;for(var _r69=c;_r69<t.length;_r69++){var _o52=t[_r69];if(Ri(_o52))return;!n&&e(_o52)&&(n=_o52);}return n;},u=a(i,Xi),f=u&&a(s,function(t){return n.has(t.getKey())&&Xi(t);});return u&&f?[u,f]:null;}(f,d,a);if(h){var _t190=h[0],_e117=h[1];Es(_t190,"previous").splice(0,_e117.getChildren()),_e117.remove();}var g=[f,d].concat(l,c).find(Hs);if(g){return Ds(Xs(Gs(g),e.direction));}t(269,JSON.stringify(l.map(function(t){return t.origin.__key;})));}function Gs(t){var e=function(t){var e=t;for(;ms(e);){var _t191=bs(e);if(!ms(_t191))break;e=_t191;}return e;}(t.getLatest()),n=e.direction;if(Zn(e.origin))return ps(e)?e:Ts(e.origin,n,n);var r=e.getAdjacentCaret();return ys(r)&&Zn(r.origin)?Ts(r.origin,n,ds(n)):e;}function qs(t){return ps(t)&&t.offset!==vs(t.origin,t.direction);}function Xs(t,e){return t.direction===e?t:t.getFlipped();}function Qs(t,e){return t.direction===e?t:Ps(Xs(t.focus,e),Xs(t.anchor,e));}function Zs(t,e,n){var r=Es(t,"next");for(var _t192=0;_t192<e;_t192++){var _t193=r.getAdjacentCaret();if(null===_t193)break;r=_t193;}return Xs(r,n);}function tl(e){var n=e.origin,r=e.offset,o=e.direction;if(r===vs(n,o))return e.getSiblingCaret();if(r===vs(n,ds(o)))return Ys(e.getSiblingCaret());var _n$splitText2=n.splitText(r),i=_n$splitText2[0];return Zn(i)||t(281),Xs(Ns(i,"next"),o);}function el(t,e){return!0;}exports.$addUpdateTag=wi,exports.$applyNodeReplacement=Bi,exports.$caretFromPoint=zs,exports.$caretRangeFromSelection=Js,exports.$cloneWithProperties=ns,exports.$cloneWithPropertiesEphemeral=function(t){return(e=ns(t))[vn]=!0,e;var e;},exports.$comparePointCaretNext=Ls,exports.$copyNode=Ki,exports.$create=function(t){var e=Qi();return Ur(),new(e.resolveRegisteredNodeAfterReplacements(e.getRegisteredNode(t)).klass)();},exports.$createLineBreakNode=In,exports.$createNodeSelection=Tr,exports.$createParagraphNode=No,exports.$createPoint=ir,exports.$createRangeSelection=Nr,exports.$createRangeSelectionFromDom=function(t,e){return vr(null,t,e,null);},exports.$createTabNode=nr,exports.$createTextNode=Qn,exports.$extendCaretToRange=ws,exports.$findMatchingParent=ls,exports.$getAdjacentChildCaret=bs,exports.$getAdjacentNode=vi,exports.$getAdjacentSiblingOrParentSiblingCaret=function(t,e){if(e===void 0){e="root";}var n=0,r=t,o=bs(r);for(;null===o;){if(n--,o=r.getParentCaret(e),!o)return null;r=o,o=bs(r);}return o&&[o,n];},exports.$getCaretInDirection=Xs,exports.$getCaretRange=Ps,exports.$getCaretRangeInDirection=Qs,exports.$getCharacterOffsets=hr,exports.$getChildCaret=Es,exports.$getChildCaretAtIndex=Zs,exports.$getChildCaretOrSelf=Os,exports.$getCollapsedCaretRange=Ds,exports.$getCommonAncestor=Bs,exports.$getCommonAncestorResultBranchOrder=Fs,exports.$getEditor=Qi,exports.$getNearestNodeFromDOMNode=ti,exports.$getNearestRootOrShadowRoot=Fi,exports.$getNodeByKey=Xo,exports.$getNodeByKeyOrThrow=Wi,exports.$getNodeFromDOMNode=Qo,exports.$getPreviousSelection=Er,exports.$getRoot=ri,exports.$getSelection=kr,exports.$getSiblingCaret=Ns,exports.$getState=q,exports.$getStateChange=function(t,e,n){var r=q(t,n,"direct"),o=q(e,n,"direct");return n.isEqual(r,o)?null:[r,o];},exports.$getTextContent=function(){var t=kr();return null===t?"":t.getTextContent();},exports.$getTextNodeOffset=vs,exports.$getTextPointCaret=Ts,exports.$getTextPointCaretSlice=ks,exports.$getWritableNodeState=Z,exports.$hasAncestor=Pi,exports.$hasUpdateTag=function(t){return jr()._updateTags.has(t);},exports.$insertNodes=function(t){var e=kr()||Er();null===e&&(e=ri().selectEnd()),e.insertNodes(t);},exports.$isBlockElementNode=function(t){return co(t)&&!t.isInline();},exports.$isChildCaret=ms,exports.$isDecoratorNode=fo,exports.$isEditorState=function(t){return t instanceof _mo;},exports.$isElementNode=co,exports.$isExtendableTextPointCaret=qs,exports.$isInlineElementOrDecoratorNode=function(t){return co(t)&&t.isInline()||fo(t)&&t.isInline();},exports.$isLeafNode=function(t){return Zn(t)||Ln(t)||fo(t);},exports.$isLineBreakNode=Ln,exports.$isNodeCaret=function(t){return t instanceof _as4;},exports.$isNodeSelection=fr,exports.$isParagraphNode=To,exports.$isRangeSelection=ar,exports.$isRootNode=go,exports.$isRootOrShadowRoot=Ri,exports.$isSiblingCaret=ys,exports.$isTabNode=rr,exports.$isTextNode=Zn,exports.$isTextPointCaret=ps,exports.$isTextPointCaretSlice=function(t){return t instanceof _As;},exports.$isTokenOrSegmented=Wo,exports.$isTokenOrTab=zo,exports.$nodesOfType=function(t){var e=t.getType(),n=Yr();if(n._readOnly){var _t194=es(n).get(e);return _t194?Array.from(_t194.values()):[];}var r=n._nodeMap,o=[];for(var _ref27 of r){var _n86=_ref27[1];_n86 instanceof t&&_n86.__type===e&&_n86.isAttached()&&o.push(_n86);}return o;},exports.$normalizeCaret=Gs,exports.$normalizeSelection__EXPERIMENTAL=at,exports.$onUpdate=Di,exports.$parseSerializedNode=function(t){return Qr(t,jr()._nodes);},exports.$removeTextFromCaretRange=Vs,exports.$rewindSiblingCaret=Ys,exports.$selectAll=function(t){var e=ri();if(ar(t)){var _e118=t.anchor,_n87=t.focus,_r70=_e118.getNode().getTopLevelElementOrThrow().getParentOrThrow();return _e118.set(_r70.getKey(),0,"element"),_n87.set(_r70.getKey(),_r70.getChildrenSize(),"element"),at(t),t;}{var _t195=e.select(0,e.getChildrenSize());return ii(at(_t195)),_t195;}},exports.$setCompositionKey=Go,exports.$setPointFromCaret=Ws,exports.$setSelection=ii,exports.$setSelectionFromCaretRange=$s,exports.$setState=function(t,e,n){var r;if(Ur(),"function"==typeof n){var _o53=t.getLatest(),_i28=q(_o53,e);if(r=n(_i28),e.isEqual(_i28,r))return _o53;}else r=n;var o=t.getWritable();return Z(o).updateFromKnown(e,r),o;},exports.$splitAtPointCaretNext=function(t,_temp){var _ref28=_temp===void 0?{}:_temp,_ref28$$copyElementNo=_ref28.$copyElementNode,e=_ref28$$copyElementNo===void 0?Ki:_ref28$$copyElementNo,_ref28$$splitTextPoin=_ref28.$splitTextPointCaretNext,n=_ref28$$splitTextPoin===void 0?tl:_ref28$$splitTextPoin,_ref28$rootMode=_ref28.rootMode,r=_ref28$rootMode===void 0?"shadowRoot":_ref28$rootMode,_ref28$$shouldSplit=_ref28.$shouldSplit,o=_ref28$$shouldSplit===void 0?el:_ref28$$shouldSplit;if(ps(t))return n(t);var i=t.getParentCaret(r);if(i){var _n88=i.origin;if(ms(t)&&(!_n88.canBeEmpty()||!o(_n88,"first")))return Ys(i);var _r71=function(t){var e=[];for(var _n89=t.getAdjacentCaret();_n89;_n89=_n89.getAdjacentCaret())e.push(_n89.origin);return e;}(t);(_r71.length>0||_n88.canBeEmpty()&&o(_n88,"last"))&&i.insert(e(_n88).splice(0,0,_r71));}return i;},exports.$splitNode=function(e,n){var r=e.getChildAtIndex(n);null==r&&(r=e),Ri(e)&&t(102);var _o56=function o(e){var n=e.getParentOrThrow(),i=Ri(n),s=e!==r||i?Ki(e):e;if(i)return co(e)&&co(s)||t(133),e.insertAfter(s),[e,s,s];{var _o55=_o56(n),_t196=_o55[0],_r72=_o55[1],_i29=_o55[2],_l10=e.getNextSiblings();return _i29.append.apply(_i29,[s].concat(_l10)),[_t196,_r72,s];}},_o54=_o56(r),i=_o54[0],s=_o54[1];return[i,s];},exports.$updateRangeSelectionFromCaretRange=Us,exports.ArtificialNode__DO_NOT_USE=_xo,exports.BEFORE_INPUT_COMMAND=Gt,exports.BLUR_COMMAND=Be,exports.CAN_REDO_COMMAND=Fe,exports.CAN_UNDO_COMMAND=Re,exports.CLEAR_EDITOR_COMMAND=Ie,exports.CLEAR_HISTORY_COMMAND=Le,exports.CLICK_COMMAND=Vt,exports.COLLABORATION_TAG=bn,exports.COMMAND_PRIORITY_CRITICAL=4,exports.COMMAND_PRIORITY_EDITOR=vo,exports.COMMAND_PRIORITY_HIGH=3,exports.COMMAND_PRIORITY_LOW=1,exports.COMMAND_PRIORITY_NORMAL=2,exports.COMPOSITION_END_COMMAND=Qt,exports.COMPOSITION_START_COMMAND=Xt,exports.CONTROLLED_TEXT_INSERTION_COMMAND=ne,exports.COPY_COMMAND=we,exports.CUT_COMMAND=De,exports.DELETE_CHARACTER_COMMAND=Zt,exports.DELETE_LINE_COMMAND=se,exports.DELETE_WORD_COMMAND=ie,exports.DRAGEND_COMMAND=Ae,exports.DRAGOVER_COMMAND=Me,exports.DRAGSTART_COMMAND=be,exports.DROP_COMMAND=Ee,exports.DecoratorNode=_uo,exports.ElementNode=_lo4,exports.FOCUS_COMMAND=Ke,exports.FORMAT_ELEMENT_COMMAND=Oe,exports.FORMAT_TEXT_COMMAND=le,exports.HISTORIC_TAG="historic",exports.HISTORY_MERGE_TAG=On,exports.HISTORY_PUSH_TAG="history-push",exports.INDENT_CONTENT_COMMAND=ve,exports.INPUT_COMMAND=qt,exports.INSERT_LINE_BREAK_COMMAND=te,exports.INSERT_PARAGRAPH_COMMAND=ee,exports.INSERT_TAB_COMMAND=Te,exports.INTERNAL_$isBlock=Xi,exports.IS_ALL_FORMATTING=2047,exports.IS_BOLD=1,exports.IS_CODE=16,exports.IS_HIGHLIGHT=y,exports.IS_ITALIC=2,exports.IS_STRIKETHROUGH=4,exports.IS_SUBSCRIPT=32,exports.IS_SUPERSCRIPT=64,exports.IS_UNDERLINE=8,exports.KEY_ARROW_DOWN_COMMAND=pe,exports.KEY_ARROW_LEFT_COMMAND=he,exports.KEY_ARROW_RIGHT_COMMAND=fe,exports.KEY_ARROW_UP_COMMAND=_e,exports.KEY_BACKSPACE_COMMAND=xe,exports.KEY_DELETE_COMMAND=Se,exports.KEY_DOWN_COMMAND=ue,exports.KEY_ENTER_COMMAND=ye,exports.KEY_ESCAPE_COMMAND=Ce,exports.KEY_MODIFIER_COMMAND=ze,exports.KEY_SPACE_COMMAND=me,exports.KEY_TAB_COMMAND=Ne,exports.LineBreakNode=_Dn,exports.MOVE_TO_END=de,exports.MOVE_TO_START=ge,exports.NODE_STATE_KEY="$",exports.OUTDENT_CONTENT_COMMAND=ke,exports.PASTE_COMMAND=re,exports.PASTE_TAG="paste",exports.ParagraphNode=_Co,exports.REDO_COMMAND=ae,exports.REMOVE_TEXT_COMMAND=oe,exports.RootNode=_ho,exports.SELECTION_CHANGE_COMMAND=jt,exports.SELECTION_INSERT_CLIPBOARD_NODES_COMMAND=Ht,exports.SELECT_ALL_COMMAND=Pe,exports.SKIP_COLLAB_TAG="skip-collab",exports.SKIP_DOM_SELECTION_TAG=An,exports.SKIP_SCROLL_INTO_VIEW_TAG=Mn,exports.SKIP_SELECTION_FOCUS_TAG=wn,exports.TEXT_TYPE_TO_FORMAT=w,exports.TabNode=_er,exports.TextNode=_Un2,exports.UNDO_COMMAND=ce,exports.buildImportMap=function(t){return t;},exports.configExtension=function(){for(var _len13=arguments.length,t=new Array(_len13),_key13=0;_key13<_len13;_key13++){t[_key13]=arguments[_key13];}return t;},exports.createCommand=Yt,exports.createEditor=function(t){var e=t||{},n=Vr(),r=e.theme||{},o=void 0===t?n:e.parentEditor||null,i=e.disableEvents||!1,s=po(),l=e.namespace||(null!==o?o._config.namespace:ai()),c=e.editorState,a=[_ho,_Un2,_Dn,_er,_Co,_xo].concat(e.nodes||[]),u=e.onError,f=e.html,d=void 0===e.editable||e.editable;var h;if(void 0===t&&null!==n)h=n._nodes;else{h=new Map();for(var _t197=0;_t197<a.length;_t197++){var _e119=a[_t197],_n90=null,_r73=null;if("function"!=typeof _e119){var _t198=_e119;_e119=_t198.replace,_n90=_t198["with"],_r73=_t198.withKlass||null;}ss(_e119);var _o57=_e119.getType(),_i30=Eo(_e119);h.set(_o57,{exportDOM:f&&f["export"]?f["export"].get(_e119):void 0,klass:_e119,replace:_n90,replaceWithKlass:_r73,sharedNodeState:X(a[_t197]),transforms:_i30});}}var g=new _Oo(s,o,h,{disableEvents:i,namespace:l,theme:r},u||console.error,function(t,e){var n=new Map(),r=new Set(),o=function o(t){Object.keys(t).forEach(function(e){var r=n.get(e);void 0===r&&(r=[],n.set(e,r)),r.push(t[e]);});};return t.forEach(function(t){var e=t.klass.importDOM;if(null==e||r.has(e))return;r.add(e);var n=e.call(t.klass);null!==n&&o(n);}),e&&o(e),n;}(h,f?f["import"]:void 0),d,t);return void 0!==c&&(g._pendingEditorState=c,g._dirtyType=2),function(t){t.registerCommand(Gt,un,vo),t.registerCommand(qt,fn,vo),t.registerCommand(Xt,dn,vo),t.registerCommand(Qt,hn,vo),t.registerCommand(ue,_n,vo);}(g),g;},exports.createSharedNodeState=X,exports.createState=function(t,e){return new G(t,e);},exports.declarePeerDependency=function(t,e){return[t,e];},exports.defineExtension=function(t){return t;},exports.flipDirection=ds,exports.getDOMOwnerDocument=Ai,exports.getDOMSelection=Ji,exports.getDOMSelectionFromTarget=Yi,exports.getDOMTextNode=Jo,exports.getEditorPropertyFromDOMNode=Bo,exports.getNearestEditorFromDOMNode=Ko,exports.getRegisteredNode=Do,exports.getRegisteredNodeOrThrow=wo,exports.getStaticNodeConfig=ss,exports.getTextDirection=function(t){return M.test(t)?"rtl":A.test(t)?"ltr":null;},exports.getTransformSetFromKlass=Eo,exports.isBlockDomNode=qi,exports.isCurrentlyReadOnlyMode=$r,exports.isDOMDocumentNode=Uo,exports.isDOMNode=Hi,exports.isDOMTextNode=$o,exports.isDOMUnmanaged=os,exports.isDocumentFragment=Vi,exports.isExactShortcutMatch=pi,exports.isHTMLAnchorElement=function(t){return ji(t)&&"A"===t.tagName;},exports.isHTMLElement=ji,exports.isInlineDomNode=Gi,exports.isLexicalEditor=Ro,exports.isModifierMatch=_i,exports.isSelectionCapturedInDecoratorInput=Lo,exports.isSelectionWithinEditor=Fo,exports.makeStepwiseIterator=Is,exports.removeFromParent=Ho,exports.resetRandomKey=function(){Ao=1;},exports.safeCast=function(t){return t;},exports.setDOMUnmanaged=function(t){t.__lexicalUnmanaged=!0;},exports.setNodeIndentFromDOM=rs,exports.shallowMergeConfig=function(t,e){if(!e||t===e)return t;for(var _n91 in e)if(t[_n91]!==e[_n91])return babelHelpers["extends"]({},t,e);return t;};}),null);
__d("MDSEntryPointPopoverTrigger.react",["CometEntryPointPopoverTrigger.react","MDSPopoverLoadingState.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["fallback"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(8),a,i;n[0]!==t?(a=t.fallback,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;n[3]!==a?(l=a!=null?a:u.jsx(r("MDSPopoverLoadingState.react"),{withArrow:!0}),n[3]=a,n[4]=l):l=n[4];var s;return n[5]!==i||n[6]!==l?(s=u.jsx(r("CometEntryPointPopoverTrigger.react"),babelHelpers.extends({fallback:l},i)),n[5]=i,n[6]=l,n[7]=s):s=n[7],s}l.default=c}),98);
__d("xmaLayouts",[],(function(t,n,r,o,a,i){"use strict";var e={DEFAULT:"default",UNIFIED_LAYOUT:"unifiedLayout"};i.XMA_LAYOUTS=e}),66);
__d("MDSSolidMessageBubble.react",["MWXMessageBubbleCornerStyles.react","XPlatReactEnvironment","gkx","react","react-compiler-runtime","react-strict-dom","xmaLayouts"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=o("XPlatReactEnvironment").isWeb(),c={precedes_xma:{boxSizing:"x9f619",maxWidth:"xw5ewwj",width:"xh8yej3",$$css:!0},precedes_xma_v2_web:{minWidth:"xgqtt45",width:"xnalus7",$$css:!0},precedes_xma_web:{maxWidth:"x16it46q",width:"xh8yej3",$$css:!0}},d={bubble:{color:"x14ctfv",maxWidth:"x13sv91t",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xerhiuh",paddingBottom:"x1pn3fxy",paddingInlineStart:"x10zy8in",paddingInlineEnd:"xm9bcq3",paddingLeft:null,paddingRight:null,position:"x1n2onr6",zIndex:"x1vjfegm",$$css:!0},bubbleOutline:{outline:"x1k4qllp",$$css:!0},bubbleWeb:{overflowWrap:"x1mzt3pk",wordBreak:"x13faqbe",$$css:!0},clip:{overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},m={background:{backgroundColor:"x1xr0vuk",borderTopColor:"x1jm4cbz",borderInlineEndColor:"x114wg8e",borderBottomColor:"xrrpcnn",borderInlineStartColor:"x14rx4xb",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x19livfd",borderInlineEndWidth:"x1h2krnu",borderBottomWidth:"x3p3xfz",borderInlineStartWidth:"xet2kk3",$$css:!0},opaque:{outline:"x1ucz5p",$$css:!0}},p={background:{backgroundColor:"x11jlvup",borderTopColor:"xpmdkuv",borderInlineEndColor:"xrmkrer",borderBottomColor:"x12z03op",borderInlineStartColor:"x9wyiwl",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x12lizq0",borderInlineEndWidth:"x1nrdd72",borderBottomWidth:"x1ybe9c6",borderInlineStartWidth:"xx487zo",$$css:!0},opaque:{backgroundAttachment:"x1nr1p0w",backgroundImage:"xl54vp5",outline:"x1ucz5p",$$css:!0}},_={background:{backgroundColor:"x1m3w7tb",borderTopColor:"x1jm4cbz",borderInlineEndColor:"x114wg8e",borderBottomColor:"xrrpcnn",borderInlineStartColor:"x14rx4xb",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x19livfd",borderInlineEndWidth:"x1h2krnu",borderBottomWidth:"x3p3xfz",borderInlineStartWidth:"xet2kk3",$$css:!0},opaque:{outline:"x1ucz5p",$$css:!0}};function f(e){var t=o("react-compiler-runtime").c(22),n=e.align,a=e.children,i=e.color,l=e.connectBottom,f=e.connectTop,g=e.xmaLayout,h=e.xstyle,y=e.precedesXMA,C=e.precedingXmaIsV2,b=e.testid,v=e.flattenCorners,S=e.variant,R=e.isBackgroundTransparent,L=g===void 0?o("xmaLayouts").XMA_LAYOUTS.DEFAULT:g,E=C===void 0?!1:C,k=L!==o("xmaLayouts").XMA_LAYOUTS.UNIFIED_LAYOUT&&y===!0,I=v!=null?v:k?"bottom":"none",T;t[0]!==n||t[1]!==l||t[2]!==f||t[3]!==I?(T=o("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:n,connectBottom:l,connectTop:f,flatten:I}),t[0]=n,t[1]=l,t[2]=f,t[3]=I,t[4]=T):T=t[4];var D=T,x=i==="incoming"?m:i==="outgoing"?p:_,$=E&&r("gkx")("7835")?c.precedes_xma_v2_web:c.precedes_xma_web,P=k&&u&&$,N;t[5]!==P?(N=[d.clip,P],t[5]=P,t[6]=N):N=t[6];var M=b!=null?b:"solid-message-bubble",w=R!==!0&&d.bubbleOutline,A=k&&c.precedes_xma,F=k&&u&&$,O=S==="opaque"&&x.opaque,B;t[7]!==x.background||t[8]!==D||t[9]!==F||t[10]!==O||t[11]!==w||t[12]!==A||t[13]!==h?(B=[d.bubble,w,u&&d.bubbleWeb,A,F,x.background,O,D,h],t[7]=x.background,t[8]=D,t[9]=F,t[10]=O,t[11]=w,t[12]=A,t[13]=h,t[14]=B):B=t[14];var W;t[15]!==a||t[16]!==B||t[17]!==M?(W=s.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,role:"none",style:B,children:a}),t[15]=a,t[16]=B,t[17]=M,t[18]=W):W=t[18];var q;return t[19]!==W||t[20]!==N?(q=s.jsx(o("react-strict-dom").html.div,{style:N,children:W}),t[19]=W,t[20]=N,t[21]=q):q=t[21],q}l.default=f}),98);
__d("MWPMessageAuthor.react",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSVerifyContactRowExistsStoredProcedure","MWPContactContext.react","ReQL","ReQLSuspense","mwCMIsCMSubthread","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=c.useMemo;function p(t){var n=o("react-compiler-runtime").c(16),a=t.children,l=t.contactId,u=(e||(e=r("useReStore")))(),c;n[0]!==l||n[1]!==u.tables.contacts?(c=function(){return o("ReQL").fromTableAscending(u.tables.contacts).getKeyRange(l)},n[0]=l,n[1]=u.tables.contacts,n[2]=c):c=n[2];var m;n[3]!==l||n[4]!==u?(m=[u,l],n[3]=l,n[4]=u,n[5]=m):m=n[5];var p=o("ReQLSuspense").useFirst(c,m,i.id+":51"),_;n[6]!==p?(_={contact:p,nickname:void 0},n[6]=p,n[7]=_):_=n[7];var f=_,g,h;n[8]!==l||n[9]!==u?(g=function(){r("promiseDone")(u.runInTransaction(function(e){return r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(e),{authorityLevel:(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:s.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:s.ofNumber(r("LSContactIdType").FBID),contactType:s.ofNumber(r("LSContactType").USER),contactViewerRelationship:s.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:s.ofNumber(r("LSContactGender").UNKNOWN),id:l,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:s.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)})},"readwrite",void 0,void 0,i.id+":65"))},h=[u,l],n[8]=l,n[9]=u,n[10]=g,n[11]=h):(g=n[10],h=n[11]),o("Int64Hooks").useEffectInt64(g,h);var y;return n[12]!==a||n[13]!==f.contact||n[14]!==f.nickname?(y=d.jsx(o("MWPContactContext.react").MWPContactContextProvider,{contact:f.contact,nickname:f.nickname,children:a}),n[12]=a,n[13]=f.contact,n[14]=f.nickname,n[15]=y):y=n[15],y}function _(e){var t=o("react-compiler-runtime").c(7),n=e.children,r=e.contact,a=e.nickname,i;t[0]!==r||t[1]!==a?(i={contact:r,nickname:a},t[0]=r,t[1]=a,t[2]=i):i=t[2];var l=i,s;return t[3]!==n||t[4]!==l.contact||t[5]!==l.nickname?(s=d.jsx(o("MWPContactContext.react").MWPContactContextProvider,{contact:l.contact,nickname:l.nickname,children:n}),t[3]=n,t[4]=l.contact,t[5]=l.nickname,t[6]=s):s=t[6],s}function f(t){var n,a=o("react-compiler-runtime").c(25),l=t.children,c=t.contactId,m=t.threadKey,f=(e||(e=r("useReStore")))(),g;a[0]!==c||a[1]!==f.tables.contacts?(g=function(){return o("ReQL").fromTableAscending(f.tables.contacts).getKeyRange(c)},a[0]=c,a[1]=f.tables.contacts,a[2]=g):g=a[2];var h;a[3]!==c||a[4]!==f?(h=[c,f],a[3]=c,a[4]=f,a[5]=h):h=a[5];var y=o("ReQLSuspense").useFirst(g,h,i.id+":126"),C=(n=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(f.tables.participants,["nickname"]).getKeyRange(m,c)},[c,f,m],i.id+":130"))==null?void 0:n.nickname,b;a[6]!==c||a[7]!==f.tables.contextual_profile_v1||a[8]!==f.tables.threads||a[9]!==m?(b=function(){return o("ReQL").fromTableAscending(f.tables.threads,["parentThreadKey","secondaryParentThreadKey","threadType"]).getKeyRange(m).map(function(e){var t=e.parentThreadKey,n=e.secondaryParentThreadKey,a=e.threadType,l=o("ReQLSuspense").first(o("ReQL").fromTableAscending(f.tables.contextual_profile_v1,["profileName"]).getKeyRange(c,r("mwCMIsCMSubthread")(a)&&n!=null?n:t),i.id+":155");return l==null?void 0:l.profileName})},a[6]=c,a[7]=f.tables.contextual_profile_v1,a[8]=f.tables.threads,a[9]=m,a[10]=b):b=a[10];var v;a[11]!==c||a[12]!==f||a[13]!==m?(v=[f,m,c],a[11]=c,a[12]=f,a[13]=m,a[14]=v):v=a[14];var S=o("ReQLSuspense").useFirst(b,v,i.id+":146"),R=S!=null?S:C;if(y!=null)if((u||(u=o("I64"))).ge(y.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE_PENDING_REPLACEMENT))){var L;return a[15]!==l||a[16]!==y||a[17]!==R?(L=d.jsx(_,{contact:y,nickname:R,children:l}),a[15]=l,a[16]=y,a[17]=R,a[18]=L):L=a[18],L}else{var E;return a[19]!==l||a[20]!==c?(E=d.jsx(p,{contactId:c,children:l}),a[19]=l,a[20]=c,a[21]=E):E=a[21],E}else{var k;return a[22]!==l||a[23]!==c?(k=d.jsx(p,{contactId:c,children:l}),a[22]=l,a[23]=c,a[24]=k):k=a[24],k}}var g=d.memo(f,function(e,t){return e!=null&&t!=null&&(u||(u=o("I64"))).equal(e.contactId,t.contactId)&&(u||(u=o("I64"))).equal(e.threadKey,t.threadKey)?e.children===t.children:!1});function h(){var e=o("react-compiler-runtime").c(2),t=o("MWPContactContext.react").useMWPContactStableContext(),n=t.authorName,r;return e[0]!==n?(r=[n],e[0]=n,e[1]=r):r=e[1],r}function y(){var e=o("react-compiler-runtime").c(3),t=o("MWPContactContext.react").useMWPContactFullContext(),n=t.contact,r=n!=null?n.name:void 0,a;return e[0]!==n||e[1]!==r?(a=[r,n],e[0]=n,e[1]=r,e[2]=a):a=e[2],a}l.MissingContactProvider=p,l.Provider=_,l.MWPMessageAuthor=g,l.useAuthorName=h,l.useAuthorFullName=y}),98);
__d("MWXIconClock",["MWXSvgIcon","SVGIcon","cr:22273","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22273")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconReply",["MWXSvgIcon","SVGIcon","cr:22460","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22460")),r("gkx")("23219"));l.default=e}),98);
__d("MWXMessageBubbleRow.react",["react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={addOn:{display:"x78zum5",flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",$$css:!0},bubble:{minWidth:"xeuugli",zIndex:"x1vjfegm",$$css:!0},container:{display:"x78zum5",$$css:!0},containerRight:{flexDirection:"x15zctf7",$$css:!0},opaque:{backgroundColor:"x1eb86dx",$$css:!0},paddingBottom:function(t){return[{paddingBottom:t!=null?"xjqpyvm":t,$$css:!0},{"--x-paddingBottom":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},paddingEnd:function(t){return[{paddingInlineEnd:t!=null?"x120eax6":t,$$css:!0},{"--x-paddingInlineEnd":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},paddingStart:function(t){return[{paddingInlineStart:t!=null?"xnvo3vl":t,$$css:!0},{"--x-paddingInlineStart":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},spacer:{flexBasis:"x1r8uery",flexGrow:"x1iyjqo2",$$css:!0}},c={bottom:{alignSelf:"xpvyfi4",$$css:!0},center:{alignSelf:"xamitd3",$$css:!0},top:{alignSelf:"xqcrz7y",$$css:!0}},d={left:{end:u.paddingStart,start:u.paddingEnd},right:{end:u.paddingEnd,start:u.paddingStart}};function m(e){var t=o("react-compiler-runtime").c(8),n=e.children,r=e.gap,a=e.paddingBottom,i=e.rowAlign,l=e.testid,m=e.type,p=e.verticalAlign,_;return t[0]!==n||t[1]!==r||t[2]!==a||t[3]!==i||t[4]!==l||t[5]!==m||t[6]!==p?(_=n!=null?s.jsx(o("react-strict-dom").html.div,{"data-testid":void 0,style:[u.opaque,u.addOn,a!=null&&u.paddingBottom(a),r!=null&&d[i][m](r)],children:s.jsx(o("react-strict-dom").html.div,{style:[u.container,i==="right"&&u.containerRight,c[p]],children:n})}):null,t[0]=n,t[1]=r,t[2]=a,t[3]=i,t[4]=l,t[5]=m,t[6]=p,t[7]=_):_=t[7],_}function p(e){var t=o("react-compiler-runtime").c(25),n=e.addOnEnd,r=e.addOnEndGap,a=e.addOnEndVerticalAlign,i=e.addOnPaddingBottom,l=e.addOnStart,c=e.addOnStartGap,d=e.addOnStartVerticalAlign,p=e.align,_=e.children,f=e.opaque,g=e.testid,h=e.xstyle,y=r===void 0?0:r,C=a===void 0?"center":a,b=i===void 0?0:i,v=c===void 0?0:c,S=d===void 0?"center":d,R=p===void 0?"right":p,L=f===void 0?!1:f,E=R==="right"&&u.containerRight,k=L&&u.opaque,I;t[0]!==E||t[1]!==k||t[2]!==h?(I=[u.container,E,k,h],t[0]=E,t[1]=k,t[2]=h,t[3]=I):I=t[3];var T;t[4]!==b||t[5]!==l||t[6]!==v||t[7]!==S||t[8]!==R?(T=s.jsx(m,{gap:v,paddingBottom:b,rowAlign:R,testid:void 0,type:"start",verticalAlign:S,children:l}),t[4]=b,t[5]=l,t[6]=v,t[7]=S,t[8]=R,t[9]=T):T=t[9];var D;t[10]!==_?(D=_!=null?s.jsx(o("react-strict-dom").html.div,{style:u.bubble,children:_}):null,t[10]=_,t[11]=D):D=t[11];var x;t[12]!==n||t[13]!==y||t[14]!==C||t[15]!==b||t[16]!==R?(x=s.jsx(m,{gap:y,paddingBottom:b,rowAlign:R,type:"end",verticalAlign:C,children:n}),t[12]=n,t[13]=y,t[14]=C,t[15]=b,t[16]=R,t[17]=x):x=t[17];var $;t[18]===Symbol.for("react.memo_cache_sentinel")?($=s.jsx(o("react-strict-dom").html.div,{style:[u.opaque,u.spacer]}),t[18]=$):$=t[18];var P;return t[19]!==I||t[20]!==T||t[21]!==D||t[22]!==x||t[23]!==g?(P=s.jsxs(o("react-strict-dom").html.div,{"data-testid":void 0,style:I,children:[T,D,x,$]}),t[19]=I,t[20]=T,t[21]=D,t[22]=x,t[23]=g,t[24]=P):P=t[24],P}l.default=p}),98);
__d("MessengerBadgeCheckmarkFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M7.818 18.378c-1.176 1.307-1.645 2.915-1.077 4.286.567 1.37 2.036 2.176 3.792 2.268.287.015.52.248.535.535.092 1.756.897 3.225 2.268 3.793 1.371.567 2.979.098 4.286-1.078a.568.568 0 0 1 .756 0c1.307 1.177 2.915 1.645 4.286 1.078 1.37-.568 2.176-2.037 2.268-3.793a.568.568 0 0 1 .535-.535c1.756-.092 3.225-.897 3.793-2.268.567-1.371.098-2.979-1.078-4.286a.568.568 0 0 1 0-.756c1.177-1.307 1.645-2.915 1.078-4.286-.568-1.37-2.037-2.176-3.793-2.268a.569.569 0 0 1-.535-.535c-.092-1.756-.897-3.225-2.268-3.792-1.371-.568-2.979-.1-4.286 1.077a.568.568 0 0 1-.756 0c-1.307-1.176-2.915-1.645-4.286-1.077-1.37.567-2.176 2.036-2.268 3.792a.568.568 0 0 1-.535.535c-1.756.092-3.225.897-3.792 2.268-.568 1.371-.1 2.979 1.077 4.286a.568.568 0 0 1 0 .756zm15.547-4.376a1 1 0 0 0-1.73-1.004l-4.41 7.595a.25.25 0 0 1-.393.051l-2.625-2.625a1 1 0 0 0-1.414 1.414l3.774 3.774a1 1 0 0 0 1.572-.205l5.226-9z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("WebGraphQLLegacyHelper",["invariant"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=e.controller,n=e.docID,r=e.queryID,o=e.variables,a=e.legacyResponseFormat;n!=r&&(n||r)!=null||s(0,5819,n,r);var i=t.getURIBuilder();return r?i.setFBID("query_id",r):i.setFBID("doc_id",n),a&&i.setBool("legacy_response_format",!0),o&&i.setString("variables",JSON.stringify(o)),i.getURI()}l.getURI=e}),98);
__d("XAsyncRequestWWW",["AsyncRequest"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e){var t=this;this.setAllowCrossPageTransition=function(e){return t.$1.setAllowCrossPageTransition(e),t},this.$1=new(r("AsyncRequest"))(e)}var t=e.prototype;return t.setURI=function(t){return this.$1.setURI(t),this},t.setTimeoutHandler=function(t,n){return this.$1.setTimeoutHandler(t,n),this},t.setOption=function(t,n){return this.$1.setOption(t,n),this},t.setMethod=function(t){return this.$1.setMethod(t),this},t.setAutoProcess=function(t){return this.$1.setOption("suppressEvaluation",t),this},t.setData=function(t){return this.$1.setData(t),this},t.setHandler=function(t){return this.$1.setHandler(t),this},t.setPayloadHandler=function(t){return this.setHandler(function(e){return t(e.payload)}),this},t.setErrorHandler=function(t){return this.$1.setErrorHandler(t),this},t.send=function(){return this.$1.send(),this},t.abort=function(){this.$1.abort()},t.setReadOnly=function(t){return this.$1.setReadOnly(t),this},t.setAllowCrossOrigin=function(t){return this.$1.setAllowCrossOrigin(t),this},t.setAllowCredentials=function(t){return this.$1.setAllowCredentials(t),this},e})();l.default=e}),98);
__d("XCometProfileControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/profile.php",Object.freeze({show_switched_toast:!1,show_switched_tooltip:!1,is_tour_dismissed:!1,is_tour_completed:!1,show_podcast_settings:!1,show_community_review_changes:!1,should_open_composer:!1,badge_type:"NEW_MEMBER",show_community_rollback_toast:!1,show_community_rollback:!1,show_follower_visibility_disclosure:!1}),new Set(["show_switched_toast","show_switched_tooltip","is_tour_dismissed","is_tour_completed","show_podcast_settings","show_community_review_changes","should_open_composer","show_community_rollback_toast","show_community_rollback","show_follower_visibility_disclosure"])),s=e;l.default=s}),98);
__d("goUriOnNewWindow",["goURIOnWindow"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=window.open("","_blank");return t==null?!1:r("goURIOnWindow")(t,e)}l.default=e}),98);
__d("useCometDynamicEntryPointDialog",["FDSDialogLoadingState.react","react","useBaseDynamicEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=function(t){return s.jsx(r("FDSDialogLoadingState.react"),{onClose:t})};function c(e,t,n,o){return r("useBaseDynamicEntryPointDialog")(e,t,n!=null?n:u,o)}l.default=c}),98);
__d("useCommunityMembers",["I64","Int64Hooks","LSClearCommunityMembersAndRangeStoredProcedure","LSFactory","LSIntEnum","LSIssueCommunityMemberListFetchStoredProcedure","LSVec","MWCMThreadTypes.react","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback;function m(t,n,a){var l=o("react-compiler-runtime").c(6),c=(e||(e=r("useReStore")))(),d,m;l[0]!==t||l[1]!==c||l[2]!==n||l[3]!==a?(d=function(){var e=async function(){await c.runInTransaction(function(e){return r("LSIssueCommunityMemberListFetchStoredProcedure")(r("LSFactory")(e),{communityId:t,fetchAdminsOnly:!1,fetchFriendMembersOnly:!1,maxName:"",maxTimestampMs:(s||(s=o("I64"))).zero,nextPageCursor:"",requestId:n,roles:r("LSVec").ofArray([(u||(u=o("LSIntEnum"))).ofNumber(0)]),source:u.ofNumber(13),threadKey:a!=null?a:void 0,threadRoles:r("LSVec").ofArray([])})},"readwrite",void 0,void 0,i.id+":44")};r("promiseDone")(e())},m=[t,c,n,a],l[0]=t,l[1]=c,l[2]=n,l[3]=a,l[4]=d,l[5]=m):(d=l[4],m=l[5]),o("Int64Hooks").useEffectInt64(d,m)}function p(t,n,a){var l=o("react-compiler-runtime").c(10),s=(e||(e=r("useReStore")))(),u;l[0]!==t||l[1]!==s.tables.community_members_ranges_v2__generated||l[2]!==a||l[3]!==n?(u=function(){return o("ReQL").fromTableAscending(s.tables.community_members_ranges_v2__generated).getKeyRange(t).filter(function(e){return e.requestId!==n?!1:a!=null?e.isAdmin===a:!0})},l[0]=t,l[1]=s.tables.community_members_ranges_v2__generated,l[2]=a,l[3]=n,l[4]=u):u=l[4];var c;return l[5]!==t||l[6]!==s||l[7]!==a||l[8]!==n?(c=[s,t,a,n],l[5]=t,l[6]=s,l[7]=a,l[8]=n,l[9]=c):c=l[9],o("ReQLSuspense").useFirst(u,c,i.id+":76")}function _(t){var n=o("react-compiler-runtime").c(3),a=t===void 0?7:t,l=(e||(e=r("useReStore")))(),s;return n[0]!==l||n[1]!==a?(s=function(t){return l.runInTransaction(function(e){return r("LSClearCommunityMembersAndRangeStoredProcedure")(r("LSFactory")(e),{requestId:t,source:(u||(u=o("LSIntEnum"))).ofNumber(a)})},"readwrite",void 0,void 0,i.id+":98")},n[0]=l,n[1]=a,n[2]=s):s=n[2],s}function f(t){var n=o("react-compiler-runtime").c(12),a=t.communityIdOrThreadKey,l=t.thread,c=t.showAdmodsOnly,d=t.showHostsOnly,m=t.source,p=t.requestId,_=c===void 0?!1:c,f=d===void 0?!1:d,g;n[0]!==m?(g=m===void 0?(s||(s=o("I64"))).of_int32(7):m,n[0]=m,n[1]=g):g=n[1];var h=g,y=(e||(e=r("useReStore")))(),C=l.threadKey,b=l.threadType,v,S;n[2]!==a||n[3]!==y||n[4]!==p||n[5]!==_||n[6]!==f||n[7]!==h||n[8]!==C||n[9]!==b?(v=function(){var e=r("LSVec").ofArray(_?[(u||(u=o("LSIntEnum"))).ofNumber(1),(u||(u=o("LSIntEnum"))).ofNumber(2)]:f?[(u||(u=o("LSIntEnum"))).ofNumber(3)]:[(u||(u=o("LSIntEnum"))).ofNumber(0)]),t=o("MWCMThreadTypes.react").isBroadcastThread(b)?[(u||(u=o("LSIntEnum"))).ofNumber(0)]:[],n=async function(){await y.runInTransaction(function(n){return r("LSIssueCommunityMemberListFetchStoredProcedure")(r("LSFactory")(n),{communityId:a,fetchAdminsOnly:!1,fetchFriendMembersOnly:!1,maxName:"",maxTimestampMs:(s||(s=o("I64"))).zero,nextPageCursor:"",requestId:p,roles:e,source:h,threadKey:(s||(s=o("I64"))).equal(h,(s||(s=o("I64"))).of_int32(0))?void 0:C,threadRoles:r("LSVec").ofArray(t)})},"readwrite",void 0,void 0,i.id+":149")};r("promiseDone")(n())},S=[y,a,C,b,_,h,p,f],n[2]=a,n[3]=y,n[4]=p,n[5]=_,n[6]=f,n[7]=h,n[8]=C,n[9]=b,n[10]=v,n[11]=S):(v=n[10],S=n[11]),o("Int64Hooks").useEffectInt64(v,S)}l.useFetchBannedMemberList=m,l.useCommunityMembersRanges=p,l.useClearMemberList=_,l.useFetchCommunityMembers=f}),98);
__d("useMWGetThreadDataForContact",["CometRelay","I64","LSDatabaseSingleton","MWInboxTrayGating","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e||(e=o("react"))).useCallback,d=r("requireDeferred")("MAWVerifyThreadCutover").__setRef("useMWGetThreadDataForContact");function m(){var e=o("react-compiler-runtime").c(2),t=o("CometRelay").useRelayEnvironment(),n;return e[0]!==t?(n=async function(n){var e=n.preloadedNavigationData,r=n.userId,a=e==null?void 0:e.isSecureThread;if(a===!0)return{threadStatus:"SECURE",verifiedThreadKey:(s||(s=o("I64"))).of_string(r)};var i=e==null?void 0:e.contactCapabilities2,l=e==null?void 0:e.isOdCutoverEligible,c=(s||(s=o("I64"))).of_string(r),m=await d.load(),p=await m.verifyContactCutoverOrOndemandCutoverOrDefaultE2EE((u||(u=o("LSDatabaseSingleton"))).LSDatabaseSingleton,t,c,l,i),_=p==="cutover",f=p==="on_demand_cutover",g=await m.getCutoverThread(u.LSDatabaseSingleton,s.of_string(r));if(_===!0&&!f){var h=g?g.serverThreadKey:c,y=g!=null||f;return{isCutover:_,isSecure:y,threadStatus:"CUTOVER",verifiedThreadKey:h}}return g!=null&&o("MWInboxTrayGating").isInboxTrayNotesEnabled()?{threadStatus:"SECURE",verifiedThreadKey:g.serverThreadKey}:{threadStatus:"OPEN"}},e[0]=t,e[1]=n):n=e[1],n}l.default=m}),98);
__d("useMWBaseChatOpenTabForUser",["I64","LSDatabaseSingleton","LSIntEnum","LSThreadAttributionStore","MWChatInteraction","MWChatStateActions","MWChatStateV2.react","MWChatStateV2Types","cr:4792","dispatchOpenChatTabTraceLogging","loadChatTabEntryPoint","performanceNow","react","react-compiler-runtime","requireDeferred","useCometFeedNoRoutingNavigationEventLogger","useCometRelayEntrypointContextualEnvironmentProvider","useMWChatOpenTabTraceProvider","useMWGetThreadDataForContact"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=s||(s=o("react")),p=m.useCallback,_=m.useMemo,f=r("requireDeferred")("MAWVerifyThreadCutover").__setRef("useMWBaseChatOpenTabForUser"),g=r("requireDeferred")("MWChatLogOpenChatTab").__setRef("useMWBaseChatOpenTabForUser"),h=r("requireDeferred")("MWChatOpenSecureTabForUserCallback").__setRef("useMWBaseChatOpenTabForUser"),y=r("requireDeferred")("MWLSPreloadThreadForContact").__setRef("useMWBaseChatOpenTabForUser");function C(t,n){var a=o("react-compiler-runtime").c(31),i=t!=null?t:!1,l=r("useMWChatOpenTabTraceProvider")(),s=r("useCometFeedNoRoutingNavigationEventLogger")(),m=b,p=r("useCometRelayEntrypointContextualEnvironmentProvider")(),_=o("MWChatStateV2.react").useDispatch(),y;a[0]!==_||a[1]!==p||a[2]!==i?(y=function(t,n){var e={clientThreadKey:void 0,threadKey:t,threadType:(u||(u=o("LSIntEnum"))).ofNumber(1)},a=r("loadChatTabEntryPoint")(p);r("dispatchOpenChatTabTraceLogging")(n,e,"useMWBaseChatOpenTabForUser.openOpenTab"),_(o("MWChatStateActions").openTab(Date.now(),{shouldFocus:!i},{threadKeyDescriptor:e,type:o("MWChatStateV2Types").MWChatStateTabType.ChatTab},a))},a[0]=_,a[1]=p,a[2]=i,a[3]=y):y=a[3];var C=y,v;a[4]!==_||a[5]!==i?(v=async function(t,n,r){r.addAnnotation("openSecureTabForUserCallback_description",n),r.addMarkerPoint("MWChatOpenSecureTabForUserCallbackDeferred_start","AppTiming");var e=await h.load();return r.addMarkerPoint("MWChatOpenSecureTabForUserCallbackDeferred_end","AppTiming"),e.openChatTab(t,i,_,n,r)},a[4]=_,a[5]=i,a[6]=v):v=a[6];var S=v,R;a[7]!==n||a[8]!==s?(R=function(t,r){s(Date.now(),"","messenger"),o("LSThreadAttributionStore").setSource(t,n),g.onReady(function(e){return e.logOpenUserTab(r,t,n)})},a[7]=n,a[8]=s,a[9]=R):R=a[9];var L=R,E=r("useMWGetThreadDataForContact")(),k;a[10]!==n||a[11]!==E||a[12]!==L||a[13]!==C||a[14]!==S||a[15]!==l?(k=function(a){var t=a.preloadedNavigationData,i=a.reason,s=a.userId,u=t==null?void 0:t.isSecureThread,c=(d||(d=o("I64"))).of_string(s),m=u===!0?15:1;l({entrypoint:n,threadKey:c,threadType:m},async function(t,n){var l,c=(e||(e=r("performanceNow")))();n.addMarkerPoint("useMWBaseChatOpenTabForUser_getThreadDataForContact_start","AppTiming");var m=await E(a);if(n.addMarkerPoint("useMWBaseChatOpenTabForUser_getThreadDataForContact_end","AppTiming"),n.addAnnotation("isSecureFromPreloadedNavigationData",(l=u==null?void 0:u.toString())!=null?l:"unknown"),n.addAnnotation("getThreadDataForContactResult",m.threadStatus),m.threadStatus==="SECURE")return L(s,!0),o("MWChatInteraction").set(s,t),S(s,"with FBID, secure: "+(i!=null?i:"unknown"),n);if(m.threadStatus==="CUTOVER"){var p=(d||(d=o("I64"))).to_string(m.verifiedThreadKey);return n.addAnnotationInt("is_cutover",m.isCutover?1:0),L(p,m.isSecure),o("MWChatInteraction").set(p,t),n.addAnnotationBoolean("is_secure",m.isSecure),n.addAnnotation("thread_id",p),n.setTracePolicy("comet.messenger.chat_tab.cutover"),n.addSubspan("verify_and_get_cutover_thread","AppTiming",c,(e||(e=r("performanceNow")))()),S(s,"with FBID, cutover",n)}else return o("MWChatInteraction").set(s,t),L(s,!1),n.addSubspan("verify_and_get_cutover_thread","AppTiming",c,(e||(e=r("performanceNow")))()),C((d||(d=o("I64"))).of_string(s),n)})},a[10]=n,a[11]=E,a[12]=L,a[13]=C,a[14]=S,a[15]=l,a[16]=k):k=a[16];var I=k,T;a[17]!==L||a[18]!==C||a[19]!==S?(T=function(n,a,i,l,s){return L(n,a),o("MWChatInteraction").set(n,i),a===!0?(l.addAnnotationBoolean("is_secure",a),l.addAnnotation("thread_id",n),l.setTracePolicy("comet.messenger.chat_tab.cutover"),l.addSubspan("verify_and_get_cutover_thread","AppTiming",s,(e||(e=r("performanceNow")))()),S(n,"with threadKey",l)):(l.addSubspan("verify_and_get_cutover_thread","AppTiming",s,(e||(e=r("performanceNow")))()),C((d||(d=o("I64"))).of_string(n),l))},a[17]=L,a[18]=C,a[19]=S,a[20]=T):T=a[20];var D=T,x;a[21]!==_||a[22]!==n||a[23]!==L||a[24]!==D||a[25]!==i||a[26]!==l?(x=function(a,s){var t=s?15:1;l({entrypoint:n,threadKey:(d||(d=o("I64"))).of_string(a),threadType:t},async function(t,n){if(s===!0){L(a,s),o("MWChatInteraction").set(a,t);var l=(d||(d=o("I64"))).of_string(a),m={clientThreadKey:void 0,threadKey:l,threadType:(u||(u=o("LSIntEnum"))).ofNumber(15)};return r("dispatchOpenChatTabTraceLogging")(n,m,"useMWBaseChatOpenTabForUser.openTabByThreadKey"),_(o("MWChatStateActions").openTab(Date.now(),{shouldFocus:!i},{threadKeyDescriptor:m,type:o("MWChatStateV2Types").MWChatStateTabType.ChatTab}))}else{var p=(e||(e=r("performanceNow")))(),g=await f.load(),h=await g.verifyThreadCutover((c||(c=o("LSDatabaseSingleton"))).LSDatabaseSingleton,(d||(d=o("I64"))).of_string(a));return D(a,h,t,n,p)}})},a[21]=_,a[22]=n,a[23]=L,a[24]=D,a[25]=i,a[26]=l,a[27]=x):x=a[27];var $=x,P;return a[28]!==$||a[29]!==I?(P={openTabByThreadKey:$,openTabForUser:I,preloadThread:m},a[28]=$,a[29]=I,a[30]=P):P=a[30],P}async function b(e){n("cr:4792")!=null&&n("cr:4792").preload();var t=await y.load();return t.verifyThreadExists(e.userId)}l.default=C}),98);
__d("useMWUIECPCheckoutDialog",["FBP2MECPCheckoutDialog.entrypoint","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var a=o("react-compiler-runtime").c(4),i;return a[0]!==e||a[1]!==t||a[2]!==n?(i={entrypoint:e,orderID:t,pageID:n},a[0]=e,a[1]=t,a[2]=n,a[3]=i):i=a[3],r("useMWXEntryPointDialog")(r("FBP2MECPCheckoutDialog.entrypoint"),i)}l.default=e}),98);
__d("useShouldTryWithMessengerDesktop",["MWFacebookUserWithoutMessengerAccess","MessengerDesktopDeepLinkUtils","ODS","gkx","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useRef,m=u.useState;function p(){var e=o("react-compiler-runtime").c(2),t=m(!1),n=t[0],a=t[1],i=d(!1),l=o("MWFacebookUserWithoutMessengerAccess").useIsFacebookUserWithoutMessengerAccess(),u;return e[0]!==l?(u=function(){i.current||(i.current=!0,!l&&(r("gkx")("23670")||!o("MessengerDesktopDeepLinkUtils").isMessengerDesktopDeeplinkEligible()||((s||(s=o("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","is_dapp_running"),r("promiseDone")(o("MessengerDesktopDeepLinkUtils").isMessengerDesktopRunning(o("MessengerDesktopDeepLinkUtils").PORT).then(function(e){if(!e||e!==200){e||(s||(s=o("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","localhost_did_not_respond"),e===500&&(s||(s=o("ODS"))).bumpEntityKey(3303,"dapp_calling_entrypoints","localhost_responded_but_crashed");return}a(!0)})))))},e[0]=l,e[1]=u):u=e[1],c(u,void 0),n}l.default=p}),98);/*FB_PKG_DELIM*/
__d("LSSendOTCNotifications",["LSIssueNewEbTaskAndGetTaskIDV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.forEach(t.db.table(285).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.filter(t.db.table(285).fetch([[[t.i64.cast([0,1])]]]),function(e){return t.i64.eq(e.pk,t.i64.cast([0,1]))&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(e){return t.db.table(285).add({pk:t.i64.cast([0,1]),notificationSendingStatus:t.i64.cast([0,2]),authorityLevel:t.i64.cast([0,20])})},function(o){return r[0]=new t.Map,r[0].set("device_ids",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewEbTaskAndGetTaskIDV2"),"meb_send_otc_notifications",t.i64.cast([0,50032]),r[1],t.i64.cast([0,0]),t.i64.cast([0,93]),t.i64.cast([0,0]),void 0,t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],t})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsSendOTCNotificationsStoredProcedure",e.__tables__=["encrypted_backups_otc_notification_sending_status"],a.exports=e}),null);
__d("LSSendOTCNotificationsStoredProcedure",["LSSendOTCNotifications","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSendOTCNotifications"),a.deviceIds);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWEncryptedBackupsRestoreDialogContexts_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MAWEncryptedBackupsRestoreDialogContexts_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEBVestaUserInfoContextProvider_viewer"},{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null}],storageKey:null}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("MWChatEncryptedBackupOnCloseContextProvider.react",["MWChatEncryptedBackupOnCloseContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=d(null),i=a[0],l=a[1],u;t[0]!==i?(u={onCloseSkipConfirmation:i,setOnCloseSkipConfirmation:l},t[0]=i,t[1]=u):u=t[1];var c=u,m;return t[2]!==n||t[3]!==c?(m=s.jsx(r("MWChatEncryptedBackupOnCloseContext").Provider,{value:c,children:n}),t[2]=n,t[3]=c,t[4]=m):m=t[4],m}l.default=m}),98);
__d("MWChatEncryptedBackupResetContextProvider.react",["MWChatEncryptedBackupResetContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=d(!1),i=d(!1),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={isEncryptedBackupResetStartedRef:a,isEncryptedBackupResetUserJourneyStartedRef:i},t[0]=l):l=t[0];var u=l,c;return t[1]!==n?(c=s.jsx(r("MWChatEncryptedBackupResetContext").Provider,{value:u,children:n}),t[1]=n,t[2]=c):c=t[2],c}l.default=m}),98);
__d("MWChatEncryptedBackupsDismissalDialogContextProvider.react",["MWChatEncryptedBackupsDismissalDialogContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useMemo,d=u.useState;function m(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.isDismissedDisabledValue,i=d(a),l=i[0],u=i[1],c;t[0]!==l?(c={isDismissedDisabled:l,setIsDismissedDisabled:u},t[0]=l,t[1]=c):c=t[1];var m=c,p;return t[2]!==n||t[3]!==m?(p=s.jsx(r("MWChatEncryptedBackupsDismissalDialogContext").Provider,{value:m,children:n}),t[2]=n,t[3]=m,t[4]=p):p=t[4],p}l.default=m}),98);
__d("MWChatEncryptedBackupsRestoreUpsellDialogContextProvider.react",["MWChatEncryptedBackupsSetIsDialogPersistedContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.setIsDialogPersisted,i;t[0]!==a?(i={setIsDialogPersisted:a},t[0]=a,t[1]=i):i=t[1];var l=i;if(a!=null){var u;return t[2]!==n||t[3]!==l?(u=s.jsx(r("MWChatEncryptedBackupsSetIsDialogPersistedContext").Provider,{value:l,children:n}),t[2]=n,t[3]=l,t[4]=u):u=t[4],u}return n}l.default=c}),98);
__d("MWEBVestaUserInfoContextProvider_viewer.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEBVestaUserInfoContextProvider_viewer",selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_viewer"}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("useMWChatEncryptedBackupsVestaUserInfoRefetchQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23870520485955982"}),null);
__d("useMWChatEncryptedBackupsVestaUserInfoRefetchQuery.graphql",["useMWChatEncryptedBackupsVestaUserInfoRefetchQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWChatEncryptedBackupsVestaUserInfoRefetchQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_viewer"}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWChatEncryptedBackupsVestaUserInfoRefetchQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:n("useMWChatEncryptedBackupsVestaUserInfoRefetchQuery_facebookRelayOperation"),metadata:{},name:"useMWChatEncryptedBackupsVestaUserInfoRefetchQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("useMWChatEncryptedBackupsVestaUserInfo_viewer.graphql",["useMWChatEncryptedBackupsVestaUserInfoRefetchQuery.graphql"],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:{refetch:{connection:null,fragmentPathInResult:["viewer"],operation:n("useMWChatEncryptedBackupsVestaUserInfoRefetchQuery.graphql")}},name:"useMWChatEncryptedBackupsVestaUserInfo_viewer",selections:[{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null}],type:"Viewer",abstractKey:null};a.exports=e}),null);
__d("useMWChatEncryptedBackupsVestaUserInfo",["CometRelay","react","react-compiler-runtime","useMWChatEncryptedBackupsVestaUserInfo_viewer.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(t){var r,a,i,l,s=o("react-compiler-runtime").c(7),u=t.viewer$key,c=o("CometRelay").useRefetchableFragment(e!==void 0?e:e=n("useMWChatEncryptedBackupsVestaUserInfo_viewer.graphql"),u),d=c[0],m=c[1],p=d==null||(r=d.messenger_default_encrypted_backup)==null?void 0:r.vesta_user_info,_;s[0]!==m?(_=function(){m({},{fetchPolicy:"network-only"})},s[0]=m,s[1]=_):_=s[1];var f=_,g=(a=p==null?void 0:p.attempts_remaining)!=null?a:null,h=(i=p==null?void 0:p.is_registered)!=null?i:null,y=(l=p==null?void 0:p.login_timeout_remaining_secs)!=null?l:null,C;return s[2]!==f||s[3]!==g||s[4]!==h||s[5]!==y?(C={attemptsRemaining:g,isRegistered:h,loginTimeoutRemainingSecs:y,refetchVestaClientInfo:f},s[2]=f,s[3]=g,s[4]=h,s[5]=y,s[6]=C):C=s[6],C}l.default=c}),98);
__d("MWEBVestaUserInfoContext.react",["CometRelay","FBLogger","MWEBVestaUserInfoContextProvider_viewer.graphql","react","react-compiler-runtime","useMWChatEncryptedBackupsVestaUserInfo"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.createContext,m=c.useContext,p=c.useMemo,_=d(null);function f(){var e=m(_);if(e==null)throw r("FBLogger")("messenger_web").mustfixThrow("useMWEBVestaUserInfo must be used inside MWEBVestaUserInfoContext");return e}function g(){var e=f(),t=e.attemptsRemaining,n=e.loginTimeoutRemainingSecs;return t===0||n!=null&&n>0}function h(t){var a=o("react-compiler-runtime").c(10),i=t.children,l=t.vestaClientID,s=t.viewer$key,c=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEBVestaUserInfoContextProvider_viewer.graphql"),s),d;a[0]!==c?(d={viewer$key:c},a[0]=c,a[1]=d):d=a[1];var m=r("useMWChatEncryptedBackupsVestaUserInfo")(d),p=l!=null?l:null,f;a[2]!==p||a[3]!==m.attemptsRemaining||a[4]!==m.loginTimeoutRemainingSecs||a[5]!==m.refetchVestaClientInfo?(f={attemptsRemaining:m.attemptsRemaining,loginTimeoutRemainingSecs:m.loginTimeoutRemainingSecs,refetchVestaClientInfo:m.refetchVestaClientInfo,vestaClientID:p},a[2]=p,a[3]=m.attemptsRemaining,a[4]=m.loginTimeoutRemainingSecs,a[5]=m.refetchVestaClientInfo,a[6]=f):f=a[6];var g=f,h;return a[7]!==i||a[8]!==g?(h=u.jsx(_.Provider,{value:g,children:i}),a[7]=i,a[8]=g,a[9]=h):h=a[9],h}l.useMWEBVestaUserInfo=f,l.useMWEBIsCooldownOrLockOutState=g,l.MWEBVestaUserInfoContextProvider=h}),98);
__d("MWEBVirtualDevicesContextProvider.react",["MAWOneTimeCodeGating","MWEBVirtualDevicesContext.react","cr:12343","react","react-compiler-runtime","useMWEncryptedBackupsListenForChangesToVirtualDevicesV2"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(16),a=e.children,i=e.hasOtcEligibleDevicesInitialValue,l=e.hsmCreationTimeInitialValue,u=e.offlineDevicesCountInitialValue,c=e.vestaClientIDInitialValue,d=u===void 0?-1:u,m=c!=null?c:void 0,p;t[0]!==l||t[1]!==d||t[2]!==m?(p={hsmCreationTimeInitialValue:l,offlineDevicesCountInitialValue:d,vestaClientIDInitialValue:m},t[0]=l,t[1]=d,t[2]=m,t[3]=p):p=t[3];var _=r("useMWEncryptedBackupsListenForChangesToVirtualDevicesV2")(p),f=_.hsmCreationTime,g=_.offlineDevicesCount,h=_.vestaClientID,y=n("cr:12343")(),C=y.hasOtcEligibleDevices,b;t[4]!==C||t[5]!==i?(b=o("MAWOneTimeCodeGating").isOneTimeCodeEnabled()&&(i===!0||C),t[4]=C,t[5]=i,t[6]=b):b=t[6];var v=b,S=h!=null,R;t[7]!==v||t[8]!==f||t[9]!==g||t[10]!==S||t[11]!==h?(R={virtualDeviceInfo:{doesUserHaveOtcEligibleDevices:v,hsmCreationTime:f,isPINCodeRegistered:S,offlineDevicesCount:g,vestaClientID:h}},t[7]=v,t[8]=f,t[9]=g,t[10]=S,t[11]=h,t[12]=R):R=t[12];var L=R,E;return t[13]!==a||t[14]!==L?(E=s.jsx(o("MWEBVirtualDevicesContext.react").MWEBVirtualDevicesContext.Provider,{value:L,children:a}),t[13]=a,t[14]=L,t[15]=E):E=t[15],E}l.default=c}),98);
__d("useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup",selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null}],storageKey:null}],type:"XFBEncryptedBackup",abstractKey:null};a.exports=e}),null);
__d("useMWEncryptedBackupsGetVirtualDevicesPreloaded",["CometRelay","react","react-compiler-runtime","useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(t){var r=o("react-compiler-runtime").c(4),a=t.encryptedBackup,i=o("CometRelay").useFragment(e!==void 0?e:e=n("useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup.graphql"),a),l;r[0]!==(i==null?void 0:i.virtual_devices)?(l=function(){var e=0,t=null;return i==null||i.virtual_devices.forEach(function(n){e:switch(n.device_type){case"HSM":{t=n.client_generated_id;break e}case"OFFLINE":{e=e+1;break e}default:}}),{offlineDevicesCount:e,vestaClientID:t}},r[0]=i==null?void 0:i.virtual_devices,r[1]=l):l=r[1],i==null||i.virtual_devices;var s=l,u;return r[2]!==s?(u={getVirtualDevices:s},r[2]=s,r[3]=u):u=r[3],u}l.default=c}),98);
__d("MAWEncryptedBackupsRestoreDialogContexts.react",["CometRelay","CometTransientDialogProvider.react","MAWEncryptedBackupsRestoreDialogContexts_query.graphql","MWChatEncryptedBackupOnCloseContextProvider.react","MWChatEncryptedBackupResetContextProvider.react","MWChatEncryptedBackupsDismissalDialogContextProvider.react","MWChatEncryptedBackupsRestoreUpsellDialogContextProvider.react","MWEBFlowSourceContextProvider.react","MWEBHasSeenAutoRestoreNoticeContextProvider.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContextProvider.react","react","react-compiler-runtime","useMWEncryptedBackupsGetVirtualDevicesPreloaded"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a,i,l,s,c=o("react-compiler-runtime").c(25),d=t.children,m=t.query,p=t.setIsDialogPersisted,_=t.source,f=o("CometRelay").useFragment(e!==void 0?e:e=n("MAWEncryptedBackupsRestoreDialogContexts_query.graphql"),m),g;c[0]!==f.xfb_backup?(g={encryptedBackup:f.xfb_backup},c[0]=f.xfb_backup,c[1]=g):g=c[1];var h=r("useMWEncryptedBackupsGetVirtualDevicesPreloaded")(g),y=h.getVirtualDevices,C;c[2]!==y?(C=y(),c[2]=y,c[3]=C):C=c[3];var b=C,v=b.offlineDevicesCount,S=b.vestaClientID,R=(a=(i=f.xfb_backup)==null?void 0:i.has_otc_eligible_devices)!=null?a:void 0,L=(l=(s=f.viewer.encrypted_backup)==null?void 0:s.has_seen_eb_auto_restore_notice)!=null?l:!1,E;c[4]!==p?(E=function(t){p==null||p(t)},c[4]=p,c[5]=E):E=c[5];var k;c[6]!==d?(k=u.jsx(r("CometTransientDialogProvider.react"),{children:d}),c[6]=d,c[7]=k):k=c[7];var I;c[8]!==f.viewer||c[9]!==k?(I=u.jsx(o("MWEBVestaUserInfoContext.react").MWEBVestaUserInfoContextProvider,{viewer$key:f.viewer,children:k}),c[8]=f.viewer,c[9]=k,c[10]=I):I=c[10];var T;c[11]!==E||c[12]!==I?(T=u.jsx(r("MWChatEncryptedBackupOnCloseContextProvider.react"),{children:u.jsx(r("MWChatEncryptedBackupResetContextProvider.react"),{children:u.jsx(r("MWChatEncryptedBackupsDismissalDialogContextProvider.react"),{isDismissedDisabledValue:!1,children:u.jsx(r("MWChatEncryptedBackupsRestoreUpsellDialogContextProvider.react"),{setIsDialogPersisted:E,children:I})})})}),c[11]=E,c[12]=I,c[13]=T):T=c[13];var D;c[14]!==_||c[15]!==T?(D=u.jsx(r("MWEBFlowSourceContextProvider.react"),{source:_,children:T}),c[14]=_,c[15]=T,c[16]=D):D=c[16];var x;c[17]!==L||c[18]!==D?(x=u.jsx(r("MWEBHasSeenAutoRestoreNoticeContextProvider.react"),{hasSeenNotice:L,children:D}),c[17]=L,c[18]=D,c[19]=x):x=c[19];var $;return c[20]!==v||c[21]!==x||c[22]!==R||c[23]!==S?($=u.jsx(r("MWEBVirtualDevicesContextProvider.react"),{hasOtcEligibleDevicesInitialValue:R,offlineDevicesCountInitialValue:v,vestaClientIDInitialValue:S,children:x}),c[20]=v,c[21]=x,c[22]=R,c[23]=S,c[24]=$):$=c[24],$}l.default=c}),98);
__d("MWEBPinCodeUpsellDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBPinCodeUpsellDialog.react").__setRef("MWEBPinCodeUpsellDialog.entrypoint")};l.default=e}),98);
__d("MWEBRestoreOTCFirstDialogStepDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferred")("MWEBRestoreOTCFirstStep.react").__setRef("MWEBRestoreOTCFirstDialogStepDeferred.react"));function c(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(u,babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}l.default=c}),98);
__d("usePushFDSMultiStepDialogEntryPointPage",["BaseMultiPageEntryPointImpl.react","CometRelay","FDSMultiStepDialogPushPageContext.react","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider"],(function(t,n,r,o,a,i,l){"use strict";var e=["fallback"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p=c.useTransition;function _(t,n){var a=o("react-compiler-runtime").c(8),i=p(),l=i[0],s=i[1],c=r("useCometRelayEntrypointContextualEnvironmentProvider")(),d=m(o("FDSMultiStepDialogPushPageContext.react").FDSMultiStepDialogPushPageContext),_;a[0]!==c||a[1]!==t||a[2]!==n||a[3]!==d?(_=function(i,l){n!=null&&s(function(){var a=o("CometRelay").loadEntryPoint(c,t,n),s=l!=null?l:{},m=s.fallback,p=babelHelpers.objectWithoutPropertiesLoose(s,e);d(function(){return u.jsx(r("BaseMultiPageEntryPointImpl.react"),{entryPoint:t,environmentProvider:c,fallback:m,loadedEntryPoint:a,otherProps:i,preloadParams:n,usePlaceholder:m!=null})},p)})},a[0]=c,a[1]=t,a[2]=n,a[3]=d,a[4]=_):_=a[4];var f=_,g;return a[5]!==l||a[6]!==f?(g=[l,f],a[5]=l,a[6]=f,a[7]=g):g=a[7],g}l.default=_}),98);
__d("MAWEncryptedBackupsRestoreStep.react",["MWChatEncryptedBackupResetContext","MWChatEncryptedBackupsQPLSource.enum","MWEBOTCDialogStepDeferred.react","MWEBPinCodeUpsellDialog.entrypoint","MWEBRestoreOTCFirstDialogStepDeferred.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","deferredLoadComponent","react","react-compiler-runtime","requireDeferred","requireDeferredForDisplay","usePushFDSMultiStepDialogEntryPointPage"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=r("deferredLoadComponent")(r("requireDeferred")("MWChatEncryptedBackupsAccessCodeInputStep.react").__setRef("MAWEncryptedBackupsRestoreStep.react")),p=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWChatEncryptedBackupsPinCodeRestoreStep.react").__setRef("MAWEncryptedBackupsRestoreStep.react")),_=r("deferredLoadComponent")(r("requireDeferred")("MWChatEncryptedBackupsKVSOnlyRestoreStep.react").__setRef("MAWEncryptedBackupsRestoreStep.react"));function f(e){var t=o("react-compiler-runtime").c(21),n=e.offlineDevicesCount,a=e.onClose,i=e.onComplete,l=e.onForgotRC,u=e.onSkip,c=e.pushPage,d=e.shouldShowForgotButton,p=e.source,f=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),g=f.virtualDeviceInfo;if(g.doesUserHaveOtcEligibleDevices){var h=p===r("MWChatEncryptedBackupsQPLSource.enum").INBOX_INTERSTITIAL_SOFTBLOCK;if(h){var y;return t[0]!==a||t[1]!==i||t[2]!==u||t[3]!==c?(y=s.jsx(r("MWEBRestoreOTCFirstDialogStepDeferred.react"),{onCloseDialog:a,onComplete:i,onSkip:u,pushPage:c}),t[0]=a,t[1]=i,t[2]=u,t[3]=c,t[4]=y):y=t[4],y}var C;return t[5]!==a||t[6]!==i||t[7]!==u||t[8]!==c?(C=s.jsx(r("MWEBOTCDialogStepDeferred.react"),{onClose:a,onComplete:i,onSkip:u,pushPage:c}),t[5]=a,t[6]=i,t[7]=u,t[8]=c,t[9]=C):C=t[9],C}if(n!==null&&n>=1){var b;return t[10]!==a||t[11]!==i||t[12]!==l||t[13]!==u||t[14]!==c||t[15]!==d?(b=s.jsx(m,{onClose:a,onComplete:i,onForgotRC:l,onSkip:u,pushPage:c,shouldShowForgotButton:d}),t[10]=a,t[11]=i,t[12]=l,t[13]=u,t[14]=c,t[15]=d,t[16]=b):b=t[16],b}var v;return t[17]!==a||t[18]!==i||t[19]!==c?(v=s.jsx(_,{onClose:a,onComplete:i,pushPage:c}),t[17]=a,t[18]=i,t[19]=c,t[20]=v):v=t[20],v}function g(e){var t=e.clientID,n=e.offlineDevicesCount,a=e.onClose,i=e.onComplete,l=e.onForgotRC,u=e.onSkip,m=e.pushPage,_=e.shouldShowForgotButton,g=e.source,h=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),y=r("usePushFDSMultiStepDialogEntryPointPage")(r("MWEBPinCodeUpsellDialog.entrypoint"),{}),C=y[0],b=y[1],v=d(r("MWChatEncryptedBackupResetContext")),S=c(function(){var e;if(((e=v.isEncryptedBackupResetStartedRef)==null?void 0:e.current)===!0){i();return}b({onClose:u,onComplete:i},{withoutBackButton:!0})},[v,i,u,b]);return h||t!=null?s.jsx(p,{onClose:a,onComplete:i,onSkip:u,pushPage:m,shouldShowForgotButton:_}):s.jsx(f,{offlineDevicesCount:n,onClose:a,onComplete:S,onForgotRC:l,onSkip:u,pushPage:m,shouldShowForgotButton:_,source:g})}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),98);
__d("MAWPinCodeGating",["gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("3955")&&r("justknobx")._("1015")}l.isPinCodeEnabled=e}),98);
__d("MAWUnsupportedIndexedDBNuxKey",["WebStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s="maw_unsupported_browser_nux_dismissed",u="dismissed",c=function(){var t;return((t=(e||(e=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(s))===u},d=function(){var t;(t=(e||(e=r("WebStorage"))).getLocalStorage())==null||t.setItem(s,u)};l.getIsDismissed=c,l.setIsDismissed=d}),98);
__d("MAWUserVisibleErrorsNux.react",["ix","MAWLoggerUtils","MWXIconCautionTriangle","MWXQPCard.react","QPLUserFlow","gkx","qpl","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useEffect,d={hasNoMargin:{marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(17),n=e.hasNoMargin,a=e.icon,i=e.nuxBodyText,l=e.nuxButtonProps,m=e.nuxTitleText,p=e.onCloseButtonClick,_=e.ref,f=e.secondaryButtonProps,g;t[0]===Symbol.for("react.memo_cache_sentinel")?(g=o("MAWLoggerUtils").getInstanceKey(),t[0]=g):g=t[0];var h=g,y,C;t[1]!==m?(y=function(){return r("QPLUserFlow").start(r("qpl")._(1056846286,"652"),{annotations:{string:{nuxTitleText:m.toString()}},instanceKey:h}),(function(){return r("QPLUserFlow").endSuccess(r("qpl")._(1056846286,"652"),{instanceKey:h})})},C=[h,m],t[1]=m,t[2]=y,t[3]=C):(y=t[2],C=t[3]),c(y,C);var b;t[4]===Symbol.for("react.memo_cache_sentinel")?(b=r("gkx")("4425")?s("428841"):s("212797"),t[4]=b):b=t[4];var v=b,S;t[5]===Symbol.for("react.memo_cache_sentinel")?(S=r("gkx")("4425")?{props:{src:s("1745665")},type:"image"}:{props:{color:"negative",icon:r("MWXIconCautionTriangle"),size:24},type:"icon"},t[5]=S):S=t[5];var R=S,L;t[6]!==a?(L=a!=null?a:r("gkx")("23219")?{props:{src:v},type:"image"}:R,t[6]=a,t[7]=L):L=t[7];var E=n===!0?d.hasNoMargin:void 0,k;return t[8]!==i||t[9]!==l||t[10]!==m||t[11]!==p||t[12]!==_||t[13]!==f||t[14]!==L||t[15]!==E?(k=u.jsx("div",{"data-testid":void 0,children:u.jsx(r("MWXQPCard.react"),{addOnPrimary:l,addOnSecondary:f,body:i,headline:m,icon:L,onClose:p,ref:_,xstyle:E})}),t[8]=i,t[9]=l,t[10]=m,t[11]=p,t[12]=_,t[13]=f,t[14]=L,t[15]=E,t[16]=k):k=t[16],k}l.default=m}),98);
__d("MAWUserVisibleErrorsNuxWrapper.react",["fbt","CometPlaceholder.react","MAWIssueNewUserVisibleErrors","MAWUnsupportedIndexedDBNuxKey","cr:4216","cr:9767","promiseDone","react","react-compiler-runtime","requireDeferred","useMAWGetUserVisibleErrors","useMAWUnsupportedBrowserNUX"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useState,p=r("requireDeferred")("MAWEncryptionErrorHandler").__setRef("MAWUserVisibleErrorsNuxWrapper.react");function _(e){var t=o("react-compiler-runtime").c(23),a=e.children,i=e.hasNoMargin,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l=o("MAWUnsupportedIndexedDBNuxKey").getIsDismissed(),t[0]=l):l=t[0];var c=m(l),d=c[0],_=c[1],g;if(t[1]===Symbol.for("react.memo_cache_sentinel")){var h;g=(h=n("cr:4216").buildUri({cms_id:"597429858389632"}).setDomain("www.facebook.com"))==null||(h=h.setProtocol("https"))==null?void 0:h.toString(),t[1]=g}else g=t[1];var y=g,C;t[2]===Symbol.for("react.memo_cache_sentinel")?(C={label:s._(/*BTDS*/"Learn more"),linkProps:{target:"_blank",url:y}},t[2]=C):C=t[2];var b=C,v=o("useMAWUnsupportedBrowserNUX").useMAWUnsupportedBrowserNUX(),S=v.shouldShowQP,R=m(!1),L=R[0],E=R[1],k=r("useMAWGetUserVisibleErrors")(),I=k[0],T=k[1],D;t[3]!==T||t[4]!==(I==null?void 0:I.errorExtraData)?(D=function(){r("promiseDone")((async function(){if(E(!0),(I==null?void 0:I.errorExtraData)==="MAWEARKeychainDecryptionError"){var e=await p.load();await e.handleEARKeychainError()}return T()})(),f,function(){E(!1)})},t[3]=T,t[4]=I==null?void 0:I.errorExtraData,t[5]=D):D=t[5];var x=D,$;t[6]!==(I==null?void 0:I.errorBodyText)?($=o("MAWIssueNewUserVisibleErrors").errorMsgBodyToFbtMap.get(I==null?void 0:I.errorBodyText),t[6]=I==null?void 0:I.errorBodyText,t[7]=$):$=t[7];var P=$,N;t[8]!==(I==null?void 0:I.errorTitleText)?(N=o("MAWIssueNewUserVisibleErrors").errorMsgTitleToFbtMap.get(I==null?void 0:I.errorTitleText),t[8]=I==null?void 0:I.errorTitleText,t[9]=N):N=t[9];var M=N,w;t[10]!==a||t[11]!==T||t[12]!==d||t[13]!==P||t[14]!==M||t[15]!==I||t[16]!==i||t[17]!==L||t[18]!==x||t[19]!==S?(w=n("cr:9767")&&S&&!d?u.jsx(n("cr:9767"),{hasNoMargin:i,nuxBodyText:o("MAWIssueNewUserVisibleErrors").MAWUnsupportedIndexedDBErrorMsg,nuxButtonProps:b,nuxTitleText:o("MAWIssueNewUserVisibleErrors").MAWUnsupportedIndexedDBErrorMsgTitle,onCloseButtonClick:function(){_(!0),o("MAWUnsupportedIndexedDBNuxKey").setIsDismissed()}}):I&&n("cr:9767")&&M!=null&&P!=null?u.jsx(n("cr:9767"),{nuxBodyText:P,nuxButtonProps:{disabled:L,label:s._(/*BTDS*/"Refresh"),loading:L,onPress:x},nuxTitleText:M,onCloseButtonClick:function(){r("promiseDone")(T())}}):a,t[10]=a,t[11]=T,t[12]=d,t[13]=P,t[14]=M,t[15]=I,t[16]=i,t[17]=L,t[18]=x,t[19]=S,t[20]=w):w=t[20];var A;return t[21]!==w?(A=u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MAWUserVisibleErrorsNuxWrapper",children:w}),t[21]=w,t[22]=A):A=t[22],A}function f(){window.location.reload(!0)}l.default=_}),226);
__d("MWChatEBPinCodeVerifyIndicator.react",["fbt","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.isMessenger,a=n?"disabled_DEPRECATED":"blue",i;t[0]!==a?(i=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("MWXSpinner.react"),{color:a,size:12})}),t[0]=a,t[1]=i):i=t[1];var l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=u.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:u.jsx(r("MWXText.react"),{color:"secondary",testid:void 0,type:"meta3",children:s._(/*BTDS*/"Verifying your PIN")})}),t[2]=l):l=t[2];var c;return t[3]!==i?(c=u.jsxs(r("MWXRow.react"),{align:"center",paddingTop:8,spacing:8,children:[i,l]}),t[3]=i,t[4]=c):c=t[4],c}l.default=c}),226);
__d("MWChatEncrypedBackupsNumericCodeKeyTypes",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["NUM_PAD_WITHOUT_NUM_LOCK","NON_NUMERIC_CHAR"]);i.InvalidKeyType=e}),66);
__d("MWChatEncrypedBackupsNumericCodeValidation",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){var e=/^[0-9]*$/;return e.test(t)},l=function(n,r){return n.length>r?!1:e(n)},s=function(n,r){return n.length!==r?!1:e(n)};i.numericCodeIsValid=l,i.numericCodeIsCompleted=s}),66);
__d("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24783313654667152"}),null);
__d("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters",["MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWChatEncryptedBackupsForgotPINDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsForgotPINDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWChatEncryptedBackupsForgotPINDialog.entrypoint",["JSResourceForInteraction","MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{queryReference:{parameters:r("MWChatEncryptedBackupsForgotPINDialogQuery$Parameters"),variables:{}}}}},root:r("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPINDialog.react").__setRef("MWChatEncryptedBackupsForgotPINDialog.entrypoint")};l.default=e}),98);
__d("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWChatEncryptedBackupsForgotPinStepDialogPage.react").__setRef("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint")};l.default=e}),98);
__d("MWChatEncryptedBackupsNumericCodeErrorWrapper.react",["MWXColumn.react","MWXColumnItem.react","MWXText.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={inputWrapperErrorOnly:{paddingBottom:"x18d9i69",$$css:!0},outterWrapper:{minHeight:"x10sr9ya",$$css:!0},outterWrapperSmall:{minHeight:"x1h7t28c",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(15),a=t.children,i=t.error,l=t.inputSize,s=t.labelId,d=l===void 0?"large":l,m=d==="large"?c.outterWrapper:c.outterWrapperSmall,p=d==="large"?20:0,_;n[0]!==i?(_=(e||(e=r("stylex"))).props(i!=null&&[c.inputWrapperErrorOnly]),n[0]=i,n[1]=_):_=n[1];var f;n[2]!==a||n[3]!==_?(f=u.jsx("div",babelHelpers.extends({},_,{children:a})),n[2]=a,n[3]=_,n[4]=f):f=n[4];var g;n[5]!==i||n[6]!==s?(g=i!=null?u.jsx("div",{className:"x10b6aqq x1y1aw1k x2b8uid",children:u.jsx(r("MWXText.react"),{color:"negative",id:s,testid:void 0,type:"body4",children:i})}):null,n[5]=i,n[6]=s,n[7]=g):g=n[7];var h;n[8]!==p||n[9]!==f||n[10]!==g?(h=u.jsxs(r("MWXColumnItem.react"),{align:"center",paddingHorizontal:p,paddingTop:0,children:[f,g]}),n[8]=p,n[9]=f,n[10]=g,n[11]=h):h=n[11];var y;return n[12]!==m||n[13]!==h?(y=u.jsx(r("MWXColumn.react"),{xstyle:m,children:h}),n[12]=m,n[13]=h,n[14]=y):y=n[14],y}l.default=d}),98);
__d("useMWChatEncryptedBackupsNumericCodeInputAutoFocus",["FocusRegion.react","HiddenSubtreePassiveContext","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect;function d(e){if(!("elementsFromPoint"in document))return!0;var t=e.getBoundingClientRect(),n=document.elementsFromPoint(t.left+t.width/2,t.top+t.height/2);for(var r of n){if(r===e)return!1;var o=window.getComputedStyle(r);if(o.visibility!=="hidden"&&o.display!=="none")return!0}return!1}function m(e){var t=o("react-compiler-runtime").c(3),n,r;t[0]!==e?(n=function(){var t=function(n){n.key>="0"&&n.key<="9"&&e(n.key)};return window.addEventListener("keydown",t),(function(){window.removeEventListener("keydown",t)})},r=[e],t[0]=e,t[1]=n,t[2]=r):(n=t[1],r=t[2]),c(n,r)}function p(e,t,n){var a=o("react-compiler-runtime").c(5),i=u(r("HiddenSubtreePassiveContext")),l;a[0]!==t||a[1]!==e||a[2]!==i||a[3]!==n?(l=function(){var r=i.getCurrentState(),a=["input","textarea"].some(_);!e&&!a&&!r.hiddenOrBackgrounded&&!(!n.current||d(n.current))&&o("FocusRegion.react").focusRegionById(t,o("focusScopeQueries").tabbableScopeQuery)},a[0]=t,a[1]=e,a[2]=i,a[3]=n,a[4]=l):l=a[4],m(l)}function _(e){var t;return(t=document.activeElement)==null?void 0:t.matches(e)}l.default=p}),98);
__d("MWChatEncryptedBackupsNumericCodeInputInner.react",["BaseTextInput.react","FocusRegion.react","MWChatEncrypedBackupsNumericCodeKeyTypes","MWChatEncrypedBackupsNumericCodeValidation","focusScopeQueries","gkx","qex","react","react-compiler-runtime","useMWChatEncryptedBackupsNumericCodeInputAutoFocus"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useRef,p=u.useState,_=r("gkx")("24058"),f=function(t){return["0","1","2","3","4","5","6","7","8","9"].includes(t.key)},g=new Map([["Numpad0","0"],["Numpad1","1"],["Numpad2","2"],["Numpad3","3"],["Numpad4","4"],["Numpad5","5"],["Numpad6","6"],["Numpad7","7"],["Numpad8","8"],["Numpad9","9"]]),h=function(t){var e;return t.location===3&&!f(t)&&!t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey?g.get((e=t.nativeEvent)==null?void 0:e.code):null},y={input:{height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,opacity:"xg01cxk",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},testOpacity:{opacity:"x1ptxcow",$$css:!0}};function C(e){var t=o("react-compiler-runtime").c(46),n=e.extraProps,a=e.props,i=n.hasFocus,l=n.setFocus,u=a["aria-describedby"],c=a["aria-label"],f=a.disabled,g=a.focusRegionId,C=a.inputMode,v=a.isError,S=a.onChange,R=a.onCompletionChange,L=a.onEnabledNumLock,E=a.onPressedInvalidKey,k=a.size,I=a.testid,T=a.value,D=f===void 0?!1:f,x=p(T.length===k),$=x[0],P=x[1],N=m(null),M=m(D);r("useMWChatEncryptedBackupsNumericCodeInputAutoFocus")(i,g,N);var w;t[0]!==$||t[1]!==S||t[2]!==R||t[3]!==k?(w=function(t){var e=o("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsCompleted(t,k);S(t),R!=null&&e!==$&&(P(e),R(e))},t[0]=$,t[1]=S,t[2]=R,t[3]=k,t[4]=w):w=t[4];var A=w,F,O;t[5]===Symbol.for("react.memo_cache_sentinel")?(F=function(){var e=b,t=N.current;return t==null||t.addEventListener("selectstart",e),(function(){t==null||t.removeEventListener("selectstart",e)})},O=[],t[5]=F,t[6]=O):(F=t[5],O=t[6]),d(F,O);var B,W;t[7]!==D||t[8]!==l?(B=function(){D&&l(!1)},W=[D,l],t[7]=D,t[8]=l,t[9]=B,t[10]=W):(B=t[9],W=t[10]),d(B,W);var q,U;t[11]===Symbol.for("react.memo_cache_sentinel")?(U=function(){var e=N.current;if(e!=null){var t=function(){var t=e.value.length,n=e.selectionStart===e.selectionEnd&&e.selectionStart===t;n||e.setSelectionRange(t,t)};return e.addEventListener("selectionchange",t),(function(){e.removeEventListener("selectionchange",t)})}},q=[],t[11]=q,t[12]=U):(q=t[11],U=t[12]),d(U,q);var V,H;t[13]!==D||t[14]!==g?(V=function(){M.current!==D&&(M.current=D,D||o("FocusRegion.react").focusRegionById(g,o("focusScopeQueries").tabbableScopeQuery))},H=[D,g],t[13]=D,t[14]=g,t[15]=V,t[16]=H):(V=t[15],H=t[16]),d(V,H);var G;t[17]!==L||t[18]!==E||t[19]!==T||t[20]!==A?(G=function(t){var e=h(t);if(e!=null){if(E==null||E(o("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NUM_PAD_WITHOUT_NUM_LOCK),r("qex")._("4752")===!0){var n=T+e;A(n),t.preventDefault(),t.stopPropagation()}}else t.key==="NumLock"&&(t.getModifierState==null?void 0:t.getModifierState("NumLock"))===!0&&(L==null||L())},t[17]=L,t[18]=E,t[19]=T,t[20]=A,t[21]=G):G=t[21];var z=G,j=I!=null?I+"-mw-numeric-code-input-prevent-composer-focus-steal":"mw-numeric-code-input-prevent-composer-focus-steal",K,Q;t[22]!==l?(K=function(){l(!1)},Q=function(){l(!0)},t[22]=l,t[23]=K,t[24]=Q):(K=t[23],Q=t[24]);var X;t[25]!==z?(X=function(t){var e=t.keyCode;(e===35||e===36||e===37||e===38||e===39||e===40)&&(t.preventDefault(),t.stopPropagation()),z==null||z(t)},t[25]=z,t[26]=X):X=t[26];var Y;t[27]!==E||t[28]!==k||t[29]!==A?(Y=function(t){var e=t.toString();o("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsValid(e,k)?A(e):E==null||E(o("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NON_NUMERIC_CHAR)},t[27]=E,t[28]=k,t[29]=A,t[30]=Y):Y=t[30];var J;t[31]===Symbol.for("react.memo_cache_sentinel")?(J=[y.input,_&&y.testOpacity],t[31]=J):J=t[31];var Z;return t[32]!==u||t[33]!==c||t[34]!==D||t[35]!==C||t[36]!==v||t[37]!==k||t[38]!==j||t[39]!==K||t[40]!==Q||t[41]!==X||t[42]!==Y||t[43]!==I||t[44]!==T?(Z=s.jsx(r("BaseTextInput.react"),{"aria-describedby":u,"aria-invalid":v,"aria-label":c,autoComplete:"one-time-code",disabled:D,id:j,inputMode:C,maxLength:k,onBlur:K,onFocus:Q,onKeyDown:X,onValueChange:Y,ref:N,testid:void 0,value:T,xstyle:J}),t[32]=u,t[33]=c,t[34]=D,t[35]=C,t[36]=v,t[37]=k,t[38]=j,t[39]=K,t[40]=Q,t[41]=X,t[42]=Y,t[43]=I,t[44]=T,t[45]=Z):Z=t[45],Z}function b(e){e.preventDefault()}l.default=C}),98);
__d("MWChatEncryptedBackupsNumericCodeInputRenderer.react",["MWXRow.react","MWXRowItem.react","MWXText.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useEffect,m=c.useState,p={focusRing:{boxShadow:"x18bame2",outline:"x1a2a7pz xvetz19",$$css:!0},input:{alignItems:"x6s0dn4",borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",borderTopStyle:"x1ejq31n",borderInlineEndStyle:"x18oe1m7",borderBottomStyle:"x1sy0etr",borderInlineStartStyle:"xstzfhl",boxSizing:"x9f619",display:"x78zum5",height:"xng8ra",justifyContent:"xl56j7k",position:"x1n2onr6",width:"x1o817pb",$$css:!0},inputBox:{marginTop:"x1k70j0n",marginInlineEnd:"xbelrpt",marginBottom:"xzueoph",marginInlineStart:"xdzw4kq",$$css:!0},inputColorPrimary:{backgroundColor:"xljulmy",$$css:!0},inputColorSecondary:{backgroundColor:"xwcfey6",$$css:!0},inputSmall:{height:"xaymia4",width:"x1bgwkul",$$css:!0},inputTiny:{height:"x1vqgdyp",width:"x10faclu",$$css:!0}},_="-",f="\u25CF";function g(e,t){return t?"disabled":e===_?"secondary":"primary"}function h(t){var n=o("react-compiler-runtime").c(28),a=t.color,i=t.disabled,l=t.enableMasking,s=t.hasFocus,c=t.inputSize,h=t.size,y=t.testid,C=t.value,b=a===void 0?"primary":a,v=i===void 0?!1:i,S=l===void 0?!1:l,R=c===void 0?"large":c,L=y===void 0?"numeric-renderer":y,E;n[0]!==s||n[1]!==h||n[2]!==C?(E=function(t){return(C.length===t||C.length>t&&t===h-1)&&s},n[0]=s,n[1]=h,n[2]=C,n[3]=E):E=n[3];var k=E,I;n[4]!==h?(I=Array(h).fill(_),n[4]=h,n[5]=I):I=n[5];var T=m(I),D=T[0],x=T[1],$,P;n[6]!==S||n[7]!==h||n[8]!==C?($=function(){x(Array(h).fill().map(function(e,t){return C[t]!=null?S?f:C[t]:_}))},P=[S,h,C],n[6]=S,n[7]=h,n[8]=C,n[9]=$,n[10]=P):($=n[9],P=n[10]),d($,P);var N;if(n[11]!==b||n[12]!==v||n[13]!==S||n[14]!==R||n[15]!==k||n[16]!==L||n[17]!==D){var M;n[19]!==b||n[20]!==v||n[21]!==S||n[22]!==R||n[23]!==k||n[24]!==L?(M=function(n,o){return u.jsx(r("MWXRowItem.react"),{xstyle:p.inputBox,children:u.jsx("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(p.input,R==="small"&&p.inputSmall,R==="tiny"&&p.inputTiny,b==="primary"&&p.inputColorPrimary,b==="secondary"&&p.inputColorSecondary,k(o)&&p.focusRing),{"aria-hidden":n===_,"data-testid":void 0,children:S?u.jsx(r("MWXText.react"),{color:g(n,v),type:n===_?"entityHeaderHeadline1":"headlineEmphasized4",children:v?f:n}):u.jsx(r("MWXText.react"),{color:g(n,v),type:n===_?"entityHeaderHeadline1":"headlineEmphasized1",children:n})}))},o)},n[19]=b,n[20]=v,n[21]=S,n[22]=R,n[23]=k,n[24]=L,n[25]=M):M=n[25],N=D.map(M),n[11]=b,n[12]=v,n[13]=S,n[14]=R,n[15]=k,n[16]=L,n[17]=D,n[18]=N}else N=n[18];var w;return n[26]!==N?(w=u.jsx(r("MWXRow.react"),{align:"center",paddingHorizontal:0,paddingVertical:0,role:"group",spacing:0,children:N}),n[26]=N,n[27]=w):w=n[27],w}l.MWChatEncryptedBackupsNumericCodeInputRenderer=h}),98);
__d("MWChatEncryptedBackupsNumericCodeInput.react",["FocusRegion.react","MWChatEncryptedBackupsNumericCodeInputInner.react","MWChatEncryptedBackupsNumericCodeInputRenderer.react","focusScopeQueries","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useState;function c(e){var t=o("react-compiler-runtime").c(22),n=e.enableMasking,a=e.focusRegionId,i=e.inputSize,l=e.size,c=e.testid,d=e.value,m=e.withAutoFocus,p=m===void 0?!0:m,_=u(!1),f=_[0],g=_[1],h=p?o("focusScopeQueries").tabbableScopeQuery:void 0,y;t[0]===Symbol.for("react.memo_cache_sentinel")?(y={className:"x1n2onr6"},t[0]=y):y=t[0];var C;t[1]!==n||t[2]!==f||t[3]!==e.color||t[4]!==e.disabled||t[5]!==i||t[6]!==l||t[7]!==c||t[8]!==d?(C=s.jsx(o("MWChatEncryptedBackupsNumericCodeInputRenderer.react").MWChatEncryptedBackupsNumericCodeInputRenderer,{color:e.color,disabled:e.disabled,enableMasking:n,hasFocus:f,inputSize:i,size:l,testid:void 0,value:d}),t[1]=n,t[2]=f,t[3]=e.color,t[4]=e.disabled,t[5]=i,t[6]=l,t[7]=c,t[8]=d,t[9]=C):C=t[9];var b;t[10]!==f?(b={hasFocus:f,setFocus:g},t[10]=f,t[11]=b):b=t[11];var v;t[12]!==e||t[13]!==b?(v=s.jsx(r("MWChatEncryptedBackupsNumericCodeInputInner.react"),{extraProps:b,props:e}),t[12]=e,t[13]=b,t[14]=v):v=t[14];var S;t[15]!==C||t[16]!==v?(S=s.jsxs("div",babelHelpers.extends({},y,{children:[C,v]})),t[15]=C,t[16]=v,t[17]=S):S=t[17];var R;return t[18]!==a||t[19]!==h||t[20]!==S?(R=s.jsx(o("FocusRegion.react").FocusRegion,{autoFocusQuery:h,id:a,children:S}),t[18]=a,t[19]=h,t[20]=S,t[21]=R):R=t[21],R}l.default=c}),98);
__d("MWChatEncryptedBackupsOnCloseContext",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).createContext,u=s({onClose:function(){r("FBLogger")("messenger_web_trust").warn("Called onClose that is not implemented. Missing MWChatEncryptedBackupsOnCloseContextProvider?")},optOut:function(){r("FBLogger")("messenger_web_trust").warn("Called optOut that is not implemented. Missing MWChatEncryptedBackupsOnCloseContextProvider?")}}),c=u;l.default=c}),98);
__d("MWChatEncryptedBackupsOnCloseContextProvider.react",["MWChatEncryptedBackupsOnCloseContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(6),n=e.children,a=e.onClose,i=e.optOut,l;t[0]!==a||t[1]!==i?(l={onClose:a,optOut:i},t[0]=a,t[1]=i,t[2]=l):l=t[2];var u=l,c;return t[3]!==n||t[4]!==u?(c=s.jsx(r("MWChatEncryptedBackupsOnCloseContext").Provider,{value:u,children:n}),t[3]=n,t[4]=u,t[5]=c):c=t[5],c}l.default=c}),98);
__d("MWEncryptedBackupsForgotPinStep",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsForgotPINDialog.entrypoint","MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBVirtualDevicesContext.react","MWJewelPopoverDialogContext.react","QPLUserFlow","UserMobileEBState","cr:12326","cr:12327","emptyFunction","gkx","react","react-compiler-runtime","useGetUserMobileEBState","useMWXEntryPointDialog","usePushPage"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onHighIntent"],u=["onHighIntent"],c=["onHighIntent"],d,m=d||(d=o("react")),p=d.useContext,_=s._(/*BTDS*/"Forgot PIN?"),f=s._(/*BTDS*/"Need help?"),g="https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more",h=r("gkx")("14456"),y=function(t){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t===_?"PIN_CODE_RESTORE_FORGOT_PIN_CLICK":"PIN_CODE_RESTORE_NEED_HELP_CLICK")},C=h?_:f,b=function(){y(C)},v={children:C,href:g,onClick:b,rel:"noreferrer",target:"_blank"};function S(t){var a=o("react-compiler-runtime").c(39),i=t.offlineDevicesCount,l=t.onClose,s=t.onComplete,d=t.pushPage,m=r("useGetUserMobileEBState")(),p;a[0]===Symbol.for("react.memo_cache_sentinel")?(p={},a[0]=p):p=a[0];var g=r("usePushPage")(n("cr:12326"),p),h=g[0],C=g[1],b;if(a[1]!==C){var S=C.onHighIntent,R=babelHelpers.objectWithoutPropertiesLoose(C,e);b=R,a[1]=C,a[2]=b}else b=a[2];var L;a[3]===Symbol.for("react.memo_cache_sentinel")?(L={},a[3]=L):L=a[3];var E=r("usePushPage")(n("cr:12327"),L),k=E[0],I=E[1],T;if(a[4]!==I){var D=I.onHighIntent,x=babelHelpers.objectWithoutPropertiesLoose(I,u);T=x,a[4]=I,a[5]=T}else T=a[5];var $;a[6]===Symbol.for("react.memo_cache_sentinel")?($={},a[6]=$):$=a[6];var P=r("usePushPage")(r("MWChatEncryptedBackupsForgotPinStepDialogPage.entrypoint"),$),N=P[0],M=P[1],w;if(a[7]!==M){var A=M.onHighIntent,F=babelHelpers.objectWithoutPropertiesLoose(M,c);w=F,a[7]=M,a[8]=w}else w=a[8];if(m.state===o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE){var O;a[9]!==l||a[10]!==s||a[11]!==d||a[12]!==k?(O=function(){y(_),k({onClose:l,onComplete:s,pushPage:d})},a[9]=l,a[10]=s,a[11]=d,a[12]=k,a[13]=O):O=a[13];var B;return a[14]!==O||a[15]!==T.onHoverIn||a[16]!==T.onHoverOut||a[17]!==T.onPressIn?(B={children:_,onClick:O,onHoverEnd:T.onHoverOut,onHoverStart:T.onHoverIn,onPressStart:T.onPressIn},a[14]=O,a[15]=T.onHoverIn,a[16]=T.onHoverOut,a[17]=T.onPressIn,a[18]=B):B=a[18],B}if(m.state===o("UserMobileEBState").UserMobileEBState.NO_MOBILE){var W;a[19]!==l||a[20]!==s||a[21]!==h?(W=function(){y(_),h({onClose:l,onComplete:s})},a[19]=l,a[20]=s,a[21]=h,a[22]=W):W=a[22];var q;return a[23]!==b.onHoverIn||a[24]!==b.onHoverOut||a[25]!==b.onPressIn||a[26]!==W?(q={children:_,onClick:W,onHoverEnd:b.onHoverOut,onHoverStart:b.onHoverIn,onPressStart:b.onPressIn},a[23]=b.onHoverIn,a[24]=b.onHoverOut,a[25]=b.onPressIn,a[26]=W,a[27]=q):q=a[27],q}var U=i>0||!0;if(U){var V;a[28]!==U||a[29]!==l||a[30]!==s||a[31]!==N||a[32]!==d?(V=function(){y(f),N({isRCDeviceEnabled:U,onClose:l,onComplete:s,pushPage:d},{})},a[28]=U,a[29]=l,a[30]=s,a[31]=N,a[32]=d,a[33]=V):V=a[33];var H;return a[34]!==w.onHoverIn||a[35]!==w.onHoverOut||a[36]!==w.onPressIn||a[37]!==V?(H={children:f,onClick:V,onHoverEnd:w.onHoverOut,onHoverStart:w.onHoverIn,onPressStart:w.onPressIn},a[34]=w.onHoverIn,a[35]=w.onHoverOut,a[36]=w.onPressIn,a[37]=V,a[38]=H):H=a[38],H}else return v}function R(e){var t=o("react-compiler-runtime").c(18),n=e.onDismiss,a=n===void 0?r("emptyFunction"):n,i=r("useGetUserMobileEBState")(),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={},t[0]=l):l=t[0];var s=r("useMWXEntryPointDialog")(r("MAWEncryptedBackupsRestoreDialog.entrypoint"),l),u=s[0],c=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),d=c.virtualDeviceInfo,m=d.offlineDevicesCount,g=p(r("MWJewelPopoverDialogContext.react")),h=g.setIsOpenForDialog,C;t[1]===Symbol.for("react.memo_cache_sentinel")?(C={},t[1]=C):C=t[1];var b=r("useMWXEntryPointDialog")(r("MWChatEncryptedBackupsForgotPINDialog.entrypoint"),C),S,R;if(t[2]!==b?(R=b[0],S=babelHelpers.arrayLikeToArray(b).slice(1),t[2]=b,t[3]=S,t[4]=R):(S=t[3],R=t[4]),i.state===o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE||i.state===o("UserMobileEBState").UserMobileEBState.NO_MOBILE){var L;return t[5]!==h||t[6]!==u||t[7]!==i.state?(L={children:_,onClick:function(){y(_),h(!0),u({onDismissUpsell:r("emptyFunction"),skipToEOTRForgotPINStep:i.state,source:r("MWChatEncryptedBackupsQPLSource.enum").JEWEL_THREADLIST_QP})}},t[5]=h,t[6]=u,t[7]=i.state,t[8]=L):L=t[8],L}var E=m>0;if(E){var k=S,I=k[0],T=k[1],D=k[2],x;t[9]!==a||t[10]!==h||t[11]!==R?(x=function(){y(f),h(!0),R({onDismiss:a})},t[9]=a,t[10]=h,t[11]=R,t[12]=x):x=t[12];var $;return t[13]!==T||t[14]!==I||t[15]!==D||t[16]!==x?($={children:f,onClick:x,onHoverEnd:T,onHoverStart:I,onPressStart:D},t[13]=T,t[14]=I,t[15]=D,t[16]=x,t[17]=$):$=t[17],$}else return v}l.STATIC_HELP_CENTER_LINK_PROPS=v,l.useForgotPinLinkPushPageProps=S,l.useForgotPinLinkShowDialogProps=R}),226);
__d("useMWCancelConfirmationDialog",["fbt","MWChatEncryptedBackupsOnCloseContext","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","react","react-compiler-runtime","useMWXConfirmationDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m={body:s._(/*BTDS*/"Some messages may be missing in your chats."),title:s._(/*BTDS*/"Continue without restoring?")},p={body:s._(/*BTDS*/"If you don't create a new backup, you might not able to recover your chat history if you lose or replace this device."),title:s._(/*BTDS*/"Continue without a new backup?")},_={body:s._(/*BTDS*/"If you don't create a PIN, you might not be able to recover your chat history if you lose or replace this device."),title:s._(/*BTDS*/"Continue without a PIN?")},f={skip_backup:p,skip_pin:_,skip_restore:m},g={skip_backup:{cancelEndPoint:"skip_backup_confirmation",confirmationClickPoint:"SKIP_BACKUP_CONFIRMATION_CLICK",event:o("MWChatEncryptedBackupsQPLEvents").resetBackupQplEvent,skipCancelClickPoint:"SKIP_BACKUP_CANCEL_CLICK"},skip_pin:{cancelEndPoint:"skip_pin_confirmation",confirmationClickPoint:"SKIP_PIN_CONFIRMATION_CLICK",event:o("MWChatEncryptedBackupsQPLEvents").pinCodeChangeQplEvent,skipCancelClickPoint:"SKIP_PIN_CANCEL_CLICK"},skip_restore:{cancelEndPoint:"skip_restore_confirmation",confirmationClickPoint:"SKIP_RESTORE_CONFIRMATION_CLICK",event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,skipCancelClickPoint:"SKIP_RESTORE_CANCEL_CLICK"}};function h(e,t,n){var o;(o=r("QPLUserFlow")).addPoint(e,t),o.addPoint(e,"cancel"),o.addAnnotations(e,{string:{cancel_end_point:n}}),o.endCancel(e)}function y(e,t){r("QPLUserFlow").addPoint(e,t)}function C(e,t,n){var a=o("react-compiler-runtime").c(5),i=r("useMWXConfirmationDialog")(),l=d(r("MWChatEncryptedBackupsOnCloseContext")),s=l.onClose,u=l.optOut,c=n!=null?n:u,m=t!=null?t:s,p;return a[0]!==e||a[1]!==m||a[2]!==c||a[3]!==i?(p=function(){if(e===null){c(),m();return}var t=f[e],n=g[e];i(t,function(){h(n.event,n.confirmationClickPoint,n.cancelEndPoint),c(),m()},function(){y(n.event,n.skipCancelClickPoint)})},a[0]=e,a[1]=m,a[2]=c,a[3]=i,a[4]=p):p=a[4],p}l.default=C}),226);
__d("MWEBPinCodeSize",[],(function(t,n,r,o,a,i){"use strict";var e=6;i.EB_PIN_CODE_SIZE=e}),66);
__d("getMWChatEncryptedBackupsPinCodeInvalidKeyPressedError",["fbt","MWChatEncrypedBackupsNumericCodeKeyTypes"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e,t){if(e===o("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NON_NUMERIC_CHAR)return t==="pin"?s._(/*BTDS*/"Your PIN can only contain numbers"):null;if(e===o("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NUM_PAD_WITHOUT_NUM_LOCK)return s._(/*BTDS*/"Press Num Lock to use the numeric keypad")}l.default=e}),226);
__d("useMWChatEncryptedBackupsNumericCode",["fbt","FBLogger","FocusRegion.react","MWChatEncrypedBackupsNumericCodeKeyTypes","MWChatEncrypedBackupsNumericCodeValidation","MWLogInteraction","focusScopeQueries","getMWChatEncryptedBackupsPinCodeInvalidKeyPressedError","gkx","promiseDone","qex","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useRef,m=c.useState,p={confirmPin:s._(/*BTDS*/"Confirm your PIN"),otc:s._(/*BTDS*/"One-time code"),pin:s._(/*BTDS*/"PIN")};function _(e){var t=e.ariaDescribedBy,n=e.checkPreviouslyInsertedCode,a=e.clearInputOnComplete,i=a===void 0?!1:a,l=e.enableMasking,s=e.errorId,u=e.focusRegionId,c=e.inputSize,_=e.isMismatchError,f=e.onChange,g=e.onComplete,h=e.type,y=m(!1),C=y[0],b=y[1],v=m(!0),S=v[0],R=v[1],L=m(""),E=L[0],k=L[1],I=m(null),T=I[0],D=I[1],x=d(!1),$=function(t){D(null),R(!t)},P=async function(t){if(o("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsCompleted(t,c)){if(x.current&&(r("FBLogger")("wmi_eb").info("onPinCodeSetup already executing, allowing duplicate call for observation"),r("gkx")("19490")))return;if(x.current=!0,o("MWLogInteraction").logPopoverOpenCancel("initiate_restore"),n!=null){var e=n.onCodeMismatch,a=n.previouslyInsertedCode,l=a===t;if(!l){x.current=!1,e();return}}R(!0),b(!0);try{await g(t),i&&k("")}catch(e){k("")}finally{b(!1),x.current=!1}}},N=n!=null&&h==="pin"?"confirmPin":h,M=r("getMWChatEncryptedBackupsPinCodeInvalidKeyPressedError")(T,h),w=s!=null&&_===!0;return[{"aria-describedby":w?s:t,"aria-label":p[N],disabled:C,enableMasking:l,focusRegionId:u,isError:w,onChange:function(t){var e=function(){o("MWChatEncrypedBackupsNumericCodeValidation").numericCodeIsValid(t,c)&&(k(t),D(null),f==null||f(t),r("promiseDone")(P(t)))};e()},onCompletionChange:$,onEnabledNumLock:function(){T===o("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NUM_PAD_WITHOUT_NUM_LOCK&&D(null)},onPressedInvalidKey:function(t){(t===o("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NON_NUMERIC_CHAR||t===o("MWChatEncrypedBackupsNumericCodeKeyTypes").InvalidKeyType.NUM_PAD_WITHOUT_NUM_LOCK&&r("qex")._("4752")!==!0)&&D(t)},size:c,value:E},{clearNumericInput:function(){return k("")},disabled:S,focusOnInput:function(){o("FocusRegion.react").focusRegionById(u,o("focusScopeQueries").tabbableScopeQuery)},invalidKeyPressedError:M,isLoading:C}]}l.useMWChatEncryptedBackupsNumericCode=_}),226);
__d("useMWChatEncryptedBackupsPinCodeRestore",["CometRelay","EBSMGatingUI","JSResourceForInteraction","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBODSEntityName.enum","MWEBPinCodeSize","MWEBUpsellDismissedEnum.facebook","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWChatEncryptedBackupsAddDevice","useMWChatEncryptedBackupsNumericCode","useMWEBFlowSourceContext","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=u.useCallback,d=u.useContext,m=u.useEffect,p=u.useRef,_=u.useState,f=r("requireDeferred")("MWEBUseLocalStorage").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),g=r("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),h=r("requireDeferred")("mwEBGetPINSecretFromVesta").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),y=r("requireDeferred")("updateUpsellsStateInRelayStore").__setRef("useMWChatEncryptedBackupsPinCodeRestore"),C=r("JSResourceForInteraction")("MWEncryptedBackupsHsmFleetMigrationGated").__setRef("useMWChatEncryptedBackupsPinCodeRestore");function b(t){var n=o("react-compiler-runtime").c(47),a=t.clientID,i=t.focusRegionId,l=t.onSubmitPin,s=t.onSubmitPinFailure,u=t.onVestaComplete,c=o("CometRelay").useRelayEnvironment(),b=_(!1),S=b[0],R=b[1],L=_(!1),E=L[0],k=L[1],I=_(!1),T=I[0],D=I[1],x=p(!1),$=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),P=$.startFlow,N=(e||(e=r("useReStore")))(),M=r("useMWEBFlowSourceContext")(),w=_(!1),A=w[0],F=w[1],O=d(r("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted,B;n[0]!==N||n[1]!==c||n[2]!==P?(B=function(t){r("promiseDone")(C.load().then(function(e){e({db:N,environment:c,pinCode:t,startFlow:P})}))},n[0]=N,n[1]=c,n[2]=P,n[3]=B):B=n[3];var W=B,q;n[4]!==N||n[5]!==c||n[6]!==u?(q=function(){var e;r("QPLUserFlow").addPoint((e=o("MWChatEncryptedBackupsQPLEvents")).restoreDeviceAuthQplEvent,"add_device_success"),r("QPLUserFlow").addPoint(e.restoreQplEvent,"restore_auth_finished_and_dismissed"),g.onReady(function(e){var t=e.upsertEBSharedStateEntry;r("promiseDone")(t({db:N,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))}),f.onReady(v),o("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:o("EBSMGatingUI").isBackendSetupSuccessfulForEBSM()}},event:e.restoreQplEvent}),o("MWChatEncryptedBackupsLogging").endSuccess({event:e.restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),u(),F(!1),r("promiseDone")(y.load(),function(e){e({environment:c,updateValue:o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.UPSELLS_DISMISSED})})},n[4]=N,n[5]=c,n[6]=u,n[7]=q):q=n[7];var U=q,V;n[8]!==c||n[9]!==s||n[10]!==O?(V=function(t){s==null||s(),x.current=!0,k(!0),F(!1),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t),o("MWChatEncryptedBackupsLogging").endFailure({errorName:t,event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("promiseDone")(y.load(),function(e){e({environment:c,updateValue:o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),O==null||O(!1)},n[8]=c,n[9]=s,n[10]=O,n[11]=V):V=n[11];var H=V,G;n[12]!==c||n[13]!==s||n[14]!==O?(G=function(){s==null||s(),x.current=!0,k(!0),F(!1),o("MWChatEncryptedBackupsLogging").endFailure({errorName:"pin_code_restore_wrong_recovery_code",event:o("MWChatEncryptedBackupsQPLEvents").restoreDeviceAuthQplEvent,odsEntityName:r("MWEBODSEntityName.enum").MW_EB_PIN_RESTORE_AUTH}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"pin_code_restore_wrong_recovery_code"),r("promiseDone")(y.load(),function(e){e({environment:c,updateValue:o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.NOT_DISMISSED})}),O==null||O(!1)},n[12]=c,n[13]=s,n[14]=O,n[15]=G):G=n[15];var z=G,j;n[16]!==c||n[17]!==W||n[18]!==U||n[19]!==H||n[20]!==z?(j={environment:c,hsmFleetMigrationResetPIN:W,onComplete:U,onFailure:H,onInvalidRecoveryCode:z},n[16]=c,n[17]=W,n[18]=U,n[19]=H,n[20]=z,n[21]=j):j=n[21];var K=r("useMWChatEncryptedBackupsAddDevice")(j),Q=K[0],X;n[22]===Symbol.for("react.memo_cache_sentinel")?(X=function(){k(!1),D(!1),R(!1)},n[22]=X):X=n[22];var Y;n[23]!==Q||n[24]!==a||n[25]!==c||n[26]!==M||n[27]!==l||n[28]!==s||n[29]!==O||n[30]!==P?(Y=async function(t){var e=await h.load();await e({addDevice:Q,clientID:a,environment:c,getSourceFromContext:M,onSubmitPin:l,onSubmitPinFailure:s,onVestaSecretFetch:function(){O==null||O(!0)},pinCode:t,productUseCase:"MSGR_ENC_BACKUP",setIsInProgress:F,setIsPinCodeIncorrect:R,setIsVestaError:D,startFlow:P})},n[23]=Q,n[24]=a,n[25]=c,n[26]=M,n[27]=l,n[28]=s,n[29]=O,n[30]=P,n[31]=Y):Y=n[31];var J;n[32]!==i||n[33]!==Y?(J={enableMasking:!0,focusRegionId:i,inputSize:o("MWEBPinCodeSize").EB_PIN_CODE_SIZE,onChange:X,onComplete:Y,type:"pin"},n[32]=i,n[33]=Y,n[34]=J):J=n[34];var Z=o("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode(J),ee=Z[0],te=Z[1],ne=te.clearNumericInput,re=te.disabled,oe=te.focusOnInput,ae=te.invalidKeyPressedError,ie,le;n[35]!==ne?(ie=function(){x.current&&(ne(),x.current=!1)},le=[ne],n[35]=ne,n[36]=ie,n[37]=le):(ie=n[36],le=n[37]),m(ie,le);var se=re!=null?re:!1,ue;return n[38]!==oe||n[39]!==ee||n[40]!==ae||n[41]!==A||n[42]!==E||n[43]!==S||n[44]!==T||n[45]!==se?(ue={focusOnInput:oe,inputProps:ee,invalidKeyPressedError:ae,isDisabled:se,isInProgress:A,isLabyrinthError:E,isPinCodeIncorrect:S,isVestaError:T},n[38]=oe,n[39]=ee,n[40]=ae,n[41]=A,n[42]=E,n[43]=S,n[44]=T,n[45]=se,n[46]=ue):ue=n[46],ue}function v(e){var t=e.mwEBCreateLocalStorageEntry,n=e.mwEBDeleteLocalStorageEntry;t(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION),t(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2),n(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}l.useMWChatEncryptedBackupsPinCodeRestore=b}),98);
__d("useMWEBFormattedHsmDate",["fbt","formatDate","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(e||(e=o("react"))).useMemo;function c(e){var t=o("react-compiler-runtime").c(4),n;if(t[0]!==e){e:{if(e==null||typeof e!="number"){n=null;break e}var a=new Date(e*1e3);if(isNaN(a.getTime())){n=null;break e}n=r("formatDate")(a,"M j, Y")}t[0]=e,t[1]=n}else n=t[1];var i=n,l;return t[2]!==i?(l=i!=null?s._(/*BTDS*/"You created a PIN on {date}",[s._param("date",i)]):null,t[2]=i,t[3]=l):l=t[3],l}l.default=c}),226);
__d("MWChatEncryptedBackupsPinCodeRestoreStep.react",["fbt","CometPlaceholder.react","JSResourceForInteraction","MWChatEBPinCodeVerifyIndicator.react","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWEBQPResetPIN.react","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsForgotPinStep","MWEncryptedBackupsOtcRestoreSteps","MWLogInteraction","MWXColumn.react","MWXColumnItem.react","MWXDialogPageLegacy.react","MWXLink.react","MWXMultiStepDialogHeader.react","MWXText.react","QPLUserFlow","cr:6247","gkx","lazyLoadComponent","nullthrows","promiseDone","qex","react","react-compiler-runtime","useEncryptedBackupsQplImpressionRef","useMWCancelConfirmationDialog","useMWChatEncryptedBackupsPinCodeRestore","useMWEBFormattedHsmDate","useVisibilityObserver","useWAInfraMobileDeviceList","xplatToDOMRef"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useEffect,p=c.useState,_=r("gkx")("23219"),f=r("JSResourceForInteraction")("MWChatEncryptedBackupsPinCodeBlockedStep.react").__setRef("MWChatEncryptedBackupsPinCodeRestoreStep.react"),g=r("lazyLoadComponent")(f),h="chat-encrypted-backups-dialog-layout-restore-step";function y(e){var t=o("react-compiler-runtime").c(12),n=e.isInProgress,a=e.onClose,i=e.onComplete,l=e.pushPage,s=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),c=s.virtualDeviceInfo,d=c.offlineDevicesCount,m=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),p=r("useWAInfraMobileDeviceList")(),_=p.length>0,f;t[0]!==d||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==_?(f={hasMobileDevices:_,offlineDevicesCount:d,onClose:a,onComplete:i,pushPage:l},t[0]=d,t[1]=a,t[2]=i,t[3]=l,t[4]=_,t[5]=f):f=t[5];var g=o("MWEncryptedBackupsForgotPinStep").useForgotPinLinkPushPageProps(f),h=m||n?"disabled":"highlight",y=m||n,C;t[6]!==g||t[7]!==y?(C=u.jsx(r("MWXLink.react"),babelHelpers.extends({},g,{disabled:y,testid:void 0})),t[6]=g,t[7]=y,t[8]=C):C=t[8];var b;return t[9]!==h||t[10]!==C?(b=u.jsx(r("MWXText.react"),{color:h,type:"button2",children:C}),t[9]=h,t[10]=C,t[11]=b):b=t[11],b}function C(e){var t=o("react-compiler-runtime").c(50),a=e.onClose,i=e.onComplete,l=e.onSkip,c=e.pushPage,d=e.shouldShowForgotButton,f=d===void 0?!0:d,C=p(null),S=C[0],R=C[1],L;if(t[0]===Symbol.for("react.memo_cache_sentinel")){var E;L=(E=r("qex")._("4525"))!=null?E:!1,t[0]=L}else L=t[0];var k=L,I=r("useMWCancelConfirmationDialog")("skip_restore"),T=k?I:void 0,D=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),x=D.virtualDeviceInfo,$=x.hsmCreationTime,P=x.vestaClientID,N;t[1]!==P?(N=r("nullthrows")(P),t[1]=P,t[2]=N):N=t[2];var M;t[3]!==i||t[4]!==N?(M={clientID:N,focusRegionId:h,onVestaComplete:i},t[3]=i,t[4]=N,t[5]=M):M=t[5];var w=o("useMWChatEncryptedBackupsPinCodeRestore").useMWChatEncryptedBackupsPinCodeRestore(M),A=w.focusOnInput,F=w.inputProps,O=w.invalidKeyPressedError,B=w.isInProgress,W=w.isLabyrinthError,q=w.isPinCodeIncorrect,U=w.isVestaError,V=p(!1),H=V[0],G=V[1],z=B||H,j=r("useMWEBFormattedHsmDate")($),K;t[6]===Symbol.for("react.memo_cache_sentinel")?(K=s._(/*BTDS*/"Some messages are missing. Enter your PIN to restore your chat history."),t[6]=K):K=t[6];var Q=K,X;t[7]!==j?(X=r("qex")._("4521")&&j!=null?j:Q,t[7]=j,t[8]=X):X=t[8];var Y=X,J=o("MWEBVestaUserInfoContext.react").useMWEBVestaUserInfo(),Z=J.attemptsRemaining,ee=J.loginTimeoutRemainingSecs,te=J.refetchVestaClientInfo,ne=Z===0,re=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),oe=r("useEncryptedBackupsQplImpressionRef")(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_SCREEN",void 0,function(){A(),me!=null&&r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_OPTION_DISPLAYED_RESTORE_SCREEN")}),ae=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),ie=ae.virtualDeviceInfo,le=ie.doesUserHaveOtcEligibleDevices,se;t[9]!==z||t[10]!==a||t[11]!==i||t[12]!==c||t[13]!==f?(se=f?u.jsx(y,{isInProgress:z,onClose:a,onComplete:i,pushPage:c}):null,t[9]=z,t[10]=a,t[11]=i,t[12]=c,t[13]=f,t[14]=se):se=t[14];var ue=se,ce;t[15]!==a||t[16]!==i||t[17]!==l||t[18]!==c?(ce=function(){o("MWEncryptedBackupsOtcRestoreSteps").pushByOneTimeCodePage({onClose:a,onOtcComplete:i,onSkip:l,pushPage:c})},t[15]=a,t[16]=i,t[17]=l,t[18]=c,t[19]=ce):ce=t[19];var de=ce,me=le?u.jsx(r("MWXText.react"),{color:re||z?"disabled":"highlight",type:"button2",children:u.jsx(r("MWXLink.react"),{disabled:re||z,onClick:function(){o("MWLogInteraction").logPopoverOpenCancel("initiate_restore"),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_USE_ONE_TIME_CODE_CLICK"),de()},rel:"noreferrer",testid:void 0,children:s._(/*BTDS*/"Use a one-time code instead")})}):null,pe=me!=null?me:ue,_e;t[20]===Symbol.for("react.memo_cache_sentinel")?(_e=s._(/*BTDS*/"Enter your PIN to restore your chat history"),t[20]=_e):_e=t[20];var fe=_e,ge;t[21]===Symbol.for("react.memo_cache_sentinel")?(ge={onVisible:v},t[21]=ge):ge=t[21];var he=r("useVisibilityObserver")(ge),ye;if(t[22]!==Y||t[23]!==Z||t[24]!==F||t[25]!==O||t[26]!==re||t[27]!==z||t[28]!==W||t[29]!==q||t[30]!==U||t[31]!==ee||t[32]!==ne||t[33]!==a||t[34]!==i||t[35]!==l||t[36]!==S||t[37]!==c||t[38]!==oe||t[39]!==te||t[40]!==pe||t[41]!==me||t[42]!==he){var Ce;ye=re?u.jsx(g,{attemptsRemaining:Z,loginTimeoutRemainingSecs:ee,onClose:a,onComplete:i,onSkip:l,pushPage:c,refetchVestaClientInfo:te}):u.jsx(r("MWXDialogPageLegacy.react"),{callToActionGroupLayout:"expanded",includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION:!1,ref:o("xplatToDOMRef").xplatToDOMRef(oe),children:u.jsxs(r("MWXColumn.react"),{align:"center",paddingHorizontal:16,paddingVertical:16,ref:he,spacing:0,children:[u.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:16,children:u.jsx("div",{className:"xg87l8a",children:u.jsx(r("MWEBQPResetPIN.react"),{})})}),u.jsx(r("MWXColumnItem.react"),{align:"center",paddingVertical:16,children:u.jsx(r("MWXText.react"),{align:"center",isSemanticHeading:!0,type:"headlineEmphasized2",children:fe})}),u.jsx(r("MWXColumnItem.react"),{align:"center",children:u.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:"body3",children:u.jsx("div",{className:"x1l90r2v x2b8uid",children:Y})})}),u.jsx(r("MWXColumnItem.react"),{align:"center",children:u.jsx(r("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:(Ce=O!=null?O:S)!=null?Ce:q&&me!=null?s._(/*BTDS*/"Incorrect PIN. Try again or use a one-time code."):q?s._(/*BTDS*/"Incorrect PIN. Try again."):W||U?s._(/*BTDS*/"There was an error while using the PIN Code, please try again"):void 0,children:u.jsx(r("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers.extends({},F,{disabled:ee!=null||ne||z,testid:void 0}))})}),z&&u.jsx(r("MWXColumnItem.react"),{align:"center",children:u.jsx(r("MWChatEBPinCodeVerifyIndicator.react"),{isMessenger:_})}),!z&&u.jsx(r("MWXColumnItem.react"),{align:"center",children:u.jsx("div",{className:"x1y1aw1k",children:pe})}),n("cr:6247")!=null&&u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWChatEncryptedBackupsPinCodeRestoreStep",children:u.jsx(n("cr:6247"),{onComplete:i,onError:R,setIsLoading:G})})]})}),t[22]=Y,t[23]=Z,t[24]=F,t[25]=O,t[26]=re,t[27]=z,t[28]=W,t[29]=q,t[30]=U,t[31]=ee,t[32]=ne,t[33]=a,t[34]=i,t[35]=l,t[36]=S,t[37]=c,t[38]=oe,t[39]=te,t[40]=pe,t[41]=me,t[42]=he,t[43]=ye}else ye=t[43];var be=ye,ve;t[44]===Symbol.for("react.memo_cache_sentinel")?(ve=[],t[44]=ve):ve=t[44],m(b,ve);var Se;t[45]!==T?(Se=u.jsx(r("MWXMultiStepDialogHeader.react"),{onClose:T,withCloseButton:k,withoutBackButton:!0}),t[45]=T,t[46]=Se):Se=t[46];var Re;return t[47]!==be||t[48]!==Se?(Re=u.jsxs(u.Fragment,{children:[Se,be]}),t[47]=be,t[48]=Se,t[49]=Re):Re=t[49],Re}function b(){r("promiseDone")(f.load())}function v(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").ebResetObserverQplEvent,"PUSH_PIN_CODE_RESTORE_DIALOG_VISIBLE"),r("QPLUserFlow").endSuccess(o("MWChatEncryptedBackupsQPLEvents").ebResetObserverQplEvent)}l.default=C}),226);
__d("MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql",["MWChatEncryptedBackupsUpsellMessengerInboxQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e={defaultValue:!1,kind:"LocalArgument",name:"doesUserHaveAnEB"},t={defaultValue:!1,kind:"LocalArgument",name:"shouldShowOnboardingInterstitial"},r={alias:null,args:null,kind:"ScalarField",name:"encrypted_backups_web_evergreen_pin_upsell_display_timestamp",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"is_eb_restore_upsells_dismissed",storageKey:null},a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null};return{fragment:{argumentDefinitions:[e,t],kind:"Fragment",metadata:null,name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",selections:[{condition:"doesUserHaveAnEB",kind:"Condition",passingValue:!0,selections:[{args:null,kind:"FragmentSpread",name:"MWEBRestoreInterstitialDialogWrapper_query"}]},{condition:"shouldShowOnboardingInterstitial",kind:"Condition",passingValue:!0,selections:[{fragment:{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"MWEBOnboardingInterstitialDialogWrapper_query"}],type:"Query",abstractKey:null},kind:"AliasedInlineFragmentSpread",name:"ebOnboardingInterstitialQuery"}]},{args:null,kind:"FragmentSpread",name:"useEncryptedBackupsProcessStatePreLoaded_query"},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWChatEncryptedBackupsVestaUserInfo_viewer"},r,{kind:"ClientExtension",selections:[o]}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,e],kind:"Operation",name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null},o]},{alias:null,args:null,concreteType:"MessengerDefaultEncryptedBackup",kind:"LinkedField",name:"messenger_default_encrypted_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"VestaGetUserInfoResponse",kind:"LinkedField",name:"vesta_user_info",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"attempts_remaining",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_registered",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"login_timeout_remaining_secs",storageKey:null}],storageKey:null}],storageKey:null},r],storageKey:null},{condition:"doesUserHaveAnEB",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEBVirtualDevice",kind:"LinkedField",name:"virtual_devices",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_generated_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"device_type",storageKey:null},a],storageKey:null},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"encrypted_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"has_seen_eb_auto_restore_notice",storageKey:null},a],storageKey:null}],storageKey:null}]},{condition:"shouldShowOnboardingInterstitial",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_onboarding_softblocks",plural:!1,selections:[{args:null,documentName:"MWEBOnboardingInterstitialDialogWrapper_query_webOnlyOnboarding",fragmentName:"MWEBWebOnlyOnboardingInterstitialDialogVariantChooser_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEBOnboardingInterstitialDialogWrapper_query_newUserOnboarding",fragmentName:"MWEBNewUserOnboardingInterstitialDialogVariantChooser_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_auto_eb_upsells",plural:!1,selections:[{args:null,documentName:"MWEBOnboardingInterstitialDialogWrapper_query_autoEB",fragmentName:"MWEBAutoEBOnboardingInterstitialDialogVariantChooser_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_web_only_post_decision_high_engaged_softblock",plural:!1,selections:[{args:null,documentName:"MWEBOnboardingInterstitialDialogWrapper_query_postDecisionOnboarding",fragmentName:"MWEBWebOnboardingPostDecisionInterstitialDialog_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null},{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"is_eb_onboarding_upsells_dismissed",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_eb_onboarding_softblock_hardblock_dismissed",storageKey:null}]}],storageKey:null}]}]},params:{id:n("MWChatEncryptedBackupsUpsellMessengerInboxQuery_facebookRelayOperation"),metadata:{},name:"MWChatEncryptedBackupsUpsellMessengerInboxQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("MWXDialogPageLoadingState.react",["cr:6995","cr:9910","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),a=e.onClose;if(n("cr:9910")!=null){var i=a!=null?a:r("emptyFunction"),l;return t[0]!==i?(l=s.jsx(n("cr:9910"),{onClose:i}),t[0]=i,t[1]=l):l=t[1],l}if(n("cr:6995")!=null){var u;return t[2]!==a?(u=s.jsx(n("cr:6995"),{onClose:a}),t[2]=a,t[3]=u):u=t[3],u}return null}l.default=u}),98);
__d("useHasRestoreInterstitialSoftblockBeenDismissed",["MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n,a=o("react-compiler-runtime").c(4),l=t.backupState,s=t.isCooldownOrLockOutState,c=(e||(e=r("useReStore")))(),d=(n=o("ReQLSuspense").useFirst(function(){return l===4?o("ReQL").fromTableAscending(c.tables.experiences_shared_state).getKeyRange(r("MWEncryptedBackupsLocalStorageEntryEnum").INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED).map(u):o("ReQL").empty()},[l,c],i.id+":34"))!=null?n:!1,m;a[0]!==l||a[1]!==c||a[2]!==d?(m=l===4&&d===!1&&o("MWEncryptedBackupsSharedState").getEntryPresentInLocalStorage({db:c,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED})!=null,a[0]=l,a[1]=c,a[2]=d,a[3]=m):m=a[3];var p=m;return d===!0||p===!0||s}function u(e){var t=e.stateValue;return t!=null}l.default=s}),98);
__d("MWChatEncryptedBackupsUpsellMessengerInbox.react",["BaseModal.react","CometPageletWithDiv.react","CometPlaceholder.react","CometRelay","InteractionTracing.xplat","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql","MWEBEntrypointsKillswitch.enum","MWEBUpsellDismissedEnum.facebook","MWEBUseLocalStorage","MWEBWebOnboardingUpsellUtils","MWEncryptedBackupsLocalStorageEntryEnum","MWEncryptedBackupsSharedState","MWXDialogPageLoadingState.react","MWXMultiStepDialog_DEPRECATED.react","ReQL","ReQLSuspense","cr:10108","cr:13642","cr:3719","cr:4181","cr:7105","cr:8676","cr:9572","promiseDone","react","react-compiler-runtime","useEncryptedBackupsProcessStatePreLoaded","useHasRestoreInterstitialSoftblockBeenDismissed","useMWChatEncryptedBackupsVestaUserInfo","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=p||(p=o("react")),f=p,g=f.useCallback,h=f.useEffect,y=f.useMemo,C=f.useRef,b=f.useState,v=(s=n("cr:9572"))!=null?s:n("cr:3719"),S=(u=(c=(d=n("cr:10108"))!=null?d:n("cr:7105"))!=null?c:n("cr:13642"))!=null?u:n("cr:8676"),R=!o("MWEBWebOnboardingUpsellUtils").IS_E2E_TEST_UNRELATED_TO_ENCRYPTED_BACKUPS&&S!=null;function L(e){r("promiseDone")(o("MWEncryptedBackupsSharedState").upsertEBSharedStateEntry({db:e,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").INTERSTITIAL_DIALOG_VERIFY_DEVICE_NUX_DISMISSED}))}function E(e){var t=o("react-compiler-runtime").c(3),n=e.onDismiss,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],t[0]=a):a=t[0],h(I,a);var i;return t[1]!==n?(i=_.jsx(r("MWXMultiStepDialog_DEPRECATED.react"),{onClose:function(){o("MWChatEncryptedBackupsLogging").closeDialogCancelFlow({event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,onClose:n})},withCloseButton:!0,children:k}),t[1]=n,t[2]=i):i=t[2],i}function k(e){return _.jsx(r("MWXDialogPageLoadingState.react"),{})}k.displayName=k.name+" [from "+i.id+"]";function I(){r("InteractionTracing.xplat").getPendingInteractions().forEach(T)}function T(e){e.addAnnotationBoolean("eb_loading_dialog_shown",!0)}function D(t){var a,l=t.mWChatEncryptedBackupsRestoreUpsellMessengerInboxQueryReference,s=o("CometRelay").usePreloadedQuery(e!==void 0?e:e=n("MWChatEncryptedBackupsUpsellMessengerInboxQuery.graphql"),l),u=C(!1),c=g(function(e){u.current=e},[]),d=(m||(m=r("useReStore")))(),p=r("useEncryptedBackupsProcessStatePreLoaded")({entrypoint:r("MWEBEntrypointsKillswitch.enum").INBOX_INTERSTITIAL,query:s}),f=r("useMWChatEncryptedBackupsVestaUserInfo")({viewer$key:s.viewer}),h=(a=o("ReQLSuspense").useFirst(function(){return R&&p===2?o("ReQL").fromTableAscending(d.tables.experiences_shared_state).getKeyRange(r("MWEncryptedBackupsLocalStorageEntryEnum").EB_ONBOARDING_DEFER_UPSELL_UNTIL_TIME).map(function(e){var t=e.stateValue,n=Date.now()/1e3;return n<+t}):o("ReQL").empty()},[p,d],i.id+":134"))!=null?a:!1,k=b(f.attemptsRemaining===0||f.loginTimeoutRemainingSecs!=null&&f.loginTimeoutRemainingSecs>0),I=k[0],T=r("useHasRestoreInterstitialSoftblockBeenDismissed")({backupState:p,isCooldownOrLockOutState:I}),D=b(s.viewer.is_eb_restore_upsells_dismissed===o("MWEBUpsellDismissedEnum.facebook").MWEBUpsellDismissedStateEnum.ALL_DISMISSED),x=D[0],$=D[1],P=s.ebOnboardingInterstitialQuery,N=b(function(){return Date.now()/1e3}),M=N[0],w=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(d.tables.experiences_shared_state)},[d],i.id+":177"),A=y(function(){var e=o("MWEncryptedBackupsSharedState").getEntryValueFromSharedState({db:d,sharedStateTable:w,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").EB_EVERGREEN_PIN_UPSELL_DISPLAY_TIMESTAMP_SECONDS});return e==null?null:M>=parseInt(e,10)},[w,d,M]),F=s.viewer.encrypted_backups_web_evergreen_pin_upsell_display_timestamp,O=p===3&&f.isRegistered!==!0&&(A!=null?A:F!=null&&M>=F),B=b(function(){return O}),W=B[0],q=B[1];return y(function(){if(x)return null;if(W===!0&&v!=null)return _.jsx(r("BaseModal.react"),{blockKeyCommands:!0,stackingBehavior:"above-everything",children:_.jsx(v,{onClose:function(){q(!1),$(!0)}})});if(p===4||u.current===!0){var e=o("MWEBUseLocalStorage").mwEBGetIsLocalStorageEntryValuePresent(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_TURN_OFF_SECURE_STORAGE);return n("cr:4181")==null||e||T?null:_.jsx(r("BaseModal.react"),{blockKeyCommands:!0,stackingBehavior:"above-everything",children:_.jsx(o("CometPageletWithDiv.react").Placeholder,{fallback:null,name:"MWEBRestoreInterstitialDialogWrapper",children:_.jsx(r("CometPlaceholder.react"),{fallback:_.jsx(E,{onDismiss:function(){$(!0),L(d)}}),name:"MWChatEncryptedBackupsUpsellMessengerInbox.RestoreInterstitialDialog",children:_.jsx(n("cr:4181"),{query:s,setIsClosed:$,setIsDialogPersisted:c,setIsDismissed:function(){return L(d)}})})})})}else if(R&&S&&P!=null&&p===2&&h===!1)return _.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWChatEncryptedBackupsUpsellMessengerInbox.OnboardingInterstitialDialog",children:_.jsx(S,{onClose:function(){return $(!0)},query:P})});return null},[x,W,p,P,h,T,s,c,d])}D.displayName=D.name+" [from "+i.id+"]",l.default=D}),98);
__d("MWEBEOTRDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("MWEBEOTRDialog.react").__setRef("MWEBEOTRDialog.entrypoint"),s={getPreloadProps:function(){return{queries:{}}},root:e};l.default=s}),98);
__d("MWEBErrorStatePhoneInterstitialIcon.react",["ix","MWXImage.react","gkx","react","react-compiler-runtime","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(5),n=e.alt,a=r("useCurrentDisplayMode")(),i=a==="dark",l;t[0]!==i?(l=r("gkx")("23219")?s(i?"210369":"210371"):s("433676"),t[0]=i,t[1]=l):l=t[1];var c=l,d;return t[2]!==n||t[3]!==c?(d=u.jsx(r("MWXImage.react"),{alt:n,src:c}),t[2]=n,t[3]=c,t[4]=d):d=t[4],d}l.default=c}),98);
__d("MWEBLazyLoadResetPinPage",["JSResourceForInteraction","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e=r("JSResourceForInteraction")("MWEBPushResetPinPage").__setRef("MWEBLazyLoadResetPinPage");function s(t,n){r("promiseDone")(e.load().then(function(e){return e(t,n)}))}l.default=s}),98);
__d("MWEBNoMobileEOTRInformationalDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBNoMobileEOTRInformationalDialogForEntrypoint.react").__setRef("MWEBNoMobileEOTRInformationalDialog.entrypoint")};l.default=e}),98);
__d("MWEBNoMobileEOTRResetEBDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBNoMobileEOTRResetEBDialog.react").__setRef("MWEBNoMobileEOTRResetEBDialog.entrypoint")};l.default=e}),98);
__d("MWXIconCloudUpload",["MWXSvgIcon","SVGIcon","cr:22275","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22275")),r("gkx")("23219"));l.default=e}),98);
__d("useMWAbandonRestoreConfirmationDialog",["fbt","MWChatEncryptedBackupResetContext","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","gkx","react","react-compiler-runtime","useMWXConfirmationDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=u.useCallback,d=u.useContext;function m(e){var t=o("react-compiler-runtime").c(4),n=r("useMWXConfirmationDialog")(),a=r("gkx")("23219"),i=d(r("MWChatEncryptedBackupResetContext")),l=i.isEncryptedBackupResetUserJourneyStartedRef,u;return t[0]!==l||t[1]!==e||t[2]!==n?(u=function(){n({body:l!=null&&l.current?s._(/*BTDS*/"Your chats won't be backed up, and you won't be able to restore them if you switch devices."):a?s._(/*BTDS*/"This means that you won't see your full chat history on this device."):s._(/*BTDS*/"This means you won't see your full chat history on this device and new messages you send or receive may not load on other new devices."),cancel:l!=null&&l.current?s._(/*BTDS*/"Go back"):void 0,confirm:l!=null&&l.current?s._(/*BTDS*/"Close"):s._(/*BTDS*/"Don't restore messages"),title:l!=null&&l.current?s._(/*BTDS*/"Are you sure?"):s._(/*BTDS*/"Continue without restoring?")},function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"DONT_RESTORE_CONFIRMATION_CLICK"),e==null||e()},p)},t[0]=l,t[1]=e,t[2]=n,t[3]=u):u=t[3],u}function p(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"DONT_RESTORE_CANCEL_CLICK")}l.default=m}),226);
__d("MWEBNoMobileEOTRInformationalDialog.react",["fbt","AddOnStartOverride.react","MWChatEncryptedBackupResetContext","MWChatEncryptedBackupsQPLEvents","MWEBErrorStatePhoneInterstitialIcon.react","MWEBNoMobileEOTRResetEBDialog.entrypoint","MWXColumn.react","MWXColumnItem.react","MWXDialogFooter.react","MWXDialogHeader.react","MWXDialogPage.react","MWXIconCloudUpload","MWXIconForListCell.react","MWXIconMenuItemTrash","MWXIconMobile","MWXList.react","MWXListCell.react","MWXText.react","MWXTextPairing.react","QPLUserFlow","react","react-compiler-runtime","useMWAbandonRestoreConfirmationDialog","usePopPage","usePushPage","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onHighIntent"],u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext,_=d.useEffect;function f(t){var n=o("react-compiler-runtime").c(20),a=t.onClose,i=t.onCloseConfirm,l=t.onComplete,u;n[0]===Symbol.for("react.memo_cache_sentinel")?(u={},n[0]=u):u=n[0];var d=r("usePushPage")(r("MWEBNoMobileEOTRResetEBDialog.entrypoint"),u),m=d[0],p=d[1],_;if(n[1]!==p){var f=p.onHighIntent,g=babelHelpers.objectWithoutPropertiesLoose(p,e);_=g,n[1]=p,n[2]=_}else _=n[2];var h;n[3]!==a||n[4]!==i||n[5]!==l||n[6]!==m?(h=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_NO_MOBILE_RESET_CLICK"),m({onClose:a,onCloseConfirm:i,onComplete:l})},n[3]=a,n[4]=i,n[5]=l,n[6]=m,n[7]=h):h=n[7];var y=h,C;n[8]!==a?(C=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_NO_MOBILE_NOT_NOW_CLICK"),a==null||a()},n[8]=a,n[9]=C):C=n[9];var b=C,v;n[10]===Symbol.for("react.memo_cache_sentinel")?(v=s._(/*BTDS*/"Reset chat history"),n[10]=v):v=n[10];var S;n[11]!==y||n[12]!==_?(S=babelHelpers.extends({label:v},_,{onPress:y,testid:"mw-eb-no-mobile-eotr-informational-reset-button"}),n[11]=y,n[12]=_,n[13]=S):S=n[13];var R;n[14]===Symbol.for("react.memo_cache_sentinel")?(R=s._(/*BTDS*/"Not now"),n[14]=R):R=n[14];var L;n[15]!==b?(L={label:R,onPress:b},n[15]=b,n[16]=L):L=n[16];var E;return n[17]!==S||n[18]!==L?(E=c.jsx(r("MWXDialogFooter.react"),{callToActionGroupDirection:"backward",primaryCallToAction:S,secondaryCallToAction:L}),n[17]=S,n[18]=L,n[19]=E):E=n[19],E}function g(e){var t=e.closeOnComplete,n=t===void 0?!1:t,a=e.onClose,i=e.onComplete,l=r("usePopPage")(),u=p(r("MWChatEncryptedBackupResetContext")),d=u.isEncryptedBackupResetUserJourneyStartedRef,g=l!=null?function(){l(),d&&(d.current=!1)}:null;_(function(){d&&(d.current=!0)},[d]);var h=r("useMWAbandonRestoreConfirmationDialog")(function(){a==null||a()}),y=m(function(){i==null||i(),n&&(a==null||a())},[n,a,i]),C=r("useVisibilityObserver")({onVisible:function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_NO_MOBILE_INFORMATION_SCREEN")}});return c.jsx(r("MWXDialogPage.react"),{footer:c.jsx(f,{onClose:a,onCloseConfirm:h,onComplete:y}),header:c.jsx(r("MWXDialogHeader.react"),{mdsTitleLayout:"block",onBack:g!=null?g:void 0,onClose:a,withBackButton:g!=null,withCloseButton:a!=null,withoutDivider:!0}),children:c.jsxs(r("MWXColumn.react"),{paddingHorizontal:16,ref:C,spacing:20,testid:void 0,children:[c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx(r("MWEBErrorStatePhoneInterstitialIcon.react"),{})}),c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"center",isSemanticHeading:!0,type:"headlineEmphasized2",children:s._(/*BTDS*/"Reset chat history to access new messages on any device")})}),c.jsx(r("MWXColumnItem.react"),{paddingHorizontal:0,children:c.jsxs(r("MWXList.react"),{children:[c.jsx(r("MWXListCell.react"),{addOnStart:c.jsx(r("AddOnStartOverride.react"),{children:c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMenuItemTrash"),size:"large"})}),content:c.jsx(r("MWXTextPairing.react"),{body:s._(/*BTDS*/"End-to-end encrypted messages will be deleted from your backup and you won\u2019t be able to restore them."),bodyColor:"secondary",headline:s._(/*BTDS*/"Messages currently saved in your backup will be deleted"),level:4})}),c.jsx(r("MWXListCell.react"),{addOnStart:c.jsx(r("AddOnStartOverride.react"),{children:c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconCloudUpload"),size:"large"})}),content:c.jsx(r("MWXTextPairing.react"),{body:s._(/*BTDS*/"Resetting your chat history lets you back up new messages in secure storage."),bodyColor:"secondary",headline:s._(/*BTDS*/"New messages will be backed up"),level:4})}),c.jsx(r("MWXListCell.react"),{addOnStart:c.jsx(r("AddOnStartOverride.react"),{children:c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMobile"),size:"large"})}),content:c.jsx(r("MWXTextPairing.react"),{body:s._(/*BTDS*/"You need a PIN to restore your chat history when you switch devices."),bodyColor:"secondary",headline:s._(/*BTDS*/"You\u2019ll create a PIN to access your chats on any device"),level:4})})]})})]})})}g.displayName=g.name+" [from "+i.id+"]",l.default=g}),226);
__d("MWEBOTCErrorMessages",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=function(){return s._(/*BTDS*/"Incorrect code. Try again.")},u=function(){return s._(/*BTDS*/"Code not found. Try resending a new code.")},c=function(){return s._(/*BTDS*/"Too many attempts. Try again later.")},d=function(){return s._(/*BTDS*/"Code expired. Try generating a new code.")},m=function(){return s._(/*BTDS*/"Something went wrong. Please try again.")},p=function(){return s._(/*BTDS*/"Couldn't send code. Please try again.")},_=function(){return s._(/*BTDS*/"Couldn't load trusted devices. Please try again.")};l.getOtcIsWrongErrorMessage=e,l.getNoSessionOngoingErrorMessage=u,l.getMaxAttemptsReachedErrorMessage=c,l.getSessionExpiredErrorMessage=d,l.getGeneralErrorMessage=m,l.getNotificationFailedToSendErrorMessage=p,l.getFailedToFetchOtcDevicesErrorMessage=_}),226);
__d("MWEBPinCodeTryAgainLaterDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBPinCodeTryAgainLaterDialog.react").__setRef("MWEBPinCodeTryAgainLaterDialog.entrypoint")};l.default=e}),98);
__d("PAKEClientTypeEnum",[],(function(t,n,r,o,a,i){var e=Object.freeze({PAKE_TEST:-1,ENCRYPTED_BACKUPS:0,EB_MULTI_USER_OTC:1});i.default=e}),66);
__d("MWEBRestoreDialog.react",["FBLogger","InteractionTracing.xplat","MAWEncryptedBackupsRestoreStep.react","MAWPinCodeGating","MWChatEncryptedBackupOnCloseContext","MWChatEncryptedBackupsDismissalDialogContext","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsOnCloseContextProvider.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBHasSeenAutoRestoreNoticeContext","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeviceRegistrationId","MWEncryptedBackupsForgotRCStep","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXMultiStepDialog_DEPRECATED.react","PAKECleanupSessionReasonEnum","PAKEClientTypeEnum","QPLUserFlow","UserMobileEBState","cr:12146","cr:12260","cr:27430","cr:3042","promiseDone","qex","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWAbandonRestoreConfirmationDialog","useMWCancelConfirmationDialog","useMWEBAutoRestoreNoticeStep","useMWEBFlowSourceContext","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useContext,p=c.useEffect,_=c.useRef,f=r("requireDeferred")("CleanupPakeSession").__setRef("MWEBRestoreDialog.react"),g=r("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreDialog.react"),h=n("cr:12146")!=null?n("cr:12146"):n("cr:27430");function y(t){var a=o("react-compiler-runtime").c(40),i=t.cancellable,l=t.onClose,s=t.onDismissUpsell,c=t.skipToEOTRForgotPINStep,d=i===void 0?!0:i,y;if(a[0]===Symbol.for("react.memo_cache_sentinel")){var b;y=(b=r("qex")._("4525"))!=null?b:!1,a[0]=y}else y=a[0];var v=y,S=_(!1),R=(e||(e=r("useReStore")))(),L=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),E=L.startFlow,k=r("useMWEBFlowSourceContext")(),I=m(r("MWChatEncryptedBackupsDismissalDialogContext")),T=I.isDismissedDisabled,D=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),x=D.virtualDeviceInfo,$=m(r("MWEBHasSeenAutoRestoreNoticeContext")),P=$.hasSeenNotice,N;a[1]!==s||a[2]!==R||a[3]!==x.doesUserHaveOtcEligibleDevices?(N=function(){s==null||s(),x.doesUserHaveOtcEligibleDevices===!0&&f.onReady(function(e){r("promiseDone")(e({cleanupReason:r("PAKECleanupSessionReasonEnum").FLOW_ABANDONED,clientType:r("PAKEClientTypeEnum").ENCRYPTED_BACKUPS,deviceId:o("MWEncryptedBackupsDeviceRegistrationId").getDeviceRegistrationId(),storage:R}))})},a[1]=s,a[2]=R,a[3]=x.doesUserHaveOtcEligibleDevices,a[4]=N):N=a[4];var M=N,w;a[5]!==l||a[6]!==M?(w=function(){o("MWChatEncryptedBackupsLogging").closeDialogCancelFlow({event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,onClose:function(){return l()}}),M()},a[5]=l,a[6]=M,a[7]=w):w=a[7];var A=w,F=m(r("MWChatEncryptedBackupOnCloseContext")),O=F.setOnCloseSkipConfirmation,B,W;a[8]!==A||a[9]!==O?(B=function(){O(function(){return A})},W=[A,O],a[8]=A,a[9]=O,a[10]=B,a[11]=W):(B=a[10],W=a[11]),p(B,W);var q=r("useMWAbandonRestoreConfirmationDialog")(A),U=r("useMWCancelConfirmationDialog")("skip_restore",l,M),V;a[12]!==l||a[13]!==M?(V=function(){o("MWChatEncryptedBackupsLogging").cancelFlow({cancelEndPoint:"reset_skip",event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),l(),M()},a[12]=l,a[13]=M,a[14]=V):V=a[14];var H=V,G=r("useMWEBAutoRestoreNoticeStep")(),z=x.vestaClientID!=null,j,K;a[15]!==k||a[16]!==E||a[17]!==R?(j=function(){S.current||(S.current=!0,o("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:R,onFetch:function(t){var e=t.ebsmWiped,n=t.firstUpsellTime,a=t.hasEbKeysLocally,i=t.hasEBSM,l=t.hasPDB,s=t.hasUserRestoredBefore,u=t.hasUserRestoredBeforeTemp,c=k();E({additionalAnnotations:{eb_session_identifier:n,ebsm_wiped:e,has_eb_keys_locally:a,has_ebsm:i,has_pdb:l,has_user_restored_before:s,has_user_restored_before_temp:u,restore_upsell_first_impression_time:n},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:c}),c===r("MWChatEncryptedBackupsQPLSource.enum").INBOX_INTERSTITIAL_SOFTBLOCK&&(r("InteractionTracing.xplat").getPendingInteractions().forEach(C),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"INBOX_SOFTBLOCK_RESTORE_SCREEN")),r("promiseDone")(g.load(),function(e){return e(a)})}}))},K=[k,E,R],a[15]=k,a[16]=E,a[17]=R,a[18]=j,a[19]=K):(j=a[18],K=a[19]),p(j,K);var Q=v?U:T?l:q,X;a[20]!==G||a[21]!==k||a[22]!==P||a[23]!==z||a[24]!==l||a[25]!==q||a[26]!==U||a[27]!==H||a[28]!==c||a[29]!==x.offlineDevicesCount||a[30]!==x.vestaClientID?(X=function(t){var e=function(n){return G({hasSeenNotice:P,onNextStep:n,pushPage:t})},a=h!=null?u.jsx(h,{closeOnComplete:!0,onClose:l,onComplete:function(){e(l)}}):null,i=n("cr:12260")!=null?u.jsx(n("cr:12260"),{onClose:l,onComplete:function(){e(l)},pushPage:t}):n("cr:3042")!=null?u.jsx(n("cr:3042"),{onClose:l,onComplete:function(){e(l)},pushPage:t}):null,s=c===o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE?i:c===o("UserMobileEBState").UserMobileEBState.NO_MOBILE?a:null,d=c===o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE||c===o("UserMobileEBState").UserMobileEBState.NO_MOBILE;return d&&s==null&&r("FBLogger")("messenger_web_trust").mustfix("No dialog step found for EOTR flow - empty dialog rendered to the user"),s!=null?s:u.jsx(r("MAWEncryptedBackupsRestoreStep.react"),{clientID:o("MAWPinCodeGating").isPinCodeEnabled()&&z?x.vestaClientID:null,offlineDevicesCount:x.offlineDevicesCount,onClose:v?U:q,onComplete:function(){e(l)},onForgotRC:function(){o("MWEncryptedBackupsForgotRCStep").pushForgotRCPage({onClose:l,onComplete:l,pushPage:t})},onSkip:H,pushPage:t,shouldShowForgotButton:!0,source:k()})},a[20]=G,a[21]=k,a[22]=P,a[23]=z,a[24]=l,a[25]=q,a[26]=U,a[27]=H,a[28]=c,a[29]=x.offlineDevicesCount,a[30]=x.vestaClientID,a[31]=X):X=a[31];var Y;a[32]!==d||a[33]!==Q||a[34]!==X?(Y=u.jsx(r("MWXMultiStepDialog_DEPRECATED.react"),{onClose:Q,size:"small",withCloseButton:d,children:X}),a[32]=d,a[33]=Q,a[34]=X,a[35]=Y):Y=a[35];var J;return a[36]!==l||a[37]!==M||a[38]!==Y?(J=u.jsx(r("MWChatEncryptedBackupsOnCloseContextProvider.react"),{onClose:l,optOut:M,children:Y}),a[36]=l,a[37]=M,a[38]=Y,a[39]=J):J=a[39],J}function C(e){e.addAnnotationBoolean("eb_soft_block",!0)}l.default=y}),98);
__d("MWEBRestoreInThreadScrollPersistentBanner.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXLink.react","MWXText.react","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.useRef,m=r("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreInThreadScrollPersistentBanner.react");function p(){var t=o("react-compiler-runtime").c(17),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n={},t[0]=n):n=t[0];var a=r("useMWXEntryPointDialog")(r("MAWEncryptedBackupsRestoreDialog.entrypoint"),n),i=a[0],l=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),u=l.startFlow,p=(e||(e=r("useReStore")))(),_=d(!1),f=r("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_SCROLL_PERSISTENT_BANNER,g;t[1]!==p||t[2]!==u?(g=function(t){o("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:p,onFetch:function(n){var e=n.ebsmWiped,a=n.firstUpsellTime,i=n.hasEbKeysLocally,l=n.hasEBSM,s=n.hasPDB,c=n.hasUserRestoredBefore,d=n.hasUserRestoredBeforeTemp;u({additionalAnnotations:{eb_session_identifier:a,ebsm_wiped:e,has_eb_keys_locally:i,has_ebsm:l,has_pdb:s,has_user_restored_before:c,has_user_restored_before_temp:d,restore_upsell_first_impression_time:a},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:f}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t),_.current===!1&&(_.current=!0,r("promiseDone")(m.load(),function(e){return e(i)}))}})},t[1]=p,t[2]=u,t[3]=g):g=t[3];var h=g,y;t[4]!==h?(y={onVisible:function(){h("RESTORE_IN_THREAD_PERSISTENT_BANNER_IMPRESSION")}},t[4]=h,t[5]=y):y=t[5];var C=r("useVisibilityObserver")(y),b;t[6]===Symbol.for("react.memo_cache_sentinel")?(b={className:"xfpmyvw x80vd3b x1q0q8m5 xso031l xt0psk2 x1o1nzlu x10b6aqq x889kno x10l6tqk xh8yej3 x1vjfegm"},t[6]=b):b=t[6];var v;t[7]===Symbol.for("react.memo_cache_sentinel")?(v=s._(/*BTDS*/"Messages are missing."),t[7]=v):v=t[7];var S;t[8]!==i||t[9]!==h?(S=function(){h("RESTORE_IN_THREAD_PERSISTENT_BANNER_CTA_CLICKED"),i({source:f})},t[8]=i,t[9]=h,t[10]=S):S=t[10];var R;t[11]===Symbol.for("react.memo_cache_sentinel")?(R=c.jsx("div",{style:{color:"var(--mwp-header-button-color)",display:"inline"},children:s._(/*BTDS*/"Restore now")}),t[11]=R):R=t[11];var L;t[12]!==S?(L=c.jsxs(r("MWXText.react"),{align:"center",color:"secondary",numberOfLines:2,type:"meta4",children:[v," ",c.jsx(r("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:c.jsx(r("MWXLink.react"),{onClick:S,target:"_blank",testid:void 0,weight_DEPRECATED:"semibold",children:R})})]}),t[12]=S,t[13]=L):L=t[13];var E;return t[14]!==C||t[15]!==L?(E=c.jsx("div",babelHelpers.extends({},b,{ref:C,children:L})),t[14]=C,t[15]=L,t[16]=E):E=t[16],E}l.default=p}),226);
__d("MWEBRestoreInThreadScrollPersistentBannerWrapper.react",["MWEBEntrypointsKillswitch.enum","MWEBRestoreInThreadScrollPersistentBanner.react","react","react-compiler-runtime","useCometRouterState","useMWEBBackupState","useMWEBGetUpsellState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){var e=o("react-compiler-runtime").c(2),t=r("useCometRouterState")(),n=t==null?void 0:t.main.route.tabKey,a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={entrypoint:r("MWEBEntrypointsKillswitch.enum").IN_THREAD_SCROLL_BANNER},e[0]=a):a=e[0];var i=r("useMWEBBackupState")(a),l=r("useMWEBGetUpsellState")(),u=l.isRestoreUpsellsDismissed;if(n!=="messenger"&&i===4&&u===!1){var c;return e[1]===Symbol.for("react.memo_cache_sentinel")?(c=s.jsx(r("MWEBRestoreInThreadScrollPersistentBanner.react"),{}),e[1]=c):c=e[1],c}return null}l.default=u}),98);
__d("MWEBRestoreInterstitialDialogWrapper_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEBRestoreInterstitialDialogWrapper_query",selections:[{args:null,kind:"FragmentSpread",name:"MAWEncryptedBackupsRestoreDialogContexts_query"}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("MWEBRestoreInterstitialDialogWrapper.react",["CometRelay","MAWEncryptedBackupsRestoreDialogContexts.react","MWChatEncryptedBackupsQPLSource.enum","MWEBRestoreDialog.react","MWEBRestoreInterstitialDialogWrapper_query.graphql","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react"));function c(t){var a=o("react-compiler-runtime").c(9),i=t.query,l=t.setIsClosed,s=t.setIsDialogPersisted,c=t.setIsDismissed,d=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEBRestoreInterstitialDialogWrapper_query.graphql"),i),m=r("MWChatEncryptedBackupsQPLSource.enum").INBOX_INTERSTITIAL_SOFTBLOCK,p;a[0]!==l?(p=function(){return l(!0)},a[0]=l,a[1]=p):p=a[1];var _;a[2]!==c||a[3]!==p?(_=u.jsx(r("MWEBRestoreDialog.react"),{onClose:p,onDismissUpsell:c}),a[2]=c,a[3]=p,a[4]=_):_=a[4];var f;return a[5]!==d||a[6]!==s||a[7]!==_?(f=u.jsx(r("MAWEncryptedBackupsRestoreDialogContexts.react"),{query:d,setIsDialogPersisted:s,source:m,children:_}),a[5]=d,a[6]=s,a[7]=_,a[8]=f):f=a[8],f}l.default=c}),98);
__d("MWEBRestoreInterstitialDialogWrapperDeferred.react",["deferredLoadComponent","react","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWEBRestoreInterstitialDialogWrapper.react").__setRef("MWEBRestoreInterstitialDialogWrapperDeferred.react"));function c(e){return s.jsx(u,babelHelpers.extends({},e))}c.displayName=c.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWEBUntrustedMobileEOTRInformationalDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBUntrustedMobileEOTRInformationalDialogForEntrypoint.react").__setRef("MWEBUntrustedMobileEOTRInformationalDialog.entrypoint")};l.default=e}),98);
__d("MWEBUntrustedMobileEOTRResetPendingEBDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("MWEBUntrustedMobileEOTRResetPendingEBDialog.react").__setRef("MWEBUntrustedMobileEOTRResetPendingEBDialog.entrypoint")};l.default=e}),98);
__d("useMWEBSendMobileResetNotificationMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24435129696180525"}),null);
__d("useMWEBSendMobileResetNotificationMutation.graphql",["useMWEBSendMobileResetNotificationMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"NetworkVerificationRestoreSendNotificationResponse",kind:"LinkedField",name:"xfb_mweb_send_mobile_reset_notification",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"client_mutation_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBSendMobileResetNotificationMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBSendMobileResetNotificationMutation",selections:e},params:{id:n("useMWEBSendMobileResetNotificationMutation_facebookRelayOperation"),metadata:{},name:"useMWEBSendMobileResetNotificationMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("useMWEBSendMobileResetNotification",["fbt","CometRelay","FBLogger","MWXIconCheckmarkCircle","react","react-compiler-runtime","useMWEBSendMobileResetNotificationMutation.graphql","useMWXPushToast"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=(u||(u=o("react"))).useCallback;function d(){var t=o("react-compiler-runtime").c(7),a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=e!==void 0?e:e=n("useMWEBSendMobileResetNotificationMutation.graphql"),t[0]=a):a=t[0];var i=o("CometRelay").useMutation(a),l=i[0],u=i[1],c=r("useMWXPushToast")(),d;t[1]!==l||t[2]!==c?(d=function(){l({onCompleted:function(){c({icon:r("MWXIconCheckmarkCircle"),title:s._(/*BTDS*/"Request sent")})},onError:function(){r("FBLogger")("wmi_eb").mustfix("[labyrinth_web]Failed to sent notification to user's devices"),c({title:s._(/*BTDS*/"Something went wrong. Please try again later.")})},variables:{}})},t[1]=l,t[2]=c,t[3]=d):d=t[3];var m=d,p;return t[4]!==u||t[5]!==m?(p=[m,u],t[4]=u,t[5]=m,t[6]=p):p=t[6],p}l.default=d}),226);
__d("MWEBUntrustedMobileEOTRInformationalDialog.react",["fbt","AddOnStartOverride.react","MWChatEncryptedBackupResetContext","MWChatEncryptedBackupsQPLEvents","MWEBErrorStatePhoneInterstitialIcon.react","MWEBUntrustedMobileEOTRResetPendingEBDialog.entrypoint","MWXColumn.react","MWXColumnItem.react","MWXDialogFooter.react","MWXDialogHeader.react","MWXDialogPage.react","MWXIconCloudUpload","MWXIconForListCell.react","MWXIconMenuItemTrash","MWXIconMobile","MWXList.react","MWXListCell.react","MWXText.react","MWXTextPairing.react","QPLUserFlow","react","react-compiler-runtime","useMWAbandonRestoreConfirmationDialog","useMWEBSendMobileResetNotification","usePopPage","usePushPage","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onHighIntent"],u,c=u||(u=o("react")),d=u,m=d.useContext,p=d.useEffect;function _(t){var n=o("react-compiler-runtime").c(20),a=t.onClose,i=t.onCloseConfirm,l=t.onComplete,u=t.pushPage,d;n[0]===Symbol.for("react.memo_cache_sentinel")?(d={},n[0]=d):d=n[0];var m=r("usePushPage")(r("MWEBUntrustedMobileEOTRResetPendingEBDialog.entrypoint"),d),p=m[0],_=m[1],f;if(n[1]!==_){var g=_.onHighIntent,h=babelHelpers.objectWithoutPropertiesLoose(_,e);f=h,n[1]=_,n[2]=f}else f=n[2];var y=r("useMWEBSendMobileResetNotification")(),C=y[0],b;n[3]!==a||n[4]!==i||n[5]!==l||n[6]!==p||n[7]!==u||n[8]!==C?(b=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_UNTRUSTED_DEVICE_SEND_REQUEST_CLICK"),C(),p({onClose:a,onCloseConfirm:i,onComplete:l,pushPage:u})},n[3]=a,n[4]=i,n[5]=l,n[6]=p,n[7]=u,n[8]=C,n[9]=b):b=n[9];var v=b,S;n[10]===Symbol.for("react.memo_cache_sentinel")?(S=s._(/*BTDS*/"Send request"),n[10]=S):S=n[10];var R;n[11]!==v||n[12]!==f?(R=babelHelpers.extends({label:S},f,{onPress:v,testid:"mw-eb-untrusted-mobile-eotr-informational-send-request-button"}),n[11]=v,n[12]=f,n[13]=R):R=n[13];var L;n[14]===Symbol.for("react.memo_cache_sentinel")?(L=s._(/*BTDS*/"Not now"),n[14]=L):L=n[14];var E;n[15]!==a?(E={label:L,onPress:a,testid:"mw-eb-untrusted-mobile-eotr-informational-not-now-button"},n[15]=a,n[16]=E):E=n[16];var k;return n[17]!==R||n[18]!==E?(k=c.jsx(r("MWXDialogFooter.react"),{callToActionGroupDirection:"backward",primaryCallToAction:R,secondaryCallToAction:E}),n[17]=R,n[18]=E,n[19]=k):k=n[19],k}function f(e){var t=e.onClose,n=e.onComplete,a=e.pushPage,i=r("usePopPage")(),l=m(r("MWChatEncryptedBackupResetContext")),u=l.isEncryptedBackupResetUserJourneyStartedRef,d=i!=null?function(){i(),u&&(u.current=!1)}:null,f=r("useVisibilityObserver")({onVisible:function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"PIN_CODE_RESTORE_UNTRUSTED_DEVICE_SEND_REQUEST_SCREEN")}});p(function(){u&&(u.current=!0)},[u]);var g=r("useMWAbandonRestoreConfirmationDialog")(function(){t==null||t()});return c.jsx(r("MWXDialogPage.react"),{footer:c.jsx(_,{onClose:t,onCloseConfirm:g,onComplete:n,pushPage:a}),header:c.jsx(r("MWXDialogHeader.react"),{closeButtonTestId:"mw-eb-untrusted-mobile-eotr-informational-dialog-close-button",mdsTitleLayout:"block",onBack:d!=null?d:void 0,onClose:t,withBackButton:d!=null,withCloseButton:t!=null,withoutDivider:!0}),children:c.jsxs(r("MWXColumn.react"),{paddingHorizontal:16,ref:f,spacing:20,testid:void 0,children:[c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx(r("MWEBErrorStatePhoneInterstitialIcon.react"),{})}),c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"center",isSemanticHeading:!0,type:"headlineEmphasized2",children:s._(/*BTDS*/"Reset chat history on your mobile device to start backing up new messages")})}),c.jsx(r("MWXColumnItem.react"),{paddingHorizontal:0,children:c.jsxs(r("MWXList.react"),{children:[c.jsx(r("MWXListCell.react"),{addOnStart:c.jsx(r("AddOnStartOverride.react"),{children:c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMenuItemTrash"),size:"large"})}),content:c.jsx(r("MWXTextPairing.react"),{body:s._(/*BTDS*/"End-to-end encrypted messages will be deleted from your backup and you won\u2019t be able to restore them."),bodyColor:"secondary",headline:s._(/*BTDS*/"Messages currently saved in your backup will be deleted"),level:4})}),c.jsx(r("MWXListCell.react"),{addOnStart:c.jsx(r("AddOnStartOverride.react"),{children:c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconCloudUpload"),size:"large"})}),content:c.jsx(r("MWXTextPairing.react"),{body:s._(/*BTDS*/"You\u2019ll create a PIN to access your chats on any device."),bodyColor:"secondary",headline:s._(/*BTDS*/"New messages will be backed up so you can restore them"),level:4})}),c.jsx(r("MWXListCell.react"),{addOnStart:c.jsx(r("AddOnStartOverride.react"),{children:c.jsx(r("MWXIconForListCell.react"),{icon:r("MWXIconMobile"),size:"large"})}),content:c.jsx(r("MWXTextPairing.react"),{body:s._(/*BTDS*/"You can send a notification to the Messenger app on your mobile device to reset your chat history."),bodyColor:"secondary",headline:s._(/*BTDS*/"Send a request to your mobile device to get started"),level:4})})]})})]})})}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),226);
__d("MWEncryptedBackupsOTCShowNotificationSentToast",["fbt","FDSCheckmarkFilled24Icon","MWChatEncryptedBackupsQPLEvents","QPLUserFlow","SVGIcon","cr:4027","cr:6570","mwPushToast","react"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(){var e=n("cr:6570")?u.jsx(n("cr:6570"),{icon:r("FDSCheckmarkFilled24Icon")}):void 0,t=n("cr:4027")?o("SVGIcon").svgIcon(n("cr:4027")):void 0;o("mwPushToast").mwPushToast({body:s._(/*BTDS*/"Code sent."),icon:{comet:e,mds:t},testid:"mw-chat-encrypted-backups-otc-notification-sent-successful-toast"}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_NOTIFICATION_SENT_SUCCESSFUL_TOAST")}l.showOTCNotificationSentToast=c}),226);
__d("MWEncrypedBackupsSendOTCNotifications",["FBLogger","I64","LSAuthorityLevel","LSEncryptedBackupsOpStatus","LSFactory","LSSendOTCNotificationsStoredProcedure","LSVec","MWEncryptedBackupsOTCShowNotificationSentToast","ReQL","ReQLSuspense","err","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(s||(s=o("react"))).useCallback;async function d(e){var t=e.db,n=e.deviceIds,a=new Promise(function(e,n){var a=o("ReQL").fromTableAscending(t.tables.encrypted_backups_otc_notification_sending_status),i=a.subscribe(function(t,a){if(a.operation!=="delete"){var l=a.value;if(l!=null){var s=(u||(u=o("I64"))).to_int32(l.authorityLevel);if(s===r("LSAuthorityLevel").AUTHORITATIVE)switch(i(),(u||(u=o("I64"))).to_int32(l.notificationSendingStatus)){case r("LSEncryptedBackupsOpStatus").SUCCESS:return o("MWEncryptedBackupsOTCShowNotificationSentToast").showOTCNotificationSentToast(),e();case r("LSEncryptedBackupsOpStatus").FAILURE:return n(r("err")("[sendOTCNotifications] Failure"));default:return r("FBLogger")("wmi_eb").mustfix("OTC: Unexpected UNKNOWN status type for notification sending result."),n(r("err")("[sendOTCNotifications] Unknown"))}}}})});return await t.runInTransaction(function(e){return r("LSSendOTCNotificationsStoredProcedure")(r("LSFactory")(e),{deviceIds:r("LSVec").ofArray(n!=null?n:[])})},"readwrite",void 0,void 0,i.id+":81"),a}function m(){var t,n=o("react-compiler-runtime").c(7),a=(e||(e=r("useReStore")))(),l=(t=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(a.tables.encrypted_backups_otc_notification_sending_status)},[a.tables.encrypted_backups_otc_notification_sending_status],i.id+":98"))==null?void 0:t.authorityLevel,s;n[0]!==l?(s=l!=null&&(u||(u=o("I64"))).to_int32(l)===r("LSAuthorityLevel").OPTIMISTIC,n[0]=l,n[1]=s):s=n[1];var c=s,m;n[2]!==a?(m=function(t){return d({db:a,deviceIds:t})},n[2]=a,n[3]=m):m=n[3];var p=m,_;return n[4]!==c||n[5]!==p?(_=[p,c],n[4]=c,n[5]=p,n[6]=_):_=n[6],_}l.sendOTCNotifications=d,l.useSendOTCNotifications=m}),98);
__d("pakeCpace",["Promise"],(function(t,n,r,o,a,i){var e,l=(function(){var t=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return(function(r){r=r||{};var r=typeof r!="undefined"?r:{},o=Object.assign,a,i;r.ready=new(e||(e=n("Promise")))(function(e,t){a=e,i=t});var l=o({},r),s=[],u="./this.program",c=function(t,n){throw n},d=!0,m=!1,p="";function _(e){return r.locateFile?r.locateFile(e,p):p+e}var f,g,h,y;typeof document!="undefined"&&document.currentScript&&(p=document.currentScript.src),t&&(p=t),p.indexOf("blob:")!==0?p=p.substr(0,p.replace(/[?#].*/,"").lastIndexOf("/")+1):p="",f=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},g=function(t,n,r){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){if(e.status==200||e.status==0&&e.response){n(e.response);return}r()},e.onerror=r,e.send(null)},y=function(t){return document.title=t};var C=r.print||console.log.bind(console),b=r.printErr||console.warn.bind(console);o(r,l),l=null,r.arguments&&(s=r.arguments),r.thisProgram&&(u=r.thisProgram),r.quit&&(c=r.quit);var v=0,S=function(t){v=t},R=function(){return v},L;r.wasmBinary&&(L=r.wasmBinary);var E=r.noExitRuntime||!0;typeof WebAssembly!="object"&&Ce("no native wasm support detected");var k,I=!1,T;function D(e,t){e||Ce(t)}var x=typeof TextDecoder!="undefined"?new TextDecoder("utf8"):void 0;function $(e,t,n){for(var r=t+n,o=t;e[o]&&!(o>=r);)++o;if(o-t>16&&e.subarray&&x)return x.decode(e.subarray(t,o));for(var a="";t<o;){var i=e[t++];if(!(i&128)){a+=String.fromCharCode(i);continue}var l=e[t++]&63;if((i&224)==192){a+=String.fromCharCode((i&31)<<6|l);continue}var s=e[t++]&63;if((i&240)==224?i=(i&15)<<12|l<<6|s:i=(i&7)<<18|l<<12|s<<6|e[t++]&63,i<65536)a+=String.fromCharCode(i);else{var u=i-65536;a+=String.fromCharCode(55296|u>>10,56320|u&1023)}}return a}function P(e,t){return e?$(j,e,t):""}function N(e,t,n,r){if(!(r>0))return 0;for(var o=n,a=n+r-1,i=0;i<e.length;++i){var l=e.charCodeAt(i);if(l>=55296&&l<=57343){var s=e.charCodeAt(++i);l=65536+((l&1023)<<10)|s&1023}if(l<=127){if(n>=a)break;t[n++]=l}else if(l<=2047){if(n+1>=a)break;t[n++]=192|l>>6,t[n++]=128|l&63}else if(l<=65535){if(n+2>=a)break;t[n++]=224|l>>12,t[n++]=128|l>>6&63,t[n++]=128|l&63}else{if(n+3>=a)break;t[n++]=240|l>>18,t[n++]=128|l>>12&63,t[n++]=128|l>>6&63,t[n++]=128|l&63}}return t[n]=0,n-o}function M(e,t,n){return N(e,j,t,n)}function w(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((r&1023)<<10)|e.charCodeAt(++n)&1023),r<=127?++t:r<=2047?t+=2:r<=65535?t+=3:t+=4}return t}var A=typeof TextDecoder!="undefined"?new TextDecoder("utf-16le"):void 0;function F(e,t){for(var n=e,r=n>>1,o=r+t/2;!(r>=o)&&Q[r];)++r;if(n=r<<1,n-e>32&&A)return A.decode(j.subarray(e,n));for(var a="",i=0;!(i>=t/2);++i){var l=K[e+i*2>>1];if(l==0)break;a+=String.fromCharCode(l)}return a}function O(e,t,n){if(n===void 0&&(n=2147483647),n<2)return 0;n-=2;for(var r=t,o=n<e.length*2?n/2:e.length,a=0;a<o;++a){var i=e.charCodeAt(a);K[t>>1]=i,t+=2}return K[t>>1]=0,t-r}function B(e){return e.length*2}function W(e,t){for(var n=0,r="";!(n>=t/4);){var o=X[e+n*4>>2];if(o==0)break;if(++n,o>=65536){var a=o-65536;r+=String.fromCharCode(55296|a>>10,56320|a&1023)}else r+=String.fromCharCode(o)}return r}function q(e,t,n){if(n===void 0&&(n=2147483647),n<4)return 0;for(var r=t,o=r+n-4,a=0;a<e.length;++a){var i=e.charCodeAt(a);if(i>=55296&&i<=57343){var l=e.charCodeAt(++a);i=65536+((i&1023)<<10)|l&1023}if(X[t>>2]=i,t+=4,t+4>o)break}return X[t>>2]=0,t-r}function U(e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);r>=55296&&r<=57343&&++n,t+=4}return t}function V(e,t){z.set(e,t)}function H(e,t,n){for(var r=0;r<e.length;++r)z[t++>>0]=e.charCodeAt(r);n||(z[t>>0]=0)}var G,z,j,K,Q,X,Y,J,Z;function ee(e){G=e,r.HEAP8=z=new Int8Array(e),r.HEAP16=K=new Int16Array(e),r.HEAP32=X=new Int32Array(e),r.HEAPU8=j=new Uint8Array(e),r.HEAPU16=Q=new Uint16Array(e),r.HEAPU32=Y=new Uint32Array(e),r.HEAPF32=J=new Float32Array(e),r.HEAPF64=Z=new Float64Array(e)}var te=r.INITIAL_MEMORY||16777216,ne,re=[],oe=[],ae=[],ie=!1;function le(){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;)ce(r.preRun.shift());Te(re)}function se(){ie=!0,!r.noFSInit&&!et.init.initialized&&et.init(),et.ignorePermissions=!1,Xe.init(),Te(oe)}function ue(){if(r.postRun)for(typeof r.postRun=="function"&&(r.postRun=[r.postRun]);r.postRun.length;)me(r.postRun.shift());Te(ae)}function ce(e){re.unshift(e)}function de(e){oe.unshift(e)}function me(e){ae.unshift(e)}var pe=0,_e=null,fe=null;function ge(e){return e}function he(e){pe++,r.monitorRunDependencies&&r.monitorRunDependencies(pe)}function ye(e){if(pe--,r.monitorRunDependencies&&r.monitorRunDependencies(pe),pe==0&&(_e!==null&&(clearInterval(_e),_e=null),fe)){var t=fe;fe=null,t()}}r.preloadedImages={},r.preloadedAudios={};function Ce(e){r.onAbort&&r.onAbort(e),e="Aborted("+e+")",b(e),I=!0,T=1,e+=". Build with -s ASSERTIONS=1 for more info.";var t=new WebAssembly.RuntimeError(e);throw i(t),t}var be="data:application/octet-stream;base64,";function ve(e){return e.startsWith(be)}var Se;Se="pakeCpace.wasm",ve(Se)||(Se=_(Se));function Re(e){try{if(e==Se&&L)return new Uint8Array(L);if(h)return h(e);throw"both async and sync fetching of the wasm failed"}catch(e){Ce(e)}}function Le(){return!L&&(d||m)&&typeof fetch=="function"?fetch(Se,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+Se+"'";return e.arrayBuffer()}).catch(function(){return Re(Se)}):(e||(e=n("Promise"))).resolve().then(function(){return Re(Se)})}function Ee(){var e={a:yr};function t(e,t){var n=e.exports;r.asm=n,k=r.asm.ha,ee(k.buffer),ne=r.asm.ka,de(r.asm.ia),ye("wasm-instantiate")}he("wasm-instantiate");function n(e){t(e.instance)}function o(t){return Le().then(function(t){return WebAssembly.instantiate(t,e)}).then(function(e){return e}).then(t,function(e){b("failed to asynchronously prepare wasm: "+e),Ce(e)})}function a(){return!L&&typeof WebAssembly.instantiateStreaming=="function"&&!ve(Se)&&typeof fetch=="function"?fetch(Se,{credentials:"same-origin"}).then(function(t){var r=WebAssembly.instantiateStreaming(t,e);return r.then(n,function(e){return b("wasm streaming compile failed: "+e),b("falling back to ArrayBuffer instantiation"),o(n)})}):o(n)}if(r.instantiateWasm)try{var l=r.instantiateWasm(e,t);return l}catch(e){return b("Module.instantiateWasm callback failed with error: "+e),!1}return a().catch(i),{}}var ke,Ie;function Te(e){for(;e.length>0;){var t=e.shift();if(typeof t=="function"){t(r);continue}var n=t.func;typeof n=="number"?t.arg===void 0?De(n)():De(n)(t.arg):n(t.arg===void 0?null:t.arg)}}function De(e){return ne.get(e)}function xe(e){return Rr(e+16)+16}function $e(e){this.excPtr=e,this.ptr=e-16,this.set_type=function(e){X[this.ptr+4>>2]=e},this.get_type=function(){return X[this.ptr+4>>2]},this.set_destructor=function(e){X[this.ptr+8>>2]=e},this.get_destructor=function(){return X[this.ptr+8>>2]},this.set_refcount=function(e){X[this.ptr>>2]=e},this.set_caught=function(e){e=e?1:0,z[this.ptr+12>>0]=e},this.get_caught=function(){return z[this.ptr+12>>0]!=0},this.set_rethrown=function(e){e=e?1:0,z[this.ptr+13>>0]=e},this.get_rethrown=function(){return z[this.ptr+13>>0]!=0},this.init=function(e,t){this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var e=X[this.ptr>>2];X[this.ptr>>2]=e+1},this.release_ref=function(){var e=X[this.ptr>>2];return X[this.ptr>>2]=e-1,e===1}}function Pe(e){this.free=function(){Sr(this.ptr),this.ptr=0},this.set_base_ptr=function(e){X[this.ptr>>2]=e},this.get_base_ptr=function(){return X[this.ptr>>2]},this.set_adjusted_ptr=function(e){X[this.ptr+4>>2]=e},this.get_adjusted_ptr_addr=function(){return this.ptr+4},this.get_adjusted_ptr=function(){return X[this.ptr+4>>2]},this.get_exception_ptr=function(){var e=xr(this.get_exception_info().get_type());if(e)return X[this.get_base_ptr()>>2];var t=this.get_adjusted_ptr();return t!==0?t:this.get_base_ptr()},this.get_exception_info=function(){return new $e(this.get_base_ptr())},e===void 0?(this.ptr=Rr(8),this.set_adjusted_ptr(0)):this.ptr=e}var Ne=[];function Me(e){e.add_ref()}var we=0;function Ae(e){var t=new Pe(e),n=t.get_exception_info();return n.get_caught()||(n.set_caught(!0),we--),n.set_rethrown(!1),Ne.push(t),Me(n),t.get_exception_ptr()}var Fe=0;function Oe(e){try{return Sr(new $e(e).ptr)}catch(e){}}function Be(e){if(e.release_ref()&&!e.get_rethrown()){var t=e.get_destructor();t&&De(t)(e.excPtr),Oe(e.excPtr)}}function We(){kr(0);var e=Ne.pop();Be(e.get_exception_info()),e.free(),Fe=0}function qe(e){var t=new Pe(e),n=t.get_base_ptr();throw Fe||(Fe=n),t.free(),n}function Ue(){var e=Fe;if(!e)return S(0),0;var t=new $e(e),n=t.get_type(),r=new Pe;if(r.set_base_ptr(e),r.set_adjusted_ptr(e),!n)return S(0),r.ptr|0;for(var o=Array.prototype.slice.call(arguments),a=0;a<o.length;a++){var i=o[a];if(i===0||i===n)break;if(Dr(i,n,r.get_adjusted_ptr_addr()))return S(i),r.ptr|0}return S(n),r.ptr|0}function Ve(){var e=Fe;if(!e)return S(0),0;var t=new $e(e),n=t.get_type(),r=new Pe;if(r.set_base_ptr(e),r.set_adjusted_ptr(e),!n)return S(0),r.ptr|0;for(var o=Array.prototype.slice.call(arguments),a=0;a<o.length;a++){var i=o[a];if(i===0||i===n)break;if(Dr(i,n,r.get_adjusted_ptr_addr()))return S(i),r.ptr|0}return S(n),r.ptr|0}function He(){var e=Ne.pop();e||Ce("no exception to throw");var t=e.get_exception_info(),n=e.get_base_ptr();throw t.get_rethrown()?e.free():(Ne.push(e),t.set_rethrown(!0),t.set_caught(!1),we++),Fe=n,n}function Ge(e,t,n){var r=new $e(e);throw r.init(t,n),Fe=e,we++,e}function ze(){return we}var je={splitPath:function(t){var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return e.exec(t).slice(1)},normalizeArray:function(t,n){for(var e=0,r=t.length-1;r>=0;r--){var o=t[r];o==="."?t.splice(r,1):o===".."?(t.splice(r,1),e++):e&&(t.splice(r,1),e--)}if(n)for(;e;e--)t.unshift("..");return t},normalize:function(t){var e=t.charAt(0)==="/",n=t.substr(-1)==="/";return t=je.normalizeArray(t.split("/").filter(function(e){return!!e}),!e).join("/"),!t&&!e&&(t="."),t&&n&&(t+="/"),(e?"/":"")+t},dirname:function(t){var e=je.splitPath(t),n=e[0],r=e[1];return!n&&!r?".":(r&&(r=r.substr(0,r.length-1)),n+r)},basename:function(t){if(t==="/")return"/";t=je.normalize(t),t=t.replace(/\/$/,"");var e=t.lastIndexOf("/");return e===-1?t:t.substr(e+1)},extname:function(t){return je.splitPath(t)[3]},join:function(){var e=Array.prototype.slice.call(arguments,0);return je.normalize(e.join("/"))},join2:function(t,n){return je.normalize(t+"/"+n)}};function Ke(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var e=new Uint8Array(1);return function(){return crypto.getRandomValues(e),e[0]}}else return function(){Ce("randomDevice")}}var Qe={resolve:function(){for(var e="",t=!1,n=arguments.length-1;n>=-1&&!t;n--){var r=n>=0?arguments[n]:et.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";e=r+"/"+e,t=r.charAt(0)==="/"}return e=je.normalizeArray(e.split("/").filter(function(e){return!!e}),!t).join("/"),(t?"/":"")+e||"."},relative:function(t,n){t=Qe.resolve(t).substr(1),n=Qe.resolve(n).substr(1);function e(e){for(var t=0;t<e.length&&e[t]==="";t++);for(var n=e.length-1;n>=0&&e[n]==="";n--);return t>n?[]:e.slice(t,n-t+1)}for(var r=e(t.split("/")),o=e(n.split("/")),a=Math.min(r.length,o.length),i=a,l=0;l<a;l++)if(r[l]!==o[l]){i=l;break}for(var s=[],l=i;l<r.length;l++)s.push("..");return s=s.concat(o.slice(i)),s.join("/")}},Xe={ttys:[],init:function(){},shutdown:function(){},register:function(t,n){Xe.ttys[t]={input:[],output:[],ops:n},et.registerDevice(t,Xe.stream_ops)},stream_ops:{open:function(t){var e=Xe.ttys[t.node.rdev];if(!e)throw new et.ErrnoError(43);t.tty=e,t.seekable=!1},close:function(t){t.tty.ops.flush(t.tty)},flush:function(t){t.tty.ops.flush(t.tty)},read:function(t,n,r,o,a){if(!t.tty||!t.tty.ops.get_char)throw new et.ErrnoError(60);for(var e=0,i=0;i<o;i++){var l;try{l=t.tty.ops.get_char(t.tty)}catch(e){throw new et.ErrnoError(29)}if(l===void 0&&e===0)throw new et.ErrnoError(6);if(l==null)break;e++,n[r+i]=l}return e&&(t.node.timestamp=Date.now()),e},write:function(t,n,r,o,a){if(!t.tty||!t.tty.ops.put_char)throw new et.ErrnoError(60);try{for(var e=0;e<o;e++)t.tty.ops.put_char(t.tty,n[r+e])}catch(e){throw new et.ErrnoError(29)}return o&&(t.node.timestamp=Date.now()),e}},default_tty_ops:{get_char:function(t){if(!t.input.length){var e=null;if(typeof window!="undefined"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+="\n")):typeof readline=="function"&&(e=readline(),e!==null&&(e+="\n")),!e)return null;t.input=hr(e,!0)}return t.input.shift()},put_char:function(t,n){n===null||n===10?(C($(t.output,0)),t.output=[]):n!=0&&t.output.push(n)},flush:function(t){t.output&&t.output.length>0&&(C($(t.output,0)),t.output=[])}},default_tty1_ops:{put_char:function(t,n){n===null||n===10?(b($(t.output,0)),t.output=[]):n!=0&&t.output.push(n)},flush:function(t){t.output&&t.output.length>0&&(b($(t.output,0)),t.output=[])}}};function Ye(e){Ce()}var Je={ops_table:null,mount:function(t){return Je.createNode(null,"/",16895,0)},createNode:function(t,n,r,o){if(et.isBlkdev(r)||et.isFIFO(r))throw new et.ErrnoError(63);Je.ops_table||(Je.ops_table={dir:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr,lookup:Je.node_ops.lookup,mknod:Je.node_ops.mknod,rename:Je.node_ops.rename,unlink:Je.node_ops.unlink,rmdir:Je.node_ops.rmdir,readdir:Je.node_ops.readdir,symlink:Je.node_ops.symlink},stream:{llseek:Je.stream_ops.llseek}},file:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr},stream:{llseek:Je.stream_ops.llseek,read:Je.stream_ops.read,write:Je.stream_ops.write,allocate:Je.stream_ops.allocate,mmap:Je.stream_ops.mmap,msync:Je.stream_ops.msync}},link:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr,readlink:Je.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Je.node_ops.getattr,setattr:Je.node_ops.setattr},stream:et.chrdev_stream_ops}});var e=et.createNode(t,n,r,o);return et.isDir(e.mode)?(e.node_ops=Je.ops_table.dir.node,e.stream_ops=Je.ops_table.dir.stream,e.contents={}):et.isFile(e.mode)?(e.node_ops=Je.ops_table.file.node,e.stream_ops=Je.ops_table.file.stream,e.usedBytes=0,e.contents=null):et.isLink(e.mode)?(e.node_ops=Je.ops_table.link.node,e.stream_ops=Je.ops_table.link.stream):et.isChrdev(e.mode)&&(e.node_ops=Je.ops_table.chrdev.node,e.stream_ops=Je.ops_table.chrdev.stream),e.timestamp=Date.now(),t&&(t.contents[n]=e,t.timestamp=e.timestamp),e},getFileDataAsTypedArray:function(t){return t.contents?t.contents.subarray?t.contents.subarray(0,t.usedBytes):new Uint8Array(t.contents):new Uint8Array(0)},expandFileStorage:function(t,n){var e=t.contents?t.contents.length:0;if(!(e>=n)){var r=1024*1024;n=Math.max(n,e*(e<r?2:1.125)>>>0),e!=0&&(n=Math.max(n,256));var o=t.contents;t.contents=new Uint8Array(n),t.usedBytes>0&&t.contents.set(o.subarray(0,t.usedBytes),0)}},resizeFileStorage:function(t,n){if(t.usedBytes!=n)if(n==0)t.contents=null,t.usedBytes=0;else{var e=t.contents;t.contents=new Uint8Array(n),e&&t.contents.set(e.subarray(0,Math.min(n,t.usedBytes))),t.usedBytes=n}},node_ops:{getattr:function(t){var e={};return e.dev=et.isChrdev(t.mode)?t.id:1,e.ino=t.id,e.mode=t.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=t.rdev,et.isDir(t.mode)?e.size=4096:et.isFile(t.mode)?e.size=t.usedBytes:et.isLink(t.mode)?e.size=t.link.length:e.size=0,e.atime=new Date(t.timestamp),e.mtime=new Date(t.timestamp),e.ctime=new Date(t.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(t,n){n.mode!==void 0&&(t.mode=n.mode),n.timestamp!==void 0&&(t.timestamp=n.timestamp),n.size!==void 0&&Je.resizeFileStorage(t,n.size)},lookup:function(t,n){throw et.genericErrors[44]},mknod:function(t,n,r,o){return Je.createNode(t,n,r,o)},rename:function(t,n,r){if(et.isDir(t.mode)){var e;try{e=et.lookupNode(n,r)}catch(e){}if(e)for(var o in e.contents)throw new et.ErrnoError(55)}delete t.parent.contents[t.name],t.parent.timestamp=Date.now(),t.name=r,n.contents[r]=t,n.timestamp=t.parent.timestamp,t.parent=n},unlink:function(t,n){delete t.contents[n],t.timestamp=Date.now()},rmdir:function(t,n){var e=et.lookupNode(t,n);for(var r in e.contents)throw new et.ErrnoError(55);delete t.contents[n],t.timestamp=Date.now()},readdir:function(t){var e=[".",".."];for(var n in t.contents)Object.prototype.hasOwnProperty.call(t.contents,n)&&e.push(n);return e},symlink:function(t,n,r){var e=Je.createNode(t,n,41471,0);return e.link=r,e},readlink:function(t){if(!et.isLink(t.mode))throw new et.ErrnoError(28);return t.link}},stream_ops:{read:function(t,n,r,o,a){var e=t.node.contents;if(a>=t.node.usedBytes)return 0;var i=Math.min(t.node.usedBytes-a,o);if(i>8&&e.subarray)n.set(e.subarray(a,a+i),r);else for(var l=0;l<i;l++)n[r+l]=e[a+l];return i},write:function(t,n,r,o,a,i){if(!o)return 0;var e=t.node;if(e.timestamp=Date.now(),n.subarray&&(!e.contents||e.contents.subarray)){if(i)return e.contents=n.subarray(r,r+o),e.usedBytes=o,o;if(e.usedBytes===0&&a===0)return e.contents=n.slice(r,r+o),e.usedBytes=o,o;if(a+o<=e.usedBytes)return e.contents.set(n.subarray(r,r+o),a),o}if(Je.expandFileStorage(e,a+o),e.contents.subarray&&n.subarray)e.contents.set(n.subarray(r,r+o),a);else for(var l=0;l<o;l++)e.contents[a+l]=n[r+l];return e.usedBytes=Math.max(e.usedBytes,a+o),o},llseek:function(t,n,r){var e=n;if(r===1?e+=t.position:r===2&&et.isFile(t.node.mode)&&(e+=t.node.usedBytes),e<0)throw new et.ErrnoError(28);return e},allocate:function(t,n,r){Je.expandFileStorage(t.node,n+r),t.node.usedBytes=Math.max(t.node.usedBytes,n+r)},mmap:function(t,n,r,o,a,i){if(n!==0)throw new et.ErrnoError(28);if(!et.isFile(t.node.mode))throw new et.ErrnoError(43);var e,l,s=t.node.contents;if(!(i&2)&&s.buffer===G)l=!1,e=s.byteOffset;else{if((o>0||o+r<s.length)&&(s.subarray?s=s.subarray(o,o+r):s=Array.prototype.slice.call(s,o,o+r)),l=!0,e=Ye(r),!e)throw new et.ErrnoError(48);z.set(s,e)}return{ptr:e,allocated:l}},msync:function(t,n,r,o,a){if(!et.isFile(t.node.mode))throw new et.ErrnoError(43);if(a&2)return 0;var e=Je.stream_ops.write(t,n,0,o,r,!1);return 0}}};function Ze(e,t,n,r){var o=r?"":"al "+e;g(e,function(n){D(n,'Loading data file "'+e+'" failed (no arrayBuffer).'),t(new Uint8Array(n)),o&&ye(o)},function(t){if(n)n();else throw'Loading data file "'+e+'" failed.'}),o&&he(o)}var et={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:function(t,n){if(n===void 0&&(n={}),t=Qe.resolve(et.cwd(),t),!t)return{path:"",node:null};var e={follow_mount:!0,recurse_count:0};for(var r in e)n[r]===void 0&&(n[r]=e[r]);if(n.recurse_count>8)throw new et.ErrnoError(32);for(var o=je.normalizeArray(t.split("/").filter(function(e){return!!e}),!1),a=et.root,i="/",l=0;l<o.length;l++){var s=l===o.length-1;if(s&&n.parent)break;if(a=et.lookupNode(a,o[l]),i=je.join2(i,o[l]),et.isMountpoint(a)&&(!s||s&&n.follow_mount)&&(a=a.mounted.root),!s||n.follow)for(var u=0;et.isLink(a.mode);){var c=et.readlink(i);i=Qe.resolve(je.dirname(i),c);var d=et.lookupPath(i,{recurse_count:n.recurse_count});if(a=d.node,u++>40)throw new et.ErrnoError(32)}}return{path:i,node:a}},getPath:function(t){for(var e;;){if(et.isRoot(t)){var n=t.mount.mountpoint;return e?n[n.length-1]!=="/"?n+"/"+e:n+e:n}e=e?t.name+"/"+e:t.name,t=t.parent}},hashName:function(t,n){for(var e=0,r=0;r<n.length;r++)e=(e<<5)-e+n.charCodeAt(r)|0;return(t+e>>>0)%et.nameTable.length},hashAddNode:function(t){var e=et.hashName(t.parent.id,t.name);t.name_next=et.nameTable[e],et.nameTable[e]=t},hashRemoveNode:function(t){var e=et.hashName(t.parent.id,t.name);if(et.nameTable[e]===t)et.nameTable[e]=t.name_next;else for(var n=et.nameTable[e];n;){if(n.name_next===t){n.name_next=t.name_next;break}n=n.name_next}},lookupNode:function(t,n){var e=et.mayLookup(t);if(e)throw new et.ErrnoError(e,t);for(var r=et.hashName(t.id,n),o=et.nameTable[r];o;o=o.name_next){var a=o.name;if(o.parent.id===t.id&&a===n)return o}return et.lookup(t,n)},createNode:function(t,n,r,o){var e=new et.FSNode(t,n,r,o);return et.hashAddNode(e),e},destroyNode:function(t){et.hashRemoveNode(t)},isRoot:function(t){return t===t.parent},isMountpoint:function(t){return!!t.mounted},isFile:function(t){return(t&61440)===32768},isDir:function(t){return(t&61440)===16384},isLink:function(t){return(t&61440)===40960},isChrdev:function(t){return(t&61440)===8192},isBlkdev:function(t){return(t&61440)===24576},isFIFO:function(t){return(t&61440)===4096},isSocket:function(t){return(t&49152)===49152},flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:function(t){var e=et.flagModes[t];if(typeof e=="undefined")throw new Error("Unknown file open mode: "+t);return e},flagsToPermissionString:function(t){var e=["r","w","rw"][t&3];return t&512&&(e+="w"),e},nodePermissions:function(t,n){return et.ignorePermissions?0:n.includes("r")&&!(t.mode&292)||n.includes("w")&&!(t.mode&146)||n.includes("x")&&!(t.mode&73)?2:0},mayLookup:function(t){var e=et.nodePermissions(t,"x");return e||(t.node_ops.lookup?0:2)},mayCreate:function(t,n){try{var e=et.lookupNode(t,n);return 20}catch(e){}return et.nodePermissions(t,"wx")},mayDelete:function(t,n,r){var e;try{e=et.lookupNode(t,n)}catch(e){return e.errno}var o=et.nodePermissions(t,"wx");if(o)return o;if(r){if(!et.isDir(e.mode))return 54;if(et.isRoot(e)||et.getPath(e)===et.cwd())return 10}else if(et.isDir(e.mode))return 31;return 0},mayOpen:function(t,n){return t?et.isLink(t.mode)?32:et.isDir(t.mode)&&(et.flagsToPermissionString(n)!=="r"||n&512)?31:et.nodePermissions(t,et.flagsToPermissionString(n)):44},MAX_OPEN_FDS:4096,nextfd:function(t,n){t===void 0&&(t=0),n===void 0&&(n=et.MAX_OPEN_FDS);for(var e=t;e<=n;e++)if(!et.streams[e])return e;throw new et.ErrnoError(33)},getStream:function(t){return et.streams[t]},createStream:function(t,n,r){et.FSStream||(et.FSStream=function(){},et.FSStream.prototype={object:{get:function(){return this.node},set:function(t){this.node=t}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}}});var e=new et.FSStream;for(var o in t)e[o]=t[o];t=e;var a=et.nextfd(n,r);return t.fd=a,et.streams[a]=t,t},closeStream:function(t){et.streams[t]=null},chrdev_stream_ops:{open:function(t){var e=et.getDevice(t.node.rdev);t.stream_ops=e.stream_ops,t.stream_ops.open&&t.stream_ops.open(t)},llseek:function(){throw new et.ErrnoError(70)}},major:function(t){return t>>8},minor:function(t){return t&255},makedev:function(t,n){return t<<8|n},registerDevice:function(t,n){et.devices[t]={stream_ops:n}},getDevice:function(t){return et.devices[t]},getMounts:function(t){for(var e=[],n=[t];n.length;){var r=n.pop();e.push(r),n.push.apply(n,r.mounts)}return e},syncfs:function(t,n){typeof t=="function"&&(n=t,t=!1),et.syncFSRequests++,et.syncFSRequests>1&&b("warning: "+et.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var e=et.getMounts(et.root.mount),r=0;function o(e){return et.syncFSRequests--,n(e)}function a(t){if(t)return a.errored?void 0:(a.errored=!0,o(t));++r>=e.length&&o(null)}e.forEach(function(e){if(!e.type.syncfs)return a(null);e.type.syncfs(e,t,a)})},mount:function(t,n,r){var e=r==="/",o=!r,a;if(e&&et.root)throw new et.ErrnoError(10);if(!e&&!o){var i=et.lookupPath(r,{follow_mount:!1});if(r=i.path,a=i.node,et.isMountpoint(a))throw new et.ErrnoError(10);if(!et.isDir(a.mode))throw new et.ErrnoError(54)}var l={type:t,opts:n,mountpoint:r,mounts:[]},s=t.mount(l);return s.mount=l,l.root=s,e?et.root=s:a&&(a.mounted=l,a.mount&&a.mount.mounts.push(l)),s},unmount:function(t){var e=et.lookupPath(t,{follow_mount:!1});if(!et.isMountpoint(e.node))throw new et.ErrnoError(28);var n=e.node,r=n.mounted,o=et.getMounts(r);Object.keys(et.nameTable).forEach(function(e){for(var t=et.nameTable[e];t;){var n=t.name_next;o.includes(t.mount)&&et.destroyNode(t),t=n}}),n.mounted=null;var a=n.mount.mounts.indexOf(r);n.mount.mounts.splice(a,1)},lookup:function(t,n){return t.node_ops.lookup(t,n)},mknod:function(t,n,r){var e=et.lookupPath(t,{parent:!0}),o=e.node,a=je.basename(t);if(!a||a==="."||a==="..")throw new et.ErrnoError(28);var i=et.mayCreate(o,a);if(i)throw new et.ErrnoError(i);if(!o.node_ops.mknod)throw new et.ErrnoError(63);return o.node_ops.mknod(o,a,n,r)},create:function(t,n){return n=n!==void 0?n:438,n&=4095,n|=32768,et.mknod(t,n,0)},mkdir:function(t,n){return n=n!==void 0?n:511,n&=1023,n|=16384,et.mknod(t,n,0)},mkdirTree:function(t,n){for(var e=t.split("/"),r="",o=0;o<e.length;++o)if(e[o]){r+="/"+e[o];try{et.mkdir(r,n)}catch(e){if(e.errno!=20)throw e}}},mkdev:function(t,n,r){return typeof r=="undefined"&&(r=n,n=438),n|=8192,et.mknod(t,n,r)},symlink:function(t,n){if(!Qe.resolve(t))throw new et.ErrnoError(44);var e=et.lookupPath(n,{parent:!0}),r=e.node;if(!r)throw new et.ErrnoError(44);var o=je.basename(n),a=et.mayCreate(r,o);if(a)throw new et.ErrnoError(a);if(!r.node_ops.symlink)throw new et.ErrnoError(63);return r.node_ops.symlink(r,o,t)},rename:function(t,n){var e=je.dirname(t),r=je.dirname(n),o=je.basename(t),a=je.basename(n),i,l,s;if(i=et.lookupPath(t,{parent:!0}),l=i.node,i=et.lookupPath(n,{parent:!0}),s=i.node,!l||!s)throw new et.ErrnoError(44);if(l.mount!==s.mount)throw new et.ErrnoError(75);var u=et.lookupNode(l,o),c=Qe.relative(t,r);if(c.charAt(0)!==".")throw new et.ErrnoError(28);if(c=Qe.relative(n,e),c.charAt(0)!==".")throw new et.ErrnoError(55);var d;try{d=et.lookupNode(s,a)}catch(e){}if(u!==d){var m=et.isDir(u.mode),p=et.mayDelete(l,o,m);if(p)throw new et.ErrnoError(p);if(p=d?et.mayDelete(s,a,m):et.mayCreate(s,a),p)throw new et.ErrnoError(p);if(!l.node_ops.rename)throw new et.ErrnoError(63);if(et.isMountpoint(u)||d&&et.isMountpoint(d))throw new et.ErrnoError(10);if(s!==l&&(p=et.nodePermissions(l,"w"),p))throw new et.ErrnoError(p);et.hashRemoveNode(u);try{l.node_ops.rename(u,s,a)}catch(e){throw e}finally{et.hashAddNode(u)}}},rmdir:function(t){var e=et.lookupPath(t,{parent:!0}),n=e.node,r=je.basename(t),o=et.lookupNode(n,r),a=et.mayDelete(n,r,!0);if(a)throw new et.ErrnoError(a);if(!n.node_ops.rmdir)throw new et.ErrnoError(63);if(et.isMountpoint(o))throw new et.ErrnoError(10);n.node_ops.rmdir(n,r),et.destroyNode(o)},readdir:function(t){var e=et.lookupPath(t,{follow:!0}),n=e.node;if(!n.node_ops.readdir)throw new et.ErrnoError(54);return n.node_ops.readdir(n)},unlink:function(t){var e=et.lookupPath(t,{parent:!0}),n=e.node;if(!n)throw new et.ErrnoError(44);var r=je.basename(t),o=et.lookupNode(n,r),a=et.mayDelete(n,r,!1);if(a)throw new et.ErrnoError(a);if(!n.node_ops.unlink)throw new et.ErrnoError(63);if(et.isMountpoint(o))throw new et.ErrnoError(10);n.node_ops.unlink(n,r),et.destroyNode(o)},readlink:function(t){var e=et.lookupPath(t),n=e.node;if(!n)throw new et.ErrnoError(44);if(!n.node_ops.readlink)throw new et.ErrnoError(28);return Qe.resolve(et.getPath(n.parent),n.node_ops.readlink(n))},stat:function(t,n){var e=et.lookupPath(t,{follow:!n}),r=e.node;if(!r)throw new et.ErrnoError(44);if(!r.node_ops.getattr)throw new et.ErrnoError(63);return r.node_ops.getattr(r)},lstat:function(t){return et.stat(t,!0)},chmod:function(t,n,r){var e;if(typeof t=="string"){var o=et.lookupPath(t,{follow:!r});e=o.node}else e=t;if(!e.node_ops.setattr)throw new et.ErrnoError(63);e.node_ops.setattr(e,{mode:n&4095|e.mode&-4096,timestamp:Date.now()})},lchmod:function(t,n){et.chmod(t,n,!0)},fchmod:function(t,n){var e=et.getStream(t);if(!e)throw new et.ErrnoError(8);et.chmod(e.node,n)},chown:function(t,n,r,o){var e;if(typeof t=="string"){var a=et.lookupPath(t,{follow:!o});e=a.node}else e=t;if(!e.node_ops.setattr)throw new et.ErrnoError(63);e.node_ops.setattr(e,{timestamp:Date.now()})},lchown:function(t,n,r){et.chown(t,n,r,!0)},fchown:function(t,n,r){var e=et.getStream(t);if(!e)throw new et.ErrnoError(8);et.chown(e.node,n,r)},truncate:function(t,n){if(n<0)throw new et.ErrnoError(28);var e;if(typeof t=="string"){var r=et.lookupPath(t,{follow:!0});e=r.node}else e=t;if(!e.node_ops.setattr)throw new et.ErrnoError(63);if(et.isDir(e.mode))throw new et.ErrnoError(31);if(!et.isFile(e.mode))throw new et.ErrnoError(28);var o=et.nodePermissions(e,"w");if(o)throw new et.ErrnoError(o);e.node_ops.setattr(e,{size:n,timestamp:Date.now()})},ftruncate:function(t,n){var e=et.getStream(t);if(!e)throw new et.ErrnoError(8);if((e.flags&2097155)===0)throw new et.ErrnoError(28);et.truncate(e.node,n)},utime:function(t,n,r){var e=et.lookupPath(t,{follow:!0}),o=e.node;o.node_ops.setattr(o,{timestamp:Math.max(n,r)})},open:function(t,n,o,a,i){if(t==="")throw new et.ErrnoError(44);n=typeof n=="string"?et.modeStringToFlags(n):n,o=typeof o=="undefined"?438:o,n&64?o=o&4095|32768:o=0;var e;if(typeof t=="object")e=t;else{t=je.normalize(t);try{var l=et.lookupPath(t,{follow:!(n&131072)});e=l.node}catch(e){}}var s=!1;if(n&64)if(e){if(n&128)throw new et.ErrnoError(20)}else e=et.mknod(t,o,0),s=!0;if(!e)throw new et.ErrnoError(44);if(et.isChrdev(e.mode)&&(n&=-513),n&65536&&!et.isDir(e.mode))throw new et.ErrnoError(54);if(!s){var u=et.mayOpen(e,n);if(u)throw new et.ErrnoError(u)}n&512&&et.truncate(e,0),n&=-131713;var c=et.createStream({node:e,path:et.getPath(e),flags:n,seekable:!0,position:0,stream_ops:e.stream_ops,ungotten:[],error:!1},a,i);return c.stream_ops.open&&c.stream_ops.open(c),r.logReadFiles&&!(n&1)&&(et.readFiles||(et.readFiles={}),t in et.readFiles||(et.readFiles[t]=1)),c},close:function(t){if(et.isClosed(t))throw new et.ErrnoError(8);t.getdents&&(t.getdents=null);try{t.stream_ops.close&&t.stream_ops.close(t)}catch(e){throw e}finally{et.closeStream(t.fd)}t.fd=null},isClosed:function(t){return t.fd===null},llseek:function(t,n,r){if(et.isClosed(t))throw new et.ErrnoError(8);if(!t.seekable||!t.stream_ops.llseek)throw new et.ErrnoError(70);if(r!=0&&r!=1&&r!=2)throw new et.ErrnoError(28);return t.position=t.stream_ops.llseek(t,n,r),t.ungotten=[],t.position},read:function(t,n,r,o,a){if(o<0||a<0)throw new et.ErrnoError(28);if(et.isClosed(t))throw new et.ErrnoError(8);if((t.flags&2097155)===1)throw new et.ErrnoError(8);if(et.isDir(t.node.mode))throw new et.ErrnoError(31);if(!t.stream_ops.read)throw new et.ErrnoError(28);var e=typeof a!="undefined";if(!e)a=t.position;else if(!t.seekable)throw new et.ErrnoError(70);var i=t.stream_ops.read(t,n,r,o,a);return e||(t.position+=i),i},write:function(t,n,r,o,a,i){if(o<0||a<0)throw new et.ErrnoError(28);if(et.isClosed(t))throw new et.ErrnoError(8);if((t.flags&2097155)===0)throw new et.ErrnoError(8);if(et.isDir(t.node.mode))throw new et.ErrnoError(31);if(!t.stream_ops.write)throw new et.ErrnoError(28);t.seekable&&t.flags&1024&&et.llseek(t,0,2);var e=typeof a!="undefined";if(!e)a=t.position;else if(!t.seekable)throw new et.ErrnoError(70);var l=t.stream_ops.write(t,n,r,o,a,i);return e||(t.position+=l),l},allocate:function(t,n,r){if(et.isClosed(t))throw new et.ErrnoError(8);if(n<0||r<=0)throw new et.ErrnoError(28);if((t.flags&2097155)===0)throw new et.ErrnoError(8);if(!et.isFile(t.node.mode)&&!et.isDir(t.node.mode))throw new et.ErrnoError(43);if(!t.stream_ops.allocate)throw new et.ErrnoError(138);t.stream_ops.allocate(t,n,r)},mmap:function(t,n,r,o,a,i){if((a&2)!==0&&(i&2)===0&&(t.flags&2097155)!==2)throw new et.ErrnoError(2);if((t.flags&2097155)===1)throw new et.ErrnoError(2);if(!t.stream_ops.mmap)throw new et.ErrnoError(43);return t.stream_ops.mmap(t,n,r,o,a,i)},msync:function(t,n,r,o,a){return!t||!t.stream_ops.msync?0:t.stream_ops.msync(t,n,r,o,a)},munmap:function(t){return 0},ioctl:function(t,n,r){if(!t.stream_ops.ioctl)throw new et.ErrnoError(59);return t.stream_ops.ioctl(t,n,r)},readFile:function(t,n){if(n===void 0&&(n={}),n.flags=n.flags||0,n.encoding=n.encoding||"binary",n.encoding!=="utf8"&&n.encoding!=="binary")throw new Error('Invalid encoding type "'+n.encoding+'"');var e,r=et.open(t,n.flags),o=et.stat(t),a=o.size,i=new Uint8Array(a);return et.read(r,i,0,a,0),n.encoding==="utf8"?e=$(i,0):n.encoding==="binary"&&(e=i),et.close(r),e},writeFile:function(t,n,r){r===void 0&&(r={}),r.flags=r.flags||577;var e=et.open(t,r.flags,r.mode);if(typeof n=="string"){var o=new Uint8Array(w(n)+1),a=N(n,o,0,o.length);et.write(e,o,0,a,void 0,r.canOwn)}else if(ArrayBuffer.isView(n))et.write(e,n,0,n.byteLength,void 0,r.canOwn);else throw new Error("Unsupported data type");et.close(e)},cwd:function(){return et.currentPath},chdir:function(t){var e=et.lookupPath(t,{follow:!0});if(e.node===null)throw new et.ErrnoError(44);if(!et.isDir(e.node.mode))throw new et.ErrnoError(54);var n=et.nodePermissions(e.node,"x");if(n)throw new et.ErrnoError(n);et.currentPath=e.path},createDefaultDirectories:function(){et.mkdir("/tmp"),et.mkdir("/home"),et.mkdir("/home/web_user")},createDefaultDevices:function(){et.mkdir("/dev"),et.registerDevice(et.makedev(1,3),{read:function(){return 0},write:function(t,n,r,o,a){return o}}),et.mkdev("/dev/null",et.makedev(1,3)),Xe.register(et.makedev(5,0),Xe.default_tty_ops),Xe.register(et.makedev(6,0),Xe.default_tty1_ops),et.mkdev("/dev/tty",et.makedev(5,0)),et.mkdev("/dev/tty1",et.makedev(6,0));var e=Ke();et.createDevice("/dev","random",e),et.createDevice("/dev","urandom",e),et.mkdir("/dev/shm"),et.mkdir("/dev/shm/tmp")},createSpecialDirectories:function(){et.mkdir("/proc");var e=et.mkdir("/proc/self");et.mkdir("/proc/self/fd"),et.mount({mount:function(){var t=et.createNode(e,"fd",16895,73);return t.node_ops={lookup:function(t,n){var e=+n,r=et.getStream(e);if(!r)throw new et.ErrnoError(8);var o={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:function(){return r.path}}};return o.parent=o,o}},t}},{},"/proc/self/fd")},createStandardStreams:function(){r.stdin?et.createDevice("/dev","stdin",r.stdin):et.symlink("/dev/tty","/dev/stdin"),r.stdout?et.createDevice("/dev","stdout",null,r.stdout):et.symlink("/dev/tty","/dev/stdout"),r.stderr?et.createDevice("/dev","stderr",null,r.stderr):et.symlink("/dev/tty1","/dev/stderr");var e=et.open("/dev/stdin",0),t=et.open("/dev/stdout",1),n=et.open("/dev/stderr",1)},ensureErrnoError:function(){et.ErrnoError||(et.ErrnoError=function(t,n){this.node=n,this.setErrno=function(e){this.errno=e},this.setErrno(t),this.message="FS error"},et.ErrnoError.prototype=new Error,et.ErrnoError.prototype.constructor=et.ErrnoError,[44].forEach(function(e){et.genericErrors[e]=new et.ErrnoError(e),et.genericErrors[e].stack="<generic error, no stack>"}))},staticInit:function(){et.ensureErrnoError(),et.nameTable=new Array(4096),et.mount(Je,{},"/"),et.createDefaultDirectories(),et.createDefaultDevices(),et.createSpecialDirectories(),et.filesystems={MEMFS:Je}},init:function(t,n,o){et.init.initialized=!0,et.ensureErrnoError(),r.stdin=t||r.stdin,r.stdout=n||r.stdout,r.stderr=o||r.stderr,et.createStandardStreams()},quit:function(){et.init.initialized=!1;for(var e=0;e<et.streams.length;e++){var t=et.streams[e];t&&et.close(t)}},getMode:function(t,n){var e=0;return t&&(e|=365),n&&(e|=146),e},findObject:function(t,n){var e=et.analyzePath(t,n);return e.exists?e.object:null},analyzePath:function(t,n){try{var e=et.lookupPath(t,{follow:!n});t=e.path}catch(e){}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var e=et.lookupPath(t,{parent:!0});r.parentExists=!0,r.parentPath=e.path,r.parentObject=e.node,r.name=je.basename(t),e=et.lookupPath(t,{follow:!n}),r.exists=!0,r.path=e.path,r.object=e.node,r.name=e.node.name,r.isRoot=e.path==="/"}catch(e){r.error=e.errno}return r},createPath:function(t,n,r,o){t=typeof t=="string"?t:et.getPath(t);for(var e=n.split("/").reverse();e.length;){var a=e.pop();if(a){var i=je.join2(t,a);try{et.mkdir(i)}catch(e){}t=i}}return i},createFile:function(t,n,r,o,a){var e=je.join2(typeof t=="string"?t:et.getPath(t),n),i=et.getMode(o,a);return et.create(e,i)},createDataFile:function(t,n,r,o,a,i){var e=n;t&&(t=typeof t=="string"?t:et.getPath(t),e=n?je.join2(t,n):t);var l=et.getMode(o,a),s=et.create(e,l);if(r){if(typeof r=="string"){for(var u=new Array(r.length),c=0,d=r.length;c<d;++c)u[c]=r.charCodeAt(c);r=u}et.chmod(s,l|146);var m=et.open(s,577);et.write(m,r,0,r.length,0,i),et.close(m),et.chmod(s,l)}return s},createDevice:function(t,n,r,o){var e=je.join2(typeof t=="string"?t:et.getPath(t),n),a=et.getMode(!!r,!!o);et.createDevice.major||(et.createDevice.major=64);var i=et.makedev(et.createDevice.major++,0);return et.registerDevice(i,{open:function(t){t.seekable=!1},close:function(t){o&&o.buffer&&o.buffer.length&&o(10)},read:function(t,n,o,a,i){for(var e=0,l=0;l<a;l++){var s;try{s=r()}catch(e){throw new et.ErrnoError(29)}if(s===void 0&&e===0)throw new et.ErrnoError(6);if(s==null)break;e++,n[o+l]=s}return e&&(t.node.timestamp=Date.now()),e},write:function(t,n,r,a,i){for(var e=0;e<a;e++)try{o(n[r+e])}catch(e){throw new et.ErrnoError(29)}return a&&(t.node.timestamp=Date.now()),e}}),et.mkdev(e,a,i)},forceLoadFile:function(t){if(t.isDevice||t.isFolder||t.link||t.contents)return!0;if(typeof XMLHttpRequest!="undefined")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(f)try{t.contents=hr(f(t.url),!0),t.usedBytes=t.contents.length}catch(e){throw new et.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:function(t,n,r,o,a){function e(){this.lengthKnown=!1,this.chunks=[]}if(e.prototype.get=function(t){if(!(t>this.length-1||t<0)){var e=t%this.chunkSize,n=t/this.chunkSize|0;return this.getter(n)[e]}},e.prototype.setDataGetter=function(t){this.getter=t},e.prototype.cacheLength=function(){var e=new XMLHttpRequest;if(e.open("HEAD",r,!1),e.send(null),!(e.status>=200&&e.status<300||e.status===304))throw new Error("Couldn't load "+r+". Status: "+e.status);var t=Number(e.getResponseHeader("Content-length")),n,o=(n=e.getResponseHeader("Accept-Ranges"))&&n==="bytes",a=(n=e.getResponseHeader("Content-Encoding"))&&n==="gzip",i=1024*1024;o||(i=t);var l=function(n,o){if(n>o)throw new Error("invalid range ("+n+", "+o+") or no bytes requested!");if(o>t-1)throw new Error("only "+t+" bytes available! programmer error!");var e=new XMLHttpRequest;if(e.open("GET",r,!1),t!==i&&e.setRequestHeader("Range","bytes="+n+"-"+o),typeof Uint8Array!="undefined"&&(e.responseType="arraybuffer"),e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined"),e.send(null),!(e.status>=200&&e.status<300||e.status===304))throw new Error("Couldn't load "+r+". Status: "+e.status);return e.response!==void 0?new Uint8Array(e.response||[]):hr(e.responseText||"",!0)},s=this;s.setDataGetter(function(e){var n=e*i,r=(e+1)*i-1;if(r=Math.min(r,t-1),typeof s.chunks[e]=="undefined"&&(s.chunks[e]=l(n,r)),typeof s.chunks[e]=="undefined")throw new Error("doXHR failed!");return s.chunks[e]}),(a||!t)&&(i=t=1,t=this.getter(0).length,i=t,C("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=t,this._chunkSize=i,this.lengthKnown=!0},typeof XMLHttpRequest!="undefined"){throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var i,l}else var l={isDevice:!1,url:r};var s=et.createFile(t,n,l,o,a);l.contents?s.contents=l.contents:l.url&&(s.contents=null,s.url=l.url),Object.defineProperties(s,{usedBytes:{get:function(){return this.contents.length}}});var u={},c=Object.keys(s.stream_ops);return c.forEach(function(e){var t=s.stream_ops[e];u[e]=function(){return et.forceLoadFile(s),t.apply(null,arguments)}}),u.read=function(e,t,n,r,o){et.forceLoadFile(s);var a=e.node.contents;if(o>=a.length)return 0;var i=Math.min(a.length-o,r);if(a.slice)for(var l=0;l<i;l++)t[n+l]=a[o+l];else for(var l=0;l<i;l++)t[n+l]=a.get(o+l);return i},s.stream_ops=u,s},createPreloadedFile:function(t,n,r,o,a,i,l,s,u,c){var e=n?Qe.resolve(je.join2(t,n)):t,d="cp "+e;function m(r){function m(e){c&&c(),s||et.createDataFile(t,n,e,o,a,u),i&&i(),ye(d)}Browser.handledByPreloadPlugin(r,e,m,function(){l&&l(),ye(d)})||m(r)}he(d),typeof r=="string"?Ze(r,function(e){return m(e)},l):m(r)},indexedDB:function(){return window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB},DB_NAME:function(){return"EM_FS_"+window.location.pathname},DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:function(t,n,r){n=n||function(){},r=r||function(){};var e=et.indexedDB();try{var o=e.open(et.DB_NAME(),et.DB_VERSION)}catch(e){return r(e)}o.onupgradeneeded=function(){C("creating db");var e=o.result;e.createObjectStore(et.DB_STORE_NAME)},o.onsuccess=function(){var e=o.result,a=e.transaction([et.DB_STORE_NAME],"readwrite"),i=a.objectStore(et.DB_STORE_NAME),l=0,s=0,u=t.length;function c(){s==0?n():r()}t.forEach(function(e){var t=i.put(et.analyzePath(e).object.contents,e);t.onsuccess=function(){l++,l+s==u&&c()},t.onerror=function(){s++,l+s==u&&c()}}),a.onerror=r},o.onerror=r},loadFilesFromDB:function(t,n,r){n=n||function(){},r=r||function(){};var e=et.indexedDB();try{var o=e.open(et.DB_NAME(),et.DB_VERSION)}catch(e){return r(e)}o.onupgradeneeded=r,o.onsuccess=function(){var e=o.result;try{var a=e.transaction([et.DB_STORE_NAME],"readonly")}catch(e){r(e);return}var i=a.objectStore(et.DB_STORE_NAME),l=0,s=0,u=t.length;function c(){s==0?n():r()}t.forEach(function(e){var t=i.get(e);t.onsuccess=function(){et.analyzePath(e).exists&&et.unlink(e),et.createDataFile(je.dirname(e),je.basename(e),t.result,!0,!0,!0),l++,l+s==u&&c()},t.onerror=function(){s++,l+s==u&&c()}}),a.onerror=r},o.onerror=r}},tt={mappings:{},DEFAULT_POLLMASK:5,calculateAt:function(t,n,r){if(n[0]==="/")return n;var e;if(t===-100)e=et.cwd();else{var o=et.getStream(t);if(!o)throw new et.ErrnoError(8);e=o.path}if(n.length==0){if(!r)throw new et.ErrnoError(44);return e}return je.join2(e,n)},doStat:function(t,n,r){try{var e=t(n)}catch(e){if(e&&e.node&&je.normalize(n)!==je.normalize(et.getPath(e.node)))return-54;throw e}return X[r>>2]=e.dev,X[r+4>>2]=0,X[r+8>>2]=e.ino,X[r+12>>2]=e.mode,X[r+16>>2]=e.nlink,X[r+20>>2]=e.uid,X[r+24>>2]=e.gid,X[r+28>>2]=e.rdev,X[r+32>>2]=0,Ie=[e.size>>>0,(ke=e.size,+Math.abs(ke)>=1?ke>0?(Math.min(+Math.floor(ke/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],X[r+40>>2]=Ie[0],X[r+44>>2]=Ie[1],X[r+48>>2]=4096,X[r+52>>2]=e.blocks,X[r+56>>2]=e.atime.getTime()/1e3|0,X[r+60>>2]=0,X[r+64>>2]=e.mtime.getTime()/1e3|0,X[r+68>>2]=0,X[r+72>>2]=e.ctime.getTime()/1e3|0,X[r+76>>2]=0,Ie=[e.ino>>>0,(ke=e.ino,+Math.abs(ke)>=1?ke>0?(Math.min(+Math.floor(ke/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],X[r+80>>2]=Ie[0],X[r+84>>2]=Ie[1],0},doMsync:function(t,n,r,o,a){var e=j.slice(t,t+r);et.msync(n,e,a,r,o)},doMkdir:function(t,n){return t=je.normalize(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),et.mkdir(t,n,0),0},doMknod:function(t,n,r){switch(n&61440){case 32768:case 8192:case 24576:case 4096:case 49152:break;default:return-28}return et.mknod(t,n,r),0},doReadlink:function(t,n,r){if(r<=0)return-28;var e=et.readlink(t),o=Math.min(r,w(e)),a=z[n+o];return M(e,n,r+1),z[n+o]=a,o},doAccess:function(t,n){if(n&-8)return-28;var e=et.lookupPath(t,{follow:!0}),r=e.node;if(!r)return-44;var o="";return n&4&&(o+="r"),n&2&&(o+="w"),n&1&&(o+="x"),o&&et.nodePermissions(r,o)?-2:0},doDup:function(t,n,r){var e=et.getStream(r);return e&&et.close(e),et.open(t,n,0,r,r).fd},doReadv:function(t,n,r,o){for(var e=0,a=0;a<r;a++){var i=X[n+a*8>>2],l=X[n+(a*8+4)>>2],s=et.read(t,z,i,l,o);if(s<0)return-1;if(e+=s,s<l)break}return e},doWritev:function(t,n,r,o){for(var e=0,a=0;a<r;a++){var i=X[n+a*8>>2],l=X[n+(a*8+4)>>2],s=et.write(t,z,i,l,o);if(s<0)return-1;e+=s}return e},varargs:void 0,get:function(){tt.varargs+=4;var e=X[tt.varargs-4>>2];return e},getStr:function(t){var e=P(t);return e},getStreamFromFD:function(t){var e=et.getStream(t);if(!e)throw new et.ErrnoError(8);return e},get64:function(t,n){return t}};function nt(e,t){try{if(t===0)return-28;var n=et.cwd(),r=w(n);return t<r+1?-68:(M(n,e,t),e)}catch(e){if(typeof et=="undefined"||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function rt(e,t,n){tt.varargs=n;try{var r=tt.getStr(e),o=n?tt.get():0,a=et.open(r,t,o);return a.fd}catch(e){if(typeof et=="undefined"||!(e instanceof et.ErrnoError))throw e;return-e.errno}}function ot(e,t,n,r,o){}function at(e){switch(e){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+e)}}function it(){for(var e=new Array(256),t=0;t<256;++t)e[t]=String.fromCharCode(t);lt=e}var lt=void 0;function st(e){for(var t="",n=e;j[n];)t+=lt[j[n++]];return t}var ut={},ct={},dt={},mt=48,pt=57;function _t(e){if(e===void 0)return"_unknown";e=e.replace(/[^a-zA-Z0-9_]/g,"$");var t=e.charCodeAt(0);return t>=mt&&t<=pt?"_"+e:e}function ft(e,t){return e=_t(e),function(){return t.apply(this,arguments)}}function gt(e,t){var n=ft(t,function(e){this.name=t,this.message=e;var n=new Error(e).stack;n!==void 0&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))});return n.prototype=Object.create(e.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.message===void 0?this.name:this.name+": "+this.message},n}var ht=void 0;function yt(e){throw new ht(e)}var Ct=void 0;function bt(e){throw new Ct(e)}function vt(e,t,n){e.forEach(function(e){dt[e]=t});function r(t){var r=n(t);r.length!==e.length&&bt("Mismatched type converter count");for(var o=0;o<e.length;++o)St(e[o],r[o])}var o=new Array(t.length),a=[],i=0;t.forEach(function(e,t){Object.prototype.hasOwnProperty.call(ct,e)?o[t]=ct[e]:(a.push(e),Object.prototype.hasOwnProperty.call(ut,e)||(ut[e]=[]),ut[e].push(function(){o[t]=ct[e],++i,i===a.length&&r(o)}))}),a.length===0&&r(o)}function St(e,t,n){if(n===void 0&&(n={}),!("argPackAdvance"in t))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=t.name;if(e||yt('type "'+r+'" must have a positive integer typeid pointer'),Object.prototype.hasOwnProperty.call(ct,e)){if(n.ignoreDuplicateRegistrations)return;yt("Cannot register type '"+r+"' twice")}if(ct[e]=t,delete dt[e],Object.prototype.hasOwnProperty.call(ut,e)){var o=ut[e];delete ut[e],o.forEach(function(e){e()})}}function Rt(e,t,n,r,o){var a=at(n);t=st(t),St(e,{name:t,fromWireType:function(t){return!!t},toWireType:function(t,n){return n?r:o},argPackAdvance:8,readValueFromPointer:function(r){var e;if(n===1)e=z;else if(n===2)e=K;else if(n===4)e=X;else throw new TypeError("Unknown boolean type size: "+t);return this.fromWireType(e[r>>a])},destructorFunction:null})}function Lt(e){if(!(this instanceof Wt)||!(e instanceof Wt))return!1;for(var t=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=e.$$.ptrType.registeredClass,o=e.$$.ptr;t.baseClass;)n=t.upcast(n),t=t.baseClass;for(;r.baseClass;)o=r.upcast(o),r=r.baseClass;return t===r&&n===o}function Et(e){return{count:e.count,deleteScheduled:e.deleteScheduled,preservePointerOnDelete:e.preservePointerOnDelete,ptr:e.ptr,ptrType:e.ptrType,smartPtr:e.smartPtr,smartPtrType:e.smartPtrType}}function kt(e){function t(e){return e.$$.ptrType.registeredClass.name}yt(t(e)+" instance already deleted")}var It=!1;function Tt(e){}function Dt(e){e.smartPtr?e.smartPtrType.rawDestructor(e.smartPtr):e.ptrType.registeredClass.rawDestructor(e.ptr)}function xt(e){e.count.value-=1;var t=e.count.value===0;t&&Dt(e)}function $t(e){return typeof FinalizationGroup=="undefined"?($t=function(t){return t},e):(It=new FinalizationGroup(function(e){for(var t=e.next();!t.done;t=e.next()){var n=t.value;n.ptr?xt(n):""+n.ptr}}),$t=function(t){return It.register(t,t.$$,t.$$),t},Tt=function(t){It.unregister(t.$$)},$t(e))}function Pt(){if(this.$$.ptr||kt(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var e=$t(Object.create(Object.getPrototypeOf(this),{$$:{value:Et(this.$$)}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e}function Nt(){this.$$.ptr||kt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&yt("Object already scheduled for deletion"),Tt(this),xt(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)}function Mt(){return!this.$$.ptr}var wt=void 0,At=[];function Ft(){for(;At.length;){var e=At.pop();e.$$.deleteScheduled=!1,e.delete()}}function Ot(){return this.$$.ptr||kt(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&yt("Object already scheduled for deletion"),At.push(this),At.length===1&&wt&&wt(Ft),this.$$.deleteScheduled=!0,this}function Bt(){Wt.prototype.isAliasOf=Lt,Wt.prototype.clone=Pt,Wt.prototype.delete=Nt,Wt.prototype.isDeleted=Mt,Wt.prototype.deleteLater=Ot}function Wt(){}var qt={};function Ut(e,t,n){if(e[t].overloadTable===void 0){var r=e[t];e[t]=function(){return Object.prototype.hasOwnProperty.call(e[t].overloadTable,arguments.length)||yt("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+e[t].overloadTable+")!"),e[t].overloadTable[arguments.length].apply(this,arguments)},e[t].overloadTable=[],e[t].overloadTable[r.argCount]=r}}function Vt(e,t,n){Object.prototype.hasOwnProperty.call(r,e)?((n===void 0||r[e].overloadTable!==void 0&&r[e].overloadTable[n]!==void 0)&&yt("Cannot register public name '"+e+"' twice"),Ut(r,e,e),Object.prototype.hasOwnProperty.call(r,n)&&yt("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),r[e].overloadTable[n]=t):(r[e]=t,n!==void 0&&(r[e].numArguments=n))}function Ht(e,t,n,r,o,a,i,l){this.name=e,this.constructor=t,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=o,this.getActualType=a,this.upcast=i,this.downcast=l,this.pureVirtualFunctions=[]}function Gt(e,t,n){for(;t!==n;)t.upcast||yt("Expected null or instance of "+n.name+", got an instance of "+t.name),e=t.upcast(e),t=t.baseClass;return e}function zt(e,t){if(t===null)return this.isReference&&yt("null is not a valid "+this.name),0;t.$$||yt('Cannot pass "'+Mn(t)+'" as a '+this.name),t.$$.ptr||yt("Cannot pass deleted object as a pointer of type "+this.name);var n=t.$$.ptrType.registeredClass,r=Gt(t.$$.ptr,n,this.registeredClass);return r}function jt(e,t){var n;if(t===null)return this.isReference&&yt("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),e!==null&&e.push(this.rawDestructor,n),n):0;t.$$||yt('Cannot pass "'+Mn(t)+'" as a '+this.name),t.$$.ptr||yt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&t.$$.ptrType.isConst&&yt("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);var r=t.$$.ptrType.registeredClass;if(n=Gt(t.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(t.$$.smartPtr===void 0&&yt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:t.$$.smartPtrType===this?n=t.$$.smartPtr:yt("Cannot convert argument of type "+(t.$$.smartPtrType?t.$$.smartPtrType.name:t.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=t.$$.smartPtr;break;case 2:if(t.$$.smartPtrType===this)n=t.$$.smartPtr;else{var o=t.clone();n=this.rawShare(n,Pn.toHandle(function(){o.delete()})),e!==null&&e.push(this.rawDestructor,n)}break;default:yt("Unsupporting sharing policy")}return n}function Kt(e,t){if(t===null)return this.isReference&&yt("null is not a valid "+this.name),0;t.$$||yt('Cannot pass "'+Mn(t)+'" as a '+this.name),t.$$.ptr||yt("Cannot pass deleted object as a pointer of type "+this.name),t.$$.ptrType.isConst&&yt("Cannot convert argument of type "+t.$$.ptrType.name+" to parameter type "+this.name);var n=t.$$.ptrType.registeredClass,r=Gt(t.$$.ptr,n,this.registeredClass);return r}function Qt(e){return this.fromWireType(Y[e>>2])}function Xt(e){return this.rawGetPointee&&(e=this.rawGetPointee(e)),e}function Yt(e){this.rawDestructor&&this.rawDestructor(e)}function Jt(e){e!==null&&e.delete()}function Zt(e,t,n){if(t===n)return e;if(n.baseClass===void 0)return null;var r=Zt(e,t,n.baseClass);return r===null?null:n.downcast(r)}function en(){return Object.keys(on).length}function tn(){var e=[];for(var t in on)Object.prototype.hasOwnProperty.call(on,t)&&e.push(on[t]);return e}function nn(e){wt=e,At.length&&wt&&wt(Ft)}function rn(){r.getInheritedInstanceCount=en,r.getLiveInheritedInstances=tn,r.flushPendingDeletes=Ft,r.setDelayFunction=nn}var on={};function an(e,t){for(t===void 0&&yt("ptr should not be undefined");e.baseClass;)t=e.upcast(t),e=e.baseClass;return t}function ln(e,t){return t=an(e,t),on[t]}function sn(e,t){(!t.ptrType||!t.ptr)&&bt("makeClassHandle requires ptr and ptrType");var n=!!t.smartPtrType,r=!!t.smartPtr;return n!==r&&bt("Both smartPtrType and smartPtr must be specified"),t.count={value:1},$t(Object.create(e,{$$:{value:t}}))}function un(e){var t=this.getPointee(e);if(!t)return this.destructor(e),null;var n=ln(this.registeredClass,t);if(n!==void 0){if(n.$$.count.value===0)return n.$$.ptr=t,n.$$.smartPtr=e,n.clone();var r=n.clone();return this.destructor(e),r}function o(){return this.isSmartPointer?sn(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:t,smartPtrType:this,smartPtr:e}):sn(this.registeredClass.instancePrototype,{ptrType:this,ptr:e})}var a=this.registeredClass.getActualType(t),i=qt[a];if(!i)return o.call(this);var l;this.isConst?l=i.constPointerType:l=i.pointerType;var s=Zt(t,this.registeredClass,l.registeredClass);return s===null?o.call(this):this.isSmartPointer?sn(l.registeredClass.instancePrototype,{ptrType:l,ptr:s,smartPtrType:this,smartPtr:e}):sn(l.registeredClass.instancePrototype,{ptrType:l,ptr:s})}function cn(){dn.prototype.getPointee=Xt,dn.prototype.destructor=Yt,dn.prototype.argPackAdvance=8,dn.prototype.readValueFromPointer=Qt,dn.prototype.deleteObject=Jt,dn.prototype.fromWireType=un}function dn(e,t,n,r,o,a,i,l,s,u,c){this.name=e,this.registeredClass=t,this.isReference=n,this.isConst=r,this.isSmartPointer=o,this.pointeeType=a,this.sharingPolicy=i,this.rawGetPointee=l,this.rawConstructor=s,this.rawShare=u,this.rawDestructor=c,!o&&t.baseClass===void 0?r?(this.toWireType=zt,this.destructorFunction=null):(this.toWireType=Kt,this.destructorFunction=null):this.toWireType=jt}function mn(e,t,n){Object.prototype.hasOwnProperty.call(r,e)||bt("Replacing nonexistant public symbol"),r[e].overloadTable!==void 0&&n!==void 0?r[e].overloadTable[n]=t:(r[e]=t,r[e].argCount=n)}function pn(e,t,n){var o=r["dynCall_"+e];return n&&n.length?o.apply(null,[t].concat(n)):o.call(null,t)}function _n(e,t,n){return e.includes("j")?pn(e,t,n):De(t).apply(null,n)}function fn(e,t){var n=[];return function(){n.length=arguments.length;for(var r=0;r<arguments.length;r++)n[r]=arguments[r];return _n(e,t,n)}}function gn(e,t){e=st(e);function n(){return e.includes("j")?fn(e,t):De(t)}var r=n();return typeof r!="function"&&yt("unknown function pointer with signature "+e+": "+t),r}var hn=void 0;function yn(e){var t=Lr(e),n=st(t);return Sr(t),n}function Cn(e,t){var n=[],r={};function o(e){if(!r[e]&&!ct[e]){if(dt[e]){dt[e].forEach(o);return}n.push(e),r[e]=!0}}throw t.forEach(o),new hn(e+": "+n.map(yn).join([", "]))}function bn(e,t,n,r,o,a,i,l,s,u,c,d,m){c=st(c),a=gn(o,a),l&&(l=gn(i,l)),u&&(u=gn(s,u)),m=gn(d,m);var p=_t(c);Vt(p,function(){Cn("Cannot construct "+c+" due to unbound types",[r])}),vt([e,t,n],r?[r]:[],function(t){t=t[0];var n,o;r?(n=t.registeredClass,o=n.instancePrototype):o=Wt.prototype;var i=ft(p,function(){if(Object.getPrototypeOf(this)!==s)throw new ht("Use 'new' to construct "+c);if(d.constructor_body===void 0)throw new ht(c+" has no accessible constructor");var e=d.constructor_body[arguments.length];if(e===void 0)throw new ht("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(d.constructor_body).toString()+") parameters instead!");return e.apply(this,arguments)}),s=Object.create(o,{constructor:{value:i}});i.prototype=s;var d=new Ht(c,i,s,m,n,a,l,u),_=new dn(c,d,!0,!1,!1),f=new dn(c+"*",d,!1,!1,!1),g=new dn(c+" const*",d,!1,!0,!1);return qt[e]={pointerType:f,constPointerType:g},mn(p,i),[_,f,g]})}function vn(e,t){for(var n=[],r=0;r<e;r++)n.push(X[(t>>2)+r]);return n}function Sn(e){for(;e.length;){var t=e.pop(),n=e.pop();n(t)}}function Rn(e,t,n,r,o,a){D(t>0);var i=vn(t,n);o=gn(r,o),vt([],[e],function(e){e=e[0];var n="constructor "+e.name;if(e.registeredClass.constructor_body===void 0&&(e.registeredClass.constructor_body=[]),e.registeredClass.constructor_body[t-1]!==void 0)throw new ht("Cannot register multiple constructors with identical number of parameters ("+(t-1)+") for class '"+e.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return e.registeredClass.constructor_body[t-1]=function(){Cn("Cannot construct "+e.name+" due to unbound types",i)},vt([],i,function(r){return r.splice(1,0,null),e.registeredClass.constructor_body[t-1]=Ln(n,r,null,o,a),[]}),[]})}function Ln(e,t,n,r,o){var a=t.length;a<2&&yt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var i=t[1]!==null&&n!==null,l=!1,s=1;s<t.length;++s)if(t[s]!==null&&t[s].destructorFunction===void 0){l=!0;break}var u=t[0].name!=="void",c=a-2,d=new Array(c),m=[],p=[];return function(){arguments.length!==c&&yt("function "+e+" called with "+arguments.length+" arguments, expected "+c+" args!"),p.length=0;var n;m.length=i?2:1,m[0]=o,i&&(n=t[1].toWireType(p,this),m[1]=n);for(var a=0;a<c;++a)d[a]=t[a+2].toWireType(p,arguments[a]),m.push(d[a]);var s=r.apply(null,m);function _(e){if(l)Sn(p);else for(var r=i?1:2;r<t.length;r++){var o=r===1?n:d[r-2];t[r].destructorFunction!==null&&t[r].destructorFunction(o)}if(u)return t[0].fromWireType(e)}return _(s)}}function En(e,t,n,r,o,a,i,l){var s=vn(n,r);t=st(t),a=gn(o,a),vt([],[e],function(e){e=e[0];var r=e.name+"."+t;t.startsWith("@@")&&(t=Symbol[t.substring(2)]),l&&e.registeredClass.pureVirtualFunctions.push(t);function o(){Cn("Cannot call "+r+" due to unbound types",s)}var u=e.registeredClass.instancePrototype,c=u[t];return c===void 0||c.overloadTable===void 0&&c.className!==e.name&&c.argCount===n-2?(o.argCount=n-2,o.className=e.name,u[t]=o):(Ut(u,t,r),u[t].overloadTable[n-2]=o),vt([],s,function(o){var l=Ln(r,o,e,a,i);return u[t].overloadTable===void 0?(l.argCount=n-2,u[t]=l):u[t].overloadTable[n-2]=l,[]}),[]})}var kn=[],In=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function Tn(e){e>4&&--In[e].refcount===0&&(In[e]=void 0,kn.push(e))}function Dn(){for(var e=0,t=5;t<In.length;++t)In[t]!==void 0&&++e;return e}function xn(){for(var e=5;e<In.length;++e)if(In[e]!==void 0)return In[e];return null}function $n(){r.count_emval_handles=Dn,r.get_first_emval=xn}var Pn={toValue:function(t){return t||yt("Cannot use deleted val. handle = "+t),In[t].value},toHandle:function(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:{var e=kn.length?kn.pop():In.length;return In[e]={refcount:1,value:t},e}}}};function Nn(e,t){t=st(t),St(e,{name:t,fromWireType:function(t){var e=Pn.toValue(t);return Tn(t),e},toWireType:function(t,n){return Pn.toHandle(n)},argPackAdvance:8,readValueFromPointer:Qt,destructorFunction:null})}function Mn(e){if(e===null)return"null";var t=typeof e;return t==="object"||t==="array"||t==="function"?e.toString():""+e}function wn(e,t){switch(t){case 2:return function(e){return this.fromWireType(J[e>>2])};case 3:return function(e){return this.fromWireType(Z[e>>3])};default:throw new TypeError("Unknown float type: "+e)}}function An(e,t,n){var r=at(n);t=st(t),St(e,{name:t,fromWireType:function(t){return t},toWireType:function(t,n){return n},argPackAdvance:8,readValueFromPointer:wn(t,r),destructorFunction:null})}function Fn(e,t,n,r,o,a){var i=vn(t,n);e=st(e),o=gn(r,o),Vt(e,function(){Cn("Cannot call "+e+" due to unbound types",i)},t-1),vt([],i,function(n){var r=[n[0],null].concat(n.slice(1));return mn(e,Ln(e,r,null,o,a),t-1),[]})}function On(e,t,n){switch(t){case 0:return n?function(t){return z[t]}:function(t){return j[t]};case 1:return n?function(t){return K[t>>1]}:function(t){return Q[t>>1]};case 2:return n?function(t){return X[t>>2]}:function(t){return Y[t>>2]};default:throw new TypeError("Unknown integer type: "+e)}}function Bn(e,t,n,r,o){t=st(t),o===-1&&(o=4294967295);var a=at(n),i=function(t){return t};if(r===0){var l=32-8*n;i=function(t){return t<<l>>>l}}var s=t.includes("unsigned"),u=function(t,n){},c;s?c=function(t,n){return u(n,this.name),n>>>0}:c=function(t,n){return u(n,this.name),n},St(e,{name:t,fromWireType:i,toWireType:c,argPackAdvance:8,readValueFromPointer:On(t,a,r!==0),destructorFunction:null})}function Wn(e,t,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],o=r[t];function a(e){e=e>>2;var t=Y,n=t[e],r=t[e+1];return new o(G,r,n)}n=st(n),St(e,{name:n,fromWireType:a,argPackAdvance:8,readValueFromPointer:a},{ignoreDuplicateRegistrations:!0})}function qn(e,t){t=st(t);var n=t==="std::string";St(e,{name:t,fromWireType:function(t){var e=Y[t>>2],r;if(n)for(var o=t+4,a=0;a<=e;++a){var i=t+4+a;if(a==e||j[i]==0){var l=i-o,s=P(o,l);r===void 0?r=s:(r+="\0",r+=s),o=i+1}}else{for(var u=new Array(e),a=0;a<e;++a)u[a]=String.fromCharCode(j[t+4+a]);r=u.join("")}return Sr(t),r},toWireType:function(t,r){r instanceof ArrayBuffer&&(r=new Uint8Array(r));var e,o=typeof r=="string";o||r instanceof Uint8Array||r instanceof Uint8ClampedArray||r instanceof Int8Array||yt("Cannot pass non-string to std::string"),n&&o?e=function(){return w(r)}:e=function(){return r.length};var a=e(),i=Rr(4+a+1);if(Y[i>>2]=a,n&&o)M(r,i+4,a+1);else if(o)for(var l=0;l<a;++l){var s=r.charCodeAt(l);s>255&&(Sr(i),yt("String has UTF-16 code units that do not fit in 8 bits")),j[i+4+l]=s}else for(var l=0;l<a;++l)j[i+4+l]=r[l];return t!==null&&t.push(Sr,i),i},argPackAdvance:8,readValueFromPointer:Qt,destructorFunction:function(t){Sr(t)}})}function Un(e,t,n){n=st(n);var r,o,a,i,l;t===2?(r=F,o=O,i=B,a=function(){return Q},l=1):t===4&&(r=W,o=q,i=U,a=function(){return Y},l=2),St(e,{name:n,fromWireType:function(n){for(var e=Y[n>>2],o=a(),i,s=n+4,u=0;u<=e;++u){var c=n+4+u*t;if(u==e||o[c>>l]==0){var d=c-s,m=r(s,d);i===void 0?i=m:(i+="\0",i+=m),s=c+t}}return Sr(n),i},toWireType:function(r,a){typeof a!="string"&&yt("Cannot pass non-string to C++ string type "+n);var e=i(a),s=Rr(4+e+t);return Y[s>>2]=e>>l,o(a,s+4,e+t),r!==null&&r.push(Sr,s),s},argPackAdvance:8,readValueFromPointer:Qt,destructorFunction:function(t){Sr(t)}})}function Vn(e,t){t=st(t),St(e,{isVoid:!0,name:t,argPackAdvance:0,fromWireType:function(){},toWireType:function(t,n){}})}function Hn(e){e>4&&(In[e].refcount+=1)}function Gn(e,t){var n=ct[e];return n===void 0&&yt(t+" has unknown type "+yn(e)),n}function zn(e,t){e=Gn(e,"_emval_take_value");var n=e.readValueFromPointer(t);return Pn.toHandle(n)}function jn(){Ce("")}function Kn(e){Ce("OOM")}function Qn(e){var t=j.length;e=e>>>0,Kn(e)}var Xn={};function Yn(){return u||"./this.program"}function Jn(){if(!Jn.strings){var e=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:e,_:Yn()};for(var n in Xn)Xn[n]===void 0?delete t[n]:t[n]=Xn[n];var r=[];for(var n in t)r.push(n+"="+t[n]);Jn.strings=r}return Jn.strings}function Zn(e,t){var n=0;return Jn().forEach(function(r,o){var a=t+n;X[e+o*4>>2]=a,H(r,a),n+=r.length+1}),0}function er(e,t){var n=Jn();X[e>>2]=n.length;var r=0;return n.forEach(function(e){r+=e.length+1}),X[t>>2]=r,0}function tr(e){try{var t=tt.getStreamFromFD(e);return et.close(t),0}catch(e){if(typeof et=="undefined"||!(e instanceof et.ErrnoError))throw e;return e.errno}}function nr(e,t,n,r){try{var o=tt.getStreamFromFD(e),a=tt.doReadv(o,t,n);return X[r>>2]=a,0}catch(e){if(typeof et=="undefined"||!(e instanceof et.ErrnoError))throw e;return e.errno}}function rr(e,t,n,r,o){try{var a=tt.getStreamFromFD(e),i=4294967296,l=n*i+(t>>>0),s=9007199254740992;return l<=-s||l>=s?-61:(et.llseek(a,l,r),Ie=[a.position>>>0,(ke=a.position,+Math.abs(ke)>=1?ke>0?(Math.min(+Math.floor(ke/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ke-+(~~ke>>>0))/4294967296)>>>0:0)],X[o>>2]=Ie[0],X[o+4>>2]=Ie[1],a.getdents&&l===0&&r===0&&(a.getdents=null),0)}catch(e){if(typeof et=="undefined"||!(e instanceof et.ErrnoError))throw e;return e.errno}}function or(e,t,n,r){try{var o=tt.getStreamFromFD(e),a=tt.doWritev(o,t,n);return X[r>>2]=a,0}catch(e){if(typeof et=="undefined"||!(e instanceof et.ErrnoError))throw e;return e.errno}}function ar(){return R()}function ir(e){S(e)}function lr(e){return e%4===0&&(e%100!==0||e%400===0)}function sr(e,t){for(var n=0,r=0;r<=t;n+=e[r++]);return n}var ur=[31,29,31,30,31,30,31,31,30,31,30,31],cr=[31,28,31,30,31,30,31,31,30,31,30,31];function dr(e,t){for(var n=new Date(e.getTime());t>0;){var r=lr(n.getFullYear()),o=n.getMonth(),a=(r?ur:cr)[o];if(t>a-n.getDate())t-=a-n.getDate()+1,n.setDate(1),o<11?n.setMonth(o+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1));else return n.setDate(n.getDate()+t),n}return n}function mr(e,t,n,r){var o=X[r+40>>2],a={tm_sec:X[r>>2],tm_min:X[r+4>>2],tm_hour:X[r+8>>2],tm_mday:X[r+12>>2],tm_mon:X[r+16>>2],tm_year:X[r+20>>2],tm_wday:X[r+24>>2],tm_yday:X[r+28>>2],tm_isdst:X[r+32>>2],tm_gmtoff:X[r+36>>2],tm_zone:o?P(o):""},i=P(n),l={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var s in l)i=i.replace(new RegExp(s,"g"),l[s]);var u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function d(e,t,n){for(var r=typeof e=="number"?e.toString():e||"";r.length<t;)r=n[0]+r;return r}function m(e,t){return d(e,t,"0")}function p(e,t){function n(e){return e<0?-1:e>0?1:0}var r;return(r=n(e.getFullYear()-t.getFullYear()))===0&&(r=n(e.getMonth()-t.getMonth()))===0&&(r=n(e.getDate()-t.getDate())),r}function _(e){switch(e.getDay()){case 0:return new Date(e.getFullYear()-1,11,29);case 1:return e;case 2:return new Date(e.getFullYear(),0,3);case 3:return new Date(e.getFullYear(),0,2);case 4:return new Date(e.getFullYear(),0,1);case 5:return new Date(e.getFullYear()-1,11,31);case 6:return new Date(e.getFullYear()-1,11,30)}}function f(e){var t=dr(new Date(e.tm_year+1900,0,1),e.tm_yday),n=new Date(t.getFullYear(),0,4),r=new Date(t.getFullYear()+1,0,4),o=_(n),a=_(r);return p(o,t)<=0?p(a,t)<=0?t.getFullYear()+1:t.getFullYear():t.getFullYear()-1}var g={"%a":function(t){return u[t.tm_wday].substring(0,3)},"%A":function(t){return u[t.tm_wday]},"%b":function(t){return c[t.tm_mon].substring(0,3)},"%B":function(t){return c[t.tm_mon]},"%C":function(t){var e=t.tm_year+1900;return m(e/100|0,2)},"%d":function(t){return m(t.tm_mday,2)},"%e":function(t){return d(t.tm_mday,2," ")},"%g":function(t){return f(t).toString().substring(2)},"%G":function(t){return f(t)},"%H":function(t){return m(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return e==0?e=12:e>12&&(e-=12),m(e,2)},"%j":function(t){return m(t.tm_mday+sr(lr(t.tm_year+1900)?ur:cr,t.tm_mon-1),3)},"%m":function(t){return m(t.tm_mon+1,2)},"%M":function(t){return m(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return m(t.tm_sec,2)},"%t":function(){return"	"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=new Date(t.tm_year+1900,0,1),n=e.getDay()===0?e:dr(e,7-e.getDay()),r=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(p(n,r)<0){var o=sr(lr(r.getFullYear())?ur:cr,r.getMonth()-1)-31,a=31-n.getDate(),i=a+o+r.getDate();return m(Math.ceil(i/7),2)}return p(n,e)===0?"01":"00"},"%V":function(t){var e=new Date(t.tm_year+1900,0,4),n=new Date(t.tm_year+1901,0,4),r=_(e),o=_(n),a=dr(new Date(t.tm_year+1900,0,1),t.tm_yday);if(p(a,r)<0)return"53";if(p(o,a)<=0)return"01";var i;return r.getFullYear()<t.tm_year+1900?i=t.tm_yday+32-r.getDate():i=t.tm_yday+1-r.getDate(),m(Math.ceil(i/7),2)},"%w":function(t){return t.tm_wday},"%W":function(t){var e=new Date(t.tm_year,0,1),n=e.getDay()===1?e:dr(e,e.getDay()===0?1:7-e.getDay()+1),r=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(p(n,r)<0){var o=sr(lr(r.getFullYear())?ur:cr,r.getMonth()-1)-31,a=31-n.getDate(),i=a+o+r.getDate();return m(Math.ceil(i/7),2)}return p(n,e)===0?"01":"00"},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,n=e>=0;return e=Math.abs(e)/60,e=e/60*100+e%60,(n?"+":"-")+("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var s in g)i.includes(s)&&(i=i.replace(new RegExp(s,"g"),g[s](a)));var h=hr(i,!1);return h.length>t?0:(V(h,e),h.length-1)}function pr(e,t,n,r){return mr(e,t,n,r)}var _r=function(t,n,r,o){t||(t=this),this.parent=t,this.mount=t.mount,this.mounted=null,this.id=et.nextInode++,this.name=n,this.mode=r,this.node_ops={},this.stream_ops={},this.rdev=o},fr=365,gr=146;Object.defineProperties(_r.prototype,{read:{get:function(){return(this.mode&fr)===fr},set:function(t){t?this.mode|=fr:this.mode&=~fr}},write:{get:function(){return(this.mode&gr)===gr},set:function(t){t?this.mode|=gr:this.mode&=~gr}},isFolder:{get:function(){return et.isDir(this.mode)}},isDevice:{get:function(){return et.isChrdev(this.mode)}}}),et.FSNode=_r,et.staticInit(),it(),ht=r.BindingError=gt(Error,"BindingError"),Ct=r.InternalError=gt(Error,"InternalError"),Bt(),cn(),rn(),hn=r.UnboundTypeError=gt(Error,"UnboundTypeError"),$n();function hr(e,t,n){var r=n>0?n:w(e)+1,o=new Array(r),a=N(e,o,0,o.length);return t&&(o.length=a),o}var yr={p:xe,t:Ae,w:We,b:Ue,g:Ve,x:Oe,K:He,u:Ge,Y:ze,d:qe,ba:nt,_:rt,U:ot,da:Rt,z:bn,y:Rn,o:En,ca:Nn,N:An,ga:Fn,s:Bn,m:Wn,M:qn,G:Un,ea:Vn,fa:Tn,R:Hn,Q:zn,C:jn,Z:Qn,$:Zn,aa:er,W:tr,L:nr,T:rr,F:or,a:ar,H:Zr,I:Jr,l:eo,c:Wr,e:Vr,k:Hr,h:Qr,X:Xr,q:Ur,J:Yr,P:zr,B:no,S:ao,i:jr,r:qr,f:Or,j:Br,D:Gr,O:Kr,n:to,v:ro,A:oo,E:ir,V:pr},Cr=Ee(),br=r.___wasm_call_ctors=function(){return(br=r.___wasm_call_ctors=r.asm.ia).apply(null,arguments)},vr=r._bytearray_free=function(){return(vr=r._bytearray_free=r.asm.ja).apply(null,arguments)},Sr=r._free=function(){return(Sr=r._free=r.asm.la).apply(null,arguments)},Rr=r._malloc=function(){return(Rr=r._malloc=r.asm.ma).apply(null,arguments)},Lr=r.___getTypeName=function(){return(Lr=r.___getTypeName=r.asm.na).apply(null,arguments)},Er=r.___embind_register_native_and_builtin_types=function(){return(Er=r.___embind_register_native_and_builtin_types=r.asm.oa).apply(null,arguments)},kr=r._setThrew=function(){return(kr=r._setThrew=r.asm.pa).apply(null,arguments)},Ir=r.stackSave=function(){return(Ir=r.stackSave=r.asm.qa).apply(null,arguments)},Tr=r.stackRestore=function(){return(Tr=r.stackRestore=r.asm.ra).apply(null,arguments)},Dr=r.___cxa_can_catch=function(){return(Dr=r.___cxa_can_catch=r.asm.sa).apply(null,arguments)},xr=r.___cxa_is_pointer_type=function(){return(xr=r.___cxa_is_pointer_type=r.asm.ta).apply(null,arguments)},$r=r.dynCall_ji=function(){return($r=r.dynCall_ji=r.asm.ua).apply(null,arguments)},Pr=r.dynCall_viijii=function(){return(Pr=r.dynCall_viijii=r.asm.va).apply(null,arguments)},Nr=r.dynCall_jiji=function(){return(Nr=r.dynCall_jiji=r.asm.wa).apply(null,arguments)},Mr=r.dynCall_jiiii=function(){return(Mr=r.dynCall_jiiii=r.asm.xa).apply(null,arguments)},wr=r.dynCall_iiiiij=function(){return(wr=r.dynCall_iiiiij=r.asm.ya).apply(null,arguments)},Ar=r.dynCall_iiiiijj=function(){return(Ar=r.dynCall_iiiiijj=r.asm.za).apply(null,arguments)},Fr=r.dynCall_iiiiiijj=function(){return(Fr=r.dynCall_iiiiiijj=r.asm.Aa).apply(null,arguments)};function Or(e,t,n){var r=Ir();try{De(e)(t,n)}catch(e){if(Tr(r),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Br(e,t,n,r){var o=Ir();try{De(e)(t,n,r)}catch(e){if(Tr(o),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Wr(e,t){var n=Ir();try{return De(e)(t)}catch(e){if(Tr(n),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function qr(e,t){var n=Ir();try{De(e)(t)}catch(e){if(Tr(n),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Ur(e,t,n,r,o,a,i){var l=Ir();try{return De(e)(t,n,r,o,a,i)}catch(e){if(Tr(l),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Vr(e,t,n){var r=Ir();try{return De(e)(t,n)}catch(e){if(Tr(r),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Hr(e,t,n,r){var o=Ir();try{return De(e)(t,n,r)}catch(e){if(Tr(o),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Gr(e,t,n,r,o){var a=Ir();try{De(e)(t,n,r,o)}catch(e){if(Tr(a),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function zr(e,t,n,r,o,a,i,l,s){var u=Ir();try{return De(e)(t,n,r,o,a,i,l,s)}catch(e){if(Tr(u),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function jr(e){var t=Ir();try{De(e)()}catch(e){if(Tr(t),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Kr(e,t,n,r,o,a){var i=Ir();try{De(e)(t,n,r,o,a)}catch(e){if(Tr(i),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Qr(e,t,n,r,o){var a=Ir();try{return De(e)(t,n,r,o)}catch(e){if(Tr(a),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Xr(e,t,n,r,o,a){var i=Ir();try{return De(e)(t,n,r,o,a)}catch(e){if(Tr(i),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Yr(e,t,n,r,o,a,i,l){var s=Ir();try{return De(e)(t,n,r,o,a,i,l)}catch(e){if(Tr(s),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Jr(e,t,n,r){var o=Ir();try{return De(e)(t,n,r)}catch(e){if(Tr(o),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function Zr(e,t,n,r){var o=Ir();try{return De(e)(t,n,r)}catch(e){if(Tr(o),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function eo(e){var t=Ir();try{return De(e)()}catch(e){if(Tr(t),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function to(e,t,n,r,o,a,i,l){var s=Ir();try{De(e)(t,n,r,o,a,i,l)}catch(e){if(Tr(s),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function no(e,t,n,r,o,a,i,l,s,u,c,d){var m=Ir();try{return De(e)(t,n,r,o,a,i,l,s,u,c,d)}catch(e){if(Tr(m),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function ro(e,t,n,r,o,a,i,l,s,u,c){var d=Ir();try{De(e)(t,n,r,o,a,i,l,s,u,c)}catch(e){if(Tr(d),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function oo(e,t,n,r,o,a,i,l,s,u,c,d,m,p,_,f){var g=Ir();try{De(e)(t,n,r,o,a,i,l,s,u,c,d,m,p,_,f)}catch(e){if(Tr(g),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}function ao(e,t,n,r,o){var a=Ir();try{return Mr(e,t,n,r,o)}catch(e){if(Tr(a),e!==e+0&&e!=="longjmp")throw e;kr(1,0)}}var io;fe=function e(){io||lo(),io||(fe=e)};function lo(e){if(e=e||s,pe>0||(le(),pe>0))return;function t(){io||(io=!0,r.calledRun=!0,!I&&(se(),a(r),r.onRuntimeInitialized&&r.onRuntimeInitialized(),ue()))}r.setStatus?(r.setStatus("Running..."),setTimeout(function(){setTimeout(function(){r.setStatus("")},1),t()},1)):t()}if(r.run=lo,r.preInit)for(typeof r.preInit=="function"&&(r.preInit=[r.preInit]);r.preInit.length>0;)r.preInit.pop()();return lo(),r.ready})})();typeof i=="object"&&typeof a=="object"?a.exports=l:typeof define=="function"&&define.amd?define([],function(){return l}):typeof i=="object"&&(i.Module=l)}),null);
__d("PakeCpaceWasm",["PakeCpaceUtils","Promise","bx","err","pakeCpace"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a={locateFile:function(){return r("bx").getURL(r("bx")("20913"))},wasmBinary:t};return new(e||(e=n("Promise")))(function(e){r("pakeCpace")(a).then(function(t){return e({clientBegin:function(n,r,o){var e=0;try{e=n.clientBegin(r,o);var a=t.getInt8Array(e);return a}finally{t._bytearray_free(e)}},clientFinalize:function(n,r){var e=0,a=0;try{var i=o("PakeCpaceUtils").uint8ArrayToVectorInt(t,r),l=n.clientFinalize(i);e=l.getKey1Ptr();var s=t.getInt8Array(e);a=l.getKey2Ptr();var u=t.getInt8Array(a);return{clientKey1:s,clientKey2:u}}finally{t._bytearray_free(e),t._bytearray_free(a)}},createCPaceClient:function(n){return new t.PAKEClient(n)},createCPaceServer:function(n){return new t.PAKEServer(n)},serverHandleClientStepOnePacket:function(n,r,a,i){var e=0,l=0,s=0;try{var u=o("PakeCpaceUtils").uint8ArrayToVectorInt(t,a),c=n.handleClientStepOnePacket(r,u,i);e=c.getKey1Ptr();var d=t.getInt8Array(e);l=c.getKey2Ptr();var m=t.getInt8Array(l);s=c.getPacketPtr();var p=t.getInt8Array(s);return{serverKey1:d,serverKey2:m,stepTwoPacket:p}}finally{t._bytearray_free(e),t._bytearray_free(l),t._bytearray_free(s)}}})}).catch(function(e){throw r("err")("Failed to initialize wasm module, "+e)})})}l.PakeCPaceWasm=s}),98);
__d("usePakeInitiatorManager",["FBLogger","PakeCpaceWasm","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=r("requireDeferred")("establishPakeHandshakeAsInitiator").__setRef("usePakeInitiatorManager"),p=3e4;function _(e){var t=o("react-compiler-runtime").c(15),n=e.onGeneralFailure,a=e.onMaxAttemptsReached,i=e.onNoSessionExists,l=e.onSessionExpired,s=e.onSuccessfulSecretDecryption,u=e.onWrongOtc,_=e.timeout,b=e.clientType,v=_===void 0?p:_,S=r("useAsyncReStore")(),R=d(null),L=d(C),E=d(y),k=d(null),I=d(!1),T;t[0]===Symbol.for("react.memo_cache_sentinel")?(T=function(){var e;E.current(),E.current=h,(e=R.current)==null||e.delete(),R.current=null,L.current(),L.current=g},t[0]=T):T=t[0];var D=T,x,$;t[1]===Symbol.for("react.memo_cache_sentinel")?(x=function(){return I.current===!1&&(I.current=!0,r("promiseDone")(o("PakeCpaceWasm").PakeCPaceWasm().then(function(e){k.current=e}),void 0,f)),D},$=[D],t[1]=x,t[2]=$):(x=t[1],$=t[2]),c(x,$);var P;t[3]!==b||t[4]!==S||t[5]!==n||t[6]!==a||t[7]!==i||t[8]!==l||t[9]!==s||t[10]!==u||t[11]!==v?(P=function(t){return Promise.all([S,m.load()]).then(async function(e){var r=e[0],o=e[1],c=await o({clientType:b,onGeneralFailure:n,onMaxAttemptsReached:a,onNoSessionExists:i,onSessionExpired:l,onSuccessfulSecretDecryption:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t;D(),s.apply(void 0,r)},onWrongOtc:u,otc:t,pakeCpaceModule:k.current,storage:r,timeout:v}),d=c.pakeClient,m=c.stopTimeout,p=c.unsubFromMessagesTable;R.current=d,L.current=m,E.current=p})},t[3]=b,t[4]=S,t[5]=n,t[6]=a,t[7]=i,t[8]=l,t[9]=s,t[10]=u,t[11]=v,t[12]=P):P=t[12];var N=P,M;return t[13]!==N?(M={establishPakeHandshakeAsInitiator:N},t[13]=N,t[14]=M):M=t[14],M}function f(){r("FBLogger")("wmi_eb").mustfix("PAKE: Error loading WASM module")}function g(){}function h(){}function y(){}function C(){}l.default=_}),98);
__d("MWEncryptedBackupsInsertOTCStep.react",["fbt","EBSMAPI","EBSMGatingUI","FBLogger","JSResourceForInteraction","MWChatEncryptedBackupsDismissalDialogContext","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsNumericCodeErrorWrapper.react","MWChatEncryptedBackupsNumericCodeInput.react","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsSetIsDialogPersistedContext","MWEBEOTRDialog.entrypoint","MWEBLazyLoadResetPinPage","MWEBOTCErrorMessages","MWEBOTCInterstitialIllustration.react","MWEBPinCodeTryAgainLaterDialog.entrypoint","MWEBVirtualDevicesContext.react","MWEncrypedBackupsSendOTCNotifications","MWEncryptedBackupsLocalStorageEntryEnum","MWXColumn.react","MWXColumnItem.react","MWXDeferredPopoverTrigger.react","MWXDialogPageLegacy.react","MWXLink.react","MWXMultiStepDialogHeader.react","MWXRow.react","MWXRowItem.react","MWXSpinner.react","MWXText.react","PAKEClientTypeEnum","QPLUserFlow","gkx","justknobx","promiseDone","qex","react","react-compiler-runtime","requireDeferred","useAsyncReStore","useMWCancelConfirmationDialog","useMWChatEncryptedBackupsNumericCode","useMWEBFlowSourceContext","usePakeInitiatorManager","usePushFDSMultiStepDialogEntryPointPage","usePushPage","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["onHighIntent"],u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useContext,_=d.useEffect,f=d.useMemo,g=d.useRef,h=d.useState,y=r("requireDeferred")("MWEBUseLocalStorage").__setRef("MWEncryptedBackupsInsertOTCStep.react"),C=r("requireDeferred")("MWEncryptedBackupsOTCEligibleDevicesPopover.react").__setRef("MWEncryptedBackupsInsertOTCStep.react"),b=r("requireDeferred")("MWEncryptedBackupsSharedState").__setRef("MWEncryptedBackupsInsertOTCStep.react"),v=r("requireDeferred")("deserializeSecretsAndAddDevice").__setRef("MWEncryptedBackupsInsertOTCStep.react"),S=r("JSResourceForInteraction")("MWEBPushResetPinPage").__setRef("MWEncryptedBackupsInsertOTCStep.react"),R="chat-encrypted-backups-dialog-layout-second-step",L=6,E="https://www.facebook.com/help/messenger-app/431055522328649?ref=learn_more",k=r("gkx")("23219"),I=r("gkx")("20861"),T=r("justknobx")._("654");function D(t){var n,a,i=o("react-compiler-runtime").c(109),l=t.onClose,u=t.onComplete,d=t.onSkip,m=t.pushPage,f=h(!1),D=f[0],M=f[1],w=g(!1),A=g(!1),F=g(N),O=h(null),B=O[0],W=O[1],q=r("useAsyncReStore")(),U=r("useMWEBFlowSourceContext")(),V=p(r("MWChatEncryptedBackupsSetIsDialogPersistedContext")).setIsDialogPersisted,H,G;i[0]===Symbol.for("react.memo_cache_sentinel")?(H=function(){return(function(){F.current()})},G=[],i[0]=H,i[1]=G):(H=i[0],G=i[1]),_(H,G);var z=o("MWEncrypedBackupsSendOTCNotifications").useSendOTCNotifications(),j=z[0],K=z[1],Q;i[2]!==j?(Q=function(){j().catch(function(){r("FBLogger")("wmi_eb").mustfix("OTC: Send otc notifications sproc failed."),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_SEND_NOTIFICATION_FAILURE"),W(o("MWEBOTCErrorMessages").getNotificationFailedToSendErrorMessage())})},i[2]=j,i[3]=Q):Q=i[3];var X=Q,Y=h(!1),J=Y[0],Z=Y[1],ee;i[4]===Symbol.for("react.memo_cache_sentinel")?(ee={onVisible:function(){Z(!0)}},i[4]=ee):ee=i[4];var te=r("useVisibilityObserver")(ee),ne,re;i[5]!==X?(ne=function(){T!==!0&&w.current===!1&&(w.current=!0,r("promiseDone")(S.load()),X())},re=[X],i[5]=X,i[6]=ne,i[7]=re):(ne=i[6],re=i[7]),_(ne,re);var oe,ae;i[8]!==J||i[9]!==X?(oe=function(){T!==!1&&(w.current===!0||J===!1||(w.current=!0,r("promiseDone")(S.load()),X()))},ae=[J,X],i[8]=J,i[9]=X,i[10]=oe,i[11]=ae):(oe=i[10],ae=i[11]),_(oe,ae);var ie=p(r("MWChatEncryptedBackupsDismissalDialogContext")),le=ie.setIsDismissedDisabled,se=(n=r("qex")._("4525"))!=null?n:!1,ue=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),ce=ue.virtualDeviceInfo,de;i[12]!==u||i[13]!==m||i[14]!==le||i[15]!==ce.vestaClientID?(de=function(){ce.vestaClientID!=null?(le(!0),r("MWEBLazyLoadResetPinPage")(u,m)):u()},i[12]=u,i[13]=m,i[14]=le,i[15]=ce.vestaClientID,i[16]=de):de=i[16];var me=de,pe;i[17]!==V?(pe=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_API_FAILURE"),W(o("MWEBOTCErrorMessages").getGeneralErrorMessage()),A.current=!0,M(!1),V==null||V(!1)},i[17]=V,i[18]=pe):pe=i[18];var _e=pe,fe;i[19]===Symbol.for("react.memo_cache_sentinel")?(fe=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_MAX_ATTEMPTS_REACHED"),W(o("MWEBOTCErrorMessages").getMaxAttemptsReachedErrorMessage()),A.current=!0,M(!1)},i[19]=fe):fe=i[19];var ge;i[20]===Symbol.for("react.memo_cache_sentinel")?(ge=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_NO_SESSION"),W(o("MWEBOTCErrorMessages").getNoSessionOngoingErrorMessage()),A.current=!0,M(!1)},i[20]=ge):ge=i[20];var he;i[21]===Symbol.for("react.memo_cache_sentinel")?(he=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_SESSION_EXPIRED"),W(o("MWEBOTCErrorMessages").getSessionExpiredErrorMessage()),A.current=!0,M(!1)},i[21]=he):he=i[21];var ye;i[22]!==q||i[23]!==me||i[24]!==V?(ye=function(t){var e=t.decryptedSecret,n=t.initiatorId;V==null||V(!0),r("promiseDone")(v.load(),function(t){r("promiseDone")(q.then(function(a){return t({db:a,initiatorId:n,onAddDeviceFailure:function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_ADD_DEVICE_FAILURE"),W(o("MWEBOTCErrorMessages").getGeneralErrorMessage()),A.current=!0,M(!1),V==null||V(!1)},onAddDeviceFinish:function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_ADD_DEVICE_FINISHED"),o("MWChatEncryptedBackupsLogging").endSuccess({annotations:{bool:{is_backend_setup:o("EBSMGatingUI").isBackendSetupSuccessfulForEBSM()}},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent}),b.onReady(function(e){var t=e.upsertEBSharedStateEntry;r("promiseDone")(t({db:a,stateKey:r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_RESTORED_SUCCESSFULLY}))}),y.onReady(P),me(),M(!1),r("EBSMAPI").fetchBackupIds("MWEncryptedBackupsInsertOTCStep.react").catch($)},secrets:e})}),function(e){F.current=e})})},i[22]=q,i[23]=me,i[24]=V,i[25]=ye):ye=i[25];var Ce=ye,be;i[26]===Symbol.for("react.memo_cache_sentinel")?(be=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_INCORRECT_CODE"),W(o("MWEBOTCErrorMessages").getOtcIsWrongErrorMessage()),A.current=!0,M(!1)},i[26]=be):be=i[26];var ve;i[27]!==_e||i[28]!==Ce?(ve={clientType:r("PAKEClientTypeEnum").ENCRYPTED_BACKUPS,onGeneralFailure:_e,onMaxAttemptsReached:fe,onNoSessionExists:ge,onSessionExpired:he,onSuccessfulSecretDecryption:Ce,onWrongOtc:be},i[27]=_e,i[28]=Ce,i[29]=ve):ve=i[29];var Se=r("usePakeInitiatorManager")(ve),Re=Se.establishPakeHandshakeAsInitiator,Le;i[30]===Symbol.for("react.memo_cache_sentinel")?(Le=function(){W()},i[30]=Le):Le=i[30];var Ee;i[31]!==Re||i[32]!==U?(Ee={focusRegionId:R,inputSize:L,onChange:Le,onComplete:function(t){var e=U();r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{string:{restore_type:"one_time_code",source:e}}),M(!0),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_SUBMIT"),r("promiseDone")(Re(t))},type:"otc"},i[31]=Re,i[32]=U,i[33]=Ee):Ee=i[33];var ke=o("useMWChatEncryptedBackupsNumericCode").useMWChatEncryptedBackupsNumericCode(Ee),Ie=ke[0],Te=ke[1],De=Te.clearNumericInput,xe=Te.focusOnInput,$e=Te.isLoading,Pe;i[34]!==xe||i[35]!==X?(Pe=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_RESEND_CLICK"),X(),xe()},i[34]=xe,i[35]=X,i[36]=Pe):Pe=i[36];var Ne=Pe,Me;i[37]===Symbol.for("react.memo_cache_sentinel")?(Me={},i[37]=Me):Me=i[37];var we=r("usePushFDSMultiStepDialogEntryPointPage")(r("MWEBEOTRDialog.entrypoint"),Me),Ae=we[1],Fe;i[38]===Symbol.for("react.memo_cache_sentinel")?(Fe={},i[38]=Fe):Fe=i[38];var Oe=r("usePushPage")(r("MWEBPinCodeTryAgainLaterDialog.entrypoint"),Fe),Be=Oe[0],We=Oe[1],qe;if(i[39]!==We){var Ue=We.onHighIntent,Ve=babelHelpers.objectWithoutPropertiesLoose(We,e);qe=Ve,i[39]=We,i[40]=qe}else qe=i[40];var He;i[41]!==l||i[42]!==d||i[43]!==Ae?(He=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_HELP_CLICK"),Ae({onClose:l,onSkip:d})},i[41]=l,i[42]=d,i[43]=Ae,i[44]=He):He=i[44];var Ge=He,ze;i[45]!==d||i[46]!==Be?(ze=function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_PIN_LOCKED_NO_OTHER_DEVICE_CLICK"),Be({onSkip:d})},i[45]=d,i[46]=Be,i[47]=ze):ze=i[47];var je=ze,Ke,Qe;i[48]!==De?(Ke=function(){A.current&&(De(),A.current=!1)},Qe=[De],i[48]=De,i[49]=Ke,i[50]=Qe):(Ke=i[49],Qe=i[50]),_(Ke,Qe);var Xe;i[51]!==xe?(Xe={onVisible:function(){r("QPLUserFlow").addAnnotations(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,{bool:{otc_check_first:!1,otc_devices_popover:!0}}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_SCREEN"),xe()}},i[51]=xe,i[52]=Xe):Xe=i[52];var Ye=r("useVisibilityObserver")(Xe),Je;i[53]===Symbol.for("react.memo_cache_sentinel")?(Je=s._(/*BTDS*/"Check Messenger or Facebook on your mobile device for a one-time code"),i[53]=Je):Je=i[53];var Ze=Je,et=$e||K,tt;i[54]===Symbol.for("react.memo_cache_sentinel")?(tt=s._(/*BTDS*/"Resend code"),i[54]=tt):tt=i[54];var nt;i[55]!==Ne||i[56]!==et?(nt={disabled:et,label:tt,onPress:Ne,testid:"mw-eb-otc-insert-resend-code-button",type:"secondary"},i[55]=Ne,i[56]=et,i[57]=nt):nt=i[57];var rt=nt,ot;i[58]===Symbol.for("react.memo_cache_sentinel")?(ot=r("justknobx")._("4787"),i[58]=ot):ot=i[58];var at=ot,it,lt;i[59]===Symbol.for("react.memo_cache_sentinel")?(it=s._(/*BTDS*/"Need help?"),lt=at?{rel:"noreferrer",target:"_blank",url:E}:void 0,i[59]=it,i[60]=lt):(it=i[59],lt=i[60]);var st=at?void 0:Ge,ut;i[61]!==st?(ut={label:it,linkProps:lt,onPress:st,testid:"mw-eb-otc-insert-help-button"},i[61]=st,i[62]=ut):ut=i[62];var ct=ut,dt;i[63]===Symbol.for("react.memo_cache_sentinel")?(dt=s._(/*BTDS*/"Don\u2019t have your other device?"),i[63]=dt):dt=i[63];var mt;i[64]!==je||i[65]!==qe?(mt=babelHelpers.extends({label:dt,onPress:je},qe,{testid:"mw-eb-otc-no-other-device-button"}),i[64]=je,i[65]=qe,i[66]=mt):mt=i[66];var pt=mt,_t=r("useMWCancelConfirmationDialog")("skip_restore"),ft=se?_t:void 0,gt=(a=r("qex")._("4520"))!=null?a:!1,ht=gt?pt:ct,yt=ht!=null,Ct=ft!=null,bt;i[67]!==ft||i[68]!==Ct?(bt=c.jsx(r("MWXMultiStepDialogHeader.react"),{onClose:ft,withCloseButton:Ct,withoutBackButton:!0,withoutHeaderBottomBorder:!0}),i[67]=ft,i[68]=Ct,i[69]=bt):bt=i[69];var vt=yt&&!D?rt:void 0,St=yt&&!D?ht:void 0,Rt;i[70]===Symbol.for("react.memo_cache_sentinel")?(Rt={className:"x2lwn1j"},i[70]=Rt):Rt=i[70];var Lt=yt&&!D?void 0:16,Et;i[71]===Symbol.for("react.memo_cache_sentinel")?(Et=c.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:16,children:c.jsx("div",{className:"xg87l8a",children:c.jsx(r("MWEBOTCInterstitialIllustration.react"),{})})}),i[71]=Et):Et=i[71];var kt;i[72]===Symbol.for("react.memo_cache_sentinel")?(kt=c.jsx(r("MWXColumnItem.react"),{align:"center",paddingVertical:16,children:c.jsx(r("MWXText.react"),{align:"center",isSemanticHeading:!0,type:"headlineEmphasized2",children:Ze})}),i[72]=kt):kt=i[72];var It;i[73]===Symbol.for("react.memo_cache_sentinel")?(It={className:"x1l90r2v x2b8uid"},i[73]=It):It=i[73];var Tt;i[74]===Symbol.for("react.memo_cache_sentinel")?(Tt=c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx("div",babelHelpers.extends({},It,{children:c.jsx(r("MWXDeferredPopoverTrigger.react"),{align:"middle",popoverProps:{},popoverResource:C,position:"above",children:x})}))}),i[74]=Tt):Tt=i[74];var Dt=$e||D,xt;i[75]!==Ie||i[76]!==Dt?(xt=c.jsx(r("MWChatEncryptedBackupsNumericCodeInput.react"),babelHelpers.extends({},Ie,{disabled:Dt,testid:void 0})),i[75]=Ie,i[76]=Dt,i[77]=xt):xt=i[77];var $t;i[78]!==B||i[79]!==xt?($t=c.jsx(r("MWChatEncryptedBackupsNumericCodeErrorWrapper.react"),{error:B,children:xt}),i[78]=B,i[79]=xt,i[80]=$t):$t=i[80];var Pt;i[81]!==B?(Pt=I&&B===o("MWEBOTCErrorMessages").getGeneralErrorMessage()?c.jsx("div",{className:"xwib8y2",children:c.jsx(r("MWXText.react"),{align:"center",color:"negative",type:"body4",children:s._(/*BTDS*/"[meta-only] please rageshake from both devices (mobile and web) when reporting an OTC bug")})}):null,i[81]=B,i[82]=Pt):Pt=i[82];var Nt;i[83]!==$t||i[84]!==Pt?(Nt=c.jsxs(r("MWXColumnItem.react"),{align:"center",children:[$t,Pt]}),i[83]=$t,i[84]=Pt,i[85]=Nt):Nt=i[85];var Mt;i[86]!==D||i[87]!==yt?(Mt=D&&c.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:yt?16:0,paddingVertical:yt?8:0,children:c.jsxs(r("MWXRow.react"),{align:"center",paddingTop:8,spacing:8,children:[c.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:c.jsx(r("MWXSpinner.react"),{color:k?"disabled_DEPRECATED":"blue",size:12})}),c.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:c.jsx(r("MWXText.react"),{color:"secondary",testid:void 0,type:"body3",children:s._(/*BTDS*/"Verifying your code")})})]})}),i[86]=D,i[87]=yt,i[88]=Mt):Mt=i[88];var wt;i[89]!==D||i[90]!==rt||i[91]!==yt?(wt=!yt&&!D&&c.jsx(r("MWXColumnItem.react"),{align:"center",paddingTop:8,children:c.jsx(r("MWXText.react"),{color:rt.disabled?"disabled":"highlight",type:"button2",children:c.jsx(r("MWXLink.react"),{disabled:rt.disabled,onClick:rt.onPress,rel:"noreferrer",children:rt.label})})}),i[89]=D,i[90]=rt,i[91]=yt,i[92]=wt):wt=i[92];var At;i[93]!==Lt||i[94]!==Nt||i[95]!==Mt||i[96]!==wt?(At=c.jsxs(r("MWXColumn.react"),{align:"center",paddingHorizontal:16,paddingTop:16,paddingVertical:Lt,spacing:8,children:[Et,kt,Tt,Nt,Mt,wt]}),i[93]=Lt,i[94]=Nt,i[95]=Mt,i[96]=wt,i[97]=At):At=i[97];var Ft;i[98]!==At||i[99]!==te?(Ft=c.jsx("div",babelHelpers.extends({},Rt,{ref:te,children:At})),i[98]=At,i[99]=te,i[100]=Ft):Ft=i[100];var Ot;i[101]!==Ye||i[102]!==vt||i[103]!==St||i[104]!==Ft?(Ot=c.jsx(r("MWXDialogPageLegacy.react"),{callToActionGroupLayout:"expanded",includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION:!1,primaryCallToAction:vt,ref:Ye,secondaryCallToAction:St,children:Ft}),i[101]=Ye,i[102]=vt,i[103]=St,i[104]=Ft,i[105]=Ot):Ot=i[105];var Bt;return i[106]!==bt||i[107]!==Ot?(Bt=c.jsxs(c.Fragment,{children:[bt,Ot]}),i[106]=bt,i[107]=Ot,i[108]=Bt):Bt=i[108],Bt}function x(e,t){return c.jsx(r("MWXText.react"),{color:"secondary",type:"body3",children:s._(/*BTDS*/"After confirming on {device} that you requested a code, you can enter it here.",[s._param("device",c.jsx(r("MWXText.react"),{color:"blueLink",ref:e,type:"bodyLink3",children:c.jsx(r("MWXLink.react"),{onClick:function(){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,"OTC_RESTORE_DEVICES_POPOVER_CLICK"),t()},testid:void 0,children:s._(/*BTDS*/"your mobile device")})}))])})}x.displayName=x.name+" [from "+i.id+"]";function $(e){return r("FBLogger")("wmi_eb").mustfix("OTC Restore: Error when fetching backup ids, %s",e)}function P(e){var t=e.mwEBCreateLocalStorageEntry,n=e.mwEBDeleteLocalStorageEntry;t(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION),t(r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_RESTORED_IN_CURRENT_SESSION_2),n(r("MWEncryptedBackupsLocalStorageEntryEnum").EBSM_CORRUPTION_WIPE)}function N(){}l.default=D}),226);
__d("MWEncryptedBackupsQPWithPinPlaceholder.react",["MWXColumn.react","MWXGlimmer.react","MWXRow.react","MWXRowItem.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("gkx")("23433"),c={logoGlimmer:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xxk0z11",width:"xvy4d1p",$$css:!0},pinInputGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"xc9qbxq",$$css:!0},root:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",borderInlineEndWidth:"x10w94by",borderBottomWidth:"x1qhh985",borderInlineStartWidth:"x14e42zd",boxShadow:"xjf5wm9",boxSizing:"x9f619",minWidth:"xeuugli",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0},textGlimmer:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",height:"x1qx5ct2",$$css:!0}};function d(){var e=o("react-compiler-runtime").c(6),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t={0:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x1l90r2v xyamay9"},1:{className:"xlhe6ec x1obq294 x5a5i1n xde0f50 x15x8krk x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x972fbf x10w94by x1qhh985 x14e42zd xjf5wm9 x9f619 xeuugli x6ikm8r x10wlt62 x11lfxj5 x135b78x xw7yly9 x1ys307a x1yztbdb xyqm7xq x2lwn1j xsag5q8 xz9dl7a"}}[!!u<<0],e[0]=t):t=e[0];var n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(r("MWXRowItem.react"),{verticalAlign:"center",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.logoGlimmer})}),e[1]=n):n=e[1];var a;e[2]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsxs(r("MWXRow.react"),{spacingVertical:0,verticalAlign:"center",children:[n,s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})]}),e[2]=a):a=e[2];var i;e[3]===Symbol.for("react.memo_cache_sentinel")?(i=s.jsx(r("MWXRow.react"),{wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx("div",{className:"x16ngw23 xwib8y2",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})})}),e[3]=i):i=e[3];var l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=s.jsx(r("MWXRow.react"),{direction:"forward",wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:c.pinInputGlimmer})})}),e[4]=l):l=e[4];var d;return e[5]===Symbol.for("react.memo_cache_sentinel")?(d=s.jsx("div",babelHelpers.extends({},t,{children:s.jsxs(r("MWXColumn.react"),{spacing:8,style:c.root,children:[a,i,l,s.jsx(r("MWXRow.react"),{wrap:"none",children:s.jsx(r("MWXRowItem.react"),{expanding:!0,children:s.jsx("div",{className:"x18xe386 xpdvgm7 x1y1aw1k",children:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:c.textGlimmer})})})})]})})),e[5]=d):d=e[5],d}l.default=d}),98);
__d("MWEncryptedBackupsThreadListNux_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[{kind:"RootArgument",name:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider"}],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListNux_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useMWEncryptedBackupsGetVirtualDevicesPreloaded_xfbEncryptedBackup"},{alias:null,args:[{kind:"Literal",name:"family_device_id",value:""}],kind:"ScalarField",name:"has_otc_eligible_devices",storageKey:'has_otc_eligible_devices(family_device_id:"")'}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"MWEBVestaUserInfoContextProvider_viewer"},{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_auto_eb_upsells",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{condition:"__relay_internal__pv__MWEBNewUserOnboardingShouldLoadUpsellsrelayprovider",kind:"Condition",passingValue:!0,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"if_viewer_can_see_messenger_eb_new_user_onboarding_upsells",plural:!1,selections:[{args:null,documentName:"MWEncryptedBackupsThreadListNux_query",fragmentName:"MWEBNewUserOnboardingThreadListUpsellWrapper_viewer",fragmentPropName:"viewer",kind:"ModuleImport"}],storageKey:null}]}],storageKey:null},action:"THROW",path:"viewer"},{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query"}]}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("MWEncryptedBackupsThreadListNux.react",["CometPlaceholder.react","CometRelay","JSResourceForInteraction","MWChatEncryptedBackupsQPLSource.enum","MWEBEntrypointsKillswitch.enum","MWEBMobileOnboardingEligibility","MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEBVirtualDevicesContextProvider.react","MWEBWebOnboardingUpsellUtils","MWEncryptedBackupsThreadListNux_query.graphql","MWEncryptedBackupsThreadListQPWrapper.react","cr:10269","cr:11983","cr:12316","cr:13616","cr:20045","cr:2046","cr:3713","react","react-compiler-runtime","useMWEBBackupState","useMWEncryptedBackupsGetVirtualDevicesPreloaded"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=c.useCallback,p=(s=n("cr:12316"))!=null?s:n("cr:11983"),_=o("MWEBMobileOnboardingEligibility").requireMobileOnboardingIfEligible(r("JSResourceForInteraction")("MWEBMobileOnboardingQPBannerWrapper.react").__setRef("MWEncryptedBackupsThreadListNux.react"));function f(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t={onClose:g,showMessengerDeprecationQP:!1},e[0]=t):t=e[0],t}function g(){}var h=(u=n("cr:13616"))!=null?u:{useShowMessengerDeprecationQP:f};function y(t){var a,i,l,s=o("react-compiler-runtime").c(18),u=t.children,c=t.fragmentKey,m=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEncryptedBackupsThreadListNux_query.graphql"),c),p;s[0]===Symbol.for("react.memo_cache_sentinel")?(p={entrypoint:r("MWEBEntrypointsKillswitch.enum").INBOX_THREADLIST},s[0]=p):p=s[0];var _=r("useMWEBBackupState")(p),f=m==null?void 0:m.xfb_backup,g;s[1]!==f?(g={encryptedBackup:f},s[1]=f,s[2]=g):g=s[2];var h=r("useMWEncryptedBackupsGetVirtualDevicesPreloaded")(g),y=h.getVirtualDevices,b;s[3]!==y?(b=y(),s[3]=y,s[4]=b):b=s[4];var v=b,S=v.offlineDevicesCount,R=v.vestaClientID,L=(a=m==null||(i=m.xfb_backup)==null?void 0:i.has_otc_eligible_devices)!=null?a:void 0,E=(l=m==null?void 0:m.xfb_backup)!=null?l:void 0,k;s[5]!==_||s[6]!==u||s[7]!==m||s[8]!==E?(k=d.jsx(C,{backupState:_,children:u,encryptedBackup:E,fragment:m}),s[5]=_,s[6]=u,s[7]=m,s[8]=E,s[9]=k):k=s[9];var I;s[10]!==m.viewer||s[11]!==k?(I=d.jsx(o("MWEBVestaUserInfoContext.react").MWEBVestaUserInfoContextProvider,{viewer$key:m.viewer,children:k}),s[10]=m.viewer,s[11]=k,s[12]=I):I=s[12];var T;return s[13]!==S||s[14]!==L||s[15]!==I||s[16]!==R?(T=d.jsx(r("MWEBVirtualDevicesContextProvider.react"),{hasOtcEligibleDevicesInitialValue:L,offlineDevicesCountInitialValue:S,vestaClientIDInitialValue:R,children:I}),s[13]=S,s[14]=L,s[15]=I,s[16]=R,s[17]=T):T=s[17],T}function C(e){var t=o("react-compiler-runtime").c(13),a=e.backupState,i=e.children,l=e.encryptedBackup,s=e.fragment,u=h.useShowMessengerDeprecationQP(),c=u.onClose,m=u.showMessengerDeprecationQP,f=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),g=f.virtualDeviceInfo;if(n("cr:3713")!=null&&m){var y;return t[0]!==l||t[1]!==c?(y=d.jsx(n("cr:3713"),{closeDialog:c,encryptedBackup:l}),t[0]=l,t[1]=c,t[2]=y):y=t[2],y}switch(a){case 3:{if(p!=null&&!g.isPINCodeRegistered){var C;return t[3]!==i?(C=d.jsx(p,{bannerSource:r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_PERSISTENT_BANNER,source:r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_ONBOARDING_QP,children:i}),t[3]=i,t[4]=C):C=t[4],C}return i}case 4:{var b;return t[5]!==i||t[6]!==s?(b=n("cr:2046")!=null?d.jsx(n("cr:2046"),{fragmentKey:s,trigger:o("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.THREAD_LIST,children:i}):i,t[5]=i,t[6]=s,t[7]=b):b=t[7],b}case 1:return null;case 2:{if(o("MWEBWebOnboardingUpsellUtils").IS_E2E_TEST_UNRELATED_TO_ENCRYPTED_BACKUPS||s.viewer.if_viewer_can_see_messenger_eb_auto_eb_upsells)return i;var v;t[8]!==i?(v=n("cr:20045")?d.jsx(n("cr:20045"),{source:r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP,children:i}):i,t[8]=i,t[9]=v):v=t[9];var S=v,R;return t[10]!==S||t[11]!==s.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells?(R=s.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells?d.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsJewelNuxWrapper.OnboardingThreadListQP",children:d.jsx(o("CometRelay").MatchContainer,{match:s.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells,props:{bannerSource:r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_PERSISTENT_BANNER,children:S,qpSource:r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_ONBOARDING_QP}})}):n("cr:10269")?d.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsThreadListNux.OnboardingThreadListQP",children:d.jsx(n("cr:10269"),{source:r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_QP,children:S})}):d.jsx(_,{fallback:S,props:{children:S,source:r("MWChatEncryptedBackupsQPLSource.enum").INBOX_THREADLIST_ONBOARDING_QP,trigger:o("MWEncryptedBackupsThreadListQPWrapper.react").MWEncryptedBackupsQPTrigger.THREAD_LIST}}),t[10]=S,t[11]=s.viewer.if_viewer_can_see_messenger_eb_new_user_onboarding_upsells,t[12]=R):R=t[12],R}default:return i}}function b(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=e.fragmentKey,i;return t[0]!==n||t[1]!==a?(i=d.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWEncryptedBackupsThreadListNux.Query",children:d.jsx(y,{fragmentKey:a,children:n})}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}l.default=b}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query",selections:[{kind:"Defer",selections:[{args:null,kind:"FragmentSpread",name:"MWEncryptedBackupsThreadListRestoreQPWrapper_query"}]}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("useMWEBIsUpsellDeferred",["MWEncryptedBackupsDeferLocalStorageUpsell","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo;function c(t){var n=o("react-compiler-runtime").c(18),a=t.upsellType,l=(e||(e=r("useReStore")))(),s;n[0]!==a?(s=o("MWEncryptedBackupsDeferLocalStorageUpsell").getLocalStorageKeys(a),n[0]=a,n[1]=s):s=n[1];var u=s,c=u.countdownInMS,d=u.impressionsCountKey,m=u.lastImpressionTimeKey,p=u.maxImpressionLimit,_;n[2]!==c||n[3]!==l.tables.experiences_shared_state||n[4]!==m?(_=function(){return o("ReQL").fromTableAscending(l.tables.experiences_shared_state).getKeyRange(m).map(function(e){var t=e.stateValue;return t!=null&&+t+c>Date.now()})},n[2]=c,n[3]=l.tables.experiences_shared_state,n[4]=m,n[5]=_):_=n[5];var f;n[6]!==c||n[7]!==l||n[8]!==m?(f=[c,l,m],n[6]=c,n[7]=l,n[8]=m,n[9]=f):f=n[9];var g=o("ReQLSuspense").useFirst(_,f,i.id+":41"),h;n[10]!==l.tables.experiences_shared_state||n[11]!==d||n[12]!==p?(h=function(){return o("ReQL").fromTableAscending(l.tables.experiences_shared_state).getKeyRange(d).map(function(e){var t=e.stateValue;return!(p===o("MWEncryptedBackupsDeferLocalStorageUpsell").INFINITE_IMPRESSIONS_LIMIT||+t<p)})},n[10]=l.tables.experiences_shared_state,n[11]=d,n[12]=p,n[13]=h):h=n[13];var y;n[14]!==l||n[15]!==d||n[16]!==p?(y=[l,d,p],n[14]=l,n[15]=d,n[16]=p,n[17]=y):y=n[17];var C=o("ReQLSuspense").useFirst(h,y,i.id+":56");return g===!0||C===!0}l.default=c}),98);
__d("useMWEncryptedBackupsIsUpsellDismissed",["MWEBVestaUserInfoContext.react","MWEBVirtualDevicesContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","react","react-compiler-runtime","useMWEBIsUpsellDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useState;function u(e){var t=o("react-compiler-runtime").c(5),n=e.upsellType,a=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),i=s(!1),l=i[0],u=i[1],c;t[0]!==n?(c={upsellType:n},t[0]=n,t[1]=c):c=t[1];var d=r("useMWEBIsUpsellDeferred")(c),m=o("MWEBVirtualDevicesContext.react").useMWEBVirtualDevices(),p=m.virtualDeviceInfo,_=p.doesUserHaveOtcEligibleDevices;if(a&&n===o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL&&!_){var f;return t[2]===Symbol.for("react.memo_cache_sentinel")?(f=[!0,u],t[2]=f):f=t[2],f}var g=d===!0||l,h;return t[3]!==g?(h=[g,u],t[3]=g,t[4]=h):h=t[4],h}l.default=u}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react",["CometPlaceholder.react","CometRelay","EncryptedBackupsSupportedPlatformUtils","MWEBVestaUserInfoContext.react","MWEncryptedBackupsDeferLocalStorageUpsell","MWEncryptedBackupsQPWithPinPlaceholder.react","MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql","deferredLoadComponent","gkx","react","react-compiler-runtime","requireDeferred","useHasRestoreInterstitialSoftblockBeenDismissed","useMWEBGetUpsellState","useMWEncryptedBackupsIsUpsellDismissed"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=r("deferredLoadComponent")(r("requireDeferred")("MWEncryptedBackupsThreadListRestoreQPWrapper.react").__setRef("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred.react")),d=r("gkx")("3952");function m(t){var a=o("react-compiler-runtime").c(15),i=t.children,l=t.fragmentKey,s=t.trigger,m=o("CometRelay").useFragment(e!==void 0?e:e=n("MWEncryptedBackupsThreadListRestoreQPWrapperDeferred_query.graphql"),l),p=o("MWEBVestaUserInfoContext.react").useMWEBIsCooldownOrLockOutState(),_=r("useMWEBGetUpsellState")(),f=_.isRestoreUpsellsDismissed,g;a[0]===Symbol.for("react.memo_cache_sentinel")?(g={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_JEWEL},a[0]=g):g=a[0];var h=r("useMWEncryptedBackupsIsUpsellDismissed")(g),y=h[0],C=h[1],b;a[1]===Symbol.for("react.memo_cache_sentinel")?(b={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.QP_WITH_PIN_JEWEL},a[1]=b):b=a[1];var v=r("useMWEncryptedBackupsIsUpsellDismissed")(b),S=v[0],R=v[1],L;a[2]===Symbol.for("react.memo_cache_sentinel")?(L={upsellType:o("MWEncryptedBackupsDeferLocalStorageUpsell").MWEncryptedBackupsDeferableUpsellType.PERSISTENT_BANNER_JEWEL},a[2]=L):L=a[2];var E=r("useMWEncryptedBackupsIsUpsellDismissed")(L),k=E[0],I=E[1],T;a[3]!==p?(T={backupState:4,isCooldownOrLockOutState:p},a[3]=p,a[4]=T):T=a[4];var D=r("useHasRestoreInterstitialSoftblockBeenDismissed")(T),x=o("EncryptedBackupsSupportedPlatformUtils").useMWEncryptedBackupsGetCurrentSupportedPlatform(),$=y||S;if(f||$&&!d||$&&d&&k)return i;var P;a[5]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx(r("MWEncryptedBackupsQPWithPinPlaceholder.react"),{}),a[5]=P):P=a[5];var N;a[6]!==i||a[7]!==x||a[8]!==m||a[9]!==$||a[10]!==I||a[11]!==C||a[12]!==R||a[13]!==s?(N=u.jsx(r("CometPlaceholder.react"),{fallback:P,name:"MWEncryptedBackupsThreadListRestoreQPWrapperDeferred",children:u.jsx(c,{children:i,currentSupportedPlatform:x,fragmentKey:m,hasDismissedQps:$,setHasDismissedBanner:I,setHasDismissedQp:C,setHasDismissedQpWithPin:R,trigger:s})}),a[6]=i,a[7]=x,a[8]=m,a[9]=$,a[10]=I,a[11]=C,a[12]=R,a[13]=s,a[14]=N):N=a[14];var M=N;switch(x){case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.INSTAGRAM_DIRECT_INBOX:return i;case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.MESSENGER_DOT_COM:case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_INBOX:return D?M:i;case o("EncryptedBackupsSupportedPlatformUtils").EncryptedBackupsSupportedPlatform.FACEBOOK_DOT_COM:return M}}l.default=m}),98);
__d("MWEncryptedBackupsThreadListRestoreQPWrapperDeferredWithEBCheck.react",["cr:9938"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:9938")}),98);
__d("MessengerCloudUploadFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M9.75 26a4.75 4.75 0 1 1 0-9.5h.017a.267.267 0 0 0 .267-.241 8 8 0 0 1 15.33-2.389c.038.088.121.149.217.158A6 6 0 0 1 25 26h-5a1 1 0 0 1-1-1v-4.253a.25.25 0 0 1 .25-.25h2.248a1 1 0 0 0 .844-1.537l-3.498-5.497a1 1 0 0 0-1.688 0l-3.498 5.498a1 1 0 0 0 .844 1.536h2.248a.25.25 0 0 1 .25.25V25a1 1 0 0 1-1 1H9.75z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerDeprecationQP.react",["fbt","ix","MWXQPCard.react","MessengerDeprecationUtils","MessengerMSplitFlag","formatDate","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(12),n=e.closeDialog,a=e.encryptedBackup,i=a!=null,l;t[0]!==n||t[1]!==i?(l={closeDialog:n,isQP:!0,userHasEncryptedBackup:i},t[0]=n,t[1]=i,t[2]=l):l=t[2];var d=o("MessengerDeprecationUtils").useDeprecationDialogContent(l),m=d.primaryCallToAction,p=d.secondaryCallToAction,_;t[3]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"_j{\"web\":\"Messenger desktop app will no longer be available after {month}. You can continue your conversations on the web.\",\"FB app\":\"Messenger desktop app will no longer be available after {month}. You can continue your conversations on the FB app.\"}",[s._enum(r("MessengerMSplitFlag").is_msplit_account?"web":"FB app",{web:"web","FB app":"FB app"}),s._param("month",r("formatDate")(new Date(o("MessengerDeprecationUtils").getDeprecationDateTs()),"F j, Y"))]),t[3]=_):_=t[3];var f=_;if(!i){var g;t[4]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"_j{\"web\":\"Messenger desktop app will no longer be available after {month}, and you can instead use the web. You need to create a PIN to avoid losing chat history.\",\"FB app\":\"Messenger desktop app will no longer be available after {month}, and you can instead use the FB app. You need to create a PIN to avoid losing chat history.\"}",[s._enum(r("MessengerMSplitFlag").is_msplit_account?"web":"FB app",{web:"web","FB app":"FB app"}),s._param("month",r("formatDate")(new Date(o("MessengerDeprecationUtils").getDeprecationDateTs()),"F j, Y"))]),t[4]=g):g=t[4],f=g}var h=f,y;t[5]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Messenger desktop app is going away"),t[5]=y):y=t[5];var C;t[6]===Symbol.for("react.memo_cache_sentinel")?(C={props:{isDecorative:!0,src:u("909982")},type:"image"},t[6]=C):C=t[6];var b;return t[7]!==n||t[8]!==f||t[9]!==m||t[10]!==p?(b=c.jsx(r("MWXQPCard.react"),{addOnPrimary:m,addOnSecondary:p,body:h,headline:y,icon:C,onClose:n}),t[7]=n,t[8]=f,t[9]=m,t[10]=p,t[11]=b):b=t[11],b}l.default=d}),226);
__d("MessengerMobileFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M15.75 24.5a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-4.5z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M10.5 9.5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v17a3 3 0 0 1-3 3h-9a3 3 0 0 1-3-3v-17zm3-.5h9a.5.5 0 0 1 .5.5v17a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-17a.5.5 0 0 1 .5-.5z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("useHasOTCEligibleDevicesFromReStore",["MAWOneTimeCodeGating","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(8),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.encrypted_backups?(a=function(){return o("ReQL").fromTableAscending(n.tables.encrypted_backups)},t[0]=n.tables.encrypted_backups,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var s=o("ReQLSuspense").useFirst(a,l,i.id+":21"),u;t[4]!==s?(u=s==null||!o("MAWOneTimeCodeGating").isOneTimeCodeEnabled()?!1:s.hasOtcEligibleDevices,t[4]=s,t[5]=u):u=t[5];var c;return t[6]!==u?(c={hasOtcEligibleDevices:u},t[6]=u,t[7]=c):c=t[7],c}l.default=s}),98);/*FB_PKG_DELIM*/
__d("Cache",["TimeSlice"],(function(t,n,r,o,a,i,l){"use strict";var e=6e4,s=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.has=function(t){return this.$1.has(t)},n.get=function(t,n){var e=this.__getRaw(t);return e?e.$2:n},n.getAll=function(t,n){var e=this,r=new Map;return t.forEach(function(t){return r.set(t,e.get(t,n))}),r},n.delete=function(t){var e=this.__getRaw(t);return e&&e.$3&&clearTimeout(e.$3),this.$1.delete(t)},n.clear=function(){this.$1.forEach(function(e){e&&e.$3&&clearTimeout(e.$3)}),this.$1.clear()},n.set=function(n,o,a,i){if(!this.shouldUpdate(n,a))return!1;var t=this.__getRaw(n);return t||(t=this.__getNewRawObject()),delete t.$2,delete t.$4,t.$3&&clearTimeout(t.$3),delete t.$3,t.$2=o,a!=null&&(t.$4=a),i!=null&&i>=0&&(t.$3=setTimeout(r("TimeSlice").guard(this.delete.bind(this,n),"Cache expiration timeout"),i*e)),this.__setRaw(n,t),!0},n.shouldUpdate=function(t,n){var e=this.__getRaw(t);return e==null||e.$4==null||n==null||n>e.$4},n.size=function(){return this.$1.size},n.__getRaw=function(t){return this.$1.get(t)},n.__setRaw=function(t,n){this.$1.set(t,n)},n.__getNewRawObject=function(){return{$2:null,$3:null,$4:null,$5:null,$6:null}},n.__keys=function(){return this.$1.keys()},t})();l.default=s}),98);
__d("CoalescingLoader",[],(function(t,n,r,o,a,i){"use strict";function e(){return new Promise(function(e){return globalThis.setTimeout(e,0)})}var l=(function(){function t(t,n){n===void 0&&(n=e),this.$1=t,this.$2=[],this.$3=null,this.$4=n}var n=t.prototype;return n.gen=async function(t){this.$2.push(t);var e=this.$2.length-1,n=await this.$5();return n[e]},n.$5=function(){return this.$3!=null?this.$3:(this.$3=this.$6(),this.$3)},n.$6=async function(){await this.$4();var e=this.$2;return this.$2=[],this.$3=null,this.$1([].concat(e))},t})();i.CoalescingLoader=l}),66);
__d("EBAPI",["MAWEBCombinedSwitch","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=r("requireDeferred"))("EBAPIMinosVerifySingleEpoch").__setRef("EBAPI"),u=e("EBAPIWriteMinosPublicKeysForRecipient").__setRef("EBAPI"),c=e("EBGetContactEpochHead").__setRef("EBAPI"),d=e("EBGetMessageKeys").__setRef("EBAPI"),m=e("EBIsEbEnabled").__setRef("EBAPI"),p=e("EBMinosWriteKeyChangeAdminMessage").__setRef("EBAPI"),_=e("EBMinosWriteSecureStorageAlert").__setRef("EBAPI"),f={getContactEpochHead:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return c.load().then(function(e){return e.getContactEpochHead.apply(e,t)})},getMessageKeys:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.load().then(function(e){return e.getMessageKeys.apply(e,t)})},isEBEnabled:function(){return o("MAWEBCombinedSwitch").MAWEBCombinedSwitch.isEnabled()},isEbEnabledEbSwitch:function(){return m.load().then(function(e){return e.isEbEnabledEbSwitch()})},minosVerifySingleEpoch:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.load().then(function(e){return e.minosVerifySingleEpoch.apply(e,t)})},writeMinosKeyChangeAdminMessage:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return p.load().then(function(e){return e.writeMinosKeyChangeAdminMessage.apply(e,t)})},writeMinosMailboxKeysForRecipientAPI:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.load().then(function(e){return e.writeMinosMailboxKeysForRecipientAPI.apply(e,t)})},writeMinosSecureStorageAlert:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _.load().then(function(e){return e.writeMinosSecureStorageAlert.apply(e,t)})}},g=f;l.default=g}),98);
__d("EncryptedBackupsAttachmentProductType",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({MSGR:"msgr",IGD:"igd"}),l=e;i.default=l}),66);
__d("IGDWEBUploadMessageUtils",["I64","MAWExtractMsFromExternalId","WALogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var r=o("MAWExtractMsFromExternalId").extractMsFromExternalId((s||(s=o("I64"))).of_string(t));return r==null&&o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[sortOrder] Could not extract ms from externalId: ",""])),t),o("WATimeUtils").castToMillisTime(Number(n)*1e3+(r!=null?r:0))}l.generateProtobufServerTs=u}),98);
__d("EncryptedBackupsUploadEntity",["$InternalEnum","EncryptedBackupsUtils","IGDWEBUploadMessageUtils","WAArmadilloBackupMessage.pb","WAByteArray","WAGlobals","WAJids","WATimeUtils","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e instanceof ArrayBuffer?new Uint8Array(e):e}var s=n("$InternalEnum").Mirrored(["NEEDS_BACKUP","COMPLETED","NEEDS_BACKUP_RETRY","PERMANENT_FAILURE","EXPIRED","THREAD_DELETED","DELETION_PURGED","MESSAGE_DELETED","UPLOADING"]),u=n("$InternalEnum")({INVALID:"-1",IMAGE:"0",PTT:"1",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",XMA:"22",MESSENGER_PREVIEW:"25"});function c(e){return e}function d(e){var t=e.messageApplication,n=e.msgId,r=e.reportingMeta,a=e.sortOrderMs,i=o("WAJids").authorToUserId(n.author,o("WAJids").extractUserId(o("WAGlobals").getMyUserJid()));return o("encodeProtobuf").encodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,o("EncryptedBackupsUtils").asBackupMessage(i,n.externalId,a,r!=null?r:{frankingKey:null,frankingTag:null,frankingVersion:null,reportingContent:null,reportingTag:null},t)).readByteArrayView()}function m(e){return o("WAByteArray").uint8ArrayToBuffer(e)}function p(e){var t=e.attachmentContext,n=e.backupDirective,r=e.dbMsgType,a=e.instanceKey,i=e.isOpenEB,l=e.isRetroactiveUpload,u=e.legacyAttachmentContext,c=e.messageApplication,m=e.msgId,p=e.originalMsgProtocolId,_=e.reportingMeta,f=e.retryCount,g=e.senderId,h=e.serverTs,y=e.sortOrderMs,C=e.tags,b=e.triggerSource,v=d({messageApplication:c,msgId:m,reportingMeta:_,sortOrderMs:n.actionType===4?o("IGDWEBUploadMessageUtils").generateProtobufServerTs(m.externalId,h):y}),S={backupActionType:n.actionType,backupDirective:n,dbMsgType:r,failTsMs:o("WATimeUtils").castToMillisTime(0),instanceKey:a,isOpenEB:i,isRetroactiveUpload:l,msgId:m,msgIdKey:o("EncryptedBackupsUtils").convertWAMsgIdToStringId(m),msgType:"text",originalMsgProtocolId:p,protobuf:v,retryCount:f,senderId:g,serverTs:h,sortOrderMs:y,supplementalKey:n.supplementalKey,tags:C,triggerSource:b,uploadStatus:s.NEEDS_BACKUP,uploadTsSec:o("WATimeUtils").unixTime()};return t!=null&&(S=babelHelpers.extends({},S,{attachmentContext:t,legacyAttachmentContext:u,msgType:"media"})),S}l.toEbBackupMessageBytes=e,l.EbUploadStatus=s,l.AttachmentContextMediaType=u,l.castToEBQueueId=c,l.encodeBackupMessage=d,l.getEbBackupMessageBytesBuffer=m,l.asEBUploadEntity=p}),98);
__d("LFUCache",["Cache","ExecutionEnvironment"],(function(t,n,r,o,a,i,l){"use strict";var e,s=15,u=1,c=6e4,d=(function(t){function n(n,o){var a;return a=t.call(this)||this,a.$LFUCache2=n&&n>0?n:s,a.$LFUCache3=o&&o>0?o:u,((e||(e=r("ExecutionEnvironment"))).canUseDOM||(e||(e=r("ExecutionEnvironment"))).isInWorker)&&a.$LFUCache4(),a}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.$LFUCache4=function(){clearTimeout(this.$LFUCache1),this.$LFUCache1=setTimeout(this.purge.bind(this),this.$LFUCache2*c)},o.destroy=function(){clearTimeout(this.$LFUCache1)},o.get=function(n,r){return this.has(n)&&this.$LFUCache5(n),t.prototype.get.call(this,n,r)},o.set=function(n,r,o,a){var e=this.has(n),i=t.prototype.set.call(this,n,r,o,a);return i&&(e?this.$LFUCache5(n):this.$LFUCache6(n,this.$LFUCache3)),i},o.purge=function(){var e=this,t=Array.from(this.__keys());t.forEach(function(t){e.$LFUCache7(t)<e.$LFUCache3?e.delete(t):e.$LFUCache6(t,0)}),this.$LFUCache4()},o.$LFUCache5=function(t){var e=this.$LFUCache7(t)+1;return this.$LFUCache6(t,e),e},o.$LFUCache7=function(t){var e=this.__getRaw(t);return e&&e.$LFUCache8?e.$LFUCache8:0},o.$LFUCache6=function(t,n){var e=this.__getRaw(t);return e||(e=this.__getNewRawObject()),e.$LFUCache8=n,this.__setRaw(t,e),!0},n})(r("Cache"));l.default=d}),98);
__d("LSLoadThreadPkFromThreadId",["LSLogMebClientEvent.nop"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.i64.of_float(Date.now()),(function(e){t.logger(e).info(e)})("[EncryptedBackups][loadThreadPkFromThreadId] Beginning execution."),r[1]=t.i64.of_float(Date.now()),t.filter(t.db.table(173).fetch(),function(n){return t.i64.to_string(n.jid)===e[0]}).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?(r[13]=new t.Map,r[13].set("error_code",t.i64.cast([0,100])),r[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),r[13].set("error_message",""),o=[void 0,r[13]],r[2]=o[0],r[3]=o[1]):(n=l.item,a=[n.clientThreadPk,void 0],r[2]=a[0],r[3]=a[1])})},function(e){var o,a,i,l;return t.i64.neq(r[2],void 0)?(o=[r[2],r[3]],r[5]=o[0],r[6]=o[1]):(r[13]=new t.Map,r[13].set("error_code",t.i64.cast([0,7])),r[13].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),r[13].set("error_message",""),t.i64.neq(void 0,void 0)?(a=[void 0,r[13]],r[14]=a[0],r[15]=a[1]):(r[16]=new t.Map,r[16].set("error_code",t.i64.cast([0,100])),r[16].set("stored_procedure","LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure"),r[16].set("error_message",""),i=[void 0,r[16]],r[14]=i[0],r[15]=i[1]),l=[r[14],r[15]],r[5]=l[0],r[6]=l[1]),r[7]=t.i64.of_float(Date.now()),r[8]=t.i64.random(),r[10]="Finishing execution. Execution time: ",r[11]=t.i64.to_string(t.i64.sub(r[7],r[0])),r[12]=" ms",r[9]="",(function(e){t.logger(e).info(e)})(["[EncryptedBackups][loadThreadPkFromThreadId] ",r[9],r[10],r[9],r[11],r[9],r[12]].join("")),t.i64.eq(t.i64.mod_(r[8],t.i64.cast([0,1e3])),t.i64.cast([0,0]))?(r[13]=",",r[14]=t.createArray(),t.nativeOperation(n("LSLogMebClientEvent.nop"),"loadThreadPkFromThreadId",[r[10],r[13],r[11],r[13],r[12]].join(""),r[14],t.i64.cast([0,4]))):t.resolve()},function(e){var t;return t=[r[5],r[6]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSEncryptedBackupsLoadThreadPkFromThreadIdStoredProcedure",e.__tables__=["mi_act_mapping_table"],a.exports=e}),null);
__d("MAWBridgeThread",["MAWTimeUtils","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a){var i=o("WAJids").switchOnMsgrChatJidType(e.jid,{group:function(t){return!0},user:function(t){return!1}});return{authoritativeThreadKey:n,cannotReplyReason:e.cannotReplyReason,clientThreadKey:t,description:r,folder:e.folder,instanceKey:a,isGroup:i,jid:e.jid,lastReadTs:o("MAWTimeUtils").ensureValidMillisTime(e.lastReadMsgTs)||o("WATimeUtils").castToMillisTime(0)}}l.createBridgeThread=e}),98);
__d("MAWGetOrCreateThreadTxns",["MAWAdminMsgTxns","MAWBridgeThread","MAWBridgeTypesCreators","MAWDbMsgTxns","MAWDbThread","MAWDexieTable","MAWFolderTypes","MAWIndexedDb","MAWQplProxy","MAWThreadMappingQPL","MAWWriteBulkWriteIncomingAdminMsgTxns","WATimeUtils","getErrorSafe","gkx","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(e!=null&&t!=null){var n=o("WATimeUtils").fromMillisTime(e),r=o("WATimeUtils").fromMillisTime(t);return o("WATimeUtils").castToMillisTime(Math.max(n,r))}return e!=null?e:t}function s(e,t){return e.threads.get({jid:t})}function u(e,t){return(r("gkx")("10029")?o("MAWDexieTable").dexieAll(t.map(function(t){return e.threads.get({jid:t})})).then(function(e){return e.filter(Boolean)}):e.threads.where("jid").anyOf(t).toArray()).then(function(e){var n=new Map;for(var r of e)n.set(r.jid,r);return t.map(function(e){return n.get(e)})})}function c(e,t,n){var a=t.instanceKey,i=t.jid;return o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(1056836502,"2778"),"get_or_create_thread_start",{instanceKey:a}),n!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25313175,"1551"),"thread_mapping_get_or_create_thread_start",{instanceKey:n}),s(e,i).then(function(a){return a==null?(n!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25313175,"1551"),"create-1-1-thread-start",{instanceKey:n}),p(e,t,n).then(function(e){return{created:!0,thread:e}})):g(e,t,a).then(function(e){return{created:!1,thread:e}})}).then(function(e){return o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(1056836502,"2778"),"get_or_create_thread_end",{instanceKey:a}),n!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25313175,"1551"),"thread_mapping_get_or_create_thread_end",{instanceKey:n}),e})}function d(e,t,n){var r=n===void 0?{}:n,a=r.logState;return u(e,t.map(function(e){var t=e.jid;return t})).then(function(n){a==null||a("threadMapping2FetchedThreads");var r={},i=[],l=[];for(var s of n.entries()){var u=s[0],c=s[1];c==null?i.push(t[u]):l.push({params:t[u],thread:c})}return o("MAWDexieTable").dexieAll([i.length?_(e,i):o("MAWDexieTable").dexieResolve([]),l.length?h(e,l):o("MAWDexieTable").dexieResolve([])]).then(function(e){var n=e[0],o=e[1];a==null||a("threadMapping3ThreadsUpdated");for(var i of n){var l=i.adminMsgParams,s=i.thread;r[s.jid]={adminMsgParams:l,created:!0,thread:s}}for(var u of o)r[u.jid]={adminMsgParams:null,created:!1,thread:u};return t.map(function(e){var t=e.jid;return r[t]})})})}function m(e){var t,n=e.authoritativeThreadKey,r=e.clientThreadKey,a=e.createTs,i=e.deduplicationKey,l=e.folder,s=e.jid,u=e.lastActivityTimestamp,c=o("WATimeUtils").millisTime(),d=(t=u!=null?u:a)!=null?t:c,m={authoritativeThreadKey:n!=null?n:void 0,deduplicationKey:i,folder:l!=null?l:o("MAWFolderTypes").FOLDER_ID.INBOX,jid:s,lastReadMsg:null,lastReadMsgReceiptSent:null,newestMsgTs:d,oldestMsg:null,optimisticThreadKey:r!=null?r:void 0,threadOrder:o("MAWDbThread").craftThreadOrder(d,s)};return m}function p(e,t,n){var a=t.authoritativeThreadKey,i=t.description,l=t.instanceKey,s=t.skipVerifyThread,u=m(t);return e.threads.add(u).then(function(t){var c=babelHelpers.extends({},u,{chatId:t});return s!==!0&&o("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:o("MAWBridgeThread").createBridgeThread(c,c.optimisticThreadKey,a,i,l)}),n!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25313175,"1551"),"write-e2ee-admin-msg-in-new-thread",{instanceKey:n}),o("MAWAdminMsgTxns").writeE2EEThreadDescriptionMsg(e,c,n)}).catch(function(e){var t=r("getErrorSafe")(e);throw l!=null&&o("MAWThreadMappingQPL").endFailureInWorker("create_thread_failed",l,{string:{createThreadFailureReason:t.message}}),t.message="Error creating thread: "+t.message,t})}function _(e,t){var n=t.map(m);return e.threads.bulkAdd(n,{allKeys:!0}).then(function(r){var a=r.map(function(e,r){return{data:babelHelpers.extends({},n[r],{chatId:e}),params:t[r]}});for(var i of a)i.params.skipVerifyThread!==!0&&o("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:o("MAWBridgeThread").createBridgeThread(i.data,i.data.optimisticThreadKey,i.params.authoritativeThreadKey,i.params.description,i.params.instanceKey)});return o("MAWWriteBulkWriteIncomingAdminMsgTxns").writeE2EEAdminMsgsForIncomingCreatedThreadsWithoutAfterTxns(e,a.map(function(e){return e.data}))}).catch(function(e){var t=r("getErrorSafe")(e);throw t.message="Error bulk creating threads: "+t.message,t})}function f(t,n,r){var o=n.authoritativeThreadKey,a=n.clientThreadKey,i=n.deduplicationKey,l=n.folder,s=n.lastActivityTimestamp,u={authoritativeThreadKey:o!=null?o:t.authoritativeThreadKey,cannotReplyReason:l!=null||a!=null?null:t.cannotReplyReason,deduplicationKey:l!=null||a!=null?i:t.deduplicationKey,folder:l!=null?l:t.folder,newestMsgTs:e(r,s),optimisticThreadKey:a!=null?a:t.optimisticThreadKey};return babelHelpers.extends({},t,u)}function g(e,t,n){var a=t.authoritativeThreadKey,i=t.description,l=t.instanceKey,s=t.skipVerifyThread;return o("MAWDbMsgTxns").getThreadNewestMessageMs(e,n.jid).then(function(u){var c=f(n,t,u);return e.threads.update(n.chatId,c).then(function(){var e;return s!==!0&&o("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:o("MAWBridgeThread").createBridgeThread(c,c.optimisticThreadKey,a,i,l)}),o("MAWIndexedDb").afterTransaction({tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread({folder:(e=c==null?void 0:c.folder)!=null?e:o("MAWFolderTypes").FOLDER_ID.INBOX,threadJid:c.jid})}),c}).catch(function(e){var t=r("getErrorSafe")(e);throw t.message="Error updating thread: "+t.message,t})})}function h(e,t){return o("MAWDexieTable").dexieAll(t.map(function(t){var n=t.params,r=t.thread;return o("MAWDbMsgTxns").getThreadNewestMessageMs(e,r.jid).then(function(e){var t=f(r,n,e);return{params:n,thread:t}})})).then(function(t){return e.threads.bulkUpdate(t.map(function(e){var t=e.thread;return{changes:t,key:t.chatId}})).then(function(){for(var e of t){var n=e.params,r=n.authoritativeThreadKey,a=n.description,i=n.instanceKey,l=n.skipVerifyThread,s=e.thread;l!==!0&&o("MAWIndexedDb").afterTransaction({tag:"VerifyThreadExists",value:o("MAWBridgeThread").createBridgeThread(s,s.optimisticThreadKey,r,a,i)})}return t.map(function(e){var t=e.thread;return t})})}).catch(function(e){var t=r("getErrorSafe")(e);throw t.message="Error bulk updating threads: "+t.message,t})}l.getExistingThread=s,l.bulkGetExistingThread=u,l.getOrCreateThread=c,l.bulkGetOrCreateThread=d,l.createThread=p,l.prepareUpdatedThreadData=f}),98);
__d("MAWAdminMsgTxns",["MAWDbMsg","MAWDbThread","MAWDbThreadTxns","MAWExternalId","MAWLocalizationType","MAWLocalizationUtils","MAWTimeUtils","MAWWriteBulkWriteIncomingAdminMsgTxns","MAWWriteMsgTxns","WALogger","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){var r=e.ts,a=o("WATimeUtils").castUnixTimeToMillisTime(r),i=o("MAWTimeUtils").ensureValidMillisTime(n)||o("WATimeUtils").castToMillisTime(0),l=a>i?a:i;return babelHelpers.extends({},t,{newestMsgTs:l,oldestMsg:e.msgId,snippetMsg:e.msgId,snippetMsgTs:o("WATimeUtils").castUnixTimeToMillisTime(o("MAWDbMsg").getCanonicalTsFromMsg(e)),threadOrder:o("MAWDbThread").craftThreadOrder(l,t.jid)})}function u(t,n){return o("MAWDbThreadTxns").getThread(t,n).then(function(n){if(!n.success){o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["writeReachabilityErrorAdminMsg failed to create or get 1:1 thread"])));return}var a=n.value,i=o("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.REACHABILITY_ERROR,version:0},a.jid,o("MAWExternalId").generateExternalId(),o("WATimeUtils").castMillisTimeToUnixTime(o("WATimeUtils").millisTime()));return o("MAWWriteMsgTxns").writeMsg(t,i,a).then(r("emptyFunction"))})}function c(e,t,n){return o("MAWWriteBulkWriteIncomingAdminMsgTxns").writeE2EEAdminMsgsForIncomingCreatedThreadsWithAfterTxns(e,[t],n).then(function(e){var t=e[0];return t})}function d(e){var t=o("MAWDbMsg").craftE2eeAdminMsgAltIndex(e.chatId),n=o("MAWLocalizationUtils").buildUnstoredDbAdminMsg({adminMsgContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.E2EE_THREAD_DESCRIPTION,version:0},e.jid,o("MAWExternalId").generateExternalId(),o("WATimeUtils").castToUnixTime(0),t);return babelHelpers.extends({},n,{msgId:o("MAWDbMsg").craftMsgIdV2(e.chatId,1,n),sortOrderMs:0})}l.getUpdatedThreadForAdminMsg=s,l.writeReachabilityErrorAdminMsg=u,l.writeE2EEThreadDescriptionMsg=c,l.buildE2EEThreadDescriptionMsg=d}),98);
__d("MAWBridgeTrace",["WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a,i,l,s){var u=e.ack,c=e.externalId,d=e.ts,m=e.type,p=o("WAJids").switchOnMsgrChatJidType(t,{group:function(t){return"Group"},user:function(t){return"User"}});return{ack:u,externalId:c,isFirstMsg:!!a,openMessageOtid:r,openMessageParticipantCount:i,participantCount:l,threadJid:t,threadKey:s,threadType:p,traceType:n,ts:d,type_:m}}function s(e,t,n){return{traceContext:n,traceId:t,traceType:e}}function u(e,t,n,r){return{errorMessage:r,event:t,externalIds:e,traceType:n}}function c(e,t,n,r,o,a){return{checkPointId:e,dataTraceId:t,errorMessage:n,shouldFlush:r,syncChannel:o,tags:a}}l.createBridgeStartTraceData=e,l.createBridgeStartTraceWithTraceIdData=s,l.createBridgeUpdateTraceData=u,l.createBridgeTraceRecordCheckpointData=c}),98);
__d("MAWAfterWriteMsgUtil",["$InternalEnum","ArmadilloDataTraceType","MAWBridgeMsg","MAWBridgeTrace","MAWDbMsg","MAWIndexedDb","MAWXMAUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum").Mirrored(["DO_NOT_BUMP_THREAD","BUMP_LOCAL_ONLY","BUMP_LOCAL_AND_SERVER"]);function s(e){var t=e.dbMsg,n=e.isFirstMsg,r=e.openMessageOtid,a=e.openMessageParticipantCount,i=e.participantCount,l=e.quotedReplyAttachmentMeta,s=e.updatedThread,u=s.authoritativeThreadKey,c=s.jid;t.altIndex===o("MAWDbMsg").SPAM_ALT_INDEX||t.altIndex===o("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX||(o("MAWIndexedDb").afterTransaction({tag:"StartTrace",value:o("MAWBridgeTrace").createBridgeStartTraceData(t,c,o("ArmadilloDataTraceType").armadilloMessageSend,r,n,a,i,u)}),o("MAWXMAUtils").isXMAStoryReply(t.xmaMessageType)||o("MAWIndexedDb").afterTransaction({tag:"NewMsg",value:o("MAWBridgeMsg").createBridgeMsg(t,l)}))}l.WriteMsgAfterTxnBumpThreadOption=e,l.writeMsgAfterTransaction=s}),98);
__d("MAWWriteBulkWriteIncomingAdminMsgTxns",["MAWAdminMsgTxns","MAWAfterWriteMsgUtil","MAWDbMsgTxns","MAWDexieTable","MAWQplProxy","WALogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var r=[],a=[],i=[],l=new Map,s=new Map,u=n.map(function(e){return o("MAWDbMsgTxns").getThreadOldestMessageId(t,e.jid).then(function(t){return l.set(e.jid,t)})}),c=n.map(function(e){return o("MAWDbMsgTxns").getThreadNewestMessageMs(t,e.jid).then(function(t){return s.set(e.jid,t)})});return o("MAWDexieTable").dexieAll([u,c]).then(function(){return n.forEach(function(t){t==null&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["OfflineBulkWriteAdminmsg - Missing thread when write e2ee thread description"])));var n=o("MAWAdminMsgTxns").buildE2EEThreadDescriptionMsg(t),l=o("MAWAdminMsgTxns").getUpdatedThreadForAdminMsg(n,t,s.get(t.jid));r.push(n),i.push(l),a.push({dbMsg:n,isFirstMsg:!1,updatedThread:l})}),{afterTransactionSyncMsgsData:a,e2eeThreadAdminMsgs:r,threadsToUpdate:i}})}function u(e,t,n){return d(e,t,n).then(function(e){var t=e.afterTransactionSyncMsgsData,n=e.threadsToUpdate,r=new Map;return t.forEach(function(e){var t=e.updatedThread.jid;r.set(t,{externalId:e.dbMsg.externalId,msgId:e.dbMsg.msgId})}),n.map(function(e){return{adminMsgParams:r.get(e.jid),thread:e}})})}function c(e,t,n){return d(e,t,n).then(function(e){var t=e.afterTransactionSyncMsgsData,n=e.threadsToUpdate;return t.forEach(function(e){return o("MAWAfterWriteMsgUtil").writeMsgAfterTransaction(e)}),n})}function d(e,t,n){return s(e,t).then(function(t){var a=t.afterTransactionSyncMsgsData,i=t.e2eeThreadAdminMsgs,l=t.threadsToUpdate;return n!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25313175,"1551"),"write-bulk-admin-msgs-start",{instanceKey:n}),o("MAWDexieTable").dexieAll([e.messages.bulkAdd(i),e.threads.bulkPut(l)]).then(function(){return n!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(25313175,"1551"),"write-bulk-admin-msgs-end",{instanceKey:n}),{afterTransactionSyncMsgsData:a,threadsToUpdate:l}})})}l.writeE2EEAdminMsgsForIncomingCreatedThreadsWithoutAfterTxns=u,l.writeE2EEAdminMsgsForIncomingCreatedThreadsWithAfterTxns=c}),98);
__d("MAWBuildIncomingMsgs",["MAWAckLevel","MAWDbMsg","MAWMsgType","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=6*o("WATimeUtils").HOUR_SECONDS;function s(e,t){var n=e.author,r=e.externalId;return{ack:o("MAWAckLevel").ACK.received,altIndex:void 0,author:n,externalId:r,serverTs:t,ts:t,type:o("MAWMsgType").MSG_TYPE.CIPHERTEXT}}function u(e,t){var n=e.author,r=e.externalId;return{ack:o("MAWAckLevel").ACK.failed,altIndex:void 0,author:n,externalId:r,serverTs:t,ts:t,type:o("MAWMsgType").MSG_TYPE.UNAVAILABLE}}function c(t,n){var r;return{ack:t.ack,author:t.author,externalId:t.externalId,messageDeleteForMeTs:o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+e),msgContent:(r=o("MAWDbMsg").getMsgContent(t))==null?void 0:r.content,threadJid:n.jid,ts:t.ts,type:o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME}}function d(t,n,r){return{ack:t.ack,altIndex:void 0,author:t.author,externalId:r.externalId,msgContent:o("MAWDbMsg").getMsgContent(t),originalTs:t.ts,revokedExternalId:r.revokedExternalId,threadJid:n.jid,ts:r.ts,type:o("MAWMsgType").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+e)}}l.REVOKE_CONTENT_EXPIRATION_IN_SEC=e,l.buildUnstoredCiphertextMsg=s,l.buildUnstoredUnavailableMsg=u,l.buildUnstoredDeleteForMeMsg=c,l.buildUnstoredRevokedMsg=d}),98);
__d("MAWDbEditMsgHistoryTxns",["MAWAckLevel","MAWDbEditMsgHistory","MAWDexieTable","MAWVault","MWFBLogger","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=o("MWFBLogger").MWLogger().tags(["maw_db","txn","MAWDbEditMsgHistoryTxns"]);function m(t,n){var r=[];if(n.length===0)return o("MAWDexieTable").dexieResolve(r);var a=n.filter(function(e){return e.editCount!=null&&e.editCount>0}),i=a.map(function(e){return[e.externalId,e.threadJid]});if(i.length===0)return o("MAWDexieTable").dexieResolve([]);var l=a.reduce(function(e,t){return t.msgId!=null&&e.set(t.externalId,t.msgId),e},new Map),u=a.reduce(function(e,t){return t.msgId!=null&&e.set(t.externalId,t),e},new Map);return p(t,i).then(function(t){if(t.length===0)return d.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["No edit history found for the messages despite there being an editCount greater than 0"]))),[];for(var n of t){var a=l.get(n.originalMsgExternalId);a!=null&&r.push(babelHelpers.extends({},n,{editMsgHistoryId:o("MAWDbEditMsgHistory").convertToEditMsgHistoryId64(n.editMsgHistoryId),originalMsgId:a}));var i=u.get(n.originalMsgExternalId);i!=null&&n.threadJid!==i.threadJid&&d.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Edit history threadJid does not match original message threadJid"])))}return r})}function p(e,t){return e.editMsgHistory.where(["originalMsgExternalId","threadJid"]).anyOf(t).toArray()}function _(e,t){return t==null?o("MAWDexieTable").dexieResolve():e.editMsgHistory.get({editMsgHistoryId:t})}function f(e,t,n){return e.editMsgHistory.where("originalMsgExternalId").equals(n).filter(function(e){return e.editExternalId===t.externalId&&e.author===t.author&&e.threadJid===t.chat}).toArray().then(function(e){if(e.length>1){var t=e.map(function(e){return""+e.editTs.toString()}),n=new Set(t).size===1;n?d.MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[getEditHistoryMsgByEditedProtocolMsgId] Suspected multiple instances of same message!"]))):d.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[getEditHistoryMsgByEditedProtocolMsgId] Can't have "," messages with the same editExternalId!"])),e.length)}return e[0]})}function g(e,t){return t==null?o("MAWDexieTable").dexieResolve([]):e.editMsgHistory.where("originalMsgExternalId").equals(t.externalId).filter(function(e){return e.author===t.author&&e.threadJid===t.chat}).toArray().then(function(e){var t=[];return e.forEach(function(e){e!=null&&t.push(e)}),t})}function h(e,t){return e.editMsgHistory.bulkGet(t)}function y(e,t){return e.editMsgHistory.bulkAdd(t,{allKeys:!0}).then(function(e){return o("MAWDexieTable").dexieResolve(e)})}function C(e,t,n,r){return r.then(function(r){return b(e,t,n,r)})}function b(e,t,n,r){var a=[];return e.editMsgHistory.where("originalMsgExternalId").equals(t).filter(function(e){return e.threadJid===r&&e.author===n&&(e.sendStatus==null||e.sendStatus>=o("MAWAckLevel").ACK.sent)}).toArray().then(function(e){return e.forEach(function(e){a.push({messageId:e.editExternalId,originalMessageId:e.originalMsgExternalId,text:o("MAWVault").unvault(e.msgContent.content),timestamp:e.editTs})}),a})}function v(e,t,n,o){return e.editMsgHistory.where("originalMsgExternalId").equals(t).filter(function(e){return e.threadJid===o&&e.author===n}).delete().then(r("emptyFunction"))}var S=function(t,n){return t.editMsgHistory.where(["originalMsgExternalId","threadJid"]).anyOf(n).delete().then(function(){return o("MAWDexieTable").dexieResolve(n.length)})};function R(e,t,n){return e.editMsgHistory.put(babelHelpers.extends({},t,{msgContent:n.msgContent})).then(function(){})}l.loadEditMsgHistory=m,l.getEditHistoryByOriginalMsgExternalIdAndThreadJid=p,l.maybeGetEditMsgHistoryFromEditMsgHistoryId=_,l.getEditHistoryMsgByEditedProtocolMsgId=f,l.maybeGetEditMsgHistoryFromProtocolMsgId=g,l.bulkGetEditMsgHistorys=h,l.bulkAddEditMsgHistory=y,l.getEditHistoryAsEchoWithJidPromise=C,l.getEditHistoryAsEcho=b,l.bulkRemoveEditHistory=v,l.deleteExpiredEditMsgHistory=S,l.updateEditMsgHistoryWithNewIncomingMsg=R}),98);
__d("MAWDbPendingStanza",["WAAssertUnreachable"],(function(t,n,r,o,a,i,l){"use strict";var e="revoked",s="deleteForMe",u="deleteThread",c="Revoked",d="DeleteForMe",m="DeleteThread",p={DELETE_FOR_ME:d,DELETE_THREAD:m,REVOKED:c};function _(t){switch(t){case"Revoked":return e;case"DeleteForMe":return s;case"DeleteThread":return u;default:return r("WAAssertUnreachable")(t)}}l.PENDING_REVOKED=e,l.PENDING_DELETE_FOR_ME=s,l.REVOKED=c,l.DELETE_FOR_ME=d,l.PENDING_TYPE=p,l.getPendingSuffix=_}),98);
__d("MAWDeleteThreadUtil",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=[];if(e.forEach(function(e){if(e.pendingContent.type==="DeleteThread"){var n=e.pendingContent.content.metaSyncMessageRange.lastMessageTimestamp;n!=null&&t.push(n)}}),t.length===0)return null;t.sort(function(e,t){return t-e});var n=t[0];return{lastMessageTimestamp:n}}function l(e,t){return t!=null&&t.lastMessageTimestamp>=e}i.getLatestDeleteThreadInfo=e,i.isMsgDeletedViaDeleteThread=l}),66);
__d("MAWMsgCleaner",["MAWLoggerUtils","MWFBLogger","Promise","WAAssertUnreachable","WAShiftTimer","WATimeUtils","WorkerScheduler","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d="Unsend",m="Ephemeral",p="DeleteForMe",_="PendingStanza",f="Xma",g="IGDDM",h="Quote",y=o("MWFBLogger").MWLogger().tags([o("MAWLoggerUtils").Tag.MsgCleaner,o("MAWLoggerUtils").Tag.CleanerUpdate]),C={DELETE_FOR_ME:p,EPHEMERAL:m,IGDDM:g,PENDING_STANZA:_,QUOTE:h,UNSEND:d,XMA:f},b;function v(){return b==null&&(b=o("WorkerScheduler").makeScheduler("cleaner",{concurrency:1,maxTaskLimit:1,maxThrottleMs:8e3})),b}var S=(function(){function t(e,t){var n=this;this.$1=new(o("WAShiftTimer")).ShiftTimer(function(){r("promiseDone")(n.$2())}),this.getNextTs=e.getNextTs,this.removeExpired=e.removeExpired,this.cleanerType=t,this.purgeEnabled=e.purgeEnabled,this.$1.forceRunNow()}var a=t.prototype;return a.update=function(n){var t=R(this.cleanerType);y.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["","::update ",""])),t,n),this.$1.onOrBefore(o("WATimeUtils").cappedMillisecondsUntil(n))},a.$2=function(){var e=this,t=function(){if(!e.purgeEnabled())return(c||(c=n("Promise"))).resolve();var t=R(e.cleanerType);return y.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["","::_purgeNow"])),t),e.removeExpired().then(function(n){return n>0&&y.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["","::_purgeNow "," msgs' content cleaned"])),t,n),e.getNextTs()}).then(function(t){t!=null&&e.update(t)})};return this.$3!=null?(c||(c=n("Promise"))).resolve():(this.$3=v().task({fn:t,name:this.cleanerType,priority:o("WorkerScheduler").BACKGROUND_PRIORITY}),this.$3.run().finally(function(){e.$3=null}))},t})();function R(e){switch(e){case"Unsend":return"UnsendMsgCleaner";case"Ephemeral":return"EphemeralCleaner";case"DeleteForMe":return"DeleteForMeCleaner";case"PendingStanza":return"PendingStanzaCleaner";case"Xma":return"XmaCleaner";case"IGDDM":return"IGDDisappearingMsgCleaner";case"Quote":return"QuoteCleaner";default:return r("WAAssertUnreachable")(e)}}var L=S;l.CLEANER_TYPE=C,l.MsgCleaner=S,l.MSG_CLEANER_FOR_TESTING_ONLY=L}),98);
__d("MAWPendingStanzaCleaner",["FBLogger","MAWMsgCleaner","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=null;function c(e){u==null&&(u=new(o("MAWMsgCleaner")).MsgCleaner(e,o("MAWMsgCleaner").CLEANER_TYPE.PENDING_STANZA))}function d(t){if(u==null){var n="Trying to add new PendingStanzaCleanerTimestamp before the cleaner is initialized!";throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),n),r("FBLogger")("messenger_web").mustfixThrow(n)}else o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["PendingStanzaCleaner: Adding timestamps (",")"])),t),u.update(t)}function m(){return u}function p(){u=null}l.startPendingStanzaCleaner=c,l.addNewPendingStanzaCleanerTimestamp=d,l.getPendingStanzaCleaner_FOR_TESTING_ONLY=m,l.resetPendingStanzaCleaner_FOR_TESTING_ONLY=p}),98);
__d("MAWDbPendingStanzaTxns",["MAWDbPendingStanza","MAWDeleteThreadUtil","MAWPendingStanzaCleaner","WAJids","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a){var i=o("MAWDbPendingStanza").getPendingSuffix(a);return e.pendingStanzas.where("externalIdWithType").equals(t+"_"+i).filter(function(e){var t=e.pendingContent;return t.type===a&&t.content.author===n&&t.content.threadJid===r}).first()}function s(t,n,r,a){return e(t,n,r,a,o("MAWDbPendingStanza").PENDING_TYPE.REVOKED)}function u(t,n,r,a){return e(t,n,r,a,o("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME)}function c(e,t){var n=t.map(function(e){var t=e.expirationInSeconds;return o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+t)}),a=t.map(function(e,t){var r=e.content,a=e.externalId,i=e.pendingStanzaType;return{deleteTs:n[t],externalIdWithType:a+"_"+o("MAWDbPendingStanza").getPendingSuffix(i),pendingContent:r}});return e.pendingStanzas.bulkAdd(a).then(function(){return n.forEach(o("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp)}).then(r("emptyFunction"))}function d(e,t,n,r,a){var i=o("MAWDbPendingStanza").getPendingSuffix(a),l=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+n),s={deleteTs:l,externalIdWithType:r+"_"+i,pendingContent:t};return e.pendingStanzas.add(s).then(function(){o("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp(l)})}function m(e,t){var n=o("MAWDbPendingStanza").getPendingSuffix(o("MAWDbPendingStanza").PENDING_TYPE.DELETE_THREAD);return e.pendingStanzas.where("externalIdWithType").equals(t+"_"+n).toArray().then(function(e){return o("MAWDeleteThreadUtil").getLatestDeleteThreadInfo(e)})}function p(e){return e.pendingStanzas.toArray()}function _(e,t){var n=t.map(function(e){return e.rowId});return e.pendingStanzas.bulkDelete(n)}function f(e){var t,n;return(e==null||(t=e.pendingContent)==null?void 0:t.type)===o("MAWDbPendingStanza").PENDING_TYPE.REVOKED?e==null||(n=e.pendingContent)==null?void 0:n.content:null}function g(e,t){var n=o("MAWDbPendingStanza").getPendingSuffix(o("MAWDbPendingStanza").PENDING_TYPE.DELETE_THREAD),r=t.map(function(e){return e+"_"+n});return e.pendingStanzas.where("externalIdWithType").anyOf(r).toArray().then(function(e){var t=e.reduce(function(e,t){var n=e.get(t.externalIdWithType);return n==null?e.set(t.externalIdWithType,[t]):n.push(t),e},new Map),n=new Map;return t.forEach(function(e,t){var r=o("WAJids").unsafeCoerceToChatJid(t.split("_")[0]),a=o("MAWDeleteThreadUtil").getLatestDeleteThreadInfo(e);a!=null&&n.set(r,a)}),n})}l.maybeGetPendingStanzaByExternalId=e,l.maybeGetPendingRevokedStanza=s,l.maybeGetPendingDeletedStanza=u,l.bulkPutPendingStanzas=c,l.putPendingStanza=d,l.maybeGetDeleteThreadFromPendingStanza=m,l.getAllPendingStanzas=p,l.deletePendingStanzas=_,l.getRevokedContent=f,l.bulkGetDeleteThreadPendingStanzas=g}),98);
__d("MAWDeleteForMeMsgContentCleaner",["FBLogger","MAWMsgCleaner","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=null;function c(e){u==null&&(u=new(o("MAWMsgCleaner")).MsgCleaner(e,o("MAWMsgCleaner").CLEANER_TYPE.DELETE_FOR_ME))}function d(t){if(u==null){var n="Trying to add new DeleteForMeContentCleanerTimestamp before the cleaner is initialized!";throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),n),r("FBLogger")("messenger_web").mustfixThrow(n)}else o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["DeleteForMeMsgContentCleaner: Adding timestamps (",")"])),t),u.update(t)}function m(){return u}function p(){u=null}l.startDeleteForMeMsgContentCleaner=c,l.addNewDeleteForMeMsgContentCleanerTimestamp=d,l.getDeleteForMeMsgContentCleaner_FOR_TESTING_ONLY=m,l.resetDeleteForMeMsgContentCleaner_FOR_TESTING_ONLY=p}),98);
__d("MAWBridgeMsgCountdown",["MAWDbMsg","MAWLoggerUtils","MWFBLogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWLogger().tags(["bridge",o("MAWLoggerUtils").Tag.Countdown]);function c(t){return{msgs:t.map(function(t){var n,r=t.messageExpirationTs,a=(n=t.ephemeralSetting)==null?void 0:n.ephemeralExpirationInSec;if(!(r==null||a==null)){var i=o("WATimeUtils").cappedMillisecondsUntil(r);if(i<=0){u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Calling the messages starting countdown bridge event with remaning time less or equal to 0 (expired message)"])));return}var l=a*1e3;return i>l&&(i=l),u.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["createBridgeMsgsStartCountdown: msg ",", expiration ",", ms until countdown ",", duration ",""])),t.msgId,r,i,a),{countdownTs:r,millisecondsUntilCountdownTs:i,msgId:t.msgId,threadJid:t.threadJid,ts:o("MAWDbMsg").getCanonicalTsFromMsg(t)}}}).filter(Boolean)}}function d(e,t){return{countdownTs:t,msgId:e}}l.createBridgeMsgsStartCountdown=c,l.createBridgeMsgClearCountdown=d}),98);
__d("MAWEphemeralCleaner",["MAWLoggerUtils","MAWMsgCleaner","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=o("MWFBLogger").MWLogger().tags([o("MAWLoggerUtils").Tag.Ephemeral,o("MAWLoggerUtils").Tag.MsgCleaner,o("MAWLoggerUtils").Tag.CleanerTimestamp,"backend"]);function c(e){var t=e.expiryFns,n=e.purgeDeletionsFns;if(s==null){var r;s={expiry:new(r=o("MAWMsgCleaner")).MsgCleaner(t,r.CLEANER_TYPE.EPHEMERAL),purgeDeletions:new r.MsgCleaner(n,r.CLEANER_TYPE.EPHEMERAL)}}}function d(t,n){if(s==null)throw u.mustfixThrow("Trying to add new ephemeral timestamp before the cleaner is initialized!");var r=s,o=r.expiry,a=r.purgeDeletions;u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["EphemeralCleaner: Adding timestamps for expiry(",") and deletion(",")"])),t,n),o.update(t),a.update(n)}function m(){return s}function p(){s=null}l.startEphemeralCleaner=c,l.addNewEphemeralTimestamp=d,l.getEphemeralCleaner_FOR_TESTING_ONLY=m,l.resetEphemeralCleaner_FOR_TESTING_ONLY=p}),98);
__d("MAWEphemeralSettingsCache",["MAWBridge","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(t,n){e.set(t,n)}function u(t){var n,r={ephemeralExpirationInSec:0,ephemeralLastUpdatedOrSetTimestamp:o("WATimeUtils").castToUnixTime(0)};return(n=e.get(t))!=null?n:r}async function c(t){var n={ephemeralExpirationInSec:0,ephemeralLastUpdatedOrSetTimestamp:o("WATimeUtils").castToUnixTime(0)};if(!e.has(t)){var r=await o("MAWBridge").getBridge().sendAndReceive("event","getLSDBEphemeralSetting",{chatJid:t});s(t,r!=null?r:n)}}l.setEphemeralSettingCache=s,l.getEphemeralSettingCache=u,l.requestLSDBCacheForJid=c}),98);
__d("MAWEphemeralUtil",["FBLogger","MAWAckLevel","MAWBridgeMsgCountdown","MAWExternalId","MAWIndexedDb","MAWLocalizationType","MAWMsgType","WAArmadilloApplication.pb","WAJids","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t){var n=t.ephemeralExpirationInSec!==e.ephemeralExpirationInSec&&t.ephemeralLastUpdatedOrSetTimestamp===e.ephemeralLastUpdatedOrSetTimestamp;return n||e.ephemeralLastUpdatedOrSetTimestamp>t.ephemeralLastUpdatedOrSetTimestamp}function c(t,n,r){if(t==null)return!0;var a=t.ephemeralSetting;return a!=null&&a.ephemeralExpirationInSec===n?(o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["New ephemeral duration should be different from the existing duration"]))),!1):a!=null&&a.ephemeralLastUpdatedOrSetTimestamp>r?(o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["The new ephemeral setting timestamp should be greater than the existing timestamp"]))),!1):!0}function d(e){var t={ack:o("MAWAckLevel").ACK.sent,altIndex:void 0,author:o("WAJids").AUTHOR_SYSTEM,externalId:o("MAWExternalId").generateExternalId(),msgContent:{adminMsgContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_SETTING_CHANGE_MINUTES},ts:e,type:o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN};return{unstoredDbMedia:null,unstoredDbMsg:t,unstoredDbReaction:null}}function m(e,t){var n;switch(t){case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE:n=o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREENSHOT_IMAGE;break;case o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING:n=o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_SCREENSHOT_ACTION_SCREENSHOT_TYPE.SCREEN_RECORDING;break;default:throw r("FBLogger")("messenger_web").mustfixThrow("Received unexpected screenshot action type")}var a={ack:o("MAWAckLevel").ACK.sent,altIndex:void 0,author:o("WAJids").AUTHOR_SYSTEM,externalId:o("MAWExternalId").generateExternalId(),msgContent:{adminMsgContent:[],adminType:o("MAWLocalizationType").LOCALIZATION_TYPE.YOU_EPHEMERAL_TAKE_SCREENSHOT,screenshotActionType:n},ts:e,type:o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION};return{unstoredDbMedia:null,unstoredDbMsg:a,unstoredDbReaction:void 0}}function p(e){return o("WAJids").switchOnMsgrChatJidType(e,{group:function(t){throw r("FBLogger")("messenger_web").mustfixThrow("Received invalid chatJid. We only support ephemeral messaging in 1:1 threads.")},user:function(t){return t}})}function _(e){e!=null&&e.messageExpirationTs!=null&&e.ephemeralCounterStarted===!0&&o("MAWIndexedDb").afterTransaction({tag:"MsgClearCountdown",value:o("MAWBridgeMsgCountdown").createBridgeMsgClearCountdown(e.msgId,e.messageExpirationTs)})}l.isLocalSettingOutdated=u,l.shouldUpdateForOutgoingUserEphemeralSettingChange=c,l.buildUnstoredDbEphemeralSettingMsgWithoutContentPlaceholder=d,l.buildUnstoredDbEphemeralScreenshotActionMsgWithoutContentPlaceholder=m,l.getUserJidForEphemeralSetting=p,l.maybeClearEphemeralMsgCountdown=_}),98);
__d("MAWEphemeralSettingsTxns",["DateConsts","MAWDbThreadTxns","MAWDexieTable","MAWEphemeralSettingsCache","MAWEphemeralUtil","MAWIndexedDb","MAWLoggerUtils","MAWUserJidWrapper","MWFBLogger","WAJids","WAResultOrError","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=o("MWFBLogger").MWLogger().tags(["maw_db","txn",(_=o("MAWLoggerUtils")).Tag.Ephemeral,_.Tag.SettingChange,_.Tag.Incoming]),g=o("MWFBLogger").MWLogger().tags(["maw_db","txn",_.Tag.Ephemeral,_.Tag.SettingChange,_.Tag.Outgoing]),h=null,y=90*o("DateConsts").SEC_PER_DAY;function C(t,n,r,a,i,l,d,m,p){if(r<0||r>y){var _=o("WAJids").interpretAndValidateJid(l.jid).toString();throw f.mustfixThrow("EphemeralSetting duration is invalid "+r+", jidType: "+_)}var g={ephemeralExpirationInSec:r,ephemeralLastUpdatedOrSetTimestamp:a};f.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Handle Incoming Ephemeral Setting duration: ",", lastUpdated: ",". Thread: ",", Author: ",""])),r,a,String(l),n);var C=o("WAJids").interpretAsUserJid(l.jid);if(C==null)return f.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Received invalid chat jid for incoming ephemeral settings"]))),o("MAWDexieTable").dexieResolve(h);var b=o("WAJids").isAuthorMe(n)?o("MAWUserJidWrapper").getMyUserJid():n,v=o("MAWEphemeralSettingsCache").getEphemeralSettingCache(l.jid),S=v==null?void 0:v.ephemeralExpirationInSec,R=v==null?void 0:v.ephemeralLastUpdatedOrSetTimestamp;if(p)return v!=null&&!o("MAWEphemeralUtil").isLocalSettingOutdated(g,v)?a!==R?(f.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Sending Sync Response with duration ",", timestamp ",""])),S,R),o("MAWDexieTable").dexieResolve({outOfSyncEphemeralSetting:{chatJid:l.jid,correctEphemeralExpirationInSec:v.ephemeralExpirationInSec,correctEphemeralLastUpdatedOrSetTimestamp:v.ephemeralLastUpdatedOrSetTimestamp}})):(f.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Ephemeral setting in sync"]))),o("MAWDexieTable").dexieResolve(h)):(o("MAWIndexedDb").afterTransaction({tag:"EphemeralSettingsUpdatedForUI",value:{author:o("WAJids").userIdFromJid(b),chatJid:l.jid,ephemeralSettingArgs:g,isEphemeralSettingReset:i}}),o("MAWDexieTable").dexieResolve(h));var L={ephemeralSetting:g,ephemeralSyncResponseBackoffInfo:void 0,userJid:C};return t.ephemeralSettings.put(L).then(function(){return h})}function b(e,t,n,r,a){var i=n;if(i<0)throw g.mustfixThrow("Ephemeral duration should be 0 or more");var l=o("MAWEphemeralUtil").getUserJidForEphemeralSetting(t);return o("MAWDbThreadTxns").getThread(e,t).then(function(t){return t.success?e.ephemeralSettings.get({userJid:l}).then(function(t){if(!o("MAWEphemeralUtil").shouldUpdateForOutgoingUserEphemeralSettingChange(t,i,r))return o("WAResultOrError").makeResult({shouldUpdateSetting:!1});var n=t==null?{ephemeralSetting:{ephemeralExpirationInSec:i,ephemeralLastUpdatedOrSetTimestamp:r},userJid:l}:babelHelpers.extends({},t,{ephemeralSetting:{ephemeralExpirationInSec:i,ephemeralLastUpdatedOrSetTimestamp:r}});return e.ephemeralSettings.put(n).then(function(){return o("WAResultOrError").makeResult({shouldUpdateSetting:!0})})}):o("WAResultOrError").makeResult({shouldUpdateSetting:!1})})}function v(e,t,n){var a=o("MAWEphemeralUtil").getUserJidForEphemeralSetting(t);return e.ephemeralSettings.get({userJid:a}).then(function(t){if(t==null||t.ephemeralSetting==null)throw g.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Contact "," "," and ephemeral setting "," should not be null when receiving the server ack for outgoing ephemeral setting change"])),a,String(t),String(t==null?void 0:t.ephemeralSetting)),g.mustfixThrow("Contact and ephemeral setting should not be null when receiving the server ack for outgoing ephemeral setting change");var o=babelHelpers.extends({},t,{ephemeralSetting:{ephemeralExpirationInSec:t.ephemeralSetting.ephemeralExpirationInSec,ephemeralLastUpdatedOrSetTimestamp:n}});return e.ephemeralSettings.put(o).then(r("emptyFunction"))})}function S(e,t){var n=o("WAJids").interpretAsUserJid(t);n==null&&g.mustfixThrow("Unexpected chatJid input to isEphemeralMessagesEnabledForContact");var r=o("MAWEphemeralSettingsCache").getEphemeralSettingCache(t);return r.ephemeralLastUpdatedOrSetTimestamp===o("WATimeUtils").castToUnixTime(0)?o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeError("no_ephemeral_setting")):r!=null&&r.ephemeralExpirationInSec>0?o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeResult({outOfSyncEphemeralSetting:{chatJid:t,correctEphemeralExpirationInSec:r.ephemeralExpirationInSec,correctEphemeralLastUpdatedOrSetTimestamp:r.ephemeralLastUpdatedOrSetTimestamp}})):o("MAWDexieTable").dexieResolve(o("WAResultOrError").makeError("no_ephemeral_setting"))}function R(e,t){return e.ephemeralSettings.get({userJid:t}).then(function(n){return(n==null?void 0:n.ephemeralSyncResponseBackoffInfo)==null?(f.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["maybeResetEphemeralSyncResponseBackoffInfo no op for ",""])),t),o("WAResultOrError").makeResult()):(n.ephemeralSyncResponseBackoffInfo=void 0,f.DEBUG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["maybeResetEphemeralSyncResponseBackoffInfo reset for ",""])),t),e.ephemeralSettings.put(n).then(function(){return o("WAResultOrError").makeResult()}))})}l.handleAndWriteIncomingEphemeralSetting=C,l.handleAndWriteOutgoingUserEphemeralSettingChange=b,l.updateContactWhenEphemeralSettingChangeMarkedSent=v,l.getOutOfSyncEphemeralSettingForIncomingNonEphemeralMsg=S,l.maybeResetEphemeralSyncResponseBackoffInfo=R}),98);
__d("MAWEphemeralMsgTxns",["EBLogger","MAWBridgeMsgCountdown","MAWDbMsg","MAWDbMsgTxns","MAWDbThreadTxns","MAWDbXMATxns","MAWDexieTable","MAWEphemeralCleaner","MAWEphemeralConsts","MAWEphemeralMsgUtils","MAWEphemeralSettingsTxns","MAWIndexedDb","MAWLoggerUtils","MAWODSProxy","MAWThreadSnippetUtils","MWFBLogger","WAJids","WAOdsEnums","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_=o("MWFBLogger").MWLogger().tags([(p=o("MAWLoggerUtils")).Tag.Ephemeral,p.Tag.SettingSync,p.Tag.Incoming]),f=o("MWFBLogger").MWLogger().tags([p.Tag.Ephemeral,p.Tag.OnRead,p.Tag.Countdown]);function g(e,t,n){return n===void 0&&(n=function(){return!0}),o("MAWDbMsgTxns").getThreadMessagesBySortOrder(e,t,!1,!0).filter(n).limit(1).toArray().then(function(e){var t;return{needsUpdate:!0,value:(t=e[0])!=null?t:null}})}function h(e,t,n){return n.size===0?o("MAWDexieTable").dexieResolve():o("MAWDbThreadTxns").getThread(e,t).then(function(t){if(t.success){var r=t.value;return o("MAWDexieTable").dexieAll([o("MAWDbMsgTxns").getThreadOldestMessageId(e,r.jid),o("MAWDbMsgTxns").getThreadNewestMessageId(e,r.jid)]).then(function(t){var a=t[0],i=t[1];if(!(a==null||i==null)){var l=o("MAWEphemeralMsgUtils").filterNonExpiredMsg(n),s=n.has(a)?g(e,r.jid,l):o("MAWDexieTable").dexieResolve({needsUpdate:!1}),u=n.has(i)?o("MAWDbMsgTxns").getThreadMessagesBySortOrder(e,r.jid,!0,!1).filter(l).reverse().limit(1).toArray().then(function(t){var a=t[0];return a!=null&&o("MAWThreadSnippetUtils").isDbMsgDisabledForThreadSnippet(a)?o("MAWThreadSnippetUtils").recalculateSnippetFromScratch_EXPENSIVE(e,r,n).then(function(e){return{needsUpdate:!0,value:e!=null?e:null}}):{needsUpdate:!0,value:a!=null?a:null}}):o("MAWDexieTable").dexieResolve({needsUpdate:!1});return o("MAWDexieTable").dexieAll([s,u]).then(function(t){var n,l,s,u,c=t[0],d=t[1];if(!(!c.needsUpdate&&!d.needsUpdate)){var m=d.needsUpdate?(n=(l=d.value)==null?void 0:l.msgId)!=null?n:void 0:i,p=d.needsUpdate?d.value!=null?o("WATimeUtils").castUnixTimeToMillisTime(o("MAWDbMsg").getCanonicalTsFromMsg(d.value)):void 0:r.snippetMsgTs,_=babelHelpers.extends({},r,{oldestMsg:c.needsUpdate?(s=(u=c.value)==null?void 0:u.msgId)!=null?s:null:a,snippetMsg:m,snippetMsgTs:p});e.threads.put(_)}})}})}})}function y(t,n,r){if(r===void 0&&(r=!0),n==null||n.ephemeralSetting==null||n.ephemeralSetting.ephemeralExpirationInSec===0)return o("MAWDexieTable").dexieResolve(n);var a=o("WATimeUtils").castToUnixTime(n.ts+n.ephemeralSetting.ephemeralExpirationInSec),i=o("WATimeUtils").castToUnixTime(a+o("MAWEphemeralConsts").ephemeralReportingWindowInSeconds);return n.ebTimestampMs!=null&&(o("EBLogger").EBLogger().tags(["eb_restore"]).WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Delete DM backup - S472027 follow up"]))),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_RESTORE,key:"restore_dm_s472027"})),C(t,[{messageDeleteTs:i,messageExpirationTs:a,msgId:n.msgId,readTsForLogging:n.ts}]).then(function(e){var t=e[0],n=e[1],a=e[2];return a.length>0&&(f.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["markEphemeralMessageAsSent EphemeralCounter: Showing UI counter for ",""])),String(a.map(function(e){return e.msgId}))),r&&o("MAWIndexedDb").afterTransaction({tag:"MsgsStartCountdown",value:o("MAWBridgeMsgCountdown").createBridgeMsgsStartCountdown(a)})),t!=null&&n!=null&&o("MAWEphemeralCleaner").addNewEphemeralTimestamp(t,n),a[0]})}function C(e,t){var n=t.map(function(e){return e.msgId});return o("MAWDbXMATxns").getXMAMsgIdsFromAssociatedMsgIds(e,n).then(function(r){var o=new Map;t.forEach(function(e){o.set(e.msgId,{messageDeleteTs:e.messageDeleteTs,messageExpirationTs:e.messageExpirationTs,readTsForLogging:e.readTsForLogging});var t=r.get(e.msgId);t!=null&&o.set(t,{messageDeleteTs:e.messageDeleteTs,messageExpirationTs:e.messageExpirationTs,readTsForLogging:e.readTsForLogging})});var a=null,i=null,l=[],s=Array.from(new Set(n.concat(Array.from(r.values()))));return e.messages.where("msgId").anyOf(s).toArray().then(function(t){if(t.length!==0)return t.forEach(function(e){var t=e.messageExpirationTs,n=e.messageDeleteTs,r=o.get(e.msgId),s=r==null?void 0:r.messageExpirationTs,c=r==null?void 0:r.messageDeleteTs;if(f.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["updating ephemeral timestamp msg ",", existing expiration ",", existing deletion ",", updated expiration ",", updated deletion ",""])),e.msgId,t,n,s,c),!(s==null||c==null)&&e.ephemeralCounterStarted!==!0){(a==null||s<a)&&(a=s),(i==null||c<i)&&(i=c);var d=babelHelpers.extends({},e,{ephemeralCounterStarted:!0,messageDeleteTs:c,messageExpirationTs:s});l.push(d)}}),e.messages.bulkPut(l)}).then(function(){return[a,i,l]})})}function b(e,t){if(t.size===0)return o("MAWDexieTable").dexieResolve();var n=[];return t.forEach(function(t,r){n.push(h(e,r,t))}),o("MAWDexieTable").dexieAll(n).then(r("emptyFunction"))}function v(e,t,n,a,i){if(t==null)return o("MAWDexieTable").dexieResolve();_.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["maybeUpdateEphemeralSettingOrCheckOutOfSyncAfterWritingIncomingMsg: Message from ",", chat ",", type ",""])),n,a.jid,t.type);var l=o("MAWDexieTable").dexieResolve();if(t.ephemeralSetting==null)o("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(){return o("MAWEphemeralSettingsTxns").maybeResetEphemeralSyncResponseBackoffInfo(e,n).then(r("emptyFunction"))},user:function(){o("MAWDbMsg").isMsgEligibleForTriggeringEphemeralSyncResponse(t)&&(l=o("MAWEphemeralSettingsTxns").getOutOfSyncEphemeralSettingForIncomingNonEphemeralMsg(e,a.jid).then(function(e){var t;return e==null||(t=e.value)==null?void 0:t.outOfSyncEphemeralSetting}))}});else if(t.messageExpirationTs!=null&&t.messageDeleteTs!=null){var s=t.ephemeralSetting,u=t.messageDeleteTs,p=t.messageExpirationTs;_.DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["incoming msg is ephemeral: duration ",", timestamp ",""])),s.ephemeralExpirationInSec,s.ephemeralLastUpdatedOrSetTimestamp),o("MAWEphemeralCleaner").addNewEphemeralTimestamp(p,u),l=o("MAWEphemeralSettingsTxns").handleAndWriteIncomingEphemeralSetting(e,n,s.ephemeralExpirationInSec,s.ephemeralLastUpdatedOrSetTimestamp,!1,a,i,null,!0).then(function(e){return e==null?void 0:e.outOfSyncEphemeralSetting})}return l.then(function(t){if(t!=null)_.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["incoming msg is out of sync: correct duration ",", correct timestamp ",""])),t.correctEphemeralExpirationInSec,t.correctEphemeralLastUpdatedOrSetTimestamp);else return o("MAWEphemeralSettingsTxns").maybeResetEphemeralSyncResponseBackoffInfo(e,n).then(r("emptyFunction"))})}l.markEphemeralMessageAsSent=y,l.bulkUpdateEphemeralMessageTimestamps=C,l.updateThreadsOnMessagesExpiredFromUi=b,l.syncEphemeralSettingOnIncomingMsg=v}),98);
__d("MAWExpiredQuoteCleaner",["FBLogger","MAWMsgCleaner","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=null;function c(e){u==null&&(u=new(o("MAWMsgCleaner")).MsgCleaner(e,o("MAWMsgCleaner").CLEANER_TYPE.QUOTE))}function d(t){if(u==null){var n="Trying to add new addNewExpiredQuoteCleanerTimestamp before the cleaner is initialized!";throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),n),r("FBLogger")("messenger_web").mustfixThrow(n)}else o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["ExpiredQuoteCleaner: Adding timestamps backend(",")"])),t),u.update(t)}function m(){return u}function p(){u=null}l.startExpiredQuoteCleaner=c,l.addNewExpiredQuoteCleanerTimestamp=d,l.getExpiredQuoteCleaner_FOR_TESTING_ONLY=m,l.resetExpiredQuoteCleaner_FOR_TESTING_ONLY=p}),98);
__d("isE2EEConversationSearchEnabled",["gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("4741")}l.default=e}),98);
__d("isWAFTSContentSearchEnabled",["isE2EEConversationSearchEnabled","isMAWUniversalSearchEnabled"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("isE2EEConversationSearchEnabled")()||r("isMAWUniversalSearchEnabled")()}l.default=e}),98);
__d("MAWFTSTxns",["MAWDexieTable","isWAFTSContentSearchEnabled","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("1146");function s(e,t){return r("isWAFTSContentSearchEnabled")()?e.ftsPurgeBacklog.put({externalId:t}):o("MAWDexieTable").dexieResolve(null)}function u(t,n){return!r("isWAFTSContentSearchEnabled")()||!e?o("MAWDexieTable").dexieResolve(null):t.ftsBackloggedMessages.put({rowId:n})}function c(t,n){return!r("isWAFTSContentSearchEnabled")()||!e?o("MAWDexieTable").dexieResolve(null):t.ftsBackloggedMessages.bulkPut(n.map(function(e){return{rowId:e}}))}function d(e,t){return r("isWAFTSContentSearchEnabled")()?e.ftsPurgeThreadBacklog.put({chatJid:t}):o("MAWDexieTable").dexieResolve(null)}l.maybePutMessageToPurgeBacklog=s,l.maybePutMessageToBacklog=u,l.maybePutMessagesToBacklog=c,l.maybePutThreadToPurgeBacklog=d}),98);
__d("MAWMainTraceUtils",["LSRequestId"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("LSRequestId").generate()}l.createTraceId=e}),98);
__d("MAWBridgeUpload",["MAWMainTraceUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.actionType,n=e.attachmentContext,r=e.attachmentContextArray,o=e.authTs,a=e.echoDocument,i=e.echoEncodingLatencyNs,l=e.errorCode,s=e.errorMessage,u=e.messageId,d=e.messageType,m=e.productType,p=e.protoMsg,_=e.sortOrderMs,f=e.threadId,g=e.traceId,h=e.uploadTrackingInstanceKey,y=c(n,m!=null?m:"msgr",r);return{actionType:t,attachmentBackupContext:y,authTs:o,echoDocument:a,echoEncodingLatencyNs:i,errorCode:l,errorMessage:s,messageId:u,messageType:d,protoMsg:p,sortOrderMs:_,threadId:f,traceId:g,uploadTrackingInstanceKey:h}}function s(e,t,n,r,o,a){return{actionType:a,echoDocument:o,folderType:t,threadId:e,transportKey:n,ts:r}}function u(e,t,n,r,o,a,i,l){return{deliveryObjectId:e,mediaType:t,messageId:n,productType:r,threadId:o,threadJid:a,traceId:l,ts:i}}function c(e,t,n){if(n!=null){var r=n.map(function(e){return{attachmentTraceId:o("MAWMainTraceUtils").createTraceId(),mediaType:e.mediaType,zippyObjectId:e.mediaObjectId}}),a={attachmentInfos:r,productType:t};return a}}l.createBridgeUploadMessage=e,l.createBridgeDeleteMessagesOfThread=s,l.createBridgeUploadAttachment=u,l.createBridgeUploadAttachmentBackupContext=c}),98);
__d("MAWUploadThreadTxns",["$InternalEnum","MAWFolderTypes"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({INBOX:0,PENDING:1,OTHER:2,SPAM:3,ARCHIVED:4,HIDDEN:5});function s(t){switch(t){case o("MAWFolderTypes").FOLDER_ID.INBOX:return e.INBOX;case o("MAWFolderTypes").FOLDER_ID.PENDING:return e.PENDING;case o("MAWFolderTypes").FOLDER_ID.ARCHIVED:return e.ARCHIVED;default:return e.INBOX}}function u(e){return s(e).toString()}l.FolderType=e,l.getFolderTypeAsText=u}),98);
__d("MpsDeletedCleaner",["FBLogger","MAWMsgCleaner","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=null;function c(e){u==null&&(u=new(o("MAWMsgCleaner")).MsgCleaner(e,o("MAWMsgCleaner").CLEANER_TYPE.UNSEND))}function d(t){if(u==null){var n="Trying to add new MpsDeletedTimestamp before the cleaner is initialized!";throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),n),r("FBLogger")("messenger_web").mustfixThrow(n)}else o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["MpsDeletedCleaner: Adding timestamps (",")"])),t),u.update(t)}function m(){return u}function p(){u=null}l.startMpsDeletedCleaner=c,l.addNewMpsDeletedTimestamp=d,l.getMpsDeletedCleaner_FOR_TESTING_ONLY=m,l.resetMpsDeletedCleaner_FOR_TESTING_ONLY=p}),98);
__d("MpsEphemeralCleaner",["MAWLoggerUtils","MAWMsgCleaner","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=null,u=o("MWFBLogger").MWLogger().tags([o("MAWLoggerUtils").Tag.Ephemeral,o("MAWLoggerUtils").Tag.MsgCleaner,o("MAWLoggerUtils").Tag.CleanerTimestamp,"purgeDeletions"]);function c(e){s==null&&(s=new(o("MAWMsgCleaner")).MsgCleaner(e,o("MAWMsgCleaner").CLEANER_TYPE.EPHEMERAL))}function d(t){if(s==null)throw u.mustfixThrow("Trying to add new ephemeral timestamp before the cleaner is initialized!");u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["EphemeralCleaner: Adding timestamps for expiry(",")"])),t),s.update(t)}function m(){return s}function p(){s=null}l.startMpsEphemeralCleaner=c,l.addNewMpsEphemeralTimestamp=d,l.getEphemeralCleaner_FOR_TESTING_ONLY=m,l.resetEphemeralCleaner_FOR_TESTING_ONLY=p}),98);
__d("MpsReverbDbDump",["WebReverbDB","WormDump"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t=o("WebReverbDB").getWebReverbDB();return t.dump({dbMetadata:{customFields:{mawDBMigrationCurrentMessageId:(e=o("WormDump")).wormNonSensitiveField,mawDBMigrationCurrentThread:e.wormNonSensitiveField,mawDBMigrationStartMs:e.wormNonSensitiveField,mawDBMigrationState:e.wormNonSensitiveField,pk:e.wormNonSensitiveField}},deleted:{customFields:{deletedMessageId:e.wormNonSensitiveField,deletionMessageId:e.wormNonSensitiveField,deletionTimestampMs:e.wormNonSensitiveField,isLocalOnlyMessage:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,supplementalKey:e.wormNonSensitiveField,threadId:e.wormNonSensitiveField,timestampMs:e.wormNonSensitiveField,topLevelMessageId:e.wormNonSensitiveField},limit:1e3},message:{customFields:{debugFlags:e.wormNonSensitiveField,expiryTimestampMs:e.wormNonSensitiveField,isLocalOnlyMessage:e.wormNonSensitiveField,isTransportErrorPlaceholder:e.wormNonSensitiveField,messageId:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,senderId:e.wormNonSensitiveField,threadId:e.wormNonSensitiveField,timestampMs:e.wormNonSensitiveField},limit:2500},supplemental:{customFields:{messageId:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,supplementalKey:e.wormNonSensitiveField,threadId:e.wormNonSensitiveField,timestampMs:e.wormNonSensitiveField,topLevelMessageId:e.wormNonSensitiveField},limit:1e3},tags:{customFields:{messageId:e.wormNonSensitiveField,messagePk:e.wormNonSensitiveField,pk:e.wormNonSensitiveField,threadId:e.wormNonSensitiveField,timestampMs:e.wormNonSensitiveField},limit:1e3}})}l.debugGetReverbDbDump=e}),98);
__d("WAWaitForUserUnblocked",["WAResolvable","WorkerScheduler"],(function(t,n,r,o,a,i,l){"use strict";var e=12e4,s=new(o("WAResolvable")).Resolvable,u=o("WorkerScheduler").makeScheduler("offline-queue",{concurrency:1,maxTaskLimit:1,defaultSamplingRate:1e3,timeoutMs:e});function c(){s.resolveWasCalled()&&(s=new(o("WAResolvable")).Resolvable,d())}function d(){u.runTask({name:"offline-queue",fn:function(){return s.promise},priority:o("WorkerScheduler").BLOCKING_PRIORITY})}function m(){return s.promise}function p(){s.resolve()}function _(){return!s.resolveWasCalled()}l.maybeResetWaitForUserUnblocked=c,l.markOfflineQueueAsStarted=d,l.waitForUserUnblocked=m,l.unblockUser=p,l.isStillWaitingForUserUnblocked=_}),98);
__d("QPLMultiplexedFlow",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=Array.from(new Set(e));return{addAnnotations:function(n){t.forEach(function(e){return e.addAnnotations(n)})},addPoint:function(n,r){t.forEach(function(e){return e.addPoint(n,r)})},endCancel:function(n,r){t.forEach(function(e){return e.endCancel(n,r)})},endFail:function(n,r){t.forEach(function(e){return e.endFail(n,r)})},endSuccess:function(n){t.forEach(function(e){return e.endSuccess(n)})},getQPLAttrs:function(){return t.map(function(e){return e.getQPLAttrs()})[0]},isActive:function(){return t.some(function(e){return e.isActive()})},start:function(){}}}i.makeQplMultiplexedFlow=e}),66);
__d("WebMpsGetDistinctSupplementals",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=new Map(e),r=new Map;return t.forEach(function(e,t){var o=n.get(t);if(o==null)n.set(t,e),r.set(t,e);else{var a=o.timestampMs,i=e.timestampMs;i>a&&(n.set(t,e),r.set(t,e))}}),{supplementals:n,supplementalsToWriteToReverb:r}}i.getDistinctSupplementals=e}),66);
__d("WebMpsGetDistinctMessages",["WebMpsGetDistinctSupplementals"],(function(t,n,r,o,a,i,l){"use strict";var e=["debugFlags","expiryTimestampMs","isLocalOnlyMessage","isTransportErrorPlaceholder","pk"],s=["debugFlags","expiryTimestampMs","isLocalOnlyMessage","isTransportErrorPlaceholder","pk"];function u(t,n){var r=new Map,a=new Map;t.forEach(function(t){var n=t.reverbTopLevel,o=n.debugFlags,i=n.expiryTimestampMs,l=n.isLocalOnlyMessage,s=n.isTransportErrorPlaceholder,u=n.pk,c=babelHelpers.objectWithoutPropertiesLoose(n,e);a.set(t.reverbTopLevel.messageId,t),r.set(t.reverbTopLevel.messageId,{expiryTimestampMs:i,supplementalProtobufs:t.supplementalProtobufs,tags:t.tags,toplevelProtobuf:c})});var i=new Map,l=new Map,u=new Map;return n.forEach(function(e){var t=e.supplementalProtobufs,n=e.tags,c=e.toplevelProtobuf,d=c.messageId,m=a.get(d);if(m==null||m.reverbTopLevel.isTransportErrorPlaceholder===!0)r.set(d,e),i.set(d,c),l.set(d,new Map(t)),u.set(d,n);else{var p=m.supplementalProtobufs,_=o("WebMpsGetDistinctSupplementals").getDistinctSupplementals(p,t),f=_.supplementals,g=_.supplementalsToWriteToReverb,h=m.reverbTopLevel,y=h.debugFlags,C=h.expiryTimestampMs,b=h.isLocalOnlyMessage,v=h.isTransportErrorPlaceholder,S=h.pk,R=babelHelpers.objectWithoutPropertiesLoose(h,s);r.set(d,{expiryTimestampMs:C,supplementalProtobufs:f,tags:m.tags,toplevelProtobuf:R}),g.size>0&&l.set(d,new Map(g))}}),{messages:Array.from(r.values()),supplementalMessagesToWriteToReverb:l,tagsToWriteToReverb:u,topLevelMessagesToWriteToReverb:i}}l.getDistinctMessages=u}),98);
__d("WebMpsGetIsMessageExpired",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e!=null&&o("WATimeUtils").cappedMillisecondsUntil(o("WATimeUtils").castMilliSecondsToUnixTime(e))<=0}l.getIsMessageExpired=e}),98);
__d("WebMpsPersistMessagesFromEb",["FBLogger","MpsLogger","MpsTypes","WebMpsReverbWrites","WebReverbDB","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t){if(!(t.length===0||t.every(function(e){return e.topLevelProtobufs.size===0&&e.supplementalProtobufs.size===0&&e.tags.size===0})))try{await o("WebReverbDB").getWebReverbDB().runInTransaction(["message","supplemental","deleted","tags","dbMetadata"],"readwrite",function(n){var o=t.map(function(t){var o=t.supplementalProtobufs,a=t.tags,i=t.threadId,l=t.topLevelProtobufs;return r("FBLogger")("mps").INFO(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Persisting EB messages thread: "," topLevelProtobufs: "," supplementalProtobufs: ",""])),i,Array.from(l.keys()).join(","),Array.from(o.keys()).join(",")),u(l,o,a,i,function(e){return e(n)})}).flat();return Promise.all(o)},"mps-persist-messages-from-eb")}catch(e){var n=r("getErrorSafe")(e);throw o("MpsLogger").MpsLogger().catching(n).mustfix("Runtime error performing persistMessagesFromEB"),n}}function u(e,t,n,r,a){var i=[];return e.forEach(function(e,t){var r;i.push(o("WebMpsReverbWrites").upsertTopLevelToReverb(e,{actionType:o("MpsTypes").ActionType.UpsertTopLevel,debugFlags:["EB"],isLocalOnly:!1,isTransportErrorPlaceholder:!1,tags:(r=n.get(t))!=null?r:[],targetMessageId:t},a))}),t.forEach(function(e,t){e.forEach(function(e,n){i.push(o("WebMpsReverbWrites").upsertSupplementalToReverb(e.messageId,e.payload,n,t,r,e.timestampMs,a))})}),i}l.persistMessagesFromEB=s}),98);
__d("WebMpsBatchLoadMessage",["CoalescingLoader","MpsLogger","QPLMultiplexedFlow","WebMpsGetDistinctMessages","WebMpsGetIsMessageExpired","WebMpsPersistMessagesFromEb","WebReverbDB","getErrorSafe","getSafeQplErrorMessage","groupBy"],(function(t,n,r,o,a,i,l){"use strict";var e=["messageId"],s=["config","ctx","messageId","threadId"],u=["pk","supplementalKey","threadId","topLevelMessageId"],c=(function(){function t(t){var n=this;this.$3=async function(t){var a=r("groupBy")(t,function(e){return n.$4(e)}),i=new Map;return await Promise.all(Object.entries(a).map(async function(t){var r=t[0],a=t[1],l=a.map(function(e){return e.ctx.metric}),s=o("QPLMultiplexedFlow").makeQplMultiplexedFlow(l);s.addAnnotations({int:{coalesced_batch_size:a.length}});var u=a[0],c=u.messageId,d=babelHelpers.objectWithoutPropertiesLoose(u,e),m=babelHelpers.extends({},d,{ctx:{metric:s},messageIds:a.map(function(e){return e.messageId})}),p=await n.batchLoad(m);i.set(r,p)})),t.map(function(e){var t=i.get(n.$4(e));return t==null?void 0:t.find(function(t){return(t==null?void 0:t.toplevelProtobuf.messageId)===e.messageId})})},this.$1=t,this.$2=new(o("CoalescingLoader")).CoalescingLoader(this.$3)}var n=t.prototype;return n.$4=function(t){var e=t.config,n=t.ctx,r=t.messageId,o=t.threadId,a=babelHelpers.objectWithoutPropertiesLoose(t,s);return JSON.stringify({config:e,threadId:o})},n.$5=async function(t,n,a,i){try{i.metric.addPoint("load-message-from-reverb_start");var e=o("WebReverbDB").getWebReverbDB(),l=await e.runInTransaction(["message","supplemental","tags"],"readonly",function(e){return Promise.all(n.map(function(n){var r=e.stores.message.readIndex("[threadId+messageId]",[t,n],{limit:1}),o=a.shouldFetchTags?e.stores.tags.readIndexRange("[threadId+messageId+tag]",{only:[t,n]}):[],i=a.shouldFetchSupplementals?e.stores.supplemental.readIndexRange("[threadId+topLevelMessageId+supplementalKey]",{only:[t,n]}):[];return Promise.all([n,r,i,o])}))},"mps-load-message");i.metric.addPoint("load-message-from-reverb_end");var s=new Map;return l.forEach(function(e){var t=e[0],n=e[1],r=n[0],a=e[2],i=e[3];if(r==null||o("WebMpsGetIsMessageExpired").getIsMessageExpired(r.expiryTimestampMs))return null;var l=new Map;a.forEach(function(e){var t=e.pk,n=e.supplementalKey,r=e.threadId,o=e.topLevelMessageId,a=babelHelpers.objectWithoutPropertiesLoose(e,u);l.set(n,a)});var c=i.map(function(e){var t=e.tag;return t});s.set(t,{reverbTopLevel:r,supplementalProtobufs:l,tags:c})}),s}catch(e){return i.metric.addPoint("load-message-from-reverb_fail"),o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("Runtime error performing loadMessageFromReverb"),new Map}},n.$6=async function(t,n,a){try{var e=this.$1,i=e.decryptedProtobufToFullMessage,l=e.eb,s=l.isEbEnabled(),u=s===!0?"true":s===!1?"false":"unset";if(a.metric.addAnnotations({string:{ebEnabled:u}}),s!==!0)return new Map;a.metric.addPoint("load-message-from-eb_start");var c=l.messagePointQuery,d=await c({ctx:a,messageIds:n,threadId:t});if(d.success===!1)return new Map;var m=i(d.value,t);return a.metric.addPoint("load-message-from-eb_end"),new Map(m.map(function(e){return[e.toplevelProtobuf.messageId,e]}))}catch(e){a.metric.addPoint("load-message-from-eb_fail");var p=r("getErrorSafe")(e);return o("MpsLogger").MpsLogger().catching(p).mustfix("Runtime error performing loadFromEB"),new Map}},n.batchLoad=async function(t){var e=this,n=t.config,a=t.ctx,i=t.messageIds,l=t.threadId;try{a.metric.addPoint("load-message_start");var s=function(){return e.$5(l,i,n,a)},u=function(){return e.$6(l,i,a)},c=n.strategy==="local-first"?async function(){var e=await s(),t=e.size===i.length;return t?[e,new Map]:[e,await u()]}:n.strategy==="full-fetch"?function(){return Promise.all([s(),u()])}:n.strategy==="local-only"?async function(){return[await s(),new Map]}:n.strategy==="remote-only"?async function(){return[new Map,await u()]}:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+n.strategy)})(),d=await c(),m=d[0],p=d[1],_=i.map(function(e){var t=m.get(e),n=p.get(e);return o("WebMpsGetDistinctMessages").getDistinctMessages([t].filter(Boolean),[n].filter(Boolean))});return n.persistToReverb==="persist"&&o("WebMpsPersistMessagesFromEb").persistMessagesFromEB(_.map(function(e){var t=e.supplementalMessagesToWriteToReverb,n=e.tagsToWriteToReverb,r=e.topLevelMessagesToWriteToReverb;return{supplementalProtobufs:t,tags:n,threadId:l,topLevelProtobufs:r}})),a.metric.addPoint("load-message_end"),_.map(function(e){return e.messages[0]})}catch(e){var f=r("getErrorSafe")(e);throw a.metric.addPoint("load-message_fail",{string:{errorDescription:o("getSafeQplErrorMessage").getSafeQPLErrorMessage(f)}}),o("MpsLogger").MpsLogger().catching(f).mustfix("Runtime error performing loadMessage"),f}},n.load=function(t){return this.$2.gen(t)},t})();l.WebMpsPointQueryApi=c}),98);
__d("PackedMpsRange",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.packMpsRange=e}),66);
__d("WebMpsBatchLoadFromReverb",["MpsLogger","WebMpsGetIsMessageExpired","WebReverbDB","WormRangeIterator","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=["pk","supplementalKey","threadId","topLevelMessageId"];async function s(t,n,r,a,i,l,s,u,c){var d=r[0],m=r[1],p=u?function(e){return e.isLocalOnlyMessage===!1}:function(e){return!0},_=function(t){return!o("WebMpsGetIsMessageExpired").getIsMessageExpired(t.expiryTimestampMs)},f=function(t){return p(t)&&_(t)};function g(){var e=t.stores.message.getIndexRangeIterator("[threadId+timestampMs+messageId]",a,{greaterThanOrEqual:[n],lessThanOrEqual:[n]},f),r=m==null?[n,d]:[n,d,m];return e.read(r,i)}async function h(e){var r="[threadId+tag+timestampMs]",l=await Promise.all(Array.from(e).map(function(e){return t.stores.tags.getIndexRangeIterator(r,a,{greaterThanOrEqual:[n,e],lessThanOrEqual:[n,e]}).read([n,e,d],i)})),s=o("WormRangeIterator").mergeRanges(l,["timestampMs","messageId"],a,i),u=await Promise.all(s.data.map(function(e){return t.stores.message.getByIndex("[threadId+messageId]",[e.threadId,e.messageId],{filter:f})})).then(function(e){return e.filter(Boolean)}),c=o("WormRangeIterator").makeCursorInfoFromList(u,["threadId","timestampMs","messageId"],s.cursorInfo.hasNext,s.cursorInfo.hasPrevious);return{cursorInfo:c,data:u}}var y;c!=="all"?y=await h(c):y=await g();var C=y,b=C.cursorInfo,v=C.data,S=await Promise.all(v.map(async function(r){var o=l?await t.stores.supplemental.readIndexRange("[threadId+topLevelMessageId+supplementalKey]",{only:[n,r.messageId]}):[],a=new Map;o.forEach(function(t){var n=t.pk,r=t.supplementalKey,o=t.threadId,i=t.topLevelMessageId,l=babelHelpers.objectWithoutPropertiesLoose(t,e);a.set(r,l)});var i=s?await t.stores.tags.readIndexRange("[threadId+messageId+tag]",{only:[n,r.messageId]}):[],u=i.map(function(e){var t=e.tag;return t});return{reverbTopLevel:r,supplementalProtobufs:a,tags:u}}));return{cursorInfo:{endCursor:b.endCursor!=null?[b.endCursor[1],b.endCursor[2]]:null,hasNext:b.hasNext,hasPrevious:b.hasPrevious,startCursor:b.startCursor!=null?[b.startCursor[1],b.startCursor[2]]:null},messages:S,threadId:n}}async function u(e,t,n,a,i,l){try{i.metric.addPoint("reverb_fetch_start");var u=o("WebReverbDB").getWebReverbDB(),c=new Map(await u.runInTransaction(["message","supplemental","tags"],"readonly",function(r){return Promise.all(e.map(function(e){return s(r,e.threadId,e.from,e.direction,e.numMessages,t,n,a,l).then(function(t){return[e,t]})}))},"mps-load-messages"));return i.metric.addPoint("reverb_fetch_end"),c}catch(e){var d=r("getErrorSafe")(e);return o("MpsLogger").MpsLogger().catching(d).mustfix("Runtime error performing WebMpsBatchLoadFromReverb"),i.metric.addPoint("reverb_fetch_end",{bool:{reverbFail:!0}}),new Map}}l.batchLoadMessagesFromReverb=u}),98);
__d("WebMpsLoadMessagesFromEb",["MpsLogger","WAPromiseDelays","WAResultOrError","getErrorSafe","getSafeQplErrorMessage","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e={endCursor:null,hasNext:!1,hasPrevious:!1,startCursor:null};async function s(e,t,n,a,i){function l(){throw a.metric.addPoint("eb_fetch_timeout"),o("MpsLogger").MpsLogger().mustfixThrow("Timed out waiting for EB Fetch")}var s=e.reduce(function(e,t){return e+t.numMessages},0),u=Math.min(Math.max((s-20)/180,0),1),c=r("justknobx")._("3429")*(1+u*2),d=await o("WAPromiseDelays").withTimeout(t.messageRangeQuery({ctx:a,ranges:e,tagsFilter:i}),c,l),m=d.map(function(t,r){var a=e[r],i=a.threadId;if(t.success===!1)return t;var l=t.value,s=l.cursorInfo,u=l.messages,c=n(u,i);return o("WAResultOrError").makeResult({cursorInfo:s,messages:c,threadId:i})});return a.metric.addPoint("eb_fetch_end"),m}async function u(t,n,a,i){var l=n.decryptedProtobufToFullMessage,u=n.eb;try{var c=u.isEbEnabled(),d=c===!0?"true":c===!1?"false":"unset";if(a.metric.addAnnotations({string:{ebEnabled:d}}),c!==!0)return new Map(t.map(function(t){return[t,o("WAResultOrError").makeResult({cursorInfo:e,messages:[],threadId:t.threadId})]}));var m=!1;a.metric.addPoint("load-messages-from-eb_start");var p=await s(t,u,l,a,i),_=new Map(t.map(function(e,t){var n=p[t];return n.success===!1&&(m=!0),[e,n]}));return m&&a.metric.addAnnotations({bool:{ebFetchFailed:!0}}),a.metric.addPoint("load-messages-from-eb_end"),_}catch(e){var f=r("getErrorSafe")(e);return a.metric.addPoint("load-messages-from-eb_fail",{string:{ebFetchFailReason:o("getSafeQplErrorMessage").getSafeQPLErrorMessage(e)}}),o("MpsLogger").MpsLogger().catching(f).mustfix("Error fetching from EB"),new Map}}l.loadMessagesFromEb=u}),98);
__d("WebMpsMergeMessageRangesFromDifferentSources",["WebMpsGetDistinctMessages","err","first","last"],(function(t,n,r,o,a,i,l){"use strict";var e=["debugFlags","expiryTimestampMs","isLocalOnlyMessage","isTransportErrorPlaceholder","pk"];function s(t,n,a,i,l){var s,u,c=o("WebMpsGetDistinctMessages").getDistinctMessages((s=n==null?void 0:n.messages)!=null?s:[],(u=t==null?void 0:t.messages)!=null?u:[]),d=c.messages,m=c.supplementalMessagesToWriteToReverb,p=c.tagsToWriteToReverb,_=c.topLevelMessagesToWriteToReverb;if(n==null||t==null){var f=n!=null?babelHelpers.extends({},n,{messages:n.messages.map(function(t){var n=t.reverbTopLevel,r=t.supplementalProtobufs,o=n.debugFlags,a=n.expiryTimestampMs,i=n.isLocalOnlyMessage,l=n.isTransportErrorPlaceholder,s=n.pk,u=babelHelpers.objectWithoutPropertiesLoose(n,e);return{expiryTimestampMs:a,supplementalProtobufs:r,tags:[],toplevelProtobuf:u}})}):t;if(f==null)throw r("err")("data-fetching-error");return{range:f,supplementalMessagesToWriteToReverb:m,tagsToWriteToReverb:p,topLevelMessagesToWriteToReverb:_}}var g=t,h=[].concat(d).sort(function(e,t){return a==="asc"?e.toplevelProtobuf.timestampMs-t.toplevelProtobuf.timestampMs:t.toplevelProtobuf.timestampMs-e.toplevelProtobuf.timestampMs}),y=h.slice(0,i),C=r("first")(y),b=r("last")(y),v=C!=null?[C.toplevelProtobuf.timestampMs,C.toplevelProtobuf.messageId]:void 0,S=b!=null?[b.toplevelProtobuf.timestampMs,b.toplevelProtobuf.messageId]:void 0,R=S!=null?g.cursorInfo.hasNext||n.cursorInfo.hasNext:!1,L=v!=null?g.cursorInfo.hasPrevious||n.cursorInfo.hasPrevious:!1;return{range:{cursorInfo:{endCursor:S,hasNext:R,hasPrevious:L,startCursor:v},messages:y,threadId:l},supplementalMessagesToWriteToReverb:m,tagsToWriteToReverb:p,topLevelMessagesToWriteToReverb:_}}l.mergeMessageRangesFromDifferentSources=s}),98);
__d("WebMpsEbCache",["MpsTypes","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,r,a,i){var l=o("WAJids").validateChatJid(t);if(l==null)return[];var s=e.getMetadataFromCache({chatJid:l,direction:n,numberOfMessages:r,referenceMessage:i,referenceTimestamp:a==null?null:o("WATimeUtils").castToMillisTime(a)});return s.success===!1?[]:s.value.map(function(e){var t=e.offlineThreadingId,n=e.sortOrderMs;return{offlineThreadingId:t,sortOrderMs:o("MpsTypes").toTimestamp(n)}})}function s(e,t){if(e==null||t.length===0)return"no-match";if(e.cursorInfo.hasNext!==!0)return"reverb-cursor-ended";var n=new Set(e.messages.map(function(e){return e.reverbTopLevel.messageId})),r=new Set(t.map(function(e){return e.offlineThreadingId}));if(n.size!==r.size)return"no-match";if(Array.from(n).every(function(e){return r.has(e)}))return"match";for(var o=e.messages.map(function(e){return e.reverbTopLevel.timestampMs}).sort(function(e,t){return t-e}),a=t.map(function(e){return e.sortOrderMs}).sort(function(e,t){return t-e}),i=0,l=0;l<o.length;l++){var s=o[l],u=a[i];if(s<u)return"no-match";s>u||i++}return"reverb-newer"}l.loadEBMetadataCache=e,l.compareReverbVsMetadataCache=s}),98);
__d("WebMpsValidateReverbViaCacheAndFetchFromEb",["MpsLogger","WebMpsEbCache","WebMpsLoadMessagesFromEb"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r,a){var i=await t;if(a!=="all")return r.metric.addAnnotations({string:{ebMetadataCache:"skip"}}),{eb:await o("WebMpsLoadMessagesFromEb").loadMessagesFromEb(e,n,r,a),reverb:i};var l=e.filter(function(e){var t=e.direction,a=e.from,l=e.numMessages,s=e.threadId,u=o("WebMpsEbCache").loadEBMetadataCache(n.eb,s,t,l,a[0],a[1]),c=o("WebMpsEbCache").compareReverbVsMetadataCache(i.get(e),u);return r.metric.addAnnotations({string:{ebMetadataCache:c}}),o("MpsLogger").MpsLogger().debug("MPS Range query metadata comparison: ",c),!(c==="match"||t==="desc"&&c==="reverb-newer")});return l.length===0?{eb:new Map,reverb:i}:{eb:await o("WebMpsLoadMessagesFromEb").loadMessagesFromEb(l,n,r,a),reverb:i}}l.validateReverbViaCacheAndFetchFromEb=e}),98);
__d("WebMpsBatchLoadMessages",["MpsLogger","PackedMpsRange","WebMpsBatchLoadFromReverb","WebMpsLoadMessagesFromEb","WebMpsMergeMessageRangesFromDifferentSources","WebMpsPersistMessagesFromEb","WebMpsValidateReverbViaCacheAndFetchFromEb","err","getErrorSafe","getSafeQplErrorMessage"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,a){var i=n.persistToReverb,l=n.shouldFetchSupplementals,s=n.shouldFetchTags,u=n.shouldIgnoreLocalOnly,c=n.strategy,d=n.tagsFilter,m=e.map(function(e){return o("PackedMpsRange").packMpsRange(e)});try{a.metric.addPoint("mps_fetch_start");var p=function(){return o("WebMpsBatchLoadFromReverb").batchLoadMessagesFromReverb(m,l,s,u,a,d)},_,f;switch(c){case"full-fetch":{var g=await o("WebMpsValidateReverbViaCacheAndFetchFromEb").validateReverbViaCacheAndFetchFromEb(m,p(),t,a,d);_=g.reverb,f=g.eb;break}case"local-only":_=await p(),f=new Map;break;case"remote-only":f=await o("WebMpsLoadMessagesFromEb").loadMessagesFromEb(m,t,a,d),_=new Map;break;default:throw r("err")("empty strategy")}var h=m.map(function(e){var t,n=e.direction,r=e.numMessages,a=e.threadId,i=_.get(e),l=(t=f.get(e))==null?void 0:t.value;if(!(i==null&&l==null)){var s=o("WebMpsMergeMessageRangesFromDifferentSources").mergeMessageRangesFromDifferentSources(l,i,n,r,a),u=s.range,c=s.supplementalMessagesToWriteToReverb,d=s.tagsToWriteToReverb,m=s.topLevelMessagesToWriteToReverb;return{range:u,supplementalMessagesToWriteToReverb:c,tagsToWriteToReverb:d,threadId:a,topLevelMessagesToWriteToReverb:m}}}).filter(Boolean);return i==="persist"&&o("WebMpsPersistMessagesFromEb").persistMessagesFromEB(h.map(function(e){var t=e.supplementalMessagesToWriteToReverb,n=e.tagsToWriteToReverb,r=e.threadId,o=e.topLevelMessagesToWriteToReverb;return{supplementalProtobufs:t,tags:n,threadId:r,topLevelProtobufs:o}})),h.map(function(e){var t=e.range;return t})}catch(e){var y=r("getErrorSafe")(e);throw o("MpsLogger").MpsLogger().catching(y).mustfix("Runtime error performing loadMessages"),a.metric.addAnnotations({string:{errorDescription:o("getSafeQplErrorMessage").getSafeQPLErrorMessage(y)}}),y}}l.batchLoadMessages=e}),98);
__d("MAWMpsCleanersContants",["DateConsts"],(function(t,n,r,o,a,i,l){"use strict";var e=30*o("DateConsts").MS_PER_DAY,s=6*o("DateConsts").MS_PER_HOUR;l.PURGE_DELETED_MESSAGES_WINDOW_IN_MS=e,l.REPORTING_WINDOW_IN_MS=s}),98);
__d("WebMpsInsertionCleaners",["MAWMpsCleanersContants","MpsDeletedCleaner","MpsEphemeralCleaner","MpsLogger","MpsTypes","WATimeUtils","err","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){try{await Promise.all(e.map(s)),await Promise.all(e.map(c))}catch(e){var t=r("getErrorSafe")(e);o("MpsLogger").MpsLogger().catching(t).mustfix("Failed to run side effects")}}function s(e){return e.directive.actionType===o("MpsTypes").ActionType.DeleteTopLevel||e.directive.actionType===o("MpsTypes").ActionType.DeleteSupplemental||e.directive.actionType===o("MpsTypes").ActionType.DeleteThread?u(e.message.timestampMs):e.directive.actionType===o("MpsTypes").ActionType.UpsertTopLevel||e.directive.actionType===o("MpsTypes").ActionType.UpsertSupplemental||e.directive.actionType===o("MpsTypes").ActionType.DeleteTopLevelWithPlaceholder||e.directive.actionType===o("MpsTypes").ActionType.Noop?Promise.resolve():e.directive.actionType===o("MpsTypes").ActionType.Unknown||e.directive.actionType===o("MpsTypes").ActionType.Preprocess?Promise.reject(r("err")("this should not happen")):(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e.directive.actionType)})()}function u(e){var t=o("WATimeUtils").castToUnixTime(Math.ceil((e+o("MAWMpsCleanersContants").REPORTING_WINDOW_IN_MS)/1e3));return o("MpsDeletedCleaner").addNewMpsDeletedTimestamp(t),Promise.resolve()}function c(e){var t,n=(t=e.directive)==null?void 0:t.expiryTimestampMs;if(n==null)return Promise.resolve();var r=o("WATimeUtils").castToUnixTime(Math.ceil(n/1e3));return o("MpsEphemeralCleaner").addNewMpsEphemeralTimestamp(r),Promise.resolve()}l.scheduleCleaners=e}),98);
__d("WebMpsInsertionFlow",["MpsLogger","MpsTypes","WebMpsReverbWrites","WebReverbDB","err","getErrorSafe","justknobx","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){if(r("justknobx")._("4336"))try{return await o("WebReverbDB").getWebReverbDB().runInTransaction(["message","supplemental","deleted","tags","dbMetadata"],"readwrite",async function(t){for(var n of e)await u(n,function(e){return e(t)})},"mps-insertion-flow-shared"),new Map}catch(e){o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("Failed to persist messages")}return s(e)}async function s(e){var t=new Map,n=async function(n){await u(n,function(e){return o("WebReverbDB").getWebReverbDB().runInTransaction(["message","supplemental","deleted","tags","dbMetadata"],"readwrite",function(t){return e(t)},"mps-insertion-flow-separate")}).catch(function(e){t.set(n.message.messageId,e)})};for(var r of e)await n(r);return t}function u(e,t){switch(e.directive.actionType){case o("MpsTypes").ActionType.UpsertTopLevel:return c(e,t);case o("MpsTypes").ActionType.UpsertSupplemental:return d(e,t);case o("MpsTypes").ActionType.DeleteTopLevel:return m(e,t);case o("MpsTypes").ActionType.DeleteTopLevelWithPlaceholder:return p(e,t);case o("MpsTypes").ActionType.DeleteSupplemental:return _(e,t);case o("MpsTypes").ActionType.DeleteThread:return f(e,t);case o("MpsTypes").ActionType.Noop:return Promise.resolve();case o("MpsTypes").ActionType.Unknown:case o("MpsTypes").ActionType.Preprocess:return Promise.reject(r("err")("this should not happen"))}}async function c(e,t){var n=e.directive,r=e.message;await o("WebMpsReverbWrites").upsertTopLevelToReverb(r,n,t)}async function d(e,t){var n=e.directive,a=e.message,i=r("nullthrows")(n.supplementalKey);await o("WebMpsReverbWrites").upsertSupplementalToReverb(a.messageId,a.payload,i,n.targetMessageId,a.threadId,a.timestampMs,t)}function m(e,t){var n=e.message,r=e.directive.targetMessageId,o=[n.threadId,r];return t(async function(e){var t,a=await e.stores.message.getByIndex("[threadId+messageId]",o),i=await e.stores.deleted.getByIndex("[threadId+deletedMessageId]",o);if(!(((t=i==null?void 0:i.deletionTimestampMs)!=null?t:0)>=n.timestampMs)){var l={deletedMessageId:r,deletionMessageId:n.messageId,deletionMessagePayload:n.payload,deletionTimestampMs:n.timestampMs,isLocalOnlyMessage:!1,payload:a==null?void 0:a.payload,threadId:n.threadId,timestampMs:a==null?void 0:a.timestampMs};await e.stores.deleted.bulkUpsert("[threadId+deletedMessageId]",[{item:l,selector:o}]),a&&await e.stores.message.bulkDelete([a.pk])}})}function p(e,t){var n=e.directive,r=e.message;return o("WebMpsReverbWrites").upsertTopLevelToReverb(r,n,t)}function _(e,t){var n=e.message,o=r("nullthrows")(e.directive.supplementalKey),a=e.directive.targetMessageId,i=[n.threadId,a,o];return t(async function(t){var r=await t.stores.supplemental.getByIndex("[threadId+topLevelMessageId+supplementalKey]",i);if(r!=null){var l=await t.stores.deleted.getByIndex("[threadId+topLevelMessageId+supplementalKey]",i,{filter:function(t){return t.deletionTimestampMs>=n.timestampMs}});if(!l){var s={deletedMessageId:r.messageId,deletionMessageId:n.messageId,deletionMessagePayload:n.payload,deletionTimestampMs:n.timestampMs,isLocalOnlyMessage:e.directive.isLocalOnly,payload:r.payload,supplementalKey:o,threadId:n.threadId,timestampMs:r.timestampMs,topLevelMessageId:a};await t.stores.deleted.bulkUpsert("[threadId+topLevelMessageId+supplementalKey]",[{item:s,selector:i}]),await t.stores.supplemental.bulkDelete([r.pk])}}})}function f(e,t){var n=e.message;return t(async function(e){var t=await e.stores.supplemental.readKeysByIndexRange("[threadId+topLevelMessageId+supplementalKey]",{only:[n.threadId]});await e.stores.supplemental.bulkDelete(t);var r=await e.stores.message.readIndexRange("[threadId+messageId]",{only:[n.threadId]});await e.stores.message.bulkDelete(r.map(function(e){return e.pk}));var o=await e.stores.tags.readKeysByIndexRange("[threadId+messageId+tag]",{only:[n.threadId]});await e.stores.tags.bulkDelete(o);var a=await e.stores.deleted.readKeysByIndexRange("[threadId+deletedMessageId]",{only:[n.threadId]});await e.stores.deleted.bulkDelete(a),await e.stores.deleted.bulkAdd(r.map(function(e){return{deletedMessageId:e.messageId,deletionMessageId:n.messageId,deletionMessagePayload:n.payload,deletionTimestampMs:n.timestampMs,isLocalOnlyMessage:e.isLocalOnlyMessage,payload:e.payload,threadId:e.threadId,timestampMs:e.timestampMs}}))})}l.persistNewMessages=e}),98);
__d("WebMpsLoadDeletedMessages",["MpsTypes","WebReverbDB"],(function(t,n,r,o,a,i,l){"use strict";var e=["pk","supplementalKey","threadId","topLevelMessageId"];async function s(t,n){var r=o("WebReverbDB").getWebReverbDB(),a=await r.runInTransaction(["deleted","supplemental"],"readonly",async function(n){var r=await n.stores.deleted.readIndexRange("[threadId+timestampMs+deletedMessageId]",{lessThanOrEqual:[t.threadId,o("MpsTypes").toTimestamp(Number.MAX_SAFE_INTEGER)]},{limit:t.numMessages});return Promise.all(r.map(async function(r){var o=await n.stores.supplemental.readIndexRange("[threadId+topLevelMessageId+supplementalKey]",{only:[t.threadId,r.deletedMessageId]}),a=new Map;return o.forEach(function(t){var n=t.pk,r=t.supplementalKey,o=t.threadId,i=t.topLevelMessageId,l=babelHelpers.objectWithoutPropertiesLoose(t,e);a.set(r,l)}),{deletedEntity:r,supplementalProtobufs:a}}))},"get-deleted-messages-for-spam-report"),i=a.map(function(e){if(e.deletedEntity.payload!=null){var r=e.deletedEntity.payload;if(e.deletedEntity.timestampMs!=null){var o=e.deletedEntity.timestampMs;return n([{otid:e.deletedEntity.deletedMessageId,supplementalProtobufs:new Map(e.supplementalProtobufs.entries().map(function(e){var t=e[0],n=e[1];return[t,{decryptedProtobuf:n.payload,protobufTimestampMS:n.timestampMs}]})),tags:[],toplevelProtobuf:{decryptedProtobuf:r,protobufTimestampMS:o}}],t.threadId)[0]}}}).filter(Boolean);return{messages:i,tombstones:new Set(a.map(function(e){return e.deletedEntity.deletionMessageId}))}}l.loadDeletedMessages=s}),98);
__d("WebMpsPostprocess",["MpsLogger","getSafeQplErrorMessage"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){await Promise.all(t.map(async function(t){var r=t.process(e,n),a=r instanceof Promise?await r.catch(function(e){o("MpsLogger").MpsLogger().catching(e).mustfix("PostProcessor Runtime failure")}):r;a!=null&&a.size>0&&a.forEach(function(e,t){o("MpsLogger").MpsLogger().catching(e).mustfix("Non-critical postprocessor fails %s",t)})})).catch(function(e){o("MpsLogger").MpsLogger().catching(e).mustfix("Non-critical postprocessors runtime failure")})}async function s(e,t,n){var r=new Map,a=async function(a){n.messageToQpl.all(e.map(function(e){return e.message.messageId})).addPoint(a.name+"_start");var t=a.process(e,n),i=t instanceof Promise?await t.catch(function(e){o("MpsLogger").MpsLogger().catching(e).mustfix("PostProcessor Runtime failure")}):t;i!=null&&i.size>0&&i.forEach(function(e,t){r.set(t,e),o("MpsLogger").MpsLogger().catching(e).mustfix("Critical postprocessor fails %s",t),n.messageToQpl.endFail(t,a.name.toLowerCase()+"-error",o("getSafeQplErrorMessage").getSafeQPLErrorMessage(e))}),n.messageToQpl.all(e.map(function(e){return e.message.messageId})).addPoint(a.name+"_end")};for(var i of t)await a(i);return r}l.runNonCriticalPostprocessor=e,l.runCriticalPostprocessor=s}),98);
__d("WebMpsPurgeDeletedPayload",["MAWMpsCleanersContants","MpsTypes","WATimeUtils","WebReverbDB"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WebReverbDB").getWebReverbDB().runInTransaction(["deleted","supplemental","tags","message"],"readwrite",async function(t){var n=o("MpsTypes").toTimestamp(o("WATimeUtils").unixTimeMs()-o("MAWMpsCleanersContants").REPORTING_WINDOW_IN_MS),r=await t.stores.deleted.readIndexRange("deletionTimestampMs",{lessThanOrEqual:[n]}),a=r.filter(function(e){return e.payload!=null});return e.metric.addAnnotations({int:{num_deletions:a.length}}),await t.stores.deleted.bulkPut(a.map(function(e){return babelHelpers.extends({},e,{payload:null,timestampMs:null})})),a.length},"web-mps-purge-deletions")}function s(){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["deleted"],"readonly",async function(e){var t=o("MpsTypes").toTimestamp(o("WATimeUtils").unixTimeMs()-o("MAWMpsCleanersContants").REPORTING_WINDOW_IN_MS),n=await e.stores.deleted.readIndexRange("deletionTimestampMs",{greaterThan:[t]},{order:"asc"}),r=n.filter(function(e){return e.payload!=null});if(!(r.length===0||r[0].deletionTimestampMs==null))return o("WATimeUtils").castMilliSecondsToUnixTime(r[0].deletionTimestampMs+o("MAWMpsCleanersContants").REPORTING_WINDOW_IN_MS)},"web-mps-next-deletion-timestamp-ms")}catch(e){throw e}}l.purgeDeletedPayload=e,l.getNextDeletionTimestampMs=s}),98);
__d("WebMpsPurgeDeletions",["MAWMpsCleanersContants","MpsTypes","WATimeUtils","WebReverbDB"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return o("WebReverbDB").getWebReverbDB().runInTransaction(["deleted","supplemental","tags","message"],"readwrite",async function(t){var n=o("MpsTypes").toTimestamp(o("WATimeUtils").unixTimeMs()-o("MAWMpsCleanersContants").PURGE_DELETED_MESSAGES_WINDOW_IN_MS),r=await t.stores.deleted.readIndexRange("deletionTimestampMs",{lessThanOrEqual:[n]}),a=r.map(function(e){return[e.threadId,e.deletedMessageId]});e.metric.addAnnotations({int:{num_deletions:r.length}});var i=Promise.all(a.map(function(e){return t.stores.supplemental.readKeysByIndexRange("[threadId+topLevelMessageId+supplementalKey]",{only:e})})).then(function(e){return e.flat()}).then(function(e){return t.stores.supplemental.bulkDelete(e)}),l=Promise.all(a.map(function(e){return t.stores.tags.readKeysByIndexRange("[threadId+messageId+tag]",{only:e})})).then(function(e){return e.flat()}).then(function(e){return t.stores.tags.bulkDelete(e)}),s=t.stores.deleted.bulkDelete(r.map(function(e){return e.pk}));return await Promise.all([i,l,s]),r.length},"web-mps-purge-deletions")}l.purgeDeletions=e}),98);
__d("WebMpsScheduler",["WorkerScheduler","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){if(e==null){var t;e=o("WorkerScheduler").makeScheduler("MPS",{concurrency:(t=r("justknobx"))._("4338"),defaultSamplingRate:t._("4540"),maxTaskLimit:t._("4338"),maxThrottleMs:t._("4339"),timeoutMs:t._("4337")})}return e}l.mpsScheduler=s}),98);
__d("WmiMultiQplTracker",["QPLMultiplexedFlow"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map,s=(function(){function e(e){var t=this;this.$1=new Map,e.forEach(function(e){t.$1.set(e[0],e[1])})}e.from=function(n){return new e(n)};var t=e.prototype;return t.addAnnotations=function(t,n){var e;(e=this.$1.get(t))==null||e.addAnnotations(n)},t.addPoint=function(t,n,r){var e;(e=this.$1.get(t))==null||e.addPoint(n,r)},t.endSuccess=function(t){var e=this.$1.get(t);e!=null&&(e.endSuccess(),this.$1.delete(t),this.$2=null)},t.endFail=function(t,n,r){var e=this.$1.get(t);e!=null&&(e.endFail(n,{string:{errorDescription:r}}),this.$1.delete(t),this.$2=null)},t.size=function(){return this.$1.size},t.all=function(t){var e=this;if(t!=null){var n=new Set(this.$1.keys());t.forEach(function(e){return n.delete(e)});var r=Array.from(n).map(function(t){return e.$1.get(t)}).filter(Boolean);return o("QPLMultiplexedFlow").makeQplMultiplexedFlow(r)}if(!this.$2){var a=o("QPLMultiplexedFlow").makeQplMultiplexedFlow(Array.from(this.$1.values()));return this.$2=a,a}return this.$2},t.failAllPending=function(t){this.$1.forEach(function(e){return e.endFail(t)}),this.$1.clear(),this.$2=null},e.empty_TEST_ONLY=function(){return new e([])},e})();function u(t,n){e.set(t,n)}function c(t){return e.get(t)}l.WmiMultiQplTracker=s,l.trackQplForSeqId=u,l.getQplForSeqId=c}),98);
__d("memoizeWithArgsLFUCache",["LFUCache"],(function(t,n,r,o,a,i,l){function e(e,t,n,o){var a;function i(){return a||(a=new(r("LFUCache"))(n)),a}function l(e){if(e===void 0)a=null;else{var t;(t=a)==null||t.delete(e)}}o&&o(l);var s=function(){var n=i(),r=t.apply(void 0,arguments);n.has(r)||n.set(r,e.apply(void 0,arguments));var o=n.get(r);return o};return s}l.default=e}),98);
__d("schedulePeriodicTask",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=async function(){try{await e()}finally{globalThis.setTimeout(n,t)}};globalThis.setTimeout(n,0)}i.schedulePeriodicTask=e}),66);
__d("WebMps",["DateConsts","MpsDeletedCleaner","MpsEphemeralCleaner","MpsLogger","MpsReverbDbDump","MpsReverbInit","MpsTypes","QPLFlow","WAPromiseQueue","WAResultOrError","WATimeUtils","WAWaitForUserUnblocked","WebMpsBatchLoadMessage","WebMpsBatchLoadMessages","WebMpsInsertionCleaners","WebMpsInsertionFlow","WebMpsLoadDeletedMessages","WebMpsPostprocess","WebMpsPurgeDeletedPayload","WebMpsPurgeDeletions","WebMpsPurgeExpiredMessages","WebMpsScheduler","WmiMultiQplTracker","WorkerScheduler","err","getErrorSafe","getSafeQplErrorMessage","justknobx","memoizeWithArgsLFUCache","mergeMaps","qpl","schedulePeriodicTask"],(function(t,n,r,o,a,i,l){"use strict";var e=["debug"],s=["config"],u=["debug"],c;function d(e){return JSON.stringify(e)}async function m(e){var t=e.db,n=e.dependencies,a=e.getMpsExtensionConfiguration;if(c!=null)throw r("err")("MPS already initialised");await o("MpsReverbInit").initReverb(t);var i=new p(a(),n);return c=i,i}var p=(function(){function t(t,n){var a=this;this.$3=[],this.$6=new(o("WAPromiseQueue")).PromiseQueue,this.batchLoadMessage=function(e){var t,n,i,l,s=e.config,u=e.debug,c=e.messageIds,d=e.threadId,m={persistToReverb:(t=s==null?void 0:s.persistToReverb)!=null?t:"persist",shouldFetchSupplementals:(n=s==null?void 0:s.shouldFetchSupplementals)!=null?n:!0,shouldFetchTags:(i=s==null?void 0:s.shouldFetchTags)!=null?i:!0,strategy:(l=s==null?void 0:s.strategy)!=null?l:"full-fetch"};return o("WebMpsScheduler").mpsScheduler().runTask({annotations:{string:{purpose:u.purpose,strategy:m.strategy}},customFlags:{runtimeReliability:!0},eventSamplingRate:r("justknobx")._("4538"),fn:function(t){return a.$2.batchLoad({config:m,ctx:t,messageIds:c,threadId:d})},name:"batch-load-message",priority:o("WorkerScheduler").BLOCKING_PRIORITY}).then(function(e){return a.$10(e.filter(Boolean),m),o("WAResultOrError").makeResult(e)}).catch(function(e){var t=r("getErrorSafe")(e);return o("WAResultOrError").DEPRECATED_makeError("runtime-error",t)})},this.$11=r("memoizeWithArgsLFUCache")(function(e){var t,n,i,l,s=e.config,u=e.debug,c=e.messageId,d=e.threadId,m={persistToReverb:(t=s==null?void 0:s.persistToReverb)!=null?t:"persist",shouldFetchSupplementals:(n=s==null?void 0:s.shouldFetchSupplementals)!=null?n:!0,shouldFetchTags:(i=s==null?void 0:s.shouldFetchTags)!=null?i:!0,strategy:(l=s==null?void 0:s.strategy)!=null?l:"full-fetch"};return o("WebMpsScheduler").mpsScheduler().runTask({annotations:{string:{purpose:u.purpose,strategy:m.strategy}},customFlags:{runtimeReliability:!0},eventSamplingRate:r("justknobx")._("4536"),fn:async function(t){var e=await a.$2.load({config:m,ctx:t,messageId:c,threadId:d});return e!=null&&a.$10([e],m),e},name:"load-message",priority:o("WorkerScheduler").BLOCKING_PRIORITY})},function(t){var n=t.debug,r=babelHelpers.objectWithoutPropertiesLoose(t,e);return d(babelHelpers.extends({},r,{ebEnabled:a.$1.eb.isEbEnabled()}))},1,function(e){a.$3.push(e)}),this.loadMessage=function(e){return a.$11(e).then(function(e){return o("WAResultOrError").makeResult(e)}).catch(function(e){a.$7();var t=r("getErrorSafe")(e);return o("WAResultOrError").DEPRECATED_makeError("runtime-error",t)})},this.$12=function(e){var t,n=e.config,i=e.debug,l=e.ranges;return o("WebMpsScheduler").mpsScheduler().runTask({annotations:{string:{purpose:i.purpose,strategy:(t=n==null?void 0:n.strategy)!=null?t:"full-fetch"}},customFlags:{runtimeReliability:!0},eventSamplingRate:r("justknobx")._("4538"),fn:function(t){return o("WebMpsBatchLoadMessages").batchLoadMessages(l.map(function(e){var t=e.direction,n=e.from,r=e.numMessages,a=e.threadId;return{direction:t,from:[o("MpsTypes").toTimestamp(o("WATimeUtils").miAdjustTimestamp(n[0])),n[1]],numMessages:r,threadId:a}}),a.$1,n,t)},name:"batch-load-messages",priority:o("WorkerScheduler").BLOCKING_PRIORITY})},this.batchLoadMessages=function(e){var t,n,i,l,u,c,d=e.config,m=babelHelpers.objectWithoutPropertiesLoose(e,s),p={persistToReverb:(t=d==null?void 0:d.persistToReverb)!=null?t:"persist",shouldFetchSupplementals:(n=d==null?void 0:d.shouldFetchSupplementals)!=null?n:!0,shouldFetchTags:(i=d==null?void 0:d.shouldFetchTags)!=null?i:!0,shouldIgnoreLocalOnly:(l=d==null?void 0:d.shouldIgnoreLocalOnly)!=null?l:!1,strategy:(u=d==null?void 0:d.strategy)!=null?u:"full-fetch",tagsFilter:(c=d==null?void 0:d.tagsFilter)!=null?c:"all"};return a.$12(babelHelpers.extends({},m,{config:p})).then(function(e){var t=e.flatMap(function(e){return e.messages});return a.$10(t,p),o("WAResultOrError").makeResult(e)}).catch(function(e){var t=r("getErrorSafe")(e);return o("WAResultOrError").DEPRECATED_makeError("runtime-error",t)})},this.$13=r("memoizeWithArgsLFUCache")(function(e){var t,n,i,l,s,u,c=e.config,d=e.debug,m=e.direction,p=e.from,_=e.numMessages,f=e.threadId,g={persistToReverb:(t=c==null?void 0:c.persistToReverb)!=null?t:"persist",shouldFetchSupplementals:(n=c==null?void 0:c.shouldFetchSupplementals)!=null?n:!0,shouldFetchTags:(i=c==null?void 0:c.shouldFetchTags)!=null?i:!0,shouldIgnoreLocalOnly:(l=c==null?void 0:c.shouldIgnoreLocalOnly)!=null?l:!1,strategy:(s=c==null?void 0:c.strategy)!=null?s:"full-fetch",tagsFilter:(u=c==null?void 0:c.tagsFilter)!=null?u:"all"};return o("WebMpsScheduler").mpsScheduler().runTask({annotations:{string:{purpose:d.purpose,strategy:g.strategy}},customFlags:{runtimeReliability:!0},eventSamplingRate:r("justknobx")._("4538"),fn:function(t){return o("WebMpsBatchLoadMessages").batchLoadMessages([{direction:m,from:[o("MpsTypes").toTimestamp(o("WATimeUtils").miAdjustTimestamp(p[0])),p[1]],numMessages:_,threadId:f}],a.$1,g,t).then(function(e){e.length>1&&o("MpsLogger").MpsLogger().mustfix("loadMessages returned more than one range");var t=e.at(0);if(t==null)throw r("err")("loadMessages returned no result. Likely this is the result of both reverb and EB queries failing");return a.$10(t.messages,g),t})},name:"load-messages",priority:o("WorkerScheduler").BLOCKING_PRIORITY})},function(e){var t,n=e.debug,r=babelHelpers.objectWithoutPropertiesLoose(e,u);return d(babelHelpers.extends({},r,{config:babelHelpers.extends({},r.config,{tagsFilter:(function(e){if(e==="all"||e===void 0)return"all";{var t=e;return Array.from(t.values())}})((t=r.config)==null?void 0:t.tagsFilter)}),ebEnabled:a.$1.eb.isEbEnabled()}))},10/60,function(e){a.$3.push(e)}),this.loadMessages=function(e){return a.$13(e).then(function(e){return o("WAResultOrError").makeResult(e)}).catch(function(e){a.$7();var t=r("getErrorSafe")(e);return o("WAResultOrError").DEPRECATED_makeError("runtime-error",t)})},this.extensionConfiguration=t,this.$1=n,this.$2=new(o("WebMpsBatchLoadMessage")).WebMpsPointQueryApi(n),this.$4(function(e){return n.generateDeletionMessage(e)}),this.$5(function(e){return n.generateDeletionMessage(e)})}var n=t.prototype;return n.saveNewMessages=function(t,n){var e=this,a=o("WebMpsScheduler").mpsScheduler().task({annotations:{string:{source:n.source}},customFlags:{runtimeReliability:!0},eventSamplingRate:r("justknobx")._("4535"),fn:async function(){e.$7();var n={messageToQpl:o("WmiMultiQplTracker").WmiMultiQplTracker.from(t.map(function(e){return[e.message.messageId,o("QPLFlow").startQPLFlow(r("qpl")._(1056834650,"494"),{annotations:{string:{messageId:e.message.messageId,senderId:e.message.senderId,threadId:e.message.threadId}}})]}))};n.messageToQpl.all(t.map(function(e){return e.message.messageId})).addPoint("preprocess_start");var a=await e.extensionConfiguration.preprocessors.run({ctx:n,payloadList:t}),i=a.errors,l=a.payloadList;n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("preprocess_end"),i.entries().map(function(e){var t=e[0],r=e[1];n.messageToQpl.endFail(t,"preprocess-error",o("getSafeQplErrorMessage").getSafeQPLErrorMessage(r))}),r("justknobx")._("4033")&&(n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("schedule_cleaners_start"),await o("WebMpsInsertionCleaners").scheduleCleaners(l),n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("schedule_cleaners_end")),n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("persist_start");var s=await o("WebMpsInsertionFlow").persistNewMessages(l);n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("persist_end"),s.entries().forEach(function(e){var t=e[0],r=e[1];n.messageToQpl.endFail(t,"persist-error",o("getSafeQplErrorMessage").getSafeQPLErrorMessage(r))}),n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("persisted"),n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("critical_postprocess_start");var u=await e.$8(l,n);return n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("critical_postprocess_end"),n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("non_critical_postprocess_start"),e.$9(l,n),n.messageToQpl.all(l.map(function(e){return e.message.messageId})).addPoint("non_critical_postprocess_end"),l.forEach(function(e){n.messageToQpl.endSuccess(e.message.messageId)}),r("mergeMaps")(i,s,u)},name:"save-new-messages",priority:o("WorkerScheduler").BLOCKING_PRIORITY});return this.$6.enqueue(function(){return a.run()})},n.$9=function(t,n){o("WebMpsPostprocess").runNonCriticalPostprocessor(t,this.extensionConfiguration.postProcessors.nonCritical,n).catch(function(e){var t=r("getErrorSafe")(e);o("MpsLogger").MpsLogger().catching(t).mustfix("Non-critical postprocessor failed with runtime error")})},n.$8=function(t,n){return o("WebMpsPostprocess").runCriticalPostprocessor(t,this.extensionConfiguration.postProcessors.critical,n).catch(function(e){var t=r("getErrorSafe")(e);return o("MpsLogger").MpsLogger().catching(t).mustfix("Critical postprocessor failed with runtime error"),new Map})},n.purgeDeletions=async function(){try{return await o("WAWaitForUserUnblocked").waitForUserUnblocked(),o("WebMpsScheduler").mpsScheduler().runTask({fn:o("WebMpsPurgeDeletions").purgeDeletions,name:"purge-deletions",priority:o("WorkerScheduler").BACKGROUND_PRIORITY})}catch(e){return o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("failed running purgeDeletions"),0}},n.purgeDeletedPayload=async function(){try{return await o("WAWaitForUserUnblocked").waitForUserUnblocked(),o("WebMpsScheduler").mpsScheduler().runTask({fn:o("WebMpsPurgeDeletedPayload").purgeDeletedPayload,name:"purge-deleted-payload",priority:o("WorkerScheduler").BACKGROUND_PRIORITY})}catch(e){return o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("failed running purgeDeletedPayload"),0}},n.getNextDeletionTimestampMs=async function(){try{return await o("WAWaitForUserUnblocked").waitForUserUnblocked(),o("WebMpsScheduler").mpsScheduler().runTask({fn:o("WebMpsPurgeDeletedPayload").getNextDeletionTimestampMs,name:"get-next-deletion-timestamp-ms",priority:o("WorkerScheduler").BACKGROUND_PRIORITY})}catch(e){o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("failed running getNextDeletionTimestampMs")}},n.purgeExpiredMessages=async function(t){try{return await o("WAWaitForUserUnblocked").waitForUserUnblocked(),o("WebMpsScheduler").mpsScheduler().runTask({eventSamplingRate:r("justknobx")._("4539"),fn:function(n){return o("WebMpsPurgeExpiredMessages").purgeExpiredMessages(t,n)},name:"purge-expired-messages",priority:o("WorkerScheduler").BACKGROUND_PRIORITY})}catch(e){return o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("failed running purgeExpiredMessages"),0}},n.getNextExpiryTimestampMs=async function(){try{return await o("WAWaitForUserUnblocked").waitForUserUnblocked(),o("WebMpsScheduler").mpsScheduler().runTask({eventSamplingRate:r("justknobx")._("4539"),fn:o("WebMpsPurgeExpiredMessages").getNextExpiryTimestampMs,name:"get-next-expire-timestamp-ms",priority:o("WorkerScheduler").BACKGROUND_PRIORITY})}catch(e){o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("failed running getNextExpiryTimestampMs")}},n.debugDbDump=function(){return o("MpsReverbDbDump").debugGetReverbDbDump()},n.spamReportLoadMessages=function(t){var e=this;return o("WebMpsScheduler").mpsScheduler().runTask({fn:async function(){var n=await Promise.all([e.$13({config:{persistToReverb:"no-persist",shouldFetchSupplementals:!0,shouldFetchTags:!1,shouldIgnoreLocalOnly:!1,strategy:"local-only",tagsFilter:"all"},debug:{purpose:"get-latest-msgs-for-spam-report"},direction:"desc",from:[o("MpsTypes").toTimestamp(Number.MAX_SAFE_INTEGER),null],numMessages:t.numMessages,threadId:t.threadId}),o("WebMpsLoadDeletedMessages").loadDeletedMessages(t,e.$1.decryptedProtobufToFullMessage)]),r=n[0],a=n[1],i=r.messages.filter(function(e){return!a.tombstones.has(e.toplevelProtobuf.messageId)});return[].concat(i,a.messages).toSorted(function(e,t){return t.toplevelProtobuf.timestampMs-e.toplevelProtobuf.timestampMs}).slice(0,t.numMessages)},name:"get-latest-msgs-for-spam-report"})},n.$7=function(){this.$3.forEach(function(e){return e()})},n.$10=function(t,n){var e=this.extensionConfiguration.readSideEffects;if(!(e==null||t.length<0))try{e(t,n)}catch(e){o("MpsLogger").MpsLogger().catching(r("getErrorSafe")(e)).mustfix("readSideEffects failed")}},n.$4=function(t){var e=this;o("schedulePeriodicTask").schedulePeriodicTask(function(){return e.purgeDeletions()},o("DateConsts").MS_PER_MIN*20),r("justknobx")._("4033")||o("schedulePeriodicTask").schedulePeriodicTask(function(){return e.purgeExpiredMessages(t)},o("DateConsts").MS_PER_MIN*10)},n.$5=function(t){var e=this;r("justknobx")._("4033")&&(o("MpsEphemeralCleaner").startMpsEphemeralCleaner({getNextTs:function(){return e.getNextExpiryTimestampMs()},purgeEnabled:function(){return!0},removeExpired:function(){return e.purgeExpiredMessages(t)}}),o("MpsDeletedCleaner").startMpsDeletedCleaner({getNextTs:function(){return e.getNextDeletionTimestampMs()},purgeEnabled:function(){return!0},removeExpired:function(){return e.purgeDeletedPayload()}}))},t})();function _(){if(c==null)throw r("err")("MPS not initialised");return c}function f(){c=void 0}l.makeMps=m,l.mps=_,l.resetMps_TEST_ONLY=f}),98);
__d("WebMpsPurgeExpiredMessages",["MpsTypes","WATimeUtils","WebMps","WebReverbDB"],(function(t,n,r,o,a,i,l){"use strict";var e=["debugFlags","expiryTimestampMs","isLocalOnlyMessage","isTransportErrorPlaceholder","pk","timestampMs"];async function s(t,n){var r=o("MpsTypes").toTimestamp(o("WATimeUtils").unixTimeMs()),a=await o("WebReverbDB").getWebReverbDB().runInTransaction(["message","deleted"],"readonly",async function(e){var t=await e.stores.message.readIndexRange("expiryTimestampMs",{lessThanOrEqual:[r]});return n.metric.addAnnotations({int:{num_expired_messages:t.length}}),t},"web-mps-purge-deletions");if(a.length===0)return 0;var i=a.map(function(n){var a=n.debugFlags,i=n.expiryTimestampMs,l=n.isLocalOnlyMessage,s=n.isTransportErrorPlaceholder,u=n.pk,c=n.timestampMs,d=babelHelpers.objectWithoutPropertiesLoose(n,e);return{directive:null,insertionSource:o("MpsTypes").InsertionSource.Send,message:t(babelHelpers.extends({},d,{timestampMs:r}))}});return await o("WebMps").mps().saveNewMessages(i,{source:"purge-expired-messages"}),a.length}function u(){try{return o("WebReverbDB").getWebReverbDB().runInTransaction(["message"],"readonly",async function(e){var t=o("MpsTypes").toTimestamp(o("WATimeUtils").unixTimeMs()),n=await e.stores.message.readIndexRange("expiryTimestampMs",{greaterThan:[t]},{limit:1,order:"asc"});if(!(n.length===0||n[0].expiryTimestampMs==null))return o("WATimeUtils").castMilliSecondsToUnixTime(n[0].expiryTimestampMs)},"web-mps-next-expiry-timestamp-ms")}catch(e){throw e}}l.purgeExpiredMessages=s,l.getNextExpiryTimestampMs=u}),98);
__d("MAWBridgeEventTransmitter",["EBAPI","EBLogger","LSIntEnum","LSMEBTaskCreationSource","MAWBridge","MAWBridgeTrace","MAWBridgeTypesCreators","MAWBridgeUpload","MAWIndexedDb","MAWJobDefinitions","MAWUploadThreadTxns","MpsTypes","WAJids","WALogger","WATimeUtils","WebMps"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Issuing point query for message: ",""])),t),r("EBAPI").isEBEnabled()!==!1&&o("WebMps").mps().loadMessage({config:{shouldFetchSupplementals:!0,shouldFetchTags:!1,strategy:"full-fetch"},debug:{purpose:"issuePointQueryOutsideTxn"},messageId:o("MpsTypes").toMessageId(t),threadId:o("MpsTypes").toThreadId(a)}).then(function(e){var t=e.value;t!=null&&o("MAWBridge").getBridge().sendAndReceive("event","uiUpdate",{events:[{tag:"RestoreNativeOp",value:{chatJid:a,decryptedMessagesProtobufs:[o("MAWJobDefinitions").mpsMessageToEncryptedBackupsMessage(t)],isPointQuery:!0,taskSource:(s||(s=o("LSIntEnum"))).ofNumber(n!=null?n:r("LSMEBTaskCreationSource").UNKNOWN)}}]}).catch(function(e){return o("EBLogger").EBLogger().tags(["eventTransmitter","mps"]).catching(e).warn("failure while executing UI update")})})}function c(e,t){o("MAWIndexedDb").afterTransaction({tag:"DeleteMessagesOfThread",value:o("MAWBridgeUpload").createBridgeDeleteMessagesOfThread(o("WAJids").threadIdForChatJid(e.jid),o("MAWUploadThreadTxns").getFolderTypeAsText(e.folder),"AdvancedCrypto",t!=null?t:o("WATimeUtils").castToMillisTime(1),null,2)})}function d(e,t,n){o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"StartTrace",value:o("MAWBridgeTrace").createBridgeStartTraceData(e,t,n)}]})}function m(e,t,n){o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"ThreadUpdated",value:o("MAWBridgeTypesCreators").createBridgeUpdatedThread({cannotReplyReason:e,folder:t,threadJid:n})}]})}l.issuePointQueryOutsideTxn=u,l.deleteMessagesOfThreadAfterTxn=c,l.startTraceOutsideTxn=d,l.updateThreadOutsideTxn=m}),98);
__d("MAWQuotedMsgUtils",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.content.type==="NoteReply"?e.content.msgContent==null?e:babelHelpers.extends({},e,{content:babelHelpers.extends({},e.content,{msgContent:void 0})}):e}function s(t){return t.content.expirationTs==null||t.content.expirationTs>o("WATimeUtils").unixTime()?t:e(t)}l.dbQuotedMsgWithoutExpirableContent=e,l.dbQuotedMsgWithoutExpiredContent=s}),98);
__d("MAWGetMsgQuoteTxn",["LSMEBTaskCreationSource","MAWBridgeEventTransmitter","MAWBridgeMsg","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWMsgType","MAWQuotedMsgUtils","MAWTransactionMode","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return t==null||t===o("WAJids").AUTHOR_SYSTEM?null:o("WAJids").authorAsUserJid(t)};function s(t,n,a,i){var l=n.quote,s=(l==null?void 0:l.content)||{},u=s.author,c=s.externalId;if(u==null)return o("MAWDexieTable").dexieResolve(null);var d=o("WAJids").isAuthorMe(u)?o("WAJids").AUTHOR_ME:e(u);if(l==null||d==null||c==null)return o("MAWDexieTable").dexieResolve(null);var m={author:d,chat:a,externalId:c};if(l.content.type==="NoteReply")return o("MAWDexieTable").dexieResolve({quote:o("MAWQuotedMsgUtils").dbQuotedMsgWithoutExpiredContent(l),quoteExternalId:l.content.externalId});var p=i!=null&&i==="ebrestore"?r("LSMEBTaskCreationSource").EB_POINT_QUERY_RESTORE_PROTOBUF:r("LSMEBTaskCreationSource").EB_POINT_QUERY_IN_ACT;return o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(t,m).then(function(e){if(o("MAWBridgeEventTransmitter").issuePointQueryOutsideTxn(m.externalId,p,m.chat),e==null||!o("MAWMsgType").isQuotedMsgType(e.type))return{quote:l,quoteExternalId:l.content.externalId};o("MAWIndexedDb").afterTransaction({tag:"NewMsg",value:o("MAWBridgeMsg").createBridgeMsg(e,null,!0)});var t=e.author,n=e.externalId,r=e.mediaId,a=e.msgContent,i=e.msgId,s=e.plaintextHash,u=e.specialTextSize,c=e.ts,d=e.type,_=e.xmaMessageType,f={author:t,externalId:n,mediaId:r,msgContent:a,msgId:i,plaintextHash:s,specialTextSize:u,ts:c,type:d,xmaMessageType:_};return e.messageExpirationTs!=null&&e.messageExpirationTs<o("WATimeUtils").unixTime()&&(f=babelHelpers.extends({},f,{mediaId:void 0,msgContent:void 0,type:o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL})),{quote:babelHelpers.extends({},l,{content:f}),quoteExternalId:e.externalId}})}function u(e,t,n){return s(e,t,n).then(function(e){return babelHelpers.extends({},t,{quote:e==null?void 0:e.quote,quoteExpirationTs:e==null?void 0:e.quote.content.expirationTs,quoteExternalId:e==null?void 0:e.quoteExternalId})})}function c(e,t){return e.messages.where("quoteExternalId").anyOf(t).toArray()}var d=o("MAWIndexedDb").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY},"maybeBatchGetMsgsByQuoteExternalId",function(e){return(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return c.apply(void 0,[e].concat(n))})});l.getMsgQuoteInfo=s,l.enhanceMsgWithQuoteInfo=u,l.maybeBatchGetMsgsByQuoteExternalId=c,l.maybeBatchGetMsgsByQuoteExternalIdWithTransaction=d}),98);
__d("MAWThreadEventConst",[],(function(t,n,r,o,a,i){"use strict";var e="placeholderConvertSubscription";i.PLACEHOLDER_CONVERT_SUBSCRIPTION=e}),66);
__d("MAWUpdateQuotedMsgTxns",["MAWAuthor","MAWBridgeMsg","MAWDbXMATxns","MAWDexieTable","MAWIndexedDb","MAWLoadReplyMediaTxns","MAWMsgType","WAJids"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t,n,r,a,i,l,s){var e=o("MAWAuthor").getAuthorUserJid(a);return t.messages.where("quoteExternalId").equals(r).toArray().then(function(r){if(r.length!==0){var a=r;(s==null||!s)&&(a=r.filter(function(t){var r=t.quote,a=t.threadJid;return o("MAWAuthor").getAuthorUserJid(r==null?void 0:r.content.author)===e&&a===n}));var u=a.map(function(e){var t,n=Object.assign({},(t=e.quote)==null?void 0:t.content,i.content),r=babelHelpers.extends({},e.quote,i,{content:n});return r.content.msgId==null&&l!=null&&(r.content.msgId=l),babelHelpers.extends({},e,{quote:r})});return t.messages.bulkPut(u).then(function(){return u})}})},s=function(n,r,a,i,l){l===void 0&&(l=o("MAWMsgType").MSG_TYPE.UNAVAILABLE);var t={content:{mediaId:void 0,msgContent:void 0,type:l}};return e(n,r,a,i,t).then(function(e){e!=null&&e.forEach(function(e){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(e)})})})},u=function(t,n,r){r===void 0&&(r=o("MAWMsgType").MSG_TYPE.UNAVAILABLE);var e=n.author,a=n.chat,i=n.externalId;return t.threads.get({jid:a}).then(function(n){if(n!=null)return s(t,n.jid,i,e,r)})},c=function(n,r,a,i){var t=a.author,l=a.externalId,s=a.mediaId,u=a.msgContent,c=a.msgId,d=a.plaintextHash,m=a.ts,p=a.type;if(o("WAJids").isAuthorSystem(t))return o("MAWDexieTable").dexieResolve();var _={author:t,chat:r,externalId:l};if(!o("MAWMsgType").isQuotedMsgType(p))return o("MAWDexieTable").dexieResolve();var f=o("MAWDexieTable").dexieResolve(null);return a.type===o("MAWMsgType").MSG_TYPE.XMA&&(f=o("MAWDbXMATxns").maybeGetXMAPayloadFromProtocolMsgId(n,_).then(function(e){return e.success===!1?o("MAWDexieTable").dexieResolve(null):o("MAWDexieTable").dexieResolve(e.value)})),f.then(function(o){var a,_,f,g,h,y={author:t,externalId:l,mediaId:(a=o==null||(_=o.defaultPreview)==null?void 0:_.mediaId)!=null?a:s,msgContent:u,plaintextHash:(f=o==null||(g=o.defaultPreview)==null?void 0:g.plaintextHash)!=null?f:d,ts:m,type:p,xmaMessageType:o==null||(h=o.xma)==null?void 0:h.targetType};return e(n,r,l,t,{content:y},c,i)})};function d(e,t,n){return o("MAWDexieTable").dexieAll([c(e,n,t),o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(e,t)]).then(function(n){var r=n[0],a=n[1];return r!=null?o("MAWDexieTable").dexieResolve(m(t,a)).then(function(){o("MAWDexieTable").dexieAll(r.map(function(t){return o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(e,t).then(function(e){return m(t,e),t})}))}):o("MAWDexieTable").dexieResolve([])})}function m(e,t){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(e,t)})}l.disassociateQuotedMsg=s,l.disassociateQuotedMessageByProtocolMsgId=u,l.associateQuotedMessage=c,l.associateAllReplies=d,l.issueReplyMsgUpdate=m}),98);
__d("MAWUseProtocolMsgIdForMsgId",[],(function(t,n,r,o,a,i){"use strict";function e(){return!0}i.shouldUseProtocolMsgIdForMsgId=e}),66);
__d("MAWBridgeParticipants",["MAWBridgeParticipantsUpdatedHandler","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.deliveredWatermarkTs,n=e.threadJid,r=e.type,a=e.userJid;return babelHelpers.extends({deliveredWatermarkTs:t||o("WATimeUtils").castToUnixTime(0),fbid:o("WAJids").extractUserId(a)},o("MAWBridgeParticipantsUpdatedHandler").mawToLsParticipantTypeConversion(r),{lastReadActionTs:o("WATimeUtils").castToUnixTime(0),readWatermarkTs:o("WATimeUtils").castToUnixTime(0),threadJid:n})}function s(t){return{participants:t.map(function(t){return e(t)})}}l.createBridgeParticipant=e,l.createBridgeParticipants=s}),98);
__d("MAWDbParticipantTxns",["MAWBridgeParticipants","MAWBridgeTypesCreators","MAWCurrentUser","MAWDbParticipant","MAWDexieTable","MAWIndexedDb","MAWODSProxy","MAWUserJidWrapper","MWFBLogger","WAJids","WAOdsEnums","WAResultOrError","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t,n,r){return r===void 0&&(r=!0),p(e,n.map(function(e){return babelHelpers.extends({},e,{chatJid:t})}),r)}function d(e,t){o("WAJids").switchOnMsgrChatJidType(e.threadJid,{group:r("emptyFunction"),user:function(r){e.userJid!==r&&e.userJid!==o("MAWUserJidWrapper").getMyUserJid()&&o("MWFBLogger").MWLogger().tags(["db","txn"]).mustfix("Attempting to insert participant to a mismatched one-on-one thread at %s",t)}})}function m(e){var t=e.addressable,n=e.chatJid,r=e.type,a=e.userJid;return{addressable:t,deliveredWatermarkTs:o("WATimeUtils").castToUnixTime(0),id:o("MAWDbParticipant").craftParticipantId(n,a),lastReadWatermarkTs:o("WATimeUtils").castToUnixTime(0),threadJid:n,type:r!=null?r:"participant",userJid:a}}function p(e,t,n){if(n===void 0&&(n=!0),t.length===0)return o("MAWDexieTable").dexieResolve([]);var r=t.map(function(e){return m(e)});return r.forEach(function(e){return d(e,"bulkAddParticipantsInThreads")}),e.participants.bulkPut(r).then(function(){return n&&o("MAWIndexedDb").afterTransaction({tag:"ParticipantsUpdated",value:o("MAWBridgeParticipants").createBridgeParticipants(r)}),r})}function _(e,t,n,r){r===void 0&&(r=!0);var a=new Set([t,o("MAWUserJidWrapper").getMyUserJid()]),i=n.filter(function(e){var t=e.userJid;return!a.has(t)}).map(function(e){var t=e.threadJid,n=e.userJid;return[t,n]});return i.length>0&&o("MAWODSProxy").odsBumpEntityKey({amount:1,entity:o("WAOdsEnums").Entity.MAW_ONE_TO_ONE_THREAD_PARTICIPANT_CLEANUP,key:o("MAWCurrentUser").isEmployee()?"employee":"public"}),b(e,i,r)}function f(e,t,n,r){r===void 0&&(r=!0);var a=Array.from(new Set([t,o("MAWUserJidWrapper").getMyUserJid()])),i=new Set(n.map(function(e){return e.userJid})),l=a.filter(function(e){return!i.has(e)}),s=l.map(function(e){return{type:"participant",userJid:e}});return c(e,t,s,r).then(function(e){var t=a.reduce(function(t,r){var o=e.find(function(e){return e.userJid===r}),a=n.find(function(e){return e.userJid===r});return o!=null&&a==null?t.push(o):a!=null&&t.push(a),t},[]);return t})}function g(e,t,n){return n===void 0&&(n=!0),L(e,t).then(function(r){return _(e,t,r,n).then(function(o){return f(e,t,r,n)})})}function h(e,t){return t.forEach(function(e){return d(e,"bulkUpdateParticipants")}),e.participants.bulkPut(t).then(function(){return t.length>0&&o("MAWIndexedDb").afterTransaction({tag:"ParticipantsUpdated",value:o("MAWBridgeParticipants").createBridgeParticipants(t)}),t})}function y(e,t,n){if(n.length===0)return o("MAWDexieTable").dexieResolve();var r=n.map(function(e){return[t,e]});return b(e,r)}function C(e,t,n){if(t.length===0)return o("MAWDexieTable").dexieResolve();var r=t.map(function(e){return[e,n]});return b(e,r)}function b(e,t,n){return n===void 0&&(n=!0),e.participants.where(["threadJid","userJid"]).anyOf(t).toArray().then(function(t){return e.participants.bulkDelete(t.map(function(e){return e.id})).then(function(){n&&t.forEach(function(e){var t=e.threadJid,n=e.userJid;return o("MAWIndexedDb").afterTransaction({tag:"ParticipantRemoved",value:{threadJid:t,userId:o("WAJids").extractUserId(n)}})})})})}function v(e,t){return e.participants.where("threadJid").equals(t).delete()}function S(e,t,n,r,o){return R(e,[{deliveredWatermarkTs:n,lastReadActionTs:o,lastReadWatermarkTs:r,participantKey:t}]).then(function(e){return e[0]})}function R(t,n,r){if(n.length===0)return o("MAWDexieTable").dexieResolve([]);var a=new Map,i=[];return n.forEach(function(e){i.push(e.participantKey),a.set(JSON.stringify(e.participantKey),e)}),t.participants.where(["threadJid","userJid"]).anyOf(i).toArray().then(function(n){n.length!==i.length&&r!=null&&r.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateParticipantTimestamps: missing participants "," vs ",""])),n.length,i.length);var l=[],c=[];return n.forEach(function(e){var t=a.get(JSON.stringify([e.threadJid,e.userJid]));if(t==null){r!=null&&r.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateParticipantTimestamps: missing tsData for participant ",", ",""])),e.threadJid,e.userJid);return}var n=t.deliveredWatermarkTs,o=t.lastReadActionTs,i=t.lastReadWatermarkTs,d=e.deliveredWatermarkTs,m=e.lastReadWatermarkTs,p=e.lastReadActionTs,_=n>d,f=i>m,g=p==null||o>p;if(r!=null&&r.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["bulkUpdateParticipantTimestamps: participant ",", "," deliveredWatermarkTs: ",", lastReadWatermarkTs: ",", lastReadActionTs: ",""])),e.threadJid,e.userJid,n,i,o),!_&&!f&&!g){c.push(e);return}l.push(babelHelpers.extends({},e,{deliveredWatermarkTs:_?n:d,lastReadActionTs:g?o:p,lastReadWatermarkTs:f?i:m}))}),l.forEach(function(e){return d(e,"bulkUpdateParticipantTimestamps")}),t.participants.bulkPut(l).then(function(){return l.forEach(function(e){o("MAWIndexedDb").afterTransaction({tag:"ReceivedReceipt",value:o("MAWBridgeTypesCreators").createBridgeReceivedReceipt(e.threadJid,o("WAJids").extractUserId(e.userJid),e.deliveredWatermarkTs)})}),[].concat(l,c)})})}function L(e,t){return e.participants.where("threadJid").equals(t).toArray()}function E(e,t){return e.participants.where("threadJid").anyOf(t).toArray()}function k(e,t){return L(e,t).then(function(e){return e.filter(function(e){return e.type==="invitedParticipant"})})}function I(e,t,n){return e.participants.where(["threadJid","userJid"]).equals([t,n]).first().then(function(e){return e==null?o("WAResultOrError").makeError("missing"):o("WAResultOrError").makeResult(e)})}function T(e,t){return e.participants.where(["threadJid","userJid"]).anyOf(t).toArray().then(function(e){var n=new Map(e.map(function(e){return[JSON.stringify([e.threadJid,e.userJid]),e]}));return t.map(function(e){return n.get(JSON.stringify(e))})})}l.bulkAddParticipants=c,l.logIfIllegalParticipant=d,l.bulkAddParticipantsInThreads=p,l.deleteIncorrectParticipantsInOneToOneThread=_,l.addMissingParticipantsInOneToOneThread=f,l.bulkRemoveIncorrectAndInsertMissingParticipantsInOneToOneThread=g,l.bulkUpdateParticipants=h,l.bulkDeleteParticipantsInThread=y,l.bulkDeleteParticipantAcrossThreads=C,l.bulkDeleteParticipants=b,l.deleteAllParticipantsForThread=v,l.updateParticipantTimestamps=S,l.bulkUpdateParticipantTimestamps=R,l.getParticipantsInThread=L,l.getParticipantsInThreads=E,l.getInvitedParticipantsInThread=k,l.getParticipant=I,l.bulkGetParticipants=T}),98);
__d("MAWWriteMsgSideEffectTxns",["MAWDbMsg","MAWDbParticipantTxns","MAWDexieTable"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("MAWDbMsg").getCanonicalTsFromMsg(t),r=t.author;return r!=="@me"&&r!=="@system"?o("MAWDbParticipantTxns").updateParticipantTimestamps(e,[t.threadJid,r],n,n,n):o("MAWDexieTable").dexieResolve()}l.updateParticipantTimestampsForMsg=e}),98);
__d("MAWWriteMsgTxns",["FBLogger","MAWAfterWriteMsgUtil","MAWBridgeMsg","MAWBuildIncomingMsgs","MAWDbEditMsgHistoryTxns","MAWDbMsg","MAWDbMsgTxns","MAWDbPendingStanzaTxns","MAWDbReactionsTxns","MAWDbThread","MAWDbThreadTxns","MAWDbUnrenderedMsgTxns","MAWDeleteForMeMsgContentCleaner","MAWDeleteThreadUtil","MAWDexieTable","MAWEphemeralMsgTxns","MAWExpiredQuoteCleaner","MAWFTSTxns","MAWFolderTypes","MAWGetMsgQuoteTxn","MAWGetOrCreateThreadTxns","MAWIndexedDb","MAWJidUtils","MAWLoadReplyMediaTxns","MAWLocalizationType","MAWLocalizationUtils","MAWMessageSortOrderUtils","MAWMsgType","MAWThreadEventConst","MAWTimeUtils","MAWUpdateQuotedMsgTxns","MAWUseProtocolMsgIdForMsgId","MAWWriteMsgSideEffectTxns","MAWWriteRevokeMessageTxns","ODS","WAJids","WALogger","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["rowId"],s,u,c;function d(e,t,n,a){var i=n.ts,l=[o("WATimeUtils").castUnixTimeToMillisTime(i),n.type===o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN],s=l[0],u=l[1];return o("MAWGetOrCreateThreadTxns").getExistingThread(e,t.jid).then(function(t){if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("at this point there's always a thread - checking for updates");var i=o("MAWDbMsgTxns").getThreadOldestMessageBySortOrder(e,t.jid),l=o("MAWDbMsgTxns").getThreadNewestMessageBySortOrder(e,t.jid);return o("MAWDexieTable").dexieAll([i,l]).then(function(e){var r,i,l,c=e[0],d=e[1],m=o("MAWUseProtocolMsgIdForMsgId").shouldUseProtocolMsgIdForMsgId()?null:d==null?1:o("MAWDbMsg").getInChatMsgIdFromMsgId(d.msgId)+1,p=o("WATimeUtils").castToMillisTime((r=d==null?void 0:d.sortOrderMs)!=null?r:0),_=s>p&&!u?s:p,f=(i=o("MAWTimeUtils").ensureValidMillisTime(t.lastReadMsgTs))!=null?i:0,g=o("WATimeUtils").castToMillisTime((l=d==null?void 0:d.sortOrderMs)!=null?l:0),h=f<g,y=n.author===o("WAJids").AUTHOR_ME||n.type===o("MAWMsgType").MSG_TYPE.ADMIN&&o("MAWLocalizationUtils").isParticipantChangeAdminMsg(n.msgContent.adminType)&&!h,C=babelHelpers.extends({},n,{msgId:m!=null?o("MAWDbMsg").craftMsgIdV2(t.chatId,m,n):o("MAWJidUtils").formatProtocolMsgIdFromMsg(n)}),b=o("MAWDbMsgTxns").calculateOldestMsg(c,d,C,a),v=b.oldestMsg;return{isOldestMsgUpdated:c!=null&&v!==c.msgId,msgId:C.msgId,prevOldestMsg:c,updatedSnippet:void 0,updatedThread:babelHelpers.extends({},t,{lastReadMsg:y?C.msgId:t.lastReadMsg,lastReadMsgTs:y?_:t.lastReadMsgTs,newestMsgTs:_,oldestMsg:v,snippetMsg:t.snippetMsg,snippetMsgTs:t.snippetMsgTs,threadOrder:o("MAWDbThread").craftThreadOrder(_,t.jid)})}})})}function m(e,t,n,r){return e.messages.where(["threadJid","sortOrderMs"]).equals([n.jid,r]).filter(function(e){return e.type!==o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN&&e.type!==o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION?!1:e.type===t.type&&e.msgContent.adminType===t.msgContent.adminType}).first().then(function(r){return r!=null?r:g(e,t,n)})}function p(e,t,n,r){return e.messages.where(["threadJid","sortOrderMs"]).equals([n.jid,r]).filter(function(e){return e.type===o("MAWMsgType").MSG_TYPE.ADMIN&&e.msgContent.adminType===t.msgContent.adminType}).first().then(function(r){return r!=null?((c||(c=o("ODS"))).bumpEntityKey(600,"maw_write_msg_txns_deduped_admin_message",t.msgContent.adminType),r):g(e,t,n)})}function _(e,t,n){return e.messages.where("threadJid").equals(n.jid).filter(function(e){return e.type===o("MAWMsgType").MSG_TYPE.ADMIN&&(e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED||e.msgContent.adminType===o("MAWLocalizationType").LOCALIZATION_TYPE.TWO_USERS_CONNECTED_ONE_MSPLIT)}).first().then(function(r){return r!=null?((c||(c=o("ODS"))).bumpEntityKey(600,"maw_write_msg_txns_deduped_admin_message",t.msgContent.adminType),r):g(e,t,n)})}function f(e,t){return e.messages.add(t).then(function(e){return babelHelpers.extends({},t,{rowId:e})})}function g(e,t,n,r){r===void 0&&(r={});var a=r,i=a.isFirstMsg,l=i===void 0?!1:i,u=a.isOutgoing,c=u===void 0?!1:u,m=a.openMessageOtid,p=a.openMessageParticipantCount,_=a.optimisticMsg,g=a.participantCount,h=a.quotedReplyAttachmentMeta,y=a.shouldUpdateUi,C=y===void 0?!0:y,b=a.sortOrderMs;return d(e,n,t,b).then(function(n){var r=n.isOldestMsgUpdated,a=n.msgId,i=n.prevOldestMsg,u=n.updatedThread,d=babelHelpers.extends({},t,{msgId:a,sortOrderMs:o("MAWMessageSortOrderUtils").generateAuthoritativeMessageSortOrder(t)});return o("MAWDexieTable").dexieAll([f(e,d),e.threads.put(u),o("MAWFTSTxns").maybePutMessageToBacklog(e,d.externalId)]).then(function(e){var t=e[0],n=e[1];return c&&o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["writeMsgAfterTransaction - sortOrderMs: ",""])),t.sortOrderMs),C&&o("MAWAfterWriteMsgUtil").writeMsgAfterTransaction({dbMsg:t,isFirstMsg:l,openMessageOtid:m,openMessageParticipantCount:p,optimisticMsg:_,participantCount:g,quotedReplyAttachmentMeta:h,updatedThread:u}),t})})}function h(e,t,n){return o("MAWGetOrCreateThreadTxns").getExistingThread(e,n.jid).then(function(a){if(a==null)throw r("FBLogger")("messenger_web").mustfixThrow("at this point there's always a thread - checking for updates");return(o("MAWUseProtocolMsgIdForMsgId").shouldUseProtocolMsgIdForMsgId()?o("MAWDexieTable").dexieResolve(null):o("MAWDbUnrenderedMsgTxns").getNextUnrenderedMsgIdNumberForThread(e,a)).then(function(r){var i=babelHelpers.extends({},t,{msgId:r!=null?o("MAWDbMsg").craftUnrenderedMsgId(a.chatId,r):o("MAWJidUtils").formatProtocolMsgIdFromExternalId(n.jid,t.externalId)});return o("MAWDexieTable").dexieAll([e.unrenderedMessages.add(i),e.threads.put(a)]).then(function(e){var t=e[0],n=e[1];return babelHelpers.extends({},i,{rowId:t})})})})}function y(e,t,n){return o("MAWDexieTable").dexieAll([C(e,t,n),o("MAWDbEditMsgHistoryTxns").getEditHistoryByOriginalMsgExternalIdAndThreadJid(e,[[t.externalId,n.jid]]).then(function(e){return{editMsgHistories:e,originalEditMsgHistory:e.find(function(e){return e.editExternalId===t.externalId})}})]).then(function(e){var t=e[0],n=e[1],r=n.editMsgHistories,o=n.originalEditMsgHistory;return babelHelpers.extends({},t,{editMsgHistories:r,existingEditMsgHistory:o!=null?o:null})})}function C(e,t,n){var r=[t.externalId,n.jid,t.author],a=r[0],i=r[1],l=r[2];return o("MAWDexieTable").dexieAll([o("MAWDbMsgTxns").maybeGetMsgByExternalId(e,a,i,l),o("MAWDbPendingStanzaTxns").maybeGetPendingRevokedStanza(e,a,l,i),o("MAWDbPendingStanzaTxns").maybeGetPendingDeletedStanza(e,a,l,i),o("MAWDbMsgTxns").checkIfMsgIsDeletedForMeOrRevoked(e,a,i,l),o("MAWDbPendingStanzaTxns").maybeGetDeleteThreadFromPendingStanza(e,i).then(function(e){return o("MAWDeleteThreadUtil").isMsgDeletedViaDeleteThread(t.ts,e)})]).then(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],a=e[4];return{existingMsg:t!=null?t:null,isDeletedWithThread:a,isDeleteForMeOrRevoked:o,pendingDeleteForMeStanza:r!=null?r:null,pendingRevokedStanza:n!=null?n:null}})}function b(e,t,n,r,a){return r===void 0&&(r=!0),o("MAWDbPendingStanzaTxns").maybeGetPendingRevokedStanza(e,t.externalId,t.author,n.jid).then(function(i){if(i!=null)return R(e,t,n,i,!0);var l=t.author;o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["handle"," Msg: Message from ",", chat ",""])),t.type,l,n.jid);var s=babelHelpers.extends({},babelHelpers.extends({},t,{threadJid:n.jid}));return n.folder===o("MAWFolderTypes").FOLDER_ID.OTHER&&(s.altIndex=s.altIndex===o("MAWDbMsg").FUTUREPROOF_ALT_INDEX?o("MAWDbMsg").FUTUREPROOF_SPAM_ALT_INDEX:o("MAWDbMsg").SPAM_ALT_INDEX),o("MAWGetMsgQuoteTxn").getMsgQuoteInfo(e,s,n.jid,a).then(function(t){t!=null&&(s=babelHelpers.extends({},s,{quote:t==null?void 0:t.quote,quoteExpirationTs:t==null?void 0:t.quote.content.expirationTs,quoteExternalId:t==null?void 0:t.quoteExternalId}));var a=s.quoteExpirationTs;return a!=null&&a>o("WATimeUtils").unixTime()&&o("MAWExpiredQuoteCleaner").addNewExpiredQuoteCleanerTimestamp(a),o("MAWDexieTable").dexieAll([o("MAWUpdateQuotedMsgTxns").associateQuotedMessage(e,n.jid,s),o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(e,s),o("MAWLoadReplyMediaTxns").getReplyMediaForMsg(e,s)]).then(function(t){var a=t[0],i=t[1],l=t[2];return g(e,s,n,{quotedReplyAttachmentMeta:i,shouldUpdateUi:r}).then(function(t){return o("MAWDexieTable").dexieAll([o("MAWWriteMsgSideEffectTxns").updateParticipantTimestampsForMsg(e,s),o("MAWEphemeralMsgTxns").markEphemeralMessageAsSent(e,t,r)]).then(function(e){var n=e[1];return a!=null&&r&&a.forEach(function(e){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(e,l)})}),n||t})})})})})}function v(t,n,r,a,i,l){var s=babelHelpers.extends({},babelHelpers.extends({},n,{msgId:r.msgId,protocolMsgId:r.protocolMsgId,rowId:r.rowId,serverTs:r.serverTs,sortOrderMs:r.sortOrderMs,threadJid:a.jid,ts:r.ts}));return o("MAWDexieTable").dexieAll([o("MAWUpdateQuotedMsgTxns").associateQuotedMessage(t,a.jid,s),o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(t,s),o("MAWLoadReplyMediaTxns").getReplyMediaForMsg(t,s),o("MAWGetMsgQuoteTxn").getMsgQuoteInfo(t,s,a.jid,l),o("MAWDbMsgTxns").getThreadNewestMessageId(t,a.jid)]).then(function(l){var u,c=l[0],d=l[1],m=l[2],p=l[3],_=l[4];return s=babelHelpers.extends({},s,{quote:p==null?void 0:p.quote,quoteExternalId:p==null?void 0:p.quoteExternalId}),((u=r.editCount)!=null?u:0)>0&&i!=null&&n.type===o("MAWMsgType").MSG_TYPE.TEXT?o("MAWDbEditMsgHistoryTxns").updateEditMsgHistoryWithNewIncomingMsg(t,i,n).then(function(){return r}):t.messages.put(s).then(function(){return o("MAWDbThreadTxns").needsRetroactiveReadReceiptInThread(t,s)}).then(function(e){if(e)return s.altIndex=o("MAWDbMsg").craftToBeReadAltIndex(a.chatId),t.messages.put(s)}).then(function(){if(o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(s,m)}),o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(s,d)}),o("MAWIndexedDb").afterTransactionThreadEvent({chatJid:a.jid,msgId:s.msgId},o("MAWThreadEventConst").PLACEHOLDER_CONVERT_SUBSCRIPTION),c!=null&&c.forEach(function(e){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(e,m)})}),s.msgId===_){var n=s,r=n.rowId,i=babelHelpers.objectWithoutPropertiesLoose(n,e);o("MAWWriteMsgSideEffectTxns").updateParticipantTimestampsForMsg(t,i)}return s})})}function S(e,t,n,r){var a=o("MAWBuildIncomingMsgs").buildUnstoredDeleteForMeMsg(t,n);return o("MAWDexieTable").dexieAll([o("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(e,[{author:a.author,chatJid:a.threadJid,externalId:a.externalId}]),h(e,a,n),e.pendingStanzas.delete(r.rowId),o("MAWFTSTxns").maybePutMessageToPurgeBacklog(e,t.externalId)]).then(function(e){var t=e[0],n=e[1];return o("MAWDeleteForMeMsgContentCleaner").addNewDeleteForMeMsgContentCleanerTimestamp(a.messageDeleteForMeTs),babelHelpers.extends({},a,{msgId:n.msgId,rowId:n.rowId})})}function R(e,t,n,a,i){i===void 0&&(i=!1);var l=o("MAWDbPendingStanzaTxns").getRevokedContent(a);if(l==null)throw r("FBLogger")("messenger_web").mustfixThrow("missing revoked content");var s=o("MAWBuildIncomingMsgs").buildUnstoredRevokedMsg(t,n,l);return o("MAWDexieTable").dexieAll([g(e,s,n),e.pendingStanzas.delete(a.rowId)]).then(function(t){var r=t[0];return o("MAWWriteRevokeMessageTxns").markIncomingMessageRevoked(e,r,n).then(function(){return r})})}l.writeDedupedEphemeralSettingAdminMessage=m,l.writeDedupedAdminMessage=p,l.writeDedupedUsersConnectedAdminMessage=_,l.writeMsg=g,l.writeUnrenderedMsg=h,l.prepareTextMsgWriteData=y,l.prepareMsgWriteData=C,l.writeNewIncomingMsg=b,l.writeCiphertextUpdate=v,l.handleDeleteForMeMessage=S,l.handleOutOfOrderRevokedMessage=R}),98);
__d("MAWDbDeletedMessages",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({ChatDelete:"chat_delete",Revoke:"revoke"});i.DbDeletedMsgReasonEnum=e}),66);
__d("MAWMediaManagerDeferred",["promiseDone","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWMediaManager").__setRef("MAWMediaManagerDeferred");function s(t){r("promiseDone")(e.load().then(function(e){e.getMawMediaManager().dequeueDownload(t)}))}l.dequeueDownload=s}),98);
__d("MAWUnsendMsgContentCleaner",["FBLogger","MAWMsgCleaner","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=null;function c(e){u==null&&(u=new(o("MAWMsgCleaner")).MsgCleaner(e,o("MAWMsgCleaner").CLEANER_TYPE.UNSEND))}function d(t){if(u==null){var n="Trying to add new UnsendMsgContentCleanerTimestamp before the cleaner is initialized!";throw o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",""])),n),r("FBLogger")("messenger_web").mustfixThrow(n)}else o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["UnsendMsgContentCleaner: Adding timestamps (",")"])),t),u.update(t)}function m(){return u}function p(){u=null}l.startUnsendMsgContentCleaner=c,l.addNewUnsendMsgContentCleanerTimestamp=d,l.getUnsendMsgContentCleaner_FOR_TESTING_ONLY=m,l.resetUnsendMsgContentCleaner_FOR_TESTING_ONLY=p}),98);
__d("MAWWriteDeleteMessageTxns",["MAWAckLevel","MAWDbMsg","MAWDbMsgTxns","MAWDbPendingStanza","MAWDbReactionsTxns","MAWDbThreadTxns","MAWDbXMATxns","MAWDeleteForMeMsgContentCleaner","MAWDexieTable","MAWFTSTxns","MAWIndexedDb","MAWMediaManagerDeferred","MAWMsgType","MAWPendingStanzaCleaner","MAWThreadSnippetBuildTxns","MAWUpdateQuotedMsgTxns","MAWXMAUtils","WAResultOrError","WATimeUtils","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e=6*o("WATimeUtils").HOUR_SECONDS,s=30*o("WATimeUtils").DAY_SECONDS;function u(e,t){var n=t.protocolMsgId,r=n.author,a=n.chat,i=n.externalId;return o("MAWDexieTable").dexieAll([o("MAWDbThreadTxns").getThread(e,a),e.unrenderedMessages.get({externalId:i}),o("MAWFTSTxns").maybePutMessageToPurgeBacklog(e,i)]).then(function(t){var a=t[0],l=t[1];return a.success?l!=null&&l.threadJid===a.value.jid&&l.author===r?o("WAResultOrError").makeError("duplicate_delete_for_me"):o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(e,n).then(function(t){if(t==null){var l={ack:o("MAWAckLevel").ACK.received,author:r,externalId:i,threadJid:a.value.jid,type:o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME},u=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+s),d={deleteTs:u,externalIdWithType:i+"_"+o("MAWDbPendingStanza").PENDING_DELETE_FOR_ME,pendingContent:{content:l,type:o("MAWDbPendingStanza").PENDING_TYPE.DELETE_FOR_ME}};return e.pendingStanzas.add(d).then(function(){return o("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp(u),o("WAResultOrError").makeResult()})}return o("MAWDexieTable").dexieResolve(c(e,t,r,n.chat,a.value)).then(function(){return o("WAResultOrError").makeResult()})}):o("WAResultOrError").makeError("missing_thread")})}function c(t,n,a,i,l){var s,u,c=o("MAWDexieTable").dexieResolve();o("MAWXMAUtils").isXMAStoryReply((s=n.quote)==null?void 0:s.content.xmaMessageType)&&(c=d(t,n));var p={ack:n.ack,author:a,externalId:n.externalId,mediaId:n.mediaId,messageDeleteForMeTs:o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+e),msgContent:(u=o("MAWDbMsg").getMsgContent(n))==null?void 0:u.content,msgId:n.msgId,quote:n.quote,reportingMeta:n.reportingMeta,serverTs:void 0,threadJid:i,ts:n.ts,type:o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME,xmaMessageType:n.xmaMessageType},_=o("MAWDexieTable").dexieAll([m(t,n.author,n.externalId,n.threadJid),o("MAWDbMsgTxns").deleteDbMsg(t,n.rowId),c]).then(function(){if(o("MAWDbMsg").isMediaMsg(n)){var e=n.mediaId,a=n.plaintextHash;e!=null&&(a!=null?(o("MAWMediaManagerDeferred").dequeueDownload(a),o("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:e,msgId:n.msgId,plaintextHash:a,threadJid:n.threadJid}})):o("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:e,msgId:n.msgId,threadJid:n.threadJid}}))}return o("MAWDexieTable").dexieAll([o("MAWThreadSnippetBuildTxns").refreshThreadSnippet(t,l)]).then(r("emptyFunction"))});return _.then(function(){return o("MAWDexieTable").dexieAll([t.unrenderedMessages.add(p),o("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(t,[{author:a,chatJid:n.threadJid,externalId:n.externalId}]),o("MAWUpdateQuotedMsgTxns").disassociateQuotedMsg(t,n.threadJid,n.externalId,n.author,o("MAWMsgType").MSG_TYPE.REVOKED)]).then(function(){return o("MAWDbMsgTxns").maybeUpdateThreadMsgsForDeleteForMe(t,l.jid,n.msgId,n.sortOrderMs).then(function(){return o("MAWDeleteForMeMsgContentCleaner").addNewDeleteForMeMsgContentCleanerTimestamp(p.messageDeleteForMeTs),o("WAResultOrError").makeResult()})})})}function d(e,t){return o("MAWDbXMATxns").maybeGetXMAFromAssociatedMsgId(e,t.msgId).then(function(t){return o("MAWDbMsgTxns").maybeGetMsg(e,t==null?void 0:t.msgId).then(function(t){if(t!=null)return o("MAWDbMsgTxns").deleteDbMsg(e,t.rowId)})})}function m(e,t,n,r){return e.messages.where("quoteExternalId").equals(n).filter(function(e){var n;return e.type===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE&&((n=e.quote)==null?void 0:n.content.author)===t&&e.threadJid===r}).toArray().then(function(t){if(t.length===0)return o("MAWDexieTable").dexieResolve([]);var n=t.map(function(e){return e.rowId});return o("MAWDbMsgTxns").bulkDeleteDbMsg(e,n).then(function(){return t})})}l.REVOKE_CONTENT_EXPIRATION_IN_SEC=e,l.handleDeleteForMe=u,l.deleteXMAStoryReplyMsg=d,l.deleteBumpMsgs=m}),98);
__d("MAWWriteRevokeMessageTxns",["FBLogger","LSMEBTaskCreationSource","MAWAckLevel","MAWBridgeEventTransmitter","MAWBridgeMsg","MAWBridgeTypesCreators","MAWDbDeletedMessages","MAWDbMsg","MAWDbMsgTxns","MAWDbPendingStanza","MAWDbProtocolMsgIdMiddleware","MAWDbReactionsTxns","MAWDexieTable","MAWEphemeralUtil","MAWFTSTxns","MAWIndexedDb","MAWJidUtils","MAWMediaManagerDeferred","MAWMsgType","MAWPendingStanzaCleaner","MAWThreadSnippetBuildTxns","MAWUnsendMsgContentCleaner","MAWUpdateQuotedMsgTxns","MAWWriteDeleteMessageTxns","MAWWriteMsgTxns","MAWXMAUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=6*o("WATimeUtils").HOUR_SECONDS,s=30*o("WATimeUtils").DAY_SECONDS;function u(e,t,n,a,i,l){if(l!=null&&a==null){var u,d=babelHelpers.extends({},t,{originalTs:o("WATimeUtils").castMilliSecondsToUnixTime(l),threadJid:n.jid,unsendMsgContentDeleteTs:(u=t.serverTs)!=null?u:t.ts});return o("MAWWriteMsgTxns").writeMsg(e,d,n).then(function(e){return e.type==="Revoked"?e:null})}var m=o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+s),_=t.author,f=t.externalId,g=t.revokedExternalId,h=i!=null?p(e,i):o("MAWDexieTable").dexieResolve();return o("MAWDexieTable").dexieAll([a==null?o("MAWDbMsgTxns").maybeGetMsgByExternalId(e,t.revokedExternalId,n.jid,t.author):o("MAWDexieTable").dexieResolve(a),o("MAWFTSTxns").maybePutMessageToPurgeBacklog(e,f)]).then(function(i){var l=i[0];if((a==null||l!=null)&&r("FBLogger")("messenger_web").warn("Revoked message missing originalMsg incorrectly"),l==null){var s={deleteTs:m,externalIdWithType:g+"_"+o("MAWDbPendingStanza").PENDING_REVOKED,pendingContent:{content:{ack:o("MAWAckLevel").ACK.received,altIndex:void 0,author:_,externalId:f,revokedExternalId:g,threadJid:n.jid,ts:t.ts,type:"Revoked"},type:o("MAWDbPendingStanza").PENDING_TYPE.REVOKED}};return o("MAWDexieTable").dexieAll([e.pendingStanzas.add(s),h]).then(function(t){var a=t[0],i=t[1];o("MAWPendingStanzaCleaner").addNewPendingStanzaCleanerTimestamp(m),o("MAWBridgeEventTransmitter").issuePointQueryOutsideTxn(g,r("LSMEBTaskCreationSource").POINT_QUERY_FROM_EB,n.jid),i===!0&&o("MAWThreadSnippetBuildTxns").refreshThreadSnippet(e,n)})}return h.then(function(){return c(e,l,n,t.externalId,t.revokedExternalId,t.serverTs,t.ts,!1)})})}function c(t,n,r,a,i,l,s,u){var c,m=babelHelpers.extends({},n,{altIndex:void 0,externalId:a,msgContent:o("MAWDbMsg").getMsgContent(n),originalTs:(c=n.serverTs)!=null?c:n.ts,revokedExternalId:i,serverTs:l,threadJid:r.jid,ts:s,type:"Revoked",unsendMsgContentDeleteTs:o("WATimeUtils").castToUnixTime(o("WATimeUtils").unixTime()+e)});return o("MAWDbProtocolMsgIdMiddleware").appendProtocolMsgId(m),u?o("MAWDexieTable").dexieResolve(m):d(t,n,m,r).then(function(){return m})}function d(e,t,n,r){var a,i=o("MAWXMAUtils").isXMAStoryReply((a=t.quote)==null?void 0:a.content.xmaMessageType)?o("MAWWriteDeleteMessageTxns").deleteXMAStoryReplyMsg(e,t):o("MAWDexieTable").dexieResolve(),l=o("MAWJidUtils").toProtocolMsgId(t),s=l!=null?e.deletedMessages.add(babelHelpers.extends({},l,{reason:o("MAWDbDeletedMessages").DbDeletedMsgReasonEnum.Revoke})):o("MAWDexieTable").dexieResolve();return o("MAWWriteDeleteMessageTxns").deleteBumpMsgs(e,t.author,t.externalId,t.threadJid).then(function(){return o("MAWDexieTable").dexieAll([e.messages.put(n),o("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(e,[{author:n.author,chatJid:n.threadJid,externalId:n.revokedExternalId}]),o("MAWUpdateQuotedMsgTxns").disassociateQuotedMsg(e,n.threadJid,n.revokedExternalId,n.author,o("MAWMsgType").MSG_TYPE.REVOKED),i,s,o("MAWFTSTxns").maybePutMessageToPurgeBacklog(e,t.externalId)]).then(function(){if(o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(n)}),t!=null&&o("MAWDbMsg").isMediaMsg(t)){var a=t.mediaId,i=t.plaintextHash;a!=null&&(i!=null?(o("MAWMediaManagerDeferred").dequeueDownload(i),o("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:a,msgId:t.msgId,plaintextHash:i,threadJid:t.threadJid}})):o("MAWIndexedDb").afterTransaction({tag:"MediaExpired",value:{mediaId:a,msgId:t.msgId,threadJid:t.threadJid}}))}return o("MAWEphemeralUtil").maybeClearEphemeralMsgCountdown(t),o("MAWThreadSnippetBuildTxns").refreshThreadSnippet(e,r)})})}function m(e,t,n){if(t.type!==o("MAWMsgType").MSG_TYPE.REVOKED)throw r("FBLogger")("messenger_web").mustfixThrow("Cant mark unrevoked message revoked");var a=o("MAWJidUtils").maybeToProtocolMsgId(t.author,t.threadJid,t.revokedExternalId),i=a!=null?e.deletedMessages.add(babelHelpers.extends({},a,{reason:o("MAWDbDeletedMessages").DbDeletedMsgReasonEnum.Revoke})):o("MAWDexieTable").dexieResolve();return o("MAWWriteDeleteMessageTxns").deleteBumpMsgs(e,t.author,t.revokedExternalId,t.threadJid).then(function(r){return r.length>0&&o("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:o("MAWBridgeTypesCreators").createBridgeDeleteMessages(t.threadJid,r)}),o("MAWDexieTable").dexieAll([o("MAWDbReactionsTxns").deleteReactionsByUniqueMsgIdentifiers(e,[{author:t.author,chatJid:t.threadJid,externalId:t.revokedExternalId}]),o("MAWThreadSnippetBuildTxns").refreshThreadSnippet(e,n),i]).then(function(){o("MAWUnsendMsgContentCleaner").addNewUnsendMsgContentCleanerTimestamp(t.unsendMsgContentDeleteTs),o("MAWIndexedDb").afterTransaction({tag:"NewMsg",value:o("MAWBridgeMsg").createBridgeMsg(t)})})})}function p(e,t){return t.type===o("MAWMsgType").MSG_TYPE.CIPHERTEXT?e.messages.delete(t.rowId).then(function(){return o("MAWIndexedDb").afterTransaction({tag:"DeleteMessages",value:o("MAWBridgeTypesCreators").createBridgeDeleteMessages(t.threadJid,[t])}),!0}):o("MAWDexieTable").dexieResolve(!1)}l.REVOKE_CONTENT_EXPIRATION_IN_SEC=e,l.writeIncomingRevokeMsg=u,l.revokeUnstoredMsg=c,l.markExistingMsgRevoked=d,l.markIncomingMessageRevoked=m}),98);
__d("MAWCastToMsgrServerMediaType",["EncryptedBackupsUploadEntity","MAWDbMedia","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,n){if(n===void 0&&(n=!1),n&&t==="image")return"xma";switch(t){case"image":case"video":case"gif":case"sticker":return t;case"document":return"file";case"ptt":return"audio";case"xma-image":return"xma";case"preview":return"preview";default:return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["invalid mediaType: "," for castToMsgrServerMediaType method"])),t),null}}function d(e,t){if(t===void 0&&(t=!1),t&&e===o("MAWDbMedia").MEDIA_TYPE.IMAGE)return"xma";switch(e){case"Image":return"image";case"Video":return"video";case"Gif":return"gif";case"Sticker":return"sticker";case"DocumentFile":return"file";case"Ptt":return"audio";default:return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["invalid client mediaType: "," for castClientMediaTypeToServerMediaType method"])),e),null}}function m(e){switch(e){case o("EncryptedBackupsUploadEntity").AttachmentContextMediaType.IMAGE:return"image";case o("EncryptedBackupsUploadEntity").AttachmentContextMediaType.VIDEO:return"video";case o("EncryptedBackupsUploadEntity").AttachmentContextMediaType.GIF:return"gif";case o("EncryptedBackupsUploadEntity").AttachmentContextMediaType.STICKER:return"sticker";case o("EncryptedBackupsUploadEntity").AttachmentContextMediaType.DOCUMENT:return"file";case o("EncryptedBackupsUploadEntity").AttachmentContextMediaType.PTT:return"audio";case o("EncryptedBackupsUploadEntity").AttachmentContextMediaType.XMA:return"xma";case o("EncryptedBackupsUploadEntity").AttachmentContextMediaType.MESSENGER_PREVIEW:return"preview";default:return o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["invalid attachment mediaType: "," for castMediaAttachmentTypeToServerMediaType method"])),e),null}}l.castToMsgrServerMediaType=c,l.castClientMediaTypeToServerMediaType=d,l.castMediaAttachmentTypeToServerMediaType=m}),98);
__d("WorkerUtils",[],(function(t,n,r,o,a,i){"use strict";function e(){try{return"WorkerGlobalScope"in t&&t instanceof t.WorkerGlobalScope}catch(e){return!1}}function l(){try{return"SharedWorkerGlobalScope"in t&&t instanceof t.SharedWorkerGlobalScope}catch(e){return!1}}i.isWorkerContext=e,i.isSharedWorkerContext=l}),66);
__d("getOrchestratorVersion",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e;return(e=r("qex")._("263"))!=null?e:"default"}l.default=e}),98);
__d("MAWMainWebWorkerConfig",["MAWGK","MAWParseXMAFBConfig","WADbDeviceRegistration","WorkerUtils","getOrchestratorVersion","gkx","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e,s=1,u={S508658PreventOldSessionLookupAndPromote:function(){return!0},armadilloWebProcessFutureproof:function(){return r("MAWGK").armadillo_web_process_futureproof},getSignalFutureMessagesMax:function(){return r("justknobx")._("847")},icdcAlertTriggerFailureCounter:function(){return r("justknobx")._("1970")},icdcCooldownIntervalInMinutes:function(){return r("justknobx")._("1971")},icdcIntervalInMinutes:function(){return r("justknobx")._("1972")},isDocumentReceiveEnabled:function(){return!r("gkx")("23924")},isFrankingDropOnInvalid:function(){return r("gkx")("23973")},isFrankingDropOnMissing:function(){return r("gkx")("23974")},isICDCErrorEnabled:function(){return r("gkx")("23975")},isMetaAiInvocationMessageRenderEnabled:function(){return r("gkx")("12661")},isPollsEnabled:function(){return!1},isProgressiveJpegSendEnabled:function(){return!0},isSharedWorkerContext:function(){return(e||(e=o("WorkerUtils"))).isSharedWorkerContext()},isStickerEnabled:function(){return!0},isStickerReceiverFetchEnabled:function(){return r("justknobx")._("3677")},jpegThumbnailTargetByteSizeKB:function(){return r("justknobx")._("2338")},maxPrekeysToUpload:function(){return 200},maxUsersForNotifyDeviceChange:function(){return o("WADbDeviceRegistration").MAX_USERS_FOR_NOTIFY_DEVICE_CHANGE},newClockSkewCalculation:function(){return r("gkx")("18494")},offlineQueueStuckTimeoutMs:function(){return r("justknobx")._("3264")},orchestratorVersion:function(){return r("getOrchestratorVersion")()},pjpegPreviewAvoidLastScan:function(){return!0},sessionDropIfTooOld:function(){return r("justknobx")._("2240")},skipProcessingGroupInvite:function(){return r("justknobx")._("3899")},waDanglingQueue:function(){return!0}},c={productTypeForEBAttachments:"msgr",shouldFallbackToPreviewForFailedProgressiveJpeg:function(){return r("gkx")("2909")},supportedTypesVersion:function(){return r("MAWGK").armadillo_web_process_futureproof?s+1:s},supportedXMATargetTypes:function(){return o("MAWParseXMAFBConfig").FB_FULLY_SUPPORTED_TARGET_TYPES}};l.waConfig=u,l.mawConfig=c}),98);
__d("MAWConfig",["MAWMainWebWorkerConfig"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWMainWebWorkerConfig").mawConfig;function s(){return e}function u(t){e=t}l.getConfig=s,l.setConfig=u}),98);
__d("MAWJobPersistenceAccessorsApi",["MAWJobActionsV2","MAWJobsIndexedDb","MAWTransactionMode"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e,t,n;return{deletePersistedJob:(e=o("MAWJobsIndexedDb")).makeJobsTransactor("jobs",(t=o("MAWTransactionMode")).READWRITE,"deletePersistedJob")((n=o("MAWJobActionsV2")).deletePersistedJob),loadAllJobs:e.makeJobsTransactor("jobs",t.READONLY,"loadAllJobs")(n.readAllPersistedJobs),maybeCreateJob:e.makeJobsTransactor("jobs",t.READWRITE,"maybeCreateJob")(n.maybeCreateJob),readPersistedJob:e.makeJobsTransactor("jobs",t.READONLY,"readPersistedJob")(n.readPersistedJob),updatePersistedJob:e.makeJobsTransactor("jobs",t.READWRITE,"updatePersistedJob")(n.updatePersistedJob)}}l.getJobPersistenceAccessors=e}),98);
__d("WAJobRequirement",["Promise","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){var t=this;this.$1=(s||(s=n("Promise"))).resolve(),this.$2=!0,this.$3=null,this.$4=function(){var e=t.$3;if(e!=null)return t.$3=null,(s||(s=n("Promise"))).all(e).then(t.$4);t.$2=!0},this.name=e}var r=t.prototype;return r.addBlocker=function(r){var t=this,a=r.catch(function(n){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["JobRequirement[","] blocker errored ",""])),t.name,n).sendLogs("job-blocker-rejected")});if(this.$2)this.$2=!1,this.$1=(s||(s=n("Promise"))).all([this.$1,a]).then(this.$4);else{var i=this.$3;i!=null?i.push(a):this.$3=[a]}},r.waitUntilSatisfied=function(){return this.$1},r.isSatisfied=function(){return this.$2},r.isSatisfiable=function(){return!0},t})(),c=(function(e){function t(t){var r;return r=e.call(this,t)||this,e.prototype.addBlocker.call(r,new(s||(s=n("Promise")))(function(){})),r}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.addBlocker=function(){},r.isSatisfiable=function(){return!1},t})(u);function d(e,t){var r=e.filter(function(e){return!e.isSatisfiable()});if(r.length>0){var o=r.map(function(e){return e.name});return function(e){return t==null||t("unsatisfiable",o,e),r[0].waitUntilSatisfied()}}var a=e.map(function(){return(s||(s=n("Promise"))).resolve()}),i=(s||(s=n("Promise"))).resolve(),l=null,u=function(){if(a.every(function(t,n){return t===e[n].waitUntilSatisfied()})){l=null;return}var t=[],r=e.map(function(e){var n=e.waitUntilSatisfied();return e.isSatisfied()||(t.push(e.name),n.then(function(){var n=t.indexOf(e.name);t.splice(n,1)})),n});return a=r,l=t,(s||(s=n("Promise"))).all(r).then(u)};return function(e){if(l==null){var n=u();n!=null&&(i=i.then(function(){return n}))}return t==null||t(l==null?"satisfied":"unsatisfied",l,e),i}}l.JobRequirement=u,l.UnsatisfiableJobRequirement=c,l.joinRequirements=d}),98);
__d("WAJobPriorityBucket",["WAJobOrchestratorTypes","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e){var t;this.tasks=[],this.pendingTasks=[],this.lastJobStartedTimestampMs=null,this.jobMaxConcurrency=(t=e.jobMaxConcurrencyMap)!=null?t:{}}var n=t.prototype;return n.updateConfig=function(t){var e;this.jobMaxConcurrency=(e=t.jobMaxConcurrencyMap)!=null?e:{}},n.getStats=function(){return[].concat(this.tasks,this.pendingTasks).reduce(function(e,t){var n,r=(n=e[t.jobName])!=null?n:0;return e[t.jobName]=r+1,e},{})},n.next=function(){var e=this;if(this.tasks.length===0)return null;var t=this.pendingTasks.reduce(function(e,t){var n,r=(n=e.get(t.jobName))!=null?n:0;return e.set(t.jobName,r+1),e},new Map),n=this.tasks.filter(function(n){var r,a;return((r=t.get(n.jobName))!=null?r:0)<((a=e.jobMaxConcurrency[n.jobName])!=null?a:o("WAJobOrchestratorTypes").DEFAULT_CONCURRENCY)});return n.length>0?[n[0]]:null},n.add=function(t,n,r,o){var e={jobId:r,jobInfo:n,jobName:t,run:o};return this.tasks.push(e),e},n.markJobTaskPending=function(n){this.pendingTasks.includes(function(e){return e.jobId===n.jobId})&&o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskPending found jobId: "," in pending tasks"])),n.jobId).sendLogs("JobOrchestrator::markJobTaskPending"),this.lastJobStartedTimestampMs=Date.now(),this.pendingTasks.push(n),this.tasks=this.tasks.filter(function(e){return e.jobId!==n.jobId})},n.markJobTaskDone=function(t){this.pendingTasks=this.pendingTasks.filter(function(e){return e.jobId!==t}),this.tasks.includes(function(e){return e.jobId===t})&&o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskDone found jobId: "," in scheduled tasks"])),t).sendLogs("JobOrchestrator::markJobTaskDone")},n.count=function(){return this.tasks.length},n.pendingCount=function(){return this.pendingTasks.length},n.clearWaitingTasks=function(){this.tasks=[]},n.clear=function(){this.tasks=[],this.pendingTasks=[]},n.getLastJobStartedTimestamp=function(){return this.lastJobStartedTimestampMs},t})(),c=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.next=function(){var e=this,t,n;if(this.tasks.length===0)return null;var r=this.pendingTasks.reduce(function(e,t){var n,r=(n=e.get(t.jobName))!=null?n:0;return e.set(t.jobName,r+1),e},new Map),o=this.tasks.filter(function(t){var n,o;return((n=r.get(t.jobName))!=null?n:0)<((o=e.jobMaxConcurrency[t.jobName])!=null?o:1)});if(o.length===0)return null;var a=(t=this.jobMaxConcurrency[o[0].jobName])!=null?t:1,i=(n=r.get(o[0].jobName))!=null?n:0;if(a>1&&i<a){var l=o.filter(function(e){return e.jobName===o[0].jobName}),s=Math.min(l.length,a-i);return l.slice(0,s)}return[o[0]]},t})(u);l.BaseJobBucket=u,l.LowJobBucket=c}),98);
__d("WAMetrics",["Promise","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("WATimeUtils").performanceAbsoluteNow();return new(e||(e=n("Promise")))(function(e){setTimeout(function(){e(o("WATimeUtils").performanceAbsoluteNow()-t)},0)})}l.getEventLoopDelay=s}),98);
__d("WAConcurrentBucketJobQueue",["WABase64","WACryptoDependencies","WACustomError","WAJobOrchestratorTypes","WAJobPriorityBucket","WALogger","WAMetrics","WANullthrows","WAPromiseTimeout","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=30,c=new Map([[o("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH,5],[o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,1]]);function d(e){var t=new Uint8Array(e);return o("WACryptoDependencies").getCrypto().getRandomValues(t),o("WABase64").encodeB64(t)}var m=(function(){function t(){this.$1=!1,this.$2=0,this.$3=0,this.$4=0,this.$5=new Map,this.$6=new Map,this.$7=new Map,this.$9=0}var n=t.prototype;return n.init=function(t,n){var e,a,i,l,s,c;if(this.$1)throw r("err")("WAConcurrentBucketJobQueue has already initialized");this.$4=(e=t==null?void 0:t.bestEffortWaitTimeoutSec)!=null?e:u,this.$2=t.maxConcurrency,this.$3=t.maxConcurrency,this.$8=n,this.$7=this.$11(t==null?void 0:t.jobPrioritiesQuota),this.$6=new Map(this.$7),this.$5=new Map,this.$9=Date.now();var d=new(o("WAJobPriorityBucket")).BaseJobBucket({jobMaxConcurrencyMap:(a=t.maxConcurrencyPerJob)!=null?a:{}}),m=new(o("WAJobPriorityBucket")).LowJobBucket({jobMaxConcurrencyMap:(i=t.maxConcurrencyPerJob)!=null?i:{}}),p=new(o("WAJobPriorityBucket")).LowJobBucket({jobMaxConcurrencyMap:(l=t.maxConcurrencyPerJob)!=null?l:{}}),_=new(o("WAJobPriorityBucket")).BaseJobBucket({jobMaxConcurrencyMap:(s=t.maxConcurrencyPerJob)!=null?s:{}}),f=new(o("WAJobPriorityBucket")).BaseJobBucket({jobMaxConcurrencyMap:(c=t.maxConcurrencyPerJob)!=null?c:{}});this.$5.set(o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION,d),this.$5.set(o("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH,d),this.$5.set(o("WAJobOrchestratorTypes").JOB_PRIORITY.OFFLINE,_),this.$5.set(o("WAJobOrchestratorTypes").JOB_PRIORITY.HISTORY_SYNC,f),this.$5.set(o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,m),this.$5.set(o("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,p),this.$1=!0},n.updateConfig=function(n){this.$3+=n.maxConcurrency-this.$2,this.$2=n.maxConcurrency,this.$5.forEach(function(e){var t;return e.updateConfig({jobMaxConcurrencyMap:(t=n.maxConcurrencyPerJob)!=null?t:{}})}),this.$7=this.$11(n==null?void 0:n.jobPrioritiesQuota),o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: updated WAConcurrentBucketJobQueue config"])))},n.isInitialized=function(){return this.$1},n.clearQueue=function(){if(!this.$1)throw r("err")("WAConcurrentBucketJobQueue not initialized");this.$5.forEach(function(e){return e.clear()})},n.clearQueueByPriority=function(t){var e;if(!this.$1)throw r("err")("WAConcurrentBucketJobQueue not initialized");(e=this.$5.get(t))==null||e.clearWaitingTasks()},n.getIntStats=function(){var e=this,t=function(n){var t,r,o=e.$5.get(n);return((t=o==null?void 0:o.count())!=null?t:0)+((r=o==null?void 0:o.pendingCount())!=null?r:0)};return{highPriorityBucketSize:t(o("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH),lowPriorityBucketSize:t(o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW),bestEffortPriorityBucketSize:t(o("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT)}},n.getStringStats=function(){var e=this,t=function(n){var t,r,o=(t=(r=e.$5.get(n))==null?void 0:r.getStats())!=null?t:{},a=Object.keys(o).reduce(function(e,t){var n=e[0],r=e[1],a=o[t];return a>n?[a,t]:[n,r]},[0,null]),i=a[1];return i};return{highPriorityMaxJob:t(o("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH),lowPriorityMaxJob:t(o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW),bestEffortPriorityMaxJob:t(o("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT)}},n.enqueue=function(t,n,a,i){var e,l,s=this;if(!this.$1)return Promise.reject(r("err")("WAConcurrentBucketJobQueue not initialized"));var u,c,m=new Promise(function(e,t){u=e,c=t}),p=babelHelpers.extends({priority:o("WAJobOrchestratorTypes").DEFAULT_JOB_PRIORITY},a),_=this.getJobBucketByType(p.priority);if(!_)return Promise.reject(r("err")("WAConcurrentBucketJobQueue no bucket for job with name "+t+" was found."));o("WAMetrics").getEventLoopDelay().then(function(e){i!=null&&i.isActive()&&(i==null||i.addPoint("measure_event_loop_delay",{int:{eventLoopDelay:e}}))}),i==null||i.addPoint("scheduling_job",{string:babelHelpers.extends({},this.getStringStats(),{priority:p.priority}),int:babelHelpers.extends({},this.getIntStats(),{maxTimeoutMs:(e=a==null?void 0:a.maxTimeoutMs)!=null?e:0})});var f=p.priority+"-"+t+"-"+((l=a==null?void 0:a.jobId)!=null?l:d(8)),g=_.add(t,p,f,async function(){try{s.$8.logJobStarted(f);var e=await s.$12(n(),a==null?void 0:a.maxTimeoutMs);s.$8.logJobCompleted(f),u(e)}catch(e){e instanceof o("WACustomError").TimeoutError?s.$8.logJobTimeout(f):s.$8.logJobError(f),c(e)}});return this.$8.logJobCreated({jobId:f,jobName:t,jobPriority:p.priority,pendingJobsCount:_.count()}),a&&a.priority===o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION&&this.$13(g),this.$14(),m},n.getAvailableThreadsCount=function(){return this.$3},n.getJobQuotaConfig=function(){return this.$7},n.getRemainingJobCountMap=function(){return this.$6},n.getJobBucketByType=function(t){return this.$5.get(t)},n.getSnapshot=function(t){var e=this.getJobBucketByType(t);return e?e.getStats():null},n.$11=function(t){var e;return t?e=new Map(t):e=new Map(c),e.set(o("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT,0),e},n.$15=function(t){var e;return(e=this.$6.get(t))!=null?e:0},n.$16=function(){this.$6=new Map(this.$7)},n.$17=function(t){var e=this;t===void 0&&(t=!0);var n=0,r=null,a=0;this.$5.forEach(function(t,o){n+=t==null?void 0:t.count(),a+=e.$15(o),r==null&&t.count()>0&&e.$15(o)>0&&(r=t)});var i=r==null||a===0;return i&&this.$16(),this.$18(n,i)?this.getJobBucketByType(o("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT):r==null&&t?this.$17(!1):r},n.$18=function(t,n){var e,r=this;function a(e,t){var n=Date.now();return e>n?!1:n-e<t*1e3}function i(e,t){var n=Math.ceil(e-Date.now())+t*1e3;return n>0?n:0}var l=this.getJobBucketByType(o("WAJobOrchestratorTypes").JOB_PRIORITY.BEST_EFFORT),s=t-((e=l==null?void 0:l.count())!=null?e:0),u=l==null?void 0:l.getLastJobStartedTimestamp();if((l==null?void 0:l.count())===0)return!1;if(u==null&&a(this.$9,this.$4)){if(this.$10==null){var c=i(this.$9,this.$4);this.$10=setTimeout(function(){r.$14(),r.$10=null},c)}return!1}return s>0&&u!=null&&a(u,this.$4)?!1:n},n.$19=function(t){var e=this.$20(t);return r("WANullthrows")(this.$5.get(e))},n.$20=function(t){var e=t.split("-")[0],n=o("WAJobOrchestratorTypes").JOB_PRIORITY.cast(e);if(!n)throw r("err")("ConcurrentBucketQueue cannot extract known job priority type from id: "+t);return n},n.$21=function(t){var e=this.$20(t);this.$15(e)>0?this.$6.set(e,this.$15(e)-1):this.$6.set(e,0)},n.$14=function(){for(var e=this;this.$3>0;){var t=this.$17(),n=t==null?void 0:t.next();if(n==null)break;n.forEach(function(t){e.$21(t.jobId),e.$13(t)})}},n.$12=function(t,n){return n!==void 0?o("WAPromiseTimeout").promiseTimeout(t,n):t},n.$13=async function(t){var e=this,n=this.$19(t.jobId);this.$3--,n.markJobTaskPending(t);var r=t.run,a=t.jobId,i=t.jobName;try{var l;await this.$12(r(),((l=t.jobInfo)==null?void 0:l.maxTimeoutMs)===void 0?o("WAJobOrchestratorTypes").DEFAULT_JOB_TIMEOUT_MS:void 0)}catch(e){if(e instanceof o("WACustomError").TimeoutError)this.$8.logJobTimeout(a),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: "," exceeding the timeout, release the thread."])),i);else throw e}finally{this.$3++,n.markJobTaskDone(a),this.$3>0&&setTimeout(function(){return e.$14()},0)}},t})();l.WAConcurrentBucketJobQueue=m}),98);
__d("WAConcurrentPreemptiveJobQueue",["WACustomError","WAJobOrchestratorTypes","WALogger","WAPromiseTimeout","WARandomHex","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(function(){function t(){this.$1=!1,this.$2=0,this.$3=0,this.$4={},this.$5=[],this.$6=[]}var n=t.prototype;return n.init=function(t,n){var e;if(this.$1)throw r("err")("ConcurrentPreemptiveJobQueue has already initialized");this.$2=t.maxConcurrency,this.$3=t.maxConcurrency,this.$4=(e=t.maxConcurrencyPerJob)!=null?e:{},this.$7=n,this.$1=!0},n.updateConfig=function(n){var t;this.$3+=n.maxConcurrency-this.$2,this.$2=n.maxConcurrency,this.$4=(t=n.maxConcurrencyPerJob)!=null?t:{},o("WALogger").LOG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: updated ConcurrentPreemptiveJobQueue config"])))},n.isInitialized=function(){return this.$1},n.clearQueueByPriority=function(t){if(!this.$1)throw r("err")("ConcurrentPreemptiveJobQueue not initialized");this.$5=this.$5.filter(function(e){var n;return((n=e.jobInfo)==null?void 0:n.priority)!==t})},n.clearQueue=function(){if(!this.$1)throw r("err")("ConcurrentPreemptiveJobQueue not initialized");this.$5=[],this.$6=[]},n.enqueue=function(t,n,a){var e,i=this;if(!this.$1)return Promise.reject(r("err")("ConcurrentPreemptiveJobQueue not initialized"));var l,s,u=new Promise(function(e,t){l=e,s=t}),c=babelHelpers.extends({priority:o("WAJobOrchestratorTypes").DEFAULT_JOB_PRIORITY},a),d=(e=a==null?void 0:a.jobId)!=null?e:o("WARandomHex").randomHex(8).substr(0,64),m=this.$8(t,c,d,async function(){try{i.$7.logJobStarted(d);var e=await i.$9(n(),a==null?void 0:a.maxTimeoutMs);i.$7.logJobCompleted(d),l(e)}catch(e){e instanceof o("WACustomError").TimeoutError?i.$7.logJobTimeout(d):i.$7.logJobError(d),s(e)}});return a&&a.priority===o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION&&this.$10(m),this.$11(),u},n.getAvailableThreadsCount=function(){return this.$3},n.getJobMaxConcurrency=function(){return this.$4},n.getSnapshot=function(t){},n.$11=function(){for(;this.$3>0;){var e=this.$12();if(e==null)break;this.$10(e)}},n.$9=function(t,n){return n!==void 0?o("WAPromiseTimeout").promiseTimeout(t,n):t},n.$10=async function(t){var e=this;this.$3--,this.$13(t);var n=t.run,r=t.jobId,a=t.jobName;try{var i;await this.$9(n(),((i=t.jobInfo)==null?void 0:i.maxTimeoutMs)===void 0?o("WAJobOrchestratorTypes").DEFAULT_JOB_TIMEOUT_MS:void 0)}catch(e){if(e instanceof o("WACustomError").TimeoutError)this.$7.logJobTimeout(r),o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[job-orchestator]: "," exceeding the timeout, release the thread."])),a);else throw e}finally{this.$3++,this.$14(r),setTimeout(function(){return e.$11()},0)}},n.$8=function(t,n,r,o){var e={jobId:r,jobInfo:n,jobName:t,run:o};return this.$7.logJobCreated({jobId:r,jobName:t,jobPriority:n.priority,pendingJobsCount:this.$5.length}),this.$5.push(e),e},n.$13=function(t){this.$6.includes(function(e){return e.jobId===t.jobId})&&o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskPending found jobId: "," in pending tasks"])),t.jobId).sendLogs("JobOrchestrator::markJobTaskPending"),this.$6.push(t),this.$5=this.$5.filter(function(e){return e.jobId!==t.jobId})},n.$14=function(t){this.$6=this.$6.filter(function(e){return e.jobId!==t}),this.$5.includes(function(e){return e.jobId===t})&&o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Assertion failed::markJobTaskDone found jobId: "," in scheduled tasks"])),t).sendLogs("JobOrchestrator::markJobTaskDone")},n.$12=function(){var e=this;if(this.$5.length===0)return null;var t=this.$6.reduce(function(e,t){var n,r=(n=e.get(t.jobName))!=null?n:0;return e.set(t.jobName,r+1),e},new Map),n=this.$5.filter(function(n){var r,o;return((r=t.get(n.jobName))!=null?r:0)<((o=e.$4[n.jobName])!=null?o:1)});return n[0]},t})();l.WAConcurrentPreemptiveJobQueue=d}),98);
__d("WADefaultJobNoQueue",["WAJobOrchestratorTypes","WARandomHex","err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$2=!1}var t=e.prototype;return t.init=function(t,n){if(this.$2)throw r("err")("DefaultNoQueue has already initialized");this.$1=n,this.$2=!0},t.updateConfig=function(t){},t.isInitialized=function(){return this.$2},t.clearQueue=function(){},t.clearQueueByPriority=function(t){},t.getSnapshot=function(){throw r("err")("getSnapshot is not implemented for DefaultNoQueue")},t.enqueue=async function(t,n,r){var e,a,i=(e=r==null?void 0:r.jobId)!=null?e:o("WARandomHex").randomHex(8).substr(0,64);this.$1.logJobCreated({jobId:i,jobName:t,jobPriority:(a=r==null?void 0:r.priority)!=null?a:o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,pendingJobsCount:0});try{this.$1.logJobStarted(i);var l=await n();return this.$1.logJobCompleted(i),l}catch(e){throw this.$1.logJobError(i),e}},e})();l.WADefaultJobNoQueue=e}),98);
__d("WAOrchestratorJobStatsLogger",["WAGlobals","WAPREList","WAPREMetrics"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.jobName=e,this.pendingJobsCount=n,this.jobPriority=t}var t=e.prototype;return t.logJobAdded=function(){this.webcJobAddedT=Date.now(),this.eventFlow=o("WAPREMetrics").startMetric(o("WAPREList").PRE_METRIC.WA_JOBS_ORCHESTRATOR,{string:{name:this.jobName,jobPriority:this.jobPriority,orchestratorVersion:o("WAGlobals").getConfig().orchestratorVersion()},int:{pendingJobsCount:this.pendingJobsCount,addedAt:this.webcJobAddedT}})},t.logJobStarted=function(){this.webcJobStartedT=Date.now(),this.eventFlow.addPoint("start_job",{int:{startedAt:this.webcJobStartedT}})},t.logJobCompleted=function(t){this.webcJobCompletedT=Date.now(),this.jobResultType=t;var e={int:{pendingJobsCount:this.pendingJobsCount,completedAt:this.webcJobCompletedT}};t==="completed"?this.eventFlow.endSuccess(e):this.eventFlow.endFail(t,e)},e})(),s=(function(){function t(){this.$1=new Map}var n=t.prototype;return n.logJobCreated=function(n){var t=n.jobName,r=n.jobId,o=n.jobPriority,a=n.pendingJobsCount,i=new e(t,o,a);i.logJobAdded(),this.$1.set(r,i)},n.logJobStarted=function(t){var e=this.$1.get(t);e==null||e.logJobStarted()},n.logJobCompleted=function(t){this.$2(t,"completed")},n.logJobError=function(t){this.$2(t,"error")},n.logJobTimeout=function(t){this.$2(t,"timeout")},n.logJobAborted=function(t){this.$2(t,"aborted")},n.$2=function(t,n){var e=this.$1.get(t);e==null||e.logJobCompleted(n),this.$1.delete(t)},t})();l.JobInfoEvent=e,l.JobStatsLogger=s}),98);
__d("WAOrchestrator",["WAConcurrentBucketJobQueue","WAConcurrentPreemptiveJobQueue","WADefaultJobNoQueue","WAGlobals","WAJobOrchestratorTypes","WAOrchestratorJobStatsLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e={maxConcurrency:1},t="default",n={},r=e,a=new(o("WAOrchestratorJobStatsLogger")).JobStatsLogger;return function(i,l){var c,d,m,p,_;i===void 0&&(i=!1);var f=i?t:o("WAGlobals").getConfig().orchestratorVersion(),g=(c=u())!=null?c:e,h;if(l==null||l.addPoint("get_orchestrator",{string:{orchestrator:f},int:{maxConcurrency:g.maxConcurrency,highPriorityQuota:(d=(m=g.jobPrioritiesQuota)==null?void 0:m.get(o("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH))!=null?d:0,lowPriorityQuota:(p=(_=g.jobPrioritiesQuota)==null?void 0:_.get(o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW))!=null?p:0}}),n[f])return s(r,g)&&(r=g,n[f].updateConfig(g)),n[f];switch(f){case"preemptive":{h=new(o("WAConcurrentPreemptiveJobQueue")).WAConcurrentPreemptiveJobQueue;break}case"bucket":{h=new(o("WAConcurrentBucketJobQueue")).WAConcurrentBucketJobQueue;break}default:h=new(o("WADefaultJobNoQueue")).WADefaultJobNoQueue;break}return h.init(g,a),n[f]=h,r=g,h}}function s(e,t){var n,r,o,a;return e.maxConcurrency!==t.maxConcurrency||((n=e.jobPrioritiesQuota)==null?void 0:n.size)!==((r=t.jobPrioritiesQuota)==null?void 0:r.size)||Object.keys((o=e.maxConcurrencyPerJob)!=null?o:{}).length!==Object.keys((a=t.maxConcurrencyPerJob)!=null?a:{}).length?!0:JSON.stringify(e)!==JSON.stringify(t)}function u(){var e={jobPrioritiesQuota:new Map([[o("WAJobOrchestratorTypes").JOB_PRIORITY.HIGH,5],[o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW,1]]),maxConcurrency:5,maxConcurrencyPerJob:{}};return e}l.getInstanceDelegate=e}),98);
__d("WAPersistedJobManager",["WAJobRequirement","WALogger","WAPromiseBackoffs","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A=1,F=(function(){function e(e){this.feature=e}var t=e.prototype;return t.toString=function(){return"RequiresPage: "+this.feature},e})(),O=(function(){function e(e){this.backoffOptions=e}var t=e.prototype;return t.toString=function(){return"RetryOnBackoff"},e})(),B=(function(e){function t(){return e.apply(this,arguments)||this}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.toString=function(){return"NonRetryableError"},t})(babelHelpers.wrapNativeSuper(Error)),W=function(t){this.result=t},q="$unstarted",U="$finished",V=(function(){function t(t){var n=this,r=t.isRestartAfterCrash,a=t.accessors,i=t.unfinishedJobEntries,l=new Map,u=i.then(function(t){var i=[],u=[];return t.forEach(function(e){e.stepHardStartCountAfterTimeout>=5?i.push(e):u.push(e)}),Promise.all(i.map(function(t){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",": stuck on the step ",", aborting the job"])),G(t),t.step).devConsole(H(t)).sendLogs("job-stuck-"+t.type),a.deletePersistedJob(t.jobId)})).then(function(){u.forEach(function(e){l.has(e.jobId)||(o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["",": restarting"])),H(e)),l.set(e.jobId,n.$1(e,r)))})})});this.implementationLoaders=new Map,this.implementations=new Map,this.stepBlockers=new WeakMap,this.accessors=a,this.activeJobs=l,this.initialJobsPromise=u,this.listeners=t.listeners,this.deprecatedJobs=t.deprecatedJobs}var n=t.prototype;return n.loadAndRunJobFromId=function(t){var e=this.activeJobs.get(t);if(e!=null)return e;var n=this.$2(t);return this.activeJobs.set(t,n),n},n.$2=async function(t){var e=this.initialJobsPromise,n=this.accessors;await e;var r=await n.readPersistedJob(t);return r?this.$1(r,!1):(o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["No entry for job ",""])),t),o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Persisted job missing for given ID"]))),null)},n.$3=function(t){var e=this.implementations,n=this.implementationLoaders,r=e.get(t);if(r)return r;var o=n.get(t);if(!o)return null;var a=o();return e.set(t,a),a},n.$4=function(t,n){if(n==null||n.length===0)return Promise.resolve();var e=this.stepBlockers,r=e.get(n);return r==null&&(r=o("WAJobRequirement").joinRequirements(n.map(function(e){return e()}),j),e.set(n,r)),r(t)},n.$5=function(t,n,r,a){var e=this;r===void 0&&(r=!1);var i=t.step,l=n.findIndex(function(e){return e.stepName===i}),s=n[l].info(t.current,t.original,K(t,r)),u=s.requirements,c=s.code,p=this.$4(t,u);return a&&(p=p.then(a)),p.then(function(){return o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["",": running step"])),z(t)),c(t.current,t.original,K(t,r))}).then(function(a){if(a instanceof W)return o("WALogger").LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["",": InterruptJob"])),z(t)),a.result;var i=l+1;if(i>=n.length)return a;var s=n[i];return t.step=s.stepName,t.current=a,t.stepHardStartCountAfterTimeout=0,t.stepFirstStartTime=o("WATimeUtils").unixTime(),t.stepUnexpectedErrorCount=0,t.waitUntil=null,t.backedOffCount=0,e.accessors.updatePersistedJob(t).then(function(){return e.$5(t,n,r)})})},n.$1=async function(t,n){var e,r=this,a=this.accessors,i=this.activeJobs,l=this.deprecatedJobs,s=this.listeners,u=s.onJobFinished,c=s.onJobStarted,d=await this.$3(t.type),m=l[t.type];if(!d){if(m){if(m==="NOOP")return o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["No implementation for deprecated ",", job deleted"])),t.type),await a.deletePersistedJob(t.jobId),null}else return o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",". Maybe it should have been put to the deprecated list?"])),t.type).sendLogs("missing-job-implementation"),await a.deletePersistedJob(t.jobId),null;d=await m()}var x=d;m&&o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Running deprecated job ",""])),t.type);var $=(e=t.stepFirstStartTime)!=null?e:o("WATimeUtils").unixTime();if(t.stepFirstStartTime=$,t.stepUnexpectedErrorCount=t.stepUnexpectedErrorCount||0,t.backedOffCount=t.backedOffCount||0,t.step===U){var P=t.waitUntil,N=o("WATimeUtils").secondsUntil($);return P!=null&&o("WATimeUtils").isInFuture(P)&&N>0&&(o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["",": skew detected, adjusting accordingly"])),H(t)),P=o("WATimeUtils").castToUnixTime(P-N),o("WATimeUtils").isInFuture(P)&&(t.stepFirstStartTime=o("WATimeUtils").castToUnixTime($-N),t.waitUntil=P,await this.accessors.updatePersistedJob(t))),(P==null||!o("WATimeUtils").isInFuture(P))&&(o("WALogger").LOG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["",": removing completed, expired job from db"])),H(t)),await a.deletePersistedJob(t.jobId)),i.delete(t.jobId),t.current}var M=t.step!==q?d.find(function(e){return e.stepName===t.step}):d[0];if(!M)return o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",".",""])),t.type,t.step).sendLogs("missing-job-step"),await a.deletePersistedJob(t.jobId),null;t.step=M.stepName;var w=function(){var e=t.waitUntil,a=Promise.resolve();if(e!=null){var i=o("WATimeUtils").futureUnixTime(o("WATimeUtils").DAY_SECONDS);e>i?(o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["",": trim wait from "," to ",""])),z(t),e,i),t.waitUntil=i,a=r.accessors.updatePersistedJob(t).then(function(){return o("WATimeUtils").delayUntil(i)})):(o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["",": delaying until ",""])),z(t),e),a=o("WATimeUtils").delayUntil(e))}return a.then(function(){var e=function(){return t.waitUntil=null,o("WATimeUtils").happenedWithin($,o("WATimeUtils").DAY_SECONDS)||t.stepHardStartCountAfterTimeout++,r.accessors.updatePersistedJob(t)};return r.$5(t,x,n,e).catch(function(e){if(e instanceof F)return o("WALogger").LOG(v||(v=babelHelpers.taggedTemplateLiteralLoose(["",": requires page"])),z(t)),t.stepHardStartCountAfterTimeout>0&&(--t.stepHardStartCountAfterTimeout,r.accessors.updatePersistedJob(t)),new Promise(function(){});if(e instanceof O){o("WALogger").LOG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["",": RetryOnBackoff"])),z(t));var n=o("WAPromiseBackoffs").getDelay(++t.backedOffCount,e.backoffOptions);return t.waitUntil=o("WATimeUtils").futureUnixTime(Math.ceil(n/1e3)),t.stepHardStartCountAfterTimeout>0&&--t.stepHardStartCountAfterTimeout,r.accessors.updatePersistedJob(t).then(w)}else if(t.stepUnexpectedErrorCount<A)return o("WALogger").WARN(R||(R=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception. Tried "," times"])),z(t),t.stepUnexpectedErrorCount),o("WALogger").WARN(L||(L=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception: ",""])),z(t),e),t.stepUnexpectedErrorCount++,r.accessors.updatePersistedJob(t).then(w);throw e})})},B=w(),W=B.then(async function(e){o("WALogger").LOG(E||(E=babelHelpers.taggedTemplateLiteralLoose(["",": finished job"])),z(t));var n=null;try{n=u(t.jobId,t.type,t.original,e)}catch(e){o("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["onJobFinished for "," threw exception ",""])),t.type,e).sendLogs("onJobFinished-threw")}n!=null&&n>0?(t.waitUntil=o("WATimeUtils").futureUnixTime(Math.ceil(n/1e3)),t.step=U,t.current=e,t.stepFirstStartTime=o("WATimeUtils").unixTime(),await r.accessors.updatePersistedJob(t)):(await a.deletePersistedJob(t.jobId),i.delete(t.jobId))},async function(e){o("WALogger").ERROR(I||(I=babelHelpers.taggedTemplateLiteralLoose([""," failed with error ",""])),t.type,e).sendLogs("job-threw-exception-"+t.type);var r=x.find(function(e){return e.stepName===t.step});if(!r)o("WALogger").ERROR(T||(T=babelHelpers.taggedTemplateLiteralLoose(["",": "," step not found"])),t.type,t.step);else{var l=r.info(t.current,t.original,K(t,n));l.stopRetryIf!=null&&await l.stopRetryIf.onStopRetry(t.current,t.original,K(t,n))}await a.deletePersistedJob(t.jobId),i.delete(t.jobId)});try{c(t.jobId,t.type,t.original)}catch(e){o("WALogger").ERROR(D||(D=babelHelpers.taggedTemplateLiteralLoose(["onJobStarted for "," threw exception ",""])),t.type,e).sendLogs("onJobStarted-threw")}return W.then(function(){return B})},n.addPersistedJobImplementation=function(t,n){var e=this.implementationLoaders,r=this.deprecatedJobs;if(e.has(t)){o("WALogger").ERROR(x||(x=babelHelpers.taggedTemplateLiteralLoose(["addPersistedJobImplementation called twice for ",""])),t).sendLogs("repeat-job-loader");return}r&&r[t]&&o("WALogger").DEV($||($=babelHelpers.taggedTemplateLiteralLoose([""," has been loaded and is marked as deprecated"])),t),e.set(t,n)},n.fireAndForget=function(t){var e=this;this.accessors.maybeCreateJob(t).then(function(t){var n=t.id;return e.loadAndRunJobFromId(n)})},n.waitUntilPersisted=function(t){var e=this;return this.accessors.maybeCreateJob(t).then(function(t){var n=t.id;e.loadAndRunJobFromId(n)})},n.waitUntilCompleted=function(t){var e=this;return this.accessors.maybeCreateJob(t).then(function(t){var n=t.id;return e.loadAndRunJobFromId(n)})},n.fireAndForgetNonPersisted=function(t){o("WALogger").LOG(P||(P=babelHelpers.taggedTemplateLiteralLoose(["fireAndForgetNonPersisted not implemented in PersistedJobManager"])))},n.waitUntilCompletedNonPersisted=function(t){return Promise.resolve(function(){return o("WALogger").LOG(N||(N=babelHelpers.taggedTemplateLiteralLoose(["waitUntilCompletedNonPersisted not implemented in PersistedJobManager"])))})},t})();function H(e){return"Job["+e.jobId+"] ("+e.type+")"}function G(e){return"[Job "+e.type+"] "}function z(e){return"Job["+e.jobId+"] ("+e.type+"."+e.step+")"}function j(e,t,n){e==="unsatisfiable"?o("WALogger").LOG(M||(M=babelHelpers.taggedTemplateLiteralLoose([""," halting because of ",""])),z(n),t):e==="unsatisfied"&&o("WALogger").LOG(w||(w=babelHelpers.taggedTemplateLiteralLoose([""," waiting on ",""])),z(n),t)}function K(e,t){return t===void 0&&(t=!1),{jobStartTime:e.startTime,afterCrash:t,interruptJob:Q}}function Q(e){return new W(e)}l.RequiresPage=F,l.RetryOnBackoff=O,l.NonRetryableError=B,l.InterruptJob=W,l.UNSTARTED_JOB=q,l.FINISHED_JOB=U,l.PersistedJobManager=V}),98);
__d("WaJobInMemoryAccessors",["Promise","WARandomHex","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=-1,r=new Map;return{deletePersistedJob:function(o){return(e||(e=n("Promise"))).resolve(r.delete(o))},loadAllJobs:function(){return(e||(e=n("Promise"))).resolve(Array.from(r.values()))},maybeCreateJob:function(i){var a,l=JSON.stringify([i.type,(a=i.uniqKey)!=null?a:o("WARandomHex").randomHex(32)]),s={backedOffCount:0,current:i.args,original:i.args,startTime:o("WATimeUtils").unixTime(),step:"$unstarted",stepFirstStartTime:null,stepHardStartCountAfterTimeout:0,stepUnexpectedErrorCount:0,type:i.type,uniqKey:l,version:i.version,waitUntil:null,scheduleConfig:i.scheduleConfig},u=function(){var o=t--,a=babelHelpers.extends({},s,{jobId:o});return r.set(o,a),(e||(e=n("Promise"))).resolve({id:o,newlyCreated:!0})};if(i.uniqKey!=null){var c=Array.from(r.values()).filter(function(e){return e.uniqKey===l});if(c.length===0)return u();var d=null;return c.forEach(function(e){e.step!=="$finished"?d=e:r.delete(e.jobId)}),d!=null?(e||(e=n("Promise"))).resolve({id:d.jobId,newlyCreated:!1}):u()}return u()},readPersistedJob:function(o){var t=r.get(o);return(e||(e=n("Promise"))).resolve(t&&babelHelpers.extends({},t))},updatePersistedJob:function(o){return(e||(e=n("Promise"))).resolve(r.set(o.jobId,babelHelpers.extends({},o)))}}}l.getJobInMemoryAccessors=s}),98);
__d("WAPersistedJobManagerV2",["WAGlobals","WAJids","WAJobOrchestratorTypes","WAJobRequirement","WALogger","WAOrchestrator","WAPREList","WAPREMetrics","WAPersistedJobManager","WAPromiseBackoffs","WAResolvable","WATimeUtils","WaJobInMemoryAccessors","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A,F,O=1;function B(e){var t=e.code,n=e.annotations,r=n===void 0?{}:n,o=e.eventFlow,a=o===void 0?W(r):o;return t(a).then(function(e){return a.endSuccess(),e}).catch(function(e){throw a.endFail("error",{string:{error:""+e}}),e})}function W(e){var t,n;return e===void 0&&(e={}),o("WAPREMetrics").startMetric(o("WAPREList").PRE_METRIC.WA_JOB_MANAGER,babelHelpers.extends({},e,{string:babelHelpers.extends({},(t=(n=e)==null?void 0:n.string)!=null?t:{},{userHash:o("WAGlobals").getDependencies().isEmployee()&&o("WAGlobals").getDependencies().isUseridAnnotationEnabled()?o("WAJids").extractUserId(o("WAGlobals").getMyUserJid()).slice(-5):null})}))}var q=(function(){function t(t){var n=this;this.$1=[];var r=t.isRestartAfterCrash,a=t.accessors,i=t.unfinishedJobEntries,l=t.ignoreForceNonPersistedJobList;this.getOrchestratorDelegate=o("WAOrchestrator").getInstanceDelegate(),this.activeJobs=new Map,this.implementationLoaders=new Map,this.implementations=new Map,this.stepBlockers=new WeakMap,this.accessors=a,this.isRestartAfterCrash=r||!1,this.listeners=t.listeners,this.deprecatedJobs=t.deprecatedJobs,this.inMemoryAccessors=o("WaJobInMemoryAccessors").getJobInMemoryAccessors(),this.offlineQueueMode=!0,this.$1=l,t.offlineQueueCompletePromise!=null?t.offlineQueueCompletePromise.finally(function(){n.offlineQueueMode=!1}):this.offlineQueueMode=!1,this.initialJobsPromise=i.then(function(t){var r=[],a=[];return t.forEach(function(e){e.stepHardStartCountAfterTimeout>=5?r.push(e):a.push(e)}),Promise.all(r.map(function(t){return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["",": stuck on the step ",", aborting the job"])),V(t),t.step).devConsole(U(t)).sendLogs("job-stuck-"+t.type),n.accessors.deletePersistedJob(t.jobId)})).then(function(){a.forEach(function(e){var t=n.$2(e.jobId);if(t.alreadyActive===!0){o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[JOB MANAGER] Restarting job with the same id"])));return}t.deferred.resolve(B({code:function(r){return n.$3(e,n.accessors,{eventFlow:r})},annotations:{string:{name:e.type},bool:{offlineQueueMode:n.offlineQueueMode}}}))})})})}var n=t.prototype;return n.$4=async function(t,n,a){var e;a===void 0&&(a={});var i=this.$2(t);if((e=a.eventFlow)==null||e.addPoint("start_load_and_run",{bool:{skipped:i.alreadyActive}}),i.alreadyActive===!0)return i.deferred;var l=await n.readPersistedJob(t);if(l==null)throw o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Persisted job missing for given ID"]))).sendLogs("missing-job-entry"),r("err")("Persisted job missing for given ID "+t);return i.deferred.resolve(this.$3(l,n,a)),i.deferred.promise},n.$3=function(t,n,r){var e,a;return r===void 0&&(r={}),(e=r.eventFlow)==null||e.addPoint("enqueueing_job",{string:{name:t.type}}),this.getOrchestratorDelegate(((a=t.scheduleConfig)==null?void 0:a.priority)===o("WAJobOrchestratorTypes").JOB_PRIORITY.SKIP,r.eventFlow).enqueue(t.type,this.$5(t,n,r),t.scheduleConfig,r.eventFlow)},n.$6=function(t,n,r){var e=this;return r===void 0&&(r={}),n.maybeCreateJob(t).then(function(t){var o,a=t.id;return(o=r.eventFlow)==null||o.addPoint("job_persisted",{int:{jobId:a},bool:{nonPersisted:n===e.inMemoryAccessors}}),a})},n.$2=function(t){var e=this.activeJobs.get(t);if(e!=null)return{alreadyActive:!0,deferred:e};var n=new(o("WAResolvable")).Resolvable;return this.activeJobs.set(t,n.promise),{alreadyActive:!1,deferred:n}},n.$5=function(t,n,r){var e=this;return function(){return e.$7(t,n,r)}},n.$8=function(t){var e=this.implementations,n=this.implementationLoaders,r=e.get(t);if(r)return r;var o=n.get(t);if(!o)return null;var a=o();return e.set(t,a),a},n.$9=function(t,n){if(n==null||n.length===0)return Promise.resolve();var e=this.stepBlockers,r=e.get(n);return r==null&&(r=o("WAJobRequirement").joinRequirements(n.map(function(e){return e()}),G),e.set(n,r)),r(t)},n.$10=function(t,n,r,a,i){var e,l=this;i===void 0&&(i={});var s=t.step;(e=i.eventFlow)==null||e.addPoint("start_step");var u=n.findIndex(function(e){return e.stepName===s}),m=n[u].info(t.current,t.original,z(t,this.isRestartAfterCrash)),p=m.requirements,_=m.code,f=this.$9(t,p);return a&&(f=f.then(a)),f.then(function(){var e;return o("WALogger").LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["",": running step"])),H(t)),(e=i.eventFlow)==null||e.addPoint("run_step"),_(t.current,t.original,z(t,l.isRestartAfterCrash,i.eventFlow))}).then(function(e){var a;if((a=i.eventFlow)==null||a.addPoint("step_is_complete"),e instanceof o("WAPersistedJobManager").InterruptJob)return o("WALogger").LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["",": InterruptJob"])),H(t)),e.result;var s=u+1;if(s>=n.length)return e;var c=n[s];return t.step=c.stepName,t.current=e,t.stepHardStartCountAfterTimeout=0,t.stepFirstStartTime=o("WATimeUtils").unixTime(),t.stepUnexpectedErrorCount=0,t.waitUntil=null,t.backedOffCount=0,r.updatePersistedJob(t).then(function(){return l.$10(t,n,r,void 0,i)})})},n.$7=async function(t,n,r){var e,a,i=this;r===void 0&&(r={});var l=this.activeJobs,s=this.deprecatedJobs,u=this.listeners,c=u.onJobFinished,d=u.onJobStarted;(e=r.eventFlow)==null||e.addPoint("run_job");var T=await this.$8(t.type),D=s[t.type];if(!T){if(D){if(D==="NOOP")return o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["No implementation for deprecated ",", job deleted"])),t.type),await n.deletePersistedJob(t.jobId),null}else return o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",". Maybe it should have been put to the deprecated list?"])),t.type).sendLogs("missing-job-implementation"),await n.deletePersistedJob(t.jobId),null;T=await D()}var x=T;D&&o("WALogger").LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Running deprecated job ",""])),t.type);var $=(a=t.stepFirstStartTime)!=null?a:o("WATimeUtils").unixTime();if(t.stepFirstStartTime=$,t.stepUnexpectedErrorCount=t.stepUnexpectedErrorCount||0,t.backedOffCount=t.backedOffCount||0,t.step===o("WAPersistedJobManager").FINISHED_JOB){var P=t.waitUntil,N=o("WATimeUtils").secondsUntil($);return P!=null&&o("WATimeUtils").isInFuture(P)&&N>0&&(o("WALogger").LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["",": skew detected, adjusting accordingly"])),U(t)),P=o("WATimeUtils").castToUnixTime(P-N),o("WATimeUtils").isInFuture(P)&&(t.stepFirstStartTime=o("WATimeUtils").castToUnixTime($-N),t.waitUntil=P,await n.updatePersistedJob(t))),(P==null||!o("WATimeUtils").isInFuture(P))&&(o("WALogger").LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["",": removing completed, expired job from db"])),U(t)),await n.deletePersistedJob(t.jobId)),l.delete(t.jobId),t.current}var M=t.step!==o("WAPersistedJobManager").UNSTARTED_JOB?T.find(function(e){return e.stepName===t.step}):T[0];if(!M)return o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["No implementation for ",".",""])),t.type,t.step).sendLogs("missing-job-step"),await n.deletePersistedJob(t.jobId),null;t.step=M.stepName;var w=function(){var e=t.waitUntil,a=Promise.resolve();if(e!=null){var l=o("WATimeUtils").futureUnixTime(o("WATimeUtils").DAY_SECONDS);e>l?(o("WALogger").LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["",": trim wait from "," to ",""])),H(t),e,l),t.waitUntil=l,a=n.updatePersistedJob(t).then(function(){return o("WATimeUtils").delayUntil(l)})):(o("WALogger").LOG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["",": delaying until ",""])),H(t),e),a=o("WATimeUtils").delayUntil(e))}return a.then(function(){var e=function(){return t.waitUntil=null,o("WATimeUtils").happenedWithin($,o("WATimeUtils").DAY_SECONDS)||t.stepHardStartCountAfterTimeout++,n.updatePersistedJob(t)};return i.$10(t,x,n,e,r).catch(function(e){if(e instanceof o("WAPersistedJobManager").RetryOnBackoff){var a;o("WALogger").LOG(b||(b=babelHelpers.taggedTemplateLiteralLoose(["",": RetryOnBackoff"])),H(t)),(a=r.eventFlow)==null||a.addPoint("retry_on_backoff");var i=o("WAPromiseBackoffs").getDelay(++t.backedOffCount,e.backoffOptions);return t.waitUntil=o("WATimeUtils").futureUnixTime(Math.ceil(i/1e3)),t.stepHardStartCountAfterTimeout>0&&--t.stepHardStartCountAfterTimeout,n.updatePersistedJob(t).then(w)}else{if(!(e instanceof o("WAPersistedJobManager").NonRetryableError)&&t.stepUnexpectedErrorCount<O){var l;return(l=r.eventFlow)==null||l.addPoint("retry_on_unexpected_error"),o("WALogger").WARN(v||(v=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception. Tried "," times"])),H(t),t.stepUnexpectedErrorCount),o("WALogger").WARN(S||(S=babelHelpers.taggedTemplateLiteralLoose(["",": Unhandled exception: ",""])),H(t),e),t.stepUnexpectedErrorCount++,n.updatePersistedJob(t).then(w)}throw e}})})},A=w(),F=A.then(async function(e){o("WALogger").LOG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["",": finished job"])),H(t));var r=null;try{r=c(t.jobId,t.type,t.original,e)}catch(e){o("WALogger").ERROR(L||(L=babelHelpers.taggedTemplateLiteralLoose(["onJobFinished for "," threw exception ",""])),t.type,e).sendLogs("onJobFinished-threw")}r!=null&&r>0?(t.waitUntil=o("WATimeUtils").futureUnixTime(Math.ceil(r/1e3)),t.step=o("WAPersistedJobManager").FINISHED_JOB,t.current=e,t.stepFirstStartTime=o("WATimeUtils").unixTime(),await n.updatePersistedJob(t)):(await n.deletePersistedJob(t.jobId),l.delete(t.jobId))},async function(e){o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose([""," failed with error ",""])),t.type,e).sendLogs("job-threw-exception-"+t.type);var r=x.find(function(e){return e.stepName===t.step});if(!r)o("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["",": "," step not found"])),t.type,t.step);else{var a=r.info(t.current,t.original,z(t,i.isRestartAfterCrash));a.stopRetryIf!=null&&await a.stopRetryIf.onStopRetry(t.current,t.original,z(t,i.isRestartAfterCrash))}await n.deletePersistedJob(t.jobId),l.delete(t.jobId)});try{d(t.jobId,t.type,t.original)}catch(e){o("WALogger").ERROR(I||(I=babelHelpers.taggedTemplateLiteralLoose(["onJobStarted for "," threw exception ",""])),t.type,e).sendLogs("onJobStarted-threw")}return F.then(function(){return A})},n.addPersistedJobImplementation=function(t,n){var e=this.implementationLoaders,r=this.deprecatedJobs;if(e.has(t)){o("WALogger").ERROR(T||(T=babelHelpers.taggedTemplateLiteralLoose(["addPersistedJobImplementation called twice for ",""])),t).sendLogs("repeat-job-loader");return}r&&r[t]&&o("WALogger").DEV(D||(D=babelHelpers.taggedTemplateLiteralLoose([""," has been loaded and is marked as deprecated"])),t),e.set(t,n)},n.fireAndForget=function(t){var e=this;if(this.$1.indexOf(t.type)===-1){o("WALogger").LOG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["",": running in forced non-persisted mode"])),t.type),this.fireAndForgetNonPersisted(t);return}o("WALogger").LOG($||($=babelHelpers.taggedTemplateLiteralLoose(["",": running in persisted mode"])),t.type),B({code:async function(r){var n={eventFlow:r};return await e.initialJobsPromise,r.addPoint("initial_jobs_promise_fulfilled"),e.$6(t,e.accessors,n).then(function(t){return e.$4(t,e.accessors,n)})},annotations:{string:{name:t.type},bool:{offlineQueueMode:this.offlineQueueMode}}})},n.waitUntilPersisted=async function(t){var e=this;if(this.$1.indexOf(t.type)===-1)return o("WALogger").LOG(P||(P=babelHelpers.taggedTemplateLiteralLoose(["",": running in forced non-persisted mode"])),t.type),this.fireAndForgetNonPersisted(t),Promise.resolve();o("WALogger").LOG(N||(N=babelHelpers.taggedTemplateLiteralLoose(["",": running in persisted mode"])),t.type);var n=W({string:{name:t.type},bool:{offlineQueueMode:this.offlineQueueMode}});return await this.initialJobsPromise,n.addPoint("initial_jobs_promise_fulfilled"),this.$6(t,this.accessors,{eventFlow:n}).then(function(t){B({code:function(r){var n={eventFlow:r};return e.$4(t,e.accessors,n)},eventFlow:n})}).catch(function(e){throw n.endFail("error",{string:{error:""+e}}),e})},n.waitUntilCompleted=function(t){var e=this;return this.$1.indexOf(t.type)===-1?(o("WALogger").LOG(M||(M=babelHelpers.taggedTemplateLiteralLoose(["",": running in forced non-persisted mode"])),t.type),this.waitUntilCompletedNonPersisted(t)):(o("WALogger").LOG(w||(w=babelHelpers.taggedTemplateLiteralLoose(["",": running in persisted mode"])),t.type),B({code:async function(r){var n={eventFlow:r};return await e.initialJobsPromise,r.addPoint("initial_jobs_promise_fulfilled"),e.$6(t,e.accessors,n).then(function(t){return e.$4(t,e.accessors,n)})},annotations:{string:{name:t.type},bool:{offlineQueueMode:this.offlineQueueMode}}}))},n.fireAndForgetNonPersisted=function(t){var e=this;B({code:async function(r){var n={eventFlow:r};return await e.initialJobsPromise,r.addPoint("initial_jobs_promise_fulfilled"),e.$6(t,e.inMemoryAccessors,n).then(function(t){return e.$4(t,e.inMemoryAccessors,n)})},annotations:{string:{name:t.type},bool:{offlineQueueMode:this.offlineQueueMode}}})},n.waitUntilCompletedNonPersisted=function(t){var e=this;return B({code:async function(r){var n={eventFlow:r};return await e.initialJobsPromise,r.addPoint("initial_jobs_promise_fulfilled"),e.$6(t,e.inMemoryAccessors,n).then(function(t){return e.$4(t,e.inMemoryAccessors,n)})},annotations:{string:{name:t.type},bool:{offlineQueueMode:this.offlineQueueMode}}})},t})();function U(e){return"Job["+e.jobId+"] ("+e.type+")"}function V(e){return"[Job "+e.type+"] "}function H(e){return"Job["+e.jobId+"] ("+e.type+"."+e.step+")"}function G(e,t,n){e==="unsatisfiable"?o("WALogger").LOG(A||(A=babelHelpers.taggedTemplateLiteralLoose([""," halting because of ",""])),H(n),t):e==="unsatisfied"&&o("WALogger").LOG(F||(F=babelHelpers.taggedTemplateLiteralLoose([""," waiting on ",""])),H(n),t)}function z(e,t,n){return t===void 0&&(t=!1),{jobStartTime:e.startTime,afterCrash:t,interruptJob:j,eventFlow:n}}function j(e){return new(o("WAPersistedJobManager")).InterruptJob(e)}l.PersistedJobManager=q}),98);
__d("WAWaitForComms",["WACommsConnectionState","WAResolvable"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WAResolvable")).Resolvable;function s(){return e.promise}function u(){o("WACommsConnectionState").WACommsConnectionState.set(!1),e.isSettled&&(e=new(o("WAResolvable")).Resolvable)}function c(){o("WACommsConnectionState").WACommsConnectionState.set(!0),e.resolve()}function d(){return!e.resolveWasCalled()}function m(t){return e.reject(t)}l.waitForComms=s,l.commsConnectionLost=u,l.unblockComms=c,l.isStillWaitingForComms=d,l.failComms=m}),98);
__d("MAWJobManager",["MAWBridge","MAWDefinePersistedJob","MAWJobPersistenceAccessorsApi","WAPersistedJobManagerV2","WAWaitForComms","WAWaitForUserUnblocked","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WAPersistedJobManagerV2")).PersistedJobManager({accessors:o("MAWJobPersistenceAccessorsApi").getJobPersistenceAccessors(),deprecatedJobs:{removeCurrentDevice:"NOOP"},ignoreForceNonPersistedJobList:["sendMsg","sendBumpMsg","sendReactionMsg","sendMediaMsg","sendWrittenMsg","downloadAndHandleMedia"],isRestartAfterCrash:!1,listeners:{onJobFinished:function(t,n,r,a){return o("MAWBridge").getBridge().fireAndForget("event","onJobFinished",{id:t,originalArgs:r,result:a,type:n},!0),null},onJobStarted:r("emptyFunction")},offlineQueueCompletePromise:o("WAWaitForUserUnblocked").waitForUserUnblocked(),unfinishedJobEntries:o("WAWaitForComms").waitForComms().then(function(){return o("MAWJobPersistenceAccessorsApi").getJobPersistenceAccessors().loadAllJobs()})});function s(){return o("MAWDefinePersistedJob").persistedJobsApi}function u(){return e}l.getPersistedJobsApi=s,l.getJobManager=u}),98);
__d("WAJobBuilder",["Promise","WAPersistedJobManager","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function e(e){this.steps=e}var t=e.prototype;return t.step=function(t,n){return this.$1(t,typeof n=="function"?{code:n}:n)},t.$1=function(n,r){var t=r.stopRetryIf,a=r.requirements,i=r.code,l=d(a,i,t);if(t){var s=t.timePassedSeconds,u=t.appCrashed,p=t.onStopRetry,_=d(null,m(p),t);s!=null&&(l=c(function(e,t,n){var r=n.jobStartTime;return o("WATimeUtils").happenedWithin(r,s)},l,_)),u&&(l=c(function(e,t,n){var r=n.afterCrash;return!r},l,_))}return new e([].concat(this.steps,[{stepName:n,info:l}]))},t.finalStep=function(t,n){var e=this.step(t,n);return{end:function(){return e.steps}}},e})();function u(){return new s([])}function c(e,t,n){return function(r,o,a){return e(r,o,a)?t(r,o,a):n(r,o,a)}}function d(e,t,n){var r={requirements:e,code:t,stopRetryIf:n};return function(){return r}}function m(t){return function(r,a,i){return(e||(e=n("Promise"))).resolve(t(r,a,i)).then(function(e){return e instanceof o("WAPersistedJobManager").InterruptJob?e:new(o("WAPersistedJobManager")).InterruptJob(e)})}}l.JobBuilder=s,l.definePersistedJob=u}),98);
__d("MAWDefinePersistedJob",["MAWJobManager","Promise","WAJobBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e,s={definePersistedJob:function(){return o("WAJobBuilder").definePersistedJob()}};function u(t){var r=o("MAWJobManager").getJobManager();Object.keys(t).forEach(function(o){var a=t[o];r.addPersistedJobImplementation(o,function(){return(e||(e=n("Promise"))).resolve(a)})})}function c(e){var t=o("MAWJobManager").getJobManager();Object.keys(e).forEach(function(n){var r=e[n];t.addPersistedJobImplementation(n,r)})}l.persistedJobsApi=s,l.setMsgrJobImplementations=u,l.setMsgrDeferredJobImplementations=c}),98);
__d("MAWEBRestoreTrackingUtils",["LSIntEnum","LSMEBTaskCreationSource","MAWQplProxy","MWEBODSEntityName.enum","ODS","QPLUserFlow","WAHashStringToNumber","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u={dyi:r("justknobx")._("467"),frontloaded:20,initial:20,paginated:r("justknobx")._("3177"),point:1,search:r("justknobx")._("2477")};function c(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"paginated"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.paginated")}function d(t){var n=t.querySource,a=t.runningInWorker,i=t.taskSource,l=t.traceId;l!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:i,traceId:l,triggerType:"initial"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.initial")}function m(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"dyi"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.dyi")}function p(t,n,a){n!=null&&C({querySource:"LS",runningInWorker:a!=null?a:!1,taskSource:t,traceId:n,triggerType:"frontloaded"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.frontloaded")}function _(t,n,a,i){n!=null&&C({querySource:a,runningInWorker:i!=null?i:!1,taskSource:t,traceId:n,triggerType:"point"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.point")}function f(t){var n=t.querySource,a=t.runningInWorker,i=t.traceId;i!=null&&C({querySource:n,runningInWorker:a!=null?a:!1,taskSource:r("LSMEBTaskCreationSource").FTS_INDEX_EB_MESSAGES_WEB,traceId:i,triggerType:"search"}),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.request.search")}function g(t,n){t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLSuccessThroughBridge(r("qpl")._(521476165,"2432"),void 0,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endSuccess(r("qpl")._(521476165,"2432"),{instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.success")}function h(t,n,a,i){a===void 0&&(a="restore_failure"),t!=null&&(n!=null&&n?o("MAWQplProxy").sendQPLFailThroughBridge(r("qpl")._(521476165,"2432"),a,i,o("WAHashStringToNumber").hashStringToNumber(t)):r("QPLUserFlow").endFailure(r("qpl")._(521476165,"2432"),a,{annotations:i,instanceKey:o("WAHashStringToNumber").hashStringToNumber(t)})),(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore.decryption.failure")}function y(e){L("protobuf",e)}function C(e){var t=e.querySource,n=e.runningInWorker,a=e.taskSource,i=e.traceId,l=e.triggerType;if(n!=null&&n){var s;o("MAWQplProxy").startQplUserFlow(r("qpl")._(521476165,"2432"),{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(s=u[l])!=null?s:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},{providedInstanceKey:o("WAHashStringToNumber").hashStringToNumber(i),providedTimeoutInMs:r("justknobx")._("2950")})}else{var c;r("QPLUserFlow").start(r("qpl")._(521476165,"2432"),{annotations:{bool:{runningInWorker:n===!0},int:{requestedMessagesCount:(c=u[l])!=null?c:10},string:{querySource:t,taskSource:E(a),traceId:i,triggerType:l}},instanceKey:o("WAHashStringToNumber").hashStringToNumber(i),timeoutInMs:r("justknobx")._("2950")})}}function b(e){var t=e.pointName,n=e.traceId;r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function v(e){var t=e.annotations,n=e.pointName,a=e.traceId;r("QPLUserFlow").addAnnotations(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)}),r("QPLUserFlow").addPoint(r("qpl")._(521476165,"2432"),n,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function S(e){var t=e.annotations,n=e.pointName,a=e.traceId;a!=null&&o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),n,{annotations:t,instanceKey:o("WAHashStringToNumber").hashStringToNumber(a)})}function R(e){var t=e.pointName,n=e.traceId;o("MAWQplProxy").sendQplPointThroughBridge(r("qpl")._(521476165,"2432"),t,{instanceKey:o("WAHashStringToNumber").hashStringToNumber(n)})}function L(t,n){var a=n?(s||(s=o("LSIntEnum"))).unwrapIntEnum(n):null;(e||(e=o("ODS"))).bumpEntityKey(7319,r("MWEBODSEntityName.enum").MAW_EB_RESTORE_COUNTER,"restore."+t+"."+E(a))}function E(e){var t;return(t=e==null?void 0:e.toString())!=null?t:"unknown"}l.markEBRestorePaginated=c,l.markEBRestoreInitial=d,l.markEBRestoreDYI=m,l.markEBRestoreFrontloaded=p,l.markEBRestorePoint=_,l.markEBRestoreSearch=f,l.markEBRestoreSuccess=g,l.markEBRestoreFail=h,l.markEBRestoreProtobuf=y,l.addQPLRestorePoint=b,l.addQPLRestorePointWithAnnotations=v,l.addQPLRestorePointWithAnnotationsWorker=S,l.addQPLRestorePointWorker=R}),98);
__d("MAWMediaPreviewDownloadManager",["WAResolvable"],(function(t,n,r,o,a,i,l){"use strict";var e=1e4,s=[],u=new Map;function c(e){if(!u.has(e)){_();var t=new(o("WAResolvable")).Resolvable;u.set(e,t),s.push(e)}}function d(e,t){var n=u.get(e);n!=null&&(n.reject(t),p(e))}function m(e){return u.get(e)}function p(e){u.delete(e)}function _(){if(s.length>=e){var t=s.shift();t!=null&&u.delete(t)}}function f(){s=[],u.clear()}l.markMediaPreviewAsDownloading=c,l.markMediaPreviewAsFailed=d,l.getMediaPreviewDownloadingResolvable=m,l.removeMediaPreviewDownloadingResolvable=p,l.clear=f}),98);
__d("MAWUnsafeCoerce",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e}i.unsafeCoerce=e}),66);
__d("MWEBODSUtils",["CurrentMessengerUser","MWEBODSCategory","ODS"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var i=o("CurrentMessengerUser").getAppID(),l=i!=null?i.toString():"unknown",s=t+"."+l;(e||(e=o("ODS"))).bumpEntityKey(r("MWEBODSCategory"),s,n,a!=null?a:1),e.bumpEntityKey(r("MWEBODSCategory"),t,n,a!=null?a:1)}l.markODSForEB=s}),98);
__d("MpsMediaEntryCache",["FBLogger","MpsMessageToBridgeWrapper","WADirectPath","WAHashUtils","WALongInt","WAMediaUtils","WAProgressiveJpegGetScanLengths","WATimeUtils","getErrorSafe","getMediaTypeFromConsumerMessage","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e=new Map;function s(t){var n,r,o=e.get(t.plaintextHash);if(((n=t.mediaKeyTimestamp)!=null?n:0)>=((r=o==null?void 0:o.mediaKeyTimestamp)!=null?r:0))return e.set(t.plaintextHash,t),t}function u(e){try{var t=o("MpsMessageToBridgeWrapper").MpsMessageToBridgeWrapper.fromTopLevel(e);return[c(t),p(t)].concat(m(t)).filter(Boolean)}catch(e){var n=r("getErrorSafe")(e);throw r("FBLogger")("mps").catching(n).mustfixThrow("Error in hydrateCache")}}function c(e){var t,n=e.deserialize(),r=(t=n.encryptedTransportMessage())==null?void 0:t.consumerMessage();if(r!=null)return d(e,r)}function d(e,t){var n,r,a,i,l,s,u,c,d,m=(n=(r=(a=(i=(l=t.audioMessage())==null?void 0:l.payload)!=null?i:(s=t.documentMessage())==null?void 0:s.payload)!=null?a:(u=t.imageMessage())==null?void 0:u.payload)!=null?r:(c=t.stickerMessage())==null?void 0:c.payload)!=null?n:(d=t.videoMessage())==null?void 0:d.payload;if(m!=null){var p=o("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(t.proto);return _(m,p,e)}}function m(e){var t,n,r=(t=e.deserialize().encryptedTransportMessage())==null?void 0:t.armadillo(),o=r==null?void 0:r.extendedContentMessage();if(o==null||r==null)return[];var a="xma-image",i=o.previews().map(function(t){return _(t,a,e)}),l=o.headerImage();l!=null&&i.push(_(l,a,e));var s=o.favicon();s!=null&&i.push(_(s,a,e));var u=(n=o.associatedMessage())==null?void 0:n.consumerMessage();return u!=null&&i.push(d(e,u)),i.filter(Boolean)}function p(e){var t,n=(t=e.deserialize().encryptedTransportMessage())==null?void 0:t.armadillo(),a=n==null?void 0:n.noteReply(),i=a==null?void 0:a.stickerContent(),l=a==null?void 0:a.videoContent(),s=i!=null?i:l;if(s!=null){var u=l!=null?o("getMediaTypeFromConsumerMessage").getMediaTypeForVideo(l):void 0,c=i!=null?"sticker":void 0,d=r("nullthrows")(u!=null?u:c);return _(s,d,e)}}function _(e,t,n){var a,i,l,u,c,d,m,p,_,f,g,h,y,C=e.ancillary,b=e.integral;if(C==null||b==null){var v=Object.entries({ancillary:C,integral:b}).filter(function(e){var t=e[0],n=e[1];return n==null}).map(function(e){var t=e[0];return t}).join(", ");r("FBLogger")("mps").warn("invalid media entry, missing %s. type %s",v,t);return}var S=o("WADirectPath").validateDirectPath((a=b.transport)==null||(a=a.integral)==null?void 0:a.directPath).value,R=(i=b.transport)==null||(i=i.integral)==null?void 0:i.mediaKeyTimestamp,L=R!=null?o("WATimeUtils").castLongIntToUnixTime(R):void 0,E=(l=b.transport)==null||(l=l.integral)==null?void 0:l.fileSha256,k=E!=null?o("WAHashUtils").toPlaintextHash(E):void 0;if(S==null||E==null||k==null||t==null){var I=Object.entries({directPath:S,fileSha256:E,mediaType:t,plaintextHash:k}).filter(function(e){var t=e[0],n=e[1];return n==null}).map(function(e){var t=e[0];return t}).join(", ");r("FBLogger")("mps").warn("Missing media entry fields: %s. type :%s",I,t);return}var T=null,D=C.scanLengths,x=C.scansSidecar;x!=null&&D!=null&&(T={scanLengths:D.map(o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength),sidecar:x});var $=void 0,P=(u=b.transport)==null||(u=u.ancillary)==null||(u=u.thumbnail)==null?void 0:u.downloadableThumbnail;if(P!=null){var N;$={directPath:o("WADirectPath").validateDirectPath(P.directPath).value,fileEncSha256:P.fileEncSha256,fileSha256:P.fileSha256,mediaKey:P.mediaKey==null?void 0:o("WAMediaUtils").castToMediaKey(P.mediaKey),mediaKeyTimestamp:o("WATimeUtils").castLongIntToUnixTime((N=P.mediaKeyTimestamp)!=null?N:0),objectId:P.objectId==null?void 0:o("WAMediaUtils").stringToDeliveryObjectId(P.objectId)}}var M={directPath:S,downloadableThumbnail:$,fileEncSha256:(c=b.transport)==null||(c=c.integral)==null?void 0:c.fileEncSha256,filename:null,fileSha256:E,mediaKey:((d=b.transport)==null||(d=d.integral)==null?void 0:d.mediaKey)==null?void 0:o("WAMediaUtils").castToMediaKey((m=b.transport)==null||(m=m.integral)==null?void 0:m.mediaKey),mediaKeyTimestamp:L,objectId:(b==null||(p=b.transport)==null||(p=p.ancillary)==null?void 0:p.objectId)==null?void 0:o("WAMediaUtils").stringToDeliveryObjectId(b==null||(_=b.transport)==null||(_=_.ancillary)==null?void 0:_.objectId),progressiveJpegDetails:T,serverMediaType:t,size:o("WALongInt").numberOrThrowIfTooLarge((f=b==null||(g=b.transport)==null||(g=g.ancillary)==null?void 0:g.fileLength)!=null?f:0),uploadToken:void 0},w=o("WAMediaUtils").encodeMediaEntryWithUpdatedPath(M,S);return s({decodedMediaEntry:M,mediaEntry:w,mediaKeyTimestamp:L,message:{messageId:n.message.messageId,threadId:n.message.threadId},plaintextHash:k,serverMediaType:t,thumbnailHash:((h=$)==null?void 0:h.fileSha256)!=null?o("WAHashUtils").toPlaintextHash((y=$)==null?void 0:y.fileSha256):void 0})}function f(t){return e.get(t)}function g(){e.clear()}l.storeEntry=s,l.hydrateCache=u,l.getEntry=f,l.clear__TEST_ONLY=g}),98);
__d("PersistedQueuesSchema",["MAWWormOdsLogger","WAHex","Worm","WormEAR","WormIDbDriver"],(function(t,n,r,o,a,i,l){"use strict";var e={autoIncrement:!0,indexes:{"[jid+priority+stanzaId]":{fields:["jid","priority","stanzaId"],unique:!1},priority:{fields:["priority"],unique:!1}},nonEncryptedFields:["priority","stanzaId"],primaryKey:"stanzaQueueId",secure:!0},s={autoIncrement:!0,indexes:{},nonEncryptedFields:["uploadStatus","uploadTsSec","backupActionType"],primaryKey:"queueId",secure:!0},u={autoIncrement:!0,indexes:{},primaryKey:"queueId",secure:!0},c={autoIncrement:!0,indexes:{},primaryKey:"queueId",secure:!0},d={danglingQueue:u,ebSenderUploadQueueV3:c,ebUploadQueue:s,stanzaQueue:e};function m(e,t,n,r,a,i){var l=o("WAHex").parseHex(t),s="pqdb",u=new(o("WormEAR")).WormEAR(d,s,l);return new(o("Worm")).WormDatabase(new(o("WormIDbDriver")).WormIDbDriver(e,s,d,u,o("MAWWormOdsLogger").wormOdsWorkerLogger,{blockingErrorThreshold:n,onBlockingError:r,onTransactionError:a}),i)}l.makePersistedQueueSchema=m}),98);
__d("PersistedQueueDB",["FBLogger","PersistedQueuesSchema","WAResolvable","WormEAR","err","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("WAResolvable")).Resolvable;async function u(t){var n=t.blockingErrorThreshold,a=t.dbName,i=t.onBlockingError,l=t.qplEvent,u=t.strEncKey;try{var c=o("PersistedQueuesSchema").makePersistedQueueSchema(a,u,n,i,function(t){if(t instanceof o("WormEAR").DecryptionError){var n,a,i=t;r("FBLogger")("messenger_web").mustfix("EAR decryption error in store: %s. Dropping corrupted entity",i.store),r("promiseDone")((n=(a=e)==null?void 0:a.runInTransaction([i.store],"readwrite",function(e){var t=e.stores[i.store];return i.maybeHashedPk!=null?t.delete(i.maybeHashedPk):t.clear()},"delete-corrupted-entity"))!=null?n:Promise.resolve())}},l);return e=c,await c.init(),s.resolve(c),c}catch(e){throw r("FBLogger")("messenger_web").catching(r("getErrorSafe")(e)).mustfix("Error performing PersistedQueue init"),e}}function c(){if(e==null)throw r("err")("PersistedQueue is not initialized");return e}function d(){return s.promise}l.makePersistedQueues=u,l.getPersistedQueues=c,l.getDbPromise=d}),98);
__d("WAThrottle",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=0,r=null,o;function a(){for(var a=Date.now(),i=a-n,l=arguments.length,s=new Array(l),u=0;u<l;u++)s[u]=arguments[u];o=s,i>=t?(clearTimeout(r),r=null,e.apply(void 0,s),n=Date.now()):r==null&&(r=setTimeout(function(){return e.apply(void 0,o)},t-i))}return a}i.throttle=e}),66);
__d("PersistedQueueApi",["PersistedQueueDB","WALogger","WAThrottle"],(function(t,n,r,o,a,i,l){"use strict";var e,s=36e5,u=function(t,n){return"PersistedQueue:"+t+":"+n};function c(){return{ack:p,clear:_,count:b,delete:f,get:d,index:m,keys:h,read:g,write:y}}function d(e,t){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readonly",function(n){var r=n.stores[e];return r.get(t)},u(e,"get"))}function m(e,t){return{equals:function(r){return{read:function(a){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readonly",function(n){return n.stores[e].readIndexRange(t,{only:r},a)},u(e,"index-equal"))}}},keys:function(){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readonly",function(n){return n.stores[e].readIndexKeys(t)},"index-keys")},read:async function(r){var n=await o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readonly",function(n){return n.stores[e].readIndex(t,void 0,r)},u(e,"index-read"));return n}}}function p(e,t){return f(e,t)}function _(e){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readwrite",function(t){return t.stores[e].clear()},u(e,"clear"))}function f(e,t){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readwrite",async function(n){var r=n.stores[e];await r.bulkDelete(t),v(e)},u(e,"delete"))}function g(e,t){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readonly",function(n){return n.stores[e].readAll(t)},u(e,"read"))}function h(e){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readonly",function(t){return t.stores[e].readKeys()},u(e,"keys"))}function y(e,t){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readwrite",function(n){return n.stores[e].bulkAdd(t)},u(e,"write"))}function C(e){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readwrite",async function(t){var n=t.stores[e],r=await n.readAll({limit:1});r.length===0&&await n.clear()},u(e,"ClearIfEmpty"))}function b(e){return o("PersistedQueueDB").getPersistedQueues().runInTransaction([e],"readonly",function(t){return t.stores[e].count()},u(e,"count"))}var v=o("WAThrottle").throttle(function(t){C(t).catch(function(n){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[PersistedQueueV2] Error during PQ clear operation of ",": ",""])),t,n)})},s);l.persistedQueueApi=c,l.persistedQueueGet=d,l.persistedQueueIndex=m,l.persistedQueueAck=p,l.persistedQueueClear=_,l.persistedQueueDelete=f,l.persistedQueueRead=g,l.persistedQueueKeys=h,l.persistedQueueWrite=y,l.clearIfEmpty=C,l.persistedQueueCount=b}),98);
__d("WAFranking",["$InternalEnum","WACryptoDependencies","WACryptoHmac","WACryptoUtils","WAFrankingTypes","WAGlobals","WAPREList","WAPREMetrics"],(function(t,n,r,o,a,i,l){"use strict";var e=32,s=0,u=n("$InternalEnum").Mirrored(["KEEP","DROP"]);function c(){var t=new Uint8Array(e);return o("WACryptoDependencies").getCrypto().getRandomValues(t),o("WAFrankingTypes").castToFrankingKey(t)}function d(e){return e!=null?e:s}function m(e,t){return o("WACryptoHmac").hmacSha256(e,t).then(function(e){return o("WAFrankingTypes").castToFrankingTag(new Uint8Array(e))})}async function p(e,t,n,r){switch(r){case void 0:case 0:{var a=await o("WACryptoHmac").hmacSha256(t,e);return o("WACryptoUtils").uint8ArraysEqual(new Uint8Array(a),n)}default:return!0}}async function _(e,t){var n,r,a,i=o("WAGlobals").getConfig().isFrankingDropOnInvalid(),l=o("WAPREMetrics").startMetric(o("WAPREList").PRE_METRIC.FRANKING_VALIDATION);if((t==null?void 0:t.frankingTag)!=null&&((n=e.metadata)==null?void 0:n.frankingKey)==null){var s;return t.frankingTag=null,t.reportingTag=null,l.endFail("missingFrankingKey",{bool:{doesFrankingTagExist:(t==null?void 0:t.frankingTag)!=null,doesFrankingKeyExist:((s=e.metadata)==null?void 0:s.frankingKey)!=null,doesFrankingContentExist:e.frankingContent!=null}}),{decision:u.KEEP,updatedReportingMeta:t}}if((t==null?void 0:t.frankingTag)!=null&&e.version==="v3"&&e.type==="subprotocol"&&((r=e.metadata)==null?void 0:r.frankingKey)!=null&&e.frankingContent!=null){var c=t.frankingTag,d=e.frankingContent,m=e.metadata.frankingVersion,_=o("WAFrankingTypes").castToFrankingKey(new Uint8Array(e.metadata.frankingKey));return _==null?(l.endFail("tagButNoKey"),i?{decision:u.DROP,updatedReportingMeta:t}:{decision:u.KEEP,updatedReportingMeta:t}):await p(new Uint8Array(d),_,c,m)?(t.frankingKey=_,t.reportingContent=d,l.endSuccess(),{decision:u.KEEP,updatedReportingMeta:t}):(l.endFail("tagMismatch"),i?{decision:u.DROP,updatedReportingMeta:t}:{decision:u.KEEP,updatedReportingMeta:t})}return l.endFail("potentialDropCandidate",{bool:{doesFrankingTagExist:(t==null?void 0:t.frankingTag)!=null,doesFrankingKeyExist:((a=e.metadata)==null?void 0:a.frankingKey)!=null,doesFrankingContentExist:e.frankingContent!=null}}),o("WAGlobals").getConfig().isFrankingDropOnMissing()?{decision:u.DROP,updatedReportingMeta:t}:{decision:u.KEEP,updatedReportingMeta:t}}l.FrankingDecision=u,l.createFrankingKey=c,l.getFrankingVersion=d,l.genFrankingTag=m,l.validateFrankingTag=p,l.handleAndValidateFrankingFromIncomingMsg=_}),98);
__d("WAAsMessageApplication",["WAAsConsumerApplication","WAConsumerApplication.pb","WAFranking","WAMsgApplication.pb","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t;switch(e.type){default:t=o("WAAsConsumerApplication").asConsumerApplication(e)}var n=e.forwardingScore!=null?e.forwardingScore:0,r=e.isForwarded!=null?e.isForwarded:!1,a={metadata:{chatEphemeralSetting:null,forwardingScore:n,frankingKey:o("WAFranking").createFrankingKey(),frankingVersion:o("WAFranking").getFrankingVersion(),isForwarded:r,quotedMessage:null}};if(t!=null){var i=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,t);a.payload={subProtocol:{consumerMessage:{payload:i.readBuffer(),version:1}}}}return o("encodeProtobuf").encodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,a).readByteArrayView()}function s(e){return e}function u(e){return e.buffer}l.asMessageApplication=e,l.castToMessageApplicationBytes=s,l.castMessageApplicationBytesToBytes=u}),98);
__d("WAGetAgeBucketForMediaKeyTimestamp",["WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)return"Missing";if(o("WATimeUtils").isInFuture(e))switch(!0){case o("WATimeUtils").happenedWithin(e,1*o("WATimeUtils").DAY_SECONDS):return"< 1 day in future";case o("WATimeUtils").happenedWithin(e,7*o("WATimeUtils").DAY_SECONDS):return"1-7 days in future";default:return"> 7 days in future"}switch(!0){case o("WATimeUtils").happenedWithin(e,1*o("WATimeUtils").DAY_SECONDS):return"< 1 day";case o("WATimeUtils").happenedWithin(e,7*o("WATimeUtils").DAY_SECONDS):return"1-7 days";case o("WATimeUtils").happenedWithin(e,14*o("WATimeUtils").DAY_SECONDS):return"7-14 days";case o("WATimeUtils").happenedWithin(e,21*o("WATimeUtils").DAY_SECONDS):return"14-21 days";case o("WATimeUtils").happenedWithin(e,30*o("WATimeUtils").DAY_SECONDS):return"21-30 days";case o("WATimeUtils").happenedWithin(e,40*o("WATimeUtils").DAY_SECONDS):return"30-40 days";case o("WATimeUtils").happenedWithin(e,50*o("WATimeUtils").DAY_SECONDS):return"40-50 days";case o("WATimeUtils").happenedWithin(e,60*o("WATimeUtils").DAY_SECONDS):return"50-60 days";default:return"> 60 days"}}l.getAgeBucketForMediaKeyTimestamp=e}),98);
__d("WAIsMediaExpiredError",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){switch(t){case"signature-expired":return!0;case"hash-mismatch":case"ciphertext-hash-mismatch":case"enc-hash-mismatch":case"decryption-error":case"max-attempts-exceeded":case"request-error":case"download-throttled":case"media-not-found":case"media-entry-invalid":case"media-entry-invalid-direct-path":case"media-entry-invalid-file-enc-sha256":case"media-entry-invalid-file-sha256":case"media-entry-invalid-media-key":case"media-entry-invalid-server-media-type":case"no-host":case"backoff":case"body-network-error":case"disconnected":case"runtime-error":case"access-expired":case"http-fetch-exception":case"http-fetch-aborted":case"unspecified-http-error":case"server-timeout":case"missing-expected-hmacs":case"hmac-chiphertext-array-mismatch":return!1;default:return!0}};i.isMediaExpiredError=e}),66);
__d("WAMapContentTypeToFbType",[],(function(t,n,r,o,a,i){"use strict";function e(e){switch(e){case"text":return"text";case"media":return"media";case"reaction":return"reaction";case"live_location":case"pay":case"product_list":case"poll_creation":case"poll_vote":case"scheduled_call":return"text";default:return"text"}}i.mapContentTypeToFbType=e}),66);
__d("WAPersistedQueueCache",["WAResolvable","WAShiftTimer","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r){var a=o("WATagsLogger").TAGS(["PersistedQueue",t,"cache"]),i=[],l=new(o("WAResolvable")).Resolvable,s=r!=null?r:{},u=new(o("WAShiftTimer")).ShiftTimer(function(){m()});return{commit:function(){return m()},add:function(t){i.push(t);var e=l;return c(),d(),e.promise},config:function(t){s=t}};function c(){s.cacheSize!=null&&i.length>=s.cacheSize&&m()}function d(){if(s.maxDelay!=null){var e=s.maxDelay;u.cancel(),u.onOrAfter(e)}}async function m(){if(i.length!==0){u.cancel();var t=i;i=[];var r=l;l=new(o("WAResolvable")).Resolvable;try{await n(t),r.resolve()}catch(t){throw a.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Error during flush: ",""])),t),r.reject(t),t}}}}l.makePersistedQueueCache=s}),98);
__d("WAPersistedQueue",["WALogger","WAPersistedQueueCache","WAPubSub"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(function(){function t(t,n,r){var a=this;this.$1=o("WAPubSub").simplePubSub(),this.$3=t,this.$4=n,this.$2=o("WAPersistedQueueCache").makePersistedQueueCache(t,function(r){return n.write(t,r).then(function(t){o("WALogger").DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[PersistedQueue] flush: ","}"])),r.length),a.$1.publish({type:"flush"})})},r)}var n=t.prototype;return n.subscribe=function(t){return this.$1.subscribe(t)},n.index=function(e){return this.$4.index(this.$3,e)},n.keys=function(){return this.$4.keys(this.$3)},n.get=function(t){return this.$4.get(this.$3,t)},n.read=function(t){return this.$4.read(this.$3,t)},n.addAndCommit=function(t){var e=this;return o("WALogger").DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[PersistedQueue] new entry & commit"]))),this.$1.publish({type:"new_entity"}),this.$4.write(this.$3,t).then(function(n){return o("WALogger").DEV(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[PersistedQueue] flush: ","}"])),t.length),e.$1.publish({type:"flush"}),n})},n.commit=function(){return this.$2.commit()},n.ack=function(t){return this.$4.ack(this.$3,t)},n.delete=function(t){return this.$4.delete(this.$3,t)},n.clear=function(){return this.$4.clear(this.$3)},n.count=function(){return this.$4.count(this.$3)},t})();function d(e,t,n){return new c(e,t,n)}l.PersistedQueue=c,l.initPersistedQueue=d}),98);
__d("WAProtocolQueue",["PersistedQueueApi","WAGlobals","WAJids","WALogger","WAMapContentTypeToFbType","WAPersistedQueue"],(function(t,n,r,o,a,i,l){"use strict";var e,s=5e3,u=null;function c(t){if(u!=null)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Protocol Queue is already initialized"]))),u;var n=o("WAPersistedQueue").initPersistedQueue("stanzaQueue",t,{cacheSize:null,maxDelay:s});return u=n,u}function d(){return u||c(o("PersistedQueueApi").persistedQueueApi())}var m=(function(){function e(){this.$1=[],this.$2=[],this.$3=[]}var t=e.prototype;return t.enqueue=function(t,n,r){this.$1.push(t),n&&this.$2.push(n),r&&this.$3.push(r)},t.flush=function(t,n,r,o,a){var e=this.$1,i=this.$2,l=this.$3;return this.$1=[],this.$2=[],this.$3=[],d().addAndCommit(e).then(function(){return i.forEach(function(e){return e()})}).catch(function(e){return l.forEach(function(t){return t(e)})})},e})(),p=new m;function _(e){return e.map(function(e){return e.type==="message"?f(e):babelHelpers.extends({},e)})}function f(e){switch(e.subtype){case"unavailable":{var t=e,n=o("WAJids").extractUserJid(t.from),r={id:{author:o("WAGlobals").getMyUserJid()===n?"@me":n,chat:t.jid,externalId:t.stanzaId},ts:t.serverTs,type:"UnavailableMsg"};return{incomingType:"wa-incoming",jid:t.jid,message:{decrypted:r,details:{count:null,externalId:t.stanzaId,from:o("WAJids").switchOnMsgrChatJidType(t.jid,{group:function(n){return{author:t.from,chat:n,groupJid:n,type:"group"}},user:function(n){return{author:t.from,chat:n,deviceJid:t.from,type:"device"}}}),hideDecryptionFailure:!1,isInstamadillo:!1,offline:t.offline,recipient:t.recipient,reportingMeta:t.reportingMeta,retryCount:t.retryCount,ts:t.serverTs,type:o("WAMapContentTypeToFbType").mapContentTypeToFbType(t.contentType)}},priority:t.priority,stanzaId:t.stanzaId,stanzaQueueId:e.stanzaQueueId,type:t.type}}case"armadillo":{var a=e,i=o("WAJids").extractUserJid(a.from),l={folder:a.fbFolderId,id:{author:o("WAGlobals").getMyUserJid()===i?"@me":i,chat:a.jid,externalId:a.stanzaId},msg:a.message,recipientsCount:null,reportingMeta:a.reportingMeta,ts:a.serverTs,type:"IncomingMsg"};return{incomingType:e.incomingType,jid:a.jid,message:{decrypted:l,details:{count:null,externalId:a.stanzaId,from:o("WAJids").switchOnMsgrChatJidType(a.jid,{group:function(t){return{author:a.from,chat:t,groupJid:t,type:"group"}},user:function(t){return{author:a.from,chat:t,deviceJid:a.from,type:"device"}}}),hideDecryptionFailure:!1,isInstamadillo:!1,offline:a.offline,recipient:a.recipient,reportingMeta:a.reportingMeta,retryCount:a.retryCount,ts:a.serverTs,type:o("WAMapContentTypeToFbType").mapContentTypeToFbType(a.contentType)}},priority:a.priority,stanzaId:a.stanzaId,stanzaQueueId:e.stanzaQueueId,type:a.type,ebTimestampMs:a.ebTimestampMs}}case"instamadillo":{var s=e,u=o("WAJids").extractUserJid(s.from),c={folder:s.fbFolderId,id:{author:o("WAGlobals").getMyUserJid()===u?"@me":u,chat:s.jid,externalId:s.stanzaId},msg:s.message,recipientsCount:null,reportingMeta:s.reportingMeta,ts:s.serverTs,type:"InstamadilloMsg"};return{incomingType:"wa-incoming",jid:s.jid,message:{decrypted:c,details:{count:null,externalId:s.stanzaId,from:o("WAJids").switchOnMsgrChatJidType(s.jid,{group:function(t){return{author:s.from,chat:t,groupJid:t,type:"group"}},user:function(t){return{author:s.from,chat:t,deviceJid:s.from,type:"device"}}}),hideDecryptionFailure:!1,isInstamadillo:!0,offline:s.offline,recipient:s.recipient,reportingMeta:s.reportingMeta,retryCount:s.retryCount,ts:s.serverTs,type:o("WAMapContentTypeToFbType").mapContentTypeToFbType(s.contentType)}},priority:s.priority,stanzaId:s.stanzaId,stanzaQueueId:e.stanzaQueueId,type:s.type}}case"ciphertext":{var d=function(){return!(m.contentType==="reaction"||m.hideDecryptionFailure===!0)},m=e,p=o("WAJids").extractUserJid(m.from),_={createPlaceholder:d(),id:{author:o("WAGlobals").getMyUserJid()===p?"@me":p,chat:m.jid,externalId:m.stanzaId},ts:m.serverTs,type:"IncomingCiphertextMsg"};return{incomingType:"wa-incoming",jid:m.jid,message:{decrypted:_,details:{count:null,type:o("WAMapContentTypeToFbType").mapContentTypeToFbType(m.contentType),externalId:m.stanzaId,from:o("WAJids").switchOnMsgrChatJidType(m.jid,{group:function(t){return{author:m.from,chat:t,groupJid:t,type:"group"}},user:function(t){return{author:m.from,chat:t,deviceJid:m.from,type:"device"}}}),hideDecryptionFailure:!1,isInstamadillo:!1,offline:m.offline,recipient:m.recipient,reportingMeta:m.reportingMeta,retryCount:m.retryCount,ts:m.serverTs}},priority:m.priority,stanzaId:m.stanzaId,stanzaQueueId:e.stanzaQueueId,type:m.type}}default:return babelHelpers.extends({},e)}}var g=9,h=7,y=5,C=2;function b(e){return e}function v(e){return e}function S(e){return e}l.initProtocolQueue=c,l.protocolQueue=d,l.PQFlushable=m,l.pqFlushable=p,l.mapProtocolEntriesV2toV1=_,l.mapProcolQueueMessageV2toV1=f,l.WAProtocolQueuePriorityHigh=g,l.WAProtocolQueuePriorityMid=h,l.WAProtocolQueuePriorityLow=y,l.WAProtocolQueuePriorityBackground=C,l.appdataApplicationProtocol=b,l.extractSubProtocolFromAppdataProtocol=v,l.numberToStanzaQueueId=S}),98);
__d("WASortedLists",[],(function(t,n,r,o,a,i){"use strict";function e(){return[]}function l(){return[]}function s(e,t){return e.filter(t)}function u(e,t){return g(e.map(t))}function c(e,t){for(var n=e.length===t.length,r=0;n&&r<e.length;r++)e[r]!==t[r]&&(n=!1);return n}function d(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return e;return e.concat([t]).sort()}function m(e,t){if(e.length<t.length)return!1;for(var n=!0,r=0,o=0;n&&o<t.length;o++)do n=e[r]===t[o];while(!n&&++r<e.length);return n}function p(e,t){for(var n=[],r=0,o=0;r<e.length;r++){for(var a=e[r];o<t.length&&a>t[o];)o++;(o===t.length||a<t[o])&&n.push(a)}return n}function _(e,t){for(var n=[],r=0,o=0;r<e.length&&o<t.length;){var a=e[r],i=t[o];a<i?r++:(a===i&&(n.push(a),r++),o++)}return n}function f(e,t){for(var n=[],r=0,o=0;r<e.length&&o<t.length;)e[r]<t[o]?n.push(e[r++]):e[r]===t[o]?(n.push(e[r++]),o++):n.push(t[o++]);for(;r<e.length;)n.push(e[r++]);for(;o<t.length;)n.push(t[o++]);return n}function g(e){return h(e.slice().sort())}function h(e){for(var t=!1,n=0;n<e.length-1;n++)e[n]===e[n+1]&&(t=!0);if(!t)return e;for(var r=[],o=0;o<e.length-1;o++)e[o]!==e[o+1]&&r.push(e[o]);return r.push(e[e.length-1]),r}function y(e){return Array.from(e).sort()}function C(e){return e.slice().sort()}function b(e,t,n){for(var r=null,o=0;!r&&o<e.length;o++)e[o]===t&&(r=e.slice(),r[o]=n,r=h(r.sort()));return r||e}function v(e){return[e]}function S(e){return e.length<1}function R(e,t,n){return e.slice(t,n)}i.emptySet=e,i.emptyList=l,i.filter=s,i.map=u,i.areEqual=c,i.addToSet=d,i.contains=m,i.subtract=p,i.intersect=_,i.joinUniq=f,i.sortAndDedupe=g,i.asSortedSet=y,i.sort=C,i.swapIn=b,i.singleElement=v,i.isEmpty=S,i.slice=R}),66);/*FB_PKG_DELIM*/
__d("EchoCommonUtils",[],(function(t,n,r,o,a,i){"use strict";var e="Echo-Doc-Version";function l(e,t){var n=e.localKey,r=e.transportKey;return n+"@"+r+"-"+t}function s(e,t,n){return e==null?{localKey:t,transportKey:n}:{displayName:e,localKey:t,transportKey:n}}i.ECHO_COMMON_FIELD_DOCUMENT_VERSION=e,i.getEchoAddressFieldNameWithSuffix=l,i.craftEchoAddress=s}),66);
__d("EchoConstants",[],(function(t,n,r,o,a,i){"use strict";var e=new Set(["\0","","","","","","","\x07","\b","	","\n","\v","\f","\r","","","","","","","","","","","","","","\x1B","","","","",'"'," ","(",")",",",":",";","<",">","@","[","]","\\"]);i.ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE=e}),66);
__d("EchoDecodingUtils",["invariant","EchoConstants","WALogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p,_,f,g,h,y,C,b,v=new Set([]);function S(t,n){if(t.length!==0){var r=t.indexOf(":");if(r===-1){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] This is a raw line and we cannot decode its field name and value."])));return}var a=t.substring(0,r).trim(),i=t.substring(r+1).trim();if(a.length===0){o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Field name is blank"])));return}if(i.length===0){n.has(a)&&n.delete(a);return}n.set(a,i)}}function R(e,t,n,r){n===void 0&&(n=new Set);for(var a=!1,i=t==="conditional"&&e[0]==='"',l="",s=i?1:0;s<e.length;){var u=e[s];if(t==="conditional"&&!i&&u==='"'||!i&&n.has(u))break;if(i&&!a&&u==='"'){i=!1,s++;break}if(i&&!a&&u==="\\"){if(s===e.length-1)break;a=!0}else a&&u==="r"?l+="\r":a&&u==="n"?l+="\n":l+=u,a=!1;s++}if(i||l.length===0){var d=r!=null?r:"unknown";return o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Fail decoding because we didn't have a closing quote. Error Field: ",""])),d),{remainder:e,result:null,success:!1}}return{remainder:e.substring(s),result:l,success:!0}}function L(e,t){if(e.length===0)return o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid input to echoDecodeAddress"]))),{remainder:e,result:null,success:!1};var n=e.trimLeft(),r=R(n,"conditional",o("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,t);if(!r.success)return o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] conditional quote mode decode failed"]))),{remainder:e,result:null,success:!1};if(r.result!=null||s(0,47923),r.remainder[0]==="@"){var a=E(r.remainder,r.result,t);return{remainder:a.remainder,result:a.result,success:a.success}}var i=r.result,l=r.remainder.trimLeft();if(l.startsWith("<")){var u=E(l.substring(1),void 0,t),c=u.result,_=u.remainder;if(u.success&&c!=null&&_.startsWith(">"))return i.length===0?{remainder:_.substring(1),result:c,success:!0}:{remainder:_.substring(1),result:babelHelpers.extends({},c,{displayName:i}),success:!0}}return o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] echoDecodeAddress failed"]))),{remainder:e,result:null,success:!1}}function E(e,t,n){var r=t==null?e.trimLeft():e,a=t;if(a==null){var i=R(r,"conditional",o("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,n);if(!i.success)return o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] parse localKey in address failed"]))),{remainder:e,result:null,success:!1};a=i.result,r=i.remainder}if(a==null||a.length===0||r[0]!=="@")return o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid localKey in address detected"]))),{remainder:e,result:null,success:!1};var l=R(r.substring(1),"never",o("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE,n),s=l.result;return l.success&&s!=null&&s.length>0?{remainder:l.remainder,result:{localKey:a,transportKey:s},success:!0}:(o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid transportKey in address detected"]))),{remainder:e,result:null,success:!1})}function k(e,t){if(e.length===0)return o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid input to echoDecodeAddressList detected"]))),{result:null,success:!1};var n=L(e,t);if(!n.success)return o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Address  decode failed with value: ",""])),e),{result:null,success:!1};n.result!=null||s(0,47927);for(var r=[n.result],a=n.remainder;a.startsWith(",");){var i=L(a.substring(1).trimLeft(),t);if(i.success)i.result!=null&&r.push(i.result),a=i.remainder;else break}return{result:r,success:!0}}function I(e){var t=new Map,n=e.split("\r\n");return n.length===1&&n[0]===e?(o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Fail to decode if the input string does not have CRLF"]))),t):(n.forEach(function(e){return S(e,t)}),t)}function T(e,t){var n=e.get(t);if(n==null||n.length===0||n==='""')return{result:null,success:!1};var r=R(n,"conditional",v,t),o=r.result,a=r.success;return{result:o,success:a}}function D(e,t){var n,r=x(e,t);return{result:(n=r.result)!=null?n:0,success:r.success}}function x(e,t){var n=e.get(t);if(n==null||n.length===0)return{result:null,success:!1};var r=parseInt(n,10);return isNaN(r)?(o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] "," not a valid number in echo message"])),t),{result:null,success:!1}):Number.isSafeInteger(r)?{result:r,success:!0}:{result:r>Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,success:!0}}function $(e,t){var n,r=P(e,t);return{result:(n=r.result)!=null?n:!1,success:r.success}}function P(e,t){var n=x(e,t);return!n.success||n.result!==0&&n.result!==1?{result:null,success:!1}:{result:n.result===1,success:!0}}function N(e,t){var n=e.get(t);if(n==null||n.length===0)return{result:null,success:!1};var r=L(n,t),o=r.result,a=r.success;return{result:o,success:a}}function M(e,t){var n=e.get(t);return n==null||n.length===0?{result:null,success:!1}:k(n,t)}function w(e,t){var n=e.get(t);if(n==null||n.length===0)return{result:null,success:!1};var r=n.split(",").map(function(e){return e.trim()}).filter(Boolean);return r.length===0?{result:null,success:!1}:{result:r,success:!0}}l.echoDecodeFields=I,l.echoDecodeStringField=T,l.echoDecodeIntField=D,l.echoDecodeNullableIntField=x,l.echoDecodeBooleanField=$,l.echoDecodeNullableBooleanField=P,l.echoDecodeAddressField=N,l.echoDecodeAddressListField=M,l.echoDecodeObjectIdListField=w}),98);
__d("EchoEncodingUtils",["EchoConstants","EchoMessage","FBLogger","MAWMsgType","WABase64"],(function(t,n,r,o,a,i,l){"use strict";var e=new Set(['"',"\\","\n","\r","\0"]),s=new Set(["\0","","","","","","","\x07","\b","	","\n","\v","\f","\r","","","","","","","","","","","","","","\x1B","","","","",'"',"\\"]);function u(e,t){for(var n of t)if(e.indexOf(n)>=0)return!0;return!1}function c(t,n,o){if(o===void 0&&(o=new Set),t.length<=0)throw r("FBLogger")("wmi_eb").mustfixThrow("The input string must be non-empty");var a=n;if(n==="conditional"&&(u(t,o)?a="always":a="never"),a==="never")return t;for(var i='"',l=0;l<t.length;l++){var s=t[l];e.has(s)?(i+="\\",s==="\r"?i+="r":s==="\n"?i+="n":i+=s):i+=s}return i+'"'}function d(e){if(!Number.isSafeInteger(e))throw r("FBLogger")("wmi_eb").mustfixThrow("The input value must be a safe integer");return e.toString()}function m(e){var t="",n=e.displayName,r=e.localKey,a=e.transportKey;return n!=null&&n.length>0&&(t+=c(n,"always")+" <"),t+=c(r,"conditional",o("EchoConstants").ADDRESS_LOCAL_KEY_CHARS_NEED_QUOTE)+"@"+a,n!=null&&n.length>0&&(t+=">"),t}function p(e,t,n){n!=null&&n.length!==0&&e.set(t,c(n,"conditional",s))}function _(e,t,n){if(n!=null){var r=d(n);p(e,t,r)}}function f(e,t,n){if(n!=null){var r=d(n?1:0);p(e,t,r)}}function g(e,t,n){n!=null&&e.set(t,m(n))}function h(e,t,n){if(n!=null){var r="";n.forEach(function(e,t){r+=m(e),t<n.length-1&&(r+=", ")}),e.set(t,r)}}function y(e){var t="";return e.forEach(function(e,n){t=t+n+": "+e+"\r\n"}),t}function C(e){return o("WABase64").encodeB64UrlSafe(e)}function b(e){switch(e){case o("MAWMsgType").MSG_TYPE.TEXT:return o("EchoMessage").EchoXMessageContentType.TEXT;case o("MAWMsgType").MSG_TYPE.IMAGE:return o("EchoMessage").EchoXMessageContentType.IMAGE;case o("MAWMsgType").MSG_TYPE.VIDEO:return o("EchoMessage").EchoXMessageContentType.VIDEO;case o("MAWMsgType").MSG_TYPE.PTT:return o("EchoMessage").EchoXMessageContentType.AUDIO;case o("MAWMsgType").MSG_TYPE.STICKER:return o("EchoMessage").EchoXMessageContentType.STICKER;case o("MAWMsgType").MSG_TYPE.GIF:return o("EchoMessage").EchoXMessageContentType.GIF;case o("MAWMsgType").MSG_TYPE.XMA:return o("EchoMessage").EchoXMessageContentType.XMA;case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return o("EchoMessage").EchoXMessageContentType.DOCUMENT;case o("MAWMsgType").MSG_TYPE.REACTION:return o("EchoMessage").EchoXMessageContentType.REACTION;case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return o("EchoMessage").EchoXMessageContentType.EPHEMERAL_SETTINGS;case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:return o("EchoMessage").EchoXMessageContentType.EPHEMERAL_SYNC_RESPONSE;case o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:return o("EchoMessage").EchoXMessageContentType.MESSAGE_DELETE_FOR_ME;case o("MAWMsgType").MSG_TYPE.REVOKED:return o("EchoMessage").EchoXMessageContentType.UNSEND;case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:return o("EchoMessage").EchoXMessageContentType.GROUP_INVITES;case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return o("EchoMessage").EchoXMessageContentType.BUMP;default:return o("EchoMessage").EchoXMessageContentType.UNKNOWN}}l.echoSetStringField=p,l.echoSetIntField=_,l.echoSetBooleanField=f,l.echoSetAddressField=g,l.echoSetAddressListField=h,l.echoEncodeFields=y,l.convertMediaKeyToString=C,l.convertDbMsgTypeToXMessageContentType=b}),98);
__d("EchoMessage",["$InternalEnum","EchoCommonUtils","EchoDecodingUtils","EchoEncodingUtils","EchoMessageMediaFieldUtils","EchoMessageMediaGroupFieldUtil","EchoMessageQuoteFieldUtils","EchoMessageReceiptStatusFieldUtils","EchoMessageXMAFieldUtils","FBLogger","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f="Message-ID",g="Thread-ID",h="Sort-Order",y="Display-Timestamp",C="Authoritative-Timestamp",b="From",v="Text",S="Text-Size",R="Send-Error",L="Is-Tombstoned",E="Expire-Timestamp",k="Delete-Timestamp",I="Ephemeral-Duration",T="Message-Content-Type",D="X-Message-Content-Type",x="Message-Content-Subtype",$="Is-Forwarded",P="X-Offline-Threading-ID",N="X-Thread-ID",M="X-Message-Placeholder-Type",w="Reactions",A="Reaction-Authoritative-Timestamps",F="X-Reaction-Offline-Threading-IDs",O="Echo-Serialization-Origin",B="Revoke-Sent-Timestamp",W="Revoke-Unsent-Timestamp",q="Edit-Count",U="Edit-Contents-",V="Edit-Timestamps-",H="Group-ID",G="Group-Index",z="Group-Size",j="Receiver-Fetch-Id",K="Message-Ephemerality-Type",Q=1,X=(_=n("$InternalEnum"))({NONE:"none",SMALL:"small",MEDIUM:"medium",LARGE:"large"}),Y=_({NONE:"none",UNSEND:"unsend"}),J=_({DECRYPTION_FAILURE:"decryption_failure",UNSUPPORTED_NEEDS_UPDATE:"unsupported_needs_update",TEXT:"text",ADMIN_MESSAGE:"admin_message",MEDIA:"media",XMA:"xma",NULL_STATE:"null_state",PLACEHOLDER:"placeholder"}),Z=_({UNKNOWN:"unknown",TEXT:"text",IMAGE:"image",VIDEO:"video",AUDIO:"audio",STICKER:"sticker",GIF:"gif",URL:"url",EPHEMERAL_SETTINGS:"ephemeral_settings",LOCATION:"location",DOCUMENT:"document",UNSEND:"unsend",SCREENSHOT_ACTION:"screenshot_action",REACTION:"reaction",XMA:"xma",VISUAL_MESSAGE_VIDEO:"visual_message_video",VISUAL_MESSAGE_IMAGE:"visual_message_image",VISUAL_MESSAGE_ACTION:"visual_message_action",SCREEN_RECORDING_ACTION:"screen_recording_action",MESSAGE_DELETE_FOR_ME:"message_delete_for_me",ENCRYPTED_BACKUP_NEW_DEVICE_ENROLLMENT:"encrypted_backup_new_device_enrollment",SENDER_KEY:"sender_key",DELETE_THREAD:"delete_thread",READ_THREAD:"read_thread",UNREAD_THREAD:"unread_thread",REACTION_UNSEND:"reaction_unsend",GROUP_INVITES:"group_invites",EPHEMERAL_SYNC_RESPONSE:"ephemeral_sync_response",BUMP:"bump"}),ee=_({NO_PLACEHOLDER:"0",DECRYPTION_FAILURE:"-1",CLIENT_NOT_SUPPORTED_NEED_UPDATE:"-2",UNAVIALABLE_DEVICE:"-3"}),te=_({UNKNOWN:"Unknown",WEB:"Web",MOBILE:"Mobile"});function ne(e){var t=new Map;return de(t,e),"mediaData"in e&&e.mediaData&&o("EchoMessageMediaFieldUtils").echoMessageSetMediaMetadataFields(t,e.mediaData),o("EchoEncodingUtils").echoEncodeFields(t)}function re(e,t){var n,r=[],a=0,i=new Set;return t.forEach(function(n,a,l){var s=a.startsWith(U),u=a.startsWith(V);if(s||u){var c=a.slice(s?U.length:V.length);if(!i.has(c)){var d,m;i.add(c);var p=(d=o("EchoDecodingUtils").echoDecodeStringField(t,""+U+c).result)!=null?d:"",_=((m=o("EchoDecodingUtils").echoDecodeIntField(t,""+V+c).result)!=null?m:0)/1e3;r.push({messageId:c,originalMessageId:e,text:p,timestamp:_})}}}),a=(n=o("EchoDecodingUtils").echoDecodeIntField(t,q).result)!=null?n:0,{editCount:a,editHistory:r}}function oe(t){var n=o("EchoDecodingUtils").echoDecodeFields(t);if(n.size===0)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] fieldsMap is empty for the echo message"]))),null;var a=o("EchoDecodingUtils").echoDecodeStringField(n,f),i=o("EchoDecodingUtils").echoDecodeStringField(n,g),l=o("EchoDecodingUtils").echoDecodeIntField(n,h),_=o("EchoDecodingUtils").echoDecodeIntField(n,y),q=o("EchoDecodingUtils").echoDecodeStringField(n,T),U=o("EchoDecodingUtils").echoDecodeStringField(n,D),V=o("EchoDecodingUtils").echoDecodeStringField(n,x);if(a.success&&i.success&&l.success){var H=a.result;if(H==null)throw r("FBLogger")("messenger_web").mustfixThrow("The decoded messageId cannot be null");var G=i.result;if(G==null)throw r("FBLogger")("messenger_web").mustfixThrow("The decoded threadId cannot be null");var z=q==null?void 0:q.result;if(z==null)throw r("FBLogger")("messenger_web").mustfixThrow("The decoded contentTypeString cannot be null");var X=re(H,n),Z=X.editCount,ee=X.editHistory,te={contentSubtype:se(V.result),contentType:ie(z),displayTimestampMs:_.success?_.result:l.result,editCount:Z,editHistory:ee,messageId:H,sortOrderMs:l.result,threadId:G},ne=le(U.result);ne!=null&&(te.xContentType=ne);var oe=o("EchoDecodingUtils").echoDecodeAddressField(n,b);oe.success&&oe.result!=null&&(te.from=oe.result);var de=o("EchoDecodingUtils").echoDecodeNullableBooleanField(n,L);de.success&&de.result!=null&&(te.isTombstoned=de.result);var me=o("EchoDecodingUtils").echoDecodeStringField(n,v);me.success&&me.result!=null&&(te.text=me.result);var pe=o("EchoDecodingUtils").echoDecodeStringField(n,S);if(pe.success&&pe.result!=null){var _e=ae(pe.result);te.textSize=_e}var fe=o("EchoDecodingUtils").echoDecodeStringField(n,M);if(fe.success&&fe.result!=null){var ge=ue(fe.result);te.xMessagePlaceholderType=ge}var he=o("EchoDecodingUtils").echoDecodeStringField(n,R);he.success&&he.result!=null&&(te.sendError=he.result);var ye=o("EchoDecodingUtils").echoDecodeNullableIntField(n,E);ye.success&&ye.result!=null&&(te.expireTimestampMs=ye.result);var Ce=o("EchoDecodingUtils").echoDecodeNullableIntField(n,k);Ce.success&&Ce.result!=null&&(te.deleteTimestampMs=Ce.result);var be=o("EchoDecodingUtils").echoDecodeNullableIntField(n,I);be.success&&be.result!=null&&(te.ephemeralDurationInSec=be.result);var ve=o("EchoDecodingUtils").echoDecodeStringField(n,K);ve.success&&ve.result!=null&&ve.result==="view_once"&&(te.viewOnce=!0);var Se=o("EchoDecodingUtils").echoDecodeNullableIntField(n,C);Se.success&&Se.result!=null&&(te.authoritativeTimestampMs=Se.result);var Re=o("EchoMessageReceiptStatusFieldUtils").echoMessageDecodeReceiptStatusDataFields(n);Re.length>0&&(te.receiptStatusList=Re);var Le=o("EchoDecodingUtils").echoDecodeNullableBooleanField(n,$);Le.success&&Le.result!=null&&(te.isForwarded=Le.result),o("EchoMessageMediaGroupFieldUtil").decodeMessageMediaGroupFields(n,te);var Ee=o("EchoDecodingUtils").echoDecodeStringField(n,P);Ee.success&&Ee.result!=null&&(te.xOfflineThreadingId=Ee.result);var ke=o("EchoDecodingUtils").echoDecodeStringField(n,N);ke.success&&ke.result!=null&&(te.xThreadId=ke.result);var Ie=o("EchoDecodingUtils").echoDecodeStringField(n,O);Ie.success&&Ie.result!=null&&(te.serializationOrigin=ce(Ie.result));var Te=o("EchoDecodingUtils").echoDecodeNullableIntField(n,o("EchoCommonUtils").ECHO_COMMON_FIELD_DOCUMENT_VERSION);te.version=Te.success&&Te.result!=null?Te.result:Q;var De=o("EchoDecodingUtils").echoDecodeAddressListField(n,w);De.success&&De.result!=null&&(te.reactions=De.result);var xe=o("EchoDecodingUtils").echoDecodeAddressListField(n,A);xe.success&&xe.result!=null&&(te.reactionAuthoritativeTimestampMs=xe.result);var $e=o("EchoDecodingUtils").echoDecodeAddressListField(n,F);$e.success&&$e.result!=null&&(te.reactionXOfflineThreadingIds=$e.result);var Pe=o("EchoMessageQuoteFieldUtils").echoMessageDecodeQuoteFields(n);Pe!=null&&(te.quoteData=Pe);var Ne=(te==null?void 0:te.contentType)===J.XMA&&n.has(o("EchoMessageMediaFieldUtils").ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_TYPE)&&(n.has(o("EchoMessageMediaFieldUtils").ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_ID)||n.has(o("EchoMessageMediaFieldUtils").ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_IDS)),Me=n.has(j);if(n.has(j)){var we=o("EchoMessageMediaFieldUtils").decodeReceiverFetchData(n),Ae=o("EchoDecodingUtils").echoDecodeStringField(n,j),Fe=Ae.result,Oe=Ae.success;we==null||!Oe||Fe==null?o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to decode media data for Receiver Fetch, Message origin: ",""])),te.serializationOrigin):(te.receiverFetchData=we,te.receiverFetchId=Fe)}if(((te==null?void 0:te.contentType)===J.MEDIA||Ne)&&!Me){var Be=o("EchoMessageMediaFieldUtils").echoMessageDecodeMediaDataFields(n,te==null?void 0:te.contentType,te==null?void 0:te.xContentType),We="[labyrinth_web] mandatory media data is missing from media message, msgId: "+te.messageId+".";Be!=null?(Be.length!==1&&Be.length!==2&&((te==null?void 0:te.contentType)===J.MEDIA&&o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""])),We,te.serializationOrigin),(te==null?void 0:te.contentType)===J.XMA&&o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""])),We,te.serializationOrigin)),te.mediaData=Be[0],Be.length===2&&(te.previewMediaData=Be[1])):((te==null?void 0:te.contentType)===J.MEDIA&&o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""])),We,te.serializationOrigin),(te==null?void 0:te.contentType)===J.XMA&&o("WALogger").WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose([""," Message origin: ",""])),We,te.serializationOrigin))}if(te.contentType===J.PLACEHOLDER&&te.contentSubtype===Y.UNSEND){var qe=o("EchoDecodingUtils").echoDecodeNullableIntField(n,B);qe.success&&qe.result!=null&&(te.revokeSentTimestampMs=qe.result);var Ue=o("EchoDecodingUtils").echoDecodeNullableIntField(n,W);Ue.success&&Ue.result!=null&&(te.revokeUnsentTimestampMS=Ue.result)}if(te.contentType===J.XMA){var Ve=o("EchoMessageXMAFieldUtils").decodeXMAFields(n);if(Ve!=null)te.xmaData=Ve;else return o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mandatory xma data is missing from xma message, msgId: ",""])),te.messageId),null}return te}else return null}function ae(e){var t;return(t=X.cast(e))!=null?t:X.NONE}function ie(e){var t;return(t=J.cast(e))!=null?t:J.TEXT}function le(e){return Z.cast(e)}function se(e){var t;return(t=Y.cast(e))!=null?t:Y.NONE}function ue(e){var t;return(t=ee.cast(e))!=null?t:ee.NO_PLACEHOLDER}function ce(e){var t;return(t=te.cast(e))!=null?t:te.UNKNOWN}function de(e,t){var n,r;(r=o("EchoEncodingUtils")).echoSetStringField(e,f,t.messageId),r.echoSetStringField(e,g,t.threadId),r.echoSetIntField(e,h,t.sortOrderMs),r.echoSetIntField(e,y,t.displayTimestampMs),r.echoSetIntField(e,C,t.authoritativeTimestampMs),r.echoSetAddressField(e,b,t.from),r.echoSetStringField(e,v,t.text),t.textSize!=null&&o("EchoEncodingUtils").echoSetStringField(e,S,t.textSize),t.xMessagePlaceholderType!=null&&o("EchoEncodingUtils").echoSetStringField(e,M,t.xMessagePlaceholderType),o("EchoEncodingUtils").echoSetStringField(e,R,t.sendError),o("EchoEncodingUtils").echoSetBooleanField(e,L,t.isTombstoned),o("EchoEncodingUtils").echoSetIntField(e,E,t.expireTimestampMs),o("EchoEncodingUtils").echoSetIntField(e,k,t.deleteTimestampMs),o("EchoEncodingUtils").echoSetIntField(e,I,t.ephemeralDurationInSec),t.contentType!=null&&o("EchoEncodingUtils").echoSetStringField(e,T,t.contentType),t.xContentType!=null&&o("EchoEncodingUtils").echoSetStringField(e,D,t.xContentType),o("EchoMessageReceiptStatusFieldUtils").echoMessageSetReceiptStatusDataFields(e,t.receiptStatusList),o("EchoEncodingUtils").echoSetBooleanField(e,$,t.isForwarded),o("EchoEncodingUtils").echoSetStringField(e,P,t.xOfflineThreadingId),o("EchoEncodingUtils").echoSetStringField(e,N,t.xThreadId),o("EchoEncodingUtils").echoSetIntField(e,o("EchoCommonUtils").ECHO_COMMON_FIELD_DOCUMENT_VERSION,t.version),t.contentSubtype!=null&&o("EchoEncodingUtils").echoSetStringField(e,x,t.contentSubtype),o("EchoEncodingUtils").echoSetAddressListField(e,w,t.reactions),o("EchoEncodingUtils").echoSetAddressListField(e,A,t.reactionAuthoritativeTimestampMs),o("EchoEncodingUtils").echoSetAddressListField(e,F,t.reactionXOfflineThreadingIds),o("EchoMessageQuoteFieldUtils").echoMessageSetQuoteFields(e,t),t.serializationOrigin!=null&&o("EchoEncodingUtils").echoSetStringField(e,O,t.serializationOrigin),t.revokeSentTimestampMs!=null&&o("EchoEncodingUtils").echoSetIntField(e,B,t.revokeSentTimestampMs),t.revokeUnsentTimestampMS!=null&&o("EchoEncodingUtils").echoSetIntField(e,W,t.revokeUnsentTimestampMS),o("EchoMessageMediaGroupFieldUtil").echoMessageSetMediaGroupFields(e,t);var a=t.xmaData;a!=null&&o("EchoMessageXMAFieldUtils").echoMessageSetXMAFields(e,a),((n=t.editHistory)==null?void 0:n.length)>0&&(o("EchoEncodingUtils").echoSetIntField(e,q,t.editCount),t.editHistory.forEach(function(t){var n=t.messageId;n!=null&&(o("EchoEncodingUtils").echoSetStringField(e,U+n,t.text),o("EchoEncodingUtils").echoSetIntField(e,V+n,t.timestamp*1e3))})),t.receiverFetchId!=null&&o("EchoEncodingUtils").echoSetStringField(e,j,t.receiverFetchId)}l.ECHO_SERIALIZATION_ORIGIN=O,l.ECHO_MESSAGE_FIELD_NAME_EDIT_COUNT=q,l.ECHO_MESSAGE_FIELD_NAME_EDIT_CONTENT_PREFIX=U,l.ECHO_MESSAGE_FIELD_NAME_EDIT_TS_PREFIX=V,l.ECHO_MESSAGE_FIELD_GROUP_ID=H,l.ECHO_MESSAGE_FIELD_GROUP_INDEX=G,l.ECHO_MESSAGE_FIELD_GROUP_SIZE=z,l.ECHO_MESSAGE_FIELD_RECEIVER_FETCH_ID=j,l.ECHO_MESSAGE_FIELD_NAME_EPHEMERALITY_TYPE=K,l.ECHO_MESSAGE_MIGRATION_DOCUMENT_VERSION=Q,l.MessageTextSize=X,l.EchoMessageContentSubtype=Y,l.EchoMessageContentType=J,l.EchoXMessageContentType=Z,l.EchoMessagePlaceholderType=ee,l.EchoSerializationOriginType=te,l.encodeEchoMessage=ne,l.decodeEchoMessage=oe}),98);
__d("EchoMessageMediaFieldUtils",["$InternalEnum","EchoDecodingUtils","EchoEncodingUtils","EchoMessage","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R="X-Object-Id",L="X-Attachment-Object-Ids",E="Attachment-Type",k="Content-Type",I="X-Encrypted-Hash",T="X-Attachment-Type",D="X-Backup-Ent-Fbid",x="X-Backup-Status",$="X-Content-Type",P="X-Direct-Path",N="Height",M="X-Media-Key",w="X-Media-Key-Timestamp",A="Playable-Duration",F="Preview-Height",O="Preview-Content-Type",B="Preview-Width",W="Size",q="Width",U="X-Plaintext-Hash",V="File-Name",H="Header-Attribution-Content-Type",G=(S=n("$InternalEnum"))({IMAGE:"image",STICKER:"sticker",VIDEO:"video",GIF:"animated_image",PTT:"audio",XMA:"xma",DOCUMENT:"document"}),z=S({IMAGE_JPEG:"image/jpeg",IMAGE_PNG:"image/png",STICKER:"image/webp",GIF:"image/gif",AUDIO_MP4:"audio/mp4",AUDIO_WAV:"audio/wav",XMA:"xma"}),j=S({INVALID:"-1",IMAGE:"0",PTT:"1",AUDIO:"2",DOCUMENT:"3",VIDEO:"4",GIF:"5",STICKER:"6",PROFILE_PICTURE:"7",APP_STATE:"8",HISTORY_SYNC:"9",THUMBNAIL_IMAGE:"10",THUMBNAIL_VIDEO:"11",THUMBNAIL_GIF:"12",THUMBNAIL_DOCUMENT:"13",THUMBNAIL_LINK:"14",NOVI_IMAGE:"15",NOVI_VIDEO:"16",KYCID:"17",WAFFLE_IMAGE:"18",WAFFLE_VIDEO:"19",WAFFLE_GIF:"20",PAYMENT_BG_IMAGE:"21",XMA_IMAGE:"22",PAYMENT_BR_DOCUMENT:"23",BIZ_COVER_PHOTO:"24",MESSENGER_PREVIEW:"25"}),K=S({FULL:"full",PREVIEW:"preview"});function Q(t,n){var r=t.attachmentObjectId,a=t.attachmentType,i=t.backupEntFbid,l=t.directPath,p=t.filename,_=t.encryptedHash,f=t.height,g=t.mediaBackupStatus,h=t.mediaContentType,y=t.mediaKey,C=t.mediaKeyTimestamp,b=t.mediaPlayableDuration,v=t.plaintextHash,S=t.previewContentHeight,R=t.previewContentType,L=t.previewContentWidth,E=t.size,k=t.width,I=t.xAttachmentType,T=t.xContentType,D=t.xmaData,x=t.mediaEntryData;if(r==null)o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing attachment object id from required media metadata fields, msgId: ",""])),n);else if(a==null)o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing attachment type from required media metadata fields, msgId: ",""])),n);else if(l==null)o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing direct path field from required media metadata fields, msgId: ",""])),n);else if(v==null)o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing plaintextHash field from required media metadata fields, msgId: ",""])),n);else if(T==null)o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing xContentType field from required media metadata fields, msgId: ",""])),n);else if(I==null)o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing xAttachmentType field from required media metadata fields, msgId: ",""])),n);else return{attachmentObjectId:r,attachmentType:a,backupEntFbid:i,directPath:l,encryptedHash:_,filename:p,height:f,mediaBackupStatus:g,mediaContentType:h,mediaEntryData:x,mediaKey:y,mediaKeyTimestamp:C,mediaPlayableDuration:b,plaintextHash:v,previewContentHeight:S,previewContentType:R,previewContentWidth:L,size:E,width:k,xAttachmentType:I,xContentType:T,xmaData:D}}function X(e,t){var n;(n=o("EchoEncodingUtils")).echoSetStringField(e,R,t.attachmentObjectId),n.echoSetStringField(e,E,t.attachmentType),n.echoSetStringField(e,U,t.plaintextHash),n.echoSetStringField(e,I,t.encryptedHash),n.echoSetIntField(e,W,t.size),n.echoSetStringField(e,M,t.mediaKey),n.echoSetIntField(e,w,t.mediaKeyTimestamp),n.echoSetStringField(e,P,t.directPath),t.mediaContentType!=null&&o("EchoEncodingUtils").echoSetStringField(e,k,t.mediaContentType),o("EchoEncodingUtils").echoSetIntField(e,q,t.width),o("EchoEncodingUtils").echoSetIntField(e,N,t.height),t.previewContentType!=null&&o("EchoEncodingUtils").echoSetStringField(e,O,t.previewContentType),t.headerAttributionContentType!=null&&o("EchoEncodingUtils").echoSetStringField(e,H,t.headerAttributionContentType),o("EchoEncodingUtils").echoSetIntField(e,B,t.previewContentWidth),o("EchoEncodingUtils").echoSetIntField(e,F,t.previewContentHeight),o("EchoEncodingUtils").echoSetIntField(e,A,t.mediaPlayableDuration),t.xAttachmentType!=null&&o("EchoEncodingUtils").echoSetStringField(e,T,t.xAttachmentType),o("EchoEncodingUtils").echoSetStringField(e,$,t.xContentType),o("EchoEncodingUtils").echoSetStringField(e,D,t.backupEntFbid),o("EchoEncodingUtils").echoSetStringField(e,x,t.mediaBackupStatus),o("EchoEncodingUtils").echoSetStringField(e,V,t.filename)}function Y(e,t,n){var r={},a=!1,i=!1,l=!1;if(ne(e)){var s=re(e,t,n);if(s==null)return o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] multi blob media message: primary attachment object id is null. msgType: "," mediaType: ",""])),t,n),null;s.length!==2&&o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to get primary and secondary attachment object ids"])));var u=!1,c=!1,d=!1,m=s[0],f=s[1],g={};if(a=ee(e,r,m),u=ee(e,g,f),i=Z(e,r,t,m,m),c=Z(e,g,t,f,m),l=J(e,r,m),d=J(e,g,f),!a||!i||!l||!u||!c||!d)return null;var h=o("EchoDecodingUtils").echoDecodeStringField(e,"X-Offline-Threading-ID").result,y=Q(r,h),C=Q(g,h);if(y!=null&&C!=null)return[y,C]}else{if(a=ee(e,r),i=Z(e,r,t),l=J(e,r),!a||!i||!l)return null;var b=Q(r);if(b!=null)return[b]}return null}function J(e,t,n){var r,a=o("EchoDecodingUtils").echoDecodeStringField(e,"X-Offline-Threading-ID").result,i=(r=e.get(o("EchoMessage").ECHO_SERIALIZATION_ORIGIN))!=null?r:"",l=[{fieldName:"height",id:N},{fieldName:"width",id:q},{fieldName:"size",id:W},{fieldName:"previewContentHeight",id:F},{fieldName:"previewContentWidth",id:B},{fieldName:"mediaKeyTimestamp",id:n!=null?n+"-"+w:w}],s=[{attachmentTypes:[j.VIDEO,j.AUDIO],fieldName:"mediaPlayableDuration",id:A}];for(var u of s){var c=u.attachmentTypes,d=u.fieldName,m=u.id,p=o("EchoDecodingUtils").echoDecodeIntField(e,m),_=p.result,g=p.success;if(g&&_!=null)t[d]=_;else if(!(t.xAttachmentType!=null&&!te(c,t.xAttachmentType)||t.attachmentType===G.XMA))return o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields. xAttachmentType: ",", AttachmentType: ",". EchoOrigin: "," xOfflineThreadingId: ",""])),d,t.xAttachmentType,t.attachmentType,i,a),!1}return l.map(function(n){var r=n.fieldName,a=n.id,i=o("EchoDecodingUtils").echoDecodeIntField(e,a),l=i.result,s=i.success;s&&l!=null&&(t[r]=l)}),!0}function Z(e,t,n,r,a){var i,l=o("EchoDecodingUtils").echoDecodeStringField(e,"X-Offline-Threading-ID").result,s,u,c,d=(i=e.get(o("EchoMessage").ECHO_SERIALIZATION_ORIGIN))!=null?i:"",m=[{fieldName:"filename",id:V}];r!=null&&a!=null?(t.attachmentObjectId=r,s=[{fieldName:"plaintextHash",id:r+"-"+U},{fieldName:"directPath",id:r+"-"+P},{fieldName:"xContentType",id:r+"-"+$}],m.push({fieldName:"mediaKey",id:r+"-"+M}),u=a+"-"+D,c=r+"-"+I):(s=[{fieldName:"attachmentObjectId",id:R},{fieldName:"plaintextHash",id:U},{fieldName:"directPath",id:P},{fieldName:"xContentType",id:$}],m.push({fieldName:"mediaKey",id:M}),u=D,c=I),m.push({fieldName:"backupEntFbid",id:u}),m.push({fieldName:"mediaContentType",id:k}),m.push({fieldName:"encryptedHash",id:c});var p=a!=null?a+"-"+x:x;m.push({fieldName:"mediaBackupStatus",id:p});var _=[];for(var f of s){var y=f.fieldName,C=f.id,b=o("EchoDecodingUtils").echoDecodeStringField(e,C),v=b.result,S=b.success;S&&v!=null?t[y]=v:_.push(y)}if(_.length>0){var L=_.join(", ");return n===o("EchoMessage").EchoMessageContentType.XMA?o("WALogger").WARN(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields. AttachmentType: "," EchoOrigin: ",""])),L,t.attachmentType,d):o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields. AttachmentType: "," EchoOrigin: "," xOfflineThreadingId: ",""])),L,t.attachmentType,d,l),!1}return m.map(function(n){var r=n.fieldName,a=n.id,i=o("EchoDecodingUtils").echoDecodeStringField(e,a),l=i.result,s=i.success;s&&l!=null&&(t[r]=l)}),!0}function ee(e,t,n){var r,a=o("EchoDecodingUtils").echoDecodeStringField(e,"X-Offline-Threading-ID").result,i=(r=e.get(o("EchoMessage").ECHO_SERIALIZATION_ORIGIN))!=null?r:"",l=o("EchoDecodingUtils").echoDecodeStringField(e,E),s=l.result==="file"?G.DOCUMENT:G.cast(l.result);s!=null&&(t.attachmentType=s);var u=o("EchoDecodingUtils").echoDecodeStringField(e,O),c=z.cast(u.result);c!=null&&(t.previewContentType=c);var d=o("EchoDecodingUtils").echoDecodeStringField(e,H),m=d.result;m!=null&&(t.headerAttributionContentType=m);var p=o("EchoDecodingUtils").echoDecodeStringField(e,n!=null?n+"-"+T:T),_=null;return p.success&&p.result!=null&&(_=oe(p.result),_!=null&&(t.xAttachmentType=_)),s!=null&&(c!=null||s===G.DOCUMENT||s===G.PTT)?!0:(o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing enum fields from media fields: attachmentType: "," mediaPreviewContentType: "," mediaAttachmentType: "," EchoOrigin: "," xOfflineThreadingId: ",""])),s,c,p,i,a),!1)}function te(e,t){return e.reduce(function(e,n){return e||n===t},!1)}function ne(e){return e.has(L)}function re(e,t,n){var r=o("EchoDecodingUtils").echoDecodeObjectIdListField(e,L),a=r.result,i=r.success;if(!i||a==null||a.length!==2)return o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] multi blob media message: can not parse objects ids. "," msgType: "," mediaType: ",""])),a,t,n),null;var l=a.find(function(t){var n=t+"-"+x,r=o("EchoDecodingUtils").echoDecodeStringField(e,n),a=r.result,i=r.success;if(i&&a!=null)return!0});if(l!=null){var s=l===a[0]?a[1]:a[0];return[l,s]}if(l=a.find(function(t){var n=t+"-"+$,r=o("EchoDecodingUtils").echoDecodeStringField(e,n),a=r.result,i=r.success;if(i&&a!=null&&K.cast(a)===K.FULL)return!0}),l!=null){var u=l===a[0]?a[1]:a[0];return[l,u]}return a}function oe(e){var t=j.cast(e);return t==null&&o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Invalid media attachment type: ",""])),e),t!=null?t:j.INVALID}function ae(e){var t={},n=ee(e,t);if(!n)return null;var r=o("EchoDecodingUtils").echoDecodeStringField(e,k),a=o("EchoDecodingUtils").echoDecodeIntField(e,N),i=o("EchoDecodingUtils").echoDecodeIntField(e,q),l=o("EchoDecodingUtils").echoDecodeStringField(e,E);return!r.success||!a.success||!i.success||!l.success||r.result==null||a.result==null||i.result==null||l.result==null?(o("WALogger").ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing media fields for receiver fetch"]))),null):{mimetype:r.result,previewHeight:a.result,previewWidth:i.result,type:l.result}}l.ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_ID=R,l.ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_OBJECT_IDS=L,l.ECHO_MESSAGE_FIELD_NAME_ATTACHMENT_TYPE=E,l.AttachmentType=G,l.EchoMessageMediaPreviewType=z,l.EchoMessageActMediaAttachmentType=j,l.convertMediaMetadataDetailsToMediaMetadata=Q,l.echoMessageSetMediaMetadataFields=X,l.echoMessageDecodeMediaDataFields=Y,l.setMediaIntFields=J,l.setMediaEnumFields=ee,l.getAttachmentObjectIdsFromMultiBlobMediaMsg=re,l.decodeReceiverFetchData=ae}),98);
__d("EchoMessageMediaGroupFieldUtil",["EchoDecodingUtils","EchoEncodingUtils","EchoMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){t.groupId!=null&&o("EchoEncodingUtils").echoSetStringField(e,o("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_ID,t.groupId),t.groupIndex!=null&&o("EchoEncodingUtils").echoSetIntField(e,o("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_INDEX,t.groupIndex),t.groupSize!=null&&o("EchoEncodingUtils").echoSetIntField(e,o("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_SIZE,t.groupSize)}function s(e,t){var n=o("EchoDecodingUtils").echoDecodeStringField(e,o("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_ID);n.success&&n.result!=null&&(t.groupId=n.result);var r=o("EchoDecodingUtils").echoDecodeIntField(e,o("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_INDEX);r.success&&r.result!=null&&(t.groupIndex=r.result);var a=o("EchoDecodingUtils").echoDecodeIntField(e,o("EchoMessage").ECHO_MESSAGE_FIELD_GROUP_SIZE);a.success&&a.result!=null&&(t.groupSize=a.result)}l.echoMessageSetMediaGroupFields=e,l.decodeMessageMediaGroupFields=s}),98);
__d("EchoMessageQuoteFieldUtils",["$InternalEnum","EchoDecodingUtils","EchoEncodingUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="Reply-Message-Id",s="Reply-Message-Sender",u="Reply-Sort-Order",c="Reply-Type",d="Reply-Status",m=n("$InternalEnum").Mirrored(["BUMP"]),p=n("$InternalEnum")({VALID:"valid"});function _(e){var t={quoteMessageId:"<not set>",quoteMessageSender:{localKey:"<not set>",transportKey:"<not set>"},quoteSortOrderInMs:0},n=g(e,t),r=h(e,t),o=y(e,t),a=C(e,t);return!n||!r||!o||!a?null:t}function f(t,n){var r=n.quoteData;r!=null&&(o("EchoEncodingUtils").echoSetStringField(t,e,r.quoteMessageId),o("EchoEncodingUtils").echoSetAddressField(t,s,r.quoteMessageSender),o("EchoEncodingUtils").echoSetIntField(t,u,r.quoteSortOrderInMs),r.status!=null&&o("EchoEncodingUtils").echoSetStringField(t,d,r.status),r.replyType!=null&&o("EchoEncodingUtils").echoSetStringField(t,c,r.replyType))}function g(e,t){var n=[{fieldName:"quoteMessageSender",id:s}];for(var r of n){var a=r.fieldName,i=r.id,l=o("EchoDecodingUtils").echoDecodeAddressField(e,i),u=l.result,c=l.success;if(c&&u!=null)t[a]=u;else return!1}return!0}function h(t,n){var r=[{fieldName:"quoteMessageId",id:e}];for(var a of r){var i=a.fieldName,l=a.id,s=o("EchoDecodingUtils").echoDecodeStringField(t,l),u=s.result,c=s.success;if(c&&u!=null)n[i]=u;else return!1}return!0}function y(e,t){var n=[{fieldName:"quoteSortOrderInMs",id:u}];for(var r of n){var a=r.fieldName,i=r.id,l=o("EchoDecodingUtils").echoDecodeIntField(e,i),s=l.result,c=l.success;if(c&&s!=null)t[a]=s;else return!1}return!0}function C(e,t){var n=o("EchoDecodingUtils").echoDecodeStringField(e,c),r=m.cast(n.result);r!=null&&(t.replyType=r);var a=o("EchoDecodingUtils").echoDecodeStringField(e,d),i=p.cast(a.result);return i!=null&&(t.status=i),!0}l.EchoMessageQuoteReplyType=m,l.EchoMessageQuoteStatus=p,l.echoMessageDecodeQuoteFields=_,l.echoMessageSetQuoteFields=f}),98);
__d("EchoMessageReceiptStatusFieldUtils",["$InternalEnum","EchoCommonUtils","EchoDecodingUtils","EchoEncodingUtils","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s="Receipt-Status",u="Receipt-Timestamp",c=n("$InternalEnum")({UNKNOWN:"unknown",SENDING:"sending",SERVER_RECEIVED:"server_received",DELIVERED:"delivered",READ:"read",ERROR:"error",NON_RETRYABLE_ERROR:"non_retryable_error"});function d(e,t){t==null||t.length===0||t.forEach(function(t){o("EchoEncodingUtils").echoSetStringField(e,o("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(t.address,s),t.status),t.timestampMs!=null&&o("EchoEncodingUtils").echoSetIntField(e,o("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(t.address,u),t.timestampMs)})}function m(e){var t=[];return p(e).forEach(function(n){var r=o("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(n,s),a=o("EchoDecodingUtils").echoDecodeStringField(e,r);if(a.success){var i,l=(i=c.cast(a.result))!=null?i:c.UNKNOWN,d=o("EchoCommonUtils").getEchoAddressFieldNameWithSuffix(n,u),m=o("EchoDecodingUtils").echoDecodeNullableIntField(e,d);m.result!=null?t.push({address:n,status:l,timestampMs:m.result}):t.push({address:n,status:l})}}),t}function p(t){var n=new Set;for(var r of t.keys())if(r.includes(s))try{var a=r.split("@"),i=a[0],l=_(a[1]);n.add({localKey:i,transportKey:l})}catch(t){o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Error occurred while decoding participants from echo doc, error: ",""])),t)}return Array.from(n)}function _(e){var t=e.split(s);return t[0].split("-")[0]}l.MessageReceiptStatus=c,l.echoMessageSetReceiptStatusDataFields=d,l.echoMessageDecodeReceiptStatusDataFields=m}),98);
__d("EchoMessageXMAFieldUtils",["$InternalEnum","EchoDecodingUtils","EchoEncodingUtils","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d="XMA-Default-CTA",m="XMA-Gating-Type",p="XMA-Header-Subtitle",_="XMA-Header-Title",f="XMA-Is-Tombstoned",g="XMA-Layout-Type",h="XMA-Max-Subtitle-Num-Lines",y="XMA-Max-Title-Num-Lines",C="XMA-Subtitle-Text",b="XMA-Target-Expiry",v="XMA-Target-ID",S="XMA-Target-Type",R="XMA-Target-Username",L="XMA-Title-Text",E="XMA-Content-Ref",k="XMA-Dataclass",I=n("$InternalEnum").Mirrored(["SINGLE","HSCROLL","VSTACK","PORTRAIT","STANDARD_DXMA","LIST_DXMA","GRID"]),T=n("$InternalEnum").Mirrored(["NONE","IG_STORY_PHOTO_MENTION","IG_SINGLE_IMAGE_POST_SHARE","IG_MULTIPOST_SHARE","IG_SINGLE_VIDEO_POST_SHARE","IG_STORY_PHOTO_SHARE","IG_STORY_VIDEO_SHARE","IG_CLIPS_SHARE","IG_IGTV_SHARE","IG_SHOP_SHARE","IG_PROFILE_SHARE","IG_STORY_PHOTO_HIGHLIGHT_SHARE","IG_STORY_VIDEO_HIGHLIGHT_SHARE","IG_STORY_REPLY","IG_STORY_REACTION","FB_FEED_SHARE","FB_STORY_REPLY","FB_STORY_SHARE","FB_STORY_MENTION","FB_FEED_VIDEO_SHARE","FB_GAMING_CUSTOM_UPDATE","FB_PRODUCER_STORY_REPLY","FB_PROFILE_DIRECTORY_ITEM","FB_FEED_POST_REACTION_REPLY","MSG_EXTERNAL_LINK_SHARE","MSG_RECEIVER_FETCH","RTC_AUDIO_CALL","RTC_VIDEO_CALL","RTC_MISSED_AUDIO_CALL","RTC_MISSED_VIDEO_CALL","RTC_GROUP_AUDIO_CALL","RTC_GROUP_VIDEO_CALL","FB_EVENT","FB_SHORT","MSG_LOCATION_SHARING","MSG_LOCATION_SHARING_V2","MSG_MEMORIES_SHARE"]),D=n("$InternalEnum").Mirrored(["NONE","PRIVATE","SENSITIVE","MISINFORMATION","MEDIA_LABEL","POST_COVER","POST_LABEL","WARNING_SCREENS","INFO","EYE_OFF","NEWS_OFF","WARNING"]);function x(e,t){t.xmaLayoutType!=null&&o("EchoEncodingUtils").echoSetStringField(e,g,t.xmaLayoutType),t.xmaTargetType!=null&&o("EchoEncodingUtils").echoSetStringField(e,S,t.xmaTargetType),o("EchoEncodingUtils").echoSetStringField(e,R,t.xmaTargetUsername),o("EchoEncodingUtils").echoSetStringField(e,v,t.xmaTargetId),t.xmaTargetExpiry!=null&&o("EchoEncodingUtils").echoSetIntField(e,b,t.xmaTargetExpiry),o("EchoEncodingUtils").echoSetStringField(e,d,t.xmaDefaultCTA),o("EchoEncodingUtils").echoSetStringField(e,_,t.xmaHeaderTitle),o("EchoEncodingUtils").echoSetStringField(e,p,t.xmaHeaderSubtitle),o("EchoEncodingUtils").echoSetStringField(e,L,t.xmaTitleText),o("EchoEncodingUtils").echoSetStringField(e,C,t.xmaSubtitleText),t.xmaMaxTitleNumLines!=null&&o("EchoEncodingUtils").echoSetIntField(e,y,t.xmaMaxTitleNumLines),t.xmaMaxSubtitleNumLines!=null&&o("EchoEncodingUtils").echoSetIntField(e,h,t.xmaMaxSubtitleNumLines),t.xmaGatingType!=null&&o("EchoEncodingUtils").echoSetStringField(e,m,t.xmaGatingType),t.xmaDataclass!=null&&o("EchoEncodingUtils").echoSetStringField(e,k,t.xmaDataclass),o("EchoEncodingUtils").echoSetBooleanField(e,f,t.xmaIsTombstoned),t.xmaContentRef!=null&&o("EchoEncodingUtils").echoSetStringField(e,E,t.xmaContentRef)}function $(t){var n=M(t,f);if(n==null)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing xmaIsTombstoned from xma fields"]))),null;var r=D.cast(o("EchoDecodingUtils").echoDecodeStringField(t,m).result),a=I.cast(o("EchoDecodingUtils").echoDecodeStringField(t,g).result),i=T.cast(o("EchoDecodingUtils").echoDecodeStringField(t,S).result);return{xmaContentRef:P(t,E),xmaDataclass:P(t,k),xmaDefaultCTA:P(t,d),xmaGatingType:r,xmaHeaderSubtitle:P(t,p),xmaHeaderTitle:P(t,_),xmaIsTombstoned:n,xmaLayoutType:a,xmaMaxSubtitleNumLines:N(t,h),xmaMaxTitleNumLines:N(t,y),xmaSubtitleText:P(t,C),xmaTargetExpiry:N(t,b),xmaTargetId:P(t,v),xmaTargetType:i,xmaTargetUsername:P(t,R),xmaTitleText:P(t,L)}}function P(e,t){var n=o("EchoDecodingUtils").echoDecodeStringField(e,t),r=n.result,a=n.success;if(a&&r!=null)return r;o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from media fields"])),t)}function N(e,t){var n=o("EchoDecodingUtils").echoDecodeIntField(e,t),r=n.result,a=n.success;if(a&&r!=null)return r;o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from xma fields"])),t)}function M(e,t){var n=o("EchoDecodingUtils").echoDecodeBooleanField(e,t),r=n.result,a=n.success;if(a&&r!=null)return r;o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Missing "," from xma fields"])),t)}l.XMALayoutType=I,l.XMAContentType=T,l.XMAGatingType=D,l.echoMessageSetXMAFields=x,l.decodeXMAFields=$}),98);
__d("validateMAWMediaAndComposeEntryForProtoMsg",["FBLogger","WAMediaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("DbMedia is null in validateMediaAndComposeEntryForProtoMsg");var n=null;if(e!=null&&t.mediaId!=null){if(!t.msgIds.includes(e))throw r("FBLogger")("messenger_web").mustfixThrow("the media ("+t.mediaId+") is not linked to the msg ("+e+")");n=t.mediaEntries.get(e)}else n=t.mediaEntry;if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("media entry not found in validateMediaAndComposeEntryForProtoMsg");var o=t.plaintextHash,a=s(o,n);return[t,a]}function s(e,t){var n=o("WAMediaUtils").mediaEntryDataToRawData(e,t);if(n.fileSha256==null||n.mediaKey==null||n.fileEncSha256==null||n.directPath==null||n.mediaKeyTimestamp==null)throw r("FBLogger")("messenger_web").mustfixThrow("missing fields in mediaEntryData");return babelHelpers.extends({},n,{directPath:n.directPath,fileEncSha256:n.fileEncSha256,fileSha256:n.fileSha256,mediaKey:n.mediaKey,mediaKeyTimestamp:n.mediaKeyTimestamp})}l.validateMAWMediaAndComposeEntryForProtoMsg=e,l.validateMediaEntry=s}),98);
__d("MAWAsArmadilloApplication",["FBLogger","MAWEncodeMediaTransportProtocol","MAWMsg","MAWMsgType","MAWVault","MAWXMAEncodeUtils","WAArmadilloApplication.pb","WAGlobals","WAJids","WATimeUtils","getErrorSafe","validateMAWMediaAndComposeEntryForProtoMsg"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,a){switch(e.type){case o("MAWMsgType").MSG_TYPE.XMA:{if((t==null?void 0:t.xma)==null)throw r("FBLogger")("messenger_web").mustfixThrow("XMA content should have XMA payload");var i=o("MAWXMAEncodeUtils").encodeXMA(e,t);return i}case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return u(e,n);case o("MAWMsgType").MSG_TYPE.RAVEN:return p(e,a);case o("MAWMsgType").MSG_TYPE.RAVEN_ACTION:return d(e);default:throw r("FBLogger")("messenger_web").mustfixThrow(e.type+" should not be handled as ArmadilloApplication")}}function u(e,t){var n;if(e.type!==o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE||((n=e.quote)==null?void 0:n.content)==null||t==null)return null;var r=e.quote.content,a=o("WAJids").interpretAndValidateJid(t),i=o("WAJids").isAuthorMe(e.author)?o("WAGlobals").getMyUserJid():e.author,l=o("WAJids").isAuthorMe(r.author)?o("WAGlobals").getMyUserJid():r.author;function s(){return a.jidType==="msgrUser"?l:a.jidType==="group"?a.groupJid:null}function u(){return i===l?null:a.jidType==="group"?l:null}var c=s(),d=u();if(c==null)return null;if(e)return{payload:{content:{bumpExistingMessage:{key:{fromMe:i===l,id:r.externalId,participant:d,remoteJid:c}}}}}}function c(e){var t,n,r,a=(t=e.quote)==null?void 0:t.content,i=a==null||(n=a.msgContent)==null?void 0:n.content,l=a==null?void 0:a.expirationTs,s=e==null||(r=e.msgContent)==null?void 0:r.content;if(a==null||i==null||s==null)return null;var u=l!=null?o("WATimeUtils").castUnixTimeToMillisTime(l):void 0;return{payload:{content:{noteReplyMessage:{noteText:{text:o("MAWVault").unvault(i)},noteTimestampMs:u,textContent:{text:o("MAWVault").unvault(s)}}}}}}function d(e){var t=e.ravenActionToMsgExternalId;if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("msg ravenActionToMsgExternalId is null in encodeRavenActionMessage");var n=Number(e.actionType),a;if(n===0)a=o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE.PLAYED;else if(n===1)a=o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE.SCREENSHOT;else if(n===2)a=o("WAArmadilloApplication.pb").ARMADILLO_CONTENT_RAVEN_ACTION_NOTIF_MESSAGE_ACTION_TYPE.FORCE_DISABLE;else throw r("FBLogger")("messenger_web").mustfixThrow("msg actionType is not in enum in encodeRavenActionMessage");var i=e.actionTimestamp==null?Date.now():o("WATimeUtils").castUnixTimeToMillisTime(e.actionTimestamp),l={actionTimestamp:i,actionType:a,key:{id:t}};return{payload:{content:{ravenActionNotifMessage:l}}}}function m(e){return e===o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE?0:e===o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY?1:e===o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT?2:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}function p(t,n){if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("media is null in encodeRavenMessage");var a,i;try{var l=o("validateMAWMediaAndComposeEntryForProtoMsg").validateMAWMediaAndComposeEntryForProtoMsg(t.msgId,n);a=l[0],i=l[1]}catch(t){var s=r("getErrorSafe")(t);r("FBLogger")("messenger_web").DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Media entry is invalid, fallback to the placeholder: ",""])),s.message),a=void 0,i=void 0}if(a==null||i==null)return{payload:{content:{ravenMessageMsgr:{ephemeralType:m(t.ravenEphemeralType)}}}};switch(t.ravenMediaType){case o("MAWMsg").MAWRavenMsgMediaType.IMAGE:{var u=o("MAWEncodeMediaTransportProtocol").encodeValidatedMediaToImageTransport(a,i);return{payload:{content:{ravenMessageMsgr:{ephemeralType:m(t.ravenEphemeralType),imageMessage:{payload:u,version:1}}}}}}case o("MAWMsg").MAWRavenMsgMediaType.VIDEO:{var c=o("MAWEncodeMediaTransportProtocol").encodeValidatedMediaToVideoTransport(a,i);return{payload:{content:{ravenMessageMsgr:{ephemeralType:m(t.ravenEphemeralType),videoMessage:{payload:c,version:1}}}}}}}}l.asArmadilloApplication=s,l.encodeNoteReplyMessage=c}),98);
__d("MAWAsConsumerApplication",["FBLogger","I64","LSIntEnum","MAWDbMedia","MAWEncodeMediaTransportProtocol","MAWJids","MAWMsgType","MAWVault","WAAssertUnreachable","WAConsumerApplication.pb","WAGlobals","WAJids","WAMediaTransport.pb","encodeProtobuf","validateMAWMediaAndComposeEntryForProtoMsg"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n,a){switch(e.type){case o("MAWMsgType").MSG_TYPE.TEXT:return p(e);case o("MAWMsgType").MSG_TYPE.IMAGE:return _(e,t);case o("MAWMsgType").MSG_TYPE.VIDEO:return C(e,t);case o("MAWMsgType").MSG_TYPE.PTT:return v(e,t);case o("MAWMsgType").MSG_TYPE.REVOKED:return R(e.revokedExternalId);case o("MAWMsgType").MSG_TYPE.GIF:return C(e,t);case o("MAWMsgType").MSG_TYPE.STICKER:return h(e,t);case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return x(e,t);case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SYNC_RESPONSE:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE:case o("MAWMsgType").MSG_TYPE.SK_DISTRIBUTION:return null;case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:throw r("FBLogger")("messenger_web").mustfixThrow("Implemented ephemeral setting message in MAWAsConsumerApplication");case o("MAWMsgType").MSG_TYPE.XMA:throw r("FBLogger")("messenger_web").mustfixThrow("XMA content message is not consumer application. It should be addressed as ArmadilloApplication");case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:case o("MAWMsgType").MSG_TYPE.ADMIN:case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:case o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME:throw r("FBLogger")("messenger_web").mustfixThrow("We do not support converting to protoMsg with "+e.type+" type","maw_db");case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.RAVEN_ACTION:throw r("FBLogger")("messenger_web").mustfixThrow("Raven content message is not consumer application. It should be addressed as ArmadilloApplication");case o("MAWMsgType").MSG_TYPE.EDIT_ACTION:throw r("FBLogger")("messenger_web").mustfixThrow("We do not support editing messages right now since the sending flow is not implemented yet. ");case o("MAWMsgType").MSG_TYPE.GROUP_INVITE:return E(e,n);case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:throw r("FBLogger")("messenger_web").mustfixThrow("Bump message is not consumer application. It should be addressed as ArmadilloApplication");case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return T(e,a);case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:throw r("FBLogger")("messenger_web").mustfixThrow("We do not support group poll creation messages yet as the sending flow is not implemented.");case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:throw r("FBLogger")("messenger_web").mustfixThrow("We do not support group poll update messages yet as the sending flow is not implemented.");default:return r("WAAssertUnreachable")(e.type)}}function c(e,t){if(t==null)return d(e);switch(t.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:return f(e.msgId,t);case o("MAWDbMedia").MEDIA_TYPE.VIDEO:return b(e.msgId,t);case o("MAWDbMedia").MEDIA_TYPE.PTT:return S(e.msgId,t);case o("MAWDbMedia").MEDIA_TYPE.GIF:return b(e.msgId,t);case o("MAWDbMedia").MEDIA_TYPE.STICKER:return y(e.msgId,t);default:return null}}function d(e){var t=null;if(e.type===o("MAWMsgType").MSG_TYPE.REVOKED&&e.msgContent!=null&&e.msgContent.content!=null)t=e.msgContent.content;else if(e.type===o("MAWMsgType").MSG_TYPE.DELETE_FOR_ME&&e.msgContent!=null)t=e.msgContent;else return null;return{payload:{content:{messageText:{mentionedJid:[],text:o("MAWVault").unvault(t)}}}}}function m(e){if(e!=null){var t=e===1?o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.SMALL:e===2?o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.MEDIUM:o("WAConsumerApplication.pb").CONSUMER_APPLICATION_METADATA_SPECIAL_TEXT_SIZE.LARGE;return{specialTextSize:t}}}function p(e){var t={payload:{content:{messageText:{commands:e.msgContent.commands,mentionedJid:e.msgContent.mentionedJids,text:o("MAWVault").unvault(e.msgContent.content)}}}},n=m(e.specialTextSize);return n!=null&&(t.metadata=n),t}function _(e,t){return f(e.msgId,t,e)}function f(e,t,n){var r=o("validateMAWMediaAndComposeEntryForProtoMsg").validateMAWMediaAndComposeEntryForProtoMsg(e,t),a=r[0],i=r[1];return o("MAWEncodeMediaTransportProtocol").encodeValidatedImageMessage(a,i,n)}function g(e){function t(){var t=o("WAJids").validateGroupJid(e.threadJid);return t!=null?t:o("WAJids").isAuthorMe(e.author)?e.threadJid:o("WAGlobals").getMyUserJid()}var n=t();return{payload:{content:{editMessage:{key:{fromMe:!0,id:e.originalMsgExternalId,remoteJid:n},message:{mentionedJid:e.msgContent.mentionedJids,text:o("MAWVault").unvault(e.msgContent.content)},timestampMs:e.editTs*1e3}}}}}function h(e,t){return y(e.msgId,t)}function y(e,t){var n=o("validateMAWMediaAndComposeEntryForProtoMsg").validateMAWMediaAndComposeEntryForProtoMsg(e,t),r=n[0],a=n[1];return o("MAWEncodeMediaTransportProtocol").encodeValidatedStickerMessage(r,a)}function C(e,t){return b(e.msgId,t)}function b(e,t){var n=o("validateMAWMediaAndComposeEntryForProtoMsg").validateMAWMediaAndComposeEntryForProtoMsg(e,t),r=n[0],a=n[1];return o("MAWEncodeMediaTransportProtocol").encodeValidatedVideoMessage(r,a)}function v(e,t){return S(e.msgId,t)}function S(e,t){var n=o("validateMAWMediaAndComposeEntryForProtoMsg").validateMAWMediaAndComposeEntryForProtoMsg(e,t),r=n[0],a=n[1];return o("MAWEncodeMediaTransportProtocol").encodeValidatedAudioMessage(r,a)}function R(e){return{payload:{applicationData:{revoke:{key:{fromMe:!0,id:e}}}}}}function L(e){var t=o("WAJids").isAuthorMe(e.reactToAuthor)?o("WAGlobals").getMyUserJid():e.reactToAuthor;function n(){var n=o("WAJids").isAuthorMe(e.author)?o("WAGlobals").getMyUserJid():e.author;return n===t}var r=n(),a=o("WAJids").interpretAsGroupJid(e.threadJid)!=null,i={groupingKey:e.groupingKey==null?void 0:e.groupingKey,key:{fromMe:r,id:e.reactToExternalId,participant:a&&!r?t:void 0,remoteJid:e.threadJid},senderTimestampMs:e.senderTimestampMs,text:e.reaction==null?void 0:e.reaction};return{payload:{content:{reactionMessage:i}}}}function E(e,t){if(e.threadJid==null)throw r("FBLogger")("messenger_web").mustfixThrow("msg threadJid is null in encodeGroupInviteMessage");if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("DbGroupInvite is null in encodeGroupInviteMessage");var n=o("WAJids").interpretAsGroupJid(e.threadJid);if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("groupJid is null in encodeGroupInviteMessage");return{payload:{content:{groupInviteMessage:{groupJid:n,groupName:e.groupName,inviteCode:t.inviteCode,inviteExpiration:t.inviteExpirationTs}}}}}function k(t){return(e||(e=o("I64"))).equal(t.displayedContentTypes,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(t.displayedContentTypes,(s||(s=o("LSIntEnum"))).ofNumber(256))||t.textHasLinks||t.isUnsent?I(t):null}function I(e){var t,n=(t=e.mentionIds)==null||(t=t.split(","))==null?void 0:t.map(o("MAWJids").toUserJid);return{payload:{content:{messageText:{mentionedJid:n!=null?n:[],text:e.text}}}}}function T(e,t){if(e.receiverFetchId==null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot generate receiver fetch message without receiver fetch id");if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot generate receiver fetch message without receiver fetch info");switch(t.type){case"sticker":return D(t);default:throw r("FBLogger")("messenger_web").mustfixThrow("Unsupported receiver fetch type: "+t.type)}}function D(e){if(e.receiverFetchId==null)throw r("FBLogger")("messenger_web").mustfixThrow("Cannot generate receiver fetch sticker message without receiver fetch id");var t={ancillary:{accessibilityLabel:e.accessibilitySummaryText,height:e.previewHeight,isThirdParty:!1,receiverFetchId:e.receiverFetchId,width:e.previewWidth},integral:{receiverFetchId:e.receiverFetchId,transport:{ancillary:{mimetype:o("MAWEncodeMediaTransportProtocol").STICKER_MIME_TYPE,thumbnail:{thumbnailHeight:e.previewHeight,thumbnailWidth:e.previewWidth}},integral:{}}}},n=o("encodeProtobuf").encodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,t);return{payload:{content:{stickerMessage:{sticker:{payload:n.readBuffer(),version:1}}}}}}function x(e,t){return $(e.msgId,t)}function $(e,t){var n=o("validateMAWMediaAndComposeEntryForProtoMsg").validateMAWMediaAndComposeEntryForProtoMsg(e,t),r=n[0],a=n[1];return o("MAWEncodeMediaTransportProtocol").encodeValidatedFileMessage(r,a)}l.asConsumerApplication=u,l.deletedMsgAsConsumerApplicationForSpamReporting=c,l.encodeConsumerApplicationMetadata=m,l.encodeEditMessage=g,l.encodeReactionMessage=L,l.asConsumerApplicationLSDb=k,l.encodeReceiverFetchStickerMessage=D,l.encodeFileMessage=x}),98);
__d("MAWAsMessageApplication",["I64","LSIntEnum","LSMessageReplySourceTypeV2","MAWAsArmadilloApplication","MAWAsConsumerApplication","MAWJids","MAWMsgType","WAArmadilloApplication.pb","WAAsMessageApplication","WAConsumerApplication.pb","WAFranking","WAGlobals","WAJids","WAMsgApplication.pb","encodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e,t,n,r,a,i){return o("WAAsMessageApplication").castToMessageApplicationBytes(o("encodeProtobuf").encodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,c(e,t,n,r,a,i)).readByteArrayView())}function c(e,t,n,r,a,i){var l,s;switch(e.type){case o("MAWMsgType").MSG_TYPE.RAVEN:case o("MAWMsgType").MSG_TYPE.RAVEN_ACTION:l=o("MAWAsArmadilloApplication").asArmadilloApplication(e,void 0,void 0,t);break;case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:l=o("MAWAsArmadilloApplication").asArmadilloApplication(e,void 0,a);break;case o("MAWMsgType").MSG_TYPE.XMA:l=o("MAWAsArmadilloApplication").asArmadilloApplication(e,r);break;default:s=o("MAWAsConsumerApplication").asConsumerApplication(e,t,n,i)}var u,c,d=e.forwardingScore!=null?e.forwardingScore:0,m=e.isForwarded!=null?e.isForwarded:!1;if(e.quote!=null){var p=e.quote;u={participant:p.content.author===o("WAJids").AUTHOR_ME?o("WAGlobals").getMyDeviceJid():p.content.author,stanzaId:p.content.externalId}}if(e.ephemeralSetting){var _=e.ephemeralSetting;e.type===o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_CHANGE_FROM_CURRENT_DEVICE?c={ephemeralExpiration:_.ephemeralExpirationInSec,isEphemeralSettingReset:e.isEphemeralSettingReset}:c={ephemeralExpiration:_.ephemeralExpirationInSec,ephemeralSettingTimestamp:_.ephemeralLastUpdatedOrSetTimestamp*1e3}}var f={metadata:{chatEphemeralSetting:c,forwardingScore:d,frankingKey:y(e.reportingMeta),frankingVersion:o("WAFranking").getFrankingVersion(),groupId:e.groupId,groupIndex:e.groupIndex,groupSize:e.groupSize,isForwarded:m,quotedMessage:u}};if(s!=null){var g=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,s);f.payload={subProtocol:{consumerMessage:{payload:g.readBuffer(),version:1}}}}else if(l!=null){var h=o("encodeProtobuf").encodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,l);f.payload={subProtocol:{armadillo:{payload:h.readBuffer(),version:1}}}}return f}function d(t){var n,a=o("MAWAsConsumerApplication").asConsumerApplicationLSDb(t),i,l,u=t.isForwarded!=null?t.isForwarded:!1,c=u?1:0;t.replySourceTypeV2&&!(e||(e=o("I64"))).equal(t.replySourceTypeV2,(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessageReplySourceTypeV2").NONE))&&t.replyToUserId!=null&&(i={participant:t.replyToUserId===o("WAJids").AUTHOR_ME?o("WAGlobals").getMyDeviceJid():o("MAWJids").toUserJid((e||(e=o("I64"))).to_string(t.replyToUserId)),stanzaId:t.messageId});var d={metadata:{chatEphemeralSetting:l,forwardingScore:c,frankingKey:o("WAFranking").createFrankingKey(),frankingVersion:o("WAFranking").getFrankingVersion(),groupId:(n=t==null?void 0:t.groupId)!=null?n:void 0,groupIndex:t.groupIndex!=null?(e||(e=o("I64"))).to_float(t.groupIndex):void 0,groupSize:t.groupSize!=null?(e||(e=o("I64"))).to_float(t.groupSize):void 0,isForwarded:u,quotedMessage:i}};if(a!=null){var m=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,a);d.payload={subProtocol:{consumerMessage:{payload:m.readBuffer(),version:1}}}}return d}function m(e){return o("WAAsMessageApplication").castToMessageApplicationBytes(o("encodeProtobuf").encodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,p(e)).readByteArrayView())}function p(e){var t=o("MAWAsConsumerApplication").encodeReactionMessage(e),n=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,t);return{metadata:{frankingKey:o("WAFranking").createFrankingKey(),frankingVersion:o("WAFranking").getFrankingVersion()},payload:{subProtocol:{consumerMessage:{payload:n.readBuffer(),version:1}}}}}function _(e){var t=o("MAWAsArmadilloApplication").encodeNoteReplyMessage(e);if(t==null)return{metadata:{frankingKey:o("WAFranking").createFrankingKey(),frankingVersion:o("WAFranking").getFrankingVersion()}};var n=e.ephemeralSetting,r=n?{ephemeralExpiration:n.ephemeralExpirationInSec,ephemeralSettingTimestamp:n.ephemeralLastUpdatedOrSetTimestamp*1e3}:void 0,a=o("encodeProtobuf").encodeProtobuf(o("WAArmadilloApplication.pb").ArmadilloSpec,t);return{metadata:{chatEphemeralSetting:r,frankingKey:o("WAFranking").createFrankingKey(),frankingVersion:o("WAFranking").getFrankingVersion()},payload:{subProtocol:{armadillo:{payload:a.readBuffer(),version:1}}}}}function f(e){return o("WAAsMessageApplication").castToMessageApplicationBytes(o("encodeProtobuf").encodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,g(e)).readByteArrayView())}function g(e){var t=o("MAWAsConsumerApplication").encodeEditMessage(e),n=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,t);return{metadata:{frankingKey:o("WAFranking").createFrankingKey(),frankingVersion:o("WAFranking").getFrankingVersion()},payload:{subProtocol:{consumerMessage:{payload:n.readBuffer(),version:1}}}}}function h(e,t){var n,r,a=o("MAWAsConsumerApplication").deletedMsgAsConsumerApplicationForSpamReporting(e,t);if(a==null)return null;var i=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplicationSpec,a);return{metadata:{frankingKey:y(e.reportingMeta),frankingVersion:((n=e.reportingMeta)==null?void 0:n.frankingVersion)!=null?(r=e.reportingMeta)==null?void 0:r.frankingVersion:o("WAFranking").getFrankingVersion()},payload:{subProtocol:{consumerMessage:{payload:i.readBuffer(),version:1}}}}}function y(e){return(e==null?void 0:e.frankingKey)!=null?e.frankingKey:o("WAFranking").createFrankingKey()}l.encodeMessageApplication=u,l.asMessageApplication=c,l.asMessageApplicationLSDb=d,l.encodeReactionMessageApplication=m,l.asReactionMessageApplication=p,l.asNoteReplyMessageApplication=_,l.encodeEditMessageApplication=f,l.asEditMessageApplication=g,l.deletedMsgAsMessageApplicationForSpamReporting=h}),98);
__d("MAWXMAEncodeUtils",["MAWAsMessageApplication","MAWEncodeMediaTransportProtocol","MAWMsgType","MAWParseSubprotocolVersionConsts","MAWVault","WALogger","WAMsgApplication.pb","encodeProtobuf","validateMAWMediaAndComposeEntryForProtoMsg"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n){var r=o("validateMAWMediaAndComposeEntryForProtoMsg").validateMAWMediaAndComposeEntryForProtoMsg(e,t),a=r[0],i=r[1];return{payload:o("MAWEncodeMediaTransportProtocol").encodeValidatedMediaToImageTransport(a,i),version:n}}function u(t,n){var r=t.msgContent,a=t.msgId,i=r||{},l=i.commands,u=i.content,c=i.mentionedJids,d=n.associatedMessage,m=n.favicon,p=n.header,_=n.previews,f=n.xma,g=null;if(d!=null)if(d.type!==o("MAWMsgType").MSG_TYPE.TEXT)o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Non-text associated message for the XMA content is not supported"])));else{var h=o("MAWAsMessageApplication").asMessageApplication(d),y=o("encodeProtobuf").encodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,h);g={payload:y.readBuffer(),version:o("MAWParseSubprotocolVersionConsts").ASSOCIATED_MESSAGE_SUBPROTOCOL_VERSION}}var C=p!=null&&a!=null?s(a,p,o("MAWParseSubprotocolVersionConsts").XMA_HEADER_SUBPROTOCOL_VERSION):null,b=m!=null&&a!=null?s(a,m,o("MAWParseSubprotocolVersionConsts").XMA_FAVICON_SUBPROTOCOL_VERSION):null,v=_!=null&&a!=null?_.map(function(e){return s(a,e,o("MAWParseSubprotocolVersionConsts").XMA_PREVIEW_SUBPROTOCOL_VERSION)}):null,S=f.defaultCTA==null?void 0:[f.defaultCTA].concat(f.ctas).filter(Boolean);return{payload:{content:{extendedContentMessage:{associatedMessage:g!=null?g:void 0,commands:l,contentRef:f.contentRef,ctas:S,favicon:b!=null?b:void 0,headerImage:C!=null?C:void 0,headerTitle:f.headerTitle,maxSubtitleNumOfLines:f.maxSubtitleNumOfLines,maxTitleNumOfLines:f.maxTitleNumOfLines,mentionedJid:c,messageText:u==null?void 0:o("MAWVault").unvault(u),overlayDescription:f.overlayDescription,overlayIconGlyph:f.overlayIconGlyph,overlayTitle:f.overlayTitle,previews:v!=null?v:[],sentWithMessageId:g?f.externalId:void 0,subtitleText:f.subtitleText,targetExpiringAtSec:f.targetExpiringAtSec,targetId:f.targetId,targetType:f.targetType,targetUsername:f.targetUsername,titleText:f.titleText,xmaDataclass:f.xmaDataclass,xmaLayoutType:f.xmaLayoutType}}}}}l.encodeXMA=u}),98);
__d("MAWBulkEditMsgsTxns",["FBLogger","MAWAckLevel","MAWBridgeMsg","MAWDbEditMsgHistoryTxns","MAWDexieTable","MAWIndexedDb","MAWJidUtils","MAWLoadReplyMediaTxns","MAWUnsafeCoerce","MAWUserJidWrapper","WAJids","WAMsgMap","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=new Set,r=[];return t.forEach(function(e){var t=e.chatJid,o=e.msg;n.add(t),r.push(o.originalMsgExternalId)}),o("MAWDexieTable").dexieAll([e.messages.where("externalId").anyOf(r).toArray(),e.messages.where("quoteExternalId").anyOf(r).toArray(),e.editMsgHistory.where("originalMsgExternalId").anyOf(r).toArray()]).then(function(e){var t=e[0],n=e[1],r=e[2];return{editMsgHistory:r,originalMsgs:t,quoteMessages:n}})}function s(e,t,n){var a=n.editMsgHistory,i=n.originalMsgs,l=n.quoteMessages,s=i.reduce(function(e,t){var n=o("MAWJidUtils").toProtocolMsgId(t);return n==null?e:e.set(n,t)},new(o("WAMsgMap")).MsgMap),u=a.reduce(function(e,t){var n=o("MAWJidUtils").toProtocolMsgId(t);return n==null?e:e.set(n,t)},new(o("WAMsgMap")).MsgMap),d=c(t,{messageHistoriesToEdit:u,messagesToEdit:s}),m=d[0],p=d[1],_=d[2];return o("MAWDbEditMsgHistoryTxns").bulkAddEditMsgHistory(e,m).then(function(){var t=new(o("WAMsgMap")).MsgMap;p.entries().forEach(function(e){var n,a,i=e[0],l=e[1],u=s.get(i);if(u==null){r("FBLogger")("messenger_web").warn("Cannot find the original msg for the edit action.");return}if(u.type!==o("WAMsgType").MSG_TYPE.TEXT&&u.type!==o("WAMsgType").MSG_TYPE.CIPHERTEXT)throw r("FBLogger")("messenger_web").mustfixThrow("Only text or cipher text can be edited. Original msg type: %s",u.type);var c=babelHelpers.extends({},u,{editCount:((n=u.editCount)!=null?n:0)+((a=_.get(i))!=null?a:0),msgContent:l.editMsgContent,type:o("WAMsgType").MSG_TYPE.TEXT});t.set(i,c)});var n=l.map(function(e){var n=e.quote,a=e.quoteExternalId,i=e.threadJid;if(n==null){r("FBLogger")("messenger_web").warn("[edit message] Failed to get the quoted content for a msg that has been quoted.",e.externalId);return}var l=n.content.author,s=o("MAWJidUtils").maybeToProtocolMsgId(l==="@me"?o("MAWUserJidWrapper").getMyUserJid():l,i,a);if(s!=null){var u=t.get(s);if(u!=null)return babelHelpers.extends({},e,{quote:babelHelpers.extends({},n,{content:babelHelpers.extends({},n.content,{msgContent:babelHelpers.extends({},u.msgContent)})})})}}).filter(Boolean);return e.messages.bulkPut(t.values().concat(n)).then(function(){t.values().forEach(function(t){return o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(e,t).then(function(e){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(t,e)})})})}).then(function(){n.forEach(function(e){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(e)})})})})}function u(e,t){var n,a,i,l;switch(e.type){case o("WAMsgType").MSG_TYPE.TEXT:case o("WAMsgType").MSG_TYPE.EDIT_ACTION:return{author:e.author,editExternalId:e.externalId,editTs:(n=e.serverTs)!=null?n:e.ts,msgContent:(a=e.editMsgContent)!=null?a:o("MAWUnsafeCoerce").unsafeCoerce(e.msgContent),originalMsgExternalId:(i=e.originalMsgExternalId)!=null?i:e.externalId,sendStatus:o("MAWAckLevel").ACK.sent,specialTextSize:e.specialTextSize,threadJid:t};case o("WAMsgType").MSG_TYPE.CIPHERTEXT:return{author:e.author,editExternalId:e.externalId,editTs:(l=e.serverTs)!=null?l:e.ts,msgContent:{content:""},originalMsgExternalId:e.externalId,sendStatus:o("MAWAckLevel").ACK.sent,specialTextSize:e.specialTextSize,threadJid:t};default:throw e.type,r("FBLogger")("messenger_web").mustfixThrow("MAWBulkEditMsgsTxns::getMessageHistory: Unexpected msg type")}}function c(e,t){var n=t.messageHistoriesToEdit,a=t.messagesToEdit,i=[],l=new(o("WAMsgMap")).MsgMap,s=new(o("WAMsgMap")).MsgMap;return e.forEach(function(e){var t=e.chatJid,c=e.msg,d=o("MAWJidUtils").maybeToProtocolMsgId(c.author,t,c.originalMsgExternalId);if(d==null)throw r("FBLogger")("messenger_web").mustfixThrow("[protocolMsgId] Cannot get the protocol id for the edit action. isAuthorSystem = %s; chatJid = %s; externalId = %s",o("WAJids").isAuthorSystem(c.author),!!t,!!c.originalMsgExternalId);var m=o("MAWJidUtils").maybeToProtocolMsgId(c.author,t,c.externalId);if(m==null)throw r("FBLogger")("messenger_web").mustfixThrow("[editMsgProtocolMsgId] Cannot get the protocol id for the edit action. isAuthorSystem = %s; chatJid = %s; externalId = %s",o("WAJids").isAuthorSystem(c.author),!!t,!!c.externalId);if(n.get(m)==null){var p;i.push(u(c,t));var _=(p=s.get(d))!=null?p:0,f=a.get(d);if(s.set(d,_+1),n.get(d)==null&&_===0&&f!=null){if(f.type!==o("WAMsgType").MSG_TYPE.TEXT&&f.type!==o("WAMsgType").MSG_TYPE.CIPHERTEXT)throw r("FBLogger")("messenger_web").mustfixThrow("Only text or cipher text can be edited. Original msg type: %s",f.type);i.push(u(f,t))}}var g=l.get(d),h=g==null?void 0:g.serverTs,y=c==null?void 0:c.serverTs;(h==null||y==null||h<y)&&l.set(d,c)}),[i,l,s]}l.prepareDataForMessageEdit=e,l.bulkEditMsgs=s,l.getMessageHistory=u}),98);
__d("MAWBulkPutReactionsWithThreadUpdateTxn",["FBLogger","MAWDbReaction","MAWDbReactionsTxns","MAWDexieTable","MAWJidUtils","MAWThreadSnippetBuildTxns","WAArrayGroupBy","WAJids","WAMsgMap","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.reduce(function(e,t){var n=o("MAWJidUtils").maybeToProtocolMsgId(t.author,t.threadJid,t.reactToExternalId);return n==null||e.set(n,o("MAWDbReactionsTxns").coerceToReaction(t)),e},new(o("WAMsgMap")).MsgMap).values()}function s(t,n,a){if(n.length===0)return o("MAWDexieTable").dexieResolve();var i=e(n),l=i.map(function(e){var t=a.get(e.threadJid);if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Should not have got here - expect thread to exist for flow");return e}),s=o("WAArrayGroupBy").groupBy(l,function(e){var t=e.threadJid;return t}),u=s.map(function(e){var n=e[0],r=e[1],i=a.get(n);if(i==null||r.length===0)return null;for(var l=null,s=r.length-1;s>=0&&(l=o("MAWDbReaction").maybeCastToIncomingDbReaction(r[s]),l==null);s--);var u=r.filter(function(e){return e.reaction==null}),c=o("WAJids").interpretAsGroupJid(i.jid)!=null;return o("MAWThreadSnippetBuildTxns").getThreadChangesetForReactionChanges(t,i,{newestReaction:l,reactionsToClear:u},c)}).filter(Boolean);return o("MAWDexieTable").dexieAll(u).then(function(e){return o("MAWDexieTable").dexieAll([t.threads.bulkPut(e.map(function(e){var t=e.thread;return t})),t.reactions.bulkPut(l)]).then(r("emptyFunction"))})}l.bulkPutReactionsWithThreadUpdates=s}),98);
__d("MAWDeletedReactionsCache",["WAMsgMap"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("WAMsgMap")).MsgMap;l.DeletedReactionsCache=e}),98);
__d("MAWBulkWriteReactionsTxns",["FBLogger","LSMEBTaskCreationSource","MAWAuthor","MAWBridgeEventTransmitter","MAWBulkPutReactionsWithThreadUpdateTxn","MAWDbMsg","MAWDbReaction","MAWDbReactionsTxns","MAWDeletedReactionsCache","MAWDexieTable","MAWJidUtils","MAWODSProxy","MAWUseProtocolMsgIdForMsgId","WAArrayGroupBy","WAJids","WAOdsEnums","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=[],a=[];return t.forEach(function(e){var t=e.chatJid,r=e.unstoredReaction,o=r.reactToExternalId;n.push(t),a.push(o)}),o("MAWDexieTable").dexieAll([e.threads.where("jid").anyOf(n).toArray(),e.messages.where("externalId").anyOf(a).toArray(),e.reactions.where("reactToExternalId").anyOf(a).toArray()]).then(function(n){var a=n[0],i=n[1],l=n[2],u=new Map(a.map(function(e){return[e.jid,e]})),c=new Map(o("WAArrayGroupBy").groupBy(i,function(e){return e.externalId})),d=new Map(o("WAArrayGroupBy").groupBy(l,function(e){return e.reactToExternalId})),m=[],p=o("MAWUseProtocolMsgIdForMsgId").shouldUseProtocolMsgIdForMsgId(),_=function(n){return t.forEach(function(e){var t=e.chatJid,a=e.unstoredReaction,i=a.author,l=a.externalId,_=a.groupingKey,f=a.reaction,g=a.reactToAuthor,h=a.reactToExternalId,y=a.senderTimestampMs,C=a.ts,b=u.get(t);if(b==null)return"missing_thread";var v=null;if(!p&&n!=null){var S=new Map(n),R=S.get(b.jid);if(R==null)throw r("FBLogger")("messenger_web").mustfixThrow("nextInChatReactionId should not be null");S.set(b.jid,R+1),v=o("MAWDbMsg").craftReactionId(b.chatId,R)}else v=o("MAWJidUtils").formatProtocolMsgIdFromExternalId(b.jid,l);var L=d.get(a.reactToExternalId)||[],E=o("MAWDbReaction").findMatchingReaction(L,b.jid,i);if(E!=null&&o("MAWDbReaction").getReactionTimeMs(E)>o("MAWDbReaction").getReactionTimeMs(a))return"newer_reaction_exists";if(E!=null&&a.reaction==null){var k={author:a.author,chat:a.threadJid,externalId:a.externalId};o("MAWDeletedReactionsCache").DeletedReactionsCache.set(k,E)}var I=o("MAWAuthor").getAuthorUserJid(g),T=c.get(a.reactToExternalId);T==null&&(a.reactToExternalId===a.externalId?r("FBLogger")("messenger_web").warn("reactToExternalId is same as externalId"):r("gkx")("16596")||o("MAWBridgeEventTransmitter").issuePointQueryOutsideTxn(a.reactToExternalId,r("LSMEBTaskCreationSource").EB_POINT_QUERY_IN_ACT_REACTIONS,b.jid));var D=s(b,I,T),x=o("MAWDbReaction").formatReactionForDb(b.jid,l,v,h,f,_,g,D==null&&p?o("MAWJidUtils").formatProtocolMsgIdFromExternalId(b.jid,h):D==null?void 0:D.msgId,C,i!=null?i:o("WAJids").AUTHOR_ME,E==null?void 0:E.rowId,void 0,y);m.push(x)}),{chatJidToDbThread:u,unstoredDbReactionsForInsertion:m}};if(!p){var f=a.map(function(t){return o("MAWDbReactionsTxns").getNextReactionIdNumberForThread(e,t).then(function(e){return[t.jid,e]})});return o("MAWDexieTable").dexieAll(f).then(_)}return _(null)})}function s(e,t,n){var a,i=(a=n==null?void 0:n.filter(function(n){return n.threadJid===e.jid&&t===o("MAWAuthor").getAuthorUserJid(n.author)}))!=null?a:[];return i.length>1&&(r("FBLogger")("maw_mutation_validator").warn("%s matching duplicate messages found for a reaction",i.length),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_MUTATION_VALIDATOR,key:"match_reaction_to_message.invalid"})),i[0]}function u(e,t){var n=t.chatJidToDbThread,r=t.unstoredDbReactionsForInsertion;return o("MAWBulkPutReactionsWithThreadUpdateTxn").bulkPutReactionsWithThreadUpdates(e,r,n)}l.prepareReactionsData=e,l.bulkWriteReactions=u}),98);
__d("MAWConvertXMAGatingTypeToExtendedContentOverlayIconGlyph",["EchoMessageXMAFieldUtils","WAArmadilloXMA.pb","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){switch(t){case o("EchoMessageXMAFieldUtils").XMAGatingType.INFO:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.INFO;case o("EchoMessageXMAFieldUtils").XMAGatingType.EYE_OFF:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.EYE_OFF;case o("EchoMessageXMAFieldUtils").XMAGatingType.NEWS_OFF:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NEWS_OFF;case o("EchoMessageXMAFieldUtils").XMAGatingType.WARNING:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.WARNING;case o("EchoMessageXMAFieldUtils").XMAGatingType.PRIVATE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE;case o("EchoMessageXMAFieldUtils").XMAGatingType.NONE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE;default:return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid xmaGatingType: ",""])),t),o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE}}l.convertXMAGatingTypeToExtendedContentOverlayIconGlyph=s}),98);
__d("MAWConvertXMALayoutTypeToExtendedContentXMLLayoutType",["EchoMessageXMAFieldUtils","WAArmadilloXMA.pb","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){switch(t){case o("EchoMessageXMAFieldUtils").XMALayoutType.SINGLE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.SINGLE;case o("EchoMessageXMAFieldUtils").XMALayoutType.PORTRAIT:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.PORTRAIT;case o("EchoMessageXMAFieldUtils").XMALayoutType.HSCROLL:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.HSCROLL;case o("EchoMessageXMAFieldUtils").XMALayoutType.STANDARD_DXMA:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.STANDARD_DXMA;case o("EchoMessageXMAFieldUtils").XMALayoutType.LIST_DXMA:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.LIST_DXMA;case o("EchoMessageXMAFieldUtils").XMALayoutType.GRID:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.GRID;default:return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid xmaLayoutType: ",""])),t),o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_XMA_LAYOUT_TYPE.SINGLE}}l.convertXMALayoutTypeToExtendedContentXMLLayoutType=s}),98);
__d("MAWConvertXMATargetTypeToExtendedContentTargetType",["EchoMessageXMAFieldUtils","WAArmadilloXMA.pb","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){switch(t){case o("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_PHOTO_MENTION:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_MENTION;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_SINGLE_IMAGE_POST_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_IMAGE_POST_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_MULTIPOST_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_MULTIPOST_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_SINGLE_VIDEO_POST_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SINGLE_VIDEO_POST_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_PHOTO_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_VIDEO_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_CLIPS_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_CLIPS_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_IGTV_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_IGTV_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_SHOP_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_SHOP_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_PROFILE_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_PROFILE_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_PHOTO_HIGHLIGHT_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_PHOTO_HIGHLIGHT_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_VIDEO_HIGHLIGHT_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_VIDEO_HIGHLIGHT_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_REPLY:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REPLY;case o("EchoMessageXMAFieldUtils").XMAContentType.IG_STORY_REACTION:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.IG_STORY_REACTION;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_FEED_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_STORY_REPLY:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_STORY_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_STORY_MENTION:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_FEED_VIDEO_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_VIDEO_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_GAMING_CUSTOM_UPDATE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_GAMING_CUSTOM_UPDATE;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_PRODUCER_STORY_REPLY:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_PRODUCER_STORY_REPLY;case o("EchoMessageXMAFieldUtils").XMAContentType.MSG_EXTERNAL_LINK_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.RTC_AUDIO_CALL:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_AUDIO_CALL;case o("EchoMessageXMAFieldUtils").XMAContentType.RTC_VIDEO_CALL:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_VIDEO_CALL;case o("EchoMessageXMAFieldUtils").XMAContentType.RTC_MISSED_AUDIO_CALL:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_AUDIO_CALL;case o("EchoMessageXMAFieldUtils").XMAContentType.RTC_MISSED_VIDEO_CALL:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_MISSED_VIDEO_CALL;case o("EchoMessageXMAFieldUtils").XMAContentType.RTC_GROUP_AUDIO_CALL:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_AUDIO_CALL;case o("EchoMessageXMAFieldUtils").XMAContentType.RTC_GROUP_VIDEO_CALL:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.RTC_GROUP_VIDEO_CALL;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_EVENT:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_EVENT;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_SHORT:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_SHORT;case o("EchoMessageXMAFieldUtils").XMAContentType.MSG_RECEIVER_FETCH:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH;case o("EchoMessageXMAFieldUtils").XMAContentType.MSG_LOCATION_SHARING:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING;case o("EchoMessageXMAFieldUtils").XMAContentType.MSG_LOCATION_SHARING_V2:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_LOCATION_SHARING_V2;case o("EchoMessageXMAFieldUtils").XMAContentType.MSG_MEMORIES_SHARE:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_MEMORIES_SHARE;case o("EchoMessageXMAFieldUtils").XMAContentType.FB_FEED_POST_REACTION_REPLY:return o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_POST_REACTION_REPLY;default:return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid xmaTargetType: ",""])),t),o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE}}l.convertXMATargetTypeToExtendedContentTargetType=s}),98);
__d("MAWDexieCastToPromise",["Promise","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=n("Promise"))).resolve(t)}function u(e){return r("vulture")("Fs7u2qpGsgGUHBjaeXKvgOwLL5I="),e}l.dexieCastToPromise_I_KNOW_WHAT_I_AM_DOING=s,l.promiseCastToDexiePromise_I_KNOW_WHAT_I_AM_DOING=u}),98);
__d("MAWEchoToProtobufConversionLoggingUtils",["QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){r("QPLUserFlow").start(r("qpl")._(521484676,"2684"),{annotations:t,instanceKey:e})}function s(e,t,n){r("QPLUserFlow").endFailure(r("qpl")._(521484676,"2684"),t,{annotations:n,instanceKey:e})}function u(e,t){r("QPLUserFlow").endSuccess(r("qpl")._(521484676,"2684"),{annotations:t,instanceKey:e})}function c(e,t,n){n&&r("QPLUserFlow").addAnnotations(r("qpl")._(521484676,"2684"),n,{instanceKey:e}),r("QPLUserFlow").addPoint(r("qpl")._(521484676,"2684"),t,{instanceKey:e})}l.startQplUserFlow=e,l.endFailure=s,l.endSuccess=u,l.addPoint=c}),98);
__d("MAWGetMsgForProtocolMsgIdTxn",["MAWDbMsgTxns","MAWIndexedDb","MAWTransactionMode","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MAWIndexedDb").makeMsgrTransactor({messages:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"getMsgForProtocolMsgIdTxn",function(e){return function(t){return o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(e,t).then(function(e){return e!=null?o("WAResultOrError").makeResult(e):o("WAResultOrError").makeError("message-not-found")})}});l.getMsgForProtocolMsgIdTxn=e}),98);
__d("WACryptoAesGcm",["WABinary","WACryptoDependencies"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r,a){a===void 0&&(a=16);var i={name:"AES-GCM",iv:c(t),tagLength:a*8};return r!=null&&(i.additionalData=c(r)),o("WACryptoDependencies").getCrypto().subtle.encrypt(i,await u(e),n)}async function s(e,t,n,r,a){a===void 0&&(a=16);var i={name:"AES-GCM",iv:c(t),tagLength:a*8};return r!=null&&(i.additionalData=c(r)),o("WACryptoDependencies").getCrypto().subtle.decrypt(i,await u(e),n)}function u(e){return o("WACryptoDependencies").getCrypto().subtle.importKey("raw",e,"AES-GCM",!1,["encrypt","decrypt"])}function c(e){if(e instanceof Uint8Array)return e;if(typeof e=="string"){var t=new(o("WABinary")).Binary;return t.writeString(e),t.readByteArrayView()}return new Uint8Array(e)}l.gcmEncrypt=e,l.gcmDecrypt=s}),98);
__d("WAUseCaseSecret",["$InternalEnum","WABinary","WACryptoHkdf"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({POLL_VOTE:"Poll Vote",ENC_REACTION:"Enc Reaction",ENC_COMMENT:"Enc Comment",REPORT_TOKEN:"Report Token",EVENT_RESPONSE:"Event Response",EVENT_EDIT_ENCRYPTED:"Event Edit",MESSAGE_EDIT:"Message Edit"}),s=32;function u(e){var t=e.messageSecret,n=e.stanzaId,r=e.parentMsgOriginalSender,a=e.modificationSender,i=e.modificationType,l=o("WABinary").Binary.build(n,r,a,i).readBuffer();return o("WACryptoHkdf").extractAndExpand(t instanceof ArrayBuffer?new Uint8Array(t):t,l,s)}l.UseCaseSecretModificationType=e,l.createUseCaseSecret=u}),98);
__d("MAWGroupPollsDualEncryptionUtils",["MAWDbPoll","WABase64","WAConsumerApplication.pb","WACryptoAesGcm","WACryptoSha256","WAResultOrError","WAUseCaseSecret","decodeProtobuf","encodeProtobuf","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n){if(e.encIv==null||e.encPayload==null)return o("WAResultOrError").makeError("invalid_poll_enc_value");var a=e.encIv,i=e.encPayload;try{var l=await o("WACryptoAesGcm").gcmDecrypt(t,a,i,n);return o("WAResultOrError").makeResult(l)}catch(e){return o("WAResultOrError").DEPRECATED_makeError("decryption_error",r("getErrorSafe")(e))}}async function s(e,t,n){try{var a=self.crypto.getRandomValues(new Uint8Array(12)),i=await o("WACryptoAesGcm").gcmEncrypt(t,a,e,n);return o("WAResultOrError").makeResult({encIv:a.buffer,encPayload:i})}catch(e){return o("WAResultOrError").DEPRECATED_makeError("encryption_error",r("getErrorSafe")(e))}}function u(e,t){var n=e+"\0"+t;return new TextEncoder().encode(n).buffer}async function c(e,t){var n=t.pollCreationMessageKey,r=t.pollCreationSenderJid,a=t.pollCreationStanzaId,i=t.pollUpdateSenderJid,l=t.pollUpdateStanzaId,c=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:n,modificationSender:i,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:r,stanzaId:a}),d=u(l,i),m=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,e).readBuffer();return s(m,c,d)}async function d(t,n){var a=n.pollCreationMessageKey,i=n.pollCreationSenderJid,l=n.pollCreationStanzaId,s=n.pollUpdateSenderJid,c=n.pollUpdateStanzaId,d=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:a,modificationSender:s,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:i,stanzaId:l}),m=u(c,s),p=await e(t,d,m);if(!p.success)return p;try{return o("WAResultOrError").makeResult(o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollVoteMessageSpec,p.value))}catch(e){return o("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",r("getErrorSafe")(e))}}async function m(e,t){var n=t.pollCreationMessageKey,r=t.pollCreationSenderJid,a=t.pollCreationStanzaId,i=t.pollUpdateSenderJid,l=t.pollUpdateStanzaId,c=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:n,modificationSender:i,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:r,stanzaId:a}),d=u(l,i),m=o("encodeProtobuf").encodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,e).readBuffer();return s(m,c,d)}async function p(t,n){var a=n.pollCreationMessageKey,i=n.pollCreationSenderJid,l=n.pollCreationStanzaId,s=n.pollUpdateSenderJid,c=n.pollUpdateStanzaId,d=await o("WAUseCaseSecret").createUseCaseSecret({messageSecret:a,modificationSender:s,modificationType:o("WAUseCaseSecret").UseCaseSecretModificationType.POLL_VOTE,parentMsgOriginalSender:i,stanzaId:l}),m=u(c,s),p=await e(t,d,m);if(!p.success)return p;try{return o("WAResultOrError").makeResult(o("decodeProtobuf").decodeProtobuf(o("WAConsumerApplication.pb").ConsumerApplication$PollAddOptionMessageSpec,p.value))}catch(e){return o("WAResultOrError").DEPRECATED_makeError("protobuf_decode_error",r("getErrorSafe")(e))}}async function _(e){var t=await o("WACryptoSha256").sha256(new TextEncoder("utf8").encode(e));return f(t)}function f(e){return o("MAWDbPoll").convertStringToOptionHash(o("WABase64").encodeB64(e))}l.encryptGroupPollVote=c,l.decryptGroupPollVote=d,l.encryptGroupPollAddOption=m,l.decryptGroupPollAddOption=p,l.getHashForOptionName=_,l.getBase64EncodedHash=f}),98);
__d("MAWHandleXmaTransactionUtil",["MAWBridgeXMA","MAWDbChunkTxns","MAWDexieCastToPromise","MAWDexieTable","MAWIndexedDb","MAWTransactionMode"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){var n=!1;return e!=null&&t.defaultPreviewMediaId===e.mediaId&&(n=await _(e)),o("MAWBridgeXMA").createBridgeXMA(e,t,{hasMedia:n,hasXmaFaviconMedia:!1,hasXmaHeaderMedia:!1})}function s(e,t,n){return u(e,t,n).then(function(e){return o("MAWIndexedDb").afterTransaction({tag:"NewXMA",value:e})})}function u(e,t,n){var r=n==null?o("MAWDexieTable").dexieResolve(!1):o("MAWDbChunkTxns").hasMediaChunk(e,n.hashedPlaintextHash);return r.then(function(e){return o("MAWBridgeXMA").createBridgeXMA(n,t,{hasMedia:e,hasXmaFaviconMedia:!1,hasXmaHeaderMedia:!1})})}function c(e,t,n,r,a){return d(e,t,n,r,a).then(function(e){return o("MAWIndexedDb").afterTransaction({tag:"NewXMA",value:e})})}function d(e,t,n,r,a){var i=m(n,r,a,e);return i.then(function(e){var r=e.hasMedia,a=e.hasXmaFaviconMedia,i=e.hasXmaHeaderMedia;return o("MAWBridgeXMA").createBridgeXMA(n,t,{hasMedia:r,hasXmaFaviconMedia:a,hasXmaHeaderMedia:i})})}function m(e,t,n,r){if(e!=null||t!=null||n!=null){var a=[e,t,n].filter(Boolean).map(function(e){return e.hashedPlaintextHash});return o("MAWDbChunkTxns").hasMediaChunks(r,a).then(function(r){return{hasMedia:e!=null&&r.get(e.hashedPlaintextHash)===!0,hasXmaFaviconMedia:t!=null&&r.get(t.hashedPlaintextHash)===!0,hasXmaHeaderMedia:n!=null&&r.get(n.hashedPlaintextHash)===!0}})}else return o("MAWDexieTable").dexieResolve({hasMedia:!1,hasXmaFaviconMedia:!1,hasXmaHeaderMedia:!1})}function p(e,t,n,r,a){return o("MAWDexieCastToPromise").dexieCastToPromise_I_KNOW_WHAT_I_AM_DOING(m(e,t,n,a).then(function(t){var n=t.hasMedia,a=t.hasXmaFaviconMedia,i=t.hasXmaHeaderMedia;return o("MAWBridgeXMA").createBridgeXMA(e,r,{hasMedia:n,hasXmaFaviconMedia:a,hasXmaHeaderMedia:i})}))}var _=o("MAWIndexedDb").makeMsgrTransactor({chunk:o("MAWTransactionMode").READONLY},"MAWHandleXmaTransactionUtil.hasMediaChunkTransaction",function(e){return(function(t){return o("MAWDbChunkTxns").hasMediaChunk(e,t.hashedPlaintextHash)})});l.checkMediaChunkTransactionAndCreatedBridgeXma=e,l.checkMediaChunkAndHandleXmaAfterTransaction=s,l.checkMediaChunkAndCreatedBridgeXma=u,l.checkAllMediaChunksAndHandleXmaAfterTransaction=c,l.checkAllMediaChunksAndCreateBridgeXma=d,l.verifyAllMediaChunksForXMA=m,l.checkAllMediaChunksAndCreateBridgeXma_DEPRECATED=p}),98);
__d("MAWLegacyDownloadManager",[],(function(t,n,r,o,a,i){"use strict";var e=1e4,l=(function(){function t(){this.$1=[],this.$2=new Map}var n=t.prototype;return n.setToDownloadManager=function(t,n){this.$3(),this.$2.set(t,n),this.$1.push(t)},n.getFromDownloadManager=function(t){return this.$2.get(t)},n.removeFromMediaDownloadManager=function(t){this.$2.delete(t);var e=this.$1.filter(function(e){return e!==t});this.setDownloadManagerQueue(e)},n.setDownloadManagerQueue=function(t){this.$1=t},n.$3=function(){if(this.$1.length>=e){var t=this.$1.shift();this.$2.delete(t)}},t})();i.LegacyDownloadManager=l}),66);
__d("MAWLegacyMediaDownloadManager",["MAWLegacyDownloadManager"],(function(t,n,r,o,a,i,l){"use strict";var e=new(o("MAWLegacyDownloadManager")).LegacyDownloadManager,s=new(o("MAWLegacyDownloadManager")).LegacyDownloadManager;function u(t,n){e.setToDownloadManager(t,n)}function c(t){return e.getFromDownloadManager(t)}function d(t){e.removeFromMediaDownloadManager(t)}function m(e,t){s.setToDownloadManager(e,t)}function p(e){return s.getFromDownloadManager(e)}function _(e){s.removeFromMediaDownloadManager(e)}l.setToMediaDownloadManager=u,l.getFromMediaDownloadManager=c,l.removeFromMediaDownloadManager=d,l.setToMediaPlaintextDownloadManager=m,l.getFromMediaPlaintextDownloadManager=p,l.removeFromMediaPlaintextDownloadManager=_}),98);
__d("MAWMediaType",["WAServerMediaType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e){case"XMA":return"xma-image";case"EphemeralScreenshotAction":case"Raven":case"RavenAction":case"EditAction":case"NoteReply":case"BumpExistingMessage":return null;default:return o("WAServerMediaType").getMediaType(e)}}l.getMediaType=e}),98);
__d("MAWRavenUtils",["EphemeralMediaViewMode","MAWMsg","RavenMessagingState"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralMediaState.PERMANENT:return r("RavenMessagingState").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN:return r("RavenMessagingState").UNSEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN:return r("RavenMessagingState").SEEN;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.REPLAYED:return r("RavenMessagingState").REPLAYED;case o("MAWMsg").MAWRavenMsgEphemeralMediaState.EXPIRED:return r("RavenMessagingState").EXPIRED}},s=function(t){switch(t){case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return r("EphemeralMediaViewMode").PERMANENT;case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return r("EphemeralMediaViewMode").REPLAYABLE;case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return r("EphemeralMediaViewMode").READ_ONCE}},u=function(t,n){return{ephemeralMediaState:n,ephemeralMediaViewMode:s(t)}};function c(t,n){switch(n){case o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY:return t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN?r("RavenMessagingState").SEEN:t===o("MAWMsg").MAWRavenMsgEphemeralMediaState.SEEN?r("RavenMessagingState").REPLAYED:e(t);case o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT:return e(t)}}l.getEphemeralMediaState=e,l.getEphemeralMediaViewMode=s,l.deriveRavenSettings=u,l.getNextRavenMessageEphemeralState=c}),98);
__d("MAWMediaAfterTxns",["MAWBridgeTypesCreators","MAWDbMedia","MAWDexieTable","MAWIndexedDb","MAWMediaType","MAWMediaUtils","MAWMpsGating","MAWRavenUtils","MpsMediaEntryCache","MpsTypes","WAHashUtils","WAMediaUtils","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a,i,l,u){return a.messages.where("msgId").anyOf(t.msgIds).toArray().then(function(c){var d=e.threadJid,m=o("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(c,d),p=o("MAWMediaUtils").createHdTypesForBridgeMedia(c),_=e.ravenEphemeralType!=null&&e.ravenEphemeralMediaState!=null?o("MAWBridgeTypesCreators").createBridgeMedia({chatJid:d,filteredMsgIds:m,hasMediaForUI:n,hdTypes:p,media:t,ravenSettings:o("MAWRavenUtils").deriveRavenSettings(e.ravenEphemeralType,e.ravenEphemeralMediaState),sortOrderMs:e.sortOrderMs,transportKey:l}):o("MAWBridgeTypesCreators").createBridgeMedia({chatJid:d,filteredMsgIds:m,hasMediaForUI:n,hdTypes:p,media:t,sortOrderMs:e.sortOrderMs,transportKey:l});if(o("MAWMpsGating").isMpsMessageRendering()&&u===!0){var f,g,h,y=r("nullthrows")(t.mediaEntries.get(e.msgId)),C=o("WAMediaUtils").decodeMediaEntryData(y),b=(f=(g=t.validatedImageInfo)==null?void 0:g.thumbnailPlaintextHash)!=null?f:(h=t.validatedVideoInfo)==null?void 0:h.thumbnailPlaintextHash;if(b==null){var v=C.downloadableThumbnail;(v==null?void 0:v.fileSha256)!=null&&(b=o("WAHashUtils").toPlaintextHash(v.fileSha256))}o("MpsMediaEntryCache").storeEntry({decodedMediaEntry:C,mediaEntry:y,mediaKeyTimestamp:t.ts,message:{messageId:o("MpsTypes").toMessageId(e.externalId),threadId:o("MpsTypes").toThreadId(e.threadJid)},plaintextHash:t.plaintextHash,serverMediaType:r("nullthrows")(o("MAWMediaType").getMediaType(t.mediaType)),thumbnailHash:b})}return s(a,babelHelpers.extends({},_,{skipShouldUpdateHasMore:i}),void 0,u)})}function s(e,t,n,r){return u(t)?o("MAWMediaUtils").getBridgeMediaAnnotatedForDisplay(e,t,n).then(function(e){o("MAWIndexedDb").afterTransaction({tag:"NewMedia",value:e},r)}):(o("MAWIndexedDb").afterTransaction({tag:"NewMedia",value:t},r),o("MAWDexieTable").dexieResolve())}function u(e){if(e.ephemeralMediaState!=null||e.ephemeralMediaViewMode!=null)return!1;switch(e.mediaType){case o("MAWDbMedia").MEDIA_TYPE.IMAGE:case o("MAWDbMedia").MEDIA_TYPE.VIDEO:case o("MAWDbMedia").MEDIA_TYPE.GIF:case o("MAWDbMedia").MEDIA_TYPE.DOCUMENT_FILE:return!0;default:return!1}}l.handleNewMediaAfterTxn=e,l.handleNewMediaAfterTxnWithBridgeMedia=s}),98);
__d("MAWVideoAudioValidationUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e){return{audioAvgBitsPerSecond:e.audioAvgBitsPerSecond!=null?Math.round(e.audioAvgBitsPerSecond):null,audioNumberOfChannels:e.audioNumberOfChannels!=null?Math.round(e.audioNumberOfChannels):null,audioSamplingRate:e.audioSamplingRate!=null?Math.round(e.audioSamplingRate):null,audioStreamType:e.audioStreamType,validatedMimeType:e.validatedMimeType,videoAvgBitsPerSecond:e.videoAvgBitsPerSecond!=null?Math.round(e.videoAvgBitsPerSecond):null,videoCalculatedFps:e.videoCalculatedFps!=null?Math.round(e.videoCalculatedFps):null,videoDuration:e.videoDuration!=null?Math.round(e.videoDuration):null,videoHeight:e.videoHeight!=null?Math.round(e.videoHeight):null,videoNominalFps:e.videoNominalFps!=null?Math.round(e.videoNominalFps):null,videoStreamType:e.videoStreamType,videoWidth:e.videoWidth!=null?Math.round(e.videoWidth):null}}i.normalizeValidationResult=e}),66);
__d("MAWHandleMediaDownloadApi",["MAWBridgeMsg","MAWBridgeTypesCreators","MAWDbChunkTxns","MAWDbMedia","MAWDbMediaTxns","MAWDbMsgTxns","MAWDbXMATxns","MAWDexieTable","MAWGetMsgQuoteTxn","MAWHandleXmaTransactionUtil","MAWIndexedDb","MAWLegacyMediaDownloadManager","MAWLoadReplyMediaTxns","MAWLoggerUtils","MAWMediaAfterTxns","MAWMediaUtils","MAWMpsGating","MAWMsgType","MAWTransactionMode","MAWVideoAudioValidationUtils","MAWXMAUtils","MWFBLogger","Promise","WAArmadilloXMA.pb","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=o("MWFBLogger").MWMediaLogger().tags([o("MAWLoggerUtils").Tag.MediaDownload,o("MAWLoggerUtils").Tag.MessageReceive]);function p(t,r,a,i,l,c){m.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start persisting media blob"])));var p=t.db,_=o("MAWMediaUtils").genHMACPlaintextHash(r),f=t.persistChunk?o("MAWDbChunkTxns").getOrCreateMediaChunkWithPlaintextHash(t.db,r,i,a):null;return o("MAWDexieTable").dexieAll([o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(p,l),p.media.where("hashedPlaintextHash").equals(_).first(),f]).then(function(e){var t=e[0],l=e[1],_=e[2];if(l==null)return m.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Media is null when storing downloaded blob"]))),o("WAResultOrError").makeError("missing-media-on-save");var f,g=!1;return f=o("MAWLegacyMediaDownloadManager").getFromMediaPlaintextDownloadManager(r),f==null&&(f=o("MAWLegacyMediaDownloadManager").getFromMediaDownloadManager(l.mediaId),g=!0),f!=null&&(m.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["resolve MediaPlaintextDownloadManager promise"]))),f((d||(d=n("Promise"))).resolve(new Blob([i],{type:a}))),o("MAWLegacyMediaDownloadManager").removeFromMediaPlaintextDownloadManager(r),g&&o("MAWLegacyMediaDownloadManager").removeFromMediaDownloadManager(l.mediaId)),h(p,t).then(function(e){return e?p.messages.where("msgId").anyOf(l.msgIds).toArray().then(function(e){return o("MAWDbXMATxns").getXMAFromMsgs(p,e).then(function(e){return o("MAWDexieTable").dexieAll(e.map(function(e){if(!o("MAWXMAUtils").isXMAStoryReply(e.targetType)&&e.defaultPreviewMediaId===l.mediaId)return o("MAWHandleXmaTransactionUtil").checkMediaChunkAndHandleXmaAfterTransaction(p,e,l)}))}).then(function(){return e})}).then(function(e){return y(p,e)}):p.messages.where("msgId").anyOf(l.msgIds).toArray().then(function(e){return p.threads.where("jid").anyOf(e.map(function(e){return e.threadJid})).toArray().then(function(n){return o("MAWDexieTable").dexieAll(n.map(function(n){var r=o("MAWMediaUtils").createHdTypesForBridgeMedia(e),a=o("MAWBridgeTypesCreators").createBridgeMedia({chatJid:n.jid,filteredMsgIds:o("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(e,n.jid),hasMediaForUI:!0,hdTypes:r,media:l,sortOrderMs:t==null?void 0:t.sortOrderMs});return o("MAWMediaAfterTxns").handleNewMediaAfterTxnWithBridgeMedia(p,a,e)}))}).then(function(){return e})}).then(function(e){return y(p,e)})}).then(function(){var e,t,n,r,a,s,u,d,m,_,f,g=l.mediaType===o("MAWDbMedia").MEDIA_TYPE.VIDEO?o("MAWVideoAudioValidationUtils").normalizeValidationResult({audioAvgBitsPerSecond:c==null||(e=c.audioStreamReport)==null?void 0:e.avgBitsPerSecond,audioNumberOfChannels:c==null||(t=c.audioStreamReport)==null?void 0:t.numberOfChannels,audioSamplingRate:c==null||(n=c.audioStreamReport)==null?void 0:n.samplingRate,audioStreamType:c==null||(r=c.audioStreamReport)==null?void 0:r.streamType,validatedMimeType:c==null?void 0:c.mimeType,videoAvgBitsPerSecond:c==null||(a=c.videoStreamReport)==null?void 0:a.avgBitsPerSecond,videoCalculatedFps:c==null||(s=c.videoStreamReport)==null?void 0:s.calculatedFps,videoDuration:c==null||(u=c.videoStreamReport)==null?void 0:u.duration,videoHeight:c==null||(d=c.videoStreamReport)==null?void 0:d.videoHeight,videoNominalFps:c==null||(m=c.videoStreamReport)==null?void 0:m.nominalFps,videoStreamType:c==null||(_=c.videoStreamReport)==null?void 0:_.streamType,videoWidth:c==null||(f=c.videoStreamReport)==null?void 0:f.videoWidth}):void 0,h=o("MAWDbMediaTxns").updateMedia(p,l,{size:i.byteLength,validatedResult:g});return h}).then(function(){return o("WAResultOrError").makeResult()})})}var _=o("MAWIndexedDb").makeMsgrTransactor({chunk:(c=o("MAWTransactionMode")).READWRITE,media:c.READWRITE,messages:c.READONLY,receiverFetchInfo:c.READONLY,threads:c.READONLY,xma:c.READONLY},"handleMediaDownload",function(e){return(function(t,n,r,o,a){return p({db:e,persistChunk:!0},t,n,r,o,a)})}),f=o("MAWIndexedDb").makeMsgrTransactor({chunk:c.READONLY,media:c.READWRITE,messages:c.READONLY,receiverFetchInfo:c.READONLY,threads:c.READONLY,xma:c.READONLY},"handleMediaDownloadWithoutPersistChunk",function(e){return(function(t,n,r,o,a){return p({db:e,persistChunk:!1},t,n,r,o,a)})}),g=function(){return o("MAWMpsGating").isMpsMessageRendering()?f.apply(void 0,arguments):_.apply(void 0,arguments)};function h(e,t){var n;return t==null?o("MAWDexieTable").dexieResolve(!1):t.type===o("MAWMsgType").MSG_TYPE.XMA?o("MAWDexieTable").dexieResolve(!0):((n=t.quote)==null?void 0:n.content.xmaMessageType)===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY?o("MAWDexieTable").dexieResolve(t.type===o("MAWMsgType").MSG_TYPE.TEXT):o("MAWDbXMATxns").maybeGetXMAFromAssociatedMsgId(e,t.msgId).then(function(e){return e!=null})}function y(e,t){return o("MAWGetMsgQuoteTxn").maybeBatchGetMsgsByQuoteExternalId(e,t.map(function(e){return e.externalId})).then(function(t){return t.map(function(t){return t.source="eb_restore",o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(e,t).then(function(e){o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(t,e)})})})})}l.handleMediaDownload=g}),98);
__d("MAWMediaDownloadStatusForUI",["MAWBridge","MAWLoggerUtils","MAWMediaDownloadStatus","MWFBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=o("MWFBLogger").MWMediaLogger().tags([o("MAWLoggerUtils").Tag.MediaDownload,o("MAWLoggerUtils").Tag.MessageReceive]);function u(e){var t=e.details,n=e.hash,r=e.status,o=e.type,a=e.validationResult;c({details:t,hash:n,status:r,type:o,validationResult:a})}function c(e){var t=e.details,n=e.hash,r=e.status,a=e.type,i=e.validationResult;o("MAWBridge").getBridge().fireAndForget("event","updateMediaStatus",{details:t,key:n,status:r,type:a,validationResult:i})}function d(t){switch(t){case"disconnected":case"backoff":case"body-network-error":case"no-host":case"download-throttled":case"max-attempts-exceeded":case"runtime-error":case"access-expired":case"http-fetch-exception":case"http-fetch-aborted":case"unspecified-http-error":case"server-timeout":return r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE;case"request-error":case"media-not-found":case"media-entry-invalid":case"media-entry-invalid-direct-path":case"media-entry-invalid-file-enc-sha256":case"media-entry-invalid-file-sha256":case"media-entry-invalid-media-key":case"media-entry-invalid-server-media-type":case"decryption-error":case"enc-hash-mismatch":case"hash-mismatch":case"ciphertext-hash-mismatch":case"signature-expired":return r("MAWMediaDownloadStatus").NOT_MANUAL_RETRYABLE_FAILURE;default:return s.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["getStatusTypeFromWAAPIDownloadMediaError: Unknown error type ",""])),String(t)),r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE}}l.sendMediaDownloadStatusToUI=u,l.getStatusFromWAAPIDownloadMediaError=d}),98);
__d("MAWMediaBackupTxns",["FBLogger","MAWDbMediaTxns","MAWDexieTable","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=1;function m(t,n,a,i,l,p){return p===void 0&&(p=0),i==null?o("MAWDexieTable").dexieResolve():o("MAWDbMediaTxns").maybeGetMediaBackupRowFromObjectId(t,i).then(function(_){if(_==null){var f={mediaId:n,msgId:a,objectId:i};return l!=null&&(f=babelHelpers.extends({},f,{fbid:l})),t.mediaBackup.add(f).then(function(e){return babelHelpers.extends({},f,{mediaBackupId:e})}).catch(function(u){if(u.name==="ConstraintError"){if(p<d)return o("WALogger").WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to add mediaBackup entry. Will attempt a retry. Error: ",""])),u),m(t,n,a,i,l,p+1);throw r("FBLogger")("messenger_web").mustfixThrow("Failed to add mediaBackup entry. Original error: %s, %s",u.name,u.message)}throw o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to add mediaBackup entry: ",""])),u),u})}else{if(_.mediaId!==n||_.msgId!==a)return o("WALogger").WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] mediaId or msgId cannot differ for an objectId in mediaBackup"]))),_;if(_.fbid==null&&l!=null){var g=babelHelpers.extends({},_,{fbid:l});return t.mediaBackup.put(g).then(function(e){return g})}else o("WALogger").WARN(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] fbid already exists for objectId"])));return _}})}l.linkMediaBackup=m}),98);
__d("MAWMediaManagementTxns",["EBLogger","MAWBridgeTypesCreators","MAWDbChunkTxns","MAWDbMediaTxns","MAWDbMsgTxns","MAWDexieCastToPromise","MAWDexieTable","MAWMediaAfterTxns","MAWMediaBackupTxns","MAWMediaUtils","MAWMsgType","MAWODSProxy","MAWSupportedDocumentTypes","MAWWriteMsgTxns","MWFBLogger","WAErrorMessage","WAHashUtils","WAMediaUtils","WAOdsEnums","WASortedLists","WATimeUtils","emptyFunction","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g=o("MWFBLogger").MWMediaLogger().tags(["MAWMediaManagementTxns"]),h=r("gkx")("23924");function y(e,t,n,r){var a,i=n==null||t.type===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE&&(h||!o("MAWSupportedDocumentTypes").isAllowedType((a=n.validatedDocumentFileInfo)==null?void 0:a.filename));return o("MAWWriteMsgTxns").prepareMsgWriteData(e,t,r).then(function(e){return babelHelpers.extends({},e,{shouldDropDocument:i})})}function C(e,t,n,r,a){a===void 0&&(a=!1);var i={validatedAudioInfo:t.validatedAudioInfo,validatedDocumentFileInfo:t.validatedDocumentFileInfo,validatedImageInfo:t.validatedImageInfo,validatedVideoInfo:t.validatedVideoInfo},l=o("WAMediaUtils").decodeMediaEntryData(t.mediaEntry),s=l.objectId!=null?o("WAMediaUtils").stringToDeliveryObjectId(l.objectId):null;return R(e,n,r,t.plaintextHash,t.mediaType,t.size,t.mediaEntry,i,s,void 0,a,void 0,t.accessibilitySummaryText)}function b(e,t,n,r,a,i,l){a===void 0&&(a=!1),l===void 0&&(l=!0);var s=o("MAWMediaUtils").genHMACPlaintextHash(t.plaintextHash),u=o("WAMediaUtils").decodeMediaEntryData(t.mediaEntry),c=u.objectId!=null?o("WAMediaUtils").stringToDeliveryObjectId(u.objectId):null;return o("MAWDexieTable").dexieAll([L(e,n,r,c,void 0,a),o("MAWDbChunkTxns").hasMediaChunk(e,s)]).then(function(t){var r=t[0],o=t[1];return E(e,n,r,a,i,l,o)})}function v(e,t,n,r,a,i,l,s){a===void 0&&(a=!1),i===void 0&&(i=!1),s===void 0&&(s=!0);var u={validatedAudioInfo:t.validatedAudioInfo,validatedDocumentFileInfo:t.validatedDocumentFileInfo,validatedImageInfo:t.validatedImageInfo,validatedVideoInfo:t.validatedVideoInfo},c=o("MAWMediaUtils").genHMACPlaintextHash(t.plaintextHash),d=o("WAMediaUtils").decodeMediaEntryData(t.mediaEntry),m=d.objectId!=null?o("WAMediaUtils").stringToDeliveryObjectId(d.objectId):null;return o("MAWDexieTable").dexieAll([S(e,n,t.plaintextHash,t.mediaType,t.size,t.mediaEntry,u,m,void 0,a,t.accessibilitySummaryText),o("MAWDbChunkTxns").hasMediaChunk(e,c)]).then(function(t){var r=t[0],o=t[1];return E(e,n,r,a,l,s,o)})}function S(e,t,n,r,o,a,i,l,s,u,c){return u===void 0&&(u=!1),R(e,t.msgId,t.type,n,r,o,a,i,l,s,u,void 0,c).then(function(n){return L(e,t,n,l,void 0,u)})}function R(t,n,r,a,i,l,d,m,p,_,f,h,y){return f===void 0&&(f=!1),h===void 0&&(h=0),y===void 0&&(y=null),o("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(t,a).then(function(C){var b=new Map(C==null?void 0:C.mediaEntries),v=x(d,p,_);if(v!=null&&b.set(n,v),C){var S;h>0&&g.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Media found after retry for plaintextHash: ",""])),o("WAHashUtils").sanitisePlaintextHash(a)),C.msgIds||g.mustfix("Media missing msgIds: media type=%s",C.mediaType),C.mediaType||g.mustfix("Media missing mediaType: type=%s ; msg type=%s",i,r);var L=babelHelpers.extends({},C,m,{accessibilitySummaryText:y!=null?y:void 0,mediaEntries:b,mediaType:(S=C.mediaType)!=null?S:i,msgIds:o("WASortedLists").addToSet(C.msgIds||o("WASortedLists").emptySet(),n)});return t.media.put(L).then(function(){return L})}else{var E=o("MAWMediaUtils").genHMACPlaintextHash(a),k=babelHelpers.extends({accessibilitySummaryText:y!=null?y:void 0,fbid:_!=null?_:void 0,hashedPlaintextHash:E,mediaEntries:b,mediaType:i,msgIds:o("WASortedLists").singleElement(n),objectId:p!=null?p:void 0,plaintextHash:a,size:l,ts:o("WATimeUtils").unixTime()},m);return t.media.add(k).then(function(e){return babelHelpers.extends({},k,{mediaId:e})}).catch(function(e){var C=o("WAErrorMessage").maybeGetMessageFromError(e);if(h>0)throw g.DEBUG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Media failed to link after retry: plaintextHash: ",", hashedPlaintextHash: ",". Error: ",""])),o("WAHashUtils").sanitisePlaintextHash(a),E,C),g.catching(e).MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Media failed to link after retry."]))),e;return g.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Media failed to link. Possible duplicate? Will attempt a retry. For plaintextHash: ",", hashedPlaintextHash: ",". Error: ",""])),o("WAHashUtils").sanitisePlaintextHash(a),E,C),o("MAWODSProxy").odsBumpEntityKey({amount:1,entity:o("WAOdsEnums").Entity.MAW_MEDIA_DB_DUPLICATE_MEDIA,key:"retry"}),R(t,n,r,a,i,l,d,m,p,_,f,h+1,y)})}})}function L(e,t,n,r,a,i){i===void 0&&(i=!1);var l=i?o("MAWDexieTable").dexieResolve():o("MAWDbMsgTxns").updateMediaId(e,t,n.mediaId,n.plaintextHash);return l.then(function(){return o("MAWMediaBackupTxns").linkMediaBackup(e,n.mediaId,t.msgId,r,a).then(function(){return n})})}function E(e,t,n,r,a,i,l){return r===void 0&&(r=!1),i===void 0&&(i=!0),o("EBLogger").EBLogger().tags(["restore","handleUnstoredDbMedia"]).DEBUG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Inserted media with plaintextHash: ",""])),o("WAHashUtils").sanitisePlaintextHash(n.plaintextHash)),t.type!==o("MAWMsgType").MSG_TYPE.REVOKED&&!r&&i?o("MAWMediaAfterTxns").handleNewMediaAfterTxn(t,n,l,e,void 0,a).then(function(){return n}):o("MAWDexieTable").dexieResolve(n)}var k=function(t,n,r,a,i,l,s,u,c,d,m){return c===void 0&&(c=!1),o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(t,n).then(function(e){if(e==null)throw g.mustfixThrow("Do not have the media message in db when attachHashToMediaMsg");return S(t,e,r,l,s,m,u,a,i,c,d)})},I=function(t,n,a){return o("MAWDbMediaTxns").maybeGetMediaFromHashedPlaintextHash(t,n).then(function(e){if(e!=null){var n=babelHelpers.extends({},e);return a.validatedAudioInfo!=null&&(n.validatedAudioInfo=babelHelpers.extends({},e.validatedAudioInfo,a.validatedAudioInfo)),a.validatedVideoInfo!=null&&(n.validatedVideoInfo=babelHelpers.extends({},e.validatedVideoInfo,a.validatedVideoInfo)),a.validatedImageInfo!=null&&(n.validatedImageInfo=babelHelpers.extends({},e.validatedImageInfo,a.validatedImageInfo)),a.validatedDocumentFileInfo!=null&&(n.validatedDocumentFileInfo=babelHelpers.extends({},e.validatedDocumentFileInfo,a.validatedDocumentFileInfo)),t.media.update(n.mediaId,n).then(r("emptyFunction"))}else g.WARN(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] media entry is missing, can't update media info"])))})},T=function(t,n,r,a){return o("MAWDbMediaTxns").maybeGetMediaFromHashedPlaintextHash(t,n).then(function(e){if(e!=null){var n=a?e.mediaEntries.set(r,a):e.mediaEntries,i=babelHelpers.extends({},e,{mediaEntries:n});return t.media.update(i.mediaId,i)}else return g.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][updateMediaWithEncodedMediaEntryData] media entry is missing, can't upate media with encoded data"]))),o("MAWDexieTable").dexieResolve()})};function D(e,t,n,r,a,i,l,s,u,c,d,m){return c===void 0&&(c=!1),o("MAWDexieTable").dexieAll([k(e,t,r,a,i,l,u.size,s,c,d,m),o("MAWDbChunkTxns").getOrCreateMediaChunkWithPlaintextHash(e,r,n,u.type)]).then(function(e){var t=e[0];return t})}function x(e,t,n){var r,a=e;return a!=null&&t!=null&&(r=o("WAMediaUtils").decodeMediaEntryData(a),a=o("WAMediaUtils").encodeMediaEntryWithUpdatedObjectId(r,t)),a!=null&&n!=null&&(r=o("WAMediaUtils").decodeMediaEntryData(a),a=o("WAMediaUtils").encodeMediaEntryWithUpdatedFbid(r,n)),a}function $(e,t,n){var r=new Map;return e.mediaEntries.forEach(function(e,a){var i=o("WAMediaUtils").decodeMediaEntryData(e),l=i.objectId===t?o("WAMediaUtils").encodeMediaEntryWithUpdatedFbid(i,n):e;r.set(a,l)}),r}function P(e,t,n,r,a){a===void 0&&(a=!0);var i=new Map;return t.forEach(function(e){var t,n=(t=i.get(e.hashedPlaintextHash))!=null?t:[];n.push(e),i.set(e.hashedPlaintextHash,n)}),o("MAWDbMediaTxns").maybeBulkGetMediaFromHashedPlaintextHash(e,[].concat(Array.from(i.keys()))).then(function(l){var s=new Map(l.map(function(e){return[e.hashedPlaintextHash,e]})),u=new Map;t.forEach(function(e){var t=s.get(e.hashedPlaintextHash);if(e!=null){var n=x(e==null?void 0:e.entry,e==null?void 0:e.objectId,e==null?void 0:e.fbId);if(t){var r=n?t.mediaEntries.set(e.msgId,n):t.mediaEntries,a=babelHelpers.extends({},t,{mediaEntries:r,msgIds:o("WASortedLists").addToSet(t.msgIds,e.msgId)});s.set(e.hashedPlaintextHash,a)}else B(u,e,n)}});var c=new Map,d=new Map,m=Array.from(u.values()).filter(function(e){return N(e,c,d)});return o("MAWDexieTable").dexieAll([e.media.bulkAdd(m),e.media.bulkPut(Array.from(s.values()))]).then(function(){return M(e,[].concat(Array.from(i.keys())),i,n,r,a)})})}function N(e,t,n){if(e.objectId!=null){var r=t.get(e.objectId);if(r!=null&&r!==e.hashedPlaintextHash)return g.MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Same objectId assigned for different mediaIds. objectId: "," shared by  hashedPlaintextHashes: "," ",""])),e.objectId,r,e.hashedPlaintextHash),!1}if(e.fbid!=null){var o=n.get(e.fbid);if(o!=null&&o!==e.hashedPlaintextHash)return g.MUSTFIX(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Same FBId assigned for different mediaIds. fbId: "," - shared by hashedPlaintextHashes: "," ",""])),e.fbid,o,e.hashedPlaintextHash),!1}return e.objectId!=null&&t.set(e.objectId,e.hashedPlaintextHash),e.fbid!=null&&n.set(e.fbid,e.hashedPlaintextHash),!0}function M(e,t,n,r,a,i){return o("MAWDbMediaTxns").maybeBulkGetMediaFromHashedPlaintextHash(e,t).then(function(t){return o("MAWDexieTable").dexieAll([F(e,t,n)]).then(function(){return i&&w(t,n,r,e,a),t})})}function w(e,t,n,a,i){e.forEach(function(e){var l=t.get(e.hashedPlaintextHash);l!=null&&!A(l)&&r("promiseDone")(o("MAWDexieCastToPromise").dexieCastToPromise_I_KNOW_WHAT_I_AM_DOING(a.messages.where("msgId").anyOf(e.msgIds).toArray().then(function(t){var r=o("MAWMediaUtils").createHdTypesForBridgeMedia(t),l=o("MAWBridgeTypesCreators").createBridgeMedia({chatJid:n,filteredMsgIds:o("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(t,n),hasMediaForUI:!1,hdTypes:r,media:e,transportKey:i});return o("MAWMediaAfterTxns").handleNewMediaAfterTxnWithBridgeMedia(a,l)})))})}function A(e){return e.reduce(function(e,t){return e||t.isXMAShare},!1)}function F(e,t,n){var r=t.reduce(function(e,t){var r;return(r=n.get(t.hashedPlaintextHash))==null||r.filter(function(e){return e!=null&&!e.isXMAShare}).forEach(function(n){return e.set(n.msgId,t.mediaId)}),e},new Map);return o("MAWDbMsgTxns").bulkUpdateMediaId(e,r)}function O(e,t){var n,r,a=e?new Map([[t.msgId,e]]):new Map;return babelHelpers.extends({fbid:(n=t.fbId)!=null?n:void 0,hashedPlaintextHash:t.hashedPlaintextHash,mediaEntries:a,mediaType:t.mediaType,msgIds:o("WASortedLists").singleElement(t.msgId),objectId:(r=t.objectId)!=null?r:void 0,plaintextHash:t.plaintextHash,size:t.size,ts:o("WATimeUtils").unixTime()},t.mediaInfo)}function B(e,t,n){var r=e.get(t.hashedPlaintextHash);r==null?e.set(t.hashedPlaintextHash,O(n,t)):(n!=null&&r.mediaEntries.set(t.msgId,n),r.msgIds.push(t.msgId))}l.prepareMediaWriteData=y,l.handleUnstoredDbMediaCreation=C,l.handleUnstoredDbMediaLinking=b,l.handleUnstoredDbMedia=v,l.linkMedia=S,l.createOrUpdateMediaRow=R,l.attachHashToMediaMsg=k,l.updateMediaEntryWithValidatedMediaInfo=I,l.updateMediaWithEncodedMediaEntryData=T,l.attachHashAndSaveMedia=D,l.updateBackupFbidInMediaEntries=$,l.bulkLinkMedia=P,l.linkMessageAndMediaBackupForMediaList=M}),98);
__d("MAWMediaRetryInfo",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t,n){e.set(t,n)}function s(t){return e.get(t)}function u(t){e.has(t)&&e.delete(t)}i.setRetriedMediaInfo=l,i.getRetriedMediaInfo=s,i.clearRetriedMediaInfo=u}),66);
__d("MAWHandleEchoMediaMsgsRestoreV2",["EBLogger","EchoMessage","EchoMessageMediaFieldUtils","LSMEBTaskCreationSource","MAWBridge","MAWBridgeTypesCreators","MAWCastToMsgrServerMediaType","MAWConfig","MAWDbChunkTxns","MAWDbMediaTxns","MAWDbMsg","MAWDbMsgTxns","MAWEncodeMediaTransportProtocol","MAWFrontendMediaUtils","MAWGetMsgForProtocolMsgIdTxn","MAWHandleMediaDownloadApi","MAWIndexedDb","MAWJids","MAWJobDefinitions","MAWJobManager","MAWMediaDownloadStatus","MAWMediaDownloadStatusForUI","MAWMediaManagementTxns","MAWMediaRetryInfo","MAWMediaUtils","MAWSupportedDocumentTypes","MAWTransactionMode","WAAPI","WAArmadilloXMA.pb","WABase64","WAGetAgeBucketForMediaKeyTimestamp","WAGetStorageQplAnnotations","WAHashUtils","WAIsMediaExpiredError","WAJids","WAJobOrchestratorTypes","WAMediaUtils","WAStartMediaDownloadQplFlow","WATimeUtils","cr:10071","getErrorSafe","gkx","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D,x,$,P,N,M,w,A,F,O,B,W,q,U,V=o("EBLogger").EBLogger().tags(["restore"]);function H(e){var t=K(e);return t.then(function(t){var n=new Map;return e.forEach(function(e){var r=t.get(e),o=r==null?void 0:r.blobData;n.set(e,o)}),Promise.resolve(n)})}function G(e){return e===o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG?"image/jpeg":e===o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_PNG?"image/png":e===o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.STICKER?"image/webp":e===o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.GIF?"image/gif":e===o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_MP4?"audio/mp4":e===o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_WAV?"audio/wav":e===o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.XMA?"xma":(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}async function z(t,n,a){if(t.length===0)return Promise.resolve();var i=[],l=[],v=new Map,S=new Map;t.map(function(t){var n,a=t.mediaData,h=t.messageTimestamp,y=X(a.plaintextHash),C=a.attachmentObjectId,b=a.attachmentType,R=a.backupEntFbid,L=a.directPath,E=a.filename,k=a.height,I=a.mediaContentType,T=a.mediaKeyTimestamp,D=a.mediaPlayableDuration,x=a.previewContentHeight,$=a.previewContentType,P=a.previewContentWidth,N=a.size,M=a.width,w=o("WAHashUtils").stringToPlaintextHash(y),A=o("MAWMediaUtils").genHMACPlaintextHash(w);l.push(A);var F=I!=null?o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(I,t.isXMA):$!=null?o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(G($)):null;if(F==null)return V.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Cannot download media - media content type null, msg id: ",""])),t.externalId),V.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Cannot download media - media content type null"]))),Promise.resolve();if(b===o("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT&&!o("MAWSupportedDocumentTypes").isAllowedType(E))return V.DEBUG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Cannot download media - document extension is disallowed, msg id: ",""])),t.externalId),Promise.resolve();var O=t.mediaData.encryptedHash;if(O==null)return V.DEBUG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Encrypted hash cannot be null, msg id: ",""])),t.externalId),V.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Encrypted hash cannot be null"]))),Promise.resolve();var B=t.mediaData.mediaKey;if(B==null)return V.DEBUG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Media key cannot be null, msg id: ",""])),t.externalId),V.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Media key cannot be null"]))),Promise.resolve();var W=F.mediaType,q=F.serverMediaType,U=o("WAMediaUtils").stringToDeliveryObjectId(C),H=R!=null?o("WAMediaUtils").stringToBackupEntFbid(R):void 0,z=t.threadJId,j=Y({filename:E,height:k,mediaPlayableDuration:D,mediaType:W,previewContentHeight:x,previewContentWidth:P,width:M});S.set(U,{filename:E,height:k,mediaPlayableDuration:D,mediaType:W,messageTimestamp:h,plaintextHash:w,previewContentHeight:x,previewContentWidth:P,serverMediaType:q,threadJId:z,width:M});var K=null;if(t.previewMediaData!=null)try{K=Z(t.previewMediaData),K!=null&&K.objectId==null&&V.MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["downloadableThumbnail was created without metadata, source: echo"])))}catch(e){var Q=r("getErrorSafe")(e);V.catching(Q).DEBUG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Unable to construct downloadableThumbnail from previewMediaData, msg id: ",""])),t.externalId),V.catching(Q).MUSTFIX(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Unable to construct downloadableThumbnail from previewMediaData"])))}if(O!=null){var ee=J(y,O,B,L,T,q,E,H,U,K,N);i.push({entry:ee,fbId:H,hashedPlaintextHash:A,isXMAShare:t.isXMA,mediaInfo:j,mediaType:W,msgId:t.msgId,objectId:U,plaintextHash:w,size:N!=null?N:0})}var te=(n=v.get(A))!=null?n:[];te.push(t),v.set(A,te)});var R=a!==r("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE,L=await j(i,n,R),E=await H(l),k=[];E.forEach(function(e,t){var l=v.get(t);l==null||l.forEach(function(l){if(l!=null){if(e!=null){V.DEBUG(h||(h=babelHelpers.taggedTemplateLiteralLoose(["media for message: "," is already downloaded on the device"])),l.externalId);var s=L.find(function(e){return e.plaintextHash===l.mediaData.plaintextHash});if(s==null){V.DEBUG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Cannot find the media entry for message with mediaKey ",""])),l.mediaData.mediaKey);return}return Q(s.msgIds).then(function(e){var t=e.filter(function(e){return o("MAWDbMsg").isMediaMsg(e)});if(t.length>0){var r=o("MAWMediaUtils").createHdTypesForBridgeMedia(t),a=o("MAWBridgeTypesCreators").createBridgeMedia({chatJid:l.threadJId,filteredMsgIds:o("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(t,n),hasMediaForUI:!0,hdTypes:r,media:s,transportKey:"EncryptedBackups"}),i=o("MAWMediaUtils").annotateBridgeMediaForDisplay(a,t);o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"NewMedia",value:i}]})}})}var u=S.get(o("WAMediaUtils").stringToDeliveryObjectId(l.mediaData.attachmentObjectId));if(!(l==null||u==null)){var c=u.filename,d=u.height,m=u.mediaPlayableDuration,p=u.mediaType,_=u.messageTimestamp,f=u.plaintextHash,g=u.previewContentHeight,v=u.previewContentWidth,R=u.serverMediaType,E=u.threadJId,I=u.width,T=o("WAJids").extractUserId(o("MAWJids").toUserJid(l.threadJId)),D=o("MAWCastToMsgrServerMediaType").castToMsgrServerMediaType(R,l.isXMA);if(D!=null){var x={attachmentObjectId:o("WAMediaUtils").stringToDeliveryObjectId(l.mediaData.attachmentObjectId),mediaType:D,messageId:l.externalId,messageTimeStamp:l.messageTimestamp,msgId:l.msgId,plaintextHash:f,productType:o("MAWConfig").getConfig().productTypeForEBAttachments,threadId:T,threadJid:E},$=i.find(function(e){return e.hashedPlaintextHash===t}),P=$==null?void 0:$.entry;if(P==null){V.DEBUG(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Cannot find the media entry for message, plaintextHash: ",", msg id: ",""])),o("WAHashUtils").sanitisePlaintextHash(o("WAHashUtils").stringToPlaintextHash(l.mediaData.plaintextHash)),l.externalId),V.MUSTFIX(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Cannot find the media entry for message"])));return}if(a===r("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE)return;var N=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"handleEchoMediaMsgsRestore",msgType:null,protocolMsgId:{author:l.author,chat:l.threadJId,externalId:l.externalId},triggerUIView:null});k.push(ee({author:l.author,directPath:l.mediaData.directPath,echoMsg:l.echoMsg,externalId:l.externalId,filename:c,hashedPlaintextHash:t,height:d,isXMA:l.isXMA,mediaPlayableDuration:m,mediaType:p,messageTimestamp:_,plaintextHash:f,previewContentHeight:g,previewContentWidth:v,threadJId:E,width:I},void 0,x,void 0,o("WAMediaUtils").decodeMediaEntryData(P),N))}}}})}),await Promise.all(k)}var j=(q=o("MAWIndexedDb")).makeMsgrTransactor({media:(U=o("MAWTransactionMode")).READWRITE,mediaBackup:U.READWRITE,messages:U.READWRITE},"restoreLinkMedias",function(e){return(function(t,n,r){return o("MAWMediaManagementTxns").bulkLinkMedia(e,t,n,"EncryptedBackups",r)})}),K=q.makeMsgrTransactor({chunk:U.READONLY},"getChunksByHash",function(e){return function(t){return o("MAWDbChunkTxns").maybeBulkGetChunksFromHash(e,t)}}),Q=q.makeMsgrTransactor({messages:U.READONLY},"getMessagesForMsgIds",function(e){return function(t){return e.messages.where("msgId").anyOf(t).toArray()}});function X(e){if(e.endsWith("="))for(var t="",n=0;n<e.length;n++){var r=e.charAt(n);if(r==="=")return t;t+=r}return e}function Y(e){var t=e.height,n=e.mediaType,r=e.width,a=e.previewContentHeight,i=e.previewContentWidth,l=e.mediaPlayableDuration,s=e.filename;return{validatedAudioInfo:n==="Ptt"&&l!=null?{duration:re(l),mimetype:o("MAWEncodeMediaTransportProtocol").AUDIO_WAV_MIME_TYPE,played:!1}:null,validatedDocumentFileInfo:n==="DocumentFile"?{filename:s,mimetype:o("MAWEncodeMediaTransportProtocol").FILE_MIME_TYPE}:null,validatedImageInfo:n==="Image"?{height:t,jpegThumbnailHeight:a,jpegThumbnailWidth:i,width:r}:n==="Gif"||n==="Sticker"?{height:t,jpegThumbnailHeight:t,jpegThumbnailWidth:r,width:r}:null,validatedVideoInfo:n==="Video"?{duration:l,height:t,jpegThumbnailHeight:a,jpegThumbnailWidth:i,mimetype:o("MAWEncodeMediaTransportProtocol").VIDEO_MIME_TYPE,width:r}:null}}function J(e,t,n,r,a,i,l,s,u,c,d){var m=o("WABase64").decodeB64UrlSafe(e,!0),p=o("WABase64").decodeB64UrlSafe(t,!0),_=o("WABase64").decodeB64UrlSafe(n,!0);return o("WAMediaUtils").rawDataToMediaEntry({directPath:r,downloadableThumbnail:c!=null?c:void 0,fbid:s!=null?s:void 0,fileEncSha256:p,filename:l,fileSha256:m,mediaKey:_,mediaKeyTimestamp:a!=null?o("WATimeUtils").castToUnixTime(a):void 0,objectId:u!=null?u:void 0,serverMediaType:i,size:d!=null?d:void 0})}function Z(e){var t=e.attachmentObjectId,n=e.directPath,r=e.encryptedHash,a=e.mediaKey,i=e.mediaKeyTimestamp,l=e.plaintextHash;if(r==null){V.MUSTFIX(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Encrypted hash is null - unable to download thumbnail"])));return}else{var s=i!=null?o("WATimeUtils").castToUnixTime(i):void 0,u=a!=null?o("WAMediaUtils").castToMediaKey(o("WABase64").decodeB64UrlSafe(a,!0)):void 0,c=o("WABase64").decodeB64UrlSafe(l,!0),d=o("WABase64").decodeB64UrlSafe(r,!0);return{directPath:n,fileEncSha256:d,fileSha256:c,mediaKey:u,mediaKeyTimestamp:s,objectId:t}}}var ee=async function(t,n,a,i,l,s){var e,u,c,d,m,p;V.DEBUG(S||(S=babelHelpers.taggedTemplateLiteralLoose(["start media download from whatsapp infra. traceId: ",""])),n);var _=t.author,f=t.externalId,g=t.filename,h=t.hashedPlaintextHash,y=t.height,C=t.mediaPlayableDuration,b=t.mediaType,v=t.messageTimestamp,x=t.plaintextHash,$=t.previewContentHeight,P=t.previewContentWidth,N=t.threadJId,M=t.width,w={author:_,chat:N,externalId:f},A=s!=null?s:o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"handleEchoMediaMsgsRestore",msgType:null,protocolMsgId:w,triggerUIView:null});o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_echo_media_msgs_restore",hash:x,status:r("MAWMediaDownloadStatus").DOWNLOADING,type:"main"});var F=((e=(u=o("MAWMediaRetryInfo").getRetriedMediaInfo(f))==null?void 0:u.isXMA)!=null?e:!1)||((c=t==null?void 0:t.isXMA)!=null?c:!1),O=((d=o("MAWMediaRetryInfo").getRetriedMediaInfo(f))==null||(d=d.echoMsg)==null?void 0:d.serializationOrigin)||(t==null||(m=t.echoMsg)==null?void 0:m.serializationOrigin)||o("EchoMessage").EchoSerializationOriginType.UNKNOWN,B=r("gkx")("23960");if(A.addPoint("download_media_start",{bool:{isEBDownloadEnforced:a==null&&B,isRetryFromMI:a==null,isXMA:F,pathMismatch:i!==l.directPath},int:{mediaEntrySize:l.size},string:{oldDirectPath:(p=t==null?void 0:t.oldDirectPath)!=null?p:"",origin:O,restorationCdnUrl:i!=null?i:""}}),o("WAGetStorageQplAnnotations").getStorageQplAnnotations().then(function(e){A.addAnnotations(e)}),a!=null&&B)return V.DEBUG(R||(R=babelHelpers.taggedTemplateLiteralLoose(["downloading media from MI directly. externalId ","."])),w.externalId),ae({decodedMediaEntry:l,isEBDownloadEnforced:B,mediaDownloadRequest:t,protocolMsgId:w,retryPayload:a});var W=o("WAMediaUtils").validateDecodedMediaEntryForDownload(l);if(!W.success){V.DEBUG(L||(L=babelHelpers.taggedTemplateLiteralLoose(["media entry validation failed. externalId ",". traceId: ",". error: ","."])),w.externalId,n,W.error),V.MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["media entry validation failed. error: ","."])),W.error),A.endFail("download_media_fail",{string:{failReason:W.error}});return}var q=await r("WAAPI").cachedDownloadFullMediaOnly({downloadMediaMetric:A,hash:x,mediaEntry:W.value});if(q.success){A.addPoint("download_media_end");var U=q.value,H=U.mimeType,G=U.plaintext;await o("MAWHandleMediaDownloadApi").handleMediaDownload(x,H,G,w),o("MAWMediaRetryInfo").clearRetriedMediaInfo(f);var z=Y({filename:g,height:y,mediaPlayableDuration:C,mediaType:b,previewContentHeight:$,previewContentWidth:P,width:M});await ne(h,z),V.DEBUG(k||(k=babelHelpers.taggedTemplateLiteralLoose(["media download complete. externalId ",". traceId: ",""])),w.externalId,n),A.endSuccess(),o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_echo_media_msgs_restore_success",hash:x,status:r("MAWMediaDownloadStatus").SUCCESS,type:"main"})}else{var j=q.error;if(o("WAIsMediaExpiredError").isMediaExpiredError(j)&&a)A.addPoint("eb_resign_requested"),A.endSuccess(),V.WARN(I||(I=babelHelpers.taggedTemplateLiteralLoose(["Retry download media as signature has expired and should be renewed. externalId ",". traceId: ",""])),w.externalId,n),await ae({decodedMediaEntry:l,isEBDownloadEnforced:!1,mediaDownloadRequest:t,protocolMsgId:w,retryPayload:a});else{V.DEBUG(T||(T=babelHelpers.taggedTemplateLiteralLoose(["media download failed with error: "," "," when downloading. Message timestamp: ",". traceId: ",""])),f,j,v,n),V.MUSTFIX(D||(D=babelHelpers.taggedTemplateLiteralLoose(["media download failed with error: ",""])),j);var K={string:{directPath:l.directPath,error:"media_download_failure",restorationCdnUrl:i!=null?i:""}};A.endFail(j,K),o("MAWMediaRetryInfo").clearRetriedMediaInfo(f),o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:j,hash:x,status:o("MAWMediaDownloadStatusForUI").getStatusFromWAAPIDownloadMediaError(j),type:"main"})}}},te=q.makeMsgrTransactor({media:U.READONLY,mediaBackup:U.READONLY,messages:U.READONLY},"invokeRestoreAccessCheckSprocToDownloadAttachment",function(e){return(function(t,n,r){return o("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(e,n.plaintextHash).then(function(a){if(a){V.DEBUG(x||(x=babelHelpers.taggedTemplateLiteralLoose(["start resign cdn url through sproc"])));var i=ie(a,n.attachmentObjectId);return o("MAWDbMsgTxns").getMsgsByMsgIds(e,i).then(function(e){var i,l=e.find(function(e){return e.externalId===t});r.addPoint("resign_cdn_url_bridge_call",{bool:{isForwarded:(i=l==null?void 0:l.isForwarded)!=null?i:!1},int:{duplicateMsgsCount:e.length,msgXMAType:l==null?void 0:l.xmaMessageType,totalMediaEntries:a.mediaEntries.size},int_array:{duplicateXMATypes:e.map(function(e){var t;return(t=e.xmaMessageType)!=null?t:0})},string:{msgType:l==null?void 0:l.type},string_array:{duplicateMsgs:e.map(function(e){return e.externalId}),duplicateMsgTypes:e.map(function(e){return e.type})}}),o("MAWIndexedDb").afterTransaction({tag:"ResignAttachmentCDNUrl",value:{deliveryObjectId:n.attachmentObjectId,mediaType:n.mediaType,messageId:t,msgId:n.msgId,plaintextHash:n.plaintextHash,productType:o("MAWConfig").getConfig().productTypeForEBAttachments,sortOrder:n.messageTimeStamp,threadId:n.threadId,threadJid:n.threadJid,traceId:r.getQPLAttrs().instanceKey}})})}else V.DEBUG($||($=babelHelpers.taggedTemplateLiteralLoose(["media entry is missing from index db. It is required to retry download by resigning cdn url: externalId: ",". traceId: ",""])),t,r.getQPLAttrs().instanceKey),V.MUSTFIX(P||(P=babelHelpers.taggedTemplateLiteralLoose(["media entry is missing from index db. It is required to retry download by resigning cdn url: externalId: ","."])),t),r.endFail("missing-media")})})}),ne=q.makeMsgrTransactor({media:U.READWRITE,messages:U.READWRITE},"updateMediaWithDownloadedChunkBlob",function(e){return(function(t,n){return o("MAWMediaManagementTxns").updateMediaEntryWithValidatedMediaInfo(e,t,n)})});function re(e){var t=Math.floor(e/1e3);return t>0?t:e}function oe(e){return e==null?!1:e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_REPLY||e===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_STORY_MENTION}async function ae(e){var t,a=e.decodedMediaEntry,i=e.isEBDownloadEnforced,l=e.mediaDownloadRequest,s=e.protocolMsgId,u=e.retryPayload,c=await o("MAWGetMsgForProtocolMsgIdTxn").getMsgForProtocolMsgIdTxn(s);if(c.success===!0&&oe(c.value.xmaMessageType))return V.DEBUG(N||(N=babelHelpers.taggedTemplateLiteralLoose(["Skipping media restore for expirable XMA. externalId ",". xmamessageType: ",""])),s.externalId,c.value.xmaMessageType),Promise.resolve();var d=s.externalId;o("MAWMediaRetryInfo").setRetriedMediaInfo(s.externalId,l);var m=((t=a.mediaKeyTimestamp)!=null?t:0)>1725105600,p={bool:{is_after_S441705_fix:m,isEBDownloadEnforced:i},int:{mediaKeyTimestamp:a.mediaKeyTimestamp},string:{externalId:d,mediaKeyAge:o("WAGetAgeBucketForMediaKeyTimestamp").getAgeBucketForMediaKeyTimestamp(a.mediaKeyTimestamp),mediaType:u.mediaType,objectId:u.attachmentObjectId,restoreEntry:"EB",restoreMethod:n("cr:10071")==null?"sproc":"gql"}},_=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"handleEchoMediaMsgsRestore",msgType:null,protocolMsgId:s,triggerUIView:null});_.addAnnotations(p),V.DEBUG(M||(M=babelHelpers.taggedTemplateLiteralLoose(["start restore media from backup. hash: ",". msgId: ",". traceId: ",""])),o("WAHashUtils").sanitisePlaintextHash(u.plaintextHash),d,_.getQPLAttrs().instanceKey);var f=a.mediaKey;if(f==null){V.WARN(w||(w=babelHelpers.taggedTemplateLiteralLoose(["media key is missing from media entry. hash: ",". msgId: ",". traceId: ",""])),o("WAHashUtils").sanitisePlaintextHash(u.plaintextHash),d,_.getQPLAttrs().instanceKey),_.endFail("missing-media-key");return}return n("cr:10071")!=null?(V.DEBUG(A||(A=babelHelpers.taggedTemplateLiteralLoose(["resign cdn url start [gql]. hash: ",". msgId: ",". traceId: ",""])),o("WAHashUtils").sanitisePlaintextHash(u.plaintextHash),d,_.getQPLAttrs().instanceKey),n("cr:10071").eblsResignCdnUrlWithGraphQL({chatJid:s.chat,deliveryObjectId:u.attachmentObjectId,externalId:d,mediaKey:f,mediaType:u.mediaType,sortOrderMs:u.messageTimeStamp}).then(function(e){if(r("vulture")("zP4BquwZMLWLp2xHPcGqA0y9_YQ="),e.success===!1){V.DEBUG(F||(F=babelHelpers.taggedTemplateLiteralLoose(["resign cdn url gql failed: ",". hash: ",". externalId ",""])),e.error,o("WAHashUtils").sanitisePlaintextHash(u.plaintextHash),d),_.endFail(e.error);return}V.DEBUG(O||(O=babelHelpers.taggedTemplateLiteralLoose(["resign cdn url gql success. hash: ",". externalId ",""])),o("WAHashUtils").sanitisePlaintextHash(u.plaintextHash),d);var t=o("MAWJobDefinitions").createStartJobInfo("downloadAndRestoreMedia",{deliveryObjectId:u.attachmentObjectId,msgId:u.msgId,plaintextHash:u.plaintextHash,restorationCdnUrl:e.value,scheduleConfig:{priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.LOW},traceId:_.getQPLAttrs().instanceKey});return o("MAWJobManager").getJobManager().fireAndForget(t)}).catch(function(e){var t=r("getErrorSafe")(e);V.catching(t).MUSTFIX(B||(B=babelHelpers.taggedTemplateLiteralLoose(["resign cdn url gql error"]))),_.endFail("runtime-error",{string:{restoreError:t.toString()}})})):(V.DEBUG(W||(W=babelHelpers.taggedTemplateLiteralLoose(["resign cdn url start [sproc]. hash: ",". msgId: ",". traceId: ",""])),o("WAHashUtils").sanitisePlaintextHash(u.plaintextHash),d,_.getQPLAttrs().instanceKey),te(d,u,_))}function ie(e,t){var n,r=[];return(n=e.mediaEntries)==null||n.forEach(function(e,n){var a=o("WAMediaUtils").decodeMediaEntryData(e);a.objectId===t&&r.push(n)}),r}l.downloadMediaAndWriteToMediaStore=z,l.getBase64WithoutPadding=X,l.getMediaInfo=Y,l.constructMediaEntry=J,l.constructRawDownloadableThumbnail=Z,l.handleDownloadMedia=ee,l.invokeRestoreAccessCheckSprocToDownloadAttachment=te}),98);
__d("MAWHandleEchoMsgsRestoreApiUtils",["$InternalEnum","EBLogger","EchoMessage","EchoMessageMediaFieldUtils","MAWAckLevel","MAWConvertXMATargetTypeToExtendedContentTargetType","MAWEBRestoreTrackingUtils","MAWJids","MAWMsgType","MAWRepliesRestoreUtils","WAJids","WAResultOrError","WAStanzaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=o("EBLogger").EBLogger().tags(["restore"]),g=n("$InternalEnum")({INITIAL_RESTORE:"initial_restore",POINT_RESTORE:"point_restore",PAGINATED_RESTORE:"paginated_restore"});function h(t,n){var r=n==null?f:f.tags([n]),a=t.contentType;switch(a){case o("EchoMessage").EchoMessageContentType.TEXT:return t.xContentType===o("EchoMessage").EchoXMessageContentType.BUMP?o("WAResultOrError").makeResult(o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE):o("WAResultOrError").makeResult(o("MAWMsgType").MSG_TYPE.TEXT);case o("EchoMessage").EchoMessageContentType.MEDIA:return t.receiverFetchId!=null&&t.receiverFetchData!=null?o("WAResultOrError").makeResult(o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH):t.mediaData==null?o("WAResultOrError").makeError("media_mandatory_fields_missing"):o("WAResultOrError").makeResult(y(t.mediaData));case o("EchoMessage").EchoMessageContentType.PLACEHOLDER:return t.contentSubtype===o("EchoMessage").EchoMessageContentSubtype.UNSEND?o("WAResultOrError").makeResult(o("MAWMsgType").MSG_TYPE.REVOKED):(r.MUSTFIX(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Message has unsupported message content type: ",", xContentType: ",",\n      subcontent type: "," ,\n      origin: ",""])),o("EchoMessage").EchoMessageContentType.getName(a),t.xContentType!=null?o("EchoMessage").EchoXMessageContentType.getName(t.xContentType):"unknown",o("EchoMessage").EchoMessageContentSubtype.getName(t.contentSubtype),t.serializationOrigin!=null?o("EchoMessage").EchoSerializationOriginType.getName(t.serializationOrigin):"unknown"),o("WAResultOrError").makeError("unsupported_message_type"));case o("EchoMessage").EchoMessageContentType.XMA:return o("WAResultOrError").makeResult(o("MAWMsgType").MSG_TYPE.XMA);case o("EchoMessage").EchoMessageContentType.DECRYPTION_FAILURE:return o("WAResultOrError").makeResult(o("MAWMsgType").MSG_TYPE.CIPHERTEXT);default:return r.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Message has unsupported message content type: ",""])),o("EchoMessage").EchoMessageContentType.getName(a)),o("WAResultOrError").makeError("unsupported_message_type")}}function y(e){switch(e.attachmentType){case o("EchoMessageMediaFieldUtils").AttachmentType.IMAGE:return o("MAWMsgType").MSG_TYPE.IMAGE;case o("EchoMessageMediaFieldUtils").AttachmentType.STICKER:return o("MAWMsgType").MSG_TYPE.STICKER;case o("EchoMessageMediaFieldUtils").AttachmentType.VIDEO:return o("MAWMsgType").MSG_TYPE.VIDEO;case o("EchoMessageMediaFieldUtils").AttachmentType.GIF:return o("MAWMsgType").MSG_TYPE.GIF;case o("EchoMessageMediaFieldUtils").AttachmentType.PTT:return o("MAWMsgType").MSG_TYPE.PTT;case o("EchoMessageMediaFieldUtils").AttachmentType.XMA:return o("MAWMsgType").MSG_TYPE.XMA;case o("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT:return o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE}}function C(e,t,n,r,a,i){var l,s=e.from;if(s==null)return f.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Author info is missing from msg: ",""])),r),o("WAResultOrError").makeError("author_missing");var d=h(e,a);if(d.success===!1)return o("WAResultOrError").makeError(d.error);if(d==null)return o("WAResultOrError").makeError("unsupported_message_type");var m=d.value;if((l=e.isTombstoned)!=null&&l)return o("WAResultOrError").makeError("message_tombstoned");switch(m){case o("MAWMsgType").MSG_TYPE.TEXT:case o("MAWMsgType").MSG_TYPE.REVOKED:case o("MAWMsgType").MSG_TYPE.CIPHERTEXT:return k(e,t,n,s,m,r,a,i);case o("MAWMsgType").MSG_TYPE.IMAGE:case o("MAWMsgType").MSG_TYPE.VIDEO:case o("MAWMsgType").MSG_TYPE.STICKER:case o("MAWMsgType").MSG_TYPE.GIF:case o("MAWMsgType").MSG_TYPE.PTT:case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return b(e,t,n,s,m,r);case o("MAWMsgType").MSG_TYPE.XMA:return S(e,t,n,s,m,r);case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return o("WAResultOrError").makeResult(D(e,t,n,s,m,r));case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:return R(e,t,n,s,m,r);default:return f.MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Encountered unsupported media type: ",""])),m),o("WAResultOrError").makeError("unsupported_message_type")}}function b(e,t,n,r,o,a){var i=I(e,t,n,r,o,a);return v(o,i)}function v(e,t){switch(e){case o("MAWMsgType").MSG_TYPE.IMAGE:return o("WAResultOrError").makeResult(babelHelpers.extends({},t,{type:o("MAWMsgType").MSG_TYPE.IMAGE}));case o("MAWMsgType").MSG_TYPE.STICKER:return o("WAResultOrError").makeResult(babelHelpers.extends({},t,{type:o("MAWMsgType").MSG_TYPE.STICKER}));case o("MAWMsgType").MSG_TYPE.VIDEO:return o("WAResultOrError").makeResult(babelHelpers.extends({},t,{type:o("MAWMsgType").MSG_TYPE.VIDEO}));case o("MAWMsgType").MSG_TYPE.GIF:return o("WAResultOrError").makeResult(babelHelpers.extends({},t,{type:o("MAWMsgType").MSG_TYPE.GIF}));case o("MAWMsgType").MSG_TYPE.PTT:return o("WAResultOrError").makeResult(babelHelpers.extends({},t,{type:o("MAWMsgType").MSG_TYPE.PTT}));case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return o("WAResultOrError").makeResult(babelHelpers.extends({},t,{type:o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE}));default:return f.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Unsupported media message type: ",""])),e),o("WAResultOrError").makeError("unsupported_media_type")}}function S(e,t,n,r,a,i){var l;if(((l=e.xmaData)==null?void 0:l.xmaTargetType)==null)return f.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Mandatory XMA Data missing for XMA message: ",""])),i),o("WAResultOrError").makeError("xma_mandatory_fields_missing");var s=e.xmaData.xmaTargetType,u=I(e,t,n,r,a,i),c=babelHelpers.extends({},u,{type:o("MAWMsgType").MSG_TYPE.XMA,xmaMessageType:o("MAWConvertXMATargetTypeToExtendedContentTargetType").convertXMATargetTypeToExtendedContentTargetType(s)}),d=e.text;return d!=null&&(c.msgContent={content:d}),o("WAResultOrError").makeResult(c)}function R(e,t,n,r,a,i){if(e.receiverFetchData==null)return f.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Mandatory receiver fetch data missing for receiver fetch message: ",""])),i),o("WAResultOrError").makeError("receiver_fetch_mandatory_fields_missing");var l=I(e,t,n,r,a,i);return o("WAResultOrError").makeResult(babelHelpers.extends({},l,{receiverFetchId:e.receiverFetchId,type:o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH}))}function L(e){if(e!=null)switch(e){case o("EchoMessage").MessageTextSize.SMALL:return 1;case o("EchoMessage").MessageTextSize.MEDIUM:return 2;case o("EchoMessage").MessageTextSize.LARGE:return 3;default:return}}function E(e){return e.text==null?null:e.editHistory.length===0?e.text:e.editHistory.sort(function(e,t){return e.timestamp-t.timestamp})[0].text}function k(e,t,n,r,a,i,l,s){var u=l==null?f:f.tags([l]),c=s==="first_edit_content"?E(e):e.text;if(c==null)return o("MAWEBRestoreTrackingUtils").addQPLRestorePointWithAnnotationsWorker({annotations:{string:{empty_content_msg_type:a}},pointName:"unstored_text_message_empty",traceId:l}),u.MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Message content is empty for the message: ",", type: ",""])),i,a),o("WAResultOrError").makeError("text_message_content_empty");var d=I(e,t,n,r,a,i,l);if(a===o("MAWMsgType").MSG_TYPE.REVOKED)return c!=null&&(d.msgContent={content:c}),e.revokeSentTimestampMs!=null&&(d.originalTs=o("WATimeUtils").castToUnixTime(e.revokeSentTimestampMs)),o("WAResultOrError").makeResult(babelHelpers.extends({},d,{revokedExternalId:o("WAStanzaUtils").toStanzaId("0"),type:o("MAWMsgType").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:e.revokeUnsentTimestampMS!=null?o("WATimeUtils").castToUnixTime(e.revokeUnsentTimestampMS):d.ts}));if(a===o("MAWMsgType").MSG_TYPE.CIPHERTEXT)return o("WAResultOrError").makeResult(babelHelpers.extends({},d,{msgContent:{content:c},specialTextSize:L(e.textSize),type:o("MAWMsgType").MSG_TYPE.CIPHERTEXT}));var m=babelHelpers.extends({},d,{msgContent:{content:c},specialTextSize:L(e.textSize),type:o("MAWMsgType").MSG_TYPE.TEXT});return o("WAResultOrError").makeResult(babelHelpers.extends({},m,{editCount:Math.max(e.editHistory.length-1,0),groupId:e.groupId,groupIndex:e.groupIndex,groupSize:e.groupSize}))}function I(e,t,n,r,a,i,l){var s=T(r,n),u={ack:s===o("WAJids").AUTHOR_ME?o("MAWAckLevel").ACK.sent:o("MAWAckLevel").ACK.received,altIndex:void 0,author:s,externalId:i,groupId:e.groupId,groupIndex:e.groupIndex,groupSize:e.groupSize,isForwarded:e.isForwarded,sortOrderMs:e.sortOrderMs,threadJid:t,ts:o("WATimeUtils").castToUnixTime(e.displayTimestampMs/1e3),type:a};if(e.authoritativeTimestampMs!=null?u.serverTs=o("WATimeUtils").castToUnixTime(e.authoritativeTimestampMs/1e3):u.serverTs=o("WATimeUtils").castToUnixTime(e.sortOrderMs/1e3),e.quoteData!=null){var c=o("MAWRepliesRestoreUtils").getQuoteDataFromEchoMessage(e,n);c!=null&&(u.quote=c,u.quoteExternalId=c.content.externalId)}return u}function T(e,t){var n=o("MAWJids").toUserJid(e.localKey);return n===t?o("WAJids").AUTHOR_ME:n}function D(e,t,n,r,a,i){var l=I(e,t,n,r,a,i);return babelHelpers.extends({},l,{type:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE})}l.MAWRestoreType=g,l.getDbMsgTypeFromEchoMessage=h,l.getUnstoredDbMessageFromEchoMessage=C,l.resolveAuthorFromEchoAddress=T}),98);
__d("MAWRepliesRestoreUtils",["FBLogger","MAWBridgeMsg","MAWDexieTable","MAWGetMsgQuoteTxn","MAWHandleEchoMsgsRestoreApiUtils","MAWIndexedDb","MAWLoadReplyMediaTxns","MAWMsgType","MAWTransactionMode","MAWUpdateQuotedMsgTxns","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e=["msgId","originalTs","rowId","threadJid","unsendMsgContentDeleteTs"],s,u;function c(e,t){if(t==null||!o("MAWMsgType").isQuotedMsgType(t.type))return e;var n={author:t.author,externalId:t.externalId,ts:t.ts,type:t.type},r={content:n,remoteJid:null};return babelHelpers.extends({},e,{quote:r})}function d(e,t){if(e.quoteData!=null&&e.quoteData.quoteMessageId!=null&&e.quoteData.quoteMessageSender!=null){var n,r={author:o("MAWHandleEchoMsgsRestoreApiUtils").resolveAuthorFromEchoAddress(e.quoteData.quoteMessageSender,t),externalId:(n=e.quoteData)==null?void 0:n.quoteMessageId,ts:e.displayTimestampMs,type:o("MAWMsgType").MSG_TYPE.TEXT};return{content:r,remoteJid:null}}else o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Quote data is missing for message: ",""])),e.messageId);return null}var m=o("MAWIndexedDb").makeMsgrTransactor({chunk:(u=o("MAWTransactionMode")).READONLY,media:u.READONLY,messages:u.READWRITE,threads:u.READWRITE,xma:u.READONLY},"updateQuoteDataForReplyMessages",function(e){return(function(t,n,r){n==null||n.addPoint("replies_restore_start");var a=t.restoredMsgsData;if(a){var i=a.existingMsgs,l=a.newlyAddedMsgs,s=l.concat(i);return o("MAWDexieTable").dexieAll(s.map(function(t){return o("MAWUpdateQuotedMsgTxns").associateQuotedMessage(e,t.threadJid,t).then(function(e){var n=[];return t.quoteExternalId!=null&&n.push(t),e!=null&&n.push.apply(n,e),n})})).then(function(t){var n=t.flat();return p(e,n,r)}).then(function(e){return n==null||n.addPoint("replies_restore_end",{int:{replies:e}}),e})}return o("MAWDexieTable").dexieResolve(0)})});function p(e,t,n){return o("MAWDexieTable").dexieAll(t.map(function(t){var n=_(t);if(t.threadJid!=null)return o("MAWGetMsgQuoteTxn").enhanceMsgWithQuoteInfo(e,n,t.threadJid).then(function(e){return babelHelpers.extends({},e,{msgId:t.msgId,originalTs:t.originalTs,protocolMsgId:t.protocolMsgId,rowId:t.rowId,threadJid:t.threadJid,unsendMsgContentDeleteTs:t.unsendMsgContentDeleteTs})});r("FBLogger")("labyrinth_web","thread_id_absent").mustfix("Reply restore: threadId cannot be null for a restored msg")})).then(function(e){return e.filter(Boolean).filter(function(e){return e.quote!=null})}).then(function(e){return e.map(function(e){return e.source="eb_restore",e})}).then(function(t){return e.messages.bulkPut(t).then(function(r){return t.map(function(t){return o("MAWLoadReplyMediaTxns").getReplyMediaForMsgQuote(e,t).then(function(e){n!==!0&&o("MAWIndexedDb").afterTransaction({tag:"MsgUpdated",value:o("MAWBridgeMsg").createBridgeMsg(t,e)})})})}).then(function(e){var n;return(n=t==null?void 0:t.length)!=null?n:0})})}function _(t){var n=t.msgId,r=t.originalTs,o=t.rowId,a=t.threadJid,i=t.unsendMsgContentDeleteTs,l=babelHelpers.objectWithoutPropertiesLoose(t,e);return l}l.addQuoteDataToReplyMessage=c,l.getQuoteDataFromEchoMessage=d,l.updateQuoteDataForReplyMessages=m,l.enhanceAndPersistReplyMessagesWithQuoteData=p}),98);
__d("MAWHandleEchoReactionsRestore",["MAWAckLevel","MAWAuthor","MAWBulkWriteReactionsTxns","MAWHandleEchoMsgsRestoreApiUtils","MAWIndexedDb","MAWTransactionMode","Promise","WAJids","WALogger","WAStanzaUtils","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f;function g(e,t,r){r==null||r.addPoint("reactions_restore_start");var o=e.echoMsgMap,a=e.restoredMsgsData,i=0;if(a){var l=a.existingMsgs,s=a.newlyAddedMsgs,u=s.concat(l),c=a.threadJid,d=u.filter(function(e){var t=o.get(e.externalId);return y(o,e)&&t!=null&&C(t)});if(d.length===0)return(f||(f=n("Promise"))).resolve();var m=d.flatMap(function(e){var n=o.get(e.externalId),r=S(a.threadJid,t,e.externalId,e.msgId,e.author,n);return r.map(function(e){return{chatJid:c,unstoredReaction:e}})});return m.length===0?(f||(f=n("Promise"))).resolve():h(m).then(function(e){i+=m.length,r==null||r.addPoint("reactions_restore_end",{int:{reactions:i}})})}return(f||(f=n("Promise"))).resolve()}var h=o("MAWIndexedDb").makeMsgrTransactor({groupInfo:(_=o("MAWTransactionMode")).READWRITE,messages:_.READWRITE,reactions:_.READWRITE,threads:_.READWRITE},"restoreWriteReactionsToDb",function(e){return(function(t){return o("MAWBulkWriteReactionsTxns").prepareReactionsData(e,t).then(function(t){return o("MAWBulkWriteReactionsTxns").bulkWriteReactions(e,t)})})});function y(t,n){var r=t.get(n.externalId);return r==null?(o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] echo document is absent for a restored msg"]))),!1):o("WAJids").isAuthorSystem(n.author)?(o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot have reactions for system author"]))),!1):o("MAWAuthor").getAuthorUserJid(n.author)==null?(o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Cannot have reactions empty author"]))),!1):!0}function C(e){return e.reactions!=null&&e.reactions.length!==0&&e.reactionXOfflineThreadingIds!=null&&e.reactionXOfflineThreadingIds.length!==0&&e.reactionAuthoritativeTimestampMs!=null&&e.reactionAuthoritativeTimestampMs.length!==0}function b(e,t,n){return(e==null?void 0:e.length)===0?(o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] reaction string is not a single character"]))),!1):t==null?(o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] reaction external id missing"]))),!1):n==null?(o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] reactToAuthor field is null"]))),!1):!0}function v(e,t,n){return(e||[]).map(function(e,r){return n==null||t==null||(n==null?void 0:n.length)<=r||(t==null?void 0:t.length)<=r?(o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] reaction fields in backup data uneven in length"]))),[]):[e,t[r],n[r]]})}function S(e,t,n,r,a,i){var l=o("MAWAuthor").getAuthorUserJid(a);if(i==null||l==null)return[];var s=i.reactionAuthoritativeTimestampMs,u=s===void 0?[]:s,c=i.reactionXOfflineThreadingIds,d=c===void 0?[]:c,m=i.reactions;return v(m,d,u).filter(function(e){var t=e[0],n=e[1];return n!=null&&b(t.displayName,n.displayName,o("MAWAuthor").getAuthorUserJid(a))}).map(function(a){var i=a[0],s=a[1],u=a[2],c=i.displayName,d=o("MAWHandleEchoMsgsRestoreApiUtils").resolveAuthorFromEchoAddress(i,t),m={ack:d===o("WAJids").AUTHOR_ME?o("MAWAckLevel").ACK.sent:o("MAWAckLevel").ACK.received,author:d,externalId:o("WAStanzaUtils").toStanzaId(s.displayName||""),groupingKey:c,reaction:c,reactToAuthor:l,reactToExternalId:n,senderTimestampMs:null,threadJid:e,ts:o("WATimeUtils").castToUnixTime(Number(u.displayName)/1e3)};return r!=null?babelHelpers.extends({},m,{reactToMsgId:r}):m})}l.writeEchoReactionsToReactionsStore=g,l.getReactionsForReactionStore=S}),98);
__d("MAWHandleEchoXMARestoreV2",["EchoMessage","MAWBridge","MAWConvertXMAGatingTypeToExtendedContentOverlayIconGlyph","MAWConvertXMALayoutTypeToExtendedContentXMLLayoutType","MAWConvertXMATargetTypeToExtendedContentTargetType","MAWDbMediaTxns","MAWDbMsg","MAWHandleEchoMediaMsgsRestoreV2","MAWHandleXmaTransactionUtil","MAWIndexedDb","MAWODSProxy","MAWParseXMAProtocol","MAWTransactionMode","WAArmadilloXMA.pb","WAHashUtils","WALogger","WAMediaUtils","WAOdsEnums","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h=function(t,n,r){n==null||n.addPoint("xma_restore_start");var e=t.restoredMsgsData;if(e){var a=e.newlyAddedMsgs,i=a.concat(e.existingMsgs),l=[];return i.map(function(e){var n=e.externalId,r=t.echoMsgMap.get(n);r!=null&&r.contentType===o("EchoMessage").EchoMessageContentType.XMA&&l.push(e)}),l.length===0?Promise.resolve():y(l,t.echoMsgMap,r).then(function(e){return n==null||n.addPoint("xma_restore_end",{int:{xma:e.length}}),Promise.resolve()})}return n==null||n.addPoint("xma_restore_end",{int:{xma:0}}),Promise.resolve()};function y(t,n,r){var a=new Map,i=new Map;t.forEach(function(e){var t,r,l=n.get(e.externalId),s=l==null||(t=l.mediaData)==null?void 0:t.attachmentObjectId;s!=null&&a.set(o("WAMediaUtils").stringToDeliveryObjectId(s),e);var u=l==null||(r=l.mediaData)==null?void 0:r.plaintextHash;if(u!=null){var c=o("WAHashUtils").stringToPlaintextHash(o("MAWHandleEchoMediaMsgsRestoreV2").getBase64WithoutPadding(u)),d=i.get(c);i.set(c,d!=null?[].concat(d,[e.msgId]):[e.msgId])}});var l=Array.from(a.keys()),u=new Map;return C(i).then(function(i){var c=[];return l.forEach(function(e){var t,n=(t=a.get(e))==null?void 0:t.externalId;n!=null&&u.set(n,e)}),t.filter(function(e){return o("MAWDbMsg").isXMAMsg(e)}).forEach(function(t){var r=n.get(t.externalId);if(r){var a=u.get(t.externalId),l;if(a!=null){var d=i.get(a);d!=null&&(l=d.mediaId)}var m=r.serializationOrigin;m==null&&(m=o("EchoMessage").EchoSerializationOriginType.UNKNOWN);var p=v(t,r,l,m);p==null?o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] dbXMA is null. EchoMessage origin ",""])),m):(p.targetType===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE&&t.msgContent==null&&(o("WALogger").WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] msgContent is null for external link share XMA on Restore. Echo message origin ",""])),m),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_RESTORE,key:"missing_msg_content_external_link_xma"})),c.push(p))}}),b(c).then(function(e){return e.length>0&&e.map(async function(e){var t=u.get(e.externalId);if(r!==!0){var n;t!=null&&(n=i.get(t));var a=await o("MAWHandleXmaTransactionUtil").checkMediaChunkTransactionAndCreatedBridgeXma(n,e);o("MAWBridge").getBridge().fireAndForget("event","uiUpdate",{events:[{tag:"NewXMA",value:a}]})}}),e})})}var C=o("MAWIndexedDb").makeMsgrTransactor({media:o("MAWTransactionMode").READONLY,mediaBackup:o("MAWTransactionMode").READONLY},"restoreGetMediaForXMAByObjectIds",function(e){return function(t){var n=Array.from(t.keys());return o("MAWDbMediaTxns").maybeBulkGetMediaFromPlaintextHash(e,n).then(function(e){var n=new Map;return e.forEach(function(e){var r=t.get(e.plaintextHash);r==null||r.forEach(function(t){var r=e==null?void 0:e.mediaEntries.get(t);if(e!=null&&r!=null){var a=o("WAMediaUtils").decodeMediaEntryData(r);a.objectId!=null&&n.set(o("WAMediaUtils").stringToDeliveryObjectId(a.objectId),e)}else o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][getMediaForXMAByObjectIds] mediaEntry is null for media restore"])))})}),n})}}),b=o("MAWIndexedDb").makeMsgrTransactor({xma:o("MAWTransactionMode").READWRITE},"restoreWriteXMAsToDb",function(e){return function(t){return e.xma.bulkAdd(t,{allKeys:!0}).then(function(e){return e.map(function(e,n){return babelHelpers.extends({},t[n],{xmaId:e})})})}});function v(e,t,n,r){var a,i,l,s,u,h,y,C,b,v,R,L,E,k,I,T;if(t.xmaData==null)return o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] xmaData is missing in the echo doc. Echo message origin ",""])),r),null;var D;if(t.xmaData.xmaDefaultCTA!=null){var x;D=S((x=t.xmaData)==null?void 0:x.xmaDefaultCTA)}else o("WALogger").WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] xmaDefaultCTA field is not present in the echo doc. Echo message origin ",""])),r);var $;if(((a=t.xmaData)==null?void 0:a.xmaTargetType)!=null)$=o("MAWConvertXMATargetTypeToExtendedContentTargetType").convertXMATargetTypeToExtendedContentTargetType(t.xmaData.xmaTargetType);else return o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] xmaTargetType field is not present in the echo doc. Echo message origin ",""])),r),null;var P;((i=t.xmaData)==null?void 0:i.xmaGatingType)!=null?P=o("MAWConvertXMAGatingTypeToExtendedContentOverlayIconGlyph").convertXMAGatingTypeToExtendedContentOverlayIconGlyph(t.xmaData.xmaGatingType):o("WALogger").WARN(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] xmaGatingType field is not present in the echo doc. Echo message origin ",""])),r);var N;((l=t.xmaData)==null?void 0:l.xmaLayoutType)!=null?N=o("MAWConvertXMALayoutTypeToExtendedContentXMLLayoutType").convertXMALayoutTypeToExtendedContentXMLLayoutType(t.xmaData.xmaLayoutType):o("WALogger").WARN(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] xmaLayoutType field is not present in the echo doc. Echo message origin ",""])),r);var M;if(e.threadJid!=null)M=e.threadJid;else return o("WALogger").ERROR(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] threadJid field is not present in the restoredMsg. Echo message origin ",""])),r),null;if(D!=null&&!o("MAWParseXMAProtocol").isValidCTA(D,$,!0))return o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] invalid CTA observed while restoring XMA. Echo message origin ",""])),r),null;var w;return((s=t.xmaData)==null?void 0:s.xmaContentRef)!=null&&(w=t.xmaData.xmaContentRef),{author:e.author,contentRef:w,ctas:[],defaultCTA:D,defaultPreviewMediaId:n!=null?n:void 0,externalId:e.externalId,headerTitle:t==null||(u=t.xmaData)==null?void 0:u.xmaHeaderTitle,isTombstoned:t==null||(h=t.xmaData)==null?void 0:h.xmaIsTombstoned,maxSubtitleNumOfLines:t==null||(y=t.xmaData)==null?void 0:y.xmaMaxSubtitleNumLines,maxTitleNumOfLines:t==null||(C=t.xmaData)==null?void 0:C.xmaMaxTitleNumLines,msgId:e.msgId,overlayIconGlyph:P,overlayTitle:t==null||(b=t.xmaData)==null?void 0:b.xmaHeaderSubtitle,previewMediaIds:n!=null?[n]:[],subtitleText:t==null||(v=t.xmaData)==null?void 0:v.xmaSubtitleText,targetExpiringAtSec:((R=t.xmaData)==null?void 0:R.xmaTargetExpiry)!=null?o("WATimeUtils").castToUnixTime(Number((L=t.xmaData)==null?void 0:L.xmaTargetExpiry)):void 0,targetId:t==null||(E=t.xmaData)==null?void 0:E.xmaTargetId,targetType:$,targetUsername:t==null||(k=t.xmaData)==null?void 0:k.xmaTargetUsername,threadJid:M,titleText:(I=t.xmaData)==null?void 0:I.xmaTitleText,xmaDataclass:(T=t.xmaData)==null?void 0:T.xmaDataclass,xmaLayoutType:N}}function S(e){return{actionUrl:e,buttonType:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:e}}l.writeXMAToXMAStore=h,l.getMediaForXMAByObjectIds=C,l.writeXMAsToDb=b,l.getDefaultCTA=S}),98);
__d("MessageBackupSupplementalKeyGenerator",["$InternalEnum","MAWJids","WAGlobals","WAJids","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({REACTION:"reaction",EDIT:"edit",RAVEN_ACTION_MESSAGE:"raven_action_message"}),s=":";function u(e,t){return""+e+s+t}function c(e){return e.split(s)[1]}function d(e,t){var n=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),r=new RegExp("^"+n,"i");return r.test(e)}function m(t){return d(t,e.REACTION)}function p(t){return d(t,e.EDIT)}function _(t){return d(t,e.RAVEN_ACTION_MESSAGE)}function f(t){var n=t.split(s);if(n.length===1)return{rawIdentifierString:t,type:"poll_update"};var r=n[0];if(n.length<2||n.length>3)return{prefix:r,rawIdentifierString:t,type:"unknown"};var a=n[1],i=o("MAWJids").toUserJid(a);if(r===e.REACTION)return{senderJid:i,type:"reaction"};var l=n.length===3?o("WATimeUtils").castToMillisTime(Number(n[2])):null;return r===e.RAVEN_ACTION_MESSAGE?{senderJid:i,type:"raven_action_message"}:l==null?{prefix:r,rawIdentifierString:t,type:"unknown"}:r===e.EDIT?{senderJid:i,ts:l,type:"edit"}:{prefix:r,rawIdentifierString:t,type:"unknown"}}function g(t){switch(t.type){case"edit":return""+e.EDIT+s+o("WAJids").extractUserId(t.senderJid)+s+t.ts.toString();case"reaction":return""+e.REACTION+s+o("WAJids").extractUserId(t.senderJid);case"raven_action_message":return""+e.RAVEN_ACTION_MESSAGE+s+o("WAJids").extractUserId(t.senderJid);case"poll_update":return t.rawIdentifierString}}function h(t){var n;if(o("WAJids").isAuthorMe(t))n=o("WAGlobals").getMyUserJid();else{var r=o("WAJids").interpretAndValidateJid(t);if(r.jidType==="msgrUser")n=r.userJid;else return null}var a=o("WAJids").userIdFromJid(n);return""+e.REACTION+s+a}function y(t,n){var r;if(o("WAJids").isAuthorMe(t))r=o("WAGlobals").getMyUserJid();else{var a=o("WAJids").interpretAndValidateJid(t);if(a.jidType==="msgrUser")r=a.userJid;else return null}var i=o("WAJids").userIdFromJid(r);return""+e.EDIT+s+i+s+n.toString()}l.SupplementalKeyPrefix=e,l.SUPPLEMENTAL_KEY_DELIMITER=s,l.createMessageSupplementalKey_DEPRECATED=u,l.getSupplementalSenderId_DEPRECATED=c,l.isSupplementalProtobufAReaction=m,l.isSupplementalProtobufAnEdit=p,l.isSupplementalProtobufARavenAction=_,l.parseIdentifierString=f,l.toIdentifierString=g,l.createReactionSupplementalKey=h,l.createEditSupplementalKey=y}),98);
__d("MpsTags",["MAWProtobufDeserializers","MSGDataclassTypes.flow","getMediaTypeFromConsumerMessage"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=o("MAWProtobufDeserializers").DeserializedBackupMessage.create(e),r=(t=n.encryptedTransportMessage())==null||(t=t.consumerMessage())==null?void 0:t.proto,a=o("getMediaTypeFromConsumerMessage").getMediaTypeFromConsumerMessage(r);return s(a)}function s(e){return e==="image"?o("MSGDataclassTypes.flow").MpsMessageTag.Photo:e==="video"?o("MSGDataclassTypes.flow").MpsMessageTag.Video:e==="gif"?o("MSGDataclassTypes.flow").MpsMessageTag.Gif:e==="ptt"?o("MSGDataclassTypes.flow").MpsMessageTag.Audio:e==="document"?o("MSGDataclassTypes.flow").MpsMessageTag.File:e==="sticker"||e==="md-app-state"||e==="xma-image"||e===void 0||e===null?null:(function(){throw Error("Match: No case succesfully matched. Make exhaustive or add a wildcard case using '_'. Argument: "+e)})()}l.getTagFromProto=e,l.getMpsMessageTagFromMediaType=s}),98);
__d("MAWHandleEBRestoreWithHIM",["EBAPIWorkerCheck","EchoMessage","EncryptedBackupsUploadEntity","FBLogger","MAWAckLevel","MAWAsMessageApplication","MAWBulkEditMsgsTxns","MAWConvertXMAGatingTypeToExtendedContentOverlayIconGlyph","MAWConvertXMALayoutTypeToExtendedContentXMLLayoutType","MAWConvertXMATargetTypeToExtendedContentTargetType","MAWDbMsg","MAWEchoToProtobufConversionLoggingUtils","MAWFrontendMediaUtils","MAWHandleEchoMediaMsgsRestoreV2","MAWHandleEchoMsgsRestoreApiUtils","MAWHandleEchoReactionsRestore","MAWHandleEchoXMARestoreV2","MAWJids","MAWMsgType","MAWODSProxy","MAWParseXMAProtocol","MAWUnsafeCoerce","MAWUserJidWrapper","MessageBackupSupplementalKeyGenerator","MpsTags","Random","WAGlobals","WAHashUtils","WAJids","WALogger","WALongInt","WAOdsEnums","WAProtocolQueue","WAResultOrError","WASortedLists","WAStanzaUtils","WATimeUtils","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=["originalTs","threadJid","unsendMsgContentDeleteTs"],s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k;function I(e,t){return e==="@me"||e==="@system"?t:e}function T(e,t,n,r,a){var i=[];if(e.reactionXOfflineThreadingIds!=null)for(var l=0;l<e.reactionXOfflineThreadingIds.length;++l){var s=o("MAWHandleEchoReactionsRestore").getReactionsForReactionStore(t,n,r,null,a,e),u=s.map(function(e){return{decodedMsg:{unstoredDbMedia:void 0,unstoredDbMsg:void 0,unstoredDbReaction:e,unstoredDbReceiverFetchInfo:void 0},stanza:P(e.externalId,e.ts,I(e.author,n),t,"reaction")}});i.push.apply(i,u)}return i}function D(e,t,n,r,a){return r.map(function(r){if(r.messageId==null)return o("WALogger").ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] messageId is null in edit, original externalId: ",""])),e),a!=null&&o("MAWEchoToProtobufConversionLoggingUtils").addPoint(a,"getUnstoredDbEditsFromEcho_messageId_missing"),null;var i=r.messageId;return{decodedMsg:{unstoredDbEditActionMsg:{ack:o("MAWAckLevel").ACK.sent,author:n,editMsgContent:{content:r.text},externalId:o("WAStanzaUtils").toStanzaId(i),originalMsgExternalId:e,serverTs:o("WATimeUtils").castToUnixTime(r.timestamp),ts:o("WATimeUtils").castToUnixTime(r.timestamp),type:o("MAWMsgType").MSG_TYPE.EDIT_ACTION},unstoredDbMedia:void 0,unstoredDbMsg:void 0,unstoredDbReaction:void 0},stanza:P(o("WAStanzaUtils").toStanzaId(i),o("WATimeUtils").castToUnixTime(r.timestamp),n,t,"text")}}).filter(Boolean)}function x(e,t){return e.map(F).filter(Boolean).map(function(e){return $(e,t)})}function $(e,t){var n,a=o("MAWUserJidWrapper").getMyUserJid(),i=e.from,l=o("MAWHandleEchoMsgsRestoreApiUtils").getDbMsgTypeFromEchoMessage(e);if(i==null||l==null)return[];var s=e.xOfflineThreadingId;if(s==null)return r("FBLogger")("wmi_eb").warn("xOfflineThreadingId is null for Echo message"),[];var u=o("WAStanzaUtils").toStanzaId(s),c=o("WATimeUtils").castToUnixTime(((n=e.authoritativeTimestampMs)!=null?n:e.sortOrderMs)/1e3),d=o("MAWJids").toUserJid(i.localKey),m=A(e,t,a,u,"echo_content");if(m.success===!1)return[];var p=m.value,_=T(e,t,a,u,d),f=e.contentType===o("EchoMessage").EchoMessageContentType.TEXT||e.contentType===o("EchoMessage").EchoMessageContentType.PLACEHOLDER?"text":"media",g=D(u,t,d,e.editHistory);return[{decodedMsg:p,stanza:P(u,c,d,t,f)}].concat(_,g)}function P(e,t,n,r,a){var i={applicationPayload:new Uint8Array(0).buffer,backupDirective:null,icdc:null,metadata:null,protobuf:new Uint8Array(0),subprotocol:new Uint8Array(0),subprotocolType:"consumerMessage",type:"subprotocol",version:"v3"},l={folder:null,id:{author:n,chat:r,externalId:e},msg:i,recipientsCount:null,reportingMeta:null,ts:t,type:"IncomingMsg"};return{incomingType:"ebrestore",jid:r,message:{decrypted:l,details:{count:0,externalId:e,from:o("WAJids").switchOnMsgrChatJidType(r,{group:function(t){return{author:o("WAJids").defaultDeviceJidForUser(n),chat:t,groupJid:t,type:"group"}},user:function(t){return{author:o("WAJids").defaultDeviceJidForUser(n),chat:t,deviceJid:o("WAJids").defaultDeviceJidForUser(n),type:"device"}}}),hideDecryptionFailure:!0,isInstamadillo:!1,offline:null,recipient:null,reportingMeta:null,retryCount:0,ts:t,type:a}},priority:o("WAProtocolQueue").WAProtocolQueuePriorityLow,stanzaId:e,stanzaQueueId:o("MAWUnsafeCoerce").unsafeCoerce(-1),type:"message"}}function N(e){if(e.mediaData==null)return o("WAResultOrError").makeResult(null);var t=e.previewMediaData,n=e.sortOrderMs,r=e.xOfflineThreadingId,a=e.mediaData,i=a.attachmentObjectId,l=a.backupEntFbid,s=a.directPath,d=a.encryptedHash,m=a.filename,p=a.height,_=a.mediaContentType,f=a.mediaKey,g=a.mediaKeyTimestamp,h=a.mediaPlayableDuration,y=a.plaintextHash,C=a.previewContentHeight,b=a.previewContentWidth,v=a.size,S=a.width,R=e.contentType===o("EchoMessage").EchoMessageContentType.XMA,L=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(_||"",R),E=L.mediaType,k=L.serverMediaType,I=o("WAHashUtils").stringToPlaintextHash(o("MAWHandleEchoMediaMsgsRestoreV2").getBase64WithoutPadding(y)),T=null;if(t!=null)try{T=o("MAWHandleEchoMediaMsgsRestoreV2").constructRawDownloadableThumbnail(t),T!=null&&T.objectId==null&&o("WALogger").ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] downloadableThumbnail was created without metadata, source: protobuf"])))}catch(t){o("WALogger").ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unable to construct downloadableThumbnail from previewMediaData: ",", msg id: ",". Echo message origin ",""])),t,r,e.serializationOrigin)}if(f==null)return o("WAResultOrError").makeError("missing_media_key");if(d==null)return o("WAResultOrError").makeError("missing_encrypted_hash");var D=o("MAWHandleEchoMediaMsgsRestoreV2").constructMediaEntry(I,d,f,s,g,k,m,l,i,T,v),x=o("MAWHandleEchoMediaMsgsRestoreV2").getMediaInfo({filename:m,height:p,mediaPlayableDuration:h,mediaType:E,previewContentHeight:C,previewContentWidth:b,width:S}),$=x.validatedAudioInfo,P=x.validatedDocumentFileInfo,N=x.validatedImageInfo,M=x.validatedVideoInfo;return o("WAResultOrError").makeResult({mediaEntry:D,mediaType:E,msgIds:o("WASortedLists").asSortedSet(new Set),plaintextHash:o("WAHashUtils").stringToPlaintextHash(y),size:v||0,ts:g!=null?o("WATimeUtils").castToUnixTime(g):o("WATimeUtils").castMilliSecondsToUnixTime(n),validatedAudioInfo:$,validatedDocumentFileInfo:P,validatedImageInfo:N,validatedVideoInfo:M})}function M(e,t){if(e.xmaData==null||e.from==null||e.xOfflineThreadingId==null)return o("WAResultOrError").makeResult(null);var n=e.from,r=e.serializationOrigin,a=e.xmaData,i=e.xOfflineThreadingId,l=a.xmaContentRef,s=a.xmaDataclass,u=a.xmaDefaultCTA,c=a.xmaGatingType,p=a.xmaHeaderSubtitle,_=a.xmaHeaderTitle,f=a.xmaIsTombstoned,g=a.xmaLayoutType,h=a.xmaMaxSubtitleNumLines,y=a.xmaMaxTitleNumLines,C=a.xmaSubtitleText,b=a.xmaTargetExpiry,v=a.xmaTargetId,S=a.xmaTargetType,R=a.xmaTargetUsername,L=a.xmaTitleText;if(S==null)return o("WALogger").ERROR(d||(d=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Mandatory XMA Data missing for XMA message. Echo message origin ",""])),r),o("WAResultOrError").makeError("xma_mandatory_fields_missing");var E=o("MAWConvertXMATargetTypeToExtendedContentTargetType").convertXMATargetTypeToExtendedContentTargetType(S),k;if(u!=null&&(k=o("MAWHandleEchoXMARestoreV2").getDefaultCTA(u)),k!=null&&!o("MAWParseXMAProtocol").isValidCTA(k,E,!0))return o("WALogger").ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] defautlCTA failed validation check. Echo message origin ",""])),r),o("WAResultOrError").makeError("xma_cta_validation_failure");var I;c!=null&&(I=o("MAWConvertXMAGatingTypeToExtendedContentOverlayIconGlyph").convertXMAGatingTypeToExtendedContentOverlayIconGlyph(c));var T;b!=null&&(T=o("WATimeUtils").castToUnixTime(b));var D;return g!=null&&(D=o("MAWConvertXMALayoutTypeToExtendedContentXMLLayoutType").convertXMALayoutTypeToExtendedContentXMLLayoutType(g)),o("WAResultOrError").makeResult({unstoredDbXMA:{author:o("MAWJids").toUserJid(n.localKey),contentRef:l,ctas:[],defaultCTA:k,externalId:o("WAStanzaUtils").toStanzaId(i),headerTitle:_,isTombstoned:f,maxSubtitleNumOfLines:h,maxTitleNumOfLines:y,overlayDescription:p,overlayIconGlyph:I,overlayTitle:_,subtitleText:C,targetExpiringAtSec:T,targetId:v,targetType:E,targetUsername:R,threadJid:t,titleText:L,xmaDataclass:s,xmaLayoutType:D}})}function w(e){if(e.receiverFetchId==null||e.receiverFetchData==null)return o("WAResultOrError").makeResult(null);var t=e.receiverFetchData,n=e.receiverFetchId;return t.type!=="sticker"?(o("WALogger").ERROR(p||(p=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Unsupported receiver fetch message type: ",". Echo message origin ",""])),t.type,e.serializationOrigin),o("WAResultOrError").makeError("unsupported_message_type")):o("WAResultOrError").makeResult({mimetype:t.mimetype,previewHeight:t.previewHeight,previewWidth:t.previewWidth,receiverFetchId:n,type:t.type})}function A(t,n,r,a,i){var l=o("MAWHandleEchoMsgsRestoreApiUtils").getUnstoredDbMessageFromEchoMessage(t,n,r,a,void 0,i);if(l.success===!1)return o("WAResultOrError").makeError(l.error);var s=l.value,u=s.originalTs,c=s.threadJid,d=s.unsendMsgContentDeleteTs,m=babelHelpers.objectWithoutPropertiesLoose(s,e);m.sortOrderMs=t.sortOrderMs;var p=N(t);if(p.success===!1)return p;var _=M(t,n);if(_.success===!1)return o("WAResultOrError").makeError(_.error);var f=_.value,g=w(t);if(g.success===!1)return o("WAResultOrError").makeError(g.error);var h=g.value;return o("WAResultOrError").makeResult({unstoredDbMedia:p.value,unstoredDbMsg:m,unstoredDbReaction:void 0,unstoredDbReceiverFetchInfo:h!=null?h:void 0,unstoredXMA:f!=null?f:void 0})}function F(e){try{return o("EchoMessage").decodeEchoMessage(e)}catch(e){return o("WALogger").ERROR(_||(_=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to decode echo message: ",""])),e),null}}function O(e,t){if(!o("EBAPIWorkerCheck").runningInWorker())throw r("FBLogger")("messenger_web").mustfixThrow("convertEchoMessagesToEBProtobufs should be called from the worker thread");var n=e.map(function(e){return B(e,t)}).filter(Boolean);return o("MAWODSProxy").odsBumpEntityKey({amount:n.length,entity:o("WAOdsEnums").Entity.EB_RESTORE,key:"echo2protobuf.success"}),n.length!==e.length&&(o("WALogger").WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to convert all echo messages to protobuf. Chat: ",", echo messages count: ",", converted echo messages count: ",""])),t,e.length,n.length),o("MAWODSProxy").odsBumpEntityKey({amount:e.length-n.length,entity:o("WAOdsEnums").Entity.EB_RESTORE,key:"echo2protobuf.fail"})),n}function B(e,t){var n=r("Random").uint32();o("MAWEchoToProtobufConversionLoggingUtils").startQplUserFlow(n);var a=F(e);if(a==null)return o("WALogger").ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][echo2protobuf] Failed to decode echo message"]))),o("MAWEchoToProtobufConversionLoggingUtils").endFailure(n,"echo_decode_failure"),null;var i=o("WAGlobals").getMyUserJid(),l=a.from,s=a.sortOrderMs,u=a.xOfflineThreadingId,c=o("WATimeUtils").castToMillisTime(s);if(u==null||l==null)return o("WALogger").ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][echo2protobuf] One of the mandatory fields is null for Echo message. Echo message origin ",""])),a.serializationOrigin),o("MAWEchoToProtobufConversionLoggingUtils").endFailure(n,"mandatory_fields_missing"),null;var d=o("MAWJids").toUserJid(l.localKey),m=o("WAStanzaUtils").toStanzaId(u),p=A(a,t,i,m,"first_edit_content");if(p.success===!1)return o("WALogger").ERROR(y||(y=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][echo2protobuf] Failed to extract UnstoredDbMsg from EchoMessage: ",""])),p.error),o("MAWEchoToProtobufConversionLoggingUtils").endFailure(n,"echo_message_parsing_failure_"+p.error),null;if(p.value.unstoredDbMsg==null)return o("WALogger").ERROR(C||(C=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][echo2protobuf] Failed to extract UnstoredDbMsg from EchoMessage: unstoredDbMsg missing in UnstoredDbContent"]))),o("MAWEchoToProtobufConversionLoggingUtils").endFailure(n,"unstoredDbMsg_conversion_failure_unstoredDbMsg_missing"),null;var _=p.value,f=_.unstoredDbMedia,I=_.unstoredDbMsg,x=_.unstoredDbReceiverFetchInfo,$=_.unstoredXMA,P={author:d,chat:t,externalId:m};I!=null&&(I.msgId=o("MAWDbMsg").stanzaIdToMsgId(m)),($==null?void 0:$.unstoredDbXMA)!=null&&($.unstoredDbXMA.msgId=o("MAWDbMsg").stanzaIdToMsgId(m)),f!=null&&(f.msgIds=o("WASortedLists").asSortedSet(new Set([o("MAWDbMsg").stanzaIdToMsgId(m)])));var N;($==null?void 0:$.unstoredDbXMA)!=null&&(N={associatedMessage:null,defaultPreview:f!=null?f:null,favicon:null,header:f!=null?f:null,previews:f!=null?[f]:null,xma:$.unstoredDbXMA});var M={frankingKey:null,frankingTag:null,frankingVersion:null,reportingContent:null,reportingTag:null},w;try{w={decryptedProtobuf:o("EncryptedBackupsUploadEntity").getEbBackupMessageBytesBuffer(o("EncryptedBackupsUploadEntity").encodeBackupMessage({messageApplication:o("MAWAsMessageApplication").encodeMessageApplication(I,f,null,N,t,r("justknobx")._("3632")?x:null),msgId:P,reportingMeta:M,sortOrderMs:c})),protobufTimestampMS:c}}catch(e){return o("MAWEchoToProtobufConversionLoggingUtils").endFailure(n,"top_level_protobuf_encoding_failure"),o("WALogger").ERROR(b||(b=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][echo2protobuf] Exception when trying to encode top-level protobuf: ",""])),e),null}var O=new Map,B=D(m,t,d,a.editHistory).map(function(e){var t;return(t=e.decodedMsg)==null?void 0:t.unstoredDbEditActionMsg}).filter(Boolean).filter(function(e){return e.externalId!==e.originalMsgExternalId}).map(function(e){return o("MAWBulkEditMsgsTxns").getMessageHistory(e,t)});B.length>0&&o("MAWEchoToProtobufConversionLoggingUtils").addPoint(n,"convert_edits"),B.forEach(function(e){var r=e.author,a=e.editTs,i=o("MessageBackupSupplementalKeyGenerator").createEditSupplementalKey(r,o("WATimeUtils").castUnixTimeToMillisTime(a));if(i==null){o("MAWEchoToProtobufConversionLoggingUtils").addPoint(n,"edit_supplemental_key_generation_failure"),o("WALogger").ERROR(v||(v=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][echo2protobuf] Failed to create edit supplemental key"])));return}if(e.editExternalId==null){o("MAWEchoToProtobufConversionLoggingUtils").addPoint(n,"edit_supplemental_key_generation_failure"),o("WALogger").ERROR(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][echo2protobuf] Failed to fetch edit external id"])));return}var l=e.editExternalId;try{O.set(i,{decryptedProtobuf:o("EncryptedBackupsUploadEntity").getEbBackupMessageBytesBuffer(o("EncryptedBackupsUploadEntity").encodeBackupMessage({messageApplication:o("MAWAsMessageApplication").encodeEditMessageApplication(e),msgId:{author:d,chat:t,externalId:l},reportingMeta:M,sortOrderMs:o("WATimeUtils").castUnixTimeToMillisTime(e.editTs)})),protobufTimestampMS:o("WATimeUtils").castUnixTimeToMillisTime(a)})}catch(e){o("MAWEchoToProtobufConversionLoggingUtils").addPoint(n,"edit_supplemental_protobuf_encoding_failure"),o("WALogger").ERROR(R||(R=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Exception when trying to encode edit supplemental protobuf: ",""])),e)}});var W=T(a,t,i,m,d).map(function(e){var t;return(t=e.decodedMsg)==null?void 0:t.unstoredDbReaction}).filter(Boolean);W.length>0&&o("MAWEchoToProtobufConversionLoggingUtils").addPoint(n,"convert_reactions"),W.forEach(function(e){var r=e.author,a=e.senderTimestampMs,i=e.ts,l=a!=null?o("WATimeUtils").castToMillisTime(o("WALongInt").numberOrThrowIfTooLarge(a)):o("WATimeUtils").castUnixTimeToMillisTime(i),s=o("MessageBackupSupplementalKeyGenerator").createReactionSupplementalKey(r);if(s==null){o("MAWEchoToProtobufConversionLoggingUtils").addPoint(n,"reaction_supplemental_key_generation_failure"),o("WALogger").ERROR(L||(L=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][echo2protobuf] Failed to create reaction supplemental key"])));return}try{O.set(s,{decryptedProtobuf:o("EncryptedBackupsUploadEntity").getEbBackupMessageBytesBuffer(o("EncryptedBackupsUploadEntity").encodeBackupMessage({messageApplication:o("MAWAsMessageApplication").encodeReactionMessageApplication(e),msgId:{author:d,chat:t,externalId:e.externalId},reportingMeta:M,sortOrderMs:l})),protobufTimestampMS:l})}catch(e){o("MAWEchoToProtobufConversionLoggingUtils").addPoint(n,"reaction_supplemental_protobuf_encoding_failure"),o("WALogger").ERROR(E||(E=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Exception when trying to encode reaction supplemental protobuf: ",""])),e)}}),o("MAWEchoToProtobufConversionLoggingUtils").endSuccess(n);var q;try{q=o("MpsTags").getTagFromProto(w.decryptedProtobuf)}catch(e){o("WALogger").ERROR(k||(k=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Failed to get tag from proto: ",""])),e)}return{otid:m,supplementalProtobufs:O,tags:q!=null?[q]:[],toplevelProtobuf:w}}l.convertEchoMessages=x,l.convertEchoMessagesToEBProtobufs=O}),98);
__d("MAWUnstoredQuotedMsgUtils",["FBLogger","MAWMsgType","WAJids","WAMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null){var t=e.content,n=e.remoteJid,a;switch(t.type){case o("MAWMsgType").MSG_TYPE.TEXT:a=u(t);break;case o("MAWMsgType").MSG_TYPE.IMAGE:a=c(t);break;case o("MAWMsgType").MSG_TYPE.VIDEO:a=d(t);break;case o("MAWMsgType").MSG_TYPE.PTT:a=m(t);break;case o("MAWMsgType").MSG_TYPE.GIF:a=p(t);break;case o("MAWMsgType").MSG_TYPE.STICKER:a=_(t);break;case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:a=g(t);break;case o("MAWMsgType").MSG_TYPE.UNAVAILABLE:a=h(t);break;case o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL:a=y(t);break;case o("WAMsgType").NOTE_REPLY:a=f(t);break;case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:a=C(t);break;default:throw t.type,r("FBLogger")("messenger_web").mustfixThrow("For flow")}return{content:a,remoteJid:n}}}function s(e){if(o("WAJids").isAuthorSystem(e.author))throw r("FBLogger")("messenger_web").mustfixThrow("A system message cannot be quoted");return{author:e.author,externalId:e.externalId,ts:e.ts}}function u(e){return babelHelpers.extends({},s(e),{msgContent:e.msgContent,type:o("MAWMsgType").MSG_TYPE.TEXT})}function c(e){return babelHelpers.extends({},s(e),{type:o("MAWMsgType").MSG_TYPE.IMAGE})}function d(e){return babelHelpers.extends({},s(e),{type:o("MAWMsgType").MSG_TYPE.VIDEO})}function m(e){return babelHelpers.extends({},s(e),{type:o("MAWMsgType").MSG_TYPE.PTT})}function p(e){return babelHelpers.extends({},s(e),{type:o("MAWMsgType").MSG_TYPE.GIF})}function _(e){return babelHelpers.extends({},s(e),{type:o("MAWMsgType").MSG_TYPE.STICKER})}function f(e){return babelHelpers.extends({},s(e),{expirationTs:e.expirationTs,msgContent:e.msgContent,type:o("WAMsgType").NOTE_REPLY})}function g(e){return babelHelpers.extends({},s(e),{type:o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE})}function h(e){return babelHelpers.extends({},s(e),{type:o("MAWMsgType").MSG_TYPE.UNAVAILABLE})}function y(e){return babelHelpers.extends({},s(e),{type:o("MAWMsgType").MSG_TYPE.EXPIRED_EPHEMERAL})}function C(e){return babelHelpers.extends({},s(e),{type:o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH})}function b(t){return{quote:e(t.quote)}}l.getWithQuoteMsg=b}),98);
__d("MAWUnstoredTypedMsgUtils",["MAWAdminMsgType","MAWDbMsg","MAWMsgType","MAWRavenUtils","MAWUnstoredQuotedMsgUtils","WAJids"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return{ack:e.ack,author:e.id.author,ebTimestampMs:e.ebTimestampMs,externalId:e.id.externalId,reportingMeta:e.reportingMeta,serverTs:e.serverTs,ts:e.ts}}function s(e){return{forwardingScore:e.forwardingScore,isForwarded:e.isForwarded}}function u(e){return{ephemeralSetting:c(e.ephemeralSetting),messageDeleteTs:e.deleteTs,messageExpirationTs:e.expirationTs}}function c(e){if(e!=null)return{ephemeralExpirationInSec:e.expirationTs,ephemeralLastUpdatedOrSetTimestamp:e.updatedTs}}function d(t,n){var r;return babelHelpers.extends({},e(t),s(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,collapsibleId:t.collapsibleId,isCollapsed:t.isCollapsed,msgContent:{commands:n.commands,content:(r=n.sentWithMessage)!=null?r:"",mentionedJids:n.mentionedJids},type:o("MAWMsgType").MSG_TYPE.XMA,xmaMessageType:n.targetType})}function m(t){return babelHelpers.extends({},e(t),s(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,editCount:0,msgContent:t.msgContent,specialTextSize:t.specialTextSize,type:o("MAWMsgType").MSG_TYPE.TEXT})}function p(t){var n;return babelHelpers.extends({},e(t),s(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,plaintextHash:(n=t.mediaId)!=null?n:void 0,type:o("MAWMsgType").MSG_TYPE.IMAGE})}function _(t){return babelHelpers.extends({},e(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,ravenEphemeralMediaState:o("MAWRavenUtils").getEphemeralMediaState(t.ravenEphemeralMediaState),ravenEphemeralType:t.ravenEphemeralType,ravenMediaType:t.ravenMediaType,type:o("MAWMsgType").MSG_TYPE.RAVEN})}function f(t){var n;return babelHelpers.extends({},e(t),s(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,plaintextHash:(n=t.mediaId)!=null?n:void 0,type:o("MAWMsgType").MSG_TYPE.VIDEO})}function g(t){return babelHelpers.extends({},e(t),s(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,type:o("MAWMsgType").MSG_TYPE.PTT})}function h(e){return{adminMsgContent:e.adminMsgContent,adminType:e.adminType}}function y(t){return babelHelpers.extends({},e(t),{altIndex:void 0,author:o("WAJids").AUTHOR_SYSTEM,msgContent:h(t.msgContent),type:o("MAWMsgType").MSG_TYPE.ADMIN})}function C(t){var n;return babelHelpers.extends({},e(t),s(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,plaintextHash:(n=t.mediaId)!=null?n:void 0,type:o("MAWMsgType").MSG_TYPE.GIF})}function b(t){var n;return babelHelpers.extends({},e(t),s(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,plaintextHash:(n=t.mediaId)!=null?n:void 0,type:o("MAWMsgType").MSG_TYPE.STICKER})}function v(t){return babelHelpers.extends({},e(t),s(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,type:o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE})}function S(t){return babelHelpers.extends({},e(t),{altIndex:o("MAWDbMsg").FUTUREPROOF_ALT_INDEX,msgContent:t.msgContent,type:o("MAWMsgType").MSG_TYPE.FUTUREPROOF})}function R(t){return babelHelpers.extends({},e(t),{altIndex:void 0,ebTimestampMs:t.ebTimestampMs,revokedExternalId:t.revokedExternalId,type:o("MAWMsgType").MSG_TYPE.REVOKED})}function L(e){return{adminMsgContent:e.adminMsgContent,adminType:e.adminType}}function E(t){return babelHelpers.extends({},e(t),{altIndex:void 0,msgContent:L(t.msgContent),type:o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN})}function k(e){return{adminMsgContent:e.adminMsgContent,adminType:e.adminType,screenshotActionType:e.screenshotActionType,version:e.version}}function I(t){return babelHelpers.extends({},e(t),{altIndex:void 0,msgContent:k(t.msgContent),type:o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION})}function T(e){return{adminType:e.adminType,authorName:e.authorName}}function D(t){return babelHelpers.extends({},e(t),{altIndex:void 0,msgContent:T(t.msgContent),type:o("MAWMsgType").MSG_TYPE.ICDC_ALERT})}function x(t){return babelHelpers.extends({},e(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,type:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE})}function $(t,n){var r=n.receiverFetchId;return babelHelpers.extends({},e(t),s(t),o("MAWUnstoredQuotedMsgUtils").getWithQuoteMsg(t),u(t),{altIndex:void 0,receiverFetchId:r,type:o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH})}function P(t,n){var r=t.id.author===o("WAJids").AUTHOR_ME,a=[n.name];r||a.unshift(t.id.author!==o("WAJids").AUTHOR_ME&&t.id.author!==o("WAJids").AUTHOR_SYSTEM?o("WAJids").userIdFromJid(t.id.author):t.id.author);var i=r?o("MAWAdminMsgType").CURRENT_USER_CREATED_POLL:o("MAWAdminMsgType").PARTICIPANT_CREATED_POLL;return babelHelpers.extends({},e(t),{altIndex:void 0,msgContent:{adminMsgContent:a,adminType:i,version:1},type:o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE})}function N(t){return babelHelpers.extends({},e(t),{altIndex:void 0,type:o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE})}l.getXMAMsg=d,l.getTextMsg=m,l.getImageMsg=p,l.getRavenMsg=_,l.getVideoMsg=f,l.getPttMsg=g,l.getAdminMsg=y,l.getGifMsg=C,l.getStickerMsg=b,l.getDocumentFileMsg=v,l.getFutureproofMsg=S,l.getRevokedMsg=R,l.getEphemeralSettingAdminMsg=E,l.getEphemeralScreenshotActionMsg=I,l.getICDCAlertMsg=D,l.getBumpExistingMessageMsg=x,l.getReceiverFetchMsg=$,l.getGroupPollCreateMsg=P,l.getGroupPollUpdateMsg=N}),98);
__d("MAWUnstoredMsgUtils",["FBLogger","MAWMsgType","MAWUnstoredTypedMsgUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.unstoredMsg,n=e.unstoredReceiverFetchInfo,a=e.unstoredXMA;if(t==null)return null;switch(t.type){case o("MAWMsgType").MSG_TYPE.TEXT:return o("MAWUnstoredTypedMsgUtils").getTextMsg(t);case o("MAWMsgType").MSG_TYPE.IMAGE:return o("MAWUnstoredTypedMsgUtils").getImageMsg(t);case o("MAWMsgType").MSG_TYPE.VIDEO:return o("MAWUnstoredTypedMsgUtils").getVideoMsg(t);case o("MAWMsgType").MSG_TYPE.PTT:return o("MAWUnstoredTypedMsgUtils").getPttMsg(t);case o("MAWMsgType").MSG_TYPE.ADMIN:return o("MAWUnstoredTypedMsgUtils").getAdminMsg(t);case o("MAWMsgType").MSG_TYPE.FUTUREPROOF:return o("MAWUnstoredTypedMsgUtils").getFutureproofMsg(t);case o("MAWMsgType").MSG_TYPE.REVOKED:return o("MAWUnstoredTypedMsgUtils").getRevokedMsg(t);case o("MAWMsgType").MSG_TYPE.GIF:return o("MAWUnstoredTypedMsgUtils").getGifMsg(t);case o("MAWMsgType").MSG_TYPE.STICKER:return o("MAWUnstoredTypedMsgUtils").getStickerMsg(t);case o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE:return o("MAWUnstoredTypedMsgUtils").getDocumentFileMsg(t);case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SETTING_ADMIN:return o("MAWUnstoredTypedMsgUtils").getEphemeralSettingAdminMsg(t);case o("MAWMsgType").MSG_TYPE.EPHEMERAL_SCREENSHOT_ACTION:return o("MAWUnstoredTypedMsgUtils").getEphemeralScreenshotActionMsg(t);case o("MAWMsgType").MSG_TYPE.ICDC_ALERT:return o("MAWUnstoredTypedMsgUtils").getICDCAlertMsg(t);case o("MAWMsgType").MSG_TYPE.XMA:{if((a==null?void 0:a.xma)==null)throw r("FBLogger")("messenger_web").mustfixThrow("XMA content cannot be parsed without XMA payload");return o("MAWUnstoredTypedMsgUtils").getXMAMsg(t,a==null?void 0:a.xma)}case o("MAWMsgType").MSG_TYPE.RAVEN:return o("MAWUnstoredTypedMsgUtils").getRavenMsg(t);case o("MAWMsgType").MSG_TYPE.RAVEN_ACTION:case o("MAWMsgType").MSG_TYPE.REACTION:case o("MAWMsgType").MSG_TYPE.EDIT_ACTION:return null;case o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE:return o("MAWUnstoredTypedMsgUtils").getBumpExistingMessageMsg(t);case o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH:{if(n==null)throw r("FBLogger")("messenger_web").mustfixThrow("Receiver Fetch Info cannot be null for Receiver Fetch Msg");return o("MAWUnstoredTypedMsgUtils").getReceiverFetchMsg(t,n)}case o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE:throw r("FBLogger")("messenger_web").mustfixThrow("Group polls are not yet supported");case o("MAWMsgType").MSG_TYPE.GROUP_POLL_UPDATE:throw r("FBLogger")("messenger_web").mustfixThrow("Group polls are not yet supported");default:return t.type,null}}function s(e){if(e==null)return null;switch(e.type){case o("MAWMsgType").MSG_TYPE.TEXT:return o("MAWUnstoredTypedMsgUtils").getTextMsg(e);case o("MAWMsgType").MSG_TYPE.GIF:return o("MAWUnstoredTypedMsgUtils").getGifMsg(e);case o("MAWMsgType").MSG_TYPE.STICKER:return o("MAWUnstoredTypedMsgUtils").getStickerMsg(e);default:return null}}function u(e){var t=e.unstoredMsg;if(!t||t.type!==o("MAWMsgType").MSG_TYPE.REACTION)return null;var n=t;return{ack:n.ack,author:n.id.author,externalId:n.id.externalId,groupingKey:n.groupingKey,reaction:n.reaction,reactToAuthor:n.reactToAuthor,reactToExternalId:n.reactToExternalId,senderTimestampMs:n.senderTimestampMs,threadJid:n.id.chat,ts:n.ts}}function c(e){var t=e.unstoredMsg;if(!t||t.type!==o("MAWMsgType").MSG_TYPE.RAVEN_ACTION)return null;var n=t;return{ack:n.ack,actionTimestamp:n.actionTimestamp,actionType:n.actionType,author:n.id.author,externalId:n.id.externalId,ravenActionToMsgExternalId:n.ravenActionToMsgExternalId,ts:n.ts,type:n.type}}function d(e){var t=e.unstoredIncomingGroupInvite;return t?babelHelpers.extends({},t):null}function m(e){return e==null?null:{ack:e.ack,author:e.id.author,editMsgContent:e.editMsgContent,externalId:e.id.externalId,originalMsgExternalId:e.originalMsgExternalId,reportingMeta:e.reportingMeta,serverTs:e.serverTs,specialTextSize:e.specialTextSize,ts:e.ts,type:e.type}}function p(e){var t=e.unstoredReceiverFetchInfo;return t==null?null:babelHelpers.extends({},t,{type:"sticker"})}function _(e){var t=e.unstoredGroupPollCreateInfo;return t==null?null:babelHelpers.extends({},t,{latestSenderTimestampsMs:new Map})}function f(e){var t=e.unstoredGroupPollUpdateInfo;return t==null?null:{encryptedMessage:t.pollUpdateMessage}}l.getUnstoredMsg=e,l.getUnstoredAssociatedMsg=s,l.getUnstoredReaction=u,l.getUnstoredRavenActionMsg=c,l.getGroupInvite=d,l.getUnstoredEditActionMsg=m,l.getUnstoredReceiverFetchInfo=p,l.getUnstoredGroupPollCreateInfo=_,l.getUnstoredDbGroupPollUpdateInfo=f}),98);
__d("MAWUnstoredMediaUtils",["MAWUnstoredMsgUtils","WASortedLists"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e==null?null:{accessibilitySummaryText:e.accessibilitySummaryText,mediaEntry:e.mediaEntry,mediaType:e.mediaType,msgIds:o("WASortedLists").emptySet(),plaintextHash:e.plaintextHash,size:e.size,ts:e.ts,validatedAudioInfo:e.validatedAudioInfo,validatedDocumentFileInfo:e.validatedDocumentFileInfo,validatedImageInfo:e.validatedImageInfo,validatedVideoInfo:e.validatedVideoInfo}}function s(t){var n,r,a,i,l=t.unstoredXMA;if(l!=null){var s=l.unstoredAssociatedMedia,u=l.unstoredAssociatedMsg,c=l.unstoredFavicon,d=l.unstoredHeaderMedia,m=l.unstoredPreviews,p=l.xma;return{unstoredAssociatedMedia:(n=e(s))!=null?n:void 0,unstoredAssociatedMsg:(r=o("MAWUnstoredMsgUtils").getUnstoredAssociatedMsg(u))!=null?r:void 0,unstoredDbXMA:{author:p.author,contentRef:p.contentRef,ctas:p.ctas,defaultCTA:p.defaultCTA,externalId:p.externalId,headerTitle:p.headerTitle,isTombstoned:p.isTombstoned,maxSubtitleNumOfLines:p.maxSubtitleNumOfLines,maxTitleNumOfLines:p.maxTitleNumOfLines,overlayDescription:p.overlayDescription,overlayIconGlyph:p.overlayIconGlyph,overlayTitle:p.overlayTitle,subtitleText:p.subtitleText,targetExpiringAtSec:p.targetExpiringAtSec,targetId:p.targetId,targetType:p.targetType,targetUsername:p.targetUsername,threadJid:p.threadJid,titleText:p.titleText,xmaDataclass:p.xmaDataclass,xmaLayoutType:p.xmaLayoutType},unstoredFavicon:(a=e(c))!=null?a:void 0,unstoredHeaderMedia:(i=e(d))!=null?i:void 0,unstoredPreviews:m?m.map(function(t){return e(t)}).filter(Boolean):void 0}}}l.getUnstoredMedia=e,l.getUnstoredXMA=s}),98);
__d("MAWUnstoredContentToUnstoredDbContentUtils",["MAWUnstoredMediaUtils","MAWUnstoredMsgUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t,n=(t=o("MAWUnstoredMsgUtils")).getUnstoredMsg(e),r=o("MAWUnstoredMediaUtils").getUnstoredMedia(e.unstoredMedia),a=t.getUnstoredReaction(e),i=t.getUnstoredRavenActionMsg(e),l=o("MAWUnstoredMediaUtils").getUnstoredXMA(e),s=t.getGroupInvite(e),u=t.getUnstoredEditActionMsg(e.unstoredEditMsg),c=t.getUnstoredReceiverFetchInfo(e),d=t.getUnstoredGroupPollCreateInfo(e),m=t.getUnstoredDbGroupPollUpdateInfo(e);return s==null?{contentTypeForLogging:e.contentTypeForLogging,unstoredDbEditActionMsg:u,unstoredDbGroupPollCreateInfo:d,unstoredDbGroupPollUpdateInfo:m,unstoredDbMedia:r,unstoredDbMsg:n,unstoredDbRavenActionMsg:i,unstoredDbReaction:a,unstoredDbReceiverFetchInfo:c,unstoredXMA:l,xmaTargetTypeForLogging:e.xmaTargetTypeForLogging}:{contentTypeForLogging:e.contentTypeForLogging,unstoredDbEditActionMsg:u,unstoredDbGroupPollCreateInfo:d,unstoredDbGroupPollUpdateInfo:m,unstoredDbMedia:r,unstoredDbMsg:n,unstoredDbRavenActionMsg:i,unstoredDbReaction:a,unstoredDbReceiverFetchInfo:c,unstoredIncomingDbGroupInvite:s,unstoredXMA:l,xmaTargetTypeForLogging:e.xmaTargetTypeForLogging}}l.unstoredContentToUnstoredDbContent=e}),98);/*FB_PKG_DELIM*/
__d("BaseInfiniteScrollListItem.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef;function m(e){var t=o("react-compiler-runtime").c(6),n=e["aria-posinset"],r=e["aria-setsize"],a=e.children,i=r===void 0?-1:r,l=d(null),u,m;t[0]===Symbol.for("react.memo_cache_sentinel")?(u=function(){var e=l.current;if(e!=null){var t=function(n){e:switch(n.key){case"PageDown":{n.preventDefault(),p(e);break e}case"PageUp":n.preventDefault(),_(e)}};return e.addEventListener("keydown",t),(function(){return e.removeEventListener("keydown",t)})}},m=[],t[0]=u,t[1]=m):(u=t[0],m=t[1]),c(u,m);var f;return t[2]!==n||t[3]!==i||t[4]!==a?(f=s.jsx("article",{"aria-posinset":n,"aria-setsize":i,ref:l,tabIndex:-1,children:a}),t[2]=n,t[3]=i,t[4]=a,t[5]=f):f=t[5],f}function p(e){var t=e.nextElementSibling;t!=null&&t instanceof HTMLElement&&t.hasAttribute("tabindex")&&t.focus()}function _(e){var t=e.previousElementSibling;t!=null&&t instanceof HTMLElement&&t.hasAttribute("tabindex")&&t.focus()}l.default=m}),98);
__d("BaseInfiniteScrollList.react",["BaseInfiniteScrollListItem.react","BaseScrollableAreaContext","CometDialogContext","CometInfiniteScrollTrigger.react","CometScrollableArea.react","FBLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["forceBrowserDefault","isLoading","items","loadingIndicator","nextFocusableElementRef","onScroll","onScrollBottom","onScrollTop","prevFocusableElementRef","renderItem","role","testid","xstyle"],s,u=s||(s=o("react")),c=s,d=c.useContext,m=c.useEffect,p=c.useRef;function _(t){var n=o("react-compiler-runtime").c(44),a,i,l,s,c,_,f,y,C,b,v,S,R,L;n[0]!==t?(a=t.forceBrowserDefault,i=t.isLoading,l=t.items,s=t.loadingIndicator,c=t.nextFocusableElementRef,_=t.onScroll,f=t.onScrollBottom,y=t.onScrollTop,C=t.prevFocusableElementRef,b=t.renderItem,v=t.role,S=t.testid,L=t.xstyle,R=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=_,n[7]=f,n[8]=y,n[9]=C,n[10]=b,n[11]=v,n[12]=S,n[13]=R,n[14]=L):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],_=n[6],f=n[7],y=n[8],C=n[9],b=n[10],v=n[11],S=n[12],R=n[13],L=n[14]);var E=d(r("CometDialogContext")),k=d(r("BaseScrollableAreaContext"));E==null&&k.length>0&&r("FBLogger")("comet_ui").blameToPreviousFrame().warn("For XPlat React compatibility, BaseInfiniteScrollList should not be nested inside scrollable containers such as BaseScrollableArea with the same orientation. It may cause unexpected behaviors and break infinite scroll in React Native platforms.");var I=p(null),T,D;n[15]!==c||n[16]!==C?(T=function(){var e=I.current;if(e!=null){var t=function(n){e:switch(n.key){case"Home":{if(n.ctrlKey){var t;if(n.preventDefault(),(t=C)!=null&&t.current)C.current.focus();else{var r;(r=g(e))==null||r.focus()}}break e}case"End":if(n.ctrlKey){var o;if(n.preventDefault(),((o=c)==null?void 0:o.current)!=null)c.current.focus();else{var a;(a=h(e))==null||a.focus()}}}};return e.addEventListener("keydown",t),(function(){return e.removeEventListener("keydown",t)})}},D=[c,C],n[15]=c,n[16]=C,n[17]=T,n[18]=D):(T=n[17],D=n[18]),m(T,D);var x;if(n[19]!==l||n[20]!==b){var $;n[22]!==b?($=function(t,n){return u.jsx(r("BaseInfiniteScrollListItem.react"),{"aria-posinset":n+1,children:b(t,n)},n)},n[22]=b,n[23]=$):$=n[23],x=l.map($),n[19]=l,n[20]=b,n[21]=x}else x=n[21];var P=l.length+1,N;n[24]!==s||n[25]!==P?(N=u.jsx(r("BaseInfiniteScrollListItem.react"),{"aria-posinset":P,children:s}),n[24]=s,n[25]=P,n[26]=N):N=n[26];var M;n[27]!==i||n[28]!==N||n[29]!==R?(M=u.jsx(r("CometInfiniteScrollTrigger.react"),babelHelpers.extends({},R,{isLoading:i,children:N})),n[27]=i,n[28]=N,n[29]=R,n[30]=M):M=n[30];var w;n[31]!==i||n[32]!==x||n[33]!==M?(w=u.jsxs("section",{"aria-busy":i,ref:I,role:"feed",children:[x,M]}),n[31]=i,n[32]=x,n[33]=M,n[34]=w):w=n[34];var A;return n[35]!==a||n[36]!==_||n[37]!==f||n[38]!==y||n[39]!==v||n[40]!==w||n[41]!==S||n[42]!==L?(A=u.jsx(r("CometScrollableArea.react"),{forceBrowserDefault:a,horizontal:!1,onScroll:_,onScrollBottom:f,onScrollTop:y,role:v,testid:void 0,xstyle:L,children:w}),n[35]=a,n[36]=_,n[37]=f,n[38]=y,n[39]=v,n[40]=w,n[41]=S,n[42]=L,n[43]=A):A=n[43],A}function f(){return Array.from(document.querySelectorAll('button, [href]:not(link), input, select, textarea, [tabindex]:not([tabindex="-1"])'))}function g(e){for(var t=f(),n=null,r=0;r<t.length&&e.compareDocumentPosition(t[r])===Node.DOCUMENT_POSITION_PRECEDING;r++)n=t[r];return n}function h(e){for(var t=f().reverse(),n=null,r=0;r<t.length&&e.compareDocumentPosition(t[r])===Node.DOCUMENT_POSITION_FOLLOWING;r++)n=t[r];return n}l.default=_}),98);
__d("FDSAirplaneFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("571771"),20),u=e;l.default=u}),98);
__d("FDSAppThreadsFilled16PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("380222"),16),u=e;l.default=u}),98);
__d("FDSBadgeCheckmarkFilled12PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("494936"),12),u=e;l.default=u}),98);
__d("FDSCalendarAddFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("640913"),20),u=e;l.default=u}),98);
__d("FDSCamcorderCrossFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("662989"),20),u=e;l.default=u}),98);
__d("FDSCamcorderIncomingFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("1096148"),20),u=e;l.default=u}),98);
__d("FDSCamcorderOutgoingFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("1096150"),20),u=e;l.default=u}),98);
__d("FDSCamcorderPlusFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("662993"),20),u=e;l.default=u}),98);
__d("FDSCheckmarkCircleFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("498146"),20),u=e;l.default=u}),98);
__d("FDSCheckmarkFilled24PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("477815"),24),u=e;l.default=u}),98);
__d("FDSCurrencyUsdFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("847056"),20),u=e;l.default=u}),98);
__d("FDSDocumentFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("728245"),20),u=e;l.default=u}),98);
__d("FDSFriendConfirmFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("538342"),20),u=e;l.default=u}),98);
__d("FDSFriendRemoveFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("714636"),20),u=e;l.default=u}),98);
__d("FDSFriendRequestFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("502671"),20),u=e;l.default=u}),98);
__d("FDSKeyHouseFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("1670302"),20),u=e;l.default=u}),98);
__d("FDSLocationFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("795388"),20),u=e;l.default=u}),98);
__d("FDSMapFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("645715"),20),u=e;l.default=u}),98);
__d("FDSNumberedBadge.react",["fbt","CometScreenReaderText.react","CometVisualCompletionAttributes","getFDSBadgeColorStyle","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d={rectangle:{borderStartStartRadius:"x1ekkm8c",borderStartEndRadius:"x1143rjc",borderEndEndRadius:"xum4auv",borderEndStartRadius:"xj21bgg",$$css:!0},root:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x3nfvp2",fontSize:"x1nxh6w3",fontWeight:"xk50ysn",height:"xhvdbge",lineHeight:"xo5v014",minWidth:"xnyloks",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(20),a=t.accessibilityText,i=t.color,l=t.overflow,u=t.ref,m=t.testid,p=t.value,_=t.vcIgnore,f=i===void 0?"red":i,g=l===void 0?20:l,h=_===void 0?!1:_,y;n[0]!==h?(y=h===!0?r("CometVisualCompletionAttributes").IGNORE_DYNAMIC:{},n[0]=h,n[1]=y):y=n[1];var C;n[2]!==f||n[3]!==p?(C=(e||(e=r("stylex"))).props(d.root,r("getFDSBadgeColorStyle")(f),p>=10&&d.rectangle),n[2]=f,n[3]=p,n[4]=C):C=n[4];var b;n[5]!==a?(b=(typeof a=="string"||s.isFbtInstance(a))&&c.jsx(r("CometScreenReaderText.react"),{text:a}),n[5]=a,n[6]=b):b=n[6];var v=typeof a=="string"||s.isFbtInstance(a)?!0:void 0,S;n[7]!==f?(S={0:{className:"x6s0dn4 xtk6v10 x3nfvp2 x5yr21d xl56j7k xexx8yu x18d9i69 xaso8d8 x1gabggj xh8yej3"},1:{className:"x6s0dn4 x3nfvp2 x5yr21d xl56j7k xexx8yu x18d9i69 xaso8d8 x1gabggj xh8yej3 x1mvi0mv"}}[(f==="lightBlue")<<0],n[7]=f,n[8]=S):S=n[8];var R=p>g?g+"+":p,L;n[9]!==v||n[10]!==S||n[11]!==R?(L=c.jsx("span",babelHelpers.extends({"aria-hidden":v},S,{children:R})),n[9]=v,n[10]=S,n[11]=R,n[12]=L):L=n[12];var E;return n[13]!==u||n[14]!==L||n[15]!==y||n[16]!==C||n[17]!==b||n[18]!==m?(E=c.jsxs("span",babelHelpers.extends({},y,C,{"data-testid":void 0,ref:u,children:[b,L]})),n[13]=u,n[14]=L,n[15]=y,n[16]=C,n[17]=b,n[18]=m,n[19]=E):E=n[19],E}l.default=m}),98);
__d("FDSPhoneCrossFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("847457"),20),u=e;l.default=u}),98);
__d("FDSPhoneIncomingFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("1096151"),20),u=e;l.default=u}),98);
__d("FDSPhoneOutgoingFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("1096154"),20),u=e;l.default=u}),98);
__d("FDSPinFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("481942"),20),u=e;l.default=u}),98);
__d("FDSPostClockFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("1604445"),20),u=e;l.default=u}),98);
__d("FDSPostSlashFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("1501526"),20),u=e;l.default=u}),98);
__d("FDSShoppingCartFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("763120"),20),u=e;l.default=u}),98);
__d("FDSTagFilled20PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("502473"),20),u=e;l.default=u}),98);
__d("LSClearSingleCommunityMember",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return n[0]=!0,t.i64.neq(void 0,void 0)?t.forEach(t.filter(t.db.table(170).fetch([[[e[0],e[1]]]]),function(r){return t.i64.eq(r.groupThreadId,void 0)&&t.i64.eq(r.communityId,e[0])&&t.i64.eq(r.contactId,e[1])&&(n[0]||r.requestId===void 0)}),function(e){return e.delete()}):t.forEach(t.filter(t.db.table(170).fetch([[[e[0],e[1]]]]),function(r){return t.i64.eq(r.communityId,e[0])&&t.i64.eq(r.contactId,e[1])&&(n[0]||r.requestId===void 0)}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxClearSingleCommunityMemberStoredProcedure",e.__tables__=["community_members"],a.exports=e}),null);
__d("LSCommunityWebSurfaceType",[],(function(t,n,r,o,a,i){var e=Object.freeze({_TEST_:0,COMMUNITY_LIST:1,CHANNEL_LIST:2});i.default=e}),66);
__d("LexicalClipboard",["cr:862"],(function(t,n,r,o,a,i){a.exports=n("cr:862")}),null);
__d("LexicalHtml",["cr:1497"],(function(t,n,r,o,a,i){a.exports=n("cr:1497")}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<d6430a5c30d3fa2b9f68c5c2e6026021>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalClipboard.prod",["Lexical","LexicalHtml","LexicalSelection","LexicalUtils"],(function $module_LexicalClipboard_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function r(e){var n=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams();o.append("code",e);for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}for(var _e of t)o.append("v",_e);throw n.search=o.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}function i(t,n){if(n===void 0){n=require("Lexical").$getSelection();}return null==n&&r(166),require("Lexical").$isRangeSelection(n)&&n.isCollapsed()||0===n.getNodes().length?"":require("LexicalHtml").$generateHtmlFromNodes(t,n);}function s(e,t){if(t===void 0){t=require("Lexical").$getSelection();}return null==t&&r(166),require("Lexical").$isRangeSelection(t)&&t.isCollapsed()||0===t.getNodes().length?null:JSON.stringify(c(e,t));}function l(e,t,n){e.dispatchCommand(require("Lexical").SELECTION_INSERT_CLIPBOARD_NODES_COMMAND,{nodes:t,selection:n})||(n.insertNodes(t),function(e){if(require("Lexical").$isRangeSelection(e)&&e.isCollapsed()){var _t=e.anchor;var _n=null;var _r=require("Lexical").$caretFromPoint(_t,"previous");if(_r)if(require("Lexical").$isTextPointCaret(_r))_n=_r.origin;else{var _e2=require("Lexical").$getCaretRange(_r,require("Lexical").$getChildCaret(require("Lexical").$getRoot(),"next").getFlipped());for(var _t2 of _e2){if(require("Lexical").$isTextNode(_t2.origin)){_n=_t2.origin;break;}if(require("Lexical").$isElementNode(_t2.origin)&&!_t2.origin.isInline())break;}}if(_n&&require("Lexical").$isTextNode(_n)){var _t3=_n.getFormat(),_o=_n.getStyle();e.format===_t3&&e.style===_o||(e.format=_t3,e.style=_o,e.dirty=!0);}}}(n));}function a(e,n,i,s){if(s===void 0){s=[];}var l=null===n||i.isSelected(n);var c=require("Lexical").$isElementNode(i)&&i.excludeFromCopy("html");var d=i;null!==n&&require("Lexical").$isTextNode(d)&&(d=require("LexicalSelection").$sliceSelectedTextNodeContent(n,d,"clone"));var u=require("Lexical").$isElementNode(d)?d.getChildren():[],f=function(e){var t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&r(58,n.name),require("Lexical").$isElementNode(e)){var _e3=t.children;Array.isArray(_e3)||r(59,n.name);}return t;}(d);require("Lexical").$isTextNode(d)&&0===d.getTextContentSize()&&(l=!1);for(var _t4=0;_t4<u.length;_t4++){var _r2=u[_t4],_s=a(e,n,_r2,f.children);!l&&require("Lexical").$isElementNode(i)&&_s&&i.extractWithChild(_r2,n,"clone")&&(l=!0);}if(l&&!c)s.push(f);else if(Array.isArray(f.children))for(var _e4=0;_e4<f.children.length;_e4++){var _t5=f.children[_e4];s.push(_t5);}return l;}function c(e,t){var n=[],r=require("Lexical").$getRoot().getChildren();for(var _o2=0;_o2<r.length;_o2++){a(e,t,r[_o2],n);}return{namespace:e._config.namespace,nodes:n};}function d(e){var n=[];for(var _r3=0;_r3<e.length;_r3++){var _i=e[_r3],_s2=require("Lexical").$parseSerializedNode(_i);require("Lexical").$isTextNode(_s2)&&require("LexicalSelection").$addNodeStyle(_s2),n.push(_s2);}return n;}var u=null;function f(e,t,n){if(void 0===n){var _t6=require("Lexical").getDOMSelection(e._window),_r4=require("Lexical").$getSelection();if(!_r4||_r4.isCollapsed())return!1;if(!_t6)return!1;var _i2=_t6.anchorNode,_s3=_t6.focusNode;if(null!==_i2&&null!==_s3&&!require("Lexical").isSelectionWithinEditor(e,_i2,_s3))return!1;n=g(_r4);}t.preventDefault();var r=t.clipboardData;return null!==r&&(x(r,n),!0);}var p=[["text/html",i],["application/x-lexical-editor",s]];function g(e){if(e===void 0){e=require("Lexical").$getSelection();}var t={"text/plain":e?e.getTextContent():""};if(e){var _n2=require("Lexical").$getEditor();for(var _ref2 of p){var _o3=_ref2[0];var _r5=_ref2[1];{var _i3=_r5(_n2,e);null!==_i3&&(t[_o3]=_i3);}}}return t;}function x(e,t){for(var _ref4 of p){var _n3=_ref4[0];void 0===t[_n3]&&e.setData(_n3,"");}for(var _n4 in t){var _o4=t[_n4];void 0!==_o4&&e.setData(_n4,_o4);}}exports.$generateJSONFromSelectedNodes=c,exports.$generateNodesFromSerializedNodes=d,exports.$getClipboardDataFromSelection=g,exports.$getHtmlContent=i,exports.$getLexicalContent=s,exports.$insertDataTransferForPlainText=function(e,t){var n=e.getData("text/plain")||e.getData("text/uri-list");null!=n&&t.insertRawText(n);},exports.$insertDataTransferForRichText=function(t,n,r){var i=t.getData("application/x-lexical-editor");if(i)try{var _e5=JSON.parse(i);if(_e5.namespace===r._config.namespace&&Array.isArray(_e5.nodes)){return l(r,d(_e5.nodes),n);}}catch(e){console.error(e);}var s=t.getData("text/html"),a=t.getData("text/plain");if(s&&a!==s)try{var _t7=new DOMParser().parseFromString(function(e){if(window.trustedTypes&&window.trustedTypes.createPolicy){return window.trustedTypes.createPolicy("Lexical",{createHTML:function createHTML(e){return e;}}).createHTML(e);}return e;}(s),"text/html");return l(r,require("LexicalHtml").$generateNodesFromDOM(r,_t7),n);}catch(e){console.error(e);}var c=a||t.getData("text/uri-list");if(null!=c)if(require("Lexical").$isRangeSelection(n)){var _e6=c.split(/(\r?\n|\t)/);""===_e6[_e6.length-1]&&_e6.pop();for(var _t8=0;_t8<_e6.length;_t8++){var _n5=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(_n5)){var _r6=_e6[_t8];"\n"===_r6||"\r\n"===_r6?_n5.insertParagraph():"\t"===_r6?_n5.insertNodes([require("Lexical").$createTabNode()]):_n5.insertText(_r6);}}}else n.insertRawText(c);},exports.$insertGeneratedNodes=l,exports.copyToClipboard=async function(e,t,r){if(null!==u)return!1;if(null!==t)return new Promise(function(n,o){e.update(function(){n(f(e,t,r));});});var i=e.getRootElement(),s=e._window||window,l=s.document,a=require("Lexical").getDOMSelection(s);if(null===i||null===a)return!1;var c=l.createElement("span");c.style.cssText="position: fixed; top: -1000px;",c.append(l.createTextNode("#")),i.append(c);var d=new Range();return d.setStart(c,0),d.setEnd(c,1),a.removeAllRanges(),a.addRange(d),new Promise(function(t,i){var a=e.registerCommand(require("Lexical").COPY_COMMAND,function(o){return require("LexicalUtils").objectKlassEquals(o,ClipboardEvent)&&(a(),null!==u&&(s.clearTimeout(u),u=null),t(f(e,o,r))),!0;},require("Lexical").COMMAND_PRIORITY_CRITICAL);u=s.setTimeout(function(){a(),u=null,t(!1);},50),l.execCommand("copy"),c.remove();});},exports.setLexicalClipboardDataTransfer=x;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<f2466b099757848c03fec2201199ae0e>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalDragon.prod",["Lexical","LexicalExtension"],(function $module_LexicalDragon_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function n(e){var n=window.location.origin,o=function o(_o){if(_o.origin!==n)return;var i=e.getRootElement();if(document.activeElement!==i)return;var s=_o.data;if("string"==typeof s){var _n;try{_n=JSON.parse(s);}catch(e){return;}if(_n&&"nuanria_messaging"===_n.protocol&&"request"===_n.type){var _i=_n.payload;if(_i&&"makeChanges"===_i.functionId){var _n2=_i.args;if(_n2){var _i2=_n2[0],_s=_n2[1],a=_n2[2],r=_n2[3],d=_n2[4];e.update(function(){var e=require("Lexical").$getSelection();if(require("Lexical").$isRangeSelection(e)){var _n3=e.anchor;var c=_n3.getNode(),g=0,u=0;if(require("Lexical").$isTextNode(c)&&_i2>=0&&_s>=0&&(g=_i2,u=_i2+_s,e.setTextNodeRange(c,g,c,u)),g===u&&""===a||(e.insertRawText(a),c=_n3.getNode()),require("Lexical").$isTextNode(c)){g=r,u=r+d;var _t=c.getTextContentSize();g=g>_t?_t:g,u=u>_t?_t:u,e.setTextNodeRange(c,g,c,u);}_o.stopImmediatePropagation();}});}}}}};return window.addEventListener("message",o,!0),function(){window.removeEventListener("message",o,!0);};}var o=require("Lexical").defineExtension({build:function build(t,n,o){return require("LexicalExtension").namedSignals(n);},config:require("Lexical").safeCast({disabled:"undefined"==typeof window}),name:"LexicalDragon",register:function register(t,o,i){return require("LexicalExtension").effect(function(){return i.getOutput().disabled.value?void 0:n(t);});}});exports.DragonExtension=o,exports.registerDragonSupport=n;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<23d13bba94ea1ddd4e5e1a02941c686e>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalExtension.prod",["Lexical","LexicalUtils"],(function $module_LexicalExtension_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _excluded=["$initialEditorState","onError"];var _require_Lexical;var n=Symbol["for"]("preact-signals");function i(){if(d>1)return void d--;var t,e=!1;for(;void 0!==r;){var _n=r;for(r=void 0,a++;void 0!==_n;){var _i=_n.o;if(_n.o=void 0,_n.f&=-3,!(8&_n.f)&&g(_n))try{_n.c();}catch(n){e||(t=n,e=!0);}_n=_i;}}if(a=0,d--,e)throw t;}function o(t){if(d>0)return t();d++;try{return t();}finally{i();}}var s,r;function c(t){var e=s;s=void 0;try{return t();}finally{s=e;}}var d=0,a=0,f=0;function u(t){if(void 0===s)return;var e=t.n;return void 0===e||e.t!==s?(e={i:0,S:t,p:s.s,n:void 0,t:s,e:void 0,x:void 0,r:e},void 0!==s.s&&(s.s.n=e),s.s=e,t.n=e,32&s.f&&t.S(e),e):-1===e.i?(e.i=0,void 0!==e.n&&(e.n.p=e.p,void 0!==e.p&&(e.p.n=e.n),e.p=s.s,e.n=void 0,s.s.n=e,s.s=e),e):void 0;}function l(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=null==e?void 0:e.watched,this.Z=null==e?void 0:e.unwatched,this.name=null==e?void 0:e.name;}function h(t,e){return new l(t,e);}function g(t){for(var _e=t.s;void 0!==_e;_e=_e.n)if(_e.S.i!==_e.i||!_e.S.h()||_e.S.i!==_e.i)return!0;return!1;}function p(t){for(var _e2=t.s;void 0!==_e2;_e2=_e2.n){var _n2=_e2.S.n;if(void 0!==_n2&&(_e2.r=_n2),_e2.S.n=_e2,_e2.i=-1,void 0===_e2.n){t.s=_e2;break;}}}function m(t){var e,n=t.s;for(;void 0!==n;){var _t=n.p;-1===n.i?(n.S.U(n),void 0!==_t&&(_t.n=n.n),void 0!==n.n&&(n.n.p=_t)):e=n,n.S.n=n.r,void 0!==n.r&&(n.r=void 0),n=_t;}t.s=e;}function x(t,e){l.call(this,void 0),this.x=t,this.s=void 0,this.g=f-1,this.f=4,this.W=null==e?void 0:e.watched,this.Z=null==e?void 0:e.unwatched,this.name=null==e?void 0:e.name;}function E(t,e){return new x(t,e);}function v(t){var e=t.u;if(t.u=void 0,"function"==typeof e){d++;var _n3=s;s=void 0;try{e();}catch(e){throw t.f&=-2,t.f|=8,S(t),e;}finally{s=_n3,i();}}}function S(t){for(var _e3=t.s;void 0!==_e3;_e3=_e3.n)_e3.S.U(_e3);t.x=void 0,t.s=void 0,v(t);}function y(t){if(s!==this)throw new Error("Out-of-order effect");m(this),s=t,this.f&=-2,8&this.f&&S(this),i();}function N(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=null==e?void 0:e.name;}function b(t,e){var n=new N(t,e);try{n.c();}catch(t){throw n.d(),t;}var i=n.d.bind(n);return i[typeof Symbol==="function"?Symbol.dispose:"@@dispose"]=i,i;}function R(t,e){if(e===void 0){e={};}var n={};for(var _i2 in t){var _o=e[_i2],_s=h(void 0===_o?t[_i2]:_o);n[_i2]=_s;}return n;}l.prototype.brand=n,l.prototype.h=function(){return!0;},l.prototype.S=function(t){var _this=this;var e=this.t;e!==t&&void 0===t.e&&(t.x=e,this.t=t,void 0!==e?e.e=t:c(function(){var t;null==(t=_this.W)||t.call(_this);}));},l.prototype.U=function(t){var _this2=this;if(void 0!==this.t){var _e4=t.e,_n4=t.x;void 0!==_e4&&(_e4.x=_n4,t.e=void 0),void 0!==_n4&&(_n4.e=_e4,t.x=void 0),t===this.t&&(this.t=_n4,void 0===_n4&&c(function(){var t;null==(t=_this2.Z)||t.call(_this2);}));}},l.prototype.subscribe=function(t){var _this3=this;return b(function(){var e=_this3.value,n=s;s=void 0;try{t(e);}finally{s=n;}},{name:"sub"});},l.prototype.valueOf=function(){return this.value;},l.prototype.toString=function(){return this.value+"";},l.prototype.toJSON=function(){return this.value;},l.prototype.peek=function(){var t=s;s=void 0;try{return this.value;}finally{s=t;}},Object.defineProperty(l.prototype,"value",{get:function get(){var t=u(this);return void 0!==t&&(t.i=this.i),this.v;},set:function set(t){if(t!==this.v){if(a>100)throw new Error("Cycle detected");this.v=t,this.i++,f++,d++;try{for(var _t2=this.t;void 0!==_t2;_t2=_t2.x)_t2.t.N();}finally{i();}}}}),x.prototype=new l(),x.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if(32==(36&this.f))return!0;if(this.f&=-5,this.g===f)return!0;if(this.g=f,this.f|=1,this.i>0&&!g(this))return this.f&=-2,!0;var t=s;try{p(this),s=this;var _t3=this.x();(16&this.f||this.v!==_t3||0===this.i)&&(this.v=_t3,this.f&=-17,this.i++);}catch(t){this.v=t,this.f|=16,this.i++;}return s=t,m(this),this.f&=-2,!0;},x.prototype.S=function(t){if(void 0===this.t){this.f|=36;for(var _t4=this.s;void 0!==_t4;_t4=_t4.n)_t4.S.S(_t4);}l.prototype.S.call(this,t);},x.prototype.U=function(t){if(void 0!==this.t&&(l.prototype.U.call(this,t),void 0===this.t)){this.f&=-33;for(var _t5=this.s;void 0!==_t5;_t5=_t5.n)_t5.S.U(_t5);}},x.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var _t6=this.t;void 0!==_t6;_t6=_t6.x)_t6.t.N();}},Object.defineProperty(x.prototype,"value",{get:function get(){if(1&this.f)throw new Error("Cycle detected");var t=u(this);if(this.h(),void 0!==t&&(t.i=this.i),16&this.f)throw this.v;return this.v;}}),N.prototype.c=function(){var t=this.S();try{if(8&this.f)return;if(void 0===this.x)return;var _t7=this.x();"function"==typeof _t7&&(this.u=_t7);}finally{t();}},N.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,v(this),p(this),d++;var t=s;return s=this,y.bind(this,t);},N.prototype.N=function(){2&this.f||(this.f|=2,this.o=r,r=this);},N.prototype.d=function(){this.f|=8,1&this.f||S(this);},N.prototype.dispose=function(){this.d();};var O=(_require_Lexical=require("Lexical")).defineExtension({build:function build(t,e,n){return R(e);},config:_require_Lexical.safeCast({defaultSelection:"rootEnd",disabled:!1}),name:"@lexical/extension/AutoFocus",register:function register(t,e,n){var i=n.getOutput();return b(function(){return i.disabled.value?void 0:t.registerRootListener(function(e){t.focus(function(){var t=document.activeElement;null===e||null!==t&&e.contains(t)||e.focus({preventScroll:!0});},{defaultSelection:i.defaultSelection.peek()});});});}});function w(){var e=require("Lexical").$getRoot(),n=require("Lexical").$getSelection(),i=require("Lexical").$createParagraphNode();e.clear(),e.append(i),null!==n&&i.select(),require("Lexical").$isRangeSelection(n)&&(n.format=0);}function C(e,n){if(n===void 0){n=w;}return e.registerCommand(require("Lexical").CLEAR_EDITOR_COMMAND,function(t){return e.update(n),!0;},require("Lexical").COMMAND_PRIORITY_EDITOR);}var M=_require_Lexical.defineExtension({build:function build(t,e,n){return R(e);},config:_require_Lexical.safeCast({$onClear:w}),name:"@lexical/extension/ClearEditor",register:function register(t,e,n){var _n$getOutput=n.getOutput(),i=_n$getOutput.$onClear;return b(function(){return C(t,i.value);});}});function D(t){return("function"==typeof t.nodes?t.nodes():t.nodes)||[];}function _(t,e){var n;return h(t(),{unwatched:function unwatched(){n&&(n(),n=void 0);},watched:function watched(){this.value=t(),n=e(this);}});}var I=_require_Lexical.defineExtension({build:function build(t){return _(function(){return t.getEditorState();},function(e){return t.registerUpdateListener(function(t){e.value=t.editorState;});});},name:"@lexical/extension/EditorState"});function T(t){var n=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams();i.append("code",t);for(var _len=arguments.length,e=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){e[_key-1]=arguments[_key];}for(var _t8 of e)i.append("v",_t8);throw n.search=i.toString(),Error("Minified Lexical error #"+t+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}function A(t,e){if(t&&e&&!Array.isArray(e)&&"object"==typeof t&&"object"==typeof e){var _n5=t,_i3=e;for(var _t9 in _i3)_n5[_t9]=A(_n5[_t9],_i3[_t9]);return t;}return e;}var $=0,P=1,L=2,j=3,K=4,k=5,z=6,U=7;function B(t){return t.id===$;}function F(t){return t.id===L;}function H(t){return function(t){return t.id===P;}(t)||T(305,String(t.id),String(P)),Object.assign(t,{id:L});}var G=new Set();var _Y=function(){function Y(t,e){this.builder=t,this.extension=e,this.configs=new Set(),this.state={id:$};}var _proto=Y.prototype;_proto.mergeConfigs=function mergeConfigs(){var e=this.extension.config||{};var n=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):require("Lexical").shallowMergeConfig;for(var _t0 of this.configs)e=n(e,_t0);return e;};_proto.init=function init(t){var e=this.state;F(e)||T(306,String(e.id));var n={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},i=babelHelpers["extends"]({},n,{getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)}),o=function(t,e,n){return Object.assign(t,{config:e,id:j,registerState:n});}(e,this.mergeConfigs(),n);var s;this.state=o,this.extension.init&&(s=this.extension.init(t,o.config,n)),this.state=function(t,e,n){return Object.assign(t,{id:K,initResult:e,registerState:n});}(o,s,i);};_proto.build=function build(t){var e=this.state;var n;e.id!==K&&T(307,String(e.id),String(k)),this.extension.build&&(n=this.extension.build(t,e.config,e.registerState));var i=babelHelpers["extends"]({},e.registerState,{getOutput:function getOutput(){return n;},getSignal:this.getSignal.bind(this)});this.state=function(t,e,n){return Object.assign(t,{id:k,output:e,registerState:n});}(e,n,i);};_proto.register=function register(t,e){var _this4=this;this._signal=e;var n=this.state;n.id!==k&&T(308,String(n.id),String(k));var i=this.extension.register&&this.extension.register(t,n.config,n.registerState);return this.state=function(t){return Object.assign(t,{id:z});}(n),function(){var t=_this4.state;t.id!==U&&T(309,String(n.id),String(U)),_this4.state=function(t){return Object.assign(t,{id:k});}(t),i&&i();};};_proto.afterRegistration=function afterRegistration(t){var e=this.state;var n;return e.id!==z&&T(310,String(e.id),String(z)),this.extension.afterRegistration&&(n=this.extension.afterRegistration(t,e.config,e.registerState)),this.state=function(t){return Object.assign(t,{id:U});}(e),n;};_proto.getSignal=function getSignal(){return void 0===this._signal&&T(311),this._signal;};_proto.getInitResult=function getInitResult(){void 0===this.extension.init&&T(312,this.extension.name);var t=this.state;return function(t){return t.id>=K;}(t)||T(313,String(t.id),String(K)),t.initResult;};_proto.getInitPeer=function getInitPeer(t){var e=this.builder.extensionNameMap.get(t);return e?e.getExtensionInitDependency():void 0;};_proto.getExtensionInitDependency=function getExtensionInitDependency(){var t=this.state;return function(t){return t.id>=j;}(t)||T(314,String(t.id),String(j)),{config:t.config};};_proto.getPeer=function getPeer(t){var e=this.builder.extensionNameMap.get(t);return e?e.getExtensionDependency():void 0;};_proto.getInitDependency=function getInitDependency(t){var e=this.builder.getExtensionRep(t);return void 0===e&&T(315,this.extension.name,t.name),e.getExtensionInitDependency();};_proto.getDependency=function getDependency(t){var e=this.builder.getExtensionRep(t);return void 0===e&&T(315,this.extension.name,t.name),e.getExtensionDependency();};_proto.getState=function getState(){var t=this.state;return function(t){return t.id>=U;}(t)||T(316,String(t.id),String(U)),t;};_proto.getDirectDependentNames=function getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||G;};_proto.getPeerNameSet=function getPeerNameSet(){var t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(function(_ref){var t=_ref[0];return t;})),this._peerNameSet=t),t;};_proto.getExtensionDependency=function getExtensionDependency(){if(!this._dependency){var _t1=this.state;(function(t){return t.id>=k;})(_t1)||T(317,this.extension.name),this._dependency={config:_t1.config,init:_t1.initResult,output:_t1.output};}return this._dependency;};return Y;}();var W={tag:_require_Lexical.HISTORY_MERGE_TAG};function Z(){var e=require("Lexical").$getRoot();e.isEmpty()&&e.append(require("Lexical").$createParagraphNode());}var V=_require_Lexical.defineExtension({config:_require_Lexical.safeCast({setOptions:W,updateOptions:W}),init:function init(_ref2){var _ref2$$initialEditorS=_ref2.$initialEditorState,t=_ref2$$initialEditorS===void 0?Z:_ref2$$initialEditorS;return{$initialEditorState:t,initialized:!1};},afterRegistration:function afterRegistration(e,_ref3,o){var n=_ref3.updateOptions,i=_ref3.setOptions;var s=o.getInitResult();if(!s.initialized){s.initialized=!0;var _o2=s.$initialEditorState;if(require("Lexical").$isEditorState(_o2))e.setEditorState(_o2,i);else if("function"==typeof _o2)e.update(function(){_o2(e);},n);else if(_o2&&("string"==typeof _o2||"object"==typeof _o2)){var _t10=e.parseEditorState(_o2);e.setEditorState(_t10,i);}}return function(){};},name:"@lexical/extension/InitialState",nodes:[_require_Lexical.RootNode,_require_Lexical.TextNode,_require_Lexical.LineBreakNode,_require_Lexical.TabNode,_require_Lexical.ParagraphNode]}),J=Symbol["for"]("@lexical/extension/LexicalBuilder");function q(){}function X(t){throw t;}function Q(t){return Array.isArray(t)?t:[t];}var tt="0.38.2+prod.cjs";var _et=function(){function et(t){this.outgoingConfigEdges=new Map(),this.incomingEdges=new Map(),this.extensionNameMap=new Map(),this.conflicts=new Map(),this.PACKAGE_VERSION=tt,this.roots=t;for(var _e5 of t)this.addExtension(_e5);}et.fromExtensions=function fromExtensions(t){var e=[Q(V)];for(var _n6 of t)e.push(Q(_n6));return new et(e);};et.maybeFromEditor=function maybeFromEditor(t){var e=t[J];return e&&(e.PACKAGE_VERSION!==tt&&T(292,e.PACKAGE_VERSION,tt),e instanceof et||T(293)),e;};et.fromEditor=function fromEditor(t){var e=et.maybeFromEditor(t);return void 0===e&&T(294),e;};var _proto2=et.prototype;_proto2.constructEditor=function constructEditor(){var _Object$assign;var _this$buildCreateEdit=this.buildCreateEditorArgs(),e=_this$buildCreateEdit.$initialEditorState,n=_this$buildCreateEdit.onError,i=babelHelpers.objectWithoutPropertiesLoose(_this$buildCreateEdit,_excluded),o=Object.assign(require("Lexical").createEditor(babelHelpers["extends"]({},i,n?{onError:function onError(t){n(t,o);}}:{})),(_Object$assign={},_Object$assign[J]=this,_Object$assign));for(var _t11 of this.sortedExtensionReps())_t11.build(o);return o;};_proto2.buildEditor=function buildEditor(){var _Object$assign2;var t=q;function n(){try{t();}finally{t=q;}}var i=Object.assign(this.constructEditor(),(_Object$assign2={dispose:n},_Object$assign2[typeof Symbol==="function"?Symbol.dispose:"@@dispose"]=n,_Object$assign2));return t=require("LexicalUtils").mergeRegister(this.registerEditor(i),function(){return i.setRootElement(null);}),i;};_proto2.hasExtensionByName=function hasExtensionByName(t){return this.extensionNameMap.has(t);};_proto2.getExtensionRep=function getExtensionRep(t){var e=this.extensionNameMap.get(t.name);if(e)return e.extension!==t&&T(295,t.name),e;};_proto2.addEdge=function addEdge(t,e,n){var i=this.outgoingConfigEdges.get(t);i?i.set(e,n):this.outgoingConfigEdges.set(t,new Map([[e,n]]));var o=this.incomingEdges.get(e);o?o.add(t):this.incomingEdges.set(e,new Set([t]));};_proto2.addExtension=function addExtension(t){void 0!==this._sortedExtensionReps&&T(296);var e=Q(t),n=e[0];"string"!=typeof n.name&&T(297,typeof n.name);var i=this.extensionNameMap.get(n.name);if(void 0!==i&&i.extension!==n&&T(298,n.name),!i){i=new _Y(this,n),this.extensionNameMap.set(n.name,i);var _t12=this.conflicts.get(n.name);"string"==typeof _t12&&T(299,n.name,_t12);for(var _t13 of n.conflictsWith||[])this.extensionNameMap.has(_t13)&&T(299,n.name,_t13),this.conflicts.set(_t13,n.name);for(var _t14 of n.dependencies||[]){var _e6=Q(_t14);this.addEdge(n.name,_e6[0].name,_e6.slice(1)),this.addExtension(_e6);}for(var _ref5 of n.peerDependencies||[]){var _t15=_ref5[0];var _e7=_ref5[1];this.addEdge(n.name,_t15,_e7?[_e7]:[]);}}};_proto2.sortedExtensionReps=function sortedExtensionReps(){var _this5=this;if(this._sortedExtensionReps)return this._sortedExtensionReps;var t=[],_e8=function e(n,i){var o=n.state;if(F(o))return;var s=n.extension.name;var r;B(o)||T(300,s,i||"[unknown]"),B(r=o)||T(304,String(r.id),String($)),o=Object.assign(r,{id:P}),n.state=o;var c=_this5.outgoingConfigEdges.get(s);if(c)for(var _t16 of c.keys()){var _n7=_this5.extensionNameMap.get(_t16);_n7&&_e8(_n7,s);}o=H(o),n.state=o,t.push(n);};for(var _t17 of this.extensionNameMap.values())B(_t17.state)&&_e8(_t17);for(var _e9 of t)for(var _ref7 of this.outgoingConfigEdges.get(_e9.extension.name)||[]){var _t18=_ref7[0];var _n8=_ref7[1];if(_n8.length>0){var _e0=this.extensionNameMap.get(_t18);if(_e0)for(var _t19 of _n8)_e0.configs.add(_t19);}}for(var _ref9 of this.roots){var _t20=_ref9[0];var _e1=babelHelpers.arrayLikeToArray(_ref9).slice(1);if(_e1.length>0){var _n9=this.extensionNameMap.get(_t20.name);void 0===_n9&&T(301,_t20.name);for(var _t21 of _e1)_n9.configs.add(_t21);}}return this._sortedExtensionReps=t,this._sortedExtensionReps;};_proto2.registerEditor=function registerEditor(t){var n=this.sortedExtensionReps(),i=new AbortController(),o=[function(){return i.abort();}],s=i.signal;for(var _e10 of n){var _n0=_e10.register(t,s);_n0&&o.push(_n0);}for(var _e11 of n){var _n1=_e11.afterRegistration(t);_n1&&o.push(_n1);}return require("LexicalUtils").mergeRegister.apply(require("LexicalUtils"),o);};_proto2.buildCreateEditorArgs=function buildCreateEditorArgs(){var t={},e=new Set(),n=new Map(),i=new Map(),o={},s={},r=this.sortedExtensionReps();for(var _c of r){var _r=_c.extension;if(void 0!==_r.onError&&(t.onError=_r.onError),void 0!==_r.disableEvents&&(t.disableEvents=_r.disableEvents),void 0!==_r.parentEditor&&(t.parentEditor=_r.parentEditor),void 0!==_r.editable&&(t.editable=_r.editable),void 0!==_r.namespace&&(t.namespace=_r.namespace),void 0!==_r.$initialEditorState&&(t.$initialEditorState=_r.$initialEditorState),_r.nodes)for(var _t22 of D(_r)){if("function"!=typeof _t22){var _e12=n.get(_t22.replace);_e12&&T(302,_r.name,_t22.replace.name,_e12.extension.name),n.set(_t22.replace,_c);}e.add(_t22);}if(_r.html){if(_r.html["export"])for(var _ref1 of _r.html["export"].entries()){var _t23=_ref1[0];var _e13=_ref1[1];i.set(_t23,_e13);}_r.html["import"]&&Object.assign(o,_r.html["import"]);}_r.theme&&A(s,_r.theme);}Object.keys(s).length>0&&(t.theme=s),e.size&&(t.nodes=[].concat(e));var c=Object.keys(o).length>0,d=i.size>0;(c||d)&&(t.html={},c&&(t.html["import"]=o),d&&(t.html["export"]=i));for(var _e14 of r)_e14.init(t);return t.onError||(t.onError=X),t;};return et;}();function nt(t,e){var n=_et.fromEditor(t).extensionNameMap.get(e);return n?n.getExtensionDependency():void 0;}var it=new Set(),ot=_require_Lexical.defineExtension({build:function build(e,n,i){var o=i.getDependency(I).output,s=h({watchedNodeKeys:new Map()}),r=_(function(){},function(){return b(function(){var e=r.peek(),n=s.value.watchedNodeKeys;var i,c=!1;o.value.read(function(){if(require("Lexical").$getSelection())for(var _ref11 of n.entries()){var _o3=_ref11[0];var _s2=_ref11[1];{if(0===_s2.size){n["delete"](_o3);continue;}var _r2=require("Lexical").$getNodeByKey(_o3),_d=_r2&&_r2.isSelected()||!1;c=c||_d!==(!!e&&e.has(_o3)),_d&&(i=i||new Set(),i.add(_o3));}}}),!c&&i&&e&&i.size===e.size||(r.value=i);});});return{watchNodeKey:function watchNodeKey(t){var e=E(function(){return(r.value||it).has(t);}),_s$peek=s.peek(),n=_s$peek.watchedNodeKeys;var i=n.get(t);var o=void 0!==i;return i=i||new Set(),i.add(e),o||(n.set(t,i),s.value={watchedNodeKeys:n}),e;}};},dependencies:[I],name:"@lexical/extension/NodeSelection"}),st=_require_Lexical.createCommand("INSERT_HORIZONTAL_RULE_COMMAND");var _rt=function(_t$DecoratorNode){function rt(){return _t$DecoratorNode.apply(this,arguments)||this;}babelHelpers.inheritsLoose(rt,_t$DecoratorNode);rt.getType=function getType(){return"horizontalrule";};rt.clone=function clone(t){return new rt(t.__key);};rt.importJSON=function importJSON(t){return dt().updateFromJSON(t);};rt.importDOM=function importDOM(){return{hr:function hr(){return{conversion:ct,priority:0};}};};var _proto3=rt.prototype;_proto3.exportDOM=function exportDOM(){return{element:document.createElement("hr")};};_proto3.createDOM=function createDOM(t){var n=document.createElement("hr");return require("LexicalUtils").addClassNamesToElement(n,t.theme.hr),n;};_proto3.getTextContent=function getTextContent(){return"\n";};_proto3.isInline=function isInline(){return!1;};_proto3.updateDOM=function updateDOM(){return!1;};return rt;}(_require_Lexical.DecoratorNode);function ct(){return{node:dt()};}function dt(){return require("Lexical").$create(_rt);}function at(t){return t instanceof _rt;}var ft=_require_Lexical.defineExtension({dependencies:[I,ot],name:"@lexical/extension/HorizontalRule",nodes:function nodes(){return[_rt];},register:function register(n,i,s){var _n$_config$theme$hrSe;var r=s.getDependency(ot).output.watchNodeKey,c=h({nodeSelections:new Map()}),d=(_n$_config$theme$hrSe=n._config.theme.hrSelected)!=null?_n$_config$theme$hrSe:"selected";return require("LexicalUtils").mergeRegister(n.registerCommand(require("Lexical").CLICK_COMMAND,function(e){if(require("Lexical").isDOMNode(e.target)){var _n10=require("Lexical").$getNodeFromDOMNode(e.target);if(at(_n10))return function(e,n){if(n===void 0){n=!1;}var i=require("Lexical").$getSelection(),o=e.isSelected(),s=e.getKey();var r;n&&require("Lexical").$isNodeSelection(i)?r=i:(r=require("Lexical").$createNodeSelection(),require("Lexical").$setSelection(r)),o?r["delete"](s):r.add(s);}(_n10,e.shiftKey),!0;}return!1;},require("Lexical").COMMAND_PRIORITY_LOW),n.registerMutationListener(_rt,function(t,e){o(function(){var e=!1;var _c$peek=c.peek(),i=_c$peek.nodeSelections;for(var _ref13 of t.entries()){var _o4=_ref13[0];var _s3=_ref13[1];if("destroyed"===_s3)i["delete"](_o4),e=!0;else{var _t24=i.get(_o4),_s4=n.getElementByKey(_o4);_t24?_t24.domNode.value=_s4:(e=!0,i.set(_o4,{domNode:h(_s4),selectedSignal:r(_o4)}));}}e&&(c.value={nodeSelections:i});});}),b(function(){var t=[];var _loop=function _loop(){var n=_ref15.domNode;var i=_ref15.selectedSignal;t.push(b(function(){var t=n.value;if(t){i.value?require("LexicalUtils").addClassNamesToElement(t,d):require("LexicalUtils").removeClassNamesFromElement(t,d);}}));};for(var _ref15 of c.value.nodeSelections.values()){_loop();}return require("LexicalUtils").mergeRegister.apply(require("LexicalUtils"),t);}));}});function ut(n,i){var _require_Lexical;return require("LexicalUtils").mergeRegister(n.registerCommand((_require_Lexical=require("Lexical")).KEY_TAB_COMMAND,function(i){var o=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(o))return!1;i.preventDefault();var s=function(n){var i=n.getNodes();if(require("LexicalUtils").$filter(i,function(e){return require("Lexical").$isBlockElementNode(e)&&e.canIndent()?e:null;}).length>0)return!0;var o=n.anchor,s=n.focus,r=s.isBefore(o)?s:o,c=r.getNode(),d=require("LexicalUtils").$getNearestBlockElementAncestorOrThrow(c);if(d.canIndent()){var _e15=d.getKey();var _n11=require("Lexical").$createRangeSelection();if(_n11.anchor.set(_e15,0,"element"),_n11.focus.set(_e15,0,"element"),_n11=require("Lexical").$normalizeSelection__EXPERIMENTAL(_n11),_n11.anchor.is(r))return!0;}return!1;}(o)?i.shiftKey?require("Lexical").OUTDENT_CONTENT_COMMAND:require("Lexical").INDENT_CONTENT_COMMAND:require("Lexical").INSERT_TAB_COMMAND;return n.dispatchCommand(s,void 0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),n.registerCommand(_require_Lexical.INDENT_CONTENT_COMMAND,function(){var n="number"==typeof i?i:i?i.peek():null;if(null==n)return!1;var o=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(o))return!1;var s=o.getNodes().map(function(t){return require("LexicalUtils").$getNearestBlockElementAncestorOrThrow(t).getIndent();});return Math.max.apply(Math,s)+1>=n;},_require_Lexical.COMMAND_PRIORITY_CRITICAL));}var lt=_require_Lexical.defineExtension({build:function build(t,e,n){return R(e);},config:_require_Lexical.safeCast({disabled:!1,maxIndent:null}),name:"@lexical/extension/TabIndentation",register:function register(t,e,n){var _n$getOutput2=n.getOutput(),i=_n$getOutput2.disabled,o=_n$getOutput2.maxIndent;return b(function(){if(!i.value)return ut(t,o);});}});exports.configExtension=_require_Lexical.configExtension,exports.declarePeerDependency=_require_Lexical.declarePeerDependency,exports.defineExtension=_require_Lexical.defineExtension,exports.safeCast=_require_Lexical.safeCast,exports.shallowMergeConfig=_require_Lexical.shallowMergeConfig,exports.$createHorizontalRuleNode=dt,exports.$isHorizontalRuleNode=at,exports.AutoFocusExtension=O,exports.ClearEditorExtension=M,exports.EditorStateExtension=I,exports.HorizontalRuleExtension=ft,exports.HorizontalRuleNode=_rt,exports.INSERT_HORIZONTAL_RULE_COMMAND=st,exports.InitialStateExtension=V,exports.LexicalBuilder=_et,exports.NodeSelectionExtension=ot,exports.TabIndentationExtension=lt,exports.batch=o,exports.buildEditorFromExtensions=function(){for(var _len2=arguments.length,t=new Array(_len2),_key2=0;_key2<_len2;_key2++){t[_key2]=arguments[_key2];}return _et.fromExtensions(t).buildEditor();},exports.computed=E,exports.effect=b,exports.getExtensionDependencyFromEditor=function(t,e){var n=_et.fromEditor(t).getExtensionRep(e);return void 0===n&&T(303,e.name),n.getExtensionDependency();},exports.getKnownTypesAndNodes=function(t){var e=new Set(),n=new Set();for(var _i4 of D(t)){var _t25="function"==typeof _i4?_i4:_i4.replace;e.add(_t25.getType()),n.add(_t25);}return{nodes:n,types:e};},exports.getPeerDependencyFromEditor=nt,exports.getPeerDependencyFromEditorOrThrow=function(t,e){var n=nt(t,e);return void 0===n&&T(291,e),n;},exports.namedSignals=R,exports.registerClearEditor=C,exports.registerTabIndentation=ut,exports.signal=h,exports.untracked=c,exports.watchedSignal=_;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<3e6f1172f8335546252f6af2b7254906>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHistory.prod",["Lexical","LexicalExtension","LexicalUtils"],(function $module_LexicalHistory_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _require_Lexical;function r(e,t,r,o,i){if(null===e||0===r.size&&0===o.size&&!i)return 0;var s=t._selection,a=e._selection;if(i)return 1;if(!(require("Lexical").$isRangeSelection(s)&&require("Lexical").$isRangeSelection(a)&&a.isCollapsed()&&s.isCollapsed()))return 0;var c=function(e,t,r){var o=e._nodeMap,i=[];for(var _e of t){var _t=o.get(_e);void 0!==_t&&i.push(_t);}for(var _ref2 of r){var _e2=_ref2[0];var _t2=_ref2[1];{if(!_t2)continue;var _r=o.get(_e2);void 0===_r||require("Lexical").$isRootNode(_r)||i.push(_r);}}return i;}(t,r,o);if(0===c.length)return 0;if(c.length>1){var _r2=t._nodeMap,_o=_r2.get(s.anchor.key),_i=_r2.get(a.anchor.key);return _o&&_i&&!e._nodeMap.has(_o.__key)&&require("Lexical").$isTextNode(_o)&&1===_o.__text.length&&1===s.anchor.offset?2:0;}var d=c[0],u=e._nodeMap.get(d.__key);if(!require("Lexical").$isTextNode(u)||!require("Lexical").$isTextNode(d)||u.__mode!==d.__mode)return 0;var l=u.__text,_=d.__text;if(l===_)return 0;var f=s.anchor,p=a.anchor;if(f.key!==p.key||"text"!==f.type)return 0;var h=f.offset,O=p.offset,S=_.length-l.length;return 1===S&&O===h-1?2:-1===S&&O===h+1?3:-1===S&&O===h?4:0;}function o(e,t){var o=Date.now(),i=0;return function(s,a,c,d,u,l){var _=Date.now();if(l.has(require("Lexical").HISTORIC_TAG))return i=0,o=_,2;var f=r(s,a,d,u,e.isComposing()),p=function(){var r=null===c||c.editor===e,p=l.has(require("Lexical").HISTORY_PUSH_TAG);if(!p&&r&&l.has(require("Lexical").HISTORY_MERGE_TAG))return 0;if(null===s)return 1;var h=a._selection;if(!(d.size>0||u.size>0))return null!==h?0:2;var O="number"==typeof t?t:t.peek();if(!1===p&&0!==f&&f===i&&_<o+O&&r)return 0;if(1===d.size){if(function(e,t,r){var o=t._nodeMap.get(e),i=r._nodeMap.get(e),s=t._selection,a=r._selection;return!(require("Lexical").$isRangeSelection(s)&&require("Lexical").$isRangeSelection(a)&&"element"===s.anchor.type&&"element"===s.focus.type&&"text"===a.anchor.type&&"text"===a.focus.type||!require("Lexical").$isTextNode(o)||!require("Lexical").$isTextNode(i)||o.__parent!==i.__parent)&&JSON.stringify(t.read(function(){return o.exportJSON();}))===JSON.stringify(r.read(function(){return i.exportJSON();}));}(Array.from(d)[0],s,a))return 0;}return 1;}();return o=_,i=f,p;};}function i(e){e.undoStack=[],e.redoStack=[],e.current=null;}function s(e,r,s){var _require_Lexical;var a=o(e,s),c=require("LexicalUtils").mergeRegister(e.registerCommand((_require_Lexical=require("Lexical")).UNDO_COMMAND,function(){return function(e,t){var r=t.redoStack,o=t.undoStack;if(0!==o.length){var _i2=t.current,_s=o.pop();null!==_i2&&(r.push(_i2),e.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!0)),0===o.length&&e.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!1),t.current=_s||null,_s&&_s.editor.setEditorState(_s.editorState,{tag:require("Lexical").HISTORIC_TAG});}}(e,r),!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),e.registerCommand(_require_Lexical.REDO_COMMAND,function(){return function(e,t){var r=t.redoStack,o=t.undoStack;if(0!==r.length){var _i3=t.current;null!==_i3&&(o.push(_i3),e.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!0));var _s2=r.pop();0===r.length&&e.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1),t.current=_s2||null,_s2&&_s2.editor.setEditorState(_s2.editorState,{tag:require("Lexical").HISTORIC_TAG});}}(e,r),!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),e.registerCommand(_require_Lexical.CLEAR_EDITOR_COMMAND,function(){return i(r),!1;},_require_Lexical.COMMAND_PRIORITY_EDITOR),e.registerCommand(_require_Lexical.CLEAR_HISTORY_COMMAND,function(){return i(r),e.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1),e.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!1),!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),e.registerUpdateListener(function(_ref3){var t=_ref3.editorState,o=_ref3.prevEditorState,i=_ref3.dirtyLeaves,s=_ref3.dirtyElements,c=_ref3.tags;var d=r.current,u=r.redoStack,l=r.undoStack,_=null===d?null:d.editorState;if(null!==d&&t===_)return;var f=a(o,t,d,i,s,c);if(1===f)0!==u.length&&(r.redoStack=[],e.dispatchCommand(require("Lexical").CAN_REDO_COMMAND,!1)),null!==d&&(l.push(babelHelpers["extends"]({},d)),e.dispatchCommand(require("Lexical").CAN_UNDO_COMMAND,!0));else if(2===f)return;r.current={editor:e,editorState:t};}));return c;}function a(){return{current:null,redoStack:[],undoStack:[]};}var c=(_require_Lexical=require("Lexical")).defineExtension({build:function build(t,_ref4){var n=_ref4.delay,r=_ref4.createInitialHistoryState,o=_ref4.disabled;return require("LexicalExtension").namedSignals({delay:n,disabled:o,historyState:r(t)});},config:_require_Lexical.safeCast({createInitialHistoryState:a,delay:300,disabled:"undefined"==typeof window}),name:"@lexical/history/History",register:function register(t,n,r){var o=r.getOutput();return require("LexicalExtension").effect(function(){return o.disabled.value?void 0:s(t,o.historyState.value,o.delay);});}});var d=_require_Lexical.defineExtension({dependencies:[_require_Lexical.configExtension(c,{createInitialHistoryState:function createInitialHistoryState(){throw new Error("SharedHistory did not inherit parent history");},disabled:!0})],name:"@lexical/history/SharedHistory",register:function register(t,n,r){var _r$getDependency=r.getDependency(c),o=_r$getDependency.output,i=function(t){return t?require("LexicalExtension").getPeerDependencyFromEditor(t,c.name):null;}(t._parentEditor);if(!i)return function(){};var s=i.output;return require("LexicalExtension").effect(function(){return require("LexicalExtension").batch(function(){o.delay.value=s.delay.value,o.historyState.value=s.historyState.value,o.disabled.value=s.disabled.value;});});}});exports.HistoryExtension=c,exports.SharedHistoryExtension=d,exports.createEmptyHistoryState=a,exports.registerHistory=s;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<fddefa089acf1b2421a7d2f0b7e0d284>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalHtml.prod",["Lexical","LexicalSelection","LexicalUtils"],(function $module_LexicalHtml_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function o(l,i,r,s){if(s===void 0){s=null;}var c=null===s||i.isSelected(s);var d=require("Lexical").$isElementNode(i)&&i.excludeFromCopy("html");var u=i;null!==s&&require("Lexical").$isTextNode(i)&&(u=require("LexicalSelection").$sliceSelectedTextNodeContent(s,i,"clone"));var a=require("Lexical").$isElementNode(u)?u.getChildren():[],f=require("Lexical").getRegisteredNode(l,u.getType());var m;m=f&&void 0!==f.exportDOM?f.exportDOM(l,u):u.exportDOM(l);var _m=m,h=_m.element,p=_m.after;if(!h)return!1;var g=document.createDocumentFragment();for(var _e=0;_e<a.length;_e++){var _n=a[_e],_r=o(l,_n,g,s);!c&&require("Lexical").$isElementNode(i)&&_r&&i.extractWithChild(_n,s,"html")&&(c=!0);}if(c&&!d){if((require("LexicalUtils").isHTMLElement(h)||require("Lexical").isDocumentFragment(h))&&h.append(g),r.append(h),p){var _e2=p.call(u,h);_e2&&(require("Lexical").isDocumentFragment(h)?h.replaceChildren(_e2):h.replaceWith(_e2));}}else r.append(g);return c;}var l=new Set(["STYLE","SCRIPT"]);function i(e,o,s,c,d,u){var _f;if(d===void 0){d=new Map();}var a=[];if(l.has(e.nodeName))return a;var f=null;var m=function(e,n){var t=e.nodeName,o=n._htmlConversions.get(t.toLowerCase());var l=null;if(void 0!==o)for(var _n2 of o){var _t=_n2(e);null!==_t&&(null===l||(l.priority||0)<=(_t.priority||0))&&(l=_t);}return null!==l?l.conversion:null;}(e,o),h=m?m(e):null;var p=null;if(null!==h){p=h.after;var _n3=h.node;if(f=Array.isArray(_n3)?_n3[_n3.length-1]:_n3,null!==f){var _a;for(var _ref2 of d){var _e3=_ref2[1];if(f=_e3(f,u),!f)break;}f&&(_a=a).push.apply(_a,Array.isArray(_n3)?_n3:[f]);}null!=h.forChild&&d.set(e.nodeName,h.forChild);}var g=e.childNodes;var N=[];var $=(null==f||!require("Lexical").$isRootOrShadowRoot(f))&&(null!=f&&require("Lexical").$isBlockElementNode(f)||c);for(var _e4=0;_e4<g.length;_e4++){var _N;(_N=N).push.apply(_N,i(g[_e4],o,s,$,new Map(d),f));}return null!=p&&(N=p(N)),require("LexicalUtils").isBlockDomNode(e)&&(N=r(e,N,$?function(){var e=new(require("Lexical").ArtificialNode__DO_NOT_USE)();return s.push(e),e;}:require("Lexical").$createParagraphNode)),null==f?N.length>0?a=a.concat(N):require("LexicalUtils").isBlockDomNode(e)&&function(e){if(null==e.nextSibling||null==e.previousSibling)return!1;return require("Lexical").isInlineDomNode(e.nextSibling)&&require("Lexical").isInlineDomNode(e.previousSibling);}(e)&&(a=a.concat(require("Lexical").$createLineBreakNode())):require("Lexical").$isElementNode(f)&&(_f=f).append.apply(_f,N),a;}function r(e,n,o){var l=e.style.textAlign,i=[];var r=[];for(var _e5=0;_e5<n.length;_e5++){var s=n[_e5];if(require("Lexical").$isBlockElementNode(s))l&&!s.getFormat()&&s.setFormat(l),i.push(s);else if(r.push(s),_e5===n.length-1||_e5<n.length-1&&require("Lexical").$isBlockElementNode(n[_e5+1])){var _e6=o();_e6.setFormat(l),_e6.append.apply(_e6,r),i.push(_e6),r=[];}}return i;}exports.$generateHtmlFromNodes=function(e,n){if("undefined"==typeof document||"undefined"==typeof window&&void 0===global.window)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");var l=document.createElement("div"),i=require("Lexical").$getRoot().getChildren();for(var _t2=0;_t2<i.length;_t2++){o(e,i[_t2],l,n);}return l.innerHTML;},exports.$generateNodesFromDOM=function(e,n){var o=require("Lexical").isDOMDocumentNode(n)?n.body.childNodes:n.childNodes;var r=[];var s=[];for(var _n4 of o)if(!l.has(_n4.nodeName)){var _t3=i(_n4,e,s,!1);null!==_t3&&(r=r.concat(_t3));}return function(e){for(var _n5 of e)_n5.getNextSibling()instanceof require("Lexical").ArtificialNode__DO_NOT_USE&&_n5.insertAfter(require("Lexical").$createLineBreakNode());for(var _n6 of e){var _e7=_n6.getChildren();for(var _t4 of _e7)_n6.insertBefore(_t4);_n6.remove();}}(s),r;};}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<5694f223b034b3d3ddc1d1b1c0c5241e>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalPlainText.prod",["Lexical","LexicalClipboard","LexicalDragon","LexicalSelection","LexicalUtils"],(function $module_LexicalPlainText_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var o="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement,a=o&&"documentMode"in document?document.documentMode:null,s=o&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),l=!(!o||!("InputEvent"in window)||a)&&"getTargetRanges"in new window.InputEvent("input"),c=o&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),R=o&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,D=o&&/^(?=.*Chrome).*/i.test(navigator.userAgent),O=o&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&s&&!D;function C(t,n){n.update(function(){if(null!==t){var _o=require("LexicalUtils").objectKlassEquals(t,KeyboardEvent)?null:t.clipboardData,_a=require("Lexical").$getSelection();if(null!==_a&&!_a.isCollapsed()&&null!=_o){t.preventDefault();var _i=require("LexicalClipboard").$getHtmlContent(n);null!==_i&&_o.setData("text/html",_i),_o.setData("text/plain",_a.getTextContent());}}});}function M(t){var _require_Lexical;return require("LexicalUtils").mergeRegister(t.registerCommand((_require_Lexical=require("Lexical")).DELETE_CHARACTER_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(t.deleteCharacter(e),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.DELETE_WORD_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(t.deleteWord(e),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.DELETE_LINE_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(t.deleteLine(e),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.CONTROLLED_TEXT_INSERTION_COMMAND,function(t){var n=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(n))return!1;if("string"==typeof t)n.insertText(t);else{var _i2=t.dataTransfer;if(null!=_i2)require("LexicalClipboard").$insertDataTransferForPlainText(_i2,n);else{var _e=t.data;_e&&n.insertText(_e);}}return!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.REMOVE_TEXT_COMMAND,function(){var e=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(e)&&(e.removeText(),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.INSERT_LINE_BREAK_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(t.insertLineBreak(e),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.INSERT_PARAGRAPH_COMMAND,function(){var e=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(e)&&(e.insertLineBreak(),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.KEY_ARROW_LEFT_COMMAND,function(e){var t=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(t))return!1;var i=e,o=i.shiftKey;return!!require("LexicalSelection").$shouldOverrideDefaultCharacterSelection(t,!0)&&(i.preventDefault(),require("LexicalSelection").$moveCharacter(t,o,!0),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.KEY_ARROW_RIGHT_COMMAND,function(e){var t=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(t))return!1;var i=e,o=i.shiftKey;return!!require("LexicalSelection").$shouldOverrideDefaultCharacterSelection(t,!1)&&(i.preventDefault(),require("LexicalSelection").$moveCharacter(t,o,!1),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.KEY_BACKSPACE_COMMAND,function(e){var n=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(n)&&(!R||"ko-KR"!==navigator.language)&&(e.preventDefault(),t.dispatchCommand(require("Lexical").DELETE_CHARACTER_COMMAND,!0));},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.KEY_DELETE_COMMAND,function(e){var n=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(n)&&(e.preventDefault(),t.dispatchCommand(require("Lexical").DELETE_CHARACTER_COMMAND,!1));},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.KEY_ENTER_COMMAND,function(e){var n=require("Lexical").$getSelection();if(!require("Lexical").$isRangeSelection(n))return!1;if(null!==e){if((R||c||O)&&l)return!1;e.preventDefault();}return t.dispatchCommand(require("Lexical").INSERT_LINE_BREAK_COMMAND,!1);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.SELECT_ALL_COMMAND,function(){return require("Lexical").$selectAll(),!0;},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.COPY_COMMAND,function(e){var n=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(n)&&(C(e,t),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.CUT_COMMAND,function(e){var n=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(n)&&(function(e,t){C(e,t),t.update(function(){var e=require("Lexical").$getSelection();require("Lexical").$isRangeSelection(e)&&e.removeText();});}(e,t),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.PASTE_COMMAND,function(n){var o=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(o)&&(function(t,n){t.preventDefault(),n.update(function(){var n=require("Lexical").$getSelection(),o=require("LexicalUtils").objectKlassEquals(t,ClipboardEvent)?t.clipboardData:null;null!=o&&require("Lexical").$isRangeSelection(n)&&require("LexicalClipboard").$insertDataTransferForPlainText(o,n);},{tag:require("Lexical").PASTE_TAG});}(n,t),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.DROP_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(e.preventDefault(),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR),t.registerCommand(_require_Lexical.DRAGSTART_COMMAND,function(e){var t=require("Lexical").$getSelection();return!!require("Lexical").$isRangeSelection(t)&&(e.preventDefault(),!0);},_require_Lexical.COMMAND_PRIORITY_EDITOR));}var g=require("Lexical").defineExtension({conflictsWith:["LexicalRichText"],dependencies:[require("LexicalDragon").DragonExtension],name:"LexicalPlainText",register:M});exports.PlainTextExtension=g,exports.registerPlainText=M;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<053a5941068424ecbe5402a89ba938cf>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalReactProviderExtension.prod",["Lexical"],(function $module_LexicalReactProviderExtension_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var e=require("Lexical").defineExtension({name:"@lexical/react/ReactProvider"});exports.ReactProviderExtension=e;}),null);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<6a5d3b588b78ca3db7ed740abdcb7c49>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("LexicalSelection.prod",["Lexical"],(function $module_LexicalSelection_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";function t(e){for(var _len=arguments.length,t=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++){t[_key-1]=arguments[_key];}var n=new URL("https://lexical.dev/docs/error"),o=new URLSearchParams();o.append("code",e);for(var _e of t)o.append("v",_e);throw n.search=o.toString(),Error("Minified Lexical error #"+e+"; visit "+n.toString()+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.");}var n=new Map();function o(e){var t=e;for(;null!=t;){if(t.nodeType===Node.TEXT_NODE)return t;t=t.firstChild;}return null;}function s(e){var t=e.parentNode;if(null==t)throw new Error("Should never happen");return[t,Array.from(t.childNodes).indexOf(e)];}function r(e){var t={};if(!e)return t;var n=e.split(";");for(var _e2 of n)if(""!==_e2){var _e2$split=_e2.split(/:([^]+)/),_n=_e2$split[0],_o=_e2$split[1];_n&&_o&&(t[_n.trim()]=_o.trim());}return t;}function l(e){var t=n.get(e);return void 0===t&&(t=r(e),n.set(e,t)),t;}function i(e){var t="";for(var _n2 in e)_n2&&(t+=_n2+": "+e[_n2]+";");return t;}function c(t){var n=require("Lexical").$getEditor().getElementByKey(t.getKey());if(null===n)return null;var o=n.ownerDocument.defaultView;return null===o?null:o.getComputedStyle(n);}function f(t){return c(require("Lexical").$isRootNode(t)?t:t.getParentOrThrow());}function a(t,n,o){var s=n.getNode(),r=o;if(require("Lexical").$isElementNode(s)){var _e3=s.getDescendantByIndex(n.offset);null!==_e3&&(s=_e3);}var _loop=function _loop(){if(require("Lexical").$isElementNode(s)){var _e4=s.getLastDescendant();null!==_e4&&(s=_e4);}var o=s.getPreviousSibling(),l=0;if(null===o){var _e5=s.getParentOrThrow(),_t=_e5.getPreviousSibling();for(;null===_t;){if(_e5=_e5.getParent(),null===_e5){o=null;break;}_t=_e5.getPreviousSibling();}null!==_e5&&(l=_e5.isInline()?0:2,o=_t);}var i=s.getTextContent();""===i&&require("Lexical").$isElementNode(s)&&!s.isInline()&&(i="\n\n");var c=i.length;if(!require("Lexical").$isTextNode(s)||r>=c){var _t2=s.getParent();s.remove(),null==_t2||0!==_t2.getChildrenSize()||require("Lexical").$isRootNode(_t2)||_t2.remove(),r-=c+l,s=o;}else{var _o2=s.getKey(),_l=t.getEditorState().read(function(){var t=require("Lexical").$getNodeByKey(_o2);return require("Lexical").$isTextNode(t)&&t.isSimpleText()?t.getTextContent():null;}),_f=c-r,_a=i.slice(0,_f);if(null!==_l&&_l!==i){var _t3=require("Lexical").$getPreviousSelection();var _n3=s;if(s.isSimpleText())s.setTextContent(_l);else{var _t4=require("Lexical").$createTextNode(_l);s.replace(_t4),_n3=_t4;}if(require("Lexical").$isRangeSelection(_t3)&&_t3.isCollapsed()){var _e6=_t3.anchor.offset;_n3.select(_e6,_e6);}}else if(s.isSimpleText()){var _e7=n.key===_o2;var _t5=n.offset;_t5<r&&(_t5=c);var _l2=_e7?_t5-r:0,_i=_e7?_t5:_f;if(_e7&&0===_l2){var _s$splitText=s.splitText(_l2,_i),_e8=_s$splitText[0];_e8.remove();}else{var _s$splitText2=s.splitText(_l2,_i),_e9=_s$splitText2[1];_e9.remove();}}else{var _t6=require("Lexical").$createTextNode(_a);s.replace(_t6);}r=0;}};for(;r>0&&null!==s;){_loop();}}function d(o,s){(require("Lexical").$isRangeSelection(o)?o.isCollapsed():require("Lexical").$isTextNode(o)||require("Lexical").$isElementNode(o))||t(280);var r=l(require("Lexical").$isRangeSelection(o)?o.style:require("Lexical").$isTextNode(o)?o.getStyle():o.getTextStyle()),c=Object.entries(s).reduce(function(e,_ref){var t=_ref[0],n=_ref[1];return"function"==typeof n?e[t]=n(r[t],o):null===n?delete e[t]:e[t]=n,e;},babelHelpers["extends"]({},r)),f=i(c);require("Lexical").$isRangeSelection(o)||require("Lexical").$isTextNode(o)?o.setStyle(f):o.setTextStyle(f),n.set(f,c);}function u(t){var n=require("Lexical").$getSelection();if(!n)return;var o=new Map(),s=function s(e){return o.get(e.getKey())||[0,e.getTextContentSize()];};if(require("Lexical").$isRangeSelection(n))for(var _t7 of require("Lexical").$caretRangeFromSelection(n).getTextSlices())_t7&&o.set(_t7.caret.origin.getKey(),_t7.getSliceIndices());var r=n.getNodes();for(var _n4 of r){if(!require("Lexical").$isTextNode(_n4)||!_n4.canHaveFormat())continue;var _s=s(_n4),_o3=_s[0],_r=_s[1];if(_r!==_o3)if(require("Lexical").$isTokenOrSegmented(_n4)||0===_o3&&_r===_n4.getTextContentSize())t(_n4);else{t(_n4.splitText(_o3,_r)[0===_o3?0:1]);}}require("Lexical").$isRangeSelection(n)&&"text"===n.anchor.type&&"text"===n.focus.type&&n.anchor.key===n.focus.key&&g(n);}function g(e){if(e.isBackward()){var _t8=e.anchor,_n5=e.focus,_o4=_t8.key,_s2=_t8.offset,_r2=_t8.type;_t8.set(_n5.key,_n5.offset,_n5.type),_n5.set(_o4,_s2,_r2);}}function p(e,t){var n=e.getFormatType(),o=e.getIndent();n!==t.getFormatType()&&t.setFormat(n),o!==t.getIndent()&&t.setIndent(o);}function $(e){return e.getNode().isAttached();}function h(t){var n=t;for(;null!==n&&!require("Lexical").$isRootOrShadowRoot(n);){var _e0=n.getLatest(),_t9=n.getParent();0===_e0.getChildrenSize()&&n.remove(!0),n=_t9;}}function y(n,o,s,r,l){if(l===void 0){l=null;}if(0===o.length)return;var i=o[0],c=new Map(),f=[];var a=require("Lexical").$isElementNode(i)?i:i.getParentOrThrow();a.isInline()&&(a=a.getParentOrThrow());var d=!1;for(;null!==a;){var _t0=a.getPreviousSibling();if(null!==_t0){a=_t0,d=!0;break;}if(a=a.getParentOrThrow(),require("Lexical").$isRootOrShadowRoot(a))break;}var u=new Set();for(var _t1=0;_t1<s;_t1++){var _n6=o[_t1];require("Lexical").$isElementNode(_n6)&&0===_n6.getChildrenSize()&&u.add(_n6.getKey());}var g=new Set();var _loop2=function _loop2(){var s=o[_n7];var l=s.getParent();if(null!==l&&l.isInline()&&(l=l.getParent()),null!==l&&require("Lexical").$isLeafNode(s)&&!g.has(s.getKey())){var _t15=l.getKey();if(void 0===c.get(_t15)){var _n9=r();_n9.setFormat(l.getFormatType()),_n9.setIndent(l.getIndent()),f.push(_n9),c.set(_t15,_n9),l.getChildren().forEach(function(t){_n9.append(t),g.add(t.getKey()),require("Lexical").$isElementNode(t)&&t.getChildrenKeys().forEach(function(e){return g.add(e);});}),h(l);}}else if(u.has(s.getKey())){require("Lexical").$isElementNode(s)||t(179);var _n0=r();_n0.setFormat(s.getFormatType()),_n0.setIndent(s.getIndent()),f.push(_n0),s.remove(!0);}};for(var _n7=0;_n7<s;_n7++){_loop2();}if(null!==l)for(var _e1=0;_e1<f.length;_e1++){var _t10=f[_e1];l.append(_t10);}var p=null;if(require("Lexical").$isRootOrShadowRoot(a)){if(d){if(null!==l)a.insertAfter(l);else for(var _e10=f.length-1;_e10>=0;_e10--){var _t11=f[_e10];a.insertAfter(_t11);}}else{var _t12=a.getFirstChild();if(require("Lexical").$isElementNode(_t12)&&(a=_t12),null===_t12){if(l)a.append(l);else for(var _e11=0;_e11<f.length;_e11++){var _t13=f[_e11];a.append(_t13),p=_t13;}}else if(null!==l)_t12.insertBefore(l);else for(var _e12=0;_e12<f.length;_e12++){var _n8=f[_e12];_t12.insertBefore(_n8),p=_n8;}}}else if(l)a.insertAfter(l);else for(var _e13=f.length-1;_e13>=0;_e13--){var _t14=f[_e13];a.insertAfter(_t14),p=_t14;}var y=require("Lexical").$getPreviousSelection();require("Lexical").$isRangeSelection(y)&&$(y.anchor)&&$(y.focus)?require("Lexical").$setSelection(y.clone()):null!==p?p.selectEnd():n.dirty=!0;}function m(e){var t=S(e);return null!==t&&"vertical-rl"===t.writingMode;}function S(t){var n=t.anchor.getNode();return require("Lexical").$isElementNode(n)?c(n):f(n);}function x(e,t,n,o){e.modify(t?"extend":"move",n,o);}function N(e){var t=S(e);return null!==t&&"rtl"===t.direction;}function T(e,t,n){var o=l(e.getStyle());return null!==o&&o[t]||n;}var E=a;exports.$cloneWithProperties=require("Lexical").$cloneWithProperties,exports.$selectAll=require("Lexical").$selectAll,exports.$addNodeStyle=function(e){var t=e.getStyle(),o=r(t);n.set(t,o);},exports.$copyBlockFormatIndent=p,exports.$ensureForwardRangeSelection=g,exports.$forEachSelectedTextNode=u,exports.$getComputedStyleForElement=c,exports.$getComputedStyleForParent=f,exports.$getSelectionStyleValueForProperty=function(t,n,o){if(o===void 0){o="";}var s=null;var r=t.getNodes(),i=t.anchor,c=t.focus,f=t.isBackward(),a=f?c.offset:i.offset,d=f?c.getNode():i.getNode();if(require("Lexical").$isRangeSelection(t)&&t.isCollapsed()&&""!==t.style){var _e14=l(t.style);if(null!==_e14&&n in _e14)return _e14[n];}for(var _t16=0;_t16<r.length;_t16++){var _l3=r[_t16];if((0===_t16||0!==a||!_l3.is(d))&&require("Lexical").$isTextNode(_l3)){var _e15=T(_l3,n,o);if(null===s)s=_e15;else if(s!==_e15){s="";break;}}}return null===s?o:s;},exports.$isAtNodeEnd=function(n){if("text"===n.type)return n.offset===n.getNode().getTextContentSize();var o=n.getNode();return require("Lexical").$isElementNode(o)||t(177),n.offset===o.getChildrenSize();},exports.$isParentElementRTL=N,exports.$isParentRTL=function(e){var t=f(e);return null!==t&&"rtl"===t.direction;},exports.$moveCaretSelection=x,exports.$moveCharacter=function(e,t,n){var o=N(e);var s;s=m(e)||o?!n:n,x(e,t,s,"character");},exports.$patchStyleText=function(t,n){if(require("Lexical").$isRangeSelection(t)&&t.isCollapsed()){d(t,n);var _o5=t.anchor.getNode();require("Lexical").$isElementNode(_o5)&&_o5.isEmpty()&&d(_o5,n);}u(function(e){d(e,n);});},exports.$setBlocksType=function(t,n,o){if(o===void 0){o=p;}if(null===t)return;var s=t.getStartEndPoints(),r=new Map();var l=null;if(s){var _require_Lexical;var _t17=s[0],_n1=s[1];l=(_require_Lexical=require("Lexical")).$createRangeSelection(),l.anchor.set(_t17.key,_t17.offset,_t17.type),l.focus.set(_n1.key,_n1.offset,_n1.type);var _o6=_require_Lexical.$findMatchingParent(_t17.getNode(),_require_Lexical.INTERNAL_$isBlock),_i2=_require_Lexical.$findMatchingParent(_n1.getNode(),_require_Lexical.INTERNAL_$isBlock);require("Lexical").$isElementNode(_o6)&&r.set(_o6.getKey(),_o6),require("Lexical").$isElementNode(_i2)&&r.set(_i2.getKey(),_i2);}for(var _n10 of t.getNodes())if(require("Lexical").$isElementNode(_n10)&&require("Lexical").INTERNAL_$isBlock(_n10))r.set(_n10.getKey(),_n10);else if(null===s){var _t18=require("Lexical").$findMatchingParent(_n10,require("Lexical").INTERNAL_$isBlock);require("Lexical").$isElementNode(_t18)&&r.set(_t18.getKey(),_t18);}for(var _ref3 of r){var _e16=_ref3[0];var _t19=_ref3[1];{var _s3=n();o(_t19,_s3),_t19.replace(_s3,!0),l&&(_e16===l.anchor.key&&l.anchor.set(_s3.getKey(),l.anchor.offset,l.anchor.type),_e16===l.focus.key&&l.focus.set(_s3.getKey(),l.focus.offset,l.focus.type));}}l&&t.is(require("Lexical").$getSelection())&&require("Lexical").$setSelection(l);},exports.$shouldOverrideDefaultCharacterSelection=function(t,n){var o=m(t)?!n:n;N(t)&&(o=!o);var s=require("Lexical").$caretFromPoint(t.focus,o?"previous":"next");if(require("Lexical").$isExtendableTextPointCaret(s))return!1;for(var _t20 of require("Lexical").$extendCaretToRange(s)){if(require("Lexical").$isChildCaret(_t20))return!_t20.origin.isInline();if(!require("Lexical").$isElementNode(_t20.origin)){if(require("Lexical").$isDecoratorNode(_t20.origin))return!0;break;}}return!1;},exports.$sliceSelectedTextNodeContent=function(t,n,o){if(o===void 0){o="self";}var s=t.getStartEndPoints();if(n.isSelected(t)&&!require("Lexical").$isTokenOrSegmented(n)&&null!==s){var _r3=s[0],_l4=s[1],_i3=t.isBackward(),_c=_r3.getNode(),_f2=_l4.getNode(),_a2=n.is(_c),_d=n.is(_f2);if(_a2||_d){var _e$$getCharacterOffse=require("Lexical").$getCharacterOffsets(t),_s4=_e$$getCharacterOffse[0],_r4=_e$$getCharacterOffse[1],_l5=_c.is(_f2),_a3=n.is(_i3?_f2:_c),_d2=n.is(_i3?_c:_f2);var _u,_g=0;if(_l5)_g=_s4>_r4?_r4:_s4,_u=_s4>_r4?_s4:_r4;else if(_a3){_g=_i3?_r4:_s4,_u=void 0;}else if(_d2){_g=0,_u=_i3?_s4:_r4;}var _p=n.__text.slice(_g,_u);_p!==n.__text&&("clone"===o&&(n=require("Lexical").$cloneWithPropertiesEphemeral(n)),n.__text=_p);}}return n;},exports.$trimTextContentFromAnchor=a,exports.$wrapNodes=function(t,n,o){if(o===void 0){o=null;}var s=t.getStartEndPoints(),r=s?s[0]:null,l=t.getNodes(),i=l.length;if(null!==r&&(0===i||1===i&&"element"===r.type&&0===r.getNode().getChildrenSize())){var _e17="text"===r.type?r.getNode().getParentOrThrow():r.getNode(),_t21=_e17.getChildren();var _s5=n();return _s5.setFormat(_e17.getFormatType()),_s5.setIndent(_e17.getIndent()),_t21.forEach(function(e){return _s5.append(e);}),o&&(_s5=o.append(_s5)),void _e17.replace(_s5);}var c=null,f=[];for(var _s6=0;_s6<i;_s6++){var _r5=l[_s6];require("Lexical").$isRootOrShadowRoot(_r5)?(y(t,f,f.length,n,o),f=[],c=_r5):null===c||null!==c&&require("Lexical").$hasAncestor(_r5,c)?f.push(_r5):(y(t,f,f.length,n,o),f=[_r5]);}y(t,f,f.length,n,o);},exports.createDOMRange=function(t,n,r,l,i){var _s7,_s8;var c=n.getKey(),f=l.getKey(),a=document.createRange();var d=t.getElementByKey(c),u=t.getElementByKey(f),g=r,p=i;if(require("Lexical").$isTextNode(n)&&(d=o(d)),require("Lexical").$isTextNode(l)&&(u=o(u)),void 0===n||void 0===l||null===d||null===u)return null;"BR"===d.nodeName&&(_s7=s(d),d=_s7[0],g=_s7[1],_s7),"BR"===u.nodeName&&(_s8=s(u),u=_s8[0],p=_s8[1],_s8);var $=d.firstChild;d===u&&null!=$&&"BR"===$.nodeName&&0===g&&0===p&&(p=1);try{a.setStart(d,g),a.setEnd(u,p);}catch(e){return null;}return!a.collapsed||g===p&&c===f||(a.setStart(u,p),a.setEnd(d,g)),a;},exports.createRectsFromDOMRange=function(e,t){var n=e.getRootElement();if(null===n)return[];var o=n.getBoundingClientRect(),s=getComputedStyle(n),r=parseFloat(s.paddingLeft)+parseFloat(s.paddingRight),l=Array.from(t.getClientRects());var i,c=l.length;l.sort(function(e,t){var n=e.top-t.top;return Math.abs(n)<=3?e.left-t.left:n;});for(var _e18=0;_e18<c;_e18++){var _t22=l[_e18],_n11=i&&i.top<=_t22.top&&i.top+i.height>_t22.top&&i.left+i.width>_t22.left,_s9=_t22.width+r===o.width;_n11||_s9?(l.splice(_e18--,1),c--):i=_t22;}return l;},exports.getCSSFromStyleObject=i,exports.getStyleObjectFromCSS=l,exports.trimTextContentFromAnchor=E;}),null);
__d("MAWPreloadSecureMessagesDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWPreloadSecureMessages").__setRef("MAWPreloadSecureMessagesDeferred"),s=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.load().then(function(e){return e.preloadSecureMessagesByThreadKey.apply(e,n)})};l.preloadSecureMessagesByThreadKey=s}),98);
__d("MDSInfiniteScrollList.react",["BaseInfiniteScrollList.react","MDSScrollableAreaStyles","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["xstyle"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(8),a,i;n[0]!==t?(i=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;n[3]!==i?(l=[r("MDSScrollableAreaStyles").unthemed,i],n[3]=i,n[4]=l):l=n[4];var s;return n[5]!==a||n[6]!==l?(s=u.jsx(r("BaseInfiniteScrollList.react"),babelHelpers.extends({forceBrowserDefault:!0,xstyle:l},a)),n[5]=a,n[6]=l,n[7]=s):s=n[7],s}l.default=c}),98);
__d("MessengerCrossIcon",["MessengerCross.svg.react","SVGIcon"],(function(t,n,r,o,a,i,l){"use strict";var e=o("SVGIcon").svgIcon(r("MessengerCross.svg.react"));l.default=e}),98);
__d("MDSQuickPromotionCard.react",["fbt","MDSButton.react","MDSCircleButton.react","MDSColumn.react","MDSColumnItem.react","MDSRow.react","MDSRowItem.react","MDSText.react","MessengerCrossIcon","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={callToActionSection:{display:"x78zum5",flexDirection:"x1q0g3np",marginTop:"xhrpt6u",$$css:!0},callToActionSpacer:{flexShrink:"x2lah0s",width:"x1xc55vz",$$css:!0},card:{boxShadow:"xe4pinz",paddingTop:"xz9dl7a",paddingInlineEnd:"xpdmqnj",paddingBottom:"xsag5q8",paddingInlineStart:"x1g0dm76",$$css:!0},withRoundedCorners:{borderStartStartRadius:"x1i5p2am",borderStartEndRadius:"x1whfx0g",borderEndEndRadius:"xr2y4jy",borderEndStartRadius:"x1ihp6rs",$$css:!0}},d={primary:{backgroundColor:"x1jx94hy",$$css:!0},secondary:{backgroundColor:"xlhe6ec",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(31),n=e.body,a=e.headline,i=e.headlineNumberOfLines,l=e.icon,m=e.onClose,p=e.primaryCallToAction,_=e.secondaryCallToAction,f=e.type,g=e.withRoundedCorners,h=i===void 0?1:i,y=f===void 0?"primary":f,C=g===void 0?!0:g,b=p!=null||_!=null,v=C&&c.withRoundedCorners,S=d[y],R;t[0]!==v||t[1]!==S?(R=[c.card,v,S],t[0]=v,t[1]=S,t[2]=R):R=t[2];var L;t[3]!==l?(L=l&&u.jsx(r("MDSRowItem.react"),{children:l}),t[3]=l,t[4]=L):L=t[4];var E;t[5]!==a||t[6]!==h?(E=u.jsx(r("MDSColumnItem.react"),{children:u.jsx(r("MDSText.react"),{align:"start",isSemanticHeading:!0,numberOfLines:h,type:"headlineEmphasized4",children:a})}),t[5]=a,t[6]=h,t[7]=E):E=t[7];var k;t[8]!==n?(k=u.jsx(r("MDSColumnItem.react"),{children:u.jsx(r("MDSText.react"),{align:"start",color:"secondary",numberOfLines:6,type:"body4",children:n})}),t[8]=n,t[9]=k):k=t[9];var I;t[10]!==E||t[11]!==k?(I=u.jsx(r("MDSRowItem.react"),{expanding:!0,children:u.jsxs(r("MDSColumn.react"),{spacing:12,children:[E,k]})}),t[10]=E,t[11]=k,t[12]=I):I=t[12];var T;t[13]!==m?(T=m!=null?u.jsx(r("MDSRowItem.react"),{children:u.jsx(r("MDSCircleButton.react"),{color:"primary",icon:r("MessengerCrossIcon"),label:s._(/*BTDS*/"Close"),onPress:m,size:24,testid:void 0})}):null,t[13]=m,t[14]=T):T=t[14];var D;t[15]!==I||t[16]!==T||t[17]!==L?(D=u.jsx(r("MDSColumnItem.react"),{children:u.jsxs(r("MDSRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:12,children:[L,I,T]})}),t[15]=I,t[16]=T,t[17]=L,t[18]=D):D=t[18];var x;if(t[19]!==b||t[20]!==p||t[21]!==_){var $;x=b&&u.jsxs(o("react-strict-dom").html.div,{style:c.callToActionSection,children:[_!=null&&u.jsx(r("MDSButton.react"),{icon:_.icon,label:_.label,linkProps:_.linkProps,onPress:_.onPress,size:32,type:"secondary"}),p!=null&&u.jsxs(u.Fragment,{children:[_!=null&&u.jsx(o("react-strict-dom").html.div,{style:c.callToActionSpacer}),u.jsx(r("MDSButton.react"),{icon:p.icon,label:p.label,linkProps:p.linkProps,onPress:p.onPress,size:32,type:(($=p.type)!=null?$:p.reduceEmphasis===!0)?"secondary":"primary"})]})]}),t[19]=b,t[20]=p,t[21]=_,t[22]=x}else x=t[22];var P;t[23]!==x?(P=u.jsx(r("MDSColumnItem.react"),{children:x}),t[23]=x,t[24]=P):P=t[24];var N;t[25]!==D||t[26]!==P?(N=u.jsxs(r("MDSColumn.react"),{children:[D,P]}),t[25]=D,t[26]=P,t[27]=N):N=t[27];var M;return t[28]!==N||t[29]!==R?(M=u.jsx(o("react-strict-dom").html.div,{style:R,children:N}),t[28]=N,t[29]=R,t[30]=M):M=t[30],M}l.default=m}),226);
__d("MDSSegmentedControl.react",["CometFocusGroupContext","MDSPressable.react","MDSText.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c={pill:{alignItems:"x6s0dn4",borderStartStartRadius:"xal68kn",borderStartEndRadius:"x51dqfy",borderEndEndRadius:"x1w4cqa3",borderEndStartRadius:"x1byqp33",display:"x78zum5",flexBasis:"x1tuynyk",flexGrow:"x1iyjqo2",height:"xc9qbxq",justifyContent:"xl56j7k",minWidth:"x13qp9f6",paddingInlineStart:"x1g0dm76",paddingInlineEnd:"xpdmqnj",paddingLeft:null,paddingRight:null,$$css:!0},selected:{backgroundColor:"x1iutvsz",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(15),n=e.label,a=e.onPress,i=e.selected,l=e.testid,d=a===void 0?r("emptyFunction"):a,m=i===void 0?!1:i,p=u(r("CometFocusGroupContext")),_=p.FocusItem,f=_!=null?_:s.Fragment,g=m&&c.selected,h;t[0]!==g?(h=[c.pill,g],t[0]=g,t[1]=h):h=t[1];var y=m?"primary":"secondary",C;t[2]!==n||t[3]!==y?(C=s.jsx(r("MDSText.react"),{color:y,numberOfLines:1,type:"bodyLink3",children:n}),t[2]=n,t[3]=y,t[4]=C):C=t[4];var b;t[5]!==n||t[6]!==d||t[7]!==m||t[8]!==h||t[9]!==C||t[10]!==l?(b=s.jsx(r("MDSPressable.react"),{"aria-label":n,"aria-selected":m,focusable:!0,onPress:d,role:"tab",testid:void 0,xstyle:h,children:C}),t[5]=n,t[6]=d,t[7]=m,t[8]=h,t[9]=C,t[10]=l,t[11]=b):b=t[11];var v;return t[12]!==f||t[13]!==b?(v=s.jsx(f,{children:b}),t[12]=f,t[13]=b,t[14]=v):v=t[14],v}l.default=d}),98);
__d("MDSSegmentedControls.react",["CometFocusGroup.react","MDSSegmentedControl.react","XPlatReactEnvironment","focusScopeQueries","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={pillContainer:{borderTopColor:"x1d4wt55",borderInlineEndColor:"xks9344",borderBottomColor:"x1n79urc",borderInlineStartColor:"x103ojqp",borderStartStartRadius:"xal68kn",borderStartEndRadius:"x51dqfy",borderEndEndRadius:"x1w4cqa3",borderEndStartRadius:"x1byqp33",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",boxSizing:"x9f619",display:"x78zum5",$$css:!0},pillContainerWeb:{minWidth:"x13qp9f6",$$css:!0},root:{boxSizing:"x1afcbsf",width:"xh8yej3",$$css:!0},rootWeb:{marginTop:"x1rdy4ex",marginInlineEnd:"x1lxpwgx",marginBottom:"x4vbgl9",marginInlineStart:"x165d6jo",overflowX:"xw2csxc",overflowY:"x1odjw0f",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(4),n=e.tabs,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=o("XPlatReactEnvironment").isWeb(),t[0]=a):a=t[0];var i=a,l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=[u.root,i&&u.rootWeb],t[1]=l):l=t[1];var c;return t[2]!==n?(c=s.jsx(o("react-strict-dom").html.div,{style:l,children:s.jsx(r("CometFocusGroup.react"),{hideArrowSignifiers:!0,orientation:"horizontal",role:"tablist",tabScopeQuery:o("focusScopeQueries").tabbableScopeQuery,children:function(t){return s.jsx(o("react-strict-dom").html.div,{role:"tablist",style:[u.pillContainer,i&&u.pillContainerWeb,t],children:n.map(d)})}})}),t[2]=n,t[3]=c):c=t[3],c}function d(e,t){return s.createElement(r("MDSSegmentedControl.react"),babelHelpers.extends({},e,{key:t}))}d.displayName=d.name+" [from "+i.id+"]",l.default=c}),98);
__d("QPLE2ESessionMarkers",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({NONE:"none",START:"start",END:"end"}),l=e;i.default=l}),66);
__d("QPLE2E",["QuickPerformanceLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(function(){function t(){}var n=t.prototype;return n.logPointDeprecated=function(n,o,a,i){var t,l,s,u;i===void 0&&(i={});var c=(t=i.timestamp)!=null?t:(e||(e=r("QuickPerformanceLogger"))).currentTimestamp(),d=babelHelpers.extends({},i.pointData),m=(l=i.action)!=null?l:12524;if(i.secondaryOrder!=null&&(d.string||(d.string={}),d.string.qpl_e2e__secondary_order=i.secondaryOrder),i.sessionMarker&&i.sessionMarker!=="none"){var p;d.bool||(d.bool={}),d.bool=babelHelpers.extends({},d.bool,(p={},p.qpl_e2e__session_marker_start_point=i.sessionMarker==="start",p.qpl_e2e__session_marker_end_point=i.sessionMarker==="end",p))}(e||(e=r("QuickPerformanceLogger"))).markerStart(n,void 0,c,{samplingBasis:a}),e.markerPoint(n,o,{data:d,timestamp:c*2}),i.annotations&&(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(n,i.annotations),e.markerAnnotate(n,{string:(s={},s.join_id=a,s.qpl__source="client",s),bool:(u={},u.qpl_e2e__align_points=!0,u)}),e.markerEnd(n,m,void 0,c)},t})(),u=new s;l.default=u}),98);
__d("MWCMChatTabNotificationsQPLLoggingUtils",["QPLE2E","QPLUserFlow","Random","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e=r("qpl")._(25298296,"1725"),s=r("qpl")._(25304846,"1726");function u(){var t=o("Random").uint32();return{logCancel:function(n){r("QPLUserFlow").endCancel(s,{annotations:{string:{cancelReason:n}},instanceKey:t})},logEventStreamReceived:function(o){o!=null&&r("QPLE2E").logPointDeprecated(e,"client:receive_event_stream",o,{action:2}),r("QPLUserFlow").start(s,{instanceKey:t})},logOpenChatTab:function(){r("QPLUserFlow").addPoint(s,"open_chat_tab",{instanceKey:t})},logOpenChatTabSuccess:function(){r("QPLUserFlow").endSuccess(s,{instanceKey:t})},logThreadLoaded:function(){r("QPLUserFlow").addPoint(s,"thread_loaded",{instanceKey:t})}}}l.createChatTabQPLLogger=u}),98);
__d("MWChatConfig",["CurrentEnvironment","bx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("CurrentEnvironment").messengerdotcom?r("bx").getURL(r("bx")("273041")):r("bx").getURL(r("bx")("273022")),s=r("CurrentEnvironment").messengerdotcom?r("bx").getURL(r("bx")("273042")):r("bx").getURL(r("bx")("273023"));l.soundNotifMp3Url=e,l.soundNotifOggUrl=s}),98);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23885219097739619"}),null);
__d("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql",["MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],concreteType:"MessengerChatTabsNotificationSubscribeResponsePayload",kind:"LinkedField",name:"messenger_chat_tabs_notification_subscribe",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"message_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"message_timestamp",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"thread_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"qpl_join_id",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:t,type:"Subscription",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",selections:t},params:{id:n("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription_facebookRelayOperation"),metadata:{subscriptionName:"messenger_chat_tabs_notification_subscribe"},name:"MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription",operationKind:"subscription",text:null}}})();a.exports=e}),null);
__d("MWChatTabsNotificationSubscription",["CometRelay","MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("MWChatTabsNotificationSubscription_MessengerChatTabsNotificationSubscription.graphql");function u(e,t){return o("CometRelay").requestSubscription(e,{onNext:t,subscription:s,variables:{input:{}}})}l.subscribe=u}),98);
__d("MWChatThreadPingCounter",[],(function(t,n,r,o,a,i){"use strict";var e=new Map;function l(t){var n=e.get(t);return n!=null?n:0}function s(t){e.set(t,l(t)+1)}function u(){e.clear()}i.getCount=l,i.incrementCount=s,i.clear=u}),66);
__d("MWDialogTextPairing.react",["MWDialogContentTypeValues","MWXTextPairing.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(r("MWXTextPairing.react"),babelHelpers.extends({},e,{level:o("MWDialogContentTypeValues").textPairingLevel})),t[0]=e,t[1]=n):n=t[1],n}l.default=u}),98);
__d("MWGetCurrentThreadIDForLSThread",["FBLogger","I64","LSIntEnum","mwCMIsAnyCMThread"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){if(a)return{NAME:"Page",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(7))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(15))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(16)))return{NAME:"UserSecret",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(1))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(13))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(201)))return{NAME:"User",VAL:(e||(e=o("I64"))).to_string(t)};if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(5))||r("mwCMIsAnyCMThread")(n)||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(150))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(151))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(154))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(155))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(152))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(153))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(26)))return{NAME:"Group",VAL:(e||(e=o("I64"))).to_string(t)};throw r("FBLogger")("messenger_web_messaging").mustfixThrow("Unsupported MWMessagingThreadType %s",(e||(e=o("I64"))).to_string(n))}l.get=u}),98);
__d("MWGroupMembershipListItem",["I64","MessagingSpecialThreadRole","MessagingSpecialThreadRoleBitOffset"],(function(t,n,r,o,a,i,l){"use strict";var e,s={BroadcastChannelParticipant:"broadcastChannelParticipantType",CommunityMember:"communityMemberType",ParticipantAndContact:"participantAndContactType",ServerSearchResult:"serverSearchResultType"};function u(e){return e.type===s.ParticipantAndContact?e.participant.isAdmin:e.type===s.CommunityMember?e.communityMember.isAdmin:e.type===s.BroadcastChannelParticipant?e.participant.isAdmin:!1}function c(e){return e.type===s.ParticipantAndContact?e.participant.isModerator:e.type===s.CommunityMember?e.communityMember.isModerator:!1}function d(e){return e.type===s.CommunityMember?o("MessagingSpecialThreadRoleBitOffset").has(r("MessagingSpecialThreadRole").CHAT_HOST,e.communityMember):!1}function m(t){return t.type===s.ParticipantAndContact?t.contact.id:t.type===s.CommunityMember?t.communityMember.contactId:t.type===s.BroadcastChannelParticipant?t.participant.contactId:(e||(e=o("I64"))).of_string(t.serverSearchResult.resultId)}l.MWGroupMembershipMemberTypes=s,l.isAdmin=u,l.isModerator=c,l.isHost=d,l.contactId=m}),98);
__d("MWInboxMessageSearchPanelHeader.react",["fbt","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWXCircleButton.react","MWXIconCross","MWXRow.react","MWXRowItem.react","MWXText.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(13),n=e.onReturn,a=e.titleComponent,i=m(r("MWResponsiveLayoutContext.react")),l;t[0]!==i||t[1]!==n?(l=function(){n(),i==null||i.popCard(o("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL)},t[0]=i,t[1]=n,t[2]=l):l=t[2];var c=l,d;t[3]===Symbol.for("react.memo_cache_sentinel")?(d=s._(/*BTDS*/"Back"),t[3]=d):d=t[3];var p;t[4]!==c?(p=u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":d,icon:r("MWXIconCross"),onPress:c,size:32,type:"deemphasized"})}),t[4]=c,t[5]=p):p=t[5];var _;t[6]!==a?(_=a!=null?a:u.jsx(r("MWXText.react"),{isSemanticHeading:!0,type:"bodyLink2",children:s._(/*BTDS*/"Search")}),t[6]=a,t[7]=_):_=t[7];var f;t[8]!==_?(f=u.jsx(r("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",children:_}),t[8]=_,t[9]=f):f=t[9];var g;return t[10]!==p||t[11]!==f?(g=u.jsxs(r("MWXRow.react"),{paddingHorizontal:16,paddingTop:16,spacingHorizontal:8,children:[p,f]}),t[10]=p,t[11]=f,t[12]=g):g=t[12],g}l.default=p}),226);
__d("MWNotificationRenderer.react",["fbt","I64","LSIntEnum"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(t,n,r,a,i){var l,c;if((e||(e=o("I64"))).equal(t.senderId,n))return s._(/*BTDS*/"New message");var d=(l=(c=i.nickname)!=null?c:a.firstName)!=null?l:a.name,m=r.threadName;return m!=null?s._(/*BTDS*/"{senderName} messaged {groupName}",[s._param("senderName",d),s._param("groupName",m)]):(e||(e=o("I64"))).equal(r.threadType,(u||(u=o("LSIntEnum"))).ofNumber(2))?s._(/*BTDS*/"{name} messaged your group",[s._param("name",d)]):s._(/*BTDS*/"{name} messaged you",[s._param("name",d)])}l.renderDocumentTitle=c}),226);
__d("MWLSChatPopperCommon",["CometSetBlinkingTitleMessageContext","CurrentUser","I64","MWChatConfig","MWChatSettingsQuery","MWNotificationRenderer.react","MWPIsThreadUnread","MessengerWebEventsFalcoEvent","ReQL","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=r("requireDeferred")("Sound").__setRef("MWLSChatPopperCommon");function p(e){var t=(s||(s=o("I64"))).to_string(e.senderId)!==r("CurrentUser").getID();t&&m.onReady(function(t){t.play([o("MWChatConfig").soundNotifOggUrl,o("MWChatConfig").soundNotifMp3Url],(s||(s=o("I64"))).to_float(e.timestampMs),!1)})}function _(e,t,n){var a=d(r("CometSetBlinkingTitleMessageContext"));return c(function(r,i,l,u){var c=o("MWNotificationRenderer.react").renderDocumentTitle(r,t,i,l,u);n.contents!=null&&n.contents(),n.contents=o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(i.threadKey).subscribe(function(e,t){if(t.operation==="add"||t.operation==="put"){var r=t.value;if(o("MWPIsThreadUnread").isThreadUnread(r))return;n.contents!=null&&n.contents(),n.contents=void 0,a(null,(s||(s=o("I64"))).to_float(r.lastReadWatermarkTimestampMs))}}),a(c,(s||(s=o("I64"))).to_float(r.timestampMs))},[t,n,e.tables.threads,a])}function f(e){o("MWChatSettingsQuery").areChatTabsSoundsOn(function(t){if(t!=null&&t)return p(e);r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message_sound"}})})}l.useUpdateDocumentTitle=_,l.playChatTabSound=f}),98);
__d("MWLSChatTabPolicy",["$InternalEnum","I64","LSContactBlockedByViewerStatus","LSIntEnum","MWCMThreadTypes.react","MWChatSettingsQuery","MWGenAIUtils","MessagingFolderTag","MessengerWebEventsFalcoEvent","emptyFunction","gkx","qex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=n("$InternalEnum")({ALLOW:0,DENY:1});function c(e,t,n){if(n===u.ALLOW)return e(t)}var d=function(t){return r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"suppress_new_message",extra_data:{reason:t}}})},m=function(t){t(u.ALLOW)},p=function(n,r,a){(e||(e=o("I64"))).equal(r.senderId,a)?(d("message_outgoing"),n(u.DENY)):n(u.ALLOW)},_=function(t,n,a){if(r("gkx")("23433"))t(u.ALLOW);else{o("MWChatSettingsQuery").areChatTabsTurnedOff(function(e){e!=null&&e?(d("turn_off_chat_tab"),n!=null&&o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)&&a!=null&&a.logCancel("turn_off_chat_tab"),t(u.DENY)):t(u.ALLOW)});return}},f=function(n,r,a){var t=(e||(e=o("I64"))).to_float(r.muteExpireTimeMs);t>Date.now()||t<0?(d("mention_muted"),o("MWCMThreadTypes.react").isJoinedCMThread(r.threadType)&&a!=null&&a.logCancel("mention_muted"),n(u.DENY)):n(u.ALLOW)},g=function(t,n){n.isAdminMessage?(d("message_non_user_generated"),t(u.DENY)):t(u.ALLOW)},h=function(n,a){a.folderName===r("MessagingFolderTag").INBOX||(e||(e=o("I64"))).equal(a.parentThreadKey,(s||(s=o("LSIntEnum"))).ofNumber(-10))?n(u.ALLOW):(d("message_no_inbox"),n(u.DENY))},y=function(n,a){(e||(e=o("I64"))).equal(a.blockedByViewerStatus,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED))?n(u.ALLOW):(d("message_blocked_participants"),n(u.DENY))},C=function(t,n){o("MWCMThreadTypes.react").isJoinedCMThread(n.threadType)?(d("community_messaging_group_blocked"),t(u.DENY)):t(u.ALLOW)},b=function(t,n){var e=n.mentionTypes;e!=null&&"s".includes(e)?t(u.DENY):t(u.ALLOW)},v=function(t,n){r("gkx")("23433")&&n?t(u.DENY):t(u.ALLOW)},S=function(t,n){o("MWGenAIUtils").isMetaAIThread(n.threadKey)&&r("qex")._("4970")===!0?t(u.DENY):t(u.ALLOW)},R=function(t,n){if(t.length===0)return function(e){return c(n,r("emptyFunction"),e)};var e=t[0],o=babelHelpers.arrayLikeToArray(t).slice(1);return function(t){return c(e,R(o,n),t)}},L=function(t,n){var e=t[0],r=babelHelpers.arrayLikeToArray(t).slice(1);e(R(r,n))};function E(e,t,n,r,o,a){return L([function(){return m.apply(void 0,arguments)},function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return p.apply(void 0,n.concat([e,r]))},function(){return _.apply(void 0,arguments)},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return f.apply(void 0,n.concat([t]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g.apply(void 0,n.concat([e]))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return h.apply(void 0,n.concat([t]))},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return y.apply(void 0,t.concat([n]))},function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return C.apply(void 0,n.concat([t]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return b.apply(void 0,n.concat([e]))},function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return v.apply(void 0,t.concat([o]))},function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return S.apply(void 0,n.concat([e]))}],a)}function k(e,t,n,r){return L([function(){return m.apply(void 0,arguments)},function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return _.apply(void 0,r.concat([e,t]))},function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return f.apply(void 0,r.concat([e,t]))},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return v.apply(void 0,t.concat([n]))}],r)}l.shouldMessageBeAllowed=E,l.shouldCommunityChatThreadPopup=k}),98);
__d("useMWChatOpenTabFromNewMessage",["I64","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadAttributionStore","MAWPreloadSecureMessagesDeferred","MAWStateContext.react","MWChatInteraction","MWChatStateActions","MWChatStateContext","MWChatStateV2.react","MWChatStateV2IsClosed","MWChatStateV2Types","MWChatThreadId","MessengerWebEventsFalcoEvent","ODS","dispatchOpenChatTabTraceLogging","gkx","justknobx","loadChatTabEntryPoint","react","setTimeout","useAsyncReStore","useCometFeedNoRoutingNavigationEventLogger","useCometRelayEntrypointContextualEnvironmentProvider","useLazyShouldShowMessagingEntrypointInCometRoot","useMWChatOpenTabTraceProvider"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=e||(e=o("react")),m=d.useCallback,p=d.useContext,_=new Set;function f(e,t){var n=t.withChatTabTracing,a=n===void 0?!1:n,i=r("useCometFeedNoRoutingNavigationEventLogger")(),l=o("MWChatStateV2.react").useDispatch(),d=r("useMWChatOpenTabTraceProvider")(),f=o("MWChatStateContext").useChatState(function(e){return e.tabs}),g=r("useLazyShouldShowMessagingEntrypointInCometRoot")("CHAT"),h=r("useCometRelayEntrypointContextualEnvironmentProvider")(),y=p(o("MAWStateContext.react").MAWDispatchContext),C=r("useAsyncReStore")();return m(function(t,n,m){i(Date.now(),"","messenger"),(s||(s=o("ODS"))).bumpEntityKey(3185,"mwchat_tab","open_incoming"),r("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"open_chat_tab_from_new_message"}}),o("LSThreadAttributionStore").setSource(o("MWChatThreadId").getFBID(t),e);var p=Date.now();if(o("LSMessagingThreadTypeUtil").isArmadilloSecure(n.threadType)){var b=r("gkx")("14315")?8:r("justknobx")._("2038");C.then(function(e){return o("MAWPreloadSecureMessagesDeferred").preloadSecureMessagesByThreadKey(e,n.threadKey,y,b)})}var v=function(t){var e={clientThreadKey:void 0,threadKey:n.threadKey,threadType:n.threadType},a=r("loadChatTabEntryPoint")(h);r("dispatchOpenChatTabTraceLogging")(t,e,"useMWChatOpenTabFromNewMessage"),l(o("MWChatStateActions").openTabOrFlyout(p,{shouldFocus:!1},{threadKeyDescriptor:e,type:o("MWChatStateV2Types").MWChatStateTabType.ChatTab},a),!r("gkx")("24037"))},S=n.threadKey,R=Array.from(f.values()).find(function(e){if(e.tabType.type===o("MWChatStateV2Types").MWChatStateTabType.ChatTab){var t=e.tabType.threadKeyDescriptor.threadKey;return(u||(u=o("I64"))).equal(S,t)}}),L=R!=null?o("MWChatStateV2IsClosed").isClosed(R):!1,E=_.has((u||(u=o("I64"))).to_string(S)),k=a&&(R==null&&!E||R!=null&&L)&&g();return k?(_.add((u||(u=o("I64"))).to_string(S)),d({entrypoint:"notificationInThreadReply",threadKey:n.threadKey,threadType:(c||(c=o("LSIntEnum"))).unwrapIntEnum(n.threadType)},function(e,t){o("MWChatInteraction").set((u||(u=o("I64"))).to_string(n.threadKey),e),t.onComplete(function(){_.delete((u||(u=o("I64"))).to_string(S))}),v(t)})):v(),r("setTimeout")(function(){return l(o("MWChatStateActions").closeFlyout(p,n.threadKey))},3e3),m()},[i,e,f,a,l,d,g])}l.default=f}),98);
__d("MWLSCommunityChatPopper",["CometRelay","GroupsCometChatsEngagementLogger","I64","MWCMChatTabNotificationsQPLLoggingUtils","MWChatTabsNotificationSubscription","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MercuryIDs","ReQL","promiseDone","react","react-compiler-runtime","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useEffect,m={contents:void 0};function p(e,t){var n=o("react-compiler-runtime").c(8),a=o("MWLSChatPopperCommon").useUpdateDocumentTitle(e,t,m),i;n[0]!==e.tables.contacts||n[1]!==e.tables.participants||n[2]!==e.tables.threads||n[3]!==a?(i=function(n){r("promiseDone")(window.Promise.all([e.tables.threads.get(n.threadKey),e.tables.contacts.get(n.senderId),e.tables.participants.get(n.threadKey,n.senderId)]),function(e){var t=e[0],i=e[1],l=e[2];if(i!=null&&l!=null){a(n,t,i,l);var u=r("MercuryIDs").getThreadIDFromThreadFBID((s||(s=o("I64"))).to_string(t.threadKey));if(o("MWChatThreadPingCounter").getCount(u)<3){o("MWChatThreadPingCounter").incrementCount(u),o("MWLSChatPopperCommon").playChatTabSound(n);return}}})},n[0]=e.tables.contacts,n[1]=e.tables.participants,n[2]=e.tables.threads,n[3]=a,n[4]=i):i=n[4];var l=i,u;return n[5]!==l||n[6]!==e.tables.messages?(u=function(n,a,i){var t={contents:_};t.contents=o("ReQL").fromTableAscending(e.tables.messages).getKeyRange((s||(s=o("I64"))).of_string(n),s.of_string(i),a).subscribe(function(e,n){if(n.operation==="add"){var r=n.value;t.contents(),l(r)}}),r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.messages).getKeyRange(s.of_string(n),s.of_string(i),a)),function(e){e&&(t.contents(),l(e))})},n[5]=l,n[6]=e.tables.messages,n[7]=u):u=n[7],u}function _(){}function f(e){var t=o("react-compiler-runtime").c(9),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==i?(l={withChatTabTracing:i},t[0]=i,t[1]=l):l=t[1];var u=r("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",l),c=o("MWPActor.react").useActor(),m=r("CometRelay").useRelayEnvironment(),_=p(n,c),f=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),g=f.familyCenterData,h,y;t[2]!==m||t[3]!==g.hasActiveMsgrFamilyCenterEnforcement||t[4]!==u||t[5]!==n||t[6]!==_?(h=function(){var e=o("MWChatTabsNotificationSubscription").subscribe(m,function(e){var t=(e==null?void 0:e.messenger_chat_tabs_notification_subscribe)||{},a=t.message_id,i=t.message_timestamp,l=t.qpl_join_id,c=t.thread_id;if(!(c==null||i==null||a==null)){var d=o("MWCMChatTabNotificationsQPLLoggingUtils").createChatTabQPLLogger();d.logEventStreamReceived(l),r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.threads).getKeyRange((s||(s=o("I64"))).of_string(c))),function(e){e!=null&&(d.logThreadLoaded(),o("MWLSChatTabPolicy").shouldCommunityChatThreadPopup(e,d,g.hasActiveMsgrFamilyCenterEnforcement,function(){var t=o("MWGetCurrentThreadIDForLSThread").get(e.threadKey,e.threadType,!1);d.logOpenChatTab(),u(t,e,function(){d.logOpenChatTabSuccess(),o("GroupsCometChatsEngagementLogger").log({action:"impression",event:"thread_open_auto",source:"auto_open_chat_tabs",surface:"auto_open_chat_tabs_container",thread_id:(s||(s=o("I64"))).to_string(e.threadKey)}),_(c,a,i)})}))})}});return(function(){e.dispose()})},y=[m,n,u,_,g.hasActiveMsgrFamilyCenterEnforcement],t[2]=m,t[3]=g.hasActiveMsgrFamilyCenterEnforcement,t[4]=u,t[5]=n,t[6]=_,t[7]=h,t[8]=y):(h=t[7],y=t[8]),d(h,y)}l.useOpenCommunityChatTabs=f}),98);
__d("MWLayoutBackButton.react",["fbt","Locale","MWResponsiveLayoutConstants","MWResponsiveLayoutContext.react","MWResponsiveLayoutShowState","MWXCircleButton.react","MWXIconArrowLeft","MWXIconArrowRight","MWXRowItem.react","MWXThreadThemeColor","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useContext;function p(e){var t=o("react-compiler-runtime").c(10),n=e.panel,a=m(r("MWResponsiveLayoutContext.react")),i=a.popCard,l;t[0]!==n||t[1]!==i?(l=function(){return i(n)},t[0]=n,t[1]=i,t[2]=l):l=t[2];var c=l,d=n,p;t[3]!==a||t[4]!==d?(p=o("MWResponsiveLayoutShowState").isCardStackedAboveOthers(d,a),t[3]=a,t[4]=d,t[5]=p):p=t[5];var _=p,f;return t[6]!==_||t[7]!==c||t[8]!==n?(f=_?u.jsx(r("MWXRowItem.react"),{children:u.jsx(r("MWXCircleButton.react"),{"aria-label":s._(/*BTDS*/"Back"),color:n===o("MWResponsiveLayoutConstants").MWLayoutPanel.INFO_PANEL?"primary":o("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-header-button-color)"),icon:o("Locale").isRTL()?r("MWXIconArrowRight"):r("MWXIconArrowLeft"),onPress:c,size:36,type:"deemphasized"})}):null,t[6]=_,t[7]=c,t[8]=n,t[9]=f):f=t[9],f}l.default=p}),226);
__d("MWMemberListGlimmer.react",["MWXGlimmer.react","MWXListCell.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={nameGlimmer:{borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",height:"xlup9mm",width:"x1oux285",$$css:!0},profileGlimmer:{borderStartStartRadius:"x1xn7y0n",borderStartEndRadius:"x1uxb8k9",borderEndEndRadius:"x1vmbcc8",borderEndStartRadius:"x16xm01d",height:"xc9qbxq",width:"x14qfxbe",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(4),n=e.rowCount,r=n===void 0?3:n,a;t[0]!==r?(a=new Array(r).fill("").map(d),t[0]=r,t[1]=a):a=t[1];var i;return t[2]!==a?(i=s.jsx(s.Fragment,{children:a}),t[2]=a,t[3]=i):i=t[3],i}function d(e,t){return s.jsx(r("MWXListCell.react"),{addOnStart:s.jsx(r("MWXGlimmer.react"),{index:0,xstyle:u.profileGlimmer}),content:s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:u.nameGlimmer}),size:"medium"},t)}d.displayName=d.name+" [from "+i.id+"]",l.default=c}),98);
__d("MWPParticipantsAndContactsForThread_DO_NOT_USE_THIS_WILL_KILL_PERFORMANCE",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(7),a=(e||(e=r("useReStore")))(),l;n[0]!==a.tables.contacts||n[1]!==a.tables.participants||n[2]!==t.threadKey?(l=function(){return o("ReQL").mergeJoin(o("ReQL").fromTableAscending(a.tables.participants).getKeyRange(t.threadKey),o("ReQL").fromTableAscending(a.tables.contacts))},n[0]=a.tables.contacts,n[1]=a.tables.participants,n[2]=t.threadKey,n[3]=l):l=n[3];var s;return n[4]!==a||n[5]!==t.threadKey?(s=[a,t.threadKey],n[4]=a,n[5]=t.threadKey,n[6]=s):s=n[6],o("ReQLSuspense").useArray(l,s,i.id+":28")}l.useValue=s}),98);
__d("MWXIconBlockCircle",["MWXSvgIcon","SVGIcon","cr:22226","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22226")),r("gkx")("23219"));l.default=e}),98);
__d("MWXPageletPlaceholder.react",["CometPageletWithDiv.react"],(function(t,n,r,o,a,i,l){"use strict";l.default=o("CometPageletWithDiv.react").Placeholder}),98);
__d("MWXSwitch.react",["cr:1926","cr:5084","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["icon","size"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(10),a,i,l;if(r[0]!==t?(a=t.icon,l=t.size,i=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l):(a=r[1],i=r[2],l=r[3]),n("cr:5084")){var s;return r[4]!==a||r[5]!==i||r[6]!==l?(s=u.jsx(n("cr:5084"),babelHelpers.extends({},i,{icon:a,size:l})),r[4]=a,r[5]=i,r[6]=l,r[7]=s):s=r[7],s}if(n("cr:1926")){var c;return r[8]!==i?(c=u.jsx(n("cr:1926"),babelHelpers.extends({},i)),r[8]=i,r[9]=c):c=r[9],c}return null}l.default=c}),98);
__d("MWXTabs.react",["cr:4220","cr:4354","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4);if(n("cr:4220")!=null){var r;return t[0]!==e?(r=s.jsx(n("cr:4220"),babelHelpers.extends({},e)),t[0]=e,t[1]=r):r=t[1],r}if(n("cr:4354")!=null){var a;return t[2]!==e?(a=s.jsx(n("cr:4354"),babelHelpers.extends({},e)),t[2]=e,t[3]=a):a=t[3],a}return null}l.default=u}),98);
__d("MessengerBlockCircleFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm-7-12.5a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1a1 1 0 0 0-1-1H11z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerCheckmark.svg.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 36 36",width:"1em",height:"1em",fill:"currentColor"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26.378 9.169c.597.347.8 1.112.453 1.709l-9 15.5a1.25 1.25 0 0 1-1.965.256l-6.5-6.5a1.25 1.25 0 1 1 1.768-1.768l5.121 5.121a.25.25 0 0 0 .393-.05L24.67 9.621a1.25 1.25 0 0 1 1.709-.453z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPencilFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M20.953 12.569a.75.75 0 0 0-1.06 0l-8.938 8.937a4.004 4.004 0 0 0-.715.973l-2.121 4.05c-.455.867.481 1.804 1.35 1.349l4.049-2.121c.358-.188.686-.429.972-.715l8.938-8.937a.75.75 0 0 0 0-1.061l-2.475-2.475zM24.842 13.63a.75.75 0 0 0 1.06 0l1.363-1.362a2.5 2.5 0 0 0-3.536-3.536l-1.362 1.362a.75.75 0 0 0 0 1.06l2.475 2.476z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerTextFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.243 12.238a.368.368 0 0 0-.35.255l-2.18 6.675a.25.25 0 0 0 .238.328h4.584a.25.25 0 0 0 .238-.328l-2.18-6.675a.369.369 0 0 0-.35-.255zm5.802 13.755a1.44 1.44 0 0 1-1.365-.982l-.928-2.844a.25.25 0 0 0-.238-.173H8.973a.25.25 0 0 0-.238.173l-.929 2.844a1.44 1.44 0 1 1-2.722-.94L9.83 10.7a2.563 2.563 0 0 1 4.829 0l4.744 13.37a1.44 1.44 0 0 1-1.357 1.922zm11.207-5.475a.25.25 0 0 0-.266-.25l-2.805.176c-1.659.108-2.434.709-2.434 1.779 0 1.105.942 1.766 2.255 1.766 1.79 0 3.25-1.166 3.25-2.692v-.78zm1.409 5.46a1.33 1.33 0 0 1-1.339-1.336c0-.098-.139-.138-.198-.06-.803 1.058-2.387 1.668-3.925 1.668-2.475 0-4.198-1.56-4.198-3.9 0-2.316 1.7-3.9 4.82-4.088l3.195-.185a.25.25 0 0 0 .236-.25v-.762c0-1.252-1.032-1.829-2.603-1.829-2.066 0-2.316 1.24-3.333 1.24-1.13 0-1.745-1.354-.968-2.172.933-.982 2.349-1.556 4.254-1.556 3.295 0 5.398 1.603 5.398 4.317v7.577a1.33 1.33 0 0 1-1.34 1.335z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("WebBloksURLUtils",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=new RegExp("[?&]"+t.join("(?:=[^&]*)?|[?&]")+"(?:=[^&]*)?","gi"),r=e.indexOf("?")!==-1?"&":"?",o=e.replace(n,"").replace(/&$/,"");return o.indexOf("?")===-1&&o.indexOf("&")!==-1?o.replace("&","?"):o.replace("?&",r)}function l(e){if(/^(fb|https?|intent):\/\//i.test(e)||/^mailto:/i.test(e))return e;var t=window.location.protocol+"//"+window.location.hostname,n=e;return e.charAt(0)==="/"&&(n=e.substr(1)),t+"/"+n}function s(e,t){t===void 0&&(t=!1);var n=window.location.href;t?window.open(e,"_blank"):e===n?window.location.reload():window.location.href=e}function u(e,t){var n=e.split("?")[0],r=e.split("?")[1]||"",o=c(r),a=babelHelpers.extends({},o,t),i=Object.entries(a).map(function(e){var t=e[0],n=e[1];return typeof n=="string"&&n.length===0?t:encodeURIComponent(t)+"="+encodeURIComponent(n)}).join("&");return n+"?"+i}function c(e){var t={};return e&&e.split("&").forEach(function(e){var n=e.split("="),r=n[0],o=n[1];t[decodeURIComponent(r)]=decodeURIComponent(o===void 0?"":o)}),t}i.removeQueryParams=e,i.qualify=l,i.openURL=s,i.addQueryParamsToUrl=u}),66);
__d("isStringNotNullAndNotWhitespaceOnly",[],(function(t,n,r,o,a,i){"use strict";function e(e){return!(e==null||e.trim()==="")}i.default=e}),66);
/**
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 *
 *
 * @fullSyntaxTransform
 * @es6-async_DO_NOT_USE
 * @generated SignedSource<<7436c8dc7367c270e1db7b9c3652e01f>>
 * 
 * @nolint
 * @oncall lexical_web_text_editor
 * @preserve-invariant-messages
 * @preserve-whitespace
 * @preventMunge
 */__d("useLexicalEditable.prod",["LexicalComposerContext","react"],(function $module_useLexicalEditable_prod(global,require,requireDynamic,requireLazy,module,exports){

"use strict";var _require_closure_react;var t=_require_closure_react||(_require_closure_react=require("react"));var n="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?t.useLayoutEffect:t.useEffect;function i(e){return{initialValueFn:function initialValueFn(){return e.isEditable();},subscribe:function subscribe(t){return e.registerEditableListener(t);}};}exports.useLexicalEditable=function(){return function(i){var _e$useLexicalComposer=require("LexicalComposerContext").useLexicalComposerContext(),r=_e$useLexicalComposer[0],u=t.useMemo(function(){return i(r);},[r,i]),_t$useState=t.useState(function(){return u.initialValueFn();}),o=_t$useState[0],s=_t$useState[1],c=t.useRef(o);return n(function(){var e=u.initialValueFn,t=u.subscribe,n=e();return c.current!==n&&(c.current=n,s(n)),t(function(e){c.current=e,s(e);});},[u,i]),o;}(i);};}),null);
__d("useMAWSecurityAlertsPreferences",["MAWBridgeFireAndForget","MAWBridgeSendAndReceive","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useState;function m(){var e=o("react-compiler-runtime").c(10),t=d(),n=t[0],a=t[1],i,l;e[0]===Symbol.for("react.memo_cache_sentinel")?(i=function(){r("promiseDone")(o("MAWBridgeSendAndReceive").sendAndReceive("backend","getSecurityAlertSettingForSelfAndContact").then(function(e){a(e)}))},l=[],e[0]=i,e[1]=l):(i=e[0],l=e[1]),c(i,l);var s;e[2]!==n?(s=function(t){n!=null&&a(babelHelpers.extends({},n,{allowSecurityAlertForContact:t})),o("MAWBridgeFireAndForget").fireAndForget("backend","changeSecurityAlertSetting",{isEnableAlert:t})},e[2]=n,e[3]=s):s=e[3];var u=s,m;e[4]!==n?(m=function(t){n!=null&&a(babelHelpers.extends({},n,{allowSecurityAlertForSelf:t})),o("MAWBridgeFireAndForget").fireAndForget("backend","changeSecurityAlertSettingForSelf",{isEnableSelfAlert:t})},e[4]=n,e[5]=m):m=e[5];var p=m,_;return e[6]!==n||e[7]!==u||e[8]!==p?(_={onContactSecurityAlertsPreferencesChange:u,onSelfSecurityAlertsPreferencesChange:p,securityAlertsPreferences:n},e[6]=n,e[7]=u,e[8]=p,e[9]=_):_=e[9],_}l.default=m}),98);
__d("useMWCMNavigateNextCommunity",["I64","MWInboxCommunityThreadsRouteBuilder","MWInboxRouteBuilder","ReQL","ReQLSuspense","react","react-compiler-runtime","useCometRouterDispatcher","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useCallback,m=c.useMemo;function p(t){var n=o("react-compiler-runtime").c(12),a=(e||(e=r("useReStore")))(),l=r("useCometRouterDispatcher")(),u;n[0]!==a.tables.community_folders||n[1]!==t?(u=function(){return o("ReQL").fromTableAscending(a.tables.community_folders).filter(function(e){return!(s||(s=o("I64"))).equal(t,e.folderId)}).filter(f)},n[0]=a.tables.community_folders,n[1]=t,n[2]=u):u=n[2];var c;n[3]!==a||n[4]!==t?(c=[a,t],n[3]=a,n[4]=t,n[5]=c):c=n[5];var d=o("ReQLSuspense").useArray(u,c,i.id+":28"),m;n[6]!==d?(m=d.slice(0).sort(_),n[6]=d,n[7]=m):m=n[7];var p=m,g;return n[8]!==p[0]||n[9]!==p.length||n[10]!==l?(g=function(){var e=p.length!==0?o("MWInboxCommunityThreadsRouteBuilder").buildURLWithoutThread({folder_id:(s||(s=o("I64"))).to_string(p[0].folderId)}):o("MWInboxRouteBuilder").buildHomeURL();if(l!=null){l.go(e,{});return}},n[8]=p[0],n[9]=p.length,n[10]=l,n[11]=g):g=n[11],g}function _(e,t){return e.name.localeCompare(t.name)}function f(e){var t=e.isHidden;return!t}l.default=p}),98);
__d("useMWInboxMediaRestoreLoop",["Int64Hooks","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReadyDeferred","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useState,d=r("requireDeferred")("MAWFTSRestoreSync").__setRef("useMWInboxMediaRestoreLoop");function m(e){var t=o("react-compiler-runtime").c(14),n=e.threadKey,a=r("useAsyncReStore")(),i=c(null),l=i[0],s=i[1],u,m;t[0]!==a||t[1]!==l||t[2]!==e.threadType||t[3]!==n?(u=function(){var t=async function(){var e=await a;r("promiseDone")(r("MAWMiActOnActThreadReadyDeferred")(e,n,"mediaRestore",function(e,t){return d.onReady(function(e){var n=e.getMediaRestoreSync;n().setActiveThreadId(t),r("promiseDone")(n().startMediaSyncingLoop()),s(n())}),Promise.resolve()}))};return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)&&r("promiseDone")(t()),(function(){l==null||l.setIsStarted(!1),l==null||l.setShouldPauseRestore(!0)})},m=[a,l,e.threadType,n],t[0]=a,t[1]=l,t[2]=e.threadType,t[3]=n,t[4]=u,t[5]=m):(u=t[4],m=t[5]),o("Int64Hooks").useEffectInt64(u,m);var p;t[6]!==l?(p=function(){l!=null&&(l.resetEBAvailability(),l.isStarted()||r("promiseDone")(l.startMediaSyncingLoop()))},t[6]=l,t[7]=p):p=t[7];var _=p,f;t[8]!==l?(f=function(){l!=null&&(l.isStarted()||r("promiseDone")(l.startMediaSyncingLoop()))},t[8]=l,t[9]=f):f=t[9];var g=f,h,y;return t[10]!==_||t[11]!==g?(h=function(){return{onEBOnboarded:_,startMediaSync:g}},y=[_,g],t[10]=_,t[11]=g,t[12]=h,t[13]=y):(h=t[12],y=t[13]),o("Int64Hooks").useMemoInt64(h,y)}l.default=m}),98);
__d("useMWLSChatPopperUpper",["FBLogger","I64","JSResourceForInteraction","LSContactType","LSIntEnum","MWChatMessagesOnChatTabLoadTracker","MWChatThreadPingCounter","MWGetCurrentThreadIDForLSThread","MWLSChatPopperCommon","MWLSChatTabPolicy","MWPActor.react","MWXacGating","MercuryIDs","ReQL","ServerTime","VisibilityAPI","clearInterval","gkx","isMWXacGroupThread","isMessengerPWA","justknobx","promiseDone","react","react-compiler-runtime","requireDeferred","setInterval","useGlobalEventListener","useMWChatOpenTabFromNewMessage","useMWFamilyCenterContext","useMWNavigation"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useEffect,m=c.useRef,p=r("requireDeferred")("MWDesktopNotifications").__setRef("useMWLSChatPopperUpper"),_=r("JSResourceForInteraction")("MWV2ChatTab.react").__setRef("useMWLSChatPopperUpper"),f=r("JSResourceForInteraction")("MWV2ChatTabRoot.react").__setRef("useMWLSChatPopperUpper"),g={contents:void 0};function h(e,t,n,a,i,l,c,d,m,g,h){h===void 0&&(h=o("MWLSChatTabPolicy").shouldMessageBeAllowed);var y=o("MWGetCurrentThreadIDForLSThread").get(a.threadKey,a.threadType,(s||(s=o("I64"))).equal(i.contactType,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE))||(s||(s=o("I64"))).equal(i.contactType,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactType").PAGE_PERSONA)));return h(n,a,i,d,m,function(){var u=r("gkx")("16508");u===!0?r("promiseDone")(f.load()):r("promiseDone")(_.load());var d=o("MercuryIDs").getThreadIDFromThreadFBID((s||(s=o("I64"))).to_string(a.threadKey));return o("MWChatMessagesOnChatTabLoadTracker").trackReceivedFor(a.threadKey),e(y,a,function(){if(c(n,a,i,l),o("VisibilityAPI").isVisibilityHidden()===!0){var e=r("isMessengerPWA")()&&r("justknobx")._("1465");e&&r("promiseDone")((async function(){var e=await p.load(),r=e.triggerLocalNotification;await r(t,n,g)})())}if(o("MWChatThreadPingCounter").getCount(d)<3){o("MWChatThreadPingCounter").incrementCount(d),o("MWLSChatPopperCommon").playChatTabSound(n);return}})})}function y(e){var t=e.actor,n=e.hasActiveMsgrFamilyCenterEnforcement,o=e.message,a=e.navigationApi,i=e.openTabFromNewMessage,l=e.shouldBeAllowed,s=e.storage,u=e.updateDocumentTitle;r("promiseDone")(window.Promise.all([s.tables.threads.get(o.threadKey),s.tables.contacts.get(o.senderId),s.tables.participants.get(o.threadKey,o.senderId)]),function(e){var c=e[0],d=e[1],m=e[2];if(c==null){r("FBLogger")("messenger_web_entrypoints").mustfix("Thread is null when receiving a new message");return}if(d!=null&&m!=null)return h(i,s,o,c,d,m,u,t,n,a,l)})}function C(e){var t=e.actor,n=e.hasActiveMsgrFamilyCenterEnforcement,o=e.message,a=e.navigationApi,i=e.openTabFromNewMessage,l=e.shouldBeAllowed,s=e.storage,u=e.updateDocumentTitle;r("promiseDone")(window.Promise.all([s.tables.threads.get(o.threadKey),s.tables.contacts.get(o.senderId),s.tables.participants.get(o.threadKey,o.senderId)]),function(e){var c=e[0],d=e[1],m=e[2];if(c!=null&&d!=null&&m!=null&&!r("isMWXacGroupThread")(c))return h(i,s,o,c,d,m,u,t,n,a,l)})}function b(e){var t=o("react-compiler-runtime").c(11),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==i?(l={withChatTabTracing:i},t[0]=i,t[1]=l):l=t[1];var u=r("useMWChatOpenTabFromNewMessage")("notificationInThreadReply",l),c=o("MWPActor.react").useActor(),p=o("MWLSChatPopperCommon").useUpdateDocumentTitle(n,c,g),_;t[2]===Symbol.for("react.memo_cache_sentinel")?(_=o("ServerTime").getMillis(),t[2]=_):_=t[2];var f=m(_),h=r("useMWNavigation")(),b=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),v=b.familyCenterData,S,R;t[3]!==c||t[4]!==v.hasActiveMsgrFamilyCenterEnforcement||t[5]!==h||t[6]!==u||t[7]!==n||t[8]!==p?(S=function(){return o("ReQL").fromTableAscending(n.tables.messages).subscribe(function(e,t){if(t.operation==="add"){var r=t.value;if((s||(s=o("I64"))).to_float(r.timestampMs)<=f.current)return;f.current=(s||(s=o("I64"))).to_float(r.timestampMs);var a=o("MWXacGating").isGroupsEnabled()?y:C;return a({actor:c,hasActiveMsgrFamilyCenterEnforcement:v.hasActiveMsgrFamilyCenterEnforcement,message:r,navigationApi:h,openTabFromNewMessage:u,storage:n,updateDocumentTitle:p})}})},R=[c,h,v.hasActiveMsgrFamilyCenterEnforcement,u,n,p],t[3]=c,t[4]=v.hasActiveMsgrFamilyCenterEnforcement,t[5]=h,t[6]=u,t[7]=n,t[8]=p,t[9]=S,t[10]=R):(S=t[9],R=t[10]),d(S,R)}function v(e){var t=o("react-compiler-runtime").c(10),n=e.storage,a=e.withChatTabTracing,i=a===void 0?!1:a,l;t[0]!==n||t[1]!==i?(l={storage:n,withChatTabTracing:i},t[0]=n,t[1]=i,t[2]=l):l=t[2],b(l);var s=m(),u;t[3]===Symbol.for("react.memo_cache_sentinel")?(u=function(){var e=s.current;if(e!=null){r("clearInterval")(e);return}},t[3]=u):u=t[3];var c=u,p;t[4]===Symbol.for("react.memo_cache_sentinel")?(p=function(){c(),s.current=r("setInterval")(S,6e5)},t[4]=p):p=t[4];var _=p,f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=function(){return o("MWChatThreadPingCounter").clear(),c()},t[5]=f):f=t[5];var g=f,h;t[6]===Symbol.for("react.memo_cache_sentinel")?(h={},t[6]=h):h=t[6],r("useGlobalEventListener")("blur",_,h);var y;t[7]===Symbol.for("react.memo_cache_sentinel")?(y={},t[7]=y):y=t[7],r("useGlobalEventListener")("focus",g,y);var C,v;t[8]===Symbol.for("react.memo_cache_sentinel")?(C=function(){return(function(){return c()})},v=[],t[8]=C,t[9]=v):(C=t[8],v=t[9]),d(C,v)}function S(){return o("MWChatThreadPingCounter").clear()}l.default=v}),98);
__d("useMWLSGroupMembershipMenuQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="10069255396431304"}),null);
__d("useMWNavigateToThreadFromGroupMembership",["CometRelay","FBLogger","LSIntEnum","MAWVerifyThreadCutover","MWPBumpEntityKey","ReQL","cr:874","gkx","promiseDone","react-compiler-runtime","useMWNavigation","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(e,t,n){if(r("gkx")("8556")){var a=await o("MAWVerifyThreadCutover").verifyContactCutoverOrDefaultE2EEWhenReady(Promise.resolve(e),t,n);return a!=null}var i=await o("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(e),n);return i}function c(){var t=o("react-compiler-runtime").c(5),a=(s||(s=r("useReStore")))(),i=r("useMWNavigation")(),l=n("cr:874")(),c=o("CometRelay").useRelayEnvironment(),d;return t[0]!==l||t[1]!==a||t[2]!==c||t[3]!==i?(d=function(n){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw.infobar","chat_members_overflow_message"),r("promiseDone")(u(a,c,n),function(t){if(t)r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(n)).then(function(e){if(e!=null&&l!=null)return l([e],[]);r("FBLogger")("Unable to fetch contact","maw_threads")}));else return i.openTabOrInbox({clientThreadKey:void 0,threadKey:n,threadType:(e||(e=o("LSIntEnum"))).ofNumber(1)},"groupMembers")})},t[0]=l,t[1]=a,t[2]=c,t[3]=i,t[4]=d):d=t[4],d}l.default=c}),98);/*FB_PKG_DELIM*/
__d("getVendorPrefixedName",["invariant","ExecutionEnvironment","UserAgent","camelize"],(function(t,n,r,o,a,i,l,s){var e,u={},c=["Webkit","ms","Moz","O"],d=new RegExp("^("+c.join("|")+")"),m=(e||(e=r("ExecutionEnvironment"))).canUseDOM?document.createElement("div").style:{};function p(e){for(var t=0;t<c.length;t++){var n=c[t]+e;if(n in m)return n}return null}function _(e){switch(e){case"lineClamp":return r("UserAgent").isEngine_DEPRECATED_DANGEROUS("WebKit >= 315.14.2")||r("UserAgent").isEngine("Blink")?"WebkitLineClamp":null;default:return null}}function f(t){var n=r("camelize")(t);if(u[n]===void 0){var o=n.charAt(0).toUpperCase()+n.slice(1);d.test(o)&&s(0,957,t),(e||(e=r("ExecutionEnvironment"))).canUseDOM?u[n]=n in m?n:p(o):u[n]=_(n)}return u[n]}l.default=f}),98);
__d("BrowserSupportCore",["getVendorPrefixedName"],(function(t,n,r,o,a,i){"use strict";var e={hasCSSAnimations:function(){return!!n("getVendorPrefixedName")("animationName")},hasCSSTransforms:function(){return!!n("getVendorPrefixedName")("transform")},hasCSS3DTransforms:function(){return!!n("getVendorPrefixedName")("perspective")},hasCSSTransitions:function(){return!!n("getVendorPrefixedName")("transition")}},l=e;i.default=l}),66);
__d("BrowserSupport",["BrowserSupportCore","ExecutionEnvironment","UserAgent_DEPRECATED","getVendorPrefixedName","memoize"],(function(t,n,r,o,a,i,l){var e,s,u,c=null;function d(){return(u||(u=r("ExecutionEnvironment"))).canUseDOM?(c||(c=document.createElement("div")),c):null}var m=function(t){return r("memoize")(function(){var e=d();return e?t(e):!1})},p=m(function(e){return e.style.cssText="position:-moz-sticky;position:-webkit-sticky;position:-o-sticky;position:-ms-sticky;position:sticky;",/sticky/.test(e.style.position)}),_=m(function(e){return"scrollSnapType"in e.style||"webkitScrollSnapType"in e.style||"msScrollSnapType"in e.style}),f=m(function(e){return"scrollBehavior"in e.style}),g=m(function(e){return"pointerEvents"in e.style?(e.style.cssText="pointer-events:auto",e.style.pointerEvents==="auto"):!1}),h=(e=r("memoize"))(function(){return!(o("UserAgent_DEPRECATED").webkit()&&!o("UserAgent_DEPRECATED").chrome()&&o("UserAgent_DEPRECATED").windows())&&"FileList"in window&&"FormData"in window}),y=e(function(){return!!t.blob}),C=e(function(){return(u||(u=r("ExecutionEnvironment"))).canUseDOM&&document.createElementNS&&document.createElementNS("http://www.w3.org/2000/svg","foreignObject").toString().includes("SVGForeignObject")}),b=e(function(){return!!window.MutationObserver}),v=e(function(){var e={transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd"},t=r("getVendorPrefixedName")("transition");return e[t]||null}),S=function(){return!!window.CanvasRenderingContext2D};l.hasCSSAnimations=(s=r("BrowserSupportCore")).hasCSSAnimations,l.hasCSSTransforms=s.hasCSSTransforms,l.hasCSS3DTransforms=s.hasCSS3DTransforms,l.hasCSSTransitions=s.hasCSSTransitions,l.hasPositionSticky=p,l.hasScrollSnapPoints=_,l.hasScrollBehavior=f,l.hasPointerEvents=g,l.hasFileAPI=h,l.hasBlobFactory=y,l.hasSVGForeignObject=C,l.hasMutationObserver=b,l.getTransitionEndEvent=v,l.hasCanvasRenderingContext2D=S}),98);
__d("DOMControl",["$","DataStore"],(function(t,n,r,o,a,i){var e=(function(){"use strict";function e(e){this.root=n("$").fromIDOrElement(e),this.updating=!1,n("DataStore").set(e,"DOMControl",this)}var t=e.prototype;return t.getRoot=function(){return this.root},t.beginUpdate=function(){return this.updating?!1:(this.updating=!0,!0)},t.endUpdate=function(){this.updating=!1},t.update=function(t){if(!this.beginUpdate())return this;this.onupdate(t),this.endUpdate()},t.onupdate=function(t){},e.getInstance=function(t){return n("DataStore").get(t,"DOMControl")},e})();a.exports=e}),null);
__d("Input",["CSS","DOMControl","DOMQuery"],(function(t,n,r,o,a,i,l){function e(e){return!/\S/.test(e||"")}function s(t){return e(t.value)}function u(e){return s(e)?"":e.value}function c(e){return e.value}function d(e,t){e.value=t||"";var n=r("DOMControl").getInstance(e);n&&n.resetHeight&&n.resetHeight()}function m(e,t){t||(t=""),e.setAttribute("aria-label",t),e.setAttribute("placeholder",t)}function p(e){e.value="",e.style.height=""}function _(e,t){o("CSS").conditionClass(e,"enter_submit",t)}function f(e){return o("CSS").hasClass(e,"enter_submit")}function g(e,t){t>0?e.setAttribute("maxlength",t.toString()):e.removeAttribute("maxlength")}l.isWhiteSpaceOnly=e,l.isEmpty=s,l.getValue=u,l.getValueRaw=c,l.setValue=d,l.setPlaceholder=m,l.reset=p,l.setSubmitOnEnter=_,l.getSubmitOnEnter=f,l.setMaxLength=g}),98);
__d("Form",["DOM","DOMQuery","DTSG","DTSGUtils","DataStore","FBLogger","Input","LSD","PHPQuerySerializer","Random","SprinkleConfig","URI","getElementPosition","isFacebookURI","isNode"],(function(t,n,r,o,a,i,l){var e,s,u="FileList"in window,c="FormData"in window;function d(t){var n={};return(e||(e=r("PHPQuerySerializer"))).serialize(t).split("&").forEach(function(e){if(e){var t=/^([^=]*)(?:=(.*))?$/.exec(e),o=(s||(s=r("URI"))).decodeComponent(t[1]),a=t[2]!==void 0,i=a?(s||(s=r("URI"))).decodeComponent(t[2]):null;n[o]=i}}),n}var m={getInputs:function(t){return t===void 0&&(t=document),[].concat(o("DOMQuery").scry(t,"input"),o("DOMQuery").scry(t,"select"),o("DOMQuery").scry(t,"textarea"),o("DOMQuery").scry(t,"button"))},getInputsByName:function(t){var e={};return m.getInputs(t).forEach(function(t){var n=e[t.name];e[t.name]=n===void 0?t:[t].concat(n)}),e},getSelectValue:function(t){return t.options[t.selectedIndex].value},setSelectValue:function(t,n){for(var e=0;e<t.options.length;++e)if(t.options[e].value===n){t.selectedIndex=e;break}},getRadioValue:function(t){for(var e=0;e<t.length;e++)if(t[e].checked)return t[e].value;return null},getElements:function(t){return t.tagName==="FORM"&&t.elements!==t?Array.from(t.elements):m.getInputs(t)},getAttribute:function(t,n){return(t.getAttributeNode(n)||{}).value||null},setDisabled:function(t,n){m.getElements(t).forEach(function(e){if(e.disabled!==void 0){var t=r("DataStore").get(e,"origDisabledState");n?(t===void 0&&r("DataStore").set(e,"origDisabledState",e.disabled),e.disabled=n):t===!1&&(e.disabled=!1)}})},forEachValue:function(t,n,r){m.getElements(t).forEach(function(e){if(!(!e.name||e.disabled)&&e.type!=="submit"&&!(e.type==="reset"||e.type==="button"||e.type==="image")&&!((e.type==="radio"||e.type==="checkbox")&&!e.checked)){if(e.nodeName==="SELECT"){for(var t=0,n=e.options.length;t<n;t++){var a=e.options[t];a.selected&&r("select",e.name,a.value)}return}if(e.type==="file"){if(u)for(var i=e.files,l=0;l<i.length;l++)r("file",e.name,i.item(l));return}r(e.type,e.name,o("Input").getValue(e))}}),n&&n.name&&n.type==="submit"&&o("DOMQuery").contains(t,n)&&o("DOMQuery").isNodeOfType(n,["input","button"])&&r("submit",n.name,n.value)},createFormData:function(t,n){if(!c)return null;var e=new FormData;if(t)if(r("isNode")(t))m.forEachValue(t,n,function(t,n,r){e.append(n,r)});else{var o=d(t);for(var a in o)o[a]==null?e.append(a,""):e.append(a,o[a])}return e},serialize:function(t,n){var e={};return m.forEachValue(t,n,function(t,n,r){t!=="file"&&m._serializeHelper(e,n,r)}),m._serializeFix(e)},_serializeHelper:function(t,n,r){var e=Object.prototype.hasOwnProperty,o=/([^\]]+)\[([^\]]*)\](.*)/.exec(n);if(o){if(!t[o[1]]||!e.call(t,o[1])){var a;if(t[o[1]]=a={},t[o[1]]!==a)return}var i=0;if(o[2]==="")for(;t[o[1]][i]!==void 0;)i++;else i=o[2];o[3]===""?t[o[1]][i]=r:m._serializeHelper(t[o[1]],i.concat(o[3]),r)}else t[n]=r},_serializeFix:function(t){for(var e in t)t[e]instanceof Object&&(t[e]=m._serializeFix(t[e]));var n=Object.keys(t);if(n.length===0||n.some(isNaN))return t;n.sort(function(e,t){return e-t});var r=0,o=n.every(function(e){return+e===r++});return o?n.map(function(e){return t[e]}):t},post:function(t,n,a,i){i===void 0&&(i=!0);var e=new(s||(s=r("URI")))(t),l=document.createElement("form");l.action=e.toString(),l.method="POST",l.style.display="none";var u=!r("isFacebookURI")(e);if(a){if(u&&(l.rel="noreferrer",a==="_blank")){a=btoa(r("Random").uint32());var c=window.open("about:blank",a);c!==void 0&&(c.opener=null)}l.target=a}if(i&&!u&&e.getSubdomain()!=="apps"){var d=o("DTSG").getToken();d&&(n.fb_dtsg=d,r("SprinkleConfig").param_name&&(n[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(d))),r("LSD").token&&(n.lsd=r("LSD").token,r("SprinkleConfig").param_name&&!d&&(n[r("SprinkleConfig").param_name]=r("DTSGUtils").getNumericValue(r("LSD").token)))}return m.createHiddenInputs(n,l),o("DOMQuery").getRootElement().appendChild(l),l.submit(),!1},post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES:function(t,n,r){m.post(t,n,r)},createHiddenInputs:function(t,n,o,a){a===void 0&&(a=!1),o=o||{};var e=d(t);for(var i in e)if(e[i]!==null)if(o[i]&&a)o[i].value=e[i];else{var l=r("DOM").create("input",{type:"hidden",name:i,value:e[i]});o[i]=l,n.appendChild(l)}return o},getFirstElement:function(t,n){n===void 0&&(n=['input[type="text"]',"textarea",'input[type="password"]','input[type="button"]','input[type="submit"]']);for(var e=[],a=0;a<n.length;a++){e=o("DOMQuery").scry(t,n[a]);for(var i=0;i<e.length;i++){var l=e[i];try{var s=r("getElementPosition")(l);if(s.y>0&&s.x>0)return l}catch(e){}}}return null},focusFirst:function(t){var e=m.getFirstElement(t);return e?(e.focus(),!0):!1}};i.exports=m}),34);
__d("AsyncUploadBase",["ArbiterMixin","AsyncRequest","AsyncResponse","BrowserSupport","Form","forEachObject","mixin","removeFromArray"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(t){var n;return n=e.call(this)||this,n._allowCrossOrigin=!1,n._allowCrossPageTransition=!1,n._customHeader={},n._inFlight=!1,n._limit=10,n._option={},n._preventDefaultErrorHandler=!1,n._suspended=!1,t&&n.setURI(t),n.setNetworkErrorRetryLimit(0),n}babelHelpers.inheritsLoose(t,e),t.parseFiles=function(t){var e={};return r("forEachObject")(t,function(t,n){if(Array.isArray(t))e[n]=t;else if(e[n]=[],t instanceof window.FileList)for(var r=0;r<t.length;r++)e[n].push(t.item(r));else(t instanceof window.File||t instanceof window.Blob)&&e[n].push(t)}),e};var n=t.prototype;return n.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=!!t,this},n.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this},n.setCustomHttpHeader=function(t,n){return this._customHeader[t]=n,this},n.setData=function(t){return this._data=t,this},n.setOption=function(t,n){return this._option[t]=n,this},n.setPreventDefaultErrorHandler=function(t){return this._preventDefaultErrorHandler=t,this},n.setLimit=function(t){return this._limit=t,this},n.setNetworkErrorRetryLimit=function(t){return this._retryLimit=t,this},n.setPreprocessHandler=function(t){return this._preprocessHandler=t,this},n.setRelativeTo=function(t){return this._relativeTo=t,this},n.setStatusElement=function(t){return this._statusElement=t,this},n.setURI=function(t){return this._uri=t,this},n.suspend=function(){return this._suspended=!0,this},n.resume=function(){return this._suspended=!1,this._processQueue(),this},n.isUploading=function(){return this._inFlight},n._createFileUpload=function(t,n,r){return new s(t,n,r)},n._processQueue=function(){if(!this._suspended)for(;this._pending.length<this._limit&&this._waiting.length;){var e=this._waiting.shift(),t=this._preprocessHandler;t?t(e,this._processUpload.bind(this)):this._processUpload(e),this._pending.push(e)}},n._processUpload=function(t){var e=o("Form").createFormData(t.getData()||this._data);if(t.getFile()){e.append(t.getName(),t.getFile());var n=t.getFile().uploadID;n&&e.append("upload_id",n),t.getAdditionalData().forEach(function(t,n){return e.append(n,t)})}var a=new(r("AsyncRequest"))().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(e).setStatusElement(this._statusElement).setHandler(this._success.bind(this,t)).setErrorHandler(this._failure.bind(this,t)).setUploadProgressHandler(this._progress.bind(this,t)).setInitialHandler(this._initial.bind(this,t));for(var i in this._option)a.setOption(i,this._option[i]);for(var l in this._customHeader)a.setRequestHeader(l,this._customHeader[l]);this._relativeTo&&a.setRelativeTo(this._relativeTo),a.send(),t.setAsyncRequest(a),this._inFlight=!0,t.getRetryCount()||this.inform("start",t)},n._abort=function(t){this._pending.indexOf(t)!==-1&&(r("removeFromArray")(this._pending,t),this._processQueue()),r("removeFromArray")(this._waiting,t),t.abort()},n._initial=function(t){t.isAborted()||this.inform("initial",t)},n._success=function(t,n){if(t.isAborted()){this.inform("success_after_abort",n);return}this._complete(t),this.inform("success",t.handleSuccess(n)),this._processQueue()},n._retryUpload=function(t){t.increaseRetryCount(),this._processUpload(t)},n._failure=function(t,n){if(!t.isAborted()){if(n.error===1004&&t.getRetryCount()<(this._retryLimit||0))return this._retryUpload(t);this._complete(t),this.inform("failure",t.handleFailure(n))!==!1&&(this._preventDefaultErrorHandler||r("AsyncResponse").defaultErrorHandler(n)),this._processQueue()}},n._progress=function(t,n){t.isAborted()||this.inform("progress",t.handleProgress(n))},n._complete=function(t){r("removeFromArray")(this._pending,t),this._pending.length||(this._inFlight=!1)},t.isSupported=function(){return o("BrowserSupport").hasFileAPI()},t})(r("mixin")(r("ArbiterMixin"))),s=(function(){function e(e,t,n){this._additionalData=new Map,this._success=null,this._response=null,this._progressEvent=null,this._request=null,this._numRetries=0,this._aborted=!1,this._name=e,this._file=t,this._data=n}var t=e.prototype;return t.getName=function(){return this._name},t.getFile=function(){return this._file},t.setFile=function(t){this._file=t},t.getData=function(){return this._data},t.getAdditionalData=function(){return this._additionalData},t.isComplete=function(){return this._success!==null},t.isSuccess=function(){return this._success===!0},t.getResponse=function(){return this._response},t.getProgressEvent=function(){return this._progressEvent},t.setAsyncRequest=function(t){return this._request=t,this},t.increaseRetryCount=function(){return this._numRetries++,this},t.getRetryCount=function(){return this._numRetries},t.isWaiting=function(){return!this._request},t.isAborted=function(){return this._aborted},t.abort=function(){this._request=null,this._aborted=!0},t.handleSuccess=function(t){return this._success=!0,this._response=t,this._progressEvent=null,this},t.handleFailure=function(t){return this._success=!1,this._response=t,this._progressEvent=null,this},t.handleProgress=function(t){return this._progressEvent=t,this},e})();l.default=e}),98);
__d("AsyncUploadRequest",["AsyncUploadBase"],(function(t,n,r,o,a,i,l){var e=(function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=e.call.apply(e,[this].concat(r))||this,t._files=null,t._uploads=[],t._fileLessUpload=null,babelHelpers.assertThisInitialized(t)||babelHelpers.assertThisInitialized(t)}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.setFiles=function(t){return this._files=r("AsyncUploadBase").parseFiles(t),this},n.setAlwaysReturnResponse=function(t){this._shouldAlwaysReturnResponse=t},n.abort=function(){var e=this;this._uploads.forEach(function(t){return e._abort(t)})},n.send=function(){var e=this;if(!this._inFlight){this._inFlight=!0,this._uploads=[];for(var t in this._files)this._files[t].forEach(function(n){e._uploads.push(e._createFileUpload(t,n))});this._waiting=this._uploads.slice(0),this._pending=[],this._uploads.length?this._processQueue():(this._fileLessUpload=this._createFileUpload(null,null),this._processUpload(this._fileLessUpload))}},n._processQueue=function(){if(e.prototype._processQueue.call(this),!this._pending.length&&!this._waiting.length){var t=this._uploads,n=this._shouldAlwaysReturnResponse?this._fileLessUpload!=null?{response:this._fileLessUpload.getResponse(),uploads:t}:{response:t[0].getResponse(),uploads:t}:t;this.inform("complete",n)}},t.isSupported=function(){return r("AsyncUploadBase").isSupported()},t})(r("AsyncUploadBase"));l.default=e}),98);
__d("BehaviorsMixin",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){this.$1=e,this.$2=!1}var t=e.prototype;return t.enable=function(){this.$2||(this.$2=!0,this.$1.enable())},t.disable=function(){this.$2&&(this.$2=!1,this.$1.disable())},e})(),l=1;function s(e){return e.__BEHAVIOR_ID||(e.__BEHAVIOR_ID=l++),e.__BEHAVIOR_ID}var u={enableBehavior:function(n){this._behaviors||(this._behaviors={});var t=s(n);return this._behaviors[t]||(this._behaviors[t]=new e(new n(this))),this._behaviors[t].enable(),this},disableBehavior:function(t){if(this._behaviors){var e=s(t);this._behaviors[e]&&this._behaviors[e].disable()}return this},enableBehaviors:function(t){return t.forEach(this.enableBehavior,this),this},destroyBehaviors:function(){if(this._behaviors){for(var e in this._behaviors)this._behaviors[e].disable();this._behaviors={}}},hasBehavior:function(t){return this._behaviors&&s(t)in this._behaviors}},c=u;i.default=c}),66);
__d("ChatGeminiDisplayContextProvider.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useMemo,m=s.createContext({displaySurface:"inbox"});function p(e){var t=o("react-compiler-runtime").c(7),n=e.children,r=e.displaySurface,a=e.sideChatMainMessage,i=e.sideChatMainMessageId,l;t[0]!==r||t[1]!==a||t[2]!==i?(l={displaySurface:r,sideChatMainMessage:a,sideChatMainMessageId:i},t[0]=r,t[1]=a,t[2]=i,t[3]=l):l=t[3];var u=l,c;return t[4]!==n||t[5]!==u?(c=s.jsx(m.Provider,{value:u,children:n}),t[4]=n,t[5]=u,t[6]=c):c=t[6],c}function _(){return c(m)}l.ChatGeminiDisplayContextProvider=p,l.useChatGeminiDisplayContext=_}),98);
__d("FileForm",["ArbiterMixin","AsyncRequest","AsyncResponse","AsyncUploadRequest","BehaviorsMixin","DOMQuery","DataStore","Event","FBLogger","Form","Parent","isElementNode","mixin","setTimeout","shield"],(function(t,n,r,o,a,i,l){function e(e){var t={},n=o("DOMQuery").scry(e,'input[type="file"]');return n.forEach(function(e){t[e.name]=e.files}),t}function s(e){var t=o("DOMQuery").scry(e,'input[type="file"]');t.forEach(function(e){e.files=null})}var u=(function(t){function n(e,n,a){var i;if(i=t.call(this)||this,i._allowCrossOrigin=!1,i._allowCrossPageTransition=!1,i._uploadInParallel=!1,i._handleSubmit=function(e){if(!(e.isDefaultPrevented()||e.getTarget()!==i._form)){if(i.inform("submit")===!1){e.prevent();return}i.submit(e)}},i._click=function(e){for(var t=e.getTarget();r("isElementNode")(t);){if(t.type==="submit"){i._clickTarget=t,r("setTimeout")(i._unclick,0);break}t=t.parentNode}},i._unclick=function(){i._clickTarget=null},i.initial=function(e){return i.inform("initial",{upload:e})},e.getAttribute("rel")==="async")throw r("FBLogger")("FileForm","primer-only").mustfixThrow("FileForm cannot be used with Primer forms.");if((e.getAttribute("method")||"").toUpperCase()!=="POST")throw r("FBLogger")("FileForm","post-only").mustfixThrow("FileForm must be used with POST forms.");return i._form=e,i._previousEncoding=i._form.enctype,i._form.enctype=i._form.encoding="multipart/form-data",i._files=null,i._customHeader={},n&&i.enableBehaviors(n),i._options=a||{},i.setAllowCrossOrigin(i._options.allowCrossOrigin),i.setAllowCrossPageTransition(i._options.allowCrossPageTransition),i.setUploadInParallel(i._options.uploadInParallel),i.setConcurrentLimit(i._options.concurrentLimit),i.setPreprocessHandler(i._options.preprocessHandler),i.setNetworkErrorRetryLimit(i._options.networkErrorRetryLimit),i._listeners=[r("Event").listen(document.documentElement,"submit",i._handleSubmit),r("Event").listen(i._form,"click",i._click)],o("DataStore").set(i._form,"FileForm",i),i}babelHelpers.inheritsLoose(n,t);var a=n.prototype;return a.getRoot=function(){return this._form},a.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=!!t,this},a.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this},a.setUploadInParallel=function(t){return this._uploadInParallel=!!t,this},a.setConcurrentLimit=function(t){return this._concurrentLimit=t,this},a.setCustomHttpHeader=function(t,n){return this._customHeader[t]=n,this},a.setPreprocessHandler=function(t){return this._preprocessHandler=t,this},a.setNetworkErrorRetryLimit=function(t){return this._retryLimit=t,this},a.setFiles=function(t){return this._files=t,this},a.submit=function(n){var t=this,a;if(this._uploadInParallel&&r("AsyncUploadRequest").isSupported()){a=new(r("AsyncUploadRequest"))().setPreprocessHandler(this._preprocessHandler).setData(o("Form").serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);for(var i in this._customHeader)a.setCustomHttpHeader(i,this._customHeader[i]);this._concurrentLimit&&a.setLimit(this._concurrentLimit),this._files?a.setFiles(this._files):a.setFiles(e(this._form));var l=[a.subscribe("progress",function(e,n){t.progress(n,n.getProgressEvent())}),a.subscribe("initial",function(e,n){t.initial(n)}),a.subscribe("success",function(e,n){t.success(n,n.getResponse())}),a.subscribe("start",function(e,n){t.inform("start",{upload:n})}),a.subscribe("failure",function(e,n){return t.failure(n,n.getResponse()),!1}),a.subscribe("complete",function(){for(;l.length;)l.pop().unsubscribe()})]}else{var s,u=this._files;if(u){s=o("Form").createFormData(o("Form").serialize(this._form,this._clickTarget));var c=r("AsyncUploadRequest").parseFiles(u),d=function(t){var e=c[t];e.length===1?s.append(t,e[0]):(t+="[]",e.forEach(function(e){s.append(t,e)}))};for(var m in c)d(m)}else s=o("Form").createFormData(this._form,this._clickTarget);a=new(r("AsyncRequest"))().setRawData(s).setHandler(function(e){return t.success(null,e)}).setErrorHandler(function(e){return t.failure(null,e)}).setUploadProgressHandler(function(e){return t.progress(null,e)}).setInitialHandler(r("shield")(this.initial,this,null)),this.inform("start",{upload:null})}a.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send(),this._request=a,n&&n.prevent()},a.success=function(t,n){var e={response:n,upload:t};this.inform("success",e)!==!1&&r("Event").fire(this._form,"success",e),this._cleanup()},a.failure=function(t,n){var e={response:n,upload:t};this.inform("failure",e)!==!1&&r("Event").fire(this._form,"error",e)!==!1&&r("AsyncResponse").defaultErrorHandler(n),this._cleanup()},a.progress=function(t,n){this.inform("progress",{event:n,upload:t})},a.abort=function(){this._request&&(this._request.abort(),this._cleanup())},a.clear=function(){s(this._form)},a.destroy=function(){for(this._cleanup();this._listeners&&this._listeners.length;)this._listeners.pop().remove();this._listeners=null,this._form.enctype=this._form.encoding=this._previousEncoding,o("DataStore").remove(this._form,"FileForm")},a._cleanup=function(){this._request=null},a._getStatusElement=function(){return o("Parent").byClass(this._form,"stat_elem")||this._form},n.getInstance=function(t){return o("DataStore").get(t,"FileForm")},n})(r("mixin")(r("ArbiterMixin"),r("BehaviorsMixin")));Object.assign(u,{EVENTS:["start","submit","initial","progress","success","failure"]}),l.default=u}),98);
__d("FileInputUploader",["ArbiterMixin","DOM","DTSG","FileForm","Form","mixin"],(function(t,n,r,o,a,i){var e=(function(e){"use strict";function t(t){var n;return n=e.call(this)||this,n._inputElem=t,n._data={},n}babelHelpers.inheritsLoose(t,e);var r=t.prototype;return r.setInput=function(t){return this._inputElem=t,this},r.setURI=function(t){return this._uri=t,this},r.setData=function(t){return this._data=t,this},r.setPreprocessHandler=function(t){return this._preprocessHandler=t,this},r.setNetworkErrorRetryLimit=function(t){return this._retryLimit=t,this},r.setFiles=function(t){return this._files=t,this},r.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=!!t,this},r.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this},r.setUploadInParallel=function(t){return this._uploadInParallel=!!t,this},r.setConcurrentLimit=function(t){return this._concurrentLimit=t,this},r.abort=function(){this._fileForm&&(this._fileForm.abort(),this._destroyFileForm())},r.send=function(){this._createForm();var e=this._inputElem&&!this._inputElem.parentElement;if(!e&&this._inputElem){var t=this._inputElem.cloneNode(!1);n("DOM").replace(this._inputElem,t)}this._inputElem&&n("DOM").appendContent(this._formElem,this._inputElem),n("DOM").appendContent(document.body,this._formElem),this._fileForm.submit(),!e&&this._inputElem&&n("DOM").replace(t,this._inputElem),this._removeFormEl()},r._onFileFormEvent=function(t,n){return(t==="success"||t==="failure")&&this._destroyFileForm(),this.inform(t,n)},r._createForm=function(){var e,t,r;this._destroyFileForm(),this._formElem=n("DOM").create("form",{action:this._uri,method:"post"}),this._fileForm=new(n("FileForm"))(this._formElem,null,{allowCrossOrigin:!!this._allowCrossOrigin,allowCrossPageTransition:!!this._allowCrossPageTransition,uploadInParallel:!!this._uploadInParallel,concurrentLimit:(e=this._concurrentLimit)!=null?e:0,preprocessHandler:(t=this._preprocessHandler)!=null?t:null,networkErrorRetryLimit:(r=this._retryLimit)!=null?r:0}),this._files&&this._fileForm.setFiles(this._files),this._fileForm.subscribe(n("FileForm").EVENTS,this._onFileFormEvent.bind(this)),n("Form").createHiddenInputs(babelHelpers.extends({fb_dtsg:n("DTSG").getToken()},this._data),this._formElem)},r._removeFormEl=function(){n("DOM").remove(this._formElem),this._formElem=null},r._destroyFileForm=function(){this._fileForm&&(this._fileForm.destroy(),this._fileForm=null)},t})(n("mixin")(n("ArbiterMixin")));a.exports=e}),null);
__d("ImageExif",["exif-js","vulture"],(function(t,n,r,o,a,i){n("exif-js").enableXmp();function e(e){n("vulture")("jfJj0OxtaQS23dtNAa6Ux_EwezA=");var t=function(r){return n("vulture")("8F4iLDRkom8J18_Npp9oMWLeDL0="),e.charCodeAt(r)&255};this.getByteAt=t,this.getShortAt=function(e,t){n("vulture")("TeU6NItY5ANxAZydB6TwOqiL6bY=");var r=this.getSShortAt(e,t);return r>0?r:r+65536},this.getSShortAt=function(e,r){n("vulture")("S4t94uk7tzwYl5k8oJz00fs8vl0=");var o=t(e),a=t(e+1);return r?(o<<8)+a:(a<<8)+o},this.getLongAt=function(e,t){n("vulture")("2Q-5gBtdRhPNNCFecrVNr8DZJMk=");var r=this.getSLongAt(e,t);return r>0?r:r+4294967296},this.getSLongAt=function(e,r){n("vulture")("EoPgIRKY39sdRScK6YFgkDLj7Sw=");var o=t(e),a=t(e+1),i=t(e+2),l=t(e+3);return r?(((o<<8)+a<<8)+i<<8)+l:(((l<<8)+i<<8)+a<<8)+o},this.getStringAt=function(t,r){return n("vulture")("woG_qxb_3fmLzMCtRNbGb-1tmBw="),e.substr(t,r)},this.getLength=function(){return n("vulture")("5DiADBCRPZk7Ra8zshGxcjYCbzU="),e.length}}var l={readFromFile:function(t,n){var e=this,r=new FileReader;r.addEventListener("load",function(t){var r=t.target.result,o=r instanceof ArrayBuffer?e.readFromArrayBuffer(r):e.readFromBinaryString(r);n(o)},!1),window.DataView?r.readAsArrayBuffer(t):r.readAsBinaryString(t)},readFromBinaryString:function(r){return n("vulture")("b8G7o959xanJZN7AwUHW_lILvuo="),n("exif-js").readFromBinaryFile(new e(r))},readFromArrayBuffer:function(t){return n("exif-js").readFromBinaryFile(t)}};a.exports=l}),null);
__d("StringEncoding",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){for(var n=new Uint8Array(e),r=0,o=[];r<n.length;){var a=n[r],i=void 0;if(a>>7===0)i=1;else if(a>>5===6)a&=31,i=2;else if(a>>4===14)a&=15,i=3;else if(a>>3===30)a&=7,i=4;else if(a>>2===62)a&=3,i=5;else if(a>>1===126)a&=1,i=6;else throw new Error("Cannot decode as UTF-8 - unrecognised codepoint header");if(r+i>n.length)throw new Error("Cannot decode as UTF-8 - incomplete codepoint");for(var l=1;l<i;l++){var s=n[r+l];if(s>>6!==2)throw new Error("Cannot decode as UTF-8 - unrecognised codepoint subsequent byte");s&=63,a<<=6,a|=s}if(a>1114111)throw new Error("Cannot decode as UTF-8 - JavaScript doesn't support codepoints over 0x10FFFF");if(!a)switch(t){case"error":throw new Error("Cannot decode as UTF-8 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,o);case"include":break}o.push(a),r+=i}return String.fromCodePoint.apply(String,o)}function l(e){return(e&255)<<8|e>>8}function s(e,t){if(e.byteLength%2!==0)throw new Error("Cannot decode as UTF-16 - data length mod 2 != 0");var n=new Uint16Array(e),r=0,o=[],a=!1;for(n[0]===65279?++r:n[0]==65534&&(++r,a=!0);r<n.length;){var i=n[r];a&&(i=l(i));var s=i;if(i>55295&&i<57344){if((i&64512)!==55296)throw new Error("Cannot decode as UTF-16 - incorrect signature for high surrogate");if(r+1>=n.length)throw new Error("Cannot decode as UTF-16 - incomplete codepoint");++r;var u=n[r];if(a&&(u=l(u)),(u&64512)!==56320)throw new Error("Cannot decode as UTF-16 - incorrect signature for low surrogate");s=((i&1023)<<10|u&1023)+65536}if(!s)switch(t){case"error":throw new Error("Cannot decode as UTF-16 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,o);case"include":break}o.push(s),++r}return String.fromCodePoint.apply(String,o)}function u(e){return(e&255)<<24|(e&65280)<<8|(e&255<<16)>>8|e>>>24}function c(e,t){if(e.byteLength%4!==0)throw new Error("Cannot decode as UTF-32 - data length mod 4 != 0");var n=new Uint32Array(e),r=0,o=[],a=!1;for(n[0]===65279?++r:n[0]==4294836224&&(++r,a=!0);r<n.length;){var i=n[r];if(a&&(i=u(i)),i&2147483648)throw new Error("Cannot decode as UTF-32 - invalid codepoint");if(i>1114111)throw new Error("Cannot decode as UTF-32 - JavaScript doesn't support codepoints over 0x10FFFF");if(!i)switch(t){case"error":throw new Error("Cannot decode as UTF-32 - contains a null and we're not allowing them");case"ignore":continue;case"truncate":return String.fromCodePoint.apply(String,o);case"include":break}o.push(i),++r}return String.fromCodePoint.apply(String,o)}var d={"utf-8":e,"utf-16":s,"utf-32":c},m=(function(){function e(e,t){e?this.$1=e:this.$1=["utf-8","utf-16","utf-32"],t||(t="error"),this.$2=t;for(var n of this.$1)this.$3(n)}var t=e.prototype;return t.getPrecedence=function(){return this.$1},t.decode=function(t){var e=[];for(var n of this.$1){var r=this.$3(n);try{return r(t,this.$2)}catch(t){e.push(t)}}throw new Error(e.join(", "))},t.$3=function(t){var e=d[t];if(!e)throw new Error("Unknown encoding "+t);return e},e})();i.Decoder=m}),66);
__d("ImageMetadata",["ImageExif","StringEncoding","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$4="",this.$6=e,this.$7=new Uint8Array(e),this.$8()}var n=e.prototype;return n.$8=function(){for(var e=0;e<this.$7.length;){if(e=this.$9(e),e===-1)return;var t=this.$7[e+1],n=s[t];if(!n)return;var r=n.length;if(r===void 0&&(r=this.$7[e+2]*256+this.$7[e+3]),this.$10(e,r,n),n.name==="SOS")return;e+=2+r}},n.$10=function(t,n,r){switch(r.name){case"APP1":this.$11(t+4,u)?(this.$1||(this.$1=t,this.$2=n),this.$12(t+4+u.length,n-2-u.length)):this.$11(t+4,c)?(this.$1=t,this.$2=n,this.$13(t+4+c.length,n-2-c.length)):this.$11(t+4,d)&&this.$14(t+4+d.length,n-2-d.length);break;case"SOF0":case"SOF1":case"SOF2":case"SOF3":case"SOF5":case"SOF6":case"SOF7":case"JPG":case"SOF9":case"SOF10":case"SOF11":case"SOF13":case"SOF14":case"SOF15":this.$15(t+4,n-2);break}},n.$15=function(t,n){var e=this.$7[t+3]*256+this.$7[t+4],r=this.$7[t+1]*256+this.$7[t+2];e>0&&r>0&&(this.$5={x:e,y:r})},n.$12=function(t,n){var e=console.log;try{console.log=r("emptyFunction");var a=o("ImageExif").readFromArrayBuffer(this.$6)||{}}finally{console.log=e}var i={};for(var l in a){var s=a[l];typeof s=="string"&&(s=s.trim()),i[l.trim()]=s}this.$3=i},n.$13=function(t,n){var e=new(o("StringEncoding")).Decoder(null,"truncate");try{var r=e.decode(this.$6.slice(t,t+n));this.$4=r}catch(e){return}},n.$14=function(t){},n.$11=function(t,n){var e=this;return n.split("").every(function(n){return e.$7[t++]===n.charCodeAt(0)})},n.$9=function(t){for(var e=t;e+1<this.$7.length;++e)if(this.$7[e]===255&&this.$7[e+1]!==0&&this.$7[e+1]!==255)return e;return-1},n.hasAPP1=function(){return!!this.$1},n.hasExif=function(){return!!this.$3},n.hasXMP=function(){return!!this.$4},n.hasSize=function(){return!!this.$5},n.getAPP1Location=function(){return this.hasAPP1()?this.$1:null},n.getAPP1Length=function(){return this.hasAPP1()?this.$2:null},n.getExif=function(){if(!this.$3)throw new Error("Image has no Exif data");return this.$3},n.getXMPString=function(){return this.$4},n.getSize=function(){if(!this.$5)throw new Error("Could not find size data?!");return this.$5},n.getBufferLength=function(){if(!this.$6)throw new Error("Do not find buffer data!");return this.$6.byteLength},e.genMetadataFromBlob=async function(n){return new e(await e.$16(n))},e.$16=function(n){return new Promise(function(e,r){var o=new t.FileReader;o.onabort=r,o.onerror=r,o.onload=e,o.readAsArrayBuffer(n)})},e})(),s=[];s[216]={name:"SOI",length:0},s[192]={name:"SOF0"},s[193]={name:"SOF1"},s[194]={name:"SOF2"},s[195]={name:"SOF3"},s[197]={name:"SOF5"},s[198]={name:"SOF6"},s[199]={name:"SOF7"},s[200]={name:"JPG"},s[201]={name:"SOF9"},s[202]={name:"SOF10"},s[203]={name:"SOF11"},s[205]={name:"SOF13"},s[206]={name:"SOF14"},s[207]={name:"SOF15"},s[196]={name:"DHT"},s[219]={name:"DQT"},s[221]={name:"DRI",length:2},s[218]={name:"SOS"},s[208]={name:"RST0",length:0},s[209]={name:"RST1",length:0},s[210]={name:"RST2",length:0},s[211]={name:"RST3",length:0},s[212]={name:"RST4",length:0},s[213]={name:"RST5",length:0},s[214]={name:"RST6",length:0},s[215]={name:"RST7",length:0},s[224]={name:"APP0"},s[225]={name:"APP1"},s[226]={name:"APP2"},s[227]={name:"APP3"},s[228]={name:"APP4"},s[229]={name:"APP5"},s[230]={name:"APP6"},s[231]={name:"APP7"},s[232]={name:"APP8"},s[233]={name:"APP9"},s[234]={name:"APP10"},s[235]={name:"APP11"},s[236]={name:"APP12"},s[237]={name:"APP13"},s[238]={name:"APP14"},s[239]={name:"APP15"},s[254]={name:"COM"},s[217]={name:"EOI",length:0};var u="Exif\0\0",c="http://ns.adobe.com/xap/1.0/\0",d="http://ns.adobe.com/xmp/extension/\0";l.default=e}),98);
__d("LSCancelTaskByQueueName",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.forEach(t.filter(t.db.table(2).fetch([[[e[0]]],"queueNameTaskId"]),function(n){return n.queueName===e[0]&&n.context===t.i64.to_string(e[1])}),function(e){var r=e.item;return t.sequence([function(e){return n[0]=r.taskDispatchPriority,t.forEach(t.filter(t.db.table(2).fetch([[[r.taskId]]]),function(e){return t.i64.eq(e.taskId,r.taskId)&&e.queueName===r.queueName}),function(e){return e.delete()})},function(e){return t.i64.eq(n[0],t.i64.cast([0,1e3]))||t.i64.eq(n[0],t.i64.cast([0,2e3]))?n[1]=t.i64.cast([0,734739218]):n[1]=t.i64.cast([0,734737036])}])})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSCoreCancelTaskByQueueNameStoredProcedure",e.__tables__=["pending_tasks"],a.exports=e}),null);
__d("LSCommunityThreadCreationStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({FAILURE:2,PENDING:0,SUCCESS:1});i.default=e}),66);
__d("LSCreateCommunitySubThread",["LSCreateOfflineThreadingID","LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return r[2]=new t.Map,r[2].set("client_mutation_id",r[1]),r[2].set("community_id",e[0]),r[2].set("parent_message_id",e[2]),r[2].set("parent_thread_id",e[1]),t.i64.gt(t.i64.cast([0,0]),t.i64.cast([0,0]))?(r[7]=t.i64.of_float(Date.now()),r[3]=t.i64.add(r[7],t.i64.cast([0,0]))):r[3]=t.i64.cast([0,0]),r[4]=r[2].get("parent_thread_id"),r[5]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),["create_community_sub_thread","_",t.i64.to_string(r[4])].join(""),t.i64.cast([0,665]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,r[3],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return o[0]=r[6]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxCreateCommunitySubThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSCreateCommunitySubThreadStoredProcedure",["LSCreateCommunitySubThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSCreateCommunitySubThread"),a.communityId,a.parentThreadId,a.parentMessageId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSDeleteReaction",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(8).fetch([[[e[0],e[1],e[2]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[1]&&t.i64.eq(n.actorId,e[2])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxDeleteReactionStoredProcedure",e.__tables__=["reactions"],a.exports=e}),null);
__d("LSInsertAnonymousTaskContext",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(311).add({taskId:e[0],projectName:e[1]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSAnonymousCredentialsInsertAnonymousTaskContextStoredProcedure",e.__tables__=["anonymous_task_context"],a.exports=e}),null);
__d("LSIssueNewTaskUsingSyncChannel",["LSIssueNewTaskAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[12]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(306).add({taskId:r[0],syncChannel:e[10],requiresAuthentication:e[11]})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreIssueNewTaskUsingSyncChannelStoredProcedure",e.__tables__=["lightspeed_task_context"],a.exports=e}),null);
__d("LSDispatchMediaReceiverFetchForWeb",["LSInsertAnonymousTaskContext","LSIssueNewTaskUsingSyncChannel","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("thread_key",e[0]),r[0].set("message_id",e[1]),r[0].set("receiver_fetch_id",e[2]),r[0].set("should_fetch_accessibility_summary_text",e[3]),r[1]=r[0].get("message_id"),r[4]=["LSMediaReceiverFetchTransportAnonymizedMsgrWebE2EEMediaReceiverFetchSyncAction",".",r[1]].join(""),r[2]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskUsingSyncChannel"),r[4],t.i64.cast([0,1018]),r[2],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,2]),!1,t.i64.cast([0,0])).then(function(e){var t;return t=e,r[3]=t[0],t})},function(e){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskInsertion"),r[3])},function(e){return t.storedProcedure(n("LSInsertAnonymousTaskContext"),r[3],"LS_MediaReceiverFetch")}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMediaReceiverFetchTransportDispatchMediaReceiverFetchForWebStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSDispatchMediaReceiverFetchForWebStoredProcedure",["LSDispatchMediaReceiverFetchForWeb","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSDispatchMediaReceiverFetchForWeb"),a.threadKey,a.messageId,a.receiverFetchId,a.shouldFetchAccessibilitySummaryText);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSGenerateTraceId",["LSRequestId","MetaConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(){if(r("MetaConfig")._("62"))return r("LSRequestId").generate()}l.default=e}),98);
__d("LSInsertRollCallContribution",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(255).fetch([[[e[0],e[1],e[2],e[3]]],"optimistic"]),function(n){return t.i64.eq(n.rollCallContributionId,e[0])&&t.i64.eq(n.rollCallId,e[1])&&n.messageId===e[2]&&t.i64.eq(n.messageTimestampMs,e[3])&&t.i64.lt(n.authorityLevel,e[23])}),function(e){return e.delete()})},function(n){return t.db.table(255).add({rollCallContributionId:e[0],rollCallId:e[1],messageId:e[2],messageTimestampMs:e[3],threadKey:e[4],primaryMediaUrl:e[5],primaryMediaUrlFallback:e[6],primaryMediaExpiryMs:e[7],primaryMediaWidth:e[8],primaryMediaHeight:e[9],primaryMediaMimeType:e[10],previewMediaUrl:e[11],previewMediaUrlFallback:e[12],previewMediaExpiryMs:e[13],previewMediaWidth:e[14],previewMediaHeight:e[15],previewMediaMimeType:e[16],authorityLevel:e[23],contributorId:e[17],offlineThreadingId:e[18],blurOverride:e[19],contributionSource:e[20],contributionType:e[21],content:e[22]})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxInsertRollCallContributionStoredProcedure",e.__tables__=["roll_call_contributions_v2"],a.exports=e}),null);
__d("LSUpdateMessageSubThreadKey",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(12).fetch([[[e[0]]],"messageId"]),function(t){var n=t.update,r=t.item;return n({subthreadKey:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateMessageSubThreadKeyStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSLocalApplyOptimisticCommunityChatSubThread",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSGetViewerFBID","LSLocalize","LSUpdateMessageSubThreadKey"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.cast([0,16408]),r[1]=t.i64.cast([0,0]),r[2]=t.i64.cast([0,268437504]),r[3]=t.i64.cast([0,0]),r[4]=t.i64.cast([0,0]),r[5]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[5]).then(function(e){var t;return t=e,r[6]=t[0],t})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,261320435]),void 0).then(function(e){return r[7]=e})},function(o){return t.filter(t.db.table(12).fetch([[[e[2]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===e[2]}).next().then(function(o,a){var i=o.done,l=o.value;return i?r[8]=r[7]:(a=l.item,t.sequence([function(o){return r[23]=a.text,r[23]!==void 0?t.resolve(r[22]=r[23]):t.sequence([function(n){return t.filter(t.db.table(12).fetch([[[e[2]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===e[2]}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[24]=void 0:(t=o.item,r[24]=t.senderId)})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1369731110]),void 0).then(function(e){return r[26]=e})},function(n){return t.i64.neq(r[24],void 0)?t.sequence([function(n){return t.db.table(216).fetch([[[r[24],e[0]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[31]=void 0:(t=o.item,r[31]=t.profileName)})},function(e){return t.filter(t.db.table(7).fetch([[[r[24]]]]),function(e){return t.i64.eq(e.id,r[24])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[33]=void 0:(t=o.item,r[37]=t.firstName,r[37]!==void 0?r[36]=r[37]:r[36]=t.name,r[33]=r[36])})},function(e){return r[31]!==void 0?r[35]=r[31]:(r[33]!==void 0?r[36]=r[33]:r[36]=r[26],r[35]=r[36]),r[27]=r[35]}]):t.resolve(r[27]=r[26])},function(n){return t.db.table(16).fetch([[[e[1],e[2]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[28]=void 0:(t=o.item,r[28]=t.attachmentType)})},function(e){return t.i64.eq(r[28],t.i64.cast([0,5]))?t.sequence([function(e){return r[31]=t.createArray(),r[33]=(r[31].push(r[27]),r[31]),n("LSLocalize").localizeV2Async(t.i64.cast([0,216075330]),r[31]).then(function(e){return r[32]=e})},function(e){return r[30]=r[32]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,2]))?t.sequence([function(e){return r[32]=t.createArray(),r[34]=(r[32].push(r[27]),r[32]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3093868587]),r[32]).then(function(e){return r[33]=e})},function(e){return r[31]=r[33]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,4]))?t.sequence([function(e){return r[33]=t.createArray(),r[35]=(r[33].push(r[27]),r[33]),n("LSLocalize").localizeV2Async(t.i64.cast([0,1965569930]),r[33]).then(function(e){return r[34]=e})},function(e){return r[32]=r[34]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,1]))?t.sequence([function(e){return r[34]=t.createArray(),r[36]=(r[34].push(r[27]),r[34]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3981943156]),r[34]).then(function(e){return r[35]=e})},function(e){return r[33]=r[35]}]):t.sequence([function(e){return t.i64.eq(r[28],t.i64.cast([0,3]))?t.sequence([function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[27]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2071149394]),r[35]).then(function(e){return r[36]=e})},function(e){return r[34]=r[36]}]):t.sequence([function(e){return r[35]=t.createArray(),r[37]=(r[35].push(r[27]),r[35]),n("LSLocalize").localizeV2Async(t.i64.cast([0,2414298738]),r[35]).then(function(e){return r[36]=e})},function(e){return r[34]=r[36]}])},function(e){return r[33]=r[34]}])},function(e){return r[32]=r[33]}])},function(e){return r[31]=r[32]}])},function(e){return r[30]=r[31]}])},function(e){return r[22]=r[30]}])},function(e){return r[8]=r[22]}]))})},function(n){return r[10]=r[8],t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0],r[11]=n[0],r[12]=n[1],n):(t=i.item,o=[t.themeFbid,t.customEmoji],r[11]=o[0],r[12]=o[1])})},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[14]=t[0],t})},function(e){return t.forEach(t.filter(t.db.table(9).fetch([[[r[6]]]]),function(e){return t.i64.eq(e.threadKey,r[6])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:r[6],mailboxType:t.i64.cast([0,0]),threadType:t.i64.cast([0,26]),clientThreadKey:r[6],folderName:"community",parentThreadKey:e[1],lastActivityTimestampMs:t.i64.cast([0,0]),lastReadWatermarkTimestampMs:t.i64.cast([0,0]),snippetHasEmoji:!1,snippetSenderContactId:r[14],ongoingCallState:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),capabilities:r[0],capabilities2:r[1],capabilities3:r[2],capabilities4:r[3],capabilities5:r[4],threadName:r[10],themeFbid:r[11],customEmoji:r[12]})},function(n){return t.filter(t.db.table(12).fetch([[[e[2]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===e[2]}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[15]=void 0:(t=o.item,r[15]=t.senderId)})},function(e){return r[17]=t.createArray(),t.i64.neq(r[15],void 0)&&(r[22]=(r[17].push(r[15]),r[17])),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[18]=t[0],t})},function(e){return t.i64.neq(r[15],r[18])?t.sequence([function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[22]=t[0],t})},function(e){return r[23]=(r[17].push(r[22]),r[17])}]):t.resolve()},function(e){return r[19]=t.i64.of_int32(r[17].length),t.i64.gt(r[19],t.i64.cast([0,0]))?t.loopAsync(r[19],function(e){return r[22]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[17],r[22]).then(function(e){var t;return t=e,r[23]=t[0],r[24]=t[1],t})},function(e){return t.forEach(t.filter(t.db.table(14).fetch([[[r[6],r[23]]]]),function(e){return t.i64.eq(e.threadKey,r[6])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(e.contactId,r[23])&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(e){return t.db.table(14).add({threadKey:r[6],contactId:r[23],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),isModerator:!1})}])}):t.resolve()},function(o){return t.storedProcedure(n("LSUpdateMessageSubThreadKey"),e[2],r[6])},function(e){return t.resolve()},function(n){return r[20]=new t.Map,r[20].set("client_mutation_id",r[6]),r[20].set("community_id",e[0]),r[20].set("parent_thread_id",e[1]),r[20].set("parent_message_id",e[2]),r[21]=t.toJSON(r[20]),t.db.table(312).put({threadKey:r[6],metadata:r[21]})},function(e){return o[0]=r[6]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticCommunityChatSubThreadStoredProcedure",e.__tables__=["messages","contextual_profile_v1","contacts","attachments","threads","participants","threads_optimistic_metadata"],a.exports=e}),null);
__d("LSLocalApplyOptimisticRollCallContribution",["LSArrayGetObjectAt","LSGetFirstAvailableAttachmentCTAID","LSGetViewerFBID","LSInsertAttachmentItem","LSInsertRollCallContribution","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return e[1]!==void 0?t.sequence([function(n){return t.db.table(250).fetch([[[t.i64.from_string(e[1]),e[0]]]]).next().then(function(e,n){var o,a,i=e.done,l=e.value;return i?((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] couldn't find roll call in table roll_calls"),o=["Roll Call",t.i64.cast([0,0])],r[0]=o[0],r[1]=o[1]):(n=l.item,a=[n.rollCallPrompt,n.expiryTimestampSec],r[0]=a[0],r[1]=a[1])})},function(n){return t.islc(t.sortBy(t.filter(t.db.table(255).fetch(),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.rollCallId,t.i64.from_string(e[1]))}),[["messageTimestampMs","DESC"]]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=void 0:(t=o.item,r[3]=t.messageId)})},function(n){return r[3]!==void 0?t.sequence([function(n){return r[7]=t.createArray(),t.forEach(t.islc(t.sortBy(t.db.table(18).fetch([[[e[0],r[3]]],"fk_attachments"]),[["attachmentIndex","ASC"]]),0,t.i64.to_float(t.i64.cast([0,2]))),function(e){var n=e.item;return r[8]=new t.Map,r[8].set("attachment_index",n.attachmentIndex),r[8].set("preview_url",n.previewUrl),r[8].set("preview_url_expiration_timestamp_ms",n.previewUrlExpirationTimestampMs),r[8].set("preview_url_mime_type",n.previewUrlMimeType),r[8].set("preview_width",n.previewWidth),r[8].set("preview_height",n.previewHeight),r[8].set("default_cta_id",n.defaultCtaId),r[8].set("playable_url",n.playableUrl),r[9]=(r[7].push(r[8]),r[7])})},function(e){return r[5]=r[7]}]):t.resolve((r[7]=t.createArray(),r[5]=r[7]))},function(o){return t.i64.neq(e[6],void 0)?r[6]=e[6]:r[6]=t.i64.cast([0,0]),t.i64.eq(r[6],t.i64.cast([0,0]))?(r[7]=t.i64.of_int32(e[2].length),t.i64.eq(r[7],t.i64.cast([0,1]))?t.sequence([function(o){return e[5]!==void 0?r[8]=t.i64.from_string(e[5]):r[8]=t.i64.cast([0,0]),n("LSLocalize").localizeV2Async(t.i64.cast([0,3989800917]),void 0).then(function(e){return r[9]=e})},function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[2],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[10]=t[0],r[11]=t[1],t})},function(e){return t.storedProcedure(n("LSGetFirstAvailableAttachmentCTAID")).then(function(e){var t;return t=e,r[12]=t[0],t})},function(n){return r[13]=r[10].get("offline_attachment_id"),r[14]=r[10].get("attachment_index"),t.filter(t.db.table(16).fetch([[[e[0],e[3],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===e[3]&&n.attachmentFbid===e[1]&&t.i64.gt(n.authorityLevel,t.i64.cast([0,20]))}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(16).put({threadKey:e[0],messageId:e[3],attachmentFbid:e[1],timestampMs:e[4],offlineAttachmentId:r[13],attachmentType:t.i64.cast([0,7]),filesize:t.i64.cast([0,0]),attachmentCta1Id:r[12],attachmentIndex:r[14],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:t.i64.cast([0,10]),cta1Title:r[9],cta1Type:"xma_disabled_cta",defaultCtaTitle:r[9],defaultCtaType:"xma_disabled_cta",defaultCtaId:r[12],titleText:r[0],authorityLevel:t.i64.cast([0,20]),countdownTimestampMs:t.i64.mul(r[1],t.i64.cast([0,1e3])),maxTitleNumOfLines:t.i64.cast([0,4])}):0})},function(e){return r[15]=r[10].get("preview_url"),r[26]=r[15]==null?"":r[15],r[16]=r[10].get("preview_url_mime_type"),r[27]=r[16]==null?"":r[16],r[17]=r[10].get("preview_height"),r[23]=r[17]==null?t.i64.cast([0,0]):r[17],r[18]=r[10].get("preview_width"),r[22]=r[18]==null?t.i64.cast([0,0]):r[18],r[19]=r[10].get("playable_url"),r[25]=r[19]==null?"":r[19],r[20]=r[10].get("playable_url_mime_type"),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[21]=t[0],t})},function(o){return t.storedProcedure(n("LSInsertRollCallContribution"),t.i64.cast([0,0]),t.i64.from_string(e[1]),e[3],e[4],e[0],r[25],"",t.i64.cast([0,0]),r[22],r[23],r[20]==null?"":r[20],r[26],"",t.i64.cast([0,0]),r[22],r[23],r[27],r[21],e[3],!1,r[8],e[6],void 0,t.i64.cast([0,20]))},function(n){return t.forEach(t.db.table(250).fetch([[[t.i64.from_string(e[1]),e[0]]]]),function(e){var t=e.update,n=e.item;return t({isBlurred:!1,viewerHasContributed:!0})})},function(o){return r[24]=r[10].get("attachment_index"),t.storedProcedure(n("LSInsertAttachmentItem"),e[1],r[24],e[0],t.i64.cast([0,0]),e[3],void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,r[25],void 0,void 0,void 0,void 0,r[26],r[26],t.i64.cast([0,0]),r[27],r[22],r[23],void 0,r[12],r[9],"xma_disabled_cta",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},function(o){return r[28]=t.i64.of_int32(r[5].length),t.i64.gt(r[28],t.i64.cast([0,0]))?t.loopAsync(r[28],function(o){return r[29]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[5],r[29]).then(function(e){var t;return t=e,r[30]=t[0],r[31]=t[1],t})},function(o){return r[32]=r[30].get("attachment_index"),r[33]=r[30].get("preview_url"),r[34]=r[30].get("preview_url_expiration_timestamp_ms"),r[35]=r[30].get("preview_url_mime_type"),r[36]=r[30].get("preview_width"),r[37]=r[30].get("preview_height"),r[38]=r[30].get("default_cta_id"),r[39]=r[30].get("playable_url"),t.storedProcedure(n("LSInsertAttachmentItem"),e[1],t.i64.add(r[32],t.i64.cast([0,1])),e[0],t.i64.cast([0,0]),e[3],void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,r[39],void 0,void 0,void 0,void 0,r[33],r[33],r[34],r[35],r[36],r[37],void 0,r[38],r[9],"xma_disabled_cta",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)}])}):t.resolve()}]):t.resolve((r[8]=t.i64.of_int32(e[2].length),(function(e){t.logger(e).mustfix(e)})(["[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected only 1 attachment for MEDIA contribution, but found ",t.i64.to_string(r[8])].join(""))))):t.resolve(t.i64.eq(r[6],t.i64.cast([0,1]))?e[7]!==void 0?0:(function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] expected non-null content for TEXT contribution, but found null"):t.i64.eq(r[6],t.i64.cast([0,2]))?(function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] LINK contributions are not yet supported"):0)}]):t.resolve((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure] param product_fbid is missing"))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticRollCallContributionStoredProcedure",e.__tables__=["roll_calls","roll_call_contributions_v2","attachment_items","attachments"],a.exports=e}),null);
__d("LSLocalApplyOptimisticSharedAlbumContribution",["LSArrayGetObjectAt","LSArrayRemoveObjectAt","LSCollapseAttachments","LSGetFirstAvailableAttachmentCTAID","LSInsertAttachmentItem","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2856734260]),void 0).then(function(e){return r[0]=e})},function(e){return t.storedProcedure(n("LSGetFirstAvailableAttachmentCTAID")).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[2],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],t})},function(o){return r[4]=t.i64.random(),r[5]=t.i64.to_string(r[4]),e[1]!==void 0?t.sequence([function(n){return t.db.table(279).fetch([[[t.i64.from_string(e[1]),e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] couldn't find album in table shared_albums"),r[6]=void 0):(n=a.item,r[6]=n.title)})},function(o){return r[6]!==void 0?t.sequence([function(n){return r[8]=r[2].get("offline_attachment_id"),r[9]=r[2].get("attachment_index"),t.filter(t.db.table(16).fetch([[[e[0],e[3],r[5]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===e[3]&&n.attachmentFbid===r[5]&&t.i64.gt(n.authorityLevel,t.i64.cast([0,20]))}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(16).put({threadKey:e[0],messageId:e[3],attachmentFbid:r[5],timestampMs:e[4],offlineAttachmentId:r[8],attachmentType:t.i64.cast([0,7]),filesize:t.i64.cast([0,0]),attachmentCta1Id:r[1],attachmentIndex:r[9],hasMedia:!1,hasXma:!0,isSharable:!1,xmaLayoutType:t.i64.cast([0,10]),cta1Title:r[0],cta1Type:"xma_disabled_cta",defaultCtaTitle:r[0],defaultCtaType:"xma_shared_album_viewer",defaultCtaId:r[1],titleText:r[6],authorityLevel:t.i64.cast([0,20]),maxTitleNumOfLines:t.i64.cast([0,4]),collapsibleId:t.i64.from_string(e[1])}):0})},function(r){return t.storedProcedure(n("LSCollapseAttachments"),e[0],t.i64.from_string(e[1]))},function(o){return r[10]=t.i64.of_int32(e[2].length),t.i64.gt(r[10],t.i64.cast([0,0]))?t.loopAsync(r[10],function(o){return r[12]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[2],r[12]).then(function(e){var t;return t=e,r[13]=t[0],r[14]=t[1],t})},function(n){return r[15]=r[13].get("preview_url"),r[23]=r[15]==null?"":r[15],r[16]=r[13].get("preview_height"),r[24]=r[16]==null?t.i64.cast([0,0]):r[16],r[17]=r[13].get("preview_width"),r[25]=r[17]==null?t.i64.cast([0,0]):r[17],r[18]=r[13].get("preview_url_mime_type"),r[19]=r[13].get("playable_url"),r[20]=r[13].get("playable_url_mime_type"),r[21]=r[13].get("preview_url_mime_type"),r[22]=r[13].get("offline_attachment_id"),r[22]!==void 0?t.sequence([function(n){return r[27]="",r[28]=t.i64.from_string(r[22]),r[29]=t.i64.from_string(e[1]),r[26]=t.i64.of_float(Date.now()),t.forEach(t.filter(t.db.table(280).fetch([[[r[29],r[28],e[0],r[27]]]]),function(n){return t.i64.eq(n.sharedAlbumId,r[29])&&t.i64.eq(n.sharedAlbumContributionId,r[28])&&t.i64.eq(n.threadKey,e[0])&&n.messageId===r[27]&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(280).add({messageId:r[27],sharedAlbumContributionId:r[28],sharedAlbumId:r[29],threadKey:e[0],mediaUrl:r[19]==null?r[23]:r[19],mediaHeight:r[24],mediaWidth:r[25],mediaUrlFallback:"",urlExpiryMs:t.i64.cast([0,0]),creationTimestampMs:r[26],authorityLevel:t.i64.cast([0,20]),previewMediaUrl:r[23],previewMediaHeight:r[24],previewMediaWidth:r[25],previewMediaMimeType:r[18]==null?"":r[18]})}]):t.resolve((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param $attachment_otid is missing"))}])}):t.resolve()},function(o){return r[11]=t.createArray(),r[12]=(r[11].push(t.i64.cast([0,0])),r[11]),t.forEach(t.islc(t.sortBy(t.db.table(280).fetch([[[t.i64.from_string(e[1])]]]),[["creationTimestampMs","DESC"]]),0,t.i64.to_float(t.i64.cast([0,4]))),function(o){var a=o.item;return t.sequence([function(e){return r[15]=a.previewMediaUrl,t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[11],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[12]=t[0],r[13]=t[1],t})},function(o){return t.i64.eq(t.i64.cast([0,0]),r[12])?r[14]=r[6]:r[14]=void 0,t.storedProcedure(n("LSInsertAttachmentItem"),r[5],r[12],e[0],t.i64.cast([0,0]),e[3],void 0,t.i64.cast([0,0]),void 0,r[14],void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,r[15],r[15],t.i64.cast([0,0]),a.previewMediaMimeType,a.mediaWidth,a.mediaHeight,void 0,r[1],void 0,"xma_shared_album_viewer",void 0,void 0,void 0,!1,"full",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)},function(e){return t.nativeTypeOperation("Array",n("LSArrayRemoveObjectAt"),r[11],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[16]=t[0],t})},function(e){return r[16]=(r[11].push(t.i64.add(r[12],t.i64.cast([0,1]))),r[11])}])})}]):t.resolve()}]):t.resolve((function(e){t.logger(e).mustfix(e)})("[LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure] param product_fbid is missing"))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticSharedAlbumContributionStoredProcedure",e.__tables__=["shared_albums","attachments","shared_album_contributions"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessageV2","LSLocalApplyOptimisticRollCallContribution","LSLocalApplyOptimisticSharedAlbumContribution","LSSetMessageDisplayedContentTypes"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticMessageV2"),e[0],e[1],e[2],e[3],e[4],e[5],void 0).then(function(e){var t;return t=e,r[0]=t[0],r[1]=t[1],t})},function(o){return r[2]=e[5].get("attachments"),r[3]=e[5].get("product_type"),r[3]==="roll_call"?(r[4]=e[5].get("product_fbid"),r[5]=e[5].get("product_attribution"),r[6]=e[5].get("contribution_type"),t.storedProcedure(n("LSLocalApplyOptimisticRollCallContribution"),e[1],r[4],r[2],r[0],r[1],r[5],r[6],e[3])):r[3]==="shared_albums"?(r[4]=e[5].get("product_fbid"),r[5]=e[5].get("product_attribution"),t.storedProcedure(n("LSLocalApplyOptimisticSharedAlbumContribution"),e[1],r[4],r[2],r[0],r[1],r[5])):(r[4]=t.i64.of_int32(r[2].length),t.i64.gt(r[4],t.i64.cast([0,0]))?t.loopAsync(r[4],function(o){return r[5]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[2],r[5]).then(function(e){var t;return t=e,r[6]=t[0],r[7]=t[1],t})},function(n){return r[8]=r[6].get("attachment_fbid"),r[9]=r[6].get("offline_attachment_id"),r[10]=r[6].get("attachment_type"),r[11]=r[6].get("filename"),r[12]=r[6].get("filesize"),r[13]=r[6].get("attachment_index"),r[14]=r[6].get("has_media"),r[15]=r[6].get("has_xma"),r[16]=r[6].get("playable_url"),r[17]=r[6].get("playable_url_mime_type"),r[18]=r[6].get("playable_duration_ms"),r[19]=r[6].get("preview_url"),r[20]=r[6].get("preview_url_mime_type"),r[21]=r[6].get("mini_preview"),r[22]=r[6].get("preview_width"),r[23]=r[6].get("preview_height"),r[24]=r[6].get("xma_layout_type"),r[25]=r[6].get("xmas_template_type"),r[26]=r[6].get("cta1_title"),r[27]=r[6].get("cta1_type"),r[28]=r[6].get("attachment_cta1_id"),r[29]=r[6].get("cta2_title"),r[30]=r[6].get("cta2_type"),r[31]=r[6].get("attachment_cta2_id"),r[32]=r[6].get("cta3_title"),r[33]=r[6].get("cta3_type"),r[34]=r[6].get("attachment_cta3_id"),r[35]=r[6].get("image_url"),r[36]=r[6].get("action_url"),r[37]=r[6].get("title_text"),r[38]=r[6].get("subtitle_text"),r[39]=r[6].get("description_text"),r[40]=r[6].get("source_text"),r[41]=r[6].get("original_file_hash"),r[42]=r[6].get("sound_bite_client_sound_key"),r[43]=r[6].get("sound_bite_visual"),r[44]=r[6].get("ephemeral_media_state"),r[45]=r[6].get("waveform_data"),r[46]=r[6].get("avatar_audio_message_animated_url"),r[47]=r[6].get("avatar_audio_message_idle_url"),r[48]=r[6].get("avatar_audio_message_animated_b_url"),r[49]=r[6].get("avatar_audio_message_idle_b_url"),r[50]=r[6].get("avatar_audio_message_background_graphics_image_url"),r[51]=r[6].get("avatar_audio_message_pose_id"),r[52]=r[6].get("sampling_frequency_hz"),r[53]=r[6].get("should_autoplay_video"),r[54]=r[6].get("has_xma_favicon"),r[55]=r[6].get("favicon_url"),r[19]!==void 0?r[56]=r[19]:r[56]=r[16],t.filter(t.db.table(16).fetch([[[e[1],r[0],r[8]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===r[0]&&n.attachmentFbid===r[8]&&t.i64.gt(n.authorityLevel,t.i64.cast([0,20]))}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(16).put({threadKey:e[1],messageId:r[0],attachmentFbid:r[8],timestampMs:r[1],offlineAttachmentId:r[9],attachmentType:r[10],filename:r[11],filesize:r[12],attachmentIndex:r[13],hasMedia:r[14],hasXma:r[15],isSharable:!1,playableUrl:r[16],playableUrlMimeType:r[17],playableDurationMs:r[18],previewUrl:r[56],previewUrlMimeType:r[20],miniPreview:r[21],previewWidth:r[22],previewHeight:r[23],xmaLayoutType:r[24],xmasTemplateType:r[25],cta1Title:r[26],cta1Type:r[27],attachmentCta1Id:r[28],cta2Title:r[29],cta2Type:r[30],attachmentCta2Id:r[31],cta3Title:r[32],cta3Type:r[33],attachmentCta3Id:r[34],imageUrl:r[35],actionUrl:r[36],titleText:r[37],subtitleText:r[38],descriptionText:r[39],sourceText:r[40],ephemeralMediaState:r[44],waveformData:r[45],samplingFrequencyHz:r[52],originalFileHash:r[41],authorityLevel:t.i64.cast([0,20]),shouldAutoplayVideo:r[53],hasXmaFavicon:r[54],faviconUrl:r[55]}):0})}])}):t.resolve())},function(o){return r[4]=t.i64.of_int32(r[2].length),t.i64.gt(r[4],t.i64.cast([0,0]))?(r[5]=e[5].get("sticker_id"),t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[0],r[1],e[3],!1,t.i64.neq(r[5],void 0))):t.resolve()},function(e){var t;return t=[r[0],r[1]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure",e.__tables__=["attachments"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure",["LSLocalApplyOptimisticMessageWithAttachmentsV2","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSLocalApplyOptimisticMessageWithAttachmentsV2"),a.senderId,a.threadKey,a.threadType,a.text,a.snippet,a.extraSendMessageParams);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSLocalCreateOptimisticCommunityChatSubThread",["LSLocalApplyOptimisticCommunityChatSubThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticCommunityChatSubThread"),e[0],e[1],e[2]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalCreateOptimisticCommunityChatSubThreadStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure",["LSLocalCreateOptimisticCommunityChatSubThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSLocalCreateOptimisticCommunityChatSubThread"),a.communityId,a.parentThreadId,a.parentMessageId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticContributeToTextPrompt",["LSLocalApplyOptimisticMessageV2","LSLocalApplyOptimisticRollCallContribution"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.createArray(),r[1]=new t.Map,r[1].set("snippet_has_emoji",void 0),r[1].set("sticker_id",void 0),r[1].set("sticker_alt_text",void 0),r[1].set("hot_emoji_size",void 0),r[1].set("external_attachment_url",void 0),r[1].set("attribution_app_id",void 0),r[1].set("source",t.i64.cast([0,0])),r[1].set("platform_ref",void 0),r[1].set("platform_token",void 0),r[1].set("reply_source_id",void 0),r[1].set("reply_source_type",void 0),r[1].set("reply_source_type_v2",void 0),r[1].set("mention_data",void 0),r[1].set("mark_read",void 0),r[1].set("calculate_denormalizations",void 0),r[1].set("optimistic_attachment_preview",void 0),r[1].set("initiating_app_id",void 0),r[1].set("initiating_source",void 0),r[1].set("power_up_style",t.i64.cast([0,0])),r[1].set("data_trace_id",void 0),r[1].set("attachments",r[0]),r[1].set("should_copy_attachments",!1),r[1].set("magic_words_data",void 0),r[1].set("local_data_id",void 0),r[1].set("reply_type",void 0),r[1].set("dety_params",void 0),r[1].set("product_type","roll_call"),r[1].set("product_fbid",e[2]),r[1].set("product_attribution",e[3]),t.storedProcedure(n("LSLocalApplyOptimisticMessageV2"),e[1],e[0],t.i64.cast([0,18]),e[4],e[4],r[1],void 0).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],t})},function(o){return r[4]=t.createArray(),t.storedProcedure(n("LSLocalApplyOptimisticRollCallContribution"),e[0],e[2],r[4],r[2],r[3],e[3],t.i64.cast([0,1]),e[4])}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticContributeToTextPromptStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSOptimisticContributeToTextPromptStoredProcedure",["LSOptimisticContributeToTextPrompt","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticContributeToTextPrompt"),a.threadKey,a.senderId,a.promptId,a.productAttribution,a.text);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticCreateRollCall",["LSCreateOfflineThreadingID","LSGetViewerFBID","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(n){return t.forEach(t.filter(t.db.table(250).fetch([[[r[1],e[0]]]]),function(n){return t.i64.eq(n.rollCallId,r[1])&&t.i64.eq(n.threadKey,e[0])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(250).add({rollCallId:r[1],threadKey:e[0],rollCallPrompt:e[1],expiryTimestampSec:t.i64.cast([0,0]),isBlurred:!1,authorityLevel:t.i64.cast([0,20]),offlineThreadingId:r[1],canViewWithoutContributing:!1})},function(o){return r[2]=new t.Map,r[2].set("thread_key",e[0]),r[2].set("prompt",e[1]),r[2].set("offline_threading_id",r[1]),r[2].set("prompt_type",e[2]),t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[3]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[4]=!1:(n=a.item,t.sequence([function(e){return t.filter(t.db.table(14).fetch([[[n.threadKey,r[3]]]]),function(e){return t.i64.eq(e.threadKey,n.threadKey)&&t.i64.eq(t.i64.cast([0,0]),n.mailboxType)&&t.i64.eq(e.contactId,r[3])}).next().then(function(e,o){var a=e.done,i=e.value;return a?r[10]=!1:(o=i.item,t.i64.eq(n.threadType,t.i64.cast([0,152]))?(r[13]=o.threadRoles,t.i64.lt(t.i64.cast([0,7]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,7]),t.i64.cast([0,9]))?r[14]=!1:r[14]=!t.i64.eq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[13]),t.i64.cast([0,0])),r[15]=n.capabilities,r[16]=n.capabilities2,r[17]=n.capabilities3,r[18]=n.capabilities4,r[19]=n.capabilities5,r[21]=t.i64.div(t.i64.cast([0,223]),t.i64.cast([0,64])),r[22]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.sub(t.i64.cast([0,223]),t.i64.mul(r[21],t.i64.cast([0,64]))))),t.i64.lt(t.i64.cast([0,223]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,223]),t.i64.cast([0,301]))?r[20]=!1:(t.i64.eq(r[21],t.i64.cast([0,0]))?r[23]=!t.i64.eq(t.i64.and_(r[22],r[15]),t.i64.cast([0,0])):(t.i64.eq(r[21],t.i64.cast([0,1]))?r[24]=!t.i64.eq(t.i64.and_(r[22],r[16]),t.i64.cast([0,0])):(t.i64.eq(r[21],t.i64.cast([0,2]))?r[25]=!t.i64.eq(t.i64.and_(r[22],r[17]),t.i64.cast([0,0])):(t.i64.eq(r[21],t.i64.cast([0,3]))?r[26]=!t.i64.eq(t.i64.and_(r[22],r[18]),t.i64.cast([0,0])):(t.i64.eq(r[21],t.i64.cast([0,4]))?r[27]=!t.i64.eq(t.i64.and_(r[22],r[19]),t.i64.cast([0,0])):r[27]=!1,r[26]=r[27]),r[25]=r[26]),r[24]=r[25]),r[23]=r[24]),r[20]=r[23]),r[14]!==r[20]&&((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),t.throw("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),r[12]=r[14]):r[12]=!1,r[10]=r[12])})},function(e){return r[4]=r[10]}]))})},function(n){return r[4]&&r[2].set("perform_action_as_page",!0),t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[6]=t.i64.cast([0,1]):(n=a.item,r[11]=n.syncGroup,t.i64.neq(r[11],void 0)?r[10]=r[11]:r[10]=t.i64.cast([0,1]),r[6]=r[10])})},function(e){return r[2].set("sync_group",r[6]),r[8]=r[2].get("thread_key"),r[9]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[8]),t.i64.cast([0,607]),r[9],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){var t;return t=[r[1],r[0]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticCreateRollCallStoredProcedure",e.__tables__=["roll_calls","threads","participants"],a.exports=e}),null);
__d("LSOptimisticCreateRollCallStoredProcedure",["LSOptimisticCreateRollCall","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticCreateRollCall"),a.threadKey,a.prompt,a.promptType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticUpsertReaction",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTask","LSUpsertReaction"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[21]=n.syncGroup,t.i64.neq(r[21],void 0)?r[20]=r[21]:r[20]=t.i64.cast([0,1]),r[0]=r[20])})},function(o){return r[2]=new t.Map,r[2].set("thread_key",e[0]),r[2].set("timestamp_ms",e[1]),r[2].set("message_id",e[2]),r[2].set("actor_id",e[3]),r[2].set("reaction",e[4]),r[2].set("reaction_style",void 0),r[2].set("sync_group",r[0]),r[3]=t.createArray(),r[4]=(r[3].push("reaction"),r[3]),r[5]=r[2].get("message_id"),r[6]=(r[3].push(r[5]),r[3]),r[7]=t.toJSON(r[3]),t.storedProcedure(n("LSCancelTaskByQueueName"),r[7],t.i64.cast([0,29]))},function(o){return e[4]===""?t.sequence([function(r){return t.storedProcedure(n("LSDeleteReaction"),e[0],e[2],e[3])},function(e){return r[8]=void 0}]):t.sequence([function(o){return e[4]==="\u2764\uFE0F"||e[4]==="\u2764\uFE0F"?r[20]="\u2764":r[20]=e[4],t.storedProcedure(n("LSUpsertReaction"),e[0],e[1],e[2],e[3],r[20],t.i64.cast([0,20]),void 0)},function(e){return r[8]=void 0}])},function(n){return r[9]=!0,r[9]?r[10]=void 0:(r[20]=new t.Map,r[20].set("feature_tags",void 0),r[21]=new t.Map,r[21].set("logging_metadata",r[20]),r[22]=t.toJSON(r[21]),r[10]=r[22]),t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[11]=t.i64.cast([0,1]):(n=a.item,r[21]=n.syncGroup,t.i64.neq(r[21],void 0)?r[20]=r[21]:r[20]=t.i64.cast([0,1]),r[11]=r[20])})},function(o){return r[13]=new t.Map,r[13].set("thread_key",e[0]),r[13].set("timestamp_ms",e[1]),r[13].set("message_id",e[2]),r[13].set("actor_id",e[3]),r[13].set("reaction",e[4]),r[13].set("reaction_style",void 0),r[13].set("sync_group",r[11]),r[13].set("send_attribution",e[5]),r[13].set("dataclass_params",r[10]),r[13].set("attachment_fbid",void 0),r[14]=t.createArray(),r[15]=(r[14].push("reaction"),r[14]),r[16]=r[13].get("message_id"),r[17]=(r[14].push(r[16]),r[14]),r[18]=t.toJSON(r[14]),r[19]=t.toJSON(r[13]),t.storedProcedure(n("LSIssueNewTask"),r[18],t.i64.cast([0,29]),r[19],void 0,void 0,e[6]==null?t.i64.cast([0,0]):e[6],t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpsertReactionStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticUpsertReactionStoredProcedure",["LSOptimisticUpsertReaction","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticUpsertReaction"),a.threadKey,a.timestampMs,a.messageId,a.actorId,a.reaction,a.sendAttribution,a.pluginType);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpdateOrInsertReactionV2",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.db.table(226).fetch([[[e[0],e[1],e[2]]]]).next().then(function(r,o){var a=r.done,i=r.value;return a?t.db.table(12).fetch([[[e[1]]],"messageId"]).next().then(function(n,r){var o=n.done,a=n.value;return o?0:(r=a.item,t.sequence([function(n){return t.forEach(t.filter(t.db.table(226).fetch([[[e[0],e[1],e[2]]],"optimistic"]),function(n){return t.i64.eq(n.threadKey,e[0])&&n.messageId===e[1]&&t.i64.eq(n.reactionFbid,e[2])&&t.i64.lt(n.authorityLevel,e[5])}),function(e){return e.delete()})},function(n){return t.db.table(226).add({messageId:e[1],threadKey:e[0],reactionFbid:e[2],messageTimestamp:r.timestampMs,authorityLevel:e[5],count:e[4],viewerIsReactor:e[6],viewerReactionTimestampMs:e[7],lastUpdatedTimestampMs:e[8]})}]))}):(o=i.item,n[2]=o.lastUpdatedTimestampMs,n[1]=o.authorityLevel,t.i64.eq(e[5],t.i64.cast([0,20]))||t.i64.eq(n[1],t.i64.cast([0,80]))&&t.i64.eq(e[5],t.i64.cast([0,80]))||t.i64.eq(n[1],t.i64.cast([0,20]))&&t.i64.eq(e[5],t.i64.cast([0,80]))&&t.i64.le(t.i64.add(n[2],t.i64.cast([0,2e3])),e[8])||t.i64.eq(n[1],t.i64.cast([0,20]))&&t.i64.eq(e[5],t.i64.cast([0,60]))||t.i64.eq(n[1],t.i64.cast([0,60]))&&t.i64.eq(e[5],t.i64.cast([0,80]))&&t.i64.le(n[2],e[8])?n[3]=!0:n[3]=!1,n[3]?t.db.table(226).put({messageId:e[1],threadKey:e[0],reactionFbid:e[2],messageTimestamp:o.messageTimestamp,reactionLiteral:e[3],count:e[4],authorityLevel:e[5],viewerIsReactor:e[6],viewerReactionTimestampMs:t.i64.cast([0,0]),lastUpdatedTimestampMs:e[8]}):t.resolve())})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOrInsertReactionV2StoredProcedure",e.__tables__=["reactions_v2","messages"],a.exports=e}),null);
__d("LSOptimisticUpsertReactionV2",["LSCancelTaskByQueueName","LSDeleteReaction","LSIssueNewTaskWithExtraOperations","LSUpdateOrInsertReactionV2","LSUpsertReaction"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return t.i64.eq(e[8],t.i64.cast([0,2]))?t.sequence([function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[16]=t.i64.cast([0,1]):(n=a.item,r[25]=n.syncGroup,t.i64.neq(r[25],void 0)?r[24]=r[25]:r[24]=t.i64.cast([0,1]),r[16]=r[24])})},function(o){return r[18]=new t.Map,r[18].set("thread_id",e[1]),r[18].set("message_id",e[2]),r[18].set("message_timestamp",e[3]),r[18].set("actor_id",e[0]),r[18].set("reaction_fbid",e[4]),r[18].set("reaction_style",e[7]),r[18].set("operation",e[8]),r[18].set("viewer_is_reactor",e[6]),r[18].set("current_count",e[5]),r[18].set("reaction_literal",e[9]),r[18].set("sync_group",r[16]),r[19]=t.createArray(),r[20]=(r[19].push("reaction_v2"),r[19]),r[21]=r[18].get("message_id"),r[22]=(r[19].push(r[21]),r[19]),r[23]=t.toJSON(r[19]),t.storedProcedure(n("LSCancelTaskByQueueName"),r[23],t.i64.cast([0,604]))}]):t.resolve()},function(o){return[t.i64.cast([0,2]),t.i64.cast([0,3])].some(function(n){return t.i64.eq(e[8],n)})?r[0]=t.i64.add(e[5],t.i64.cast([-1,4294967295])):r[0]=t.i64.add(e[5],t.i64.cast([0,1])),[t.i64.cast([0,2]),t.i64.cast([0,3])].some(function(n){return t.i64.eq(e[8],n)})?r[1]=!1:r[1]=!0,r[2]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSUpdateOrInsertReactionV2"),e[1],e[2],e[4],e[9],r[0],t.i64.cast([0,20]),r[1],t.i64.cast([0,0]),r[2])},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[3]=void 0:(t=o.item,r[3]=t.threadType)})},function(o){return t.i64.neq(r[3],t.i64.cast([0,23]))?[t.i64.cast([0,2]),t.i64.cast([0,3])].some(function(n){return t.i64.eq(e[8],n)})?t.i64.eq(e[8],t.i64.cast([0,2]))?t.storedProcedure(n("LSDeleteReaction"),e[1],e[2],e[0]):t.sequence([function(n){return t.filter(t.db.table(8).fetch([[[e[1],e[2],e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===e[2]&&t.i64.eq(n.actorId,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))}).next().then(function(e,t){var n=e.done,o=e.value;return n?r[16]=void 0:(t=o.item,r[16]=t.reaction)})},function(o){return e[9]!==void 0?(e[9]==="\u2764\uFE0F"||e[9]==="\u2764\uFE0F"?r[18]="\u2764":r[18]=e[9],r[18]===r[16]?t.storedProcedure(n("LSDeleteReaction"),e[1],e[2],e[0]):t.resolve()):t.resolve()}]):e[9]!==void 0?(e[9]==="\u2764\uFE0F"||e[9]==="\u2764\uFE0F"?r[16]="\u2764":r[16]=e[9],r[17]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSUpsertReaction"),e[1],e[3],e[2],e[0],r[16],t.i64.cast([0,20]),r[17])):t.resolve():t.resolve()},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[5]=t.i64.cast([0,1]):(n=a.item,r[17]=n.syncGroup,t.i64.neq(r[17],void 0)?r[16]=r[17]:r[16]=t.i64.cast([0,1]),r[5]=r[16])})},function(n){return r[7]=new t.Map,r[7].set("thread_id",e[1]),r[7].set("message_id",e[2]),r[7].set("message_timestamp",e[3]),r[7].set("actor_id",e[0]),r[7].set("reaction_fbid",e[4]),r[7].set("reaction_style",e[7]),r[7].set("current_count",e[5]),r[7].set("viewer_is_reactor",e[6]),r[7].set("operation",e[8]),r[7].set("reaction_literal",e[9]),r[7].set("entry_point",void 0),r[7].set("sync_group",r[5]),t.db.table(9).fetch([[[e[1]]]]).next().then(function(n,o){var a=n.done,i=n.value;return a?r[8]=!1:(o=i.item,t.sequence([function(n){return t.filter(t.db.table(14).fetch([[[o.threadKey,e[0]]]]),function(n){return t.i64.eq(n.threadKey,o.threadKey)&&t.i64.eq(t.i64.cast([0,0]),o.mailboxType)&&t.i64.eq(n.contactId,e[0])}).next().then(function(e,n){var a=e.done,i=e.value;return a?r[16]=!1:(n=i.item,t.i64.eq(o.threadType,t.i64.cast([0,152]))?(r[19]=n.threadRoles,t.i64.lt(t.i64.cast([0,7]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,7]),t.i64.cast([0,9]))?r[20]=!1:r[20]=!t.i64.eq(t.i64.and_(t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.cast([0,7]))),r[19]),t.i64.cast([0,0])),r[21]=o.capabilities,r[22]=o.capabilities2,r[23]=o.capabilities3,r[24]=o.capabilities4,r[25]=o.capabilities5,r[27]=t.i64.div(t.i64.cast([0,223]),t.i64.cast([0,64])),r[28]=t.i64.lsl_(t.i64.cast([0,1]),t.i64.to_int32(t.i64.sub(t.i64.cast([0,223]),t.i64.mul(r[27],t.i64.cast([0,64]))))),t.i64.lt(t.i64.cast([0,223]),t.i64.cast([0,0]))||t.i64.gt(t.i64.cast([0,223]),t.i64.cast([0,301]))?r[26]=!1:(t.i64.eq(r[27],t.i64.cast([0,0]))?r[29]=!t.i64.eq(t.i64.and_(r[28],r[21]),t.i64.cast([0,0])):(t.i64.eq(r[27],t.i64.cast([0,1]))?r[30]=!t.i64.eq(t.i64.and_(r[28],r[22]),t.i64.cast([0,0])):(t.i64.eq(r[27],t.i64.cast([0,2]))?r[31]=!t.i64.eq(t.i64.and_(r[28],r[23]),t.i64.cast([0,0])):(t.i64.eq(r[27],t.i64.cast([0,3]))?r[32]=!t.i64.eq(t.i64.and_(r[28],r[24]),t.i64.cast([0,0])):(t.i64.eq(r[27],t.i64.cast([0,4]))?r[33]=!t.i64.eq(t.i64.and_(r[28],r[25]),t.i64.cast([0,0])):r[33]=!1,r[32]=r[33]),r[31]=r[32]),r[30]=r[31]),r[29]=r[30]),r[26]=r[29]),r[20]!==r[26]&&((function(e){t.logger(e).mustfix(e)})("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting"),t.throw("LS::assert is failed. Thread role and thread capability don't agree for Broadcast Channels message-as-page functionality; aborting")),r[18]=r[20]):r[18]=!1,r[16]=r[18])})},function(e){return r[8]=r[16]}]))})},function(e){return r[8]&&r[7].set("perform_action_as_page",!0),r[10]=t.createArray(),r[11]=(r[10].push("reaction_v2"),r[10]),r[12]=r[7].get("message_id"),r[13]=(r[10].push(r[12]),r[10]),r[14]=t.toJSON(r[10]),r[15]=t.toJSON(r[7]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),r[14],t.i64.cast([0,604]),r[15],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpsertReactionV2StoredProcedure",e.__tables__=["threads","reactions","participants"],a.exports=e}),null);
__d("LSOptimisticUpsertReactionV2StoredProcedure",["LSOptimisticUpsertReactionV2","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticUpsertReactionV2"),a.actorId,a.threadId,a.messageId,a.messageTimestamp,a.reactionFbid,a.currentCount,a.viewerIsReactor,a.reactionStyle,a.operation,a.reactionLiteral);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LexicalComposerContext",["cr:509"],(function(t,n,r,o,a,i){a.exports=n("cr:509")}),null);
__d("LexicalUtils",["cr:2774"],(function(t,n,r,o,a,i){a.exports=n("cr:2774")}),null);
__d("MAWEditMessageContext.react",["emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useMemo,m=u.useState;function p(e){var t=o("react-compiler-runtime").c(5),n=e.children,r=m(null),a=r[0],i=r[1],l;t[0]!==a?(l={editMessageData:a,setEditMessageData:i},t[0]=a,t[1]=l):l=t[1];var u=l,c;return t[2]!==n||t[3]!==u?(c=s.jsx(_.Provider,{value:u,children:n}),t[2]=n,t[3]=u,t[4]=c):c=t[4],c}var _=c({editMessageData:null,setEditMessageData:r("emptyFunction")});l.MAWEditMessageContext=p,l.Context=_}),98);
__d("MWDeleteAllDBs",["MAWEncryptionIndexedDbV2","MAWIndexedDBDeletion","cr:10030"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t){n("cr:10030")&&await n("cr:10030").deleteIndexedDB(e),await o("MAWIndexedDBDeletion").deleteMAWPersistence(),(t==null?void 0:t.deleteEncryptionDB)===!0&&await o("MAWEncryptionIndexedDbV2").deleteEncryptionDB_UNSAFE(void 0,"delete_all_dbs")}l.deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING=e}),98);
__d("MAWEncryptionErrorHandler",["FBLogger","MAWSetupWorker","MWDeleteAllDBs","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";async function e(){var e="MAWEARKeychainDecryptionError",t="error";try{return await o("MAWSetupWorker").terminateWorker(e),o("MWDeleteAllDBs").deleteAllDBs_DO_NOT_USE_UNLESS_YOU_KNOW_WHAT_YOU_ARE_DOING(t,{deleteEncryptionDB:!0})}catch(o){var n=r("getErrorSafe")(o);r("FBLogger")("messenger_web").catching(n).mustfixThrow("Fail to delete dbs from: %s terminateWorkerReason: %s",t,e)}}l.handleEARKeychainError=e}),98);
__d("MAWIssueReceiverFetchTask",["LSDispatchMediaReceiverFetchForWebStoredProcedure","LSFactory","MAWBridgeUpdateClientMediaStatusHandler","MAWMediaDownloadStatus","WAHashUtils","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a){return r("promiseDone")(o("MAWBridgeUpdateClientMediaStatusHandler").call(e,{details:"issue_receiver_fetch_task",key:o("WAHashUtils").stringToPlaintextHash(t),status:r("MAWMediaDownloadStatus").DOWNLOADING,type:"main"})),e.runInTransaction(function(e){return r("LSDispatchMediaReceiverFetchForWebStoredProcedure")(r("LSFactory")(e),{messageId:t,receiverFetchId:n,shouldFetchAccessibilitySummaryText:!0,threadKey:a})},"readwrite",void 0,void 0,i.id+":38")}l.issueReceiverFetchTask=e}),98);
__d("useIsLastNonAdminMessage",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s=10;function u(t,n){var a=o("react-compiler-runtime").c(6),l=(e||(e=r("useReStore")))(),u;a[0]!==l.tables.messages||a[1]!==t?(u=function(){return o("ReQL").fromTableDescending(l.tables.messages.index("messageDisplayOrder"),["messageId","isAdminMessage"]).getKeyRange(t).take(s).filter(c)},a[0]=l.tables.messages,a[1]=t,a[2]=u):u=a[2];var d;a[3]!==l||a[4]!==t?(d=[l,t],a[3]=l,a[4]=t,a[5]=d):d=a[5];var m=o("ReQLSuspense").useFirst(u,d,i.id+":29");return(m==null?void 0:m.messageId)===n}function c(e){return e.isAdminMessage===!1}l.default=u}),98);
__d("MessageReactionOperation",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADD:1,REMOVE:2,REMOVE_MULTI_REACT:3});i.default=e}),66);
__d("MessageReactionStyle",[],(function(t,n,r,o,a,i){var e=Object.freeze({NONE:0,BASIC_SUPER_REACT_ANIMATION:1,FB_EMOJI:2,FB_NON_DEFAULT_EMOJI:3});i.default=e}),66);
__d("useMWPSendOrUnsendReaction",["FBLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpsertReactionStoredProcedure","LSOptimisticUpsertReactionV2StoredProcedure","MWPActor.react","MessageReactionOperation","MessageReactionStyle","ReQL","promiseDone","react-compiler-runtime","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useMWLSDefaultThreadSourceAndResetAttribution","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e,t,n,a,l,u){r("promiseDone")(e.runInTransaction(function(e){return r("LSOptimisticUpsertReactionV2StoredProcedure")(r("LSFactory")(e),{actorId:t,currentCount:l,messageId:n.messageId,messageTimestamp:n.timestampMs,operation:(s||(s=o("LSIntEnum"))).ofNumber(r("MessageReactionOperation").ADD),reactionFbid:a,reactionLiteral:u,reactionStyle:s.ofNumber(r("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:n.threadKey,viewerIsReactor:!0})},"readwrite",void 0,void 0,i.id+":42"))}async function d(e,t,n,a,l,u,c){await e.runInTransaction(function(e){return r("LSOptimisticUpsertReactionV2StoredProcedure")(r("LSFactory")(e),{actorId:t,currentCount:a,messageId:n.messageId,messageTimestamp:n.timestampMs,operation:(s||(s=o("LSIntEnum"))).ofNumber(c?r("MessageReactionOperation").REMOVE_MULTI_REACT:r("MessageReactionOperation").REMOVE),reactionFbid:l,reactionLiteral:u,reactionStyle:s.ofNumber(r("MessageReactionStyle").BASIC_SUPER_REACT_ANIMATION),threadId:n.threadKey,viewerIsReactor:!1})},"readwrite",void 0,void 0,i.id+":72")}function m(e,t,n,a,i){r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.reactions_v2).getKeyRange(n.threadKey,n.messageId,a)).then(function(r){r!=null?c(e,t,n,a,r.count,i):c(e,t,n,a,(u||(u=o("I64"))).zero,i)}))}function p(t){var n=o("react-compiler-runtime").c(7),a=(e||(e=r("useReStore")))(),l=o("MWPActor.react").useActor(),s=r("useMWLSDefaultThreadSourceAndResetAttribution")(),c=o("useIsMultiReactionEnabled").useIsMultiReactEnabled(t.threadKey),p,_;return n[0]!==l||n[1]!==a||n[2]!==s||n[3]!==c||n[4]!==t?(p=function(n){r("promiseDone")((async function(){var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.threads).getKeyRange(t.threadKey)),p=e?o("useIsReactionsV2Enabled").isReactionsV2Enabled(e):!1;if(p){var _=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.reaction_v2_types).filter(function(e){return e.reactionLiteral===n||e.reactionLiteralVariant16===n}));if(_!=null){var f=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.reactions_v2).getKeyRange(t.threadKey,t.messageId).filter(function(e){return(!c||(u||(u=o("I64"))).equal(e.reactionFbid,_.reactionFbid))&&e.viewerIsReactor}));if(f==null)return m(a,l,t,_.reactionFbid,n);var g=(u||(u=o("I64"))).equal(f.reactionFbid,_.reactionFbid);(!c||g)&&await d(a,l,t,f.count,f.reactionFbid,n,c),g||await m(a,l,t,_.reactionFbid,n)}else r("FBLogger")("messenger_web").warn("Reactions v2: trying to send reaction that is not in reaction_v2_types table");return}return a.runInTransaction(function(e){return r("LSOptimisticUpsertReactionStoredProcedure")(r("LSFactory")(e),{actorId:l,messageId:t.messageId,reaction:n,sendAttribution:s(t.threadKey),threadKey:t.threadKey,timestampMs:(u||(u=o("I64"))).of_float(Date.now())})},"readwrite",void 0,void 0,i.id+":227")})())},_=[a,t,c,l,s],n[0]=l,n[1]=a,n[2]=s,n[3]=c,n[4]=t,n[5]=p,n[6]=_):(p=n[5],_=n[6]),o("Int64Hooks").useCallbackInt64(p,_)}l.default=p}),98);
__d("MAWPSendOrRemoveReaction.react",["I64","Int64Hooks","LSMessagingThreadAttributionType","MAWExternalId","MAWODSProxy","MWLSThread","MWPActor.react","WAOdsEnums","cr:12043","cr:9778","promiseDone","requireDeferred","sendToSentQPLLogger","useIsLastNonAdminMessage","useIsSecureMessage","useLSMessagingSource","useMWPSendOrUnsendReaction","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("MWLogMessageAction").__setRef("MAWPSendOrRemoveReaction.react");function c(t,a,i){var l,c=(s||(s=r("useReStore")))(),d=o("MWPActor.react").useActor(),m=(l=n("cr:9778")==null?void 0:n("cr:9778").useSendOrRemoveReaction(t.threadKey,(e||(e=o("I64"))).to_string(t.senderId)))!=null?l:null,p=r("useIsSecureMessage")(c,t,{fallbackIsSecure:a}),_=r("useIsLastNonAdminMessage")(t.threadKey,t.messageId),f=r("useMWPSendOrUnsendReaction")(t),g=r("useLSMessagingSource")(),h=o("MWLSThread").useThread(t.threadKey);return o("Int64Hooks").useMemoInt64(function(){return(function(e,l,s){if(_&&n("cr:12043")!=null&&n("cr:12043").touchThreadMetadata(t.threadKey),p&&m!==null){var g=o("MAWExternalId").generateExternalId(),y=function(n){return m(e,l,n,g).then(function(e){return[e]})},C=o("sendToSentQPLLogger").markSendToSentStartWithAnnotation(h,{isReaction:!0},r("LSMessagingThreadAttributionType").UNKNOWN,void 0,void 0,g);r("promiseDone")(y(C)),o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"post-cutover_msg"})}else a&&o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_SEND_REACTION,key:"pre-cutover_msg"}),f(l!=null?l:"");u.onReady(function(e){return r("promiseDone")(e.log(c,t.messageId,t.threadKey,i,s,void 0,void 0,void 0,t.senderId,void 0,d))})})},[_,p,m,a,f,c,g,h,t.messageId,t.threadKey,t.senderId,i,d])}l.useSendOrRemoveReaction=c}),98);
__d("MLCInstrumentationCommands",["Lexical"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=o("Lexical")).createCommand(),u=e.createCommand(),c=e.createCommand(),d=e.createCommand(),m=e.createCommand();l.COMMIT_COMMAND=s,l.INTERACTION_INSTRUMENTATION_READY=u,l.DOCUMENT_COMMAND=c,l.PLUGIN_EVENT_COMMAND=d,l.FORMAT_BLOCK_COMMAND=m}),98);
__d("MWCMSubthreadChatTabContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=c({pushSubthreadViewPage:null});function _(){return d(p)}function f(e){var t=o("react-compiler-runtime").c(5),n=e.children,r=e.pushSubthreadViewPage,a;t[0]!==r?(a={pushSubthreadViewPage:r},t[0]=r,t[1]=a):a=t[1];var i=a,l;return t[2]!==n||t[3]!==i?(l=s.jsx(p.Provider,{value:i,children:n}),t[2]=n,t[3]=i,t[4]=l):l=t[4],l}l.useSubthreadChatTabContext=_,l.MWCMSubthreadChatTabContextProvider=f}),98);
__d("MWCMSubthreadsInboxFocusContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=u.useState,_=c({isSubthreadFocused:!1,setIsSubthreadFocused:function(){}});function f(){return d(_)}function g(e){var t=o("react-compiler-runtime").c(5),n=e.children,r=p(!1),a=r[0],i=r[1],l;t[0]!==a?(l={isSubthreadFocused:a,setIsSubthreadFocused:i},t[0]=a,t[1]=l):l=t[1];var u=l,c;return t[2]!==n||t[3]!==u?(c=s.jsx(_.Provider,{value:u,children:n}),t[2]=n,t[3]=u,t[4]=c):c=t[4],c}l.useIsSubthreadFocusedContext=f,l.MWCMIsSubthreadFocusedContextProvider=g}),98);
__d("MWChatPromptFlyoutFrontCard.react",["fbt","BaseTextArea.react","CometPlaceholder.react","MWChatPollFacepile.react","MWPActor.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore","vulture"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=150,m=200,p=16,_={textarea:{background:"x11g6tue",borderTopStyle:"x1ejq31n",borderInlineEndStyle:"x18oe1m7",borderBottomStyle:"x1sy0etr",borderInlineStartStyle:"xstzfhl",color:"xzsf02u",fontSize:"x6prxxf",fontWeight:"x1xlr1w8",height:"x1m3v4wt",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,textAlign:"x2b8uid",width:"xrostsh",$$css:!0}};function f(){var t=o("react-compiler-runtime").c(8);r("vulture")("--I5l4MGyBjEFx_7p5moc1YSO7o=");var n=(e||(e=r("useReStore")))(),a=o("MWPActor.react").useActor(),l;t[0]!==n.tables.contacts||t[1]!==a?(l=function(){return o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(a).map(g)},t[0]=n.tables.contacts,t[1]=a,t[2]=l):l=t[2];var s;t[3]!==n||t[4]!==a?(s=[n,a],t[3]=n,t[4]=a,t[5]=s):s=t[5];var u=o("ReQLSuspense").useFirst(l,s,i.id+":72"),d;if(t[6]!==u){var m=u!=null?[{profile_picture_url:u}]:[];d=c.jsx(r("MWChatPollFacepile.react"),{contacts:m,direction:"reversed",gap:"negative",size:"mediumLarge"}),t[6]=u,t[7]=d}else d=t[7];return d}function g(e){return e.profilePictureUrl}function h(e){var t=o("react-compiler-runtime").c(12),n=e.maxLength,a=e.onChange,i=e.showFacepile,l=e.value,u=i===void 0?!1:i,d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={className:"x9bbmet xbjudin xnlwouz xpp8er5 xs9wviy xi1c1fh xdt5ytf x1iyjqo2 x2lah0s x1m3v4wt x1gslohp x12nagc x1n2onr6 xrostsh x1vjfegm"},t[0]=d):d=t[0];var m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=s._(/*BTDS*/"Prompt"),t[1]=m):m=t[1];var p;t[2]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"Type something"),t[2]=p):p=t[2];var g;t[3]!==n||t[4]!==a||t[5]!==l?(g=c.jsx(r("BaseTextArea.react"),{"aria-label":m,maxLength:n,onChange:a,placeholder:p,suppressFocusRing:!0,unresizable:!0,value:l,xstyle:_.textarea}),t[3]=n,t[4]=a,t[5]=l,t[6]=g):g=t[6];var h;t[7]!==u?(h=u?c.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWChatPromptFlyoutFrontCard",children:c.jsx("div",{className:"xvc5jky x11t971q x1l90r2v",children:c.jsx(f,{})})}):null,t[7]=u,t[8]=h):h=t[8];var y;return t[9]!==g||t[10]!==h?(y=c.jsxs("div",babelHelpers.extends({},d,{children:[g,h]})),t[9]=g,t[10]=h,t[11]=y):y=t[11],y}l.default=h}),226);
__d("MWChatReactionsActionContainer.react",["JSResourceForInteraction","MWV2MessageRowIsRowFocusedContext.react","MWXLazyPopoverTrigger.react","MWXPopoverLoadingState.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext,m=u.useState,p={popoverLoading:{minHeight:"x1wiwyrm",minWidth:"x1q6reyq",$$css:!0}};function _(e){var t=o("react-compiler-runtime").c(28),n=e.align,a=e.alwaysShowEmojiPicker,i=e.children,l=e.closeActionsMenu,u=e.disableCustomReactions,c=e.disableReflowToPositionOnNarrowWidth,_=e.hasReactionsV2,f=e.isBroadcastChannel,g=e.isBroadcastThread,h=e.isSecure,y=e.messageID,C=e.onVisibilityChange,b=e.reactionsPopoverResource,v=e.sendReaction,S=n===void 0?"middle":n,R=a===void 0?!1:a,L=u===void 0?!1:u,E=c===void 0?!1:c,k=h===void 0?!1:h,I=d(o("MWV2MessageRowIsRowFocusedContext.react").context),T;t[0]!==b?(T=b!=null?b:r("JSResourceForInteraction")("MWChatReactionsMenu.react").__setRef("MWChatReactionsActionContainer.react"),t[0]=b,t[1]=T):T=t[1];var D=T,x=m(!1),$=x[0],P=x[1],N=R||$,M;t[2]!==l||t[3]!==_||t[4]!==v?(M=function(t,n){var e=n[0],r=_!==!0&&e===t;return v(t,r),l()},t[2]=l,t[3]=_,t[4]=v,t[5]=M):M=t[5];var w=M,A;t[6]!==I||t[7]!==C?(A=function(t){t||P(!1),C(t),I.setFocused(t)},t[6]=I,t[7]=C,t[8]=A):A=t[8];var F=A,O=S==="end_"?"end":S,B;t[9]===Symbol.for("react.memo_cache_sentinel")?(B=s.jsx(r("MWXPopoverLoadingState.react"),{withArrow:!1,xstyle:p.popoverLoading}),t[9]=B):B=t[9];var W;t[10]!==l||t[11]!==L||t[12]!==f||t[13]!==g||t[14]!==k||t[15]!==y||t[16]!==w||t[17]!==N?(W={closeActionsMenu:l,disableCustomReactions:L,isBroadcastChannel:f,isBroadcastThread:g,isSecure:k,messageID:y,onClose:r("emptyFunction"),onSelect:w,setShowEmojiPicker:P,showEmojiPicker:N},t[10]=l,t[11]=L,t[12]=f,t[13]=g,t[14]=k,t[15]=y,t[16]=w,t[17]=N,t[18]=W):W=t[18];var q=N?"dialog":"menu",U=N?"below":"above",V;return t[19]!==i||t[20]!==E||t[21]!==F||t[22]!==D||t[23]!==W||t[24]!==q||t[25]!==U||t[26]!==O?(V=s.jsx(r("MWXLazyPopoverTrigger.react"),{align:O,disableReflowToPositionOnNarrowWidth:E,fallback:B,onVisibilityChange:F,popoverProps:W,popoverResource:D,popoverType:q,position:U,preloadTrigger:"button",children:i}),t[19]=i,t[20]=E,t[21]=F,t[22]=D,t[23]=W,t[24]=q,t[25]=U,t[26]=O,t[27]=V):V=t[27],V}l.default=_}),98);
__d("MWFalcoFeatureEventLogger",["I64","LSMessagingThreadTypeUtil","MessengerWebEventsFalcoEvent","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a,i,l){r("gkx")("23390")||r("MessengerWebEventsFalcoEvent").log(function(){return{entry_point:t,event_name:n,is_secured:o("LSMessagingThreadTypeUtil").isArmadilloSecure(l),other_user_fbid:a!=null?(e||(e=o("I64"))).to_string(a):null,thread_fbid:(e||(e=o("I64"))).to_string(i)}})}l.logEvent=s}),98);
__d("useAttachmentDataLS",["I64","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){var t,n=o("react-compiler-runtime").c(9),a=(s||(s=r("useReStore")))(),l;n[0]!==a||n[1]!==e.messageId||n[2]!==e.threadKey?(l=function(){return o("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(e.threadKey,e.messageId).map(function(e){var t=m(a,e);return{attachment:e,attachmentCTAs:t}})},n[0]=a,n[1]=e.messageId,n[2]=e.threadKey,n[3]=l):l=n[3];var u;n[4]!==a||n[5]!==e?(u=[e,a],n[4]=a,n[5]=e,n[6]=u):u=n[6];var p=o("ReQLSuspense").useArray(l,u,i.id+":41").toSorted(d),_=(t=p[0])==null?void 0:t.attachment,f=o("ReQLSuspense").useArray(function(){return _==null?o("ReQL").empty():o("ReQL").fromTableAscending(a.tables.attachment_items).getKeyRange(_.attachmentFbid).map(function(e){var t=m(a,e);return{attachmentItem:e,attachmentItemCTAs:t}})},[_,a],i.id+":60").reduce(c,[[],[]]),g=f[0],h=f[1],y=[];p.map(function(e){y.push(e.attachment)});var C;if(g.length>0)C=h;else{var b,v=(b=p[0])==null?void 0:b.attachmentCTAs,S;n[7]!==v?(S=v?[v]:[],n[7]=v,n[8]=S):S=n[8],C=S}return{attachmentCTAs:C,attachmentItems:g,attachments:y}}function c(e,t){var n=t.attachmentItem,r=t.attachmentItemCTAs;return e[0].push(n),e[1].push(r),e}function d(t,n){return(e||(e=o("I64"))).compare(t.attachment.attachmentIndex,n.attachment.attachmentIndex)}function m(e,t){var n={},r=t.attachmentCta1Id,a=t.attachmentCta2Id,l=t.attachmentCta3Id,s=t.defaultCtaId;return n.defaultCta=s!=null?o("ReQLSuspense").first(o("ReQL").fromTableAscending(e.tables.attachment_ctas).getKeyRange(s),i.id+":113"):void 0,n.attachmentCta1=r!=null?o("ReQLSuspense").first(o("ReQL").fromTableAscending(e.tables.attachment_ctas).getKeyRange(r),i.id+":121"):void 0,n.attachmentCta2=a!=null?o("ReQLSuspense").first(o("ReQL").fromTableAscending(e.tables.attachment_ctas).getKeyRange(a),i.id+":129"):void 0,n.attachmentCta3=l!=null?o("ReQLSuspense").first(o("ReQL").fromTableAscending(e.tables.attachment_ctas).getKeyRange(l),i.id+":137"):void 0,n}l.useAttachmentDataLS=u}),98);
__d("fetchOpenMissingMessage",["FBLogger","I64","LSFactory","LSMessagePointQueryStoredProcedure"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,a){var l,s=(e||(e=o("I64"))).to_int32((l=n.syncGroup)!=null?l:(e||(e=o("I64"))).neg_one);if(s!==-1&&s===95){r("FBLogger")("messenger_web").mustfix("fetchMissingMessage: incorrect call to MPQ with secure mailbox");return}await t.runInTransaction(function(e){return r("LSMessagePointQueryStoredProcedure")(r("LSFactory")(e),{messageId:a,threadKey:n.threadKey,threadType:n.threadType})},"readwrite",void 0,void 0,i.id+":38")}l.default=s}),98);
__d("fetchSecureMissingMessage",["MAWBridgeSendAndReceive","MAWMiActOnActThreadReady","MAWMpsGating","MAWPutMessagesToDB","MpsMessageToLoadResponse","MpsOverBridge","MpsTypes","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r,a){var i=await o("MAWMiActOnActThreadReady").waitForACTThreadReady(e.tables,t,a),l=i.chatJid;if(o("MAWMpsGating").isMpsMessageRendering()){var u=await o("MpsOverBridge").mps().loadMessage({config:{strategy:"local-first"},debug:{purpose:"fetchSecureMissingMessageFullMps"},messageId:o("MpsTypes").toMessageId(n),threadId:o("MpsTypes").toThreadId(l)});if(u.value!=null){var c=babelHelpers.extends({},o("MpsMessageToLoadResponse").messageToLoadMsgsResponse([u.value]),{hasMoreAfter:!1,hasMoreBefore:!1});await o("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(e,c)}return}var d=await s({config:{admin:!0,editMsgHistory:!1,media:!0,polls:!0,reactions:!1,receiverFetch:!0,xma:!0},externalId:n});await o("MAWPutMessagesToDB").insertMessageResponseIntoDatabaseByExternalId(e,d),!(d.msgs.length>0||!r)&&await o("MpsOverBridge").mps().copMps.loadMsgIntoMaw({config:{shouldFetchSupplementals:!0,shouldFetchTags:!1,strategy:"full-fetch"},debug:{purpose:"fetchSecureMissingMessageM3"},messageId:o("MpsTypes").toMessageId(n),threadId:o("MpsTypes").toThreadId(l)})}async function s(e){var t=e.config,n=e.externalId;return babelHelpers.extends({},await o("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMsgsByExternalId",{config:t,externalId:o("WAStanzaUtils").toStanzaId(n)}))}l.default=e}),98);
__d("useGetOriginalMsgFromBumpMsg",["FBLogger","LSMessagingThreadTypeUtil","MAWFetchExternalIdUsingCache","MWEBEntrypointsKillswitch.enum","ReQL","ReQLSuspense","fetchOpenMissingMessage","fetchSecureMissingMessage","isMWBumpMessage","promiseDone","react-compiler-runtime","useMWEBBackupState","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var l=o("react-compiler-runtime").c(14),s;l[0]!==t?(s=r("isMWBumpMessage")(t),l[0]=t,l[1]=s):s=l[1];var u=s,c=(e||(e=r("useReStore")))(),d;l[2]===Symbol.for("react.memo_cache_sentinel")?(d={entrypoint:r("MWEBEntrypointsKillswitch.enum").BUMP_MESSAGES},l[2]=d):d=l[2];var m=r("useMWEBBackupState")(d),p;l[3]!==c.tables.threads||l[4]!==a?(p=function(){return a!=null?o("ReQL").fromTableAscending(c.tables.threads,["threadKey","threadType","syncGroup"]).getKeyRange(a):o("ReQL").empty()},l[3]=c.tables.threads,l[4]=a,l[5]=p):p=l[5];var _;l[6]!==c||l[7]!==a?(_=[c,a],l[6]=c,l[7]=a,l[8]=_):_=l[8];var f=o("ReQLSuspense").useFirst(p,_,i.id+":40"),g,h;l[9]!==c.tables.messages||l[10]!==u||l[11]!==n?(g=function(){return n!=null&&u?o("ReQL").fromTableDescending(c.tables.messages.index("messageId")).getKeyRange(n):o("ReQL").empty()},h=[c.tables.messages,n,u],l[9]=c.tables.messages,l[10]=u,l[11]=n,l[12]=g,l[13]=h):(g=l[12],h=l[13]);var y=o("ReQLSuspense").useFirst(g,h,i.id+":52");if(y==null&&f!=null&&n!=null&&u)if(o("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType)){var C=m===3;r("promiseDone")(o("MAWFetchExternalIdUsingCache").fetchExternalIdUsingCache(n).then(function(e){e!=null?r("promiseDone")(r("fetchSecureMissingMessage")(c,f.threadKey,e,C,"MAWFetchBumpMessage")):r("FBLogger")("mw_bump_message").warn("[useGetOriginalMsgFromBumpMsg] failed fetch external id, invalid msgId %s",n)}))}else r("promiseDone")(r("fetchOpenMissingMessage")(c,f,n));return y}l.default=s}),98);
__d("useAttachmentData",["react-compiler-runtime","useAttachmentDataLS","useGetOriginalMsgFromBumpMsg"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("react-compiler-runtime").c(4),a=r("useGetOriginalMsgFromBumpMsg")(e.replyType,e.replySourceId,e.threadKey),i=a!=null?a:e,l=o("useAttachmentDataLS").useAttachmentDataLS(i),s=l.attachmentCTAs,u=l.attachmentItems,c=l.attachments,d;return n[0]!==s||n[1]!==u||n[2]!==c?(d={attachmentCTAs:s,attachmentItems:u,attachments:c},n[0]=s,n[1]=u,n[2]=c,n[3]=d):d=n[3],d}l.useAttachmentData=e}),98);
__d("MWPAttachmentDataContext",["FBLogger","I64","ReQL","ReQLSuspense","react","react-compiler-runtime","useAttachmentData","useAttachmentDataLS","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=u,m=d.createContext,p=d.useContext,_=m({attachmentCTAs:[],attachmentItems:[],attachments:[]});function f(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.isSecureMessage,a=e.message,i=o("useAttachmentData").useAttachmentData(a,r),l;return t[0]!==i||t[1]!==n?(l=c.jsx(_.Provider,{value:i,children:n}),t[0]=i,t[1]=n,t[2]=l):l=t[2],l}function g(e){var t=o("react-compiler-runtime").c(3),n=e.attachmentData,r=e.children,a;return t[0]!==n||t[1]!==r?(a=c.jsx(_.Provider,{value:n,children:r}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}function h(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.message,a=o("useAttachmentDataLS").useAttachmentDataLS(r),i;return t[0]!==a||t[1]!==n?(i=c.jsx(_.Provider,{value:a,children:n}),t[0]=a,t[1]=n,t[2]=i):i=t[2],i}function y(e){var t=p(_).attachments,n=C(e);return t.length===0&&n.length>0?(r("FBLogger")("messenger_web_media","attachment_context_missing").info("MWPAttachmentContext is not set, failed to retrieve attachments from context, instead retrieved attachments directly from LSDB"),n):t}function C(t){var n=o("react-compiler-runtime").c(10),a=(e||(e=r("useReStore")))(),l;n[0]!==a.tables.attachments||n[1]!==t.messageId||n[2]!==t.threadKey?(l=function(){return o("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(t.threadKey,t.messageId)},n[0]=a.tables.attachments,n[1]=t.messageId,n[2]=t.threadKey,n[3]=l):l=n[3];var s;n[4]!==a||n[5]!==t.messageId||n[6]!==t.threadKey?(s=[a,t.messageId,t.threadKey],n[4]=a,n[5]=t.messageId,n[6]=t.threadKey,n[7]=s):s=n[7];var u=o("ReQLSuspense").useArray(l,s,i.id+":98"),c;return n[8]!==u?(c=u.toSorted(b),n[8]=u,n[9]=c):c=n[9],c}function b(e,t){return(s||(s=o("I64"))).compare(e.attachmentIndex,t.attachmentIndex)}function v(e){var t,n,a,i=(s||(s=o("I64"))).to_int32(e.attachmentIndex),l=(t=p(_).attachmentCTAs[i])!=null?t:{},u=S(e),c=(l==null?void 0:l.defaultCta)==null&&(u==null?void 0:u.defaultCta)!=null||(l==null?void 0:l.attachmentCta1)==null&&(u==null?void 0:u.attachmentCta1)!=null;if(u!=null&&(n=u.attachmentCta1)!=null&&(n=n.type_)!=null&&n.includes("poll")||l!=null&&(a=l.attachmentCta1)!=null&&(a=a.type_)!=null&&a.includes("poll")){var d,m,f={attachmentIndex:i,contextCta1Type:(l==null||(d=l.attachmentCta1)==null?void 0:d.type_)||"null",contextHasCta1:(l==null?void 0:l.attachmentCta1)!=null,contextHasDefaultCta:(l==null?void 0:l.defaultCta)!=null,lsCta1Type:(u==null||(m=u.attachmentCta1)==null?void 0:m.type_)||"null",lsHasCta1:(u==null?void 0:u.attachmentCta1)!=null,lsHasDefaultCta:(u==null?void 0:u.defaultCta)!=null,messageId:e.messageId||"null",shouldUseFallback:c};r("FBLogger")("messenger_web_media","poll_cta_debug").info("Poll CTA debug: %s",JSON.stringify(f))}return c?(r("FBLogger")("messenger_web_media","attachment_context_missing").info("MWPAttachmentContext is not set, failed to retrieve attachmentCTAs from context, instead retrieved attachmentCTAs directly from LSDB"),u):l}function S(t){var n=(e||(e=r("useReStore")))(),o={};return o.defaultCta=R(n,t==null?void 0:t.defaultCtaId),o.attachmentCta1=R(n,t==null?void 0:t.attachmentCta1Id),o.attachmentCta2=R(n,t==null?void 0:t.attachmentCta2Id),o.attachmentCta3=R(n,t==null?void 0:t.attachmentCta3Id),o}function R(e,t){var n=o("react-compiler-runtime").c(4),r,a;return n[0]!==t||n[1]!==e?(r=function(){return t!=null?o("ReQL").fromTableAscending(e.tables.attachment_ctas).getKeyRange(t):o("ReQL").empty()},a=[e,t],n[0]=t,n[1]=e,n[2]=r,n[3]=a):(r=n[2],a=n[3]),o("ReQLSuspense").useFirst(r,a,i.id+":175")}function L(e){var t,n=(t=p(_).attachmentItems)!=null?t:[],o=E(e);return n.length===0&&o.length>0?(r("FBLogger")("messenger_web_media","attachment_context_missing").info("MWPAttachmentContext is not set, failed to retrieve attachmentItems from context, instead retrieved attachmentItems directly from LSDB"),o):n}function E(t){var n=o("react-compiler-runtime").c(6),a=(e||(e=r("useReStore")))(),l;n[0]!==t.attachmentFbid||n[1]!==a.tables.attachment_items?(l=function(){var e=t.attachmentFbid;return o("ReQL").fromTableAscending(a.tables.attachment_items).getKeyRange(e)},n[0]=t.attachmentFbid,n[1]=a.tables.attachment_items,n[2]=l):l=n[2];var s;return n[3]!==t||n[4]!==a?(s=[t,a],n[3]=t,n[4]=a,n[5]=s):s=n[5],o("ReQLSuspense").useArray(l,s,i.id+":205")}l.MWPAttachmentDataContext=_,l.MWPAttachmentDataContextProvider=f,l.MWPAttachmentDataContextProviderMAW=g,l.MWPAttachmentDataContextProviderLS=h,l.useMWPGetAttachments=y,l.useMWPGetAttachmentCTAs=v,l.useMWPGetAttachmentItems=L}),98);
__d("MWPReplyContext.react",["I64","emptyFunction","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.createContext,m=c.useCallback,p=c.useMemo,_=c.useState,f=r("requireDeferred")("MWPReplyLogging").__setRef("MWPReplyContext.react"),g=d({clearReply:r("emptyFunction"),reply:void 0,setReply:r("emptyFunction")});function h(e){try{return JSON.parse(e)}catch(e){return}}function y(e){var t=o("react-compiler-runtime").c(17),n=e.children,r=e.clearThreadReply,a=e.getRepliesState,i=e.persistRepliesState,l=e.senderId,c=e.threadKey,d;t[0]!==a||t[1]!==c?(d=a!=null&&c!=null?h(a((s||(s=o("I64"))).to_string(c))):void 0,t[0]=a,t[1]=c,t[2]=d):d=t[2];var m=d,p=_(m),y=p[0],C=p[1],b;t[3]!==r||t[4]!==y?(b=function(t,n){if(f.onReady(function(e){e.logClearReply(n,t,y!=null)}),C(),r!=null)return r((s||(s=o("I64"))).to_string(t))},t[3]=r,t[4]=y,t[5]=b):b=t[5];var v=b,S;t[6]!==i||t[7]!==y||t[8]!==l?(S=function(t,n){if(f.onReady(function(e){e.logSetReply(y,t,n)}),C(t),i!=null)return i({messageId:t.messageId,offlineThreadingId:t.offlineThreadingId,senderId:l,sendStatusV2:t.sendStatusV2,threadKey:(s||(s=o("I64"))).to_string(n),timestampMs:t.timestampMs})},t[6]=i,t[7]=y,t[8]=l,t[9]=S):S=t[9];var R=S,L;t[10]!==v||t[11]!==y||t[12]!==R?(L={clearReply:v,reply:y,setReply:R},t[10]=v,t[11]=y,t[12]=R,t[13]=L):L=t[13];var E=L,k;return t[14]!==n||t[15]!==E?(k=u.jsx(g.Provider,{value:E,children:n}),t[14]=n,t[15]=E,t[16]=k):k=t[16],k}l.MWPReplyContext=g,l.MWPReplyContextProvider=y}),98);
__d("RollCallContributionType",[],(function(t,n,r,o,a,i){var e=Object.freeze({MEDIA:0,TEXT:1,LINK:2});i.default=e}),66);
__d("RollCallPromptType",[],(function(t,n,r,o,a,i){var e=Object.freeze({MEDIA:0,TEXT:1,LINK:2});i.default=e}),66);
__d("PhotosUploadID",[],(function(t,n,r,o,a,i){var e=1024;function l(){return(e++).toString()}i.getNewID=l}),66);
__d("ReactComposerMediaFilterUtils",["ComposerXNativeAudioUploadsConfig","VideoUploadConfig"],(function(t,n,r,o,a,i,l){function e(e){var t=c(e).length,n=d(e).length;return t>n}function s(e){return c(e).length>0}function u(e){return m(e).length>0}function c(e){return p(e,r("VideoUploadConfig").videoExtensions)}function d(e){var t={gif:!0};return p(e,t)}function m(e){var t={};return Object.keys(r("ComposerXNativeAudioUploadsConfig").audioExtensions).forEach(function(e){t[e]=r("ComposerXNativeAudioUploadsConfig").audioExtensions[e]!==0}),p(e,t)}function p(e,t){return e.filter(function(e){var n,r,o=e.indexOf(".")!==-1&&(n=(r=e.split(".").pop())==null?void 0:r.toLowerCase())!=null?n:"";return t[o]})}l.hasEditableVideos=e,l.hasVideos=s,l.hasAudioFiles=u,l.filterVideos=c,l.filterNonEditableVideos=d,l.filterAudioFiles=m,l.filterFileOfSupportedType=p}),98);
__d("XAsyncRequest",["cr:1042"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:1042")}),98);
__d("XSphericalPhotoSphereMetadataAsyncController",["XController"],(function(t,n,r,o,a,i){a.exports=n("XController").create("/spherical_media/photo/metadata/",{})}),null);
__d("SphericalImageUtils",["ImageMetadata","Promise","XAsyncRequest","XSphericalPhotoSphereMetadataAsyncController","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=2048,u=(function(){function o(){}return o.genArrayBufferFromBlob=function(o){return new(e||(e=n("Promise")))(function(e,n){if(t.FileReader){var r=new t.FileReader;r.onabort=n,r.onerror=n,r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(o)}else n(new Error("global.FileReader doesn't exit"))})},o.shouldCheckInServer=function(t){if(!t.hasExif()&&!t.hasXMP()||!t.hasSize())return!1;var e=t.getXMPString();if(this.getMayContainSphericalMetadata(e))return!0;var n=t.getSize(),r=n.x,o=n.y;if(Math.max(r,o)<s||r/o<2&&o/r<2)return!1;var a=t.hasExif()?t.getExif():{};return!(e===""&&(!a.Make||!a.Model))},o.genPhotosphereMetadata=function(o){var t=this;return new(e||(e=n("Promise")))(function(e,n){r("promiseDone")(t.genArrayBufferFromBlob(o),function(o){try{var a=new(r("ImageMetadata"))(o);t.shouldCheckInServer(a)?r("promiseDone")(t.genPhotosphereMetadataFromServer(a.hasSize()?a.getSize():{x:0,y:0},a.getXMPString(),a.hasExif()?a.getExif():{}),function(t){var n=t.payload;e({photoSphereMetadata:n,imageMetadata:a})},n):e({})}catch(e){e.__manual=!0,n(e)}},n)})},o.genPhotosphereMetadataFromServer=function(o,a,i){var t=this;return new(e||(e=n("Promise")))(function(e,n){new(r("XAsyncRequest"))(r("XSphericalPhotoSphereMetadataAsyncController").getURIBuilder().getURI()).setMethod("POST").setData({exif_string:t.getExifString(i),height:o.y,width:o.x,xmp:a}).setHandler(e).setErrorHandler(n).send()})},o.getExifString=function(t){return JSON.stringify(t,function(e,t){return e==="FocalLength"&&t.numerator&&t.denominator?t.numerator+"/"+t.denominator:t})},o.getMayContainSphericalMetadata=function(t){return t!==""&&t.indexOf("GPano:")>-1},o})();l.default=u}),98);
__d("SphericalImage",["SphericalImageUtils"],(function(t,n,r,o,a,i,l){"use strict";var e="ProjectionType",s=(function(){function t(e){this.props=e}t.createFromBlob=async function(t){var e=await r("SphericalImageUtils").genPhotosphereMetadata(t);return new this(e)};var n=t.prototype;return n.isSpherical=function(){return!!this.props.photoSphereMetadata},n.getImageMetadata=function(){return this.props.imageMetadata},n.getPhotoSphereMetadata=function(){return this.props.photoSphereMetadata},n.getSize=function(){return this.props.imageMetadata?this.props.imageMetadata.getSize():null},n.getBufferLength=function(){return this.props.imageMetadata?this.props.imageMetadata.getBufferLength():null},n.getProjectionType=function(){var t="";return this.props.photoSphereMetadata&&this.props.photoSphereMetadata[e]&&(t=this.props.photoSphereMetadata[e]),t},t})();l.default=s}),98);
__d("SphericalPhotoUploadHelper",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){return!(t&&Math.max(t.x,t.y)<=n||e==="cubestrip")}function l(e,t,n){return!(t==null||t<=n||e==="cubestrip")}i.shouldResize360=e,i.shouldRecompress360=l}),66);
__d("curry",["bind"],(function(t,n,r,o,a,i,l){var e=r("bind")(null,r("bind"),null),s=e;l.default=s}),98);
__d("loadImageFromBlob",["Promise"],(function(t,n,r,o,a,i){var e;function l(t){return new(e||(e=n("Promise")))(function(e,n){var r=new Image;r.onload=function(){URL.revokeObjectURL(r.src),e(r)},r.onerror=function(e){URL.revokeObjectURL(r.src),n(e)},r.src=URL.createObjectURL(t)})}i.default=l}),66);
__d("XComposerPhotoUploader",["AsyncUploadRequest","FileInputUploader","PhotosMimeType","PhotosUploadID","ReactComposerMediaFilterUtils","SphericalImage","SphericalPhotoTypedConfig","SphericalPhotoUploadHelper","curry","emptyFunction","getErrorSafe","loadImageFromBlob","performanceNow","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s=t.URL||t.webkitURL||{},u=(function(){function t(e){this.$6=!1,this.$21={},this.$2=e.uploadData||{},this.$1=e.uploadEndpoint,this.$3=e.retryLimit,this.$4=e.concurrentLimit,this.$5=e.resizer,this.$7=e.onUploadEnqueued||r("emptyFunction"),this.$8=e.onUploadsEnqueued||r("emptyFunction"),this.$9=e.onResizeStart||r("emptyFunction"),this.$12=e.onResizeProgress||r("emptyFunction"),this.$10=e.onResizeSuccess||r("emptyFunction"),this.$11=e.onResizeFailure||r("emptyFunction"),this.$13=e.onSphericalCheckFailure||r("emptyFunction"),this.$14=e.onSphericalCheckSuccess||r("emptyFunction"),this.$15=e.onUploadIsSpherical||r("emptyFunction"),this.$16=e.onUploadSent||r("emptyFunction"),this.$17=e.onUploadStart||r("emptyFunction"),this.$18=e.onUploadProgress||r("emptyFunction"),this.$19=e.onUploadSuccess||r("emptyFunction"),this.$20=e.onUploadFailure||r("emptyFunction"),this.$6=e.preventDefaultErrorHandler}var n=t.prototype;return n.setUploadEndpoint=function(t){this.$1=t},n.setOption=function(t,n){return this.$21[t]=n,this},n.getUploadData=function(){return this.$2},n.setUploadData=function(t){this.$2=t},n.upload=function(t,n){var e=this;n=n||0;var a=babelHelpers.extends({},this.$2),i=null;if(this.$22(t)){if(i=Array.from(t.files),i=i.filter(function(e){return!o("ReactComposerMediaFilterUtils").hasVideos([e.name])}),i.length===0)return;i.forEach(function(t){t.uploadID||(t.uploadID=o("PhotosUploadID").getNewID()),e.$7({uploadID:t.uploadID,fileName:t.name,isSpherical:!1,fileURL:s.createObjectURL?s.createObjectURL(t):null})})}else{var l=o("PhotosUploadID").getNewID();t.uploadID=l,a.upload_id=l,this.$7({uploadID:l,fileName:t.value.split("/").pop().split("\\").pop(),fileURL:s.createObjectURL?s.createObjectURL(t):null})}this.$8();var u=new(r("FileInputUploader"))(t).setURI(this.$1).setData(a).setAllowCrossOrigin(!0).setNetworkErrorRetryLimit(this.$3).setUploadInParallel(!0);i&&i.length>0&&(u.setFiles({farr:i}),this.$5?u.setPreprocessHandler(this.$23.bind(this)):u.setPreprocessHandler(this.$24.bind(this)),this.$4&&u.setConcurrentLimit(this.$4)),u.subscribe("progress",function(n,r){return e.$18(e.$25(r,t),r)}),u.subscribe("failure",function(n,r){return e.$20(e.$25(r,t),r,i)}),u.subscribe("start",function(n,r){return e.$17(e.$25(r,t),r)}),u.subscribe("success",function(n,r){return e.$19(e.$25(r,t),r)});try{u.send(),this.$16(t)}catch(e){throw e}},n.uploadFiles=function(t){var e=this,n=Array.from(t),r=[];n.forEach(function(t){var n=o("PhotosUploadID").getNewID();t.uploadID||(t.uploadID=n),e.$7({fileName:t.name,fileURL:s.createObjectURL?s.createObjectURL(t):null,isSpherical:!1,uploadID:n}),r.push(n)});var a=this.getAsyncFileUploadRequest(n,r,this.$6===!0?{preventDefaultErrorHandler:this.$6}:void 0);a.send()},n.getAsyncFileUploadRequest=function(t,n,r){var e=this,o=this.$26(t,r);return o.subscribe("start",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);e.$17(i,{upload:o})}),o.subscribe("progress",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);e.$18(i,{upload:o,event:o.getProgressEvent()})}),o.subscribe("success",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);e.$19(i,{upload:o,response:o.getResponse()})}),o.subscribe("failure",function(r,o){var a,i=(a=e.$25({upload:o},{}))!=null?a:e.$27(t,n,o);return e.$20(i,{upload:o,response:o.getResponse()},t)}),o},n.getAsyncUploadRequest=function(t,n){var e=this,r=this.$26(t,n);return r.subscribe("start",function(t,n){return e.$17(n.getFile().uploadID,{upload:n})}),r.subscribe("progress",function(t,n){return e.$18(n.getFile().uploadID,{upload:n,event:n.getProgressEvent()})}),r.subscribe("success",function(t,n){return e.$19(n.getFile().uploadID,{upload:n,response:n.getResponse()})}),r.subscribe("failure",function(n,r){return e.$20(r.getFile().uploadID,{upload:r,response:r.getResponse()},t)}),r},n.$26=function(t,n){var e=new(r("AsyncUploadRequest"))().setData(babelHelpers.extends({},n&&n.data,this.$2)).setFiles({farr:t}).setAllowCrossOrigin(!0).setURI(this.$1);n!=null&&n.preventDefaultErrorHandler&&e.setPreventDefaultErrorHandler(!0),this.$4&&e.setLimit(this.$4),this.$5?e.setPreprocessHandler(this.$23.bind(this)):e.setPreprocessHandler(this.$24.bind(this));for(var o in this.$21)e.setOption(o,this.$21[o]);return e},n.$27=function(t,n,r){var e=r.getFile(),o=t.indexOf(e);return n[o]},n.$25=function(t,n){return t.upload?t.upload.getFile().uploadID:n.uploadID},n.$24=function(t,n){var e=this;r("promiseDone")((async function(){return await e.$28(t,n)})())},n.$28=async function(t,n){var e=t.getFile(),r=await this.$29(e),o=t.getFile().uploadID;r&&r.isSpherical()?this.$15(r.isSpherical(),r,o):this.$15(!1,null,""),n(t)},n.$23=function(t,n){var e=this;r("promiseDone")((async function(){return await e.$30(t,n)})())},n.$29=async function(n){var t=(e||(e=r("performanceNow")))();try{var o=await r("SphericalImage").createFromBlob(n);return this.$14(n,(e||(e=r("performanceNow")))()-t,o),o}catch(o){return this.$13(n,(e||(e=r("performanceNow")))()-t),null}},n.$31=function(t){return this.$32(this.$5.resizeBlob.bind(this.$5),t)},n.$33=function(t,n){return n===void 0&&(n=r("SphericalPhotoTypedConfig").upload_size_limit),this.$32(this.$5.resize360Blob.bind(this.$5),t,n)},n.$34=function(t){return r("loadImageFromBlob")(t).then(function(e){return{width:e.width,height:e.height}})},n.$32=function(t,n,o){var e=this,a=r("curry")(this.$12,n.uploadID),i=r("curry")(this.$9,n),l=function(){return e.$34(n).then(i)};return new Promise(function(e,r){l(),t(n,function(t,n,o,a,i,l,s){t?r(t):e(o?{originalWidth:a,originalHeight:i}:{blob:n,originalWidth:a,originalHeight:i,outputWidth:l,outputHeight:s})},a,o)})},n.$30=async function(n,a){var t=n.getFile(),i=this.$5.isEligible(t==null?void 0:t.size,t==null?void 0:t.type);if(!t||!o("PhotosMimeType").isJpeg(t.type)||!i){this.$15(!1,null,""),t&&r("promiseDone")(this.$34(t).then(function(e){n.getAdditionalData().set("js_resized",!1).set("original_file_size",t.size).set("original_width",e==null?void 0:e.width).set("original_height",e==null?void 0:e.height).set("upload_width",e==null?void 0:e.width).set("upload_height",e==null?void 0:e.height)},r("emptyFunction"))),a(n);return}var l=(e||(e=r("performanceNow")))(),s,u;try{var c=null;if(c=await this.$29(t),c&&c.isSpherical()){this.$15(!0,c,t.uploadID);var d=c.getSize(),m=r("SphericalPhotoTypedConfig").upload_size_limit,p=c.getProjectionType(),_=!1;_=o("SphericalPhotoUploadHelper").shouldRecompress360(p,c.getBufferLength(),r("SphericalPhotoTypedConfig").upload_bytes_limit);var f=o("SphericalPhotoUploadHelper").shouldResize360(p,d,m);d&&(f||_)&&(f?s=await this.$33(t):s=await this.$33(t,Math.max(d.x,d.y)-1))}else this.$15(!1,null,""),s=await this.$31(t);s&&(s.blob!=null&&(u=s.blob,u.uploadID=t.uploadID,u.name=t.name,n.setFile(u)),n.getAdditionalData().set("js_resized",!0).set("original_file_size",t.size).set("original_width",s.originalWidth).set("original_height",s.originalHeight).set("upload_width",s.outputWidth).set("upload_height",s.outputHeight));var g=u===null;n.getFile().filename=t.name,this.$10(t,u||t,g,(e||(e=r("performanceNow")))()-l,n.getAdditionalData().get("original_width"),n.getAdditionalData().get("original_height"),n.getAdditionalData().get("upload_width"),n.getAdditionalData().get("upload_height"))}catch(n){var h=r("getErrorSafe")(n),y=(e||(e=r("performanceNow")))()-l;this.$11(t,u||t,h,y)}a(n)},n.$22=function(t){return!!t.files&&r("AsyncUploadRequest").isSupported()},t})();l.default=u}),98);
__d("MWPromptCreationUtils",["I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessagingThreadAttributionType","LSOptimisticContributeToTextPromptStoredProcedure","LSOptimisticCreateRollCallStoredProcedure","LSShape","LSVec","MWXMAAttachmentSharedStackConstants","MessagingAttachmentType","OfflineThreadingId","Promise","ReQL","RollCallContributionType","RollCallPromptType","XComposerPhotoUploader"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,a,l,c){return new(u||(u=n("Promise")))(function(n,u){t.runInTransaction(function(t){return r("LSOptimisticCreateRollCallStoredProcedure")(r("LSFactory")(t),{prompt:l,promptType:(e||(e=o("LSIntEnum"))).ofNumber(c),threadKey:a})},"readwrite",void 0,void 0,i.id+":49").then(function(e){var a=e[0],i=o("ReQL").fromTableAscending(t.tables.roll_calls).subscribe(function(e,t){if(t.operation==="add"||t.operation==="put"){var l=t.value.offlineThreadingId,u=(s||(s=o("I64"))).to_int32(t.value.authorityLevel)>=r("LSAuthorityLevel").AUTHORITATIVE;u&&l!=null&&(s||(s=o("I64"))).equal(l,a)&&(i(),n(t.value.rollCallId))}})}).catch(function(e){u(e)})})}function d(e,t,n,a,l){return e.runInTransaction(function(e){return r("LSOptimisticContributeToTextPromptStoredProcedure")(r("LSFactory")(e),{productAttribution:String(r("LSMessagingThreadAttributionType").ROLLCALL),promptId:(s||(s=o("I64"))).to_string(a),senderId:t,text:l!=null?l:"",threadKey:n})},"readwrite",void 0,void 0,i.id+":91")}function m(t,n,a,l,u,c,d,m){var p,_=o("OfflineThreadingId").createOfflineThreadingID(),f=(p=m==null?void 0:m.startsWith("video/"))!=null?p:!1;return t.runInTransaction(function(t){return r("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(r("LSFactory")(t),{extraSendMessageParams:o("LSShape").ofRecord({attachments:r("LSVec").ofArray([o("LSShape").ofRecord({attachment_fbid:_,attachment_index:(s||(s=o("I64"))).zero,attachment_type:(e||(e=o("LSIntEnum"))).ofNumber(f?r("MessagingAttachmentType").VIDEO:r("MessagingAttachmentType").IMAGE),has_media:!0,has_xma:!0,offline_attachment_id:_,playable_url:f?d:void 0,preview_height:s.of_float(o("MWXMAAttachmentSharedStackConstants").STACK_ITEM_HEIGHT),preview_url:f?void 0:d,preview_url_mime_type:f?void 0:m,preview_width:s.of_float(o("MWXMAAttachmentSharedStackConstants").STACK_ITEM_WIDTH)})]),contribution_type:e.ofNumber(r("RollCallContributionType").MEDIA),product_fbid:s.to_string(u),product_type:"roll_call",source:e.ofNumber(r("LSMessagingThreadAttributionType").ROLLCALL)}),senderId:n,text:c,threadKey:a,threadType:l})},"readwrite",void 0,void 0,i.id+":114").then(function(e){var t=e[0];return t})}function p(e,t,o,a,i,l,s,c,p){switch(s){case r("RollCallPromptType").MEDIA:return m(e,t,o,a,i,l,c,p);case r("RollCallPromptType").TEXT:return d(e,t,o,i,l);default:return(u||(u=n("Promise"))).reject("Unsupported type")}}function _(e,t,n,a){var i=o("OfflineThreadingId").createOfflineThreadingID(),l=e;l.uploadID=i;var u=new(r("XComposerPhotoUploader"))({onUploadFailure:function(t,n){},onUploadSuccess:function(t,n){},uploadEndpoint:"/messenger/upload_roll_call/"});u.getAsyncFileUploadRequest([l],[i],{data:{message_otid:n,roll_call_id:(s||(s=o("I64"))).to_string(t),thread_id:a}}).send()}l.createAuthoritiativeRollCall=c,l.createOptimisticRollCallMessage=p,l.startRollCallMediaUpload=_}),98);
__d("MWV2MessageRowActionsContext.react",["emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m={current:r("emptyFunction")},p={current:r("emptyFunction")},_={current:r("emptyFunction")},f={current:r("emptyFunction")},g={forwardMessage:m,openReactionsMenu:p,removeMessage:_,replyToMessage:f},h=c(g);function y(){return d(h)}function C(e){var t=o("react-compiler-runtime").c(3),n=e.children,r=e.value,a;return t[0]!==n||t[1]!==r?(a=s.jsx(h.Provider,{value:r,children:n}),t[0]=n,t[1]=r,t[2]=a):a=t[2],a}l.useMessageRowActionsContext=y,l.MWV2MessageRowActionsContextProvider=C}),98);
__d("MWV2OnlyGlobalRemoveMessageDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{}},root:r("JSResourceForInteraction")("MWV2OnlyGlobalRemoveMessageDialog.react").__setRef("MWV2OnlyGlobalRemoveMessageDialog.entrypoint")};l.default=e}),98);
__d("MessengerDiscoverableBroadcastChatsClientEventsFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("4148"),s=o("FalcoLoggerInternal").create("messenger_discoverable_broadcast_chats_client_events",e),u=s;l.default=u}),98);
__d("MetaBrandExclamationTriangleFilled24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({fill:"currentColor",viewBox:"0 0 24 24",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",d:"M10.257 3.057c.765-1.358 2.72-1.358 3.486 0l7.998 14.211c.75 1.333-.213 2.982-1.743 2.982H4c-1.53 0-2.492-1.649-1.742-2.982zM12 14.997c-.833 0-1.25.4-1.25 1s.417 1 1.25 1c.834 0 1.25-.4 1.25-1s-.417-1-1.25-1m0-7.122a.875.875 0 0 0-.875.875v4.347a.875.875 0 1 0 1.75 0V8.75A.875.875 0 0 0 12 7.875",clipRule:"evenodd"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MwbActorExperienceEventFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3231"),s=o("FalcoLoggerInternal").create("mwb_actor_experience_event",e),u=s;l.default=u}),98);
__d("SubthreadCreationStrings.react",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=s._(/*BTDS*/"Create sidechat"),u=s._(/*BTDS*/"See sidechat");l.createSubthreadLabel=e,l.viewSubthreadLabel=u}),226);
__d("cdsPushToast",["BaseToasterStateManager","MetaBrandExclamationTriangleFilled24Icon.react","XMDSIcon.react","basePushToast","deferredLoadComponent","getToastDurationFromTextLength","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=["action"],s,u=s||(s=o("react")),c=r("BaseToasterStateManager").getInstance(),d=r("deferredLoadComponent")(r("requireDeferred")("XMDSToast.react").__setRef("cdsPushToast")),m={LONG:5e3,MEDIUM:3e3};function p(t,n,a){var i=a?m[a]:void 0,l=n!=null?n:c;if(o("basePushToast").passesNewToastAPIGK())if(o("basePushToast").isInteractiveToast(t)){var s=o("basePushToast").pushPersistentToast(u.jsx(d,babelHelpers.extends({},t,{loadImmediately:!0,onDismiss:function(){return l.expire(s)}})),l);return s}else{var p=t.action,_=babelHelpers.objectWithoutPropertiesLoose(t,e),f=babelHelpers.extends({withoutCloseButton:!0},_),g=o("basePushToast").pushAlertToast(babelHelpers.extends({},f),u.jsx(d,babelHelpers.extends({},f,{loadImmediately:!0,onDismiss:function(){return l.expire(g)}})),l,i);return g}else{var h=l.push(u.jsx(d,babelHelpers.extends({},t,{loadImmediately:!0,onDismiss:function(){return l.expire(h)}})),i!=null?i:r("getToastDurationFromTextLength")(t.message.toString(),l));return h}}function _(e){return p({message:e})}function f(e,t,n){return p(babelHelpers.extends({},e,{addOnStart:u.jsx(r("XMDSIcon.react"),{icon:r("MetaBrandExclamationTriangleFilled24Icon.react"),size:24})}),t,n)}function g(e,t){var n=t!=null?t:c,r=n.push(u.jsx(d,babelHelpers.extends({},e,{loadImmediately:!0,onDismiss:function(){return n.expire(r)}})),1/0);return r}l.pushToast=p,l.pushSimpleToast=_,l.pushErrorToast=f,l.pushPersistentToast=g}),98);
__d("getMWOtherUserFBID",["I64","LSMessagingThreadTypeUtil","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t,n,r,a){var i=o("LSMessagingThreadTypeUtil").isOneToOne(a);if(!i)return null;var l=o("LSMessagingThreadTypeUtil").isArmadilloSecure(a);if(!l)return r;var s=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.participants,["contactId"]).getKeyRange(r).filter(function(t){var r=t.contactId;return!(e||(e=o("I64"))).equal(r,n)}).take(1));return s==null?void 0:s.contactId}l.getMWOtherUserFBID=s}),98);
__d("handleMWV2NoMessageOrTurn",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";function e(){r("FBLogger")("gen_ai_feedback_actions").mustfix("Either message or turn must be provided")}l.default=e}),98);
__d("threadCreationUtils",["I64","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){return(e||(e=o("I64"))).equal(t.creationStatus,(s||(s=o("LSIntEnum"))).ofNumber(n))}l.creationStatusEquals=u}),98);
__d("useGenAiFeedbackSubmittedToast",["fbt","cdsPushToast","handleMWV2NoMessageOrTurn","react","react-compiler-runtime","useMWXPushToast"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=(e||(e=o("react"))).useCallback;function c(e,t){var n=o("react-compiler-runtime").c(6),a=r("useMWXPushToast")(),i=d,l;n[0]!==e||n[1]!==a||n[2]!==t?(e?l=a:t?l=i:r("handleMWV2NoMessageOrTurn")(),n[0]=e,n[1]=a,n[2]=t,n[3]=l):l=n[3];var u;return n[4]!==l?(u=function(){l&&l({title:s._(/*BTDS*/"Feedback has been submitted")})},n[4]=l,n[5]=u):u=n[5],u}function d(e){var t=e.title;o("cdsPushToast").pushToast({message:t})}l.default=c}),226);
__d("useLogMAWEditMessage",["I64","LSMessagingThreadTypeUtil","LsFalcoEventEntryPoint","LsMessageActionFalcoEvent","MessengerWebUXLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback;function c(){var e=o("react-compiler-runtime").c(2),t=r("MessengerWebUXLogger").useInteractionLogger(),n;return e[0]!==t?(n=function(n,a,i,l,u){o("LSMessagingThreadTypeUtil").isArmadilloSecure(n)?t==null||t({eventName:d(u)}):r("LsMessageActionFalcoEvent").log(function(){return{action:{type:m(u)},error:{message:void 0},extra:{is_community_chats:o("LSMessagingThreadTypeUtil").isPublicCMThread(n)?"1":"0"},message:{attachment_type:"",entry_point:o("LsFalcoEventEntryPoint").messageActions,id:i,recipient_id:(s||(s=o("I64"))).to_string(l)},thread:{group_size:s.to_string(s.zero),id:a!=null?(s||(s=o("I64"))).to_string(a):void 0,type:o("LSMessagingThreadTypeUtil").isGroup(n)?2:1}}})},e[0]=t,e[1]=n):n=e[1],n}function d(e){switch(e){case"EDIT_MESSAGE":return"edit_message";case"EDIT_MESSAGE_CANCEL":return"edit_message_cancel";case"EDIT_MESSAGE_TAP":return"edit_message_tap"}}function m(e){switch(e){case"EDIT_MESSAGE":return 90;case"EDIT_MESSAGE_CANCEL":return 92;case"EDIT_MESSAGE_TAP":return 89}}l.default=c}),98);
__d("useOpenSubthreadView",["GroupsCometChatsEngagementLogger","I64","MWCMSubthreadChatTabContext.react","MWCMSubthreadsInboxFocusContext.react","MWInboxInfoPanelContext.react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t,n=o("react-compiler-runtime").c(5),r=o("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext(),a=r.setCurrentSubthreadView,i=r.setSubthreadKey,l=(t=o("MWCMSubthreadChatTabContext.react").useSubthreadChatTabContext())!=null?t:{},s=l.pushSubthreadViewPage,u=o("MWCMSubthreadsInboxFocusContext.react").useIsSubthreadFocusedContext(),c=u.setIsSubthreadFocused,d;return n[0]!==s||n[1]!==a||n[2]!==c||n[3]!==i?(d=function(n,r){var t=r===void 0?!1:r;o("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{is_chat_tab:s!=null?"1":"0",is_subthread:"1"},event:"thread_open",parent_surface:"thread_view",source:t===!0?"subthread_creation":"subthread_xma",surface:"subthread_view",thread_id:(e||(e=o("I64"))).to_string(n)}),s!=null?s==null||s(n):(a("subthreadView"),i(n),c(!0))},n[0]=s,n[1]=a,n[2]=c,n[3]=i,n[4]=d):d=n[4],d}l.default=s}),98);
__d("useMWCMCreateSubthread",["fbt","FBLogger","Int64Hooks","LSCommunityThreadCreationStatus","LSCreateCommunitySubThreadStoredProcedure","LSFactory","LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure","LSPlatformWaitForTaskCompletion","LSThreadBitOffset","MWLSThread","ReQL","ReQLSuspense","emptyFunction","promiseDone","react","threadCreationUtils","useCommunityFolder","useMWXPushErrorToast","useOpenSubthreadView","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=c.useEffect,m=c.useRef,p=c.useState;function _(t){var n=(e||(e=r("useReStore")))(),a=o("MWLSThread").useThreadExn(t.threadKey),l=r("useCommunityFolder")(a),u=m(r("emptyFunction")),c=r("useMWXPushErrorToast")(),_=p(!1),f=_[0],g=_[1],h=r("useOpenSubthreadView")(),y=o("LSThreadBitOffset").has(206,a);d(function(){return function(){u==null||u.current()}},[]);var C=o("Int64Hooks").useCallbackInt64(async function(){if(l!=null){var e=await n.runInTransaction(function(e){return r("LSLocalCreateOptimisticCommunityChatSubThreadStoredProcedure")(r("LSFactory")(e),{communityId:l.folderId,parentMessageId:t.messageId,parentThreadId:t.threadKey})},"readwrite",void 0,void 0,i.id+":65"),o=e[0];h(o,!0)}},[n,l,t.messageId,t.threadKey,h]),b=o("Int64Hooks").useCallbackInt64(function(){if(!y){var e=function(t){var e=t[0];if(e==null)return a();var l=o("ReQL").fromTableAscending(n.tables.thread_creation_status).getKeyRange(e),s=o("ReQLSuspense").first(l,i.id+":97");s==null||o("threadCreationUtils").creationStatusEquals(s,r("LSCommunityThreadCreationStatus").PENDING)?c():d(s);function c(){u.current=l.subscribe(function(e,t){if(t.operation!=="delete"){var n=t.value;o("threadCreationUtils").creationStatusEquals(n,r("LSCommunityThreadCreationStatus").PENDING)||(u.current(),d(n))}})}function d(e){g(!1);try{var t=e.threadId;if(o("threadCreationUtils").creationStatusEquals(e,r("LSCommunityThreadCreationStatus").FAILURE)||t==null)throw r("FBLogger")("cm_web").warn("sidechat creation failed");h(t,!0)}catch(e){a()}}},a=function(){g(!1),c({title:s._(/*BTDS*/"Sidechat creation failed")})};l!=null&&(g(!0),r("promiseDone")(r("LSPlatformWaitForTaskCompletion")(n,function(e){return r("LSCreateCommunitySubThreadStoredProcedure")(r("LSFactory")(e),{communityId:l.folderId,parentMessageId:t.messageId,parentThreadId:t.threadKey})},"createSocialChannel"),function(t){return e(t)},a))}},[n,l,y,t.messageId,t.threadKey,h,c]);return[y?C:b,f]}l.default=_}),226);
__d("useMWChatReactionsActionContainerProps.react",["I64","LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWCMThreadTypes.react","MWChatMessageId","react","react-compiler-runtime","useIsReactionsV2Enabled"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useMemo;function m(e,t,n,r,a,i){var l=o("react-compiler-runtime").c(29),u;l[0]!==n?(u=o("LSMessagingThreadTypeUtil").isArmadilloSecure(n),l[0]=n,l[1]=u):u=l[1];var c=u,d;l[2]!==e.threadKey?(d=(s||(s=o("I64"))).to_string(e.threadKey),l[2]=e.threadKey,l[3]=d):d=l[3];var m=d,p;l[4]!==e.timestampMs?(p=(s||(s=o("I64"))).to_string(e.timestampMs),l[4]=e.timestampMs,l[5]=p):p=l[5];var _=p,f;l[6]!==e.messageId||l[7]!==_||l[8]!==m?(f=o("MWChatMessageId").makeSent(m,e.messageId,_),l[6]=e.messageId,l[7]=_,l[8]=m,l[9]=f):f=l[9];var g=f,h=o("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(e,c,"reaction_tray"),y;l[10]!==n?(y=o("MWCMThreadTypes.react").isBroadcastThread(n),l[10]=n,l[11]=y):y=l[11];var C=y,b;l[12]!==n?(b=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(n),l[12]=n,l[13]=b):b=l[13];var v=b,S=o("useIsReactionsV2Enabled").useIsReactionsV2Enabled(e.threadKey),R;l[14]!==e.messageId||l[15]!==r||l[16]!==h?(R=function(n,o){return r&&r(),h(e.messageId,o?void 0:n,o?"remove_reaction":"reaction")},l[14]=e.messageId,l[15]=r,l[16]=h,l[17]=R):R=l[17];var L=R,E=S&&C,k;return l[18]!==t||l[19]!==E||l[20]!==S||l[21]!==v||l[22]!==C||l[23]!==c||l[24]!==g||l[25]!==i||l[26]!==L||l[27]!==a?(k={closeActionsMenu:t,disableCustomReactions:E,hasReactionsV2:S,isBroadcastChannel:v,isBroadcastThread:C,isSecure:c,messageID:g,onVisibilityChange:a,reactionsPopoverResource:i,sendReaction:L},l[18]=t,l[19]=E,l[20]=S,l[21]=v,l[22]=C,l[23]=c,l[24]=g,l[25]=i,l[26]=L,l[27]=a,l[28]=k):k=l[28],k}l.default=m}),98);
__d("useMWFalcoFeatureEventLogger",["MWFalcoFeatureEventLogger","MWPActor.react","getMWOtherUserFBID","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(t,n){var a=o("react-compiler-runtime").c(5),i=(e||(e=r("useReStore")))(),l=o("MWPActor.react").useActor(),s;return a[0]!==l||a[1]!==i||a[2]!==t||a[3]!==n?(s=function(r,a){o("getMWOtherUserFBID").getMWOtherUserFBID(i,l,t,n).then(function(e){o("MWFalcoFeatureEventLogger").logEvent(r,a,e,t,n)}).catch(d)},a[0]=l,a[1]=i,a[2]=t,a[3]=n,a[4]=s):s=a[4],s}function d(){}l.default=c}),98);
__d("useMWPIsMessagePinned",["ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useDeferredValue;function c(t){var n=o("react-compiler-runtime").c(8),a=(e||(e=r("useReStore")))(),l,s;n[0]!==a||n[1]!==t?(l=function(){return t!=null?o("ReQL").fromTableAscending(a.tables.msg_pinned_messages_v2).getKeyRange(t.threadKey,t.messageId):o("ReQL").empty()},s=[a,t],n[0]=a,n[1]=t,n[2]=l,n[3]=s):(l=n[2],s=n[3]);var c=!!o("ReQLSuspense").useFirst(l,s,i.id+":28"),d,m;n[4]!==a||n[5]!==t?(d=function(){return t!=null&&!t.isUnsent?o("ReQL").fromTableAscending(a.tables.client_web_pinned_messages).getKeyRange(t.threadKey,t.offlineThreadingId):o("ReQL").empty()},m=[a,t],n[4]=a,n[5]=t,n[6]=d,n[7]=m):(d=n[6],m=n[7]);var p=!!o("ReQLSuspense").useFirst(d,m,i.id+":38");return u(c||p)}l.default=c}),98);
__d("useMWV2ShouldDisableReactions.react",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","isFeatureLimitEnabled","react-compiler-runtime","useIsReactionsV2Enabled","useIsReadOnlyFeatureLimitedWithThreadType","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var a=o("react-compiler-runtime").c(9),l;a[0]!==t?(l=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t),a[0]=t,a[1]=l):l=a[1];var s=l,u=r("useIsReadOnlyFeatureLimitedWithThreadType")(t),c;a[2]!==u||a[3]!==s?(c=(!s||r("isFeatureLimitEnabled")())&&u,a[2]=u,a[3]=s,a[4]=c):c=a[4];var d=c,m=o("useIsReactionsV2Enabled").useIsReactionsV2Enabled(n),p=(e||(e=r("useReStore")))(),_;a[5]!==p.tables.reaction_v2_types?(_=function(){return o("ReQL").fromTableAscending(p.tables.reaction_v2_types)},a[5]=p.tables.reaction_v2_types,a[6]=_):_=a[6];var f;a[7]!==p?(f=[p],a[7]=p,a[8]=f):f=a[8];var g=o("ReQLSuspense").useFirst(_,f,i.id+":38")!=null;return d||m&&!g}l.default=s}),98);
__d("useSharedNUX",["CometNUXManagerContext","FBLogger","react","react-compiler-runtime","useNUXLoggers","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useEffect,d=s.useState;function m(e){var t=o("react-compiler-runtime").c(9),n;t[0]!==e?(n=function(){return e},t[0]=e,t[1]=n):n=t[1];var a=r("useStable")(n);a!==e&&r("FBLogger")("comet_ui").mustfix("Error nux changed at runtime from %s to %s, this is not supported and will lead to erratic behavior, we have continued to use your initially supplied nux",a!=null?a:"null",e!=null?e:"null");var i=d(!1),l=i[0],s=i[1],m=u(r("CometNUXManagerContext")),p=m.registerNUX,_=m.removeNUX,f,g;t[2]!==a||t[3]!==p?(f=function(){if(a!=null)return p(a,s,!0)},g=[a,p],t[2]=a,t[3]=p,t[4]=f,t[5]=g):(f=t[4],g=t[5]),c(f,g);var h=r("useNUXLoggers")(a,_),y;return t[6]!==l||t[7]!==h?(y=[l,h],t[6]=l,t[7]=h,t[8]=y):y=t[8],y}l.default=m}),98);
__d("useSubthreadInfoSafeForNonWork",["cr:13566"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return null}var s=n("cr:13566")!=null?n("cr:13566"):e;l.default=s}),98);/*FB_PKG_DELIM*/
__d("BaseDialogTitle.react",["BaseDialogLabelIDProvider","BasePlaceholderContext","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(4),n=e.asBox,a=e.children,i=n===void 0?!1:n,l=o("BaseDialogLabelIDProvider").useDialogHeaderID(),c=u(r("BasePlaceholderContext")),d=c===!0?null:l,m;return t[0]!==i||t[1]!==a||t[2]!==d?(m=i?s.jsx(o("react-strict-dom").html.div,{id:d,children:a}):s.jsx(o("react-strict-dom").html.span,{id:d,children:a}),t[0]=i,t[1]=a,t[2]=d,t[3]=m):m=t[3],m}l.default=c}),98);
__d("BaseIconButton.react",["BaseIsDecorativeContext","CometPressable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","ref","variant"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(17),a,i,l,s;n[0]!==t?(a=t.children,l=t.ref,s=t.variant,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s):(a=n[1],i=n[2],l=n[3],s=n[4]);var c=s,d=c.xstyleConfig,m=i,p=m.disabled,_=i.linkProps!=null?"link":"button",f=!!p&&d.pressableDisabled,g;n[5]!==f||n[6]!==d.pressable?(g=[d.pressable,f],n[5]=f,n[6]=d.pressable,n[7]=g):g=n[7];var h;n[8]!==a?(h=u.jsx(r("BaseIsDecorativeContext").Provider,{value:!0,children:a}),n[8]=a,n[9]=h):h=n[9];var y;return n[10]!==p||n[11]!==i||n[12]!==l||n[13]!==_||n[14]!==g||n[15]!==h?(y=u.jsx(r("CometPressable.react"),babelHelpers.extends({},i,{disabled:p,ref:l,role:_,xstyle:g,children:h})),n[10]=p,n[11]=i,n[12]=l,n[13]=_,n[14]=g,n[15]=h,n[16]=y):y=n[16],y}l.default=c}),98);
__d("BaseIconButtonXMDSVariants",[],(function(t,n,r,o,a,i,l){"use strict";var e={pressable:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",display:"x3nfvp2",paddingTop:"x1y1aw1k",paddingInlineEnd:"xf159sx",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",transform:"x3oybdh x19kf12q",$$css:!0},pressableDisabled:{opacity:"xti2d7y",$$css:!0}},s={contained:{backgroundColor:"x1jx94hy",boxShadow:"xi1c1fh",$$css:!0},primary:{backgroundColor:"xtvsq51",$$css:!0},primaryOnMedia:{backgroundColor:"xyyilqk",$$css:!0},secondary:{backgroundColor:"x1qhmfi1",borderTopColor:"x1s9qjmn",borderInlineEndColor:"x71vvrb",borderBottomColor:"x7gj0x1",borderInlineStartColor:"x167l43f",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x178xt8z",borderInlineEndWidth:"x1lun4ml",borderBottomWidth:"xso031l",borderInlineStartWidth:"xpilrb4",$$css:!0}},u={dense:{paddingTop:"x1iorvi4",paddingBottom:"xjkvuk6",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,$$css:!0},regular:{paddingTop:"x1y1aw1k",paddingBottom:"xwib8y2",paddingInlineStart:"xmzvs34",paddingInlineEnd:"xf159sx",paddingLeft:null,paddingRight:null,$$css:!0}},c={xstyleConfig:{pressable:e.pressable,pressableDisabled:e.pressableDisabled}},d={xstyleConfig:babelHelpers.extends({},c.xstyleConfig,{pressable:[e.pressable,s.contained]})},m={xstyleConfig:babelHelpers.extends({},c.xstyleConfig,{pressable:[e.pressable,s.primary]})},p={xstyleConfig:babelHelpers.extends({},c.xstyleConfig,{pressable:[e.pressable,s.primaryOnMedia]})},_={xstyleConfig:babelHelpers.extends({},c.xstyleConfig,{pressable:[e.pressable,s.secondary]})},f={xstyleConfig:{pressable:[u.dense]}},g={xstyleConfig:{pressable:[u.regular]}};l.BaseIconButtonXMDSDefaultVariant=c,l.BaseIconButtonXMDSContainedVariant=d,l.BaseIconButtonXMDSPrimaryVariant=m,l.BaseIconButtonXMDSPrimaryOnMediaVariant=p,l.BaseIconButtonXMDSSecondaryVariant=_,l.BaseIconButtonXMDSDenseVariant=f,l.BaseIconButtonXMDSRegularVariant=g}),98);
__d("BaseScrollRegionObserver.react",["intersectionObserverEntryIsIntersecting","react","react-compiler-runtime","stylex","useIntersectionObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useMemo,d={end:{bottom:"x1ey2m1c",$$css:!0},start:{top:"x13vifvy",$$css:!0},target:{insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,opacity:"xg01cxk",position:"x10l6tqk",zIndex:"x8knxv4",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(9),n=e.end,r=e.rootRef,a=e.start,i;t[0]!==r||t[1]!==a?(i=a?u.jsx(p,{callback:a.callback,rootRef:r,xstyle:[d.target,d.start,a.heightXStyle]}):null,t[0]=r,t[1]=a,t[2]=i):i=t[2];var l=i,s;t[3]!==n||t[4]!==r?(s=n?u.jsx(p,{callback:n.callback,rootRef:r,xstyle:[d.target,d.end,n.heightXStyle]}):null,t[3]=n,t[4]=r,t[5]=s):s=t[5];var c=s,m;return t[6]!==c||t[7]!==l?(m=u.jsxs(u.Fragment,{children:[l,c]}),t[6]=c,t[7]=l,t[8]=m):m=t[8],m}function p(t){var n=o("react-compiler-runtime").c(12),a=t.callback,i=t.rootRef,l=t.xstyle,s;n[0]!==i?(s=function(){return i==null?void 0:i.current},n[0]=i,n[1]=s):s=n[1];var c;n[2]===Symbol.for("react.memo_cache_sentinel")?(c={bottom:0,left:0,right:0,top:0},n[2]=c):c=n[2];var d;n[3]!==s?(d={root:s,rootMargin:c,threshold:0},n[3]=s,n[4]=d):d=n[4];var m=d,p;n[5]!==a?(p=function(t){var e=r("intersectionObserverEntryIsIntersecting")(t);a(e)},n[5]=a,n[6]=p):p=n[6];var _=r("useIntersectionObserver")(p,m),f;n[7]!==l?(f=(e||(e=r("stylex"))).props(l),n[7]=l,n[8]=f):f=n[8];var g;return n[9]!==_||n[10]!==f?(g=u.jsx("div",babelHelpers.extends({},f,{ref:_})),n[9]=_,n[10]=f,n[11]=g):g=n[11],g}l.default=m}),98);
__d("CAAPasskeyCreationEntryPoint",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({ACCOUNT_SPLIT:"account_split",ACCOUNTS_CENTER_PASSKEY_MANAGEMENT:"accounts_center_passkey_management",ACCOUNTS_CENTER_PASSWORD_AND_SECURITY:"accounts_center_password_and_security",ACCOUNTS_CENTER_PASSWORD_AND_SECURITY_MOBILE:"accounts_center_password_and_security_mobile",ACCOUNTS_CENTER_PASSWORD_AND_SECURITY_MOBILE_BADGE:"accounts_center_password_and_security_mobile_badge",ADVANCED_PROTECTION:"advanced_protection",ADVANCED_PROTECTION_BOTTOM_SHEET:"advanced_protection_bottom_sheet",ADVANCED_PROTECTION_WITH_SKIP:"advanced_protection_with_skip",BLOKS_SHELL_TEST:"bloks_shell_test",BUSINESS_SETTINGS:"business_settings",ENCRYPTED_BACKUPS:"encrypted_backups",LOGIN_FLOW:"login_flow",MEGAPHONE:"megaphone",MIGRATION_MOMENT_NUX:"migration_moment_nux",NFX_COMPROMISED_ACCOUNT:"nfx_compromised_account",PAYMENTS_AUTOFILL:"payments_autofill",POST_AFAD_MOBILE:"post_afad_mobile",POST_AFAD_WEB:"post_afad_web",POST_EPSILON:"post_epsilon",POST_EPSILON_MOBILE:"post_epsilon_mobile",POST_EPSILON_WEB:"post_epsilon_web",POST_LOGIN_CHALLENGE:"post_login_challenge",POST_LOGIN_UPSELL:"post_login_upsell",POST_LRR:"post_lrr",POST_LRR_WEB:"post_lrr_web",POST_REAUTH:"post_reauth",POST_SENSITIVE_ACTION_REVIEW_CHALLENGE:"post_sensitive_action_review_challenge",POST_SESSION_VERIFICATION:"post_session_verification",POST_TWO_FACTOR_LOGIN:"post_two_factor_login",REGISTARTION_FLOW:"registration_flow",SECURITY_CHECKUP:"security_checkup"}),l=e;i.default=l}),66);
__d("CDSDialogHeaderFooterContainerContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({isInner:!1,isSticky:!1,showBackground:!1,xstyle:null});l.default=u}),98);
__d("CDSMiniToastContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({activeToasts:{},add:function(){return""},remove:function(){}});l.default=u}),98);
__d("CDSMiniToastIDContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext("");l.default=u}),98);
__d("CDSStyleXDarkTheme",[],(function(t,n,r,o,a,i){a.exports={accent:"rgb(203,210,217)","alert-banner-corner-radius":"8px","always-black":"black","always-dark-gradient":"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.6))","always-dark-overlay":"rgba(0, 0, 0, 0.4)","always-gray-40":"#65676B","always-gray-75":"#BCC0C4","always-gray-95":"#F0F2F5","always-light-overlay":"rgba(255, 255, 255, 0.4)","always-white":"rgb(255,255,255)","attachment-footer-background":"rgba(255,255,255,0.10)","background-deemphasized":"rgba(28,43,51)","badge-background-color-blue":"var(--accent)","badge-background-color-dark-gray":"var(--secondary-icon)","badge-background-color-gray":"var(--disabled-icon)","badge-background-color-green":"var(--positive)","badge-background-color-light-blue":"var(--highlight-bg)","badge-background-color-red":"var(--notification-badge)","badge-background-color-yellow":"var(--base-lemon)","base-blue":"#1877F2","base-cherry":"#F3425F","base-grape":"#9360F7","base-lemon":"#F7B928","base-lime":"#45BD62","base-pink":"#FF66BF","base-seafoam":"#54C7EC","base-teal":"#2ABBA7","base-tomato":"#FB724B","blue-link":"rgb(69,153,255)","blue-primary":"rgb(0,136,244)","blue-secondary":"rgb(235,245,255)","blue-tertiary":"rgb(4,59,114)","blueprint-button-height-large":"48px","blueprint-button-height-medium":"40px","border-focused":"#A7B3BF","button-corner-radius":"4px","button-corner-radius-large":"12px","button-corner-radius-medium":"10px","button-height-large":"52px","button-height-medium":"36px","button-icon-padding-large":"16px","button-icon-padding-medium":"16px","button-inner-icon-spacing-large":"3px","button-inner-icon-spacing-medium":"3px","button-padding-horizontal-large":"16px","button-padding-horizontal-medium":"16px","button-padding-icon-only":"16px","card-background":"rgb(52,72,84)","card-background-flat":"rgb(52,72,84)","card-box-shadow":"0 8px 20px 0  var(--shadow-2), 0 2px 4px 0 var(--shadow-1)","card-corner-radius":"4px","card-padding-horizontal":"10px","card-padding-vertical":"20px","chartreuse-primary":"rgb(106,147,22)","chartreuse-secondary":"rgb(226,255,152)","chartreuse-tertiary":"rgb(50,65,19)","chat-bubble-border-radius":"18px","chat-bubble-emphasis-ring-after":"white","chat-bubble-emphasis-ring-before":"black","chat-bubble-padding-horizontal":"12px","chat-bubble-padding-vertical":"8px","chat-incoming-message-bubble-background-color":"#303030","chat-outgoing-message-bubble-background-color":"var(--accent)","chat-replied-message-background-color":"rgba(255, 255, 255, 0.12)","chat-text-blockquote-color-background-line":"rgba(255, 255, 255, 0.19)","chat-text-blockquote-color-text-primary-media":"rgba(255, 255, 255, 0.7)","chip-corner-radius":"4px","comment-background":"rgba(255,255,255,0.10)","comment-bubble":"18px","comment-footer-background":"#4E4F50","cyan-primary":"rgb(0,142,213)","cyan-secondary":"rgb(231,245,255)","cyan-tertiary":"rgb(15,63,93)","dataviz-blue-primary":"#1D85FC","dataviz-blue-secondary":"#EBF5FF","dataviz-orange":"#D06C14","dataviz-primary-1":"rgb(0,174,143)","dataviz-primary-2":"rgb(156,219,255)","dataviz-primary-3":"rgb(73,156,255)","dataviz-secondary-1":"rgb(92,87,210)","dataviz-secondary-2":"rgb(142,129,255)","dataviz-secondary-3":"rgb(119,45,88)","dataviz-supplementary-1":"rgb(253,91,67)","dataviz-supplementary-2":"rgb(161,132,0)","dataviz-supplementary-3":"rgb(36,131,44)","dataviz-supplementary-4":"rgb(232,234,238)","dialog-anchor-vertical-padding":"32px","dialog-corner-radius":"4px","dialog-size-medium-width":"100%","dialog-size-small-width":"100%","disabled-button-background":"rgba(255, 255, 255, 0.2)","disabled-button-text":"rgba(255, 255, 255, 0.3)","disabled-icon":"rgba(255,255,255,0.15)","disabled-text":"rgba(255,255,255,0.15)",divider:"rgb(70,90,105)","divider-on-color":"#3E4042","emphasized-card-background-blue-comet":"linear-gradient(rgb(0,59,173),rgb(0,10,73))","emphasized-card-background-green-comet":"linear-gradient(rgb(0,82,35),rgb(0,20,11))","emphasized-card-background-purple-comet":"linear-gradient(rgb(66,23,160),rgb(18,3,53))","emphasized-card-background-teal-comet":"linear-gradient(rgb(0,65,75), rgb(0,19,26))","event-date":"rgb(240,95,105)","fb-logo":"#0866FF","fb-wordmark":"#FFFFFF","fds-animation-enter-exit-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-enter-exit-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-expand-collapse-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-fade-in":"cubic-bezier(0, 0, 1, 1)","fds-animation-fade-out":"cubic-bezier(0, 0, 1, 1)","fds-animation-move-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-move-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-passive-move-in":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-passive-move-out":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-quick-move-in":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-quick-move-out":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-swap-shuffle-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-swap-shuffle-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-black":"black","fds-black-alpha-05":"rgba(0, 0, 0, 0.05)","fds-black-alpha-10":"rgba(0, 0, 0, 0.1)","fds-black-alpha-15":"rgba(0, 0, 0, 0.15)","fds-black-alpha-20":"rgba(0, 0, 0, 0.2)","fds-black-alpha-30":"rgba(0, 0, 0, 0.3)","fds-black-alpha-40":"rgba(0, 0, 0, 0.4)","fds-black-alpha-50":"rgba(0, 0, 0, 0.5)","fds-black-alpha-60":"rgba(0, 0, 0, 0.6)","fds-black-alpha-80":"rgba(0, 0, 0, 0.8)","fds-blue-05":"black","fds-blue-30":"black","fds-blue-40":"black","fds-blue-60":"black","fds-blue-70":"black","fds-blue-80":"black","fds-button-text":"black","fds-comment-background":"black","fds-dark-mode-gray-100":"black","fds-dark-mode-gray-35":"black","fds-dark-mode-gray-50":"black","fds-dark-mode-gray-70":"black","fds-dark-mode-gray-80":"black","fds-dark-mode-gray-90":"black","fds-duration-extra-extra-short-in":"100ms","fds-duration-extra-extra-short-out":"100ms","fds-duration-extra-long-in":"1000ms","fds-duration-extra-long-out":"1000ms","fds-duration-extra-short-in":"200ms","fds-duration-extra-short-out":"150ms","fds-duration-long-in":"500ms","fds-duration-long-out":"350ms","fds-duration-medium-in":"400ms","fds-duration-medium-out":"350ms","fds-duration-none":"0ms","fds-duration-short-in":"280ms","fds-duration-short-out":"200ms","fds-fast":"200ms","fds-gray-00":"black","fds-gray-05":"black","fds-gray-10":"black","fds-gray-100":"black","fds-gray-20":"black","fds-gray-25":"black","fds-gray-30":"black","fds-gray-45":"black","fds-gray-70":"black","fds-gray-80":"black","fds-gray-90":"black","fds-green-55":"black","fds-green-65":"black","fds-highlight":"black","fds-highlight-cell-background":"black","fds-primary-icon":"white","fds-primary-text":"white","fds-red-55":"black","fds-slow":"400ms","fds-soft":"cubic-bezier(.08,.52,.52,1)","fds-spectrum-aluminum-tint-70":"black","fds-spectrum-blue-gray-tint-70":"black","fds-spectrum-cherry":"black","fds-spectrum-cherry-tint-70":"black","fds-spectrum-grape-tint-70":"black","fds-spectrum-grape-tint-90":"black","fds-spectrum-lemon-dark-1":"black","fds-spectrum-lemon-tint-70":"black","fds-spectrum-lime":"black","fds-spectrum-lime-tint-70":"black","fds-spectrum-orange-tint-70":"black","fds-spectrum-orange-tint-90":"black","fds-spectrum-seafoam-tint-70":"black","fds-spectrum-slate-dark-2":"black","fds-spectrum-slate-tint-70":"black","fds-spectrum-teal":"black","fds-spectrum-teal-dark-1":"black","fds-spectrum-teal-dark-2":"black","fds-spectrum-teal-tint-70":"black","fds-spectrum-teal-tint-90":"black","fds-spectrum-tomato":"black","fds-spectrum-tomato-tint-30":"black","fds-spectrum-tomato-tint-90":"black","fds-strong":"cubic-bezier(.12,.8,.32,1)","fds-unified-blue-35":"black","fds-unified-gray-20":"black","fds-white":"black","fds-white-alpha-05":"rgba(255, 255, 255, 0.05)","fds-white-alpha-10":"rgba(255, 255, 255, 0.1)","fds-white-alpha-20":"rgba(255, 255, 255, 0.2)","fds-white-alpha-30":"rgba(255, 255, 255, 0.3)","fds-white-alpha-40":"rgba(255, 255, 255, 0.4)","fds-white-alpha-50":"rgba(255, 255, 255, 0.5)","fds-white-alpha-60":"rgba(255, 255, 255, 0.6)","fds-white-alpha-80":"rgba(255, 255, 255, 0.8)","fds-yellow-20":"black","filter-accent":"invert(40%) sepia(52%) saturate(200%) saturate(200%) saturate(200%) saturate(189%) hue-rotate(191deg) brightness(103%) contrast(102%)","filter-always-white":"invert(100%)","filter-blue-link-icon":"invert(73%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(103.25%) hue-rotate(189deg) brightness(101%) contrast(101%)","filter-disabled-icon":"invert(100%) opacity(30%)","filter-negative":"invert(25%) sepia(33%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(110%) hue-rotate(345deg) brightness(132%) contrast(96%)","filter-placeholder-icon":"invert(59%) sepia(11%) saturate(200%) saturate(135%) hue-rotate(176deg) brightness(96%) contrast(94%)","filter-positive":"invert(37%) sepia(61%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(115%) hue-rotate(91deg) brightness(97%) contrast(105%)","filter-primary-accent":"invert(40%) sepia(52%) saturate(200%) saturate(200%) saturate(200%) saturate(189%) hue-rotate(191deg) brightness(103%) contrast(102%)","filter-primary-deemphasized-button-icon":"brightness(0) saturate(100%) invert(63%) sepia(20%) saturate(1290%) hue-rotate(185deg) brightness(107%) contrast(101%)","filter-primary-icon":"invert(89%) sepia(6%) hue-rotate(185deg)","filter-secondary-button-icon-on-media":"invert(100%)","filter-secondary-icon":"invert(62%) sepia(98%) saturate(12%) hue-rotate(175deg) brightness(90%) contrast(96%)","filter-warning-icon":"invert(77%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(128%) hue-rotate(359deg) brightness(102%) contrast(107%)","focus-ring-blue":"#1877F2","focus-ring-outline-forced-colors":"2px auto transparent !important","focus-ring-outline-link":"2px auto var(--focus-ring-blue)","focus-ring-shadow-default":"0 0 0 2px var(--always-white), 0 0 0 4px var(--focus-ring-blue)","focus-ring-shadow-inset":"0 0 0 2px var(--focus-ring-blue) inset, 0 0 0 4px var(--always-white) inset","font-family-apple":"system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif","font-family-code":"ui-monospace, Menlo, Consolas, Monaco, monospace","font-family-default":"Helvetica, Arial, sans-serif","font-family-segoe":"Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","font-family-system-fds":"system-ui, -apple-system, BlinkMacSystemFont, Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","fuschia-primary":"rgb(250,45,138)","fuschia-secondary":"rgb(255,241,246)","fuschia-tertiary":"rgb(118,14,62)","glimmer-animation-direction":"alternate","glimmer-animation-duration":"1000ms","glimmer-animation-timing-function":"steps(10, end)","glimmer-base-opaque":"#FFFFFF","glimmer-corner-radius":"4px","glimmer-high-contrast-base-opaque":"#FFFFFF","glimmer-opacity-high-contrast-max":"0.48","glimmer-opacity-high-contrast-min":"0.1","glimmer-opacity-max":"1","glimmer-opacity-min":"0.25","glimmer-spinner-icon":"white","global-panel-width":"0px","global-panel-width-expanded":"0px","green-primary":"rgb(43,154,53)","green-secondary":"rgb(227,250,224)","green-tertiary":"rgb(26,68,27)","header-height":"0px","hero-banner-background":"#E85D07","highlight-bg":"rgba(24, 119, 242, .31)","hosted-view-selected-state":"rgb(222,227,233)","hover-overlay":"rgba(255, 255, 255, 0.1)","image-corner-radius":"4px","infochip-medium-radius":"12px","input-background":"rgb(52,72,84)","input-background-active":"hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.05)","input-background-disabled":"#18191A","input-background-error-active":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-error-hover":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-hover":"var(--input-background)","input-background-warn-active":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-warn-hover":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-border-color":"#3E4042","input-border-color-hover":"var(--placeholder-text)","input-border-width":"1px","input-corner-radius":"4px","input-label-color-disabled":"var(--disabled-text)","input-label-color-error":"var(--negative)","input-label-color-highlighted":"hsl(214, 100%, 59%)","input-label-color-inside":"var(--secondary-text)","inverse-text":"var(--always-white)","list-cell-chevron":"rgb(203, 210, 217)","list-cell-corner-radius":"4px","list-cell-min-height":"52px","list-cell-padding-vertical":"20px","list-cell-padding-vertical-with-addon":"14px","magenta-primary":"rgb(215,77,204)","magenta-secondary":"rgb(255,239,254)","magenta-tertiary":"rgb(96,36,91)","media-hover":"rgba(68, 73, 80, 0.15)","media-inner-border":"rgba(255,255,255,0.10)","media-outer-border":"#33363A","media-pressed":"rgba(255,255,255,0.30)","menu-base-list-item-padding-horizontal":"8px","menu-base-list-item-padding-vertical":"12px","menu-base-size-full-margin-end":"48px","menu-item-base-margin-horizontal":"8px","menu-item-base-margin-vertical":"0px","menu-item-base-overlay-radius":"4px","menu-item-base-padding-horizontal":"8px","menu-item-base-padding-vertical":"12px","menu-item-base-with-icon-padding-horizontal":"var(--menu-item-base-padding-horizontal)","messenger-application-max-width":"2560px","messenger-card-background":"#242526","messenger-card-box-shadow":"0px 0px 16px rgba(0, 0, 0, 0.3)","messenger-card-corner-radius":"8px","messenger-card-max-width":"480px","messenger-card-min-width":"300px","messenger-card-spacing":"16px","messenger-reply-background":"#18191A","messenger-sidebar-collapsed-width":"44px","messenger-sidebar-expanded-width":"240px","mwp-header-background-color":"var(--messenger-card-background)","mwp-header-button-color":"var(--accent)","mwp-message-row-background":"var(--messenger-card-background)","nav-bar-background":"rgba(0,0,0,0.00)","nav-bar-background-gradient":"linear-gradient(to top, #242526, rgba(36,37,38,.9), rgba(36,37,38,.7), rgba(36,37,38,.4), rgba(36,37,38,0))","nav-bar-background-gradient-wash":"linear-gradient(to top, #18191A, rgba(24,25,26,.9), rgba(24,25,26,.7), rgba(24,25,26,.4), rgba(24,25,26,0))","nav-list-cell-corner-radius":"4px","nav-list-cell-min-height":"0px","nav-list-cell-padding-vertical":"16px","nav-list-cell-padding-vertical-with-addon":"16px",negative:"rgb(240,95,105)","negative-background":"hsl(350, 87%, 55%, 20%)","new-notification-background":"rgba(255,255,255,0.10)","non-media-pressed":"rgba(255,255,255,0.20)","non-media-pressed-on-dark":"rgba(255,255,255,0.30)","notification-badge":"rgb(240,95,105)","nux-card-body-padding-end":"24px","orange-primary":"rgb(208,108,20)","orange-secondary":"rgb(255,241,239)","orange-tertiary":"rgb(94,49,14)","overlay-alpha-80":"rgba(28,43,51,0.80)","overlay-on-media":"rgba(28,43,51,0.70)","page-footer-padding-vertical":"28px","placeholder-icon":"rgba(167,179,191)","placeholder-image":"rgb(70, 90, 105)","placeholder-text":"rgba(255,255,255,0.30)","placeholder-text-on-media":"rgba(255,255,255,0.45)","popover-background":"rgb(52,72,84)","popover-border-color":"transparent","popover-border-style":"none","popover-border-width":"0px","popover-card-background":"var(--card-background)",positive:"rgb(85,180,115)","positive-background":"#1F3520","press-overlay":"rgba(255, 255, 255, 0.2)","primary-button-background":"rgb(0,100,224)","primary-button-icon":"rgb(255,255,255)","primary-button-pressed":"#77A7FF","primary-button-text":"rgb(255,255,255)","primary-deemphasized-button-background":"rgba(0,0,0,0.00)","primary-deemphasized-button-pressed":"rgb(255,255,255,.05)","primary-deemphasized-button-pressed-overlay":"rgb(255,255,255,.15)","primary-deemphasized-button-text":"rgb(28,43,51)","primary-icon":"rgb(255,255,255)","primary-text":"rgb(255,255,255)","primary-text-on-media":"rgb(255,255,255)","primary-web-focus-indicator":"#D24294","progress-ring-blue-background":"rgba(45, 136, 255, 0.2)","progress-ring-blue-foreground":"hsl(214, 100%, 59%)","progress-ring-disabled-background":"rgba(122,125,130, 0.2)","progress-ring-disabled-foreground":"#7A7D82","progress-ring-neutral-background":"rgba(255, 255, 255, 0.2)","progress-ring-neutral-foreground":"#ffffff","progress-ring-on-media-background":"rgba(255,255,255,0.20)","progress-ring-on-media-foreground":"rgb(255,255,255)","purple-primary":"rgb(125,116,255)","purple-secondary":"rgb(245,241,255)","purple-tertiary":"rgb(55,50,121)","radio-border-color":"var(--primary-icon)","radio-border-color-disabled":"var(--disabled-button-background)","radio-border-color-selected":"var(--accent)","radio-border-width":"2px","radio-checked-icon-color":"var(--accent)","radio-checked-icon-color-disabled":"var(--disabled-button-background)","radio-checked-icon-size-large":"12px","radio-checked-icon-size-medium":"12px","radio-size-large":"24px","radio-size-medium":"20px","rating-star-active":"#FF9831","red-primary":"rgb(251,60,68)","red-secondary":"rgb(255,241,239)","red-tertiary":"rgb(118,22,27)","scroll-shadow":"0 0px 16px 0 rgba(52,72,84,0.05)","scroll-thumb":"rgba(255, 255, 255, 0.3)","search-input-background":"rgba(255, 255, 255, 0.19)","secondary-button-background":"rgba(0,0,0,0.00)","secondary-button-background-floating":"#4B4C4F","secondary-button-background-on-dark":"rgba(255, 255, 255, 0.4)","secondary-button-pressed":"rgba(0,0,0,0.00)","secondary-button-stroke":"rgb(167,179,191)","secondary-button-text":"rgb(255,255,255)","secondary-emphasized-button-stroke":"rgb(69,153,255)","secondary-icon":"rgb(222,227,233)","secondary-text":"rgb(222,227,233)","secondary-text-on-media":"rgba(255,255,255,0.70)","section-header-addOnEnd-button-padding-horizontal":"0px","section-header-addOnEnd-button-padding-vertical":"0px","section-header-addOnEnd-margin-horizontal":"8px","section-header-addOnStart-margin-horizontal":"12px","section-header-padding-vertical":"16px","section-header-subtitle-margin-vertical":"14px","section-header-subtitle-with-addOnEnd-margin-vertical":"6px","section-header-text":"#BCC0C4","separator-menu-item-margin-horizontal":"16px","separator-menu-item-margin-vertical":"4px","shadow-1":"rgba(0, 0, 0, 0.1)","shadow-2":"rgba(0, 0, 0, 0.2)","shadow-5":"rgba(0, 0, 0, 0.5)","shadow-8":"rgba(0, 0, 0, 0.8)","shadow-base":"0 1px 2px var(--shadow-2)","shadow-elevated":"0 8px 20px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1)","shadow-emphasis":"0 2px 12px var(--shadow-2)","shadow-inset":"rgba(255, 255, 255, 0.05)","shadow-on-media":"0px 0px 1px rgba(0, 0, 0, 0.62)","shadow-persistent":"0px 0px 12px rgba(28, 43, 51, 0.6)","shadow-primary":"0px 0px 12px rgba(28, 43, 51, 0.1)","shadow-responsive":"0px 8px 16px 0px rgba(0, 0, 0, 0.1)","stepper-active":"#CBD2D9","stepper-inactive":"rgba(203, 210, 217, 0.4)","surface-background":"rgb(28,43,51)","switch-active":"hsl(214, 100%, 59%)","switch-inactive":"#3E4042","switch-unchecked-background-color":"#6F7276","tab-height":"60px","tab-icon-padding-end":"0px","tab-text-icon-gap":"4px","tab-underline-color":"transparent","tab-underline-height":"3px","teal-primary":"rgb(0,152,124)","teal-secondary":"rgb(227,247,241)","teal-tertiary":"rgb(10,68,56)","text-badge-attention-background":"hsl(40, 89%, 52%)","text-badge-corner-radius":"4px","text-badge-critical-background":"#e41e3f","text-badge-info-background":"hsl(214, 100%, 59%)","text-badge-padding-horizontal":"6px","text-badge-padding-vertical":"6px","text-badge-success-background":"#31A24C","text-highlight":"rgb(130,185,230)","text-input-caption-margin-top":"10px","text-input-field-font-family":"Placeholder Font","text-input-field-font-size":"1rem","text-input-field-font-stretch":"initial","text-input-field-font-weight":"500","text-input-field-line-height":"1.2941","text-input-label-font-family":"Placeholder Font","text-input-label-font-size":"17px","text-input-label-font-size-scale-multiplier":"0.75","text-input-label-font-stretch":"initial","text-input-label-font-weight":"400","text-input-label-line-height":"1.2941","text-input-multi-padding-between-text-scrollbar":"20px","text-input-multi-padding-scrollbar":"16px","text-input-outside-label":"#FFFFFF","text-input-padding-vertical":"12px","toast-addon-padding-horizontal":"6px","toast-addon-padding-vertical":"0px","toast-background":"rgb(70,90,105)","toast-border-color":"transparent","toast-border-style":"none","toast-border-width":"0px","toast-container-max-width":"100%","toast-container-min-width":"320px","toast-container-padding-horizontal":"14px","toast-container-padding-vertical":"16px","toast-corner-radius":"8px","toast-text":"#FFFFFF","toast-text-link":"#4599FF","toaster-view-max-width":"328px","toggle-active-background":"rgb(222,227,233)","toggle-active-icon":"rgb(28,43,51)","toggle-active-text":"rgb(28,43,51)","toggle-button-active-background":"#E6F2FF","tooltip-background":"rgb(70,90,105)","tooltip-box-shadow":"none","tooltip-corner-radius":"8px","typeahead-list-outer-padding-vertical":"8px",warning:"rgb(245,180,0)",wash:"#3E4042","web-wash":"#18191A","yellow-primary":"rgb(161,132,0)","yellow-secondary":"rgb(255,246,161)","yellow-tertiary":"rgb(72,59,12)"}}),null);
__d("CDSStyleXDefaultTheme",[],(function(t,n,r,o,a,i){a.exports={accent:"rgb(28,43,51)","alert-banner-corner-radius":"8px","always-black":"black","always-dark-gradient":"linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0.6))","always-dark-overlay":"rgba(0, 0, 0, 0.4)","always-gray-40":"#65676B","always-gray-75":"#BCC0C4","always-gray-95":"#F0F2F5","always-light-overlay":"rgba(255, 255, 255, 0.4)","always-white":"rgb(255,255,255)","attachment-footer-background":"rgba(28,43,51,0.10)","background-deemphasized":"rgb(241,244,247)","badge-background-color-blue":"var(--accent)","badge-background-color-dark-gray":"var(--secondary-icon)","badge-background-color-gray":"var(--disabled-icon)","badge-background-color-green":"var(--positive)","badge-background-color-light-blue":"var(--highlight-bg)","badge-background-color-red":"var(--notification-badge)","badge-background-color-yellow":"var(--base-lemon)","base-blue":"#1877F2","base-cherry":"#F3425F","base-grape":"#9360F7","base-lemon":"#F7B928","base-lime":"#45BD62","base-pink":"#FF66BF","base-seafoam":"#54C7EC","base-teal":"#2ABBA7","base-tomato":"#FB724B","blue-link":"rgb(0,100,224)","blue-primary":"rgb(0,136,244)","blue-secondary":"rgb(4,59,114)","blue-tertiary":"rgb(235,245,255)","blueprint-button-height-large":"48px","blueprint-button-height-medium":"40px","border-focused":"#63788A","button-corner-radius":"4px","button-corner-radius-large":"12px","button-corner-radius-medium":"10px","button-height-large":"52px","button-height-medium":"36px","button-icon-padding-large":"16px","button-icon-padding-medium":"16px","button-inner-icon-spacing-large":"3px","button-inner-icon-spacing-medium":"3px","button-padding-horizontal-large":"16px","button-padding-horizontal-medium":"16px","button-padding-icon-only":"16px","card-background":"rgb(255,255,255)","card-background-flat":"rgb(255,255,255)","card-box-shadow":"0 8px 20px 0  var(--shadow-2), 0 2px 4px 0 var(--shadow-1)","card-corner-radius":"4px","card-padding-horizontal":"10px","card-padding-vertical":"20px","chartreuse-primary":"rgb(106,147,22)","chartreuse-secondary":"rgb(50,65,19)","chartreuse-tertiary":"rgb(226,255,152)","chat-bubble-border-radius":"18px","chat-bubble-emphasis-ring-after":"black","chat-bubble-emphasis-ring-before":"white","chat-bubble-padding-horizontal":"12px","chat-bubble-padding-vertical":"8px","chat-incoming-message-bubble-background-color":"#F0F0F0","chat-outgoing-message-bubble-background-color":"var(--accent)","chat-replied-message-background-color":"rgba(0, 0, 0, 0.03)","chat-text-blockquote-color-background-line":"rgba(0, 0, 0, 0.12)","chat-text-blockquote-color-text-primary-media":"rgba(255, 255, 255, 0.7)","chip-corner-radius":"4px","comment-background":"rgba(28,43,51,0.10)","comment-bubble":"18px","comment-footer-background":"#F6F9FA","cyan-primary":"rgb(0,142,213)","cyan-secondary":"rgb(15,63,93)","cyan-tertiary":"rgb(231,245,255)","dataviz-blue-primary":"#1D85FC","dataviz-blue-secondary":"#043B72","dataviz-orange":"#D06C14","dataviz-primary-1":"rgb(0,174,143)","dataviz-primary-2":"rgb(156,219,255)","dataviz-primary-3":"rgb(73,156,255)","dataviz-secondary-1":"rgb(83,78,191)","dataviz-secondary-2":"rgb(103,96,228)","dataviz-secondary-3":"rgb(119,45,88)","dataviz-supplementary-1":"rgb(253,91,67)","dataviz-supplementary-2":"rgb(161,132,0)","dataviz-supplementary-3":"rgb(36,131,44)","dataviz-supplementary-4":"rgb(51,51,52)","dialog-anchor-vertical-padding":"32px","dialog-corner-radius":"4px","dialog-size-medium-width":"100%","dialog-size-small-width":"100%","disabled-button-background":"#E4E6EB","disabled-button-text":"#BCC0C4","disabled-icon":"rgba(28,43,51,0.25)","disabled-text":"rgba(28,43,51,0.25)",divider:"rgb(222,227,233)","divider-on-color":"#CED0D4","emphasized-card-background-blue-comet":"linear-gradient(rgb(192,223,255),rgb(210,232,255))","emphasized-card-background-green-comet":"linear-gradient(rgb(185,245,170),rgb(205,250,195))","emphasized-card-background-purple-comet":"linear-gradient(rgb(210, 210, 255),rgb(225,225,253))","emphasized-card-background-teal-comet":"linear-gradient(rgb(165,240,230),rgb(195,245,240))","event-date":"rgb(220,55,60)","fb-logo":"#0866FF","fb-wordmark":"#0866FF","fds-animation-enter-exit-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-enter-exit-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-animation-expand-collapse-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-expand-collapse-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-fade-in":"cubic-bezier(0, 0, 1, 1)","fds-animation-fade-out":"cubic-bezier(0, 0, 1, 1)","fds-animation-move-in":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-move-out":"cubic-bezier(0.17, 0.17, 0, 1)","fds-animation-passive-move-in":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-passive-move-out":"cubic-bezier(0.5, 0, 0.1, 1)","fds-animation-quick-move-in":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-quick-move-out":"cubic-bezier(0.1, 0.9, 0.2, 1)","fds-animation-swap-shuffle-in":"cubic-bezier(0.14, 1, 0.34, 1)","fds-animation-swap-shuffle-out":"cubic-bezier(0.45, 0.1, 0.2, 1)","fds-black":"#000000","fds-black-alpha-05":"rgba(0, 0, 0, 0.05)","fds-black-alpha-10":"rgba(0, 0, 0, 0.1)","fds-black-alpha-15":"rgba(0, 0, 0, 0.15)","fds-black-alpha-20":"rgba(0, 0, 0, 0.2)","fds-black-alpha-30":"rgba(0, 0, 0, 0.3)","fds-black-alpha-40":"rgba(0, 0, 0, 0.4)","fds-black-alpha-50":"rgba(0, 0, 0, 0.5)","fds-black-alpha-60":"rgba(0, 0, 0, 0.6)","fds-black-alpha-80":"rgba(0, 0, 0, 0.8)","fds-blue-05":"#ECF3FF","fds-blue-30":"#AAC9FF","fds-blue-40":"#77A7FF","fds-blue-60":"#1877F2","fds-blue-70":"#2851A3","fds-blue-80":"#1D3C78","fds-button-text":"#444950","fds-comment-background":"#F2F3F5","fds-dark-mode-gray-100":"#1C1C1C","fds-dark-mode-gray-35":"#CCCCCC","fds-dark-mode-gray-50":"#828282","fds-dark-mode-gray-70":"#4A4A4A","fds-dark-mode-gray-80":"#373737","fds-dark-mode-gray-90":"#282828","fds-duration-extra-extra-short-in":"100ms","fds-duration-extra-extra-short-out":"100ms","fds-duration-extra-long-in":"1000ms","fds-duration-extra-long-out":"1000ms","fds-duration-extra-short-in":"200ms","fds-duration-extra-short-out":"150ms","fds-duration-long-in":"500ms","fds-duration-long-out":"350ms","fds-duration-medium-in":"400ms","fds-duration-medium-out":"350ms","fds-duration-none":"0ms","fds-duration-short-in":"280ms","fds-duration-short-out":"200ms","fds-fast":"200ms","fds-gray-00":"#F5F6F7","fds-gray-05":"#F2F3F5","fds-gray-10":"#EBEDF0","fds-gray-100":"#1C1E21","fds-gray-20":"#DADDE1","fds-gray-25":"#CCD0D5","fds-gray-30":"#BEC3C9","fds-gray-45":"#8D949E","fds-gray-70":"#606770","fds-gray-80":"#444950","fds-gray-90":"#303338","fds-green-55":"#00A400","fds-green-65":"#51CE70","fds-highlight":"#3578E5","fds-highlight-cell-background":"#ECF3FF","fds-primary-icon":"#1C1E21","fds-primary-text":"#1C1E21","fds-red-55":"#FA383E","fds-slow":"400ms","fds-soft":"cubic-bezier(.08,.52,.52,1)","fds-spectrum-aluminum-tint-70":"#E4F0F6","fds-spectrum-blue-gray-tint-70":"#CFD1D5","fds-spectrum-cherry":"#F35369","fds-spectrum-cherry-tint-70":"#FBCCD2","fds-spectrum-grape-tint-70":"#DDD5F0","fds-spectrum-grape-tint-90":"#F4F1FA","fds-spectrum-lemon-dark-1":"#F5C33B","fds-spectrum-lemon-tint-70":"#FEF2D1","fds-spectrum-lime":"#A3CE71","fds-spectrum-lime-tint-70":"#E4F0D5","fds-spectrum-orange-tint-70":"#FCDEC5","fds-spectrum-orange-tint-90":"#FEF4EC","fds-spectrum-seafoam-tint-70":"#CAEEF9","fds-spectrum-slate-dark-2":"#89A1AC","fds-spectrum-slate-tint-70":"#EAEFF2","fds-spectrum-teal":"#6BCEBB","fds-spectrum-teal-dark-1":"#4DBBA6","fds-spectrum-teal-dark-2":"#31A38D","fds-spectrum-teal-tint-70":"#D2F0EA","fds-spectrum-teal-tint-90":"#F0FAF8","fds-spectrum-tomato":"#FB724B","fds-spectrum-tomato-tint-30":"#F38E7B","fds-spectrum-tomato-tint-90":"#FDEFED","fds-strong":"cubic-bezier(.12,.8,.32,1)","fds-unified-blue-35":"#1455B0","fds-unified-gray-20":"#323436","fds-white":"#FFFFFF","fds-white-alpha-05":"rgba(255, 255, 255, 0.05)","fds-white-alpha-10":"rgba(255, 255, 255, 0.1)","fds-white-alpha-20":"rgba(255, 255, 255, 0.2)","fds-white-alpha-30":"rgba(255, 255, 255, 0.3)","fds-white-alpha-40":"rgba(255, 255, 255, 0.4)","fds-white-alpha-50":"rgba(255, 255, 255, 0.5)","fds-white-alpha-60":"rgba(255, 255, 255, 0.6)","fds-white-alpha-80":"rgba(255, 255, 255, 0.8)","fds-yellow-20":"#FFBA00","filter-accent":"invert(39%) sepia(57%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(147.75%) hue-rotate(202deg) brightness(97%) contrast(96%)","filter-always-white":"invert(100%)","filter-blue-link-icon":"invert(30%) sepia(98%) saturate(200%) saturate(200%) saturate(200%) saturate(166.5%) hue-rotate(192deg) brightness(91%) contrast(101%)","filter-disabled-icon":"invert(80%) sepia(6%) saturate(200%) saturate(120%) hue-rotate(173deg) brightness(98%) contrast(89%)","filter-negative":"invert(25%) sepia(33%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(110%) hue-rotate(345deg) brightness(132%) contrast(96%)","filter-placeholder-icon":"invert(59%) sepia(11%) saturate(200%) saturate(135%) hue-rotate(176deg) brightness(96%) contrast(94%)","filter-positive":"invert(37%) sepia(61%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(115%) hue-rotate(91deg) brightness(97%) contrast(105%)","filter-primary-accent":"invert(39%) sepia(57%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(147.75%) hue-rotate(202deg) brightness(97%) contrast(96%)","filter-primary-deemphasized-button-icon":"invert(28%) sepia(100%) saturate(6042%) hue-rotate(202deg) brightness(96%) contrast(101%)","filter-primary-icon":"invert(8%) sepia(10%) saturate(200%) saturate(200%) saturate(166%) hue-rotate(177deg) brightness(104%) contrast(91%)","filter-secondary-button-icon-on-media":"invert(100%)","filter-secondary-icon":"invert(39%) sepia(21%) saturate(200%) saturate(109.5%) hue-rotate(174deg) brightness(94%) contrast(86%)","filter-warning-icon":"invert(77%) sepia(29%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(200%) saturate(128%) hue-rotate(359deg) brightness(102%) contrast(107%)","focus-ring-blue":"#1877F2","focus-ring-outline-forced-colors":"2px auto transparent !important","focus-ring-outline-link":"2px auto var(--focus-ring-blue)","focus-ring-shadow-default":"0 0 0 2px var(--always-white), 0 0 0 4px var(--focus-ring-blue)","focus-ring-shadow-inset":"0 0 0 2px var(--focus-ring-blue) inset, 0 0 0 4px var(--always-white) inset","font-family-apple":"system-ui, -apple-system, BlinkMacSystemFont, '.SFNSText-Regular', sans-serif","font-family-code":"ui-monospace, Menlo, Consolas, Monaco, monospace","font-family-default":"Helvetica, Arial, sans-serif","font-family-segoe":"Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","font-family-system-fds":"system-ui, -apple-system, BlinkMacSystemFont, Segoe UI Historic, Segoe UI, Helvetica, Arial, sans-serif","fuschia-primary":"rgb(250,45,138)","fuschia-secondary":"rgb(118,14,62)","fuschia-tertiary":"rgb(255,241,246)","glimmer-animation-direction":"alternate","glimmer-animation-duration":"1000ms","glimmer-animation-timing-function":"steps(10, end)","glimmer-base-opaque":"#979A9F","glimmer-corner-radius":"4px","glimmer-high-contrast-base-opaque":"#65686C","glimmer-opacity-high-contrast-max":"1","glimmer-opacity-high-contrast-min":"0.08","glimmer-opacity-max":"1","glimmer-opacity-min":"0.25","glimmer-spinner-icon":"#65676B","global-panel-width":"0px","global-panel-width-expanded":"0px","green-primary":"rgb(43,154,53)","green-secondary":"rgb(26,68,27)","green-tertiary":"rgb(227,250,224)","header-height":"0px","hero-banner-background":"#FFFFFF","highlight-bg":"#E7F3FF","hosted-view-selected-state":"rgb(52,72,84)","hover-overlay":"rgba(0, 0, 0, 0.05)","image-corner-radius":"4px","infochip-medium-radius":"12px","input-background":"rgb(255,255,255)","input-background-active":"hsla(var(--accent-h), var(--accent-s), var(--accent-l), 0.05)","input-background-disabled":"#F0F2F5","input-background-error-active":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-error-hover":"hsla(var(--negative-h), var(--negative-s), var(--negative-l), 0.05)","input-background-hover":"var(--input-background)","input-background-warn-active":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-background-warn-hover":"hsla(var(--warning-h), var(--warning-s), var(--warning-l), 0.05)","input-border-color":"#CED0D4","input-border-color-hover":"var(--placeholder-text)","input-border-width":"1px","input-corner-radius":"4px","input-label-color-disabled":"var(--disabled-text)","input-label-color-error":"var(--negative)","input-label-color-highlighted":"hsl(214, 89%, 52%)","input-label-color-inside":"var(--secondary-text)","inverse-text":"var(--always-white)","list-cell-chevron":"rgb(99,120,138)","list-cell-corner-radius":"4px","list-cell-min-height":"52px","list-cell-padding-vertical":"20px","list-cell-padding-vertical-with-addon":"14px","magenta-primary":"rgb(215,77,204)","magenta-secondary":"rgb(96,36,91)","magenta-tertiary":"rgb(255,239,254)","media-hover":"rgba(68, 73, 80, 0.15)","media-inner-border":"rgba(28,43,51,0.10)","media-outer-border":"#FFFFFF","media-pressed":"rgba(28,43,51,0.30)","menu-base-list-item-padding-horizontal":"8px","menu-base-list-item-padding-vertical":"12px","menu-base-size-full-margin-end":"48px","menu-item-base-margin-horizontal":"8px","menu-item-base-margin-vertical":"0px","menu-item-base-overlay-radius":"4px","menu-item-base-padding-horizontal":"8px","menu-item-base-padding-vertical":"12px","menu-item-base-with-icon-padding-horizontal":"var(--menu-item-base-padding-horizontal)","messenger-application-max-width":"2560px","messenger-card-background":"#FFFFFF","messenger-card-box-shadow":"0px 1px 2px 0px #0000001A","messenger-card-corner-radius":"8px","messenger-card-max-width":"480px","messenger-card-min-width":"300px","messenger-card-spacing":"16px","messenger-reply-background":"#F0F2F5","messenger-sidebar-collapsed-width":"44px","messenger-sidebar-expanded-width":"240px","mwp-header-background-color":"var(--messenger-card-background)","mwp-header-button-color":"var(--accent)","mwp-message-row-background":"var(--messenger-card-background)","nav-bar-background":"rgba(0,0,0,0.00)","nav-bar-background-gradient":"linear-gradient(to top, #FFFFFF, rgba(255,255,255.9), rgba(255,255,255,.7), rgba(255,255,255,.4), rgba(255,255,255,0))","nav-bar-background-gradient-wash":"linear-gradient(to top, #F0F2F5, rgba(240,242,245.9), rgba(240,242,245,.7), rgba(240,242,245,.4), rgba(240,242,245,0))","nav-list-cell-corner-radius":"4px","nav-list-cell-min-height":"0px","nav-list-cell-padding-vertical":"16px","nav-list-cell-padding-vertical-with-addon":"16px",negative:"rgb(220,55,60)","negative-background":"hsl(350, 87%, 55%, 20%)","new-notification-background":"rgba(28,43,51,0.10)","non-media-pressed":"rgba(28,43,51,0.15)","non-media-pressed-on-dark":"rgba(255,255,255,0.30)","notification-badge":"rgb(220,55,60)","nux-card-body-padding-end":"24px","orange-primary":"rgb(208,108,20)","orange-secondary":"rgb(94,49,14)","orange-tertiary":"rgb(255,241,239)","overlay-alpha-80":"rgba(28,43,51,0.80)","overlay-on-media":"rgba(28,43,51,0.70)","page-footer-padding-vertical":"28px","placeholder-icon":"rgba(133,149,164)","placeholder-image":"rgb(222, 227, 233)","placeholder-text":"rgba(28,43,51,0.50)","placeholder-text-on-media":"rgba(255,255,255,0.45)","popover-background":"rgb(255,255,255)","popover-border-color":"transparent","popover-border-style":"none","popover-border-width":"0px","popover-card-background":"var(--card-background)",positive:"rgb(0,126,89)","positive-background":"#DEEFE1","press-overlay":"rgba(0, 0, 0, 0.10)","primary-button-background":"rgb(0,100,224)","primary-button-icon":"rgb(255,255,255)","primary-button-pressed":"#77A7FF","primary-button-text":"rgb(255,255,255)","primary-deemphasized-button-background":"rgba(0,0,0,0.00)","primary-deemphasized-button-pressed":"rgb(0,0,0,.05)","primary-deemphasized-button-pressed-overlay":"rgb(0,0,0,.1)","primary-deemphasized-button-text":"rgb(255,255,255)","primary-icon":"rgb(28,43,51)","primary-text":"rgb(28,43,51)","primary-text-on-media":"rgb(255,255,255)","primary-web-focus-indicator":"#D24294","progress-ring-blue-background":"rgba(24, 119, 242, 0.2)","progress-ring-blue-foreground":"hsl(214, 89%, 52%)","progress-ring-disabled-background":"rgba(190,195,201, 0.2)","progress-ring-disabled-foreground":"#BEC3C9","progress-ring-neutral-background":"rgba(0, 0, 0, 0.2)","progress-ring-neutral-foreground":"#000000","progress-ring-on-media-background":"rgba(255,255,255,0.20)","progress-ring-on-media-foreground":"rgb(255,255,255)","purple-primary":"rgb(125,116,255)","purple-secondary":"rgb(55,50,121)","purple-tertiary":"rgb(245,241,255)","radio-border-color":"var(--primary-icon)","radio-border-color-disabled":"var(--disabled-button-background)","radio-border-color-selected":"var(--accent)","radio-border-width":"2px","radio-checked-icon-color":"var(--accent)","radio-checked-icon-color-disabled":"var(--disabled-button-background)","radio-checked-icon-size-large":"12px","radio-checked-icon-size-medium":"12px","radio-size-large":"24px","radio-size-medium":"20px","rating-star-active":"#EB660D","red-primary":"rgb(251,60,68)","red-secondary":"rgb(118,22,27)","red-tertiary":"rgb(255,241,239)","scroll-shadow":"0 0 16px 0 rgba(52,72,84,0.05)","scroll-thumb":"#BCC0C4","search-input-background":"rgba(0, 0, 0, 0.04)","secondary-button-background":"rgba(0,0,0,0.00)","secondary-button-background-floating":"#ffffff","secondary-button-background-on-dark":"rgba(0, 0, 0, 0.4)","secondary-button-pressed":"rgba(0,0,0,0.00)","secondary-button-stroke":"rgb(203,210,217)","secondary-button-text":"rgb(28,43,51)","secondary-emphasized-button-stroke":"rgb(0,100,224)","secondary-icon":"rgb(99,120,138)","secondary-text":"rgb(99,120,138)","secondary-text-on-media":"rgba(255,255,255,0.70)","section-header-addOnEnd-button-padding-horizontal":"0px","section-header-addOnEnd-button-padding-vertical":"0px","section-header-addOnEnd-margin-horizontal":"8px","section-header-addOnStart-margin-horizontal":"12px","section-header-padding-vertical":"16px","section-header-subtitle-margin-vertical":"14px","section-header-subtitle-with-addOnEnd-margin-vertical":"6px","section-header-text":"#4B4C4F","separator-menu-item-margin-horizontal":"16px","separator-menu-item-margin-vertical":"4px","shadow-1":"rgba(0, 0, 0, 0.1)","shadow-2":"rgba(0, 0, 0, 0.2)","shadow-5":"rgba(0, 0, 0, 0.5)","shadow-8":"rgba(0, 0, 0, 0.8)","shadow-base":"0 1px 2px var(--shadow-2)","shadow-elevated":"0 8px 20px 0 rgba(0, 0, 0, 0.2), 0 2px 4px 0 rgba(0, 0, 0, 0.1)","shadow-emphasis":"0 2px 12px var(--shadow-2)","shadow-inset":"rgba(255, 255, 255, 0.5)","shadow-on-media":"0px 0px 1px rgba(0, 0, 0, 0.62)","shadow-persistent":"0px 0px 12px rgba(52, 72, 84, 0.05)","shadow-primary":"0px 5px 12px rgba(52, 72, 84, 0.2)","shadow-responsive":"0px 8px 16px 0px rgba(0, 0, 0, 0.1)","stepper-active":"#344854","stepper-inactive":"rgba(52, 72, 84, 0.4)","surface-background":"rgb(255,255,255)","switch-active":"hsl(214, 89%, 52%)","switch-inactive":"#CED0D4","switch-unchecked-background-color":"#8F9297","tab-height":"60px","tab-icon-padding-end":"0px","tab-text-icon-gap":"4px","tab-underline-color":"transparent","tab-underline-height":"3px","teal-primary":"rgb(0,152,124)","teal-secondary":"rgb(10,68,56)","teal-tertiary":"rgb(227,247,241)","text-badge-attention-background":"hsl(40, 89%, 52%)","text-badge-corner-radius":"4px","text-badge-critical-background":"#e41e3f","text-badge-info-background":"hsl(214, 89%, 52%)","text-badge-padding-horizontal":"6px","text-badge-padding-vertical":"6px","text-badge-success-background":"#31A24C","text-highlight":"rgb(0,97,160)","text-input-caption-margin-top":"10px","text-input-field-font-family":"Placeholder Font","text-input-field-font-size":"1rem","text-input-field-font-stretch":"initial","text-input-field-font-weight":"500","text-input-field-line-height":"1.2941","text-input-label-font-family":"Placeholder Font","text-input-label-font-size":"17px","text-input-label-font-size-scale-multiplier":"0.75","text-input-label-font-stretch":"initial","text-input-label-font-weight":"400","text-input-label-line-height":"1.2941","text-input-multi-padding-between-text-scrollbar":"20px","text-input-multi-padding-scrollbar":"16px","text-input-outside-label":"#000000","text-input-padding-vertical":"12px","toast-addon-padding-horizontal":"6px","toast-addon-padding-vertical":"0px","toast-background":"rgb(255,255,255)","toast-border-color":"transparent","toast-border-style":"none","toast-border-width":"0px","toast-container-max-width":"100%","toast-container-min-width":"320px","toast-container-padding-horizontal":"14px","toast-container-padding-vertical":"16px","toast-corner-radius":"8px","toast-text":"#1C2B33","toast-text-link":"#4599FF","toaster-view-max-width":"328px","toggle-active-background":"rgb(28,43,51)","toggle-active-icon":"rgb(255,255,255)","toggle-active-text":"rgb(255,255,255)","toggle-button-active-background":"#E7F3FF","tooltip-background":"rgb(52,72,84)","tooltip-box-shadow":"none","tooltip-corner-radius":"8px","typeahead-list-outer-padding-vertical":"8px",warning:"rgb(210,120,5)",wash:"#E4E6EB","web-wash":"#F0F2F5","yellow-primary":"rgb(161,132,0)","yellow-secondary":"rgb(72,59,12)","yellow-tertiary":"rgb(255,246,161)"}}),null);
__d("CDSTextConfig",["cx","UserAgent"],(function(t,n,r,o,a,i,l,s){"use strict";"_9ry3";"_adzf";"_aqio";var e={blueLink:{color:"x1fey0fg",$$css:!0},disabledText:{color:"x1dntmbh",$$css:!0},inherit_INTERNAL_ONLY:{color:"x1heor9g",$$css:!0},inverseText:{color:"x1qoxp87",$$css:!0},navListSelectedAccentText:{color:"x15d4u2p",$$css:!0},negative:{color:"x1a1m0xk",$$css:!0},placeholderText:{color:"x12scifz",$$css:!0},placeholderTextOnMedia:{color:"x10dhlfy",$$css:!0},positive:{color:"x6u5lvz",$$css:!0},primaryButtonText:{color:"xtk6v10",$$css:!0},primaryDeemphasizedButtonText:{color:"x1mvi0mv",$$css:!0},primaryOnMediaButtonText:{color:"x1yeb1j6",$$css:!0},primaryText:{color:"xzsf02u",$$css:!0},primaryTextOnMedia:{color:"x17z8epw",$$css:!0},secondaryButtonText:{color:"x1dem4cn",$$css:!0},secondaryDestructiveButtonText:{color:"x8tsa8r",$$css:!0},secondaryOnMediaButtonText:{color:"xdczh51",$$css:!0},secondaryText:{color:"xi81zsa",$$css:!0},secondaryTextOnMedia:{color:"xkxfvhb",$$css:!0},toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE:{color:"xf9uev8",$$css:!0},toastTextLink:{color:"x1cpl2wf",$$css:!0},warning:{color:"xcly8g5",$$css:!0}},u={apple:{MozOsxFontSmoothing:"xlh3980",WebkitFontSmoothing:"xvmahel",fontFamily:"x13c4wfe",$$css:!0},default:{fontFamily:"x10q8g1b",$$css:!0},segoe:{fontFamily:"x1vm4pi3",$$css:!0}},c={apple:{fontFamily:"xrg5i2u",$$css:!0},default:{fontFamily:"x15zrtf0",$$css:!0},windows:{fontFamily:"x12qp5cl",$$css:!0}},d={apple:{fontFamily:"x1miljz0",$$css:!0},default:{fontFamily:"x1uzi27p",$$css:!0},windows:{fontFamily:"x18qtup9",$$css:!0}},m={apple:{fontFamily:"x13sc5st",$$css:!0},default:{fontFamily:"x15bjy8r",$$css:!0},windows:{fontFamily:"x1q5ab00",$$css:!0}},p={apple:{fontFamily:"x17lgo4e",$$css:!0},default:{fontFamily:"xygjavf",$$css:!0},windows:{fontFamily:"x1t03qr3",$$css:!0}},_={apple:{fontFamily:"xej1f7s",$$css:!0},default:{fontFamily:"xfsvlko",$$css:!0},windows:{fontFamily:"x188k2y4",$$css:!0}},f={apple:{fontFamily:"x1gbch0d",$$css:!0},default:{fontFamily:"x1orftwa",$$css:!0},windows:{fontFamily:"x1215byi",$$css:!0}},g={apple:{fontFamily:"x1fnpb41",$$css:!0},default:{fontFamily:"x1rg2z3u",$$css:!0},windows:{fontFamily:"x1ff8u0n",$$css:!0}},h={apple:{fontFamily:"x1cihehr",$$css:!0},default:{fontFamily:"x1shdpqr",$$css:!0},windows:{fontFamily:"x11x3m1q",$$css:!0}},y={apple:{fontFamily:"xcd4a2j",$$css:!0},default:{fontFamily:"xzz1hku",$$css:!0},windows:{fontFamily:"xhqx0jl",$$css:!0}},C={apple:{fontFamily:"x7igvfm",$$css:!0},default:{fontFamily:"x1fh7n3k",$$css:!0},windows:{fontFamily:"x1i3kngk",$$css:!0}},b={apple:{fontFamily:"x31b0c2",$$css:!0},default:{fontFamily:"x1gk729v",$$css:!0},windows:{fontFamily:"x1rhavg7",$$css:!0}},v={apple:{fontFamily:"x1ht2ja9",$$css:!0},default:{fontFamily:"x6f7imt",$$css:!0},windows:{fontFamily:"x9axs75",$$css:!0}},S={apple:{fontFamily:"x15smpfu",$$css:!0},default:{fontFamily:"x1vv9oc4",$$css:!0},windows:{fontFamily:"xghutw1",$$css:!0}},R={body:{fontSize:"xt4736n",fontStretch:"x1havqas",fontWeight:"x1f0sm9e",$$css:!0},bodyEmphasized:{fontSize:"xpeg176",fontStretch:"x1b1u5bx",fontWeight:"x95da8x",$$css:!0},display1:{fontSize:"x1eb87vt",fontStretch:"xtvf9r5",fontWeight:"x1appeqy",$$css:!0},headline1:{fontSize:"x1t8f6od",fontStretch:"xzclw06",fontWeight:"x9f5f11",$$css:!0},headline2:{fontSize:"x1i8mgoa",fontStretch:"x163i06a",fontWeight:"x1kwtg5e",$$css:!0},headline3:{fontSize:"x1ejgnnb",fontStretch:"xza2c7i",fontWeight:"x1apb90u",$$css:!0},meta:{fontSize:"xnk8lw1",fontStretch:"xuarlqh",fontWeight:"xuemr51",$$css:!0},metaEmphasized:{fontSize:"xivvn39",fontStretch:"x18l1vnj",fontWeight:"x1vqvvx9",$$css:!0},primaryLabel:{fontSize:"x1sfkdl8",fontStretch:"xurcqga",fontWeight:"x3vd66c",$$css:!0},primaryLabelEmphasized:{fontSize:"xygqn1s",fontStretch:"x5wmda4",fontWeight:"xj3mx7g",$$css:!0},secondaryLabel:{fontSize:"x1qo61fq",fontStretch:"x81x36d",fontWeight:"xa4e6wy",$$css:!0},secondaryLabelEmphasized:{fontSize:"x1km5fng",fontStretch:"x1w0ydog",fontWeight:"xiq6o0p",$$css:!0},tertiaryLabel:{fontSize:"x1r3utbx",fontStretch:"xrah2mz",fontWeight:"xlahvtq",$$css:!0}},L={default:function(t){switch(t){case"body":return[4,5];case"bodyEmphasized":return[4,5];case"display1":return[10,8];case"headline1":return[7,7];case"headline2":return[6,7];case"headline3":return[5,5];case"meta":return[4,5];case"metaEmphasized":return[4,5];case"primaryLabel":return[5,5];case"primaryLabelEmphasized":return[5,5];case"secondaryLabel":return[4,5];case"secondaryLabelEmphasized":return[4,5];case"tertiaryLabel":return[2,3]}},segoe:function(t){switch(t){case"body":return[5,4];case"bodyEmphasized":return[5,4];case"display1":return[12,6,3];case"headline1":return[9,5,3];case"headline2":return[8,5,2];case"headline3":return[6,4,1];case"meta":return[6,3,1];case"metaEmphasized":return[5,4,1];case"primaryLabel":return[5,4];case"primaryLabelEmphasized":return[5,4];case"secondaryLabel":return[5,4];case"secondaryLabelEmphasized":return[5,4];case"tertiaryLabel":return[3,2]}},sfGecko:function(t){switch(t){case"body":return[5,4];case"bodyEmphasized":return[5,4];case"display1":return[11,7];case"headline1":return[8,6];case"headline2":return[7,6];case"headline3":return[5,5];case"meta":return[5,4];case"metaEmphasized":return[5,4];case"primaryLabel":return[5,4];case"primaryLabelEmphasized":return[5,4];case"secondaryLabel":return[5,4];case"secondaryLabelEmphasized":return[5,4];case"tertiaryLabel":return[3,2]}},sfWebkit:function(t){switch(t){case"body":return[5,4];case"bodyEmphasized":return[5,4];case"display1":return[10,8];case"headline1":return[7,7];case"headline2":return[7,6];case"headline3":return[5,5];case"meta":return[5,4];case"metaEmphasized":return[5,4];case"primaryLabel":return[5,5];case"primaryLabelEmphasized":return[5,5];case"secondaryLabel":return[5,4];case"secondaryLabelEmphasized":return[5,4];case"tertiaryLabel":return[3,3]}}},E=(function(){return r("UserAgent").isPlatform("Windows >= 6")?[u.segoe,L.segoe,"windows"]:r("UserAgent").isPlatform("Mac OS X >= 10.11")&&!r("UserAgent").isBrowser("Firefox < 55")||r("UserAgent").isPlatform("iOS >= 9")?[u.apple,r("UserAgent").isEngine("Gecko")?L.sfGecko:L.sfWebkit,"apple"]:[u.default,L.default,"default"]})(),k=E[0],I=E[1],T=E[2],D={colors:{blueLink:e.blueLink,disabledText:e.disabledText,inherit_INTERNAL_ONLY:e.inherit_INTERNAL_ONLY,inverseText:e.inverseText,navListSelectedAccentText:e.navListSelectedAccentText,negative:e.negative,placeholderText:e.placeholderText,placeholderTextOnMedia:e.placeholderTextOnMedia,positive:e.positive,primaryButtonText:e.primaryButtonText,primaryDeemphasizedButtonText:e.primaryDeemphasizedButtonText,primaryOnMediaButtonText:e.primaryOnMediaButtonText,primaryText:e.primaryText,primaryTextOnMedia:e.primaryTextOnMedia,secondaryButtonText:e.secondaryButtonText,secondaryDestructiveButtonText:e.secondaryDestructiveButtonText,secondaryOnMediaButtonText:e.secondaryOnMediaButtonText,secondaryText:e.secondaryText,secondaryTextOnMedia:e.secondaryTextOnMedia,toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE:e.toastText_DO_NOT_USE_WILL_BE_DELETED_WITHOUT_NOTICE,toastTextLink:e.toastTextLink,warning:e.warning},defaultFontFamily:k,offsets:I,styles:{body:{lineHeight:"var(--body-line-height)",style:[R.body,c[T]]},bodyEmphasized:{lineHeight:"var(--body-emphasized-line-height)",style:[R.bodyEmphasized,d[T]]},display1:{lineHeight:"var(--display1-line-height)",style:[R.display1,m[T]]},headline1:{lineHeight:"var(--headline1-line-height)",style:[R.headline1,p[T]]},headline2:{lineHeight:"var(--headline2-line-height)",style:[R.headline2,_[T]]},headline3:{lineHeight:"var(--headline3-line-height)",style:[R.headline3,f[T]]},meta:{lineHeight:"var(--meta-line-height)",style:[R.meta,g[T]]},metaEmphasized:{lineHeight:"var(--meta-emphasized-line-height)",style:[R.metaEmphasized,h[T]]},primaryLabel:{lineHeight:"var(--primary-label-line-height)",style:[R.primaryLabel,y[T]]},primaryLabelEmphasized:{lineHeight:"var(--primary-label-emphasized-line-height)",style:[R.primaryLabelEmphasized,C[T]]},secondaryLabel:{lineHeight:"var(--secondary-label-line-height)",style:[R.secondaryLabel,b[T]]},secondaryLabelEmphasized:{lineHeight:"var(--secondary-label-emphasized-line-height)",style:[R.secondaryLabelEmphasized,v[T]]},tertiaryLabel:{lineHeight:"var(--tertiary-label-line-height)",style:[R.tertiaryLabel,S[T]]}}},x=D;l.default=x}),98);
__d("CDSThemeConfig",["CDSStyleXDarkTheme","CDSStyleXDefaultTheme","DspCDSWebLegacyThemeUsage"],(function(t,n,r,o,a,i,l){"use strict";var e=babelHelpers.extends({},r("CDSStyleXDefaultTheme")),s=babelHelpers.extends({},r("CDSStyleXDarkTheme"));Object.assign(e,r("DspCDSWebLegacyThemeUsage").light),Object.assign(s,r("DspCDSWebLegacyThemeUsage").dark);var u={dark:s,light:e,type:"VARIABLES"};l.default=u}),98);
__d("CometIXTFacebookCDSXfacUniversalTriggerRootQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25269379429417952"}),null);
__d("CometIXTFacebookCDSXfacUniversalTriggerRootQuery$Parameters",["CometIXTFacebookCDSXfacUniversalTriggerRootQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("CometIXTFacebookCDSXfacUniversalTriggerRootQuery_facebookRelayOperation"),metadata:{},name:"CometIXTFacebookCDSXfacUniversalTriggerRootQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("CometIXTFacebookCDSXfacUniversalTriggerEntryPoint.entrypoint",["CometIXTFacebookCDSXfacUniversalTriggerRootQuery$Parameters","JSResourceForInteraction","WebPixelRatio","react","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=r("react")),u={getPreloadProps:function(t){return{queries:{reference:{parameters:r("CometIXTFacebookCDSXfacUniversalTriggerRootQuery$Parameters"),variables:{input:babelHelpers.extends({},t,{nt_context:null,trigger_session_id:r("uuidv4")()}),scale:o("WebPixelRatio").get()}}}}},root:r("JSResourceForInteraction")("CometIXTFacebookCDSXfacUniversalTriggerRoot.react").__setRef("CometIXTFacebookCDSXfacUniversalTriggerEntryPoint.entrypoint")},c=u;l.default=c}),98);
__d("CometLinkTrackingUtils.workplace",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){return e}i.decorateHrefWithTrackingInfo=e}),66);
__d("EBSMDBAPI",["EBDB","EBSMProperties","FBLogger"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.hasUserGivenAutoRestoreConsent,n=t?["secure_encrypted_backups_epochs","secure_encrypted_backups_client_state"]:[];n.push("auto_restore_opt_out");var a=Array.from(r("EBSMProperties").persistedTables).filter(function(e){return!n.includes(e)});try{var i=t?[]:["device_state"];if(i=i.concat(a),i.length>0){var l=await o("EBDB").getEBDB();await l.runInTransaction(i,"readwrite",function(e){return Promise.all(i.map(function(t){return e.stores[t].clear()}))},"EBDB - clear on logout")}}catch(e){r("FBLogger")("wmi_eb").mustfix(e)}}l.clearEBIDBNonPersistedRows=e}),98);
__d("FXAccountsCenterPasskeyCreationUpsellRootQuery$Parameters",["cr:8979"],(function(t,n,r,o,a,i,l){"use strict";i.exports=n("cr:8979")}),34);
__d("XFBCAAPasskeyCreationEntryPointUtils.facebook",["$InternalEnumUtils","CAAPasskeyCreationEntryPoint"],(function(t,n,r,o,a,i,l){var e=o("$InternalEnumUtils").createToJSEnum(r("CAAPasskeyCreationEntryPoint")),s=o("$InternalEnumUtils").createFromJSEnum(r("CAAPasskeyCreationEntryPoint"));l.toJSEnum=e,l.fromJSEnum=s}),98);
__d("FXAccountsCenterPasskeyCreationUpsellRoot.entrypoint",["FXAccountsCenterPasskeyCreationUpsellRootQuery$Parameters","JSResourceForInteraction","XFBCAAPasskeyCreationEntryPointUtils.facebook","nullthrows"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e,a,i,l,s=r("nullthrows")(o("XFBCAAPasskeyCreationEntryPointUtils.facebook").fromJSEnum((e=t.entrypoint)!=null?e:(a=t.routeProps)==null?void 0:a.entrypoint),"passkey entrypoint cannot be null in FXAccountsCenterPasskeyCreationUpsellRoot entrypoint"),u={entrypoint:s};return{extraProps:{entrypoint:(i=t.entrypoint)!=null?i:(l=t.routeProps)==null?void 0:l.entrypoint,showSuccessDialog:t.showSuccessDialog,variant:t.variant},queries:{query:{parameters:n("FXAccountsCenterPasskeyCreationUpsellRootQuery$Parameters"),variables:u}}}},root:r("JSResourceForInteraction")("FXAccountsCenterPasskeyCreationUpsellRoot.react").__setRef("FXAccountsCenterPasskeyCreationUpsellRoot.entrypoint")};l.default=e}),98);
__d("FXAccountsCenterPasskeyCreationUpsellRootQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25197454896514486"}),null);
__d("FXAccountsCenterPasskeyCreationUpsellRootQuery$Parameters.facebook",["FXAccountsCenterPasskeyCreationUpsellRootQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("FXAccountsCenterPasskeyCreationUpsellRootQuery_facebookRelayOperation"),metadata:{},name:"FXAccountsCenterPasskeyCreationUpsellRootQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("FalcoAppUniverse",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({FACEBOOK:1,INSTAGRAM:2,OCULUS:3}),l=e;i.default=l}),66);
__d("Queue",[],(function(t,n,r,o,a,i){var e={},l=(function(){function t(e){this._timeout=null,this._interval=(e==null?void 0:e.interval)||0,this._processor=e==null?void 0:e.processor,this._queue=[],this._stopped=!0}var n=t.prototype;return n._dispatch=function(t){var e=this;if(t===void 0&&(t=!1),!(this._stopped||this._queue.length===0)){var n=this._processor;if(n==null)throw this._stopped=!0,new Error("No processor available");var r=this._interval;if(r!=null)n.call(this,this._queue.shift()),this._timeout=setTimeout(function(){return e._dispatch()},r);else for(;this._queue.length;)n.call(this,this._queue.shift())}},n.enqueue=function(t){return this._processor&&!this._stopped?this._processor(t):this._queue.push(t),this},n.start=function(t){return t&&(this._processor=t),this._stopped=!1,this._dispatch(),this},n.isStarted=function(){return!this._stopped},n.dispatch=function(){this._dispatch(!0)},n.stop=function(t){return this._stopped=!0,t&&this._timeout!=null&&clearTimeout(this._timeout),this},n.merge=function(t,n){if(n){var e;(e=this._queue).unshift.apply(e,t._queue)}else{var r;(r=this._queue).push.apply(r,t._queue)}return t._queue=[],this._dispatch(),this},n.getLength=function(){return this._queue.length},t.get=function(r,o){var n;return r in e?n=e[r]:n=e[r]=new t(o),n},t.exists=function(n){return n in e},t.remove=function(n){return delete e[n]},t})();i.default=l}),66);
__d("FalcoLoggerTransports",["AnalyticsCoreData","Banzai","ExecutionEnvironment","FalcoAppUniverse","FalcoUtils","ODS","PersistedQueue","Queue","WebSession","performanceAbsoluteNow","promiseDone","requireDeferredForDisplay","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f=r("requireDeferredForDisplay")("TransportSelectingClientSingletonConditional").__setRef("FalcoLoggerTransports"),g=5*1024,h=(e=(m||(m=r("AnalyticsCoreData"))).max_delay_br_queue)!=null?e:60*1e3,y=(s=(m||(m=r("AnalyticsCoreData"))).max_delay_br_queue_immediate)!=null?s:1e3,C=(u=(m||(m=r("AnalyticsCoreData"))).max_delay_br_init_not_complete)!=null?u:1e3,b="falco:",v=new(r("Queue")),S=5e3,R=6e4,L=r("uuidv4")(),E="ods_web_batch",k=new Map,I=new Set,T=new Set,D=o("FalcoUtils").getTaggedBitmap(38),x=(c=r("FalcoAppUniverse").cast((m||(m=r("AnalyticsCoreData"))).app_universe))!=null?c:1,$=[],P=0,N=null,M=!1,w=!1,A=!1,F=!0,O=!1,B=!1,W=Date.now()-R,q=1,U=C>h?C:h,V=C;de();for(var H of(G=(m||(m=r("AnalyticsCoreData"))).stateful_events_list_for_br)!=null?G:[]){var G;I.add(H)}for(var z of(j=(m||(m=r("AnalyticsCoreData"))).stateless_non_fb_events_for_br)!=null?j:[]){var j;T.add(z)}function K(){return(m||(m=r("AnalyticsCoreData"))).enable_bladerunner&&!(_||(_=r("ExecutionEnvironment"))).isInWorker}function Q(e,t){o("FalcoUtils").bumpODSMetrics(t.item.name,"event.info.streaming.batched",1);var n=t.item.extra.length;P+n>g&&(clearTimeout(N),X()),$.push([e,t]),P+=n}function X(){N=null,M=!1;var e=$;re("event.info.streaming.batch_processing",e.map(function(e){return e[1].item})),B?v.enqueue(function(t){return t.log(e.map(function(e){return e[1].item}),function(t){if(!t){Y(e,"event.info.banzai_fallback");return}J(e,t,"event.info.streaming.enqueued")})}):Y(e,"event.non_critical_failure.streaming_init_not_complete"),$=[],P=0}function Y(e,t){var n=function(){var e,n=a[0],i=a[1],l=i.item;if(o("FalcoUtils").bumpODSMetrics(l.name,t,1),l.identity||(l.identity=(m||(m=r("AnalyticsCoreData"))).identity),(e=l.logCritical)!=null&&e)ae.logCritical([l],function(e){return n.markItem(i,e)});else{var s;(s=l.logImmediate)!=null&&s?ae.logImmediately([l],function(e){return n.markItem(i,e)}):ae.log([l],function(e){return n.markItem(i,e)})}};for(var a of e)n()}function J(e,t,n){for(var r of e){var a=r[0],i=r[1];o("FalcoUtils").bumpODSMetrics(i.item.name,n,1),a.markItem(i,t)}}function Z(e){return{events:e.map(function(e){return{name:e.name,extra:e.extra,rate:e.policy.r,time:e.time/1e3,tag:0,tags:e.tags,shouldAddState:e.shouldAddState,identity:te(e.identity),expTags:e.exptTags,sessionID:e.sessionId,deviceID:e.deviceId}})}}function ee(e){var t,n,o,a={deviceId:(m||(m=r("AnalyticsCoreData"))).device_id,familyDeviceId:null,osBuildNumber:null,sessionId:e,appId:m.app_id,appVersion:(t=(m||(m=r("AnalyticsCoreData"))).app_version)!=null?t:null,bundleId:null,consentState:null,identity:null,pushPhase:m.push_phase};return((n=(o=(m||(m=r("AnalyticsCoreData"))).stateful_events_list_for_br)==null?void 0:o.length)!=null?n:0)>0&&(a.ambientState=(m||(m=r("AnalyticsCoreData"))).state_for_br),a.identity=te(m.identity),Object.freeze(a)}function te(e){var t=e==null?void 0:e.claim,n=t!=null?[t]:[];if(x===2||x===3){var r=e==null?void 0:e.appScopedIdentity;if(r!==void 0)return{appScopedIdentity:{uid:r,identifier:r,claims:n}}}else{var o=e==null?void 0:e.fbIdentity;if(o!==void 0)return{facebookIdentity:{actorId:o.actorId,accountId:o.accountId,claims:n}}}return null}function ne(e,t){for(var n of e){var a,i,l,s=(l={},l.e=n.extra,l.r=n.policy.r,l.d=(a=n.deviceId)!=null?a:(m||(m=r("AnalyticsCoreData"))).device_id,l.s=(i=n.sessionId)!=null?i:o("WebSession").getId(),l.t=n.time,l.a=n.appVersion,l);n.privacyContext&&(s.p=n.privacyContext),n.tags!=null&&(s.b=n.tags);var u=n.identity;u&&(s.id=u),r("Banzai").post(b+n.name,s,t)}re("event.uploaded",e)}function re(e,t){for(var n of t)n.name!==E&&o("FalcoUtils").bumpODSMetrics(n.name,e,1)}function oe(e,t){var n="falco.fabric.www."+(m||(m=r("AnalyticsCoreData"))).push_phase;(d||(d=o("ODS"))).bumpEntityKey(1344,n,e,t)}var ae={log:function(t,n){re("event.info.banzai.log.upload_processing",t),ne(t,r("Banzai").BASIC),n(!0)},logImmediately:function(t,n){re("event.info.banzai.log_immediately.upload_processing",t),ne(t,r("Banzai").VITAL),n(!0)},logCritical:function(t,n){re("event.info.banzai.log_critical.upload_processing",t),ne(t,{signal:!0,retry:!0}),n(!0)}};function ie(e){de();var t=le(e,"banzai_data_loss","log"),n=le(e,"banzai_data_loss","logImmediately"),o=le(e,"banzai_data_loss","logCritical"),a=le(e,"bladerunner_data_loss",""),i=le(e,"bladerunner_data_loss","logCritical");if(oe("js.br_data_loss.posted."+e,1),B&&F)try{v.enqueue(function(t){return t.log([a],function(t){if(!t){oe("js.br.transport_failure."+e,1),ae.logCritical([i],function(t){oe("js.br.failure_fallback_success_callback."+e,1)});return}oe("js.br.success_callback."+e,1)})})}catch(t){oe("js.br.error_enqueueing."+e,1),ae.logCritical([i],function(t){oe("js.br.enqueuing_fallback_success_callback."+e,1)})}else F||oe("js.br.failed."+e,1),B||oe("js.br.init_not_complete."+e,1),ae.logCritical([i],function(t){oe("js.br.init_fallback_success_callback."+e,1)});ne([t],r("Banzai").BASIC),ne([n],r("Banzai").VITAL),ne([o],{signal:!0,retry:!0})}function le(e,t,n){return{name:t,time:(p||(p=r("performanceAbsoluteNow")))(),policy:{r:1},extra:JSON.stringify({event_index:e,falco_js_connection_id:L,logging_mode:n,logging_flow_flag:"original_flow"}),appVersion:(m||(m=r("AnalyticsCoreData"))).app_version}}function se(){W+S<Date.now()&&(ie(q),W=Date.now(),q++)}function ue(){window.setTimeout(function(){se(),q<=40&&ue()},R)}function ce(e){v.start(function(t){return t({log:function(n,o){re("event.info.streaming.queue_processing",n);var t=JSON.stringify(Z(n));e?(m||(m=r("AnalyticsCoreData"))).enable_ack?r("promiseDone")(e.amendWithAck(t),function(e){e?(re("event.streamed.with_ack",n),re("event.uploaded",n)):re("event.non_critical_failure.streaming.ack_failed",n),o(e)},function(){re("event.non_critical_failure.streaming.ack_rejected",n),o(!1)}):(e.amendWithoutAck(t),re("event.streamed.without_ack",n),re("event.uploaded",n)):(re("event.non_critical_error.streaming.stream_not_available",n),o(!1))},logImmediately:function(t,n){this.log(t,n)},logCritical:function(t,n){this.log(t,n)}})})}function de(){w||(B=!1,K()&&(f.onReady(function(e){if(!e){F=!1,O=!0,v.start(function(e){return e(ae)});return}var t=e,n,a={onTermination:function(t){t.message==="Stream closed"?(v.stop(!0),w=!1):(o("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.rejected",1),F=!1,v.start(function(e){return e(ae)}))},onFlowStatus:function(){}};r("promiseDone")(t.requestStream({method:"Falco"},JSON.stringify(ee(o("WebSession").getId())),a,{requestId:""}).then(function(e){n=e,ce(n),B=!0,U=h,V=y}).catch(function(e){o("FalcoUtils").bumpODSMetrics("","streaming.non_critical_failure.failed",1),v.stop(!0),w=!1}))}),w=!0))}function me(e){var t,n=e.name;if(!K()||!F)return!1;if(I.has(n)||e.policy.s!==1&&((t=(m||(m=r("AnalyticsCoreData"))).br_stateful_migration_on)!=null&&t)){var a;return e.shouldAddState=!0,e.tags=o("FalcoUtils").xorBitmap((a=e.tags)!=null?a:[0,0],D),!0}if(x!==1&&(m||(m=r("AnalyticsCoreData"))).enable_non_fb_br_stateless_by_default!==!0&&!T.has(n))return!1;if(e.policy.s===1){var i;return e.tags=o("FalcoUtils").xorBitmap((i=e.tags)!=null?i:[0,0],D),!0}return!1}function pe(e){if(e==="")return null;if(k.has(e))return k.get(e);var t={claim:""},n=e.split("^#");if(n.length>=4){var r=n[0],o=n[1],a=n[2],i=n[3];a!==""?t={appScopedIdentity:a,claim:i}:r!==""&&(t={fbIdentity:{accountId:r,actorId:o},claim:i}),k.set(e,t)}return t}function _e(){if(A)return;A=!0,r("PersistedQueue").setHandler("falco_queue_log",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){me(n.item)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log",1),de(),N==null&&(N=setTimeout(X,U)),i&&!e(a)&&(n.item.identity=i),Q(t,n)):(i?n.item.identity=i:n.item.identity=(m||(m=r("AnalyticsCoreData"))).identity,ae.log([n.item],function(e){return t.markItem(n,e)}))})(n)}),r("PersistedQueue").setHandler("falco_queue_immediately",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){me(n.item)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log_immediately",1),de(),(N==null||!M)&&(clearTimeout(N),N=setTimeout(X,V),M=!0),n.item.logImmediate=!0,i&&!e(a)&&(n.item.identity=i),Q(t,n),r("PersistedQueue").isPersistenceAllowed()||(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.streaming_no_persistence.log_immediately",1),X())):(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.banzai.log_immediately",1),i?n.item.identity=i:n.item.identity=(m||(m=r("AnalyticsCoreData"))).identity,ae.logImmediately([n.item],function(e){return t.markItem(n,e)}))})(n)}),r("PersistedQueue").setHandler("falco_queue_critical",function(t){for(var n,a=t.getQueueNameSuffix(),i=pe(a);n=t.dequeueItem();)(function(n){var l=n.item;me(l)?(o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.streaming.log_critical",1),de(),l.logCritical=!0,B?(i&&!e(a)&&(l.identity=i),v.enqueue(function(e){return e.logCritical([l],function(e){if(!e){l.identity||(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity),Y([[t,n]],"event.info.banzai_fallback.log_critical");return}J([[t,n]],e,"event.uploaded")})})):(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity,Y([[t,n]],"event.non_critical_failure.streaming_init_not_complete.log_critical"))):(i?l.identity=i:l.identity=(m||(m=r("AnalyticsCoreData"))).identity,o("FalcoUtils").bumpODSMetrics(n.item.name,"event.info.upload_method.banzai.log_critical",1),ae.logCritical([l],function(e){return t.markItem(n,e)}))})(n)}),(m||(m=r("AnalyticsCoreData"))).enable_dataloss_timer&&(de(),se(),ue());function e(e){try{var t=o("FalcoUtils").identityToString((m||(m=r("AnalyticsCoreData"))).identity);return e===t}catch(e){return(d||(d=o("ODS"))).bumpEntityKey(1344,"js.br.identity.check","exception.when.comparing.with.current.user.identity",1),!0}}}l.attach=_e}),98);
__d("MAWDropCutoverThreadsTable",["Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var r=o("ReQL").fromTableAscending(t.cutover_threads);return o("ReQL").toArrayAsync(r).then(function(r){return r.reduce(function(e,n){return e.then(function(){return t.cutover_threads.delete(n.openThreadId)})},(e||(e=n("Promise"))).resolve())})}l.call=s}),98);
__d("ReStoreEvent",[],(function(t,n,r,o,a,i){"use strict";var e=function(){};i.default=e}),66);
__d("ReStoreIndexedDbClosedEvent",["ReStoreEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(t,n){var r;return r=e.call(this)||this,r.idb=t,r.error=n,r}babelHelpers.inheritsLoose(t,e);var n=t.prototype;return n.getError=function(){return this.error},t})(r("ReStoreEvent"));l.default=e}),98);
__d("ReStoreIndexedDbFailToOpenEvent",["ReStoreEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(r("ReStoreEvent"));l.default=e}),98);
__d("ReStoreIndexedDbUpgradedEvent",["ReStoreEvent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(r("ReStoreEvent"));l.default=e}),98);
__d("ReStoreUnexpectedlyClosed",[],(function(t,n,r,o,a,i){"use strict";var e="ReStoreUnexpectedlyClosed",l=(function(e){function t(){return e.apply(this,arguments)||this}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));i.ERROR_NAME=e,i.ReStoreUnexpectedlyClosed=l}),66);
__d("GetLsDatabase",["ExecutionEnvironment","LSDefaultSyncGroups","LSPlatformErrorChannel","LSPlatformLsInitLog","MAWDropCutoverThreadsTable","MessengerLogHistory","MultipleTabsLogger","ReStoreDecryptionFailure","ReStoreEARSetupFailure","ReStoreIndexedDbClosedEvent","ReStoreIndexedDbFailToOpenEvent","ReStoreIndexedDbUpgradedEvent","ReStoreUnexpectedlyClosed","UserTimingUtils","cr:10099","cr:10200","cr:10755","cr:4489","cr:6218","cr:665","cr:7000","cr:7351","cr:8915","justknobx","promiseDone","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(e=n("cr:6218"))!=null?e:n("cr:10755"),d=(s=n("cr:7000"))!=null?s:n("cr:7351");function m(e){if(e instanceof r("ReStoreIndexedDbUpgradedEvent")&&c!=null&&r("justknobx")._("1410"))r("promiseDone")(c.killSharedWorker(!0,"ls_upgrade"));else if(e instanceof r("ReStoreIndexedDbClosedEvent")){var t=e.getError();n("cr:8915")!=null&&t instanceof(n("cr:8915")==null?void 0:n("cr:8915").ReStoreDbVersionChange)||t instanceof o("ReStoreDecryptionFailure").ReStoreDecryptionFailure||t instanceof o("ReStoreEARSetupFailure").ReStoreEARSetupFailure?r("LSPlatformErrorChannel").emit(t):t instanceof o("ReStoreUnexpectedlyClosed").ReStoreUnexpectedlyClosed&&n("cr:10099")!=null?(n("cr:10099")==null||n("cr:10099").releaseIfExist(),r("LSPlatformErrorChannel").emit(t)):t instanceof r("ReStoreIndexedDbFailToOpenEvent")&&n("cr:10099")!=null&&(n("cr:10099")==null||n("cr:10099").releaseIfExist())}}var p=async function(){var e=o("MessengerLogHistory").getInstance("db_init");r("promiseDone")(o("MultipleTabsLogger").getMultipleTabsAnnotation().then(function(t){e.debug("Has multiple tabs: "+t),o("MultipleTabsLogger").addAnnotationToQPLEvent(r("qpl")._(25305590,"1127"))})),e.debug("====Creating DB===="),o("LSPlatformLsInitLog").addPoint("vaulting_setup_start"),n("cr:4489")!=null&&n("cr:665")!=null&&(u||(u=r("ExecutionEnvironment"))).isInBrowser&&(e.debug("Vaulting setup started"),n("cr:665").setupMainWaLogger(),await o("UserTimingUtils").asyncMeasure("Setup Vaulting Materials",async function(){await n("cr:4489").setupVaultMaterials()}),e.debug("Vaulting setup finished")),o("LSPlatformLsInitLog").addPoint("vaulting_setup_end"),e.debug("Connecting to DB");var t=await n("cr:10200").createDB(m);return e.debug("Connection established"),await t.runInTransaction(async function(t){var n=d==null?[Promise.resolve(),Promise.resolve()]:[d.call(t),o("MAWDropCutoverThreadsTable").call(t)],r=n[0],a=n[1];await Promise.all([r,a]),o("LSPlatformLsInitLog").addPoint("success_maw_data_deletion"),e.debug("Seeding DB"),await o("LSDefaultSyncGroups").seedDb(t,void 0),e.debug("DB seeded")},"readwrite","ui",void 0,i.id+":113"),e.debug("====DB created===="),t},_;function f(){return _==null&&(_=(u||(u=r("ExecutionEnvironment"))).isInBrowser?p():new Promise(function(){})),_}l.get=f}),98);
__d("MAWBridgeDropAllSecureThreadsHandler",["I64","LSIntEnum","LSMessagingThreadTypeUtil","Promise","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var r=o("ReQL").fromTableAscending(t.threads_ranges_v2__generated).filter(function(e){return(s||(s=o("I64"))).equal(e.parentThreadKey,(u||(u=o("LSIntEnum"))).ofNumber(-1))||(s||(s=o("I64"))).equal(e.parentThreadKey,(u||(u=o("LSIntEnum"))).ofNumber(-10))});return o("ReQL").toArrayAsync(r).then(function(r){return r.reduce(function(e,n){return e.then(function(){return t.threads_ranges_v2__generated.delete(n.parentThreadKey,n.minThreadKey,n.minLastActivityTimestampMs)})},(e||(e=n("Promise"))).resolve())})}function d(t){var r=o("ReQL").fromTableAscending(t.threads).filter(function(e){return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)});return o("ReQL").toArrayAsync(r).then(function(r){return r.reduce(function(e,n){return e.then(function(){return t.threads.delete(n.threadKey)})},(e||(e=n("Promise"))).resolve())})}function m(t){return(e||(e=n("Promise"))).all([c(t),d(t)]).then(function(){return(e||(e=n("Promise"))).resolve()})}l.call=m}),98);
__d("WormGlobalConfig",[],(function(t,n,r,o,a,i){"use strict";var e={};function l(){return e}function s(t){e=t}i.getWormGlobalConfig=l,i.setWormGlobalConfig=s}),66);
__d("MWConditionallySetupEBStateDB",["EBDB","EBReadyNotifier","ExecutionEnvironment","MAWCurrentUser","MAWIndexedDbMetadata","MessengerWebInitData","ODS","WAHex","WAOdsEnums","WormGlobalConfig","cr:23151","cr:8233","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s;async function u(t){if(n("cr:23151")!=null&&(s||(s=r("ExecutionEnvironment"))).isInBrowser){o("WormGlobalConfig").setWormGlobalConfig({}),n("cr:8233")==null||n("cr:8233").setupMainWaLogger(),o("EBDB").makeEBDB(o("MAWIndexedDbMetadata").ebdbName(o("MAWCurrentUser").getID()),r("qpl")._(1056840657,"2716"),o("WAHex").parseHex(r("MessengerWebInitData").accountKeyV2),o("EBDB").EBDBEnvironment.UI,{log:function(n){return(e||(e=o("ODS"))).bumpEntityKey(3185,o("WAOdsEnums").Entity.WORM,n)}});var a=await n("cr:23151").makeReStorePersistence(t);return o("EBReadyNotifier").markEBReady(),a}}l.conditionallyMakeEBStateDB=u}),98);
__d("MWLSSchemaEphemeral",["EBDB","EBDBEbsmApi","FBLogger","LSJSInMemoryStorage","LSMetadata","LSPlatformLsInitLog","LSReStoreWrapper","MAWLSVaultingHooks","MWConditionallySetupEBStateDB","MessengerLogHistory","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MessengerLogHistory").getInstance("db_init");async function s(t){o("LSPlatformLsInitLog").addPoint("init_start");var n,a={clearEbStores:o("EBDB").clearEbStores,flushEBSMtoEBDB:o("EBDBEbsmApi").flushEBSMtoEBDB,rehydrateEBSMFromEBDB:o("EBDBEbsmApi").rehydrateEBSMFromEBDB};try{var i=await o("MWConditionallySetupEBStateDB").conditionallyMakeEBStateDB(a);i!=null&&(e.debug("Creating EB State DB"),n=o("LSReStoreWrapper").createLSReStore(i,o("LSMetadata").schema,[r("MAWLSVaultingHooks")],void 0,o("LSPlatformLsInitLog").lsInitLogger),a.updateEBSM=o("EBDBEbsmApi").updateEBSM(n),e.debug("EB State DB inited"))}catch(e){r("FBLogger")("messenger_web_clients").catching(r("getErrorSafe")(e)).mustfix("EBSM failed")}return n==null&&(e.debug("Creating EDB"),n=r("LSJSInMemoryStorage")(o("LSMetadata").schema),e.debug("EDB inited")),o("LSPlatformLsInitLog").addPoint("init_end"),n}l.createDB=s}),98);
__d("MetaBrandCaretLeftOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.753 4.341a1 1 0 0 0-1.412-.094l-8 7a1 1 0 0 0 0 1.506l8 7a1 1 0 0 0 1.318-1.506L9.518 12l7.14-6.247a1 1 0 0 0 .094-1.412z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandCaretRightOutline24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.247 4.341a1 1 0 0 1 1.412-.094l8 7a1 1 0 0 1 0 1.506l-8 7a1 1 0 0 1-1.318-1.506L14.482 12l-7.14-6.247a1 1 0 0 1-.094-1.412z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaBrandXFilled24Icon.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs("svg",babelHelpers.extends({viewBox:"0 0 24 24",fill:"currentColor",width:"1em",height:"1em"},e,{children:[e.title!=null&&s.jsx("title",{children:e.title}),e.children!=null&&s.jsx("defs",{children:e.children}),s.jsx("path",{d:"M5.707 4.293a1 1 0 1 0-1.414 1.414L10.586 12l-6.293 6.293a1 1 0 1 0 1.414 1.414L12 13.414l6.293 6.293a1 1 0 0 0 1.414-1.414L13.414 12l6.293-6.293a1 1 0 1 0-1.414-1.414L12 10.586 5.707 4.293z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MetaLockup.react",["fbt","react","react-compiler-runtime","stylex","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u.useId,m={10:{height:"x170jfvy",width:"x1pju0fl",$$css:!0},12:{height:"x1kpxq89",width:"x1247r65",$$css:!0},16:{height:"xlup9mm",width:"x1dmp6jm",$$css:!0},20:{height:"x1qx5ct2",width:"x1exxlbk",$$css:!0}};function p(e){var t=o("react-compiler-runtime").c(17),n=e.fill,a=e.size,i=e.xstyle,l=d(),s=d(),u=d(),m=d(),p=r("useCurrentDisplayMode")(),g=p==="dark",h=a<=12,y=n!=null?n:g?"#DEE3E9":null;if(h){var C;return t[0]!==s||t[1]!==u||t[2]!==m||t[3]!==g||t[4]!==y||t[5]!==a||t[6]!==i?(C=c.jsx(_,{fill:y,gradientAId:s,gradientBId:u,gradientCId:m,isDarkModeEnabled:g,size:a,xstyle:i}),t[0]=s,t[1]=u,t[2]=m,t[3]=g,t[4]=y,t[5]=a,t[6]=i,t[7]=C):C=t[7],C}var b;return t[8]!==l||t[9]!==s||t[10]!==u||t[11]!==m||t[12]!==g||t[13]!==y||t[14]!==a||t[15]!==i?(b=c.jsx(f,{clipPathId:l,fill:y,gradientAId:s,gradientBId:u,gradientCId:m,isDarkModeEnabled:g,size:a,xstyle:i}),t[8]=l,t[9]=s,t[10]=u,t[11]=m,t[12]=g,t[13]=y,t[14]=a,t[15]=i,t[16]=b):b=t[16],b}function _(t){var n=o("react-compiler-runtime").c(28),a=t.fill,i=t.gradientAId,l=t.gradientBId,u=t.gradientCId,d=t.isDarkModeEnabled,p=t.size,_=t.xstyle,f;n[0]===Symbol.for("react.memo_cache_sentinel")?(f=s._(/*BTDS*/"Meta logo"),n[0]=f):f=n[0];var g;n[1]!==p||n[2]!==_?(g=(e||(e=r("stylex"))).props([_,m[p]]),n[1]=p,n[2]=_,n[3]=g):g=n[3];var h;n[4]!==a||n[5]!==i||n[6]!==l||n[7]!==u||n[8]!==d?(h=!d&&a==null&&c.jsxs("defs",{children:[c.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:i,x1:"124.38",x2:"160.839",y1:"99",y2:"59.326",children:[c.jsx("stop",{offset:".427",stopColor:"#0278F1"}),c.jsx("stop",{offset:".917",stopColor:"#0180FA"})]}),c.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:l,x1:"42",x2:"-1.666",y1:"4.936",y2:"61.707",children:[c.jsx("stop",{offset:".427",stopColor:"#0165E0"}),c.jsx("stop",{offset:".917",stopColor:"#0180FA"})]}),c.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:u,x1:"27.677",x2:"132.943",y1:"28.71",y2:"71.118",children:[c.jsx("stop",{stopColor:"#0064E0"}),c.jsx("stop",{offset:".656",stopColor:"#0066E2"}),c.jsx("stop",{offset:"1",stopColor:"#0278F1"})]})]}),n[4]=a,n[5]=i,n[6]=l,n[7]=u,n[8]=d,n[9]=h):h=n[9];var y;n[10]===Symbol.for("react.memo_cache_sentinel")?(y={className:"xt3erj5"},n[10]=y):y=n[10];var C=a!=null?a:"#1C2B33",b;n[11]!==C?(b=c.jsx("path",babelHelpers.extends({},y,{d:"M185.508 3.01h18.704l31.803 57.313L267.818 3.01h18.297v94.175h-15.264v-72.18l-27.88 49.977h-14.319l-27.88-49.978v72.18h-15.264V3.01ZM336.281 98.87c-7.066 0-13.286-1.565-18.638-4.674-5.352-3.12-9.527-7.434-12.528-12.952-2.989-5.517-4.483-11.835-4.483-18.973 0-7.214 1.461-13.608 4.385-19.17 2.923-5.561 6.989-9.908 12.187-13.05 5.198-3.13 11.176-4.707 17.923-4.707 6.715 0 12.484 1.587 17.319 4.74 4.847 3.164 8.572 7.598 11.177 13.291 2.615 5.693 3.923 12.371 3.923 20.046v4.171h-51.793c.945 5.737 3.275 10.258 6.989 13.554 3.715 3.295 8.407 4.937 14.078 4.937 4.549 0 8.461-.667 11.747-2.014 3.286-1.347 6.374-3.383 9.253-6.12l8.099 9.886c-8.055 7.357-17.934 11.036-29.638 11.036Zm11.143-55.867c-3.198-3.252-7.385-4.872-12.56-4.872-5.045 0-9.264 1.653-12.66 4.97-3.407 3.318-5.55 7.784-6.451 13.39h37.133c-.451-5.737-2.275-10.237-5.462-13.488ZM386.513 39.467h-14.044V27.03h14.044V6.447h14.715V27.03h21.341v12.437h-21.341v31.552c0 5.244.901 8.988 2.703 11.233 1.803 2.244 4.88 3.36 9.253 3.36 1.935 0 3.572-.076 4.924-.23a97.992 97.992 0 0 0 4.461-.645v12.316c-1.67.493-3.549.898-5.637 1.205-2.099.317-4.286.47-6.583.47-15.89 0-23.836-8.649-23.836-25.957V39.467ZM500 97.185h-14.44v-9.82c-2.571 3.678-5.835 6.513-9.791 8.506-3.968 1.993-8.462 3-13.506 3-6.209 0-11.715-1.588-16.506-4.752-4.803-3.153-8.572-7.51-11.308-13.039-2.748-5.54-4.121-11.879-4.121-19.006 0-7.17 1.395-13.52 4.187-19.038 2.791-5.518 6.648-9.843 11.571-12.985 4.935-3.13 10.594-4.707 16.99-4.707 4.813 0 9.132.93 12.956 2.791a25.708 25.708 0 0 1 9.528 7.905v-9.01H500v70.155Zm-14.715-45.61c-1.571-3.985-4.066-7.138-7.461-9.448-3.396-2.31-7.33-3.46-11.781-3.46-6.308 0-11.319 2.102-15.055 6.317-3.737 4.215-5.605 9.92-5.605 17.09 0 7.215 1.802 12.94 5.396 17.156 3.604 4.215 8.484 6.317 14.66 6.317 4.538 0 8.593-1.16 12.154-3.492 3.549-2.332 6.121-5.475 7.692-9.427V51.575Z",fill:C})),n[11]=C,n[12]=b):b=n[12];var v;n[13]===Symbol.for("react.memo_cache_sentinel")?(v={className:"xt3erj5"},n[13]=v):v=n[13];var S=a!=null?a:"#0180FA",R;n[14]!==S?(R=c.jsx("path",babelHelpers.extends({},v,{d:"M107.666 0C95.358 0 86.865 4.504 75.195 19.935 64.14 5.361 55.152 0 42.97 0 18.573 0 0 29.768 0 65.408 0 86.847 12.107 99 28.441 99c15.742 0 25.269-13.2 33.445-27.788l9.663-16.66a643.785 643.785 0 0 1 2.853-4.869 746.668 746.668 0 0 1 3.202 5.416l9.663 16.454C99.672 92.72 108.126 99 122.45 99c16.448 0 27.617-13.723 27.617-33.25 0-37.552-19.168-65.75-42.4-65.75ZM57.774 46.496l-9.8 16.25c-9.595 15.976-13.639 19.526-19.67 19.526-6.373 0-11.376-5.325-11.376-17.547 0-24.51 12.062-47.451 26.042-47.451 7.273 0 12.678 3.61 22.062 17.486a547.48 547.48 0 0 0-7.258 11.736Zm64.308 35.776c-6.648 0-11.034-4.233-20.012-19.39l-9.663-16.386c-2.79-4.737-5.402-9.04-7.88-12.945 9.73-14.24 15.591-17.984 23.002-17.984 14.118 0 26.204 20.96 26.204 49.158 0 11.403-4.729 17.547-11.651 17.547Z",fill:S})),n[14]=S,n[15]=R):R=n[15];var L;n[16]!==a||n[17]!==i||n[18]!==l||n[19]!==u||n[20]!==d?(L=!d&&a==null&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M145.631 36h-16.759c3.045 7.956 4.861 17.797 4.861 28.725 0 11.403-4.729 17.547-11.651 17.547H122v16.726l.449.002c16.448 0 27.617-13.723 27.617-33.25 0-10.85-1.6-20.917-4.435-29.75Z",fill:"url(#"+i+")"}),c.jsx("path",{d:"M42 .016C18.63.776.832 28.908.028 63h16.92C17.483 39.716 28.762 18.315 42 17.31V.017Z",fill:"url(#"+l+")"}),c.jsx("path",{d:"m75.195 19.935.007-.009c2.447 3.223 5.264 7.229 9.33 13.62l-.005.005c2.478 3.906 5.09 8.208 7.88 12.945l9.663 16.386c8.978 15.157 13.364 19.39 20.012 19.39.31 0 .617-.012.918-.037v16.76c-.183.003-.367.005-.551.005-14.323 0-22.777-6.281-35.182-27.447L77.604 55.1l-.625-1.065L77 54c-2.386-4.175-7.606-12.685-11.973-19.232l.005-.008-.62-.91C63.153 31.983 61.985 30.313 61 29l-.066.024c-7.006-9.172-11.818-11.75-17.964-11.75-.324 0-.648.012-.97.037V.016c.322-.01.646-.016.97-.016 12.182 0 21.17 5.36 32.225 19.935Z",fill:"url(#"+u+")"})]}),n[16]=a,n[17]=i,n[18]=l,n[19]=u,n[20]=d,n[21]=L):L=n[21];var E;return n[22]!==L||n[23]!==g||n[24]!==h||n[25]!==b||n[26]!==R?(E=c.jsxs("svg",babelHelpers.extends({"aria-label":f},g,{role:"img",viewBox:"0 0 500 100",children:[h,b,R,L]})),n[22]=L,n[23]=g,n[24]=h,n[25]=b,n[26]=R,n[27]=E):E=n[27],E}function f(t){var n=o("react-compiler-runtime").c(32),a=t.clipPathId,i=t.fill,l=t.gradientAId,u=t.gradientBId,d=t.gradientCId,p=t.isDarkModeEnabled,_=t.size,f=t.xstyle,g;n[0]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Meta logo"),n[0]=g):g=n[0];var h;n[1]!==_||n[2]!==f?(h=(e||(e=r("stylex"))).props([f,m[_]]),n[1]=_,n[2]=f,n[3]=h):h=n[3];var y;n[4]!==a||n[5]!==i||n[6]!==l||n[7]!==u||n[8]!==d||n[9]!==p?(y=!p&&i==null&&c.jsxs("defs",{children:[c.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:l,x1:"125",x2:"160.217",y1:"97",y2:"57.435",children:[c.jsx("stop",{offset:".21",stopColor:"#0278F1"}),c.jsx("stop",{offset:".533",stopColor:"#0180FA"})]}),c.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:u,x1:"44",x2:"0",y1:"5",y2:"64",children:[c.jsx("stop",{offset:".427",stopColor:"#0165E0"}),c.jsx("stop",{offset:".917",stopColor:"#0180FA"})]}),c.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:d,x1:"28.5",x2:"135",y1:"29",y2:"72",children:[c.jsx("stop",{stopColor:"#0064E0"}),c.jsx("stop",{offset:".656",stopColor:"#0066E2"}),c.jsx("stop",{offset:"1",stopColor:"#0278F1"})]}),c.jsx("clipPath",{id:a,children:c.jsx("path",{d:"M0 0h496.236v100H0z",fill:"#fff"})})]}),n[4]=a,n[5]=i,n[6]=l,n[7]=u,n[8]=d,n[9]=p,n[10]=y):y=n[10];var C="url(#"+a+")",b;n[11]===Symbol.for("react.memo_cache_sentinel")?(b={className:"xt3erj5"},n[11]=b):b=n[11];var v=i!=null?i:"#1C2B33",S;n[12]!==v?(S=c.jsx("path",babelHelpers.extends({},b,{d:"M182.141 3.213h18.808l31.98 57.849 31.979-57.849h18.401V98.27h-15.345V25.416l-28.042 50.448h-14.394l-28.042-50.448V98.27h-15.345V3.213ZM332.804 99.967c-7.107 0-13.353-1.573-18.739-4.718-5.387-3.146-9.586-7.504-12.595-13.07-3.011-5.569-4.515-11.95-4.515-19.148 0-7.287 1.47-13.738 4.413-19.35 2.942-5.613 7.027-10.004 12.255-13.173 5.229-3.168 11.238-4.753 18.027-4.753 6.744 0 12.55 1.596 17.416 4.787 4.865 3.191 8.611 7.661 11.237 13.41 2.624 5.749 3.938 12.492 3.938 20.233v4.21h-52.077c.95 5.794 3.292 10.354 7.027 13.68 3.735 3.328 8.453 4.991 14.157 4.991 4.571 0 8.509-.679 11.814-2.037 3.303-1.358 6.404-3.417 9.302-6.178l8.147 9.98c-8.103 7.425-18.038 11.136-29.807 11.136Zm11.204-56.389c-3.215-3.281-7.425-4.923-12.629-4.923-5.07 0-9.314 1.676-12.731 5.025-3.418 3.35-5.58 7.854-6.484 13.512h37.343c-.453-5.794-2.286-10.331-5.499-13.614ZM382.846 40.014h-14.123V27.453h14.123V6.676h14.802v20.777h21.455v12.561h-21.455v31.844c0 5.295.905 9.075 2.716 11.338 1.809 2.264 4.911 3.395 9.302 3.395 1.945 0 3.598-.078 4.956-.237a92.35 92.35 0 0 0 4.481-.646v12.425c-1.675.498-3.564.906-5.669 1.223a44.63 44.63 0 0 1-6.62.475c-15.979 0-23.968-8.735-23.968-26.208V40.014ZM496.236 98.27h-14.53v-9.913c-2.58 3.712-5.862 6.575-9.845 8.588-3.983 2.014-8.51 3.022-13.579 3.022-6.247 0-11.78-1.596-16.601-4.787s-8.612-7.581-11.373-13.172c-2.761-5.59-4.142-11.983-4.142-19.18 0-7.243 1.403-13.648 4.21-19.216 2.806-5.567 6.688-9.935 11.645-13.104 4.956-3.168 10.648-4.753 17.075-4.753 4.844 0 9.189.94 13.037 2.818a25.768 25.768 0 0 1 9.573 7.978v-9.098h14.53V98.27Zm-14.801-46.035c-1.585-4.028-4.085-7.207-7.503-9.54-3.418-2.33-7.367-3.496-11.848-3.496-6.338 0-11.384 2.128-15.141 6.382-3.758 4.255-5.635 10.004-5.635 17.246 0 7.289 1.809 13.06 5.431 17.314 3.621 4.255 8.532 6.382 14.734 6.382 4.571 0 8.645-1.176 12.222-3.53 3.575-2.353 6.155-5.522 7.74-9.506V52.235Z",fill:v})),n[12]=v,n[13]=S):S=n[13];var R;n[14]===Symbol.for("react.memo_cache_sentinel")?(R={className:"xt3erj5"},n[14]=R):R=n[14];var L=i!=null?i:"#0180FA",E;n[15]!==L?(E=c.jsx("path",babelHelpers.extends({},R,{d:"M108 0C95.66 0 86.015 9.294 77.284 21.1 65.284 5.821 55.25 0 43.24 0 18.76 0 0 31.862 0 65.586 0 86.69 10.21 100 27.31 100c12.308 0 21.16-5.803 36.897-33.31 0 0 6.56-11.584 11.072-19.564 1.582 2.553 3.243 5.3 4.997 8.253l7.38 12.414C102.03 91.848 110.038 100 124.551 100c16.659 0 25.931-13.492 25.931-35.034C150.483 29.656 131.301 0 108 0ZM52.207 59.241c-12.759 20-17.172 24.483-24.276 24.483-7.31 0-11.655-6.418-11.655-17.862 0-24.483 12.207-49.517 26.759-49.517 7.88 0 14.465 4.55 24.552 18.991-9.578 14.691-15.38 23.905-15.38 23.905Zm48.153-2.517-8.823-14.715a301.425 301.425 0 0 0-6.884-10.723c7.952-12.274 14.511-18.39 22.313-18.39 16.206 0 29.172 23.863 29.172 53.173 0 11.172-3.659 17.655-11.241 17.655-7.268 0-10.739-4.8-24.537-27Z",fill:L})),n[15]=L,n[16]=E):E=n[16];var k;n[17]!==i||n[18]!==l||n[19]!==u||n[20]!==d||n[21]!==p?(k=!p&&i==null&&c.jsxs(c.Fragment,{children:[c.jsx("path",{d:"M145.586 35H130.66c3.452 8.746 5.478 19.482 5.478 31.069 0 11.172-3.659 17.655-11.241 17.655-1.407 0-2.672-.18-3.897-.631V99.82c1.143.122 2.324.18 3.552.18 16.659 0 25.931-13.492 25.931-35.034 0-10.737-1.774-20.95-4.897-29.966Z",fill:"url(#"+l+")"}),c.jsx("path",{d:"M43.241 0c.254 0 .507.003.759.008v16.36c-.32-.015-.642-.023-.965-.023-14.183 0-26.139 23.782-26.736 47.655H.014C.59 30.87 19.143 0 43.24 0Z",fill:"url(#"+u+")"}),c.jsx("path",{d:"M43.241 0c11.152 0 20.601 5.02 31.502 17.971 3.065 3.828 6.761 8.805 10.716 14.557l.017.025.025-.003a311.041 311.041 0 0 1 6.036 9.459l8.823 14.715c13.798 22.2 17.269 27 24.537 27H125v16.273c-.149.002-.298.003-.448.003-14.513 0-22.522-8.152-36.897-32.207l-7.38-12.414a596.368 596.368 0 0 0-2.294-3.834L78 51.5c-5.5-9-9-14.5-12-18.5l-.05.038c-9.18-12.63-15.47-16.693-22.916-16.693H43V0L43.241 0Z",fill:"url(#"+d+")"})]}),n[17]=i,n[18]=l,n[19]=u,n[20]=d,n[21]=p,n[22]=k):k=n[22];var I;n[23]!==E||n[24]!==k||n[25]!==C||n[26]!==S?(I=c.jsxs("g",{clipPath:C,children:[S,E,k]}),n[23]=E,n[24]=k,n[25]=C,n[26]=S,n[27]=I):I=n[27];var T;return n[28]!==I||n[29]!==h||n[30]!==y?(T=c.jsxs("svg",babelHelpers.extends({"aria-label":g},h,{role:"img",viewBox:"0 0 500 100",children:[y,I]})),n[28]=I,n[29]=h,n[30]=y,n[31]=T):T=n[31],T}l.default=p}),226);
__d("MetaLockupPrimary.react",["MetaLockup.react"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("MetaLockup.react")}),98);
__d("SecuredActionTriggerWithAccountID.react",["CometRouteURL","react","react-compiler-runtime","useCometEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e){var t=o("react-compiler-runtime").c(19),n=e.accountID,a=e.accountType,i=e.categoryName,l=e.entrypoint,s=e.onCancel,d=e.onExit,m=e.onFailure,p=e.onSuccess,_=e.reauthContentType,f=e.sensitiveAction,g=o("CometRouteURL").useRouteURL(),h;t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==_||t[4]!==g||t[5]!==f?(h={account_id:n,account_type:a,category_name:i,reauth_content_type:_,return_uri:g,sensitive_action:f},t[0]=n,t[1]=a,t[2]=i,t[3]=_,t[4]=g,t[5]=f,t[6]=h):h=t[6];var y=r("useCometEntryPointDialog")(l,h),C=y[0],b=c(!0),v,S;t[7]!==n||t[8]!==a||t[9]!==i||t[10]!==s||t[11]!==d||t[12]!==m||t[13]!==p||t[14]!==_||t[15]!==f||t[16]!==C?(v=function(){b.current&&C({accountID:n,accountType:a,categoryName:i,onCancel:s,onExit:d,onFailure:m,onSuccess:p,reauthContentType:_,sensitiveAction:f}),b.current=!1},S=[C,n,a,i,d,p,s,m,_,f],t[7]=n,t[8]=a,t[9]=i,t[10]=s,t[11]=d,t[12]=m,t[13]=p,t[14]=_,t[15]=f,t[16]=C,t[17]=v,t[18]=S):(v=t[17],S=t[18]),u(v,S)}l.default=d}),98);
__d("XMDSDialogHeaderContainer.react",["CDSDialogHeaderFooterContainerContext","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useContext,d={background:{backgroundColor:"x1jx94hy",$$css:!0},header:{alignItems:"x6s0dn4",display:"x78zum5",flexShrink:"x2lah0s",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",justifyContent:"x1qughib",minHeight:"x8nclml",position:"x1n2onr6 xv7j57z",top:"x13vifvy",zIndex:"x1vjfegm",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(8),a=t.addOnBottom,i=t.children,l=t.xstyle,s=c(r("CDSDialogHeaderFooterContainerContext")),m=s.showBackground,p=s.xstyle,_;n[0]!==p||n[1]!==m||n[2]!==l?(_=(e||(e=r("stylex"))).props(d.header,m===!0&&d.background,p,l),n[0]=p,n[1]=m,n[2]=l,n[3]=_):_=n[3];var f;return n[4]!==a||n[5]!==i||n[6]!==_?(f=u.jsxs("div",babelHelpers.extends({},_,{children:[i,a]})),n[4]=a,n[5]=i,n[6]=_,n[7]=f):f=n[7],f}l.default=m}),98);
__d("XMDSDialogMetaLockupHeading.react",["MetaLockupPrimary.react","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={companyLogo:{alignItems:"x6s0dn4",display:"x78zum5",marginInlineStart:"x1diwwjn",marginInlineEnd:"xbmvrgn",marginLeft:null,marginRight:null,$$css:!0}};function c(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(o("react-strict-dom").html.div,{style:u.companyLogo,children:s.jsx(r("MetaLockupPrimary.react"),{size:12})}),e[0]=t):t=e[0],t}l.default=c}),98);
__d("XMDSDialogTitle.react",["BaseDialogTitle.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.children,a;return t[0]!==n?(a=s.jsx(r("BaseDialogTitle.react"),{children:n}),t[0]=n,t[1]=a):a=t[1],a}l.default=u}),98);
__d("XMDSIconButton.react",["BaseIconButton.react","BaseIconButtonXMDSVariants","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","density","ref","type","xstyle"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(16),a,i,l,s,c,m;n[0]!==t?(a=t.children,s=t.density,l=t.ref,c=t.type,m=t.xstyle,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=m):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],m=n[6]);var p=s===void 0?"regular":s,_=c===void 0?"default":c,f;if(n[7]!==p||n[8]!==_||n[9]!==m){f=d(_);var g=p==="regular"?o("BaseIconButtonXMDSVariants").BaseIconButtonXMDSRegularVariant:o("BaseIconButtonXMDSVariants").BaseIconButtonXMDSDenseVariant;f.xstyleConfig.pressable=[f.xstyleConfig.pressable,g.xstyleConfig.pressable,m],n[7]=p,n[8]=_,n[9]=m,n[10]=f}else f=n[10];var h;return n[11]!==a||n[12]!==i||n[13]!==l||n[14]!==f?(h=u.jsx(r("BaseIconButton.react"),babelHelpers.extends({},i,{ref:l,variant:f,children:a})),n[11]=a,n[12]=i,n[13]=l,n[14]=f,n[15]=h):h=n[15],h}function d(e){switch(e){case"contained":return o("BaseIconButtonXMDSVariants").BaseIconButtonXMDSContainedVariant;case"primary":return o("BaseIconButtonXMDSVariants").BaseIconButtonXMDSPrimaryVariant;case"primary-on-media":return o("BaseIconButtonXMDSVariants").BaseIconButtonXMDSPrimaryOnMediaVariant;case"secondary":return o("BaseIconButtonXMDSVariants").BaseIconButtonXMDSSecondaryVariant;default:return o("BaseIconButtonXMDSVariants").BaseIconButtonXMDSDefaultVariant}}l.default=c}),98);
__d("XMDSText.react",["BaseHeading.react","BaseText.react","CDSTextConfig","JSResourceForInteraction","XMDSTextStyleContext.react","react","react-compiler-runtime","xplatToDOMRef"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("JSResourceForInteraction")("XMDSTooltipImpl.react").__setRef("XMDSText.react"),c=o("BaseText.react").createBaseTextComponent(r("CDSTextConfig"),u);function d(e){var t=o("react-compiler-runtime").c(20),n=e.asBox,a=e.children,i=e.color,l=e.id,u=e.isPrimaryHeading,d=e.isSemanticHeading,m=e.maxLines,p=e.ref,_=e.testid,f=e.textAlign,g=e.textStyle,h=e.truncationTooltip,y=e.xstyle,C=n===void 0?!1:n,b=i===void 0?"primaryText":i,v=u===void 0?!1:u,S=d===void 0?!1:d,R=f===void 0?"start":f,L=g===void 0?"body":g,E=C?"div":"span",k;t[0]!==p?(k=o("xplatToDOMRef").xplatToDOMRef(p),t[0]=p,t[1]=k):k=t[1];var I;t[2]!==a||t[3]!==L?(I=s.jsx(r("XMDSTextStyleContext.react").Provider,{value:L,children:a}),t[2]=a,t[3]=L,t[4]=I):I=t[4];var T;t[5]!==b||t[6]!==l||t[7]!==m||t[8]!==E||t[9]!==k||t[10]!==I||t[11]!==_||t[12]!==R||t[13]!==L||t[14]!==h||t[15]!==y?(T=s.jsx(c,{alignment:R,colorName:b,elementType:E,id:l,lines:m,ref:k,styleName:L,testid:void 0,truncationTooltip:h,xstyle:y,children:I}),t[5]=b,t[6]=l,t[7]=m,t[8]=E,t[9]=k,t[10]=I,t[11]=_,t[12]=R,t[13]=L,t[14]=h,t[15]=y,t[16]=T):T=t[16];var D=T;if(S||v){var x;return t[17]!==v||t[18]!==D?(x=s.jsx(r("BaseHeading.react"),{isPrimaryHeading:v,children:D}),t[17]=v,t[18]=D,t[19]=x):x=t[19],x}return D}l.default=d}),98);
__d("XMDSDialogHeader.react",["fbt","Locale","MetaBrandCaretLeftOutline24Icon.react","MetaBrandCaretRightOutline24Icon.react","MetaBrandXFilled24Icon.react","XMDSDialogHeaderContainer.react","XMDSDialogMetaLockupHeading.react","XMDSDialogTitle.react","XMDSIcon.react","XMDSIconButton.react","XMDSText.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("Locale").isRTL();function d(e){var t=o("react-compiler-runtime").c(36),n=e.addOnEnd,a=e.backTestID,i=e.closeTestID,l=e.disabled,d=e.onBack,m=e.onClose,p=e.title,_=e.titleHidden,f=e.withBackButton,g=e.withCloseButton,h=e.withCompanyLogo,y=a===void 0?"back-button":a,C=i===void 0?"close-button":i,b=l===void 0?!1:l,v=d===void 0?r("emptyFunction"):d,S=m===void 0?r("emptyFunction"):m,R=_===void 0?!1:_,L=f===void 0?!1:f,E=g===void 0?!0:g,k=h===void 0?!1:h,I=!!p,T;t[0]!==p?(T=s.isFbtInstance(p)||typeof p=="string",t[0]=p,t[1]=T):T=t[1];var D=T,x;t[2]!==p||t[3]!==R||t[4]!==D||t[5]!==I?(x=I?u.jsx("div",babelHelpers.extends({},{0:{},1:{className:"xzpqnlu x1hyvwdk xjm9jq1 x6ikm8r x10wlt62 x10l6tqk x1i1rx1s"}}[!!R<<0],{children:u.jsx(r("XMDSDialogTitle.react"),{children:D?u.jsx(r("XMDSText.react"),{isSemanticHeading:!0,textStyle:"headline3",children:p!=null?p:null}):p!=null?p:null})})):null,t[2]=p,t[3]=R,t[4]=D,t[5]=I,t[6]=x):x=t[6];var $=x,P;t[7]===Symbol.for("react.memo_cache_sentinel")?(P=u.jsx("div",{className:"x1vqgdyp x100vrsf"}),t[7]=P):P=t[7];var N=P,M=E&&!k?N:null,w=n!=null?N:null,A=L||k?N:null,F=k?N:null,O;t[8]===Symbol.for("react.memo_cache_sentinel")?(O={className:"x78zum5 x13fj5qh x1xegmmw"},t[8]=O):O=t[8];var B;t[9]!==M||t[10]!==y||t[11]!==b||t[12]!==v||t[13]!==L||t[14]!==k?(B=k?u.jsx(r("XMDSDialogMetaLockupHeading.react"),{}):L?u.jsx(r("XMDSIconButton.react"),{"aria-label":s._(/*BTDS*/"Back"),disabled:b,onPress:v,testid:void 0,children:u.jsx(r("XMDSIcon.react"),{color:"primary",icon:r(c?"MetaBrandCaretRightOutline24Icon.react":"MetaBrandCaretLeftOutline24Icon.react"),size:24})}):M,t[9]=M,t[10]=y,t[11]=b,t[12]=v,t[13]=L,t[14]=k,t[15]=B):B=t[15];var W;t[16]!==w||t[17]!==B?(W=u.jsxs("div",babelHelpers.extends({},O,{children:[B,w]})),t[16]=w,t[17]=B,t[18]=W):W=t[18];var q;t[19]===Symbol.for("react.memo_cache_sentinel")?(q={className:"x78zum5 x1iyjqo2 xl56j7k"},t[19]=q):q=t[19];var U;t[20]!==$?(U=u.jsx("div",babelHelpers.extends({},q,{children:$})),t[20]=$,t[21]=U):U=t[21];var V;t[22]===Symbol.for("react.memo_cache_sentinel")?(V={className:"x78zum5 x13fj5qh x1xegmmw"},t[22]=V):V=t[22];var H=n!=null?n:F,G;t[23]!==A||t[24]!==C||t[25]!==b||t[26]!==S||t[27]!==E?(G=E?u.jsx(r("XMDSIconButton.react"),{"aria-label":s._(/*BTDS*/"Close"),disabled:b,onPress:S,testid:void 0,children:u.jsx(r("XMDSIcon.react"),{color:"primary",icon:r("MetaBrandXFilled24Icon.react"),size:24})}):A,t[23]=A,t[24]=C,t[25]=b,t[26]=S,t[27]=E,t[28]=G):G=t[28];var z;t[29]!==H||t[30]!==G?(z=u.jsxs("div",babelHelpers.extends({},V,{children:[H,G]})),t[29]=H,t[30]=G,t[31]=z):z=t[31];var j;return t[32]!==W||t[33]!==U||t[34]!==z?(j=u.jsxs(r("XMDSDialogHeaderContainer.react"),{children:[W,U,z]}),t[32]=W,t[33]=U,t[34]=z,t[35]=j):j=t[35],j}l.default=d}),226);
__d("XMDSGlimmer.react",["BaseLoadingStateElement.react","react","react-compiler-runtime","useCurrentDisplayMode","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useState,m="x2fr1v2-B",p="x2fr1v2-B",_="x12ve19h-B",f="x12ve19h-B",g={animationDelay:"xvo38ju",$$css:!0},h={animationDelay:function(t){return[g,{"--x-animationDelay":(function(e){return typeof e=="number"?e+"ms":e!=null?e:void 0})(t%10*200+"ms")}]},circle:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0},dark:{animationName:"xbql7jm",backgroundColor:"x10l5999",opacity:"xzl3qmq",$$css:!0},darkOnWhiteBackground:{animationName:"x1hx36qn",backgroundColor:"x13a6qad",opacity:"x1bu4zmy",$$css:!0},light:{animationName:"xbql7jm",backgroundColor:"x10l5999",opacity:"xzl3qmq",$$css:!0},lightOnWhiteBackground:{animationName:"x1hx36qn",backgroundColor:"x13a6qad",opacity:"x1bu4zmy",$$css:!0},paused:{animationPlayState:"xorstpt",$$css:!0},root:{animationDirection:"xpz12be",animationDuration:"x1q3qbx4",animationIterationCount:"xa4qsjk",animationTimingFunction:"x3kn0hh",borderStartStartRadius:"x18a5s7t",borderStartEndRadius:"x2wv2di",borderEndEndRadius:"x1v8jt1",borderEndStartRadius:"xy21cdz",$$css:!0}};function y(e,t){return e==="dark"?t?h.darkOnWhiteBackground:h.dark:t?h.lightOnWhiteBackground:h.light}function C(e){var t=o("react-compiler-runtime").c(17),n=e.index,a=e.onWhiteBackground,i=e.shape,l=e.xstyle,u=n===void 0?0:n,c=a===void 0?!1:a,m=i===void 0?"rectangle":i,p=r("useCurrentDisplayMode")(),_=d(!0),f=_[0],g=_[1],C;t[0]===Symbol.for("react.memo_cache_sentinel")?(C=function(t){var e=t.hiddenReason;e!=="COMPONENT_UNMOUNTED"&&g(!0)},t[0]=C):C=t[0];var b=C,v;t[1]===Symbol.for("react.memo_cache_sentinel")?(v=function(){g(!1)},t[1]=v):v=t[1];var S=v,R;t[2]===Symbol.for("react.memo_cache_sentinel")?(R={onHidden:b,onVisible:S},t[2]=R):R=t[2];var L=r("useVisibilityObserver")(R),E;t[3]!==p||t[4]!==c?(E=y(p,c),t[3]=p,t[4]=c,t[5]=E):E=t[5];var k=E,I=f&&h.paused,T=m==="circle"&&h.circle,D;t[6]!==u?(D=h.animationDelay(u),t[6]=u,t[7]=D):D=t[7];var x;t[8]!==k||t[9]!==D||t[10]!==I||t[11]!==T||t[12]!==l?(x=[h.root,k,I,T,l,D],t[8]=k,t[9]=D,t[10]=I,t[11]=T,t[12]=l,t[13]=x):x=t[13];var $;return t[14]!==L||t[15]!==x?($=s.jsx(r("BaseLoadingStateElement.react"),{ref:L,xstyle:x}),t[14]=L,t[15]=x,t[16]=$):$=t[16],$}l.default=C}),98);
__d("XMDSDialogLoadingStateImpl.react",["XMDSGlimmer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={firstLine:{height:"x170jfvy",marginBottom:"xyorhqc",marginInlineStart:"xqsn43r",marginInlineEnd:"x3aesyq",marginLeft:null,marginRight:null,maxWidth:"xq2pcee",$$css:!0},glimmer:{alignSelf:"xqcrz7y",boxSizing:"x9f619",width:"x19sv2k2",$$css:!0},heading:{height:"x1qx5ct2",marginBottom:"xieb3on",marginInlineStart:"xqsn43r",marginInlineEnd:"x3aesyq",marginLeft:null,marginRight:null,maxWidth:"xws0hc0",$$css:!0},secondLine:{height:"x170jfvy",marginBottom:"xyorhqc",marginInlineStart:"xqsn43r",marginInlineEnd:"x3aesyq",marginLeft:null,marginRight:null,maxWidth:"xg16ivm",$$css:!0}};function c(){var e=o("react-compiler-runtime").c(3),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=s.jsx(r("XMDSGlimmer.react"),{xstyle:[u.glimmer,u.heading]}),e[0]=t):t=e[0];var n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=s.jsx(r("XMDSGlimmer.react"),{xstyle:[u.glimmer,u.firstLine]}),e[1]=n):n=e[1];var a;return e[2]===Symbol.for("react.memo_cache_sentinel")?(a=s.jsxs(s.Fragment,{children:[t,n,s.jsx(r("XMDSGlimmer.react"),{xstyle:[u.glimmer,u.secondLine]})]}),e[2]=a):a=e[2],a}l.default=c}),98);
__d("XMDSMiniToastProvider.react",["BasePortal.react","CDSMiniToastContext","CDSMiniToastIDContext","CometPlaceholder.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useMemo,m=u.useRef,p=u.useState;function _(e){var t=o("react-compiler-runtime").c(11),n=e.children,a=m(1),l;t[0]===Symbol.for("react.memo_cache_sentinel")?(l={},t[0]=l):l=t[0];var u=p(l),c=u[0],d=u[1],_;t[1]===Symbol.for("react.memo_cache_sentinel")?(_=function(t){a.current=a.current+1;var e="minitoast-"+a.current;return d(function(n){var r;return babelHelpers.extends({},n,(r={},r[e]=t,r))}),e},t[1]=_):_=t[1];var g=_,h;t[2]===Symbol.for("react.memo_cache_sentinel")?(h=function(t){d(function(e){var n=babelHelpers.extends({},e);return delete n[t],n})},t[2]=h):h=t[2];var y=h,C;t[3]!==c?(C={activeToasts:c,add:g,remove:y},t[3]=c,t[4]=C):C=t[4];var b=C,v;t[5]!==c?(v=Object.keys(c).length>0&&s.jsx(r("BasePortal.react"),{hidden:Object.keys(c).length===0,target:document.body,xstyle:f.root,children:Object.keys(c).map(function(e){return s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(r("CDSMiniToastIDContext").Provider,{value:e,children:c[e]})},e)})}),t[5]=c,t[6]=v):v=t[6];var S;return t[7]!==n||t[8]!==b||t[9]!==v?(S=s.jsxs(r("CDSMiniToastContext").Provider,{value:b,children:[n,v]}),t[7]=n,t[8]=b,t[9]=v,t[10]=S):S=t[10],S}var f={root:{alignItems:"x6s0dn4",bottom:"x1ey2m1c",display:"x78zum5",flexDirection:"xdt5ytf",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",left:null,right:null,justifyContent:"xl56j7k",pointerEvents:"x47corl",position:"xixxii4",top:"x13vifvy",zIndex:"x1ladpmw",$$css:!0}};l.default=_}),98);
__d("useWindowEvent",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e,t,n){var r=o("react-compiler-runtime").c(5),a=n===void 0?window:n,i,l;r[0]!==t||r[1]!==e||r[2]!==a?(i=function(){return a.addEventListener(e,t),(function(){a.removeEventListener(e,t)})},l=[e,t,a],r[0]=t,r[1]=e,r[2]=a,r[3]=i,r[4]=l):(i=r[3],l=r[4]),s(i,l)}l.default=u}),98);
__d("XMDSDialogPage.react",["BaseHeadingContextWrapper.react","BaseScrollRegionObserver.react","BaseScrollableArea.react","CDSDialogHeaderFooterContainerContext","FocusInertRegion.react","XMDSMiniToastProvider.react","focusScopeQueries","react","react-compiler-runtime","useEventHandler","useMatchViewport","useMergeRefs","useWindowEvent"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useLayoutEffect,m=u.useMemo,p=u.useRef,_=u.useState,f={footerShadow:{boxShadow:"x1pzs5fi",$$css:!0},inert:{pointerEvents:"x47corl",userSelect:"x87ps6o",$$css:!0},scrollableArea:{flexGrow:"x1iyjqo2",overscrollBehaviorY:"xy5w88m",$$css:!0},scrollSectionObserver:{height:"x1ycjhwn",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(70),n=e.ref,a=e.children,i=e.footer,l=e.header,u=e.isContentInert,m=e.isFooterSticky,g=e.onScroll,h=e.onScrollBottom,y=e.testid,C=e.withFooterShadow,b=u===void 0?!1:u,v=C===void 0?!1:C,S=r("useMatchViewport")("max","width",679),R=p(null),L,E;t[0]===Symbol.for("react.memo_cache_sentinel")?(L=function(){R.current=window.innerHeight},E=[],t[0]=L,t[1]=E):(L=t[0],E=t[1]),d(L,E);var k;t[2]!==h?(k=function(){h&&h()},t[2]=h,t[3]=k):k=t[3];var I=r("useEventHandler")(k),T;t[4]!==g?(T=function(){g&&g()},t[4]=g,t[5]=T):T=t[5];var D=r("useEventHandler")(T),x;t[6]!==D||t[7]!==I?(x=function(t){var e,n;D(),R.current!=null&&window.pageYOffset>=((e=(n=document.body)==null?void 0:n.offsetHeight)!=null?e:0)-R.current&&I()},t[6]=D,t[7]=I,t[8]=x):x=t[8];var $=r("useEventHandler")(x),P;t[9]!==$?(P=function(t){var e;R.current=Math.max((e=R.current)!=null?e:0,window.innerHeight),$(t)},t[9]=$,t[10]=P):P=t[10];var N=r("useEventHandler")(P),M,w;t[11]!==I?(w=function(){var e,t;window.innerWidth>679||R.current!=null&&window.pageYOffset>=((e=(t=document.body)==null?void 0:t.offsetHeight)!=null?e:0)-R.current&&I()},M=[I],t[11]=I,t[12]=M,t[13]=w):(M=t[12],w=t[13]),c(w,M),r("useWindowEvent")("scroll",$),r("useWindowEvent")("resize",N);var A;t[14]!==I?(A=function(){window.innerWidth<=679||I()},t[14]=I,t[15]=A):A=t[15];var F=A,O;t[16]!==D?(O=function(){window.innerWidth<=679||D()},t[16]=D,t[17]=O):O=t[17];var B=O,W=_(!1),q=W[0],U=W[1],V=_(!1),H=V[0],G=V[1],z=p(null),j=r("useMergeRefs")(z,n),K=p(null),Q;t[18]!==q?(Q={showBackground:q},t[18]=q,t[19]=Q):Q=t[19];var X=Q,Y=v?f.footerShadow:null,J;t[20]!==m||t[21]!==H||t[22]!==Y?(J={isInner:!1,isSticky:m,showBackground:H,xstyle:Y},t[20]=m,t[21]=H,t[22]=Y,t[23]=J):J=t[23];var Z=J,ee=v?f.footerShadow:null,te;t[24]!==m||t[25]!==H||t[26]!==ee?(te={isInner:!0,isSticky:m,showBackground:H,xstyle:ee},t[24]=m,t[25]=H,t[26]=ee,t[27]=te):te=t[27];var ne=te,re;t[28]===Symbol.for("react.memo_cache_sentinel")?(re={callback:function(t){U(!t)},heightXStyle:f.scrollSectionObserver},t[28]=re):re=t[28];var oe=re,ae;t[29]===Symbol.for("react.memo_cache_sentinel")?(ae={callback:function(t){G(!t)},heightXStyle:f.scrollSectionObserver},t[29]=ae):ae=t[29];var ie=ae,le;t[30]===Symbol.for("react.memo_cache_sentinel")?(le={className:"x1fmog5m xu25z0z x140muxe xo1y3bh x78zum5 xdt5ytf x1iyjqo2 x1yr2tfi xbt77o1 x1jxyteu x1n2onr6 x1ja2u2z"},t[30]=le):le=t[30];var se=S?ie:null,ue=S?oe:null,ce;t[31]!==se||t[32]!==ue?(ce=s.jsx(r("BaseScrollRegionObserver.react"),{end:se,start:ue}),t[31]=se,t[32]=ue,t[33]=ce):ce=t[33];var de;t[34]!==l||t[35]!==X?(de=s.jsx(r("CDSDialogHeaderFooterContainerContext").Provider,{value:X,children:l}),t[34]=l,t[35]=X,t[36]=de):de=t[36];var me=i!=null,pe=l!=null,_e=b&&f.inert,fe;t[37]!==_e?(fe=[f.scrollableArea,_e],t[37]=_e,t[38]=fe):fe=t[38];var ge=S?null:ie,he=S?null:oe,ye;t[39]!==ge||t[40]!==he?(ye=s.jsx(r("BaseScrollRegionObserver.react"),{end:ge,rootRef:z,start:he}),t[39]=ge,t[40]=he,t[41]=ye):ye=t[41];var Ce=!b,be;t[42]===Symbol.for("react.memo_cache_sentinel")?(be={className:"x78zum5 xdt5ytf x1iyjqo2 xx6bls6 x889kno"},t[42]=be):be=t[42];var ve;t[43]!==a?(ve=s.jsx("div",babelHelpers.extends({},be,{ref:K,children:a})),t[43]=a,t[44]=ve):ve=t[44];var Se;t[45]!==Ce||t[46]!==ve?(Se=s.jsx(r("FocusInertRegion.react"),{disabled:Ce,focusQuery:o("focusScopeQueries").tabbableScopeQuery,children:ve}),t[45]=Ce,t[46]=ve,t[47]=Se):Se=t[47];var Re;t[48]!==i||t[49]!==ne?(Re=s.jsx(r("CDSDialogHeaderFooterContainerContext").Provider,{value:ne,children:i}),t[48]=i,t[49]=ne,t[50]=Re):Re=t[50];var Le;t[51]!==B||t[52]!==F||t[53]!==me||t[54]!==pe||t[55]!==fe||t[56]!==ye||t[57]!==Se||t[58]!==Re?(Le=s.jsx(r("BaseHeadingContextWrapper.react"),{children:s.jsxs(r("BaseScrollableArea.react"),{contentRef:K,hideScrollbar:!1,horizontal:!1,onScroll:B,onScrollBottom:F,vertical:!0,withBottomShadow:me,withTopShadow:pe,xstyle:fe,children:[ye,Se,Re]})}),t[51]=B,t[52]=F,t[53]=me,t[54]=pe,t[55]=fe,t[56]=ye,t[57]=Se,t[58]=Re,t[59]=Le):Le=t[59];var Ee;t[60]!==i||t[61]!==Z?(Ee=s.jsx(r("CDSDialogHeaderFooterContainerContext").Provider,{value:Z,children:i}),t[60]=i,t[61]=Z,t[62]=Ee):Ee=t[62];var ke;return t[63]!==j||t[64]!==ce||t[65]!==de||t[66]!==Le||t[67]!==Ee||t[68]!==y?(ke=s.jsx(r("XMDSMiniToastProvider.react"),{children:s.jsxs("div",babelHelpers.extends({},le,{"data-testid":void 0,ref:j,children:[ce,de,Le,Ee]}))}),t[63]=j,t[64]=ce,t[65]=de,t[66]=Le,t[67]=Ee,t[68]=y,t[69]=ke):ke=t[69],ke}l.default=g}),98);
__d("XMDSDialogPageLoadingState.react",["fbt","XMDSDialogHeader.react","XMDSDialogLoadingStateImpl.react","XMDSDialogPage.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(6),n=e.onClose,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=s._(/*BTDS*/"Loading..."),t[0]=a):a=t[0];var i;t[1]!==n?(i=u.jsx(r("XMDSDialogHeader.react"),{onClose:n,title:a,titleHidden:!0}),t[1]=n,t[2]=i):i=t[2];var l;t[3]===Symbol.for("react.memo_cache_sentinel")?(l=u.jsx(r("XMDSDialogLoadingStateImpl.react"),{}),t[3]=l):l=t[3];var c;return t[4]!==i?(c=u.jsx(r("XMDSDialogPage.react"),{footer:null,header:i,children:l}),t[4]=i,t[5]=c):c=t[5],c}l.default=c}),226);
__d("XMDSDialogContainer.react",["BaseDialog.react","BaseDialogLabelIDProvider","BaseMultiPageView.react","CDSThemeConfig","CometThemeInfraUtils","XMDSDialogPageLoadingState.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo,c={anchor:{alignItems:"x1qjc9v5",maxHeight:"x1bwycvy",minHeight:"x1jee029",paddingTop:"x1x97wu9",paddingBottom:"xbr3nou",paddingInlineStart:"x135b78x",paddingInlineEnd:"x11lfxj5",paddingLeft:null,paddingRight:null,"@supports (padding: env(safe-area-inset-bottom, 0))_paddingBottom":"xqit15g","@supports (padding: env(safe-area-inset-bottom, 0))_paddingTop":"x1bi8yb4",$$css:!0},anchorBottomSheet:{"@media (max-width: 679px)_paddingBottom":"x1eevrrt","@media (max-width: 679px)_touchAction":"x15ypxgc",$$css:!0},anchorMinHeight:{"@media (max-height: 488px)_minHeight":"x1roekcs","@media (max-height: 488px)_paddingTop":"x10hnfgj","@media (max-height: 488px)_paddingBottom":"x1k7oykt","@media (max-width: 679px)_maxHeight":"x1jxyteu","@media (max-width: 679px)_minHeight":"xwnxf6m",$$css:!0},card:{backgroundColor:"x1jx94hy",borderStartStartRadius:"xazwl86",borderStartEndRadius:"x1hl0hii",borderEndEndRadius:"x1aq6byr",borderEndStartRadius:"x2k6n7x",clipPath:"xkahi35",flexGrow:"x1iyjqo2",position:"x1n2onr6","@media (max-width: 679px)_boxShadow":"x1likypf","@media (max-width: 679px)_overflowX":"x1e9k66k","@media (max-width: 679px)_overflowY":"x12l8kdc",$$css:!0},dialog:{alignItems:"x1qjc9v5",borderStartStartRadius:"xazwl86",borderStartEndRadius:"x1hl0hii",borderEndEndRadius:"x1aq6byr",borderEndStartRadius:"x2k6n7x",boxShadow:"x104qc98",display:"x78zum5",overflowX:"x1plvlek",overflowY:"xryxfnj",width:"xh8yej3",$$css:!0},dialogBottomSheet:{"@media (max-width: 679px)_borderEndEndRadius":"xpyx08","@media (max-width: 679px)_borderEndStartRadius":"xz71k5e",$$css:!0},fitToSize:{minHeight:"xsjhvl8",$$css:!0},root:{"@media (max-width: 679px)_justifyContent":"x3l4zpa",$$css:!0},rootBottomSheet:{"@media (max-width: 679px)_justifyContent":"x9a67hx",$$css:!0},rootMinHeight:{"@media (max-width: 679px)_justifyContent":"xshlqvt",$$css:!0}},d={medium:{maxWidth:"xrgej4m",$$css:!0},small:{maxWidth:"xrlsmeg",$$css:!0}};function m(e){var t=o("react-compiler-runtime").c(33),n=e.ref,a=e.anchorXStyle,i=e["aria-label"],l=e.children,u=e.disableClosingWithMask,m=e.enableBottomSheetBehavior,p=e.fitToSize,_=e.mobileFullHeight,f=e.onClose,g=e.size,h=e.testid,y=u===void 0?!1:u,C=m===void 0?!1:m,b=p===void 0?!1:p,v=_===void 0?!0:_,S=g===void 0?"small":g,R=f!=null?f:r("emptyFunction"),L;t[0]!==R?(L=s.jsx(r("XMDSDialogPageLoadingState.react"),{onClose:R}),t[0]=R,t[1]=L):L=t[1];var E=L,k=o("BaseDialogLabelIDProvider").useDialogHeaderID(),I;t[2]!==a?(I=[c.anchor,a],t[2]=a,t[3]=I):I=t[3];var T=I,D=b&&c.fitToSize,x=v&&c.anchorMinHeight,$=C&&c.anchorBottomSheet,P;t[4]!==T||t[5]!==x||t[6]!==$||t[7]!==D?(P=[T,D,x,$],t[4]=T,t[5]=x,t[6]=$,t[7]=D,t[8]=P):P=t[8];var N=i==null?k:void 0,M=f!=null?f:r("emptyFunction"),w=!v&&c.rootMinHeight,A=C&&c.rootBottomSheet,F;t[9]!==w||t[10]!==A?(F=[c.root,w,A],t[9]=w,t[10]=A,t[11]=F):F=t[11];var O=d[S],B=C&&c.dialogBottomSheet,W;t[12]!==O||t[13]!==B?(W=[c.dialog,O,B],t[12]=O,t[13]=B,t[14]=W):W=t[14];var q=C&&c.dialogBottomSheet,U;t[15]!==q?(U=[c.card,q],t[15]=q,t[16]=U):U=t[16];var V;t[17]!==l||t[18]!==E||t[19]!==U?(V=s.jsx(r("BaseMultiPageView.react"),{fallback:E,xstyle:U,children:l}),t[17]=l,t[18]=E,t[19]=U,t[20]=V):V=t[20];var H;return t[21]!==i||t[22]!==y||t[23]!==C||t[24]!==n||t[25]!==P||t[26]!==N||t[27]!==M||t[28]!==F||t[29]!==W||t[30]!==V||t[31]!==h?(H=s.jsx(r("BaseDialog.react"),{anchorXStyle:P,"aria-label":i,"aria-labelledby":N,disableClosingWithMask:y,enableBottomSheetBehavior:C,onClose:M,ref:n,rootXStyle:F,testid:void 0,themeConfig:o("CometThemeInfraUtils").enableCometThemeInfraThemeInXMDSComponents()?void 0:r("CDSThemeConfig"),xstyle:W,children:V}),t[21]=i,t[22]=y,t[23]=C,t[24]=n,t[25]=P,t[26]=N,t[27]=M,t[28]=F,t[29]=W,t[30]=V,t[31]=h,t[32]=H):H=t[32],H}l.default=m}),98);
__d("XMDSDialog.react",["BaseDialogLabelIDProvider","XMDSDialogContainer.react","XMDSDialogPage.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","anchorXStyle","aria-label","disableClosingWithMask","enableBottomSheetBehavior","fitToSize","mobileFullHeight","onClose","size","testid"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(26),a,i,l,s,c,d,m,p,_,f,g;n[0]!==t?(_=t.ref,a=t.anchorXStyle,i=t["aria-label"],l=t.disableClosingWithMask,s=t.enableBottomSheetBehavior,c=t.fitToSize,d=t.mobileFullHeight,m=t.onClose,f=t.size,g=t.testid,p=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=m,n[8]=p,n[9]=_,n[10]=f,n[11]=g):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],m=n[7],p=n[8],_=n[9],f=n[10],g=n[11]);var h;n[12]!==p?(h=u.jsx(r("XMDSDialogPage.react"),babelHelpers.extends({},p)),n[12]=p,n[13]=h):h=n[13];var y;return n[14]!==a||n[15]!==i||n[16]!==l||n[17]!==s||n[18]!==c||n[19]!==d||n[20]!==m||n[21]!==_||n[22]!==f||n[23]!==h||n[24]!==g?(y=u.jsx(o("BaseDialogLabelIDProvider").BaseDialogLabelIDProvider,{children:u.jsx(r("XMDSDialogContainer.react"),{anchorXStyle:a,"aria-label":i,disableClosingWithMask:l,enableBottomSheetBehavior:s,fitToSize:c,mobileFullHeight:d,onClose:m,ref:_,size:f,testid:void 0,children:h})}),n[14]=a,n[15]=i,n[16]=l,n[17]=s,n[18]=c,n[19]=d,n[20]=m,n[21]=_,n[22]=f,n[23]=h,n[24]=g,n[25]=y):y=n[25],y}l.default=c}),98);
__d("XMDSDialogLoadingState.react",["fbt","XMDSDialog.react","XMDSDialogHeader.react","XMDSDialogLoadingStateImpl.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(10),n=e.inline,a=e.withCloseButton,i=e.onClose,l=e.size,c=a===void 0?!1:a,d=i===void 0?r("emptyFunction"):i,m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=s._(/*BTDS*/"Loading..."),t[0]=m):m=t[0];var p;t[1]!==d||t[2]!==c?(p=u.jsx(r("XMDSDialogHeader.react"),{onClose:d,withCloseButton:c}),t[1]=d,t[2]=c,t[3]=p):p=t[3];var _;t[4]===Symbol.for("react.memo_cache_sentinel")?(_=u.jsx(r("XMDSDialogLoadingStateImpl.react"),{}),t[4]=_):_=t[4];var f;return t[5]!==n||t[6]!==d||t[7]!==l||t[8]!==p?(f=u.jsx(r("XMDSDialog.react"),{"aria-label":m,footer:null,header:p,inline:n,onClose:d,size:l,children:_}),t[5]=n,t[6]=d,t[7]=l,t[8]=p,t[9]=f):f=t[9],f}l.default=c}),226);
__d("Xfac_XFACAppealType",[],(function(t,n,r,o,a,i){var e=Object.freeze({ADS_ABUSE:0,ACTA_SANCTION_PROPAGATION:1,SOAP_PI_UNPUBLISH:2,SPAM:3,USER_DATA_SCRAPING:4,IDES_APPEAL:5,LEGAL_VERIFICATION:6,CHECKPOINT_EPSILON:7,DEV_PLATFORM_ABUSE:8,FB_UFAC:9,IG_UFAC:10,FRL_UFAC:11,BUSINESS_VERIFICATION_STANDALONE_EMAIL:12,BUSINESS_VERIFICATION_CLASSIC:13,SIGNAL_GATHERING:14,IG_MEMORIALIZATION_APPEAL:15,MARKETPLACE_IDV_APPEAL:16,BUSINESS_VERIFICATION_PAYOUTS:17,AUTHENTICITY_REGULATION:18,AUTHENTICITY_REGULATION_SG:19,WA_BIZ_ACCOUNT_CREATION:20,BUSINESS_VERIFICATION_FOX_CBD:21,BUSINESS_VERIFICATION_FOX_CRYPTO:22,BUSINESS_VERIFICATION_FOX_DATING:23,BUSINESS_VERIFICATION_FOX_REHAB:24,BUSINESS_VERIFICATION_FOX_RMG:25,BUSINESS_VERIFICATION_FOX_RXDRUGS:26,BUSINESS_VERIFICATION_MANDATORY_SELLERS:27,THREADS_UFAC:28,BUSINESS_VERIFICATION_MV4B:29,BUSINESS_VERIFICATION_CHINA_AGENCY:30,FINANCIAL_INTEGRITY:31,BUSINESS_VERIFICATION_ADVERTISER_VETTING:32,BUSINESS_VERIFICATION_CLASSIC_GENERIC:33,AUTHENTICITY_COMPROMISE:34,AUTHENTICITY_REGULATION_AU_FINSERV:35,AUTHENTICITY_REGULATION_TW_ANTI_SCAMS:36,ORGANIC_SENSITIVE_ACTIONS:37,WA_U13:38,BUSINESS_VERIFICATION_PAID_ACTOR_ONBOARDING:39,BUSINESS_VERIFICATION_TAIWAN_FINANCIAL_SERVICES:40,MARKETPLACE_XFAC_SELFIE_APPEAL:41,MARKETPLACE_XFAC_IDV_APPEAL:42,AUTHENTICITY_REGULATION_CN:43,BUSINESS_VERIFICATION_WABA:44,BUSINESS_VERIFICATION_APP_REVIEW:45,BUSINESS_VERIFICATION_PAGE_RELATIONSHIP_TRANSPARENCY:46,BUSINESS_VERIFICATION_VR_DEVELOPER_ORGANIZATION:47,BUSINESS_VERIFICATION_BILLING_HUB:48,BUSINESS_VERIFICATION_LOW_TRUST_TIER:49,BUSINESS_VERIFICATION_NEWS_PUBLISHER:50,BUSINESS_VERIFICATION_ADS_BANHAMMERED:51,BUSINESS_VERIFICATION_MARKETING_PARTNER_PROGRAM:52,BUSINESS_VERIFICATION_AUDIENCE_NETWORK_APP:53,BUSINESS_VERIFICATION_DOMAIN_DISPUTE:54,BUSINESS_VERIFICATION_ASP_AGENCY:55,BUSINESS_VERIFICATION_SIGNAL_CONSUMPTION_WITHOUT_ONBOARD:56,BUSINESS_VERIFICATION_UNIVERSAL_PARTNER_PLATFORM:57,OCULUS_FINANCIAL_INTEGRITY:58,ADS_ACTOR_ABUSE_SCRIPTED_FOR_BUSINESS_WITH_BUSINESS_VERIFICATION:59,AUTHENTICITY_COMPROMISE_SIGNALS_BASED_VERIFICATION:60,AUTHENTICITY_REGULATION_VN_UNIVERSAL:61,AUTHENTICITY_REGULATION_TH_UNIVERSAL:62,AUTHENTICITY_REGULATION_JP_UNIVERSAL:63,AUTHENTICITY_REGULATION_KR_FINSERV:64,AUTHENTICITY_REGULATION_AU_UNIVERSAL:65,AUTHENTICITY_REGULATION_IN_FINSERV:66,AUTHENTICITY_REGULATION_SG_UNIVERSAL:67,BUSINESS_VERIFICATION_WABA_IDV:68,AUTHENTICITY_REGULATION_GENERIC_UNIVERSAL:69,ID_VERIFICATION_BILLING_HUB:70,FB_GENERIC_LIGHTWEIGHT:71,AUTHENTICITY_REGULATION_SG_FOR_PAGES:72,BUSINESS_VERIFICATION_CHINA_ADVERTISER:73,DATING_INTEGRITY_SMS:74,IG_KYX_PAY_IN:75,MESSENGER_LWE_SCAM:76,FINANCIAL_INTEGRITY_KYX:77,INDIVIDUAL_VERIFICATION_ACCOUNT_RECOVERY:78,FRLM_YOUTH:79,FB_FINANCIAL_INTEGRITY_SANCTIONS_SCREENING:80,MARKETPLACE_XFAC_FACE_REC_SELFIE_APPEAL:81,YOUTH_NON_BLOCKING:82,OC_UFAC:83,MARKETPLACE_PERKS_APPEAL:84,META_BUSINESS_ACCOUNT_CREATION:85,WA_USER_BAN_APPEAL:86,FB_SCAM_SMS:87,BUSINESS_VERIFICATION_CREATOR_MARKETPLACE:88,ADDITIONAL_PROFILE_PLUS_IMPERSONATION_NON_REC_LWE_APPEAL:89,PARTNERSHIP_HOME:90,FB_FINANCIAL_INTEGRITY_FINANCIAL_CRIMES:91,BUSINESS_VERIFICATION_CLASSIC_BM_ALLOWLIST:92,IG_FINANCIAL_INTEGRITY_SANCTIONS_SCREENING:93,XFAC_DEMO:1e4});i.default=e}),66);
__d("memoizeByReference",[],(function(t,n,r,o,a,i){"use strict";var e=typeof WeakMap=="function";function l(t){var n=e?new WeakMap:new Map;return function(e){if(n.has(e)){var r=n.get(e);if(r!==void 0)return r[0]}var o=t(e);return n.set(e,[o]),o}}i.default=l}),66);
__d("getGraphQLEnumSafe",["flipObject","memoizeByReference"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){if(t==null)return null;var n=s(e);return Object.prototype.hasOwnProperty.call(n,t)?n[t]:null}var s=r("memoizeByReference")(r("flipObject"));l.default=e}),98);
__d("useCDSEntryPointDialog",["XMDSDialogLoadingState.react","react","useBaseEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=function(t){return s.jsx(r("XMDSDialogLoadingState.react"),{onClose:t,withCloseButton:!0})};function c(e,t,n,o,a){var i=n===void 0?"button":n;return r("useBaseEntryPointDialog")(e,t,i,o!=null?o:u,a)}l.default=c}),98);
__d("useIXTXfacUniversalTriggerCDSDialog",["cr:10257","useCDSEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,o,a){return r("useCDSEntryPointDialog")(n("cr:10257"),e,void 0,a,{baseModalProps:t,carryOverRelayEnvironment_EXPERIMENTAL:o})}l.default=e}),98);
__d("usePasskeyUpsellEligibilityCheckMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="24998666569801021"}),null);
__d("usePasskeyUpsellEligibilityCheckMutation.graphql",["usePasskeyUpsellEligibilityCheckMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"encryptedContext"}],t=[{alias:null,args:[{kind:"Variable",name:"encrypted_context",variableName:"encryptedContext"}],kind:"ScalarField",name:"xfb_upsell_passkey_post_reauth",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"usePasskeyUpsellEligibilityCheckMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"usePasskeyUpsellEligibilityCheckMutation",selections:t},params:{id:n("usePasskeyUpsellEligibilityCheckMutation_facebookRelayOperation"),metadata:{},name:"usePasskeyUpsellEligibilityCheckMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("usePasskeyUpsellEligibilityCheck",["FXAccountsCenterPasskeyCreationUpsellRoot.entrypoint","RelayHooks","react-compiler-runtime","useCDSEntryPointDialog","usePasskeyUpsellEligibilityCheckMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e!==void 0?e:e=n("usePasskeyUpsellEligibilityCheckMutation.graphql");function u(){var e=o("react-compiler-runtime").c(4),t=o("RelayHooks").useMutation(s),n=t[0],a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a={entrypoint:"post_reauth"},e[0]=a):a=e[0];var i=r("useCDSEntryPointDialog")(r("FXAccountsCenterPasskeyCreationUpsellRoot.entrypoint"),a),l=i[0],u;return e[1]!==n||e[2]!==l?(u=function(t,r){n({onCompleted:function(t){t.xfb_upsell_passkey_post_reauth===!0?l({next:null,onSuccess:r,variant:"dialog"},r):r()},onError:function(t){r()},variables:{encryptedContext:t}})},e[1]=n,e[2]=l,e[3]=u):u=e[3],u}l.default=u}),98);
__d("SecuredActionTriggerWithEncryptedContext.react",["XMDSDialogLoadingState.react","Xfac_XFACAppealType","getGraphQLEnumSafe","nullthrows","react","react-compiler-runtime","useCometEntryPointDialog","useIXTXfacUniversalTriggerCDSDialog","usePasskeyUpsellEligibilityCheck"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useRef,m=function(t){return s.jsx(r("XMDSDialogLoadingState.react"),{onClose:t,withCloseButton:!1})};function p(e,t){var n=o("react-compiler-runtime").c(4),a;n[0]===Symbol.for("react.memo_cache_sentinel")?(a=r("nullthrows")(r("getGraphQLEnumSafe")(r("Xfac_XFACAppealType"),37)),n[0]=a):a=n[0];var i;n[1]!==t||n[2]!==e?(i={security_token:e,trigger_event_type:"XFAC_UNIVERSAL_ENTRY_ORGANIC_SENSITIVE_ACTIONS",xfac_appeal_type:a,xfac_config:t},n[1]=t,n[2]=e,n[3]=i):i=n[3];var l=r("useIXTXfacUniversalTriggerCDSDialog")(i,void 0,void 0,m),s=l[0];return s}function _(e){var t=o("react-compiler-runtime").c(13),n=e.encryptedContext,a=e.entrypoint,i=e.flow,l=e.onExit,s=e.onSuccess,u=e.useXFAC,m=e.xfacConfig,_=u===void 0?!1:u,f=p(n,m),g=r("usePasskeyUpsellEligibilityCheck")(),h;t[0]!==n||t[1]!==i?(h={encryptedContext:n,flow:i},t[0]=n,t[1]=i,t[2]=h):h=t[2];var y=r("useCometEntryPointDialog")(a,h),C=y[0],b=d(!0),v,S;t[3]!==n||t[4]!==i||t[5]!==l||t[6]!==s||t[7]!==C||t[8]!==g||t[9]!==f||t[10]!==_?(v=function(){b.current&&(_?f({flowCallbacks:{onClose:l,onComplete:function(){g(n,s)}}}):C({routeProps:{encryptedContext:n,flow:i,onExit:l,onSuccess:function(){return g(n,s)}}})),b.current=!1},S=[C,n,i,l,s,f,_,g],t[3]=n,t[4]=i,t[5]=l,t[6]=s,t[7]=C,t[8]=g,t[9]=f,t[10]=_,t[11]=v,t[12]=S):(v=t[11],S=t[12]),c(v,S)}l.default=_}),98);
__d("TransportSelectingClientSingletonConditional",["cr:710"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:710")}),98);/*FB_PKG_DELIM*/
__d("AsyncStorage",["Promise","WebAsyncStorage"],(function(t,n,r,o,a,i,l){"use strict";var e,s={getItem:function(o,a){return new(e||(e=n("Promise")))(function(e,t){r("WebAsyncStorage").getItem(o,function(n,r){a&&a(n,r),n!=null?t(n):e(r)})})},removeItem:function(o,a){return new(e||(e=n("Promise")))(function(e,t){r("WebAsyncStorage").removeItem(o,function(n){a&&a(n),n!=null?t(n):e()})})},setItem:function(o,a,i){return new(e||(e=n("Promise")))(function(e,t){r("WebAsyncStorage").setItem(o,a,function(n){i&&i(n),n!=null?t(n):e()})})}},u=s;l.default=u}),98);
__d("BaseCheckbox.react",["BaseFocusRing.react","BaseInput.react","BaseView.react","Locale","react","react-compiler-runtime","stylex","useMergeRefs"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","ref","variant","xstyle","indeterminate","suppressFocusRing","testid"],s,u,c=u||(u=o("react")),d=u,m=d.useLayoutEffect,p=d.useRef,_=d.useState,f=o("Locale").isRTL(),g={checkbox:{cursor:"x1ypdohk",height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",opacity:"x1w3u9th",outline:"x1a2a7pz",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},icon:{paddingTop:"x1nn3v0j",paddingInlineEnd:"x14vy60q",paddingBottom:"x1120s5i",paddingInlineStart:"xyiysdx",$$css:!0},inlineFlex:{display:"x3nfvp2",$$css:!0},labelRTL:{transformOrigin:"x1h1bmdg",$$css:!0},wrapper:{position:"x1n2onr6",$$css:!0}};function h(t){var n,a,i=o("react-compiler-runtime").c(35),l,u,d,h,y,C,b;if(i[0]!==t){var v=t.children,S=t.ref,R=t.variant,L=t.xstyle,E=t.indeterminate,k=t.suppressFocusRing,I=t.testid,T=babelHelpers.objectWithoutPropertiesLoose(t,e);l=v,d=S,C=R,b=L,h=E,y=I,u=T,i[0]=t,i[1]=l,i[2]=u,i[3]=d,i[4]=h,i[5]=y,i[6]=C,i[7]=b}else l=i[1],u=i[2],d=i[3],h=i[4],y=i[5],C=i[6],b=i[7];var D=h===void 0?!1:h,x=p(null),$=_(!1),P=$[0],N=$[1],M=(n=u.checked)!=null?n:!1,w=(a=u.disabled)!=null?a:!1,A,F;i[8]!==D?(A=function(){x.current!=null&&(x.current.indeterminate=D)},F=[D],i[8]=D,i[9]=A,i[10]=F):(A=i[9],F=i[10]),m(A,F);var O=r("useMergeRefs")(d,x),B;i[11]!==M||i[12]!==w||i[13]!==P||i[14]!==C?(B=function(t){var e,n,o,a,i;if(C==null)return null;var l=M?C.iconChecked:C.iconUnchecked;return c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props([g.inlineFlex,(e=C)==null?void 0:e.xstyleConfig.iconWrapper,M&&((n=C)==null?void 0:n.xstyleConfig.iconCheckedWrapper),P&&((o=C)==null?void 0:o.xstyleConfig.iconFocusedWrapper),w&&((a=C)==null?void 0:a.xstyleConfig.iconDisabledWrapper),w&&M&&((i=C)==null?void 0:i.xstyleConfig.iconDisabledCheckedWrapper)]),{suppressHydrationWarning:!0,children:c.jsx("div",babelHelpers.extends({},s.props([t,g.icon,C.xstyleConfig.icon]),{suppressHydrationWarning:!0,children:l!=null&&c.jsx(l,{height:"100%",width:"100%"})}))}))},i[11]=M,i[12]=w,i[13]=P,i[14]=C,i[15]=B):B=i[15];var W=B,q;i[16]!==M||i[17]!==l||i[18]!==w||i[19]!==W||i[20]!==D||i[21]!==O||i[22]!==u||i[23]!==y||i[24]!==C||i[25]!==b?(q=function(t){var e,n,o,a;return c.jsxs(r("BaseView.react"),{role:"none",testid:void 0,xstyle:[g.wrapper,C!=null?(e=C)==null?void 0:e.xstyleConfig.checkboxWrapper:t,b],children:[W(t),C!=null?c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props([g.inlineFlex,(n=C)==null?void 0:n.xstyleConfig.labelWrapper]),{children:l})):l,c.jsx(r("BaseInput.react"),babelHelpers.extends({},u,{"aria-checked":D?"mixed":M!=null?M:!1,ref:O,type:"checkbox",xstyle:[g.checkbox,(o=C)==null?void 0:o.xstyleConfig.checkbox,w&&((a=C)==null?void 0:a.xstyleConfig.checkboxDisabled)]}))]})},i[16]=M,i[17]=l,i[18]=w,i[19]=W,i[20]=D,i[21]=O,i[22]=u,i[23]=y,i[24]=C,i[25]=b,i[26]=q):q=i[26];var U=q,V=C!=null?"inset":void 0,H;i[27]!==U||i[28]!==w||i[29]!==u.id||i[30]!==C?(H=function(t){var e,n;return c.jsx(c.Fragment,{children:C!=null?c.jsx("label",babelHelpers.extends({},(s||(s=r("stylex"))).props([f&&g.labelRTL,(e=C)==null?void 0:e.xstyleConfig.label,w===!0&&((n=C)==null?void 0:n.xstyleConfig.labelDisabled)]),{htmlFor:u.id,suppressHydrationWarning:!0,children:U(t)})):U(t)})},i[27]=U,i[28]=w,i[29]=u.id,i[30]=C,i[31]=H):H=i[31];var G;return i[32]!==V||i[33]!==H?(G=c.jsx(r("BaseFocusRing.react"),{focusRingPosition:V,onFocusVisibleChange:N,children:H}),i[32]=V,i[33]=H,i[34]=G):G=i[34],G}l.default=h}),98);
__d("BaseStyledCheckbox.react",["BaseCheckbox.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useCallback,c={checkbox:{display:"x78zum5",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(17),n=e["aria-label"],a=e["aria-labelledby"],i=e.checked,l=e.checkedIcon,u=e.children,d=e.disabled,m=e.id,p=e.name,_=e.onChange,f=e.ref,g=e.suppressFocusRing,h=e.tabIndex,y=e.testid,C=e.uncheckedIcon,b=e.value,v=d===void 0?!1:d,S;t[0]!==_||t[1]!==b?(S=function(t,n){_(b)},t[0]=_,t[1]=b,t[2]=S):S=t[2];var R=S,L=i?l:C,E;return t[3]!==n||t[4]!==a||t[5]!==i||t[6]!==u||t[7]!==v||t[8]!==m||t[9]!==p||t[10]!==R||t[11]!==f||t[12]!==g||t[13]!==L||t[14]!==h||t[15]!==y?(E=s.jsxs(r("BaseCheckbox.react"),{"aria-label":n,"aria-labelledby":a,checked:i,disabled:v,id:m,name:p,onValueChange:R,ref:f,suppressFocusRing:g,tabIndex:h,testid:void 0,xstyle:c.checkbox,children:[L,u]}),t[3]=n,t[4]=a,t[5]=i,t[6]=u,t[7]=v,t[8]=m,t[9]=p,t[10]=R,t[11]=f,t[12]=g,t[13]=L,t[14]=h,t[15]=y,t[16]=E):E=t[16],E}l.default=d}),98);
__d("CometLeftRailLayoutContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(!1);l.default=u}),98);
__d("CometLeftRailPrimaryContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(!1);l.default=u}),98);
__d("FDSCheckbox.react",["ix","BaseStyledCheckbox.react","CometPressableOverlay.react","FDSIcon.react","FDSText.react","fbicon","react","react-compiler-runtime","useCometPressableEventHandlers"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(43),n=e["aria-labelledby"],a=e.checked,i=e.disabled,l=e.iconSize,c=e.id,d=e.label,m=e.labelIsHidden,p=e.name,_=e.onChange,f=e.reduceEmphasis,g=e.ref,h=e.smallerLabel,y=e.tabIndex,C=e.testid,b=e.value,v=i===void 0?!1:i,S=l===void 0?24:l,R=m===void 0?!1:m,L=f===void 0?!1:f,E=h===void 0?!1:h,k;t[0]!==v?(k={disabled:v},t[0]=v,t[1]=k):k=t[1];var I=r("useCometPressableEventHandlers")(k),T=I[0],D=I[2],x=I[3],$=D.focusVisible,P=D.hovered,N=D.pressed,M;t[2]===Symbol.for("react.memo_cache_sentinel")?(M="x1i10hfl x6s0dn4 x78zum5 xwib8y2 x1y1aw1k x1n2onr6 xggy1nq",t[2]=M):M=t[2];var w=R?d:void 0,A=v?"disabled":"highlight",F;t[3]!==S?(F=S===16?o("fbicon")._(s("492790"),16):o("fbicon")._(s("531032"),24),t[3]=S,t[4]=F):F=t[4];var O;t[5]!==A||t[6]!==F?(O=u.jsx(r("FDSIcon.react"),{color:A,icon:F}),t[5]=A,t[6]=F,t[7]=O):O=t[7];var B=v?"disabled":"secondary",W;t[8]!==S?(W=S===16?o("fbicon")._(s("659287"),16):o("fbicon")._(s("659289"),24),t[8]=S,t[9]=W):W=t[9];var q;t[10]!==B||t[11]!==W?(q=u.jsx(r("FDSIcon.react"),{color:B,icon:W}),t[10]=B,t[11]=W,t[12]=q):q=t[12];var U;t[13]!==$||t[14]!==P||t[15]!==N?(U=u.jsx(r("CometPressableOverlay.react"),{focusVisible:$,hovered:P,offset:8,pressed:N,radius:"50%"}),t[13]=$,t[14]=P,t[15]=N,t[16]=U):U=t[16];var V;t[17]!==n||t[18]!==a||t[19]!==v||t[20]!==c||t[21]!==p||t[22]!==_||t[23]!==g||t[24]!==O||t[25]!==q||t[26]!==U||t[27]!==w||t[28]!==y||t[29]!==C||t[30]!==b?(V=u.jsx(r("BaseStyledCheckbox.react"),{"aria-label":w,"aria-labelledby":n,checked:a,checkedIcon:O,disabled:v,id:c,name:p,onChange:_,ref:g,tabIndex:y,testid:void 0,uncheckedIcon:q,value:b,children:U}),t[17]=n,t[18]=a,t[19]=v,t[20]=c,t[21]=p,t[22]=_,t[23]=g,t[24]=O,t[25]=q,t[26]=U,t[27]=w,t[28]=y,t[29]=C,t[30]=b,t[31]=V):V=t[31];var H;t[32]!==v||t[33]!==d||t[34]!==R||t[35]!==L||t[36]!==E?(H=R?null:u.jsx("div",{className:"x1r8uery x1iyjqo2 x13fj5qh xeuugli",children:u.jsx(r("FDSText.react"),{color:v?"disabled":"primary",type:L?E===!0?"body4":"body3":"button2",children:d})}),t[32]=v,t[33]=d,t[34]=R,t[35]=L,t[36]=E,t[37]=H):H=t[37];var G;return t[38]!==x||t[39]!==T||t[40]!==V||t[41]!==H?(G=u.jsxs("label",babelHelpers.extends({className:M},x,{ref:T,children:[V,H]})),t[38]=x,t[39]=T,t[40]=V,t[41]=H,t[42]=G):G=t[42],G}l.default=c}),98);
__d("FDSCode.react",["CometTextTypography","react","react-compiler-runtime","stylex","testID"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={center:{textAlign:"x2b8uid",$$css:!0},end:{textAlign:"xp4054r",$$css:!0},start:{textAlign:"x1yc453h",$$css:!0}},d={blueLink:{color:"x1fey0fg",$$css:!0},disabled:{color:"x1dntmbh",$$css:!0},highlight:{color:"x1qq9wsj",$$css:!0},linkOnMedia:{color:"x9kptjx",$$css:!0},negative:{color:"x1a1m0xk",$$css:!0},placeholder:{color:"x12scifz",$$css:!0},positive:{color:"x6u5lvz",$$css:!0},primary:{color:"xzsf02u",$$css:!0},primaryButtonTextOnMedia:{color:"x1yeb1j6",$$css:!0},primaryDeemphasizedButton:{color:"x1mvi0mv",$$css:!0},primaryOnColor:{color:"x1ko2xvj",$$css:!0},primaryOnMedia:{color:"x17z8epw",$$css:!0},secondary:{color:"xi81zsa",$$css:!0},secondaryButton:{color:"x1dem4cn",$$css:!0},secondaryOnColor:{color:"xj0d7sl",$$css:!0},secondaryOnMedia:{color:"xkxfvhb",$$css:!0},selectedOption:{color:"x1qoxp87",$$css:!0},tertiary:{color:"x12scifz",$$css:!0},tooltip:{color:"xzsf02u",$$css:!0},white:{color:"x14ctfv",$$css:!0}},m={12:{fontSize:"x1pg5gke",lineHeight:"xvq8zen",$$css:!0},13:{fontSize:"x1nxh6w3",lineHeight:"x1sibtaa",$$css:!0},14:{fontSize:"x1f6kntn",lineHeight:"x1ruc54x",$$css:!0},15:{fontSize:"x6prxxf",lineHeight:"xvq8zen",$$css:!0},16:{fontSize:"x1jchvi3",lineHeight:"x132q4wb",$$css:!0},17:{fontSize:"x1lkfr7t",lineHeight:"x1lbecb7",$$css:!0},20:{fontSize:"x1603h9y",lineHeight:"x1u7k74",$$css:!0},24:{fontSize:"xngnso2",lineHeight:"x1qb5hxa",$$css:!0},28:{fontSize:"x1q74xe4",lineHeight:"xyesn5m",$$css:!0},32:{fontSize:"x579bpy",lineHeight:"xjkpybl",$$css:!0}},p={bold:{fontWeight:"x1xlr1w8",$$css:!0},medium:{fontWeight:"xk50ysn",$$css:!0},normal:{fontWeight:"xo1l8bm",$$css:!0},semibold:{fontWeight:"x1s688f",$$css:!0}},_={root:{boxSizing:"x9f619",fontFamily:"x9m5x89",$$css:!0}};function f(t){var n=o("react-compiler-runtime").c(12),a=t.align,i=t.children,l=t.color,s=t.testid,f=t.type,g=t.xstyle,h=a===void 0?"auto":a,y=l===void 0?"primary":l,C=r("CometTextTypography")[f],b=C.fontSize,v=C.fontWeight,S=v===void 0?"normal":v,R;n[0]!==h||n[1]!==y||n[2]!==b||n[3]!==S||n[4]!==g?(R=(e||(e=r("stylex")))(_.root,h!=="auto"&&c[h],m[b],p[S],d[y],g),n[0]=h,n[1]=y,n[2]=b,n[3]=S,n[4]=g,n[5]=R):R=n[5];var L;n[6]!==s?(L=r("testID")(s),n[6]=s,n[7]=L):L=n[7];var E;return n[8]!==i||n[9]!==R||n[10]!==L?(E=u.jsx("code",babelHelpers.extends({className:R},L,{children:i})),n[8]=i,n[9]=R,n[10]=L,n[11]=E):E=n[11],E}l.default=f}),98);
__d("FDSUndoFilled16PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("685851"),16),u=e;l.default=u}),98);
__d("GroupsCometChatsThreadNotificationSettingsDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{queries:{}}},root:r("JSResourceForInteraction")("GroupsCometChatsThreadNotificationSettingsDialog.react").__setRef("GroupsCometChatsThreadNotificationSettingsDialog.entrypoint")},s=e;l.default=s}),98);
__d("LSClearDiscoverableChatsParticipantsAndRanges",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(e){return t.sequence([function(e){return t.forEach(t.db.table(248).fetch(),function(e){return e.delete()})},function(e){return t.forEach(t.db.table(249).fetch(),function(e){return e.delete()})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxClearDiscoverableChatsParticipantsAndRangesStoredProcedure",e.__tables__=["discoverable_chat_participants","discoverable_chat_participants_ranges_v2__generated"],a.exports=e}),null);
__d("LSClearDiscoverableChatsParticipantsAndRangesStoredProcedure",["LSClearDiscoverableChatsParticipantsAndRanges","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t){var a=t.storedProcedure(r("LSClearDiscoverableChatsParticipantsAndRanges"));return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(a))}l.default=s}),98);
__d("LSContactLink.react",["CurrentEnvironment","MWLSContactTypeExactUtils","MWXLink.react","MWXPressable.react","getLSContactHref","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={shrinking:{flexShrink:"xs83m0k",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(19),n=e.children,a=e.contact,i=e.isText,l=e.label,c=e.testid,d=i===void 0?!0:i,m=a.blockedByViewerStatus,p=a.contactTypeExact,_=a.id,f=a.secondaryName,g;t[0]!==m||t[1]!==p||t[2]!==_||t[3]!==f?(g=r("getLSContactHref")({blockedByViewerStatus:m,contactTypeExact:p,id:_,secondaryName:f}),t[0]=m,t[1]=p,t[2]=_,t[3]=f,t[4]=g):g=t[4];var h=g,y=o("MWLSContactTypeExactUtils").isIgContact(p),C=!r("CurrentEnvironment").facebookdotcom||y?"_blank":void 0;if(h==null)return n;if(d){var b;return t[5]!==n||t[6]!==l||t[7]!==C||t[8]!==c||t[9]!==h?(b=s.jsx(r("MWXLink.react"),{href:h,label:l,target:C,testid:void 0,children:n}),t[5]=n,t[6]=l,t[7]=C,t[8]=c,t[9]=h,t[10]=b):b=t[10],b}var v;t[11]!==C||t[12]!==h?(v={target:C,url:h},t[11]=C,t[12]=h,t[13]=v):v=t[13];var S;return t[14]!==n||t[15]!==l||t[16]!==v||t[17]!==c?(S=s.jsx(r("MWXPressable.react"),{expanding:!0,label:l,linkProps:v,overlayRadius:"normal",testid:void 0,xstyle:u.shrinking,children:n}),t[14]=n,t[15]=l,t[16]=v,t[17]=c,t[18]=S):S=t[18],S}l.default=c}),98);
__d("LSContactMessengerRestrictAction",[],(function(t,n,r,o,a,i){var e=Object.freeze({RESTRICT:0,UNRESTRICT:1});i.default=e}),66);
__d("LSUpsertDiscoverableChatsParticipantsRanges",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(249).put({threadId:e[0],minName:"",source:e[4],maxName:e[5],isLoadingBefore:!1,isLoadingAfter:e[2],hasMoreBefore:!1,hasMoreAfter:e[1],nextPageCursor:e[3]})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpsertDiscoverableChatsParticipantsRangesStoredProcedure",e.__tables__=["discoverable_chat_participants_ranges_v2__generated"],a.exports=e}),null);
__d("LSFetchDiscoverableChatParticipants",["LSIssueNewTask","LSUpsertDiscoverableChatsParticipantsRanges"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[7]=n.syncGroup,t.i64.neq(r[7],void 0)?r[6]=r[7]:r[6]=t.i64.cast([0,1]),r[0]=r[6])})},function(r){return t.storedProcedure(n("LSUpsertDiscoverableChatsParticipantsRanges"),e[0],!1,!0,"",e[2],e[3])},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([0,1]):(n=a.item,r[7]=n.syncGroup,t.i64.neq(r[7],void 0)?r[6]=r[7]:r[6]=t.i64.cast([0,1]),r[2]=r[6])})},function(o){return r[4]=new t.Map,r[4].set("thread_key",e[0]),r[4].set("cursor",e[1]),r[4].set("source",e[2]),r[4].set("sync_group",r[2]),r[5]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),"fetch_discoverable_chat_participant_list",t.i64.cast([0,110006]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxFetchDiscoverableChatParticipantsStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSFetchDiscoverableChatParticipantsStoredProcedure",["LSFetchDiscoverableChatParticipants","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSFetchDiscoverableChatParticipants"),a.threadKey,a.cursor,a.source,a.maxName);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSSetNeedsAdminApprovalForNewParticipant",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({needsAdminApprovalForNewParticipant:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetNeedsAdminApprovalForNewParticipantStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticSetNeedsAdminApprovalForNewParticipant",["LSIssueNewTask","LSSetNeedsAdminApprovalForNewParticipant"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return t.storedProcedure(n("LSSetNeedsAdminApprovalForNewParticipant"),e[0],e[1])},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[5]=n.syncGroup,t.i64.neq(r[5],void 0)?r[4]=r[5]:r[4]=t.i64.cast([0,1]),r[0]=r[4])})},function(o){return r[2]=new t.Map,r[2].set("thread_key",e[0]),r[2].set("enabled",e[1]),r[2].set("sync_group",r[0]),r[3]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),"set_needs_admin_approval_for_new_participant",t.i64.cast([0,28]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure",["LSOptimisticSetNeedsAdminApprovalForNewParticipant","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticSetNeedsAdminApprovalForNewParticipant"),a.threadKey,a.needsAdminApprovalForNewParticipant);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSSetReadReceiptSettingForThread",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(n){var r=n.update,o=n.item;return r({isReadReceiptsDisabled:t.i64.eq(e[1],t.i64.cast([0,1])),readReceiptsDisabledV2:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxSetReadReceiptSettingForThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticToggleReadReceipts",["LSIssueNewTask","LSSetReadReceiptSettingForThread"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return t.storedProcedure(n("LSSetReadReceiptSettingForThread"),e[0],e[1]?t.i64.cast([0,1]):t.i64.cast([0,2]))},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[6]=n.syncGroup,t.i64.neq(r[6],void 0)?r[5]=r[6]:r[5]=t.i64.cast([0,1]),r[0]=r[5])})},function(o){return r[2]=new t.Map,r[2].set("thread_key",e[0]),r[2].set("is_read_receipts_disabled",e[1]),r[2].set("sync_group",r[0]),r[3]=r[2].get("thread_key"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,60003]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticToggleReadReceiptsStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticToggleReadReceiptsStoredProcedure",["LSOptimisticToggleReadReceipts","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticToggleReadReceipts"),a.threadKey,a.isReadReceiptsDisabled);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpdateThreadJoinRequestApprovalSetting",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({joinRequestApprovalSetting:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadJoinRequestApprovalSettingStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticUpdateThreadJoinRequestApprovalSetting",["LSIssueNewTask","LSUpdateThreadJoinRequestApprovalSetting"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return t.storedProcedure(n("LSUpdateThreadJoinRequestApprovalSetting"),e[0],e[1])},function(o){return r[0]=new t.Map,r[0].set("thread_id",e[0]),r[0].set("join_request_approval_setting",e[1]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"update_thread_join_request_approval_setting",t.i64.cast([0,661]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpdateThreadJoinRequestApprovalSettingStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSOptimisticUpdateThreadJoinRequestApprovalSettingStoredProcedure",["LSOptimisticUpdateThreadJoinRequestApprovalSetting","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticUpdateThreadJoinRequestApprovalSetting"),a.threadKey,a.joinRequestApprovalSetting);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpdateThreadAvatarSticker",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({avatarStickerInstructionKeyId:e[1],avatarStickerId:e[2],avatarStickerThumbnailImageUrl:e[3],avatarStickerThumbnailImageMimeType:e[4],avatarStickerOriginalImageUrl:e[5],avatarStickerOriginalImageMimeType:e[6]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateThreadAvatarStickerStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSOptimisticUpdateThreadTheme",["LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSIssueNewError","LSIssueNewTask","LSLocalize","LSUpdateThreadAvatarSticker"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[28]=n.syncGroup,t.i64.neq(r[28],void 0)?r[27]=r[28]:r[27]=t.i64.cast([0,1]),r[0]=r[27])})},function(o){return r[2]=new t.Map,r[2].set("thread_key",e[0]),r[2].set("theme_fbid",e[1]),r[2].set("sync_group",r[0]),r[3]=t.i64.random(),r[4]=t.createArray(),r[27]=(r[4].push("ai_generated_theme"),r[4]),r[27]=(r[4].push(t.i64.to_string(r[3])),r[4]),r[5]=t.toJSON(r[4]),r[6]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),r[5],t.i64.cast([0,1013]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[7]=t.i64.cast([0,1]):(n=a.item,r[28]=n.syncGroup,t.i64.neq(r[28],void 0)?r[27]=r[28]:r[27]=t.i64.cast([0,1]),r[7]=r[27])})},function(o){return r[9]=new t.Map,r[9].set("thread_key",e[0]),r[9].set("theme_fbid",e[1]),r[9].set("sync_group",r[7]),r[10]=t.i64.random(),r[11]=t.createArray(),r[27]=(r[11].push("msgr_custom_thread_theme"),r[11]),r[27]=(r[11].push(t.i64.to_string(r[10])),r[11]),r[12]=t.toJSON(r[11]),r[13]=t.toJSON(r[9]),t.storedProcedure(n("LSIssueNewTask"),r[12],t.i64.cast([0,1037]),r[13],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[14]=t.i64.cast([0,1]):(n=a.item,r[28]=n.syncGroup,t.i64.neq(r[28],void 0)?r[27]=r[28]:r[27]=t.i64.cast([0,1]),r[14]=r[27])})},function(o){return r[16]=new t.Map,r[16].set("thread_key",e[0]),r[16].set("theme_fbid",e[1]),r[16].set("sync_group",r[14]),r[17]=t.i64.random(),r[18]=t.createArray(),r[27]=(r[18].push("thread_theme_writer"),r[18]),r[27]=(r[18].push(t.i64.to_string(r[17])),r[18]),r[19]=t.toJSON(r[18]),r[20]=t.toJSON(r[16]),t.storedProcedure(n("LSIssueNewTask"),r[19],t.i64.cast([0,1028]),r[20],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({themeFbid:e[1]})})},function(r){return t.storedProcedure(n("LSUpdateThreadAvatarSticker"),e[0],void 0,void 0,void 0,void 0,void 0,void 0)},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[21]=t.i64.cast([0,1]):(n=a.item,r[28]=n.syncGroup,t.i64.neq(r[28],void 0)?r[27]=r[28]:r[27]=t.i64.cast([0,1]),r[21]=r[27])})},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[23]=!1:(t=o.item,r[23]=t.errorShouldBeShown)})},function(e){return r[23]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[27]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[28]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[27],r[28],void 0,void 0)}]):t.resolve()},function(o){return r[25]=new t.Map,r[25].set("thread_key",e[0]),r[25].set("theme_fbid",e[1]),r[25].set("source",void 0),r[25].set("sync_group",r[21]),r[25].set("payload",void 0),r[26]=t.toJSON(r[25]),t.storedProcedure(n("LSIssueNewTask"),"thread_theme",t.i64.cast([0,43]),r[26],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUpdateThreadThemeStoredProcedure",e.__tables__=["threads","user_visible_network_connectivity_error"],a.exports=e}),null);
__d("LSOptimisticUpdateThreadThemeStoredProcedure",["LSOptimisticUpdateThreadTheme","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticUpdateThreadTheme"),a.threadKey,a.themeFbid);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSPlatformLogout",["LSCookie","LSDatabaseSingleton","QPLUserFlow","cr:10031","gkx","qpl","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback;async function c(){if(!(!n("cr:10031")||r("gkx")("5547"))){r("QPLUserFlow").start(r("qpl")._(25311266,"236"),{cancelOnUnload:!0,timeoutInMs:3e3});try{await Promise.all([(async function(){var e=await(s||(s=o("LSDatabaseSingleton"))).LSDatabaseSingleton;await n("cr:10031").deleteDB("logout",e)})(),o("LSCookie").clear()])}catch(e){r("QPLUserFlow").endFailure(r("qpl")._(25311266,"236"),"fail");return}r("QPLUserFlow").endSuccess(r("qpl")._(25311266,"236"))}}function d(){return u(c,[])}l.logout=c,l.useLogout=d}),98);
__d("LSSetMessengerRestrict",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(7).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.id,e[0])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}),function(t){var n=t.update,r=t.item;return n({pendingMessengerRestrictAction:e[1]})})},function(o){return r[0]=new t.Map,r[0].set("restrictee_id",e[0]),r[0].set("request_id",e[2]),r[0].set("messenger_restrict_action",e[1]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"messenger_restrict",t.i64.cast([0,367]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSContactSetMessengerRestrictStoredProcedure",e.__tables__=["contacts"],a.exports=e}),null);
__d("LSSetMessengerRestrictStoredProcedure",["LSSetMessengerRestrict","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSetMessengerRestrict"),a.restricteeId,a.messengerRestrictAction,a.requestId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSUpdateThreadImage",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(9).fetch([[[e[0]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(n.threadType,t.i64.cast([0,2]))}),function(n){var r=n.update,o=n.item;return r({authorityLevel:t.i64.cast([0,60]),threadPictureUrl:e[2]===""?void 0:e[2],threadPictureUrlFallback:e[3],threadPictureUrlExpirationTimestampMs:e[4]})})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[5]=n.syncGroup,t.i64.neq(r[5],void 0)?r[4]=r[5]:r[4]=t.i64.cast([0,1]),r[0]=r[4])})},function(o){return r[2]=new t.Map,r[2].set("thread_key",e[0]),r[2].set("image_id",e[1]),r[2].set("sync_group",r[0]),r[3]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),"thread_image",t.i64.cast([0,37]),r[3],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxUpdateThreadImageStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSUpdateThreadImageStoredProcedure",["LSSynchronousPromise","LSUpdateThreadImage","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSUpdateThreadImage"),a.threadKey,a.imageId,a.threadImageUrl,a.threadImageUrlFallback,a.threadImageUrlExpirationTimestampMs);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LsIgnoreTappedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("707"),s=o("FalcoLoggerInternal").create("ls_ignore_tapped",e),u=s;l.default=u}),98);
__d("MAWCutoverEncryptedBackupsBanner.react",["CometErrorBoundary.react","cr:3127","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),a=e.isShown,i;t[0]!==a?(i=a&&n("cr:3127")?s.jsx(r("CometErrorBoundary.react"),{fallback:c,children:s.jsx(n("cr:3127"),{})}):null,t[0]=a,t[1]=i):i=t[1];var l;return t[2]!==i?(l=s.jsx(s.Fragment,{children:i}),t[2]=i,t[3]=l):l=t[3],l}function c(){return null}l.default=u}),98);
__d("MAWFTSSyncConsts",["justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("justknobx")._("2655");l.THREAD_VIEW_DELAY_UNTIL_RESTORE=e}),98);
__d("MWXProgressRing.react",["cr:4145","cr:6783","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),r=e.color,a=e.percentage,i=e.size;if(n("cr:4145")!=null){var l=r!=null?r:"light",u=a!=null?a:0,c=i!=null?i:16,d;return t[0]!==l||t[1]!==u||t[2]!==c?(d=s.jsx(n("cr:4145"),{color:l,percentage:u,size:c}),t[0]=l,t[1]=u,t[2]=c,t[3]=d):d=t[3],d}if(n("cr:6783")!=null){var m;return t[4]!==r||t[5]!==a||t[6]!==i?(m=s.jsx(n("cr:6783"),{color:r,percentage:a,size:i}),t[4]=r,t[5]=a,t[6]=i,t[7]=m):m=t[7],m}return null}l.default=u}),98);
__d("mwReplaceToast",["BaseToasterStateManager","MWXToast.react","err","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("BaseToasterStateManager").getInstance();function c(e){var t=e.body,n=e.icon,o=e.startAddOn,a=o===void 0?null:o,i=e.supressCloseButton,l=i===void 0?!1:i,c=e.title,d=e.toastId;if(d==null){r("err")("toastId or toasterStateManager is not provided");return}u.replace(d,s.jsx(r("MWXToast.react"),{body:t,icon:n,onDismiss:function(){return u.expire(d)},startAddOn:a,supressCloseButton:l,title:c}))}l.mwReplaceToast=c}),98);
__d("MAWLoadingSpinner.react",["BaseToasterStateManager","MWXIconCheckmarkCircle","MWXIconStrict.react","MWXProgressRing.react","MWXSpinner.react","mwPushToast","mwReplaceToast","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useLayoutEffect,m=u.useRef,p=r("BaseToasterStateManager").getInstance();function _(e,t,n,o){return o===void 0&&(o=0),e==="spinner"?{icon:{comet:s.jsx(r("MWXSpinner.react"),{color:t?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:n}:e==="progressRing"?{icon:{comet:s.jsx(r("MWXProgressRing.react"),{color:t?"light":"dark",size:24})},startAddOn:{source:o,type:"progressRing"},title:n}:{icon:{comet:s.jsx(r("MWXSpinner.react"),{color:t?"light":"dark",size:24})},startAddOn:{type:"spinner"},title:n}}function f(e,t){o("mwReplaceToast").mwReplaceToast({icon:{comet:s.jsx(r("MWXIconStrict.react"),{icon:r("MWXIconCheckmarkCircle"),size:24}),mds:r("MWXIconCheckmarkCircle").component},title:t,toastId:e})}function g(e,t,n,a,i,l){var s=o("react-compiler-runtime").c(10),u=m(),g,h;s[0]!==a||s[1]!==t||s[2]!==l||s[3]!==n||s[4]!==i||s[5]!==e?(g=function(){if(i)u.current==null?u.current=o("mwPushToast").mwPushToast(_(e,t,n,l),Number.MAX_SAFE_INTEGER):o("mwReplaceToast").mwReplaceToast(babelHelpers.extends({},_(e,t,n,l),{toastId:u.current}));else if(u.current!=null){var s=u.current;f(s,a),r("setTimeout")(function(){p.expire(s),u.current=void 0},2750)}},h=[i,t,e,n,l,a],s[0]=a,s[1]=t,s[2]=l,s[3]=n,s[4]=i,s[5]=e,s[6]=g,s[7]=h):(g=s[6],h=s[7]),d(g,h);var y,C;s[8]===Symbol.for("react.memo_cache_sentinel")?(y=function(){return function(){u.current!=null&&p.expire(u.current)}},C=[],s[8]=y,s[9]=C):(y=s[8],C=s[9]),c(y,C)}l.useMAWLoadingSpinner=g}),98);
__d("MAWLoadingStateOutstandingOfflineQueueSelector",["MAWSharedProtocolQueueConst"],(function(t,n,r,o,a,i,l){"use strict";var e=function(t){return(function(e){var n=e.offlineQueueCount,r=e.offlineQueueSyncState,a=e.offlineQueueThreadStatus;if(t!=null&&Object.keys(a).length>0){var i;return a[t]!=null&&((i=a[t])==null?void 0:i.snippetStatus)!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}return n>0&&r!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete})};l.outstandingOfflineQueueSelector=e}),98);
__d("MAWLoadingStateSpinnerUtils",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e=function(t){return s._(/*BTDS*/"{restoredPercentage}\u0025 of chats loaded...",[s._param("restoredPercentage",t.toFixed(0).toString())])},u=s._(/*BTDS*/"All chats loaded.");function c(e,t,n){if(n===0)return 100;var r=50*(e/n),o=50*(t/n);return Math.min(100,o+r)}l.getProgressMessage=e,l.completedMessage=u,l.getPercentage=c}),226);
__d("MAWLoadingStateToastSelectors",[],(function(t,n,r,o,a,i){"use strict";var e=function(t){return t.offlineQueueCount},l=function(t){return t.offlineQueueProgressDownloaded},s=function(t){return t.offlineQueueProgressProcessed};i.offlineQueueCountSelector=e,i.offlineQueueProgressCountSelector=l,i.offlineQueueConsumerProgressCountSelector=s}),66);
__d("useMAWOfflineQueueLoadingIndicator",["Int64Hooks","MAWLoadingStateOutstandingOfflineQueueSelector","MAWStateContext.react","react-compiler-runtime","useCometRouterState","useMAWOfflineQueueLoadingIndicatorThreadJid"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var a=o("react-compiler-runtime").c(4),i=e===void 0?!1:e,l=n===void 0?o("MAWLoadingStateOutstandingOfflineQueueSelector").outstandingOfflineQueueSelector:n,s=r("useMAWOfflineQueueLoadingIndicatorThreadJid")(t==null?void 0:t.threadKey,t==null?void 0:t.threadType),u=r("useCometRouterState")(),c,d;a[0]!==l||a[1]!==s?(c=function(){return l(s)},d=[l,s],a[0]=l,a[1]=s,a[2]=c,a[3]=d):(c=a[2],d=a[3]);var m=o("Int64Hooks").useMemoInt64(c,d),p=o("MAWStateContext.react").useMAWSelector(m),_=u==null?void 0:u.main.route.tabKey;return p&&(_==="messenger"||!i)}l.default=e}),98);
__d("MAWLoadingStateSpinner.react",["CometDarkModeContext","MAWLoadingSpinner.react","MAWLoadingStateSpinnerUtils","MAWLoadingStateToastSelectors","MAWStateContext.react","cr:19625","react","react-compiler-runtime","useMAWOfflineQueueLoadingIndicator"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.memo,d=u.useContext;function m(){var e=o("react-compiler-runtime").c(5),t=d(r("CometDarkModeContext")).currentSetting==="ENABLED",n=r("useMAWOfflineQueueLoadingIndicator")(!0),a=o("MAWStateContext.react").useMAWSelector(o("MAWLoadingStateToastSelectors").offlineQueueCountSelector),i=o("MAWStateContext.react").useMAWSelector(o("MAWLoadingStateToastSelectors").offlineQueueProgressCountSelector),l=o("MAWStateContext.react").useMAWSelector(o("MAWLoadingStateToastSelectors").offlineQueueConsumerProgressCountSelector),s,u;e[0]!==i||e[1]!==a||e[2]!==l?(s=o("MAWLoadingStateSpinnerUtils").getPercentage(i,l,a),u=o("MAWLoadingStateSpinnerUtils").getProgressMessage(s),e[0]=i,e[1]=a,e[2]=l,e[3]=s,e[4]=u):(s=e[3],u=e[4]);var c=u;return o("MAWLoadingSpinner.react").useMAWLoadingSpinner("progressRing",t,c,o("MAWLoadingStateSpinnerUtils").completedMessage,n,s),null}function p(){var e=o("react-compiler-runtime").c(1),t;return e[0]===Symbol.for("react.memo_cache_sentinel")?(t=n("cr:19625")!=null?s.jsx(n("cr:19625"),{}):s.jsx(m,{}),e[0]=t):t=e[0],t}var _=c(p);l.default=_}),98);
__d("MAWLoadingStateSpinnerWithQueueState",["CometDarkModeContext","MAWLoadingSpinner.react","MAWLoadingStateSpinnerUtils","MAWSharedProtocolQueueConst","react","react-compiler-runtime","useMAWOfflineQueueLoadingIndicatorShown","useMAWOfflineQueueState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(5),n=e.shouldDisplayLoadingIndicatorOnMessengerRoute,a=u(r("CometDarkModeContext")).currentSetting==="ENABLED",i=o("useMAWOfflineQueueState").useMAWOfflineQueueState(),l=i.offlineQueueCount,s=i.offlineQueueProgressDownloaded,c=i.offlineQueueProgressProcessed,d=l>0&&i.offlineQueueSyncState!==o("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete,m=d&&n,p,_;t[0]!==s||t[1]!==l||t[2]!==c?(p=o("MAWLoadingStateSpinnerUtils").getPercentage(s,c,l),_=o("MAWLoadingStateSpinnerUtils").getProgressMessage(p),t[0]=s,t[1]=l,t[2]=c,t[3]=p,t[4]=_):(p=t[3],_=t[4]);var f=_;return o("MAWLoadingSpinner.react").useMAWLoadingSpinner("progressRing",a,f,o("MAWLoadingStateSpinnerUtils").completedMessage,m,p),null}function d(){var e=o("react-compiler-runtime").c(2),t=r("useMAWOfflineQueueLoadingIndicatorShown")(!0),n;return e[0]!==t?(n=t?s.jsx(c,{shouldDisplayLoadingIndicatorOnMessengerRoute:t}):null,e[0]=t,e[1]=n):n=e[1],n}l.default=d}),98);
__d("MAWMediaItemStateHandlerContentWrapper.react",["CometHeroHoldTrigger.react","FBLogger","I64","LSIntEnum","MAWClientMediaStatusUtils","MAWMediaDownloadStatusUIStateType","MWV2AttachmentLoadingPlaceholder.react","MessagingAttachmentType","react","react-compiler-runtime","useMAWMaybeAutoTriggerDownload","useMAWMediaDownloadManualRetry","useMAWMediaDownloadStatus"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=r("react")),m=(e||(e=o("react"))).useEffect,p={loadingPlaceholder:{borderStartStartRadius:"x15mokao",borderStartEndRadius:"x1ga7v0g",borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",$$css:!0}};function _(e){var t=o("react-compiler-runtime").c(34),n=e.dbAttachment,a=e.descriptionForLogging,i=e.errorComponentRenderer,l=e.errorWithBlurComponentRenderer,s=e.loadingComponentRenderer,u=e.mediaRenderQpl,c=e.placeholderHeight,_=e.placeholderMaxHeight,g=e.placeholderMaxWidth,h=e.placeholderWidth,y=e.successfulComponentRenderer,C=e.triggerUIView,b=r("useMAWMediaDownloadManualRetry")(n,u),v=r("useMAWMediaDownloadStatus")(n,u),S=v.status,R=v.uiState,L;t[0]!==S?(L=S!=null?o("MAWClientMediaStatusUtils").getMAWMediaStatus(S):null,t[0]=S,t[1]=L):L=t[1];var E=f(n)&&C==="gallery"?"preview":"fullsizeAndPreview",k;t[2]!==n||t[3]!==u||t[4]!==L||t[5]!==E||t[6]!==C?(k={attachment:n,downloadStatusV2:L,downloadType:E,mediaRenderQpl:u,triggerUIView:C},t[2]=n,t[3]=u,t[4]=L,t[5]=E,t[6]=C,t[7]=k):k=t[7],r("useMAWMaybeAutoTriggerDownload")(k);var I,T;t[8]!==a||t[9]!==R||t[10]!==u?(I=function(){var e={string:{call_site:a,download_status_ui_state:R}};u==null||u.addPoint("render-media-item-state-handler-content-wrapper-"+(R!=null?R:"null"),e);e:switch(R){case"non_retryable_error":case"retryable_error":case"non_retryable_error_with_preview":case"retryable_error_with_preview":{u==null||u.endFail(R,e);break e}case null:case"downloaded":case"loading":break e;default:u==null||u.endFail("unknown_state",{string:{unknown_state_value:R}})}},T=[R,u,a],t[8]=a,t[9]=R,t[10]=u,t[11]=I,t[12]=T):(I=t[11],T=t[12]),m(I,T);var D;t[13]!==s||t[14]!==u||t[15]!==c||t[16]!==_||t[17]!==g||t[18]!==h?(D=function(t,n){return s?s(t,n):d.jsxs(d.Fragment,{children:[d.jsx(r("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:t,height:c,maxHeight:_,maxWidth:g,mediaRenderQpl:u,width:h,xstyle:p.loadingPlaceholder}),!n&&d.jsx(r("CometHeroHoldTrigger.react"),{description:t,hold:!0})]})},t[13]=s,t[14]=u,t[15]=c,t[16]=_,t[17]=g,t[18]=h,t[19]=D):D=t[19];var x=D,$;if(t[20]!==a||t[21]!==R||t[22]!==i||t[23]!==l||t[24]!==b||t[25]!==x||t[26]!==y){$=Symbol.for("react.early_return_sentinel");e:{var P=o("MAWMediaDownloadStatusUIStateType").isRetryableErrorState(R);switch(R){case null:case"loading":{$=x(a+".MAWMediaItemStateHandlerContentWrapper.NoMedia",!1);break e}case"non_retryable_error":case"retryable_error":{$=i(P,b);break e}case"non_retryable_error_with_preview":case"retryable_error_with_preview":{if(l==null){$=i(P,b);break e}$=l(P,b);break e}case"downloaded":{var N;t[28]!==x||t[29]!==y?(N=y(x),t[28]=x,t[29]=y,t[30]=N):N=t[30],$=N;break e}default:{r("FBLogger")("messenger_web_media").mustfix("[MAW Attachment Content] Unknown MediaDownloadStatusUIState %s",R);var M=a+".MAWMediaItemStateHandlerContentWrapper.UnknownState",w;t[31]!==x||t[32]!==M?(w=x(M,!1),t[31]=x,t[32]=M,t[33]=w):w=t[33],$=w;break e}}}t[20]=a,t[21]=R,t[22]=i,t[23]=l,t[24]=b,t[25]=x,t[26]=y,t[27]=$}else $=t[27];if($!==Symbol.for("react.early_return_sentinel"))return $}function f(e){return(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))}l.default=_}),98);
__d("asyncTimeout",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){return new(e||(e=n("Promise")))(function(e){return setTimeout(e,t)})}i.default=l}),66);
__d("MAWSecretConversationsLogout",["FBLogger","MAWCurrentUser","MAWIndexedDBDeletion","MAWIndexedDbMetadata","MAWODSProxy","QPLUserFlow","Random","ReQL","WAOdsEnums","asyncTimeout","getErrorSafe","ifRequired","justknobx","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e){r("QPLUserFlow").start(r("qpl")._(25309731,"17"),{annotations:{bool:{userInitiated:e}},cancelOnUnload:!0,timeoutInMs:3e3})}function s(){r("QPLUserFlow").endSuccess(r("qpl")._(25309731,"17"))}function u(t){e(t),r("QPLUserFlow").endCancel(r("qpl")._(25310776,"6155"),{annotations:{string:{cancelReason:"logout"}}}),r("QPLUserFlow").endCancel(r("qpl")._(1056839232,"112"),{annotations:{string:{cancelReason:"logout"}}});var n=async function(){try{await r("ifRequired")("MAWSetupWorker",function(e){return e.terminateWorker("logout")},function(){r("FBLogger")("messenger_web_account").mustfix("Logging out without correct messenger environment in place")})}catch(t){var e=r("getErrorSafe")(t);r("FBLogger")("messenger_web_account").catching(e).mustfix("Error in removeCurrentDevice of the Armadillo logout flow")}finally{s()}},a=function(t,n,a){if(o("Random").coinflip(r("justknobx")._("4263"))){var e=t!=null?n!=null?"maw_db_deleted_user_eb_enrolled_and_device_restored":"maw_db_not_deleted_user_eb_enrolled_and_device_not_restored":a===!0?"maw_db_not_deleted_user_user_not_eb_enrolled_and_opted_out":"maw_db_not_deleted_user_user_not_eb_enrolled";o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_DELETE_DB_ON_LOGOUT,key:"maw_logout."+e})}},i=async function(){if(indexedDB.databases!=null){var e=await indexedDB.databases(),t=o("MAWCurrentUser").getID(),n=o("MAWIndexedDbMetadata").dbName(t),r=e.find(function(e){return e.name===n});if(r!=null)return r.name}},l=async function(){await r("ifRequired")("LSDatabaseSingleton",async function(e){try{if(r("justknobx")._("4690")){var t=await i();if(t==null)return;var n=await e.LSDatabaseSingleton,l=await Promise.all([o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.encrypted_backups)),o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.secure_encrypted_backups_client_state))]),s=l[0],u=l[1],c=(s==null?void 0:s.backupId)!=null&&(u==null?void 0:u.deviceId)!=null;c&&await o("MAWIndexedDBDeletion").deleteDB(t,"maw_v1"),a(u==null?void 0:u.backupId,u==null?void 0:u.deviceId,s==null?void 0:s.isUserOptedOut)}}catch(e){var d=r("getErrorSafe")(e);r("FBLogger")("messenger_e2ee_web").catching(d).mustfix("Error on logout while determining EB restore state or deleting msgr MAW db.")}})};return Promise.race([l(),r("asyncTimeout")(3e3)]).then(function(){return Promise.race([n().catch(function(e){return r("FBLogger")("messenger_web_account").catching(e).mustfix("Error in the Armadillo logout flow"),Promise.resolve()}),r("asyncTimeout")(3e3)])})}l.default=u}),98);
__d("getMDSBadgeColorStyle",["FBLogger","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e={blue:{backgroundColor:"xwnonoy",$$css:!0},blueAccent:{backgroundColor:"x1sfe9e",$$css:!0},darkGray:{backgroundColor:"xhazfnh",$$css:!0},gray:{backgroundColor:"x1d2osyd",$$css:!0},green:{backgroundColor:"xv9rvxn",$$css:!0},red:{backgroundColor:"x1cdvf7c",$$css:!0}};function s(t){switch(t){case"blue":return r("gkx")("5751")?e.blueAccent:e.blue;case"gray":return e.gray;case"darkGray":return e.darkGray;case"green":return e.green;case"red":return e.red;default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid color in getMDSBadgeColorStyle")}}l.default=s}),98);
__d("MDSBadge.react",["BaseStyledBadge.react","getMDSBadgeColorStyle","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["border","color","isProfileBadge"],s,u=s||(s=o("react")),c={borderDark:{borderTopColor:"x1o7swki",borderInlineEndColor:"xqm0i37",borderBottomColor:"x1bkzgmd",borderInlineStartColor:"x1r0oq8m",$$css:!0},borderWhite:{borderTopColor:"x6zyg47",borderInlineEndColor:"x1lu4ftm",borderBottomColor:"xpn8fn3",borderInlineStartColor:"x114g2xr",$$css:!0},isNoneProfileBadge:{marginInlineEnd:"x1xegmmw",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(16),a,i,l,s;n[0]!==t?(i=t.border,l=t.color,s=t.isProfileBadge,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s):(a=n[1],i=n[2],l=n[3],s=n[4]);var d=i===void 0?"none":i,m=l===void 0?"blue":l,p=s===void 0?!1:s,_=d!=="none",f;n[5]!==m?(f=r("getMDSBadgeColorStyle")(m),n[5]=m,n[6]=f):f=n[6];var g=!p&&c.isNoneProfileBadge,h=d==="white"&&c.borderWhite,y=d==="dark"&&c.borderDark,C;n[7]!==g||n[8]!==h||n[9]!==y?(C=[g,h,y],n[7]=g,n[8]=h,n[9]=y,n[10]=C):C=n[10];var b;return n[11]!==a||n[12]!==_||n[13]!==f||n[14]!==C?(b=u.jsx(r("BaseStyledBadge.react"),babelHelpers.extends({},a,{border:_,colorXStyle:f,xstyle:C})),n[11]=a,n[12]=_,n[13]=f,n[14]=C,n[15]=b):b=n[15],b}l.default=d}),98);
__d("MDSCheckbox.react",["FDSCheckbox.react"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("FDSCheckbox.react")}),98);
__d("MDSCodeBlock.react",["BaseTheme.react","FDSCode.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={dark:{"background-deemphasized":"rgba(255, 255, 255, 0.19)"},light:{"background-deemphasized":"rgba(0, 0, 0, 0.04)"},type:"VARIABLES"};function c(e){var t=o("react-compiler-runtime").c(3),n=e.children,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={className:"xljulmy x1i5p2am x1whfx0g xr2y4jy x1ihp6rs xz9dl7a xpdmqnj xsag5q8 x1g0dm76"},t[0]=a):a=t[0];var i;return t[1]!==n?(i=s.jsx(r("BaseTheme.react"),{config:u,children:s.jsx("div",babelHelpers.extends({},a,{children:s.jsx(r("FDSCode.react"),{color:"secondary",type:"body4",children:n})}))}),t[1]=n,t[2]=i):i=t[2],i}l.default=c}),98);
__d("MWAdminForBroadcastChannelUtils",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(12),a=(e||(e=r("useReStore")))(),l;n[0]!==a.tables.participants||n[1]!==t?(l=function(){return o("ReQL").fromTableAscending(a.tables.participants,["contactId","isAdmin"]).getKeyRange(t).filter(u)},n[0]=a.tables.participants,n[1]=t,n[2]=l):l=n[2];var s;n[3]!==a||n[4]!==t?(s=[a,t],n[3]=a,n[4]=t,n[5]=s):s=n[5];var c=o("ReQLSuspense").useFirst(l,s,i.id+":23"),d;n[6]!==c||n[7]!==a.tables.contacts?(d=function(){return(c==null?void 0:c.contactId)!=null?o("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(c.contactId):o("ReQL").empty()},n[6]=c,n[7]=a.tables.contacts,n[8]=d):d=n[8];var m=c==null?void 0:c.contactId,p;return n[9]!==a||n[10]!==m?(p=[m,a],n[9]=a,n[10]=m,n[11]=p):p=n[11],o("ReQLSuspense").useFirst(d,p,i.id+":31")}function u(e){var t=e.isAdmin;return!!t}function c(t){var n=o("react-compiler-runtime").c(6),a=(e||(e=r("useReStore")))(),l;n[0]!==a.tables.participants||n[1]!==t?(l=function(){return o("ReQL").fromTableAscending(a.tables.participants,["contactId","isAdmin"]).getKeyRange(t).filter(d)},n[0]=a.tables.participants,n[1]=t,n[2]=l):l=n[2];var s;n[3]!==a||n[4]!==t?(s=[a,t],n[3]=a,n[4]=t,n[5]=s):s=n[5];var u=o("ReQLSuspense").useFirst(l,s,i.id+":45");return u==null?void 0:u.contactId}function d(e){var t=e.isAdmin;return!!t}l.useFetchBroadcastChannelCreator=s,l.useFetchBroadcastChannelCreatorId=c}),98);
__d("MWCMGetGender",["IntlVariations","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){if(t==null)return r("IntlVariations").GENDER_UNKNOWN;switch((e||(e=o("LSIntEnum"))).toNumber(t)){case 1:return r("IntlVariations").GENDER_FEMALE;case 2:return r("IntlVariations").GENDER_MALE;case 3:case 0:default:return r("IntlVariations").GENDER_UNKNOWN}}l.getGender=s}),98);
__d("MWCMRequestToJoinUtils",["fbt","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure","LSOptimisticUpdateThreadJoinRequestApprovalSettingStoredProcedure","LSThreadBitOffset","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(e){var t,n,r=(c||(c=o("I64"))).to_int32((t=e.pendingJoinRequestsCount)!=null?t:(c||(c=o("I64"))).zero),a=o("LSThreadBitOffset").has(94,e)||(c||(c=o("I64"))).to_int32((n=e.joinRequestApprovalSetting)!=null?n:(c||(c=o("I64"))).minus_one)===1;return e.needsAdminApprovalForNewParticipant===!0?a&&r>0?s._(/*BTDS*/"_j{\"*\":\"{number} requests\",\"_1\":\"1 request\"}",[s._plural(r,"number")]):s._(/*BTDS*/"On"):s._(/*BTDS*/"Off")}function m(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),l,s;return n[0]!==a||n[1]!==t?(l=function(n){o("GroupsCometChatsEngagementLogger").log({action:"unknown",client_extras:{callsite:"MWInboxInfoGroupOptionsSection"},event:"update_admin_approval_setting",source:"unknown",surface:"unknown",thread_id:String(t)}),r("promiseDone")(a.runInTransaction(function(e){return r("LSOptimisticSetNeedsAdminApprovalForNewParticipantStoredProcedure")(r("LSFactory")(e),{needsAdminApprovalForNewParticipant:n,threadKey:t})},"readwrite",void 0,void 0,i.id+":88"))},s=[a,t],n[0]=a,n[1]=t,n[2]=l,n[3]=s):(l=n[2],s=n[3]),o("Int64Hooks").useCallbackInt64(l,s)}function p(t){var n=o("react-compiler-runtime").c(4),a=(e||(e=r("useReStore")))(),l,s;return n[0]!==a||n[1]!==t?(l=function(n){r("promiseDone")(a.runInTransaction(function(e){return r("LSOptimisticUpdateThreadJoinRequestApprovalSettingStoredProcedure")(r("LSFactory")(e),{joinRequestApprovalSetting:n?(u||(u=o("LSIntEnum"))).ofNumber(1):(u||(u=o("LSIntEnum"))).ofNumber(0),threadKey:t})},"readwrite",void 0,void 0,i.id+":113"))},s=[a,t],n[0]=a,n[1]=t,n[2]=l,n[3]=s):(l=n[2],s=n[3]),o("Int64Hooks").useCallbackInt64(l,s)}l.memberRequestsMenuItemSubtitle=d,l.useSetNeedsAdminApprovalForNewParticipant=m,l.useSetCanMembersApproveJoinRequests=p}),226);
__d("MWThemeUtils",["I64","Int64Hooks","LSFactory","LSIntEnum","LSOptimisticUpdateThreadThemeStoredProcedure","MessengerThreadThemeGradientType","ReQL","ReQLSuspense","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(e){var t=o("react-compiler-runtime").c(7),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e==null||e.fbid==null?o("ReQL").empty():o("ReQL").fromTableAscending(n.tables.gradient_colors).getKeyRange(e==null?void 0:e.fbid)},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useArray(a,l,i.id+":30");if(e==null){var c;return t[4]===Symbol.for("react.memo_cache_sentinel")?(c=[],t[4]=c):c=t[4],c}var m;return t[5]!==s?(m=s.filter(d),t[5]=s,t[6]=m):m=t[6],m}function d(t){return(e||(e=o("I64"))).equal(t.type_,(s||(s=o("LSIntEnum"))).ofNumber(r("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_OUTBOUND))}function m(e){var t=o("react-compiler-runtime").c(4),n=(u||(u=r("useReStore")))(),a,l;return t[0]!==n||t[1]!==e?(a=function(o){e!=null&&o!=null&&r("promiseDone")(n.runInTransaction(function(t){return r("LSOptimisticUpdateThreadThemeStoredProcedure")(r("LSFactory")(t),{themeFbid:o,threadKey:e.threadKey})},"readwrite",void 0,void 0,i.id+":61"))},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]),o("Int64Hooks").useCallbackInt64(a,l)}l.useMWOutgoingGradientColors=c,l.useUpdateThreadTheme=m}),98);
__d("MWColorWheelIcon.react",["CometSVGIcon.react","I64","MWPColorUtils","MWThemeUtils","gkx","react","react-compiler-runtime","useSetAttributeRef"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useId,d=r("gkx")("23219")?"8":"10";function m(e){var t=o("react-compiler-runtime").c(19),n=e.size,a=e.threadTheme,i=o("MWThemeUtils").useMWOutgoingGradientColors(a),l,s;if(t[0]!==i||t[1]!==a.fallbackColor){var m=[].concat(i).sort(_).map(p);m.length===0&&m.push(o("MWPColorUtils").int64ToHex(a.fallbackColor)),m.length===1&&m.push(m[0]),l="rotate(90)",s=m.map(function(e,t){var n=100/(m.length-1),r=String(Math.imul(t,n))+"%";return u.jsx("stop",{offset:r,stopColor:e},String(t))}),t[0]=i,t[1]=a.fallbackColor,t[2]=l,t[3]=s}else l=t[2],s=t[3];var f;t[4]!==l||t[5]!==s?(f=u.jsx("linearGradient",{gradientTransform:l,children:s}),t[4]=l,t[5]=s,t[6]=f):f=t[6];var g=f,h=c(),y=r("useSetAttributeRef")("id",h),C=r("useSetAttributeRef")("mask","url(#"+h+")"),b="mw_edit_theme_svg:"+a.accessibilityLabel,v,S;t[7]===Symbol.for("react.memo_cache_sentinel")?(v=u.jsx("rect",{fill:"white",height:"100%",width:"100%"}),S=u.jsx("circle",{cx:"10",cy:"10",fill:"black",r:"3"}),t[7]=v,t[8]=S):(v=t[7],S=t[8]);var R;t[9]!==y?(R=u.jsx("defs",{children:u.jsxs("mask",{ref:y,children:[v,S]})}),t[9]=y,t[10]=R):R=t[10];var L;t[11]!==C?(L=u.jsx("circle",{cx:"10",cy:"10",r:d,ref:C}),t[11]=C,t[12]=L):L=t[12];var E;return t[13]!==g||t[14]!==n||t[15]!==R||t[16]!==L||t[17]!==b?(E=u.jsxs(r("CometSVGIcon.react"),{color:g,"data-testid":void 0,size:n,viewBox:"0 0 20 20",children:[R,L]}),t[13]=g,t[14]=n,t[15]=R,t[16]=L,t[17]=b,t[18]=E):E=t[18],E}function p(e){return o("MWPColorUtils").int64ToHex(e.color)}function _(e,t){return(s||(s=o("I64"))).compare(e.gradientIndex,t.gradientIndex)}l.MWColorWheelIcon=m}),98);
__d("MWEBRestoreInThreadScrollPersistentBannerWrapperWithEBCheck.react",["cr:9932"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:9932")}),98);
__d("MWEmoji.react",["CometEmoji.react","EmojiRenderer","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(9),n=e.emoji,a=e.size,i=e.testid,l;t[0]!==n?(l=o("EmojiRenderer").parse(n),t[0]=n,t[1]=l):l=t[1];var u=l,c=u[0],d;t[2]!==n||t[3]!==c?(d=c!=null?c.emoji:[n],t[2]=n,t[3]=c,t[4]=d):d=t[4];var m=d,p;return t[5]!==a||t[6]!==m||t[7]!==i?(p=s.jsx(r("CometEmoji.react"),{emoji:m,size:a,testid:void 0}),t[5]=a,t[6]=m,t[7]=i,t[8]=p):p=t[8],p}l.default=c}),98);
__d("MWGroupMembershipListItemWrapper",["MWGroupMembershipListItem"],(function(t,n,r,o,a,i,l){"use strict";function e(e){switch(e.tag){case"ParticipantAndContact":return{contact:e.value[1],participant:e.value[0],type:o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact};case"CommunityMember":return{communityMember:e.value,type:o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember};case"ServerSearchResult":return{serverSearchResult:e.value,type:o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult};case"BroadcastChannelParticipant":return{participant:e.value,type:o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.BroadcastChannelParticipant}}}l.tToRE=e}),98);
__d("MWInboxHeaderDetailsPressable.react",["fbt","CurrentEnvironment","I64","LSContactLink.react","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWAdminForBroadcastChannelUtils","MWLSGroupMembershipDialog.entrypoint","MWPActor.react","MWXPressable.react","MWXTooltip.react","ReQLSuspense","XCometProfileControllerRouteBuilder","queryMWLSOtherParticipantContact","react","react-compiler-runtime","useCommunityFolder","useMWAriaLabelForThread","useMWXEntryPointDialog","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=u||(u=o("react")),m=u.useRef,p={title:{maxWidth:"x193iq5w",$$css:!0}};function _(e){var t=o("react-compiler-runtime").c(16),n=e.children,a=e.isContainerPressable,i=e.thread,l=i.parentThreadKey,u=i.threadKey,_=i.threadName,f=i.threadType,g=m(null),h;t[0]!==l?(h={parentThreadKey:l},t[0]=l,t[1]=h):h=t[1];var y=r("useCommunityFolder")(h),C;t[2]!==u||t[3]!==_||t[4]!==f?(C={threadKey:u,threadName:_,threadType:f},t[2]=u,t[3]=_,t[4]=f,t[5]=C):C=t[5];var b=r("useMWAriaLabelForThread")(C),v;if(t[6]!==(y==null?void 0:y.fbGroupId)){var S;v=(c||(c=o("I64"))).to_string((S=y==null?void 0:y.fbGroupId)!=null?S:(c||(c=o("I64"))).zero),t[6]=y==null?void 0:y.fbGroupId,t[7]=v}else v=t[7];var R;t[8]!==v?(R={groupID:v},t[8]=v,t[9]=R):R=t[9];var L=r("useMWXEntryPointDialog")(r("MWLSGroupMembershipDialog.entrypoint"),R),E=L[0],k;return t[10]!==b||t[11]!==n||t[12]!==y||t[13]!==a||t[14]!==E?(k=a?d.jsx(r("MWXPressable.react"),{"aria-label":b,onPress:function(){return E({folder:y})},overlayRadius:"normal",ref:g,xstyle:p.title,children:n}):d.jsx(r("MWXPressable.react"),{"aria-label":b,expanding:!0,onPress:function(){return E({folder:y})},overlayRadius:"normal",ref:g,xstyle:p.title,children:d.jsx(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:s._(/*BTDS*/"Members"),children:n})}),t[10]=b,t[11]=n,t[12]=y,t[13]=a,t[14]=E,t[15]=k):k=t[15],k}function f(t){var n=o("react-compiler-runtime").c(13),a=t.children,l=t.isContainerPressable,s=t.thread,u=s.threadKey,c=s.threadType,m=(e||(e=r("useReStore")))(),p=o("MWPActor.react").useActor(),_,f;n[0]!==p||n[1]!==m||n[2]!==u||n[3]!==c?(_=function(){return r("queryMWLSOtherParticipantContact")(m,u,c,p,["name","blockedByViewerStatus","contactTypeExact","id","secondaryName"])},f=[m,p,u,c],n[0]=p,n[1]=m,n[2]=u,n[3]=c,n[4]=_,n[5]=f):(_=n[4],f=n[5]);var g=o("ReQLSuspense").useFirst(_,f,i.id+":125"),h=o("LSThreadBitOffset").has(8,s);if(g!=null&&h){var y;n[6]!==a||n[7]!==g||n[8]!==l?(y=l?a:d.jsx(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:g.name,children:a}),n[6]=a,n[7]=g,n[8]=l,n[9]=y):y=n[9];var C;return n[10]!==g||n[11]!==y?(C=d.jsx(r("LSContactLink.react"),{contact:g,isText:!1,testid:void 0,children:y}),n[10]=g,n[11]=y,n[12]=C):C=n[12],C}return a}function g(e){var t=o("react-compiler-runtime").c(12),n=e.children,a=e.isContainerPressable,i=e.thread,l=i.threadKey,s=i.threadName,u=i.threadType,m=o("MWAdminForBroadcastChannelUtils").useFetchBroadcastChannelCreator(l),_;t[0]!==l||t[1]!==s||t[2]!==u?(_={threadKey:l,threadName:s,threadType:u},t[0]=l,t[1]=s,t[2]=u,t[3]=_):_=t[3];var f=r("useMWAriaLabelForThread")(_);if(m==null)return n;var g;if(t[4]!==m.id){var h;g=(h=r("XCometProfileControllerRouteBuilder").buildUri({id:(c||(c=o("I64"))).to_string(m.id)}).setDomain("www.facebook.com"))==null||(h=h.setProtocol("https"))==null?void 0:h.toString(),t[4]=m.id,t[5]=g}else g=t[5];var y=g,C=r("CurrentEnvironment").messengerdotcom?"_blank":"_self";if(a){var b;t[6]!==y?(b={target:C,url:y},t[6]=y,t[7]=b):b=t[7];var v;return t[8]!==f||t[9]!==n||t[10]!==b?(v=d.jsx(r("MWXPressable.react"),{"aria-label":f,linkProps:b,overlayRadius:"normal",xstyle:p.title,children:n}),t[8]=f,t[9]=n,t[10]=b,t[11]=v):v=t[11],v}return n}function h(e){var t=o("react-compiler-runtime").c(12),n=e.children,r=e.isContainerPressable,a=e.thread;if(o("LSMessagingThreadTypeUtil").isBusinessSupportThread(a.threadSubtype))return n;if(o("LSMessagingThreadTypeUtil").isOneToOne(a.threadType)){var i;return t[0]!==n||t[1]!==r||t[2]!==a?(i=d.jsx(f,{isContainerPressable:r,thread:a,children:n}),t[0]=n,t[1]=r,t[2]=a,t[3]=i):i=t[3],i}var l=o("LSThreadBitOffset").has(26,a);if(o("LSMessagingThreadTypeUtil").isGroup(a.threadType)&&l){var s;return t[4]!==n||t[5]!==r||t[6]!==a?(s=d.jsx(_,{isContainerPressable:r,thread:a,children:n}),t[4]=n,t[5]=r,t[6]=a,t[7]=s):s=t[7],s}if(o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)){var u;return t[8]!==n||t[9]!==r||t[10]!==a?(u=d.jsx(g,{isContainerPressable:r,thread:a,children:n}),t[8]=n,t[9]=r,t[10]=a,t[11]=u):u=t[11],u}return n}l.default=h}),226);
__d("MWInboxHeaderDetailsContainer.react",["CometPlaceholder.react","Int64Hooks","LSThreadBitOffset","MWInboxHeaderDetails.react","MWInboxHeaderDetailsPressable.react","MWThreadPicture.react","MWXRow.react","MWXRowItem.react","MWXTooltip.react","ReQL","ReQLSuspense","getMWV2HeaderSettingsPopoverTooltip","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.memo,d={detailsContainer:{flexGrow:"x1iyjqo2",paddingInlineStart:"xyiysdx",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(25),a=t.badgeSize,l=t.isContainerPressable,s=t.photoSize,c=t.threadKey,m=t.threadNameSize,p=a===void 0?10:a,_=l===void 0?!0:l,f=s===void 0?40:s,g=m===void 0?"headlineEmphasized3":m,h=(e||(e=r("useReStore")))(),y;n[0]!==h.tables.threads||n[1]!==c?(y=function(){return o("ReQL").fromTableAscending(h.tables.threads,["threadKey","threadType","muteCallsExpireTimeMs","muteExpireTimeMs","ongoingCallState","cannotReplyReason","parentThreadKey","threadName","threadSubtype","ongoingCallTimestampMs","nullstateDescriptionText1"].concat(o("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(c)},n[0]=h.tables.threads,n[1]=c,n[2]=y):y=n[2];var C;n[3]!==h||n[4]!==c?(C=[h,c],n[3]=h,n[4]=c,n[5]=C):C=n[5];var b=o("ReQLSuspense").useFirst(y,C,i.id+":52");if(b==null)return null;var v;n[6]!==b.threadType?(v=r("getMWV2HeaderSettingsPopoverTooltip")({threadType:b.threadType}),n[6]=b.threadType,n[7]=v):v=n[7];var S=v,R;n[8]!==p||n[9]!==f||n[10]!==c?(R=u.jsx(r("MWThreadPicture.react"),{badgeSize:p,photoSize:f,threadKey:c,withAltText:!1}),n[8]=p,n[9]=f,n[10]=c,n[11]=R):R=n[11];var L;n[12]!==_||n[13]!==R?(L=u.jsx(r("MWXRowItem.react"),{"aria-hidden":_,children:R}),n[12]=_,n[13]=R,n[14]=L):L=n[14];var E=L,k;n[15]!==_||n[16]!==b||n[17]!==g||n[18]!==S?(k=u.jsx(r("MWXRowItem.react"),{expanding:!0,xstyle:d.detailsContainer,children:_?u.jsx(r("MWInboxHeaderDetails.react"),{thread:b,threadNameSize:g}):u.jsx(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:S,children:u.jsx(r("MWInboxHeaderDetails.react"),{thread:b,threadNameSize:g})})}),n[15]=_,n[16]=b,n[17]=g,n[18]=S,n[19]=k):k=n[19];var I=k,T;return n[20]!==_||n[21]!==b||n[22]!==E||n[23]!==I?(T=u.jsx(r("MWXRow.react"),{expanding:!0,paddingHorizontal:0,paddingVertical:0,testid:void 0,verticalAlign:"center",children:u.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWInboxHeaderDetailsContainer",children:_?u.jsx(r("MWInboxHeaderDetailsPressable.react"),{isContainerPressable:_,thread:b,children:u.jsxs(r("MWXRow.react"),{paddingHorizontal:0,paddingTop:0,paddingVertical:0,children:[E,I]})}):u.jsxs(u.Fragment,{children:[u.jsx(r("MWInboxHeaderDetailsPressable.react"),{isContainerPressable:_,thread:b,children:E}),I]})})}),n[20]=_,n[21]=b,n[22]=E,n[23]=I,n[24]=T):T=n[24],T}var p=c(m,o("Int64Hooks").mostlyShallowEqual);l.default=p}),98);
__d("MWInboxInfoButton.react",["MWXListCellPressable.react","MWXText.react","MWXTextPairing.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("gkx")("23219")&&r("gkx")("23433")?"contained":"normal";function c(e){var t=o("react-compiler-runtime").c(23),n=e.addOnEnd,a=e.addOnStart,i=e.addOnStartStyle,l=e.disabled,c=e.label,d=e.linkProps,m=e.loggingEvent,p=e.onHoverIn,_=e.onHoverOut,f=e.onPress,g=e.ref,h=e.subLabel,y=e.subLabelElement,C=e.testid,b=(i!=null?i:u)==="contained",v;t[0]!==a||t[1]!==b?(v=a!=null&&b?s.jsx("div",{className:"x6s0dn4 x1qhmfi1 x1c9tyrk xeusxvb x1pahc9y x1ertn4p x78zum5 x1fgtraw xl56j7k x1264ykn",children:a}):a,t[0]=a,t[1]=b,t[2]=v):v=t[2];var S=v,R;t[3]!==h||t[4]!==y?(R=h!=null?s.jsx(r("MWXText.react"),{type:"meta3",children:h}):y!=null?s.jsx(r("MWXText.react"),{type:"meta3",children:y}):void 0,t[3]=h,t[4]=y,t[5]=R):R=t[5];var L=R,E;t[6]!==c?(E=s.jsx(r("MWXText.react"),{type:"headline4",children:c}),t[6]=c,t[7]=E):E=t[7];var k;t[8]!==L||t[9]!==E?(k=s.jsx(r("MWXTextPairing.react"),{headline:E,level:4,meta:L}),t[8]=L,t[9]=E,t[10]=k):k=t[10];var I;return t[11]!==n||t[12]!==S||t[13]!==l||t[14]!==d||t[15]!==m||t[16]!==p||t[17]!==_||t[18]!==f||t[19]!==g||t[20]!==k||t[21]!==C?(I=s.jsx(r("MWXListCellPressable.react"),{addOnEnd:n,addOnStart:S,addOnStartVerticalAlign:"top",content:k,disabled:l,linkProps:d,loggingEvent:m,onHoverIn:p,onHoverOut:_,onPress:f,ref:g,size:"medium",testid:void 0}),t[11]=n,t[12]=S,t[13]=l,t[14]=d,t[15]=m,t[16]=p,t[17]=_,t[18]=f,t[19]=g,t[20]=k,t[21]=C,t[22]=I):I=t[22],I}l.default=c}),98);
__d("MWInboxInfoMembersSectionStorageKey",[],(function(t,n,r,o,a,i){"use strict";var e="__MWInboxInfoMembersSection.isOpen__";i.storageKey=e}),66);
__d("MessengerRestrictFirstTimeNuxDialogContainer.react",["Int64Hooks","JSResourceForInteraction","ReQL","promiseDone","react","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c=s.useRef,d=r("JSResourceForInteraction")("MWRestrictFirstTimeNuxDialog.react").__setRef("MessengerRestrictFirstTimeNuxDialogContainer.react");function m(t){var n=t.children,a=t.dialogProps,i=a.onPress,l=a.restrictedUserId,s=(e||(e=r("useReStore")))(),u=c(null),m=r("useMWXLazyDialog")(d),p=m[0],_=o("Int64Hooks").useCallbackInt64(function(){r("promiseDone")((async function(){var e=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(s.tables.contacts).getKeyRange(l));e!=null&&p({onPress:function(){i()},restrictedUser:e})})())},[s,l,p,i]);return n(_,u)}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),98);
__d("MWRestrictDialogActionToggle.react",["MessengerRestrictFirstTimeNuxDialogContainer.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(8),n=e.children,a=e.dialogProps;if(a.isRestricted){var u;return t[5]!==n||t[6]!==a.onPress?(u=n(a.onPress),t[5]=n,t[6]=a.onPress,t[7]=u):u=t[7],u}else{var i;t[0]!==n?(i=function(t,r){return n(t)},t[0]=n,t[1]=i):i=t[1];var l;return t[2]!==a||t[3]!==i?(l=s.jsx(r("MessengerRestrictFirstTimeNuxDialogContainer.react"),{dialogProps:a,children:i}),t[2]=a,t[3]=i,t[4]=l):l=t[4],l}}l.default=u}),98);
__d("MWXIconMenuItemMessageCross",["MWXSvgIcon","SVGIcon","cr:22732","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgMenuItemIcon(o("SVGIcon").svgIcon(n("cr:22732")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconMessageCross",["MWXSvgIcon","SVGIcon","cr:22396","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22396")),r("gkx")("23219"));l.default=e}),98);
__d("useMAWOptimisticUpdateSecureRestrict",["I64","LSContactMessengerRestrictAction","LSIntEnum","LSThreadBitOffset","Promise","ReQL","ReQLSuspense","clearedMAWMnRestrictCapabilities","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=[35,19,56,24,25];function m(){var t=o("react-compiler-runtime").c(2),a=(c||(c=r("useReStore")))(),l;return t[0]!==a?(l=function(l,c){r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.participants).filter(function(e){return(u||(u=o("I64"))).equal(e.contactId,l)}).map(function(e){return o("ReQLSuspense").first(o("ReQL").fromTableAscending(a.tables.threads).getKeyRange(e.threadKey),i.id+":49")}).filter(p)).then(function(t){if(t==null)return(e||(e=n("Promise"))).resolve();var l=(u||(u=o("I64"))).equal(c,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactMessengerRestrictAction").RESTRICT))?o("LSThreadBitOffset").clear(r("clearedMAWMnRestrictCapabilities"),t.capabilities,t.capabilities2,t.capabilities3,t.capabilities4,t.capabilities5):o("LSThreadBitOffset").set(d,t.capabilities,t.capabilities2,t.capabilities3,t.capabilities4,t.capabilities5),m=l[0],p=l[1],_=l[2],f=l[3],g=l[4];return r("promiseDone")(a.runInTransaction(function(e){var n=babelHelpers.extends({},t,{capabilities:m,capabilities2:p,capabilities3:_,capabilities4:f,capabilities5:g});return e.threads.put(n)},"readwrite",void 0,void 0,i.id+":98")),(e||(e=n("Promise"))).resolve()}))},t[0]=a,t[1]=l):l=t[1],l}function p(e){return e!=null?(u||(u=o("I64"))).equal(e.threadType,(s||(s=o("LSIntEnum"))).ofNumber(15)):!1}l.default=m}),98);
__d("useMWLSMessengerRestrict",["I64","Int64Hooks","LSContactMessengerRestrictAction","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSSetMessengerRestrictStoredProcedure","MWBlockUtils","MWWellbeingQPLLogEndUtils","promiseDone","react-compiler-runtime","requireDeferred","useMAWOptimisticUpdateSecureRestrict","useMWMessengerResetBlockOrRestrictWC","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c=r("requireDeferred"))("MessengerWellbeingRestrictFailedFalcoEvent").__setRef("useMWLSMessengerRestrict"),m=c("MessengerWellbeingRestrictSucceededFalcoEvent").__setRef("useMWLSMessengerRestrict"),p=c("MessengerWellbeingUnrestrictFailedFalcoEvent").__setRef("useMWLSMessengerRestrict"),_=c("MessengerWellbeingUnrestrictSucceededFalcoEvent").__setRef("useMWLSMessengerRestrict");function f(e,t,n,a,i,l){var c=o("LSMessagingThreadTypeUtil").isArmadilloSecure(n),d=(s||(s=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(15)),p=d?17:1;(s||(s=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactMessengerRestrictAction").UNRESTRICT))?_.onReady(function(e){return e.log(function(){return{data:{entry_point:l,request_id:i,source:p,source_owner:0,source_type:0},other_user:{id:(s||(s=o("I64"))).to_string(t)},thread:{id:c?"-1":(s||(s=o("I64"))).to_string(a)}}})}):m.onReady(function(e){return e.log(function(){return{data:{entry_point:l,request_id:i,source:p,source_owner:0,source_type:0},other_user:{id:(s||(s=o("I64"))).to_string(t)},thread:{id:c?"-1":(s||(s=o("I64"))).to_string(a)}}})})}function g(e,t,n,a,i,l){var c=o("LSMessagingThreadTypeUtil").isArmadilloSecure(n),m=(s||(s=o("I64"))).equal(n,(u||(u=o("LSIntEnum"))).ofNumber(15)),_=m?17:1;(s||(s=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("LSContactMessengerRestrictAction").UNRESTRICT))?p.onReady(function(e){return e.log(function(){return{data:{entry_point:l,request_id:i,source:_,source_owner:0,source_type:0},other_user:{id:(s||(s=o("I64"))).to_string(t)},thread:{id:c?"-1":(s||(s=o("I64"))).to_string(a)}}})}):d.onReady(function(e){return e.log(function(){return{data:{entry_point:l,request_id:i,source:_,source_owner:0,source_type:0},other_user:{id:(s||(s=o("I64"))).to_string(t)},thread:{id:c?"-1":(s||(s=o("I64"))).to_string(a)}}})})}function h(t,n,a,l,s){var u=o("react-compiler-runtime").c(20),c=(e||(e=r("useReStore")))(),d=r("useMAWOptimisticUpdateSecureRestrict")(),m=r("useMWMessengerResetBlockOrRestrictWC")(),p=o("MWBlockUtils").useClearSearchTables(),_=o("MWWellbeingQPLLogEndUtils").useLogRestrictEnd(t),h;u[0]!==p||u[1]!==t||u[2]!==_||u[3]!==s||u[4]!==d||u[5]!==l||u[6]!==m||u[7]!==c||u[8]!==a||u[9]!==n?(h=function(o){r("promiseDone")(c.runInTransaction(function(e){return r("LSSetMessengerRestrictStoredProcedure")(r("LSFactory")(e),{messengerRestrictAction:o,requestId:l,restricteeId:t})},"readwrite",void 0,void 0,i.id+":190"),function(){return d(t,o),m(t),p(),_(),f(o,t,n,a,l,s)},function(){return g(o,t,n,a,l,s)})},u[0]=p,u[1]=t,u[2]=_,u[3]=s,u[4]=d,u[5]=l,u[6]=m,u[7]=c,u[8]=a,u[9]=n,u[10]=h):h=u[10];var y;return u[11]!==t||u[12]!==s||u[13]!==d||u[14]!==l||u[15]!==m||u[16]!==c||u[17]!==a||u[18]!==n?(y=[c,t,l,d,m,n,a,s],u[11]=t,u[12]=s,u[13]=d,u[14]=l,u[15]=m,u[16]=c,u[17]=a,u[18]=n,u[19]=y):y=u[19],o("Int64Hooks").useCallbackInt64(h,y)}l.default=h}),98);
__d("useMWRestrictContactOneOnOneThread",["CurrentEnvironment","I64","LSContactMessengerRestrictAction","LSIntEnum","LSMessagingThreadTypeUtil","MWChatStateActions","MWChatStateV2.react","MWLSThreadDisplayContext","MWPBumpEntityKey","react-compiler-runtime","requireDeferred","useCometRouterDispatcher","useMWLSMessengerRestrict","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("requireDeferred")("MessengerWellbeingRestrictTappedFalcoEvent").__setRef("useMWRestrictContactOneOnOneThread"),c=r("requireDeferred")("MessengerWellbeingUnrestrictTappedFalcoEvent").__setRef("useMWRestrictContactOneOnOneThread");function d(t,n,r,a,i,l){var d=o("LSMessagingThreadTypeUtil").isArmadilloSecure(a),m=(e||(e=o("I64"))).equal(a,(s||(s=o("LSIntEnum"))).ofNumber(15)),p=m?17:1;t?c.onReady(function(t){return t.log(function(){return{data:{entry_point:l,request_id:n,source:p,source_owner:0,source_type:0},other_user:{id:(e||(e=o("I64"))).to_string(r)},thread:{id:d?"-1":(e||(e=o("I64"))).to_string(i)}}})}):u.onReady(function(t){return t.log(function(){return{data:{entry_point:l,request_id:n,source:p,source_owner:0,source_type:0},other_user:{id:(e||(e=o("I64"))).to_string(r)},thread:{id:d?"-1":(e||(e=o("I64"))).to_string(i)}}})})}function m(e,t,n,a,i){var l=o("react-compiler-runtime").c(11),u;l[0]===Symbol.for("react.memo_cache_sentinel")?(u=r("uuidv4")(),l[0]=u):u=l[0];var c=u,m=r("useMWLSMessengerRestrict")(e,t,n,c,a),p=r("useCometRouterDispatcher")(),_=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),f=o("MWChatStateV2.react").useDispatch(),g;return l[1]!==p||l[2]!==e||l[3]!==f||l[4]!==_||l[5]!==i||l[6]!==a||l[7]!==m||l[8]!==n||l[9]!==t?(g=function(){if(d(i,c,e,t,n,a),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_wellbeing",i?"unrestrict":"restrict"),m(i?(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactMessengerRestrictAction").UNRESTRICT):(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactMessengerRestrictAction").RESTRICT)),!i&&_==="Inbox"&&p!=null&&p.go(r("CurrentEnvironment").messengerdotcom?"/":"/messages",{}),!i)return f(o("MWChatStateActions").closeTabByThreadKey(Date.now(),n))},l[1]=p,l[2]=e,l[3]=f,l[4]=_,l[5]=i,l[6]=a,l[7]=m,l[8]=n,l[9]=t,l[10]=g):g=l[10],g}l.default=m}),98);
__d("MWInboxInfoMessengerRestrict.react",["fbt","I64","LSContactBitOffset","LSContactMessengerRestrictAction","LSIntEnum","MWInboxInfoButton.react","MWPBumpEntityKey","MWRestrictDialogActionToggle.react","MWWellbeingQPLLogStartAndCancelUtils","MWXIconForListCell.react","MWXIconMenuItemMessageCross","MWXIconMessageCross","MWXMenuItem.react","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWRestrictContactOneOnOneThread","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react"));function p(e){var t=o("react-compiler-runtime").c(15),n=e.buttonSource,a=e.buttonTitle,i=e.isPendingState,l=e.isRestricted,s=e.loggingEntryPoint,u=e.onPress,c;t[0]!==l||t[1]!==s||t[2]!==u?(c=function(){u(),o("MWWellbeingQPLLogStartAndCancelUtils").logRestrictStart(l,s),l||o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_wellbeing","restrict_click")},t[0]=l,t[1]=s,t[2]=u,t[3]=c):c=t[3];var d=c;switch(n){case"CHAT_TAB_SETTINGS":{var p;return t[4]!==a||t[5]!==i||t[6]!==d?(p=m.jsx(r("MWXMenuItem.react"),{disabled:i,icon:r("MWXIconMenuItemMessageCross"),onClick:d,primaryText:a,testid:void 0}),t[4]=a,t[5]=i,t[6]=d,t[7]=p):p=t[7],p}default:{var _=i?"disabled":"primary",f;t[8]!==_?(f=m.jsx(r("MWXIconForListCell.react"),{color:_,icon:r("MWXIconMessageCross")}),t[8]=_,t[9]=f):f=t[9];var g;return t[10]!==a||t[11]!==i||t[12]!==d||t[13]!==f?(g=m.jsx(r("MWInboxInfoButton.react"),{addOnStart:f,disabled:i,label:a,onPress:d,testid:void 0}),t[10]=a,t[11]=i,t[12]=d,t[13]=f,t[14]=g):g=t[14],g}}}function _(t){var n=o("react-compiler-runtime").c(29),a=t.buttonSource,l=t.contactId,d=t.loggingEntryPoint,_=t.threadKey,f=t.threadType,g=(e||(e=r("useReStore")))(),h;n[0]!==l||n[1]!==g.tables.contacts?(h=function(){return o("ReQL").fromTableAscending(g.tables.contacts,["id","pendingMessengerRestrictAction"].concat(o("LSContactBitOffset").contactCapabilityFields)).getKeyRange(l)},n[0]=l,n[1]=g.tables.contacts,n[2]=h):h=n[2];var y;n[3]!==l||n[4]!==g?(y=[l,g],n[3]=l,n[4]=g,n[5]=y):y=n[5];var C=o("ReQLSuspense").useFirst(h,y,i.id+":91"),b;n[6]!==C?(b=C!=null?o("LSContactBitOffset").has(66,C):!1,n[6]=C,n[7]=b):b=n[7];var v=b,S;if(n[8]!==(C==null?void 0:C.pendingMessengerRestrictAction)){var R;S=(R=C==null?void 0:C.pendingMessengerRestrictAction)!=null?R:(u||(u=o("I64"))).of_string("10"),n[8]=C==null?void 0:C.pendingMessengerRestrictAction,n[9]=S}else S=n[9];var L=S,E;n[10]!==L?(E=(u||(u=o("I64"))).equal(L,(c||(c=o("LSIntEnum"))).ofNumber(r("LSContactMessengerRestrictAction").RESTRICT))||(u||(u=o("I64"))).equal(L,(c||(c=o("LSIntEnum"))).ofNumber(r("LSContactMessengerRestrictAction").UNRESTRICT)),n[10]=L,n[11]=E):E=n[11];var k=E,I;n[12]!==v?(I=v?s._(/*BTDS*/"Unrestrict"):s._(/*BTDS*/"Restrict"),n[12]=v,n[13]=I):I=n[13];var T=I,D;n[14]!==L?(D=(u||(u=o("I64"))).equal(L,(c||(c=o("LSIntEnum"))).ofNumber(r("LSContactMessengerRestrictAction").UNRESTRICT))?s._(/*BTDS*/"Unrestricting..."):s._(/*BTDS*/"Restricting..."),n[14]=L,n[15]=D):D=n[15];var x=D,$=r("useMWRestrictContactOneOnOneThread")(l,f,_,d,v),P=k?x:T;if(C!=null){var N;n[16]!==C.id||n[17]!==v||n[18]!==$?(N={isRestricted:v,onPress:$,restrictedUserId:C.id},n[16]=C.id,n[17]=v,n[18]=$,n[19]=N):N=n[19];var M;n[20]!==a||n[21]!==P||n[22]!==k||n[23]!==v||n[24]!==d?(M=function(t){return m.jsx(p,{buttonSource:a,buttonTitle:P,isPendingState:k,isRestricted:v,loggingEntryPoint:d,onPress:t})},n[20]=a,n[21]=P,n[22]=k,n[23]=v,n[24]=d,n[25]=M):M=n[25];var w;return n[26]!==N||n[27]!==M?(w=m.jsx(r("MWRestrictDialogActionToggle.react"),{dialogProps:N,children:M}),n[26]=N,n[27]=M,n[28]=w):w=n[28],w}else return null}l.default=_}),226);
__d("MWInboxInfoNotifications.react",["fbt","GroupsCometChatsThreadNotificationSettingsDialog.entrypoint","JSResourceForInteraction","LSMessagingThreadTypeUtil","MessengerMuteUtils","gkx","mwCMIsAnyCMThread","react","useMWChatUnmuteThread","useMWPIsThreadMuted","useMWXEntryPointDialog","useMWXLazyDialog"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e.useRef,d=r("JSResourceForInteraction")("LSMuteThreadDialog.react").__setRef("MWInboxInfoNotifications.react");function m(e){var t=e.children,n=e.entryPoint,a=e.folder,i=e.thread,l=o("MessengerMuteUtils").calcMuteUntilMs(i),u=r("useMWPIsThreadMuted")(i),m=r("useMWChatUnmuteThread")(),p=c(null),_=r("mwCMIsAnyCMThread")(i.threadType)&&a!=null||o("LSMessagingThreadTypeUtil").isOpenGroupFnFThread(i.threadType)&&r("gkx")("7435"),f=_?s._(/*BTDS*/"_j[\"Chat notifications\",\"0d0b40d72cd2adc492a402e98e18896f\",1]"):u?s._(/*BTDS*/"Unmute notifications"):s._(/*BTDS*/"Mute notifications"),g=u?o("MessengerMuteUtils").mutedUntilLabel(l===-1?l:l/1e3):void 0,h=r("useMWXEntryPointDialog")(r("GroupsCometChatsThreadNotificationSettingsDialog.entrypoint"),{}),y=h[0],C=function(){return y({groupId:a==null?void 0:a.fbGroupId,threadKey:i.threadKey})},b=r("useMWXLazyDialog")(d),v=b[0],S=function(){return v({entryPoint:n,threadKey:i.threadKey})},R=_?C:S;return t(function(){return u&&!_?m(i):R()},p,f,g,u)}m.displayName=m.name+" [from "+i.id+"]",l.default=m}),226);
__d("MWLSGroupMembershipMemberCellProfilePhoto.react",["fbt","IntlVariations","MWXProfilePhoto.react","MWXTooltip.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(15),n=e.linkProps,a=e.name,i=e.onPress,l=e.profilePictureUrl,c=e.showTooltip,d;t[0]!==a?(d=s._(/*BTDS*/"_j{\"*\":\"Message {name}\"}",[s._name("name",a,r("IntlVariations").GENDER_UNKNOWN)]),t[0]=a,t[1]=d):d=t[1];var m;t[2]!==l?(m={uri:l},t[2]=l,t[3]=m):m=t[3];var p;t[4]!==n||t[5]!==a||t[6]!==i||t[7]!==d||t[8]!==m?(p=u.jsx(r("MWXProfilePhoto.react"),{alt:a,"aria-label":d,linkProps:n,onPress:i,shape:"circle",size:36,source:m}),t[4]=n,t[5]=a,t[6]=i,t[7]=d,t[8]=m,t[9]=p):p=t[9];var _=p;if(c){var f;t[10]!==a?(f=s._(/*BTDS*/"_j{\"*\":\"Message {name}\"}",[s._name("name",a,r("IntlVariations").GENDER_UNKNOWN)]),t[10]=a,t[11]=f):f=t[11];var g;return t[12]!==_||t[13]!==f?(g=u.jsx(r("MWXTooltip.react"),{position:"above",tooltip:f,children:_}),t[12]=_,t[13]=f,t[14]=g):g=t[14],g}return _}l.default=c}),226);
__d("useMWLSGroupMembershipMenuQuery$Parameters",["useMWLSGroupMembershipMenuQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("useMWLSGroupMembershipMenuQuery_facebookRelayOperation"),metadata:{},name:"useMWLSGroupMembershipMenuQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWLSGroupMembershipMenu.entrypoint",["JSResourceForInteraction","useMWLSGroupMembershipMenuQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.groupID,n=t.userID;return{queries:{groupMembershipMenuQueryRef:{parameters:r("useMWLSGroupMembershipMenuQuery$Parameters"),variables:{groupID:e,userID:n}}}}},root:r("JSResourceForInteraction")("MWLSGroupMembershipMenu.react").__setRef("MWLSGroupMembershipMenu.entrypoint")};l.default=e}),98);
__d("MWLSGroupMembershipMemberCell.react",["fbt","AddOnEndOverride.react","BaseMiddotSeparator.react","GenderConst","I64","Int64Hooks","LSContactBlockedByViewerStatus","LSContactGenderToGenderConst","LSFactory","LSGroupParticipantJoinState","LSIntEnum","LSIssueCommunityAdminModerationActionsFetchStoredProcedure","LSMessagingThreadTypeUtil","LSThreadBitOffset","LSWhatsAppConnectStatus","MWCMThreadTypes.react","MWGroupMembershipListItem","MWLSContactTypeExactUtils","MWLSGroupMembershipMemberCellProfilePhoto.react","MWLSGroupMembershipMenu.entrypoint","MWPActor.react","MWXCircleButton.react","MWXEntryPointPopoverTrigger.react","MWXIconDots3Horizontal","MWXListCell.react","MWXPressable.react","MWXText.react","MWXTextPairing.react","MWXTooltip.react","getFBTSafeGenderFromGenderConst","getLSMediaContactProfilePictureUrl","gkx","pageID","promiseDone","react","react-compiler-runtime","useMWNavigateToThreadFromGroupMembership","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["children","isDisabled"],u,c,d,m,p=c||(c=o("react")),_=c.useMemo,f=s._(/*BTDS*/"Admin"),g=s._(/*BTDS*/"Moderator"),h=s._(/*BTDS*/"Host"),y="member_list_profile_sheet_source_"+r("pageID");function C(e,t){var n=o("react-compiler-runtime").c(6),a;e:{if(e.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult&&e.serverSearchResult.contextLine!==""){var i;n[0]!==e.serverSearchResult.contextLine?(i=[p.jsx(p.Fragment,{children:e.serverSearchResult.contextLine})],n[0]=e.serverSearchResult.contextLine,n[1]=i):i=n[1],a=i;break e}var l;n[2]!==t?(l=t.filter(b),n[2]=t,n[3]=l):l=n[3];var s=l;if(s.length>0){var u;n[4]!==s?(u=p.jsx(r("BaseMiddotSeparator.react"),{children:s}),n[4]=s,n[5]=u):u=n[5],a=u;break e}a=null}return a}function b(e){return e!=null}function v(e){if(e.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact){var t=e.contact,n=e.participant,a=t.blockedByViewerStatus,i=t.contactTypeExact,l=t.gender,s=t.name,u=t.secondaryName,c=t.waConnectStatus,p=n.groupParticipantJoinState,_=n.isSuperAdmin,f=n.subscribeSource;return{gender:r("LSContactGenderToGenderConst")(l),isBlocked:!(d||(d=o("I64"))).equal(a,(m||(m=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)),isInvitedByViewer:d.equal(p,m.ofNumber(r("LSGroupParticipantJoinState").INVITED)),isSuperAdmin:_===!0,name:s,nonWaAddressable:d.equal(c,m.ofNumber(r("LSWhatsAppConnectStatus").WHATSAPP_NOT_ADDRESSABLE)),profilePictureUrl:r("getLSMediaContactProfilePictureUrl")(t),secondaryName:u!=null&&o("MWLSContactTypeExactUtils").isIgContact(i)?u:null,subscribeSource:f!=null?f:null,username:t.username}}if(e.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember){var g=e.communityMember,h=g.isBlocked,y=g.name,C=g.nickname,b=g.profilePictureUrl,v=g.subtitle;return{gender:r("GenderConst").NOT_A_PERSON,isBlocked:h!=null?h:!1,isInvitedByViewer:!1,isSuperAdmin:!1,name:C!=null?C:y,nonWaAddressable:!1,profilePictureUrl:b!=null?b:"<PLACEHOLDER>",secondaryName:C!=null?y:null,subscribeSource:null,subtitle:v}}if(e.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.BroadcastChannelParticipant){var S,R=e.participant,L=R.isBlocked,E=R.name,k=R.nickname,I=R.profilePictureUrl,T=R.profilePictureUrlFallback;return{gender:r("GenderConst").NOT_A_PERSON,isBlocked:L!=null?L:!1,isInvitedByViewer:!1,isSuperAdmin:!1,name:k!=null?k:E,nonWaAddressable:!1,profilePictureUrl:(S=I!=null?I:T)!=null?S:"<PLACEHOLDER>",secondaryName:null,subscribeSource:null}}var D=e.serverSearchResult,x=D.displayName,$=D.profilePicUrl;return{gender:r("GenderConst").NOT_A_PERSON,isBlocked:!(d||(d=o("I64"))).equal(D.blockedByViewerStatus,(m||(m=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED)),isInvitedByViewer:!1,isSuperAdmin:!1,name:x,nonWaAddressable:!1,profilePictureUrl:$!=null?$:"<PLACEHOLDER>",secondaryName:null,subscribeSource:null}}function S(e,t,n,r,a,i,l){var u,c,d,m=(u=o("MWGroupMembershipListItem").isAdmin(e))!=null?u:!1,p=(c=o("MWGroupMembershipListItem").isModerator(e))!=null?c:!1,_=(d=o("MWGroupMembershipListItem").isHost(e))!=null?d:!1,y=v(e),C=y.isInvitedByViewer,b=y.isSuperAdmin,S=y.nonWaAddressable,R=y.subscribeSource,L=y.subtitle;return t&&S&&!C?s._(/*BTDS*/"Pending").toString():t&&!S&&C?s._(/*BTDS*/"Invited by you").toString():R!=null&&b?n?f:R:m&&r?f:p&&i?g:_&&a?h:n&&l&&L!=null?L:null}function R(t){var n=o("react-compiler-runtime").c(7),a,i,l;if(n[0]!==t?(a=t.children,i=t.isDisabled,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]),i)return a;var s;return n[4]!==a||n[5]!==l?(s=p.jsx(r("MWXPressable.react"),babelHelpers.extends({},l,{children:a})),n[4]=a,n[5]=l,n[6]=s):s=n[6],s}function L(e){var t=o("react-compiler-runtime").c(65),n=e.canMessageUser,a=e.folder,l=e.isMAWParticipantSuperAdmin,c=e.isSecure,_=e.membershipListItem,f=e.onClose,g=e.showAdminIndicator,h=e.showHostIndicator,b=e.showInvitedByViewerOnly,L=e.showModeratorIndicator,E=e.thread,k=h===void 0?!1:h,I=b===void 0?!1:b,T=(u||(u=r("useReStore")))(),D=o("MWPActor.react").useActor(),x;t[0]!==_?(x=o("MWGroupMembershipListItem").contactId(_),t[0]=_,t[1]=x):x=t[1];var $=x,P=o("LSThreadBitOffset").has(66,E)&&o("MWCMThreadTypes.react").isStandardCMThread(E.threadType),N=r("gkx")("23433")&&r("gkx")("772"),M=r("useMWNavigateToThreadFromGroupMembership")(),w;t[2]!==E.threadType?(w=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(E.threadType)&&o("MWPActor.react").isAPPlus(),t[2]=E.threadType,t[3]=w):w=t[3];var A=w,F;t[4]!==_?(F=v(_),t[4]=_,t[5]=F):F=t[5];var O=F,B=O.gender,W=O.isBlocked,q=O.isInvitedByViewer,U=O.isSuperAdmin,V=O.name,H=O.profilePictureUrl,G=O.secondaryName,z=O.subscribeSource,j=O.username,K=o("MWCMThreadTypes.react").isJoinedCMThread(E.threadType),Q,X;t[6]!==$||t[7]!==T||t[8]!==a||t[9]!==E.threadKey?(Q=function(){a!=null&&r("promiseDone")(T.runInTransaction(function(e){return r("LSIssueCommunityAdminModerationActionsFetchStoredProcedure")(r("LSFactory")(e),{fbGroupId:a==null?void 0:a.folderId,requestId:y,source:(m||(m=o("LSIntEnum"))).ofNumber(14),targetUserId:$,threadId:E.threadKey})},"readwrite",void 0,void 0,i.id+":346"))},X=[$,T,a,E.threadKey],t[6]=$,t[7]=T,t[8]=a,t[9]=E.threadKey,t[10]=Q,t[11]=X):(Q=t[10],X=t[11]);var Y=o("Int64Hooks").useCallbackInt64(Q,X),J;t[12]!==W?(J=W?s._(/*BTDS*/"Blocked"):null,t[12]=W,t[13]=J):J=t[13];var Z=S(_,c,K,g,k,L,P),ee=z!=null&&!U&&!K?z:null,te=N&&j!=null&&j.length?"@"+j:null,ne;t[14]!==G||t[15]!==ee||t[16]!==te||t[17]!==J||t[18]!==Z?(ne=[J,G,Z,ee,te],t[14]=G,t[15]=ee,t[16]=te,t[17]=J,t[18]=Z,t[19]=ne):ne=t[19];var re=C(_,ne),oe=c&&q&&!I,ae;t[20]!==$||t[21]!==M||t[22]!==f?(ae=function(){M($),f()},t[20]=$,t[21]=M,t[22]=f,t[23]=ae):ae=t[23];var ie=ae,le=A,se;if(t[24]!==(a==null?void 0:a.fbGroupId)){var ue;se=(d||(d=o("I64"))).to_string((ue=a==null?void 0:a.fbGroupId)!=null?ue:(d||(d=o("I64"))).zero),t[24]=a==null?void 0:a.fbGroupId,t[25]=se}else se=t[25];var ce;t[26]!==D?(ce=(d||(d=o("I64"))).to_string(D),t[26]=D,t[27]=ce):ce=t[27];var de;t[28]!==se||t[29]!==ce?(de={groupID:se,userID:ce},t[28]=se,t[29]=ce,t[30]=de):de=t[30];var me;t[31]!==a||t[32]!==l||t[33]!==_||t[34]!==f||t[35]!==E?(me={folder:a,isMAWParticipantSuperAdmin:l,membershipListItem:_,onCloseDialog:f,thread:E},t[31]=a,t[32]=l,t[33]=_,t[34]=f,t[35]=E,t[36]=me):me=t[36];var pe;t[37]!==$||t[38]!==Y||t[39]!==B||t[40]!==V?(pe=function(t,n,o,a,i,l,u){return p.jsx(r("MWXTooltip.react"),{align:"middle",position:"above",tooltip:s._(/*BTDS*/"Member options"),children:p.jsx(r("MWXCircleButton.react"),{"aria-label":s._(/*BTDS*/"_j{\"*\":\"Member settings for {name}\"}",[s._name("name",V,r("getFBTSafeGenderFromGenderConst")(B))]),icon:r("MWXIconDots3Horizontal"),onHoverIn:function(t){Y(),a==null||a(t)},onHoverOut:function(){i==null||i()},onPress:function(){return n()},onPressIn:l,ref:t,type:"deemphasized",size:36,testid:void 0})})},t[37]=$,t[38]=Y,t[39]=B,t[40]=V,t[41]=pe):pe=t[41];var _e;t[42]!==de||t[43]!==me||t[44]!==pe?(_e=p.jsx(r("AddOnEndOverride.react"),{children:p.jsx(r("MWXEntryPointPopoverTrigger.react"),{align:"end",entryPointParams:de,otherProps:me,popoverEntryPoint:r("MWLSGroupMembershipMenu.entrypoint"),popoverType:"menu",preloadTrigger:"button",children:pe})}),t[42]=de,t[43]=me,t[44]=pe,t[45]=_e):_e=t[45];var fe=le?void 0:ie,ge;t[46]!==n||t[47]!==V||t[48]!==H||t[49]!==fe?(ge=p.jsx(r("MWLSGroupMembershipMemberCellProfilePhoto.react"),{name:V,onPress:fe,profilePictureUrl:H,showTooltip:n}),t[46]=n,t[47]=V,t[48]=H,t[49]=fe,t[50]=ge):ge=t[50];var he;t[51]!==re||t[52]!==le||t[53]!==V||t[54]!==ie||t[55]!==oe?(he=re!=null?p.jsx(r("MWXTextPairing.react"),{body:p.jsx(r("MWXText.react"),{color:oe?"disabled":"secondary",type:"body4",children:re}),headline:p.jsx(R,{isDisabled:le,onPress:ie,overlayDisabled:!0,children:p.jsx(r("MWXText.react"),{color:oe?"disabled":"primary",type:"headline4",children:V})}),level:4}):p.jsx(r("MWXTextPairing.react"),{body:p.jsx(R,{isDisabled:le,onPress:ie,overlayDisabled:!0,children:p.jsx(r("MWXText.react"),{align:"start",numberOfLines:1,type:"headline4",children:V})}),level:4}),t[51]=re,t[52]=le,t[53]=V,t[54]=ie,t[55]=oe,t[56]=he):he=t[56];var ye;t[57]!==$?(ye=(d||(d=o("I64"))).to_string($),t[57]=$,t[58]=ye):ye=t[58];var Ce="mw_participant_cell_"+(d||(d=o("I64"))).to_string($),be;return t[59]!==_e||t[60]!==ge||t[61]!==he||t[62]!==ye||t[63]!==Ce?(be=p.jsx(r("MWXListCell.react"),{addOnEnd:_e,addOnEndVerticalAlign:"center",addOnStart:ge,content:he,size:"medium",testid:void 0},ye),t[59]=_e,t[60]=ge,t[61]=he,t[62]=ye,t[63]=Ce,t[64]=be):be=t[64],be}l.default=L}),226);
__d("useMAWGetGroupSuperAdmin",["Int64Hooks","MAWMiActOnActThreadReadyDeferred","cr:9779","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,a,i){var l=o("react-compiler-runtime").c(6),s=(e||(e=r("useReStore")))(),u,c;l[0]!==s||l[1]!==a||l[2]!==i||l[3]!==t?(u=function(){if(n("cr:9779")!=null&&a){var e=n("cr:9779").sendAndReceive;r("promiseDone")(r("MAWMiActOnActThreadReadyDeferred")(s,t,"useMAWGetGroupSuperAdmin",function(t,n){return e("backend","getGroupSuperAdmin",{chatJid:n}).then(function(e){return i(e)})}))}},c=[s,a,i,t],l[0]=s,l[1]=a,l[2]=i,l[3]=t,l[4]=u,l[5]=c):(u=l[4],c=l[5]),o("Int64Hooks").useEffectInt64(u,c)}l.default=s}),98);
__d("MWLSGroupMembershipMemberList.react",["fbt","I64","LSGroupParticipantJoinState","LSIntEnum","LSMessagingThreadTypeUtil","MDSInfiniteScrollList.react","MWDialogTextPairing.react","MWGroupMembershipListItem","MWLSGroupMembershipMemberCell.react","MWMemberListGlimmer.react","MWPActor.react","emptyFunction","react","react-compiler-runtime","react-strict-dom","useMAWGetGroupSuperAdmin"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=e||(e=o("react")),m=e,p=m.useCallback,_=m.useState,f={noHosts:{alignItems:"x6s0dn4",alignSelf:"xamitd3",display:"x78zum5",flexGrow:"x1iyjqo2",height:"x1egiwwb",justifyContent:"xl56j7k",width:"xdzyupr",$$css:!0}};function g(e){var t=o("react-compiler-runtime").c(28),n=e.disableScroll,a=e.doSortParticipants,i=e.folder,l=e.hasMore,c=e.isLoading,m=e.onClose,p=e.onLoadMore,g=e.participantsAndContacts,v=e.showAdmodIndicator,S=e.showAdmodsOnly,R=e.showHostsOnly,L=e.showInvitedByViewerOnly,E=e.thread,k=n===void 0?!1:n,I=a===void 0?!0:a,T=l===void 0?!1:l,D=c===void 0?!1:c,x=m===void 0?r("emptyFunction"):m,$=p===void 0?r("emptyFunction"):p,P=_(r("emptyFunction")),N=P[0],M=P[1],w;t[0]===Symbol.for("react.memo_cache_sentinel")?(w=o("MWPActor.react").isAPPlus(),t[0]=w):w=t[0];var A=w,F;t[1]!==g||t[2]!==S||t[3]!==R||t[4]!==L?(F=S?g.filter(b):L?g.filter(C):R?g.filter(y):g,t[1]=g,t[2]=S,t[3]=R,t[4]=L,t[5]=F):F=t[5];var O=F,B;t[6]!==I||t[7]!==O?(B=I?O.slice(0).sort(h):O,t[6]=I,t[7]=O,t[8]=B):B=t[8];var W=B,q;t[9]!==E.threadType?(q=o("LSMessagingThreadTypeUtil").isArmadilloSecure(E.threadType),t[9]=E.threadType,t[10]=q):q=t[10];var U=q;r("useMAWGetGroupSuperAdmin")(E.threadKey,U,M);var V;t[11]!==i||t[12]!==U||t[13]!==x||t[14]!==v||t[15]!==L||t[16]!==N||t[17]!==E?(V=function(t){var e=o("MWGroupMembershipListItem").contactId(t);return d.jsx(r("MWLSGroupMembershipMemberCell.react"),{canMessageUser:!A,folder:i,isMAWParticipantSuperAdmin:U&&N!=null?N===(u||(u=o("I64"))).to_string(e):!1,isSecure:U,membershipListItem:t,onClose:x,showAdminIndicator:v,showHostIndicator:v,showInvitedByViewerOnly:L,showModeratorIndicator:v,thread:E},(u||(u=o("I64"))).to_string(e))},t[11]=i,t[12]=U,t[13]=x,t[14]=v,t[15]=L,t[16]=N,t[17]=E,t[18]=V):V=t[18];var H=V;if(W.length===0&&R&&D===!1&&T===!1){var G;t[19]===Symbol.for("react.memo_cache_sentinel")?(G=s._(/*BTDS*/"Hosts lead conversations and help moderate the chat. They'll appear here once they're added."),t[19]=G):G=t[19];var z;return t[20]===Symbol.for("react.memo_cache_sentinel")?(z=d.jsx(o("react-strict-dom").html.div,{style:f.noHosts,children:d.jsx(r("MWDialogTextPairing.react"),{body:G,bodyColor:"secondary",headline:s._(/*BTDS*/"No chat hosts"),textAlign:"center"})}),t[20]=z):z=t[20],z}var j;return t[21]!==k||t[22]!==T||t[23]!==D||t[24]!==$||t[25]!==H||t[26]!==W?(j=k?W.map(H):d.jsx(r("MDSInfiniteScrollList.react"),{hasMore:T,isLoading:D,items:W,loadingIndicator:d.jsx(r("MWMemberListGlimmer.react"),{}),onLoadMore:$,renderItem:H}),t[21]=k,t[22]=T,t[23]=D,t[24]=$,t[25]=H,t[26]=W,t[27]=j):j=t[27],j}function h(e,t){return e.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact&&t.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact?e.contact.name.localeCompare(t.contact.name):e.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember&&t.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.CommunityMember?e.communityMember.name.localeCompare(t.communityMember.name):e.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult&&t.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ServerSearchResult?e.serverSearchResult.displayName.localeCompare(t.serverSearchResult.displayName):0}function y(e){var t;return(t=o("MWGroupMembershipListItem").isHost(e))!=null?t:!1}function C(e){var t=e.type===o("MWGroupMembershipListItem").MWGroupMembershipMemberTypes.ParticipantAndContact?e.participant.groupParticipantJoinState:(c||(c=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").MEMBER);return(u||(u=o("I64"))).equal(t,(c||(c=o("LSIntEnum"))).ofNumber(r("LSGroupParticipantJoinState").INVITED))}function b(e){var t,n,r=(t=o("MWGroupMembershipListItem").isAdmin(e))!=null?t:!1,a=(n=o("MWGroupMembershipListItem").isModerator(e))!=null?n:!1;return r||a}l.default=g}),226);
__d("MWParticipantsForBroadcastChannelUtils",["I64","Int64Hooks","LSClearDiscoverableChatsParticipantsAndRangesStoredProcedure","LSFactory","LSFetchDiscoverableChatParticipantsStoredProcedure","LSIntEnum","LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback;function m(t,n){var a=o("react-compiler-runtime").c(6),l=(e||(e=r("useReStore")))(),u,c;a[0]!==l||a[1]!==n||a[2]!==t.threadKey||a[3]!==t.threadType?(u=function(){o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(t.threadType)&&r("promiseDone")(l.runInTransaction(function(e){return r("LSFetchDiscoverableChatParticipantsStoredProcedure")(r("LSFactory")(e),{cursor:"",maxName:"",source:(s||(s=o("LSIntEnum"))).ofNumber(n),threadKey:t.threadKey})},"readwrite",void 0,void 0,i.id+":40"))},c=[l,n,t.threadKey,t.threadType],a[0]=l,a[1]=n,a[2]=t.threadKey,a[3]=t.threadType,a[4]=u,a[5]=c):(u=a[4],c=a[5]),o("Int64Hooks").useEffectInt64(u,c)}function p(){var t=o("react-compiler-runtime").c(2),n=(e||(e=r("useReStore")))(),a;return t[0]!==n?(a=function(){return n.runInTransaction(_,"readwrite",void 0,void 0,i.id+":60")},t[0]=n,t[1]=a):a=t[1],a}function _(e){return r("LSClearDiscoverableChatsParticipantsAndRangesStoredProcedure")(r("LSFactory")(e))}function f(t,n){var a=o("react-compiler-runtime").c(5),l=(e||(e=r("useReStore")))(),c,d;return a[0]!==l.tables.discoverable_chat_participants_ranges_v2__generated||a[1]!==n||a[2]!==t?(c=function(){return o("ReQL").fromTableAscending(l.tables.discoverable_chat_participants_ranges_v2__generated).getKeyRange(t).filter(function(e){return(u||(u=o("I64"))).equal(e.source,(s||(s=o("LSIntEnum"))).ofNumber(n))})},d=[l.tables.discoverable_chat_participants_ranges_v2__generated,n,t],a[0]=l.tables.discoverable_chat_participants_ranges_v2__generated,a[1]=n,a[2]=t,a[3]=c,a[4]=d):(c=a[3],d=a[4]),o("ReQLSuspense").useFirst(c,d,i.id+":77")}l.useFetchBroadcastChannelMembers=m,l.useClearBroadcastChannelParticipantsList=p,l.useMWParticipantsForBroadcastChannelRanges=f}),98);
__d("MWQuickPromotionBroadcastChannelNUXesQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9666390616774728"}),null);
__d("MWQuickPromotionBroadcastChannelNuxQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="10060673247311283"}),null);
__d("MWThemeIcon.react",["MWColorWheelIcon.react","MWPThemeCSSProvider.react","MWXImage.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useEffect,d=u.useState,m={borderRadius:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",$$css:!0},iconContainer:{height:"x1vqgdyp",width:"x100vrsf",$$css:!0},smallIconContainerFDS:{height:"x17rw0jw",width:"x17z2i9w",$$css:!0},smallIconContainerMDS:{height:"x1fgtraw",width:"xgd8bvy",$$css:!0}};function p(e){var t,n=o("react-compiler-runtime").c(9),a=e.size,i=e.threadTheme,l=d(!1),u=l[0],p=l[1],_=(t=i.iconUrl)!=null?t:i.iconUrlFallback,f=o("MWPThemeCSSProvider.react").useIsThemeV2(),g,h;n[0]!==_||n[1]!==f?(g=function(){if(!(_==null||!f)){var e=new Image;e.src=_,e.onload=function(){p(!0)}}},h=[_,f],n[0]=_,n[1]=f,n[2]=g,n[3]=h):(g=n[2],h=n[3]),c(g,h);var y;return n[4]!==_||n[5]!==u||n[6]!==a||n[7]!==i?(y=_==null||_===""||!u?s.jsx(o("MWColorWheelIcon.react").MWColorWheelIcon,{size:a,threadTheme:i}):s.jsx(r("MWXImage.react"),{src:_,xstyle:[m.borderRadius,a===16||a===20?r("gkx")("23219")?m.smallIconContainerMDS:m.smallIconContainerFDS:m.iconContainer]}),n[4]=_,n[5]=u,n[6]=a,n[7]=i,n[8]=y):y=n[8],y}l.MWThemeIcon=p}),98);
__d("MWV2EditPhotoUploader.react",["fbt","BaseFileSelector.react","DTSG","FBLogger","I64","Int64Hooks","LSFactory","LSUpdateThreadImageStoredProcedure","MAWLoggerUtils","Promise","QPLUserFlow","cometAsyncFetch","cometPushToast","promiseDone","qpl","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react"));s._(/*BTDS*/"Change photo");function p(t){var a=o("react-compiler-runtime").c(11),l=t.children,s=t.threadKey,d=t.threadType,p=(u||(u=r("useReStore")))(),f,g;a[0]!==p||a[1]!==s?(f=function(t,n){r("promiseDone")(p.runInTransaction(function(e){return r("LSUpdateThreadImageStoredProcedure")(r("LSFactory")(e),{imageId:t,threadImageUrl:n!=null?n:void 0,threadKey:s})},"readwrite",void 0,void 0,i.id+":54"))},g=[p,s],a[0]=p,a[1]=s,a[2]=f,a[3]=g):(f=a[2],g=a[3]);var h=o("Int64Hooks").useCallbackInt64(f,g),y=_,C;a[4]!==h||a[5]!==d?(C=function(a){var t=o("MAWLoggerUtils").getInstanceKey();r("QPLUserFlow").start(r("qpl")._(25310015,"1085"),{annotations:{string:{threadType:(c||(c=o("I64"))).to_string(d)}},instanceKey:t});var i=a.item(0);if(i==null)return r("QPLUserFlow").endFailure(r("qpl")._(25310015,"1085"),"no_file_selected",{instanceKey:t}),r("FBLogger")("messenger_web_media").mustfix("file input onChange without any files?"),y();var l=new FormData,s=o("DTSG").getToken();l.set("images_only","true"),s!=null&&l.set("fb_dtsg",s),l.set("attachment[]",i,i.name),r("promiseDone")(r("cometAsyncFetch")("/ajax/mercury/upload.php",{data:{},formData:l,method:"POST"}).then(function(a){if(a!=null&&typeof a=="object"&&a.metadata!=null&&typeof a.metadata=="object"&&a.metadata[0]!=null&&typeof a.metadata[0]=="object"&&"src"in a.metadata[0]&&typeof a.metadata[0].src=="string"&&"image_id"in a.metadata[0]&&typeof a.metadata[0].image_id=="number"){var i=a.metadata[0].src,l=(c||(c=o("I64"))).of_string(a.metadata[0].image_id.toString()),s={image_id:l,src:i};r("QPLUserFlow").endSuccess(r("qpl")._(25310015,"1085"),{instanceKey:t}),h(s.image_id,s.src)}else r("QPLUserFlow").endFailure(r("qpl")._(25310015,"1085"),"no_metadata_set",{instanceKey:t}),y();return(e||(e=n("Promise"))).resolve()}).catch(function(o){return r("QPLUserFlow").endFailure(r("qpl")._(25310015,"1085"),o.toString(),{instanceKey:t}),y(),r("FBLogger")("messenger_web_media").mustfix(o.toString()),(e||(e=n("Promise"))).resolve()}))},a[4]=h,a[5]=d,a[6]=C):C=a[6];var b=C,v;a[7]===Symbol.for("react.memo_cache_sentinel")?(v=[".jpg",".png",".jpeg",".bmp",".tif",".tiff"],a[7]=v):v=a[7];var S;return a[8]!==l||a[9]!==b?(S=m.jsx(r("BaseFileSelector.react"),{accept:v,onFilesSelected:b,children:l}),a[8]=l,a[9]=b,a[10]=S):S=a[10],S}function _(){o("cometPushToast").cometPushErrorToast({message:"Unable to set group picture"})}l.default=p}),226);
__d("MWXIconAccountSwitch",["MWXSvgIcon","SVGIcon","cr:22171","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22171")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconGlobeAmericas",["MWXSvgIcon","SVGIcon","cr:22353","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22353")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconLock",["MWXSvgIcon","SVGIcon","cr:22389","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22389")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconMenuItemThread",["MWXSvgIcon","SVGIcon","cr:22839","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgMenuItemIcon(o("SVGIcon").svgIcon(n("cr:22839")),r("gkx")("23219"));l.default=e}),98);
__d("MessengerAccountSwitchFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M24 14c-1.613 0-3-1.141-3-3.624C21 8.351 22.263 7 24 7s3 1.35 3 3.376C27 12.86 25.613 14 24 14zM19 19c0-1.933 2.239-3.5 5-3.5s5 1.567 5 3.5a1 1 0 0 1-1 1h-8a1 1 0 0 1-1-1zM12 23c-1.613 0-3-1.141-3-3.624C9 17.351 10.263 16 12 16s3 1.351 3 3.376C15 21.86 13.613 23 12 23zM7 28c0-1.933 2.239-3.5 5-3.5s5 1.567 5 3.5a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1zM19.013 9.976c.022-.326.078-.775.21-1.263.093-.346-.153-.713-.51-.713H12a4 4 0 0 0-4 4v2.78c0 .45.552.665.856.335.39-.325.827-.584 1.296-.77a.536.536 0 0 0 .348-.49V12a1.5 1.5 0 0 1 1.5-1.5h6.475c.286 0 .518-.24.538-.524zM26.5 22a1 1 0 0 0-1 1v1a1.5 1.5 0 0 1-1.5 1.5h-4.832c-.395 0-.642.444-.494.81.149.373.253.77.299 1.19.03.275.25.5.527.5H24a4 4 0 0 0 4-4v-1a1 1 0 0 0-1-1h-.5z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerEyeFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M22 18a4 4 0 1 1-8 0 4 4 0 0 1 8 0z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M30.577 19.38a2.451 2.451 0 0 0 0-2.76C27.487 12.07 22.057 9 18 9s-9.486 3.07-12.577 7.62a2.451 2.451 0 0 0 0 2.76C8.513 23.93 13.943 27 18 27s9.486-3.07 12.577-7.62zM24 18a6 6 0 1 1-12 0 6 6 0 0 1 12 0z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerFriendGenericCheckmarkFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M17.25 12.305C17.25 16.207 19.446 18 22 18s4.75-1.793 4.75-5.695C26.75 9.123 24.75 7 22 7s-4.75 2.123-4.75 5.305zM29.94 28c.69 0 1.06-.595 1.06-1.335C31 22.985 26.835 20 22 20s-9 2.985-9 6.665c0 .74.37 1.335 1.06 1.335h15.88zM13.865 12.502a1 1 0 0 0-1.73-1.004l-3.829 6.595a.25.25 0 0 1-.393.051l-2.206-2.206a1 1 0 0 0-1.414 1.414l3.355 3.355a1 1 0 0 0 1.572-.205l4.645-8z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerGlobeAmericasFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M23.505 22.125c0-.953-1.494-1.035-2.292-1.833-.798-.798-1.026-1.375-1.834-1.375-.807 0-1.375-.357-1.375-.917s-.595-.917-.916-.917c-.321 0-.917-.208-.917-.916 0-.708.565-.917 1.375-.917.986 0 1.386.917 2.292.917.304 0 .458-.224.458-.459 0-.516-.916-.787-.916-1.375 0-.804.859-1.317 1.375-1.833.515-.516.916-.94.916-1.833 0-.73-.968-1.687-2.291-1.687-.4 0-.459.413-.459 1.228 0 .816-.235.917-.458.917-.602 0-.986-2.077-1.834-2.077-1.69 0-4.583 1.171-4.583 3.91 0 3.654 2.302 3.677 3.667 5.042.956.956 1.375 1.601 1.375 3.208 0 1.154.53 1.905.916 2.292.388.387.459.802.459 2.75 0 .763.151.863.458.863.4 0 .734-.222 2.292-1.78 1.284-1.284 2.291-1.469 2.291-3.208zM18.005 29c-6.076 0-11-4.925-11-11s4.924-11 11-11c6.075 0 11 4.925 11 11s-4.925 11-11 11z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerLikeFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M17.987 6c1.104 0 3.67.726 3.67 5.149 0 1.232-.123 2.001-.209 2.534-.018.115-.035.219-.048.314l-.001.005a.36.36 0 0 0 .362.406c4.399 0 6.748 1.164 6.748 2.353 0 .533-.2 1.02-.527 1.395a.11.11 0 0 0 .023.163 2.13 2.13 0 0 1 .992 1.79c0 .86-.477 1.598-1.215 1.943a.11.11 0 0 0-.046.157c.207.328.329.713.329 1.128 0 .946-.547 1.741-1.406 2.029a.109.109 0 0 0-.068.137c.061.184.098.38.098.584 0 1.056-1.776 1.913-5.95 1.913-3.05 0-5.154-.545-5.963-.936-.595-.288-1.276-.81-1.276-2.34v-6.086c0-1.72.958-2.87 1.911-4.014.946-1.135 1.888-2.265 1.888-3.943 0-1.34-.091-2.19-.159-2.817-.039-.368-.07-.66-.07-.928 0-.527.385-.934.917-.936zM10.5 17h-2c-1 0-1.5 2.686-1.5 6s.5 6 1.5 6h2a1 1 0 0 0 1-1V18a1 1 0 0 0-1-1z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerLockFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M12.25 15.5a.25.25 0 0 0 .25-.25V12a5.5 5.5 0 1 1 11 0v3.25c0 .138.112.25.25.25h.75a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-13a2 2 0 0 1-2-2v-9a2 2 0 0 1 2-2h.75zm3 0h5.5a.25.25 0 0 0 .25-.25V12a3 3 0 1 0-6 0v3.25c0 .138.112.25.25.25z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerMessageCrossFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M7.705 28.41c-.19-.467.087-.97.444-1.327L27.867 7.366a1.25 1.25 0 1 1 1.768 1.768l-1.818 1.817c-.34.34-.384.87-.148 1.29C28.525 13.758 29 15.541 29 17.5v.003c-.001 6.103-4.607 10.57-11 10.57-1.066 0-2.08-.095-3.033-.327a4.26 4.26 0 0 0-2.39.09L8.91 28.962c-.36.099-.957.054-1.205-.552zM22.184 7.697C20.913 7.244 19.506 7 18 7 11.607 7 7 11.396 7 17.498v.002c0 1.689.27 3.245.884 4.615a.927.927 0 0 0 1.474.22L22.476 9.215c.481-.48.35-1.29-.292-1.52z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerRestrictButtonSource",[],(function(t,n,r,o,a,i){"use strict";var e="THREAD_DETAIL_SETTINGS",l="CHAT_TAB_SETTINGS";i.thread_detail_settings=e,i.chat_tab_settings=l}),66);
__d("ReadReceiptControlSettingChangedFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("3164"),s=o("FalcoLoggerInternal").create("read_receipt_control_setting_changed",e),u=s;l.default=u}),98);
__d("WebBloksSSRUtils",[],(function(t,n,r,o,a,i){var e=!!(typeof window!="undefined"&&window.document&&window.document.createElement);i.canUseDOM=e}),66);
__d("XCometStoriesCreateChannelControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/stories/create/channel/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("XMessengerFamilyCenterHomeControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/dashboard/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("getLSMediaCommunityFolderCoverPictureUrl",["LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null){var t=e.coverPicUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.coverPicUrlFallback:e.coverPicUrl}}l.default=e}),98);
__d("useEBStateDBLogout",["MAWBridgeFireAndForget","MWEncryptedBackupsLocalStorageEntryEnum","Promise","WebStorage","cr:21326","getMWEncryptedBackupsIsLocalStorageSupported","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("gkx")("3952");function c(){var t,a=o("getMWEncryptedBackupsIsLocalStorageSupported").getMWEncryptedBackupsIsLocalStorageSupported(),i=(t=(s||(s=r("WebStorage"))).getLocalStorageForRead())==null?void 0:t.getItem(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT),l=a?i!=null:!1;return n("cr:21326")==null?(e||(e=n("Promise"))).resolve():(o("MAWBridgeFireAndForget").fireAndForget("backend","clearWorkerEBStateDBOnLogout",{hasUserGivenAutoRestoreConsent:u&&l}),(e||(e=n("Promise"))).resolve(n("cr:21326").clearEBIDBNonPersistedRows({hasUserGivenAutoRestoreConsent:u&&l})))}l.logoutEBStateDB=c}),98);
__d("openMessengerLogOut",["Banzai","DTSG","DTSGUtils","LSPlatformLogout","SprinkleConfig","URI","WebStorageMonster","XMessengerDotComLogoutController","promiseDone","useEBStateDBLogout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(){var t;r("promiseDone")(o("LSPlatformLogout").logout()),r("promiseDone")(o("useEBStateDBLogout").logoutEBStateDB());var n=r("XMessengerDotComLogoutController").getURIBuilder().getURI(),a={},i=new(e||(e=r("URI")))(n),l=document.createElement("form");l.action=i.toString(),l.method="POST",l.style.display="none";var s=o("DTSG").getToken();return s!=null&&(a.fb_dtsg=s,r("SprinkleConfig").param_name.length>0&&(a[r("SprinkleConfig").param_name]=o("DTSGUtils").getNumericValue(s))),Object.entries(a).forEach(function(e){var t=e[0],n=e[1],r=document.createElement("input");r.type="hidden",r.name=t,r.value=n,l.appendChild(r)}),(t=document.body)==null||t.appendChild(l),r("Banzai").flush(),r("WebStorageMonster").cleanOnLogout([],"MWInboxSettingsMenu"),l.submit()},u=s;l.default=u}),98);
__d("useDebouncedOnChange",["react","react-compiler-runtime","useDebounced"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useLayoutEffect,m=s.useRef,p=s.useState;function _(e,t,n){var a=o("react-compiler-runtime").c(20),i=n===void 0?100:n,l=p(e),s=l[0],u=l[1],_=r("useDebounced")(t,i),f;a[0]!==_||a[1]!==e||a[2]!==s?(f=_.isPending()?s:e,a[0]=_,a[1]=e,a[2]=s,a[3]=f):f=a[3];var g=f,h;a[4]!==_?(h=function(t){_(t),u(t)},a[4]=_,a[5]=h):h=a[5];var y=h,C;a[6]!==g||a[7]!==_||a[8]!==e||a[9]!==t?(C=function(){g!==e&&t(g),_.reset()},a[6]=g,a[7]=_,a[8]=e,a[9]=t,a[10]=C):C=a[10];var b=C,v=m(b),S,R;a[11]!==b?(S=function(){v.current=b},R=[b],a[11]=b,a[12]=S,a[13]=R):(S=a[12],R=a[13]),d(S,R);var L,E;a[14]===Symbol.for("react.memo_cache_sentinel")?(L=function(){return function(){return v.current()}},E=[],a[14]=L,a[15]=E):(L=a[14],E=a[15]),c(L,E);var k;return a[16]!==g||a[17]!==y||a[18]!==b?(k=[g,y,b],a[16]=g,a[17]=y,a[18]=b,a[19]=k):k=a[19],k}l.default=_}),98);
__d("useMAWSecretConversationsLogOut",["MAWSecretConversationsLogout","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=function(){return r("MAWSecretConversationsLogout")(e)},t[0]=e,t[1]=n):n=t[1],n}l.default=u}),98);
__d("useMWInboxMessageSearchRestoreTrigger",["Int64Hooks","MAWFTSRestoreSyncDeferred","MAWFTSSyncConsts","MAWMiActOnActThreadReadyDeferred","MWLSThreadDisplayContext","Promise","promiseDone","qex","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useRef;function c(t,a){var i=o("react-compiler-runtime").c(5),l=u(null),s=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),c,d;i[0]!==t||i[1]!==s||i[2]!==a?(c=function(){var i=function(){r("promiseDone")(o("MAWFTSRestoreSyncDeferred").getInstance().then(function(e){e.setActiveThreadId(null),s==="ChatTab"&&r("qex")._("1028")===!0&&e.setShouldPauseRestore(!0)})),l.current!=null&&window.clearTimeout(l.current)};return s!=="Inbox"&&r("qex")._("1482")!==!0||(l.current!=null&&window.clearTimeout(l.current),l.current=window.setTimeout(function(){r("promiseDone")(o("MAWFTSRestoreSyncDeferred").getInstance().then(function(o){r("promiseDone")(r("MAWMiActOnActThreadReadyDeferred")(t,a,"useMWInboxMessageSearchRestoreTrigger",function(t,a){return o.setActiveThreadId(a,!1),r("promiseDone")(o.startSyncingLoop()),(e||(e=n("Promise"))).resolve()}))}))},o("MAWFTSSyncConsts").THREAD_VIEW_DELAY_UNTIL_RESTORE)),i},d=[t,s,a],i[0]=t,i[1]=s,i[2]=a,i[3]=c,i[4]=d):(c=i[3],d=i[4]),o("Int64Hooks").useEffectInt64(c,d)}l.default=c}),98);
__d("useMWReadReceiptsCanBeDisabledForThread",["LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MWPActor.react","MessagingFolderTag","MessagingThreadSubtype","ReQLSuspense","queryMWLSOtherParticipantContact","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch((s||(s=o("LSIntEnum"))).toNumber(e.threadType)){case 1:return!(s||(s=o("LSIntEnum"))).equal(e.threadSubtype,r("MessagingThreadSubtype").PAGE_TO_PAGE);case 2:case 15:case 16:case 5:return!0}return!1}function c(e){switch(e){case r("MessagingFolderTag").SPAM:case r("MessagingFolderTag").PENDING:case r("MessagingFolderTag").OTHER:return!1}return!0}function d(t){var n=o("react-compiler-runtime").c(13),a=(e||(e=r("useReStore")))(),l=o("MWPActor.react").useActor(),d,m;n[0]!==l||n[1]!==a||n[2]!==t.threadKey||n[3]!==t.threadType?(d=function(){return r("queryMWLSOtherParticipantContact")(a,t.threadKey,t.threadType,l,[])},m=[t.threadKey,t.threadType,a,l],n[0]=l,n[1]=a,n[2]=t.threadKey,n[3]=t.threadType,n[4]=d,n[5]=m):(d=n[4],m=n[5]);var p=o("ReQLSuspense").useFirst(d,m,i.id+":77"),_;n[6]!==t?(_=u(t)&&c(t.folderName),n[6]=t,n[7]=_):_=n[7];var f=_,g;n[8]!==p||n[9]!==t.threadType?(g=o("LSMessagingThreadTypeUtil").isOneToOne(t.threadType)&&p==null,n[8]=p,n[9]=t.threadType,n[10]=g):g=n[10];var h=g,y;n[11]!==t.authorityLevel?(y=t.authorityLevel!=null&&(s||(s=o("LSIntEnum"))).toNumber(t.authorityLevel)!==r("LSAuthorityLevel").AUTHORITATIVE,n[11]=t.authorityLevel,n[12]=y):y=n[12];var C=y;return f&&!h&&!C}l.default=d}),98);
__d("useMWReadReceiptsPropsForThread",["fbt","I64","Int64Hooks","LSFactory","LSOptimisticToggleReadReceiptsStoredProcedure","MAWFolderUtils","MWCMGetGender","MWLSThread","MWPActor.react","ReQL","ReQLSuspense","ReadReceiptControlSettingChangedFalcoEvent","coerceMessagingThreadTypeToLSThreadType","promiseDone","queryMWLSOtherParticipantContact","react-compiler-runtime","useDebouncedOnChange","useMWIsReadReceiptsDisabledForThread","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=250;function d(e){return e?s._(/*BTDS*/"Chat members won't be able to see when you've read their messages and you won't be able to see when they've read yours."):s._(/*BTDS*/"Chat members will be able to see when you've read their messages.")}function m(e,t){var n,r,a=o("MWCMGetGender").getGender(t.gender);return e?s._(/*BTDS*/"_j{\"*\":\"{friend_name} won't be able to see when you've read their messages and you won't be able to see when they've read yours.\"}",[s._name("friend_name",(n=t.firstName)!=null?n:t.name,a)]):s._(/*BTDS*/"_j{\"*\":\"{friend_name} will be able to see when you've read their messages.\"}",[s._name("friend_name",(r=t.firstName)!=null?r:t.name,a)])}function p(e,t){return t==null?d(e):m(e,t)}function _(t){var n=o("react-compiler-runtime").c(29),a=(u||(u=r("useReStore")))(),l=r("useMWIsReadReceiptsDisabledForThread")(t),s=o("MWLSThread").useThread(t),d=o("MWPActor.react").useActor(),m;n[0]!==d||n[1]!==a||n[2]!==s||n[3]!==t?(m=function(){return(s==null?void 0:s.threadType)!=null?r("queryMWLSOtherParticipantContact")(a,t,s.threadType,d,["firstName","name","gender"]):o("ReQL").empty()},n[0]=d,n[1]=a,n[2]=s,n[3]=t,n[4]=m):m=n[4];var _=s==null?void 0:s.threadType,f;n[5]!==d||n[6]!==a||n[7]!==_||n[8]!==t?(f=[a,d,t,_],n[5]=d,n[6]=a,n[7]=_,n[8]=t,n[9]=f):f=n[9];var g=o("ReQLSuspense").useFirst(m,f,i.id+":92"),h;n[10]!==a||n[11]!==(s==null?void 0:s.parentThreadKey)||n[12]!==(s==null?void 0:s.threadType)||n[13]!==t?(h=function(l){r("ReadReceiptControlSettingChangedFalcoEvent").log(function(){return{is_account_level:!1,setting_enabled:!l,thread_folder:(s==null?void 0:s.parentThreadKey)!=null?o("MAWFolderUtils").parentThreadKeyToLsSystemFolder(s==null?void 0:s.parentThreadKey):void 0,thread_id:(e||(e=o("I64"))).to_string(t),thread_type:(s==null?void 0:s.threadType)!=null?r("coerceMessagingThreadTypeToLSThreadType")(s==null?void 0:s.threadType):void 0}}),r("promiseDone")(a.runInTransaction(function(e){return r("LSOptimisticToggleReadReceiptsStoredProcedure")(r("LSFactory")(e),{isReadReceiptsDisabled:l,threadKey:t})},"readwrite",void 0,void 0,i.id+":122"))},n[10]=a,n[11]=s==null?void 0:s.parentThreadKey,n[12]=s==null?void 0:s.threadType,n[13]=t,n[14]=h):h=n[14];var y=s==null?void 0:s.threadType,C=s==null?void 0:s.parentThreadKey,b;n[15]!==a||n[16]!==y||n[17]!==C||n[18]!==t?(b=[t,y,C,a],n[15]=a,n[16]=y,n[17]=C,n[18]=t,n[19]=b):b=n[19];var v=o("Int64Hooks").useCallbackInt64(h,b),S;n[20]!==v?(S=function(t){v(t)},n[20]=v,n[21]=S):S=n[21];var R=r("useDebouncedOnChange")(l,S,c),L=R[0],E=R[1],k;n[22]!==g||n[23]!==L?(k=p(L,g),n[22]=g,n[23]=L,n[24]=k):k=n[24];var I;return n[25]!==E||n[26]!==L||n[27]!==k?(I={content:k,isReadReceiptsDisabled:L,onClick:E},n[25]=E,n[26]=L,n[27]=k,n[28]=I):I=n[28],I}l.default=_}),226);
__d("useMWRedirectToEncryptedThreadOfDualThread",["LSIntEnum","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWNavigation","useMWPCreateOneToOneThreadThenNavigate","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(t){var n=o("react-compiler-runtime").c(13),a=(e||(e=r("useReStore")))(),l;n[0]!==a.tables.mi_act_mapping_table||n[1]!==t?(l=function(){return o("ReQL").fromTableAscending(a.tables.mi_act_mapping_table.index("jid")).getKeyRange(t)},n[0]=a.tables.mi_act_mapping_table,n[1]=t,n[2]=l):l=n[2];var u;n[3]!==a||n[4]!==t?(u=[a,t],n[3]=a,n[4]=t,n[5]=u):u=n[5];var c=o("ReQLSuspense").useFirst(l,u,i.id+":31"),d=r("useMWNavigation")(),m=r("useMWPCreateOneToOneThreadThenNavigate")(d,"preCutoverThread","dualThreadCutoverComposer"),p=c!=null,_=c==null?void 0:c.clientThreadPk,f=c==null?void 0:c.serverThreadKey,g;return n[6]!==_||n[7]!==m||n[8]!==p||n[9]!==d||n[10]!==f||n[11]!==t?(g=function(){p&&f!=null?d.openTabOrInbox({clientThreadKey:_,threadKey:f,threadType:(s||(s=o("LSIntEnum"))).ofNumber(15)},"preCutoverThread",void 0,void 0,{subEntrypoint:"dualThreadCutoverComposer"}):m==null||m(t)},n[6]=_,n[7]=m,n[8]=p,n[9]=d,n[10]=f,n[11]=t,n[12]=g):g=n[12],g}l.default=d}),98);
__d("useMigrateURLParamsToRouteParams",["CometRouteParams","CometRouteURL","MetaConfig"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=r("MetaConfig")._("61"),t=o("CometRouteParams").useRouteParams(),n=o("CometRouteURL").useRouteURLParams();return e?t:n}l.default=e}),98);/*FB_PKG_DELIM*/
/**
 * License: https://www.facebook.com/legal/license/yKsQCAUqcFZ/
 */
__d("dexie-4.0.1",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){(function(t,n){typeof e=="object"&&typeof l!="undefined"?l.exports=n():(t=typeof globalThis!="undefined"?globalThis:t||self,t.Dexie=n())})(this,(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function n(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}var r=function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},r.apply(this,arguments)};function o(e,t,n){if(n||arguments.length===2)for(var r=0,o=t.length,a;r<o;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}var a=typeof globalThis!="undefined"?globalThis:typeof self!="undefined"?self:typeof window!="undefined"?window:t,i=Object.keys,l=Array.isArray;typeof Promise!="undefined"&&!a.Promise&&(a.Promise=Promise);function s(e,t){return typeof t!="object"||i(t).forEach(function(n){e[n]=t[n]}),e}var u=Object.getPrototypeOf,c={}.hasOwnProperty;function d(e,t){return c.call(e,t)}function m(e,t){typeof t=="function"&&(t=t(u(e))),(typeof Reflect=="undefined"?i:Reflect.ownKeys)(t).forEach(function(n){_(e,n,t[n])})}var p=Object.defineProperty;function _(e,t,n,r){p(e,t,s(n&&d(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function f(e){return{from:function(t){return e.prototype=Object.create(t.prototype),_(e.prototype,"constructor",e),{extend:m.bind(null,e.prototype)}}}}var g=Object.getOwnPropertyDescriptor;function h(e,t){var n=g(e,t),r;return n||(r=u(e))&&h(r,t)}var y=[].slice;function C(e,t,n){return y.call(e,t,n)}function b(e,t){return t(e)}function v(e){if(!e)throw new Error("Assertion Failed")}function S(e){a.setImmediate?setImmediate(e):setTimeout(e,0)}function R(e,t){return e.reduce(function(e,n,r){var o=t(n,r);return o&&(e[o[0]]=o[1]),e},{})}function L(e,t){if(typeof t=="string"&&d(e,t))return e[t];if(!t)return e;if(typeof t!="string"){for(var n=[],r=0,o=t.length;r<o;++r){var a=L(e,t[r]);n.push(a)}return n}var i=t.indexOf(".");if(i!==-1){var l=e[t.substr(0,i)];return l==null?void 0:L(l,t.substr(i+1))}}function E(e,t,n){if(!(!e||t===void 0)&&!("isFrozen"in Object&&Object.isFrozen(e)))if(typeof t!="string"&&"length"in t){v(typeof n!="string"&&"length"in n);for(var r=0,o=t.length;r<o;++r)E(e,t[r],n[r])}else{var a=t.indexOf(".");if(a!==-1){var i=t.substr(0,a),s=t.substr(a+1);if(s==="")n===void 0?l(e)&&!isNaN(parseInt(i))?e.splice(i,1):delete e[i]:e[i]=n;else{var u=e[i];(!u||!d(e,i))&&(u=e[i]={}),E(u,s,n)}}else n===void 0?l(e)&&!isNaN(parseInt(t))?e.splice(t,1):delete e[t]:e[t]=n}}function k(e,t){typeof t=="string"?E(e,t,void 0):"length"in t&&[].map.call(t,function(t){E(e,t,void 0)})}function I(e){var t={};for(var n in e)d(e,n)&&(t[n]=e[n]);return t}var T=[].concat;function D(e){return T.apply([],e)}var x="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(D([8,16,32,64].map(function(e){return["Int","Uint","Float"].map(function(t){return t+e+"Array"})}))).filter(function(e){return a[e]}),$=new Set(x.map(function(e){return a[e]}));function P(e){var t={};for(var n in e)if(d(e,n)){var r=e[n];t[n]=!r||typeof r!="object"||$.has(r.constructor)?r:P(r)}return t}function N(e){for(var t in e)if(d(e,t))return!1;return!0}var M=null;function w(e){M=new WeakMap;var t=A(e);return M=null,t}function A(e){if(!e||typeof e!="object")return e;var t=M.get(e);if(t)return t;if(l(e)){t=[],M.set(e,t);for(var n=0,r=e.length;n<r;++n)t.push(A(e[n]))}else if($.has(e.constructor))t=e;else{var o=u(e);t=o===Object.prototype?{}:Object.create(o),M.set(e,t);for(var a in e)d(e,a)&&(t[a]=A(e[a]))}return t}var F={}.toString;function O(e){return F.call(e).slice(8,-1)}var B=typeof Symbol!="undefined"?Symbol.iterator:"@@iterator",W=typeof B=="symbol"?function(e){var t;return e!=null&&(t=e[B])&&t.apply(e)}:function(){return null};function q(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n>=0}var U={};function V(e){var t,n,r,o;if(arguments.length===1){if(l(e))return e.slice();if(this===U&&typeof e=="string")return[e];if(o=W(e)){for(n=[];r=o.next(),!r.done;)n.push(r.value);return n}if(e==null)return[e];if(t=e.length,typeof t=="number"){for(n=new Array(t);t--;)n[t]=e[t];return n}return[e]}for(t=arguments.length,n=new Array(t);t--;)n[t]=arguments[t];return n}var H=typeof Symbol!="undefined"?function(e){return e[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},G=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"],z=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],j=G.concat(z),K={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function Q(e,t){this.name=e,this.message=t}f(Q).from(Error).extend({toString:function(){return this.name+": "+this.message}});function X(e,t){return e+". Errors: "+Object.keys(t).map(function(e){return t[e].toString()}).filter(function(e,t,n){return n.indexOf(e)===t}).join("\n")}function Y(e,t,n,r){this.failures=t,this.failedKeys=r,this.successCount=n,this.message=X(e,t)}f(Y).from(Q);function J(e,t){this.name="BulkError",this.failures=Object.keys(t).map(function(e){return t[e]}),this.failuresByPos=t,this.message=X(e,this.failures)}f(J).from(Q);var Z=j.reduce(function(e,t){return e[t]=t+"Error",e},{}),ee=Q,te=j.reduce(function(e,t){var n=t+"Error";function r(e,r){this.name=n,e?typeof e=="string"?(this.message="".concat(e).concat(r?"\n "+r:""),this.inner=r||null):typeof e=="object"&&(this.message="".concat(e.name," ").concat(e.message),this.inner=e):(this.message=K[t]||n,this.inner=null)}return f(r).from(ee),e[t]=r,e},{});te.Syntax=SyntaxError,te.Type=TypeError,te.Range=RangeError;var ne=z.reduce(function(e,t){return e[t+"Error"]=te[t],e},{});function re(e,t){if(!e||e instanceof Q||e instanceof TypeError||e instanceof SyntaxError||!e.name||!ne[e.name])return e;var n=new ne[e.name](t||e.message,e);return"stack"in e&&_(n,"stack",{get:function(){return this.inner.stack}}),n}var oe=j.reduce(function(e,t){return["Syntax","Type","Range"].indexOf(t)===-1&&(e[t+"Error"]=te[t]),e},{});oe.ModifyError=Y,oe.DexieError=Q,oe.BulkError=J;function ae(){}function ie(e){return e}function le(e,t){return e==null||e===ie?t:function(n){return t(e(n))}}function se(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function ue(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=t.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?se(r,this.onsuccess):r),o&&(this.onerror=this.onerror?se(o,this.onerror):o),a!==void 0?a:n}}function ce(e,t){return e===ae?t:function(){e.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,t.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?se(n,this.onsuccess):n),r&&(this.onerror=this.onerror?se(r,this.onerror):r)}}function de(e,t){return e===ae?t:function(n){var r=e.apply(this,arguments);s(n,r);var o=this.onsuccess,a=this.onerror;this.onsuccess=null,this.onerror=null;var i=t.apply(this,arguments);return o&&(this.onsuccess=this.onsuccess?se(o,this.onsuccess):o),a&&(this.onerror=this.onerror?se(a,this.onerror):a),r===void 0?i===void 0?void 0:i:s(r,i)}}function me(e,t){return e===ae?t:function(){return t.apply(this,arguments)===!1?!1:e.apply(this,arguments)}}function pe(e,t){return e===ae?t:function(){var n=e.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,o=arguments.length,a=new Array(o);o--;)a[o]=arguments[o];return n.then(function(){return t.apply(r,a)})}return t.apply(this,arguments)}}var _e=typeof location!="undefined"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function fe(e,t){_e=e}var ge={},he=100,ye=typeof Promise=="undefined"?[]:(function(){var e=Promise.resolve();if(typeof crypto=="undefined"||!crypto.subtle)return[e,u(e),e];var t=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[t,u(t),e]})(),Ce=ye[0],be=ye[1],ve=ye[2],Se=be&&be.then,Re=Ce&&Ce.constructor,Le=!!ve;function Ee(){queueMicrotask(Ge)}var ke=function(e,t){Me.push([e,t]),Te&&(Ee(),Te=!1)},Ie=!0,Te=!0,De=[],xe=[],$e=ie,Pe={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ae,pgp:!1,env:{},finalize:ae},Ne=Pe,Me=[],we=0,Ae=[];function Fe(e){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var t=this._PSD=Ne;if(typeof e!="function"){if(e!==ge)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&qe(this,this._value);return}this._state=null,this._value=null,++t.ref,We(this,e)}var Oe={get:function(){var e=Ne,t=ot;function n(n,r){var o=this,a=!e.global&&(e!==Ne||t!==ot),i=a&&!st(),l=new Fe(function(t,l){Ve(o,new Be(ft(n,e,a,i),ft(r,e,a,i),t,l,e))});return this._consoleTask&&(l._consoleTask=this._consoleTask),l}return n.prototype=ge,n},set:function(e){_(this,"then",e&&e.prototype===ge?Oe:{get:function(){return e},set:Oe.set})}};m(Fe.prototype,{then:Oe,_then:function(e,t){Ve(this,new Be(null,null,e,t,Ne))},catch:function(e){if(arguments.length===1)return this.then(null,e);var t=arguments[0],n=arguments[1];return typeof t=="function"?this.then(null,function(e){return e instanceof t?n(e):Je(e)}):this.then(null,function(e){return e&&e.name===t?n(e):Je(e)})},finally:function(e){return this.then(function(t){return Fe.resolve(e()).then(function(){return t})},function(t){return Fe.resolve(e()).then(function(){return Je(t)})})},timeout:function(e,t){var n=this;return e<1/0?new Fe(function(r,o){var a=setTimeout(function(){return o(new te.Timeout(t))},e);n.then(r,o).finally(clearTimeout.bind(null,a))}):this}}),typeof Symbol!="undefined"&&Symbol.toStringTag&&_(Fe.prototype,Symbol.toStringTag,"Dexie.Promise"),Pe.env=pt();function Be(e,t,n,r,o){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.resolve=n,this.reject=r,this.psd=o}m(Fe,{all:function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t,n){e.length===0&&t([]);var r=e.length;e.forEach(function(o,a){return Fe.resolve(o).then(function(n){e[a]=n,--r||t(e)},n)})})},resolve:function(e){if(e instanceof Fe)return e;if(e&&typeof e.then=="function")return new Fe(function(t,n){e.then(t,n)});var t=new Fe(ge,!0,e);return t},reject:Je,race:function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t,n){e.map(function(e){return Fe.resolve(e).then(t,n)})})},PSD:{get:function(){return Ne},set:function(e){return Ne=e}},totalEchoes:{get:function(){return ot}},newPSD:it,usePSD:_t,scheduler:{get:function(){return ke},set:function(e){ke=e}},rejectionMapper:{get:function(){return $e},set:function(e){$e=e}},follow:function(e,t){return new Fe(function(n,r){return it(function(t,n){var r=Ne;r.unhandleds=[],r.onunhandled=n,r.finalize=se(function(){var e=this;Qe(function(){e.unhandleds.length===0?t():n(e.unhandleds[0])})},r.finalize),e()},t,n,r)})}}),Re&&(Re.allSettled&&_(Fe,"allSettled",function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t){e.length===0&&t([]);var n=e.length,r=new Array(n);e.forEach(function(e,o){return Fe.resolve(e).then(function(e){return r[o]={status:"fulfilled",value:e}},function(e){return r[o]={status:"rejected",reason:e}}).then(function(){return--n||t(r)})})})}),Re.any&&typeof AggregateError!="undefined"&&_(Fe,"any",function(){var e=V.apply(null,arguments).map(ut);return new Fe(function(t,n){e.length===0&&n(new AggregateError([]));var r=e.length,o=new Array(r);e.forEach(function(e,a){return Fe.resolve(e).then(function(e){return t(e)},function(e){o[a]=e,--r||n(new AggregateError(o))})})})}));function We(e,t){try{t(function(t){if(e._state===null){if(t===e)throw new TypeError("A promise cannot be resolved with itself.");var n=e._lib&&ze();t&&typeof t.then=="function"?We(e,function(e,n){t instanceof Fe?t._then(e,n):t.then(e,n)}):(e._state=!0,e._value=t,Ue(e)),n&&je()}},qe.bind(null,e))}catch(t){qe(e,t)}}function qe(e,t){if(xe.push(t),e._state===null){var n=e._lib&&ze();t=$e(t),e._state=!1,e._value=t,Xe(e),Ue(e),n&&je()}}function Ue(e){var t=e._listeners;e._listeners=[];for(var n=0,r=t.length;n<r;++n)Ve(e,t[n]);var o=e._PSD;--o.ref||o.finalize(),we===0&&(++we,ke(function(){--we===0&&Ke()},[]))}function Ve(e,t){if(e._state===null){e._listeners.push(t);return}var n=e._state?t.onFulfilled:t.onRejected;if(n===null)return(e._state?t.resolve:t.reject)(e._value);++t.psd.ref,++we,ke(He,[n,e,t])}function He(e,t,n){try{var r,o=t._value;!t._state&&xe.length&&(xe=[]),r=_e&&t._consoleTask?t._consoleTask.run(function(){return e(o)}):e(o),!t._state&&xe.indexOf(o)===-1&&Ye(t),n.resolve(r)}catch(e){n.reject(e)}finally{--we===0&&Ke(),--n.psd.ref||n.psd.finalize()}}function Ge(){_t(Pe,function(){ze()&&je()})}function ze(){var e=Ie;return Ie=!1,Te=!1,e}function je(){var e,t,n;do for(;Me.length>0;)for(e=Me,Me=[],n=e.length,t=0;t<n;++t){var r=e[t];r[0].apply(null,r[1])}while(Me.length>0);Ie=!0,Te=!0}function Ke(){var e=De;De=[],e.forEach(function(e){e._PSD.onunhandled.call(null,e._value,e)});for(var t=Ae.slice(0),n=t.length;n;)t[--n]()}function Qe(e){function t(){e(),Ae.splice(Ae.indexOf(t),1)}Ae.push(t),++we,ke(function(){--we===0&&Ke()},[])}function Xe(e){De.some(function(t){return t._value===e._value})||De.push(e)}function Ye(e){for(var t=De.length;t;)if(De[--t]._value===e._value){De.splice(t,1);return}}function Je(e){return new Fe(ge,!1,e)}function Ze(e,t){var n=Ne;return function(){var r=ze(),o=Ne;try{return mt(n,!0),e.apply(this,arguments)}catch(e){t&&t(e)}finally{mt(o,!1),r&&je()}}}var et={awaits:0,echoes:0,id:0},tt=0,nt=[],rt=0,ot=0,at=0;function it(e,t,n,r){var o=Ne,a=Object.create(o);a.parent=o,a.ref=0,a.global=!1,a.id=++at,Pe.env,a.env=Le?{Promise:Fe,PromiseProp:{value:Fe,configurable:!0,writable:!0},all:Fe.all,race:Fe.race,allSettled:Fe.allSettled,any:Fe.any,resolve:Fe.resolve,reject:Fe.reject}:{},t&&s(a,t),++o.ref,a.finalize=function(){--this.parent.ref||this.parent.finalize()};var i=_t(a,e,n,r);return a.ref===0&&a.finalize(),i}function lt(){return et.id||(et.id=++tt),++et.awaits,et.echoes+=he,et.id}function st(){return et.awaits?(--et.awaits===0&&(et.id=0),et.echoes=et.awaits*he,!0):!1}(""+Se).indexOf("[native code]")===-1&&(lt=st=ae);function ut(e){return et.echoes&&e&&e.constructor===Re?(lt(),e.then(function(e){return st(),e},function(e){return st(),ht(e)})):e}function ct(e){++ot,(!et.echoes||--et.echoes===0)&&(et.echoes=et.awaits=et.id=0),nt.push(Ne),mt(e,!0)}function dt(){var e=nt[nt.length-1];nt.pop(),mt(e,!1)}function mt(e,t){var n=Ne;if((t?et.echoes&&(!rt++||e!==Ne):rt&&(!--rt||e!==Ne))&&queueMicrotask(t?ct.bind(null,e):dt),e!==Ne&&(Ne=e,n===Pe&&(Pe.env=pt()),Le)){var r=Pe.env.Promise,o=e.env;(n.global||e.global)&&(Object.defineProperty(a,"Promise",o.PromiseProp),r.all=o.all,r.race=o.race,r.resolve=o.resolve,r.reject=o.reject,o.allSettled&&(r.allSettled=o.allSettled),o.any&&(r.any=o.any))}}function pt(){var e=a.Promise;return Le?{Promise:e,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:e.all,race:e.race,allSettled:e.allSettled,any:e.any,resolve:e.resolve,reject:e.reject}:{}}function _t(e,t,n,r,o){var a=Ne;try{return mt(e,!0),t(n,r,o)}finally{mt(a,!1)}}function ft(e,t,n,r){return typeof e!="function"?e:function(){var o=Ne;n&&lt(),mt(t,!0);try{return e.apply(this,arguments)}finally{mt(o,!1),r&&queueMicrotask(st)}}}function gt(e){Promise===Re&&et.echoes===0?rt===0?e():enqueueNativeMicroTask(e):setTimeout(e,0)}var ht=Fe.reject;function yt(e,t,n,r){if(!e.idbdb||!e._state.openComplete&&!Ne.letThrough&&!e._vip){if(e._state.openComplete)return ht(new te.DatabaseClosed(e._state.dbOpenError));if(!e._state.isBeingOpened){if(!e._state.autoOpen)return ht(new te.DatabaseClosed);e.open().catch(ae)}return e._state.dbReadyPromise.then(function(){return yt(e,t,n,r)})}else{var o=e._createTransaction(t,n,e._dbSchema);try{o.create(),e._state.PR1398_maxLoop=3}catch(o){return o.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e.close({disableAutoOpen:!1}),e.open().then(function(){return yt(e,t,n,r)})):ht(o)}return o._promise(t,function(e,t){return it(function(){return Ne.trans=o,r(e,t,o)})}).then(function(e){if(t==="readwrite")try{o.idbtrans.commit()}catch(e){}return t==="readonly"?e:o._completion.then(function(){return e})})}}var Ct="4.0.1",bt="\uFFFF",vt=-1/0,St="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Rt="String expected.",Lt=[],Et="__dbnames",kt="readonly",It="readwrite";function Tt(e,t){return e?t?function(){return e.apply(this,arguments)&&t.apply(this,arguments)}:e:t}var Dt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function xt(e){return typeof e=="string"&&!/\./.test(e)?function(t){return t[e]===void 0&&e in t&&(t=w(t),delete t[e]),t}:function(e){return e}}function $t(){throw te.Type()}function Pt(e,t){try{var n=wt(e),r=wt(t);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return e>t?1:e<t?-1:0;case"binary":return Mt(At(e),At(t));case"Array":return Nt(e,t)}}catch(e){}return NaN}function Nt(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,a=0;a<o;++a){var i=Pt(e[a],t[a]);if(i!==0)return i}return n===r?0:n<r?-1:1}function Mt(e,t){for(var n=e.length,r=t.length,o=n<r?n:r,a=0;a<o;++a)if(e[a]!==t[a])return e[a]<t[a]?-1:1;return n===r?0:n<r?-1:1}function wt(e){var t=typeof e;if(t!=="object")return t;if(ArrayBuffer.isView(e))return"binary";var n=O(e);return n==="ArrayBuffer"?"binary":n}function At(e){return e instanceof Uint8Array?e:ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(e)}var Ft=(function(){function e(){}return e.prototype._trans=function(e,t,n){var r=this._tx||Ne.trans,o=this.name,a=_e&&typeof console!="undefined"&&console.createTask&&console.createTask("Dexie: ".concat(e==="readonly"?"read":"write"," ").concat(this.name));function i(e,n,r){if(!r.schema[o])throw new te.NotFound("Table "+o+" not part of transaction");return t(r.idbtrans,r)}var l=ze();try{var s=r&&r.db._novip===this.db._novip?r===Ne.trans?r._promise(e,i,n):it(function(){return r._promise(e,i,n)},{trans:r,transless:Ne.transless||Ne}):yt(this.db,e,[this.name],i);return a&&(s._consoleTask=a,s=s.catch(function(e){return console.trace(e),ht(e)})),s}finally{l&&je()}},e.prototype.get=function(e,t){var n=this;return e&&e.constructor===Object?this.where(e).first(t):e==null?ht(new te.Type("Invalid argument to Table.get()")):this._trans("readonly",function(t){return n.core.get({trans:t,key:e}).then(function(e){return n.hook.reading.fire(e)})}).then(t)},e.prototype.where=function(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(l(e))return new this.db.WhereClause(this,"[".concat(e.join("+"),"]"));var t=i(e);if(t.length===1)return this.where(t[0]).equals(e[t[0]]);var n=this.schema.indexes.concat(this.schema.primKey).filter(function(e){if(e.compound&&t.every(function(t){return e.keyPath.indexOf(t)>=0})){for(var n=0;n<t.length;++n)if(t.indexOf(e.keyPath[n])===-1)return!1;return!0}return!1}).sort(function(e,t){return e.keyPath.length-t.keyPath.length})[0];if(n&&this.db._maxKey!==bt){var r=n.keyPath.slice(0,t.length);return this.where(r).equals(r.map(function(t){return e[t]}))}!n&&_e&&"The query ".concat(JSON.stringify(e)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(t.join("+"),"]");var o=this.schema.idxByName,a=this.db._deps.indexedDB;function s(e,t){return a.cmp(e,t)===0}var u=t.reduce(function(t,n){var r=t[0],a=t[1],i=o[n],u=e[n];return[r||i,r||!i?Tt(a,i&&i.multi?function(e){var t=L(e,n);return l(t)&&t.some(function(e){return s(u,e)})}:function(e){return s(u,L(e,n))}):a]},[null,null]),c=u[0],d=u[1];return c?this.where(c.name).equals(e[c.keyPath]).filter(d):n?this.filter(d):this.where(t).equals("")},e.prototype.filter=function(e){return this.toCollection().and(e)},e.prototype.count=function(e){return this.toCollection().count(e)},e.prototype.offset=function(e){return this.toCollection().offset(e)},e.prototype.limit=function(e){return this.toCollection().limit(e)},e.prototype.each=function(e){return this.toCollection().each(e)},e.prototype.toArray=function(e){return this.toCollection().toArray(e)},e.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},e.prototype.orderBy=function(e){return new this.db.Collection(new this.db.WhereClause(this,l(e)?"[".concat(e.join("+"),"]"):e))},e.prototype.reverse=function(){return this.toCollection().reverse()},e.prototype.mapToClass=function(e){var t=this,r=t.db,o=t.name;this.schema.mappedClass=e,e.prototype instanceof $t&&(e=(function(e){n(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return Object.defineProperty(t.prototype,"db",{get:function(){return r},enumerable:!1,configurable:!0}),t.prototype.table=function(){return o},t})(e));for(var a=new Set,i=e.prototype;i;i=u(i))Object.getOwnPropertyNames(i).forEach(function(e){return a.add(e)});var l=function(t){if(!t)return t;var n=Object.create(e.prototype);for(var r in t)if(!a.has(r))try{n[r]=t[r]}catch(e){}return n};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=l,this.hook("reading",l),e},e.prototype.defineClass=function(){function e(e){s(this,e)}return this.mapToClass(e)},e.prototype.add=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,a=r.keyPath,i=e;return a&&o&&(i=xt(a)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"add",keys:t!=null?[t]:null,values:[i]})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{E(e,a,t)}catch(e){}return t})},e.prototype.update=function(e,t){if(typeof e=="object"&&!l(e)){var n=L(e,this.schema.primKey.keyPath);return n===void 0?ht(new te.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(n).modify(t)}else return this.where(":id").equals(e).modify(t)},e.prototype.put=function(e,t){var n=this,r=this.schema.primKey,o=r.auto,a=r.keyPath,i=e;return a&&o&&(i=xt(a)(e)),this._trans("readwrite",function(e){return n.core.mutate({trans:e,type:"put",values:[i],keys:t!=null?[t]:null})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):e.lastResult}).then(function(t){if(a)try{E(e,a,t)}catch(e){}return t})},e.prototype.delete=function(e){var t=this;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:[e]})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):void 0})},e.prototype.clear=function(){var e=this;return this._trans("readwrite",function(t){return e.core.mutate({trans:t,type:"deleteRange",range:Dt})}).then(function(e){return e.numFailures?Fe.reject(e.failures[0]):void 0})},e.prototype.bulkGet=function(e){var t=this;return this._trans("readonly",function(n){return t.core.getMany({keys:e,trans:n}).then(function(e){return e.map(function(e){return t.hook.reading.fire(e)})})})},e.prototype.bulkAdd=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0;n=n||(o?void 0:t);var a=n?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,i=n.auto,l=n.keyPath;if(l&&o)throw new te.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,u=l&&i?e.map(xt(l)):e;return r.core.mutate({trans:t,type:"add",keys:o,values:u,wantResults:a}).then(function(e){var t=e.numFailures,n=e.results,o=e.lastResult,i=e.failures,l=a?n:o;if(t===0)return l;throw new J("".concat(r.name,".bulkAdd(): ").concat(t," of ").concat(s," operations failed"),i)})})},e.prototype.bulkPut=function(e,t,n){var r=this,o=Array.isArray(t)?t:void 0;n=n||(o?void 0:t);var a=n?n.allKeys:void 0;return this._trans("readwrite",function(t){var n=r.schema.primKey,i=n.auto,l=n.keyPath;if(l&&o)throw new te.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(o&&o.length!==e.length)throw new te.InvalidArgument("Arguments objects and keys must have the same length");var s=e.length,u=l&&i?e.map(xt(l)):e;return r.core.mutate({trans:t,type:"put",keys:o,values:u,wantResults:a}).then(function(e){var t=e.numFailures,n=e.results,o=e.lastResult,i=e.failures,l=a?n:o;if(t===0)return l;throw new J("".concat(r.name,".bulkPut(): ").concat(t," of ").concat(s," operations failed"),i)})})},e.prototype.bulkUpdate=function(e){var t=this,n=this.core,r=e.map(function(e){return e.key}),o=e.map(function(e){return e.changes}),a=[];return this._trans("readwrite",function(i){return n.getMany({trans:i,keys:r,cache:"clone"}).then(function(l){var s=[],u=[];e.forEach(function(e,n){var r=e.key,o=e.changes,i=l[n];if(i){for(var c=0,d=Object.keys(o);c<d.length;c++){var m=d[c],p=o[m];if(m===t.schema.primKey.keyPath){if(Pt(p,r)!==0)throw new te.Constraint("Cannot update primary key in bulkUpdate()")}else E(i,m,p)}a.push(n),s.push(r),u.push(i)}});var c=s.length;return n.mutate({trans:i,type:"put",keys:s,values:u,updates:{keys:r,changeSpecs:o}}).then(function(e){var n=e.numFailures,r=e.failures;if(n===0)return c;for(var o=0,i=Object.keys(r);o<i.length;o++){var l=i[o],s=a[Number(l)];if(s!=null){var u=r[l];delete r[l],r[s]=u}}throw new J("".concat(t.name,".bulkUpdate(): ").concat(n," of ").concat(c," operations failed"),r)})})})},e.prototype.bulkDelete=function(e){var t=this,n=e.length;return this._trans("readwrite",function(n){return t.core.mutate({trans:n,type:"delete",keys:e})}).then(function(e){var r=e.numFailures,o=e.lastResult,a=e.failures;if(r===0)return o;throw new J("".concat(t.name,".bulkDelete(): ").concat(r," of ").concat(n," operations failed"),a)})},e})();function Ot(e){var t={},n=function(n,r){if(r){for(var o=arguments.length,a=new Array(o-1);--o;)a[o-1]=arguments[o];return t[n].subscribe.apply(null,a),e}else if(typeof n=="string")return t[n]};n.addEventType=a;for(var r=1,o=arguments.length;r<o;++r)a(arguments[r]);return n;function a(e,r,o){if(typeof e=="object")return s(e);r||(r=me),o||(o=ae);var a={subscribers:[],fire:o,subscribe:function(e){a.subscribers.indexOf(e)===-1&&(a.subscribers.push(e),a.fire=r(a.fire,e))},unsubscribe:function(e){a.subscribers=a.subscribers.filter(function(t){return t!==e}),a.fire=a.subscribers.reduce(r,o)}};return t[e]=n[e]=a,a}function s(e){i(e).forEach(function(t){var n=e[t];if(l(n))a(t,e[t][0],e[t][1]);else if(n==="asap")var r=a(t,ie,function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];r.subscribers.forEach(function(e){S(function(){e.apply(null,t)})})});else throw new te.InvalidArgument("Invalid event config")})}}function Bt(e,t){return f(t).from({prototype:e}),t}function Wt(e){return Bt(Ft.prototype,function(n,r,o){this.db=e,this._tx=o,this.name=n,this.schema=r,this.hook=e._allTables[n]?e._allTables[n].hook:Ot(null,{creating:[ue,ae],reading:[le,ie],updating:[de,ae],deleting:[ce,ae]})})}function qt(e,t){return!(e.filter||e.algorithm||e.or)&&(t?e.justLimit:!e.replayFilter)}function Ut(e,t){e.filter=Tt(e.filter,t)}function Vt(e,t,n){var r=e.replayFilter;e.replayFilter=r?function(){return Tt(r(),t())}:t,e.justLimit=n&&!r}function Ht(e,t){e.isMatch=Tt(e.isMatch,t)}function Gt(e,t){if(e.isPrimKey)return t.primaryKey;var n=t.getIndexByKeyPath(e.index);if(!n)throw new te.Schema("KeyPath "+e.index+" on object store "+t.name+" is not indexed");return n}function zt(e,t,n){var r=Gt(e,t.schema);return t.openCursor({trans:n,values:!e.keysOnly,reverse:e.dir==="prev",unique:!!e.unique,query:{index:r,range:e.range}})}function jt(e,t,n,r){var o=e.replayFilter?Tt(e.filter,e.replayFilter()):e.filter;if(e.or){var a={},i=function(e,n,r){if(!o||o(n,r,function(e){return n.stop(e)},function(e){return n.fail(e)})){var i=n.primaryKey,l=""+i;l==="[object ArrayBuffer]"&&(l=""+new Uint8Array(i)),d(a,l)||(a[l]=!0,t(e,n,r))}};return Promise.all([e.or._iterate(i,n),Kt(zt(e,r,n),e.algorithm,i,!e.keysOnly&&e.valueMapper)])}else return Kt(zt(e,r,n),Tt(e.algorithm,o),t,!e.keysOnly&&e.valueMapper)}function Kt(e,t,n,r){var o=r?function(e,t,o){return n(r(e),t,o)}:n,a=Ze(o);return e.then(function(e){if(e)return e.start(function(){var n=function(){return e.continue()};(!t||t(e,function(e){return n=e},function(t){e.stop(t),n=ae},function(t){e.fail(t),n=ae}))&&a(e.value,e,function(e){return n=e}),n()})})}var Qt=Symbol(),Xt=(function(){function e(e){Object.assign(this,e)}return e.prototype.execute=function(e){var t,n=(t=this.replacePrefix)===null||t===void 0?void 0:t[0];return n&&typeof e=="string"&&e.startsWith(n)?this.replacePrefix[1]+e.substring(n.length):e},e})(),Yt=(function(){function e(){}return e.prototype._read=function(e,t){var n=this._ctx;return n.error?n.table._trans(null,ht.bind(null,n.error)):n.table._trans("readonly",e).then(t)},e.prototype._write=function(e){var t=this._ctx;return t.error?t.table._trans(null,ht.bind(null,t.error)):t.table._trans("readwrite",e,"locked")},e.prototype._addAlgorithm=function(e){var t=this._ctx;t.algorithm=Tt(t.algorithm,e)},e.prototype._iterate=function(e,t){return jt(this._ctx,e,t,this._ctx.table.core)},e.prototype.clone=function(e){var t=Object.create(this.constructor.prototype),n=Object.create(this._ctx);return e&&s(n,e),t._ctx=n,t},e.prototype.raw=function(){return this._ctx.valueMapper=null,this},e.prototype.each=function(e){var t=this._ctx;return this._read(function(n){return jt(t,e,n,t.table.core)})},e.prototype.count=function(e){var t=this;return this._read(function(e){var n=t._ctx,r=n.table.core;if(qt(n,!0))return r.count({trans:e,query:{index:Gt(n,r.schema),range:n.range}}).then(function(e){return Math.min(e,n.limit)});var o=0;return jt(n,function(){return++o,!1},e,r).then(function(){return o})}).then(e)},e.prototype.sortBy=function(e,t){var n=e.split(".").reverse(),r=n[0],o=n.length-1;function a(e,t){return t?a(e[n[t]],t-1):e[r]}var i=this._ctx.dir==="next"?1:-1;function l(e,t){var n=a(e,o),r=a(t,o);return n<r?-i:n>r?i:0}return this.toArray(function(e){return e.sort(l)}).then(t)},e.prototype.toArray=function(e){var t=this;return this._read(function(e){var n=t._ctx;if(n.dir==="next"&&qt(n,!0)&&n.limit>0){var r=n.valueMapper,o=Gt(n,n.table.core.schema);return n.table.core.query({trans:e,limit:n.limit,values:!0,query:{index:o,range:n.range}}).then(function(e){var t=e.result;return r?t.map(r):t})}else{var a=[];return jt(n,function(e){return a.push(e)},e,n.table.core).then(function(){return a})}},e)},e.prototype.offset=function(e){var t=this._ctx;return e<=0?this:(t.offset+=e,qt(t)?Vt(t,function(){var t=e;return function(e,n){return t===0?!0:t===1?(--t,!1):(n(function(){e.advance(t),t=0}),!1)}}):Vt(t,function(){var t=e;return function(){return--t<0}}),this)},e.prototype.limit=function(e){return this._ctx.limit=Math.min(this._ctx.limit,e),Vt(this._ctx,function(){var t=e;return function(e,n,r){return--t<=0&&n(r),t>=0}},!0),this},e.prototype.until=function(e,t){return Ut(this._ctx,function(n,r,o){return e(n.value)?(r(o),t):!0}),this},e.prototype.first=function(e){return this.limit(1).toArray(function(e){return e[0]}).then(e)},e.prototype.last=function(e){return this.reverse().first(e)},e.prototype.filter=function(e){return Ut(this._ctx,function(t){return e(t.value)}),Ht(this._ctx,e),this},e.prototype.and=function(e){return this.filter(e)},e.prototype.or=function(e){return new this.db.WhereClause(this._ctx.table,e,this)},e.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},e.prototype.desc=function(){return this.reverse()},e.prototype.eachKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.key,n)})},e.prototype.eachUniqueKey=function(e){return this._ctx.unique="unique",this.eachKey(e)},e.prototype.eachPrimaryKey=function(e){var t=this._ctx;return t.keysOnly=!t.isMatch,this.each(function(t,n){e(n.primaryKey,n)})},e.prototype.keys=function(e){var t=this._ctx;t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.key)}).then(function(){return n}).then(e)},e.prototype.primaryKeys=function(e){var t=this._ctx;if(t.dir==="next"&&qt(t,!0)&&t.limit>0)return this._read(function(e){var n=Gt(t,t.table.core.schema);return t.table.core.query({trans:e,values:!1,limit:t.limit,query:{index:n,range:t.range}})}).then(function(e){var t=e.result;return t}).then(e);t.keysOnly=!t.isMatch;var n=[];return this.each(function(e,t){n.push(t.primaryKey)}).then(function(){return n}).then(e)},e.prototype.uniqueKeys=function(e){return this._ctx.unique="unique",this.keys(e)},e.prototype.firstKey=function(e){return this.limit(1).keys(function(e){return e[0]}).then(e)},e.prototype.lastKey=function(e){return this.reverse().firstKey(e)},e.prototype.distinct=function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var n={};return Ut(this._ctx,function(e){var t=e.primaryKey.toString(),r=d(n,t);return n[t]=!0,!r}),this},e.prototype.modify=function(e){var t=this,n=this._ctx;return this._write(function(r){var o;if(typeof e=="function")o=e;else{var a=i(e),l=a.length;o=function(t){for(var n=!1,r=0;r<l;++r){var o=a[r],i=e[o],s=L(t,o);i instanceof Xt?(E(t,o,i.execute(s)),n=!0):s!==i&&(E(t,o,i),n=!0)}return n}}var s=n.table.core,u=s.schema.primaryKey,c=u.outbound,d=u.extractKey,m=t.db._options.modifyChunkSize||200,p=[],_=0,f=[],g=function(e,t){var n=t.failures,r=t.numFailures;_+=e-r;for(var o=0,a=i(n);o<a.length;o++){var l=a[o];p.push(n[l])}};return t.clone().primaryKeys().then(function(t){var a=function(i){var l=Math.min(m,t.length-i);return s.getMany({trans:r,keys:t.slice(i,i+l),cache:"immutable"}).then(function(u){for(var p=[],_=[],f=c?[]:null,h=[],y=0;y<l;++y){var C=u[y],b={value:w(C),primKey:t[i+y]};o.call(b,b.value,b)!==!1&&(b.value==null?h.push(t[i+y]):!c&&Pt(d(C),d(b.value))!==0?(h.push(t[i+y]),p.push(b.value)):(_.push(b.value),c&&f.push(t[i+y])))}var v=qt(n)&&n.limit===1/0&&(typeof e!="function"||e===Jt)&&{index:n.index,range:n.range};return Promise.resolve(p.length>0&&s.mutate({trans:r,type:"add",values:p}).then(function(e){for(var t in e.failures)h.splice(parseInt(t),1);g(p.length,e)})).then(function(){return(_.length>0||v&&typeof e=="object")&&s.mutate({trans:r,type:"put",keys:f,values:_,criteria:v,changeSpec:typeof e!="function"&&e}).then(function(e){return g(_.length,e)})}).then(function(){return(h.length>0||v&&e===Jt)&&s.mutate({trans:r,type:"delete",keys:h,criteria:v}).then(function(e){return g(h.length,e)})}).then(function(){return t.length>i+l&&a(i+m)})})};return a(0).then(function(){if(p.length>0)throw new Y("Error modifying one or more objects",p,_,f);return t.length})})})},e.prototype.delete=function(){var e=this._ctx,t=e.range;return qt(e)&&(e.isPrimKey||t.type===3)?this._write(function(n){var r=e.table.core.schema.primaryKey,o=t;return e.table.core.count({trans:n,query:{index:r,range:o}}).then(function(t){return e.table.core.mutate({trans:n,type:"deleteRange",range:o}).then(function(e){var n=e.failures;e.lastResult,e.results;var r=e.numFailures;if(r)throw new Y("Could not delete some values",Object.keys(n).map(function(e){return n[e]}),t-r);return t-r})})}):this.modify(Jt)},e})(),Jt=function(e,t){return t.value=null};function Zt(e){return Bt(Yt.prototype,function(n,r){this.db=e;var t=Dt,o=null;if(r)try{t=r()}catch(e){o=e}var a=n._ctx,i=a.table,l=i.hook.reading.fire;this._ctx={table:i,index:a.index,isPrimKey:!a.index||i.schema.primKey.keyPath&&a.index===i.schema.primKey.name,range:t,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:o,or:a.or,valueMapper:l!==ie?l:null}})}function en(e,t){return e<t?-1:e===t?0:1}function tn(e,t){return e>t?-1:e===t?0:1}function nn(e,t,n){var r=e instanceof dn?new e.Collection(e):e;return r._ctx.error=n?new n(t):new TypeError(t),r}function rn(e){return new e.Collection(e,function(){return cn("")}).limit(0)}function on(e){return e==="next"?function(e){return e.toUpperCase()}:function(e){return e.toLowerCase()}}function an(e){return e==="next"?function(e){return e.toLowerCase()}:function(e){return e.toUpperCase()}}function ln(e,t,n,r,o,a){for(var i=Math.min(e.length,r.length),l=-1,s=0;s<i;++s){var u=t[s];if(u!==r[s])return o(e[s],n[s])<0?e.substr(0,s)+n[s]+n.substr(s+1):o(e[s],r[s])<0?e.substr(0,s)+r[s]+n.substr(s+1):l>=0?e.substr(0,l)+t[l]+n.substr(l+1):null;o(e[s],u)<0&&(l=s)}return i<r.length&&a==="next"?e+n.substr(e.length):i<e.length&&a==="prev"?e.substr(0,n.length):l<0?null:e.substr(0,l)+r[l]+n.substr(l+1)}function sn(e,t,n,r){var o,a,i,l,s,u,c,d=n.length;if(!n.every(function(e){return typeof e=="string"}))return nn(e,Rt);function m(e){o=on(e),a=an(e),i=e==="next"?en:tn;var t=n.map(function(e){return{lower:a(e),upper:o(e)}}).sort(function(e,t){return i(e.lower,t.lower)});l=t.map(function(e){return e.upper}),s=t.map(function(e){return e.lower}),u=e,c=e==="next"?"":r}m("next");var p=new e.Collection(e,function(){return un(l[0],s[d-1]+r)});p._ondirectionchange=function(e){m(e)};var _=0;return p._addAlgorithm(function(e,n,r){var o=e.key;if(typeof o!="string")return!1;var m=a(o);if(t(m,s,_))return!0;for(var p=null,f=_;f<d;++f){var g=ln(o,m,l[f],s[f],i,u);g===null&&p===null?_=f+1:(p===null||i(p,g)>0)&&(p=g)}return n(p!==null?function(){e.continue(p+c)}:r),!1}),p}function un(e,t,n,r){return{type:2,lower:e,upper:t,lowerOpen:n,upperOpen:r}}function cn(e){return{type:1,lower:e,upper:e}}var dn=(function(){function e(){}return Object.defineProperty(e.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),e.prototype.between=function(e,t,n,r){n=n!==!1,r=r===!0;try{return this._cmp(e,t)>0||this._cmp(e,t)===0&&(n||r)&&!(n&&r)?rn(this):new this.Collection(this,function(){return un(e,t,!n,!r)})}catch(e){return nn(this,St)}},e.prototype.equals=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return cn(e)})},e.prototype.above=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(e,void 0,!0)})},e.prototype.aboveOrEqual=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(e,void 0,!1)})},e.prototype.below=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(void 0,e,!1,!0)})},e.prototype.belowOrEqual=function(e){return e==null?nn(this,St):new this.Collection(this,function(){return un(void 0,e)})},e.prototype.startsWith=function(e){return typeof e!="string"?nn(this,Rt):this.between(e,e+bt,!0,!0)},e.prototype.startsWithIgnoreCase=function(e){return e===""?this.startsWith(e):sn(this,function(e,t){return e.indexOf(t[0])===0},[e],bt)},e.prototype.equalsIgnoreCase=function(e){return sn(this,function(e,t){return e===t[0]},[e],"")},e.prototype.anyOfIgnoreCase=function(){var e=V.apply(U,arguments);return e.length===0?rn(this):sn(this,function(e,t){return t.indexOf(e)!==-1},e,"")},e.prototype.startsWithAnyOfIgnoreCase=function(){var e=V.apply(U,arguments);return e.length===0?rn(this):sn(this,function(e,t){return t.some(function(t){return e.indexOf(t)===0})},e,bt)},e.prototype.anyOf=function(){var e=this,t=V.apply(U,arguments),n=this._cmp;try{t.sort(n)}catch(e){return nn(this,St)}if(t.length===0)return rn(this);var r=new this.Collection(this,function(){return un(t[0],t[t.length-1])});r._ondirectionchange=function(r){n=r==="next"?e._ascending:e._descending,t.sort(n)};var o=0;return r._addAlgorithm(function(e,r,a){for(var i=e.key;n(i,t[o])>0;)if(++o,o===t.length)return r(a),!1;return n(i,t[o])===0?!0:(r(function(){e.continue(t[o])}),!1)}),r},e.prototype.notEqual=function(e){return this.inAnyRange([[vt,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},e.prototype.noneOf=function(){var e=V.apply(U,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch(e){return nn(this,St)}var t=e.reduce(function(e,t){return e?e.concat([[e[e.length-1][1],t]]):[[vt,t]]},null);return t.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},e.prototype.inAnyRange=function(e,t){var n=this,r=this._cmp,o=this._ascending,a=this._descending,i=this._min,l=this._max;if(e.length===0)return rn(this);if(!e.every(function(e){return e[0]!==void 0&&e[1]!==void 0&&o(e[0],e[1])<=0}))return nn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",te.InvalidArgument);var s=!t||t.includeLowers!==!1,u=t&&t.includeUppers===!0;function c(e,t){for(var n=0,o=e.length;n<o;++n){var a=e[n];if(r(t[0],a[1])<0&&r(t[1],a[0])>0){a[0]=i(a[0],t[0]),a[1]=l(a[1],t[1]);break}}return n===o&&e.push(t),e}var d=o;function m(e,t){return d(e[0],t[0])}var p;try{p=e.reduce(c,[]),p.sort(m)}catch(e){return nn(this,St)}var _=0,f=u?function(e){return o(e,p[_][1])>0}:function(e){return o(e,p[_][1])>=0},g=s?function(e){return a(e,p[_][0])>0}:function(e){return a(e,p[_][0])>=0};function h(e){return!f(e)&&!g(e)}var y=f,C=new this.Collection(this,function(){return un(p[0][0],p[p.length-1][1],!s,!u)});return C._ondirectionchange=function(e){e==="next"?(y=f,d=o):(y=g,d=a),p.sort(m)},C._addAlgorithm(function(e,t,r){for(var a=e.key;y(a);)if(++_,_===p.length)return t(r),!1;return h(a)?!0:(n._cmp(a,p[_][1])===0||n._cmp(a,p[_][0])===0||t(function(){d===o?e.continue(p[_][0]):e.continue(p[_][1])}),!1)}),C},e.prototype.startsWithAnyOf=function(){var e=V.apply(U,arguments);return e.every(function(e){return typeof e=="string"})?e.length===0?rn(this):this.inAnyRange(e.map(function(e){return[e,e+bt]})):nn(this,"startsWithAnyOf() only works with strings")},e})();function mn(e){return Bt(dn.prototype,function(n,r,o){if(this.db=e,this._ctx={table:n,index:r===":id"?null:r,or:o},this._cmp=this._ascending=Pt,this._descending=function(e,t){return Pt(t,e)},this._max=function(e,t){return Pt(e,t)>0?e:t},this._min=function(e,t){return Pt(e,t)<0?e:t},this._IDBKeyRange=e._deps.IDBKeyRange,!this._IDBKeyRange)throw new te.MissingAPI})}function pn(e){return Ze(function(t){return _n(t),e(t.target.error),!1})}function _n(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault()}var fn="storagemutated",gn="x-storagemutated-1",hn=Ot(null,fn),yn=(function(){function e(){}return e.prototype._lock=function(){return v(!Ne.global),++this._reculock,this._reculock===1&&!Ne.global&&(Ne.lockOwnerFor=this),this},e.prototype._unlock=function(){if(v(!Ne.global),--this._reculock===0)for(Ne.global||(Ne.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{_t(e[1],e[0])}catch(e){}}return this},e.prototype._locked=function(){return this._reculock&&Ne.lockOwnerFor!==this},e.prototype.create=function(e){var t=this;if(!this.mode)return this;var n=this.db.idbdb,r=this.db._state.dbOpenError;if(v(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new te.DatabaseClosed(r);case"MissingAPIError":throw new te.MissingAPI(r.message,r);default:throw new te.OpenFailed(r)}if(!this.active)throw new te.TransactionInactive;return v(this._completion._state===null),e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})),e.onerror=Ze(function(n){_n(n),t._reject(e.error)}),e.onabort=Ze(function(n){_n(n),t.active&&t._reject(new te.Abort(e.error)),t.active=!1,t.on("abort").fire(n)}),e.oncomplete=Ze(function(){t.active=!1,t._resolve(),"mutatedParts"in e&&hn.storagemutated.fire(e.mutatedParts)}),this},e.prototype._promise=function(e,t,n){var r=this;if(e==="readwrite"&&this.mode!=="readwrite")return ht(new te.ReadOnly("Transaction is readonly"));if(!this.active)return ht(new te.TransactionInactive);if(this._locked())return new Fe(function(o,a){r._blockedFuncs.push([function(){r._promise(e,t,n).then(o,a)},Ne])});if(n)return it(function(){var e=new Fe(function(e,n){r._lock();var o=t(e,n,r);o&&o.then&&o.then(e,n)});return e.finally(function(){return r._unlock()}),e._lib=!0,e});var o=new Fe(function(e,n){var o=t(e,n,r);o&&o.then&&o.then(e,n)});return o._lib=!0,o},e.prototype._root=function(){return this.parent?this.parent._root():this},e.prototype.waitFor=function(e){var t=this._root(),n=Fe.resolve(e);if(t._waitingFor)t._waitingFor=t._waitingFor.then(function(){return n});else{t._waitingFor=n,t._waitingQueue=[];var r=t.idbtrans.objectStore(t.storeNames[0]);(function e(){for(++t._spinCount;t._waitingQueue.length;)t._waitingQueue.shift()();t._waitingFor&&(r.get(-1/0).onsuccess=e)})()}var o=t._waitingFor;return new Fe(function(e,r){n.then(function(n){return t._waitingQueue.push(Ze(e.bind(null,n)))},function(e){return t._waitingQueue.push(Ze(r.bind(null,e)))}).finally(function(){t._waitingFor===o&&(t._waitingFor=null)})})},e.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new te.Abort))},e.prototype.table=function(e){var t=this._memoizedTables||(this._memoizedTables={});if(d(t,e))return t[e];var n=this.schema[e];if(!n)throw new te.NotFound("Table "+e+" not part of transaction");var r=new this.db.Table(e,n,this);return r.core=this.db.core.table(e),t[e]=r,r},e})();function Cn(e){return Bt(yn.prototype,function(n,r,o,a,i){var t=this;this.db=e,this.mode=n,this.storeNames=r,this.schema=o,this.chromeTransactionDurability=a,this.idbtrans=null,this.on=Ot(this,"complete","error","abort"),this.parent=i||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Fe(function(e,n){t._resolve=e,t._reject=n}),this._completion.then(function(){t.active=!1,t.on.complete.fire()},function(e){var n=t.active;return t.active=!1,t.on.error.fire(e),t.parent?t.parent._reject(e):n&&t.idbtrans&&t.idbtrans.abort(),ht(e)})})}function bn(e,t,n,r,o,a,i){return{name:e,keyPath:t,unique:n,multi:r,auto:o,compound:a,src:(n&&!i?"&":"")+(r?"*":"")+(o?"++":"")+vn(t)}}function vn(e){return typeof e=="string"?e:e?"["+[].join.call(e,"+")+"]":""}function Sn(e,t,n){return{name:e,primKey:t,indexes:n,mappedClass:null,idxByName:R(n,function(e){return[e.name,e]})}}function Rn(e){return e.length===1?e[0]:e}var Ln=function(e){try{return e.only([[]]),Ln=function(){return[[]]},[[]]}catch(e){return Ln=function(){return bt},bt}};function En(e){return e==null?function(){}:typeof e=="string"?kn(e):function(t){return L(t,e)}}function kn(e){var t=e.split(".");return t.length===1?function(t){return t[e]}:function(t){return L(t,e)}}function In(e){return[].slice.call(e)}var Tn=0;function Dn(e){return e==null?":id":typeof e=="string"?e:"[".concat(e.join("+"),"]")}function xn(e,t,n){function r(e,t){var n=In(e.objectStoreNames);return{schema:{name:e.name,tables:n.map(function(e){return t.objectStore(e)}).map(function(e){var t=e.keyPath,n=e.autoIncrement,r=l(t),o=t==null,a={},i={name:e.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:o,compound:r,keyPath:t,autoIncrement:n,unique:!0,extractKey:En(t)},indexes:In(e.indexNames).map(function(t){return e.index(t)}).map(function(e){var t=e.name,n=e.unique,r=e.multiEntry,o=e.keyPath,i=l(o),s={name:t,compound:i,keyPath:o,unique:n,multiEntry:r,extractKey:En(o)};return a[Dn(o)]=s,s}),getIndexByKeyPath:function(e){return a[Dn(e)]}};return a[":id"]=i.primaryKey,t!=null&&(a[Dn(t)]=i.primaryKey),i})},hasGetAll:n.length>0&&"getAll"in t.objectStore(n[0])&&!(typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}function o(e){if(e.type===3)return null;if(e.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var n=e.lower,r=e.upper,o=e.lowerOpen,a=e.upperOpen,i=n===void 0?r===void 0?null:t.upperBound(r,!!a):r===void 0?t.lowerBound(n,!!o):t.bound(n,r,!!o,!!a);return i}function a(e){var t=e.name;function n(e){var n=e.trans,r=e.type,a=e.keys,i=e.values,l=e.range;return new Promise(function(e,s){e=Ze(e);var u=n.objectStore(t),c=u.keyPath==null,d=r==="put"||r==="add";if(!d&&r!=="delete"&&r!=="deleteRange")throw new Error("Invalid operation type: "+r);var m=(a||i||{length:1}).length;if(a&&i&&a.length!==i.length)throw new Error("Given keys array must have same length as given values array.");if(m===0)return e({numFailures:0,failures:{},results:[],lastResult:void 0});var p,_=[],f=[],g=0,h=function(e){++g,_n(e)};if(r==="deleteRange"){if(l.type===4)return e({numFailures:g,failures:f,results:[],lastResult:void 0});l.type===3?_.push(p=u.clear()):_.push(p=u.delete(o(l)))}else{var y=d?c?[i,a]:[i,null]:[a,null],C=y[0],b=y[1];if(d)for(var v=0;v<m;++v)_.push(p=b&&b[v]!==void 0?u[r](C[v],b[v]):u[r](C[v])),p.onerror=h;else for(var v=0;v<m;++v)_.push(p=u[r](C[v])),p.onerror=h}var S=function(t){var n=t.target.result;_.forEach(function(e,t){return e.error!=null&&(f[t]=e.error)}),e({numFailures:g,failures:f,results:r==="delete"?a:_.map(function(e){return e.result}),lastResult:n})};p.onerror=function(e){h(e),S(e)},p.onsuccess=S})}function r(e){var n=e.trans,r=e.values,a=e.query,i=e.reverse,l=e.unique;return new Promise(function(e,s){e=Ze(e);var u=a.index,c=a.range,d=n.objectStore(t),m=u.isPrimaryKey?d:d.index(u.name),p=i?l?"prevunique":"prev":l?"nextunique":"next",_=r||!("openKeyCursor"in m)?m.openCursor(o(c),p):m.openKeyCursor(o(c),p);_.onerror=pn(s),_.onsuccess=Ze(function(t){var r=_.result;if(!r){e(null);return}r.___id=++Tn,r.done=!1;var o=r.continue.bind(r),a=r.continuePrimaryKey;a&&(a=a.bind(r));var i=r.advance.bind(r),l=function(){throw new Error("Cursor not started")},u=function(){throw new Error("Cursor not stopped")};r.trans=n,r.stop=r.continue=r.continuePrimaryKey=r.advance=l,r.fail=Ze(s),r.next=function(){var e=this,t=1;return this.start(function(){return t--?e.continue():e.stop()}).then(function(){return e})},r.start=function(e){var t=new Promise(function(e,t){e=Ze(e),_.onerror=pn(t),r.fail=t,r.stop=function(t){r.stop=r.continue=r.continuePrimaryKey=r.advance=u,e(t)}}),n=function(){if(_.result)try{e()}catch(e){r.fail(e)}else r.done=!0,r.start=function(){throw new Error("Cursor behind last entry")},r.stop()};return _.onsuccess=Ze(function(e){_.onsuccess=n,n()}),r.continue=o,r.continuePrimaryKey=a,r.advance=i,n(),t},e(r)},s)})}function a(e){return function(n){return new Promise(function(r,a){r=Ze(r);var i=n.trans,l=n.values,s=n.limit,u=n.query,c=s===1/0?void 0:s,d=u.index,m=u.range,p=i.objectStore(t),_=d.isPrimaryKey?p:p.index(d.name),f=o(m);if(s===0)return r({result:[]});if(e){var g=l?_.getAll(f,c):_.getAllKeys(f,c);g.onsuccess=function(e){return r({result:e.target.result})},g.onerror=pn(a)}else{var h=0,y=l||!("openKeyCursor"in _)?_.openCursor(f):_.openKeyCursor(f),C=[];y.onsuccess=function(e){var t=y.result;if(!t)return r({result:C});if(C.push(l?t.value:t.primaryKey),++h===s)return r({result:C});t.continue()},y.onerror=pn(a)}})}}return{name:t,schema:e,mutate:n,getMany:function(e){var n=e.trans,r=e.keys;return new Promise(function(e,o){e=Ze(e);for(var a=n.objectStore(t),i=r.length,l=new Array(i),s=0,u=0,c,d=function(t){var n=t.target;(l[n._pos]=n.result)!=null,++u===s&&e(l)},m=pn(o),p=0;p<i;++p){var _=r[p];_!=null&&(c=a.get(r[p]),c._pos=p,c.onsuccess=d,c.onerror=m,++s)}s===0&&e(l)})},get:function(e){var n=e.trans,r=e.key;return new Promise(function(e,o){e=Ze(e);var a=n.objectStore(t),i=a.get(r);i.onsuccess=function(t){return e(t.target.result)},i.onerror=pn(o)})},query:a(u),openCursor:r,count:function(e){var n=e.query,r=e.trans,a=n.index,i=n.range;return new Promise(function(e,n){var l=r.objectStore(t),s=a.isPrimaryKey?l:l.index(a.name),u=o(i),c=u?s.count(u):s.count();c.onsuccess=Ze(function(t){return e(t.target.result)}),c.onerror=pn(n)})}}}var i=r(e,n),s=i.schema,u=i.hasGetAll,c=s.tables.map(function(e){return a(e)}),d={};return c.forEach(function(e){return d[e.name]=e}),{stack:"dbcore",transaction:e.transaction.bind(e),table:function(e){var t=d[e];if(!t)throw new Error("Table '".concat(e,"' not found"));return d[e]},MIN_KEY:-1/0,MAX_KEY:Ln(t),schema:s}}function $n(e,t){return t.reduce(function(e,t){var n=t.create;return r(r({},e),n(e))},e)}function Pn(e,t,n,r){var o=n.IDBKeyRange;n.indexedDB;var a=$n(xn(t,o,r),e.dbcore);return{dbcore:a}}function Nn(e,t){var n=t.db,r=Pn(e._middlewares,n,e._deps,t);e.core=r.dbcore,e.tables.forEach(function(t){var n=t.name;e.core.schema.tables.some(function(e){return e.name===n})&&(t.core=e.core.table(n),e[n]instanceof e.Table&&(e[n].core=t.core))})}function Mn(e,t,n,r){n.forEach(function(n){var o=r[n];t.forEach(function(t){var r=h(t,n);(!r||"value"in r&&r.value===void 0)&&(t===e.Transaction.prototype||t instanceof e.Transaction?_(t,n,{get:function(){return this.table(n)},set:function(e){p(this,n,{value:e,writable:!0,configurable:!0,enumerable:!0})}}):t[n]=new e.Table(n,o))})})}function wn(e,t){t.forEach(function(t){for(var n in t)t[n]instanceof e.Table&&delete t[n]})}function An(e,t){return e._cfg.version-t._cfg.version}function Fn(e,t,n,r){var o=e._dbSchema;n.objectStoreNames.contains("$meta")&&!o.$meta&&(o.$meta=Sn("$meta",Xn("")[0],[]),e._storeNames.push("$meta"));var a=e._createTransaction("readwrite",e._storeNames,o);a.create(n),a._completion.catch(r);var l=a._reject.bind(a),s=Ne.transless||Ne;it(function(){if(Ne.trans=a,Ne.transless=s,t===0)i(o).forEach(function(e){Un(n,e,o[e].primKey,o[e].indexes)}),Nn(e,n),Fe.follow(function(){return e.on.populate.fire(a)}).catch(l);else return Nn(e,n),Bn(e,a,t).then(function(t){return Wn(e,t,a,n)}).catch(l)})}function On(e,t){Vn(e._dbSchema,t),t.db.version%10===0&&!t.objectStoreNames.contains("$meta")&&t.db.createObjectStore("$meta").add(Math.ceil(t.db.version/10-1),"version");var n=zn(e,e.idbdb,t);Qn(e,e._dbSchema,t);for(var r=qn(n,e._dbSchema),o=function(e){if(e.change.length||e.recreate)return"Unable to patch indexes of table ".concat(e.name," because it has changes on the type of index or primary key."),{value:void 0};var n=t.objectStore(e.name);e.add.forEach(function(t){_e&&"Dexie upgrade patch: Creating missing index ".concat(e.name,".").concat(t.src),Gn(n,t)})},a=0,i=r.change;a<i.length;a++){var l=i[a],s=o(l);if(typeof s=="object")return s.value}}function Bn(e,t,n){return t.storeNames.includes("$meta")?t.table("$meta").get("version").then(function(e){return e!=null?e:n}):Fe.resolve(n)}function Wn(e,t,n,r){var o=[],a=e._versions,l=e._dbSchema=zn(e,e.idbdb,r),s=a.filter(function(e){return e._cfg.version>=t});if(s.length===0)return Fe.resolve();s.forEach(function(a){o.push(function(){var o=l,s=a._cfg.dbschema;Qn(e,o,r),Qn(e,s,r),l=e._dbSchema=s;var u=qn(o,s);u.add.forEach(function(e){Un(r,e[0],e[1].primKey,e[1].indexes)}),u.change.forEach(function(e){if(e.recreate)throw new te.Upgrade("Not yet support for changing primary key");var t=r.objectStore(e.name);e.add.forEach(function(e){return Gn(t,e)}),e.change.forEach(function(e){t.deleteIndex(e.name),Gn(t,e)}),e.del.forEach(function(e){return t.deleteIndex(e)})});var c=a._cfg.contentUpgrade;if(c&&a._cfg.version>t){Nn(e,r),n._memoizedTables={};var d=I(s);u.del.forEach(function(e){d[e]=o[e]}),wn(e,[e.Transaction.prototype]),Mn(e,[e.Transaction.prototype],i(d),d),n.schema=d;var m=H(c);m&&lt();var p,_=Fe.follow(function(){if(p=c(n),p&&m){var e=st.bind(null,null);p.then(e,e)}});return p&&typeof p.then=="function"?Fe.resolve(p):_.then(function(){return p})}}),o.push(function(t){var r=a._cfg.dbschema;Hn(r,t),wn(e,[e.Transaction.prototype]),Mn(e,[e.Transaction.prototype],e._storeNames,e._dbSchema),n.schema=e._dbSchema}),o.push(function(t){e.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(e.idbdb.version/10)===a._cfg.version?(e.idbdb.deleteObjectStore("$meta"),delete e._dbSchema.$meta,e._storeNames=e._storeNames.filter(function(e){return e!=="$meta"})):t.objectStore("$meta").put(a._cfg.version,"version"))})});function u(){return o.length?Fe.resolve(o.shift()(n.idbtrans)).then(u):Fe.resolve()}return u().then(function(){Vn(l,r)})}function qn(e,t){var n={del:[],add:[],change:[]},r;for(r in e)t[r]||n.del.push(r);for(r in t){var o=e[r],a=t[r];if(!o)n.add.push([r,a]);else{var i={name:r,def:a,recreate:!1,del:[],add:[],change:[]};if(""+(o.primKey.keyPath||"")!=""+(a.primKey.keyPath||"")||o.primKey.auto!==a.primKey.auto)i.recreate=!0,n.change.push(i);else{var l=o.idxByName,s=a.idxByName,u=void 0;for(u in l)s[u]||i.del.push(u);for(u in s){var c=l[u],d=s[u];c?c.src!==d.src&&i.change.push(d):i.add.push(d)}(i.del.length>0||i.add.length>0||i.change.length>0)&&n.change.push(i)}}}return n}function Un(e,t,n,r){var o=e.db.createObjectStore(t,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(function(e){return Gn(o,e)}),o}function Vn(e,t){i(e).forEach(function(n){t.db.objectStoreNames.contains(n)||Un(t,n,e[n].primKey,e[n].indexes)})}function Hn(e,t){[].slice.call(t.db.objectStoreNames).forEach(function(n){return e[n]==null&&t.db.deleteObjectStore(n)})}function Gn(e,t){e.createIndex(t.name,t.keyPath,{unique:t.unique,multiEntry:t.multi})}function zn(e,t,n){var r={},o=C(t.objectStoreNames,0);return o.forEach(function(e){for(var t=n.objectStore(e),o=t.keyPath,a=bn(vn(o),o||"",!0,!1,!!t.autoIncrement,o&&typeof o!="string",!0),i=[],l=0;l<t.indexNames.length;++l){var s=t.index(t.indexNames[l]);o=s.keyPath;var u=bn(s.name,o,!!s.unique,!!s.multiEntry,!1,o&&typeof o!="string",!1);i.push(u)}r[e]=Sn(e,a,i)}),r}function jn(e,t,n){e.verno=t.version/10;var r=e._dbSchema=zn(e,t,n);e._storeNames=C(t.objectStoreNames,0),Mn(e,[e._allTables],i(r),r)}function Kn(e,t){var n=zn(e,e.idbdb,t),r=qn(n,e._dbSchema);return!(r.add.length||r.change.some(function(e){return e.add.length||e.change.length}))}function Qn(e,t,n){for(var r=n.db.objectStoreNames,o=0;o<r.length;++o){var i=r[o],l=n.objectStore(i);e._hasGetAll="getAll"in l;for(var s=0;s<l.indexNames.length;++s){var u=l.indexNames[s],c=l.index(u).keyPath,d=typeof c=="string"?c:"["+C(c).join("+")+"]";if(t[i]){var m=t[i].idxByName[d];m&&(m.name=u,delete t[i].idxByName[d],t[i].idxByName[u]=m)}}}typeof navigator!="undefined"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(e._hasGetAll=!1)}function Xn(e){return e.split(",").map(function(e,t){e=e.trim();var n=e.replace(/([&*]|\+\+)/g,""),r=/^\[/.test(n)?n.match(/^\[(.*)\]$/)[1].split("+"):n;return bn(n,r||null,/\&/.test(e),/\*/.test(e),/\+\+/.test(e),l(r),t===0)})}var Yn=(function(){function e(){}return e.prototype._parseStoresSpec=function(e,t){i(e).forEach(function(n){if(e[n]!==null){var r=Xn(e[n]),o=r.shift();if(o.unique=!0,o.multi)throw new te.Schema("Primary key cannot be multi-valued");r.forEach(function(e){if(e.auto)throw new te.Schema("Only primary key can be marked as autoIncrement (++)");if(!e.keyPath)throw new te.Schema("Index must have a name and cannot be an empty string")}),t[n]=Sn(n,o,r)}})},e.prototype.stores=function(e){var t=this.db;this._cfg.storesSource=this._cfg.storesSource?s(this._cfg.storesSource,e):e;var n=t._versions,r={},o={};return n.forEach(function(e){s(r,e._cfg.storesSource),o=e._cfg.dbschema={},e._parseStoresSpec(r,o)}),t._dbSchema=o,wn(t,[t._allTables,t,t.Transaction.prototype]),Mn(t,[t._allTables,t,t.Transaction.prototype,this._cfg.tables],i(o),o),t._storeNames=i(o),this},e.prototype.upgrade=function(e){return this._cfg.contentUpgrade=pe(this._cfg.contentUpgrade||ae,e),this},e})();function Jn(e){return Bt(Yn.prototype,function(n){this.db=e,this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}function Zn(e,t){var n=e._dbNamesDB;return n||(n=e._dbNamesDB=new eo(Et,{addons:[],indexedDB:e,IDBKeyRange:t}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function er(e){return e&&typeof e.databases=="function"}function tr(e){var t=e.indexedDB,n=e.IDBKeyRange;return er(t)?Promise.resolve(t.databases()).then(function(e){return e.map(function(e){return e.name}).filter(function(e){return e!==Et})}):Zn(t,n).toCollection().primaryKeys()}function nr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!er(n)&&t!==Et&&Zn(n,r).put({name:t}).catch(ae)}function rr(e,t){var n=e.indexedDB,r=e.IDBKeyRange;!er(n)&&t!==Et&&Zn(n,r).delete(t).catch(ae)}function or(e){return it(function(){return Ne.letThrough=!0,e()})}function ar(){var e=!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent);if(!e||!indexedDB.databases)return Promise.resolve();var t;return new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)})}var ir;function lr(e){return!("from"in e)}var sr=function(e,t){if(this)s(this,arguments.length?{d:1,from:e,to:arguments.length>1?t:e}:{d:0});else{var n=new sr;return e&&"d"in e&&s(n,e),n}};m(sr.prototype,(ir={add:function(e){return cr(this,e),this},addKey:function(e){return ur(this,e,e),this},addKeys:function(e){var t=this;return e.forEach(function(e){return ur(t,e,e)}),this}},ir[B]=function(){return mr(this)},ir));function ur(e,t,n){var r=Pt(t,n);if(!isNaN(r)){if(r>0)throw RangeError();if(lr(e))return s(e,{from:t,to:n,d:1});var o=e.l,a=e.r;if(Pt(n,e.from)<0)return o?ur(o,t,n):e.l={from:t,to:n,d:1,l:null,r:null},pr(e);if(Pt(t,e.to)>0)return a?ur(a,t,n):e.r={from:t,to:n,d:1,l:null,r:null},pr(e);Pt(t,e.from)<0&&(e.from=t,e.l=null,e.d=a?a.d+1:1),Pt(n,e.to)>0&&(e.to=n,e.r=null,e.d=e.l?e.l.d+1:1);var i=!e.r;o&&!e.l&&cr(e,o),a&&i&&cr(e,a)}}function cr(e,t){function n(e,t){var r=t.from,o=t.to,a=t.l,i=t.r;ur(e,r,o),a&&n(e,a),i&&n(e,i)}lr(t)||n(e,t)}function dr(e,t){var n=mr(t),r=n.next();if(r.done)return!1;for(var o=r.value,a=mr(e),i=a.next(o.from),l=i.value;!r.done&&!i.done;){if(Pt(l.from,o.to)<=0&&Pt(l.to,o.from)>=0)return!0;Pt(o.from,l.from)<0?o=(r=n.next(l.from)).value:l=(i=a.next(o.from)).value}return!1}function mr(e){var t=lr(e)?null:{s:0,n:e};return{next:function(e){for(var n=arguments.length>0;t;)switch(t.s){case 0:if(t.s=1,n)for(;t.n.l&&Pt(e,t.n.from)<0;)t={up:t,n:t.n.l,s:1};else for(;t.n.l;)t={up:t,n:t.n.l,s:1};case 1:if(t.s=2,!n||Pt(e,t.n.to)<=0)return{value:t.n,done:!1};case 2:if(t.n.r){t.s=3,t={up:t,n:t.n.r,s:0};continue}case 3:t=t.up}return{done:!0}}}}function pr(e){var t,n,o=(((t=e.r)===null||t===void 0?void 0:t.d)||0)-(((n=e.l)===null||n===void 0?void 0:n.d)||0),a=o>1?"r":o<-1?"l":"";if(a){var i=a==="r"?"l":"r",l=r({},e),s=e[a];e.from=s.from,e.to=s.to,e[a]=s[a],l[a]=s[i],e[i]=l,l.d=_r(l)}e.d=_r(e)}function _r(e){var t=e.r,n=e.l;return(t?n?Math.max(t.d,n.d):t.d:n?n.d:0)+1}function fr(e,t){return i(t).forEach(function(n){e[n]?cr(e[n],t[n]):e[n]=P(t[n])}),e}function gr(e,t){return e.all||t.all||Object.keys(e).some(function(n){return t[n]&&dr(t[n],e[n])})}var hr={},yr={},Cr=!1;function br(e,t){fr(yr,e),Cr||(Cr=!0,setTimeout(function(){Cr=!1;var e=yr;yr={},vr(e,!1)},0))}function vr(e,t){t===void 0&&(t=!1);var n=new Set;if(e.all)for(var r=0,o=Object.values(hr);r<o.length;r++){var a=o[r];Sr(a,e,n,t)}else for(var i in e){var l=/^idb\:\/\/(.*)\/(.*)\//.exec(i);if(l){var s=l[1],u=l[2],a=hr["idb://".concat(s,"/").concat(u)];a&&Sr(a,e,n,t)}}n.forEach(function(e){return e()})}function Sr(e,t,n,r){for(var o=[],a=0,i=Object.entries(e.queries.query);a<i.length;a++){for(var l=i[a],s=l[0],u=l[1],c=[],d=0,m=u;d<m.length;d++){var p=m[d];gr(t,p.obsSet)?p.subscribers.forEach(function(e){return n.add(e)}):r&&c.push(p)}r&&o.push([s,c])}if(r)for(var _=0,f=o;_<f.length;_++){var g=f[_],s=g[0],c=g[1];e.queries.query[s]=c}}function Rr(e){var t=e._state,n=e._deps.indexedDB;if(t.isBeingOpened||e.idbdb)return t.dbReadyPromise.then(function(){return t.dbOpenError?ht(t.dbOpenError):e});t.isBeingOpened=!0,t.dbOpenError=null,t.openComplete=!1;var r=t.openCanceller,o=Math.round(e.verno*10),a=!1;function i(){if(t.openCanceller!==r)throw new te.DatabaseClosed("db.open() was cancelled")}var l=t.dbReadyResolve,s=null,u=!1,c=function(){return new Fe(function(r,l){if(i(),!n)throw new te.MissingAPI;var d=e.name,m=t.autoSchema||!o?n.open(d):n.open(d,o);if(!m)throw new te.MissingAPI;m.onerror=pn(l),m.onblocked=Ze(e._fireOnBlocked),m.onupgradeneeded=Ze(function(r){if(s=m.transaction,t.autoSchema&&!e._options.allowEmptyDB){m.onerror=_n,s.abort(),m.result.close();var o=n.deleteDatabase(d);o.onsuccess=o.onerror=Ze(function(){l(new te.NoSuchDatabase("Database ".concat(d," doesnt exist")))})}else{s.onerror=pn(l);var i=r.oldVersion>Math.pow(2,62)?0:r.oldVersion;u=i<1,e.idbdb=m.result,a&&On(e,s),Fn(e,i/10,s,l)}},l),m.onsuccess=Ze(function(){s=null;var n=e.idbdb=m.result,i=C(n.objectStoreNames);if(i.length>0)try{var l=n.transaction(Rn(i),"readonly");if(t.autoSchema)jn(e,n,l);else if(Qn(e,e._dbSchema,l),!Kn(e,l)&&!a)return n.close(),o=n.version+1,a=!0,r(c());Nn(e,l)}catch(e){}Lt.push(e),n.onversionchange=Ze(function(n){t.vcFired=!0,e.on("versionchange").fire(n)}),n.onclose=Ze(function(t){e.on("close").fire(t)}),u&&nr(e._deps,d),r()},l)}).catch(function(e){switch(e==null?void 0:e.name){case"UnknownError":if(t.PR1398_maxLoop>0)return t.PR1398_maxLoop--,c();break;case"VersionError":if(o>0)return o=0,c();break}return Fe.reject(e)})};return Fe.race([r,(typeof navigator=="undefined"?Fe.resolve():ar()).then(c)]).then(function(){return i(),t.onReadyBeingFired=[],Fe.resolve(or(function(){return e.on.ready.fire(e.vip)})).then(function n(){if(t.onReadyBeingFired.length>0){var r=t.onReadyBeingFired.reduce(pe,ae);return t.onReadyBeingFired=[],Fe.resolve(or(function(){return r(e.vip)})).then(n)}})}).finally(function(){t.openCanceller===r&&(t.onReadyBeingFired=null,t.isBeingOpened=!1)}).catch(function(n){t.dbOpenError=n;try{s&&s.abort()}catch(e){}return r===t.openCanceller&&e._close(),ht(n)}).finally(function(){t.openComplete=!0,l()}).then(function(){if(u){var t={};e.tables.forEach(function(n){n.schema.indexes.forEach(function(r){r.name&&(t["idb://".concat(e.name,"/").concat(n.name,"/").concat(r.name)]=new sr(-1/0,[[[]]]))}),t["idb://".concat(e.name,"/").concat(n.name,"/")]=t["idb://".concat(e.name,"/").concat(n.name,"/:dels")]=new sr(-1/0,[[[]]])}),hn(fn).fire(t),vr(t,!0)}return e})}function Lr(e){var t=function(t){return e.next(t)},n=function(t){return e.throw(t)},r=a(t),o=a(n);function a(e){return function(t){var n=e(t),a=n.value;return n.done?a:!a||typeof a.then!="function"?l(a)?Promise.all(a).then(r,o):r(a):a.then(r,o)}}return a(t)()}function Er(e,t,n){var r=arguments.length;if(r<2)throw new te.InvalidArgument("Too few arguments");for(var o=new Array(r-1);--r;)o[r-1]=arguments[r];n=o.pop();var a=D(o);return[e,a,n]}function kr(e,t,n,r,o){return Fe.resolve().then(function(){var a=Ne.transless||Ne,i=e._createTransaction(t,n,e._dbSchema,r);i.explicit=!0;var l={trans:i,transless:a};if(r)i.idbtrans=r.idbtrans;else try{i.create(),i.idbtrans._explicit=!0,e._state.PR1398_maxLoop=3}catch(r){return r.name===Z.InvalidState&&e.isOpen()&&--e._state.PR1398_maxLoop>0?(e.close({disableAutoOpen:!1}),e.open().then(function(){return kr(e,t,n,null,o)})):ht(r)}var s=H(o);s&&lt();var u,c=Fe.follow(function(){if(u=o.call(i,i),u)if(s){var e=st.bind(null,null);u.then(e,e)}else typeof u.next=="function"&&typeof u.throw=="function"&&(u=Lr(u))},l);return(u&&typeof u.then=="function"?Fe.resolve(u).then(function(e){return i.active?e:ht(new te.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):c.then(function(){return u})).then(function(e){return r&&i._resolve(),i._completion.then(function(){return e})}).catch(function(e){return i._reject(e),ht(e)})})}function Ir(e,t,n){for(var r=l(e)?e.slice():[e],o=0;o<n;++o)r.push(t);return r}function Tr(e){return r(r({},e),{table:function(t){var n=e.table(t),o=n.schema,a={},i=[];function l(e,t,n){var o=Dn(e),s=a[o]=a[o]||[],u=e==null?0:typeof e=="string"?1:e.length,c=t>0,d=r(r({},n),{name:c?"".concat(o,"(virtual-from:").concat(n.name,")"):n.name,lowLevelIndex:n,isVirtual:c,keyTail:t,keyLength:u,extractKey:En(e),unique:!c&&n.unique});if(s.push(d),d.isPrimaryKey||i.push(d),u>1){var m=u===2?e[0]:e.slice(0,u-1);l(m,t+1,n)}return s.sort(function(e,t){return e.keyTail-t.keyTail}),d}var s=l(o.primaryKey.keyPath,0,o.primaryKey);a[":id"]=[s];for(var u=0,c=o.indexes;u<c.length;u++){var d=c[u];l(d.keyPath,0,d)}function m(e){var t=a[Dn(e)];return t&&t[0]}function p(t,n){return{type:t.type===1?2:t.type,lower:Ir(t.lower,t.lowerOpen?e.MAX_KEY:e.MIN_KEY,n),lowerOpen:!0,upper:Ir(t.upper,t.upperOpen?e.MIN_KEY:e.MAX_KEY,n),upperOpen:!0}}function _(e){var t=e.query.index;return t.isVirtual?r(r({},e),{query:{index:t.lowLevelIndex,range:p(e.query.range,t.keyTail)}}):e}var f=r(r({},n),{schema:r(r({},o),{primaryKey:s,indexes:i,getIndexByKeyPath:m}),count:function(e){return n.count(_(e))},query:function(e){return n.query(_(e))},openCursor:function(t){var r=t.query.index,o=r.keyTail,a=r.isVirtual,i=r.keyLength;if(!a)return n.openCursor(t);function l(n){function r(r){r!=null?n.continue(Ir(r,t.reverse?e.MAX_KEY:e.MIN_KEY,o)):t.unique?n.continue(n.key.slice(0,i).concat(t.reverse?e.MIN_KEY:e.MAX_KEY,o)):n.continue()}var a=Object.create(n,{continue:{value:r},continuePrimaryKey:{value:function(t,r){n.continuePrimaryKey(Ir(t,e.MAX_KEY,o),r)}},primaryKey:{get:function(){return n.primaryKey}},key:{get:function(){var e=n.key;return i===1?e[0]:e.slice(0,i)}},value:{get:function(){return n.value}}});return a}return n.openCursor(_(t)).then(function(e){return e&&l(e)})}});return f}})}var Dr={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:Tr};function xr(e,t,n,r){return n=n||{},r=r||"",i(e).forEach(function(o){if(!d(t,o))n[r+o]=void 0;else{var a=e[o],i=t[o];if(typeof a=="object"&&typeof i=="object"&&a&&i){var l=O(a),s=O(i);l!==s?n[r+o]=t[o]:l==="Object"?xr(a,i,n,r+o+"."):a!==i&&(n[r+o]=t[o])}else a!==i&&(n[r+o]=t[o])}}),i(t).forEach(function(o){d(e,o)||(n[r+o]=t[o])}),n}function $r(e,t){return t.type==="delete"?t.keys:t.keys||t.values.map(e.extractKey)}var Pr={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(e){return r(r({},e),{table:function(t){var n=e.table(t),a=n.schema.primaryKey,i=r(r({},n),{mutate:function(e){var i=Ne.trans,l=i.table(t).hook,s=l.deleting,u=l.creating,c=l.updating;switch(e.type){case"add":if(u.fire===ae)break;return i._promise("readwrite",function(){return m(e)},!0);case"put":if(u.fire===ae&&c.fire===ae)break;return i._promise("readwrite",function(){return m(e)},!0);case"delete":if(s.fire===ae)break;return i._promise("readwrite",function(){return m(e)},!0);case"deleteRange":if(s.fire===ae)break;return i._promise("readwrite",function(){return p(e)},!0)}return n.mutate(e);function m(e){var t=Ne.trans,i=e.keys||$r(a,e);if(!i)throw new Error("Keys missing");return e=e.type==="add"||e.type==="put"?r(r({},e),{keys:i}):r({},e),e.type!=="delete"&&(e.values=o([],e.values,!0)),e.keys&&(e.keys=o([],e.keys,!0)),Nr(n,e,i).then(function(r){var o=i.map(function(n,o){var i=r[o],l={onerror:null,onsuccess:null};if(e.type==="delete")s.fire.call(l,n,i,t);else if(e.type==="add"||i===void 0){var m=u.fire.call(l,n,e.values[o],t);n==null&&m!=null&&(n=m,e.keys[o]=n,a.outbound||E(e.values[o],a.keyPath,n))}else{var p=xr(i,e.values[o]),_=c.fire.call(l,p,n,i,t);if(_){var f=e.values[o];Object.keys(_).forEach(function(e){d(f,e)?f[e]=_[e]:E(f,e,_[e])})}}return l});return n.mutate(e).then(function(t){for(var n=t.failures,a=t.results,l=t.numFailures,s=t.lastResult,u=0;u<i.length;++u){var c=a?a[u]:i[u],d=o[u];c==null?d.onerror&&d.onerror(n[u]):d.onsuccess&&d.onsuccess(e.type==="put"&&r[u]?e.values[u]:c)}return{failures:n,results:a,numFailures:l,lastResult:s}}).catch(function(e){return o.forEach(function(t){return t.onerror&&t.onerror(e)}),Promise.reject(e)})})}function p(e){return _(e.trans,e.range,1e4)}function _(e,t,o){return n.query({trans:e,values:!1,query:{index:a,range:t},limit:o}).then(function(n){var a=n.result;return m({type:"delete",keys:a,trans:e}).then(function(n){return n.numFailures>0?Promise.reject(n.failures[0]):a.length<o?{failures:[],numFailures:0,lastResult:void 0}:_(e,r(r({},t),{lower:a[a.length-1],lowerOpen:!0}),o)})})}}});return i}})}};function Nr(e,t,n){return t.type==="add"?Promise.resolve([]):e.getMany({trans:t.trans,keys:n,cache:"immutable"})}function Mr(e,t,n){try{if(!t||t.keys.length<e.length)return null;for(var r=[],o=0,a=0;o<t.keys.length&&a<e.length;++o)Pt(t.keys[o],e[a])===0&&(r.push(n?w(t.values[o]):t.values[o]),++a);return r.length===e.length?r:null}catch(e){return null}}var wr={stack:"dbcore",level:-1,create:function(e){return{table:function(t){var n=e.table(t);return r(r({},n),{getMany:function(e){if(!e.cache)return n.getMany(e);var t=Mr(e.keys,e.trans._cache,e.cache==="clone");return t?Fe.resolve(t):n.getMany(e).then(function(t){return e.trans._cache={keys:e.keys,values:e.cache==="clone"?w(t):t},t})},mutate:function(e){return e.type!=="add"&&(e.trans._cache=null),n.mutate(e)}})}}}};function Ar(e,t){return e.trans.mode==="readonly"&&!!e.subscr&&!e.trans.explicit&&e.trans.db._options.cache!=="disabled"&&!t.schema.primaryKey.outbound}function Fr(e,t){switch(e){case"query":return t.values&&!t.unique;case"get":return!1;case"getMany":return!1;case"count":return!1;case"openCursor":return!1}}var Or={stack:"dbcore",level:0,name:"Observability",create:function(e){var t=e.schema.name,n=new sr(e.MIN_KEY,e.MAX_KEY);return r(r({},e),{transaction:function(t,n,r){if(Ne.subscr&&n!=="readonly")throw new te.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ne.querier));return e.transaction(t,n,r)},table:function(o){var a=e.table(o),s=a.schema,u=s.primaryKey,c=u.extractKey,d=u.outbound,m=r(r({},a),{mutate:function(e){var r=e.trans,i=e.mutatedParts||(e.mutatedParts={}),c=function(e){var n="idb://".concat(t,"/").concat(o,"/").concat(e);return i[n]||(i[n]=new sr)},d=c(""),m=c(":dels"),p=e.type,_=e.type==="deleteRange"?[e.range]:e.type==="delete"?[e.keys]:e.values.length<50?[$r(u,e).filter(function(e){return e}),e.values]:[],f=_[0],g=_[1],h=e.trans._cache;if(l(f)){d.addKeys(f);var y=p==="delete"||f.length===g.length?Mr(f,h):null;y||m.addKeys(f),(y||g)&&Br(c,s,y,g)}else if(f){var C={from:f.lower,to:f.upper};m.add(C),d.add(C)}else d.add(n),m.add(n),s.indexes.forEach(function(e){return c(e.name).add(n)});return a.mutate(e).then(function(t){return f&&(e.type==="add"||e.type==="put")&&d.addKeys(t.results),r.mutatedParts=fr(r.mutatedParts||{},i),t})}}),p=function(t){var n,r,o=t.query,a=o.index,i=o.range;return[a,new sr((n=i.lower)!==null&&n!==void 0?n:e.MIN_KEY,(r=i.upper)!==null&&r!==void 0?r:e.MAX_KEY)]},_={get:function(e){return[u,new sr(e.key)]},getMany:function(e){return[u,new sr().addKeys(e.keys)]},count:p,query:p,openCursor:p};return i(_).forEach(function(e){m[e]=function(i){var l=Ne.subscr,s=!!l,u=Ar(Ne,a)&&Fr(e,i),m=u?i.obsSet={}:l;if(s){var p=function(e){var n="idb://".concat(t,"/").concat(o,"/").concat(e);return m[n]||(m[n]=new sr)},f=p(""),g=p(":dels"),h=_[e](i),y=h[0],C=h[1];if(e==="query"&&y.isPrimaryKey&&!i.values?g.add(C):p(y.name||"").add(C),!y.isPrimaryKey)if(e==="count")g.add(n);else{var b=e==="query"&&d&&i.values&&a.query(r(r({},i),{values:!1}));return a[e].apply(this,arguments).then(function(t){if(e==="query"){if(d&&i.values)return b.then(function(e){var n=e.result;return f.addKeys(n),t});var n=i.values?t.result.map(c):t.result;i.values?f.addKeys(n):g.addKeys(n)}else if(e==="openCursor"){var r=t,o=i.values;return r&&Object.create(r,{key:{get:function(){return g.addKey(r.primaryKey),r.key}},primaryKey:{get:function(){var e=r.primaryKey;return g.addKey(e),e}},value:{get:function(){return o&&f.addKey(r.primaryKey),r.value}}})}return t})}}return a[e].apply(this,arguments)}}),m}})}};function Br(e,t,n,r){function o(t){var o=e(t.name||"");function a(e){return e!=null?t.extractKey(e):null}var i=function(e){return t.multiEntry&&l(e)?e.forEach(function(e){return o.addKey(e)}):o.addKey(e)};(n||r).forEach(function(e,t){var o=n&&a(n[t]),l=r&&a(r[t]);Pt(o,l)!==0&&(o!=null&&i(o),l!=null&&i(l))})}t.indexes.forEach(o)}function Wr(e,t,n){if(n.numFailures===0)return t;if(t.type==="deleteRange")return null;var o=t.keys?t.keys.length:"values"in t&&t.values?t.values.length:1;if(n.numFailures===o)return null;var a=r({},t);return l(a.keys)&&(a.keys=a.keys.filter(function(e,t){return!(t in n.failures)})),"values"in a&&l(a.values)&&(a.values=a.values.filter(function(e,t){return!(t in n.failures)})),a}function qr(e,t){return t.lower===void 0?!0:t.lowerOpen?Pt(e,t.lower)>0:Pt(e,t.lower)>=0}function Ur(e,t){return t.upper===void 0?!0:t.upperOpen?Pt(e,t.upper)<0:Pt(e,t.upper)<=0}function Vr(e,t){return qr(e,t)&&Ur(e,t)}function Hr(e,t,n,r,o,a){if(!n||n.length===0)return e;var i=t.query.index,s=i.multiEntry,u=t.query.range,c=r.schema.primaryKey,d=c.extractKey,m=i.extractKey,p=(i.lowLevelIndex||i).extractKey,_=n.reduce(function(e,n){var r=e,o=n.type==="add"||n.type==="put"?n.values.filter(function(e){var t=m(e);return s&&l(t)?t.some(function(e){return Vr(e,u)}):Vr(t,u)}).map(function(e){return e=w(e),a&&Object.freeze(e),e}):[];switch(n.type){case"add":r=e.concat(t.values?o:o.map(function(e){return d(e)}));break;case"put":var i=new sr().addKeys(n.values.map(function(e){return d(e)}));r=e.filter(function(e){var n=t.values?d(e):e;return!dr(new sr(n),i)}).concat(t.values?o:o.map(function(e){return d(e)}));break;case"delete":var c=new sr().addKeys(n.keys);r=e.filter(function(e){var n=t.values?d(e):e;return!dr(new sr(n),c)});break;case"deleteRange":var p=n.range;r=e.filter(function(e){return!Vr(d(e),p)});break}return r},e);return _===e?e:(_.sort(function(e,t){return Pt(p(e),p(t))||Pt(d(e),d(t))}),t.limit&&t.limit<1/0&&(_.length>t.limit?_.length=t.limit:e.length===t.limit&&_.length<t.limit&&(o.dirty=!0)),a?Object.freeze(_):_)}function Gr(e,t){return Pt(e.lower,t.lower)===0&&Pt(e.upper,t.upper)===0&&!!e.lowerOpen==!!t.lowerOpen&&!!e.upperOpen==!!t.upperOpen}function zr(e,t,n,r){if(e===void 0)return t!==void 0?-1:0;if(t===void 0)return 1;var o=Pt(e,t);if(o===0){if(n&&r)return 0;if(n)return 1;if(r)return-1}return o}function jr(e,t,n,r){if(e===void 0)return t!==void 0?1:0;if(t===void 0)return-1;var o=Pt(e,t);if(o===0){if(n&&r)return 0;if(n)return-1;if(r)return 1}return o}function Kr(e,t){return zr(e.lower,t.lower,e.lowerOpen,t.lowerOpen)<=0&&jr(e.upper,t.upper,e.upperOpen,t.upperOpen)>=0}function Qr(e,t,n,r){var o=hr["idb://".concat(e,"/").concat(t)];if(!o)return[];var a=o.queries[n];if(!a)return[null,!1,o,null];var i=r.query?r.query.index.name:null,l=a[i||""];if(!l)return[null,!1,o,null];switch(n){case"query":var s=l.find(function(e){return e.req.limit===r.limit&&e.req.values===r.values&&Gr(e.req.query.range,r.query.range)});if(s)return[s,!0,o,l];var u=l.find(function(e){var t="limit"in e.req?e.req.limit:1/0;return t>=r.limit&&(r.values?e.req.values:!0)&&Kr(e.req.query.range,r.query.range)});return[u,!1,o,l];case"count":var c=l.find(function(e){return Gr(e.req.query.range,r.query.range)});return[c,!!c,o,l]}}function Xr(e,t,n,r){e.subscribers.add(n),r.addEventListener("abort",function(){e.subscribers.delete(n),e.subscribers.size===0&&Yr(e,t)})}function Yr(e,t){setTimeout(function(){e.subscribers.size===0&&q(t,e)},3e3)}var Jr={stack:"dbcore",level:0,name:"Cache",create:function(e){var t=e.schema.name,n=r(r({},e),{transaction:function(n,r,o){var a=e.transaction(n,r,o);if(r==="readwrite"){var i=new AbortController,l=i.signal,s=function(o){return function(){if(i.abort(),r==="readwrite"){for(var l=new Set,s=0,u=n;s<u.length;s++){var c=u[s],d=hr["idb://".concat(t,"/").concat(c)];if(d){var m=e.table(c),p=d.optimisticOps.filter(function(e){return e.trans===a});if(a._explicit&&o&&a.mutatedParts)for(var _=0,f=Object.values(d.queries.query);_<f.length;_++)for(var g=f[_],h=0,y=g.slice();h<y.length;h++){var C=y[h];gr(C.obsSet,a.mutatedParts)&&(q(g,C),C.subscribers.forEach(function(e){return l.add(e)}))}else if(p.length>0){d.optimisticOps=d.optimisticOps.filter(function(e){return e.trans!==a});for(var b=0,v=Object.values(d.queries.query);b<v.length;b++)for(var g=v[b],S=0,R=g.slice();S<R.length;S++){var C=R[S];if(C.res!=null&&a.mutatedParts)if(o&&!C.dirty){var L=Object.isFrozen(C.res),E=Hr(C.res,C.req,p,m,C,L);C.dirty?(q(g,C),C.subscribers.forEach(function(e){return l.add(e)})):E!==C.res&&(C.res=E,C.promise=Fe.resolve({result:E}))}else C.dirty&&q(g,C),C.subscribers.forEach(function(e){return l.add(e)})}}}}l.forEach(function(e){return e()})}}};a.addEventListener("abort",s(!1),{signal:l}),a.addEventListener("error",s(!1),{signal:l}),a.addEventListener("complete",s(!0),{signal:l})}return a},table:function(n){var o=e.table(n),a=o.schema.primaryKey,i=r(r({},o),{mutate:function(e){var i=Ne.trans;if(a.outbound||i.db._options.cache==="disabled"||i.explicit)return o.mutate(e);var l=hr["idb://".concat(t,"/").concat(n)];if(!l)return o.mutate(e);var s=o.mutate(e);return(e.type==="add"||e.type==="put")&&(e.values.length>=50||$r(a,e).some(function(e){return e==null}))?s.then(function(t){var n=r(r({},e),{values:e.values.map(function(e,n){var o,i=!((o=a.keyPath)===null||o===void 0)&&o.includes(".")?w(e):r({},e);return E(i,a.keyPath,t.results[n]),i})}),o=Wr(l,n,t);l.optimisticOps.push(o),queueMicrotask(function(){return e.mutatedParts&&br(e.mutatedParts)})}):(l.optimisticOps.push(e),e.mutatedParts&&br(e.mutatedParts),s.then(function(t){if(t.numFailures>0){q(l.optimisticOps,e);var n=Wr(l,e,t);n&&l.optimisticOps.push(n),e.mutatedParts&&br(e.mutatedParts)}}),s.catch(function(){q(l.optimisticOps,e),e.mutatedParts&&br(e.mutatedParts)})),s},query:function(e){var r;if(!Ar(Ne,o)||!Fr("query",e))return o.query(e);var a=((r=Ne.trans)===null||r===void 0?void 0:r.db._options.cache)==="immutable",i=Ne,l=i.requery,s=i.signal,u=Qr(t,n,"query",e),c=u[0],d=u[1],m=u[2],p=u[3];if(c&&d)c.obsSet=e.obsSet;else{var _=o.query(e).then(function(e){var t=e.result;if(c&&(c.res=t),a){for(var n=0,r=t.length;n<r;++n)Object.freeze(t[n]);Object.freeze(t)}else e.result=w(t);return e}).catch(function(e){return p&&c&&q(p,c),Promise.reject(e)});c={obsSet:e.obsSet,promise:_,subscribers:new Set,type:"query",req:e,dirty:!1},p?p.push(c):(p=[c],m||(m=hr["idb://".concat(t,"/").concat(n)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}}),m.queries.query[e.query.index.name||""]=p)}return Xr(c,p,l,s),c.promise.then(function(t){return{result:Hr(t.result,e,m==null?void 0:m.optimisticOps,o,c,a)}})}});return i}});return n}};function Zr(e,t){return new Proxy(e,{get:function(e,n,r){return n==="db"?t:Reflect.get(e,n,r)}})}var eo=(function(){function e(t,n){var o=this;this._middlewares={},this.verno=0;var a=e.dependencies;this._options=n=r({addons:e.addons,autoOpen:!0,indexedDB:a.indexedDB,IDBKeyRange:a.IDBKeyRange,cache:"cloned"},n),this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};var i=n.addons;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var l={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ae,dbReadyPromise:null,cancelOpen:ae,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:n.autoOpen};l.dbReadyPromise=new Fe(function(e){l.dbReadyResolve=e}),l.openCanceller=new Fe(function(e,t){l.cancelOpen=t}),this._state=l,this.name=t,this.on=Ot(this,"populate","blocked","versionchange","close",{ready:[pe,ae]}),this.on.ready.subscribe=b(this.on.ready.subscribe,function(t){return function(n,r){e.vip(function(){var e=o._state;if(e.openComplete)e.dbOpenError||Fe.resolve().then(n),r&&t(n);else if(e.onReadyBeingFired)e.onReadyBeingFired.push(n),r&&t(n);else{t(n);var a=o;r||t(function e(){a.on.ready.unsubscribe(n),a.on.ready.unsubscribe(e)})}})}}),this.Collection=Zt(this),this.Table=Wt(this),this.Transaction=Cn(this),this.Version=Jn(this),this.WhereClause=mn(this),this.on("versionchange",function(e){e.newVersion>0?"Another connection wants to upgrade database '".concat(o.name,"'. Closing db now to resume the upgrade."):"Another connection wants to delete database '".concat(o.name,"'. Closing db now to resume the delete request."),o.close({disableAutoOpen:!1})}),this.on("blocked",function(e){!e.newVersion||e.newVersion<e.oldVersion?"Dexie.delete('".concat(o.name,"') was blocked"):"Upgrade '".concat(o.name,"' blocked by other connection holding version ").concat(e.oldVersion/10)}),this._maxKey=Ln(n.IDBKeyRange),this._createTransaction=function(e,t,n,r){return new o.Transaction(e,t,n,o._options.chromeTransactionDurability,r)},this._fireOnBlocked=function(e){o.on("blocked").fire(e),Lt.filter(function(e){return e.name===o.name&&e!==o&&!e._state.vcFired}).map(function(t){return t.on("versionchange").fire(e)})},this.use(wr),this.use(Jr),this.use(Or),this.use(Dr),this.use(Pr);var s=new Proxy(this,{get:function(e,t,n){if(t==="_vip")return!0;if(t==="table")return function(e){return Zr(o.table(e),s)};var r=Reflect.get(e,t,n);return r instanceof Ft?Zr(r,s):t==="tables"?r.map(function(e){return Zr(e,s)}):t==="_createTransaction"?function(){var e=r.apply(this,arguments);return Zr(e,s)}:r}});this.vip=s,i.forEach(function(e){return e(o)})}return e.prototype.version=function(e){if(isNaN(e)||e<.1)throw new te.Type("Given version is not a positive number");if(e=Math.round(e*10)/10,this.idbdb||this._state.isBeingOpened)throw new te.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);var t=this._versions,n=t.filter(function(t){return t._cfg.version===e})[0];return n||(n=new this.Version(e),t.push(n),t.sort(An),n.stores({}),this._state.autoSchema=!1,n)},e.prototype._whenReady=function(e){var t=this;return this.idbdb&&(this._state.openComplete||Ne.letThrough||this._vip)?e():new Fe(function(e,n){if(t._state.openComplete)return n(new te.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._state.autoOpen){n(new te.DatabaseClosed);return}t.open().catch(ae)}t._state.dbReadyPromise.then(e,n)}).then(e)},e.prototype.use=function(e){var t=e.stack,n=e.create,r=e.level,o=e.name;o&&this.unuse({stack:t,name:o});var a=this._middlewares[t]||(this._middlewares[t]=[]);return a.push({stack:t,create:n,level:r==null?10:r,name:o}),a.sort(function(e,t){return e.level-t.level}),this},e.prototype.unuse=function(e){var t=e.stack,n=e.name,r=e.create;return t&&this._middlewares[t]&&(this._middlewares[t]=this._middlewares[t].filter(function(e){return r?e.create!==r:n?e.name!==n:!1})),this},e.prototype.open=function(){var e=this;return _t(Pe,function(){return Rr(e)})},e.prototype._close=function(){var e=this._state,t=Lt.indexOf(this);if(t>=0&&Lt.splice(t,1),this.idbdb){try{this.idbdb.close()}catch(e){}this.idbdb=null}e.isBeingOpened||(e.dbReadyPromise=new Fe(function(t){e.dbReadyResolve=t}),e.openCanceller=new Fe(function(t,n){e.cancelOpen=n}))},e.prototype.close=function(e){var t=e===void 0?{disableAutoOpen:!0}:e,n=t.disableAutoOpen,r=this._state;n?(r.isBeingOpened&&r.cancelOpen(new te.DatabaseClosed),this._close(),r.autoOpen=!1,r.dbOpenError=new te.DatabaseClosed):(this._close(),r.autoOpen=this._options.autoOpen||r.isBeingOpened,r.openComplete=!1,r.dbOpenError=null)},e.prototype.delete=function(e){var t=this;e===void 0&&(e={disableAutoOpen:!0});var n=arguments.length>0&&typeof arguments[0]!="object",r=this._state;return new Fe(function(o,a){var i=function(){t.close(e);var n=t._deps.indexedDB.deleteDatabase(t.name);n.onsuccess=Ze(function(){rr(t._deps,t.name),o()}),n.onerror=pn(a),n.onblocked=t._fireOnBlocked};if(n)throw new te.InvalidArgument("Invalid closeOptions argument to db.delete()");r.isBeingOpened?r.dbReadyPromise.then(i):i()})},e.prototype.backendDB=function(){return this.idbdb},e.prototype.isOpen=function(){return this.idbdb!==null},e.prototype.hasBeenClosed=function(){var e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"},e.prototype.hasFailed=function(){return this._state.dbOpenError!==null},e.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(e.prototype,"tables",{get:function(){var e=this;return i(this._allTables).map(function(t){return e._allTables[t]})},enumerable:!1,configurable:!0}),e.prototype.transaction=function(){var e=Er.apply(this,arguments);return this._transaction.apply(this,e)},e.prototype._transaction=function(e,t,n){var r=this,o=Ne.trans;(!o||o.db!==this||e.indexOf("!")!==-1)&&(o=null);var a=e.indexOf("?")!==-1;e=e.replace("!","").replace("?","");var i,l;try{if(l=t.map(function(e){var t=e instanceof r.Table?e.name:e;if(typeof t!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return t}),e=="r"||e===kt)i=kt;else if(e=="rw"||e==It)i=It;else throw new te.InvalidArgument("Invalid transaction mode: "+e);if(o){if(o.mode===kt&&i===It)if(a)o=null;else throw new te.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");o&&l.forEach(function(e){if(o&&o.storeNames.indexOf(e)===-1)if(a)o=null;else throw new te.SubTransaction("Table "+e+" not included in parent transaction.")}),a&&o&&!o.active&&(o=null)}}catch(e){return o?o._promise(null,function(t,n){n(e)}):ht(e)}var s=kr.bind(null,this,i,l,o,n);return o?o._promise(i,s,"lock"):Ne.trans?_t(Ne.transless,function(){return r._whenReady(s)}):this._whenReady(s)},e.prototype.table=function(e){if(!d(this._allTables,e))throw new te.InvalidTable("Table ".concat(e," does not exist"));return this._allTables[e]},e})(),to=typeof Symbol!="undefined"&&"observable"in Symbol?Symbol.observable:"@@observable",no=(function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){return this._subscribe(!e||typeof e=="function"?{next:e,error:t,complete:n}:e)},e.prototype[to]=function(){return this},e})(),ro;try{ro={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch(e){ro={indexedDB:null,IDBKeyRange:null}}function oo(e){var t=!1,n,r=new no(function(r){var o=H(e);function a(t){var n=ze();try{o&&lt();var r=it(e,t);return o&&(r=r.finally(st)),r}finally{n&&je()}}var i=!1,l,s={},u={},c={get closed(){return i},unsubscribe:function(){i||(i=!0,l&&l.abort(),d&&hn.storagemutated.unsubscribe(_))}};r.start&&r.start(c);var d=!1,m=function(){return gt(f)};function p(){return gr(u,s)}var _=function(e){fr(s,e),p()&&m()},f=function(){if(!(i||!ro.indexedDB)){s={};var o={};l&&l.abort(),l=new AbortController;var c={subscr:o,signal:l.signal,requery:m,querier:e,trans:null},p=a(c);Promise.resolve(p).then(function(e){t=!0,n=e,!(i||c.signal.aborted)&&(s={},u=o,!N(u)&&!d&&(hn(fn,_),d=!0),gt(function(){return!i&&r.next&&r.next(e)}))},function(e){t=!1,["DatabaseClosedError","AbortError"].includes(e==null?void 0:e.name)||i||gt(function(){i||r.error&&r.error(e)})})}};return setTimeout(m,0),c});return r.hasValue=function(){return t},r.getValue=function(){return n},r}var ao=eo;m(ao,r(r({},oe),{delete:function(e){var t=new ao(e,{addons:[]});return t.delete()},exists:function(e){return new ao(e,{addons:[]}).open().then(function(e){return e.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(e){try{return tr(ao.dependencies).then(e)}catch(e){return ht(new te.MissingAPI)}},defineClass:function(){function e(e){s(this,e)}return e},ignoreTransaction:function(e){return Ne.trans?_t(Ne.transless,e):e()},vip:or,async:function(e){return function(){try{var t=Lr(e.apply(this,arguments));return!t||typeof t.then!="function"?Fe.resolve(t):t}catch(e){return ht(e)}}},spawn:function(e,t,n){try{var r=Lr(e.apply(n,t||[]));return!r||typeof r.then!="function"?Fe.resolve(r):r}catch(e){return ht(e)}},currentTransaction:{get:function(){return Ne.trans||null}},waitFor:function(e,t){var n=Fe.resolve(typeof e=="function"?ao.ignoreTransaction(e):e).timeout(t||6e4);return Ne.trans?Ne.trans.waitFor(n):n},Promise:Fe,debug:{get:function(){return _e},set:function(e){fe(e)}},derive:f,extend:s,props:m,override:b,Events:Ot,on:hn,liveQuery:oo,extendObservabilitySet:fr,getByKeyPath:L,setByKeyPath:E,delByKeyPath:k,shallowClone:I,deepClone:w,getObjectDiff:xr,cmp:Pt,asap:S,minKey:vt,addons:[],connections:Lt,errnames:Z,dependencies:ro,cache:hr,semVer:Ct,version:Ct.split(".").map(function(e){return parseInt(e)}).reduce(function(e,t,n){return e+t/Math.pow(10,n*2)})})),ao.maxKey=Ln(ao.dependencies.IDBKeyRange),typeof dispatchEvent!="undefined"&&typeof addEventListener!="undefined"&&(hn(fn,function(e){if(!lo){var t;t=new CustomEvent(gn,{detail:e}),lo=!0,dispatchEvent(t),lo=!1}}),addEventListener(gn,function(e){var t=e.detail;lo||io(t)}));function io(e){var t=lo;try{lo=!0,hn.storagemutated.fire(e),vr(e,!0)}finally{lo=t}}var lo=!1,so,uo=function(){};typeof BroadcastChannel!="undefined"&&(uo=function(){so=new BroadcastChannel(gn),so.onmessage=function(e){return e.data&&io(e.data)}},uo(),typeof so.unref=="function"&&so.unref(),hn(fn,function(e){lo||so.postMessage(e)})),typeof addEventListener!="undefined"&&(addEventListener("pagehide",function(e){if(!eo.disableBfCache&&e.persisted){so==null||so.close();for(var t=0,n=Lt;t<n.length;t++){var r=n[t];r.close({disableAutoOpen:!1})}}}),addEventListener("pageshow",function(e){!eo.disableBfCache&&e.persisted&&(uo(),io({all:new sr(-1/0,[[]])}))}));function co(e,t){return new Xt({replacePrefix:[e,t]})}Fe.rejectionMapper=re,fe(_e);var mo=Object.freeze({__proto__:null,Dexie:eo,liveQuery:oo,Entity:$t,cmp:Pt,PropModSymbol:Qt,PropModification:Xt,replacePrefix:co,default:eo,RangeSet:sr,mergeRanges:cr,rangesOverlap:dr});return r(eo,mo,{default:eo}),eo}))}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
__d("dexie_maw-next",["dexie-4.0.1"],(function(t,n,r,o,a,i){a.exports=n("dexie-4.0.1")()}),null);
/**
 * License: https://www.facebook.com/legal/license/t3hOLs8wlXy/
 */
__d("file-saver-2.0.2",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){(function(t,n){typeof e!="undefined"?n():(n(),t.FileSaver={})})(this,function(){function e(e,t){return typeof t=="undefined"?t={autoBom:!1}:typeof t!="object"&&(t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\uFEFF",e],{type:e.type}):e}function n(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){i(r.response,t,n)},r.onerror=function(){},r.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function o(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof t=="object"&&t.global===t?t:void 0,i=a.saveAs||(typeof window!="object"||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,i){var l=a.URL||a.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin===location.origin?o(s):r(s.href)?n(e,t,i):o(s,s.target="_blank")):(s.href=l.createObjectURL(e),setTimeout(function(){l.revokeObjectURL(s.href)},4e4),setTimeout(function(){o(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,a,i){if(a=a||t.name||"download",typeof t!="string")navigator.msSaveOrOpenBlob(e(t,i),a);else if(r(t))n(t,a,i);else{var l=document.createElement("a");l.href=t,l.target="_blank",setTimeout(function(){o(l)})}}:function(e,t,r,o){if(o=o||open("","_blank"),o&&(o.document.title=o.document.body.innerText="downloading..."),typeof e=="string")return n(e,t,r);var i=e.type==="application/octet-stream",l=/constructor/i.test(a.HTMLElement)||a.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||i&&l)&&typeof FileReader=="object"){var u=new FileReader;u.onloadend=function(){var e=u.result;e=s?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=e:location=e,o=null},u.readAsDataURL(e)}else{var c=a.URL||a.webkitURL,d=c.createObjectURL(e);o?o.location=d:location.href=d,o=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});a.saveAs=i.saveAs=i,typeof l!="undefined"&&(l.exports=i)})}var u=!1;function c(){return u||(u=!0,s()),l.exports}function d(e){switch(e){case void 0:return c()}}a.exports=d}),null);
__d("file-saver",["file-saver-2.0.2"],(function(t,n,r,o,a,i){a.exports=n("file-saver-2.0.2")()}),null);/*FB_PKG_DELIM*/
__d("DgwClientFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(t,n,r,o,a,i,l){"use strict";var e=r("getFalcoLogPolicy_DO_NOT_USE")("1755537"),s=o("FalcoLoggerInternal").create("dgw_client",e),u=s;l.default=u}),98);
__d("DGWLoggingContext",["$InternalEnum","DgwClientFalcoEvent","ODS","Random"],(function(t,n,r,o,a,i,l){"use strict";var e,s="dgw_client",u=n("$InternalEnum")({STREAM_GROUP_COMPONENT:"WebStreamGroup",GROUPED_STREAM_COMPONENT:"GroupedWebStream",WEBSOCKET_TRANSPORT_COMPONENT:"WebSocketTransport",ACK_MANAGER_COMPONENT:"WebStreamAckManager",CODEC_COMPONENT:"WebCodec",RAW_CLIENT:"RAWDGWClient",PINGER:"DGWPinger"}),c={VERBOSE:-1,INFO:0,WARNING:1,ERROR:2,FATAL:3};function d(e){switch(e){case u.GROUPED_STREAM_COMPONENT:case u.ACK_MANAGER_COMPONENT:return!0;default:return!1}}var m=(function(){function t(e,t,n,r,o,a,i){a===void 0&&(a=!1),i===void 0&&(i=!1),this.$5=""+e,this.$1=t,this.$4=n,this.$3=r,this.sgTransportId=o,this.$2=a,this.$6=i}t.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}};var n=t.prototype;return n.bumpODSKey=function(n,r,a){if(a===void 0&&(a=1),!!o("Random").coinflip(a)){var t=this.$4+"."+n+"."+r;(e||(e=o("ODS"))).bumpEntityKey(3589,"dgw_web_client",t,a)}},n.logEvent=function(t,n,r,o,a){o===void 0&&(o=!1),this.$2||this.$7(t,n,null,c.INFO,r,o,a)},n.$7=function(t,n,o,a,i,l,s){var e=this;l===void 0&&(l=!1),!(l&&!this.$6)&&(d(t)&&this.$1!=null||!d(t)&&this.sgTransportId!=null)&&r("DgwClientFalcoEvent").log(function(){return{event:n,logging_id:s!=null?s:e.$1,dgw_version:e.$5,message:o,severity:a,uuid:e.$3,dgw_component:t,extra_info:i,destination_tier:e.$4,sg_transport_id:e.sgTransportId,source:2}})},n.logError=function(t,n,r,o,a,i){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.ERROR,o,a,i)},n.logWarn=function(t,n,r,o,a){a===void 0&&(a=!1),this.$2||this.$7(t,n,r,c.WARNING,o,a)},t})();l.DGW_MODULE=s,l.DGWLoggingComponent=u,l.DGWLoggingContext=m}),98);
__d("DGWAckManager",["DGWLoggingContext","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){var r=this;this.$3=n,this.sendId=e,this.$2=t,this.handleAckReceived=function(){r.stopTracking(!0)},this.$1=window.setTimeout(function(){r.stopTracking(!1)},t)}var t=e.prototype;return t.stopTracking=function(t){window.clearTimeout(this.$1),this.$3(t)},e})(),s=(function(){function t(e){this.$1=new Map,this.$2=e}var n=t.prototype;return n.waitForAck=async function(n,a){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_expected");var t=this.$1;try{var i=await new Promise(function(r,o){t.set(n,new e(n,a,r))});return i===!0?this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Received ACK","sendId:"+n,!0):(this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_timeout"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ACK timeout","Request "+n+" timed out after "+a+"ms")),t.delete(n),i}catch(e){var l=r("getErrorSafe")(e);throw this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_error"),t.delete(n),l}},n.handleAckReceived=function(t){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received");var e=this.$1.get(t);if(e===void 0){this.$2.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"ack_received.not_tracked"),this.$2.logWarn(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"untracked ACK","Received ACK for ackId "+t+" which was not being tracked");return}e.handleAckReceived()},n.clearPendingAcks=function(){var e=this;this.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending acks","ACKs cleared size: "+this.$1.size),this.$1.forEach(function(t,n,r){e.$2.logEvent(o("DGWLoggingContext").DGWLoggingComponent.ACK_MANAGER_COMPONENT,"Clearing pending ACK with ackId "+t.sendId,null,!0),t.stopTracking(!1),r.delete(n)})},t})();l.DGWAckManager=s}),98);
__d("DGWAuth",["$InternalEnum","err"],(function(t,n,r,o,a,i,l){"use strict";var e=n("$InternalEnum")({TEST:"0:0",FACEBOOK:"1:0",INTERNALFB:"2:0",OCULUS:"3:0",ENTERPRISEFB:"7:0",RECRUITINGFB:"8:0",INSTAGRAM:"6:0",HORIZON_WEB:"12:0",SPARK_WEB:"13:0",ABRA:"15:0",GUEST:"19:0"});function s(t){if(t==="TEST")return e.TEST;if(t==="FACEBOOK")return e.FACEBOOK;if(t==="INTERNALFB")return e.INTERNALFB;if(t==="OCULUS")return e.OCULUS;if(t==="ENTERPRISEFB")return e.ENTERPRISEFB;if(t==="RECRUITINGFB")return e.RECRUITINGFB;if(t==="INSTAGRAM")return e.INSTAGRAM;if(t==="HORIZON_WEB")return e.HORIZON_WEB;if(t==="SPARK_WEB")return e.SPARK_WEB;if(t==="ABRA")return e.ABRA;if(t==="GUEST")return e.GUEST;throw r("err")("failed to convert string ("+t+") to DGWAuth Type")}function u(t){return t===e.FACEBOOK?"FACEBOOK":t===e.INTERNALFB?"INTERNALFB":t===e.OCULUS?"OCULUS":t===e.ENTERPRISEFB?"ENTERPRISEFB":t===e.RECRUITINGFB?"RECRUITINGFB":t===e.INSTAGRAM?"INSTAGRAM":t===e.HORIZON_WEB?"HORIZON_WEB":t===e.SPARK_WEB?"SPARK_WEB":t===e.ABRA?"ABRA":t===e.GUEST?"GUEST":"TEST"}l.DGWAuth=e,l.fromStringToDGWAuth=s,l.fromDGWAuthToString=u}),98);
__d("DGWStream",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["ABNORMAL_CLOSURE","GOING_AWAY","SERVER_INTERNAL_ERROR","PREMATURE_CLOSE","UNKNOWN_ERROR","KEEPALIVE_TIMEOUT","TRANSPORT_CLOSED_BEFORE_STREAM_INIT","TRANSPORT_ESTABLISHMENT_ERROR","TRANSPORT_ESTABLISHMENT_TIMEOUT","ESTABLISHMENT_TIMEOUT","UNAUTHENTICATED","UNAUTHORIZED","REJECTED","BAD_REQUEST","DGW_SERVER_ERROR","ESTABLISHMENT_ERROR","ACK_TIMEOUT"]);function l(t){switch(t){case e.UNAUTHENTICATED:case e.UNAUTHORIZED:case e.REJECTED:case e.BAD_REQUEST:case e.UNKNOWN_ERROR:case e.SERVER_INTERNAL_ERROR:return!1;default:return!0}}i.StreamError=e,i.isRetryableError=l}),66);
__d("DGWCppBridge",[],(function(t,n,r,o,a,i){var e=(function(){var e=typeof document!="undefined"&&document.currentScript?document.currentScript.src:void 0;return(function(t){t=t||{};var t=typeof t!="undefined"?t:{},n=(function(){function e(){}function t(e,t){return function(){e.apply(t,arguments)}}function n(e){if(!(this instanceof n))throw new TypeError("Promises must be constructed via new");if(typeof e!="function")throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],s(e,this)}function r(e,t){for(;e._state===3;)e=e._value;if(e._state===0){e._deferreds.push(t);return}e._handled=!0,n._immediateFn(function(){var n=e._state===1?t.onFulfilled:t.onRejected;if(n===null){(e._state===1?o:a)(t.promise,e._value);return}var r;try{r=n(e._value)}catch(e){a(t.promise,e);return}o(t.promise,r)})}function o(e,r){try{if(r===e)throw new TypeError("A promise cannot be resolved with itself.");if(r&&(typeof r=="object"||typeof r=="function")){var o=r.then;if(r instanceof n){e._state=3,e._value=r,i(e);return}else if(typeof o=="function"){s(t(o,r),e);return}}e._state=1,e._value=r,i(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,i(e)}function i(e){e._state===2&&e._deferreds.length===0&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,o=e._deferreds.length;t<o;t++)r(e,e._deferreds[t]);e._deferreds=null}function l(e,t,n){this.onFulfilled=typeof e=="function"?e:null,this.onRejected=typeof t=="function"?t:null,this.promise=n}function s(e,t){var n=!1;try{e(function(e){n||(n=!0,o(t,e))},function(e){n||(n=!0,a(t,e))})}catch(e){if(n)return;n=!0,a(t,e)}}return n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(t,n){var o=new this.constructor(e);return r(this,new l(t,n,o)),o},n.all=function(e){return new n(function(t,n){if(!Array.isArray(e))return n(new TypeError("Promise.all accepts an array"));var r=Array.prototype.slice.call(e);if(r.length===0)return t([]);var o=r.length;function a(e,i){try{if(i&&(typeof i=="object"||typeof i=="function")){var l=i.then;if(typeof l=="function"){l.call(i,function(t){a(e,t)},n);return}}r[e]=i,--o===0&&t(r)}catch(e){n(e)}}for(var i=0;i<r.length;i++)a(i,r[i])})},n.resolve=function(e){return e&&typeof e=="object"&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,n){n(e)})},n.race=function(e){return new n(function(t,r){if(!Array.isArray(e))return r(new TypeError("Promise.race accepts an array"));for(var o=0,a=e.length;o<a;o++)n.resolve(e[o]).then(t,r)})},n._immediateFn=typeof setImmediate=="function"&&function(e){setImmediate(e)}||function(e){setTimeout(e,0)},n._unhandledRejectionFn=function(t){},n})(),r,o;t.ready=new n(function(e,t){r=e,o=t});var a={},i;for(i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);var l=[],s="./this.program",u=function(t,n){throw n},c=!0,d=!1,m="";function p(e){return t.locateFile?t.locateFile(e,m):m+e}var _,f,g,h;typeof document!="undefined"&&document.currentScript&&(m=document.currentScript.src),e&&(m=e),m.indexOf("blob:")!==0?m=m.substr(0,m.lastIndexOf("/")+1):m="",_=function(t){try{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText}catch(e){var n=ge(t);if(n)return pe(n);throw e}},f=function(t,n,r){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="arraybuffer",e.onload=function(){if(e.status==200||e.status==0&&e.response){n(e.response);return}var o=ge(t);if(o){n(o.buffer);return}r()},e.onerror=r,e.send(null)},h=function(t){document.title=t};var y=t.print||console.log.bind(console),C=t.printErr||console.warn.bind(console);for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);a=null,t.arguments&&(l=t.arguments),t.thisProgram&&(s=t.thisProgram),t.quit&&(u=t.quit);var b;t.wasmBinary&&(b=t.wasmBinary);var v=t.noExitRuntime||!0,S={Memory:function(t){this.buffer=new ArrayBuffer(t.initial*65536)},Module:function(t){},Instance:function(t,n){this.exports=(function(t){function e(e){return e.set=function(e,t){this[e]=t},e.get=function(e){return this[e]},e}for(var n,r=new Uint8Array(123),o=25;o>=0;--o)r[48+o]=52+o,r[65+o]=o,r[97+o]=26+o;r[43]=62,r[47]=63;function a(e,t,n){for(var o,a,i=0,l=t,s=n.length,u=t+(s*3>>2)-(n[s-2]=="=")-(n[s-1]=="=");i<s;i+=4)o=r[n.charCodeAt(i+1)],a=r[n.charCodeAt(i+2)],e[l++]=r[n.charCodeAt(i)]<<2|o>>4,l<u&&(e[l++]=o<<4|a>>2),l<u&&(e[l++]=a<<6|r[n.charCodeAt(i+3)])}function i(e){a(n,1024,"U3Q5dHlwZV9pbmZvAAAAAOAEAAAABAAATjEwX19jeHhhYml2MTE2X19zaGltX3R5cGVfaW5mb0UAAAAACAUAABgEAAAQBAAATjEwX19jeHhhYml2MTE3X19jbGFzc190eXBlX2luZm9FAAAACAUAAEgEAAA8BAAATjEwX19jeHhhYml2MTE3X19wYmFzZV90eXBlX2luZm9FAAAACAUAAHgEAAA8BAAATjEwX19jeHhhYml2MTE5X19wb2ludGVyX3R5cGVfaW5mb0UACAUAAKgEAACcBAAAAAAAAGwEAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAAAAABQBQAAAQAAAAkAAAADAAAABAAAAAUAAAAKAAAACwAAAAwAAABOMTBfX2N4eGFiaXYxMjBfX3NpX2NsYXNzX3R5cGVfaW5mb0UAAAAACAUAACgFAABsBA=="),a(n,1372,"gAkQ")}function l(t){var r=t.a,o=r.buffer;r.grow=Le;var a=new Int8Array(o),l=new Int16Array(o),s=new Int32Array(o),u=new Uint8Array(o),c=new Uint16Array(o),d=new Uint32Array(o),m=new Float32Array(o),p=new Float64Array(o),_=Math.imul,f=Math.fround,g=Math.abs,h=Math.clz32,y=Math.min,C=Math.max,b=Math.floor,v=Math.ceil,S=Math.trunc,R=Math.sqrt,L=t.abort,E=NaN,k=1/0,I=t.b,T=1051008,D=0;function x(e,t,n,r,o,i){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0;var m=0,p=0,f=0;m=T-80|0,T=m,s[m+72>>2]=e,s[m+68>>2]=t,s[m+64>>2]=n,s[m+60>>2]=r,s[m+56>>2]=o,s[m+52>>2]=i;e:{if(!s[m+52>>2]||!s[m+56>>2]|(!s[m+72>>2]|!s[m+68>>2]|(!s[m+64>>2]|!s[m+60>>2]))){s[m+76>>2]=5;break e}s[s[m+64>>2]>>2]=0,s[s[m+60>>2]>>2]=0,t=s[m+68>>2],n=s[m+56>>2],r=s[m+52>>2],e=T+-64|0,T=e,s[e+56>>2]=s[m+72>>2],s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=0,s[e+36>>2]=s[e+56>>2];t:{n:{r:{for(;;){if(!s[e+52>>2])break n;if(s[e+32>>2]=s[e+36>>2],a[e+31|0]=u[s[e+36>>2]],s[e+52>>2]=s[e+52>>2]-1,s[e+36>>2]=s[e+36>>2]+1,u[e+31|0]==10||u[e+31|0]==2|u[e+31|0]==4|u[e+31|0]==9){s[e+40>>2]=s[e+40>>2]+1;continue}if(s[e+24>>2]=1,J(u[e+31|0])&1){if(p=e,f=ee(u[e+31|0])&1,a[p+23|0]=f,s[e+16>>2]=a[e+23|0]&1?1:2,d[e+52>>2]<d[e+16>>2]){s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}if(s[e+52>>2]=s[e+52>>2]-s[e+16>>2],s[e+24>>2]=s[e+16>>2]+s[e+24>>2],s[e+36>>2]=s[e+16>>2]+s[e+36>>2],!(u[e+31|0]!=14&&u[e+31|0]!=8)){s[e+40>>2]=s[e+40>>2]+1;continue}}if(d[e+52>>2]<3)break r;if(s[e+12>>2]=0,t=s[e+36>>2],n=u[t|0]|u[t+1|0]<<8,a[e+12|0]=n,a[e+13|0]=n>>>8,a[e+14|0]=u[t+2|0],s[e+52>>2]=s[e+52>>2]-3,s[e+24>>2]=s[e+24>>2]+3,s[e+36>>2]=s[e+36>>2]+3,d[e+12>>2]<=d[e+52>>2]){s[e+40>>2]=s[e+40>>2]+1,s[e+36>>2]=s[e+12>>2]+s[e+36>>2],s[e+52>>2]=s[e+52>>2]-s[e+12>>2];continue}break}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+48>>2]>>2]=s[e+32>>2],s[s[e+44>>2]>>2]=s[e+52>>2]+s[e+24>>2];break t}s[s[e+44>>2]>>2]=s[e+52>>2]}if(s[e+60>>2]=s[e+40>>2],T=e- -64|0,s[m+48>>2]=s[e+60>>2],!s[m+48>>2]){s[m+76>>2]=0;break e}if(p=m,f=$(_(s[m+48>>2],20)),s[p+44>>2]=f,!s[m+44>>2]){s[m+76>>2]=3;break e}for(s[m+40>>2]=s[m+44>>2],s[m+36>>2]=s[m+72>>2],s[m+32>>2]=s[m+68>>2]-s[s[m+52>>2]>>2],s[m+28>>2]=0;;){if(d[m+28>>2]<d[m+48>>2]){if(d[m+32>>2]<1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}a[m+27|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;t:{if(!u[m+27|0]|u[m+27|0]==1|(u[m+27|0]==2|u[m+27|0]==3)|(u[m+27|0]==4|u[m+27|0]==9|u[m+27|0]==10)||J(u[m+27|0])&1)break t;V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=6;break e}e=s[m+40>>2],s[e>>2]=u[m+27|0]&15|s[e>>2]&-16;t:{if(u[m+27|0]==10||u[m+27|0]==2|u[m+27|0]==4|u[m+27|0]==9){e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441,s[m+40>>2]=s[m+40>>2]+20;break t}if(J(u[m+27|0])&1){e=T-48|0,T=e,s[e+40>>2]=s[m+40>>2],s[e+36>>2]=m+36,s[e+32>>2]=m+32;n:{if(!(J(s[s[e+40>>2]>>2]&15)&1)){s[e+44>>2]=1;break n}if(p=e,f=ee(s[s[e+40>>2]>>2]&15)&1,a[p+31|0]=f,s[e+24>>2]=a[e+31|0]&1?1:2,d[s[e+32>>2]>>2]<d[e+24>>2]){s[e+44>>2]=1;break n}if(ae(s[e+40>>2]+4|0,s[s[e+36>>2]>>2],s[e+24>>2]),t=s[e+36>>2],s[t>>2]=s[e+24>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+24>>2],(s[s[e+40>>2]>>2]&15)==8){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==14){t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441,s[e+44>>2]=0;break n}if(d[s[e+32>>2]>>2]<3){s[e+44>>2]=11;break n}if(s[e+20>>2]=0,t=s[s[e+36>>2]>>2],n=u[t|0]|u[t+1|0]<<8,a[e+20|0]=n,a[e+21|0]=n>>>8,a[e+22|0]=u[t+2|0],t=s[e+36>>2],s[t>>2]=s[t>>2]+3,t=s[e+32>>2],s[t>>2]=s[t>>2]-3,t=s[e+40>>2],s[t>>2]=s[t>>2]&-268435441|(s[e+20>>2]&16777215)<<4,d[s[e+32>>2]>>2]<d[e+20>>2]){s[e+44>>2]=11;break n}if((s[s[e+40>>2]>>2]&15)==15){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==5){if(s[s[e+40>>2]+12>>2]=s[e+20>>2],t=$(s[e+20>>2]),s[s[e+40>>2]+8>>2]=t,!s[s[e+40>>2]+8>>2]){s[e+44>>2]=3;break n}ae(s[s[e+40>>2]+8>>2],s[s[e+36>>2]>>2],s[e+20>>2]),t=s[e+36>>2],s[t>>2]=s[e+20>>2]+s[t>>2],t=s[e+32>>2],s[t>>2]=s[t>>2]-s[e+20>>2],s[e+44>>2]=0;break n}r:{if(!((s[s[e+40>>2]>>2]&15)!=6&&(s[s[e+40>>2]>>2]&15)!=7)){if(p=e,f=G(s[e+36>>2],s[e+32>>2],e+19|0,e+18|0),s[p+12>>2]=f,s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}break r}if(!((s[s[e+40>>2]>>2]&15)!=13&&(s[s[e+40>>2]>>2]&15)!=12)){n=s[e+32>>2],t=T-32|0,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=e+19,s[t+12>>2]=e+16,l[t+10>>1]=0;o:{if(d[s[t+20>>2]>>2]<2){s[t+28>>2]=1;break o}n=s[s[t+24>>2]>>2],n=u[n|0]|u[n+1|0]<<8,a[t+10|0]=n,a[t+11|0]=n>>>8,n=s[t+24>>2],s[n>>2]=s[n>>2]+2,n=s[t+20>>2],s[n>>2]=s[n>>2]-2,a[s[t+16>>2]]=(c[t+10>>1]&32768)==32768,l[s[t+12>>2]>>1]=c[t+10>>1]&32767,s[t+28>>2]=0}if(s[e+12>>2]=s[t+28>>2],s[e+12>>2]){s[e+44>>2]=s[e+12>>2];break n}}}if((s[s[e+40>>2]>>2]&15)==12){t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==7){t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==13){n=s[e+32>>2],r=s[e+20>>2],o=s[e+40>>2]+12|0,i=s[e+40>>2],t=T-32|0,T=t,s[t+24>>2]=s[e+36>>2],s[t+20>>2]=n,s[t+16>>2]=r,s[t+12>>2]=o,s[t+8>>2]=i+16;r:{if(d[t+16>>2]<2){s[t+28>>2]=9;break r}if(s[s[t+8>>2]>>2]=s[t+16>>2]-2,d[s[t+20>>2]>>2]<d[s[t+8>>2]>>2]){s[t+28>>2]=1;break r}if(n=$(s[s[t+8>>2]>>2]),s[s[t+12>>2]>>2]=n,!s[s[t+12>>2]>>2]){s[t+28>>2]=3;break r}ae(s[s[t+12>>2]>>2],s[s[t+24>>2]>>2],s[s[t+8>>2]>>2]),n=s[t+24>>2],s[n>>2]=s[s[t+8>>2]>>2]+s[n>>2],n=s[t+20>>2],s[n>>2]=s[n>>2]-s[s[t+8>>2]>>2],s[t+28>>2]=0}if(T=t+32|0,s[e+8>>2]=s[t+28>>2],s[e+8>>2]){s[e+44>>2]=s[e+8>>2];break n}t=s[e+40>>2],l[t+8>>1]=a[e+19|0]&1|c[t+8>>1]&65534,t=s[e+40>>2],l[t+8>>1]=l[t+8>>1]&1|c[e+16>>1]<<1,s[e+44>>2]=0;break n}if((s[s[e+40>>2]>>2]&15)==6){if(p=e,f=q(s[e+36>>2],s[e+32>>2],s[e+20>>2],s[e+40>>2]+12|0,s[e+40>>2]+16|0),s[p+4>>2]=f,s[e+4>>2]){s[e+44>>2]=s[e+4>>2];break n}t=s[e+40>>2],a[t+8|0]=a[e+19|0]&1|u[t+8|0]&254,t=s[e+40>>2],a[t+8|0]=a[t+8|0]&1|u[e+18|0]<<1,s[e+44>>2]=0;break n}s[e+44>>2]=1}if(T=e+48|0,s[m+20>>2]=s[e+44>>2],!s[m+20>>2]){s[m+40>>2]=s[m+40>>2]+20;break t}V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+20>>2];break e}if(s[m+16>>2]=0,d[m+32>>2]<3){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=1;break e}if(e=s[m+36>>2],t=u[e|0]|u[e+1|0]<<8,a[m+16|0]=t,a[m+17|0]=t>>>8,a[m+18|0]=u[e+2|0],s[m+36>>2]=s[m+36>>2]+3,s[m+32>>2]=s[m+32>>2]-3,!(s[m+16>>2]==1|u[m+27|0]!=1)){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=7;break e}if(e=s[m+40>>2],s[e>>2]=s[e>>2]&-268435441|(s[m+16>>2]&16777215)<<4,u[m+27|0]==3){if(s[m+16>>2]!=1){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=10;break e}if(a[m+15|0]=0,d[m+32>>2]<1){O(s[m+44>>2]),s[m+76>>2]=1;break e}a[m+15|0]=u[s[m+36>>2]],s[m+36>>2]=s[m+36>>2]+1,s[m+32>>2]=s[m+32>>2]-1;n:{if(u[m+15|0]<=4){a[s[m+40>>2]+4|0]=u[m+15|0];break n}a[s[m+40>>2]+4|0]=4}s[m+40>>2]=s[m+40>>2]+20;break t}if(p=m,f=G(m+36|0,m+32|0,m+14|0,m+13|0),s[p+8>>2]=f,s[m+8>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+8>>2];break e}if(u[m+27|0]==1){e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20;break t}if(!u[m+27|0]){if(p=m,f=q(m+36|0,m+32|0,s[m+16>>2],s[m+40>>2]+8|0,s[m+40>>2]+12|0),s[p+4>>2]=f,s[m+4>>2]){V(s[m+44>>2],s[m+28>>2]),s[m+76>>2]=s[m+4>>2];break e}e=s[m+40>>2],a[e+4|0]=a[m+14|0]&1|u[e+4|0]&254,e=s[m+40>>2],a[e+4|0]=a[e+4|0]&1|u[m+13|0]<<1,s[m+40>>2]=s[m+40>>2]+20}}s[m+28>>2]=s[m+28>>2]+1;continue}break}if(s[m+32>>2]){V(s[m+44>>2],s[m+48>>2]),s[m+76>>2]=1;break e}s[s[m+64>>2]>>2]=s[m+44>>2],s[s[m+60>>2]>>2]=s[m+48>>2],s[m+76>>2]=0}return T=m+80|0,s[m+76>>2]}function $(e){var t=0,n=0,r=0,o=0,a=0,i=0,l=0,u=0,c=0,d=0,m=0;c=8;e:{t:{if(e>>>0>4294967239)break t;for(;;){c=c>>>0>8?c:8,n=s[603],a=n,o=s[602],l=o,e=e>>>0>8?e+3&-4:8;n:{if(e>>>0<=127){i=(e>>>3|0)-1|0;break n}if(r=h(e),i=((e>>>29-r^4)-(r<<2)|0)+110|0,e>>>0<=4095)break n;r=((e>>>30-r^2)-(r<<1)|0)+71|0,i=r>>>0<63?r:63}if(t=i,r=t&31,(t&63)>>>0>=32?(t=0,n=n>>>r|0):(t=n>>>r|0,n=((1<<r)-1&n)<<32-r|l>>>r),r=t,n|t){for(;;){a=n,t=r;n:{if(t|n){o=t-1|0,u=o+1|0,l=o,o=n-1|0,l=(o|0)!=-1?u:l,o=h(n^o)+32|0,n=h(t^l),n=(n|0)==32?o:n,t=63-n|0,D=0-(n>>>0>63)|0;break n}D=0,t=64}o=t,t=o,n=t&31,(t&63)>>>0>=32?(t=0,l=r>>>n|0):(t=r>>>n|0,l=((1<<n)-1&r)<<32-n|a>>>n),r=t,i=o+i|0,a=i<<4,t=s[a+1384>>2],o=a+1376|0;n:{if((t|0)!=(o|0)){if(n=F(t,c,e),n)break t;n=s[t+4>>2],s[n+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=n,s[t+8>>2]=o,n=a+1380|0,s[t+4>>2]=s[n>>2],s[n>>2]=t,s[s[t+4>>2]+8>>2]=t,i=i+1|0,n=(r&1)<<31|l>>>1,r=r>>>1|0;break n}d=s[603],t=i,u=t&63,n=u,a=n&31,n>>>0>=32?(n=0,o=-1>>>a|0):(n=-1>>>a|0,o=(1<<a)-1<<32-a|-1>>>a),o=o&-2,a=u&31,u>>>0>=32?(n=o<<a,u=0):(n=(1<<a)-1&o>>>32-a|n<<a,u=o<<a),a=n,o=0-t&63,n=o,t=n&31,n>>>0>=32?(n=-1<<t,t=0):(n=(1<<t)-1&-1>>>32-t|-1<<t,t=-1<<t),m=t&-2,t=o&31,o>>>0>=32?(o=0,t=n>>>t|0):(o=n>>>t|0,t=((1<<t)-1&n)<<32-t|m>>>t),n=t|u,D=a|o,s[602]=s[602]&n,s[603]=D&d,n=l^1}if(!(n|r))break}o=s[602],a=s[603]}n:{if(a|o){r=h(a),r=63-((r|0)==32?h(o)+32|0:r)<<4,t=r+1376|0,r=s[r+1384>>2];r:{if(!a&o>>>0<1073741824||(i=98,(t|0)==(r|0)))break r;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],!i)break r;if(i=i-1|0,(t|0)==(r|0))break}}if(M(e+48|0))break n;if(!r|(t|0)==(r|0))break e;for(;;){if(n=F(r,c,e),n)break t;if(r=s[r+8>>2],(t|0)==(r|0))break}break e}if(!M(e+48|0))break e}if(n=0,e>>>0>4294967239)break t;for(r=c,t=0;;){if(i=t,r){r=r-1&r,t=t+1|0;continue}break}if(!(i>>>0<=1))break}}return n}return 0}function P(e,t,n,r,o,i,m){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,i=i|0,m=m|0;var p=0,_=0,f=0;p=T-32|0,T=p,l[p+26>>1]=e,s[p+20>>2]=t,s[p+16>>2]=n,a[p+15|0]=r,l[p+12>>1]=o,s[p+8>>2]=i,s[p+4>>2]=m;e:{if(!(!(a[p+15|0]&1)|c[p+12>>1]<=32767)){s[p+28>>2]=4;break e}t=s[p+20>>2],n=s[p+16>>2],r=s[p+8>>2],o=s[p+4>>2],i=a[p+15|0]&1,e=T+-64|0,T=e,s[e+56>>2]=p+26,s[e+52>>2]=t,s[e+48>>2]=n,s[e+44>>2]=r,s[e+40>>2]=o,a[e+39|0]=2,a[e+38|0]=13,s[e+32>>2]=p+12,a[e+31|0]=i,a[e+30|0]=2;t:{n:{if(!(!s[e+52>>2]|(!s[e+44>>2]|!s[e+40>>2]))&&d[e+48>>2]<=16777215)break n;s[e+60>>2]=5;break t}if(s[e+24>>2]=s[e+48>>2]+(u[e+39|0]+(u[e+30|0]+4|0)|0),_=e,f=$(s[e+24>>2]),s[_+20>>2]=f,!s[e+20>>2]){s[e+60>>2]=3;break t}if(s[e+16>>2]=s[e+20>>2],a[s[e+16>>2]]=u[e+38|0],s[e+16>>2]=s[e+16>>2]+1,ae(s[e+16>>2],s[e+56>>2],u[e+30|0]),s[e+16>>2]=u[e+30|0]+s[e+16>>2],s[e+12>>2]=u[e+39|0]+s[e+48>>2],d[e+12>>2]<d[e+48>>2]){O(s[e+20>>2]),s[e+60>>2]=9;break t}if(t=s[e+16>>2],n=u[e+12|0]|u[e+13|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+14|0],s[e+16>>2]=s[e+16>>2]+3,a[e+31|0]&1)n:{if(u[e+38|0]==6){t=s[e+32>>2],a[t|0]=u[t|0]|128;break n}r:{if(u[e+38|0]==13){t=s[e+32>>2],l[t>>1]=c[t>>1]|32768;break r}O(s[e+20>>2]),s[e+60>>2]=1;break t}}ae(s[e+16>>2],s[e+32>>2],u[e+39|0]),s[e+16>>2]=u[e+39|0]+s[e+16>>2],ae(s[e+16>>2],s[e+52>>2],s[e+48>>2]),s[s[e+44>>2]>>2]=s[e+20>>2],s[s[e+40>>2]>>2]=s[e+24>>2],s[e+60>>2]=0}T=e- -64|0,s[p+28>>2]=s[e+60>>2]}return T=p+32|0,s[p+28>>2]}function N(e,t,n,r,o){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0;var i=0,c=0,m=0;i=T-32|0,T=i,l[i+30>>1]=e,s[i+24>>2]=t,s[i+20>>2]=n,s[i+16>>2]=r,s[i+12>>2]=o,t=s[i+24>>2],n=s[i+20>>2],r=s[i+16>>2],o=s[i+12>>2],e=T-48|0,T=e,s[e+40>>2]=i+30,s[e+36>>2]=t,s[e+32>>2]=n,s[e+28>>2]=r,s[e+24>>2]=o,a[e+23|0]=2,a[e+22|0]=15;e:{if(!(s[e+24>>2]&&s[e+28>>2])){s[e+44>>2]=5;break e}if(s[s[e+28>>2]>>2]=0,s[s[e+24>>2]>>2]=0,!(d[e+32>>2]<=16777215&&s[e+36>>2])){s[e+44>>2]=5;break e}if(s[e+16>>2]=s[e+32>>2]+(u[e+23|0]+4|0),c=e,m=$(s[e+16>>2]),s[c+12>>2]=m,!s[e+12>>2]){s[e+44>>2]=3;break e}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+22|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],t=s[e+8>>2],n=u[e+32|0]|u[e+33|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+34|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+36>>2],s[e+32>>2]),s[e+8>>2]=s[e+32>>2]+s[e+8>>2],s[s[e+28>>2]>>2]=s[e+12>>2],s[s[e+24>>2]>>2]=s[e+16>>2],s[e+44>>2]=0}return T=e+48|0,T=i+32|0,s[e+44>>2]}function M(e){var t=0,n=0,r=0,o=0,i=0,l=0;r=s[343],n=e+3&-4,t=r+n|0;e:{t:{if(t>>>0<=r>>>0&&n||t>>>0>Re()<<16>>>0&&!(I(t|0)|0))break t;s[343]=t;break e}s[604]=48,r=-1}if((r|0)!=-1){n=e+r|0,t=n-16|0,s[t+12>>2]=16,s[t>>2]=16,e=s[600],e?l=s[e+8>>2]:l=0;e:{t:{if((l|0)==(r|0)){if(o=r-(s[r-4>>2]&-2)|0,i=s[o-4>>2],s[e+8>>2]=n,e=o-(i&-2)|0,n=-16,!(a[(e+s[e>>2]|0)-4|0]&1))break t;n=s[e+4>>2],s[n+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=n,t=t-e|0,s[e>>2]=t;break e}s[r+12>>2]=16,s[r>>2]=16,s[r+8>>2]=n,s[r+4>>2]=e,s[600]=r,n=16}e=r+n|0,t=t-e|0,s[e>>2]=t}s[((t&-4)+e|0)-4>>2]=t|1,l=e,o=s[e>>2]-8|0;e:{if(o>>>0<=127){t=(o>>>3|0)-1|0;break e}if(i=h(o),t=((o>>>29-i^4)-(i<<2)|0)+110|0,o>>>0<=4095)break e;t=((o>>>30-i^2)-(i<<1)|0)+71|0,t=t>>>0<63?t:63}n=t<<4,s[l+4>>2]=n+1376,n=n+1384|0,s[e+8>>2]=s[n>>2],s[n>>2]=e,s[s[e+8>>2]+4>>2]=e,n=s[603],e=t&31,(t&63)>>>0>=32?(t=1<<e,e=0):(t=(1<<e)-1&1>>>32-e,e=1<<e),s[602]=e|s[602],s[603]=t|n}return(r|0)!=-1}function w(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0;var o=0,i=0,d=0;o=T-16|0,T=o,l[o+10>>1]=e,l[o+8>>1]=t,s[o+4>>2]=n,s[o>>2]=r;e:{if(c[o+8>>1]>32767){s[o+12>>2]=4;break e}t=s[o+4>>2],n=s[o>>2],e=T-48|0,T=e,s[e+40>>2]=o+10,s[e+36>>2]=t,s[e+32>>2]=n,a[e+31|0]=2,a[e+30|0]=12,s[e+24>>2]=o+8,a[e+23|0]=2;t:{if(!(s[e+32>>2]&&s[e+36>>2])){s[e+44>>2]=5;break t}if(s[e+16>>2]=u[e+31|0]+(u[e+23|0]+4|0),i=e,d=$(s[e+16>>2]),s[i+12>>2]=d,!s[e+12>>2]){s[e+44>>2]=3;break t}s[e+8>>2]=s[e+12>>2],a[s[e+8>>2]]=u[e+30|0],s[e+8>>2]=s[e+8>>2]+1,ae(s[e+8>>2],s[e+40>>2],u[e+23|0]),s[e+8>>2]=u[e+23|0]+s[e+8>>2],s[e+4>>2]=u[e+31|0],t=s[e+8>>2],n=u[e+4|0]|u[e+5|0]<<8,a[t|0]=n,a[t+1|0]=n>>>8,a[t+2|0]=u[e+6|0],s[e+8>>2]=s[e+8>>2]+3,ae(s[e+8>>2],s[e+24>>2],u[e+31|0]),s[s[e+32>>2]>>2]=s[e+16>>2],s[s[e+36>>2]>>2]=s[e+12>>2],s[e+44>>2]=0}T=e+48|0,s[o+12>>2]=s[e+44>>2]}return T=o+16|0,s[o+12>>2]}function A(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,a=0,i=0,l=0;a=T+-64|0,T=a,o=1;e:{if(j(e,t,0)||(o=0,!t))break e;r=T+-64|0,T=r,o=s[t>>2],i=s[o-4>>2],l=s[o-8>>2],s[r+20>>2]=0,s[r+16>>2]=1084,s[r+12>>2]=t,s[r+8>>2]=1132,o=0,ie(r+24|0,39),t=t+l|0;t:{if(j(i,1132,0)){s[r+56>>2]=1,Se[s[s[i>>2]+20>>2]](i,r+8|0,t,t,1,0),o=s[r+32>>2]==1?t:0;break t}Se[s[s[i>>2]+24>>2]](i,r+8|0,t,1,0);n:switch(s[r+44>>2]){case 0:o=s[r+48>>2]==1&&s[r+36>>2]==1&&s[r+40>>2]==1?s[r+28>>2]:0;break t;case 1:break n;default:break t}if(s[r+48>>2]|s[r+36>>2]!=1|s[r+40>>2]!=1&&s[r+32>>2]!=1)break t;o=s[r+24>>2]}if(T=r- -64|0,t=o,o=0,!t)break e;ie(a+8|4,52),s[a+56>>2]=1,s[a+20>>2]=-1,s[a+16>>2]=e,s[a+8>>2]=t,Se[s[s[t>>2]+28>>2]](t,a+8|0,s[n>>2],1),e=s[a+32>>2],(e|0)==1&&(s[n>>2]=s[a+24>>2]),o=(e|0)==1}return e=o,T=a- -64|0,e|0}function F(e,t,n){var r=0,o=0,a=0,i=0;if(r=e+4|0,o=(r+t|0)-1&0-t,t=s[e>>2],o+n>>>0<=(t+e|0)-4>>>0){a=s[e+4>>2],s[a+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=a,(r|0)!=(o|0)&&(o=o-r|0,a=e-(s[e-4>>2]&-2)|0,r=o+s[a>>2]|0,s[a>>2]=r,s[(a+(r&-4)|0)-4>>2]=r,e=e+o|0,t=t-o|0,s[e>>2]=t);e:{if(n+24>>>0<=t>>>0){r=(e+n|0)+8|0,t=(t-n|0)-8|0,s[r>>2]=t,s[(r+(t&-4)|0)-4>>2]=t|1,i=r,a=s[r>>2]-8|0;t:{if(a>>>0<=127){o=(a>>>3|0)-1|0;break t}if(t=h(a),o=((a>>>29-t^4)-(t<<2)|0)+110|0,a>>>0<=4095)break t;t=((a>>>30-t^2)-(t<<1)|0)+71|0,o=t>>>0<63?t:63}t=o,o=t<<4,s[i+4>>2]=o+1376,o=o+1384|0,s[r+8>>2]=s[o>>2],s[o>>2]=r,s[s[r+8>>2]+4>>2]=r,o=s[603],r=t&31,(t&63)>>>0>=32?(t=1<<r,i=0):(t=(1<<r)-1&1>>>32-r,i=1<<r),s[602]=i|s[602],s[603]=t|o,t=n+8|0,s[e>>2]=t,s[((t&-4)+e|0)-4>>2]=t;break e}s[(e+t|0)-4>>2]=t}e=e+4|0}else e=0;return e}function O(e){var t=0,n=0,r=0,o=0,a=0;if(e){n=e-4|0,o=s[n>>2],r=o,t=n,a=s[e-8>>2],e=a&-2,(e|0)!=(a|0)&&(t=n-e|0,r=s[t+4>>2],s[r+8>>2]=s[t+8>>2],s[s[t+8>>2]+4>>2]=r,r=e+o|0),e=n+o|0,n=s[e>>2],(n|0)!=s[(e+n|0)-4>>2]&&(o=s[e+4>>2],s[o+8>>2]=s[e+8>>2],s[s[e+8>>2]+4>>2]=o,r=r+n|0),s[t>>2]=r,s[((r&-4)+t|0)-4>>2]=r|1,a=t,r=s[t>>2]-8|0;e:{if(r>>>0<=127){e=(r>>>3|0)-1|0;break e}if(o=h(r),e=((r>>>29-o^4)-(o<<2)|0)+110|0,r>>>0<=4095)break e;e=((r>>>30-o^2)-(o<<1)|0)+71|0,e=e>>>0<63?e:63}n=e<<4,s[a+4>>2]=n+1376,n=n+1384|0,s[t+8>>2]=s[n>>2],s[n>>2]=t,s[s[t+8>>2]+4>>2]=t,n=s[603],t=e&31,(e&63)>>>0>=32?(e=1<<t,t=0):(e=(1<<t)-1&1>>>32-t,t=1<<t),s[602]=t|s[602],s[603]=e|n}}function B(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-48|0,T=r,s[r+40>>2]=e,s[r+36>>2]=t,s[r+32>>2]=n;e:{if(!(s[r+32>>2]&&s[r+36>>2])){s[r+44>>2]=5;break e}if(d[r+40>>2]>4){s[r+44>>2]=8;break e}if(s[r+28>>2]=5,o=r,i=$(s[r+28>>2]),s[o+24>>2]=i,!s[r+24>>2]){s[r+44>>2]=3;break e}s[r+20>>2]=s[r+24>>2],a[r+19|0]=3,a[s[r+20>>2]]=u[r+19|0],s[r+20>>2]=s[r+20>>2]+1,s[r+12>>2]=1,e=s[r+20>>2],t=u[r+12|0]|u[r+13|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,a[e+2|0]=u[r+14|0],s[r+20>>2]=s[r+20>>2]+3,a[r+11|0]=s[r+40>>2],a[s[r+20>>2]]=u[r+11|0],s[s[r+36>>2]>>2]=s[r+24>>2],s[s[r+32>>2]>>2]=s[r+28>>2],s[r+44>>2]=0}return T=r+48|0,s[r+44>>2]}function W(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(j(e,s[t>>2],o)){if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+32>>2]=r;t:{if(s[t+44>>2]==4)break t;if(l[t+52>>1]=0,e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,n,1,o),u[t+53|0]){if(s[t+44>>2]=3,!u[t+52|0])break t;break e}s[t+44>>2]=4}if(s[t+20>>2]=n,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2)break e;a[t+54|0]=1;return}e=s[e+8>>2],Se[s[s[e>>2]+24>>2]](e,t,n,r,o)}}function q(e,t,n,r,o){var a=0;a=T-32|0,T=a,s[a+24>>2]=e,s[a+20>>2]=t,s[a+16>>2]=n,s[a+12>>2]=r,s[a+8>>2]=o;e:{if(d[a+16>>2]<1){s[a+28>>2]=9;break e}if(s[s[a+8>>2]>>2]=s[a+16>>2]-1,d[s[a+20>>2]>>2]<d[s[a+8>>2]>>2]){s[a+28>>2]=1;break e}if(e=$(s[s[a+8>>2]>>2]),s[s[a+12>>2]>>2]=e,!s[s[a+12>>2]>>2]){s[a+28>>2]=3;break e}ae(s[s[a+12>>2]>>2],s[s[a+24>>2]>>2],s[s[a+8>>2]>>2]),e=s[a+24>>2],s[e>>2]=s[s[a+8>>2]>>2]+s[e>>2],e=s[a+20>>2],s[e>>2]=s[e>>2]-s[s[a+8>>2]>>2],s[a+28>>2]=0}return T=a+32|0,s[a+28>>2]}function U(e,t,n){e=e|0,t=t|0,n=n|0;var r=0,o=0,i=0;r=T-32|0,T=r,l[r+26>>1]=e,s[r+20>>2]=t,s[r+16>>2]=n,s[s[r+16>>2]>>2]=3,o=r,i=$(s[s[r+16>>2]>>2]),s[o+12>>2]=i;e:{if(!s[r+12>>2]){s[r+28>>2]=3;break e}s[s[r+20>>2]>>2]=s[r+12>>2],a[r+11|0]=14,a[s[r+12>>2]]=u[r+11|0],s[r+12>>2]=s[r+12>>2]+1,e=s[r+12>>2],t=u[r+26|0]|u[r+27|0]<<8,a[e|0]=t,a[e+1|0]=t>>>8,s[r+28>>2]=0}return T=r+32|0,s[r+28>>2]}function V(e,t){var n=0;for(n=T-16|0,T=n,s[n+12>>2]=e,s[n+8>>2]=t,s[n+4>>2]=0;;){if(d[n+4>>2]<d[n+8>>2]){s[n>>2]=s[n+12>>2]+_(s[n+4>>2],20);e:{if(!(s[s[n>>2]>>2]&15)){O(s[s[n>>2]+8>>2]);break e}t:{if((s[s[n>>2]>>2]&15)==5){O(s[s[n>>2]+8>>2]);break t}(s[s[n>>2]>>2]&15)==6&&O(s[s[n>>2]+12>>2])}}s[n+4>>2]=s[n+4>>2]+1;continue}break}O(s[n+12>>2]),T=n+16|0}function H(e,t,n,r){a[e+53|0]=1;e:{if(s[e+4>>2]!=(n|0))break e;if(a[e+52|0]=1,n=s[e+16>>2],!n){if(s[e+36>>2]=1,s[e+24>>2]=r,s[e+16>>2]=t,(r|0)!=1|s[e+48>>2]!=1)break e;a[e+54|0]=1;return}if((t|0)==(n|0)){if(n=s[e+24>>2],(n|0)==2&&(s[e+24>>2]=r,n=r),s[e+48>>2]!=1|(n|0)!=1)break e;a[e+54|0]=1;return}a[e+54|0]=1,s[e+36>>2]=s[e+36>>2]+1}}function G(e,t,n,r){var o=0;o=T-32|0,s[o+24>>2]=e,s[o+20>>2]=t,s[o+16>>2]=n,s[o+12>>2]=r,a[o+11|0]=0;e:{if(d[s[o+20>>2]>>2]<1){s[o+28>>2]=1;break e}a[o+11|0]=u[s[s[o+24>>2]>>2]],e=s[o+24>>2],s[e>>2]=s[e>>2]+1,e=s[o+20>>2],s[e>>2]=s[e>>2]-1,a[s[o+16>>2]]=(u[o+11|0]&128)==128,a[s[o+12>>2]]=u[o+11|0]&127,s[o+28>>2]=0}return s[o+28>>2]}function z(e,t,n,r,o){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,j(e,s[t+8>>2],o)){se(t,n,r);return}e:{if(!j(e,s[t>>2],o))break e;if(!(s[t+20>>2]!=(n|0)&&s[t+16>>2]!=(n|0))){if((r|0)!=1)break e;s[t+32>>2]=1;return}s[t+20>>2]=n,s[t+32>>2]=r,s[t+40>>2]=s[t+40>>2]+1,s[t+36>>2]!=1|s[t+24>>2]!=2||(a[t+54|0]=1),s[t+44>>2]=4}}function j(e,t,n){var r=0;if(!n)return s[e+4>>2]==s[t+4>>2];if((e|0)==(t|0))return 1;n=s[e+4>>2],e=u[n|0],t=s[t+4>>2],r=u[t|0];e:{if(!e|(r|0)!=(e|0))break e;for(;;){if(r=u[t+1|0],e=u[n+1|0],!e)break e;if(t=t+1|0,n=n+1|0,(e|0)!=(r|0))break}}return(e|0)==(r|0)}function K(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=9,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Q(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=10,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function X(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=2,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function Y(e,t){e=e|0,t=t|0;var n=0,r=0,o=0;n=T-32|0,T=n,s[n+24>>2]=e,s[n+20>>2]=t,r=n,o=$(1),s[r+16>>2]=o;e:{if(!s[n+16>>2]){s[n+28>>2]=3;break e}a[n+15|0]=4,a[s[n+16>>2]]=u[n+15|0],s[s[n+24>>2]>>2]=s[n+16>>2],s[s[n+20>>2]>>2]=1,s[n+28>>2]=0}return T=n+32|0,s[n+28>>2]}function J(e){var t=0;t=T-16|0,T=t,s[t+12>>2]=e,e=1;e:{if(ee(s[t+12>>2])&1||(e=1,s[t+12>>2]==15)||(e=1,s[t+12>>2]==13)||(e=1,s[t+12>>2]==12))break e;e=s[t+12>>2]==14}return T=t+16|0,e}function Z(e,t,n){var r=0;if(r=s[e+16>>2],!r){s[e+36>>2]=1,s[e+24>>2]=n,s[e+16>>2]=t;return}e:{if((t|0)==(r|0)){if(s[e+24>>2]!=2)break e;s[e+24>>2]=n;return}a[e+54|0]=1,s[e+24>>2]=2,s[e+36>>2]=s[e+36>>2]+1}}function ee(e){var t=0;t=T-16|0,s[t+12>>2]=e,e=1;e:{if(s[t+12>>2]==5||(e=1,s[t+12>>2]==6)||(e=1,s[t+12>>2]==7))break e;e=s[t+12>>2]==8}return e}function te(e,t,n,r,o,a){if(e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)){H(t,n,r,o);return}e=s[e+8>>2],Se[s[s[e>>2]+20>>2]](e,t,n,r,o,a)}function ne(){for(var e=0,t=0,n=0;t=e<<4,n=t+1376|0,s[t+1380>>2]=n,s[t+1384>>2]=n,e=e+1|0,(e|0)!=64;);M(48)}function re(e,t,n,r){if(e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)){Z(t,n,r);return}e=s[e+8>>2],Se[s[s[e>>2]+28>>2]](e,t,n,r)}function oe(e,t,n,r,o,a){e=e|0,t=t|0,n=n|0,r=r|0,o=o|0,a=a|0,j(e,s[t+8>>2],a)&&H(t,n,r,o)}function ae(e,t,n){if(n)for(;a[e|0]=u[t|0],e=e+1|0,t=t+1|0,n=n-1|0,!!n;);}function ie(e,t){if(t)for(;a[e|0]=0,e=e+1|0,t=t-1|0,!!t;);}function le(e,t,n,r){e=e|0,t=t|0,n=n|0,r=r|0,j(e,s[t+8>>2],0)&&Z(t,n,r)}function se(e,t,n){s[e+28>>2]==1|s[e+4>>2]!=(t|0)||(s[e+28>>2]=n)}function ue(e,t){return e=e|0,t=t|0,_(t,20)+e|0}function ce(e){return e=e|0,c[e+8>>1]>>>1|0}function de(e){return e=e|0,l[e+8>>1]&1}function me(e){return e=e|0,s[e+12>>2]}function pe(e){return e=e|0,s[e>>2]&15}function _e(e){return e=e|0,s[e+16>>2]}function fe(e){return e=e|0,c[e+4>>1]}function ge(e){return e=e|0,s[e+8>>2]}function he(e){return e=e|0,u[e+4|0]}function ye(e){return e=e|0,e|0}function Ce(e){return $(e)}function be(e){e=e|0,O(e)}function ve(e){e=e|0}n=u,i(t);var Se=e([null,ye,be,ve,ve,A,oe,z,le,be,te,W,re]);function Re(){return o.byteLength/65536|0}function Le(e){e=e|0;var t=Re()|0,i=t+e|0;if(t<i&&i<65536){var f=new ArrayBuffer(_(i,65536)),g=new Int8Array(f);g.set(a),a=new Int8Array(f),l=new Int16Array(f),s=new Int32Array(f),u=new Uint8Array(f),c=new Uint16Array(f),d=new Uint32Array(f),m=new Float32Array(f),p=new Float64Array(f),o=f,r.buffer=o,n=u}return t}return{c:ne,d:Ce,e:be,f:X,g:Y,h:B,i:N,j:U,k:P,l:w,m:K,n:Q,o:x,p:pe,q:he,r:ue,s:fe,t:ge,u:me,v:me,w:_e,x:ce,y:de,z:ce,A:Se}}return l(t)})(he)},instantiate:function(t,n){return{then:function(n){var e=new S.Module(t);n({instance:new S.Instance(e)})}}},RuntimeError:Error};b=[],typeof S!="object"&&ne("no native wasm support detected");var R,L=!1,E;function k(e,t){e||ne("Assertion failed: "+t)}function I(e,t){return e%t>0&&(e+=t-e%t),e}var T,D,x,$,P,N,M,w,A;function F(e){T=e,t.HEAP8=D=new Int8Array(e),t.HEAP16=$=new Int16Array(e),t.HEAP32=N=new Int32Array(e),t.HEAPU8=x=new Uint8Array(e),t.HEAPU16=P=new Uint16Array(e),t.HEAPU32=M=new Uint32Array(e),t.HEAPF32=w=new Float32Array(e),t.HEAPF64=A=new Float64Array(e)}var O=t.INITIAL_MEMORY||2097152;t.wasmMemory?R=t.wasmMemory:R=new S.Memory({initial:O/65536,maximum:32768}),R&&(T=R.buffer),O=T.byteLength,F(T);var B,W=[],q=[],U=[],V=!1;function H(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)j(t.preRun.shift());ue(W)}function G(){V=!0,ue(q)}function z(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Q(t.postRun.shift());ue(U)}function j(e){W.unshift(e)}function K(e){q.unshift(e)}function Q(e){U.unshift(e)}if((!Math.imul||Math.imul(4294967295,5)!==-5)&&(Math.imul=function(t,n){var e=t>>>16,r=t&65535,o=n>>>16,a=n&65535;return r*a+(e*a+r*o<<16)|0}),!Math.fround){var X=new Float32Array(1);Math.fround=function(e){return X[0]=e,X[0]}}Math.clz32||(Math.clz32=function(e){var t=32,n=e>>16;return n&&(t-=16,e=n),n=e>>8,n&&(t-=8,e=n),n=e>>4,n&&(t-=4,e=n),n=e>>2,n&&(t-=2,e=n),n=e>>1,n?t-2:t-e}),Math.trunc||(Math.trunc=function(e){return e<0?Math.ceil(e):Math.floor(e)});var Y=0,J=null,Z=null;function ee(e){Y++,t.monitorRunDependencies&&t.monitorRunDependencies(Y)}function te(e){if(Y--,t.monitorRunDependencies&&t.monitorRunDependencies(Y),Y==0&&(J!==null&&(clearInterval(J),J=null),Z)){var n=Z;Z=null,n()}}t.preloadedImages={},t.preloadedAudios={};function ne(e){t.onAbort&&t.onAbort(e),e+="",C(e),L=!0,E=1,e="abort("+e+"). Build with -s ASSERTIONS=1 for more info.";var n=new S.RuntimeError(e);throw o(n),n}var re="data:application/octet-stream;base64,";function oe(e){return e.startsWith(re)}var ae="dgwcppbridge.wasm";oe(ae)||(ae=p(ae));function ie(e){try{if(e==ae&&b)return new Uint8Array(b);var t=ge(e);if(t)return t;if(g)return g(e);throw"both async and sync fetching of the wasm failed"}catch(e){ne(e)}}function le(){return!b&&(c||d)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ae+"'";return e.arrayBuffer()}).catch(function(){return ie(ae)}):n.resolve().then(function(){return ie(ae)})}function se(){var e={a:he};function n(e,n){var r=e.exports;t.asm=r,B=t.asm.A,K(t.asm.c),te("wasm-instantiate")}ee("wasm-instantiate");function r(e){n(e.instance)}function a(t){return le().then(function(t){var n=S.instantiate(t,e);return n}).then(t,function(e){C("failed to asynchronously prepare wasm: "+e),ne(e)})}function i(){return!b&&typeof S.instantiateStreaming=="function"&&!oe(ae)&&typeof fetch=="function"?fetch(ae,{credentials:"same-origin"}).then(function(t){var n=S.instantiateStreaming(t,e);return n.then(r,function(e){return C("wasm streaming compile failed: "+e),C("falling back to ArrayBuffer instantiation"),a(r)})}):a(r)}if(t.instantiateWasm)try{var l=t.instantiateWasm(e,n);return l}catch(e){return C("Module.instantiateWasm callback failed with error: "+e),!1}return i().catch(o),{}}function ue(e){for(;e.length>0;){var n=e.shift();if(typeof n=="function"){n(t);continue}var r=n.func;typeof r=="number"?n.arg===void 0?B.get(r)():B.get(r)(n.arg):r(n.arg===void 0?null:n.arg)}}function ce(e){try{return R.grow(e-T.byteLength+65535>>>16),F(R.buffer),1}catch(e){}}function de(e){var t=x.length;e=e>>>0;var n=2147483648;if(e>n)return!1;for(var r=1;r<=4;r*=2){var o=t*(1+.2/r);o=Math.min(o,e+100663296);var a=Math.min(n,I(Math.max(e,o),65536)),i=ce(a);if(i)return!0}return!1}var me=!1;function pe(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];r>255&&(r&=255),t.push(String.fromCharCode(r))}return t.join("")}var _e=typeof atob=="function"?atob:function(e){var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r,o,a,i,l,s,u,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do i=t.indexOf(e.charAt(c++)),l=t.indexOf(e.charAt(c++)),s=t.indexOf(e.charAt(c++)),u=t.indexOf(e.charAt(c++)),r=i<<2|l>>4,o=(l&15)<<4|s>>2,a=(s&3)<<6|u,n=n+String.fromCharCode(r),s!==64&&(n=n+String.fromCharCode(o)),u!==64&&(n=n+String.fromCharCode(a));while(c<e.length);return n};function fe(e){try{for(var t=_e(e),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}catch(e){throw new Error("Converting base64 string to bytes failed.")}}function ge(e){if(oe(e))return fe(e.slice(re.length))}var he={b:de,a:R},ye=se(),Ce=t.___wasm_call_ctors=function(){return(Ce=t.___wasm_call_ctors=t.asm.c).apply(null,arguments)},be=t.__malloc=function(){return(be=t.__malloc=t.asm.d).apply(null,arguments)},ve=t.__free=function(){return(ve=t.__free=t.asm.e).apply(null,arguments)},Se=t.__DgwCodecEncodeEmpty=function(){return(Se=t.__DgwCodecEncodeEmpty=t.asm.f).apply(null,arguments)},Re=t.__DgwCodecEncodeDeauth=function(){return(Re=t.__DgwCodecEncodeDeauth=t.asm.g).apply(null,arguments)},Le=t.__DgwCodecEncodeDrain=function(){return(Le=t.__DgwCodecEncodeDrain=t.asm.h).apply(null,arguments)},Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=function(){return(Ee=t.__DgwCodecEncodeStreamGroup_EstabStream=t.asm.i).apply(null,arguments)},ke=t.__DgwCodecEncodeStreamGroup_EndOfData=function(){return(ke=t.__DgwCodecEncodeStreamGroup_EndOfData=t.asm.j).apply(null,arguments)},Ie=t.__DgwCodecEncodeStreamGroup_Data=function(){return(Ie=t.__DgwCodecEncodeStreamGroup_Data=t.asm.k).apply(null,arguments)},Te=t.__DgwCodecEncodeStreamGroup_Ack=function(){return(Te=t.__DgwCodecEncodeStreamGroup_Ack=t.asm.l).apply(null,arguments)},De=t.__DgwCodecEncodePing=function(){return(De=t.__DgwCodecEncodePing=t.asm.m).apply(null,arguments)},xe=t.__DgwCodecEncodePong=function(){return(xe=t.__DgwCodecEncodePong=t.asm.n).apply(null,arguments)},$e=t.__DgwCodecDecode=function(){return($e=t.__DgwCodecDecode=t.asm.o).apply(null,arguments)},Pe=t.__getFrameType=function(){return(Pe=t.__getFrameType=t.asm.p).apply(null,arguments)},Ne=t.__getDrainReasonFromDrainFrame=function(){return(Ne=t.__getDrainReasonFromDrainFrame=t.asm.q).apply(null,arguments)},Me=t.__getDGWFramePtr=function(){return(Me=t.__getDGWFramePtr=t.asm.r).apply(null,arguments)},we=t.__getStreamIdFromStreamGroupFrame=function(){return(we=t.__getStreamIdFromStreamGroupFrame=t.asm.s).apply(null,arguments)},Ae=t.__getEncodedParamsFromEstablishStreamFrame=function(){return(Ae=t.__getEncodedParamsFromEstablishStreamFrame=t.asm.t).apply(null,arguments)},Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=function(){return(Fe=t.__getEncodedParamsSizeFromEstablishStreamFrame=t.asm.u).apply(null,arguments)},Oe=t.__getDataFromGroupedStreamDataFrame=function(){return(Oe=t.__getDataFromGroupedStreamDataFrame=t.asm.v).apply(null,arguments)},Be=t.__getDataSizeFromGroupedStreamDataFrame=function(){return(Be=t.__getDataSizeFromGroupedStreamDataFrame=t.asm.w).apply(null,arguments)},We=t.__getAckIdFromGroupedStreamDataFrame=function(){return(We=t.__getAckIdFromGroupedStreamDataFrame=t.asm.x).apply(null,arguments)},qe=t.__getRequiresAckFromGroupedStreamDataFrame=function(){return(qe=t.__getRequiresAckFromGroupedStreamDataFrame=t.asm.y).apply(null,arguments)},Ue=t.__getAckIdFromGroupedStreamAckFrame=function(){return(Ue=t.__getAckIdFromGroupedStreamAckFrame=t.asm.z).apply(null,arguments)},Ve;Z=function e(){Ve||He(),Ve||(Z=e)};function He(e){if(e=e||l,Y>0||(H(),Y>0))return;function n(){Ve||(Ve=!0,t.calledRun=!0,!L&&(G(),r(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),z()))}t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),n()},1)):n()}if(t.run=He,t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return He(),t.ready})})();typeof i=="object"&&typeof a=="object"?a.exports=e:typeof define=="function"&&define.amd?define([],function(){return e}):typeof i=="object"&&(i.Module=e)}),null);
__d("DGWUtils",["Base64","DGWConstants","DGWCppBridge","DGWLoggingContext","Random","URI","getErrorSafe"],(function(t,n,r,o,a,i,l){"use strict";var e,s=4;function u(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=o("Random").random()*16|0,n=e==="x"?t:t&3|8;return n.toString(16)})}function c(e){var t=new TextDecoder,n=t.decode(e),o=r("Base64").encode(n),a=o.replace(/\+/gi,"-").replace(/\//gi,"_").replace(/=/gi,"");return a}var d=null,m=null;function p(){return m==null&&(m=Promise.resolve().then(function(){return r("DGWCppBridge")()}).then(function(e){d=e})),m}var _=(function(){function t(){}return t.initialize=async function(){return p()},t.constructConnectUrl=function(n){var t,a,i=n.appId,l=n.appVersion,s=n.authType,u=n.deviceId,d=n.dgwVersion,m=n.fbId,p=n.tier,_=n.loggingId,f=n.headers,g=n.endpoint,h=n.serviceId,y=n.regionHint,C=n.establishStreamFrame,b=n.trafficTracing,v=n.authToken,S=(t={},t[(a=o("DGWConstants")).HEADER_CONSTANTS.HEADER_APPID]=i,t[a.HEADER_CONSTANTS.HEADER_APPVERSION]=l,t[a.HEADER_CONSTANTS.HEADER_AUTHTYPE]=s,t[a.HEADER_CONSTANTS.HEADER_DGW_VERSION]=""+d,t[a.HEADER_CONSTANTS.HEADER_UUID]=m,t[a.HEADER_CONSTANTS.HEADER_TARGET_TIER]=p,t);C!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64]=c(C)),_!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_LOGGING_ID]=_),y!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_REGIONHINT]=y),u!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_DEVICE_ID]=u),b!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.TRAFFIC_TRACING]="debug:"+b),v!==void 0&&(S[o("DGWConstants").HEADER_CONSTANTS.HEADER_AUTHTOKEN]=v),Object.keys(f).forEach(function(e){var t=o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+e;Object.prototype.hasOwnProperty.call(S,t)||(S[t]=f[e])});var R=new(e||(e=r("URI")))(g);return R.setQueryData(S),R.setPath(R.getPath()+"/"+h),R.toString().length>2e3&&(delete S[o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64],R.setQueryData(S)),R.toStringRawQuery()},t})(),f=(function(){function e(e,t,n){this.$1=null,this.$2=e,this.$3=t,this.$4=n}e.initialize=async function(){return p()};var t=e.prototype;return t.malloc=function(t){try{var e=d.__malloc(t);if(e===0){var n;return(n=this.$2)==null||n.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","malloc returned 0"),-1}return e}catch(e){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"wasm malloc failure","exception during malloc",r("getErrorSafe")(e).message),-1}},t.free=function(t){d.__free(t)},t.append=function(t){if(this.$1==null){this.$1=t;return}var e=this.$1.length,n=new Uint8Array(e+t.length);n.set(this.$1,0),n.set(t,e),this.$1=n},t.processData=function(){var e=this;if(this.$1!=null){var t=this.$1.length,n=this.malloc(t);if(n!==-1){var r=d.HEAPU8.subarray(n,n+t);if(this.$1)for(var a=0;a<r.length;++a)r[a]=this.$1[a];var i=this.malloc(s*4);if(i!==-1){var l=i,u=l+s,c=u+s,m=c+s,p=d.__DgwCodecDecode(n,t,l,u,c,m);if(this.free(n),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;this.free(i),(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Codec Decode Failure","Failed to decode Frame(s). Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p));return}var f=d.HEAPU32.subarray(m/s,m/s+1)[0];if(this.$1==null){this.free(i);return}var g=this.$1.length-f;if(this.$1&&this.$1.length>g){var h;this.$1=new Uint8Array(((h=this.$1)==null?void 0:h.subarray(g))||[])}else this.$1=null;for(var y=d.HEAPU32.subarray(u/s,u/s+1)[0],C=d.HEAPU32.subarray(l/s,l/s+1)[0],b=[],v=function(){var t=d.__getDGWFramePtr(C,S),n=d.__getFrameType(t);switch(n){case o("DGWConstants").DgwFrameType.DgwFrameType_Drain:{var r,a=d.__getDrainReasonFromDrainFrame(t),i=o("DGWConstants").drainReasonToDrainReasonString(a);(r=e.$2)==null||r.logEvent(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Received Drain Frame from server","DrainReason: "+i),b.push(function(){var t;return(t=e.$3)==null?void 0:t.receivedDrainSignal(i)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EstabStream:{var l=d.__getStreamIdFromStreamGroupFrame(t),s=d.__getEncodedParamsFromEstablishStreamFrame(t),u=new Uint8Array(d.HEAPU8.subarray(s,s+d.__getEncodedParamsSizeFromEstablishStreamFrame(t)));e.free(s),b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEstablishStreamReceived(l,u)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Data:{var c=d.__getStreamIdFromStreamGroupFrame(t),m=d.__getDataFromGroupedStreamDataFrame(t),p=new Uint8Array(d.HEAPU8.subarray(m,m+d.__getDataSizeFromGroupedStreamDataFrame(t)));e.free(m);var _=d.__getRequiresAckFromGroupedStreamDataFrame(t)?d.__getAckIdFromGroupedStreamDataFrame(t):null;b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamDataReceived(c,p,_)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_Ack:{var f=d.__getStreamIdFromStreamGroupFrame(t),g=d.__getAckIdFromGroupedStreamAckFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamAckReceived(f,g)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_StreamGroup_EndOfData:{var h=d.__getStreamIdFromStreamGroupFrame(t);b.push(function(){var t;return(t=e.$3)==null?void 0:t.onGroupedStreamEndOfDataReceived(h)});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Ping:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPingReceived()});break}case o("DGWConstants").DgwFrameType.DgwFrameType_Pong:{b.push(function(){var t;return(t=e.$3)==null?void 0:t.onPongReceived()});break}default:break}e.free(t)},S=0;S<y;++S)v();this.free(i);for(var R=0;R<b.length;R++)b[R]()}}}},t.encodeData=function(t,n,r,a){var e=this.malloc(t.length);if(e===-1)return null;for(var i=d.HEAPU8.subarray(e,e+t.length),l=0;l<i.length;++l)i[l]=t[l];var u=this.malloc(s*2),c=u,m=u+s,p=d.__DgwCodecEncodeStreamGroup_Data(a,e,i.length,n,r,c,m);if(this.free(e),p!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var _;return(_=this.$2)==null||_.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Data Frame encode failure","Failed to decode DGW Data Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(p)),null}var f=d.HEAPU32.subarray(c/s,c/s+1)[0],g=d.HEAPU32.subarray(m/s,m/s+1)[0],h=new Uint8Array(d.HEAPU8.subarray(f,f+g));return this.free(f),this.free(u),h},t.encodeAck=function(t,n){var e=this.malloc(s*2);if(e===-1)return null;var r=e,a=e+s,i=d.__DgwCodecEncodeStreamGroup_Ack(n,t,r,a);if(i!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var l;return(l=this.$2)==null||l.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"ACK Frame encode failure","Failed to encode ACK Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(i)),null}var u=d.HEAPU32.subarray(r/s,r/s+1)[0],c=d.HEAPU32.subarray(a/s,a/s+1)[0],m=new Uint8Array(d.HEAPU8.subarray(u,u+c));return this.free(u),this.free(e),m},t.encodeDrain=function(t){var e=this.malloc(s*2);if(e===-1)return null;var n=e,r=e+s,a=d.__DgwCodecEncodeDrain(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Drain Frame encode failure","Failed to encode Drain Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=d.HEAPU32.subarray(r/s,r/s+1)[0],c=new Uint8Array(d.HEAPU8.subarray(l,l+u));return this.free(l),this.free(e),c},t.encodeEstablishStream=function(t,n){var e=this.malloc(n.length);if(e===-1)return null;for(var r=d.HEAPU8.subarray(e,e+n.length),a=0;a<n.length;++a)r[a]=n[a];var i=this.malloc(s*2),l=i,u=i+s,c=d.__DgwCodecEncodeStreamGroup_EstabStream(t,e,n.length,l,u);if(this.free(e),c!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var m;return(m=this.$2)==null||m.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EstablishStream Frame encode failure","Failed to encode EstablishStream Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(c)+" for StreamId "+t),null}var p=d.HEAPU32.subarray(l/s,l/s+1)[0],_=d.HEAPU32.subarray(u/s,u/s+1)[0],f=new Uint8Array(d.HEAPU8.subarray(p,p+_));return this.free(p),this.free(i),f},t.encodeEndOfData=function(t){var e=this.malloc(s*2);if(e===-1)return null;var n=e,r=e+s,a=d.__DgwCodecEncodeStreamGroup_EndOfData(t,n,r);if(a!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var i;return(i=this.$2)==null||i.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"EndOfData Frame encode failure","Failed to encode EndOfData Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(a)),null}var l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=d.HEAPU32.subarray(r/s,r/s+1)[0],c=new Uint8Array(d.HEAPU8.subarray(l,l+u));return this.free(l),this.free(e),c},t.encodePing=function(){var e=this.malloc(s*2);if(e===-1)return null;var t=e,n=e+s,r=d.__DgwCodecEncodePing(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Ping Frame encode failure","Failed to encode Ping Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=d.HEAPU32.subarray(t/s,t/s+1)[0],l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=new Uint8Array(d.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),u},t.encodePong=function(){if(this.$5!=null)return this.$5;var e=this.malloc(s*2);if(e===-1)return null;var t=e,n=e+s,r=d.__DgwCodecEncodePong(t,n);if(r!==o("DGWConstants").DgwCodecReturnCode.DgwCodecReturnCode_Success){var a;return(a=this.$2)==null||a.logError(o("DGWLoggingContext").DGWLoggingComponent.CODEC_COMPONENT,"Pong Frame encode failure","Failed to encode Pong Frame. Received error code "+o("DGWConstants").DgwCodecReturnCodeToString(r)),null}var i=d.HEAPU32.subarray(t/s,t/s+1)[0],l=d.HEAPU32.subarray(n/s,n/s+1)[0],u=new Uint8Array(d.HEAPU8.subarray(i,i+l));return this.free(i),this.free(e),this.$5=u,u},e})();l.uuidv4=u,l.Uint8ArrayToBase64UrlStr=c,l.DGWUtils=_,l.DGWCodec=f}),98);
__d("DGWExponentialBackoff",[],(function(t,n,r,o,a,i){"use strict";var e={maxRetries:5,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},l=(function(e){function t(t,n){var r;return r=e.call(this,t)||this,r.errors=n,r}return babelHelpers.inheritsLoose(t,e),t})(babelHelpers.wrapNativeSuper(Error));async function s(t,n){n===void 0&&(n=e);try{return await u(t,n)}catch(e){throw e.errors[e.errors.length-1]}}async function u(e,t){for(var n=0,r=[],o=t.baseRetryInterval,a=t.backoffFactor;n<=t.maxRetries;){try{var i=await e();return i}catch(e){r.push(e)}await c(o*Math.pow(a,n)),++n}throw new l("Max call count exceeded",r)}async function c(e){await new Promise(function(t){return window.setTimeout(t,e)})}i.callWithExponentialBackoff=s}),66);
__d("DGWGlobalLogger",["gkx","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){var e=this;this.tabID=r("uuidv4")(),this.isTabClosed=!1,this.otherTabs=new Map,this.thisTab={realtime:0,lightspeed:0},this.broadcastChannel=this.$1("DGWGlobalLogger"),this.broadcastChannel.onmessage=function(t){var n=JSON.parse(String(t.data)),r=!e.otherTabs.has(n.key);n.event==="DELETE"?e.otherTabs.delete(n.key):n.event==="UPDATE"&&n.value!=null&&(e.otherTabs.set(n.key,n.value),r&&e.$2())}}var t=e.prototype;return t.$1=function(t){return window.BroadcastChannel!=null?new BroadcastChannel(t):{onmessage:function(t){},postMessage:function(t){}}},t.streamRequested=function(t){switch(t){case"realtime":this.thisTab.realtime++;break;case"lightspeed":this.thisTab.lightspeed++;break}this.$2()},t.streamClosed=function(t){switch(t){case"realtime":this.thisTab.realtime=Math.max(0,this.thisTab.realtime-1);break;case"lightspeed":this.thisTab.lightspeed=Math.max(0,this.thisTab.lightspeed-1);break}this.$2()},t.tabClosed=function(){if(!this.isTabClosed){this.isTabClosed=!0;var e={key:this.tabID,event:"DELETE"};this.broadcastChannel.postMessage(JSON.stringify(e))}},t.getGlobalState=function(){var e={realtime:this.thisTab.realtime,lightspeed:this.thisTab.lightspeed};return this.otherTabs.forEach(function(t){e.realtime+=t.realtime,e.lightspeed+=t.lightspeed}),e},t.$2=function(){var e={key:this.tabID,event:"UPDATE",value:this.thisTab};this.broadcastChannel.postMessage(JSON.stringify(e))},e})(),s=r("gkx")("4337")?new e:{streamRequested:function(){},streamClosed:function(){},tabClosed:function(){},getGlobalState:function(){return{realtime:-1,lightspeed:-1}}},u=function(){return s};l.getInstance=u}),98);
__d("DGWPinger",["DGWLoggingContext"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$4=t,this.$5=n,this.$3=!1}var t=e.prototype;return t.$6=function(){var e=this;if(this.$3){var t;(t=o("DGWLoggingContext")).DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout_fired.reset"),this.$3=!1,this.$4(),t.DGWLoggingContext.bumpODSKey(t.DGWLoggingComponent.PINGER,"timeout.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1)}else o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"timeout_fired.disconnect"),this.$5()},t.reset=function(){var e=this;this.$3=!0,this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset"),window.clearTimeout(this.$2),this.$2=null),this.$1>0&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"reset.newtimeout"),this.$2=window.setTimeout(function(){e.$6()},this.$1))},t.cancel=function(){this.$2&&(o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.PINGER,"canceled"),window.clearTimeout(this.$2),this.$2=null)},e})();l.DGWPinger=e}),98);
__d("DGWStreamGroupCallbacks",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({TRANSPORT_SERVER_INTERNAL_ERROR:0,TRANSPORT_ABNORMAL_CLOSURE:1,TRANSPORT_GOING_AWAY:2,TRANSPORT_UNKNOWN_ERROR:3,TRANSPORT_KEEPALIVE_TIMEOUT:4,TRANSPORT_UNAUTHORIZED:5,TRANSPORT_REJECTED:6,TRANSPORT_BAD_REQUEST:7,TRANSPORT_DGW_SERVER_ERROR:8,TRANSPORT_NORMAL_CLOSURE:9});function l(t){switch(t){case e.TRANSPORT_SERVER_INTERNAL_ERROR:return"TRANSPORT_SERVER_INTERNAL_ERROR";case e.TRANSPORT_ABNORMAL_CLOSURE:return"TRANSPORT_ABNORMAL_CLOSURE";case e.TRANSPORT_GOING_AWAY:return"TRANSPORT_GOING_AWAY";case e.TRANSPORT_UNKNOWN_ERROR:return"TRANSPORT_UNKNOWN_ERROR";case e.TRANSPORT_KEEPALIVE_TIMEOUT:return"TRANSPORT_KEEPALIVE_TIMEOUT";case e.TRANSPORT_UNAUTHORIZED:return"TRANSPORT_UNAUTHORIZED";case e.TRANSPORT_REJECTED:return"TRANSPORT_REJECTED";case e.TRANSPORT_BAD_REQUEST:return"TRANSPORT_BAD_REQUEST";case e.TRANSPORT_DGW_SERVER_ERROR:return"TRANSPORT_DGW_SERVER_ERROR";case e.TRANSPORT_NORMAL_CLOSURE:return"TRANSPORT_NORMAL_CLOSURE"}}function s(t){switch(t){case e.TRANSPORT_UNAUTHORIZED:return!1;default:return!0}}var u=(function(){function e(){}var t=e.prototype;return t.onStreamGroupError=function(){},t.onStreamGroupMustDrain=function(){},t.onStreamGroupTransportClose=function(){},e})();i.DGWStreamGroupError=e,i.dgwStreamGroupErrorToString=l,i.isRetryableError=s,i.NoOpDGWStreamGroupCallbacks=u}),66);
__d("DGWTransportEvents",["DGWLoggingContext","NetworkStatus"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){this.$3=e}var t=e.prototype;return t.transportEstablished=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"open",t),this.$2=Date.now(),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_success")},t.transportPingSent=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Ping Frame Sent",t,!0)},t.transportPongReceived=function(t){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Pong Frame Received",t,!0)},t.transportEstablishmentPending=function(){this.$1=Date.now(),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transportPending",null,!0),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_pending")},t.transportClosed=function(t,n,r){this.$4=Date.now(),t?(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_graceful"),this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed gracefully",null,!0)):(this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"transport_close_with_error"),this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Transport closed abnormally",n,r))},t.transportEstablishmentFailure=function(t){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"WebSocket transport establishment failure","WebSocket close code: "+t.code+" reason: "+t.reason+" wasClean: "+String(t.wasClean)),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_group_establishment_failure")},t.streamEstablishmentTimeout=function(t,n,a){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment timeout",t,"streamId:"+n+", onLine:"+String(r("NetworkStatus").isOnline()),!1,a),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_timeout")},t.streamEstablishmentPending=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment pending","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_pending")},t.streamEstablishmentSuccess=function(t,n){this.$3.logEvent(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Grouped Stream establishment success","streamId:"+t,!0,n),this.$3.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"stream_establishment_success")},t.transportError=function(t,n,r){this.$3.logError(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,t,n,r)},t.receivedFrameForInactiveStream=function(t,n,r){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Frame received for inactive stream","frameType: "+t+", streamID: "+n,r)},t.ranOutOfStreamIds=function(t){this.$3.logWarn(o("DGWLoggingContext").DGWLoggingComponent.WEBSOCKET_TRANSPORT_COMPONENT,"Hit max StreamId limit","Hit max StreamId limit",t)},e})();l.DGWTransportEvents=e}),98);
__d("DGWWebSocketTransport",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t=new WebSocket(e);return t.binaryType="arraybuffer",t.onopen=function(){},t.onclose=function(){},t.onerror=function(){},t}i.getWebSocketConnection=e}),66);
__d("DGWStreamEvents",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$4=new Map,this.$5=new Map,this.$6=e,this.$1=t,n!=null&&(this.$8="streamId:"+n+"::")}var t=e.prototype;return t.dataSent=function(t,n,r){var e,o=n?"sendWithAckRequested":"sendWithoutAckRequested";this.$6.logEvent(this.$1,o,((e=this.$8)!=null?e:"")+"sendId:"+r+", payloadSize:"+t,!0),this.$4.set(r,{ackRequested:n,payloadSize:t,sendTimestamp:Date.now()})},t.ackReceived=function(t){var e;this.$6.logEvent(this.$1,"AckReceived",((e=this.$8)!=null?e:"")+"sendId:"+t,!0),this.$6.bumpODSKey(this.$1,"ack_received");var n=this.$4.get(t);n!=null&&(n.ackReceivedTimestamp=Date.now())},t.ackSent=function(t){var e;this.$6.bumpODSKey(this.$1,"ack_sent"),this.$6.logEvent(this.$1,"ACK sent",((e=this.$8)!=null?e:"")+"ackId:"+t,!0)},t.drainSent=function(t){var e;this.$6.logEvent(this.$1,"Drain sent",((e=this.$8)!=null?e:"")+"drainReason: "+t)},t.dataReceived=function(t,n,r){var e;this.$6.bumpODSKey(this.$1,"data_received"),this.$6.logEvent(this.$1,"Data received",((e=this.$8)!=null?e:"")+"sendId:"+(r!=null?r:"null")+", ackRequested:"+n.toString()+", payloadSize:"+t,!0),r!=null&&this.$5.set(r,{ackRequested:n,payloadSize:t,receiveTimestamp:Date.now()})},t.endOfDataReceived=function(){this.$6.bumpODSKey(this.$1,"end_of_data_received"),this.$6.logEvent(this.$1,"EndOfDataReceived",this.$8,!0)},t.endOfDataSent=function(){this.$6.bumpODSKey(this.$1,"end_of_data_sent"),this.$6.logEvent(this.$1,"EndOfDataSent",this.$8,!0)},t.streamClosed=function(t,n){this.$7=Date.now();var e=this.$9();if(t){var r;this.$6.bumpODSKey(this.$1,"stream_closed_gracefully"),this.$6.logEvent(this.$1,"Stream closed gracefully",""+((r=this.$8)!=null?r:"")+e)}else{var o;this.$6.bumpODSKey(this.$1,"stream_closed_with_error"),this.$6.logError(this.$1,"Stream closed abnormally",n,""+((o=this.$8)!=null?o:"")+e)}},t.connectionEstablishmentFailure=function(t){this.$6.logEvent(this.$1,"WebSocket connection establishment failure","WebSocket close code: "+t)},t.streamEstablishmentFailure=function(t,n){var e;this.$6.logError(this.$1,"Failed to establish DGW Stream","Last seen error: "+t.toString(),""+((e=this.$8)!=null?e:"")+n),this.$6.bumpODSKey(this.$1,"stream_establishment_failure")},t.error=function(t,n){var e={msg:n,state:this.$9()};this.$6.logError(this.$1,t,JSON.stringify(e),this.$8)},t.$9=function(){var e={currentNetworkCondition:window.navigator&&window.navigator.onLine===!0,establishRequestTimestamp:this.$2,establishedTimestamp:this.$3,streamClosedTimestamp:this.$7,sendHistory:JSON.stringify(Array.from(this.$4.entries())),receiveHistory:JSON.stringify(Array.from(this.$5.entries()))};return JSON.stringify(e)},e})();i.DGWStreamEvents=e}),66);
__d("GroupedStream",["DGWAckManager","DGWConstants","DGWLoggingContext","DGWStream","DGWStreamEvents","QuickPerformanceLogger","Random","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(701242292,"2919"),u=(function(){function t(t,n,a,i,l,u,c){this.$1=t,this.$3=!1,this.$4=!1,this.$5=!1,this.$6=n,this.$7=a,this.$8=i,this.$2=u,this.$9=l,this.$10=new(o("DGWAckManager")).DGWAckManager(this.$9),this.$12=new(o("DGWStreamEvents")).DGWStreamEvents(this.$9,o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,this.$1),this.$11=0,this.$13=c,this.$14=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),(e||(e=r("QuickPerformanceLogger"))).markerStart(s,this.$14)}var n=t.prototype;return n.send=async function(t,n){var e=this.$11++%o("DGWConstants").MAX_ACK_ID,r=this.$15(t,!0,e);if(!this.$16(r,!0,e))return!1;var a=await this.$10.waitForAck(e,n!=null?n:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return a},n.sendFrame=async function(t,n,r){var e=this.$11++%o("DGWConstants").MAX_ACK_ID,a=this.$15(n,!0,e);if(a==null)return!1;var i=new Uint8Array(t.length+a.length);if(i.set(t),i.set(a,t.length),!this.$16(i,!0,e))return!1;var l=await this.$10.waitForAck(e,r!=null?r:o("DGWConstants").DEFAULT_ACK_TIMEOUT_MS);return this.__markerPoint(l?"ack_recevied":"ack_timeout"),l||(this.__endMarker(3),Promise.reject(o("DGWStream").StreamError.ACK_TIMEOUT))},n.sendAndForget=function(t){var e=this.$15(t,!1,0);return this.$16(e,!1,0)},n.sendFrameAndForget=function(t,n){var e=this.$15(n,!1,0);if(e==null)return!1;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),this.$16(r,!1,0)},n.close=function(){var e=this.$2.encodeEndOfData(this.$1);if(e==null){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode EndOfData","streamId: "+this.$1);return}var t=this.$8.send(e);if(!t){this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send EndOfData","streamId: "+this.$1+". StreamGroupTransport not open during send");return}this.$12.endOfDataSent(),this.$5=!0,this.$4&&this.$17()},n.loggingContext=function(){return this.$9},n.__sendDrain=function(t){var e=o("DGWConstants").drainReasonToDrainReasonString(t);if(this.$5)return!1;var n=this.$2.encodeDrain(t);if(n==null)return!1;this.$12.drainSent(e);var r=this.$8.send(n);return r},n.__transportCloseHook=function(t){this.$13(),this.$10.clearPendingAcks(),t?(this.$12.error("Received StreamError","StreamErrorType: "+t),this.$6.onError(t)):this.$5&&this.$4?this.$17():(this.$12.streamClosed(!1,"Stream closed: ClosedLocally: "+this.$5.toString()+", EndOfDataReceived: "+this.$4.toString()),this.$6.onError(o("DGWStream").StreamError.PREMATURE_CLOSE))},n.$17=function(){this.$13(),this.$12.streamClosed(!0,"Graceful close"),this.$6.onClose(this)},n.__dataReceivedHook=function(t,n){this.$12.dataReceived(t.length,n!=null,n),n!=null&&this.$18(n),this.$6.onDataReceived(t)},n.__ackReceivedHook=function(t){this.$12.ackReceived(t),this.$10.handleAckReceived(t)},n.__drainReceivedHook=function(t){this.$3===!1&&(this.$6.onStreamMustDrain(this,t),this.$3=!0)},n.__endOfDataHook=function(){this.$12.endOfDataReceived(),this.$4=!0,this.$5?this.$17():this.$6.onServerHasFinishedSendingData(this)},n.__markerPoint=function(n){var t=this.$14;(e||(e=r("QuickPerformanceLogger"))).markerPoint(s,n,{instanceKey:t})},n.__markerAnnotate=function(n){var t=this.$14;(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,n,{instanceKey:t})},n.__endMarker=function(n){(e||(e=r("QuickPerformanceLogger"))).markerEnd(s,n,this.$14)},n.$15=function(t,n,r){return this.$2.encodeData(t,n,r,this.$1)},n.$16=function(t,n,r){if(this.__markerPoint("send_data_start"),this.$5)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","Stream closed locally"),!1;if(t==null)return!1;var e=this.$8.send(t);return e?(this.__markerPoint("send_data_end"),this.$12.dataSent(t.length,n,r),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send data","ClosedLocally: "+this.$5.toString()),!1)},n.$18=function(t){var e=this.$2.encodeAck(t,this.$1);if(e==null)return this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to encode ACK","ackId: "+t),!1;var n=this.$8.send(e);return n?(this.$12.ackSent(t),!0):(this.$9.logError(o("DGWLoggingContext").DGWLoggingComponent.GROUPED_STREAM_COMPONENT,"Failed to send ACK","ackId: "+t),!1)},t})();l.GroupedStream=u}),98);
__d("StreamIdGenerator",["err"],(function(t,n,r,o,a,i,l){"use strict";var e=65535,s=(function(){function t(){this.$1=new Set,this.$2=0}var n=t.prototype;return n.getNextStreamId=function(){var t;if(!this.streamIdAvailable())throw r("err")("Max number of stream IDs reached");if(this.$2<=e)return this.$2++;var n=(t=this.$1.values().next().value)!=null?t:0;return this.$1.delete(n),n},n.putBackStreamId=function(t){this.$1.add(t)},n.streamIdAvailable=function(){return this.$1.size>0||this.$2<=e},t})();l.MAX_STREAM_ID=e,l.StreamIdGeneratorImpl=s}),98);
__d("StreamGroupWebSocketTransport",["DGWConstants","DGWExponentialBackoff","DGWGlobalLogger","DGWLoggingContext","DGWPinger","DGWStream","DGWStreamGroupCallbacks","DGWTransportEvents","DGWUtils","DGWWebSocketTransport","GroupedStream","QuickPerformanceLogger","Random","Run","StreamIdGenerator","err","getErrorSafe","qex","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=r("qpl")._(701238781,"3037"),c=(e=r("qex")._("2103"))!=null?e:!1,d=function(t,n,r,a,i){var e=this;this.groupedStream=t,this.$1=window.setTimeout(function(){r(o("DGWStream").StreamError.ESTABLISHMENT_TIMEOUT)},a),this.handleEstablishFrameReceived=function(){window.clearTimeout(e.$1),n(e.groupedStream)},this.abortStream=function(e){i(),r(e)}},m=(function(){function e(t,n,a,i,l,c,d,m){var p=this,_;this.$18=-1,this.$15=l,this.$17=this.__getStreamIdGenerator(),this.$5=new Map,this.$6=new Map,this.$7=i.keepAliveMs,this.$8=!1,this.$9=!1,this.$3=!0,this.$4=!1,this.$21=!1,this.$22=!1,this.$13=a,this.$11=new TextEncoder,this.$12=new TextDecoder,this.$14=i;var f={onDataReceived:function(){},handleAckReceived:function(){},receivedDrainSignal:function(t){p.$9||(p.$9=!0,p.$15(),p.$13.transportClosed(!0,""),p.$14.streamGroupCallbacks.onStreamGroupMustDrain(t),p.$5.forEach(function(e){e.__drainReceivedHook(t)}),p.onClose(o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE))},onGroupedStreamDataReceived:function(t,n,r){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__dataReceivedHook(n,r)}else p.$13.receivedFrameForInactiveStream("Data",t,"sendAckID: "+(r!=null?r:"null"))},onGroupedStreamAckReceived:function(t,n){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__ackReceivedHook(n)}else p.$13.receivedFrameForInactiveStream("ACK",t,"ackId: "+(n!=null?n:"null"))},onGroupedStreamEndOfDataReceived:function(t){if(p.$5.has(t)){var e=p.$5.get(t);e==null||e.__endOfDataHook()}else p.$13.receivedFrameForInactiveStream("EndOfData",t)},onGroupedStreamEstablishStreamReceived:function(t,n){if(p.$6.has(t)){var e=p.$6.get(t);p.$6.delete(t);var r=JSON.parse(p.$12.decode(n));(r.code===void 0||r.code!==200)&&(e==null||e.abortStream(o("DGWStream").StreamError.ABNORMAL_CLOSURE)),e==null||e.handleEstablishFrameReceived()}else p.$13.receivedFrameForInactiveStream("EstablishStream",t,"EstablishStream received for non-inflight stream")},onPingReceived:function(){var e=p.$2.encodePing();e!=null&&p.send(e)},onPongReceived:function(){p.$3=!1,p.$22||(p.$22=!0,p.__markerPoint("auth_success")),p.$13.transportPongReceived("readyState:"+p.$1.readyState+", bufferedAmount:"+p.$1.bufferedAmount)}};this.$2=new(o("DGWUtils")).DGWCodec(c,f,i.dgwVersion),this.$20=Date.now()+(Math.round(o("Random").random()*1e4)+1e4),this.$23=o("DGWGlobalLogger").getInstance(),this.$24=(_=i.connectTimeoutMs)!=null?_:2e4;var g=o("Run").onUnload(function(){p.$23.tabClosed()});if(i.enableFirstStreamOnWsHandshake){var h,y,C,b;if(d===void 0)throw r("err")("Missing grouped stream options");if(m===void 0)throw r("err")("Missing grouped stream callbacks");var v=this.$17.getNextStreamId(),S=this.createEstablishStreamFrame(v,d),R=o("DGWUtils").DGWUtils.constructConnectUrl({appId:i.appId,appVersion:i.appVersion,authType:i.authType,deviceId:(h=i.deviceId)!=null?h:void 0,dgwVersion:i.dgwVersion,fbId:i.fbId,tier:i.tier,loggingId:(y=i.loggingId)!=null?y:void 0,headers:e.__prefixAppHeaders(i.headers),endpoint:i.connectEndpoint,serviceId:i.serviceId,regionHint:(C=i.regionHint)!=null?C:void 0,establishStreamFrame:S,authToken:(b=i.authToken)!=null?b:void 0});if(this.$1=n(R),!R.includes(o("DGWConstants").HEADER_CONSTANTS.HEADER_ESTABLISH_STREAM_FRAME_BASE64))return;var L=new(o("DGWLoggingContext")).DGWLoggingContext(this.$14.dgwVersion,d.loggingId,this.$14.serviceId,this.$14.fbId,this.$14.loggingId,d.disableFalcoLogging),E=this.__createGroupedStream(v,m,d,L);this.$16=this.waitForEstablishStream(v,E,d,function(e){p.$5.set(v,e)},function(){p.$17.putBackStreamId(v)})}else this.$1=n(t);this.$23.streamRequested(i.serviceId),(s||(s=r("QuickPerformanceLogger"))).markerStart(u,this.$20),this.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId}})}var t=e.prototype;return t.send=function(t){try{return this.$1.send(t),!0}catch(e){return this.$13.transportError("Failed to send over transport","readyState: "+this.$1.readyState,r("getErrorSafe")(e).message),!1}},t.close=function(){var e;this.$23.streamClosed(this.$14.serviceId),this.__markerPoint("teardown"),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.onopen=function(e){},this.$1.onmessage=function(e){},this.$1.onerror=function(e){},this.$1.onclose=function(e){},this.$15(),this.$1.close()},t.onClose=function(t){var e;this.$23.streamClosed(this.$14.serviceId),this.__markerPoint("abort"),this.__markerAnnotate({int:{abort_code:t}}),this.$8=!0,(e=this.$10)==null||e.cancel(),this.$1.close(t)},t.abort=function(t,n,r,o,a){this.$8||(this.$23.streamClosed(this.$14.serviceId),this.$8=!0,this.$13.transportClosed(!1,o,a),this.$5.forEach(function(e){e.__transportCloseHook(n)}),this.$6.forEach(function(e){e.abortStream(n)}),this.$14.streamGroupCallbacks.onStreamGroupError(t),this.$5.clear(),this.$6.clear(),this.$15(),this.onClose(r))},e.getTransportWithInitialStream=async function(n,r,a,i,l,s){await o("DGWUtils").DGWCodec.initialize();var t=new(o("DGWTransportEvents")).DGWTransportEvents(i);t.transportEstablishmentPending();var u=function(){return e.$25("",a,t,l,i,n,r)};try{var c=await o("DGWExponentialBackoff").callWithExponentialBackoff(u,s),d=c.$16!=null?c.$16:c.establishGroupedStream(r,n,new(o("DGWLoggingContext")).DGWLoggingContext(a.dgwVersion,n.loggingId,a.serviceId,a.fbId,a.loggingId,n.disableFalcoLogging));return{transport:c,streamPromise:d}}catch(e){throw e}},e.getTransport_DEPRECATED=async function(n,r,a,i,l){await o("DGWUtils").DGWCodec.initialize();var t=new(o("DGWTransportEvents")).DGWTransportEvents(a);t.transportEstablishmentPending();var s=function(){return e.$25(n,r,t,i,a)};try{return await o("DGWExponentialBackoff").callWithExponentialBackoff(s,l)}catch(e){throw e}},t.establishGroupedStream=async function(t,n,o,a,i,l){var e=this;i===void 0&&(i=!0);var s=this.getStreamId(),u=this.createEstablishStreamFrame(s,n),c=this.__createGroupedStream(s,t,n,o);c.__markerAnnotate({string:{serviceId:this.$14.serviceId,streamGroupId:this.$14.loggingId,streamId:n.streamTraceId}}),l!=null&&c.__markerAnnotate(l);var d=this.waitForEstablishStream(s,c,n,function(t){e.$5.set(s,t)},function(){e.$17.putBackStreamId(s)});if(a!=null){var m;c.__markerPoint("send_payload_start"),c.__markerAnnotate({int:{establishStreamPayloadSize:a.byteLength}});var p=(m=n.ackTimeoutMs)!=null?m:3e4,_=i?await c.sendFrame(u,a,p):c.sendFrameAndForget(u,a);return _?(c.__markerPoint("send_payload_end"),c.__endMarker(2),Promise.resolve(c)):(c.__endMarker(3),Promise.reject("Failed to send data when establishing stream"))}if(c.__markerPoint("send_establish_stream_start"),!this.send(u))throw c.__endMarker(3),r("err")("Websocket connection closed before stream established");c.__markerPoint("send_establish_stream_end");var f=await d;return c.__endMarker(2),f},e.__prefixAppHeaders=function(t){return Object.keys(t).reduce(function(e,n){return e[""+o("DGWConstants").HEADER_CONSTANTS.APPHEADER_PREFIX+n]=t[n],e},{})},t.waitForEstablishStream=async function(t,n,r,o,a){var e=this;this.$13.streamEstablishmentPending(t,r.loggingId);try{var i=await new Promise(function(r,o){e.$6.set(t,new d(n,r,o,3e4,function(){e.streamEndCallback(t)}))});return o(n),this.$13.streamEstablishmentSuccess(t,r.loggingId),i}catch(e){throw a(),this.$13.streamEstablishmentTimeout("Stream establishment timeout. readyState: "+this.$1.readyState,t,r.loggingId),e}},e.$25=async function(n,r,a,i,l,s,u){var t=new e(n,o("DGWWebSocketTransport").getWebSocketConnection,a,r,i,l,s,u);t.$1.onmessage=e.$26(t),t.$1.onopen=function(){t.__markerPoint("onopen"),a.transportEstablished(n),t.$10!=null&&t.$10.cancel(),t.$7!=null&&(t.$10=new(o("DGWPinger")).DGWPinger(t.$7,function(){t.$27()},function(){t.abort(o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_KEEPALIVE_TIMEOUT,o("DGWStream").StreamError.KEEPALIVE_TIMEOUT,o("DGWConstants").WebsocketCloseCodes.KEEPALIVE_TIMEOUT,"Aborting transport because of keepalive timeout","readyState:"+t.$1.readyState+", bufferedAmount:"+t.$1.bufferedAmount)}))},t.$1.onerror=function(){t.__markerPoint("onerror"),t.$13.transportError("onerror","readyState: "+t.$1.readyState)},t.$1.onclose=e.$28(t);var c=await e.getTransportPromise(t);return c},e.getTransportPromise=async function(t){var e=await new Promise(function(e,n){var r=t.$1.onerror,a=t.$1.onmessage,i=t.$1.onclose;t.$19=window.setTimeout(function(){t.$15(),t.$13.transportClosed(!1,"TIMEOUT"),t.__markerPoint("connect_timeout"),t.close(),n(o("DGWStream").StreamError.TRANSPORT_ESTABLISHMENT_TIMEOUT)},t.$24),t.$1.onerror=function(){t.$19!=null&&(window.clearTimeout(t.$19),t.$19=null),r(),t.close(),c||n(o("DGWStream").StreamError.ESTABLISHMENT_ERROR)},t.$1.onclose=function(e){t.$19!=null&&(window.clearTimeout(t.$19),t.$19=null),i(e),e.code===o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED?n(o("DGWStream").StreamError.UNAUTHORIZED):n(e.code+":"+e.reason)},t.$1.onmessage=function(n){a(n),t.$19!=null&&!t.$3&&(window.clearTimeout(t.$19),t.$19=null,t.__markerPoint("connect_success"),e(t))}});return e},e.$26=function(t){return function(e){var n;if(t.$21||(t.$21=!0,t.__markerPoint("onmessage")),(n=t.$10)==null||n.reset(),!(e.data instanceof ArrayBuffer)){t.$13.transportError("Incorrect Data Protocol","Received "+typeof e.data+" instead of ArrayBuffer");return}t.$2.append(new Uint8Array(e.data)),t.$2.processData()}},e.$28=function(t){return function(e){var n,r=t.$23.getGlobalState();if(t.__markerPoint("onclose"),t.__markerAnnotate({string:{reason:e.reason},int:{code:e.code,realtimeWebSockets:r.realtime,lightspeedWebSockets:r.lightspeed}}),t.__endMarker(e.code===o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE?2:3),(n=t.$10)==null||n.cancel(),!(t.$8===!0||t.$4)){if(t.$23.streamClosed(t.$14.serviceId),t.$8=!0,t.$3===!0){t.$13.transportEstablishmentFailure(e),t.$5.clear(),t.$15();return}if(t.$15(),t.$3=!0,e.code!==o("DGWConstants").WebsocketCloseCodes.GRACEFUL_CLOSE){t.$13.transportClosed(!1,"Websocket connection failure with code: "+e.code+" reason: "+e.reason+" wasClean: "+String(e.wasClean));var a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;switch(e.code){case o("DGWConstants").WebsocketCloseCodes.NORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_NORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.ABNORMAL_CLOSURE:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_ABNORMAL_CLOSURE,i=o("DGWStream").StreamError.ABNORMAL_CLOSURE;break;case o("DGWConstants").WebsocketCloseCodes.SERVER_INTERNAL_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.SERVER_INTERNAL_ERROR;break;case o("DGWConstants").WebsocketCloseCodes.GOING_AWAY:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_GOING_AWAY,i=o("DGWStream").StreamError.GOING_AWAY;break;case o("DGWConstants").WebsocketCloseCodes.UNAUTHORIZED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNAUTHORIZED,i=o("DGWStream").StreamError.UNAUTHORIZED;break;case o("DGWConstants").WebsocketCloseCodes.REJECTED:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_REJECTED,i=o("DGWStream").StreamError.REJECTED;break;case o("DGWConstants").WebsocketCloseCodes.BAD_REQUEST:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_BAD_REQUEST,i=o("DGWStream").StreamError.BAD_REQUEST;break;case o("DGWConstants").WebsocketCloseCodes.DGW_SERVER_ERROR:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_SERVER_INTERNAL_ERROR,i=o("DGWStream").StreamError.DGW_SERVER_ERROR,a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_DGW_SERVER_ERROR;break;default:a=o("DGWStreamGroupCallbacks").DGWStreamGroupError.TRANSPORT_UNKNOWN_ERROR,i=o("DGWStream").StreamError.UNKNOWN_ERROR;break}t.$14.streamGroupCallbacks.onStreamGroupError(a),t.$5.forEach(function(e){e.__transportCloseHook(i)}),t.$6.forEach(function(e){e.abortStream(i)})}else t.$13.transportClosed(!0,""),t.$14.streamGroupCallbacks.onStreamGroupTransportClose(),t.$5.forEach(function(e){e.__transportCloseHook()}),t.$6.forEach(function(e){e.abortStream(o("DGWStream").StreamError.TRANSPORT_CLOSED_BEFORE_STREAM_INIT)});t.$5.clear(),t.$6.clear()}}},t.$27=function(){var e=this.$2.encodePing();if(e==null)throw r("err")("Failed to encode Ping Frame");var t=this.send(e);this.$18=this.$1.bufferedAmount,this.$13.transportPingSent("readyState:"+this.$1.readyState+", bufferedAmount:"+this.$18+", payloadSize:"+(e==null?void 0:e.byteLength)+", sent:"+String(t))},t.isClosedLocally=function(){return this.$3||this.$8||this.$4},t.streamEndCallback=function(t){this.$5.delete(t),this.$6.delete(t),this.$17.putBackStreamId(t)},t.canCreateGroupedStream=function(){return this.$17.streamIdAvailable()},t.createEstablishStreamFrame=function(n,a){var t=e.__prefixAppHeaders(a.groupedStreamHeaders);a.streamTraceId!=null&&(t[o("DGWConstants").HEADER_CONSTANTS.HEADER_STREAM_TRACE_ID]=a.streamTraceId);var i=this.$2.encodeEstablishStream(n,new Uint8Array(this.$11.encode(JSON.stringify(t))));if(i==null)throw this.$17.putBackStreamId(n),r("err")("Failed to encode EstablishStreamFrame");return i},t.getStreamId=function(){try{return this.$17.getNextStreamId()}catch(e){throw this.$13.ranOutOfStreamIds("inFlightGroupedStreamSize: "+this.$6.size+" groupedStreamSize: "+this.$5.size),e}},t.__createGroupedStream=function(t,n,r,a){var e=this;return new(o("GroupedStream")).GroupedStream(t,n,r,this,a,this.$2,function(){e.streamEndCallback(t)})},t.__getStreamIdGenerator=function(){return new(o("StreamIdGenerator")).StreamIdGeneratorImpl},t.__markerPoint=function(t){var e=this.$20;(s||(s=r("QuickPerformanceLogger"))).markerPoint(u,t,{instanceKey:e})},t.__markerAnnotate=function(t){var e=this.$20;(s||(s=r("QuickPerformanceLogger"))).markerAnnotate(u,t,{instanceKey:e})},t.__endMarker=function(t){(s||(s=r("QuickPerformanceLogger"))).markerEnd(u,t,this.$20)},e})();l.StreamGroupWebSocketTransport=m}),98);
__d("StreamGroup",["DGWConstants","DGWLoggingContext","DGWUtils","StreamGroupWebSocketTransport","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e={maxRetries:r("justknobx")._("2595"),baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)},s=(function(){function t(e,t,n,r,a,i,l,s,u){var c,d,m,p,_,f,g,h,y;this.$2=u,this.$1=u.getNewStreamGroupId();var C=(c=l.overrideUrl)!=null?c:a;this.$5=null,this.$3={appId:e,appVersion:t,authType:(d=l.authType)!=null?d:n,deviceId:l.deviceId,dgwVersion:r,headers:l.streamGroupAppHeaders,tier:(m=l.serviceTier)!=null?m:o("DGWConstants").DEFAULT_SERVICE_TIER,connectEndpoint:C,fbId:i,loggingId:l.loggingId,serviceId:l.serviceId,streamGroupCallbacks:s,keepAliveMs:l.keepAliveMs,regionHint:l.regionHint,enableFirstStreamOnWsHandshake:!1,authToken:l.authToken,connectTimeoutMs:l.connectTimeoutMs},this.$4=l,this.streamGroupLoggingContext=new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,null,this.$3.serviceId,this.$3.fbId,this.$4.loggingId,!1,(p=l.verboseLoggingEnabled)!=null?p:!1),this.$6=o("DGWUtils").DGWUtils.constructConnectUrl({appId:this.$3.appId,appVersion:this.$3.appVersion,authType:this.$3.authType,deviceId:(_=this.$3.deviceId)!=null?_:void 0,dgwVersion:this.$3.dgwVersion,fbId:this.$3.fbId,headers:babelHelpers.extends({},this.$3.headers),loggingId:(f=this.$3.loggingId)!=null?f:void 0,tier:this.$3.tier,serviceId:this.$3.serviceId,endpoint:this.$3.connectEndpoint,regionHint:(g=this.$3.regionHint)!=null?g:void 0,trafficTracing:(h=this.$4.trafficTracing)!=null?h:void 0,authToken:(y=this.$4.authToken)!=null?y:void 0})}var n=t.prototype;return n.initTransport=async function(){var e=this,t={maxRetries:0,baseRetryInterval:1e3,backoffFactor:Math.sqrt(2)};this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){e.$2.removeStreamGroupAndTransport(e.$1)},t);var n;try{n=await this.$5,this.$5=null}catch(e){throw this.$5=null,e}return this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,n),n},n.establishStream=async function(n,r,a,i,l){var t=this;if(this.$2.containsStreamGroup(this.$1)===!1)if(this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"createTransportWhenEstablishStream"),this.$3.enableFirstStreamOnWsHandshake){var u=await o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransportWithInitialStream(n,r,this.$3,this.streamGroupLoggingContext,function(){t.$2.removeStreamGroupAndTransport(t.$1)},e);return this.$2.setStreamGroupAndTransport(this.$1,u.transport),u.streamPromise}else{this.$5=this.$5||o("StreamGroupWebSocketTransport").StreamGroupWebSocketTransport.getTransport_DEPRECATED(this.$6,this.$3,this.streamGroupLoggingContext,function(){t.$2.removeStreamGroupAndTransport(t.$1)},e);var s;try{s=await this.$5,this.$5=null}catch(e){throw this.$5=null,e}this.$2.containsStreamGroup(this.$1)||this.$2.setStreamGroupAndTransport(this.$1,s)}return this.establishStreamWithTransport(n,r,a,i,l)},n.establishStreamWithTransport=async function(t,n,r,a,i){var e,l=t.loggingId;this.streamGroupLoggingContext.logEvent(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,"Establishing Grouped Stream","initialData:"+String(r!=null),!0,l);var s=await this.$2.getStreamGroupTransport(this.$1).establishGroupedStream(n,t,new(o("DGWLoggingContext")).DGWLoggingContext(this.$3.dgwVersion,l,this.$3.serviceId,this.$3.fbId,this.$3.loggingId,t.disableFalcoLogging,(e=t.verboseLoggingEnabled)!=null?e:!1),r,a,i);return s},n.canCreateGroupedStream=function(){var e=!0;if(this.$2.containsStreamGroup(this.$1)!==!1){var t=this.$2.getStreamGroupTransport(this.$1);e=t.canCreateGroupedStream()}return o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.STREAM_GROUP_COMPONENT,e?"can_create":"cannot_create"),e},n.close=function(){if(this.$2.containsStreamGroup(this.$1)){var e=this.$2.getStreamGroupTransport(this.$1);e.close()}},t})();l.StreamGroup=s}),98);
__d("StreamGroupRegistry",["Random","err"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(){this.$1=new Map,this.$2=new Set}var t=e.prototype;return t.setStreamGroupAndTransport=function(t,n){this.$1.set(t,n)},t.containsStreamGroup=function(t){return this.$1.has(t)},t.removeStreamGroupAndTransport=function(t){this.$1.delete(t)},t.getStreamGroupTransport=function(t){var e=this.$1.get(t);if(e==null)throw r("err")("No stream group transport");return e},t.getNewStreamGroupId=function(){for(var e=o("Random").uint32();this.$2.has(e);)e=o("Random").uint32();return this.$2.add(e),e},e})();l.StreamGroupRegistry=e}),98);
__d("RawDGWClient",["CurrentUser","DGWAuth","DGWLoggingContext","DGWStream","StreamGroup","StreamGroupRegistry","isFastRefreshEnabledForCurrentDomain"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){function e(e){var t=e.appId,n=e.appVersion,r=e.authType,a=e.dgwVersion,i=e.endpoint,l=e.fbId,s=e.authToken,u=e.isUserLoggedIn;this.$1=t,this.$2=n,this.$3=r,this.$5=a,this.$6=i,this.$7=l,this.$8=new(o("StreamGroupRegistry")).StreamGroupRegistry,this.$4=s,this.$9=u}var t=e.prototype;return t.createStreamGroup=function(t,n){var e,r;this.handleUserChecks((e=n.authType)!=null?e:this.$3);var a=(r=n.authToken)!=null?r:this.$4;return a!=null&&this.$3===o("DGWAuth").DGWAuth.GUEST&&(n.authToken=a),new(o("StreamGroup")).StreamGroup(this.$1,this.$2,this.$3,this.$5,this.$6,this.$7,n,t,this.$8)},t.handleUserChecks=function(t){var e=this.$9!=null?this.$9:r("CurrentUser").isLoggedInNow();if(!e&&o("DGWAuth").fromDGWAuthToString(t)!=="GUEST"&&!r("isFastRefreshEnabledForCurrentDomain")())throw o("DGWLoggingContext").DGWLoggingContext.bumpODSKey(o("DGWLoggingContext").DGWLoggingComponent.RAW_CLIENT,"unauthenticated"),o("DGWStream").StreamError.UNAUTHENTICATED},e})();l.RawDGWClient=e}),98);
__d("DGWClient",["DGWAuth","DGWEnvUtil","DGWWebConfig","RawDGWClient","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new(o("RawDGWClient")).RawDGWClient({appId:r("DGWWebConfig").appId,appVersion:r("DGWWebConfig").appVersion,authType:o("DGWAuth").fromStringToDGWAuth((e=r("DGWEnvUtil")).getDGWAuthType()),dgwVersion:e.getDGWVersion(),endpoint:e.getDGWEndpoint(),fbId:r("DGWWebConfig").fbId,authToken:e.getDGWAuthToken()});function u(){if(r("DGWEnvUtil").isDGWEnvCompatible())return s;throw r("err")("unsupported_environment_retry_with_mqtt")}l.default=u}),98);
__d("DGWStreamGroupHandler",[],(function(t,n,r,o,a,i){"use strict";var e=(function(){function e(e,t,n){this.$1=e,this.$2=t,this.$3=n}var t=e.prototype;return t.onStreamGroupError=function(t){this.$1(t)},t.onStreamGroupMustDrain=function(t){this.$2(t)},t.onStreamGroupTransportClose=function(){this.$3()},e})();i.default=e}),66);
__d("LSJSONOp",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({BLOCK:1,LOAD:2,STORE:3,STORE_ARRAY:4,CALL_STORED_PROCEDURE:5,CALL_NATIVE_TYPE_OPERATION:6,CALL_NATIVE_OPERATION:7,LIST:8,UNDEFINED:9,INFINITY:10,NAN:11,RETURN:12,BOOL_TO_STR:13,BLOBS_TO_STRING:14,BLOBS_OF_STRING:15,TO_BLOB:16,I64_OF_FLOAT:17,I64_TO_FLOAT:18,I64_FROM_STRING:19,I64_TO_STRING:20,READ_GK:21,READ_QE:22,IF:23,OR:24,AND:25,NOT:26,IS_NULL:27,ENFORCE_NOT_NULL:28,GENERIC_EQUAL:29,I64_EQUAL:30,BLOB_EQUAL:31,GENERIC_NOT_EQUAL:32,I64_NOT_EQUAL:33,BLOB_NOT_EQUAL:34,GENERIC_GREATER_THAN:35,I64_GREATER_THAN:36,BLOB_GREATER_THAN:37,GENERIC_GREATER_THAN_OR_EQUAL:38,I64_GREATER_THAN_OR_EQUAL:39,BLOB_GREATER_THAN_OR_EQUAL:40,GENERIC_LESS_THAN:41,I64_LESS_THAN:42,BLOB_LESS_THAN:43,GENERIC_LESS_THAN_OR_EQUAL:44,I64_LESS_THAN_OR_EQUAL:45,BLOB_LESS_THAN_OR_EQUAL:46,THROW:47,LOG_CONSOLE:48,LOGGER_LOG:49,NATIVE_OP_ARRAY_CREATE:50,NATIVE_OP_ARRAY_APPEND:51,NATIVE_OP_ARRAY_GET_SIZE:52,NATIVE_OP_MAP_CREATE:53,NATIVE_OP_MAP_GET:54,NATIVE_OP_MAP_SET:55,NATIVE_OP_MAP_KEYS:56,NATIVE_OP_MAP_DELETE:57,NATIVE_OP_MAP_HAS:58,NATIVE_OP_STR_JOIN:59,NATIVE_OP_CURRENT_TIME:60,NATIVE_OP_JSON_STRINGIFY:61,NATIVE_OP_RNG_NUM:62,NATIVE_OP_LOCALIZATION_SUPPORTED:63,NATIVE_OP_LOCALIZATION_SUPPORTED_V2:64,NATIVE_OP_RESOLVE_LOCALIZED:65,NATIVE_OP_RESOLVE_LOCALIZED_V2:66,ADD:68,I64_ADD:69,I64_CAST:70,READ_JUSTKNOB:71,READ_IGGK:72,GET_RUN_MODE:73,STR_TRIM:74,STR_REPLACE:75,JOIN:76,STR_LIKE:77,LENGTH:78,IN:79,IN_VEC:80,SUB:81,MUL:82,DIV:83,MOD:84,I64_SUB:85,I64_MUL:86,I64_DIV:87,I64_MOD:88,I64_IN:89,I64_IN_VEC:90,BITWISE_LEFT_SHIFT:91,BITWISE_RIGHT_SHIFT:92,ARITHMETIC_RIGHT_SHIFT:93,BITWISE_AND:94,BITWISE_OR:95,BITWISE_XOR:96,TERNARY:97,XOR:98,NULLISH_COALESE:99,READ_COLUMN:100,READ_COLUMN_REF:101,READ_GROUP_COUNT:102,COMMENT:103,IMPORT:104,LOOP:105,QUERY_COMPARISON_EQUAL:106,QUERY_COMPARISON_NOT_EQUAL:107,QUERY_COMPARISON_GREATER_THAN:108,QUERY_COMPARISON_GREATER_THAN_OR_EQUAL:109,QUERY_COMPARISON_LESS_THAN:110,QUERY_COMPARISON_LESS_THAN_OR_EQUAL:111,QUERY_MERGE_CONSTRAINTS:112,QUERY_FETCH_ROWS:113,QUERY_FILTER_ROWS:114,QUERY_SORT_ROWS_BY:115,QUERY_DELETE_ROWS:116,QUERY_SLICE_ROWS:117,QUERY_COUNT_ROWS:118,QUERY_PEEK_NEXT_ROW_ID:119,QUERY_UPDATE_ROWS:120,QUERY_INSERT_ROWS:121,QUERY_PUT_ROWS:122,QUERY_FOREACH_ROW:123,QUERY_SELECT_MATCH_ROW:124,QUERY_CURSOR_SLICE:125,QUERY_GROUP_BY:126,SUB_STRING:127}),l=e;i.default=l}),66);
__d("LSMaybeDeferredImports",["LSSynchronousPromise"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return u(e)}function s(e){return u(e)}function u(e){var t=null;return{load:function(){return t==null?e.load().then(function(e){return t=e,t}):o("LSSynchronousPromise").makeSynchronousPromise(t)}}}l.wrapReqDeferredMaybeSync=e,l.wrapJSResourceForInteractionMaybeSync=s}),98);
__d("LSSelectOrder",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum").Mirrored(["ASC","DESC"]),l=e;i.default=l}),66);
__d("LSDatascriptJSONEval",["FBLogger","JSResourceForInteraction","LS","LSMaybeDeferredImports","getErrorSafe","isPromise"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("LSMaybeDeferredImports").wrapJSResourceForInteractionMaybeSync(r("JSResourceForInteraction")("LSLocalize").__setRef("LSDatascriptJSONEval"));function d(e,t,n){if((u||(u=r("isPromise")))(e))return e.then(t,n);try{return t(e)}catch(e){var o=r("getErrorSafe")(e);if(n)return n(o);throw o}}var m=(function(){function t(e,t,n,o){var a=this;o===void 0&&(o=[]),this.$4={},this.$5=[],this.$6=null,this.$7=function(e){return d(a.$8(e),function(e){return e},function(t){throw r("FBLogger")("messenger_web").catching(t).mustfix("Error evaluating step op: %s",Array.isArray(e)?e[0]:"<primitive value>"),t})},this.$1=t,this.$2=e,this.$3=n;for(var i=0;i<o.length;i++)this.$4[i]=o[i]}var o=t.prototype;return o.eval=function(){return this.$2==null?this.$1.resolveGuaranteeAsync([]):this.$1.resolveGuaranteeAsync(this.$7(this.$2.step))},o.$8=function(o){var t=this,a,i,l,u,m,p,_,f,g,h,y,C;if(!Array.isArray(o))return o;var b=o[0],v=babelHelpers.arrayLikeToArray(o).slice(1),S=v;switch(b){case 8:return S.map(this.$7);case 2:return this.$4[S[0]];case 3:return d(this.$7(S[1]),function(e){return t.$4[S[0]]=e});case 4:return d(this.$7(S[2]),function(e){for(var n=S[0],r=S[1],o=0;o<r;o++,n++)t.$4[n]=e[o];return e});case 12:{for(var R=S[0],L=S[1],E=[],k=R;k<L;k++)E[k]=this.$4[k];return E}case 1:{for(var I,T=function(n){I=d(I,function(){return t.$7(S[n])})},D=0;D<S.length;D++)T(D);return I}case 5:return(a=this.$1).storedProcedure.apply(a,S.map(this.$7));case 6:return(i=this.$1).nativeTypeOperation.apply(i,S.map(this.$7));case 7:return(l=this.$1).nativeOperation.apply(l,S.map(this.$7));case 9:return;case 10:return 1/0;case 11:return NaN;case 13:return this.$7(S[0])?"1":"0";case 14:return this.$1.blobs.to_string(this.$7(S[0]));case 15:return this.$1.blobs.of_string(this.$7(S[0]));case 16:return this.$1.blob(this.$7(S[0]));case 17:return this.$1.i64.of_float(this.$7(S[0]));case 18:{var x=this.$7(S[0]);return x!=null?this.$1.i64.to_float(x):void 0}case 19:return this.$1.i64.from_string(this.$7(S[0]));case 70:return this.$1.i64.cast(this.$7(S[0]));case 20:return this.$1.i64.to_string(this.$7(S[0]));case 21:return(u=this.$3)==null||(u=u.gk)==null?void 0:u[S[0]];case 22:{var $,P=S[0],N=S[1],M=S[2],w=S[3],A=($=this.$3)==null||($=$.qe)==null||($=$[P])==null||($=$[N])==null?void 0:$[M];if(A==null)return A;switch(w){case"BOOL":case"STR":return A;case"I64":{if(typeof A!="object")throw r("FBLogger")("messenger_web").mustfixThrow("Cannot convert value to string");return this.$1.i64.from_string(A.toString())}}return}case 23:return this.$7(S[0])?this.$7(S[1]):S[2]!=null?this.$7(S[2]):void 0;case 24:return this.$7(S[0])||this.$7(S[1]);case 25:return this.$7(S[0])&&this.$7(S[1]);case 26:return!this.$7(S[0]);case 27:return this.$7(S[0])==null;case 28:return this.$1.notnull(this.$7(S[0]));case 29:return this.$7(S[0])===this.$7(S[1]);case 30:return this.$1.i64.eq(this.$7(S[0]),this.$7(S[1]));case 31:return this.$1.blobs.eq(this.$7(S[0]),this.$7(S[1]));case 32:return this.$7(S[0])!==this.$7(S[1]);case 33:return this.$1.i64.neq(this.$7(S[0]),this.$7(S[1]));case 34:return this.$1.blobs.neq(this.$7(S[0]),this.$7(S[1]));case 35:return this.$7(S[0])>this.$7(S[1]);case 36:return this.$1.i64.gt(this.$7(S[0]),this.$7(S[1]));case 37:return this.$1.blobs.gt(this.$7(S[0]),this.$7(S[1]));case 38:return this.$7(S[0])>=this.$7(S[1]);case 39:return this.$1.i64.ge(this.$7(S[0]),this.$7(S[1]));case 40:return this.$1.blobs.ge(this.$7(S[0]),this.$7(S[1]));case 41:return this.$7(S[0])<this.$7(S[1]);case 42:return this.$1.i64.lt(this.$7(S[0]),this.$7(S[1]));case 43:return this.$1.blobs.lt(this.$7(S[0]),this.$7(S[1]));case 44:return this.$7(S[0])<=this.$7(S[1]);case 45:return this.$1.i64.le(this.$7(S[0]),this.$7(S[1]));case 46:return this.$1.blobs.le(this.$7(S[0]),this.$7(S[1]));case 47:return this.$1.throw(S[0]);case 48:return this.$1.print(this.$7(S[0]));case 49:{var F=this.$7(S[0]),O=S[1],B=this.$1.logger(F);switch(O){case"mustfix":return B.mustfix(F);case"info":return B.info(F);case"warn":return B.warn(F);case"debug":return B.debug(F);default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid logger level %s",O)}}case 50:return S.length===0?this.$1.createArray():(m=this.$1).createArrayWithElements.apply(m,this.$7(S[0]));case 51:{var W=this.$7(S[0]);return W.push(this.$7(S[1])),W}case 52:return this.$1.i64.of_int32(this.$7(S[0]).length);case 53:return new this.$1.Map;case 54:return this.$7(S[0]).get(this.$7(S[1]));case 55:return this.$7(S[0]).set(this.$7(S[1]),this.$7(S[2]));case 56:return this.$7(S[0]).keys();case 57:return this.$7(S[0]).delete(this.$7(S[1]));case 58:return this.$7(S[0]).has(this.$7(S[1]));case 59:return this.$7(S[0]).join(this.$7(S[1])||"");case 60:return this.$1.i64.of_float(Date.now());case 61:return this.$1.toJSON(this.$7(S[0]));case 62:return this.$1.i64.random();case 63:case 64:return!0;case 65:return c.load().then(function(e){var n=e.localizeV1Async;return n(t.$7(S[0]),t.$7(S[1]))});case 66:return c.load().then(function(e){var n=e.localizeV2Async;return n(t.$7(S[0]),t.$7(S[1]))});case 68:return this.$7(S[0])+this.$7(S[1]);case 69:return this.$1.i64.add(this.$7(S[0]),this.$7(S[1]));case 71:return(p=this.$3)==null||(p=p.justknob)==null?void 0:p[S[0]];case 72:return(_=this.$3)==null||(_=_.iggk)==null?void 0:_[S[0]];case 100:return this.$5[S[0]][S[1]];case 101:{if(this.$6==null)throw r("FBLogger")("messenger_web").mustfixThrow("Attempting to read column ref when none exist!");return this.$6[S[0]]}case 102:return this.$5[this.$7(S[0])].group_count;case 73:return this.$1.rm;case 74:return this.$7(S[0]).trim();case 75:return this.$7(S[0]).split(this.$7(S[1])).join(this.$7(S[2]));case 76:return S.map(this.$7).join("");case 77:return this.$1.like(this.$7(S[0]),this.$7(S[1]));case 78:return[0,this.$7(S[0]).length];case 79:{var q=S.map(this.$7),U=q[0],V=babelHelpers.arrayLikeToArray(q).slice(1);return V.includes(U)}case 80:return this.$7(S[1]).includes(this.$7(S[0]));case 81:return this.$7(S[0])-this.$7(S[1]);case 82:return this.$7(S[0])*this.$7(S[1]);case 83:return this.$7(S[0])/this.$7(S[1]);case 84:return this.$7(S[0])%this.$7(S[1]);case 91:return this.$1.i64.lsl_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 92:return this.$1.i64.lsr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 93:return this.$1.i64.asr_(this.$7(S[0]),this.$1.i64.to_int32(this.$7(S[1])));case 94:return this.$1.i64.and_(this.$7(S[0]),this.$7(S[1]));case 95:return this.$1.i64.or_(this.$7(S[0]),this.$7(S[1]));case 96:return this.$1.i64.xor(this.$7(S[0]),this.$7(S[1]));case 85:return this.$1.i64.sub(this.$7(S[0]),this.$7(S[1]));case 86:return this.$1.i64.mul(this.$7(S[0]),this.$7(S[1]));case 87:return this.$1.i64.div(this.$7(S[0]),this.$7(S[1]));case 88:return this.$1.i64.mod_(this.$7(S[0]),this.$7(S[1]));case 89:{var H=S.map(this.$7),G=H[0],z=babelHelpers.arrayLikeToArray(H).slice(1);return z.some(function(e){return t.$1.i64.eq(G,e)})}case 90:{var j=this.$7(S[0]);return this.$7(S[1]).some(function(e){return t.$1.i64.eq(j,e)})}case 97:return this.$7(S[0])?this.$7(S[1]):this.$7(S[2]);case 98:{var K=this.$7(S[0]),Q=this.$7(S[1]);return(K||Q)&&!(K&&Q)}case 99:return(f=this.$7(S[0]))!=null?f:this.$7(S[1]);case 103:return;case 104:return n.call(null,S[0]);case 105:{for(var X=this.$7(S[0]),Y=S[1],J=r("LS").n,Z,ee=function(n){Z=d(Z,function(){return t.$4[Y]=n,t.$7(S[2])})},te=J(e||(e=babelHelpers.taggedTemplateLiteralLoose(["0"])));this.$1.i64.lt(te,X);te=this.$1.i64.add(te,J(s||(s=babelHelpers.taggedTemplateLiteralLoose(["2"])))))ee(te);return Z}case 106:return this.$7(S[0]);case 107:throw r("FBLogger")("messenger_web").mustfixThrow("not equal query comparison operator not supported");case 108:return{gt:this.$7(S[0])};case 109:return{gte:this.$7(S[0])};case 110:return{lt:this.$7(S[0])};case 111:return{lte:this.$7(S[0])};case 112:return S.length===1?this.$7(S[0]):(g=this.$1).merge.apply(g,S.map(this.$7));case 113:{var ne=S[0],re=S[1],oe=babelHelpers.arrayLikeToArray(S).slice(2),ae=oe.map(this.$7);switch(re){case"ASC":return(h=this.$1.db.table(ne)).fetch.apply(h,ae);case"DESC":return(y=this.$1.db.table(ne)).fetchDesc.apply(y,ae)}return}case 114:return this.$1.filter(this.$7(S[0]),function(e){t.$6=e;var n=t.$7(S[1]);return t.$6=null,n});case 115:return(C=this.$1).sortBy.apply(C,S.map(this.$7));case 116:return this.$1.forEach(this.$7(S[0]),function(e){return e.delete()});case 117:return this.$1.islc(this.$7(S[0]),0,this.$7(S[1]));case 118:return this.$1.count(this.$7(S[0]));case 119:return this.$1.db.table(S[0]).peekNextAutoIncrementId();case 120:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item,r=e.update,o={};t.$6=n;for(var a=1;a<S.length;a+=2)o[S[a]]=t.$7(S[a+1]);return t.$6=null,r(o)});case 121:{for(var ie=S[0],le={},se=1;se<S.length;se+=2)le[S[se]]=this.$7(S[se+1]);return this.$1.db.table(ie).add(le)}case 122:{for(var ue=S[0],ce={},de=1;de<S.length;de+=2)ce[S[de]]=this.$7(S[de+1]);return this.$1.db.table(ue).put(ce)}case 123:return this.$1.forEach(this.$7(S[0]),function(e){var n=e.item;return t.$5[S[1]]=n,t.$7(S[2])});case 124:return this.$7(S[0]).next().then(function(e){var n=e.done,r=e.value;if(n)return t.$7(S[3]);var o=S[1];return o!=null?(t.$5[o]=r.item,t.$7(S[2])):0});case 125:return this.$7(S[0]).slice(0,this.$7(S[1]));case 126:return this.$1.groupBy(this.$7(S[0]),S[1]).forEach(function(e){return t.$5[S[2]]=e,t.$7(S[3])});case 127:return this.$7(S[0]).substr(this.$1.i64.to_int32(this.$7(S[1])),this.$1.i64.to_int32(this.$7(S[2])))}},t})();l.default=m}),98);
__d("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE",["Env","TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e,s={createScript:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),o=1;o<e;o++)n[o-1]=arguments[o];n.forEach(function(e){if(typeof window!="undefined"&&typeof window.trustedTypes!="undefined"&&!window.trustedTypes.isScript(e))throw r("err")("Trusted Function requires TrustedScripts args only.")});var a=n.slice(0,-1).join(","),i=n.pop().toString();return"(function anonymous(\n     "+a+"\n     ) {\n     "+i+"\n     })"}},u=r("TrustedTypes").createPolicy("unsafe-function-do-not-use",s);function c(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];if(r("TrustedTypes").isSupportedNatively()&&(e||(e=r("Env"))).useTrustedTypes){var i=u.createScript.apply(u,[""].concat(o));return t.eval(i)}else return babelHelpers.construct(Function,o)}l.TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE=u,l.createTrustedFunction=c}),98);
__d("LSDatascriptEvaluator",["ExecutionEnvironment","FBLogger","LSDatascriptJSONEval","LSFactory","MWPBumpEntityKey","TrustedTypesNoOpPolicy_DO_NOT_USE","TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE","cr:8018","getErrorSafe","justknobx"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){var n=function(n){return function(t,r){var o;return e==null||(o=e.qe)==null||(o=o[t])==null||(o=o[n])==null?void 0:o[r]}},a=new Proxy({getBool:n("fb"),getNumber:n("fb"),getString:n("fb")},{get:function(t,r){return r in t?t[r]:{getBool:n(r),getNumber:n(r),getString:n(r)}}}),i=function(n){var t;return e==null||(t=e.gk)==null?void 0:t[n]};i.ig=function(t){var n;return e==null||(n=e.iggk)==null?void 0:n[t]};var l={getBool:function(n){var t;return e==null||(t=e.justknob)==null?void 0:t[n]}};return function(e){var n,s=o("TrustedTypesUnsafeFunctionScriptPolicy_DO_NOT_USE").createTrustedFunction((n=r("TrustedTypesNoOpPolicy_DO_NOT_USE")).createScript("gkx"),n.createScript("qex"),n.createScript("justknobx"),n.createScript("return "+t));return s(i,a,l)(r("LSFactory")(e,{dynamic:!0}))}}var u=function(t){return r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow('Received a sync script with an illegal target of "%s"',t!=null?t:-1)};function c(t,o){var a=JSON.parse(o),i=t!=null?t:{gk:{},iggk:{},justknob:{},qe:{}};return function(t){var o=n("cr:8018")!=null?new(n("cr:8018")):void 0,l=o==null?void 0:o.start({bool:{isInWorker:(e||(e=r("ExecutionEnvironment"))).isInWorker},string:{dynamic:String(!0)}}),s=r("LSFactory")(t,{dynamic:!0,lsRuntimeLogger:o});return new(r("LSDatascriptJSONEval"))(a,s,i).eval().finally(function(){return l==null||l.end(),Promise.resolve()})}}function d(e,t,n){if(!r("justknobx")._("3078"))return m(e,t,n);if(n==null)throw u(n);switch(n){case 3:return c(e,t);default:throw u(n)}}function m(e,t,n){if(n==null)return r("FBLogger")("lightspeed","null_target").mustfix("Received <null> target field for sync script!"),s(e,t);switch(n){case 3:return c(e,t);case 2:return s(e,t);case 1:throw r("FBLogger")("messenger_web","invalid_sync_script_target").mustfixThrow("Received a sync script with LSProgramTarget of DASM, this should never happen!")}}function p(e){return function(t){if(t==null)throw r("FBLogger")("messenger_web").mustfixThrow("Error creating eval function, db is undefined. This is likely a currying error in the definition for LSDatascriptEvaluator");return function(n){var a=n.experiments,l=n.priority,s=n.syncScript,u=n.target,c=n.taskNames,m=a!=null?JSON.parse(a):null;try{var p=d(m,s,u);return t.runInTransaction(function(t){return e&&e(),p(t)},"readwrite",l,{taskNames:c,type:"sync_script"},i.id+":247")}catch(e){o("MWPBumpEntityKey").bumpEntityKeyWithAppId("lsplatform","eval_datascript_failure");var _=r("getErrorSafe")(e);throw r("FBLogger")("messenger_web").catching(_).mustfix("Error executing sync script"),e}}}}p.__debugModuleName="LSDatascriptEvaluator",l.default=p}),98);/*FB_PKG_DELIM*/
__d("FileMercuryUploadService",["FBLogger","cr:6057","emptyFunction"],(function(t,n,r,o,a,i,l){"use strict";async function e(e){var t=e.onUploadStart,o=e.onUploadProgress,a=o===void 0?r("emptyFunction"):o,i=e.onUploadSuccess,l=i===void 0?r("emptyFunction"):i,u=e.onUploadFailure,c=u===void 0?r("emptyFunction"):u,d=e.isVoiceClip,m=d===void 0?!1:d,p=e.files,_=e.uploadIDs,f=e.isChatSupportUser,g=e.chatSupportUserId,h=e.voiceClipWaveformData,y=e.chatSupportUserNonce,C=e.uploadIdToQplFlow,b="/ajax/mercury/upload.php";f===!0&&(b="/ajax/mercury/chatsupportuser/upload.php");var v=await n("cr:6057").load(),S=new v({concurrentLimit:3,onUploadFailure:c,onUploadProgress:a,onUploadStart:function(n,r){t&&t(n,r.upload._file.size,r.upload._file.type)},onUploadSuccess:function(t,n){var e,o,a,i,u=C==null?void 0:C.get(t),c=n.response.payload.metadata,d;if(c==null)r("FBLogger")("messenger_web_media").warn("Empty payload"),d={},u==null||u.endFail("empty_payload");else{var m=c[0];m!=null?d=m:(r("FBLogger")("messenger_web_media").warn("Empty metadata isChatSupportUser: %s",f),d={},u==null||u.endFail("empty_metadata"))}var p=d.fbid,_=d.image_id,g=d.video_id,h=d.audio_id,y=d.gif_id,b=d.file_id,v=(e=(o=(a=(i=p!=null?p:_)!=null?i:g)!=null?a:h)!=null?o:y)!=null?e:b;if(typeof v=="number"&&(v=v.toString()),s(v),l(t,v),v==null)throw u==null||u.endFail("null_fbid"),r("FBLogger")("messenger_web").mustfixThrow("Unrecognized file upload success payload");u==null||u.endSuccess()},retryLimit:1,uploadEndpoint:b}),R=h!=null?{amplitudes:h.amplitudes,sampling_freq:Math.round(h.sampling_freq)}:void 0,L={};L.data={chat_support_user_id:f===!0&&g!=null?g:void 0,nonce:f===!0&&y!=null?y:void 0,voice_clip:m?!0:void 0,voice_clip_waveform_data:m?JSON.stringify(R):void 0},S.getAsyncFileUploadRequest(p,_,L).send()}function s(e){if(e!=null){var t=Number(e),n=t.toString();t>Number.MAX_SAFE_INTEGER&&n!==e&&r("FBLogger")("work_web_messaging","messaging-composer-upload-fbid-out-of-range").warn("FBID for attachment is out of JS Number range and it's not correctly handled on client: %d",e)}}l.uploadByMercuryUploadService=e}),98);
__d("LSAppendDataTraceAddon.nop",["LSAppendDataTraceAddonStoredProcedure","LSFactory","MetaConfig","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(o,a,i,l,s,u,c){return r("MetaConfig")._("62")?r("LSAppendDataTraceAddonStoredProcedure")(r("LSFactory")(o),{checkPointId:l,dataTraceId:i,errorMessage:u!=null?u:"",syncChannel:s,tags:c!=null?c:""}):(e||(e=n("Promise"))).resolve()};s.__nop_name__="LSAppendDataTraceAddonNop",l.default=s}),98);
__d("genArrayBufferFromFile",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){return"arrayBuffer"in t&&typeof t.arrayBuffer=="function"?t.arrayBuffer():new(e||(e=n("Promise")))(function(e,n){var r=new FileReader;r.onload=function(){var t=r.result;t instanceof ArrayBuffer?e(t):n()},r.onerror=function(){n(r.error)},r.readAsArrayBuffer(t)})}i.default=l}),66);
__d("genIsNonAnimatedWebPFile",["genArrayBufferFromFile"],(function(t,n,r,o,a,i,l){"use strict";var e=8;function s(e){return r("genArrayBufferFromFile")(e).then(function(e){var t=new Uint8Array(e),n=t.slice(12,16).reduce(function(e,t,n){return e+String.fromCharCode(t)},"");if(n==="VP8X"){var r=t[20],o=r.toString(2).padStart(8,"0");if(o[6]==="1")return!u(t)}return!0})}function u(t){for(var n=12,r=0;r<2&&n+e<t.length;){var o=c(t,n);o==="ANMF"&&r++;var a=d(t,n+4),i=a%2,l=e+a+i;n+=l}return r>1}function c(e,t){return e.slice(t,t+4).reduce(function(e,t,n){return e+String.fromCharCode(t)},"")}function d(e,t){return parseInt(e.slice(t,t+4).reduce(function(e,t,n){return t.toString(2).padStart(8,"0")+e},""),2)}l.default=s}),98);
__d("LSGetAttachmentType",["LSIntEnum","MessagingAttachmentType","cometIsMimeTypeForMedia","genIsNonAnimatedWebPFile"],(function(t,n,r,o,a,i,l){"use strict";var e;async function s(t){return t.type==="image/webp"?(e||(e=o("LSIntEnum"))).ofNumber(await r("genIsNonAnimatedWebPFile")(t)?r("MessagingAttachmentType").IMAGE:r("MessagingAttachmentType").VIDEO):u(t)}function u(t){var n=t.type;return o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(n)?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):n==="audio/wav"?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):n==="image/gif"?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):o("cometIsMimeTypeForMedia").isMimeTypeForVideo(n)?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)}l.LSGetAttachmentType=s,l.LSGetAttachmentTypeSyncButLessAccurate=u}),98);
__d("LSGetMessageAttributionParams",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(o){return t.sequence([function(r){return t.filter(t.db.table(31).fetch(),function(t){return t.offlineThreadingId===e[0]}).next().then(function(e,t){var r,o,a=e.done,i=e.value;return a?(r=[void 0,void 0,void 0],n[0]=r[0],n[1]=r[1],n[2]=r[2],r):(t=i.item,o=[t.threadAttributionSource,t.platformRef,t.platformToken],n[0]=o[0],n[1]=o[1],n[2]=o[2])})},function(e){var t;return t=[n[0],n[1],n[2]],r[0]=t[0],r[1]=t[1],r[2]=t[2],t}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMediaSendGetMessageAttributionParamsStoredProcedure",e.__tables__=["messages_optimistic_context"],a.exports=e}),null);
__d("LSInsertOptimisticAttachment",["LSSetMessageDisplayedContentTypes"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(r){return t.sequence([function(n){return t.forEach(t.filter(t.db.table(16).fetch([[[e[0],e[2],e[4]]]]),function(n){return t.i64.eq(n.threadKey,e[0])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===e[2]&&n.attachmentFbid===e[4]&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(16).add({threadKey:e[0],messageId:e[2],attachmentFbid:e[4],timestampMs:e[1],offlineAttachmentId:e[3],attachmentType:e[5],attachmentIndex:e[7],filename:e[6],attributionAppId:e[8],hasMedia:e[9],isSharable:!1,hasXma:e[10],authorityLevel:t.i64.cast([0,20])})},function(r){return t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[0],e[2],e[1],void 0,!1,t.i64.eq(e[5],t.i64.cast([0,1]))||t.i64.eq(e[5],t.i64.cast([0,15])))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxInsertOptimisticAttachmentStoredProcedure",e.__tables__=["attachments"],a.exports=e}),null);
__d("LSInsertPhase2PendingTask",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return t.db.table(12).fetch([[[e[0]]],"optimistic"]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[0]=void 0:(t=o.item,r[0]=t.threadKey)})},function(o){return t.i64.neq(r[0],void 0)?t.sequence([function(o){return t.storedProcedure(n("LSIssueNewTask"),[t.i64.to_string(r[0]),"_multi_media"].join(""),t.i64.cast([0,4]),e[0],void 0,void 0,e[1],t.i64.cast([0,0]),t.i64.cast([0,29]),void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return r[2]=void 0}]):t.resolve(r[2]=t.i64.cast([0,1002]))},function(e){return o[0]=r[2]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMediaSendInsertPhase2PendingTaskStoredProcedure",e.__tables__=["messages"],a.exports=e}),null);
__d("LSIssueNewTaskWithExtraOperationsAndGetTaskID",["LSIssueNewTaskAndGetTaskID","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSIssueNewTaskAndGetTaskID"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[11]).then(function(e){var t;return t=e,r[0]=t[0],t})},function(e){return t.storedProcedure(n("LSMailboxTaskCompletionApiOnTaskInsertion"),r[0])},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSCoreIssueNewTaskWithExtraOperationsAndGetTaskIDStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSPredefineTraceForTask",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(r){return t.sequence([function(r){return n[0]=t.i64.of_float(Date.now()),t.forEach(t.db.table(2).fetch([[[e[1]]]]),function(t){var r=t.update,o=t.item;return r({dataTraceId:e[0],initTraceTimestampMs:n[0]})})},function(r){return t.db.table(153).add({traceId:e[0],initTimestampMs:n[0],foregroundTimestampMs:t.i64.cast([0,0]),traceType:t.i64.cast([0,1]),shouldFlush:!1,contextOne:e[2],contextTwo:t.i64.to_string(e[1]),predefinedId:e[3]})}])},function(e){return t.resolve(r)}])}e.__sproc_name__="LSDataTracePredefineTraceForTaskStoredProcedure",e.__tables__=["pending_tasks","data_trace_meta"],a.exports=e}),null);
__d("LSIssueSendAttachmentMessageTask",["LSAppendDataTraceAddon","LSArrayGetObjectAt","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSPredefineTraceForTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=t.i64.of_int32(e[5].length),t.i64.gt(r[0],t.i64.cast([0,0]))?t.loopAsync(r[0],function(o){return r[7]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[5],r[7]).then(function(e){var t;return t=e,r[8]=t[0],r[9]=t[1],t})},function(n){return t.forEach(t.filter(t.db.table(16).fetch([[[e[1],e[3]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===e[3]&&t.i64.eq(n.attachmentIndex,r[7])&&t.i64.eq(n.authorityLevel,t.i64.cast([0,20]))}),function(e){var n=e.update,o=e.item;return n({attachmentFbid:t.i64.to_string(r[8])})})}])}):t.resolve()},function(n){return e[9]?r[1]=t.i64.cast([0,9]):r[1]=t.i64.cast([0,3]),t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([0,1]):(n=a.item,r[8]=n.syncGroup,t.i64.neq(r[8],void 0)?r[7]=r[8]:r[7]=t.i64.cast([0,1]),r[2]=r[7])})},function(o){return t.storedProcedure(n("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),t.i64.to_string(e[1]),t.i64.cast([0,46]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),r[2],void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0])).then(function(e){var t;return t=e,r[4]=t[0],t})},function(o){return e[12]!==void 0?t.sequence([function(o){return t.storedProcedure(n("LSPredefineTraceForTask"),e[12],r[4],t.i64.to_string(t.i64.cast([0,46])),e[3])},function(r){return t.storedProcedure(n("LSAppendDataTraceAddon"),e[12],t.i64.cast([0,20]),t.i64.cast([0,1]),void 0,void 0)}]):t.resolve()},function(n){return r[5]=new t.Map,r[6]=t.createArray(),t.db.table(31).add({taskId:r[4],threadKey:e[1],offlineThreadingId:e[3],threadAttributionSource:e[6],platformRef:e[10],platformToken:e[11],replySourceId:e[7],replySourceType:e[8],sendType:r[1],markThreadRead:!1,metadataDataclass:e[13]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxIssueSendAttachmentMessageTaskStoredProcedure",e.__tables__=["attachments","threads","messages_optimistic_context"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessageV2",["LSArrayGetObjectAt","LSCreateOfflineThreadingID","LSDeserializeFromJsonIntoDictionaryV2.nop","LSGetLocalizedReplySnippet","LSIssueNewError","LSLocalize","LSSetMessageDisplayedContentTypes","LSSetMessageViewFlags"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(e){return r[0]=t.i64.of_float(Date.now()),t.storedProcedure(n("LSCreateOfflineThreadingID"),r[0]).then(function(e){var t;return t=e,r[1]=t[0],t})},function(o){return r[4]=t.i64.to_string(r[1]),r[3]=e[4]==null?e[3]:e[4],t.sequence([function(n){return r[5]=e[5].get("snippet_has_emoji"),t.islc(t.db.table(9).fetchDesc([[[]],"lastActivityTimestampMs"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?r[6]=t.i64.cast([-1,4294967295]):(n=a.item,r[6]=n.lastActivityTimestampMs)})},function(o){return r[8]=t.i64.add(r[6],t.i64.cast([0,1])),r[10]=t.i64.gt(r[0],r[8])?r[0]:r[8],t.db.table(9).fetch([[[e[1]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?t.sequence([function(n){return(function(e){t.logger(e).info(e)})("localApplyOptimisticMessage insert optimistic thread"),t.i64.eq(e[2],t.i64.cast([0,1]))?t.sequence([function(n){return t.filter(t.db.table(7).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.id,e[1])&&t.i64.eq(t.i64.cast([0,1]),t.i64.cast([0,1]))}).next().then(function(e,n){var o=e.done,a=e.value;return o?r[16]=!1:(n=a.item,r[19]=n.capabilities2,t.i64.neq(r[19],void 0)?r[18]=r[19]:r[18]=t.i64.cast([0,0]),r[16]=t.i64.neq(t.i64.and_(r[18],t.i64.cast([0,4096])),t.i64.cast([0,0])))})},function(e){return r[11]=r[16]}]):t.resolve(r[11]=!1)},function(n){return r[11]?r[12]="e2ee_cutover":r[12]="inbox",r[11]?r[13]=t.i64.cast([-1,4294967279]):r[13]=t.i64.cast([0,0]),t.forEach(t.filter(t.db.table(9).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,40]))}),function(e){return e.delete()})},function(n){return t.db.table(9).add({threadKey:e[1],mailboxType:t.i64.cast([0,0]),threadType:e[2],clientThreadKey:e[1],folderName:r[12],parentThreadKey:r[13],lastActivityTimestampMs:r[10],lastReadWatermarkTimestampMs:r[10],snippet:r[3],snippetHasEmoji:r[5]==null?!1:r[5],snippetSenderContactId:e[0],ongoingCallState:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,40])})},function(n){return t.i64.eq(e[2],t.i64.cast([0,13]))||t.i64.eq(e[2],t.i64.cast([0,7]))||t.i64.eq(e[2],t.i64.cast([0,1]))?t.sequence([function(n){return t.forEach(t.filter(t.db.table(14).fetch([[[e[1],e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.contactId,e[1])&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(14).add({threadKey:e[1],contactId:e[1],readWatermarkTimestampMs:t.i64.cast([0,0]),deliveredWatermarkTimestampMs:t.i64.cast([0,0]),authorityLevel:t.i64.cast([0,20]),isModerator:!1})}]):t.resolve()},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[14]=!1:(t=o.item,r[14]=t.errorShouldBeShown)})},function(e){return r[14]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[16]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[17]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[16],r[17],void 0,void 0)}]):t.resolve()}]):(a=l.item,t.forEach(t.filter(t.db.table(9).fetch([[[e[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(n.threadType,e[2])}),function(t){var n=t.update,o=t.item;return n({lastActivityTimestampMs:r[10],lastReadWatermarkTimestampMs:r[10],snippet:r[3],snippetHasEmoji:r[5]==null?!1:r[5],snippetSenderContactId:e[0],snippetStringHash:void 0,snippetStringArgument1:void 0,snippetAttribution:void 0,snippetAttributionStringHash:void 0,additionalThreadContext:void 0})}))})}])},function(o){return t.sequence([function(n){return t.islc(t.db.table(12).fetchDesc([[[e[1],t.i64.cast([0,80])],[e[1],t.i64.cast([0,60])],[e[1],t.i64.cast([0,40])]],"messageDisplayOrderAuthority"]),0,t.i64.to_float(t.i64.cast([0,1]))).next().then(function(e,n){var o=e.done,a=e.value;return o?(r[59]=t.i64.of_float(Date.now()),r[5]=r[59]):(n=a.item,r[5]=n.primarySortKey)})},function(o){var a,i,l;return r[7]=e[5].get("reply_source_id"),r[8]=e[5].get("reply_source_type"),r[9]=e[5].get("reply_source_type_v2"),r[10]=e[5].get("reply_type"),r[7]!==void 0&&(t.i64.eq(r[8],t.i64.cast([0,1]))||t.i64.eq(r[9],t.i64.cast([0,1])))?t.sequence([function(o){return t.filter(t.db.table(12).fetch([[[r[7]==null?"":r[7]]],"messageId"]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===(r[7]==null?"":r[7])}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(i=[r[7],void 0,void 0,t.i64.cast([0,0]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[59]=i[0],r[60]=i[1],r[61]=i[2],r[62]=i[3],r[63]=i[4],r[64]=i[5],r[65]=i[6],r[66]=i[7],r[67]=i[8],r[68]=i[9],r[69]=i[10],r[70]=i[11],r[71]=i[12],r[72]=i[13],r[73]=i[14],r[74]=i[15],i):(a=s.item,t.sequence([function(o){var i,l,s;return r[80]=a.senderId,r[79]=a.stickerId,t.i64.neq(r[79],void 0)?(i=[r[79],t.i64.cast([0,4])],r[81]=i[0],r[82]=i[1]):(l=[void 0,void 0],r[81]=l[0],r[82]=l[1]),s=[r[81],r[82]],r[76]=s[0],r[77]=s[1],t.sequence([function(o){return t.storedProcedure(n("LSGetLocalizedReplySnippet"),e[1],e[0],r[80],r[10]==null?t.i64.cast([0,0]):r[10]).then(function(e){var t;return t=e,r[81]=t[0],t})},function(e){return r[78]=t.i64.eq(r[9],t.i64.cast([0,1]))?r[81]:""}])},function(e){var n;return n=[r[7],r[8],r[9],t.i64.cast([0,1]),r[78],r[80],a.text,r[76],r[77],void 0,void 0,void 0,void 0,void 0,void 0,r[10]],r[59]=n[0],r[60]=n[1],r[61]=n[2],r[62]=n[3],r[63]=n[4],r[64]=n[5],r[65]=n[6],r[66]=n[7],r[67]=n[8],r[68]=n[9],r[69]=n[10],r[70]=n[11],r[71]=n[12],r[72]=n[13],r[73]=n[14],r[74]=n[15],n}]))})},function(e){var t;return t=[r[59],r[60],r[61],r[62],r[63],r[64],r[65],r[66],r[67],r[68],r[69],r[70],r[71],r[72],r[73],r[74]],r[11]=t[0],r[12]=t[1],r[13]=t[2],r[14]=t[3],r[15]=t[4],r[16]=t[5],r[17]=t[6],r[18]=t[7],r[19]=t[8],r[20]=t[9],r[21]=t[10],r[22]=t[11],r[23]=t[12],r[24]=t[13],r[25]=t[14],r[26]=t[15],t}]):t.resolve((r[7]===void 0||t.i64.eq(r[8],t.i64.cast([0,0]))||t.i64.eq(r[9],t.i64.cast([0,0]))?(a=[void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[59]=a[0],r[60]=a[1],r[61]=a[2],r[62]=a[3],r[63]=a[4],r[64]=a[5],r[65]=a[6],r[66]=a[7],r[67]=a[8],r[68]=a[9],r[69]=a[10],r[70]=a[11],r[71]=a[12],r[72]=a[13],r[73]=a[14],r[74]=a[15]):(i=[r[7],r[8],r[9],t.i64.cast([0,1]),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[59]=i[0],r[60]=i[1],r[61]=i[2],r[62]=i[3],r[63]=i[4],r[64]=i[5],r[65]=i[6],r[66]=i[7],r[67]=i[8],r[68]=i[9],r[69]=i[10],r[70]=i[11],r[71]=i[12],r[72]=i[13],r[73]=i[14],r[74]=i[15]),l=[r[59],r[60],r[61],r[62],r[63],r[64],r[65],r[66],r[67],r[68],r[69],r[70],r[71],r[72],r[73],r[74]],r[11]=l[0],r[12]=l[1],r[13]=l[2],r[14]=l[3],r[15]=l[4],r[16]=l[5],r[17]=l[6],r[18]=l[7],r[19]=l[8],r[20]=l[9],r[21]=l[10],r[22]=l[11],r[23]=l[12],r[24]=l[13],r[25]=l[14],r[26]=l[15]))},function(o){var a,i,l,s;return r[27]=e[5].get("mention_data"),r[27]?r[28]=!1:r[28]=!0,r[28]?(i=[void 0,void 0,void 0,void 0],r[29]=i[0],r[30]=i[1],r[31]=i[2],r[32]=i[3]):(r[59]=r[27].get("mention_offsets"),r[60]=r[27].get("mention_lengths"),r[61]=r[27].get("mention_ids"),r[62]=r[27].get("mention_types"),a=[r[59],r[60],r[61],r[62]],r[29]=a[0],r[30]=a[1],r[31]=a[2],r[32]=a[3]),r[33]=e[5].get("magic_words_data"),r[33]?r[34]=!1:r[34]=!0,r[34]?(s=[void 0,void 0],r[35]=s[0],r[36]=s[1]):(r[59]=r[33].get("magic_word_offsets"),r[60]=r[33].get("magic_word_lengths"),l=[r[59],r[60]],r[35]=l[0],r[36]=l[1]),r[58]=t.i64.eq(r[10],t.i64.cast([0,1]))?r[17]:e[3],r[37]=e[5].get("sticker_id"),r[38]=e[5].get("sticker_alt_text"),r[39]=e[5].get("hot_emoji_size"),r[40]=e[5].get("iout"),r[41]=e[5].get("platform_XMD_encoded"),r[42]=e[5].get("is_forwarded"),r[43]=e[5].get("forward_score"),r[44]=e[5].get("power_up_style"),r[45]=e[5].get("local_data_id"),r[46]=e[5].get("command_type"),r[47]=e[5].get("reply_type"),r[48]=e[5].get("ephemeral_duration_in_sec"),r[49]=e[5].get("subthread_parent_message_id"),r[50]=e[5].get("is_exclusive_to_subthread"),e[6]!==void 0?t.sequence([function(o){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[6]).then(function(e){var t;return t=e,r[59]=t[0],t})},function(e){return r[60]=new t.Map,r[61]=r[59].keys(),r[62]=t.i64.of_int32(r[61].length),t.i64.gt(r[62],t.i64.cast([0,0]))?t.loopAsync(r[62],function(e){return r[67]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[61],r[67]).then(function(e){var t;return t=e,r[68]=t[0],r[69]=t[1],t})},function(e){return r[70]=r[59].get(r[68]),r[60].set(r[68],r[70])}])}):t.resolve()},function(e){return r[63]=r[60].get("ai_metadata"),r[63]?r[64]=!1:r[64]=!0,r[64]?t.resolve(r[65]=void 0):t.sequence([function(e){return r[67]=new t.Map,r[68]=r[63].keys(),r[69]=t.i64.of_int32(r[68].length),t.i64.gt(r[69],t.i64.cast([0,0]))?t.loopAsync(r[69],function(e){return r[70]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[68],r[70]).then(function(e){var t;return t=e,r[71]=t[0],r[72]=t[1],t})},function(e){return r[73]=r[63].get(r[71]),r[67].set(r[71],r[73])}])}):t.resolve()},function(e){return r[65]=r[67]}])},function(e){return r[65]!==void 0?(r[67]=r[65].get("ai_product"),r[66]=r[67]):r[66]=void 0,r[51]=r[66]}]):t.resolve(r[51]=void 0)},function(n){return r[52]=e[5].get("rich_text_format_type"),t.i64.eq(r[52],t.i64.cast([0,1]))?r[53]=t.i64.cast([0,3]):(r[51]==="HIDDEN_METADATA"?r[59]=t.i64.cast([0,2]):r[59]=t.i64.cast([0,0]),r[53]=r[59]),r[54]=e[5].get("is_forwarded"),r[54]?r[55]=t.i64.cast([0,3]):r[55]=r[13],r[56]=e[5].get("plugin_type"),t.i64.eq(r[56],t.i64.cast([0,40]))?r[57]="Instamadillo":r[57]="FBBroker",t.i64.eq(t.i64.cast([0,20]),t.i64.cast([0,20]))?t.db.table(12).add({threadKey:e[1],messageId:r[4],timestampMs:r[0],offlineThreadingId:r[4],primarySortKey:r[5],secondarySortKey:r[0],text:r[58],senderId:e[0],stickerId:r[37],hotEmojiSize:r[39],platformXmdEncoded:r[41],isForwarded:r[42],forwardScore:r[43],isAdminMessage:!1,sendStatus:t.i64.cast([0,1]),sendStatusV2:t.i64.cast([0,1]),authorityLevel:t.i64.cast([0,20]),localDataId:r[45],replyType:r[26],ephemeralDurationInSec:r[48],subthreadParentMessageId:r[49],isExclusiveToSubthread:r[50],metadataDataclass:e[6],messageRenderingType:r[53],replySourceId:r[11],replySourceType:r[12],replySourceTypeV2:r[55],replyStatus:r[14],replySnippet:r[15],replyToUserId:r[16],replyMessageText:r[17],replyAttachmentId:r[18],replyAttachmentType:r[19],replyMediaUrl:r[20],replyMediaUrlFallback:r[21],replyMediaPreviewWidth:r[22],replyMediaPreviewHeight:r[23],replyMediaUrlMimeType:r[24],mentionOffsets:r[29],mentionLengths:r[30],mentionIds:r[31],mentionTypes:r[32],transportKey:r[57]}):t.sequence([function(e){return t.db.table(12).fetch([[[r[4]]],"optimistic"]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[r[5],r[0],r[45]],r[59]=n[0],r[60]=n[1],r[61]=n[2],n):(t=i.item,o=[t.primarySortKey,t.secondarySortKey,t.localDataId],r[59]=o[0],r[60]=o[1],r[61]=o[2])})},function(e){return t.forEach(t.filter(t.db.table(12).fetch([[[r[4]]],"optimistic"]),function(e){return e.offlineThreadingId===r[4]&&t.i64.lt(e.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(12).add({threadKey:e[1],messageId:r[4],timestampMs:r[0],offlineThreadingId:r[4],primarySortKey:r[59],secondarySortKey:r[60],text:r[58],senderId:e[0],stickerId:r[37],hotEmojiSize:r[39],platformXmdEncoded:r[41],isForwarded:r[42],forwardScore:r[43],isAdminMessage:!1,sendStatus:t.i64.cast([0,1]),sendStatusV2:t.i64.cast([0,1]),authorityLevel:t.i64.cast([0,20]),localDataId:r[61],replyType:r[26],ephemeralDurationInSec:r[48],subthreadParentMessageId:r[49],isExclusiveToSubthread:r[50],metadataDataclass:e[6],messageRenderingType:r[53],replySourceId:r[11],replySourceType:r[12],replySourceTypeV2:r[55],replyStatus:r[14],replySnippet:r[15],replyToUserId:r[16],replyMessageText:r[17],replyAttachmentId:r[18],replyAttachmentType:r[19],replyMediaUrl:r[20],replyMediaUrlFallback:r[21],replyMediaPreviewWidth:r[22],replyMediaPreviewHeight:r[23],replyMediaUrlMimeType:r[24],mentionOffsets:r[29],mentionLengths:r[30],mentionIds:r[31],mentionTypes:r[32],transportKey:r[57]})}])}])},function(o){return r[5]=t.createArray(),r[6]=(r[5].push("LSMailboxLocalApplyOptimisticMessageV2StoredProcedure"),r[5]),r[7]=(r[5].push("localApplyOptimisticMessage"),r[5]),r[8]=(r[5].push(e[1]),r[5]),r[9]=(r[5].push(r[4]),r[5]),r[10]=t.toJSON(r[5]),(function(e){t.logger(e).info(e)})(r[10]),r[2]=e[5].get("calculate_denormalizations"),r[2]==null||r[2]?t.sequence([function(o){return t.storedProcedure(n("LSSetMessageViewFlags"),e[1],r[4],r[0],t.i64.eq(e[2],t.i64.cast([0,1])))},function(o){return r[5]=e[5].get("sticker_id"),t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[4],r[0],e[3],!1,t.i64.neq(r[5],void 0))}]):t.resolve()},function(e){var t;return t=[r[4],r[0]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticMessageV2StoredProcedure",e.__tables__=["threads","contacts","participants","user_visible_network_connectivity_error","messages"],a.exports=e}),null);
__d("LSMarkSubJobCompletedV2",["LSArrayGetObjectAt"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return r[0]=t.createArray(),t.db.table(51).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?0:(n=a.item,r[3]=new t.Map,r[3].set("offline_attachment_id",n.offlineAttachmentId),r[3].set("offline_threading_id",n.offlineThreadingId),r[3].set("in_message_index",n.inMessageIndex),r[3].set("attachment_type",n.attachmentType),r[3].set("should_transcode",n.shouldTranscode),r[3].set("use_double_phase",n.useDoublePhase),r[3].set("send_by_server",n.sendByServer),r[3].set("is_secure",n.isSecure),r[3].set("state",n.state),r[3].set("fbid",n.fbid),r[3].set("metadata",n.metadata),r[3].set("error",n.error),r[3].set("message_id",n.messageId),r[4]=(r[0].push(r[3]),r[0]))})},function(o){return r[2]=t.i64.of_int32(r[0].length),t.i64.neq(r[2],t.i64.cast([0,0]))?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[0],t.i64.cast([0,0])).then(function(e){var t;return t=e,r[3]=t[0],r[4]=t[1],t})},function(n){return r[5]=r[3].get("state"),t.i64.neq(e[1],void 0)?e[2]!==void 0?(t.i64.eq(r[5],t.i64.cast([-1,4294967293]))?(r[7]=t.i64.cast([-1,4294967295]),r[6]=r[7]):(t.i64.eq(r[5],t.i64.cast([0,1]))?r[7]=t.i64.cast([0,2]):(t.i64.eq(r[5],t.i64.cast([0,3]))?r[8]=t.i64.cast([0,4]):(t.i64.eq(r[5],t.i64.cast([0,5]))?r[9]=t.i64.cast([0,6]):(t.i64.eq(r[5],t.i64.cast([0,13]))?r[10]=t.i64.cast([0,14]):(t.i64.eq(r[5],t.i64.cast([0,7]))?r[11]=t.i64.cast([0,8]):(t.i64.eq(r[5],t.i64.cast([0,9]))?r[12]=t.i64.cast([0,10]):(t.i64.eq(r[5],t.i64.cast([0,11]))?r[13]=t.i64.cast([0,12]):r[13]=r[5],r[12]=r[13]),r[11]=r[12]),r[10]=r[11]),r[9]=r[10]),r[8]=r[9]),r[7]=r[8]),r[6]=r[7]),t.forEach(t.db.table(51).fetch([[[e[0]]]]),function(t){var n=t.update,o=t.item;return n({state:r[6],fbid:e[1],messageId:e[2],metadata:e[3]})})):(t.i64.eq(r[5],t.i64.cast([-1,4294967293]))?(r[7]=t.i64.cast([-1,4294967295]),r[6]=r[7]):(t.i64.eq(r[5],t.i64.cast([0,1]))?r[7]=t.i64.cast([0,2]):(t.i64.eq(r[5],t.i64.cast([0,3]))?r[8]=t.i64.cast([0,4]):(t.i64.eq(r[5],t.i64.cast([0,5]))?r[9]=t.i64.cast([0,6]):(t.i64.eq(r[5],t.i64.cast([0,13]))?r[10]=t.i64.cast([0,14]):(t.i64.eq(r[5],t.i64.cast([0,7]))?r[11]=t.i64.cast([0,8]):(t.i64.eq(r[5],t.i64.cast([0,9]))?r[12]=t.i64.cast([0,10]):(t.i64.eq(r[5],t.i64.cast([0,11]))?r[13]=t.i64.cast([0,12]):r[13]=r[5],r[12]=r[13]),r[11]=r[12]),r[10]=r[11]),r[9]=r[10]),r[8]=r[9]),r[7]=r[8]),r[6]=r[7]),t.forEach(t.db.table(51).fetch([[[e[0]]]]),function(t){var n=t.update,o=t.item;return n({state:r[6],fbid:e[1],metadata:e[3]})})):t.i64.neq(e[4],void 0)?(t.i64.eq(r[5],t.i64.cast([-1,4294967293]))?(r[7]=t.i64.cast([-1,4294967295]),r[6]=r[7]):(t.i64.eq(r[5],t.i64.cast([0,1]))?r[7]=t.i64.cast([0,2]):(t.i64.eq(r[5],t.i64.cast([0,3]))?r[8]=t.i64.cast([0,4]):(t.i64.eq(r[5],t.i64.cast([0,5]))?r[9]=t.i64.cast([0,6]):(t.i64.eq(r[5],t.i64.cast([0,13]))?r[10]=t.i64.cast([0,14]):(t.i64.eq(r[5],t.i64.cast([0,7]))?r[11]=t.i64.cast([0,8]):(t.i64.eq(r[5],t.i64.cast([0,9]))?r[12]=t.i64.cast([0,10]):(t.i64.eq(r[5],t.i64.cast([0,11]))?r[13]=t.i64.cast([0,12]):r[13]=r[5],r[12]=r[13]),r[11]=r[12]),r[10]=r[11]),r[9]=r[10]),r[8]=r[9]),r[7]=r[8]),r[6]=r[7]),t.forEach(t.db.table(51).fetch([[[e[0]]]]),function(t){var n=t.update,o=t.item;return n({state:r[6],error:e[4]})})):(t.i64.eq(r[5],t.i64.cast([-1,4294967293]))?(r[7]=t.i64.cast([-1,4294967295]),r[6]=r[7]):(t.i64.eq(r[5],t.i64.cast([0,1]))?r[7]=t.i64.cast([0,2]):(t.i64.eq(r[5],t.i64.cast([0,3]))?r[8]=t.i64.cast([0,4]):(t.i64.eq(r[5],t.i64.cast([0,5]))?r[9]=t.i64.cast([0,6]):(t.i64.eq(r[5],t.i64.cast([0,13]))?r[10]=t.i64.cast([0,14]):(t.i64.eq(r[5],t.i64.cast([0,7]))?r[11]=t.i64.cast([0,8]):(t.i64.eq(r[5],t.i64.cast([0,9]))?r[12]=t.i64.cast([0,10]):(t.i64.eq(r[5],t.i64.cast([0,11]))?r[13]=t.i64.cast([0,12]):r[13]=r[5],r[12]=r[13]),r[11]=r[12]),r[10]=r[11]),r[9]=r[10]),r[8]=r[9]),r[7]=r[8]),r[6]=r[7]),t.forEach(t.db.table(51).fetch([[[e[0]]]]),function(e){var t=e.update,n=e.item;return t({state:r[6]})}))}]):t.resolve()}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMediaSendMarkSubJobCompletedV2StoredProcedure",e.__tables__=["media_send_jobs"],a.exports=e}),null);
__d("LSMarkSubJobCompletedV2StoredProcedure",["LSMarkSubJobCompletedV2","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSMarkSubJobCompletedV2"),a.offlineAttachmentId,a.fbid,a.messageId,a.metadata,a.error);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSMediaUrlAttachment",["I64","LSMediaUrlUtils"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){var t=e.previewUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.previewUrlFallback:e.previewUrl}function u(e){var t=e.previewUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.previewUrlFallback:e.previewUrlLarge}function c(e){var t=e.playableUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.playableUrlFallback:e.playableUrl}function d(e){var t=e.imageUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.imageUrlFallback:e.imageUrl}function m(e){var t=e.faviconUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.faviconUrlFallback:e.faviconUrl}function p(t){try{var n=t.listItemContactUrlExpirationTimestampList1;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList1:t.listItemContactUrlList1}catch(e){return t.listItemContactUrlList1}}function _(t){try{var n=t.listItemContactUrlExpirationTimestampList2;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList2:t.listItemContactUrlList2}catch(e){return t.listItemContactUrlList2}}function f(t){try{var n=t.listItemContactUrlExpirationTimestampList3;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemContactUrlFallbackList3:t.listItemContactUrlList3}catch(e){return t.listItemContactUrlList3}}function g(e){var t=e.headerImageUrlExpirationTimestampMs;return t!=null&&o("LSMediaUrlUtils").isTimestampExpired(t)?e.headerImageUrlFallback:e.headerImageUrl}function h(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp1;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback1:t.listItemProfilePictureUrl1}catch(e){return t.listItemProfilePictureUrl1}}function y(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp2;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback2:t.listItemProfilePictureUrl2}catch(e){return t.listItemProfilePictureUrl2}}function C(t){try{var n=t.listItemProfilePictureUrlExpirationTimestamp3;return n!=null&&o("LSMediaUrlUtils").isTimestampExpired((e||(e=o("I64"))).of_string(n))?t.listItemProfilePictureUrlFallback3:t.listItemProfilePictureUrl3}catch(e){return t.listItemProfilePictureUrl3}}l.previewUrl=s,l.previewUrlLarge=u,l.playableUrl=c,l.imageUrl=d,l.faviconUrl=m,l.listItemContactUrlList1=p,l.listItemContactUrlList2=_,l.listItemContactUrlList3=f,l.headerImageUrl=g,l.listItemProfilePictureUrl1=h,l.listItemProfilePictureUrl2=y,l.listItemProfilePictureUrl3=C}),98);
__d("LSMessagePointQueryStoredProcedure",["LSMessagePointQuery","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSMessagePointQuery"),a.threadKey,a.messageId,a.threadType,a.numContextMessages);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSMessageSendToSentQPLInteractionHelper.nop",["LSSynchronousPromise","QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a){return a!=null&&r("QPLUserFlow").addPoint(r("qpl")._(25313175,"1551"),n,{instanceKey:parseInt(a,10)}),o("LSSynchronousPromise").makeSynchronousPromise()}e.__nop_name__="LSMessageSendToSentQPLInteractionHelper",l.default=e}),98);
__d("LSUpdateOptimisticAttachmentPreview",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(16).fetch([[[e[0],e[1],e[2]]]]),function(n){return n.attachmentFbid===e[2]&&t.i64.eq(n.threadKey,e[0])&&n.messageId===e[1]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,20]))}),function(t){var n=t.update,r=t.item;return n({playableUrl:e[3],playableUrlFallback:e[4],playableUrlExpirationTimestampMs:e[5],playableUrlMimeType:e[6],previewUrl:e[7],previewUrlFallback:e[8],previewUrlExpirationTimestampMs:e[9],previewUrlMimeType:e[10],previewWidth:e[11],previewHeight:e[12],imageUrl:void 0,imageUrlFallback:void 0,imageUrlExpirationTimestampMs:void 0,imageUrlMimeType:void 0,titleText:e[13]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxUpdateOptimisticAttachmentPreviewStoredProcedure",e.__tables__=["attachments"],a.exports=e}),null);
__d("LSOptimisticSendAttachmentForward",["LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSUpdateOptimisticAttachmentPreview"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return r[1]=e[3]===""?void 0:e[3],r[1]!==void 0?t.sequence([function(n){return t.forEach(t.filter(t.db.table(16).fetch([[[e[1],r[1]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&n.messageId===r[1]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,20]))}),function(n){var r=n.update,o=n.item;return r({attachmentFbid:t.i64.to_string(e[7])})})},function(e){return r[0]=r[1]}]):t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticMessage"),e[0],e[1],e[2],e[4],e[5],e[6],void 0,void 0,void 0,void 0,t.i64.cast([0,3]),void 0,void 0,void 0,!0).then(function(e){var t;return t=e,r[2]=t[0],r[3]=t[1],t})},function(o){return t.filter(t.db.table(16).fetch(),function(n){return n.attachmentFbid===t.i64.to_string(e[7])}).next().then(function(o,a){var i=o.done,l=o.value;return i?t.storedProcedure(n("LSInsertOptimisticAttachment"),e[1],r[3],r[2],r[2],t.i64.to_string(e[7]),t.i64.cast([0,2]),void 0,t.i64.cast([0,0]),void 0,!0,!1):(a=l.item,t.sequence([function(o){return t.storedProcedure(n("LSInsertOptimisticAttachment"),e[1],r[3],r[2],r[2],t.i64.to_string(e[7]),a.attachmentType,a.filename,a.attachmentIndex,a.attributionAppId,!0,!1)},function(o){return t.storedProcedure(n("LSUpdateOptimisticAttachmentPreview"),e[1],r[2],t.i64.to_string(e[7]),a.playableUrl,a.playableUrlFallback,a.playableUrlExpirationTimestampMs,a.playableUrlMimeType,a.previewUrl,a.previewUrlFallback,a.previewUrlExpirationTimestampMs,a.previewUrlMimeType,a.previewWidth,a.previewHeight,a.titleText)}]))})},function(e){return r[0]=r[2]}])},function(o){return t.sequence([function(n){return r[2]=t.createArray(),r[6]=(r[2].push(e[7]),r[2]),t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[3]=t.i64.cast([0,1]):(n=a.item,r[7]=n.syncGroup,t.i64.neq(r[7],void 0)?r[6]=r[7]:r[6]=t.i64.cast([0,1]),r[3]=r[6])})},function(o){return t.storedProcedure(n("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),t.i64.to_string(e[1]),t.i64.cast([0,46]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),r[3],void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0])).then(function(e){var t;return t=e,r[5]=t[0],t})},function(n){return t.db.table(31).add({taskId:r[5],threadKey:e[1],offlineThreadingId:r[0],threadAttributionSource:e[8],sendType:t.i64.cast([0,4]),markThreadRead:!1,initiatingSource:e[9]})}])},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticSendAttachmentForwardStoredProcedure",e.__tables__=["attachments","threads","messages_optimistic_context"],a.exports=e}),null);
__d("LSOptimisticSendAttachmentForwardStoredProcedure",["LSOptimisticSendAttachmentForward","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticSendAttachmentForward"),a.senderId,a.threadKey,a.threadType,a.offlineThreadingId,a.text,a.snippet,a.snippetHasEmoji,a.forwardedAttachmentFbid,a.source,a.initiatingSource);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticSendMessageForward",["LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.filter(t.db.table(12).fetch([[[e[3],e[4],e[5]]]]),function(n){return t.i64.eq(n.threadKey,e[3])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&t.i64.eq(n.timestampMs,e[4])&&n.messageId===e[5]&&t.i64.eq(n.authorityLevel,t.i64.cast([0,80]))}).next().then(function(o,a){var i,l=o.done,s=o.value;return l?(r[3]=t.createArray(),r[4]=(r[3].push("optimisticSendMessageForward msg not found"),r[3]),r[5]=(r[3].push(e[5]),r[3]),r[6]=t.toJSON(r[3]),(function(e){t.logger(e).mustfix(e)})(r[6]),i=["",t.i64.cast([-1,4294967295])],r[0]=i[0],r[1]=i[1]):(a=s.item,t.sequence([function(o){return r[11]=a.forwardScore,r[3]=a.text,r[4]=r[11],t.storedProcedure(n("LSLocalApplyOptimisticMessage"),e[0],e[1],e[2],r[3],void 0,void 0,a.stickerId,a.hotEmojiSize,void 0,void 0,t.i64.cast([0,3]),void 0,r[4],void 0,!0).then(function(e){var t;return t=e,r[5]=t[0],r[6]=t[1],t})},function(o){return t.forEach(t.db.table(16).fetch([[[a.threadKey,a.messageId]]]),function(o){var a=o.item;return t.sequence([function(o){return r[16]=a.attachmentFbid,r[12]=t.createArray(),r[13]=(r[12].push(r[16]),r[12]),r[14]=(r[12].push(r[5]),r[12]),r[15]=t.toJSON(r[12]),t.storedProcedure(n("LSInsertOptimisticAttachment"),e[1],r[6],r[5],r[16],r[15],a.attachmentType,a.filename,a.attachmentIndex,void 0,a.hasMedia,a.hasXma)},function(o){return t.storedProcedure(n("LSUpdateOptimisticAttachmentPreview"),e[1],r[5],r[15],a.playableUrl,a.playableUrlFallback,a.playableUrlExpirationTimestampMs,a.playableUrlMimeType,a.previewUrl,a.previewUrlFallback,a.previewUrlExpirationTimestampMs,a.previewUrlMimeType,a.previewWidth,a.previewHeight,a.titleText)}])})},function(n){return t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[7]=t.i64.cast([0,1]):(n=a.item,r[13]=n.syncGroup,t.i64.neq(r[13],void 0)?r[12]=r[13]:r[12]=t.i64.cast([0,1]),r[7]=r[12])})},function(o){return t.storedProcedure(n("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),t.i64.to_string(e[1]),t.i64.cast([0,46]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),r[7],void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0])).then(function(e){var t;return t=e,r[9]=t[0],t})},function(e){return t.resolve()},function(n){return t.db.table(31).add({taskId:r[9],threadKey:e[1],offlineThreadingId:r[5],messageId:e[5],threadAttributionSource:e[6],sendType:t.i64.cast([0,5]),markThreadRead:!1,initiatingSource:e[7]})},function(n){var o;return r[12]=new t.Map,r[13]=r[12].set("optimisticSendMessageForward",e[1]),r[14]=r[12].set("fwdMsgID",e[5]),r[15]=t.toJSON(r[12]),r[10]=r[15],(function(e){t.logger(e).info(e)})(r[10]),o=[r[5],r[9]],r[0]=o[0],r[1]=o[1]}]))})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticSendMessageForwardStoredProcedure",e.__tables__=["messages","attachments","threads","messages_optimistic_context"],a.exports=e}),null);
__d("LSOptimisticSendMessageForwardStoredProcedure",["LSOptimisticSendMessageForward","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticSendMessageForward"),a.senderId,a.threadKey,a.threadType,a.forwardedMsgThreadKey,a.forwardedMsgTimestampMs,a.forwardedMsgId,a.source,a.initiatingSource);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticSendMessageV2",["LSAppendDataTraceAddon.nop","LSArrayGetObjectAt","LSDeserializeFromJsonIntoDictionaryV2.nop","LSInsertOptimisticAttachment","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessageV2","LSLogEventAnnotate.nop","LSMessageSendToSentQPLInteractionHelper.nop","LSOptimisticMarkThreadReadV2","LSPredefineTraceForTask","LSUpdateOptimisticAttachmentPreview","gkx"],(function(t,n,r,o,a,i,l){function e(){var e=arguments,t=e[e.length-1],o=[],a=[];return t.sequence([function(i){return t.sequence([function(r){return o[0]=e[6].get("qpl_instance_key"),t.storedProcedure(n("LSLocalApplyOptimisticMessageV2"),e[0],e[1],e[2],e[4],e[5],e[6],e[8]).then(function(e){var t;return t=e,o[1]=t[0],o[2]=t[1],t})},function(a){return t.sequence([function(r){return o[5]=e[6].get("external_attachment_url"),o[44]=o[5]===""?void 0:o[5],o[44]!==void 0?t.sequence([function(r){return o[45]=e[6].get("attribution_app_id"),o[46]=e[6].get("optimistic_attachment_preview"),t.nativeOperation(n("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_gif_start",o[0])},function(r){return t.storedProcedure(n("LSInsertOptimisticAttachment"),e[1],o[2],o[1],o[1],o[1],t.i64.cast([0,3]),o[44],t.i64.cast([0,0]),o[45],!0,!1)},function(r){return o[46]?o[47]=!1:o[47]=!0,o[47]?t.resolve():(o[48]=o[46].get("playable_url"),o[49]=o[46].get("playable_url_fallback"),o[50]=o[46].get("playable_url_expiration_timestamp_ms"),o[51]=o[46].get("playable_url_mime_type"),o[52]=o[46].get("preview_url"),o[53]=o[46].get("preview_url_fallback"),o[54]=o[46].get("preview_url_expiration_timestamp_ms"),o[55]=o[46].get("preview_url_mime_type"),o[56]=o[46].get("preview_width"),o[57]=o[46].get("preview_height"),o[58]=o[46].get("image_url"),o[59]=o[46].get("image_url_fallback"),o[60]=o[46].get("image_url_expiration_timestamp_ms"),o[61]=o[46].get("image_url_mime_type"),o[62]=o[46].get("title_text"),t.storedProcedure(n("LSUpdateOptimisticAttachmentPreview"),e[1],o[1],o[1],o[48],o[49],o[50],o[51],o[52],o[53],o[54],o[55],o[56],o[57],o[62]))},function(e){return t.nativeOperation(n("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_gif_end",o[0])},function(e){return o[6]=t.i64.cast([0,7])}]):t.sequence([function(r){return o[45]=e[6].get("sticker_id"),t.i64.neq(o[45],void 0)?t.sequence([function(r){return t.i64.neq(o[45],t.i64.cast([53057,267535043]))&&t.i64.neq(o[45],t.i64.cast([85970,924785702]))&&t.i64.neq(o[45],t.i64.cast([85970,1004785694]))&&t.i64.neq(o[45],t.i64.cast([85970,1044785690]))?t.sequence([function(r){return o[49]=t.i64.to_string(o[45]),o[47]=e[6].get("optimistic_attachment_preview"),t.nativeOperation(n("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_sticker_start",o[0])},function(r){return t.storedProcedure(n("LSInsertOptimisticAttachment"),e[1],o[2],o[1],t.i64.to_string(o[45]),o[49],t.i64.cast([0,1]),void 0,t.i64.cast([0,0]),void 0,!0,!1)},function(r){return o[47]?o[48]=!1:o[48]=!0,o[48]?t.resolve():(o[50]=o[47].get("playable_url"),o[51]=o[47].get("playable_url_fallback"),o[52]=o[47].get("playable_url_expiration_timestamp_ms"),o[53]=o[47].get("playable_url_mime_type"),o[54]=o[47].get("preview_url"),o[55]=o[47].get("preview_url_fallback"),o[56]=o[47].get("preview_url_expiration_timestamp_ms"),o[57]=o[47].get("preview_url_mime_type"),o[58]=o[47].get("preview_width"),o[59]=o[47].get("preview_height"),o[60]=o[47].get("image_url"),o[61]=o[47].get("image_url_fallback"),o[62]=o[47].get("image_url_expiration_timestamp_ms"),o[63]=o[47].get("image_url_mime_type"),o[64]=o[47].get("title_text"),t.storedProcedure(n("LSUpdateOptimisticAttachmentPreview"),e[1],o[1],o[49],o[50],o[51],o[52],o[53],o[54],o[55],o[56],o[57],o[58],o[59],o[64]))},function(e){return t.nativeOperation(n("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_insert_optimistic_sticker_end",o[0])}]):t.resolve()},function(e){return o[46]=t.i64.cast([0,2])}]):t.sequence([function(r){return o[47]=e[6].get("signed_xma_dataclass"),o[47]!==void 0?t.sequence([function(r){return t.storedProcedure(n("LSInsertOptimisticAttachment"),e[1],o[2],o[1],o[1],o[1],t.i64.cast([0,7]),void 0,t.i64.cast([0,0]),void 0,!1,!0)},function(e){return o[48]=t.i64.cast([0,12])}]):t.sequence([function(r){return e[8]!==void 0?t.sequence([function(r){return t.nativeOperation(n("LSDeserializeFromJsonIntoDictionaryV2.nop"),e[8]).then(function(e){var t;return t=e,o[50]=t[0],t})},function(e){return o[51]=new t.Map,o[52]=o[50].keys(),o[53]=t.i64.of_int32(o[52].length),t.i64.gt(o[53],t.i64.cast([0,0]))?t.loopAsync(o[53],function(e){return o[58]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[52],o[58]).then(function(e){var t;return t=e,o[59]=t[0],o[60]=t[1],t})},function(e){return o[61]=o[50].get(o[59]),o[51].set(o[59],o[61])}])}):t.resolve()},function(e){return o[54]=o[51].get("xma_music_sticker_message_metadata"),o[54]?o[55]=!1:o[55]=!0,o[55]?t.resolve(o[56]=void 0):t.sequence([function(e){return o[58]=new t.Map,o[59]=o[54].keys(),o[60]=t.i64.of_int32(o[59].length),t.i64.gt(o[60],t.i64.cast([0,0]))?t.loopAsync(o[60],function(e){return o[61]=e,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),o[59],o[61]).then(function(e){var t;return t=e,o[62]=t[0],o[63]=t[1],t})},function(e){return o[64]=o[54].get(o[62]),o[58].set(o[62],o[64])}])}):t.resolve()},function(e){return o[56]=o[58]}])},function(r){return o[56]!==void 0?t.sequence([function(r){return o[58]=new t.Map,o[58].set("action_url",void 0),o[58].set("cta_type","XMA_MUSIC_ARTIST"),o[59]=o[56].get("song_id"),o[60]=o[56].get("song_title"),o[61]=o[56].get("song_subtitle"),o[62]=o[56].get("start_time"),o[62]!==void 0?o[63]=t.i64.from_string(o[62]):o[63]=void 0,o[64]=o[56].get("is_explicit"),o[65]=new t.Map,o[65].set("song_id",o[59]),o[65].set("song_title",o[60]),o[65].set("song_subtitle",o[61]),t.i64.neq(o[63],void 0)?o[66]=t.i64.to_string(o[63]):o[66]=void 0,o[65].set("start_time",o[66]),o[65].set("is_explicit",o[64]),o[65].set("derived_content_id",void 0),o[65].set("cta_artist",o[58]),o[65].set("preview",void 0),o[65].set("__typename","XMSGXmaMusicTemplateData"),o[67]=new t.Map,o[67].set("custom_template_data",o[65]),o[67].set("__typename","XMSGXmaSingleContent"),o[68]=new t.Map,o[68].set("content",o[67]),o[68].set("layout_type","SINGLE"),o[68].set("content_type",t.i64.cast([0,3046])),o[69]=t.toJSON(o[68]),o[70]=e[6].get("optimistic_attachment_preview"),t.storedProcedure(n("LSInsertOptimisticAttachment"),e[1],o[2],o[1],o[1],o[1],t.i64.cast([0,7]),void 0,t.i64.cast([0,0]),void 0,!1,!0)},function(r){return o[70]?o[71]=!1:o[71]=!0,o[71]?t.resolve():(o[72]=o[70].get("playable_url"),o[73]=o[70].get("playable_url_fallback"),o[74]=o[70].get("playable_url_expiration_timestamp_ms"),o[75]=o[70].get("playable_url_mime_type"),o[76]=o[70].get("preview_url"),o[77]=o[70].get("preview_url_fallback"),o[78]=o[70].get("preview_url_expiration_timestamp_ms"),o[79]=o[70].get("preview_url_mime_type"),o[80]=o[70].get("preview_width"),o[81]=o[70].get("preview_height"),o[82]=o[70].get("image_url"),o[83]=o[70].get("image_url_fallback"),o[84]=o[70].get("image_url_expiration_timestamp_ms"),o[85]=o[70].get("image_url_mime_type"),o[86]=o[70].get("title_text"),t.storedProcedure(n("LSUpdateOptimisticAttachmentPreview"),e[1],o[1],o[1],o[72],o[73],o[74],o[75],o[76],o[77],o[78],o[79],o[80],o[81],o[86]))},function(e){return o[57]=t.i64.cast([0,2])}]):t.resolve(o[57]=t.i64.cast([0,1]))},function(e){return o[49]=o[57]}]):t.resolve(o[49]=t.i64.cast([0,1]))},function(e){return o[48]=o[49]}])},function(e){return o[46]=o[48]}])},function(e){return o[6]=o[46]}])},function(e){return t.nativeOperation(n("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_send_message_v2_task_start",o[0])},function(n){return o[7]=t.i64.cast([0,0]),t.db.table(9).fetch([[[e[1]]]]).next().then(function(e,n){var r=e.done,a=e.value;return r?o[8]=t.i64.cast([0,1]):(n=a.item,o[46]=n.syncGroup,t.i64.neq(o[46],void 0)?o[45]=o[46]:o[45]=t.i64.cast([0,1]),o[8]=o[45])})},function(r){return o[10]=e[6].get("plugin_type"),t.storedProcedure(n("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),t.i64.to_string(e[1]),t.i64.cast([0,46]),"",void 0,void 0,o[10]==null?t.i64.cast([0,0]):o[10],t.i64.cast([0,0]),o[8],void 0,t.i64.cast([0,0]),void 0,o[7]==null?t.i64.cast([0,0]):o[7]).then(function(e){var t;return t=e,o[11]=t[0],t})},function(e){return t.nativeOperation(n("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_send_message_v2_task_end",o[0])},function(r){return o[12]=e[6].get("data_trace_id"),o[12]!==void 0?t.sequence([function(e){return t.storedProcedure(n("LSPredefineTraceForTask"),o[12],o[11],t.i64.to_string(t.i64.cast([0,46])),o[1])},function(r){return o[45]=e[6].get("source"),o[48]=t.i64.to_string(o[45]),o[48]!==void 0?o[46]=o[48]:o[46]=t.i64.to_string(t.i64.cast([0,0])),o[47]=",",t.nativeOperation(n("LSAppendDataTraceAddon.nop"),o[12],t.i64.cast([0,20]),t.i64.cast([0,1]),void 0,[o[46],o[47],t.i64.to_string(o[6]),o[47],t.i64.to_string(e[2])].join(""))}]):t.resolve()},function(n){return o[13]=e[6].get("blocked_by_otids"),o[14]=new t.Map,o[15]=e[6].get("openEb"),o[16]=e[6].get("source"),o[17]=e[6].get("external_attachment_url"),o[18]=e[6].get("platform_ref"),o[19]=e[6].get("platform_token"),o[20]=e[6].get("reply_source_id"),o[21]=e[6].get("reply_source_attachment_id"),o[22]=e[6].get("reply_source_type"),o[23]=e[6].get("mark_read"),o[24]=e[6].get("initiating_app_id"),o[25]=e[6].get("initiating_source"),o[26]=e[6].get("navigation_chain"),o[27]=e[6].get("dety_params"),o[28]=e[6].get("skip_url_preview_gen"),o[29]=e[6].get("text_has_links"),o[30]=e[6].get("multitab_env"),o[31]=e[6].get("subthread_parent_message_id"),o[32]=e[6].get("is_exclusive_to_subthread"),o[33]=e[6].get("rich_text_format_type"),o[34]=e[6].get("plugin_type"),t.i64.eq(o[34],t.i64.cast([0,40]))?o[35]="Instamadillo":o[35]="FBBroker",o[36]=e[6].get("signed_xma_dataclass"),o[37]=e[6].get("signed_xma_dataclass_validation"),t.db.table(31).add({taskId:o[11],threadKey:e[1],openEb:o[15],qplInstanceKey:o[0],offlineThreadingId:o[1],threadAttributionSource:o[16],externalAttachmentUrl:o[17],platformRef:o[18],platformToken:o[19],replySourceId:o[20],replySourceType:o[22],sendType:o[6],markThreadRead:o[23]==null?!1:o[23],initiatingSource:o[25],skipUrlPreviewGen:o[28],textHasLinks:o[29],dataclassParams:e[7],multitabEnv:o[30],subthreadParentMessageId:o[31],isExclusiveToSubthread:o[32],metadataDataclass:e[8],richTextFormatType:o[33],transportKey:o[35]})},function(a){return r("gkx")("834")&&t.i64.eq(e[2],t.i64.cast([0,1]))?t.resolve(0):(o[45]=e[6].get("mark_read"),o[45]!=null&&o[45]?t.sequence([function(e){return t.nativeOperation(n("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_mark_thread_read_start",o[0])},function(r){return t.storedProcedure(n("LSOptimisticMarkThreadReadV2"),e[1],o[2])},function(e){return t.nativeOperation(n("LSMessageSendToSentQPLInteractionHelper.nop"),"sp_mark_thread_read_end",o[0])}]):t.resolve())},function(r){return o[38]=t.createArray(),o[39]=(o[38].push("optimisticSendMessageV2"),o[38]),o[40]=(o[38].push(e[1]),o[38]),o[41]=(o[38].push(o[1]),o[38]),o[42]=t.toJSON(o[38]),(function(e){t.logger(e).info(e)})(o[42]),o[43]=new t.Map,o[43].set("offline_threading_id",o[1]),o[43].set("task_id",o[11]),o[43].set("task_queue_name",t.i64.to_string(e[1])),o[43].set("task_label",t.i64.to_string(t.i64.cast([0,46]))),t.nativeOperation(n("LSLogEventAnnotate.nop"),t.i64.cast([0,16]),t.i64.cast([0,23]),t.i64.cast([0,0]),o[43])},function(e){var t;return t=[o[1],o[11]],o[3]=t[0],o[4]=t[1],t}])},function(e){return a[0]=o[3]}])},function(e){return t.resolve(a)}])}e.__sproc_name__="LSMailboxOptimisticSendMessageV2StoredProcedure",e.__tables__=["threads","messages_optimistic_context"];var s=e;l.default=s}),98);
__d("LSOptimisticSendMessageV2StoredProcedure",["LSOptimisticSendMessageV2","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticSendMessageV2"),a.senderId,a.threadKey,a.threadType,a.mailboxType,a.text,a.snippet,a.extraSendMessageParams,a.dataclassParams,a.metadataDataclass);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSRemoveMediaSendJobs",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){return e.delete()})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMediaSendRemoveMediaSendJobsStoredProcedure",e.__tables__=["media_send_jobs"],a.exports=e}),null);
__d("LSRemoveMediaSendJobsStoredProcedure",["LSRemoveMediaSendJobs","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSRemoveMediaSendJobs"),a.offlineThreadingId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSSendPhase1MultiPhotoMessageV2",["LSArrayGetObjectAt","LSGetMessageAttributionParams","LSIssueSendAttachmentMessageTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=t.createArray(),r[1]=new t.Map,r[2]=new t.Map,r[3]=!1,r[4]=t.i64.cast([0,0]),t.forEach(t.sortBy(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),[["inMessageIndex","ASC"]]),function(e){var n=e.item;return r[7]=n.fbid,r[4]=t.i64.add(r[4],t.i64.cast([0,1])),t.i64.neq(r[7],void 0)?r[8]=(r[0].push(r[7]),r[0]):0})},function(o){return r[5]=t.i64.of_int32(r[0].length),t.i64.neq(r[5],r[4])||t.i64.eq(r[4],t.i64.cast([0,0]))?t.resolve(r[6]=t.i64.cast([0,10002])):t.sequence([function(n){return t.db.table(12).fetch([[[e[0]]],"optimistic"]).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0,void 0,void 0,void 0],r[7]=n[0],r[8]=n[1],r[9]=n[2],r[10]=n[3],r[11]=n[4],n):(t=i.item,o=[t.threadKey,t.senderId,t.text,t.replySourceId,t.replySourceTypeV2],r[7]=o[0],r[8]=o[1],r[9]=o[2],r[10]=o[3],r[11]=o[4])})},function(o){return t.i64.eq(r[7],void 0)||t.i64.eq(r[8],void 0)?t.resolve((t.i64.eq(r[7],void 0)?r[14]=t.i64.cast([0,10003]):r[14]=t.i64.cast([0,10004]),r[13]=r[14])):t.sequence([function(e){return t.db.table(9).fetch([[[r[7]]]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[14]=void 0:(t=o.item,r[14]=t.threadType)})},function(n){return t.filter(t.db.table(31).fetch(),function(t){return t.offlineThreadingId===e[0]}).next().then(function(e,t){var n,o,a=e.done,i=e.value;return a?(n=[void 0,void 0,void 0,void 0,void 0,void 0,void 0],r[16]=n[0],r[17]=n[1],r[18]=n[2],r[19]=n[3],r[20]=n[4],r[21]=n[5],r[22]=n[6],n):(t=i.item,o=[t.platformRef,t.platformToken,t.initiatingSource,void 0,void 0,t.dataclassParams,t.metadataDataclass],r[16]=o[0],r[17]=o[1],r[18]=o[2],r[19]=o[3],r[20]=o[4],r[21]=o[5],r[22]=o[6])})},function(o){return t.i64.neq(r[14],void 0)?t.sequence([function(o){return r[25]=r[1].keys(),r[26]=t.i64.of_int32(r[25].length),t.i64.gt(r[26],t.i64.cast([0,0]))?t.loopAsync(r[26],function(o){return r[32]=o,t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[25],r[32]).then(function(e){var t;return t=e,r[33]=t[0],r[34]=t[1],t})},function(o){return r[35]=r[2].get(r[33]),r[36]=t.i64.to_string(r[35]),r[36]!==void 0?t.sequence([function(e){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),r[25],r[32]).then(function(e){var t;return t=e,r[37]=t[0],r[38]=t[1],t})},function(n){return r[39]=r[1].get(r[33]),t.forEach(t.filter(t.db.table(16).fetch([[[r[7],e[0],r[37]]]]),function(n){return t.i64.eq(n.threadKey,r[7])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===e[0]&&n.attachmentFbid===r[37]}),function(e){var t=e.update,n=e.item;return t({attachmentFbid:r[36],originalFileHash:r[39]})})}]):t.resolve()}])}):t.resolve()},function(o){return t.storedProcedure(n("LSGetMessageAttributionParams"),e[0]).then(function(e){var t;return t=e,r[27]=t[0],r[28]=t[1],r[29]=t[2],t})},function(o){return t.i64.neq(r[27],void 0)?r[30]=r[27]:r[30]=t.i64.cast([0,0]),t.storedProcedure(n("LSIssueSendAttachmentMessageTask"),r[8],r[7],r[14],e[0],r[9],r[0],r[30],r[10],r[11],r[3],r[16],r[17],e[1],r[22])},function(e){return t.i64.ge(t.i64.cast([0,0]),t.i64.cast([0,0]))?r[31]=void 0:r[31]=t.i64.cast([0,10006]),r[24]=r[31]}]):t.resolve(r[24]=t.i64.cast([0,10005]))},function(e){return r[13]=r[24]}])},function(e){return r[6]=r[13]}])},function(e){return o[0]=r[6]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMediaSendSendPhase1MultiPhotoMessageV2StoredProcedure",e.__tables__=["media_send_jobs","messages","threads","messages_optimistic_context","attachments"],a.exports=e}),null);
__d("LSResumeMediaSendJob",["LSInsertPhase2PendingTask","LSSendPhase1MultiPhotoMessageV2"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(n){return r[0]=new t.Map,r[1]=new t.Map,r[1].set("main_job_succeeded",!1),r[1].set("resume_failed",!1),r[1].set("error",void 0),r[1].set("running_sub_job_states",r[0]),r[2]=new t.Map,r[2].set("should_transcode",!1),r[2].set("use_double_phase",!1),r[2].set("send_by_server",!1),r[2].set("is_secure",!1),r[2].set("should_dedupe",!1),r[2].set("is_optimistic_upload",!1),t.sortBy(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),[["state","ASC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?0:(t=o.item,r[2].set("should_transcode",t.shouldTranscode),r[2].set("use_double_phase",t.useDoublePhase),r[2].set("send_by_server",t.sendByServer),r[2].set("is_secure",t.isSecure),r[2].set("is_optimistic_upload",!1))})},function(n){return r[4]=new t.Map,t.forEach(t.sortBy(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),[["inMessageIndex","ASC"]]),function(e){var n=e.item;return r[13]=n.offlineAttachmentId,r[11]=n.state,r[12]=n.error,t.i64.eq(r[11],t.i64.cast([-1,4294967293]))?r[10]=!0:(t.i64.eq(r[11],t.i64.cast([0,1]))?r[14]=!0:(t.i64.eq(r[11],t.i64.cast([0,3]))?r[15]=!0:(t.i64.eq(r[11],t.i64.cast([0,5]))?r[16]=!0:(t.i64.eq(r[11],t.i64.cast([0,13]))?r[17]=!0:(t.i64.eq(r[11],t.i64.cast([0,7]))?r[18]=!0:(t.i64.eq(r[11],t.i64.cast([0,9]))?r[19]=!0:(t.i64.eq(r[11],t.i64.cast([0,11]))?r[20]=!0:r[20]=!1,r[19]=r[20]),r[18]=r[19]),r[17]=r[18]),r[16]=r[17]),r[15]=r[16]),r[14]=r[15]),r[10]=r[14]),r[10]?t.resolve(t.i64.eq(r[11],t.i64.cast([0,5]))||t.i64.eq(r[11],t.i64.cast([0,11]))?0:r[4].set(r[13],r[11])):t.i64.neq(r[12],void 0)?t.resolve((r[1].set("resume_failed",!0),r[1].set("error",r[12]))):(t.i64.eq(r[11],t.i64.cast([-1,4294967295]))?r[14]=t.i64.cast([0,5]):(t.i64.eq(r[11],t.i64.cast([-1,4294967294]))?(r[16]=r[2].get("should_transcode"),r[15]=r[16]?t.i64.cast([0,1]):t.i64.cast([0,3])):(t.i64.eq(r[11],t.i64.cast([0,2]))?r[16]=t.i64.cast([0,3]):(t.i64.eq(r[11],t.i64.cast([0,4]))?(r[18]=r[2].get("send_by_server"),r[19]=r[2].get("use_double_phase"),r[17]=r[18]?r[19]?t.i64.cast([0,13]):void 0:t.i64.cast([0,5])):(t.i64.eq(r[11],t.i64.cast([0,6]))?(r[19]=r[2].get("use_double_phase"),r[18]=r[19]?t.i64.cast([0,13]):void 0):(t.i64.eq(r[11],t.i64.cast([0,14]))?(r[20]=r[2].get("use_double_phase"),r[21]=r[2].get("should_transcode"),r[19]=r[20]?r[21]?t.i64.cast([0,7]):t.i64.cast([0,9]):void 0):(t.i64.eq(r[11],t.i64.cast([0,8]))?r[20]=t.i64.cast([0,9]):(t.i64.eq(r[11],t.i64.cast([0,10]))?(r[22]=r[2].get("send_by_server"),r[21]=r[22]?void 0:t.i64.cast([0,11])):(t.i64.eq(r[11],t.i64.cast([0,12])),r[22]=void 0,r[21]=r[22]),r[20]=r[21]),r[19]=r[20]),r[18]=r[19]),r[17]=r[18]),r[16]=r[17]),r[15]=r[16]),r[14]=r[15]),t.i64.neq(r[14],void 0)?t.sequence([function(e){return t.forEach(t.db.table(51).fetch([[[r[13]]]]),function(e){var t=e.update,n=e.item;return t({state:r[14]})})},function(e){return t.i64.eq(r[14],t.i64.cast([0,5]))||t.i64.eq(r[14],t.i64.cast([0,11]))?0:r[4].set(r[13],r[14])}]):t.resolve())})},function(n){return t.sortBy(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),[["state","ASC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[5]=void 0:(t=o.item,r[5]=t.state)})},function(o){return t.i64.neq(r[5],void 0)?(r[10]=r[2].get("send_by_server"),r[11]=r[2].get("use_double_phase"),r[12]=r[2].get("use_double_phase"),(r[10]?r[11]?t.i64.eq(r[5],t.i64.cast([0,10])):t.i64.eq(r[5],t.i64.cast([0,4])):r[12]?t.i64.eq(r[5],t.i64.cast([0,12])):t.i64.eq(r[5],t.i64.cast([0,6])))?t.resolve(r[1].set("main_job_succeeded",!0)):t.i64.eq(r[5],t.i64.cast([0,5]))?t.sequence([function(n){return r[13]=void 0,t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){var n=e.item;return r[15]=n.error,t.i64.eq(r[15],void 0)?(t.i64.neq(n.fbid,void 0)?r[16]=void 0:r[16]=t.i64.cast([0,9]),r[14]=r[16]):r[14]=r[15],t.i64.neq(r[14],void 0)?r[13]=r[14]:0})},function(o){return t.i64.neq(r[13],void 0)?t.resolve((r[1].set("resume_failed",!0),r[1].set("error",r[13]))):(r[14]=r[2].get("is_optimistic_upload"),r[14]?(r[15]=r[2].get("send_by_server"),r[16]=r[2].get("use_double_phase"),r[17]=r[2].get("use_double_phase"),(r[15]?r[16]?t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,10])):t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,4])):r[17]?t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,12])):t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,6])))?t.resolve(r[1].set("main_job_succeeded",!0)):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([-1,4294967295]))?r[18]=t.i64.cast([0,5]):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([-1,4294967294]))?(r[20]=r[2].get("should_transcode"),r[19]=r[20]?t.i64.cast([0,1]):t.i64.cast([0,3])):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,2]))?r[20]=t.i64.cast([0,3]):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,4]))?(r[22]=r[2].get("send_by_server"),r[23]=r[2].get("use_double_phase"),r[21]=r[22]?r[23]?t.i64.cast([0,13]):void 0:t.i64.cast([0,5])):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,6]))?(r[23]=r[2].get("use_double_phase"),r[22]=r[23]?t.i64.cast([0,13]):void 0):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,14]))?(r[24]=r[2].get("use_double_phase"),r[25]=r[2].get("should_transcode"),r[23]=r[24]?r[25]?t.i64.cast([0,7]):t.i64.cast([0,9]):void 0):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,8]))?r[24]=t.i64.cast([0,9]):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,10]))?(r[26]=r[2].get("send_by_server"),r[25]=r[26]?void 0:t.i64.cast([0,11])):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,12])),r[26]=void 0,r[25]=r[26]),r[24]=r[25]),r[23]=r[24]),r[22]=r[23]),r[21]=r[22]),r[20]=r[21]),r[19]=r[20]),r[18]=r[19]),t.i64.neq(r[18],void 0)?t.sequence([function(n){return t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){var t=e.update,n=e.item;return t({state:r[18]})})},function(n){return t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){var t=e.item;return r[4].set(t.offlineAttachmentId,t.state)})}]):t.resolve())):t.sequence([function(o){return r[15]=r[2].get("is_secure"),r[15]?t.sequence([function(n){return r[17]=t.createArray(),r[18]=new t.Map,r[19]=new t.Map,r[20]=!1,r[21]=t.i64.cast([0,0]),t.forEach(t.sortBy(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),[["inMessageIndex","ASC"]]),function(e){var n=e.item;return r[26]=n.fbid,r[21]=t.i64.add(r[21],t.i64.cast([0,1])),t.i64.neq(r[26],void 0)?r[27]=(r[17].push(r[26]),r[17]):0})},function(n){return r[22]=t.createArray(),t.forEach(t.sortBy(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),[["inMessageIndex","ASC"]]),function(e){var t=e.item;return r[26]=t.metadata,r[26]!==void 0?r[27]=(r[22].push(r[26]),r[22]):0})},function(e){return r[23]=t.i64.of_int32(r[17].length),r[24]=t.i64.of_int32(r[22].length),t.i64.neq(r[23],r[21])||t.i64.neq(r[24],r[21])?r[25]=t.i64.cast([0,11]):((function(e){t.logger(e).debug(e)})("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Started"),(function(e){t.logger(e).debug(e)})("[TincanLS][LSSecureMailboxSendSecureMediaMessageStoredProcedure] Completed"),r[25]=void 0),r[16]=r[25]}]):t.sequence([function(o){return t.storedProcedure(n("LSSendPhase1MultiPhotoMessageV2"),e[0],e[2]).then(function(e){var t;return t=e,r[17]=t[0],t})},function(n){return t.i64.eq(r[17],void 0)?t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){var n=e.update,r=e.item;return n({state:t.i64.cast([0,6])})}):t.resolve()},function(e){return r[16]=r[17]}])},function(n){return t.i64.eq(r[16],void 0)?(r[17]=r[2].get("send_by_server"),r[18]=r[2].get("use_double_phase"),r[19]=r[2].get("use_double_phase"),(r[17]?r[18]?t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,10])):t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,4])):r[19]?t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,12])):t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,6])))?t.resolve(r[1].set("main_job_succeeded",!0)):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([-1,4294967295]))?r[20]=t.i64.cast([0,5]):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([-1,4294967294]))?(r[22]=r[2].get("should_transcode"),r[21]=r[22]?t.i64.cast([0,1]):t.i64.cast([0,3])):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,2]))?r[22]=t.i64.cast([0,3]):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,4]))?(r[24]=r[2].get("send_by_server"),r[25]=r[2].get("use_double_phase"),r[23]=r[24]?r[25]?t.i64.cast([0,13]):void 0:t.i64.cast([0,5])):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,6]))?(r[25]=r[2].get("use_double_phase"),r[24]=r[25]?t.i64.cast([0,13]):void 0):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,14]))?(r[26]=r[2].get("use_double_phase"),r[27]=r[2].get("should_transcode"),r[25]=r[26]?r[27]?t.i64.cast([0,7]):t.i64.cast([0,9]):void 0):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,8]))?r[26]=t.i64.cast([0,9]):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,10]))?(r[28]=r[2].get("send_by_server"),r[27]=r[28]?void 0:t.i64.cast([0,11])):(t.i64.eq(t.i64.cast([0,6]),t.i64.cast([0,12])),r[28]=void 0,r[27]=r[28]),r[26]=r[27]),r[25]=r[26]),r[24]=r[25]),r[23]=r[24]),r[22]=r[23]),r[21]=r[22]),r[20]=r[21]),t.i64.neq(r[20],void 0)?t.sequence([function(n){return t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){var t=e.update,n=e.item;return t({state:r[20]})})},function(n){return t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){var t=e.item;return r[4].set(t.offlineAttachmentId,t.state)})}]):t.resolve())):t.resolve((r[1].set("resume_failed",!0),r[1].set("error",r[16])))}]))}]):t.i64.eq(r[5],t.i64.cast([0,11]))?t.sequence([function(n){return r[13]=void 0,t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){var n=e.item;return r[14]=n.error,t.i64.neq(r[14],void 0)?r[13]=r[14]:0})},function(e){return t.i64.neq(r[13],void 0)?(r[1].set("resume_failed",!0),r[1].set("error",r[13])):r[1].set("main_job_succeeded",!0)}]):t.i64.eq(r[5],t.i64.cast([0,13]))?t.sequence([function(o){return t.storedProcedure(n("LSInsertPhase2PendingTask"),e[0],e[1]).then(function(e){var t;return t=e,r[13]=t[0],t})},function(n){return t.i64.neq(r[13],void 0)?t.resolve((r[1].set("resume_failed",!0),r[1].set("error",r[13]))):t.sequence([function(n){return t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){var n=e.update,r=e.item;return n({state:t.i64.cast([0,14])})})},function(n){return r[1].set("main_job_succeeded",!0),t.forEach(t.filter(t.db.table(51).fetch(),function(t){return t.offlineThreadingId===e[0]}),function(e){var t=e.item;return r[4].set(t.offlineAttachmentId,t.state)})}])}]):t.resolve(0)):t.resolve((r[1].set("resume_failed",!0),r[1].set("error",t.i64.cast([0,11]))))},function(e){var t;return r[7]=r[1].get("main_job_succeeded"),r[8]=r[1].get("resume_failed"),r[9]=r[1].get("error"),t=[r[7],r[8],r[9],r[4]],o[0]=t[0],o[1]=t[1],o[2]=t[2],o[3]=t[3]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMediaSendResumeMediaSendJobStoredProcedure",e.__tables__=["media_send_jobs"],a.exports=e}),null);
__d("LSResumeMediaSendJobStoredProcedure",["LSResumeMediaSendJob","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSResumeMediaSendJob"),a.jobId,a.pluginType,a.dataTraceId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSThreadAttributionTypeUtil",["I64","LSIntEnum","LSMessagingThreadAttributionType","LSThreadAttributionStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var r=o("LSThreadAttributionStore").getSourceWithoutReset({type:"MWLSEntrypoint",value:n},(e||(e=o("I64"))).to_string(t));return d(r)}function c(t,n){var r=o("LSThreadAttributionStore").getSourceAndResetAttribution({type:"MWLSEntrypoint",value:n},(e||(e=o("I64"))).to_string(t));return d(r)}function d(e){if(e.type==="LSThreadAttribution")return e.value;var t=e.value;return t==="inboxPendingRequests"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_PENDING_REQUESTS):t==="fullscreenChat"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_FULLSCREEN_CHAT):t==="sidebarGroupsList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_GROUPS):t==="jewel"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").JEWEL_THREAD_LIST):t==="shop"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MINI_SHOP_VIEW_MENU_BUTTON):t==="chatheadsOverflow"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").CHATHEADS_OVERFLOW):t==="hovercard"||t==="feedDynamicHoverCard"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_DYNAMIC_HOVER_CARD):t==="search"||t==="messengerUniversalSearch"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_UNIVERSAL_SEARCH):t==="story"||t==="storyAggregatedUsers"||t==="storySeenByList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_STORY):t==="feedOrganicPost"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST):t==="timeline"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PROFILE_MESSAGE_BUTTON):t==="pageAboutCard"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_ABOUT_CARD):t==="inboxInThread"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_IN_THREAD):t==="notificationInThreadReply"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_NOTIFICATION_IN_THREAD_REPLY):t==="archieve"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_ARCHIVED_THREADS):t==="storyViewerSheetRow"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_STORY_VIEWER_SHEET_ROW):t==="chatheadsNewMessage"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").CHATHEADS_NEW_MESSAGE):t==="event"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_EVENT):t==="jewelSearch"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").JEWEL_SEARCH):t==="inboxSpam"||t==="inboxThreadList"||t==="inboxRestricted"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX):t==="jewelNewMessage"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").JEWEL_NEW_MESSAGE):t==="pendingRequests"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_PENDING_REQUESTS_INBOX_THREAD_LIST):t==="sidebarSearch"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_SEARCH):t==="inboxRemainingThreads"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_REMAINING_THREADS):t==="pagesHeader"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_PROFILE_HEADER_MESSAGE_BUTTON):t==="inboxRecentThreads"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_RECENT_THREADS):t==="chatheads"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").CHATHEADS):t==="pageResponsivenessCard"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_RESPONSIVENESS_CONTEXT_CARD):t==="inboxSearch"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_MESSAGE_SEARCH):t==="jewelNestedFolder"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").JEWEL_NESTED_FOLDER):t==="marketplace"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MARKETPLACE_SEND_MESSAGE):t==="feedOrganicPostViewAndMessage"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_ORGANIC_POST_VIEW_AND_MESSAGE):t==="adsCta"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").CLICK_TO_MESSENGER_AD_SEND_MESSAGE_CTA):t==="chatInThread"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_CHAT_IN_THREAD):t==="payments"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").PAYMENTS):t==="inboxFolder"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_NESTED_FOLDER):t==="inboxArchived"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_ARCHIVED_THREADS):t==="inboxActiveContacts"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_ACTIVE_CONTACTS):t==="sidebarContactsList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_LIST):t==="sidebarCommunityChatsList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").SIDEBAR_CONTACTS_COMMUNITY_CHATS):t==="igdChatTabsThreadView"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").IGD_WEB_CHAT_TAB_IN_THREAD):t==="inboxTrayActiveNow"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MONTAGE_AND_ACTIVE_NOW_ACTIVE_NOW):t==="communityFriendsDialog"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_COMMUNITY_MESSAGING_COMMUNITY_FRIENDS_DIALOG):t==="pagesHomeFriendsDialog"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_PAGES_HOME_FRIENDS_DIALOG):t==="mutualFriendsDialog"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PROFILE_MUTUAL_FRIENDS_DIALOG):t==="birthday"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_BIRTHDAY_CENTER):t==="groupMembers"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_GROUPS_MEMBER_LIST):t==="fundraiserSupportersList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FUNDRAISER_SUPPORTERS_LIST):t==="memories"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MEMORIES):t==="feedPoll"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_FEED_POLL):t==="reactorList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_FEED_REACTORS_LIST_MESSAGE_BUTTON):t==="friendsList"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FRIENDS_HOME):t==="pagesPrivateReply"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").FB_PAGE_PAGES_PRIVATE_REPLY):t==="inboxNewMessage"?(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_OMNIPICKER):(s||(s=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").UNKNOWN)}l.getSourceWithoutReset=u,l.getSourceAndResetAttribution=c}),98);
__d("isReceiverFetchSticker",["I64","LSIntEnum","MessagingAttachmentType"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=t.attachmentType,a=(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)),i=t.receiverFetchId;return a&&i!=null}l.default=u}),98);
__d("MAWMediaDownloadStatusBackendFetcher",["I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","MAWMediaSetClientMediaStatus","MessagingAttachmentType","ODS","WAHashUtils","isReceiverFetchSticker","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(e||(e=o("react"))).useEffect,m=new Set;function p(e){var t=o("react-compiler-runtime").c(7),n=e.attachment,a=e.mediaRenderQpl,i=e.mediaStatus,l=e.statusKey,s=r("useAsyncReStore")(),u,c;t[0]!==n||t[1]!==s||t[2]!==a||t[3]!==i||t[4]!==l?(u=function(){f(n,a,i,l,s)},c=[s,n,a,i,l],t[0]=n,t[1]=s,t[2]=a,t[3]=i,t[4]=l,t[5]=u,t[6]=c):(u=t[5],c=t[6]),d(u,c)}function _(e){var t=o("react-compiler-runtime").c(4),n=r("useAsyncReStore")(),a,i;t[0]!==e||t[1]!==n?(a=function(){e.forEach(function(e){var t=e.attachment,r=e.mediaRenderQpl,o=e.mediaStatus,a=e.statusKey;f(t,r,o,a,n,!0)})},i=[n,e],t[0]=e,t[1]=n,t[2]=a,t[3]=i):(a=t[2],i=t[3]),d(a,i)}function f(e,t,n,a,i,l){if(l===void 0&&(l=!1),!(e==null||a==null)){var d=r("isReceiverFetchSticker")(e),p=(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)),_=e.transportKey==="FBBroker"||e.transportKey==="FBLegacyBroker",f=!_&&(s||(s=o("I64"))).to_int32(e.authorityLevel)===r("LSAuthorityLevel").OPTIMISTIC,g=n!=null,h=p||f||_||d||g||m.has(a);if(h){(c||(c=o("ODS"))).bumpEntityKey(3185,"media_initial_download_status",(l?"bulk":"single")+".skip"),t==null||t.addPoint("skip_fetch_download_status");return}var y=isNaN(a);(c||(c=o("ODS"))).bumpEntityKey(3185,"media_initial_download_status",(l?"bulk":"single")+".request."+(y?"plaintext":"media_id")),t==null||t.addPoint("request_download_status"),m.add(a);var C=y?o("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaDownloadStatusByPlaintextHash",{plaintextHash:o("WAHashUtils").stringToPlaintextHash(a),qplInstanceKey:t==null?void 0:t.getInstanceKey()}):o("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaDownloadStatusByMediaId",{mediaId:o("MAWDbMedia").convertNumberToMediaId(parseInt(a,10)),qplInstanceKey:t==null?void 0:t.getInstanceKey()});r("promiseDone")(C.then(function(e){e!=null&&o("MAWMediaSetClientMediaStatus").call(i,a,e)}))}}l.useFetchInitialDownloadStatus=p,l.useFetchInitialDownloadStatusBulk=_}),98);
__d("MAWMediaDownloadStatusUIState",["I64","LSAuthorityLevel","LSIntEnum","LSMediaUrlUtils","MAWClientMediaStatusUtils","MAWMediaDownloadStatus","MessagingAttachmentType","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=o("WATagsLogger").TAGS(["MediaDownload"]),d=5;function m(t,n,a){if((a==null?void 0:a.receiverFetchId)!=null&&o("LSMediaUrlUtils").hasValidReceiverFetchPreviewUrl(a.previewUrl,a.previewUrlExpirationTimestampMs))return"downloaded";var i=n>=d,l=t!=null?t:{},s=l.mainMediaStatus,u=l.previewMediaStatus,m=t==null||s===r("MAWMediaDownloadStatus").DOWNLOADING||s===r("MAWMediaDownloadStatus").MISSING_FILE||s===r("MAWMediaDownloadStatus").RETRYING||s===r("MAWMediaDownloadStatus").AUTOMATICALLY_RETRYABLE_TIMEOUT_FAILURE,p=s===r("MAWMediaDownloadStatus").SUCCESS,f=s===r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,g=f&&i,h=s===r("MAWMediaDownloadStatus").NOT_MANUAL_RETRYABLE_FAILURE,y=t==null||u===r("MAWMediaDownloadStatus").RETRYING||u===r("MAWMediaDownloadStatus").DOWNLOADING||u===r("MAWMediaDownloadStatus").MISSING_FILE||u===void 0&&m,C=u===r("MAWMediaDownloadStatus").SUCCESS,b=u===r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE||u===void 0&&f,v=b&&i,S=u===r("MAWMediaDownloadStatus").NOT_MANUAL_RETRYABLE_FAILURE||u===void 0&&h,R=a!=null&&_(a);if(R&&!y){if(C||p)return h||g?"non_retryable_error_with_preview":f?"retryable_error_with_preview":"downloaded";if(S||v)return"non_retryable_error";if(b)return"retryable_error"}else{if(p)return"downloaded";if(h||g)return"non_retryable_error";if(f)return"retryable_error";if(m)return"loading"}return c.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["useMAWMediaDownloadStatusUIState: unexpected download status"]))),"loading"}function p(e,t,n){var a,i=(n==null?void 0:n.transportKey)==="FBBroker"||(n==null?void 0:n.transportKey)==="FBLegacyBroker",l=!i&&n!=null&&(s||(s=o("I64"))).to_int32(n.authorityLevel)===r("LSAuthorityLevel").OPTIMISTIC,c=l&&t!=null?{id:t,mainMediaStatus:(u||(u=o("LSIntEnum"))).ofNumber(1),mainMediaStatusDetails:"optimistic_secure_upload",previewMediaStatus:(u||(u=o("LSIntEnum"))).ofNumber(1),previewMediaStatusDetails:"optimistic_secure_upload"}:e,d=c!=null?o("MAWClientMediaStatusUtils").getMAWMediaStatus(c):null,p=m(d,(s||(s=o("I64"))).to_int32((a=c==null?void 0:c.downloadRetryCount)!=null?a:(s||(s=o("I64"))).zero),n);return{mawMediaStatus:d,nonDebouncedUIState:p,status:c}}function _(e){if(e==null)return!1;var t=e.attachmentType;return(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))}l.getMediaDownloadStatusUIState=m,l.getNonDebouncedUIStateAndStatus=p}),98);
__d("MWChatForwardDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="25105114172492238"}),null);
__d("MWChatForwardDialogQuery$Parameters",["MWChatForwardDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWChatForwardDialogQuery_facebookRelayOperation"),metadata:{},name:"MWChatForwardDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWChatForwardDialog.entrypoint",["JSResourceForInteraction","MWChatForwardDialogQuery$Parameters","MWXacGating","WebPixelRatio"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{forwardQueryReference:{parameters:n("MWChatForwardDialogQuery$Parameters"),variables:{scale:o("WebPixelRatio").get(),suppress_xac_groups:!o("MWXacGating").isGroupsEnabled()}}}}},root:r("JSResourceForInteraction")("MWChatForwardDialog.react").__setRef("MWChatForwardDialog.entrypoint")};l.default=e}),98);
__d("MWChatThreadId",["FBLogger","I64","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){switch(e.NAME){case"Group":case"User":case"Page":case"UserSecret":return e.VAL}}function c(e){switch(e.NAME){case"Group":return"g."+e.VAL;case"Page":return"p."+e.VAL;case"User":return"u."+e.VAL;case"UserSecret":throw r("FBLogger")("messenger_web").mustfixThrow("MWChatThreadIdType Not supported")}}function d(e){switch(e.targetType){case"GROUP":return{NAME:"Group",VAL:e.targetID};case"PAGE":return{NAME:"Page",VAL:e.targetID};case"USER":return{NAME:"User",VAL:e.targetID};default:throw r("FBLogger")("messenger_web").mustfixThrow("Invalid id")}}function m(e){return e.NAME==="User"}function p(e){return e.NAME==="UserSecret"}function _(e){if(e!=null){var t=e.split(":");if(t.length===2){var n=t[0],r=t[1];switch(n){case"thread":return{NAME:"Group",VAL:r};case"user":return{NAME:"User",VAL:r};default:return}}}}function f(t){var n=t.NAME;return n==="Group"?(e||(e=o("LSIntEnum"))).ofNumber(2):n==="User"||n==="Page"?(e||(e=o("LSIntEnum"))).ofNumber(1):(e||(e=o("LSIntEnum"))).ofNumber(7)}function g(e){return(s||(s=o("I64"))).of_string(e.VAL)}l.getFBID=u,l.serializeFuture=c,l.fromJs=d,l.isUser=m,l.isSecret=p,l.deserializeFromLegacyThreadId=_,l.getMessagingThreadType=f,l.toThreadKey=g}),98);
__d("useGetForwardSource",["LSIntEnum","LSMessagingThreadAttributionType","MWLSThreadDisplayContext","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(4),n=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(n!=null)if(n==="Inbox"){var a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_INBOX_FORWARD),t[0]=a):a=t[0],a}else if(n==="ChatTab"){var i;return t[1]===Symbol.for("react.memo_cache_sentinel")?(i=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_CHAT_FORWARD),t[1]=i):i=t[1],i}else{var l;return t[2]===Symbol.for("react.memo_cache_sentinel")?(l=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_BROADCAST_FLOW),t[2]=l):l=t[2],l}else{var s;return t[3]===Symbol.for("react.memo_cache_sentinel")?(s=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessagingThreadAttributionType").MESSENGER_BROADCAST_FLOW),t[3]=s):s=t[3],s}}l.default=s}),98);
__d("useLSMessagingInitiatingSource",["LSIntEnum","LSMessagingInitiatingSource","MWLSThreadDisplayContext","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var t=o("react-compiler-runtime").c(4),n=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(n!=null)if(n==="Inbox"){var a;return t[0]===Symbol.for("react.memo_cache_sentinel")?(a=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessagingInitiatingSource").FACEBOOK_INBOX),t[0]=a):a=t[0],a}else if(n==="FullscreenChat"){var i;return t[1]===Symbol.for("react.memo_cache_sentinel")?(i=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN),t[1]=i):i=t[1],i}else if(n==="ChatTab"){var l;return t[2]===Symbol.for("react.memo_cache_sentinel")?(l=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessagingInitiatingSource").FACEBOOK_CHAT),t[2]=l):l=t[2],l}else{var s;return t[3]===Symbol.for("react.memo_cache_sentinel")?(s=(e||(e=o("LSIntEnum"))).ofNumber(r("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT),t[3]=s):s=t[3],s}}l.default=s}),98);
__d("useLSMessagingSource",["IGDWebUtils","MWLSThreadDisplayContext"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),t=o("IGDWebUtils").isOnInstagramWeb();switch(e){case"Inbox":return"inboxInThread";case"FullscreenChat":return"fullscreenChat";case"ChatTab":return t?"igdChatTabsThreadView":"chatInThread";default:return"unknown"}}l.default=e}),98);
__d("MessagePowerUp",[],(function(t,n,r,o,a,i){var e=Object.freeze({AVATAR_LOVE:1e3,AVATAR_ANGER:1001,AVATAR_LAUGH:1002,AVATAR_CRY:1003,NONE:0,LOVE:1,GIFT_WRAP:2,CELEBRATION:3,FIRE:4,HALLOWEEN:5,NOM_NOM_DASH:6,NEW_YEARS:7,VALENTINES_DAY:8,ANTI_VALENTINES:9});i.default=e}),66);
__d("WorkChatMessageType",[],(function(t,n,r,o,a,i){"use strict";var e="text",l="gif",s="sticker",u="audio",c="file",d="hotEmoji";i.text=e,i.gif=l,i.sticker=s,i.audio=u,i.file=c,i.hotEmoji=d}),66);
__d("useMWLSSendStickerMessage",["I64","Int64Hooks","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MessagePowerUp","WorkChatMessageType","promiseDone","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t,n,a){var l=o("react-compiler-runtime").c(7),c=(u||(u=r("useReStore")))(),d=o("MWPActor.react").useActor(),m,p;return l[0]!==d||l[1]!==n||l[2]!==t||l[3]!==a||l[4]!==c?(m=function(u,m,p){r("promiseDone")(c.runInTransaction(function(a){var i=o("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(u,t!=null?t:"unknown");return r("LSOptimisticSendMessageV2StoredProcedure")(r("LSFactory")(a),{extraSendMessageParams:o("LSShape").ofRecord({calculate_denormalizations:!0,initiating_source:n,mark_read:!0,optimistic_attachment_preview:o("LSShape").ofRecord({playable_url:void 0,playable_url_expiration_timestamp_ms:void 0,playable_url_fallback:void 0,playable_url_mime_type:void 0,preview_height:(e||(e=o("I64"))).zero,preview_url:p,preview_url_expiration_timestamp_ms:void 0,preview_url_fallback:void 0,preview_url_mime_type:void 0,preview_width:e.zero}),power_up_style:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagePowerUp").NONE),reply_source_id:void 0,reply_source_type:s.ofNumber(r("LSMessageReplySourceType").MESSAGE),reply_source_type_v2:s.ofNumber(r("LSMessageReplySourceTypeV2").MESSAGE),snippet_has_emoji:!1,source:i,sticker_id:e.of_string(m)}),mailboxType:s.ofNumber(r("LSMailboxType").MESSENGER),senderId:d,threadKey:u,threadType:s.ofNumber(1)})},"readwrite",void 0,void 0,i.id+":49").then(function(e){a==null||a(o("WorkChatMessageType").sticker,1,e[0])}))},p=[c,d,n,t,a],l[0]=d,l[1]=n,l[2]=t,l[3]=a,l[4]=c,l[5]=m,l[6]=p):(m=l[5],p=l[6]),o("Int64Hooks").useCallbackInt64(m,p)}l.default=c}),98);
__d("MWLSForwardMessage",["I64","Int64Hooks","LSFactory","LSMediaUrlAttachment","LSOptimisticSendAttachmentForwardStoredProcedure","LSOptimisticSendMessageForwardStoredProcedure","MWChatThreadId","MWPActor.react","ODS","Promise","ReQL","promiseDone","react-compiler-runtime","useGetForwardSource","useLSMessagingInitiatingSource","useLSMessagingSource","useMWLSSendStickerMessage","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(){var t=o("react-compiler-runtime").c(7),a=(c||(c=r("useReStore")))(),l=o("MWPActor.react").useActor(),d=r("useLSMessagingInitiatingSource")(),f=r("useGetForwardSource")(),g=r("useLSMessagingSource")(),h=r("useMWLSSendStickerMessage")(g,d),y,C;return t[0]!==d||t[1]!==h||t[2]!==l||t[3]!==f||t[4]!==a?(y=function(c,g,y){if(y.type==="sent"){var t=y.value,C=t.timestamp,b=t.messageId,v=t.threadId;(s||(s=o("ODS"))).bumpEntityKey(3185,"mw_forward","send");var S=function(){return a.runInTransaction(function(e){return r("LSOptimisticSendMessageForwardStoredProcedure")(r("LSFactory")(e),{forwardedMsgId:b,forwardedMsgThreadKey:v,forwardedMsgTimestampMs:C,initiatingSource:d,senderId:l,source:f,threadKey:c,threadType:g})},"readwrite",void 0,void 0,i.id+":62").then(_)};r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.messages).getKeyRange(v,C,b)).then(function(t){if(t==null)return S();var r=t.stickerId;return r!=null?o("ReQL").firstAsync(o("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(v,b)).then(function(t){var a=t!=null?o("LSMediaUrlAttachment").previewUrl(t):void 0;return h(c,(u||(u=o("I64"))).to_string(r),a),(e||(e=n("Promise"))).resolve()}):S()}),p,m)}},C=[a,l,d,f,h],t[0]=d,t[1]=h,t[2]=l,t[3]=f,t[4]=a,t[5]=y,t[6]=C):(y=t[5],C=t[6]),o("Int64Hooks").useCallbackInt64(y,C)}function m(){return(s||(s=o("ODS"))).bumpEntityKey(3185,"mw_forward","failure")}function p(){return(s||(s=o("ODS"))).bumpEntityKey(3185,"mw_forward","success")}function _(){}function f(){var e=o("react-compiler-runtime").c(6),t=(c||(c=r("useReStore")))(),n=o("MWPActor.react").useActor(),a=r("useLSMessagingInitiatingSource")(),l=r("useGetForwardSource")(),d,m;return e[0]!==a||e[1]!==n||e[2]!==l||e[3]!==t?(d=function(){return(function(e,c,d){(s||(s=o("ODS"))).bumpEntityKey(3185,"mw_forward","send");var m=o("MWChatThreadId").getMessagingThreadType(e),p=o("MWChatThreadId").toThreadKey(e);r("promiseDone")(t.runInTransaction(function(e){return r("LSOptimisticSendAttachmentForwardStoredProcedure")(r("LSFactory")(e),{forwardedAttachmentFbid:(u||(u=o("I64"))).of_string(c),initiatingSource:a,senderId:n,source:l,threadKey:p,threadType:m})},"readwrite",void 0,void 0,i.id+":140"),h,g)})},m=[t,n,a,l],e[0]=a,e[1]=n,e[2]=l,e[3]=t,e[4]=d,e[5]=m):(d=e[4],m=e[5]),o("Int64Hooks").useMemoInt64(d,m)}function g(){return(s||(s=o("ODS"))).bumpEntityKey(3185,"mw_forward","failure")}function h(){return(s||(s=o("ODS"))).bumpEntityKey(3185,"mw_forward","success")}l.useForwardMessage=d,l.useForwardAttachment=f}),98);
__d("getMessengerTimeBucket",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["TODAY","WEEK_AGO","CURRENT_YEAR","OTHER_YEAR"]),l=864e5,s=6*l;function u(t){var n=new Date(t),r=new Date,o=new Date(r.getFullYear(),r.getMonth(),r.getDate());return o<n?e.TODAY:o.getTime()-s<n.getTime()?e.WEEK_AGO:o.getFullYear()===n.getFullYear()?e.CURRENT_YEAR:e.OTHER_YEAR}function c(t){return u(t)===e.TODAY}i.MessengerTimeBucket=e,i.getMessengerTimeBucket=u,i.isTimeOnlyTimestamp=c}),66);
__d("getMessengerPreciseTimestamp",["formatDate","getMessengerTimeBucket"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("getMessengerTimeBucket").getMessengerTimeBucket(e);switch(t){case o("getMessengerTimeBucket").MessengerTimeBucket.TODAY:return"g:ia";case o("getMessengerTimeBucket").MessengerTimeBucket.WEEK_AGO:return"l g:ia";case o("getMessengerTimeBucket").MessengerTimeBucket.CURRENT_YEAR:return"F jS, g:ia";case o("getMessengerTimeBucket").MessengerTimeBucket.OTHER_YEAR:return"F j, Y g:i a"}}function s(t,n){return r("formatDate")(new Date(t),e(t),void 0,n)}l.default=s}),98);
__d("MWMessageDeliveryStatus",["fbt","I64","LSIntEnum","getFBTSafeGenderFromGenderConst","getMessengerPreciseTimestamp","intlList","intlSummarizeNumber"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u;function c(e){if(e.length!==1)return{heads:e,type:"MultipleSeenHeads"};var t=e[0];return{head:t,type:"SingleSeenHead"}}function d(e,t){return{delivered:t,heads:e,type:"DeliveredAndRead"}}function m(e){return{count:e,type:"SeenCount"}}function p(e){return e.timestamp>0?s._(/*BTDS*/"_j{\"*\":\"Seen by {full name} at {seen time}\"}",[s._name("full name",e.name,r("getFBTSafeGenderFromGenderConst")(e.gender)),s._param("seen time",r("getMessengerPreciseTimestamp")(e.timestamp))]):s._(/*BTDS*/"_j{\"*\":\"Seen by {full name}\"}",[s._name("full name",e.name,r("getFBTSafeGenderFromGenderConst")(e.gender))])}function _(e,t){if(e.length===0)return"";if(t)return s._(/*BTDS*/"Seen by everyone").toString();var n=e.map(function(e){return s._(/*BTDS*/"_j{\"*\":\"{full name}\"}",[s._name("full name",e.name,r("getFBTSafeGenderFromGenderConst")(e.gender))])}),o=r("intlList")(n,r("intlList").CONJUNCTIONS.AND,r("intlList").DELIMITERS.COMMA);return s._(/*BTDS*/"Seen by {full name}",[s._param("full name",o)]).toString()}function f(e){var t=r("intlSummarizeNumber")(e);return s._(/*BTDS*/"Seen by {seen count}",[s._param("seen count",t)]).toString()}var g={delivered:s._(/*BTDS*/"Delivered"),error:s._(/*BTDS*/"Couldn't send"),loading:s._(/*BTDS*/"Loading..."),retriableError:s._(/*BTDS*/"Click to retry."),sending:s._(/*BTDS*/"Sending"),sent:s._(/*BTDS*/"Sent")};function h(e){switch(e.type){case"Sending":return g.sending;case"Sent":case"Delivered":return g.sent;case"Error":return g.error;case"SingleSeenHead":return p(e.head);case"NoneStatus":case"MultipleSeenHeads":return"";case"DeliveredAndRead":return _(e.heads,e.delivered);case"SeenCount":return f(e.count);case"Loading":return g.loading;case"RetriableError":return g.retriableError;case"ValidationError":return""}}function y(e){switch(e.type){case"Sending":return g.sending;case"Sent":return g.sent;case"Delivered":return g.delivered;case"Error":case"RetriableError":return g.error;case"SingleSeenHead":return p(e.head);case"DeliveredAndRead":return _(e.heads,e.delivered);default:return""}}function C(t){return(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(1))?{type:"Sending"}:(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(2))||(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(6))?{type:"Sent"}:(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(4))||(e||(e=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(5))?{type:"Error"}:{type:"NoneStatus"}}function b(t,n,r){var a=C(t.sendStatusV2);return(e||(e=o("I64"))).equal(t.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(4))||(e||(e=o("I64"))).equal(t.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(5))||(e||(e=o("I64"))).equal(t.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(1))?a:!r&&(e||(e=o("I64"))).equal(t.sendStatusV2,(u||(u=o("LSIntEnum"))).ofNumber(2))?{type:"NoneStatus"}:(e||(e=o("I64"))).ge(n,t.timestampMs)?{type:"Delivered"}:a}function v(e){return["SingleSeenHead","Sending","MultipleSeenHeads","Error","RetriableError"].includes(e.type)}l.seenHead=c,l.deliveredAndRead=d,l.seenCount=m,l.getSingleSeenHead=p,l.getSeenCount=f,l.Titles=g,l.getBroadcastStatusTitle=h,l.getStatusTitle=y,l.getFromSendStatus=C,l.getDeliveryStatusForMessageSentByYou=b,l.isAlwaysShownStatus=v}),226);
__d("MWPComposerMediaUploadUtil",["FileMercuryUploadService","I64","LSGetAttachmentType","LSIntEnum","MessagingAttachmentType","ResumableUploadServiceState.enum","URI","cr:7187","emptyFunction","gkx","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c="messenger_file",d="messenger_audio",m="messenger_image",p="messenger_video",_="file_type",f="image_type",g="video_type",h="audio_type",y="FILE_ATTACHMENT",C="VOICE_MESSAGE",b="target_id";function v(t,a,i,l,s,v){if(i===void 0&&(i=r("emptyFunction")),!!n("cr:7187")){var S=(u||(u=r("URI"))).getRequestURI().getDomain(),R=/workplace.com/i.test(S)?"workplace.com":/messenger.com/i.test(S)?"messenger.com":"facebook.com";l.forEach(function(l,u){var S,L=l.attachmentType,E=l.file,k=c,I=_,T=y;switch(L){case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):k=m,I=f;break;case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):k=d,I=h,T=C;break;case(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):k=p,I=g;break;default:break}var D=n("cr:7187").create({consumer:k,customHttpHeaders:new Map([[b,v],[I,T]]),serviceDomain:R});D.addListener((S=r("ResumableUploadServiceState.enum")).START,function(){t&&t(s[u],E.size,E.type)}),D.addListener(S.SUCCESS,function(e){a(s[u],e.media_id)}),D.addListener(S.FAIL,function(e){i(s[u],{response:e})}),D.addListener(S.TRANSPORT_FAILURE,function(e){i(s[u],{response:e})}),D.resume(E)})}}async function S(t,a,i,l,u,c,d,m,p,_,f,g,h){if(a===void 0&&(a=r("emptyFunction")),l===void 0&&(l=r("emptyFunction")),u===void 0&&(u=!1),n("cr:7187")&&g!=null&&m!==!0){var y=[],C=[],b=[],S=[],R=await Promise.all(c.map(function(e){return o("LSGetAttachmentType").LSGetAttachmentType(e)}));c.forEach(function(t,n){var a=R[n];(s||(s=o("I64"))).equal(a,(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))?(y.push({attachmentType:a,file:t}),C.push(d[n])):(b.push(t),S.push(d[n]))}),y.length>0&&v(t,i,l,y,C,g),b.length>0&&r("promiseDone")(o("FileMercuryUploadService").uploadByMercuryUploadService({chatSupportUserId:p,chatSupportUserNonce:f,files:b,isChatSupportUser:m,isVoiceClip:u,onUploadFailure:l,onUploadProgress:a,onUploadStart:t,onUploadSuccess:i,uploadIDs:S,uploadIdToQplFlow:h,voiceClipWaveformData:_}))}else r("promiseDone")(o("FileMercuryUploadService").uploadByMercuryUploadService({chatSupportUserId:p,chatSupportUserNonce:f,files:c,isChatSupportUser:m,isVoiceClip:u,onUploadFailure:l,onUploadProgress:a,onUploadStart:t,onUploadSuccess:i,uploadIDs:d,uploadIdToQplFlow:h,voiceClipWaveformData:_}))}function R(t,n,a,i){var l;return{action_url:void 0,attachment_fbid:t,attachment_index:(s||(s=o("I64"))).zero,attachment_type:(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO),cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:void 0,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:t,original_file_hash:void 0,playable_duration_ms:s.of_float(a*1e3),playable_url:URL.createObjectURL(n),playable_url_mime_type:n.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,sampling_frequency_hz:i==null?void 0:i.sampling_freq,source_text:void 0,subtitle_text:void 0,title_text:void 0,waveform_data:i==null||(l=i.amplitudes)==null?void 0:l.join(","),xma_layout_type:void 0,xmas_template_type:void 0}}function L(t,n,a){var i=t.map(function(e){return{action_url:void 0,attachment_fbid:e.offlineAttachmentId,attachment_index:(s||(s=o("I64"))).zero,attachment_type:e.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:e.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:e.offlineAttachmentId,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:e.previewUrl,playable_url_mime_type:e.mimeType,preview_height:e.previewHeight,preview_url:e.previewUrl,preview_url_mime_type:void 0,preview_width:e.previewWidth,source_text:void 0,subtitle_text:void 0,title_text:void 0,xma_layout_type:void 0,xmas_template_type:void 0}}),l=[],u=[];return i.forEach(function(t){((s||(s=o("I64"))).equal(t.attachment_type,(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||r("gkx")("4280")&&(s||(s=o("I64"))).equal(t.attachment_type,(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)))&&!n?(u.push(t),a===!0&&u.length===30&&(l.unshift([].concat(u)),u.length=0)):l.push([t])}),u.length>0&&(a===!0?l.push(u):l.unshift(u)),l.map(function(e){return e.map(function(e,t){return babelHelpers.extends({},e,{attachment_index:(s||(s=o("I64"))).of_int32(t)})})})}l.startUpload=S,l.getAudioAttachment=R,l.createPartitionedAttachments=L}),98);
__d("MWPOpenComposerUtils",["I64","LSRemoveMediaSendJobsStoredProcedure","LSResumeMediaSendJobStoredProcedure","MWConsole"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t){return e.media_staging.get(t).then(function(n){return n!=null?e.media_staging.delete(t):Promise.resolve()})}async function u(e,t,n){var r=await e.media_staging.get(t);r!=null&&await e.media_staging.put(n(r))}function c(e,t,n,r,o){return e.attachments.get(t,n,r).then(function(a){return a!=null?e.attachments.upsert([t,n,r],o(a)):Promise.resolve()})}function d(t,n,a){return r("LSResumeMediaSendJobStoredProcedure")(t,{dataTraceId:a!=null?a:void 0,jobId:n,pluginType:(e||(e=o("I64"))).zero}).then(function(e){var o=e[0],a=e[1],i=e[2];return o?r("LSRemoveMediaSendJobsStoredProcedure")(t,{offlineThreadingId:n}):Promise.resolve()})}l.deleteMediaStaging=s,l.updateMediaStaging=u,l.updateAttachment=c,l.resumeSendJob=d}),98);
__d("MWPThreadCapabilitiesContext",["I64","Int64Hooks","LSIntEnum","LSMessageThreadUnsendabilityStatus","LSThreadBitOffset","ThreadStatus","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=e,m=d.createContext,p=d.useContext,_=m({air131ShareChatMessagesWithMetaAiEnabled:!1,blurMediaEnabled:!1,canUnsendMessage:!1,communityMessagingChannelDescriptionCustomization:!1,communityMessagingChannelInvite:!1,disableLinks:!1,editMessageEnabled:!1,feedbackAndReportEnabled:!1,hasLSThreadBitOffset:function(t){return!1},isPaused:!1,localDeleteMessageEnabled:!1,messageForwardEnabled:!1,messageUnsendEnabled:!1,modifyPinnedMessageV2Enabled:!1,reactEnabled:!1,reactionsV2WriteEnabled:!1,replyEnabled:!1,reportMessageToAdminEnabled:!1,rtcVideoCallEnabled:!1,rtcVoiceCallEnabled:!1,seenCountV2Enabled:!1,subThreadCreationEnabled:!1});function f(e){var t=o("react-compiler-runtime").c(17),n=e.children,a=e.customCapabilityCheck,i=e.thread,l=i.capabilities,d=i.capabilities2,m=i.capabilities3,p=i.capabilities4,f=i.capabilities5,g=i.threadType,h,y;t[0]!==l||t[1]!==d||t[2]!==m||t[3]!==p||t[4]!==f||t[5]!==g?(h=function(t){var e={capabilities:l,capabilities2:d,capabilities3:m,capabilities4:p,capabilities5:f,threadType:g};return o("LSThreadBitOffset").has(t,e)},y=[l,d,m,p,f,g],t[0]=l,t[1]=d,t[2]=m,t[3]=p,t[4]=f,t[5]=g,t[6]=h,t[7]=y):(h=t[6],y=t[7]);var C=o("Int64Hooks").useCallbackInt64(h,y),b,v;t[8]!==a||t[9]!==C||t[10]!==i.cannotUnsendReason||t[11]!==i.threadStatus?(b=function(){return{air131ShareChatMessagesWithMetaAiEnabled:C(256),blurMediaEnabled:C(46),canUnsendMessage:i.cannotUnsendReason!=null?(s||(s=o("I64"))).equal(i.cannotUnsendReason,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!0,communityMessagingChannelDescriptionCustomization:C(135),communityMessagingChannelInvite:C(120),disableLinks:C(45),editMessageEnabled:C(194),feedbackAndReportEnabled:C(17),hasLSThreadBitOffset:C!=null?C:a,isPaused:i.threadStatus!=null&&((s||(s=o("I64"))).equal(i.threadStatus,(s||(s=o("I64"))).of_int32(r("ThreadStatus").PAUSED))||(s||(s=o("I64"))).equal(i.threadStatus,(s||(s=o("I64"))).of_int32(r("ThreadStatus").PAUSED_AND_UPGRADED_TO_COMMUNITY))),localDeleteMessageEnabled:C(102),messageForwardEnabled:C(103),messageUnsendEnabled:C(122)&&i.cannotUnsendReason!=null?(s||(s=o("I64"))).equal(i.cannotUnsendReason,(u||(u=o("LSIntEnum"))).ofNumber(r("LSMessageThreadUnsendabilityStatus").CAN_UNSEND)):!1,modifyPinnedMessageV2Enabled:C(172),reactEnabled:C(18),reactionsV2WriteEnabled:C(169),replyEnabled:C(42),reportMessageToAdminEnabled:C(93),rtcVideoCallEnabled:C(24),rtcVoiceCallEnabled:C(25),seenCountV2Enabled:C(140),subThreadCreationEnabled:C(167)}},v=[a,C,i.threadStatus,i.cannotUnsendReason],t[8]=a,t[9]=C,t[10]=i.cannotUnsendReason,t[11]=i.threadStatus,t[12]=b,t[13]=v):(b=t[12],v=t[13]);var S=o("Int64Hooks").useMemoInt64(b,v),R;return t[14]!==n||t[15]!==S?(R=c.jsx(_.Provider,{value:S,children:n}),t[14]=n,t[15]=S,t[16]=R):R=t[16],R}function g(){return p(_)}l.Provider=f,l.useMWPThreadCapabilitiesContext=g}),98);
__d("MWUnvaultedText",["cr:2472","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo,u=function(t,r){return n("cr:2472")==null||r==null||r===""?r:t?n("cr:2472").unvaultOrThrow(r):n("cr:2472").unvault(r,!0)};function c(e,t){var n=o("react-compiler-runtime").c(3),r;n[0]!==e||n[1]!==t?(r=u(e,t),n[0]=e,n[1]=t,n[2]=r):r=n[2];var a=r;return a}l.getMWUnvaultedText=u,l.useMWUnvaultedText=c}),98);
__d("isDeliveryStatusErrorState",[],(function(t,n,r,o,a,i){"use strict";function e(e){return e.type==="Error"||e.type==="RetriableError"}i.default=e}),66);
__d("isFeatureLimitEnabled",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("588")===!0}l.default=e}),98);
__d("useIsSecureMessage",["LSMessagingThreadTypeUtil","ReQL","ReQLSuspense","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var r,a=o("react-compiler-runtime").c(2),l=(r=o("ReQLSuspense").useFirst(function(){return t==null?o("ReQL").empty():o("ReQL").fromTableAscending(e.tables.threads,["threadType"]).getKeyRange(t.threadKey).map(s)},[e,t],i.id+":37"))!=null?r:n.fallbackThreadType;if(l==null){var u;return(u=n.fallbackIsSecure)!=null?u:!1}var c;return a[0]!==l?(c=o("LSMessagingThreadTypeUtil").isArmadilloSecure(l),a[0]=l,a[1]=c):c=a[1],c}function s(e){var t=e.threadType;return t}l.default=e}),98);
__d("useMAWMediaDebouncedState",["clearTimeout","justknobx","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef,d=s.useState;function m(e){var t=o("react-compiler-runtime").c(5),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=r("justknobx")._("3145"),t[0]=n):n=t[0];var a=n,i=d(e),l=i[0],s=i[1],u=c(null),m;t[1]===Symbol.for("react.memo_cache_sentinel")?(m=function(){r("clearTimeout")(u.current),u.current=null},t[1]=m):m=t[1];var p=m,_;t[2]===Symbol.for("react.memo_cache_sentinel")?(_=function(t,n){if(p(),!n){s(t);return}u.current=r("setTimeout")(function(){s(t)},a)},t[2]=_):_=t[2];var f=_,g;return t[3]!==l?(g=[l,f,p],t[3]=l,t[4]=g):g=t[4],g}l.default=m}),98);
__d("useMAWBulkMediaDownloadStatusUIStateDebounced",["react","react-compiler-runtime","useMAWMediaDebouncedState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(4),n=r("useMAWMediaDebouncedState")(e),a=n[0],i=n[1],l,u;return t[0]!==i||t[1]!==e?(l=function(){i(e,!e.some(c))},u=[e,i],t[0]=i,t[1]=e,t[2]=l,t[3]=u):(l=t[2],u=t[3]),s(l,u),a}function c(e){return e==="loading"||e==="downloaded"}l.default=u}),98);
__d("useMAWMediaDownloadStatusBulk",["MAWMediaDownloadStatusBackendFetcher","MAWMediaDownloadStatusUIState","react","react-compiler-runtime","useMAWBulkMediaDownloadStatusUIStateDebounced"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(e,t){var n=o("react-compiler-runtime").c(10),a;if(n[0]!==e||n[1]!==t){var i;n[3]!==t?(i=function(n){var e=n.attachment,r=n.mediaRenderQpl,a=n.mediaStatus,i=n.statusKey,l=a!=null?a:t==null?void 0:t.find(function(e){var t=e.id;return t===i});return babelHelpers.extends({},o("MAWMediaDownloadStatusUIState").getNonDebouncedUIStateAndStatus(l,i,e),{attachment:e,mediaRenderQpl:r,statusKey:i})},n[3]=t,n[4]=i):i=n[4],a=e.map(i),n[0]=e,n[1]=t,n[2]=a}else a=n[2];var l=a,s;if(n[5]!==l){var u=[],c=[],d=[];l.forEach(function(e){u.push(e.mawMediaStatus),c.push(e.nonDebouncedUIState),d.push({attachment:e.attachment,mediaRenderQpl:e.mediaRenderQpl,mediaStatus:e.status,statusKey:e.statusKey})}),s=[u,c,d],n[5]=l,n[6]=s}else s=n[6];var m=s,p=m[0],_=m[1],f=m[2],g=r("useMAWBulkMediaDownloadStatusUIStateDebounced")(_);o("MAWMediaDownloadStatusBackendFetcher").useFetchInitialDownloadStatusBulk(f);var h;return n[7]!==g||n[8]!==p?(h={mawMediaStatuses:p,uiStates:g},n[7]=g,n[8]=p,n[9]=h):h=n[9],h}l.default=u}),98);
__d("useMWChatForward",["MWChatForwardDialog.entrypoint","MessengerWebUXLogger","react","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useRef;function d(e){var t=o("react-compiler-runtime").c(11),n=e.dropToggle,a=e.forwardDialogType,i=e.messageID,l=e.onClose,s=e.onSend,u=c(null),d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d={},t[0]=d):d=t[0];var m=r("useMWXEntryPointDialog")(r("MWChatForwardDialog.entrypoint"),d),p=m[0],_=r("MessengerWebUXLogger").useInteractionLogger(),f;t[1]!==n||t[2]!==a||t[3]!==_||t[4]!==i||t[5]!==l||t[6]!==s||t[7]!==p?(f=function(){p({dropToggle:n,forwardDialogType:a,messageID:i,onSend:s},l,_==null?void 0:_("forward_message"))},t[1]=n,t[2]=a,t[3]=_,t[4]=i,t[5]=l,t[6]=s,t[7]=p,t[8]=f):f=t[8];var g=f,h;return t[9]!==g?(h={onClick:g,triggerRef:u},t[9]=g,t[10]=h):h=t[10],h}l.default=d}),98);
__d("useMWIsContactRestricted",["LSContactBitOffset","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=o("react-compiler-runtime").c(2),n;t[0]!==e?(n=e!=null&&o("LSContactBitOffset").has(66,e),t[0]=e,t[1]=n):n=t[1];var r=n;return r}l.default=e}),98);
__d("useMWLSDefaultThreadSourceAndResetAttribution",["LSThreadAttributionTypeUtil","react","react-compiler-runtime","useLSMessagingSource"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){var e=o("react-compiler-runtime").c(2),t=r("useLSMessagingSource")(),n;return e[0]!==t?(n=function(n){return o("LSThreadAttributionTypeUtil").getSourceAndResetAttribution(n,t)},e[0]=t,e[1]=n):n=e[1],n}l.default=u}),98);
__d("useMWV2ForwardMessage",["$InternalEnum","CometRelay","FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MAWDbMsg","MAWExternalId","MAWThreadId","MAWVault","MAWVerifyThreadCutover","MWChatMessageId","MWChatThreadId","MWLSForwardMessage","MWMediaRenderQplUtils","MWPActor.react","MWSharedMsgLogUtils","MWSharedS2SBaseAnnotations","MWUnvaultedText","ReQL","ReQLSuspense","WAResultOrError","cr:19816","cr:19893","cr:19894","cr:9759","getErrorSafe","promiseDone","react","react-compiler-runtime","sendToSentQPLLogger","useGetForwardSource","useIsSecureMessage","useLSMessagingSource","useReStore","useStringWithSubstitutions"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(s||(s=o("react"))).useMemo;function m(e,t,n){var r;return(r=o("ReQL")).firstAsync(r.mergeJoin(r.fromTableAscending(e.tables.participants).getKeyRange(t),r.fromTableAscending(e.tables.contacts)).filter(function(e){var t=e[0],r=e[1];return!(c||(c=o("I64"))).equal(r.id,n)}))}function p(e,t,n){var r=o("react-compiler-runtime").c(20),a=t.messageId,l=t.threadKey,s;r[0]!==e.tables.attachments||r[1]!==a||r[2]!==l?(s=function(){return o("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(l,a)},r[0]=e.tables.attachments,r[1]=a,r[2]=l,r[3]=s):s=r[3];var u;r[4]!==e||r[5]!==a||r[6]!==l?(u=[e,a,l],r[4]=e,r[5]=a,r[6]=l,r[7]=u):u=r[7];var c=o("ReQLSuspense").useArray(s,u,i.id+":91"),d;r[8]!==n||r[9]!==e.tables.attachments||r[10]!==a||r[11]!==l?(d=function(){return n!=null?o("ReQL").fromTableAscending(e.tables.attachments).getKeyRange(l,a,n):o("ReQL").empty()},r[8]=n,r[9]=e.tables.attachments,r[10]=a,r[11]=l,r[12]=d):d=r[12];var m;r[13]!==n||r[14]!==e||r[15]!==a||r[16]!==l?(m=[n,e,a,l],r[13]=n,r[14]=e,r[15]=a,r[16]=l,r[17]=m):m=r[17];var p=o("ReQLSuspense").useFirst(d,m,i.id+":100"),_=c.length>0?c[0]:void 0;if(n!=null){var f=p!=null?p:_,g;return r[18]!==f?(g=f!=null?[f]:[],r[18]=f,r[19]=g):g=r[19],g}return c}function _(){var t=(e||(e=r("useReStore")))();return o("Int64Hooks").useCallbackInt64(async function(e,a,i,l,s,u,c,d,p){var _=o("MWChatThreadId").toThreadKey(s),g=o("MWChatThreadId").getMessagingThreadType(s),h=await o("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(t),_),y=await Promise.all([o("MAWThreadId").isSecureThreadKey(t.tables,_),o("MAWThreadId").getThread(t.tables,_),m(t,_,i)]),C=y[0],b=y[1],v=y[2],S=C||h;try{if(n("cr:19893")!=null&&!S)return o("sendToSentQPLLogger").addSendToSentAnnotations(u,{string:{forward_type:f.SecureToOpen}}),d!=null?await Promise.allSettled([d.messagesAndAttachments.map(function(e){var r;return n("cr:19893").forwardMessage(t,_,g,e.message,l,(r=e.attachment)!=null?r:void 0,i,c)})]):await n("cr:19893").forwardMessage(t,_,g,e,l,a[0],i,c,p),o("sendToSentQPLLogger").markSendToSentSuccess(u),[o("WAResultOrError").makeResult({description:"open message",messageType:"fixMe"})];var R=o("MAWDbMsg").toMsgId(e.messageId);if(R==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("Message does not have an id");if(n("cr:19816")!=null){o("sendToSentQPLLogger").addSendToSentAnnotations(u,{string:{forward_type:f.SecureToSecure}});var L;if(d!=null){var E=d.messagesAndAttachments.map(function(e){return o("MAWDbMsg").toMsgId(e.message.messageId)}).filter(Boolean);L=await n("cr:19816").forwardMessageBatch(t,_,E,c,u)}else L=await n("cr:19816").forwardMessage(t,_,R,c,u,p!=null?o("MAWVault").vault(p):void 0).then(function(e){return[e]});return n("cr:9759")!=null&&b!=null&&await n("cr:9759")(t,b,v,o("LSMessagingThreadTypeUtil").isOneToOne(b.threadType)),L!=null?L:[o("WAResultOrError").makeResult({description:"removal pending rollout of MAWMessageSendReporterV2",messageType:"fixMe"})]}throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We won't reach to this step, if you are in QE, you should use secure forward")}catch(e){var k=r("getErrorSafe")(e);throw o("sendToSentQPLLogger").markSendToSentFail(u,"failed_forwarding_message",k),r("FBLogger")("messenger_web").catching(k).mustfix("MW Fail forwarding a message"),k}},[t])}var f=n("$InternalEnum")({SecureToOpen:"secure_to_open",OpenToOpen:"open_to_open",SecureToSecure:"secure_to_secure",OpenToSecure:"open_to_secure"});function g(t,a,i,l){var s,d=o("react-compiler-runtime").c(76),g=(e||(e=r("useReStore")))(),y=p(g,t,i),C;d[0]!==a?(C={fallbackThreadType:a},d[0]=a,d[1]=C):C=d[1];var b=r("useIsSecureMessage")(g,t,C),v=o("MWPActor.react").useActor(),S;d[2]!==t.senderId||d[3]!==v?(S=(c||(c=o("I64"))).equal(v,t.senderId),d[2]=t.senderId,d[3]=v,d[4]=S):S=d[4];var R=!S,L=o("MWLSForwardMessage").useForwardMessage(),E=o("MWLSForwardMessage").useForwardAttachment(),k=r("useGetForwardSource")(),I;d[5]!==t.messageId||d[6]!==t.threadKey||d[7]!==t.timestampMs?(I=o("MWChatMessageId").makeSent((c||(c=o("I64"))).to_string(t.threadKey),t.messageId,c.to_string(t.timestampMs)),d[5]=t.messageId,d[6]=t.threadKey,d[7]=t.timestampMs,d[8]=I):I=d[8];var T=I,D=o("CometRelay").useRelayEnvironment(),x=_(),$;d[9]!==t.displayedContentTypes?($=o("MWSharedMsgLogUtils").getMessageTypeFromDisplayedContentType(t.displayedContentTypes),d[9]=t.displayedContentTypes,d[10]=$):$=d[10];var P=$,N;d[11]!==y[0]||d[12]!==y.length?(N=y.length>0?o("MWMediaRenderQplUtils").deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(y[0].attachmentType):"NO_ATTACHMENT",d[11]=y[0],d[12]=y.length,d[13]=N):N=d[13];var M=N,w=r("useLSMessagingSource")(),A;if(d[14]!==t.mentionIds){var F,O;A=new Set((F=(O=t.mentionIds)==null||O.split==null?void 0:O.split(","))!=null?F:[]),d[14]=t.mentionIds,d[15]=A}else A=d[15];var B=A,W=B.size>0,q=o("MWUnvaultedText").useMWUnvaultedText(!1,t.text),U=(s=o("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(b?q:null,[],B,t.threadKey))!=null?s:{textWithSubstitutions:q},V=U.textWithSubstitutions,H;d[16]!==y||d[17]!==g.tables||d[18]!==W||d[19]!==R||d[20]!==l||d[21]!==t||d[22]!==M||d[23]!==P||d[24]!==x||d[25]!==v||d[26]!==k||d[27]!==V?(H=async function(n){var e=o("MWChatThreadId").toThreadKey(n),r=await o("MAWThreadId").getThread(g.tables,e),a=function(r){return x(t,y,v,R,n,r,k,l,W?V:void 0)},i=o("sendToSentQPLLogger").markSendToSentStartWithAnnotation(r,{isForward:!0,mediaGroupInfo:l},(u||(u=o("LSIntEnum"))).unwrapIntEnum(k),{string:{attachment_type:"forward",message_content_type_from_attachment:M,message_type:P}});await a(i)},d[16]=y,d[17]=g.tables,d[18]=W,d[19]=R,d[20]=l,d[21]=t,d[22]=M,d[23]=P,d[24]=x,d[25]=v,d[26]=k,d[27]=V,d[28]=H):H=d[28];var G;d[29]!==y||d[30]!==g||d[31]!==W||d[32]!==R||d[33]!==w||d[34]!==l||d[35]!==t||d[36]!==P||d[37]!==x||d[38]!==v||d[39]!==k||d[40]!==V?(G=[g,v,w,l,k,x,t,y,R,P,V,W],d[29]=y,d[30]=g,d[31]=W,d[32]=R,d[33]=w,d[34]=l,d[35]=t,d[36]=P,d[37]=x,d[38]=v,d[39]=k,d[40]=V,d[41]=G):G=d[41];var z=o("Int64Hooks").useCallbackInt64(H,G),j;d[42]!==i||d[43]!==y||d[44]!==g||d[45]!==E||d[46]!==L||d[47]!==R||d[48]!==t||d[49]!==M||d[50]!==P||d[51]!==T||d[52]!==D||d[53]!==v||d[54]!==k?(j=async function(a){var e=o("MWChatThreadId").toThreadKey(a),l=o("MWChatThreadId").getMessagingThreadType(a),s=await Promise.all([o("MAWThreadId").isSecureThreadKey(g.tables,e),o("MAWThreadId").getThread(g.tables,e),m(g,e,v),o("MAWVerifyThreadCutover").verifyThreadCutover(Promise.resolve(g),e),o("MAWThreadId").getThread(g.tables,e)]),c=s[0],d=s[1],p=s[2],_=s[3],C=s[4],b=c||_,S=function(t){var e=o("sendToSentQPLLogger").markSendToSentStart();if(C!=null){var n=o("MWSharedS2SBaseAnnotations").getMessageTypeParams({isForward:!0,threadType:C.threadType});r("promiseDone")(o("MWSharedMsgLogUtils").getSendToSentAnnotations({attachmentTypeParams:n,messageOfflineThreadingId:t,source:(u||(u=o("LSIntEnum"))).unwrapIntEnum(k),thread:C}),function(t){t.string=babelHelpers.extends({},t.string,{attachment_type:"forward",message_content_type_from_attachment:M,message_type:P}),o("sendToSentQPLLogger").addSendToSentAnnotations(e,t)})}return o("sendToSentQPLLogger").addSendToSentAnnotations(e,{string:{forward_type:f.OpenToSecure,message_content_type_from_attachment:M,message_type:P}}),e};if(n("cr:19894")!=null&&b){var I=function(o,a){return(function(r){return n("cr:19894").forwardMessage(D,g,e,t,R,a,k,r!=null?r:void 0,o).then(h)})};if(y.length===0){var x=o("MAWExternalId").generateExternalId(),$=S(x);await I(x,void 0)($),o("sendToSentQPLLogger").markSendToSentSuccess($)}else await Promise.all(y.map(async function(e){var t=o("MAWExternalId").generateExternalId(),n=S(t);try{await I(t,e)(n),o("sendToSentQPLLogger").markSendToSentSuccess(n)}catch(e){var a=e,i=r("getErrorSafe")(a);throw o("sendToSentQPLLogger").markSendToSentFail(n,"failed_forwarding_message",i),r("FBLogger")("messenger_web").catching(i).mustfix("MW Fail forwarding a message"),i}}));n("cr:9759")!=null&&d!=null&&n("cr:9759")(g,d,p,o("LSMessagingThreadTypeUtil").isOneToOne(d.threadType))}else if(!b){var N=S();try{o("sendToSentQPLLogger").addSendToSentAnnotations(N,{string:{forward_type:f.OpenToOpen,message_content_type_from_attachment:M,message_type:P}}),i==null?L(e,l,T):E(a,i),o("sendToSentQPLLogger").markSendToSentSuccess(N);return}catch(e){var w=e,A=r("getErrorSafe")(w);throw o("sendToSentQPLLogger").markSendToSentFail(N,"failed_forwarding_message",A),r("FBLogger")("messenger_web").catching(A).mustfix("MW Fail forwarding a message"),A}}},d[42]=i,d[43]=y,d[44]=g,d[45]=E,d[46]=L,d[47]=R,d[48]=t,d[49]=M,d[50]=P,d[51]=T,d[52]=D,d[53]=v,d[54]=k,d[55]=j):j=d[55];var K;d[56]!==i||d[57]!==y||d[58]!==g||d[59]!==E||d[60]!==L||d[61]!==R||d[62]!==w||d[63]!==l||d[64]!==t||d[65]!==P||d[66]!==T||d[67]!==D||d[68]!==v||d[69]!==k?(K=[g,v,k,i,D,t,R,l,w,y,L,T,E,P],d[56]=i,d[57]=y,d[58]=g,d[59]=E,d[60]=L,d[61]=R,d[62]=w,d[63]=l,d[64]=t,d[65]=P,d[66]=T,d[67]=D,d[68]=v,d[69]=k,d[70]=K):K=d[70];var Q=o("Int64Hooks").useCallbackInt64(j,K),X,Y;return d[71]!==Q||d[72]!==z||d[73]!==b?(X=function(){return b?z:Q},Y=[b,z,Q],d[71]=Q,d[72]=z,d[73]=b,d[74]=X,d[75]=Y):(X=d[74],Y=d[75]),o("Int64Hooks").useMemoInt64(X,Y)}function h(e){return[e]}l.ForwardType=f,l.useMWV2ForwardMessage=g}),98);
__d("useMWV2MessageForwardAction",["I64","LSBitFlag","LSIntEnum","MWChatMessageId","MWV2LogMessageClick","MWV2MessageRowIsRowFocusedContext.react","gkx","promiseDone","qex","react","react-compiler-runtime","useMWChatForward","useMWV2ForwardMessage","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=c||(c=o("react")),m=d.useCallback,p=d.useContext;function _(t,n,a,i){var l=o("react-compiler-runtime").c(24),c=(e||(e=r("useReStore")))(),d=r("gkx")("20836"),m=!d&&t,_=!d&&r("qex")._("564")===!0,y=m?_?"cross_transport":"secure":_?"cross_transport":"open_",C;l[0]!==n.messageId||l[1]!==n.threadKey||l[2]!==n.timestampMs?(C=o("MWChatMessageId").makeSent((s||(s=o("I64"))).to_string(n.threadKey),n.messageId,s.to_string(n.timestampMs)),l[0]=n.messageId,l[1]=n.threadKey,l[2]=n.timestampMs,l[3]=C):C=l[3];var b=C,v=o("useMWV2ForwardMessage").useMWV2ForwardMessage(n,a,i==null?void 0:i.attachmentFbid),S=p(o("MWV2MessageRowIsRowFocusedContext.react").context),R=S.setFocused,L=S.setIsDialogOpened,E=n.stickerId,k=!t,I;l[4]!==n.displayedContentTypes||l[5]!==n.textHasLinks||l[6]!==E?(I=o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1),n.displayedContentTypes)&&!n.textHasLinks||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(16384),n.displayedContentTypes)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(2),n.displayedContentTypes)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(4),n.displayedContentTypes)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(512),n.displayedContentTypes)||o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),n.displayedContentTypes)||E!=null&&(s||(s=o("I64"))).equal(E,(s||(s=o("I64"))).of_string("369239263222822"))||E!=null&&(s||(s=o("I64"))).equal(E,(s||(s=o("I64"))).of_string("369239343222814"))||E!=null&&(s||(s=o("I64"))).equal(E,(s||(s=o("I64"))).of_string("369239383222810")),l[4]=n.displayedContentTypes,l[5]=n.textHasLinks,l[6]=E,l[7]=I):I=l[7];var T=I,D=k&&!T,x;l[8]!==R||l[9]!==L?(x=function(){L(h),R(g)},l[8]=R,l[9]=L,l[10]=x):x=l[10];var $=x,P;l[11]!==v?(P=function(t){return r("promiseDone")(v(t))},l[11]=v,l[12]=P):P=l[12];var N=P,M;l[13]!==y||l[14]!==b||l[15]!==D||l[16]!==$||l[17]!==N?(M={dropToggle:D,forwardDialogType:y,messageID:b,onClose:$,onSend:N},l[13]=y,l[14]=b,l[15]=D,l[16]=$,l[17]=N,l[18]=M):M=l[18];var w=r("useMWChatForward")(M),A;return l[19]!==c||l[20]!==w||l[21]!==n||l[22]!==L?(A=function(){o("MWV2LogMessageClick").log(c,n,44),w!=null&&(L(f),w.onClick())},l[19]=c,l[20]=w,l[21]=n,l[22]=L,l[23]=A):A=l[23],A}function f(){return!0}function g(){return!0}function h(){return!1}l.default=_}),98);/*FB_PKG_DELIM*/
__d("EBSMWorkerThreadAPI",["EBAPIQPLPoints","EBDeps","I64","LSIntEnum","MAWWaitForBackendSetup","MWEncryptedBackupsFirstRestoreUpsellTime","Promise","QPLFlow","WAResultOrError","WebSession","justknobx","qpl","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c=r("requireDeferred"))("EBAddDeviceWithKeys").__setRef("EBSMWorkerThreadAPI"),m=c("EBAddDeviceWithRecoveryCode").__setRef("EBSMWorkerThreadAPI"),p=c("EBAddVirtualDevice").__setRef("EBSMWorkerThreadAPI"),_=c("EBDeleteBackupsOnClient").__setRef("EBSMWorkerThreadAPI"),f=c("EBDeleteEncryptedBackup").__setRef("EBSMWorkerThreadAPI"),g=c("EBFetchBackupIds").__setRef("EBSMWorkerThreadAPI"),h=c("EBGenerateRecoveryCode").__setRef("EBSMWorkerThreadAPI"),y=c("EBGetEBState").__setRef("EBSMWorkerThreadAPI"),C=c("EBGetLSVirtualDevices").__setRef("EBSMWorkerThreadAPI"),b=c("EBInitializeBackup").__setRef("EBSMWorkerThreadAPI"),v=c("EBIsEbEnabled").__setRef("EBSMWorkerThreadAPI"),S=c("EBOptOut").__setRef("EBSMWorkerThreadAPI"),R=c("EBOtcAddDevice").__setRef("EBSMWorkerThreadAPI"),L=c("EBRepairEpochs").__setRef("EBSMWorkerThreadAPI"),E=c("EBRevokeVirtualDevice").__setRef("EBSMWorkerThreadAPI"),k=c("EBSyncEpochs").__setRef("EBSMWorkerThreadAPI"),I={addDeviceWithEBKeys:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.load().then(function(e){return e.addDeviceWithEBKeys.apply(e,t)})},addDeviceWithRecoveryCode:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];if(t.length===0||t[0]==null)return(u||(u=n("Promise"))).reject("Missing args");var i=o("QPLFlow").startQPLFlow(r("qpl")._(521473756,"2768"),{annotations:{bool:{isBackendSetupOnStart:o("EBDeps").getDeps().isBackendSetupSuccessful(),isEBAddDeviceWithKeys:!1,isInWorker:!0}},timeoutInMs:r("justknobx")._("2444")});return m.load().then(function(e){return e.addDeviceWithRecoveryCode(babelHelpers.extends({},t[0],{qplFlow:i}))})},addVirtualDevice:function(t){var e=t.actionType,a=t.recoveryCodeData,i=o("QPLFlow").startQPLFlow(r("qpl")._(521483240,"615"),{annotations:{int:{actionType:e}},timeoutInMs:r("justknobx")._("4211")});return i.addPoint("add_virtual_device_worker_start"),a==null?(i.endFail("add_virtual_device_fail_no_recovery_code_worker"),(u||(u=n("Promise"))).resolve(o("WAResultOrError").makeError("ADD_VIRTUAL_DEVICE_NULL_RECOVERY_CODE_DATA"))):p.load().then(function(t){return t.addVirtualDevice({actionType:e,qplFlow:i,recoveryCodeData:a})})},deleteBackupsOnClient:function(t){var e=t.reason;return _.load().then(function(t){return t.deleteBackupsOnClient({reason:e})})},deleteEncryptedBackup:function(t){var e=t.reason,n=o("QPLFlow").startQPLFlow(r("qpl")._(521484370,"2995"),{timeoutInMs:r("justknobx")._("4553")});return n.addPoint(o("EBAPIQPLPoints").EBDeleteEBQPLPoints.DELETE_EB_WORKER_START),f.load().then(function(t){return t.deleteEncryptedBackup({qplFlow:n,reason:e})})},ebOptOut:function(){var e=o("QPLFlow").startQPLFlow(r("qpl")._(521482558,"2558"),{annotations:{string:{ebSessionIdentifier:o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime(),fetchBackupIdsVersion:"msys",sessionTabId:o("WebSession").getId()}}});return e.addPoint(o("EBAPIQPLPoints").EBOptOutQPLPoints.OPT_OUT_BACKUP_WORKER_START),S.load().then(function(t){return t.ebOptOut({qplFlow:e})})},fetchBackupIds:function(t){var e=o("QPLFlow").startQPLFlow(r("qpl")._(521471024,"2275"),{annotations:{string:{ebSessionIdentifier:o("MWEncryptedBackupsFirstRestoreUpsellTime").getFirstRestoreUpsellTime(),fetchBackupIdsVersion:"msys",sessionTabId:o("WebSession").getId()}}});return e.addPoint("eb_fetch_backup_ids_worker_start"),g.load().then(function(n){return n.fetchBackupIds(t,e)})},generateRecoveryCode:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.load().then(function(e){return e.generateRecoveryCode.apply(e,t)})},getEBState:function(){return y.load().then(function(e){return e.GetEbState()})},getLSVirtualDevices:function(t){return C.load().then(function(e){return e.getLSVirtualDevices(t)})},initializeBackup:function(a){var t=a.recoveryCodeData,i=a.virtualDeviceType,l=o("QPLFlow").startQPLFlow(r("qpl")._(521478750,"2850"),{annotations:{int:{virtualDeviceType:(e||(e=o("I64"))).to_int32(i)}},timeoutInMs:r("justknobx")._("4211")});l.addPoint(o("EBAPIQPLPoints").EBBackupInitQPLPoints.INITIALIZE_BACKUP_WORKER_START);var c=e.equal(i,(s||(s=o("LSIntEnum"))).ofNumber(16));return t==null&&!c?(l.endFail("recoveryCodeData null for non-Automatic EB"),(u||(u=n("Promise"))).resolve(o("WAResultOrError").makeError("recoveryCodeData null for non-Automatic EB"))):b.load().then(function(e){return e.initializeBackup(l,i,t)})},isEbEnabled:function(){return v.load().then(function(e){return e.isEbEnabledEbSwitch()})},optOutOfBackup:function(){return(u||(u=n("Promise"))).resolve()},otcAddDevice:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=o("QPLFlow").startQPLFlow(r("qpl")._(521473756,"2768"),{annotations:{bool:{isBackendSetupOnStart:o("MAWWaitForBackendSetup").isBackendSetupSuccessful(),isEBAddDeviceWithKeys:!1,isInWorker:!0,isOTC:!0}},timeoutInMs:r("justknobx")._("2444")});return R.load().then(function(e){return e.otcAddDevice(babelHelpers.extends({},t[0],{qplFlow:a}))})},repairEpochs:function(){return L.load().then(function(e){return e.EBRepairEpochs()})},revokeVirtualDevice:function(t){var e=t.virtualDeviceId,n=o("QPLFlow").startQPLFlow(r("qpl")._(521473995,"3294"));return n.addPoint("revoke_virtual_device_worker_start"),E.load().then(function(t){return t.revokeVirtualDevice(e,n)})},syncEpochs:function(){return k.load().then(function(e){return e.EBSyncEpochs()})}},T=I;l.default=T}),98);
__d("EBWorkerODSEntityName.enum",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum")({MW_EBSM_HYDRATION:"mw_ebsm_hydration",MW_EBSM_IDB:"mw_eb_ebsm_idb",MW_EBSM_CORRUPTION:"mw_ebsm_corruption",MW_EBSM_RESTORE_PERSISTENCE_ERROR:"mw_ebsm_restore_persistence",MW_EBSM_IDB_TABLE_DELETION:"mw_ebsm_idb_table_deletion",MW_EB_AUTO_RESTORE_MAIN_THREAD:"mw_eb_auto_restore_main_thread",MW_EB_AUTO_RESTORE_WORKER:"mw_eb_auto_restore_worker",MW_EB_DEVICE_MIGRATION_WORKER:"mw_eb_device_migration_worker",MW_EB_OTC_MAIN_THREAD:"mw_eb_otc_main_thread",EB_WORKER_ADD_DEVICE_WITH_KEYS:"eb_worker_add_device_with_keys",EB_WORKER_ADD_DEVICE_WITH_RC:"eb_worker_add_device_with_rc",EB_WORKER_OPT_OUT:"eb_worker_opt_out"}),l=e;i.default=l}),66);
__d("EncryptedBackupsDYIFileUtils",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e="media",s="messages.zip";function u(){if(navigator.storage!=null&&navigator.storage.getDirectory!=null)return navigator.storage.getDirectory();throw r("FBLogger")("wmi_eb").mustfixThrow("Storage management API is not supported. Please try one of the supported browsers.")}async function c(){var t=await u();return t.getDirectoryHandle(e,{create:!0})}async function d(e,t,n){var o=await e.getFileHandle(t,{create:!0});try{var a=await o.createSyncAccessHandle();a.write(n),a.flush(),a.close()}catch(e){if(e instanceof Error){if(e instanceof TypeError)try{var i=await o.createWritable();await i.write(n),await i.close();return}catch(e){throw e instanceof Error?e instanceof TypeError?r("FBLogger")("wmi_eb").mustfixThrow("Write operation is not supported. Please try one of the supported browsers."):r("FBLogger")("wmi_eb").mustfixThrow("Failed to write using writable: %e",e.message):e}throw r("FBLogger")("wmi_eb").mustfixThrow("Failed to write using sync access handle: %s",e.message)}throw e}}async function m(e,t){var n=await e.getFileHandle(t);try{var o=await n.createSyncAccessHandle(),a=new ArrayBuffer(o.getSize());return o.read(a),o.close(),new Blob([a])}catch(e){if(e instanceof Error){if(e instanceof TypeError)return n.getFile();throw r("FBLogger")("wmi_eb").mustfixThrow("Failed to read file %s, %s",t,e.message)}throw e}}l.DyiMediaFolder=e,l.DyiArchiveFilename=s,l.getRootFolderHandle=u,l.getMediaFolderHandle=c,l.writeFile=d,l.readFile=m}),98);
__d("MAWThreadKeyUtils",["I64","vulture"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return(e||(e=o("I64"))).to_string(t)}function u(e){return e}function c(e){return r("vulture")("9DZDuAw4Bd5gY57CNHpZSR8vpLc="),e}function d(t){return(e||(e=o("I64"))).of_string(t)}function m(e){return e}l.stringThreadKeyFromThreadKey=s,l.toStringThreadKey=u,l.stringThreadKeyFromString=c,l.stringThreadKeyToI64=d,l.stringThreadKeyToString=m}),98);
__d("EncryptedBackupsDYIGenerateThreadMetadata",["CurrentUser","EncryptedBackupsDYISingleton","I64","IGDWebUtils","LSMessagingThreadTypeUtil","MAWThreadKeyUtils","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(){return o("IGDWebUtils").isOnInstagramWeb()?(u||(u=o("I64"))).of_string(r("CurrentUser").getEIMU()):(u||(u=o("I64"))).of_string(r("CurrentUser").getAccountID())}function d(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(o("MAWThreadKeyUtils").stringThreadKeyToI64(t)))}function m(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.contacts).getKeyRange(t))}function p(e,t){return o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(e.tables.contacts).filter(function(e){return t.has((u||(u=o("I64"))).to_string(e.id))}))}function _(e,t){var n;return(n=o("ReQL")).toArrayAsync(n.leftJoin(n.fromTableAscending(e.tables.participants,["contactId"]).getKeyRange(t),n.fromTableAscending(e.tables.contacts,["name"])))}function f(e){return o("LSMessagingThreadTypeUtil").isOneToOne(e)||o("LSMessagingThreadTypeUtil").isOpenOneToOne(e)}function g(e,t,n){if(n!=null&&n.trim()!=="")return n+"_"+t;switch(e.length){case 0:return"Thread_"+t;case 1:return e[0]+"_"+t;case 2:return e[0]+"and"+e[1]+"_"+t;case 3:return""+e[0]+e[1]+"and"+e[2]+"_"+t;case 4:return""+e[0]+e[1]+e[2]+"and1other_"+t;default:return""+e[0]+e[1]+e[2]+"and"+(e.length-3)+"others_"+t}}async function h(t,n,r,a,i,l){var s=[],c=[i],p=await d(r,t);if(p!=null)if(f(p.threadType)){var h=n.getThreadIdForThreadKey(t);if(h==null){n.getLogger().WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),t);return}var y=await m(r,(u||(u=o("I64"))).of_string(h));(y==null?void 0:y.id)!=null&&(y==null?void 0:y.name)!=null&&n.setContactNameForContactId((u||(u=o("I64"))).to_string(y.id),y.name);var C=(y==null?void 0:y.name)||"Unknown User";s.push(C),c.push(C),n.setThreadMetaDataByThreadKey(t,c,g(s,l,p.threadName))}else{var b=await _(r,p.threadKey);b.forEach(function(e){var t=e[0],r=e[1];if((t==null?void 0:t.contactId)!=null&&(r==null?void 0:r.name)!=null&&n.setContactNameForContactId((u||(u=o("I64"))).to_string(t.contactId),r.name),!(u||(u=o("I64"))).equal(t.contactId,a)){var i=(r==null?void 0:r.name)||"Unknown User";s.push(i),c.push(i)}}),n.setThreadMetaDataByThreadKey(t,c,g(s,l,p.threadName))}else n.setThreadMetaDataByThreadKey(t,c,g(s,l))}async function y(e){var t,n,r=o("EncryptedBackupsDYISingleton").getSingleton(),a=r.getLogger(),i=await r.getDB(),l=await m(i,c()),d=(t=l==null?void 0:l.id)!=null?t:(u||(u=o("I64"))).zero,p=(n=l==null?void 0:l.name)!=null?n:"Me";return r.setContactNameForContactId((u||(u=o("I64"))).to_string(d),p),e.reduce(async function(e,t,n){await e;var o=r.getThreadIdForThreadKey(t);return o==null&&a.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Cannot find thread id for thread key ",""])),t),h(t,r,i,d,p,n)},Promise.resolve())}l.getAllUnmappedContacts=p,l.EncryptedBackupsDYIGenerateThreadMetadata=y}),98);
/**
 * License: https://www.facebook.com/legal/license/MDzNl_j9yvg/
 */
__d("fflate-0.6.10",[],(function(t,n,r,o,a,i){"use strict";var e={},l={exports:e};function s(){var t,n="";try{t={}.Worker}catch(e){}e.default=t?function(e,r,o,a,i){var l=!1,s=new t(e+n,{eval:!0}).on("error",function(e){return i(e,null)}).on("message",function(e){return i(null,e)}).on("exit",function(e){e&&!l&&i(new Error("exited with code "+e),null)});return s.postMessage(o,a),s.terminate=function(){return l=!0,t.prototype.terminate.call(s)},s}:function(e,t,n,r,o){setImmediate(function(){return o(new Error("async operations unsupported - update to Node 12+ (or Node 10-11 with the --experimental-worker CLI flag)"),null)});var a=function(){};return{terminate:a,postMessage:a}}}var u=!1;function c(){return u||(u=!0,s()),l.exports}var d={},m={exports:d};function p(){var e=c(),t=Uint8Array,n=Uint16Array,r=Uint32Array,o=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),i=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(e,t){for(var o=new n(31),a=0;a<31;++a)o[a]=t+=1<<e[a-1];for(var i=new r(o[30]),a=1;a<30;++a)for(var l=o[a];l<o[a+1];++l)i[l]=l-o[a]<<5|a;return[o,i]},s=l(o,2),u=s[0],m=s[1];u[28]=258,m[258]=28;for(var p=l(a,0),_=p[0],f=p[1],g=new n(32768),h=0;h<32768;++h){var y=(h&43690)>>>1|(h&21845)<<1;y=(y&52428)>>>2|(y&13107)<<2,y=(y&61680)>>>4|(y&3855)<<4,g[h]=((y&65280)>>>8|(y&255)<<8)>>>1}for(var C=(function(e,t,r){for(var o=e.length,a=0,i=new n(t);a<o;++a)++i[e[a]-1];var l=new n(t);for(a=0;a<t;++a)l[a]=l[a-1]+i[a-1]<<1;var s;if(r){s=new n(1<<t);var u=15-t;for(a=0;a<o;++a)if(e[a])for(var c=a<<4|e[a],d=t-e[a],m=l[e[a]-1]++<<d,p=m|(1<<d)-1;m<=p;++m)s[g[m]>>>u]=c}else for(s=new n(o),a=0;a<o;++a)e[a]&&(s[a]=g[l[e[a]-1]++]>>>15-e[a]);return s}),b=new t(288),h=0;h<144;++h)b[h]=8;for(var h=144;h<256;++h)b[h]=9;for(var h=256;h<280;++h)b[h]=7;for(var h=280;h<288;++h)b[h]=8;for(var v=new t(32),h=0;h<32;++h)v[h]=5;var S=C(b,9,0),R=C(b,9,1),L=C(v,5,0),E=C(v,5,1),k=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},I=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},T=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},D=function(e){return(e/8|0)+(e&7&&1)},x=function(e,o,a){(o==null||o<0)&&(o=0),(a==null||a>e.length)&&(a=e.length);var i=new(e instanceof n?n:e instanceof r?r:t)(a-o);return i.set(e.subarray(o,a)),i},$=function(e,n,r){var l=e.length;if(!l||r&&!r.l&&l<5)return n||new t(0);var s=!n||r,c=!r||r.i;r||(r={}),n||(n=new t(l*3));var d=function(e){var r=n.length;if(e>r){var o=new t(Math.max(r*2,e));o.set(n),n=o}},m=r.f||0,p=r.p||0,f=r.b||0,g=r.l,h=r.d,y=r.m,b=r.n,v=l*8;do{if(!g){r.f=m=I(e,p,1);var S=I(e,p+1,3);if(p+=3,S)if(S==1)g=R,h=E,y=9,b=5;else if(S==2){var N=I(e,p,31)+257,M=I(e,p+10,15)+4,w=N+I(e,p+5,31)+1;p+=14;for(var A=new t(w),F=new t(19),O=0;O<M;++O)F[i[O]]=I(e,p+O*3,7);p+=M*3;for(var B=k(F),W=(1<<B)-1,q=C(F,B,1),O=0;O<w;){var U=q[I(e,p,W)];p+=U&15;var L=U>>>4;if(L<16)A[O++]=L;else{var V=0,H=0;for(L==16?(H=3+I(e,p,3),p+=2,V=A[O-1]):L==17?(H=3+I(e,p,7),p+=3):L==18&&(H=11+I(e,p,127),p+=7);H--;)A[O++]=V}}var G=A.subarray(0,N),z=A.subarray(N);y=k(G),b=k(z),g=C(G,y,1),h=C(z,b,1)}else throw"invalid block type";else{var L=D(p)+4,$=e[L-4]|e[L-3]<<8,P=L+$;if(P>l){if(c)throw"unexpected EOF";break}s&&d(f+$),n.set(e.subarray(L,P),f),r.b=f+=$,r.p=p=P*8;continue}if(p>v){if(c)throw"unexpected EOF";break}}s&&d(f+131072);for(var j=(1<<y)-1,K=(1<<b)-1,Q=p;;Q=p){var V=g[T(e,p)&j],X=V>>>4;if(p+=V&15,p>v){if(c)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if(X<256)n[f++]=X;else if(X==256){Q=p,g=null;break}else{var Y=X-254;if(X>264){var O=X-257,J=o[O];Y=I(e,p,(1<<J)-1)+u[O],p+=J}var Z=h[T(e,p)&K],ee=Z>>>4;if(!Z)throw"invalid distance";p+=Z&15;var z=_[ee];if(ee>3){var J=a[ee];z+=T(e,p)&(1<<J)-1,p+=J}if(p>v){if(c)throw"unexpected EOF";break}s&&d(f+131072);for(var te=f+Y;f<te;f+=4)n[f]=n[f-z],n[f+1]=n[f+1-z],n[f+2]=n[f+2-z],n[f+3]=n[f+3-z];f=te}}r.l=g,r.p=Q,r.b=f,g&&(m=1,r.m=y,r.d=h,r.n=b)}while(!m);return f==n.length?n:x(n,0,f)},P=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8},N=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>>8,e[r+2]|=n>>>16},M=function(e,r){for(var o=[],a=0;a<e.length;++a)e[a]&&o.push({s:a,f:e[a]});var i=o.length,l=o.slice();if(!i)return[q,0];if(i==1){var s=new t(o[0].s+1);return s[o[0].s]=1,[s,1]}o.sort(function(e,t){return e.f-t.f}),o.push({s:-1,f:25001});var u=o[0],c=o[1],d=0,m=1,p=2;for(o[0]={s:-1,f:u.f+c.f,l:u,r:c};m!=i-1;)u=o[o[d].f<o[p].f?d++:p++],c=o[d!=m&&o[d].f<o[p].f?d++:p++],o[m++]={s:-1,f:u.f+c.f,l:u,r:c};for(var _=l[0].s,a=1;a<i;++a)l[a].s>_&&(_=l[a].s);var f=new n(_+1),g=w(o[m-1],f,0);if(g>r){var a=0,h=0,y=g-r,C=1<<y;for(l.sort(function(e,t){return f[t.s]-f[e.s]||e.f-t.f});a<i;++a){var b=l[a].s;if(f[b]>r)h+=C-(1<<g-f[b]),f[b]=r;else break}for(h>>>=y;h>0;){var v=l[a].s;f[v]<r?h-=1<<r-f[v]++-1:++a}for(;a>=0&&h;--a){var S=l[a].s;f[S]==r&&(--f[S],++h)}g=r}return[new t(f),g]},w=function(e,t,n){return e.s==-1?Math.max(w(e.l,t,n+1),w(e.r,t,n+1)):t[e.s]=n},A=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new n(++t),o=0,a=e[0],i=1,l=function(e){r[o++]=e},s=1;s<=t;++s)if(e[s]==a&&s!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)l(32754);i>2&&(l(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(l(a),--i;i>6;i-=6)l(8304);i>2&&(l(i-3<<5|8208),i=0)}for(;i--;)l(a);i=1,a=e[s]}return[r.subarray(0,o),t]},F=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},O=function(e,t,n){var r=n.length,o=D(t+2);e[o]=r&255,e[o+1]=r>>>8,e[o+2]=e[o]^255,e[o+3]=e[o+1]^255;for(var a=0;a<r;++a)e[o+a+4]=n[a];return(o+4+r)*8},B=function(e,t,r,l,s,u,c,d,m,p,_){P(t,_++,r),++s[256];for(var f=M(s,15),g=f[0],h=f[1],y=M(u,15),R=y[0],E=y[1],k=A(g),I=k[0],T=k[1],D=A(R),x=D[0],$=D[1],w=new n(19),B=0;B<I.length;++B)w[I[B]&31]++;for(var B=0;B<x.length;++B)w[x[B]&31]++;for(var W=M(w,7),q=W[0],U=W[1],V=19;V>4&&!q[i[V-1]];--V);var H=p+5<<3,G=F(s,b)+F(u,v)+c,z=F(s,g)+F(u,R)+c+14+3*V+F(w,q)+(2*w[16]+3*w[17]+7*w[18]);if(H<=G&&H<=z)return O(t,_,e.subarray(m,m+p));var j,K,Q,X;if(P(t,_,1+(z<G)),_+=2,z<G){j=C(g,h,0),K=g,Q=C(R,E,0),X=R;var Y=C(q,U,0);P(t,_,T-257),P(t,_+5,$-1),P(t,_+10,V-4),_+=14;for(var B=0;B<V;++B)P(t,_+3*B,q[i[B]]);_+=3*V;for(var J=[I,x],Z=0;Z<2;++Z)for(var ee=J[Z],B=0;B<ee.length;++B){var te=ee[B]&31;P(t,_,Y[te]),_+=q[te],te>15&&(P(t,_,ee[B]>>>5&127),_+=ee[B]>>>12)}}else j=S,K=b,Q=L,X=v;for(var B=0;B<d;++B)if(l[B]>255){var te=l[B]>>>18&31;N(t,_,j[te+257]),_+=K[te+257],te>7&&(P(t,_,l[B]>>>23&31),_+=o[te]);var ne=l[B]&31;N(t,_,Q[ne]),_+=X[ne],ne>3&&(N(t,_,l[B]>>>5&8191),_+=a[ne])}else N(t,_,j[l[B]]),_+=K[l[B]];return N(t,_,j[256]),_+K[256]},W=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),q=new t(0),U=function(e,i,l,s,u,c){var d=e.length,p=new t(s+d+5*(1+Math.ceil(d/7e3))+u),_=p.subarray(s,p.length-u),g=0;if(!i||d<8)for(var h=0;h<=d;h+=65535){var y=h+65535;y<d?g=O(_,g,e.subarray(h,y)):(_[h]=c,g=O(_,g,e.subarray(h,d)))}else{for(var C=W[i-1],b=C>>>13,v=C&8191,S=(1<<l)-1,R=new n(32768),L=new n(S+1),E=Math.ceil(l/3),k=2*E,I=function(t){return(e[t]^e[t+1]<<E^e[t+2]<<k)&S},T=new r(25e3),$=new n(288),P=new n(32),N=0,M=0,h=0,w=0,A=0,F=0;h<d;++h){var U=I(h),V=h&32767,H=L[U];if(R[V]=H,L[U]=V,A<=h){var G=d-h;if((N>7e3||w>24576)&&G>423){g=B(e,_,0,T,$,P,M,w,F,h-F,g),w=N=M=0,F=h;for(var z=0;z<286;++z)$[z]=0;for(var z=0;z<30;++z)P[z]=0}var j=2,K=0,Q=v,X=V-H&32767;if(G>2&&U==I(h-X))for(var Y=Math.min(b,G)-1,J=Math.min(32767,h),Z=Math.min(258,G);X<=J&&--Q&&V!=H;){if(e[h+j]==e[h+j-X]){for(var ee=0;ee<Z&&e[h+ee]==e[h+ee-X];++ee);if(ee>j){if(j=ee,K=X,ee>Y)break;for(var te=Math.min(X,ee-2),ne=0,z=0;z<te;++z){var re=h-X+z+32768&32767,oe=R[re],ae=re-oe+32768&32767;ae>ne&&(ne=ae,H=re)}}}V=H,H=R[V],X+=V-H+32768&32767}if(K){T[w++]=268435456|m[j]<<18|f[K];var ie=m[j]&31,le=f[K]&31;M+=o[ie]+a[le],++$[257+ie],++P[le],A=h+j,++N}else T[w++]=e[h],++$[e[h]]}}g=B(e,_,c,T,$,P,M,w,F,h-F,g),!c&&g&7&&(g=O(_,g+1,q))}return x(p,0,s+D(g)+u)},V=(function(){for(var e=new Int32Array(256),t=0;t<256;++t){for(var n=t,r=9;--r;)n=(n&1&&-306674912)^n>>>1;e[t]=n}return e})(),H=function(){var e=-1;return{p:function(t){for(var n=e,r=0;r<t.length;++r)n=V[n&255^t[r]]^n>>>8;e=n},d:function(){return~e}}},G=function(){var e=1,t=0;return{p:function(n){for(var r=e,o=t,a=n.length,i=0;i!=a;){for(var l=Math.min(i+2655,a);i<l;++i)o+=r+=n[i];r=(r&65535)+15*(r>>16),o=(o&65535)+15*(o>>16)}e=r,t=o},d:function(){return e%=65521,t%=65521,(e&255)<<24|e>>>8<<16|(t&255)<<8|t>>>8}}},z=function(e,t,n,r,o){return U(e,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):12+t.mem,n,r,!o)},j=function(e,t){var n={};for(var r in e)n[r]=e[r];for(var r in t)n[r]=t[r];return n},K=function(e,t,n){for(var r=e(),o=e.toString(),a=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),i=0;i<r.length;++i){var l=r[i],s=a[i];if(typeof l=="function"){t+=";"+s+"=";var u=l.toString();if(l.prototype)if(u.indexOf("[native code]")!=-1){var c=u.indexOf(" ",8)+1;t+=u.slice(c,u.indexOf("(",c))}else{t+=u;for(var d in l.prototype)t+=";"+s+".prototype."+d+"="+l.prototype[d].toString()}else t+=u}else n[s]=l}return[t,n]},Q=[],X=function(e){var o=[];for(var a in e)(e[a]instanceof t||e[a]instanceof n||e[a]instanceof r)&&o.push((e[a]=new e[a].constructor(e[a])).buffer);return o},Y=function(t,n,r,o){var a;if(!Q[r]){for(var i="",l={},s=t.length-1,u=0;u<s;++u)a=K(t[u],i,l),i=a[0],l=a[1];Q[r]=K(t[s],i,l)}var c=j({},Q[r][1]);return e.default(Q[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+n.toString()+"}",r,c,X(c),o)},J=function(){return[t,n,r,o,a,i,u,_,R,E,g,C,k,I,T,D,x,$,Ie,oe,ae]},Z=function(){return[t,n,r,o,a,i,m,f,S,b,L,v,g,W,q,C,P,N,M,w,A,F,O,B,D,x,U,z,Re,oe]},ee=function(){return[pe,ge,me,H,V]},te=function(){return[_e,fe]},ne=function(){return[he,me,G]},re=function(){return[ye]},oe=function(e){return postMessage(e,[e.buffer])},ae=function(e){return e&&e.size&&new t(e.size)},ie=function(e,t,n,r,o,a){var i=Y(n,r,o,function(e,t){i.terminate(),a(e,t)});return i.postMessage([e,t],t.consume?[e.buffer]:[]),function(){i.terminate()}},le=function(e){return e.ondata=function(e,t){return postMessage([e,t],[e.buffer])},function(t){return e.push(t.data[0],t.data[1])}},se=function(e,t,n,r,o){var a,i=Y(e,r,o,function(e,n){e?(i.terminate(),t.ondata.call(t,e)):(n[1]&&i.terminate(),t.ondata.call(t,e,n[0],n[1]))});i.postMessage(n),t.push=function(e,n){if(a)throw"stream finished";if(!t.ondata)throw"no stream handler";i.postMessage([e,a=n],[e.buffer])},t.terminate=function(){i.terminate()}},ue=function(e,t){return e[t]|e[t+1]<<8},ce=function(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0},de=function(e,t){return ce(e,t)+ce(e,t+4)*4294967296},me=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},pe=function(e,t){var n=t.filename;if(e[0]=31,e[1]=139,e[2]=8,e[8]=t.level<2?4:t.level==9?2:0,e[9]=3,t.mtime!=0&&me(e,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),n){e[3]=8;for(var r=0;r<=n.length;++r)e[r+10]=n.charCodeAt(r)}},_e=function(e){if(e[0]!=31||e[1]!=139||e[2]!=8)throw"invalid gzip data";var t=e[3],n=10;t&4&&(n+=e[10]|(e[11]<<8)+2);for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[n++]);return n+(t&2)},fe=function(e){var t=e.length;return(e[t-4]|e[t-3]<<8|e[t-2]<<16|e[t-1]<<24)>>>0},ge=function(e){return 10+(e.filename&&e.filename.length+1||0)},he=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;e[0]=120,e[1]=r<<6|(r?32-2*r:1)},ye=function(e){if((e[0]&15)!=8||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(e[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Ce(e,t){return!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,e}var be=(function(){function e(e,t){!t&&typeof e=="function"&&(t=e,e={}),this.ondata=t,this.o=e||{}}return e.prototype.p=function(e,t){this.ondata(z(e,this.o,0,0,!t),t)},e.prototype.push=function(e,t){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";this.d=t,this.p(e,t||!1)},e})();d.Deflate=be;var ve=(function(){function e(e,t){se([Z,function(){return[le,be]}],this,Ce.call(this,e,t),function(e){var t=new be(e.data);onmessage=le(t)},6)}return e})();d.AsyncDeflate=ve;function Se(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z],function(e){return oe(Re(e.data[0],e.data[1]))},0,n)}d.deflate=Se;function Re(e,t){return z(e,t||{},0,0)}d.deflateSync=Re;var Le=(function(){function e(e){this.s={},this.p=new t(0),this.ondata=e}return e.prototype.e=function(e){if(this.d)throw"stream finished";if(!this.ondata)throw"no stream handler";var n=this.p.length,r=new t(n+e.length);r.set(this.p),r.set(e,n),this.p=r},e.prototype.c=function(e){this.d=this.s.i=e||!1;var t=this.s.b,n=$(this.p,this.o,this.s);this.ondata(x(n,t,this.s.b),this.d),this.o=x(n,this.s.b-32768),this.s.b=this.o.length,this.p=x(this.p,this.s.p/8|0),this.s.p&=7},e.prototype.push=function(e,t){this.e(e),this.c(t)},e})();d.Inflate=Le;var Ee=(function(){function e(e){this.ondata=e,se([J,function(){return[le,Le]}],this,0,function(){var e=new Le;onmessage=le(e)},7)}return e})();d.AsyncInflate=Ee;function ke(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J],function(e){return oe(Ie(e.data[0],ae(e.data[1])))},1,n)}d.inflate=ke;function Ie(e,t){return $(e,t)}d.inflateSync=Ie;var Te=(function(){function e(e,t){this.c=H(),this.l=0,this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e),this.l+=e.length;var n=z(e,this.o,this.v&&ge(this.o),t&&8,!t);this.v&&(pe(n,this.o),this.v=0),t&&(me(n,n.length-8,this.c.d()),me(n,n.length-4,this.l)),this.ondata(n,t)},e})();d.Gzip=Te,d.Compress=Te;var De=(function(){function e(e,t){se([Z,ee,function(){return[le,be,Te]}],this,Ce.call(this,e,t),function(e){var t=new Te(e.data);onmessage=le(t)},8)}return e})();d.AsyncGzip=De,d.AsyncCompress=De;function xe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ee,function(){return[$e]}],function(e){return oe($e(e.data[0],e.data[1]))},2,n)}d.gzip=xe,d.compress=xe;function $e(e,t){t||(t={});var n=H(),r=e.length;n.p(e);var o=z(e,t,ge(t),8),a=o.length;return pe(o,t),me(o,a-8,n.d()),me(o,a-4,r),o}d.gzipSync=$e,d.compressSync=$e;var Pe=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){var n=this.p.length>3?_e(this.p):4;if(n>=this.p.length&&!t)return;this.p=this.p.subarray(n),this.v=0}if(t){if(this.p.length<8)throw"invalid gzip stream";this.p=this.p.subarray(0,-8)}Le.prototype.c.call(this,t)},e})();d.Gunzip=Pe;var Ne=(function(){function e(e){this.ondata=e,se([J,te,function(){return[le,Le,Pe]}],this,0,function(){var e=new Pe;onmessage=le(e)},9)}return e})();d.AsyncGunzip=Ne;function Me(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,te,function(){return[we]}],function(e){return oe(we(e.data[0]))},3,n)}d.gunzip=Me;function we(e,n){return $(e.subarray(_e(e),-8),n||new t(fe(e)))}d.gunzipSync=we;var Ae=(function(){function e(e,t){this.c=G(),this.v=1,be.call(this,e,t)}return e.prototype.push=function(e,t){be.prototype.push.call(this,e,t)},e.prototype.p=function(e,t){this.c.p(e);var n=z(e,this.o,this.v&&2,t&&4,!t);this.v&&(he(n,this.o),this.v=0),t&&me(n,n.length-4,this.c.d()),this.ondata(n,t)},e})();d.Zlib=Ae;var Fe=(function(){function e(e,t){se([Z,ne,function(){return[le,be,Ae]}],this,Ce.call(this,e,t),function(e){var t=new Ae(e.data);onmessage=le(t)},10)}return e})();d.AsyncZlib=Fe;function Oe(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[Z,ne,function(){return[Be]}],function(e){return oe(Be(e.data[0],e.data[1]))},4,n)}d.zlib=Oe;function Be(e,t){t||(t={});var n=G();n.p(e);var r=z(e,t,2,4);return he(r,t),me(r,r.length-4,n.d()),r}d.zlibSync=Be;var We=(function(){function e(e){this.v=1,Le.call(this,e)}return e.prototype.push=function(e,t){if(Le.prototype.e.call(this,e),this.v){if(this.p.length<2&&!t)return;this.p=this.p.subarray(2),this.v=0}if(t){if(this.p.length<4)throw"invalid zlib stream";this.p=this.p.subarray(0,-4)}Le.prototype.c.call(this,t)},e})();d.Unzlib=We;var qe=(function(){function e(e){this.ondata=e,se([J,re,function(){return[le,Le,We]}],this,0,function(){var e=new We;onmessage=le(e)},11)}return e})();d.AsyncUnzlib=qe;function Ue(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return ie(e,t,[J,re,function(){return[Ve]}],function(e){return oe(Ve(e.data[0],ae(e.data[1])))},5,n)}d.unzlib=Ue;function Ve(e,t){return $((ye(e),e.subarray(2,-4)),t)}d.unzlibSync=Ve;var He=(function(){function e(e){this.G=Pe,this.I=Le,this.Z=We,this.ondata=e}return e.prototype.push=function(e,n){if(!this.ondata)throw"no stream handler";if(this.s)this.s.push(e,n);else{if(this.p&&this.p.length){var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length)}else this.p=e;if(this.p.length>2){var o=this,a=function(){o.ondata.apply(o,arguments)};this.s=this.p[0]==31&&this.p[1]==139&&this.p[2]==8?new this.G(a):(this.p[0]&15)!=8||this.p[0]>>4>7||(this.p[0]<<8|this.p[1])%31?new this.I(a):new this.Z(a),this.s.push(this.p,n),this.p=null}}},e})();d.Decompress=He;var Ge=(function(){function e(e){this.G=Ne,this.I=Ee,this.Z=qe,this.ondata=e}return e.prototype.push=function(e,t){He.prototype.push.call(this,e,t)},e})();d.AsyncDecompress=Ge;function ze(e,t,n){if(n||(n=t,t={}),typeof n!="function")throw"no callback";return e[0]==31&&e[1]==139&&e[2]==8?Me(e,t,n):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?ke(e,t,n):Ue(e,t,n)}d.decompress=ze;function je(e,t){return e[0]==31&&e[1]==139&&e[2]==8?we(e,t):(e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31?Ie(e,t):Ve(e,t)}d.decompressSync=je;var Ke=function(e,n,r,o){for(var a in e){var i=e[a],l=n+a;i instanceof t?r[l]=[i,o]:Array.isArray(i)?r[l]=[i[0],j(o,i[1])]:Ke(i,l+"/",r,o)}},Qe=typeof TextEncoder!="undefined"&&new TextEncoder,Xe=typeof TextDecoder!="undefined"&&new TextDecoder,Ye=0;try{Xe.decode(q,{stream:!0}),Ye=1}catch(e){}var Je=function(e){for(var t="",n=0;;){var r=e[n++],o=(r>127)+(r>223)+(r>239);if(n+o>e.length)return[t,x(e,n-1)];o?o==3?(r=((r&15)<<18|(e[n++]&63)<<12|(e[n++]&63)<<6|e[n++]&63)-65536,t+=String.fromCharCode(55296|r>>10,56320|r&1023)):o&1?t+=String.fromCharCode((r&31)<<6|e[n++]&63):t+=String.fromCharCode((r&15)<<12|(e[n++]&63)<<6|e[n++]&63):t+=String.fromCharCode(r)}},Ze=(function(){function e(e){this.ondata=e,Ye?this.t=new TextDecoder:this.p=q}return e.prototype.push=function(e,n){if(!this.ondata)throw"no callback";if(n=!!n,this.t){if(this.ondata(this.t.decode(e,{stream:!0}),n),n){if(this.t.decode().length)throw"invalid utf-8 data";this.t=null}return}if(!this.p)throw"stream finished";var r=new t(this.p.length+e.length);r.set(this.p),r.set(e,this.p.length);var o=Je(r),a=o[0],i=o[1];if(n){if(i.length)throw"invalid utf-8 data";this.p=null}else this.p=i;this.ondata(a,n)},e})();d.DecodeUTF8=Ze;var et=(function(){function e(e){this.ondata=e}return e.prototype.push=function(e,t){if(!this.ondata)throw"no callback";if(this.d)throw"stream finished";this.ondata(tt(e),this.d=t||!1)},e})();d.EncodeUTF8=et;function tt(e,n){if(n){for(var r=new t(e.length),o=0;o<e.length;++o)r[o]=e.charCodeAt(o);return r}if(Qe)return Qe.encode(e);for(var a=e.length,i=new t(e.length+(e.length>>1)),l=0,s=function(e){i[l++]=e},o=0;o<a;++o){if(l+5>i.length){var u=new t(l+8+(a-o<<1));u.set(i),i=u}var c=e.charCodeAt(o);c<128||n?s(c):c<2048?(s(192|c>>6),s(128|c&63)):c>55295&&c<57344?(c=65536+(c&1047552)|e.charCodeAt(++o)&1023,s(240|c>>18),s(128|c>>12&63),s(128|c>>6&63),s(128|c&63)):(s(224|c>>12),s(128|c>>6&63),s(128|c&63))}return x(i,0,l)}d.strToU8=tt;function nt(e,t){if(t){for(var n="",r=0;r<e.length;r+=16384)n+=String.fromCharCode.apply(null,e.subarray(r,r+16384));return n}else{if(Xe)return Xe.decode(e);var o=Je(e),a=o[0],i=o[1];if(i.length)throw"invalid utf-8 data";return a}}d.strFromU8=nt;var rt=function(e){return e==1?3:e<6?2:e==9?1:0},ot=function(e,t){return t+30+ue(e,t+26)+ue(e,t+28)},at=function(e,t,n){var r=ue(e,t+28),o=nt(e.subarray(t+46,t+46+r),!(ue(e,t+8)&2048)),a=t+46+r,i=ce(e,t+20),l=n&&i==4294967295?it(e,a):[i,ce(e,t+24),ce(e,t+42)],s=l[0],u=l[1],c=l[2];return[ue(e,t+10),s,u,o,a+ue(e,t+30)+ue(e,t+32),c]},it=function(e,t){for(;ue(e,t)!=1;t+=4+ue(e,t+2));return[de(e,t+12),de(e,t+4),de(e,t+20)]},lt=function(e){var t=0;if(e)for(var n in e){var r=e[n].length;if(r>65535)throw"extra field too long";t+=r+4}return t},st=function(e,t,n,r,o,a,i,l){var s=r.length,u=n.extra,c=l&&l.length,d=lt(u);me(e,t,i!=null?33639248:67324752),t+=4,i!=null&&(e[t++]=20,e[t++]=n.os),e[t]=20,t+=2,e[t++]=n.flag<<1|(a==null&&8),e[t++]=o&&8,e[t++]=n.compression&255,e[t++]=n.compression>>8;var m=new Date(n.mtime==null?Date.now():n.mtime),p=m.getFullYear()-1980;if(p<0||p>119)throw"date not in range 1980-2099";if(me(e,t,p<<25|m.getMonth()+1<<21|m.getDate()<<16|m.getHours()<<11|m.getMinutes()<<5|m.getSeconds()>>>1),t+=4,a!=null&&(me(e,t,n.crc),me(e,t+4,a),me(e,t+8,n.size)),me(e,t+12,s),me(e,t+14,d),t+=16,i!=null&&(me(e,t,c),me(e,t+6,n.attrs),me(e,t+10,i),t+=14),e.set(r,t),t+=s,d)for(var _ in u){var f=u[_],g=f.length;me(e,t,+_),me(e,t+2,g),e.set(f,t+4),t+=4+g}return c&&(e.set(l,t),t+=c),t},ut=function(e,t,n,r,o){me(e,t,101010256),me(e,t+8,n),me(e,t+10,n),me(e,t+12,r),me(e,t+16,o)},ct=(function(){function e(e){this.filename=e,this.c=H(),this.size=0,this.compression=0}return e.prototype.process=function(e,t){this.ondata(null,e,t)},e.prototype.push=function(e,t){if(!this.ondata)throw"no callback - add to ZIP archive before pushing";this.c.p(e),this.size+=e.length,t&&(this.crc=this.c.d()),this.process(e,t||!1)},e})();d.ZipPassThrough=ct;var dt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new be(t,function(e,t){n.ondata(null,e,t)}),this.compression=8,this.flag=rt(t.level)}return e.prototype.process=function(e,t){try{this.d.push(e,t)}catch(e){this.ondata(e,null,t)}},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.ZipDeflate=dt;var mt=(function(){function e(e,t){var n=this;t||(t={}),ct.call(this,e),this.d=new ve(t,function(e,t,r){n.ondata(e,t,r)}),this.compression=8,this.flag=rt(t.level),this.terminate=this.d.terminate}return e.prototype.process=function(e,t){this.d.push(e,t)},e.prototype.push=function(e,t){ct.prototype.push.call(this,e,t)},e})();d.AsyncZipDeflate=mt;var pt=(function(){function e(e){this.ondata=e,this.u=[],this.d=1}return e.prototype.add=function(e){var n=this;if(this.d&2)throw"stream finished";var r=tt(e.filename),o=r.length,a=e.comment,i=a&&tt(a),l=o!=e.filename.length||i&&a.length!=i.length,s=o+lt(e.extra)+30;if(o>65535)throw"filename too long";var u=new t(s);st(u,0,e,r,l);var c=[u],d=function(){for(var e=0,t=c;e<t.length;e++){var r=t[e];n.ondata(null,r,!1)}c=[]},m=this.d;this.d=0;var p=this.u.length,_=j(e,{f:r,u:l,o:i,t:function(){e.terminate&&e.terminate()},r:function(){if(d(),m){var e=n.u[p+1];e?e.r():n.d=1}m=1}}),f=0;e.ondata=function(r,o,a){if(r)n.ondata(r,o,a),n.terminate();else if(f+=o.length,c.push(o),a){var i=new t(16);me(i,0,134695760),me(i,4,e.crc),me(i,8,f),me(i,12,e.size),c.push(i),_.c=f,_.b=s+f+16,_.crc=e.crc,_.size=e.size,m&&_.r(),m=1}else m&&d()},this.u.push(_)},e.prototype.end=function(){var e=this;if(this.d&2)throw this.d&1?"stream finishing":"stream finished";this.d?this.e():this.u.push({r:function(){e.d&1&&(e.u.splice(-1,1),e.e())},t:function(){}}),this.d=3},e.prototype.e=function(){for(var e=0,n=0,r=0,o=0,a=this.u;o<a.length;o++){var i=a[o];r+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0)}for(var l=new t(r+22),s=0,u=this.u;s<u.length;s++){var i=u[s];st(l,e,i,i.f,i.u,i.c,n,i.o),e+=46+i.f.length+lt(i.extra)+(i.o?i.o.length:0),n+=i.b}ut(l,e,this.u.length,r,n),this.ondata(null,l,!0),this.d=2},e.prototype.terminate=function(){for(var e=0,t=this.u;e<t.length;e++){var n=t[e];n.t()}this.d=2},e})();d.Zip=pt;function _t(e,n,r){if(r||(r=n,n={}),typeof r!="function")throw"no callback";var o={};Ke(e,"",o,n);var a=Object.keys(o),i=a.length,l=0,s=0,u=i,c=new Array(i),d=[],m=function(){for(var e=0;e<d.length;++e)d[e]()},p=function(){var e=new t(s+22),n=l,o=s-l;s=0;for(var a=0;a<u;++a){var i=c[a];try{var d=i.c.length;st(e,s,i,i.f,i.u,d);var m=30+i.f.length+lt(i.extra),p=s+m;e.set(i.c,p),st(e,l,i,i.f,i.u,d,s,i.m),l+=16+m+(i.m?i.m.length:0),s=p+d}catch(e){return r(e,null)}}ut(e,l,c.length,o,n),r(null,e)};i||p();for(var _=function(e){var t=a[e],n=o[t],u=n[0],_=n[1],f=H(),g=u.length;f.p(u);var h=tt(t),y=h.length,C=_.comment,b=C&&tt(C),v=b&&b.length,S=lt(_.extra),R=_.level==0?0:8,L=function(n,o){if(n)m(),r(n,null);else{var a=o.length;c[e]=j(_,{size:g,crc:f.d(),c:o,f:h,m:b,u:y!=t.length||b&&C.length!=v,compression:R}),l+=30+y+S+a,s+=76+2*(y+S)+(v||0)+a,--i||p()}};if(y>65535&&L("filename too long",null),!R)L(null,u);else if(g<16e4)try{L(null,Re(u,_))}catch(e){L(e,null)}else d.push(Se(u,_,L))},f=0;f<u;++f)_(f);return m}d.zip=_t;function ft(e,n){n||(n={});var r={},o=[];Ke(e,"",r,n);var a=0,i=0;for(var l in r){var s=r[l],u=s[0],c=s[1],d=c.level==0?0:8,m=tt(l),p=m.length,_=c.comment,f=_&&tt(_),g=f&&f.length,h=lt(c.extra);if(p>65535)throw"filename too long";var y=d?Re(u,c):u,C=y.length,b=H();b.p(u),o.push(j(c,{size:u.length,crc:b.d(),c:y,f:m,m:f,u:p!=l.length||f&&_.length!=g,o:a,compression:d})),a+=30+p+h+C,i+=76+2*(p+h)+(g||0)+C}for(var v=new t(i+22),S=a,R=i-a,L=0;L<o.length;++L){var m=o[L];st(v,m.o,m,m.f,m.u,m.c.length);var E=30+m.f.length+lt(m.extra);v.set(m.c,m.o+E),st(v,a,m,m.f,m.u,m.c.length,m.o,m.m),a+=16+E+(m.m?m.m.length:0)}return ut(v,a,o.length,R,S),v}d.zipSync=ft;var gt=(function(){function e(){}return e.prototype.push=function(e,t){this.ondata(null,e,t)},e.compression=0,e})();d.UnzipPassThrough=gt;var ht=(function(){function e(){var e=this;this.i=new Le(function(t,n){e.ondata(null,t,n)})}return e.prototype.push=function(e,t){try{this.i.push(e,t)}catch(n){this.ondata(n,e,t)}},e.compression=8,e})();d.UnzipInflate=ht;var yt=(function(){function e(e,t){var n=this;t<32e4?this.i=new Le(function(e,t){n.ondata(null,e,t)}):(this.i=new Ee(function(e,t,r){n.ondata(e,t,r)}),this.terminate=this.i.terminate)}return e.prototype.push=function(e,t){this.i.terminate&&(e=x(e,0)),this.i.push(e,t)},e.compression=8,e})();d.AsyncUnzipInflate=yt;var Ct=(function(){function e(e){this.onfile=e,this.k=[],this.o={0:gt},this.p=q}return e.prototype.push=function(e,n){var r=this;if(!this.onfile)throw"no callback";if(!this.p)throw"stream finished";if(this.c>0){var o=Math.min(this.c,e.length),a=e.subarray(0,o);if(this.c-=o,this.d?this.d.push(a,!this.c):this.k[0].push(a),e=e.subarray(o),e.length)return this.push(e,n)}else{var i=0,l=0,s=void 0,u=void 0;this.p.length?e.length?(u=new t(this.p.length+e.length),u.set(this.p),u.set(e,this.p.length)):u=this.p:u=e;for(var c=u.length,d=this.c,m=d&&this.d,p=function(){var e,t=ce(u,l);if(t==67324752){i=1,s=l,_.d=null,_.c=0;var n=ue(u,l+6),o=ue(u,l+8),a=n&2048,m=n&8,p=ue(u,l+26),f=ue(u,l+28);if(c>l+30+p+f){var g=[];_.k.unshift(g),i=2;var h=ce(u,l+18),y=ce(u,l+22),C=nt(u.subarray(l+30,l+=30+p),!a);h==4294967295?(e=m?[-2]:it(u,l),h=e[0],y=e[1]):m&&(h=-1),l+=f,_.c=h;var b,v={name:C,compression:o,start:function(){if(!v.ondata)throw"no callback";if(!h)v.ondata(null,q,!0);else{var e=r.o[o];if(!e)throw"unknown compression type "+o;b=h<0?new e(C):new e(C,h,y),b.ondata=function(e,t,n){v.ondata(e,t,n)};for(var t=0,n=g;t<n.length;t++){var a=n[t];b.push(a,!1)}r.k[0]==g&&r.c?r.d=b:b.push(q,!0)}},terminate:function(){b&&b.terminate&&b.terminate()}};h>=0&&(v.size=h,v.originalSize=y),_.onfile(v)}return"break"}else if(d){if(t==134695760)return s=l+=12+(d==-2&&8),i=3,_.c=0,"break";if(t==33639248)return s=l-=4,i=3,_.c=0,"break"}},_=this;l<c-4;++l){var f=p();if(f==="break")break}if(this.p=q,d<0){var g=i?u.subarray(0,s-12-(d==-2&&8)-(ce(u,s-16)==134695760&&4)):u.subarray(0,l);m?m.push(g,!!i):this.k[+(i==2)].push(g)}if(i&2)return this.push(u.subarray(l),n);this.p=u.subarray(l)}if(n){if(this.c)throw"invalid zip file";this.p=null}},e.prototype.register=function(e){this.o[e.compression]=e},e})();d.Unzip=Ct;function bt(e,n){if(typeof n!="function")throw"no callback";for(var r=[],o=function(){for(var e=0;e<r.length;++e)r[e]()},a={},i=e.length-22;ce(e,i)!=101010256;--i)if(!i||e.length-i>65558){n("invalid zip file",null);return}var l=ue(e,i+8);l||n(null,{});var s=l,u=ce(e,i+16),c=u==4294967295;if(c){if(i=ce(e,i-12),ce(e,i)!=101075792){n("invalid zip file",null);return}s=l=ce(e,i+32),u=ce(e,i+48)}for(var d=function(i){var s=at(e,u,c),d=s[0],m=s[1],p=s[2],_=s[3],f=s[4],g=s[5],h=ot(e,g);u=f;var y=function(e,t){e?(o(),n(e,null)):(a[_]=t,--l||n(null,a))};if(!d)y(null,x(e,h,h+m));else if(d==8){var C=e.subarray(h,h+m);if(m<32e4)try{y(null,Ie(C,new t(p)))}catch(e){y(e,null)}else r.push(ke(C,{size:p},y))}else y("unknown compression type "+d,null)},m=0;m<s;++m)d(m);return o}d.unzip=bt;function vt(e){for(var n={},r=e.length-22;ce(e,r)!=101010256;--r)if(!r||e.length-r>65558)throw"invalid zip file";var o=ue(e,r+8);if(!o)return{};var a=ce(e,r+16),i=a==4294967295;if(i){if(r=ce(e,r-12),ce(e,r)!=101075792)throw"invalid zip file";o=ce(e,r+32),a=ce(e,r+48)}for(var l=0;l<o;++l){var s=at(e,a,i),u=s[0],c=s[1],d=s[2],m=s[3],p=s[4],_=s[5],f=ot(e,_);if(a=p,!u)n[m]=x(e,f,f+c);else if(u==8)n[m]=Ie(e.subarray(f,f+c),new t(d));else throw"unknown compression type "+u}return n}d.unzipSync=vt}var _=!1;function f(){return _||(_=!0,p()),m.exports}function g(e){switch(e){case void 0:return f()}}a.exports=g}),null);
__d("fflate",["fflate-0.6.10"],(function(t,n,r,o,a,i){a.exports=n("fflate-0.6.10")()}),null);
__d("EncryptedBackupsDYIZipUtils",["EncryptedBackupsDYIFileUtils","fflate"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m;async function p(t,n,r,a,i,l){var p=await o("EncryptedBackupsDYIFileUtils").getRootFolderHandle(),f=await p.getFileHandle("messages.zip",{create:!0});a("stream_file_start");var g=await f.createWritable({keepExisting:!1,mode:"exclusive"}),h=new(o("fflate")).Zip,y=0;h.ondata=function(t,n,o){if(t){r.ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Generic stream error"]))),a("stream_file_error"),l(t);return}y++,y%1e3===0&&r.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Writing chunk #",""])),y),g.write(n).catch(function(e){r.ERROR(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Error during data event"]))),a("stream_file_error"),l(e)}),o&&(r.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Finished ZIP file generation. Saving the results"]))),a("stream_file_end"),a("write_file_start"),g.close().then(function(){a("write_file_end"),r.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Closed the writing stream"]))),i()}).catch(function(e){r.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Error during end event"]))),a("write_file_error"),l(e)}))};for(var C of t){var b=C.threadName+".json",v=new(o("fflate")).ZipDeflate(b,{level:9}),S=new TextEncoder().encode(JSON.stringify(C,null,2));h.add(v),v.push(S,!0)}for(var R of n)await _(h,R);h.end()}async function _(e,t){var n=t.split("/").pop(),r=await o("EncryptedBackupsDYIFileUtils").getMediaFolderHandle(),a=await o("EncryptedBackupsDYIFileUtils").readFile(r,n!=null?n:t),i=await a.arrayBuffer(),l=new Uint8Array(i),s=new(o("fflate")).ZipPassThrough(t);e.add(s),s.push(l,!0)}l.generateZipFile=p}),98);
__d("EncryptedBackupsDYISingleton",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYIGenerateThreadMetadata","EncryptedBackupsDYISingletonFactory","EncryptedBackupsDYITypes","EncryptedBackupsDYIZipUtils","FBLogger","I64","LSIntEnum","MAWBridge","MAWQplProxy","WAHashUtils"],(function(t,n,r,o,a,i,l){"use strict";var e=["senderId"],s,u,c,d,m,p,_,f,g,h,y,C,b,v=null;function S(){try{return WorkerGlobalScope!==void 0&&self instanceof WorkerGlobalScope}catch(e){return!1}}function R(e,t,n){if(v==null)switch(e){case o("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Armadillo:if(S())throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Armadillo can only be initialised in the main thread");v=o("EncryptedBackupsDYISingletonFactory").getMAWEncryptedBackupsDYISingleton(t,n);break;case o("EncryptedBackupsDYITypes").EncryptedBackupsDYIConfig.Instamadillo:if(!S())throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton for Instamadillo can only be initialised in the worker");v=o("EncryptedBackupsDYISingletonFactory").getIGDEncryptedBackupsDYISingleton(t,n);break}}function L(){if(v==null)throw r("FBLogger")("wmi_eb").mustfixThrow("EncryptedBackupsDYISingleton is not initialised. Please call EncryptedBackupsDYISingleton.initSingleton() first.");return v}var E=(function(){function t(e,t,n,r){this.$5=new Map,this.$6=new Set,this.$7=new Set,this.$8=new Map,this.$9=new Map,this.$10=new Map,this.$11=new Map,this.$12=new Map,this.$1=e,this.$2=t,this.$3=n,this.$4=r}var n=t.prototype;return n.getDB=function(){return this.$1()},n.getLogger=function(){return this.$4},n.getAllMediaUrls=function(){return Array.from(this.$5.values())},n.$13=function(t){return this.$5.get(t)},n.setMediaUrlByPlainTextHash=function(t,n){this.$5.has(t)||this.$5.set(t,n)},n.addThreadKeyToThreadsRestoreInProgress=function(t){this.$6.add(t)},n.isThreadRestoreInProgressForThreadKey=function(t){return this.$6.has(t)},n.deleteThreadKeyFromThreadsRestoreInProgress=function(t){this.$6.delete(t),this.$4.LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Finished handling message range queries for thread with thread key ",". "," threads left"])),t,this.$6.size),this.$14()&&(this.$4.LOG(u||(u=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),this.$15())},n.isThreadsRestoreComplete=function(){return this.$6.size===0},n.addPlaintextHashToAttachmentDownloadsInProgress=function(t){this.$7.add(t),this.$4.LOG(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Started processing attachment with plaintext hash ","."])),o("WAHashUtils").sanitisePlaintextHash(t))},n.deletePlaintextHashFromAttachmentDownloadsInProgress=function(t){this.$7.delete(t),this.$4.LOG(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Finished processing attachment with plaintext hash ",". "," attachments left"])),o("WAHashUtils").sanitisePlaintextHash(t),this.$7.size),this.$7.size<30&&this.$4.LOG(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Remaining attachments: ",""])),Array.from(this.$7).map(o("WAHashUtils").sanitisePlaintextHash).join(", ")),this.$14()&&(this.$4.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["DYI flow complete - generating output"]))),this.$15())},n.isAttachmentDownloadInProgressForPlaintextHash=function(t){return this.$7.has(t)},n.isAttachmentDownloadCompleteForPlaintextHash=function(t){return!!this.$5.get(t)},n.isAttachmentDownloadComplete=function(){return this.$7.size===0},n.setMessagesByThreadKey=function(t,n,r){var e=this.getMessagesByThreadKey(t);e.set(n,r)},n.getMessagesByThreadKey=function(t){return this.$16(t)||this.$8.set(t,new Map),this.$8.get(t)},n.$16=function(t){return this.$8.has(t)},n.hasMessage=function(t,n){var e=this.$8.get(t);return e==null?!1:e.has(n)},n.getThreadIdForThreadKey=function(t){return this.$10.get(t)},n.getThreadKeyForThreadId=function(t){return this.$11.get(t)},n.setThreadMapping=function(t,n){this.$10.set(t,n),this.$11.set(n,t)},n.setThreadMetaDataByThreadKey=function(t,n,r){this.$9.set(t,{participants:n,threadName:r})},n.getThreadMetadataMap=function(){return this.$9},n.setContactNameForContactId=function(t,n){this.$12.set(t,n)},n.getContactNameForContactId=function(t){return this.$12.get(t)},n.getContactNameMap=function(){return this.$12},n.getOutput=function(){var t=this;return Array.from(this.getThreadMetadataMap(),function(n){var r=n[0],o=n[1],a=t.$16(r),i=a?Array.from(t.getMessagesByThreadKey(r),function(e){var n=e[0],r=e[1];return babelHelpers.extends({},r,{media:Array.from(r.media,function(e){var n=t.$13(e);return{uri:n!=null?"./"+n:"Failed to download media"}})})}):[];i=i.map(function(n){var r=n.senderId,o=babelHelpers.objectWithoutPropertiesLoose(n,e);if(r!=null&&o.senderName==="Unknown User"){var a=t.getContactNameForContactId(r);if(a!=null)return babelHelpers.extends({},o,{senderName:a})}return n});var l=i.sort(function(e,t){return typeof e.timestamp=="number"&&typeof t.timestamp=="number"?e.timestamp-t.timestamp:0});return babelHelpers.extends({},o,{messages:l})})},n.$14=function(){return this.isAttachmentDownloadComplete()&&this.isThreadsRestoreComplete()},n.$17=function(t){switch(t){case 0:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.InProgress;case 1:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Completed;case 2:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.Failed;case-1:default:return o("EncryptedBackupsDYITypes").EncryptedBackupsDYIState.NotStarted}},n.updateDYIStatus=async function(t){var e,n=await this.getDB();await n.runInTransaction(async function(e){await e.encrypted_backups_dyi_backup_restore_status.put({currentStatus:(C||(C=o("LSIntEnum"))).ofNumber(t),pk:(b||(b=o("I64"))).zero})},"readwrite",void 0,void 0,i.id+":521"),o("MAWBridge").getBridge().fireAndForget("event","updateDYIStatus",{qplEvent:this.$2,qplInstanceKeyE2E:(e=this.$3)!=null?e:void 0,status:this.$17(t)})},n.$18=async function(){var e=this,t=new Set;this.getContactNameMap().forEach(function(e,n){e==="Unknown User"&&t.add(n)});var n=await this.getDB(),r=await o("EncryptedBackupsDYIGenerateThreadMetadata").getAllUnmappedContacts(n,t);r.forEach(function(t){var n=(b||(b=o("I64"))).to_string(t.id);e.setContactNameForContactId(n,t.name)}),this.$4.LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Fetched remaining contact names, total of "," contacts"])),this.getContactNameMap().size.toString())},n.$15=async function(){var e=this;this.logDYIQPLPoint("complete_dyi_flow_start"),await this.$18(),this.$4.LOG(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Generating output"])));var t=this.getOutput(),n=Array.from(this.$5.values());this.$4.LOG(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Generating zip file"]))),await o("EncryptedBackupsDYIZipUtils").generateZipFile(t,n,this.$4,function(t,n){e.logDYIQPLPoint(t,n)},async function(){e.logDYIQPLPoint("complete_dyi_flow_end"),await e.updateDYIStatus(1),e.clear()},async function(t){e.$4.ERROR(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Failed to generate zip file: ",""])),t),e.logDYIQPLPoint("complete_dyi_flow_error"),await e.updateDYIStatus(2),e.clear()})},n.exitDYIEarly=async function(t,n){n!=null&&this.$4.LOG(y||(y=babelHelpers.taggedTemplateLiteralLoose(["DYI Exiting Early - Found "," instamadillo threads"])),n),this.logDYIQPLPoint("dyi_exit_early",{int:{dyi_threads:n}}),await this.updateDYIStatus(t?2:1),this.clear()},n.clear=async function(){this.$5=new Map,this.$6=new Set,this.$7=new Set,this.$8=new Map,this.$9=new Map;var e=await o("EncryptedBackupsDYIFileUtils").getRootFolderHandle();await e.removeEntry(o("EncryptedBackupsDYIFileUtils").DyiMediaFolder,{recursive:!0})},n.logDYIQPLPoint=function(t,n){this.$3!=null&&o("MAWQplProxy").sendQplPointThroughBridge(this.$2,t,{annotations:n,instanceKey:this.$3})},t})();l.initSingleton=R,l.getSingleton=L,l.EncryptedBackupsDYISingleton=E}),98);
__d("EncryptedBackupsDYISingletonFactory",["EncryptedBackupsDYISingleton","WATagsLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){return new(o("EncryptedBackupsDYISingleton")).EncryptedBackupsDYISingleton(e,r("qpl")._(521478596,"1329"),t,o("WATagsLogger").TAGS(["labyrinth_web","labyrinth_dyi",t==null?"":t.toString()]))}function s(e,t){return new(o("EncryptedBackupsDYISingleton")).EncryptedBackupsDYISingleton(e,r("qpl")._(521479842,"2163"),t,o("WATagsLogger").TAGS(["igd_labyrinth_web","igd_dyi",t==null?"":t.toString()]))}l.getMAWEncryptedBackupsDYISingleton=e,l.getIGDEncryptedBackupsDYISingleton=s}),98);
__d("EncryptedBackupsDYIMediaDownloadHandlers",["EncryptedBackupsDYIFileUtils","EncryptedBackupsDYISingleton","FBLogger","WAResultOrError","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e=async function(t,n,a,i){var e=await o("EncryptedBackupsDYIFileUtils").getMediaFolderHandle(),l=n.split("/")[1],s=r("uuidv4")()+"."+l;await o("EncryptedBackupsDYIFileUtils").writeFile(e,s,a);var u=o("EncryptedBackupsDYISingleton").getSingleton();return u.setMediaUrlByPlainTextHash(t,o("EncryptedBackupsDYIFileUtils").DyiMediaFolder+"/"+s),u.deletePlaintextHashFromAttachmentDownloadsInProgress(t),o("WAResultOrError").makeResult()},s=function(){return r("FBLogger")("wmi_eb").debug("[DYIMediaPreviewHandler] Skipping previews for DYI"),Promise.resolve(o("WAResultOrError").makeResult())};l.DYIMediaDownloadHandler=e,l.DYIMediaPreviewHandler=s}),98);
__d("MAWHandleMediaPreviewBeforeDownloadApi",["MAWMediaPreviewDownloadManager","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r){return o("MAWMediaPreviewDownloadManager").markMediaPreviewAsDownloading(r),(e||(e=n("Promise"))).resolve()};l.handleMediaPreviewBeforeDownload=s}),98);
__d("MAWHandleMediaPreviewDownloadApi",["MAWBridgeTypesCreators","MAWDbMediaTxns","MAWDbMsgTxns","MAWDexieTable","MAWIndexedDb","MAWLoggerUtils","MAWMediaAfterTxns","MAWMediaDownloadStatus","MAWMediaDownloadStatusForUI","MAWMediaPreviewDownloadManager","MAWMediaUtils","MAWTransactionMode","MWFBLogger","WACryptoSha256","WAHashUtils","WAResultOrError"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("MWFBLogger").MWMediaLogger().tags([o("MAWLoggerUtils").Tag.MediaDownload,o("MAWLoggerUtils").Tag.MessageReceive,"MediaPreview"]),c=async function(t,n,a,i){var e=o("WAHashUtils").toPlaintextHash(await o("WACryptoSha256").sha256(n));o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download",hash:t,status:r("MAWMediaDownloadStatus").DOWNLOADING,type:"preview"});var l=o("MAWMediaPreviewDownloadManager").getMediaPreviewDownloadingResolvable(t);return l!=null&&(l.resolve(new Blob([n],{type:"image/jpeg"})),o("MAWMediaPreviewDownloadManager").removeMediaPreviewDownloadingResolvable(t)),d(t,e,n,a,i)},d=o("MAWIndexedDb").makeMsgrTransactor({media:o("MAWTransactionMode").READWRITE,messages:o("MAWTransactionMode").READONLY,threads:o("MAWTransactionMode").READONLY},"handleMediaPreviewDownload",function(t){return(function(n,a,i,l,c){return o("MAWDexieTable").dexieAll([o("MAWDbMediaTxns").maybeGetMediaFromPlaintextHash(t,n),o("MAWDbMsgTxns").maybeGetMsgByProtocolMsgId(t,c)]).then(function(c){var d=c[0],m=c[1];if(u.DEBUG(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Handling preview for main hash ","... preview hash ","..."])),o("WAHashUtils").sanitisePlaintextHash(n),o("WAHashUtils").sanitisePlaintextHash(a)),d==null)return o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"missing_media_on_save",hash:n,status:r("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"preview"}),u.WARN(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Main media for preview is null. Type: ",""])),l),o("WAResultOrError").makeError("missing-media-on-save");var p=function(){switch(l){case"image":return t.media.update(d.mediaId,babelHelpers.extends({},d,{validatedImageInfo:babelHelpers.extends({},d.validatedImageInfo,{jpegThumbnail:i})}));case"video":return t.media.update(d.mediaId,babelHelpers.extends({},d,{validatedVideoInfo:babelHelpers.extends({},d.validatedVideoInfo,{jpegThumbnail:i})}));default:return o("MAWDexieTable").dexieResolve()}};return o("MAWMediaDownloadStatusForUI").sendMediaDownloadStatusToUI({details:"handle_media_download_success",hash:n,status:r("MAWMediaDownloadStatus").SUCCESS,type:"preview"}),p().then(function(){return t.messages.where("msgId").anyOf(d.msgIds).toArray().then(function(e){return t.threads.where("jid").anyOf(e.map(function(e){return e.threadJid})).toArray().then(function(n){return o("MAWDexieTable").dexieAll(n.map(function(n){var r=o("MAWMediaUtils").createHdTypesForBridgeMedia(e),a=o("MAWBridgeTypesCreators").createBridgeMedia({chatJid:n.jid,filteredMsgIds:o("MAWBridgeTypesCreators").getMsgIdsFilteredByJid(e,n.jid),hasMediaForUI:!0,hdTypes:r,media:d,sortOrderMs:m==null?void 0:m.sortOrderMs});return o("MAWMediaAfterTxns").handleNewMediaAfterTxnWithBridgeMedia(t,a,e)})).then(function(){return o("WAResultOrError").makeResult()})})})})})})});l.handleMediaPreviewDownload=c}),98);
__d("MAWHandleMediaPreviewDownloadAsFailedApi",["MAWMediaPreviewDownloadManager","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e,s=function(r,a){return o("MAWMediaPreviewDownloadManager").markMediaPreviewAsFailed(r,a),(e||(e=n("Promise"))).resolve()};l.handleMediaPreviewDownloadFailed=s}),98);
__d("MebWAMediaDownloader",["MAWHandleMediaPreviewBeforeDownloadApi","MAWHandleMediaPreviewDownloadApi","MAWHandleMediaPreviewDownloadAsFailedApi","WAAPI","WAIsMediaExpiredError","WALogger","WAStartMediaDownloadQplFlow","WATimeUtils","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(function(){function t(e,t,n){this.mediaDownloadMetadata=e,this.downloadCallbacks=t,this.waApiDownloadCall=n}var n=t.prototype;return n.handle=async function(){var t,n=this.mediaDownloadMetadata.mediaEntry.mediaKeyTimestamp;if(n==null)return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web][WAMediaDownloader] Cannot download media - missing mediaKeyTimestamp"]))),this.handleError();var a=!o("WATimeUtils").happenedWithin(n,29*o("WATimeUtils").DAY_SECONDS),i=(t=this.mediaDownloadMetadata.isUrlRenewed)!=null?t:!1;if(!i&&(a||r("gkx")("23960")))return o("WALogger").LOG(s||(s=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] downloading media from MI directly"]))),this.handleUrlExpired();var l=this.mediaDownloadMetadata,u=l.hash,c=l.mediaEntry,d=l.protocolMsgId,m=await this.waApiDownloadCall(u,c,d);return m.success?this.downloadCallbacks.onDownloadSuccess({mimeType:m.value.mimeType,plaintext:m.value.plaintext}):o("WAIsMediaExpiredError").isMediaExpiredError(m.error)?this.handleUrlExpired():this.handleError()},n.handleUrlExpired=async function(){var e;return await this.downloadCallbacks.onUrlExpired(),(e=this.mediaDownloadHandler)==null?void 0:e.handle()},n.handleError=async function(){var e;return await this.downloadCallbacks.onDownloadError(),(e=this.mediaDownloadHandler)==null?void 0:e.handle()},n.getDownloadMetadata=function(){return this.mediaDownloadMetadata},n.setNextHandler=function(t){this.mediaDownloadHandler=t},t})(),c=function(t,n,a){var e=o("WAStartMediaDownloadQplFlow").startMediaDownloadQplFlow({downloadEntry:"MebWAMediaDownloader",msgType:null,protocolMsgId:a,triggerUIView:null});return r("WAAPI").downloadMedia({downloadMediaMetric:e,handleMediaPreviewBeforeDownload:o("MAWHandleMediaPreviewBeforeDownloadApi").handleMediaPreviewBeforeDownload,handleMediaPreviewDownload:o("MAWHandleMediaPreviewDownloadApi").handleMediaPreviewDownload,handleMediaPreviewDownloadFailed:o("MAWHandleMediaPreviewDownloadAsFailedApi").handleMediaPreviewDownloadFailed,hash:t,mediaEntry:n,protocolMsgId:a})};l.MebWAMediaDownloader=u,l.MebWADownloadMediaFromWorker=c}),98);
__d("EncryptedBackupsDYIMessageProcessingUtils",["EncryptedBackupsDYIMediaDownloadHandlers","EncryptedBackupsDYISingleton","FBLogger","MAWBridge","MAWFrontendMediaUtils","MebWAMediaDownloader","WAHashUtils","WAJids","WALongInt","WAMediaUtils","WAProgressiveJpegGetScanLengths","WAResultOrError","WATimeUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g;function h(e,t){return{isUnsent:!1,media:new Set,reactions:[],senderName:y(e),text:"",timestamp:t!=null?t:0,type:""}}function y(e){var t=o("EncryptedBackupsDYISingleton").getSingleton(),n="Unknown User";if(e!=null){var r=t.getContactNameForContactId(e);r!=null&&(n=r)}return n}async function C(t,n,a,i){var l=o("EncryptedBackupsDYISingleton").getSingleton(),d=l.getLogger(),m=d.TAGS([o("WAHashUtils").sanitisePlaintextHash(t)]);r("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Sending the media download bridge call for plaintext hash: %s",o("WAHashUtils").sanitisePlaintextHash(t));var p=await o("MAWBridge").getBridge().sendAndReceive("backend","dyiDownloadMediaV2",{mediaEntry:i,plaintextHash:t,protocolMsgId:n,sortOrderMs:a});if(r("FBLogger")("wmi_eb").tags(["labyrinth_dyi"]).debug("Received the media download result from the bridge for plaintext hash: %s, success: %s, error: %s",o("WAHashUtils").sanitisePlaintextHash(t),p.success?"true":"false",p.error),p.success){var _=p.value,f=_.unvalidatedMimeType,g=_.validatedResult,h=g.skipValidation?f:g.mimeType,y=await o("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(t,h,g.validatedPlaintext,n);if(!y.success){m.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),y.error,y.payload),d.ERROR(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Failed to save media: ",", ",""])),y.error,y.payload),l.deletePlaintextHashFromAttachmentDownloadsInProgress(t);return}}else{m.WARN(u||(u=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),p.error,p.payload),d.ERROR(c||(c=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media: ",", ",""])),p.error,p.payload),l.deletePlaintextHashFromAttachmentDownloadsInProgress(t);return}}function b(e,t,n,r,a,i,l,s,u,c,h){var y=o("EncryptedBackupsDYISingleton").getSingleton(),C=y.getLogger(),b=C.TAGS([o("WAHashUtils").sanitisePlaintextHash(u)]),v={author:o("WAJids").toMsgrUserJid(l),chat:o("WAJids").toMsgrUserJid(a),externalId:s},S={hash:u,isUrlRenewed:!1,mediaEntry:r,protocolMsgId:v,sortOrderMs:c},R={onDownloadError:function(){return b.WARN(d||(d=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"]))),C.ERROR(m||(m=babelHelpers.taggedTemplateLiteralLoose(["Failed to download media"]))),y.deletePlaintextHashFromAttachmentDownloadsInProgress(S.hash),Promise.resolve()},onDownloadSuccess:async function(t){b.LOG(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Successfully downloaded media"])));var e=t.mimeType,n=t.plaintext;await o("EncryptedBackupsDYIMediaDownloadHandlers").DYIMediaDownloadHandler(S.hash,e,n,v)},onUrlExpired:function(){return b.LOG(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Media CDN URL has expired and should be renewed"]))),Promise.resolve()}},L=new(o("MebWAMediaDownloader")).MebWAMediaDownloader(S,R,e),E=r.serverMediaType,k=r.objectId;if(E!=null&&k!=null&&typeof c=="number"){var I={backupEntFbid:t,deliveryObjectId:k,hash:u,mediaType:E,messageId:s,productType:n,sortOrder:c,threadId:a,threadKey:i},T={onResignCdnUrlFailure:function(t){return b.WARN(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),t.message),C.ERROR(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Failed to resign CDN URL: ",""])),t.message),y.deletePlaintextHashFromAttachmentDownloadsInProgress(S.hash),Promise.resolve()},onResignCdnUrlSuccess:async function(){}},D=h(I,T);L.setNextHandler(D),D.setNextHandler(new(o("MebWAMediaDownloader")).MebWAMediaDownloader(S,R,e))}L.handle()}function v(e,t,n){var r,a,i,l,s,u,c,d,m,p,_,f=(r=e.integral)==null||(r=r.transport)==null||(r=r.ancillary)==null?void 0:r.mimetype;if(f==null)return o("WAResultOrError").makeError("mime-type-missing");var g=o("MAWFrontendMediaUtils").getMediaTypeAndServerMediaTypeFromBlob(f,t).serverMediaType;if(g==null)return o("WAResultOrError").makeError("server-media-type-missing");var h=(a=e.integral)==null||(a=a.transport)==null||(a=a.integral)==null?void 0:a.directPath;if(h==null)return o("WAResultOrError").makeError("direct-path-missing");var y=(i=e.integral)==null||(i=i.transport)==null||(i=i.integral)==null?void 0:i.fileSha256;if(y==null)return o("WAResultOrError").makeError("plaintext-hash-missing");var C=o("WALongInt").maybeNumber((l=e.integral)==null||(l=l.transport)==null||(l=l.integral)==null?void 0:l.mediaKeyTimestamp);if(C==null)return o("WAResultOrError").makeError("media-key-timestamp-missing");var b;if(((s=e.ancillary)==null?void 0:s.scanLengths)!=null&&((u=e.ancillary)==null?void 0:u.scansSidecar)!=null){var v=e.ancillary,S=v.scanLengths,R=v.scansSidecar;b={scanLengths:S.map(o("WAProgressiveJpegGetScanLengths").asProgressiveJpegScanLength),sidecar:R}}var L;if(((c=e.integral)==null||(c=c.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.downloadableThumbnail)!=null){var E=e.integral.transport.ancillary.thumbnail.downloadableThumbnail,k=E.directPath,I=E.fileEncSha256,T=E.fileSha256,D=E.mediaKey,x=E.mediaKeyTimestamp,$=E.objectId;L={directPath:k,fileEncSha256:I,fileSha256:T,mediaKey:D,mediaKeyTimestamp:o("WALongInt").maybeNumber(x),objectId:$}}var P={directPath:h,downloadableThumbnail:L,fileEncSha256:(d=e.integral)==null||(d=d.transport)==null||(d=d.integral)==null?void 0:d.fileEncSha256,filename:n,fileSha256:y,mediaKey:(m=e.integral)==null||(m=m.transport)==null||(m=m.integral)==null?void 0:m.mediaKey,mediaKeyTimestamp:o("WATimeUtils").castToUnixTime(C),objectId:(p=e.integral)==null||(p=p.transport)==null||(p=p.ancillary)==null?void 0:p.objectId,progressiveJpegDetails:b,serverMediaType:g,size:o("WALongInt").maybeNumber((_=e.integral)==null||(_=_.transport)==null||(_=_.ancillary)==null?void 0:_.fileLength)};return o("WAResultOrError").makeResult(o("WAMediaUtils").rawDataToMediaEntry(P))}l.buildBaseDyiMessage=h,l.getSenderName=y,l.downloadMediaWithMediaManager=C,l.startMediaDownloadChain=b,l.decodeMediaEntryFromAttachmentPayload=v}),98);
__d("MAWFTSIsMessageValidForSearch",["MAWMsgType"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e.ephemeralSetting!=null&&e.ephemeralSetting.ephemeralExpirationInSec>0}function s(t){var n=t.msgContent,r=t.sortOrderMs,a=t.type,i=n==null?void 0:n.content;return i==null||r==null||a!==o("MAWMsgType").MSG_TYPE.TEXT&&a!==o("MAWMsgType").MSG_TYPE.XMA||e(t)?null:{content:i,sortOrderMs:r}}l.verifyMessageValidity=s}),98);
__d("MAWHandleEchoProtobufsRestoreApi",["EBLogger","EchoMessageMediaFieldUtils","EncryptedBackupsDYIMessageProcessingUtils","LSMEBTaskCreationSource","MAWJids","MAWMediaUtils","MAWMsg","MAWMsgType","MAWODSProxy","MAWUnstoredContentToUnstoredDbContentUtils","MessageBackupSupplementalKeyGenerator","WAAckLevel","WAArmadilloApplication.pb","WAArmadilloBackupMessage.pb","WABase64","WAConsumerApplication.pb","WAHashUtils","WAJids","WAMediaTransport.pb","WAMsgApplication.pb","WAMsgType","WAOdsEnums","WAParseMediaTransportProtocol","WAParseMessageApplication","WAStanzaUtils","WATimeUtils","decodeProtobuf"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S,R,L,E,k,I,T,D=o("EBLogger").EBLogger().tags(["ProtobufRestore"]);function x(t){var n=t.isMediaGalleryRestore,a=t.taskSource,i;return n!=null&&n?(o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.EB_RESTORE,key:"is_media_gallery_restore_param"}),D.WARN(e||(e=babelHelpers.taggedTemplateLiteralLoose(["isMediaGalleryRestore is deprecated. Consider using taskSource insted"]))),i=r("LSMEBTaskCreationSource").MEDIA_GALLERY_RESTORE):i=a!=null?a:r("LSMEBTaskCreationSource").UNKNOWN,babelHelpers.extends({},t,{isMediaGalleryRestore:void 0,taskSource:i})}function $(e,t,n){var r={author:n,chat:t,externalId:e};return r}function P(e,t,n,r,a,i,l,p,_,f,g,h,y,C,b,v){if(e===o("MAWMsgType").MSG_TYPE.TEXT)if(l==null){D.MUSTFIX(s||(s=babelHelpers.taggedTemplateLiteralLoose(["Text content cannot be null for msg type text - unable to restore msg"])));return}else{var S={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,msgContent:{content:l,mentionedJids:p!=null?p.map(o("WAJids").validateUserJid).filter(Boolean):void 0},ts:t,type:o("MAWMsgType").MSG_TYPE.TEXT};return S}else if(e===o("MAWMsgType").MSG_TYPE.VIDEO){var R={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.VIDEO};return R}else if(e===o("MAWMsgType").MSG_TYPE.GIF){var L={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.GIF};return L}else if(e===o("MAWMsgType").MSG_TYPE.IMAGE){var E={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.IMAGE};return E}else if(e===o("MAWMsgType").MSG_TYPE.STICKER){var k={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.STICKER};return k}else if(e===o("MAWMsgType").MSG_TYPE.PTT){var I={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.PTT};return I}else if(e===o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE){var T={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,mediaId:void 0,ts:t,type:o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE};return T}else if(e===o("MAWMsgType").MSG_TYPE.XMA){var x={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,ts:t,type:o("MAWMsgType").MSG_TYPE.XMA};return x}else if(e===o("MAWMsgType").MSG_TYPE.REVOKED){if(_==null){D.MUSTFIX(u||(u=babelHelpers.taggedTemplateLiteralLoose(["No revoked msg external id found for revoked msg"])));return}var $={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,ebTimestampMs:null,id:r,msgContent:void 0,revokedExternalId:_,ts:t,type:o("MAWMsgType").MSG_TYPE.REVOKED,unsendMsgContentDeleteTs:t};return $}else if(e===o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE){var P={ack:o("WAAckLevel").ACK.SENT,id:r,ts:t,type:o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE};return P}else if(e===o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH){var N={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,forwardingScore:i,id:r,isForwarded:a,ts:t,type:o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH};return N}else if(e===o("MAWMsgType").MSG_TYPE.RAVEN){if(f==null){D.MUSTFIX(c||(c=babelHelpers.taggedTemplateLiteralLoose(["No raven msg ephemeral type found for raven msg"])));return}if(g==null){D.MUSTFIX(d||(d=babelHelpers.taggedTemplateLiteralLoose(["No raven msg media type found for raven msg"])));return}var M={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,id:r,mediaId:h,ravenEphemeralMediaState:o("MAWMsg").MAWRavenMsgEphemeralMediaState.UNSEEN,ravenEphemeralType:f,ravenMediaType:g,ts:t,type:o("MAWMsgType").MSG_TYPE.RAVEN};return M}else if(e===o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE){if(y==null||C==null||b==null||v==null){D.MUSTFIX(m||(m=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] One of the mandatory fields is missing for the group poll creation msg"])));return}var w={ack:n===o("WAJids").AUTHOR_ME?o("WAAckLevel").ACK.SENT:o("WAAckLevel").ACK.RECEIVED,id:r,ts:t,type:o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE};return w}}function N(e,t,n,r,a){var i,l,s,u,c,d,m,C,b=e.metadata,v=e.msgType;if(b==null){D.MUSTFIX(p||(p=babelHelpers.taggedTemplateLiteralLoose(["Missing required metadata, unable to create db msg from protobuf"])));return}if(v==null){D.MUSTFIX(_||(_=babelHelpers.taggedTemplateLiteralLoose(["Missing required msg type, unable to create db msg from protobuf"])));return}var S=b.messageId,R=b.senderId,L=(i=e.decodedPayload)==null?void 0:i.text,E=(l=e.decodedPayload)==null?void 0:l.mentionedJid;if(S==null){D.MUSTFIX(f||(f=babelHelpers.taggedTemplateLiteralLoose(["Missing required message id, unable to create db msg from protobuf"])));return}if(R==null){D.MUSTFIX(g||(g=babelHelpers.taggedTemplateLiteralLoose(["Missing required author, unable to create db msg from protobuf"])));return}var k=o("WATimeUtils").castMilliSecondsToUnixTime(e.sortOrderMs),I=o("MAWJids").toUserJid(R),T=o("WAStanzaUtils").toStanzaId(S),x=I===n?o("WAJids").AUTHOR_ME:I,N=$(T,t,I);if(e.editMsgData.length>0){var M=k;e.editMsgData.forEach(function(e){var t;if(e.ts>M&&((t=e.editMsgContent.message)==null?void 0:t.text)!=null){var n,r;M=e.ts,L=(n=e.editMsgContent.message)==null?void 0:n.text,E=(r=e.editMsgContent.message)==null?void 0:r.mentionedJid}})}var w=P(v,k,x,N,e.isForwarded,e.forwardingScore,L,E,e.revokedMsgExternalId,e.ravenMsgEphemeralType,e.ravenMsgMediaType,(s=e.ravenUnstoredMedia)==null?void 0:s.plaintextHash,(u=e.groupPollInfo)==null?void 0:u.encKey,(c=e.groupPollInfo)==null?void 0:c.name,(d=e.groupPollInfo)==null?void 0:d.options,(m=e.groupPollInfo)==null?void 0:m.selectableOptionsCount);if(w==null){D.MUSTFIX(h||(h=babelHelpers.taggedTemplateLiteralLoose(["Missing required fields, unable to create db msg from protobuf for thread jid "," and otid ",""])),t,T);return}var A;if(e.xmaData!=null&&((C=e.xmaData)==null?void 0:C.targetType)!=null){var F,O={author:I,externalId:T,targetType:(F=e.xmaData)==null?void 0:F.targetType,threadJid:t};A={unstoredAssociatedMedia:void 0,unstoredAssociatedMsg:void 0,unstoredFavicon:void 0,unstoredHeaderMedia:void 0,unstoredPreviews:void 0,xma:O}}var B={unstoredGroupPollCreateInfo:e.groupPollInfo,unstoredMedia:void 0,unstoredMsg:w,unstoredQuotedMedia:void 0,unstoredReceiverFetchInfo:e.receiverFetchInfo,unstoredXMA:A};w.type===o("MAWMsgType").MSG_TYPE.RAVEN&&e.ravenUnstoredMedia!=null&&(B.unstoredMedia=e.ravenUnstoredMedia);var W=o("MAWUnstoredContentToUnstoredDbContentUtils").unstoredContentToUnstoredDbContent(B);if(W.unstoredDbMsg!=null){var q=W.unstoredDbMsg;q.sortOrderMs=e.sortOrderMs,q.serverTs=o("WATimeUtils").castToUnixTime(e.sortOrderMs/1e3),e.noteReply!=null&&(q.quote={content:e.noteReply,remoteJid:void 0});var U=r.get(S);q.author!=null&&n===q.author&&q.author!==o("WAJids").AUTHOR_SYSTEM&&(q.author=o("WAJids").AUTHOR_ME),U!=null&&(q.quoteExternalId=o("WAStanzaUtils").toStanzaId(U)),v===o("MAWMsgType").MSG_TYPE.TEXT&&(q.editCount=e.editMsgData.length);var V={author:q.author,stanzaId:T,unstoredDbContent:W};return W.unstoredDbMedia!=null&&a!=null&&a.set(T,W.unstoredDbMedia),V}D.MUSTFIX(y||(y=babelHelpers.taggedTemplateLiteralLoose(["Failed to create db msg from protobuf"])))}function M(e){switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.GIF;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.STICKER;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_MP4;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.AUDIO_WAV;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return o("EchoMessageMediaFieldUtils").EchoMessageMediaPreviewType.IMAGE_JPEG;default:return null}}function w(e){switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:return o("EchoMessageMediaFieldUtils").AttachmentType.IMAGE;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:return o("EchoMessageMediaFieldUtils").AttachmentType.GIF;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:return o("EchoMessageMediaFieldUtils").AttachmentType.STICKER;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:return o("EchoMessageMediaFieldUtils").AttachmentType.VIDEO;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:return o("EchoMessageMediaFieldUtils").AttachmentType.PTT;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:return o("EchoMessageMediaFieldUtils").AttachmentType.XMA;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:return o("EchoMessageMediaFieldUtils").AttachmentType.DOCUMENT;default:return null}}function A(e){var t;switch(e){case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE:t="image/jpeg";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO:t="audio/wav";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO:t="video/mp4";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF:t="image/gif";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER:t="image/webp";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.XMA_IMAGE:t="image/jpeg";break;case o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT:t="application/octet-stream";break;default:D.MUSTFIX(C||(C=babelHelpers.taggedTemplateLiteralLoose(["Unsupported media type, cannot get mimetype for attachment"])))}return t}function F(e,t,n){var r,a,i,l,s,u,c,d,m,p,_=t,f=e.ancillary,g=e.integral,h=g==null||(r=g.transport)==null||(r=r.integral)==null?void 0:r.fileSha256,y=g==null||(a=g.transport)==null||(a=a.integral)==null?void 0:a.fileEncSha256,C=g==null||(i=g.transport)==null||(i=i.integral)==null?void 0:i.mediaKey,S=(g==null||(l=g.transport)==null||(l=l.integral)==null?void 0:l.mediaKeyTimestamp)!=null&&typeof(g==null||(s=g.transport)==null?void 0:s.integral.mediaKeyTimestamp)=="number"?g==null||(u=g.transport)==null?void 0:u.integral.mediaKeyTimestamp:void 0;o("MAWMediaUtils").isTransportLegacyGif(e)&&(_=o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF);var R=g==null||(c=g.transport)==null||(c=c.ancillary)==null||(c=c.thumbnail)==null?void 0:c.thumbnailHeight,L=g==null||(d=g.transport)==null||(d=d.ancillary)==null||(d=d.thumbnail)==null?void 0:d.thumbnailWidth,E=M(_),k=w(_);if(k===null){D.MUSTFIX(b||(b=babelHelpers.taggedTemplateLiteralLoose(["Invalid attachment type, cannot restore attachment"])));return}var I=o("EncryptedBackupsDYIMessageProcessingUtils").decodeMediaEntryFromAttachmentPayload(e,k===o("EchoMessageMediaFieldUtils").AttachmentType.XMA,n);I.success||D.WARN(v||(v=babelHelpers.taggedTemplateLiteralLoose(["Cannot generate media entry data, ",""])),I.error);var T={attachmentObjectId:g==null||(m=g.transport)==null||(m=m.ancillary)==null?void 0:m.objectId,attachmentType:k,directPath:g==null||(p=g.transport)==null||(p=p.integral)==null?void 0:p.directPath,encryptedHash:y!=null?o("WAHashUtils").toPlaintextHash(y):void 0,filename:n,height:f==null?void 0:f.height,mediaEntryData:I.value,mediaKey:C!=null?o("WABase64").encodeB64UrlSafe(C):void 0,mediaKeyTimestamp:S,mediaPlayableDuration:f==null?void 0:f.seconds,plaintextHash:h!=null?o("WAHashUtils").toPlaintextHash(h):void 0,width:f==null?void 0:f.width,xAttachmentType:_,xContentType:"full"},x=A(_);return x!=null&&(T.mediaContentType=x),E!=null&&(T.previewContentType=E,T.previewContentHeight=R,T.previewContentWidth=L),o("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(T,"protobuf")}function O(e,t,n){var r,a=F(e,t,n);if(a==null)return{mediaMetadata:void 0,previewMetadata:null};var i=e.integral,l=null,s=i==null||(r=i.transport)==null||(r=r.ancillary)==null||(r=r.thumbnail)==null?void 0:r.downloadableThumbnail;if(s!=null){var u=s.fileSha256,c=s.fileEncSha256,d=s.mediaKey,m=typeof s.mediaKeyTimestamp=="number"?s.mediaKeyTimestamp:void 0;return l={attachmentObjectId:s.objectId,attachmentType:o("EchoMessageMediaFieldUtils").AttachmentType.IMAGE,directPath:s.directPath,encryptedHash:c!=null?o("WAHashUtils").toPlaintextHash(c):void 0,filename:void 0,height:void 0,mediaKey:d!=null?o("WABase64").encodeB64UrlSafe(d):void 0,mediaKeyTimestamp:m,mediaPlayableDuration:void 0,plaintextHash:u!=null?o("WAHashUtils").toPlaintextHash(u):void 0,width:void 0,xAttachmentType:o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.MESSENGER_PREVIEW,xContentType:"preview"},{mediaMetadata:a,previewMetadata:o("EchoMessageMediaFieldUtils").convertMediaMetadataDetailsToMediaMetadata(l,"protobuf")}}return{mediaMetadata:a,previewMetadata:null}}function B(e,t,n,r,a,i){i===void 0&&(i=null),t!=null&&e!=null&&(n.push({mediaMetadata:t,mediaRestoreType:r,previewMetadata:i}),a.set(o("WAStanzaUtils").toStanzaId(e),n))}function W(e){switch(e){case 0:return o("MAWMsg").MAWRavenMsgEphemeralType.VIEW_ONCE;case 1:return o("MAWMsg").MAWRavenMsgEphemeralType.ALLOW_REPLAY;case 2:return o("MAWMsg").MAWRavenMsgEphemeralType.KEEP_IN_CHAT;default:return}}function q(e,t,n,r,a,i,l,s,u,c,d){var m,p,_,f,g,h,y,C,b,v,I=V(e,i,l,s),T=I==null||(m=I.obj.payload)==null?void 0:m.content,x={editMsgData:[],externalId:r,forwardingScore:(p=I==null||(_=I.metadata)==null?void 0:_.forwardingScore)!=null?p:0,isForwarded:(f=I==null||(g=I.metadata)==null?void 0:g.isForwarded)!=null?f:!1,metadata:e.metadata,reactionData:[],sortOrderMs:t,unknownFieldCount:e.$$unknownFieldCount},$,P=[];if(T!=null){if(T.messageText!=null)return x.msgType=o("MAWMsgType").MSG_TYPE.TEXT,x.decodedPayload=T.messageText,x;if(T.extendedContentMessage!=null){var N,M,w;if(x.msgType=o("MAWMsgType").MSG_TYPE.XMA,x.xmaData=T.extendedContentMessage,((N=T.extendedContentMessage)==null?void 0:N.headerImage)!=null){var A,q=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,(A=T.extendedContentMessage)==null?void 0:A.headerImage.payload),H=F(q,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);B(r,H,P,"xma_header",u)}if(((M=T.extendedContentMessage)==null?void 0:M.favicon)!=null){var G,z=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,(G=T.extendedContentMessage)==null?void 0:G.favicon.payload),j=F(z,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);B(r,j,P,"xma_favicon",u)}if(((w=T.extendedContentMessage)==null?void 0:w.previews)!=null){var K;(K=T.extendedContentMessage)==null||K.previews.forEach(function(e){var t=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").ImageTransportSpec,e.payload),n=F(t,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE);x.mediaMetadata=n,B(r,n,P,"xma_preview",u)})}return x}else if(T.audioMessage!=null){var Q,X=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").AudioTransportSpec,(Q=T.audioMessage)==null||(Q=Q.audio)==null?void 0:Q.payload);return $=F(X,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.AUDIO),x.msgType=o("MAWMsgType").MSG_TYPE.PTT,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(T.videoMessage!=null){var Y,J=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,(Y=T.videoMessage)==null||(Y=Y.video)==null?void 0:Y.payload),Z=O(J,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO),ee=Z.mediaMetadata,te=Z.previewMetadata;return $=ee,$!=null&&$.xAttachmentType===o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?x.msgType=o("MAWMsgType").MSG_TYPE.GIF:x.msgType=o("MAWMsgType").MSG_TYPE.VIDEO,x.mediaMetadata=$,B(r,$,P,"attachment",u,te),x}else if(T.imageMessage!=null){var ne,re=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").ImageTransportSpec,(ne=T.imageMessage)==null||(ne=ne.image)==null?void 0:ne.payload),oe=O(re,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.IMAGE),ae=oe.mediaMetadata,ie=oe.previewMetadata;return $=ae,x.msgType=o("MAWMsgType").MSG_TYPE.IMAGE,x.mediaMetadata=$,B(r,$,P,"attachment",u,ie),x}else if(T.stickerMessage!=null){var le,se,ue=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,(le=T.stickerMessage)==null||(le=le.sticker)==null?void 0:le.payload);if(((se=ue.integral)==null?void 0:se.receiverFetchId)!=null){var ce=o("WAParseMediaTransportProtocol").parseStickerReceiverFetchInfo(ue);return ce==null?(D.MUSTFIX(S||(S=babelHelpers.taggedTemplateLiteralLoose(["[MAWHandleEchoProtobufsRestoreApi] consumerMessage has no sticker receiver fetch info"]))),x):(x.msgType=o("MAWMsgType").MSG_TYPE.RECEIVER_FETCH,x.receiverFetchInfo=ce,x)}return $=F(ue,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER),x.msgType=o("MAWMsgType").MSG_TYPE.STICKER,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(T.documentMessage!=null){var de,me,pe=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").DocumentTransportSpec,(de=T.documentMessage)==null||(de=de.document)==null?void 0:de.payload);return $=F(pe,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.DOCUMENT,(me=T.documentMessage)==null?void 0:me.fileName),x.msgType=o("MAWMsgType").MSG_TYPE.DOCUMENT_FILE,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}}else if((I==null||(h=I.obj.payload)==null||(h=h.applicationData)==null?void 0:h.revoke)!=null){var _e,fe=I==null||(_e=I.obj.payload)==null||(_e=_e.applicationData)==null||(_e=_e.revoke)==null||(_e=_e.key)==null?void 0:_e.id;if(fe==null)D.MUSTFIX(R||(R=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve revoked message external id"])));else return x.revokedMsgExternalId=o("WAStanzaUtils").toStanzaId(fe),x.msgType=o("MAWMsgType").MSG_TYPE.REVOKED,x}if((I==null||(y=I.obj.payload)==null||(y=y.content)==null?void 0:y.bumpExistingMessage)!=null){var ge,he,ye,Ce=I==null||(ge=I.obj.payload)==null||(ge=ge.content)==null?void 0:ge.bumpExistingMessage,be=(he=Ce.key)==null?void 0:he.id;be!=null&&(l.has(be)||i.add(be),s.set(r,be));var ve=(ye=Ce.key)==null?void 0:ye.participant;if(ve==null){var Se;ve=(Se=Ce.key)==null?void 0:Se.remoteJid}if(ve==null)D.MUSTFIX(L||(L=babelHelpers.taggedTemplateLiteralLoose(["No author found for original message that was bumped - unable to restore"])));else{var Re=o("WAJids").unsafeCoerceToUserJid(ve),Le=Re===n?o("WAJids").AUTHOR_ME:Re;return c.set(o("WAStanzaUtils").toStanzaId(r),Le),x.msgType=o("MAWMsgType").MSG_TYPE.BUMP_EXISTING_MESSAGE,x}}if((I==null||(C=I.obj)==null||(C=C.payload)==null||(C=C.content)==null?void 0:C.noteReplyMessage)!=null){var Ee,ke,Ie=I==null||(Ee=I.obj)==null||(Ee=Ee.payload)==null||(Ee=Ee.content)==null?void 0:Ee.noteReplyMessage,Te=Ie.noteTimestampMs,De=Ie.noteText,xe=(ke=e.metadata)==null?void 0:ke.senderId;if(Te!=null&&typeof Te=="number"&&xe!=null&&a!=null){var $e=o("MAWJids").toUserJid(xe),Pe=o("MAWJids").toUserJid(a),Ne=Pe===$e?n:Pe,Me={author:Ne===n?o("WAJids").AUTHOR_ME:Ne,externalId:o("WAStanzaUtils").toStanzaId(r),ts:o("WATimeUtils").castMilliSecondsToUnixTime(Te),type:o("WAMsgType").NOTE_REPLY};if((De==null?void 0:De.text)!=null){var we={content:De==null?void 0:De.text,mentionedJids:De==null?void 0:De.mentionedJid.map(function(e){return o("MAWJids").toUserJid(e)})};Me.msgContent=we}x.noteReply=Me}if(Ie.textContent!=null)return x.msgType=o("MAWMsgType").MSG_TYPE.TEXT,x.decodedPayload=Ie.textContent,x;if(Ie.stickerContent!=null){var Ae=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").StickerTransportSpec,Ie.stickerContent.payload);return $=F(Ae,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.STICKER),x.msgType=o("MAWMsgType").MSG_TYPE.STICKER,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}else if(Ie.videoContent!=null){var Fe=o("decodeProtobuf").decodeProtobuf(o("WAMediaTransport.pb").VideoTransportSpec,Ie.videoContent.payload);return $=F(Fe,o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.VIDEO),$!=null&&$.xAttachmentType===o("EchoMessageMediaFieldUtils").EchoMessageActMediaAttachmentType.GIF?x.msgType=o("MAWMsgType").MSG_TYPE.GIF:x.msgType=o("MAWMsgType").MSG_TYPE.VIDEO,x.mediaMetadata=$,B(r,$,P,"attachment",u),x}}if((I==null||(b=I.obj)==null||(b=b.payload)==null||(b=b.content)==null?void 0:b.ravenMessageMsgr)!=null){var Oe,Be,We;if(x.ravenMsgEphemeralType=W(I==null||(Oe=I.obj)==null||(Oe=Oe.payload)==null||(Oe=Oe.content)==null||(Oe=Oe.ravenMessageMsgr)==null?void 0:Oe.ephemeralType),(I==null||(Be=I.obj)==null||(Be=Be.payload)==null||(Be=Be.content)==null||(Be=Be.ravenMessageMsgr)==null?void 0:Be.imageMessage)!=null){if(d==null||!d){var qe;x.ravenUnstoredMedia=o("WAParseMediaTransportProtocol").decodeImageTransport(I==null||(qe=I.obj)==null||(qe=qe.payload)==null||(qe=qe.content)==null||(qe=qe.ravenMessageMsgr)==null||(qe=qe.imageMessage)==null?void 0:qe.payload,o("WATimeUtils").castMilliSecondsToUnixTime(x.sortOrderMs),"image")}x.ravenMsgMediaType=o("MAWMsg").MAWRavenMsgMediaType.IMAGE}else if((I==null||(We=I.obj)==null||(We=We.payload)==null||(We=We.content)==null||(We=We.ravenMessageMsgr)==null?void 0:We.videoMessage)!=null){if(d==null||!d){var Ue,Ve=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAMediaTransport.pb").VideoTransportSpec,I==null||(Ue=I.obj)==null||(Ue=Ue.payload)==null||(Ue=Ue.content)==null||(Ue=Ue.ravenMessageMsgr)==null||(Ue=Ue.videoMessage)==null?void 0:Ue.payload),He=o("WAParseMediaTransportProtocol").parseVideoMsg(Ve,o("WATimeUtils").castMilliSecondsToUnixTime(x.sortOrderMs),!1);He!=null?x.ravenUnstoredMedia=He:D.MUSTFIX(E||(E=babelHelpers.taggedTemplateLiteralLoose(["Decoded raven video unstored message is null - unable to restore"])))}x.ravenMsgMediaType=o("MAWMsg").MAWRavenMsgMediaType.VIDEO}return x.msgType=o("MAWMsgType").MSG_TYPE.RAVEN,x}else if((I==null||(v=I.obj)==null||(v=v.payload)==null||(v=v.content)==null?void 0:v.pollCreationMessage)!=null){x.msgType=o("MAWMsgType").MSG_TYPE.GROUP_POLL_CREATE;var Ge=I.obj.payload.content.pollCreationMessage,ze=Ge.encKey,je=Ge.name,Ke=Ge.options,Qe=Ge.selectableOptionsCount;return ze!=null&&je!=null&&Ke!=null&&(x.groupPollInfo={encKey:ze,name:je,options:Ke.map(function(e){var t=e.optionName;return t}).filter(Boolean),selectableOptionsCount:Qe||0}),x}return I!=null&&U(x,I.obj),D.MUSTFIX(k||(k=babelHelpers.taggedTemplateLiteralLoose(["Unable to retrieve decoded protobuf from backup message - unsupported message type"]))),x}function U(e,t){var n,r,o,a,i,l,s,u,c,d,m,p,_,f;(t==null||(n=t.payload)==null||(n=n.content)==null?void 0:n.locationMessage)!=null&&(e.futureProofMessageType="locationMessage"),(t==null||(r=t.payload)==null||(r=r.content)==null?void 0:r.liveLocationMessage)!=null&&(e.futureProofMessageType="liveLocationMessage"),(t==null||(o=t.payload)==null||(o=o.content)==null?void 0:o.pollUpdateMessage)!=null&&(e.futureProofMessageType="pollUpdateMessage"),(t==null||(a=t.payload)==null||(a=a.content)==null?void 0:a.viewOnceMessage)!=null&&(e.futureProofMessageType="viewOnceMessage"),(t==null||(i=t.payload)==null||(i=i.content)==null?void 0:i.contactMessage)!=null&&(e.futureProofMessageType="contactMessage"),(t==null||(l=t.payload)==null||(l=l.content)==null?void 0:l.extendedTextMessage)!=null&&(e.futureProofMessageType="extendedTextMessage"),(t==null||(s=t.payload)==null||(s=s.content)==null?void 0:s.groupInviteMessage)!=null&&(e.futureProofMessageType="groupInviteMessage"),(t==null||(u=t.payload)==null||(u=u.content)==null?void 0:u.commonSticker)!=null&&(e.futureProofMessageType="commonSticker"),(t==null||(c=t.payload)==null||(c=c.content)==null?void 0:c.screenshotAction)!=null&&(e.futureProofMessageType="screenshotAction"),(t==null||(d=t.payload)==null||(d=d.content)==null?void 0:d.extendedMessageContentWithSear)!=null&&(e.futureProofMessageType="extendedMessageContentWithSear"),(t==null||(m=t.payload)==null||(m=m.content)==null?void 0:m.imageGalleryMessage)!=null&&(e.futureProofMessageType="imageGalleryMessage"),(t==null||(p=t.payload)==null||(p=p.content)==null?void 0:p.paymentsTransactionMessage)!=null&&(e.futureProofMessageType="paymentsTransactionMessage"),(t==null||(_=t.payload)==null||(_=_.applicationData)==null?void 0:_.metadataSync)!=null&&(e.futureProofMessageType="metadataSync"),(t==null||(f=t.payload)==null||(f=f.applicationData)==null?void 0:f.aiBotResponse)!=null&&(e.futureProofMessageType="aiBotResponse")}function V(e,t,n,r){var a,i=(a=e.metadata)==null?void 0:a.messageId,l=o("decodeProtobuf").decodeProtobuf(o("WAMsgApplication.pb").MessageApplicationSpec,e.encryptedTransportMessage),s=o("WAParseMessageApplication").parseMessageApplication(l);if(s.type==="error"){D.MUSTFIX(I||(I=babelHelpers.taggedTemplateLiteralLoose(["Message contains unparseable message application - unable to restore message"])));return}var u=l.metadata,c=u==null?void 0:u.quotedMessage,d=c==null?void 0:c.stanzaId;if(i!=null&&d!=null&&(n.has(d)||t.add(d),r.set(i,d)),s.subprotocolType==="armadillo"){var m=o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAArmadilloApplication.pb").ArmadilloSpec,s.payload);return{metadata:u,obj:m}}else if(s.subprotocolType==="consumerMessage")return{metadata:u,obj:o("decodeProtobuf").decodeProtobufWithUnknowns(o("WAConsumerApplication.pb").ConsumerApplicationSpec,s.payload)}}function H(e,t,n,r,o,a,i,l,s){return e.map(function(e){return G(e,t,n,r,o,a,i,l,s)})}function G(e,t,n,r,a,i,l,s,u){i===void 0&&(i=new Map);var c=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,e.toplevelProtobuf.decryptedProtobuf),d=q(c,e.toplevelProtobuf.protobufTimestampMS,t,e.otid,n,r,a,i,l,s,u),m=e.supplementalProtobufs;for(var p of m){var _=p[0],f=p[1],g=o("MessageBackupSupplementalKeyGenerator").parseIdentifierString(_);o("MAWODSProxy").odsBumpEntityKey({entity:o("WAOdsEnums").Entity.MAW_EB_DECODE_MESSAGE_PROTOBUF_SUPPLEMENTAL,key:g.type});var h=o("decodeProtobuf").decodeProtobuf(o("WAArmadilloBackupMessage.pb").BackupMessageSpec,f.decryptedProtobuf);if(h.encryptedTransportMessage!=null)switch(g.type){case"raven_action_message":{var y=V(h,r,a,i),C=g.senderJid,b=C===t?o("WAJids").AUTHOR_ME:C;if(y!=null){var v,S,R,L=y.obj,E=(v=L.payload)==null||(v=v.content)==null||(v=v.ravenActionNotifMessage)==null?void 0:v.actionTimestamp,k=(S=L.payload)==null||(S=S.content)==null||(S=S.ravenActionNotifMessage)==null?void 0:S.actionType;if(E!=null&&k!=null&&typeof E=="number"&&((R=L.payload)==null||(R=R.content)==null||(R=R.ravenActionNotifMessage)==null||(R=R.key)==null?void 0:R.id)!=null){var I,x,$,P,N=o("WAStanzaUtils").toStanzaId((I=L.payload)==null||(I=I.content)==null||(I=I.ravenActionNotifMessage)==null||(I=I.key)==null?void 0:I.id);if(((x=h.metadata)==null?void 0:x.timestampMs)!=null&&typeof(($=h.metadata)==null?void 0:$.timestampMs)=="number"&&((P=h.metadata)==null?void 0:P.messageId)!=null){var M,w,A=(M=h.metadata)==null?void 0:M.messageId,F=o("WATimeUtils").castMilliSecondsToUnixTime((w=h.metadata)==null?void 0:w.timestampMs),O=o("WAStanzaUtils").toStanzaId(A),B=k===0?o("MAWMsg").MAWRavenActionNotifType.PLAYED:k===1?o("MAWMsg").MAWRavenActionNotifType.SCREENSHOTTED:o("MAWMsg").MAWRavenActionNotifType.FORCE_DISABLED,W={ack:o("WAAckLevel").ACK.RECEIVED,actionTimestamp:o("WATimeUtils").castMilliSecondsToUnixTime(E),actionType:B,author:b,externalId:O,ravenActionToMsgExternalId:N,ts:F,type:o("MAWMsgType").MSG_TYPE.RAVEN_ACTION};d.ravenActionUnstoredMsg=W}}}break}case"reaction":{var U,H,G=(U=h.metadata)==null?void 0:U.messageId,z=(H=V(h,r,a,i))==null||(H=H.obj.payload)==null||(H=H.content)==null?void 0:H.reactionMessage,j=o("WAJids").extractUserId(g.senderJid);z!=null&&j!=null&&d.reactionData.push({reaction:z,reactionExternalId:G,senderId:j,ts:o("WATimeUtils").castMilliSecondsToUnixTime(f.protobufTimestampMS)});break}case"edit":{var K,Q,X=(K=V(h,r,a,i))==null||(K=K.obj.payload)==null||(K=K.content)==null?void 0:K.editMessage,Y=(Q=h.metadata)==null?void 0:Q.senderId;if(X!=null){var J,Z=(J=X.key)==null?void 0:J.id,ee=X.timestampMs;if(Z!=null&&ee!=null&&Y!=null&&typeof ee=="number"){var te=o("MAWJids").toUserJid(Y),ne=te===t?o("WAJids").AUTHOR_ME:te;d.editMsgData.push({author:ne,editMsgContent:X,externalId:o("WAStanzaUtils").toStanzaId(d.externalId),originalMsgExternalId:o("WAStanzaUtils").toStanzaId(Z),ts:o("WATimeUtils").castMilliSecondsToUnixTime(ee)})}}break}case"poll_update":{var re,oe=V(h,r,a,i);if(oe==null)continue;var ae=(re=oe.obj.payload)==null||(re=re.content)==null?void 0:re.pollUpdateMessage;if(ae!=null){var ie={externalId:o("WAStanzaUtils").toStanzaId(g.rawIdentifierString)};ae.addOption!=null&&(ie.addOption=ae.addOption),ae.vote!=null&&(ie.vote=ae.vote),ae.pollCreationMessageKey!=null&&(ie.pollCreationMessageKey=ae.pollCreationMessageKey),d.groupPollUpdateData!=null?d.groupPollUpdateData.push(ie):d.groupPollUpdateData=[ie]}break}case"unknown":{var le=_.split(":"),se=le[0];D.MUSTFIX(T||(T=babelHelpers.taggedTemplateLiteralLoose(["Unknown supplemental identifier. Identifier prefix: ",". Parts: ",""])),se||"null",le.length);break}default:g.type}}return a.add(e.otid),d}l.removeDeprecatedProtobufRestoreArgs=x,l.createUnstoredDbContentFromProtobufObject=N,l.decodeProtobufArray=H,l.decodeDecryptedMessageProtobuf=G}),98);
__d("MAWUpdateClientRestoreStatusOperationType",[],(function(t,n,r,o,a,i){"use strict";var e=0,l=1;i.upsertClientRestoreStatus=e,i.markCompleteClientRestoreStatus=l}),66);/*FB_PKG_DELIM*/
__d("$",["fb-error-lite"],(function(t,n,r,o,a,i,l){function e(e){return u(e,typeof e=="string"?document.getElementById(e):e)}function s(e){return u(e,typeof e=="string"?document.getElementById(e):e)}function u(e,t){if(!t){var n=r("fb-error-lite").err('Tried to get element with id of "%s" but it is not present on the page',String(e));throw n.taalOpcodes=n.taalOpcodes||[],n.taalOpcodes=[r("fb-error-lite").TAALOpcode.PREVIOUS_FILE],n}return t}e.fromIDOrElement=s,l.default=e}),98);
__d("XAdsCMAccountSettingsPageControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/ads/manager/account/settings/",Object.freeze({tab:"information",highlight_tax_id:!1}),new Set(["highlight_tax_id"])),s=e;l.default=s}),98);
__d("XAdsCMControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/ads/manager/{?page}/{?tab}/",Object.freeze({help_tray:!1,no_redirect:!1,pixel_conversion_dialog:!1,show_edit_modal:!1,is_split_test:!1,m2w:!1,ads_manager_read_regions:!1}),void 0),s=e;l.default=s}),98);
__d("XAdsPEControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/adsmanager/",Object.freeze({_fb_noscript:!1,ad_page_id:0,ads_manager_read_regions:!1,ads_manager_write_regions:!1,adset_page_id:0,auto_transform_dialog:!1,breakdown_regrouping:!1,campaign_page_id:0,creative_page_id:0,duplicate_ad:!1,duplicate_campaign:!1,duplicate_campaign_upgrade:!1,external_creation:!1,external_creation_from_url:!1,focus_mode:!1,from_ads_ai:!1,gtao:!0,insights_section:"performance",insights_subsection:"results",is_mfr_model_shown_by_default:!1,is_redirected_default:!1,is_reload_from_account_change:!1,is_split_test:!1,launch_quick_creation:!1,mdsa_eligibility:!1,recommendation_read_only:!1,root_level:"campaign",show_dfca_create_audience_modal:!1,show_inbox_re_tos:!1,show_inline_verification:!1,show_mm_onboarding_modal:!1,show_review:!1,show_select_post_modal:!1,show_shops_messaging_opt_out_modal:!1,show_view_history:!1,treenav:!0}),void 0),s=e;l.default=s}),98);
__d("AdsManagerConstURIUtils",["AdsManagerReadRegions","XAdsCMAccountSettingsPageControllerRouteBuilder","XAdsCMControllerRouteBuilder","XAdsPEControllerRouteBuilder","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){var o=r("XAdsPEControllerRouteBuilder").buildUri(babelHelpers.extends({},n,{nav_entry_point:t!=null?t:void 0,nav_source:e}));return m(o)}function s(e,t,n){var o=r("XAdsCMControllerRouteBuilder").buildUri(babelHelpers.extends({},n,{nav_entry_point:t!=null?t:void 0,nav_source:e}));return m(o)}function u(e,t,n){var o=r("XAdsCMAccountSettingsPageControllerRouteBuilder").buildUri(babelHelpers.extends({},n,{nav_entry_point:t!=null?t:void 0,nav_source:e}));return m(o)}function c(e){return!!(window.location.host.includes("adsmanager")&&!r("AdsManagerReadRegions").excluded_endpoints.some(function(t){return e.includes(t)})&&r("gkx")("1221"))}function d(e,t){return t===void 0&&(t=!0),!!(window.location.host.includes("adsmanager")&&r("gkx")("13382")&&(r("AdsManagerReadRegions").excluded_endpoints.some(function(t){return e.includes(t)})||!t))}function m(e){return c(e.toString())?e.addQueryParam("ads_manager_read_regions","true"):d(e.toString())?e.addQueryParam("ads_manager_write_regions","true"):(e.getQueryParam("ads_manager_read_regions")!==null||e.getQueryParam("ads_manager_write_regions")!==null)&&(e.removeQueryParam("ads_manager_read_regions"),e.removeQueryParam("ads_manager_write_regions")),e}l.getAdsManagerURI=e,l.getXAdsCMControllerURI=s,l.getXAdsCMAccountSettingsPageURI=u,l.shouldRouteToAMReadRegions=c,l.shouldRouteToAMWriteRegions=d}),98);
__d("ArbiterMixin",["Arbiter","guid"],(function(t,n,r,o,a,i,l){var e="arbiter$"+r("guid")(),s=Object.prototype.hasOwnProperty,u={_getArbiterInstance:function(){return s.call(this,e)?this[e]:this[e]=new(r("Arbiter"))},inform:function(t,n,r){return this._getArbiterInstance().inform(t,n,r)},subscribe:function(t,n,r){return this._getArbiterInstance().subscribe(t,n,r)},subscribeOnce:function(t,n,r){return this._getArbiterInstance().subscribeOnce(t,n,r)},unsubscribe:function(t){this._getArbiterInstance().unsubscribe(t)},unsubscribeCurrentSubscription:function(){this._getArbiterInstance().unsubscribeCurrentSubscription()},releaseCurrentPersistentEvent:function(){this._getArbiterInstance().releaseCurrentPersistentEvent()},registerCallback:function(t,n){return this._getArbiterInstance().registerCallback(t,n)},query:function(t){return this._getArbiterInstance().query(t)}},c=u;l.default=c}),98);
__d("CSS",["$","CSSCore"],(function(t,n,r,o,a,i,l){var e=typeof window!="undefined"?window.CSS:null,s="hidden_elem",u=e&&e.supports.bind(e);function c(e,t){return r("$").fromIDOrElement(e).className=t||"",e}function d(e,t){return e instanceof Document||e instanceof Text?!1:o("CSSCore").hasClass(r("$").fromIDOrElement(e),t)}function m(e,t){return e instanceof Document||e instanceof Text?!1:o("CSSCore").matchesSelector(r("$").fromIDOrElement(e),t)}function p(e,t){return o("CSSCore").addClass(r("$").fromIDOrElement(e),t)}function _(e,t){return o("CSSCore").removeClass(r("$").fromIDOrElement(e),t)}function f(e,t,n){return o("CSSCore").conditionClass(r("$").fromIDOrElement(e),t,!!n)}function g(e,t){return f(e,t,!d(e,t))}function h(e){return!d(e,s)}function y(e){return p(e,s)}function C(e){return _(e,s)}function b(e){return g(e,s)}function v(e,t){return f(e,s,!t)}l.supports=u,l.setClass=c,l.hasClass=d,l.matchesSelector=m,l.addClass=p,l.removeClass=_,l.conditionClass=f,l.toggleClass=g,l.shown=h,l.hide=y,l.show=C,l.toggle=b,l.conditionShow=v}),98);
__d("isTextNode",["isNode"],(function(t,n,r,o,a,i,l){function e(e){return r("isNode")(e)&&e.nodeType==3}l.default=e}),98);
__d("containsNode",["isTextNode"],(function(t,n,r,o,a,i,l){function e(t,n){return!t||!n?!1:t===n?!0:r("isTextNode")(t)?!1:r("isTextNode")(n)?e(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1}l.default=e}),98);
__d("createArrayFromMixed",["invariant"],(function(t,n,r,o,a,i,l,s){function e(e){var t=e.length;if(!Array.isArray(e)&&(typeof e=="object"||typeof e=="function")||s(0,3914),typeof t=="number"||s(0,3915),t===0||t-1 in e||s(0,3916),typeof e.callee!="function"||s(0,3917),e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}function u(e){return!!e&&(typeof e=="object"||typeof e=="function")&&"length"in e&&!("setInterval"in e)&&typeof e.nodeType!="number"&&(Array.isArray(e)||"callee"in e||"item"in e)}function c(t){return u(t)?Array.isArray(t)?t.slice():e(t):[t]}l.default=c}),98);
__d("createObjectFrom",[],(function(t,n,r,o,a,i){"use strict";function e(t,n){if(n===void 0)return e(t,!0);var r={};if(Array.isArray(n))for(var o=t.length-1;o>=0;o--)r[t[o]]=n[o];else for(var a=t.length-1;a>=0;a--)r[t[a]]=n;return r}i.default=e}),66);
__d("isElementNode",["isNode"],(function(t,n,r,o,a,i){function e(e){return n("isNode")(e)&&e.nodeType==1}a.exports=e}),null);
__d("DOMQuery",["CSS","FBLogger","containsNode","createArrayFromMixed","createObjectFrom","ge","ifRequired","isElementNode","isNode"],(function(t,n,r,o,a,i,l){var e=/^\.-?[_a-zA-Z]+[\w-]*$/;function s(e,t){return e.hasAttribute?e.hasAttribute(t):e.getAttribute(t)!==null}function u(e,t){var n=d(e,t);return n[0]}function c(e,t,n){var r=d(e,t),o=d(e,n),a;return r.length===1&&o.length===1&&r[0]===o[0]?a=r:a=r.concat(o),a[0]}function d(t,n){if(!t||!t.getElementsByTagName)return[];for(var a=n.split(" "),i=[t],l=0;l<a.length&&i.length!==0;l++)if(a[l]!==""){var u=a[l],c=a[l],d=[],m=!1;if(u.charAt(0)=="^")if(l===0)m=!0,u=u.slice(1);else return[];u=u.replace(/\[(?:[^=\]]*=(?:\"[^\"]*\"|\'[^\']*\'))?|[.#]/g," $&");var p=u.split(" "),_=p[0]||"*",f=_=="*",g=p[1]&&p[1].charAt(0)=="#";if(g){var h=r("ge")(p[1].slice(1),t,_);if(h&&(f||h.tagName.toLowerCase()==_)){for(var y=0;y<i.length;y++)if(m&&r("containsNode")(h,i[y])){d=[h];break}else if(document==i[y]||r("containsNode")(i[y],h)&&i[y]!==h){d=[h];break}}}else{for(var C=[],b=i.length,v,S=!m&&c.indexOf("[")<0&&document.querySelectorAll,R=0;R<b;R++){if(m){v=[];for(var L=i[R].parentNode;r("isElementNode")(L);)(f||L.tagName.toLowerCase()==_)&&v.push(L),L=L.parentNode}else S?e.test(c)?v=i[R].getElementsByClassName(c.substring(1)):v=i[R].querySelectorAll(c):v=i[R].getElementsByTagName(_);for(var E=v.length,k=0;k<E;k++)C.push(v[k])}if(!S)for(var I=1;I<p.length;I++){var T=p[I],D=T.charAt(0)==".",x=T.substring(1);for(R=0;R<C.length;R++){var $=C[R];if(!(!$||$.nodeType!==1))if(D){o("CSS").hasClass($,x)||delete C[R];continue}else{var P=T.slice(1,T.length-1),N=P.indexOf("=");if(N<0){if(!s($,P)){delete C[R];continue}}else{var M=P.substr(0,N),w=P.substr(N+1);if(w=w.slice(1,w.length-1),$.getAttribute(M)!=w){delete C[R];continue}}}}}for(R=0;R<C.length&&!(C[R]&&(d.push(C[R]),m));R++);}i=d}return i}function m(){var e=window.getSelection;if(e)return e()+"";var t=document.selection;return t?t.createRange().text:null}function p(e,t){return(typeof e=="string"||typeof t=="string")&&r("FBLogger")("dom_query").info("Support for node IDs is deprecated. Use containsNode(ge(<id1>), ge(<id2>)) instead"),r("containsNode")(r("ge")(e),r("ge")(t))}function _(){var e=r("ifRequired")("Quickling",function(e){return e.isActive()?r("ge")("content"):null});return e||document.body}function f(e,t){var n=r("createArrayFromMixed")(t).join("|").toUpperCase().split("|"),o=r("createObjectFrom")(n);return r("isNode")(e)&&e.nodeName in o}function g(e){return f(e,["input","textarea"])||e.contentEditable==="true"}l.find=u,l.findPushSafe=c,l.scry=d,l.getSelection=m,l.contains=p,l.getRootElement=_,l.isNodeOfType=f,l.isInputNode=g}),98);
__d("DOMEvent",["invariant"],(function(t,n,r,o,a,i,l,s){var e=(function(){function e(e){this.event=e||window.event,typeof this.event.srcElement!="unknown"||s(0,5798),this.target=this.event.target||this.event.srcElement}var t=e.prototype;return t.preventDefault=function(){var e=this.event;return e.preventDefault?(e.preventDefault(),"defaultPrevented"in e||(e.defaultPrevented=!0)):e.returnValue=!1,this},t.isDefaultPrevented=function(){var e=this.event;return"defaultPrevented"in e?e.defaultPrevented:e.returnValue===!1},t.stopPropagation=function(){var e=this.event;return e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,this},t.kill=function(){return this.stopPropagation().preventDefault(),this},e.killThenCall=function(n){return function(t){return new e(t).kill(),n()}},e})();l.default=e}),98);
__d("dedupString",[],(function(t,n,r,o,a,i){"use strict";function e(e){var t;return Object.keys((t={},t[e]=0,t))[0]}i.default=e}),66);
__d("wrapFunction",[],(function(t,n,r,o,a,i){var e={};function l(t,n,r){var o=n in e?e[n](t,r):t;return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return o.apply(this,t)}}l.setWrapper=function(t,n){e[n]=t},i.default=l}),66);
__d("DOMEventListener",["invariant","dedupString","emptyFunction","passiveEventListenerUtil","wrapFunction"],(function(t,n,r,o,a,i,l){var e=n("passiveEventListenerUtil").isPassiveEventListenerSupported,s,u;window.addEventListener?(s=function(r,o,a,i){i===void 0&&(i=!1),a.wrapper=n("wrapFunction")(a,"entry",n("dedupString")("DOMEventListener.add "+o)),r.addEventListener(o,a.wrapper,e?i:!1)},u=function(n,r,o,a){a===void 0&&(a=!1),n.removeEventListener(r,o.wrapper,e?a:!1)}):window.attachEvent?(s=function(t,r,o,a){a===void 0&&(a=!1),o.wrapper=n("wrapFunction")(o,"entry","DOMEventListener.add "+r),t.attachEvent||l(0,2798),t.attachEvent("on"+r,o.wrapper)},u=function(t,n,r,o){o===void 0&&(o=!1),t.detachEvent||l(0,2799),t.detachEvent("on"+n,r.wrapper)}):u=s=n("emptyFunction");var c={add:function(t,n,r,o){return o===void 0&&(o=!1),s(t,n,r,o),{remove:function(){u(t,n,r,typeof o=="boolean"?o:o.capture)}}},remove:u};a.exports=c}),null);
__d("DataStore",["DataStoreConfig","gkx","isEmpty"],(function(t,n,r,o,a,i){"use strict";var e,l=n("DataStoreConfig").expandoKey,s=n("DataStoreConfig").useExpando,u=n("gkx")("25572")&&window.WeakMap?new window.WeakMap:null,c={},d=1;function m(e){if(typeof e=="string")return"str_"+e;var t;return"elem_"+((t=e.__FB_TOKEN)!=null?t:e.__FB_TOKEN=[d++])[0]}function p(e){if(u!=null&&typeof e=="object")return u.get(e)===void 0&&u.set(e,{}),u.get(e);if(s&&typeof e=="object")return e[l]||(e[l]={});var t=m(e);return c[t]||(c[t]={})}var _={set:function(t,n,r){if(!t)throw new TypeError("DataStore.set: namespace is required, got "+typeof t);var e=p(t);return e[n]=r,t},get:function(t,n,r){if(!t)throw new TypeError("DataStore.get: namespace is required, got "+typeof t);var e=p(t),o=e[n];if(o===void 0&&t.getAttribute!=null)if(t.hasAttribute!=null&&!t.hasAttribute("data-"+n))o=void 0;else{var a=t.getAttribute("data-"+n);o=a===null?void 0:a}return r!==void 0&&o===void 0&&(o=e[n]=r),o},remove:function(r,o){if(!r)throw new TypeError("DataStore.remove: namespace is required, got "+typeof r);var t=p(r),a=t[o];return delete t[o],(e||(e=n("isEmpty")))(t)&&_.purge(r),a},purge:function(t){if(u!=null&&typeof t=="object")return u.delete(t);s&&typeof t=="object"?delete t[l]:delete c[m(t)]},_storage:c};a.exports=_}),null);
__d("Scroll",[],(function(t,n,r,o,a,i){function e(e,t){return!!t&&(e===t.documentElement||e===t.body)}function l(t){var n,r;if(t==null)return 0;var o=t.ownerDocument;return e(t,o)?(o==null||(n=o.body)==null?void 0:n.scrollTop)||(o==null||(r=o.documentElement)==null?void 0:r.scrollTop)||0:t.scrollTop||0}function s(t,n){if(t!=null){var r=t.ownerDocument;e(t,r)?(r!=null&&r.body&&(r.body.scrollTop=n||0),r!=null&&r.documentElement&&(r.documentElement.scrollTop=n||0)):t.scrollTop=n||0}}function u(t){var n,r,o=t.ownerDocument;return e(t,o)?(o==null||(n=o.body)==null?void 0:n.scrollLeft)||(o==null||(r=o.documentElement)==null?void 0:r.scrollLeft)||0:t.scrollLeft||0}function c(t,n){var r=t.ownerDocument;e(t,r)?(r!=null&&r.body&&(r.body.scrollLeft=n||0),r!=null&&r.documentElement&&(r.documentElement.scrollLeft=n||0)):t.scrollLeft=n||0}i.getTop=l,i.setTop=s,i.getLeft=u,i.setLeft=c}),66);
__d("FlowMigrationUtilsForLegacyFiles",["FBLogger"],(function(t,n,r,o,a,i,l){"use strict";var e="flow_typing_for_legacy_code";function s(t){return r("FBLogger")(e).blameToPreviousFile().event(e+".bad_call").mustfix(t),new Error("["+e+"] "+t)}l.invariantViolation=s}),98);
__d("getDocumentScrollElement",["FlowMigrationUtilsForLegacyFiles"],(function(t,n,r,o,a,i,l){"use strict";var e=typeof navigator!="undefined"&&navigator.userAgent.indexOf("AppleWebKit")>-1;function s(t){var n=t||document;if(n.scrollingElement)return n.scrollingElement;var r=!e&&n.compatMode==="CSS1Compat"?n.documentElement:n.body;return r||o("FlowMigrationUtilsForLegacyFiles").invariantViolation("null result in getDocumentScrollElement"),r}l.default=s}),98);
__d("getObjectValues",[],(function(t,n,r,o,a,i){function e(e){var t=[];for(var n in e)t.push(e[n]);return t}i.default=e}),66);
__d("Event",["$","Arbiter","DOMEvent","DOMEventListener","DOMQuery","DataStore","ErrorGuard","ExecutionEnvironment","FBLogger","Parent","Scroll","TimeSlice","UserAgent","dedupString","fb-error","getDocumentScrollElement","getObjectValues"],(function(t,n,r,o,a,i){var e,l,s=n("fb-error").TAAL,u="Event.listeners";Event.prototype||(Event.prototype={});function c(e){(e.type==="click"||e.type==="mouseover"||e.type==="keydown")&&n("Arbiter").inform("Event/stop",{event:e})}var d=(function(){"use strict";function e(e,t,n){this.cancelBubble=!1,this.target=e,this.type=t,this.data=n}var t=e.prototype;return t.getData=function(){return this.data=this.data||{},this.data},t.stop=function(){return Event.stop(this)},t.prevent=function(){return Event.prevent(this)},t.isDefaultPrevented=function(){return Event.isDefaultPrevented(this)},t.kill=function(){return Event.kill(this)},t.getTarget=function(){return new(n("DOMEvent"))(this).target||null},e})();function m(e){if(e instanceof d)return e;if(e||(!window.addEventListener&&document.createEventObject?e=window.event?document.createEventObject(window.event):{}:e={}),!e._inherits_from_prototype)for(var t in Event.prototype)try{e[t]=Event.prototype[t]}catch(e){}return e}Object.assign(Event.prototype,{_inherits_from_prototype:!0,getRelatedTarget:function(){var e=this.relatedTarget||(this.fromElement===this.srcElement?this.toElement:this.fromElement);return e&&e.nodeType?e:null},getModifiers:function(){var e={control:!!this.ctrlKey,shift:!!this.shiftKey,alt:!!this.altKey,meta:!!this.metaKey};return e.access=n("UserAgent").isPlatform("Mac OS X")?e.control:e.alt,e.any=e.control||e.shift||e.alt||e.meta,e},isRightClick:function(){return this.which?this.which===3:this.button&&this.button===2},isMiddleClick:function(){return this.which?this.which===2:this.button&&this.button===4},isDefaultRequested:function(){return this.getModifiers().any||this.isMiddleClick()||this.isRightClick()}},d.prototype);var p={listen:function(r,o,a,i,l){if(typeof a=="function"&&(a=n("TimeSlice").guard(a,n("dedupString")("Event.js "+o+" handler"))),!l||typeof l=="boolean"?l={passive:!1}:l={passive:l.passive||!1},!(e||(e=n("ExecutionEnvironment"))).canUseDOM)return new R(r,a,null,o,i,null,l);if(typeof r=="string"&&(r=n("$")(r)),typeof i=="undefined"&&(i=Event.Priority.NORMAL),typeof o=="object"){var t={};for(var c in o)t[c]=Event.listen(r,c,o[c],i,l);return t}if(o.match(/^on/i))throw new TypeError("Bad event name `"+o+"': use `click', not `onclick'.");if(!r){var d=s.blameToPreviousFrame(new Error("Cannot listen to an undefined element."));throw n("FBLogger")("event").catching(d).mustfix("Tried to listen to element of type %s",o),d}if(r.nodeName=="LABEL"&&o=="click"){var m=r.getElementsByTagName("input");r=m.length==1?m[0]:r}else if(r===window&&o==="scroll"){var p=n("getDocumentScrollElement")();p!==document.documentElement&&p!==document.body&&(r=p)}var _=n("DataStore").get(r,u,{}),f=g[o];f&&(o=f.base,f.wrap&&(a=f.wrap(a))),C(r,_,o,l);var h=_[o];i in h||(h[i]=[]);var b=h[i].length,v=new R(r,a,_,o,i,b,l);return h[i][b]=v,h.numHandlers++,l.passive||(h.numNonPassiveHandlers++,y(r,_[o],o)),v},stop:function(t){var e=new(n("DOMEvent"))(t).stopPropagation();return c(e.event),t},prevent:function(t){return new(n("DOMEvent"))(t).preventDefault(),t},isDefaultPrevented:function(t){return new(n("DOMEvent"))(t).isDefaultPrevented(t)},kill:function(t){var e=new(n("DOMEvent"))(t).kill();return c(e.event),!1},getKeyCode:function(t){if(t=new(n("DOMEvent"))(t).event,!t)return!1;switch(t.keyCode){case 63232:return 38;case 63233:return 40;case 63234:return 37;case 63235:return 39;case 63272:case 63273:case 63275:return null;case 63276:return 33;case 63277:return 34}if(t.shiftKey)switch(t.keyCode){case 33:case 34:case 37:case 38:case 39:case 40:return null}return t.keyCode},getPriorities:function(){if(!_){var e=n("getObjectValues")(Event.Priority);e.sort(function(e,t){return e-t}),_=e}return _},fire:function(t,n,r){var e=new d(t,n,r),o;do{var a=Event.__getHandler(t,n);a&&(o=a(e)),t=t.parentNode}while(t&&o!==!1&&!e.cancelBubble);return o!==!1},__fire:function(t,n,r){var e=Event.__getHandler(t,n);if(e)return e(m(r))},__getHandler:function(t,r){var e=n("DataStore").get(t,u);return e&&e[r]?e[r].domHandler:t["on"+r]},getPosition:function(t){t=new(n("DOMEvent"))(t).event;var e=n("getDocumentScrollElement")(),r=t.clientX+n("Scroll").getLeft(e),o=t.clientY+n("Scroll").getTop(e);return{x:r,y:o}}};Object.assign(Event,p);var _=null,f=function(t){return function(e){if(!n("DOMQuery").contains(this,e.getRelatedTarget()))return t.call(this,e)}},g;if(window.navigator.msPointerEnabled?g={mousedown:{base:"MSPointerDown"},mousemove:{base:"MSPointerMove"},mouseup:{base:"MSPointerUp"},mouseover:{base:"MSPointerOver"},mouseout:{base:"MSPointerOut"},mouseenter:{base:"MSPointerOver",wrap:f},mouseleave:{base:"MSPointerOut",wrap:f}}:g={mouseenter:{base:"mouseover",wrap:f},mouseleave:{base:"mouseout",wrap:f}},n("UserAgent").isBrowser("Firefox < 52")){var h=function(t,n){n=m(n);for(var e=n.getTarget();e;)Event.__fire(e,t,n),e=e.parentNode};document.documentElement.addEventListener("focus",h.bind(null,"focusin"),!0),document.documentElement.addEventListener("blur",h.bind(null,"focusout"),!0)}var y=function(t,r,o){var e=r.numNonPassiveHandlers==0;e!=r.options.passive&&(r.domHandlerRemover.remove(),r.options.passive=e,r.domHandlerRemover=n("DOMEventListener").add(t,o,r.domHandler,{passive:e}))},C=function(t,r,o,a){if(!(o in r)){var e=n("TimeSlice").guard(S.bind(t,o),n("dedupString")("Event listenHandler "+o));r[o]={numHandlers:0,numNonPassiveHandlers:0,domHandlerRemover:n("DOMEventListener").add(t,o,e,a),domHandler:e,options:a};var i="on"+o;if(t[i]){var l=t===document.documentElement?Event.Priority._BUBBLE:Event.Priority.TRADITIONAL,s=t[i];t[i]=null,Event.listen(t,o,s,l,a)}}};function b(e){return e.href.endsWith("#")?e.href===document.location.href||e.href===document.location.href+"#":!1}function v(e,t){return e.nodeName==="INPUT"&&e.type===t}var S=function(t,r){var e=m(r);if(!n("DataStore").get(this,u))throw new Error("Bad listenHandler context.");var o=n("DataStore").get(this,u)[t];if(!o)throw new Error("No registered handlers for `"+t+"'.");if(t=="click"||t=="contextmenu"||t=="mousedown"&&e.which==2){var a=e.getTarget(),i=n("Parent").byTag(a,"a");i instanceof HTMLAnchorElement&&i.href&&b(i)&&!v(a,"file")&&!v(a,"submit")&&e.prevent()}for(var l=Event.getPriorities(),s=0;s<l.length;s++){var c=l[s];if(c in o){for(var d=o[c],p=0;p<d.length;p++)if(d[p]){var _=d[p].fire(this,e);if(_===!1)return e.kill();e.cancelBubble&&e.stop()}}}return e.returnValue};Event.Priority={URGENT:-20,TRADITIONAL:-10,NORMAL:0,_BUBBLE:1e3};var R=(function(){"use strict";function t(e,t,n,r,o,a,i){this.$1=e,this.$2=t,this.$3=n,this.$7=r,this.$6=o,this.$4=a,this.$5=i}var r=t.prototype;return r.isRemoved=function(){return!this.$3},r.remove=function(){if((e||(e=n("ExecutionEnvironment"))).canUseDOM){if(this.isRemoved()){n("FBLogger")("Event").warn("Event handler has already been removed");return}var t=this.$3[this.$7];t.numHandlers<=1?(t.domHandlerRemover.remove(),delete this.$3[this.$7]):(delete t[this.$6][this.$4],t.numHandlers--,this.$5.passive||(t.numNonPassiveHandlers--,y(this.$1,this.$3[this.$7],this.$7))),this.$3=null}},r.fire=function(r,o){return(e||(e=n("ExecutionEnvironment"))).canUseDOM?(l||(l=n("ErrorGuard"))).applyWithGuard(this.$2,r,[o],{name:"eventhandler:"+o.type+":"+(typeof r.name=="string"?r.name:r.id)}):!0},t})();t.$E=Event.$E=m,a.exports=Event}),null);
__d("TrustedTypesLinkTagHTMLPolicy",["TrustedTypes","err"],(function(t,n,r,o,a,i,l){"use strict";var e={createHTML:function(t){if(t==="<link />")return t;throw r("err")("Violating Trusted Type policies. Only works for '<link />' strings.")}},s=r("TrustedTypes").createPolicy("link-tag-html",e),u=s;l.default=u}),98);
__d("getMarkupWrap",["invariant","ExecutionEnvironment","TrustedTypesLinkTagHTMLPolicy"],(function(t,n,r,o,a,i,l,s){var e,u=(e||(e=r("ExecutionEnvironment"))).canUseDOM?document.createElement("div"):null,c={},d=[1,'<select multiple="true">',"</select>"],m=[1,"<table>","</table>"],p=[3,"<table><tbody><tr>","</tr></tbody></table>"],_=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],f={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:d,option:d,caption:m,colgroup:m,tbody:m,tfoot:m,thead:m,td:p,th:p},g=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];g.forEach(function(e){f[e]=_,c[e]=!0});function h(e){var t=e;return u||s(0,144),Object.prototype.hasOwnProperty.call(f,t)||(t="*"),Object.prototype.hasOwnProperty.call(c,t)||(t==="*"?u.innerHTML=r("TrustedTypesLinkTagHTMLPolicy").createHTML("<link />"):u.innerHTML="<"+t+"></"+t+">",c[t]=!u.firstChild),c[t]?f[t]:null}l.default=h}),98);
__d("createNodesFromMarkup",["invariant","ExecutionEnvironment","TrustedTypesNoOpPolicy_DO_NOT_USE","getMarkupWrap"],(function(t,n,r,o,a,i,l,s){var e,u=(e||(e=r("ExecutionEnvironment"))).canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;function d(e){var t=e.match(c);return t&&t[1].toLowerCase()}function m(e,t){var n=u;u||s(0,5001);var o=d(e),a=o&&r("getMarkupWrap")(o);if(a){n.innerHTML=a[1]+e+a[2];for(var i=a[0];i--;)n=n.lastChild}else n.innerHTML=r("TrustedTypesNoOpPolicy_DO_NOT_USE").createHTML(e);var l=n.getElementsByTagName("script");l.length&&(t||s(0,5002),Array.from(l).forEach(t));for(var c=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return c}l.default=m}),98);
__d("evalGlobal",[],(function(t,n,r,o,a,i){function e(e){if(typeof e!="string")throw new TypeError("JS sent to evalGlobal is not a string. Only strings are permitted.");if(e){var t=document.createElement("script");try{t.appendChild(document.createTextNode(e))}catch(n){t.text=e}var n=document.getElementsByTagName("head")[0]||document.documentElement;n.appendChild(t),n.removeChild(t)}}i.default=e}),66);
__d("HTML",["invariant","Bootloader","FBLogger","createNodesFromMarkup","emptyFunction","evalGlobal"],(function(t,n,r,o,a,i,l){var e=/(<(\w+)[^>]*?)\/>/g,s={abbr:!0,area:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0},u=(function(){"use strict";function t(e){if(e&&typeof e.__html=="string"&&(e=e.__html),!(this instanceof t))return e instanceof t?e:new t(e);if(e){var r=typeof e;r==="string"||l(0,277,r)}this.$1=e||"",this.$2=!1,this.$3=null,this.$4=n("emptyFunction"),this.$5=null,this.$6=!1}var r=t.prototype;return r.toString=function(){return this.$1},r.getContent=function(){return this.$1},r.getNodes=function(){return this.$7(),this.$3},r.getRootNode=function(){!this.$5||l(0,278);var e=this.getNodes();if(e.length===1)this.$5=e[0];else{for(var t=document.createDocumentFragment(),n=0;n<e.length;n++)t.appendChild(e[n]);this.$5=t}return this.$5},r.getAction=function(){var e=this;this.$7();var t=function(){e.$4()};return this.$2?function(){setTimeout(t,0)}:t},r.$7=function(){if(this.$3===null){if(!this.$1){this.$3=[];return}var t=this.$1.replace(e,function(e,t,n){return s[n.toLowerCase()]?e:t+"></"+n+">"}),r=null,o=n("createNodesFromMarkup")(t,function(e){n("FBLogger")("staticresources").warn("HTML: encountered script node while parsing, hasSrc=%s, type=%s",!!e.src,e.type==null||e.type===""?"<unknown>":e.type),e.type!=="application/ld+json"&&e.type!=="application/json"&&(r=r||[],r.push(e.src?n("Bootloader").requestJSResource_UNSAFE_NEEDS_REVIEW_BY_SECURITY_AND_XFN.bind(n("Bootloader"),e.src):n("evalGlobal").bind(null,e.innerHTML)),e.parentNode.removeChild(e))});r&&(this.$6=!0,this.$4=function(){for(var e=0;e<r.length;e++)r[e]()}),this.$3=o}},r.setDeferred=function(t){return this.$2=!!t,this},r.hasInlineJs=function(){return this.$6},t.isHTML=function(n){return!!n&&(n instanceof t||n.__html!==void 0)},t.replaceJSONWrapper=function(n){return n&&n.__html!==void 0?new t(n.__html):n},t})();a.exports=u}),null);
__d("TrustedTypesIEFixDOMPolicy",["TrustedTypes"],(function(t,n,r,o,a,i,l){"use strict";var e={createHTML:function(t){return t}},s=r("TrustedTypes").createPolicy("dom-ie-fix",e),u=s;l.default=u}),98);
__d("UserAgent_DEPRECATED",[],(function(t,n,r,o,a,i){var e=!1,l,s,u,c,d,m,p,_,f,g,h,y,C,b,v,S;function R(){if(!e){e=!0;var t=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),r=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(y=/\b(iPhone|iP[ao]d)/.exec(t),C=/\b(iP[ao]d)/.exec(t),g=/Android/i.exec(t),b=/FBAN\/\w+;/i.exec(t),v=/FBAN\/mLite;/i.exec(t),S=/Mobile/i.exec(t),h=!!/Win64/.exec(t),n){l=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN,l&&document&&document.documentMode&&(l=document.documentMode);var o=/(?:Trident\/(\d+.\d+))/.exec(t);m=o?parseFloat(o[1])+4:l,s=n[2]?parseFloat(n[2]):NaN,u=n[3]?parseFloat(n[3]):NaN,c=n[4]?parseFloat(n[4]):NaN,c?(n=/(?:Chrome\/(\d+\.\d+))/.exec(t),d=n&&n[1]?parseFloat(n[1]):NaN):d=NaN}else l=s=u=d=c=NaN;if(r){if(r[1]){var a=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);p=a?parseFloat(a[1].replace("_",".")):!0}else p=!1;_=!!r[2],f=!!r[3]}else p=_=f=!1}}function L(){return R(),l}function E(){return R(),m>l}function k(){return L()&&h}function I(){return R(),s}function T(){return R(),u}function D(){return R(),c}function x(){return D()}function $(){return R(),d}function P(){return R(),_}function N(){return R(),p}function M(){return R(),f}function w(){return R(),y}function A(){return R(),y||C||g||S}function F(){return R(),v!=null?null:b}function O(){return R(),g}function B(){return R(),C}i.ie=L,i.ieCompatibilityMode=E,i.ie64=k,i.firefox=I,i.opera=T,i.webkit=D,i.safari=x,i.chrome=$,i.windows=P,i.osx=N,i.linux=M,i.iphone=w,i.mobile=A,i.nativeApp=F,i.android=O,i.ipad=B}),66);
__d("isScalar",[],(function(t,n,r,o,a,i){function e(e){return/string|number|boolean/.test(typeof e)}i.default=e}),66);
__d("DOM",["$","DOMQuery","Event","FBLogger","FbtResultBase","HTML","TrustedTypesIEFixDOMPolicy","UserAgent_DEPRECATED","createArrayFromMixed","fb-error","isNode","isScalar","isTextNode"],(function(t,n,r,o,a,i,l){var e,s=function(t,n,r){var e=document.createElement(t);return n&&u.setAttributes(e,n),r!=null&&u.setContent(e,r),e},u={find:(e=o("DOMQuery")).find,findPushSafe:e.findPushSafe,scry:e.scry,getSelection:e.getSelection,contains:e.contains,getRootElement:e.getRootElement,isNodeOfType:e.isNodeOfType,isInputNode:e.isInputNode,create:s,setAttributes:function(t,n){n.type&&(t.type=n.type);for(var e in n){var o=n[e],a=/^on/i.test(e);a&&typeof o!="function"&&r("FBLogger")("dom").warn("Handlers passed to DOM.setAttributes must be functions. Handler passed for %s was %s",e,typeof o),e!="type"&&(e=="style"?typeof o=="string"?t.style.cssText=o:Object.assign(t.style,o):a?r("Event").listen(t,e.substr(2),o):e in t?t[e]=o:t.setAttribute&&t.setAttribute(e,o))}},prependContent:function(t,n){if(!t)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return d(n,t,function(e){t.firstChild?t.insertBefore(e,t.firstChild):t.appendChild(e)})},insertAfter:function(t,n){if(!t||!t.parentNode)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var e=t.parentNode;return d(n,e,function(n){t.nextSibling?e.insertBefore(n,t.nextSibling):e.appendChild(n)})},insertBefore:function(t,n){if(!t||!t.parentNode)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var e=t.parentNode;return d(n,e,function(n){e.insertBefore(n,t)})},setContent:function(t,n){if(!t)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));for(;t.firstChild;)c(t.firstChild);return u.appendContent(t,n)},appendContent:function(t,n){if(!t)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element is not a node"));return d(n,t,function(e){t.appendChild(e)})},replace:function(t,n){if(!t||!t.parentNode)throw r("fb-error").TAAL.blameToPreviousFile(new Error("reference element does not have a parent"));var e=t.parentNode;return d(n,e,function(n){e.replaceChild(n,t)})},remove:function(t){c(typeof t=="string"?r("$")(t):t)},empty:function(t){for(t=typeof t=="string"?r("$")(t):t;t.firstChild;)c(t.firstChild)}};function c(e){e.parentNode&&e.parentNode.removeChild(e)}function d(e,t,n){if(e=r("HTML").replaceJSONWrapper(e),e instanceof r("HTML")&&t.firstChild===null&&e.toString().indexOf("<script")===-1){var a=o("UserAgent_DEPRECATED").ie();if(!a||a>7&&!o("DOMQuery").isNodeOfType(t,["table","tbody","thead","tfoot","tr","select","fieldset"])){var i=a?'<em style="display:none;">&nbsp;</em>':"";return t.innerHTML=r("TrustedTypesIEFixDOMPolicy").createHTML(i+e),a&&t.removeChild(t.firstChild),Array.from(t.childNodes)}}else if(r("isTextNode")(t))return t.data=e,[e];var l=document.createDocumentFragment(),s,u=[],c=[],d=!1;e=r("createArrayFromMixed")(e),e.length===1&&e[0]instanceof r("FbtResultBase")&&(e=e[0].getContents());for(var m=0;m<e.length;m++)if(s=r("HTML").replaceJSONWrapper(e[m]),s instanceof r("HTML")){c.push(s.getAction());var p=s.getNodes();!d&&s.hasInlineJs()&&(r("FBLogger")("staticresources").warn("DOM: adding HTML which contains inline JS"),d=!0);for(var _=0;_<p.length;_++)u.push(p[_]),l.appendChild(p[_])}else if(r("isScalar")(s)||s instanceof r("FbtResultBase")){var f=document.createTextNode(s);u.push(f),l.appendChild(f)}else r("isNode")(s)?(u.push(s),l.appendChild(s)):(Array.isArray(s)&&r("FBLogger")("dom").warn("Nest arrays not supported"),s!==null&&r("FBLogger")("dom").warn("No way to set content %s",s));return n(l),c.forEach(function(e){e()}),u}var m=u;l.default=m}),98);
__d("AsyncDOM",["CSS","DOM","FBLogger"],(function(t,n,r,o,a,i){var e={invoke:function(t,r){for(var e=0;e<t.length;++e){var o=t[e],a=o[0],i=o[1],l=o[2],s=o[3],u=l&&r||null;switch(i&&(u=n("DOM").scry(u||document.documentElement,i)[0]),u||n("FBLogger")("async_dom").warn("Could not find relativeTo element for %s AsyncDOM operation based on selector: %s",a,i),a){case"hide":n("CSS").hide(u);break;case"show":n("CSS").show(u);break;case"setContent":n("DOM").setContent(u,s);break;case"appendContent":n("DOM").appendContent(u,s);break;case"prependContent":n("DOM").prependContent(u,s);break;case"insertAfter":n("DOM").insertAfter(u,s);break;case"insertBefore":n("DOM").insertBefore(u,s);break;case"remove":n("DOM").remove(u);break;case"replace":n("DOM").replace(u,s);break;default:n("FBLogger")("async_dom").warn("Received invalid command %s for AsyncDOM operation",a)}}}};a.exports=e}),null);
__d("AsyncResponse",["invariant","Bootloader","FBLogger","HTML","WebDriverConfig"],(function(t,n,r,o,a,i,l,s){"use strict";var e=(function(){function e(e,t){this.error=0,this.errorSummary=null,this.errorDescription=null,this.errorMid=null,this.onload=null,this.replay=!1,this.payload=t,this.request=e,this.silentError=!1,this.transientError=!1,this.blockedAction=!1,this.is_last=!0,this.responseHeaders=null}var t=e.prototype;return t.getRequest=function(){return this.request},t.getPayload=function(){return this.payload},t.toError=function(){this.error!==0||s(0,5599);var e=this.errorSummary||"",t=this.getErrorDescriptionString()||"",n=new Error(e.toString()+": "+t);return Object.assign(n,{code:this.error,description:this.errorDescription||"",descriptionString:t,response:this,summary:e,isSilent:this.silentError,isTransient:this.transientError,mid:this.errorMid}),n},t.getError=function(){return this.error},t.getErrorSummary=function(){return this.errorSummary},t.setErrorSummary=function(t){return t=t===void 0?null:t,this.errorSummary=t,this},t.getErrorDescription=function(){return this.errorDescription},t.getErrorDescriptionString=function(){var e=this.getErrorDescription();if(e==null)return null;if(r("HTML").isHTML(e)){var t=new(r("HTML"))(e);return t.getRootNode().textContent}return e.toString()},t.getErrorIsWarning=function(){return!!this.errorIsWarning},t.isSilent=function(){return!!this.silentError},t.isTransient=function(){return!!this.transientError},t.isBlockedAction=function(){return!!this.blockedAction},t.getResponseHeader=function(t){var e=this.responseHeaders;if(!e)return null;e=e.replace(/^\n/,""),t=t.toLowerCase();for(var n=e.split("\r\n"),r=0;r<n.length;++r){var o=n[r],a=o.indexOf(": ");if(!(a<=0)){var i=o.substring(0,a).toLowerCase();if(i===t)return o.substring(a+2)}}return null},e.defaultErrorHandler=function(n){try{n.silentError?r("FBLogger")("async_response").catching(n.toError()).warn("default error handler called"):e.verboseErrorHandler(n)}catch(e){alert(n)}},e.verboseErrorHandler=function(t,n){r("Bootloader").loadModules(["ExceptionDialog"],function(e){return e.showAsyncError(t,n)},"AsyncResponse")},e})();l.default=e}),98);
__d("FetchStreamConfig",[],(function(t,n,r,o,a,i){var e=Object.freeze({delim:"/*<!-- fetch-stream -->*/"});i.default=e}),66);
__d("StreamBlockReader",[],(function(t,n,r,o,a,i){var e=(function(){function e(e){var t=this;if(!e.getReader)throw new Error("No getReader method found on given object");this.$3=e.getReader(),this.$1="",this.$2=null,this.$4=!1,this.$5="utf-8",this.$6="",this.$9=!1,this.$8=function(){return Promise.reject("Sorry, you are somehow using this too early.")},this.$7=new Promise(function(e,n){t.$8=e})}var t=e.prototype;return t.changeEncoding=function(t){if(this.$2)throw new Error("Decoder already in use, encoding cannot be changed");this.$5=t},t.$10=function(){if(!self.TextDecoder)throw new Error("TextDecoder is not supported here");return this.$2||(this.$2=new self.TextDecoder(this.$5)),this.$2},t.$11=function(){if(this.$9)throw new Error("Something else is already reading from this reader");this.$9=!0},t.$12=function(){this.$9=!1},t.isDone=function(){return this.$4},t.$13=async function(){if(this.$6!==""){var e=this.$6;return this.$6="",e}if(this.isDone())throw new Error("You cannot read from a stream that is done");var t=await this.$3.read(),n=t.done,r=t.value;return this.$4=n,n&&this.$8(),r?this.$10().decode(r,{stream:!n}):""},t.readNextBlock=async function(){this.$11();var e=this.$13();return this.$12(),e},t.readUntilStringOrEnd=async function(t){return await this.readUntilOneOfStringOrEnd_DO_NOT_USE([t])},t.readUntilStringOrThrow=async function(t){if(!t)throw new Error("cannot read empty string");this.$11();for(var e="",n=0;!this.isDone();)if(e+=await this.$13(),!(e.length<t.length)){var r=e.substring(n).indexOf(t);if(r!==-1)return r+=n,this.$6=e.substring(r+t.length),this.$12(),e.substring(0,r);n=e.length-t.length+1}throw this.$6=e,this.$12(),new Error("Breakpoint not found")},t.readUntilOneOfStringOrEnd_DO_NOT_USE=async function(t){this.$11();for(var e="";!this.isDone();){e+=await this.$13();for(var n=0;n<t.length;n++){var r=t[n],o=e.indexOf(r);if(o!==-1)return this.$6=e.substring(o+r.length),this.$12(),e.substring(0,o)}}return this.$12(),e},t.waitUntilDone=async function(){return this.$7},e})();i.default=e}),66);
__d("mixin",[],(function(t,n,r,o,a,i){function e(){for(var e=function(){},t=0,n,r=arguments.length,o=new Array(r),a=0;a<r;a++)o[a]=arguments[a];for(;o[t];){n=o[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e.prototype[i]=n[i]);t+=1}return e}i.default=e}),66);
__d("FetchStreamTransport",["ArbiterMixin","FetchStreamConfig","StreamBlockReader","TimeSlice","URI","mixin","nullthrows"],(function(t,n,r,o,a,i,l){var e,s=0,u=(function(t){function n(e){var n;if(!self.ReadableStream||!self.fetch||!Request||!TextDecoder)throw new Error("fetch stream transport is not supported here");return n=t.call(this)||this,n.$FetchStreamTransport$p_6=null,n.$FetchStreamTransport$p_1=e,n.$FetchStreamTransport$p_3=!1,n.$FetchStreamTransport$p_4=!1,n.$FetchStreamTransport$p_5=!1,n.$FetchStreamTransport$p_2=++s,n||babelHelpers.assertThisInitialized(n)}babelHelpers.inheritsLoose(n,t);var o=n.prototype;return o.hasFinished=function(){return this.$FetchStreamTransport$p_5},o.getRequestURI=function(){return new(e||(e=r("URI")))(this.$FetchStreamTransport$p_1).addQueryData({__a:1,__adt:this.$FetchStreamTransport$p_2,__req:"fetchstream_"+this.$FetchStreamTransport$p_2,ajaxpipe_fetch_stream:1})},o.send=function(){if(this.$FetchStreamTransport$p_3)throw new Error("FetchStreamTransport instances cannot be re-used.");this.$FetchStreamTransport$p_3=!0;var e=new Request(this.getRequestURI().toString(),{mode:"same-origin",credentials:"include"});this.$FetchStreamTransport$p_6=r("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on first response");var t=self.fetch(e,{redirect:"follow"});this.$FetchStreamTransport$p_7(t)},o.$FetchStreamTransport$p_7=async function(t){var e=this,n;try{n=await t}catch(e){this.abort()}if(!n||!n.body||!n.ok){this.abort();return}for(var o=new(r("StreamBlockReader"))(n.body),a=async function(){var t=await o.readUntilStringOrEnd(r("FetchStreamConfig").delim);if(e.$FetchStreamTransport$p_4)return 1;r("nullthrows")(e.$FetchStreamTransport$p_6)(function(){var n=JSON.parse(t);o.isDone()||n.finished?e.$FetchStreamTransport$p_5=!0:e.$FetchStreamTransport$p_6=r("TimeSlice").getGuardedContinuation("FetchStreamTransport: waiting on next response"),e.inform("response",n.content)})};!this.$FetchStreamTransport$p_5&&!this.$FetchStreamTransport$p_4&&!await a(););},o.abort=function(){var e=this;if(!(this.$FetchStreamTransport$p_4||this.$FetchStreamTransport$p_5))if(this.$FetchStreamTransport$p_4=!0,this.$FetchStreamTransport$p_5=!0,this.$FetchStreamTransport$p_6){var t=this.$FetchStreamTransport$p_6;t(function(){e.inform("abort")})}else this.inform("abort")},n})(r("mixin")(r("ArbiterMixin")));l.default=u}),98);
__d("HTTPErrors",["emptyFunction"],(function(t,n,r,o,a,i,l){function e(e){return{summary:"HTTP Error",description:"Unknown HTTP error #"+e}}var s={get:e,getAll:r("emptyFunction").thatReturns(new Map)},u=s;l.default=u}),98);
__d("SessionName",["SessionNameConfig"],(function(t,n,r,o,a,i){a.exports={getName:function(){return n("SessionNameConfig").seed}}}),null);
__d("bind",[],(function(t,n,r,o,a,i){function e(e,t){var n=Array.prototype.slice.call(arguments,2);if(typeof t!="string")return Function.prototype.bind.apply(t,[e].concat(n));function r(){var r=n.concat(Array.prototype.slice.call(arguments));if(e[t])return e[t].apply(e,r)}return r.toString=function(){return"bound lazily: "+e[t]},r}a.exports=e}),null);
__d("executeAfter",[],(function(t,n,r,o,a,i){function e(e,t,n){return function(){e.apply(n||this,arguments),t.apply(n||this,arguments)}}a.exports=e}),null);
__d("goURI",["cr:8906"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:8906")}),98);
__d("isSparkDotMetaDotComURI",[],(function(t,n,r,o,a,i){var e=new RegExp("(^|\\.)spark\\.meta\\.com$","i"),l=["https"];function s(t){return t.isEmpty()&&t.toString()!=="#"||!t.getDomain()&&!t.getProtocol()?!1:l.indexOf(t.getProtocol())!==-1&&e.test(t.getDomain())}i.default=s}),66);
__d("AsyncRequest",["errorCode","fbt","invariant","AdsManagerConstURIUtils","Arbiter","AsyncDOM","AsyncRequestConfig","AsyncResponse","Bootloader","CSS","DTSG","DTSG_ASYNC","Deferred","Env","ErrorGuard","Event","FBLogger","FetchStreamTransport","HTTPErrors","HasteResponse","PHPQuerySerializer","Parent","Promise","ResourceTimingsStore","ResourceTypes","Run","ScriptPath","ServerJS","SessionName","TimeSlice","URI","UserAgent_DEPRECATED","ZeroRewrites","bind","clearTimeout","emptyFunction","executeAfter","fb-error","ge","getAsyncHeaders","getAsyncParams","getErrorSafe","gkx","goURI","isAIDemosDotMetaDotComURI","isArDotMetaDotComURI","isBugBountyDotMetaDotComURI","isDevelopersDotMetaDotComURI","isEmpty","isFacebookURI","isHorizonDotMetaDotComURI","isInternalFBURI","isMessengerDotComURI","isSparkDotMetaDotComURI","isWearablesDotDeveloperDotMetaDotComURI","isWorkDotMetaDotComURI","isWorkplaceDotComURI","isWorkroomsDotComURI","performanceAbsoluteNow","promiseDone","replaceTransportMarkers","setTimeout","setTimeoutAcrossTransitions","uriIsRelativePath"],(function(t,n,r,o,a,i,l,s,u,c){"use strict";var e,d,m,p,_,f,g,h=19e3,y=500,C=1006,b=1004,v=1010,S=new Set([y,v,b,C]),R=!1,L=o("Run").onAfterUnload(function(){R=!0});function E(){return R}function k(e){return"onprogress"in e}function I(e){return"upload"in e&&"onprogress"in e.upload}function T(e){return"withCredentials"in e}function D(e){return e.status in{0:1,12029:1,12030:1,12031:1,12152:1}}function x(e){var t=!e||typeof e=="function";return t||r("FBLogger")("asyncresponse").mustfix("AsyncRequest response handlers must be functions. Pass a function, or use bind() to build one."),t}var $=2,P=$,N=!1;r("Arbiter").subscribe("page_transition",function(e,t){N?N=!1:P=t.id});var M="for (;;);",w=M.length,A=(function(){function t(e){var n=this,a;this._allowIrrelevantRequests=!1,this._delayPreDisplayJS=!1,this._shouldReplaceTransportMarkers=!1,this._dispatchErrorResponse=function(e,t){var o=e.getError();if(n.clearStatusIndicator(),!n._isRelevant()||o===v){n.id,n.abort();return}if(n._isServerDialogErrorCode(o)){var a=o==1357008||o==1357007;n.interceptHandler(e),o==1357007?n._displayServerDialog(e,a,!0):n._displayServerDialog(e,a)}else if(n.initialHandler(e)!==!1){r("clearTimeout")(n.timer);try{t(e)}catch(t){throw n.finallyHandler(e),t}n.finallyHandler(e)}},this._onStateChange=function(){var e=n.transport;if(e)try{t._inflightCount--,o("ResourceTimingsStore").measureResponseReceived(r("ResourceTypes").XHR,n.resourceTimingStoreUID);try{e.getResponseHeader("X-FB-Debug")&&(n._xFbServer=e.getResponseHeader("X-FB-Debug"),r("fb-error").ErrorXFBDebug.add(n._xFbServer))}catch(e){}if(e.status>=200&&e.status<300)t.lastSuccessTime=Date.now(),n._handleXHRResponse(e);else if(o("UserAgent_DEPRECATED").webkit()&&typeof e.status=="undefined")n._invokeErrorHandler(1002);else if(r("AsyncRequestConfig").retryOnNetworkError&&D(e)&&n.remainingRetries>0&&!n._requestTimeout){n.remainingRetries--,delete n.transport,n.send(!0);return}else n._invokeErrorHandler();n.getOption("asynchronous_DEPRECATED")!==!1&&delete n.transport}catch(e){if(E())return;if(delete n.transport,n.remainingRetries>0)n.remainingRetries--,n.send(!0);else{if(!n.getOption("suppressErrorAlerts")){var a=r("getErrorSafe")(e);r("FBLogger")("AsyncRequest").catching(a).mustfix("AsyncRequest exception when attempting to handle a state change")}n._invokeErrorHandler(1007)}}},this._handleTimeout=function(){n.continuation.last(function(){n._requestTimeout=!0;var e=n.timeoutHandler;n.abandon(),e&&e(n),r("setTimeout")(function(){r("Arbiter").inform("AsyncRequest/timeout",{request:n})},0)})},this.continuation=r("TimeSlice").getPlaceholderReusableContinuation(),this.transport=null,this.method="POST",this.uri="",this.timeout=null,this.timer=null,this.initialHandler=a=r("emptyFunction"),this.handler=null,this.uploadProgressHandler=null,this.errorHandler=r("AsyncResponse").defaultErrorHandler,this.transportErrorHandler=null,this.timeoutHandler=null,this.interceptHandler=a,this.finallyHandler=a,this.abortHandler=a,this.serverDialogCancelHandler=null,this.relativeTo=null,this.statusElement=null,this.statusClass="",this.data={},this.headers={},this.file=null,this.context={},this.readOnly=!1,this.writeRequiredParams=[],this.remainingRetries=0,this.userActionID="-",this.resourceTimingStoreUID=o("ResourceTimingsStore").getUID(r("ResourceTypes").XHR,e!=null?e.toString():""),this.flushedResponseTextParseIndex=0,this.option={asynchronous_DEPRECATED:!0,suppressErrorHandlerWarning:!1,suppressEvaluation:!1,suppressErrorAlerts:!1,retries:0,bundle:!1,handleErrorAfterUnload:!1,useFetchTransport:!1},this.transportErrorHandler=r("bind")(this,"errorHandler"),e!==void 0&&this.setURI(e),this.setAllowCrossPageTransition(r("AsyncRequestConfig").asyncRequestsSurviveTransitionsDefault||!1)}var a=t.prototype;return a._dispatchResponse=function(t){if(this.clearStatusIndicator(),!this._isRelevant()){this._invokeErrorHandler(v);return}if(this.initialHandler(t)!==!1){r("clearTimeout")(this.timer);var e,n=this.getHandler();if(n)try{e=this._shouldSuppressJS(n(t))}catch(e){throw t.is_last&&this.finallyHandler(t),e}e||this._handleJSResponse(t),t.is_last&&this.finallyHandler(t)}},a._shouldSuppressJS=function(n){return n===t.suppressOnloadToken},a._handlePreDisplayServerJS=function(t,n){var e=!1,o=[],a=function(){if(e)return r("FBLogger")("AsyncResponse").warn("registerToBlockDisplayUntilDone_DONOTUSE called after AsyncResponse display started. This is a no-op."),function(){};var t,n=new(r("Deferred"));return o.push(n.getPromise()),r("TimeSlice").guard(function(){t&&r("clearTimeout")(t),n.resolve()},"AsyncRequestDisplayBlockingEvent",{propagationType:r("TimeSlice").PropagationType.EXECUTION})};return t.handle(n,{bigPipeContext:{registerToBlockDisplayUntilDone_DONOTUSE:a}}),e=!0,o},a._hasEvalDomOp=function(t){return t&&t.length?t.some(function(e){return e[0]==="eval"}):!1},a._handleJSResponse=function(t){var e=this.getRelativeTo(),n=t.domops,a=t.dtsgToken,i=t.dtsgAsyncGetToken,l=t.jsmods,s,u=t.savedServerJSInstance;if(u&&u instanceof r("ServerJS")?s=u:s=new(r("ServerJS")),s.setRelativeTo(e),l){var c={define:l.define,instances:l.instances,markup:l.markup};delete l.define,delete l.instances,delete l.markup,this._hasEvalDomOp(n)&&(c.elements=l.elements,delete l.elements),s.handle(c)}var d=new(m||(m=r("URI")))(this.uri);(!d.getDomain()&&!d.getProtocol()||document.location.origin===d.getOrigin())&&(a&&o("DTSG").setToken(a),i&&o("DTSG_ASYNC").setToken(i)),n&&(g||(g=r("ErrorGuard"))).applyWithGuard(function(){return o("AsyncDOM").invoke(n,e)},null,[],{errorType:"warn"}),l&&s.handle(l),this._handleJSRegisters(t,"onload"),this._handleJSRegisters(t,"onafterload")},a._handleJSRegisters=function(t,n){var e=t[n];if(e)for(var o=0;o<e.length;o++){var a=null,i=e[o],l=i.match(/^\"caller:([^\"]+?)\";(.*)/);l!=null&&(a=l[1],i=l[2]),(g||(g=r("ErrorGuard"))).applyWithGuard(new Function(i),this,[]),r("FBLogger")("comet_infra").info("Detected dynamic new Function(...) call in AsyncRequest._handleJSRegisters(...).",new(m||(m=r("URI")))(this.uri).getPath(),a)}},a.invokeResponseHandler=function(t){var e=this;if(typeof t.redirect!="undefined"){r("setTimeout")(function(){e.setURI(t.redirect,!0).send()},0);return}if(t.bootloadOnly!==void 0){var a=typeof t.bootloadOnly=="string"?JSON.parse(t.bootloadOnly):t.bootloadOnly,i=function(t){r("TimeSlice").guard(function(){r("Bootloader").loadPredictedResourceMap(t)},"Bootloader.loadPredictedResourceMap",{root:!0})()};for(var l of a)i(l);return}if(!(!this.handler&&!this.errorHandler&&!this.transportErrorHandler&&!this.preBootloadHandler&&this.initialHandler===r("emptyFunction")&&this.finallyHandler===r("emptyFunction"))){var s=t.asyncResponse;if(typeof s!="undefined"){var u,c;if(!this._isRelevant()){this._invokeErrorHandler(v);return}s.updateScriptPath&&r("ScriptPath").set(s.updateScriptPath.path,s.updateScriptPath.token,s.updateScriptPath.extra_info),s.lid&&(this._responseTime=Date.now(),this.lid=s.lid),o("HasteResponse").handleSRPayload((u=s.hsrp)!=null?u:{});var m,_;if(s.getError()&&!s.getErrorIsWarning()){var f=this.getErrorHandler().bind(this);m=(g||(g=r("ErrorGuard"))).guard(this._dispatchErrorResponse,{name:"AsyncRequest#_dispatchErrorResponse for "+this.getURI()}),m=m.bind(this,s,f),_="error"}else{m=(g||(g=r("ErrorGuard"))).guard(this._dispatchResponse.bind(this),{name:"AsyncRequest#_dispatchResponse for "+this.getURI()}),m=m.bind(this,s),_="response";var h=s.domops;if(!this._delayPreDisplayJS&&s.jsmods&&s.jsmods.pre_display_requires&&!this._hasEvalDomOp(h)){var y=s.jsmods,C={define:y.define,instances:y.instances,markup:y.markup};delete y.define,delete y.instances,delete y.markup,C.pre_display_requires=y.pre_display_requires,delete y.pre_display_requires;var b=new(r("ServerJS"));b.setRelativeTo(this.getRelativeTo()),s.savedServerJSInstance=b;var S=this._handlePreDisplayServerJS(b,C);if(S&&S.length){var R=m;m=function(){r("promiseDone")((d||(d=n("Promise"))).all(S).then(R))}}}}var L=(p||(p=r("performanceAbsoluteNow")))();m=r("executeAfter")(m,function(){r("Arbiter").inform("AsyncRequest/"+_,{request:e,response:s,ts:L})}),this.preBootloadHandler&&this.preBootloadHandler(s),r("Bootloader").loadResources((c=s.allResources)!=null?c:[],{onAll:r("AsyncRequestConfig").immediateDispatch?m:function(){r("setTimeout")(m,0)}})}else typeof t.transportError!="undefined"?this._xFbServer?this._invokeErrorHandler(1008):this._invokeErrorHandler(1012):this._invokeErrorHandler(1007)}},a._invokeErrorHandler=function(t){var e=this,n=this.transport;if(n){var o;if(this.responseText==="")o=1002;else if(this._requestAborted)o=1011;else{try{o=t||n.status||b}catch(e){o=1005}navigator.onLine===!1&&(o=C)}var a,i,l=!0;if(o===C)i=u._(/*BTDS*/"No Network Connection"),a=u._(/*BTDS*/"Your browser appears to be offline. Please check your internet connection and try again.");else if(o>=300&&o<=399){i=u._(/*BTDS*/"Redirection"),a=u._(/*BTDS*/"Your access to Facebook was redirected or blocked by a third party at this time, please contact your ISP or reload.");var s=n.getResponseHeader("Location");s&&r("goURI")(s,!0),l=!0}else i=u._(/*BTDS*/"Oops"),a=u._(/*BTDS*/"Something went wrong. We're working on getting this fixed as soon as we can. You may be able to try again.");var c=new(r("AsyncResponse"))(this,n),d=n.getResponseHeader("Error-Mid");if(Object.assign(c,{error:o,errorSummary:i,errorDescription:a,silentError:l,errorMid:d}),r("setTimeout")(function(){r("Arbiter").inform("AsyncRequest/error",{request:e,response:c})},0),!(E()&&!this.getOption("handleErrorAfterUnload"))){var m=r("FBLogger")("asyncresponse");if(d!=null&&(m=m.addMetadata("OPES","MID",d)),!this.transportErrorHandler){m.mustfix("Async request to %s failed with a %d error, but there was no error handler available to deal with it.",this.getURI(),o);return}var p=this.getTransportErrorHandler().bind(this);this.getOption("suppressErrorAlerts")||S.has(o)?S.has(o)&&m.addToCategoryKey(String(o)).warn("Async request failed with error %s: %s when requesting %s",o,a.toString(),this.getURI()):m.addToCategoryKey(String(o)).mustfix("Async request failed with error %s: %s when requesting %s",o,a.toString(),this.getURI()),(g||(g=r("ErrorGuard"))).applyWithGuard(this._dispatchErrorResponse,this,[c,p])}}},a._isServerDialogErrorCode=function(t){return t==1357008||t==1357007||t==1357041||t==1442002||t==1357001},a._displayServerDialog=function(t,n,o){var e=this;o===void 0&&(o=!1);var a=t.getPayload();if(a.__dialog!==void 0){this._displayServerLegacyDialog(t,n);return}var i=a.__dialogx;if(new(r("ServerJS"))().handle(i),a.__should_use_mwa_reauth===!0){r("Bootloader").loadModules(["MWADeveloperReauthBarrier"],function(n){n.registerRequest(a.__dialogID,e,t)},"AsyncRequest");return}r("Bootloader").loadModules(["ConfirmationDialog"],function(n){n.setupConfirmation(t,e,o)},"AsyncRequest")},a._displayServerLegacyDialog=function(t,n){var e=this,o=t.getPayload().__dialog;if(r("gkx")("20935")){var a,i;r("FBLogger")("comet_infra").addMetadata("COMET_INFRA","ERROR_CODE",t.getError().toString()).addMetadata("COMET_INFRA","ERROR_URL",(a=(i=t.request)==null?void 0:i.getURI())!=null?a:"unknown").mustfix("AsyncRequest._displayServerLegacyDialog called in Comet")}r("Bootloader").loadModules(["Dialog"],function(r){var a=new r(o);n&&a.setHandler(e._displayConfirmationHandler.bind(e,a)),a.setCancelHandler(function(){var n=e.getServerDialogCancelHandler();try{n&&n(t)}catch(e){throw e}finally{e.finallyHandler(t)}}).setCausalElement(e.relativeTo).show()},"AsyncRequest")},a._displayConfirmationHandler=function(t){this.data.confirmed=1,Object.assign(this.data,t.getFormData()),this.send()},a.$1=function(t){t.subscribe("response",this._handleJSONPResponse.bind(this)),t.subscribe("abort",this._handleJSONPAbort.bind(this)),this.transport=t},a._handleJSONPResponse=function(t,n){var e=this.transport;if(e){n.bootloadOnly||(this.is_first=this.is_first===void 0);var r=this._interpretResponse(n);r.asyncResponse&&(r.asyncResponse.is_first=this.is_first,r.asyncResponse.is_last=e.hasFinished()),this.invokeResponseHandler(r),e.hasFinished()&&delete this.transport}},a._handleJSONPAbort=function(){this._invokeErrorHandler(),delete this.transport},a._handleXHRResponse=function(t){var e;if(this.getOption("suppressEvaluation"))e={asyncResponse:new(r("AsyncResponse"))(this,t)};else try{this._handleFlushedResponse();var n=t.responseText;n=this._filterOutFlushedText(n);var o=this._unshieldResponseText(n),a=JSON.parse(o);e=this._interpretResponse(a)}catch(t){var i=r("getErrorSafe")(t);e=i.message,r("FBLogger")("async_request").catching(i).warn("Failed to handle response")}this.invokeResponseHandler(e)},a._handleFlushedResponse=function(){var e=this.flushedResponseHandler,t=this.transport;if(e&&t){var n=t.responseText.indexOf(M),r=n===-1?t.responseText.length:n;e(t.responseText.substring(this.flushedResponseTextParseIndex,r)),this.flushedResponseTextParseIndex=r}},a._unshieldResponseText=function(t){if(t.length<=w)throw new Error("Response too short on async");for(var e=0;t.charAt(e)==" "||t.charAt(e)=="\n";)e++;return e&&t.substring(e,e+w)==M&&this.getURI(),t.substring(e+w)},a._filterOutFlushedText=function(t){if(!this.flushedResponseHandler)return t;var e=t.indexOf(M);return e<0?t:t.substr(e)},a._interpretResponse=function(t){if(t.redirect)return{redirect:t.redirect};if(t.bootloadOnly)return{bootloadOnly:t.bootloadOnly};var e=t.error&&this._isServerDialogErrorCode(t.error);this._shouldReplaceTransportMarkers&&t.payload&&!e&&r("replaceTransportMarkers")({relativeTo:this.getRelativeTo(),bigPipeContext:null},t.payload);var n=new(r("AsyncResponse"))(this);if(t.__ar!=1)r("FBLogger")("AsyncRequest").warn("AsyncRequest to endpoint %s returned a JSON response, but it is not properly formatted. The endpoint needs to provide a response using the AsyncResponse class in PHP.",this.getURI()),n.payload=t;else{Object.assign(n,t);var o=this.transport;o&&o.getAllResponseHeaders!==void 0&&(n.responseHeaders=o.getAllResponseHeaders())}return{asyncResponse:n}},a._isMultiplexable=function(){return this.getOption("useFetchTransport")?(r("FBLogger")("AsyncRequest").mustfix("You cannot bundle AsyncRequest that uses iframe transport."),!1):r("isFacebookURI")(new(m||(m=r("URI")))(this.uri))?this.getOption("asynchronous_DEPRECATED")?!0:(r("FBLogger")("AsyncRequest").mustfix("We cannot bundle synchronous AsyncRequests"),!1):(r("FBLogger")("AsyncRequest").mustfix("You can not bundle AsyncRequest sent to non-facebook URIs.  Uri: %s",this.getURI()),!1)},a.handleResponse=function(t){var e=this._interpretResponse(t);this.invokeResponseHandler(e)},a.setMethod=function(t){return this.method=t.toString().toUpperCase(),this},a.getMethod=function(){return this.method},a.setData=function(t){return this.data=t,this},a.setRequestHeader=function(t,n){return this.headers[t]=n,this},a.setRawData=function(t){return this.rawData=t,this},a.getData=function(){return this.data},a.setContextData=function(t,n,r){return r=r===void 0?!0:r,r&&(this.context["_log_"+t]=n),this},a._setUserActionID=function(){this.userActionID=(o("SessionName").getName()||"-")+"/-"},a.setURI=function(t,n){n===void 0&&(n=!1),typeof t=="string"&&t.match(/^\/?u_\d+_\d+/)&&r("FBLogger")("asyncrequest").warn("Invalid URI %s",t);var e=new(m||(m=r("URI")))(t);return this.getOption("useFetchTransport")&&!r("isFacebookURI")(e)?(!n||c(0,45284),this):!this._allowCrossOrigin&&!this.getOption("useFetchTransport")&&!e.isSameOrigin()&&!r("uriIsRelativePath")(e)?(e.toString(),!n||c(0,45285),this):(this._setUserActionID(),!t||e.isEmpty()?(r("FBLogger")("async_request").mustfix("URI cannot be empty"),this):(this.uri=o("ZeroRewrites").rewriteURI(e),this))},a.getURI=function(){return this.uri.toString()},a.delayPreDisplayJS=function(t){return t===void 0&&(t=!0),this._delayPreDisplayJS=t,this},a.setInitialHandler=function(t){return this.initialHandler=t,this},a.setPayloadHandler=function(t){return this.setHandler(function(e){t(e.payload)}),this},a.setHandler=function(t){return x(t)&&(this.handler=t),this},a.setFlushedResponseHandler=function(t){return x(t)&&(this.flushedResponseHandler=t),this},a.getHandler=function(){return this.handler||r("emptyFunction")},a.setProgressHandler=function(t){return x(t)&&(this.progressHandler=t),this},a.setUploadProgressHandler=function(t){return x(t)&&(this.uploadProgressHandler=t),this},a.setErrorHandler=function(t){return x(t)&&(this.errorHandler=t),this},a.setTransportErrorHandler=function(t){return this.transportErrorHandler=t,this},a.getErrorHandler=function(){return this.errorHandler||r("emptyFunction")},a.getTransportErrorHandler=function(){return this.transportErrorHandler||r("emptyFunction")},a.setTimeoutHandler=function(t,n){return x(n)&&(this.timeout=t,this.timeoutHandler=n),this},a.resetTimeout=function(t){if(this.timeoutHandler!==null)if(t===null)this.timeout=null,r("clearTimeout")(this.timer),this.timer=null;else{var e=!this._allowCrossPageTransition;this.timeout=t,r("clearTimeout")(this.timer),e?this.timer=r("setTimeout")(this._handleTimeout.bind(this),this.timeout):this.timer=r("setTimeoutAcrossTransitions")(this._handleTimeout.bind(this),this.timeout)}return this},a.setNewSerial=function(){return this.id=++$,this},a.setInterceptHandler=function(t){return this.interceptHandler=t,this},a.setFinallyHandler=function(t){return this.finallyHandler=t,this},a.setAbortHandler=function(t){return this.abortHandler=t,this},a.getServerDialogCancelHandler=function(){return this.serverDialogCancelHandler},a.setServerDialogCancelHandler=function(t){return this.serverDialogCancelHandler=t,this},a.setPreBootloadHandler=function(t){return this.preBootloadHandler=t,this},a.setReadOnly=function(t){return typeof t!="boolean"||(this.readOnly=t),this},a.getReadOnly=function(){return this.readOnly},a.setRelativeTo=function(t){return this.relativeTo=t,this},a.getRelativeTo=function(){return this.relativeTo},a.setStatusClass=function(t){return this.statusClass=t,this},a.setStatusElement=function(t){return this.statusElement=t,this},a.getStatusElement=function(){return r("ge")(this.statusElement)},a._isRelevant=function(){return this._allowCrossPageTransition||!this.id?!0:this.id>P},a.clearStatusIndicator=function(){var e=this.getStatusElement();e&&(o("CSS").removeClass(e,"async_saving"),o("CSS").removeClass(e,this.statusClass))},a._addStatusIndicator=function(){var e=this.getStatusElement();e&&(o("CSS").addClass(e,"async_saving"),o("CSS").addClass(e,this.statusClass))},a.specifiesWriteRequiredParams=function(){var e=this;return this.writeRequiredParams.every(function(t){return e.data[t]=e.data[t]||(_||(_=r("Env")))[t]||(r("ge")(t)||{}).value,e.data[t]!==void 0})},a.setOption=function(t,n){return typeof this.option[t]!="undefined"&&(this.option[t]=n),this},a.getOption=function(t){return this.option[t],this.option[t]},a.abort=function(){var e=this;this.continuation.last(function(){var t=e.transport;if(t){var n=e.getTransportErrorHandler();e.setOption("suppressErrorAlerts",!0),e.setTransportErrorHandler(r("emptyFunction")),e._requestAborted=!0,t.abort(),e.setTransportErrorHandler(n)}e.abortHandler(),B.unschedule(e)})},a.abandon=function(){var e=this;this.continuation.last(function(){var t;r("clearTimeout")(e.timer),e.setOption("suppressErrorAlerts",!0).setHandler(t=r("emptyFunction")).setErrorHandler(t).setTransportErrorHandler(t).setProgressHandler(t).setUploadProgressHandler(t);var n=e.transport;n&&(e._requestAborted=!0,k(n)&&delete n.onprogress,I(n)&&delete n.upload.onprogress,n.abort()),e.abortHandler(),B.unschedule(e)})},a.setNectarModuleDataSafe=function(t){var e=this.setNectarModuleData;return e&&e.call(this,t),this},a.setAllowCrossPageTransition=function(t){return this._allowCrossPageTransition=!!t,this.timer&&this.resetTimeout(this.timeout),this},a.getAllowIrrelevantRequests=function(){return this._allowIrrelevantRequests},a.setAllowIrrelevantRequests=function(t){return this._allowIrrelevantRequests=t,this},a.setAllowCrossOrigin=function(t){return this._allowCrossOrigin=t,this},a.setAllowCredentials=function(t){return this._allowCredentials=t,this},a.setIsBackgroundRequest=function(t){return this._isBackgroundRequest=t,this},a.setReplaceTransportMarkers=function(t){return t===void 0&&(t=!0),this._shouldReplaceTransportMarkers=t,this},a.sendAndReturnAbortHandler=function(){var e=this;return this.send(),function(){return e.abort()}},a.send=function(a){var n=this;if(a=a||!1,!this.uri||(!this.errorHandler&&this.getOption("suppressErrorHandlerWarning"),this.getOption("useFetchTransport")&&this.method!="GET"&&this.setMethod("GET"),this.timeoutHandler!==null&&this.getOption("useFetchTransport"),!this.getReadOnly()&&(this.specifiesWriteRequiredParams(),this.method!="POST"))||document.location.search.toString().includes(this.uri.toString())||this.uri.toString().includes("/../")||this.uri.toString().includes("\\../")||this.uri.toString().includes("/..\\")||this.uri.toString().includes("\\..\\"))return!1;if(Object.assign(this.data,r("getAsyncParams")(this.method)),(f||(f=r("isEmpty")))(this.context)||(Object.assign(this.data,this.context),this.data.ajax_log=1),(_||(_=r("Env"))).force_param&&Object.assign(this.data,(_||(_=r("Env"))).force_param),this._setUserActionID(),this.getOption("bundle")&&this._isMultiplexable())return B.schedule(this),!0;this.setNewSerial(),this.getOption("asynchronous_DEPRECATED")||this.uri.addQueryData({__sjax:1}),r("Arbiter").inform("AsyncRequest/send",{request:this,ts:(p||(p=r("performanceAbsoluteNow")))()});var i,l;if(this.method=="GET"&&this.uri.addQueryData({fb_dtsg_ag:o("DTSG_ASYNC").getToken()}),o("AdsManagerConstURIUtils").shouldRouteToAMReadRegions(this.uri.toString())&&this.getReadOnly()&&this.method.toLowerCase()==="get"?this.uri.addQueryData({ads_manager_read_regions:!0}):o("AdsManagerConstURIUtils").shouldRouteToAMWriteRegions(this.uri.toString(),this.getReadOnly())&&this.uri.addQueryData({ads_manager_write_regions:!0}),this.method=="GET"||this.rawData?(i=this.uri.addQueryData(this.data).toString(),l=this.rawData||""):(this._allowCrossOrigin&&this.uri.addQueryData({__a:1}),i=this.uri.toString(),l=(e||(e=o("PHPQuerySerializer"))).serialize(this.data)),this.transport)return!1;if(this.getOption("useFetchTransport"))try{var s=new(r("FetchStreamTransport"))(this.uri);return this.$1(s),this._markRequestSent(),s.send(),!0}catch(e){this.setOption("useFetchTransport",!1)}this.flushedResponseHandler&&(this.flushedResponseTextParseIndex=0);var u;try{u=o("ZeroRewrites").getTransportBuilderForURI(this.uri)()}catch(e){var c=r("FBLogger")("comet_infra").blameToPreviousFrame();throw e instanceof Error?c.catching(e).mustfixThrow(e.message):c.mustfixThrow("Error getting transport builder for URI")}if(!u)return!1;this.schedule("AsyncRequest.send"),u.onreadystatechange=function(){var e=n.transport;e&&e.readyState>=2&&e.readyState<=3&&n._handleFlushedResponse(),u.readyState===4&&n.continuation.last(n._onStateChange)},this.progressHandler&&k(u)&&(u.onprogress=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.continuation(function(){n.progressHandler&&n.progressHandler.apply(n,t)})}),this.uploadProgressHandler&&I(u)&&(u.upload.onprogress=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n.continuation(function(){n.uploadProgressHandler&&n.uploadProgressHandler.apply(n,t)})}),a||(this.remainingRetries=this.getOption("retries")),this.transport=u;try{u.open(this.method,i,r("gkx")("25571")?!0:this.getOption("asynchronous_DEPRECATED"))}catch(e){return!1}if(!this.uri.isSameOrigin()&&!r("uriIsRelativePath")(this.uri)&&!this.getOption("useFetchTransport")){if(!T(u))return this.uri.toString(),!1;this._canSendCredentials()&&(u.withCredentials=!0)}this.method=="POST"&&!this.rawData&&u.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._isBackgroundRequest&&u.setRequestHeader("X-FB-BACKGROUND-STATE","1");var d=r("getAsyncHeaders")(this.uri);if(Object.keys(d).forEach(function(e){u&&u.setRequestHeader(e,d[e])}),r("Arbiter").inform("AsyncRequest/will_send",{request:this}),u)for(var m in this.headers)Object.prototype.hasOwnProperty.call(this.headers,m)&&u.setRequestHeader(m,this.headers[m]);return this._addStatusIndicator(),this._markRequestSent(),u.send(l),this.timeout!==null&&this.resetTimeout(this.timeout),t._inflightCount++,!0},a.schedule=function(t){this.continuation=r("TimeSlice").getReusableContinuation(t)},a._canSendCredentials=function(){if(this._allowCredentials===!1)return!1;var e=new(m||(m=r("URI")))(this.uri);return r("isFacebookURI")(e)||r("isInternalFBURI")(e)||r("isMessengerDotComURI")(e)||r("isWorkplaceDotComURI")(e)||r("isWorkroomsDotComURI")(e)||r("isWorkDotMetaDotComURI")(e)||r("isHorizonDotMetaDotComURI")(e)||r("isSparkDotMetaDotComURI")(e)||r("isWearablesDotDeveloperDotMetaDotComURI")(e)||r("isDevelopersDotMetaDotComURI")(e)||r("isArDotMetaDotComURI")(e)||r("isAIDemosDotMetaDotComURI")(e)||r("isBugBountyDotMetaDotComURI")(e)},a._markRequestSent=function(){var e=new(m||(m=r("URI")))(this.getURI()).getQualifiedURI().toString();o("ResourceTimingsStore").updateURI(r("ResourceTypes").XHR,this.resourceTimingStoreUID,e),o("ResourceTimingsStore").annotate(r("ResourceTypes").XHR,this.resourceTimingStoreUID).addStringAnnotation("uri",e),o("ResourceTimingsStore").measureRequestSent(r("ResourceTypes").XHR,this.resourceTimingStoreUID)},a.promisePayload=function(t){return this.exec().then(function(e){return e.payload},function(e){throw e.toError()})},a.exec=function(t){var e=this;if(this.getHandler()!==r("emptyFunction")||this.getErrorHandler()!==r("AsyncResponse").defaultErrorHandler)throw new Error("exec is an async function and does not allow previously set handlers");return new(d||(d=n("Promise")))(function(n,r){e.setHandler(n).setErrorHandler(r).send(t)})},t.bootstrap=function(n,a,i){var e="GET",l=!0,s={};(i||a&&a.rel=="async-post")&&(e="POST",l=!1,n&&(n=new(m||(m=r("URI")))(n),s=n.getQueryData(),n.setQueryData({})));var u=o("Parent").byClass(a,"stat_elem")||a;if(u&&o("CSS").hasClass(u,"async_saving"))return!1;var c=new t(n).setReadOnly(l).setMethod(e).setData(s).setNectarModuleDataSafe(a).setRelativeTo(a);if(a&&(c.setHandler(function(e){r("Event").fire(a,"success",{response:e})}),c.setErrorHandler(function(e){r("Event").fire(a,"error",{response:e})!==!1&&r("AsyncResponse").defaultErrorHandler(e)})),u instanceof HTMLElement){c.setStatusElement(u);var d=u.getAttribute("data-status-class");d&&c.setStatusClass(d)}return c.send(),!1},t.bootstrap_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(n,r,o){t.bootstrap(n,r,o)},t.post=function(n,r){return new t(n).setReadOnly(!1).setMethod("POST").setData(r).send(),!1},t.post_UNSAFE_LET_ANYONE_IMPERSONATE_THE_USER_FOR_THESE_WRITES=function(n,r){t.post(n,r)},t.getLastID=function(){return $},t.ignoreUpdate=function(){N=!0},t.getInflightCount=function(){return this._inflightCount},t})();A._inflightCount=0;var F,O=[],B=(function(){function t(){this._requests=[]}var n=t.prototype;return n.add=function(t){this._requests.push(t)},n.remove=function(t){for(var e=this._requests,n=this._requestsSent,r=0,o=e.length;r<o;r++)e[r]===t&&(n?e[r]=null:e.splice(r,1))},n.send=function(){!this._requestsSent||c(0,4390),this._requestsSent=!0,this._wrapperRequest=null;var t=this._requests;if(t.length){var n;if(t.length===1)n=t[0];else{var r=t.filter(Boolean).map(function(t){return[t.uri.getPath(),(e||(e=o("PHPQuerySerializer"))).serialize(t.data)]});n=this._wrapperRequest=new A("/ajax/proxy.php").setAllowCrossPageTransition(!0).setData({data:r}).setHandler(this._handler.bind(this)).setTransportErrorHandler(this._transportErrorHandler.bind(this))}n&&n.setOption("bundle",!1).send()}},n._handler=function(t){var e=this,n=t.getPayload().responses;if(n.length===this._requests.length){for(var r=function(r){var t=e._requests[r];if(!t)return 0;var o=t.uri.getPath();if(e._wrapperRequest&&(t.id=e._wrapperRequest.id),n[r][0]!==o)return t.continuation.last(function(){t.invokeResponseHandler({transportError:"Wrong response order in bundled request to "+o})}),0;t.continuation.last(function(){t.handleResponse(n[r][1])})},o,a=0;a<this._requests.length;a++)o=r(a);O.splice(O.indexOf(this,1))}},n._transportErrorHandler=function(t){var e=this,n={transportError:t.errorDescription},r=this._requests.filter(Boolean).map(function(t){return e._wrapperRequest&&(t.id=e._wrapperRequest.id),t.invokeResponseHandler(n),t.uri.getPath()});""+r.join(", ")},t.schedule=function(n){return n.schedule("AsyncMultiplex.schedule"),F||(F=new t,O.push(F),r("TimeSlice").guard(function(){r("setTimeoutAcrossTransitions")(function(){F&&(F.send(),F=null)},0)},"AsyncMultiplex.schedule",{propagationType:r("TimeSlice").PropagationType.ORPHAN})()),F.add(n),F},t.unschedule=function(t){O.forEach(function(e){e.remove(t)})},t})();A.suppressOnloadToken={},t.AsyncRequest=A,l.default=A}),226);
__d("BanzaiLogger",["cr:9989"],(function(t,n,r,o,a,i,l){function e(t){return{log:function(r,o){n("cr:9989").post("logger:"+r,o,t)},create:e}}var s=e(),u=s;l.default=u}),98);
__d("FDSDialogStartAlignedTextHeader.react",["fbt","BaseDialogLabelIDProvider","FBNucleusCrossFilled24Icon.react","FDSCircleButton.react","FDSDialogHeaderContainer.react","FDSText.react","emptyFunction","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={addOnEnd:{alignSelf:"xqcrz7y",marginTop:"x14vqqas",marginBottom:"xod5an3",marginInlineStart:"xyqm7xq",marginInlineEnd:"x1ys307a",marginLeft:null,marginRight:null,$$css:!0},headerPlaceholder:{height:"xc9qbxq",marginTop:"xw7yly9",marginBottom:"x1yztbdb",width:"x14qfxbe",$$css:!0},headerText:{marginTop:"xw7yly9",marginBottom:"x1yztbdb",marginLeft:"xq1n1xh",marginInlineStart:null,marginInlineEnd:null,$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(12),n=e.closeTestID,a=e.disabled,i=e.onClose,l=e.text,d=e.withCloseButton,m=e.withoutDivider,p=n===void 0?"close-button":n,_=a===void 0?!1:a,f=i===void 0?r("emptyFunction"):i,g=d===void 0?!0:d,h=m===void 0?!0:m,y=o("BaseDialogLabelIDProvider").useDialogHeaderID(),C=!h,b;t[0]!==y||t[1]!==l?(b=l!=null&&u.jsx(o("react-strict-dom").html.div,{style:c.headerText,children:u.jsx(r("FDSText.react"),{align:"start",id:y,isSemanticHeading:!0,type:"headlineEmphasized2",children:l})}),t[0]=y,t[1]=l,t[2]=b):b=t[2];var v;t[3]!==p||t[4]!==_||t[5]!==f||t[6]!==g?(v=u.jsx(o("react-strict-dom").html.div,{style:c.addOnEnd,children:g?u.jsx(r("FDSCircleButton.react"),{"aria-label":s._(/*BTDS*/"Close"),disabled:_,icon:r("FBNucleusCrossFilled24Icon.react"),onPress:f,size:36,testid:void 0}):u.jsx(o("react-strict-dom").html.div,{style:c.headerPlaceholder})}),t[3]=p,t[4]=_,t[5]=f,t[6]=g,t[7]=v):v=t[7];var S;return t[8]!==C||t[9]!==b||t[10]!==v?(S=u.jsxs(r("FDSDialogHeaderContainer.react"),{withDivider:C,children:[b,v]}),t[8]=C,t[9]=b,t[10]=v,t[11]=S):S=t[11],S}l.default=d}),226);
__d("FDSAlertDialogImpl.react",["fbt","FDSDialog.react","FDSDialogFooter.react","FDSDialogStartAlignedTextHeader.react","FDSText.react","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={content:{paddingInlineStart:"xf7dkkf",paddingInlineEnd:"xv54qhq",paddingLeft:null,paddingRight:null,position:"x1n2onr6",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(16),n=e.body,a=e.close,i=e.onClose,l=e.title,d;t[0]!==a?(d=a!=null?a:s._(/*BTDS*/"Close"),t[0]=a,t[1]=d):d=t[1];var m;t[2]!==i||t[3]!==d?(m=u.jsx(r("FDSDialogFooter.react"),{expanding:!1,primary:{label:d,onPress:i,testid:"FDSAlertDialogImpl-closeButton"}}),t[2]=i,t[3]=d,t[4]=m):m=t[4];var p;t[5]!==i||t[6]!==l?(p=u.jsx(r("FDSDialogStartAlignedTextHeader.react"),{onClose:i,text:l}),t[5]=i,t[6]=l,t[7]=p):p=t[7];var _;t[8]!==n?(_=u.jsx(o("react-strict-dom").html.div,{style:c.content,children:u.jsx(r("FDSText.react"),{type:"body3",children:n})}),t[8]=n,t[9]=_):_=t[9];var f;return t[10]!==i||t[11]!==m||t[12]!==p||t[13]!==_||t[14]!==l?(f=u.jsx(r("FDSDialog.react"),{"aria-label":l,footer:m,header:p,onClose:i,children:_}),t[10]=i,t[11]=m,t[12]=p,t[13]=_,t[14]=l,t[15]=f):f=t[15],f}l.default=d}),226);
__d("PhotosMimeType",[],(function(t,n,r,o,a,i){function e(e){return s(e)[0]==="image"}function l(t){var n=s(t);return e(t)&&(n[1]==="jpeg"||n[1]==="pjpeg")}function s(e){return e.split("/")}i.isImage=e,i.isJpeg=l}),66);
__d("XControllerURIBuilder",["invariant","URI","gkx","isInternalFBURI"],(function(t,n,r,o,a,i,l,s){var e,u=(function(){function t(e,t){this.$1={},this.$2=e,this.$3=t}var n=t.prototype;return n.setInt=function(t,n){return this.__setParam(t,"Int",n)},n.setFBID=function(t,n){return this.__setParam(t,"FBID",n)},n.setFloat=function(t,n){return this.__setParam(t,"Float",n)},n.setString=function(t,n){return this.__setParam(t,"String",n)},n.setExists=function(t,n){return n===!1&&(n=void 0),this.__setParam(t,"Exists",n)},n.setBool=function(t,n){return this.__setParam(t,"Bool",n)},n.setBoolVector=function(t,n){return this.__setParam(t,"BoolVector",n)},n.setBoolVec=function(t,n){return this.__setParam(t,"BoolVec",n)},n.setEnum=function(t,n){return this.__setParam(t,"Enum",n)},n.setPath=function(t,n){return this.__setParam(t,"Path",n)},n.setIntVector=function(t,n){return this.__setParam(t,"IntVector",n)},n.setIntVec=function(t,n){return this.__setParam(t,"IntVec",n)},n.setIntKeyset=function(t,n){return this.__setParam(t,"IntKeyset",n)},n.setIntSet=function(t,n){return this.__setParam(t,"IntSet",n.join(","))},n.setFloatVector=function(t,n){return this.__setParam(t,"FloatVector",n)},n.setFloatVec=function(t,n){return this.__setParam(t,"FloatVec",n)},n.setFloatSet=function(t,n){return this.__setParam(t,"FloatSet",n.join(","))},n.setFloatKeyset=function(t,n){return this.__setParam(t,"FloatKeyset",n.join(","))},n.setStringVector=function(t,n){return this.__setParam(t,"StringVector",n)},n.setStringVec=function(t,n){return this.__setParam(t,"StringVec",n)},n.setStringKeyset=function(t,n){return this.__setParam(t,"StringKeyset",n)},n.setStringSet=function(t,n){return this.__setParam(t,"StringSet",n)},n.setFBIDVector=function(t,n){return this.__setParam(t,"FBIDVector",n)},n.setFBIDVec=function(t,n){return this.__setParam(t,"FBIDVec",n)},n.setFBIDSet=function(t,n){return this.__setParam(t,"FBIDSet",n)},n.setFBIDKeyset=function(t,n){return this.__setParam(t,"FBIDKeyset",n)},n.setEnumVector=function(t,n){return this.__setParam(t,"EnumVector",n)},n.setEnumVec=function(t,n){return this.__setParam(t,"EnumVec",n)},n.setEnumSet=function(t,n){return this.__setParam(t,"EnumSet",n)},n.setEnumKeyset=function(t,n){return this.__setParam(t,"EnumKeyset",n)},n.setIntToIntMap=function(t,n){return this.__setParam(t,"IntToIntMap",n)},n.setIntToIntDict=function(t,n){return this.__setParam(t,"IntToIntDict",n)},n.setIntToFloatMap=function(t,n){return this.__setParam(t,"IntToFloatMap",n)},n.setIntToFloatDict=function(t,n){return this.__setParam(t,"IntToFloatDict",n)},n.setIntToStringMap=function(t,n){return this.__setParam(t,"IntToStringMap",n)},n.setIntToStringDict=function(t,n){return this.__setParam(t,"IntToStringDict",n)},n.setIntToBoolMap=function(t,n){return this.__setParam(t,"IntToBoolMap",n)},n.setIntToBoolDict=function(t,n){return this.__setParam(t,"IntToBoolDict",n)},n.setStringToIntMap=function(t,n){return this.__setParam(t,"StringToIntMap",n)},n.setStringToFloatMap=function(t,n){return this.__setParam(t,"StringToFloatMap",n)},n.setStringToStringMap=function(t,n){return this.__setParam(t,"StringToStringMap",n)},n.setStringToNullableStringMap=function(t,n){return this.__setParam(t,"StringToNullableStringMap",n)},n.setStringToBoolMap=function(t,n){return this.__setParam(t,"StringToBoolMap",n)},n.setStringToEnumMap=function(t,n){return this.__setParam(t,"StringToEnumMap",n)},n.setEnumToStringVectorMap=function(t,n){return this.__setParam(t,"EnumToStringVectorMap",n)},n.setEnumToStringVecDict=function(t,n){return this.__setParam(t,"EnumToStringVecDict",n)},n.setEnumToStringMap=function(t,n){return this.__setParam(t,"EnumToStringMap",n)},n.setEnumToBoolMap=function(t,n){return this.__setParam(t,"EnumToBoolMap",n)},n.setEnumToBoolDict=function(t,n){return this.__setParam(t,"EnumToBoolDict",n)},n.setEnumToEnumMap=function(t,n){return this.__setParam(t,"EnumToEnumMap",n)},n.setEnumToEnumDict=function(t,n){return this.__setParam(t,"EnumToEnumDict",n)},n.setEnumToIntMap=function(t,n){return this.__setParam(t,"EnumToIntMap",n)},n.setEnumToEnumToStringVecMapMap=function(t,n){return this.__setParam(t,"EnumToEnumToStringVecMapMap",n)},n.setEnumToFBIDVectorMap=function(t,n){return this.__setParam(t,"EnumToFBIDVectorMap",n)},n.setEnumToFBIDVecDict=function(t,n){return this.__setParam(t,"EnumToFBIDVecDict",n)},n.setStringToIntDict=function(t,n){return this.__setParam(t,"StringToIntDict",n)},n.setStringToNullableIntDict=function(t,n){return this.__setParam(t,"StringToNullableIntDict",n)},n.setStringToFloatDict=function(t,n){return this.__setParam(t,"StringToFloatDict",n)},n.setStringToStringKeysetDict=function(t,n){return this.__setParam(t,"StringToStringKeysetDict",n)},n.setStringToNullableFloatDict=function(t,n){return this.__setParam(t,"StringToNullableFloatDict",n)},n.setStringToStringDict=function(t,n){return this.__setParam(t,"StringToStringDict",n)},n.setStringToNullableStringDict=function(t,n){return this.__setParam(t,"StringToNullableStringDict",n)},n.setStringToBoolDict=function(t,n){return this.__setParam(t,"StringToBoolDict",n)},n.setStringToEnumDict=function(t,n){return this.__setParam(t,"StringToEnumDict",n)},n.setEnumToIntDict=function(t,n){return this.__setParam(t,"EnumToIntDict",n)},n.setEnumToStringDict=function(t,n){return this.__setParam(t,"EnumToStringDict",n)},n.setHackType=function(t,n){return this.__setParam(t,"HackType",n)},n.setTypeAssert=function(t,n){return this.__setParam(t,"TypeAssert",n)},n.__validateRequiredParamsExistence=function(){for(var e in this.$3)!this.$3[e].required||Object.prototype.hasOwnProperty.call(this.$1,e)||s(0,903,e)},n.setParams=function(t){for(var e in t){this.__assertParamExists(e);var n=this.$3[e].type;this.__setParam(e,n,t[e])}return this},n.__assertParamExists=function(t){t in this.$3||s(0,37339,t)},n.__setParam=function(t,n,r){this.__assertParamExists(t);var e=this.$3[t].type,o={StringOrPFBID:"String",IntOrPFBID:"Int",FBIDOrPFBID:"FBID",PaymentLegacyAdAccountID:"Int"},a=o[e];return e===n||a===n||s(0,37340,t,n,e),this.__setParamInt(t,r),this},n.__setParamInt=function(t,n){this.$1[t]=n},n.getRequest_LEGACY_UNTYPED=function(t){return t.setReplaceTransportMarkers().setURI(this.getURI())},n.setPreviousActorIsPageVoice=function(t){return this.__setParamInt("paipv",t?1:0),this},n.getURI=function(){this.__validateRequiredParamsExistence();for(var t={},n="",o=/^(.*)?\{(\?)?(\*)?(.+?)\}(.*)?$/,a=this.$2.split("/"),i=!1,l=0;l<a.length;l++){var u=a[l];if(u!==""){var c=o.exec(u);if(!c)n+="/"+u;else{var d=c[2]==="?",m=c[4],p=this.$3[m];if(p||s(0,11837,m,this.$2),d&&i)continue;if(this.$1[m]==null&&d){i=!0;continue}var _=this.$1[m]!=null?this.$1[m]:p.defaultValue;_!=null||s(0,907,m);var f=c[1]?c[1]:"",g=c[5]?c[5]:"";n+="/"+f+_+g,t[m]=!0}}}this.$2.slice(-1)==="/"&&(n+="/"),n===""&&(n="/");var h=new(e||(e=r("URI")))(n);for(var y in this.$1){var C=this.$1[y];if(!t[y]&&C!=null){var b=this.$3[y];h.addQueryData(y,b&&b.type==="Exists"?null:C)}}return h},n.getLookasideURI=function(){var t="lookaside.facebook.com";return r("isInternalFBURI")((e||(e=r("URI"))).getRequestURI())?t="lookaside.internalfb.com":r("gkx")("21116")&&(t="lookaside.internmc.facebook.com"),this.getURI().setDomain(t).setProtocol("https")},t.create=function(n,r){return function(){return new t(n,r)}},t})();u.prototype.getRequest=function(e){return this.getRequest_LEGACY_UNTYPED(e)},l.default=u}),98);
__d("XRequest",["invariant"],(function(t,n,r,o,a,i,l){var e=function(n,r,o){var t;switch(n){case"Bool":t=r&&r!=="false"&&r!=="0"||!1;break;case"Int":t=r.toString(),/-?\d+/.test(t)||l(0,11839,r);break;case"Float":t=parseFloat(r,10),!isNaN(t)||l(0,11840,r);break;case"FBID":t=r.toString();for(var a=0;a<t.length;++a){var i=t.charCodeAt(a);48<=i&&i<=57||l(0,11841,r)}break;case"String":t=r.toString();break;case"Enum":o===0?t=e("Int",r,null):o===1?t=e("String",r,null):o===2?t=r:l(0,5044,o);break;default:var s,u,c,d;if(s=/^Nullable(\w+)$/.exec(n))r===null?t=null:t=e(s[1],r,o);else if(u=/^(\w+)Vector$/.exec(n)){Array.isArray(r)?t=r:(t=r.toString(),t=t===""?[]:t.split(","));var m=u[1];typeof m=="string"||l(0,5045),t=t.map(function(t){return e(m,t,o&&o.member)})}else if(c=/^(\w+)(Set|Keyset)$/.exec(n))Array.isArray(r)?t=r:(t=r.toString(),t=t===""?[]:t.split(",")),t=t.reduce(function(e,t){return e[t]=t,e},{}),m=c[1],typeof m=="string"||l(0,5045),t=Object.keys(t).map(function(n){return e(m,t[n],o&&o.member)});else if(d=/^(\w+)To(\w+)Map$/.exec(n)){t={};var p=d[1],_=d[2];typeof p=="string"&&typeof _=="string"||l(0,5045),Object.keys(r).forEach(function(n){t[e(p,n,o&&o.key)]=e(_,r[n],o&&o.value)})}else l(0,11842,n)}return t},s=(function(){function t(e,t,n){var r=this;this.$1=t,this.$2=babelHelpers.extends({},n.getQueryData());for(var o=e.split("/").filter(function(e){return e}),a=n.getPath().split("/").filter(function(e){return e}),i,s=0;s<o.length;++s){var u=/^\{(\?)?(\*)?(\w+)\}$/.exec(o[s]);if(!u){o[s]===a[s]||l(0,5047,n.getPath());continue}var c=!!u[1],d=!!u[2];!d||s===o.length-1||l(0,11843,i),i=u[3],Object.prototype.hasOwnProperty.call(this.$1,i)||l(0,11844,i),this.$1[i].required?!c||l(0,5050,i):c||this.$1[i].defaultValue!=null||l(0,5057,i),a[s]&&(this.$2[i]=d?a.slice(s).join("/"):a[s])}Object.keys(this.$1).forEach(function(e){!r.$1[e].required||Object.prototype.hasOwnProperty.call(r.$2,e)||l(0,5051)})}var n=t.prototype;return n.getExists=function(t){return this.$2[t]!==void 0},n.getBool=function(t){return this.$3(t,"Bool")},n.getInt=function(t){return this.$3(t,"Int")},n.getFloat=function(t){return this.$3(t,"Float")},n.getFBID=function(t){return this.$3(t,"FBID")},n.getString=function(t){return this.$3(t,"String")},n.getEnum=function(t){return this.$3(t,"Enum")},n.getOptionalInt=function(t){return this.$4(t,"Int")},n.getOptionalFloat=function(t){return this.$4(t,"Float")},n.getOptionalFBID=function(t){return this.$4(t,"FBID")},n.getOptionalString=function(t){return this.$4(t,"String")},n.getOptionalEnum=function(t){return this.$4(t,"Enum")},n.getIntVector=function(t){return this.$3(t,"IntVector")},n.getFloatVector=function(t){return this.$3(t,"FloatVector")},n.getFBIDVector=function(t){return this.$3(t,"FBIDVector")},n.getStringVector=function(t){return this.$3(t,"StringVector")},n.getEnumVector=function(t){return this.$3(t,"EnumVector")},n.getOptionalIntVector=function(t){return this.$4(t,"IntVector")},n.getOptionalFloatVector=function(t){return this.$4(t,"FloatVector")},n.getOptionalFBIDVector=function(t){return this.$4(t,"FBIDVector")},n.getOptionalStringVector=function(t){return this.$4(t,"StringVector")},n.getOptionalEnumVector=function(t){return this.$4(t,"EnumVector")},n.getIntSet=function(t){return this.$3(t,"IntSet")},n.getFBIDSet=function(t){return this.$3(t,"FBIDSet")},n.getFBIDKeyset=function(t){return this.$3(t,"FBIDKeyset")},n.getStringSet=function(t){return this.$3(t,"StringSet")},n.getEnumKeyset=function(t){return this.$3(t,"EnumKeyset")},n.getOptionalIntSet=function(t){return this.$4(t,"IntSet")},n.getOptionalFBIDSet=function(t){return this.$4(t,"FBIDSet")},n.getOptionalFBIDKeyset=function(t){return this.$4(t,"FBIDKeyset")},n.getOptionalStringSet=function(t){return this.$4(t,"StringSet")},n.getEnumToBoolMap=function(t){return this.$3(t,"EnumToBoolMap")},n.getEnumToEnumMap=function(t){return this.$3(t,"EnumToEnumMap")},n.getEnumToFloatMap=function(t){return this.$3(t,"EnumToFloatMap")},n.getEnumToIntMap=function(t){return this.$3(t,"EnumToIntMap")},n.getEnumToStringMap=function(t){return this.$3(t,"EnumToStringMap")},n.getIntToBoolMap=function(t){return this.$3(t,"IntToBoolMap")},n.getIntToEnumMap=function(t){return this.$3(t,"IntToEnumMap")},n.getIntToFloatMap=function(t){return this.$3(t,"IntToFloatMap")},n.getIntToIntMap=function(t){return this.$3(t,"IntToIntMap")},n.getIntToStringMap=function(t){return this.$3(t,"IntToStringMap")},n.getStringToBoolMap=function(t){return this.$3(t,"StringToBoolMap")},n.getStringToEnumMap=function(t){return this.$3(t,"StringToEnumMap")},n.getStringToFloatMap=function(t){return this.$3(t,"StringToFloatMap")},n.getStringToIntMap=function(t){return this.$3(t,"StringToIntMap")},n.getStringToStringMap=function(t){return this.$3(t,"StringToStringMap")},n.getOptionalEnumToBoolMap=function(t){return this.$4(t,"EnumToBoolMap")},n.getOptionalEnumToEnumMap=function(t){return this.$4(t,"EnumToEnumMap")},n.getOptionalEnumToFloatMap=function(t){return this.$4(t,"EnumToFloatMap")},n.getOptionalEnumToIntMap=function(t){return this.$4(t,"EnumToIntMap")},n.getOptionalEnumToStringMap=function(t){return this.$4(t,"EnumToStringMap")},n.getOptionalIntToBoolMap=function(t){return this.$4(t,"IntToBoolMap")},n.getOptionalIntToEnumMap=function(t){return this.$4(t,"IntToEnumMap")},n.getOptionalIntToFloatMap=function(t){return this.$4(t,"IntToFloatMap")},n.getOptionalIntToIntMap=function(t){return this.$4(t,"IntToIntMap")},n.getOptionalIntToStringMap=function(t){return this.$4(t,"IntToStringMap")},n.getOptionalStringToBoolMap=function(t){return this.$4(t,"StringToBoolMap")},n.getOptionalStringToEnumMap=function(t){return this.$4(t,"StringToEnumMap")},n.getOptionalStringToFloatMap=function(t){return this.$4(t,"StringToFloatMap")},n.getOptionalStringToIntMap=function(t){return this.$4(t,"StringToIntMap")},n.getOptionalStringToStringMap=function(t){return this.$4(t,"StringToStringMap")},n.getEnumToNullableEnumMap=function(t){return this.$3(t,"EnumToNullableEnumMap")},n.getEnumToNullableFloatMap=function(t){return this.$3(t,"EnumToNullableFloatMap")},n.getEnumToNullableIntMap=function(t){return this.$3(t,"EnumToNullableIntMap")},n.getEnumToNullableStringMap=function(t){return this.$3(t,"EnumToNullableStringMap")},n.getIntToNullableEnumMap=function(t){return this.$3(t,"IntToNullableEnumMap")},n.getIntToNullableFloatMap=function(t){return this.$3(t,"IntToNullableFloatMap")},n.getIntToNullableIntMap=function(t){return this.$3(t,"IntToNullableIntMap")},n.getIntToNullableStringMap=function(t){return this.$3(t,"IntToNullableStringMap")},n.getStringToNullableEnumMap=function(t){return this.$3(t,"StringToNullableEnumMap")},n.getStringToNullableFloatMap=function(t){return this.$3(t,"StringToNullableFloatMap")},n.getStringToNullableIntMap=function(t){return this.$3(t,"StringToNullableIntMap")},n.getStringToNullableStringMap=function(t){return this.$3(t,"StringToNullableStringMap")},n.getOptionalEnumToNullableEnumMap=function(t){return this.$4(t,"EnumToNullableEnumMap")},n.getOptionalEnumToNullableFloatMap=function(t){return this.$4(t,"EnumToNullableFloatMap")},n.getOptionalEnumToNullableIntMap=function(t){return this.$4(t,"EnumToNullableIntMap")},n.getOptionalEnumToNullableStringMap=function(t){return this.$4(t,"EnumToNullableStringMap")},n.getOptionalIntToNullableEnumMap=function(t){return this.$4(t,"IntToNullableEnumMap")},n.getOptionalIntToNullableFloatMap=function(t){return this.$4(t,"IntToNullableFloatMap")},n.getOptionalIntToNullableIntMap=function(t){return this.$4(t,"IntToNullableIntMap")},n.getOptionalIntToNullableStringMap=function(t){return this.$4(t,"IntToNullableStringMap")},n.getOptionalStringToNullableEnumMap=function(t){return this.$4(t,"StringToNullableEnumMap")},n.getOptionalStringToNullableFloatMap=function(t){return this.$4(t,"StringToNullableFloatMap")},n.getOptionalStringToNullableStringMap=function(t){return this.$4(t,"StringToNullableStringMap")},n.$3=function(n,r){this.$5(n,r);var t=this.$1[n];return!Object.prototype.hasOwnProperty.call(this.$2,n)&&t.defaultValue!=null?(!t.required||l(0,5052),e(r,t.defaultValue,t.enumType)):(t.required||r==="Bool"||t.defaultValue!=null||l(0,11845,r,n,r,n),e(r,this.$2[n],t.enumType))},n.$4=function(n,r){this.$5(n,r);var t=this.$1[n];return!t.required||l(0,11846,r,n,r,n),!t.defaultValue||l(0,5052),Object.prototype.hasOwnProperty.call(this.$2,n)?e(r,this.$2[n],t.enumType):null},n.$5=function(t,n){Object.prototype.hasOwnProperty.call(this.$1,t)||l(0,37317,t),this.$1[t].type===n||l(0,11848,t,n,this.$1[t].type)},t})();i.default=s}),66);
__d("XController",["XControllerURIBuilder","XRequest"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t){this.$1=e,this.$2=t}var t=e.prototype;return t.getURIBuilder=function(t){var e=this,n=new(r("XControllerURIBuilder"))(this.$1,this.$2);if(t){var o=this.getRequest(t);Object.keys(this.$2).forEach(function(t){var r=e.$2[t],a="";!r.required&&!Object.prototype.hasOwnProperty.call(r,"defaultValue")&&(a="Optional");var i="get"+a+r.type,l=o[i](t);if(!(l==null||Object.prototype.hasOwnProperty.call(r,"defaultValue")&&l===r.defaultValue)){var s="set"+r.type;n[s](t,l)}})}return n},t.getRequest=function(t){return new(r("XRequest"))(this.$1,this.$2,t)},e.create=function(n,r){return new e(n,r)},e})();l.default=e}),98);
__d("normalizeBoundingClientRect",[],(function(t,n,r,o,a,i){"use strict";function e(e,t){var n=e.ownerDocument.documentElement,r=n?n.clientLeft:0,o=n?n.clientTop:0,a=Math.round(t.left)-r,i=Math.round(t.right)-r,l=Math.round(t.top)-o,s=Math.round(t.bottom)-o;return{left:a,right:i,top:l,bottom:s,width:i-a,height:s-l}}i.default=e}),66);
__d("getElementRect",["containsNode","normalizeBoundingClientRect"],(function(t,n,r,o,a,i,l){function e(e){var t,n=e==null||(t=e.ownerDocument)==null?void 0:t.documentElement;return!e||!("getBoundingClientRect"in e)||!r("containsNode")(n,e)?{left:0,right:0,top:0,bottom:0,width:0,height:0}:r("normalizeBoundingClientRect")(e,e.getBoundingClientRect())}l.default=e}),98);
__d("getElementPosition",["getElementRect"],(function(t,n,r,o,a,i,l){function e(e){var t=r("getElementRect")(e);return{x:t.left,y:t.top,width:t.right-t.left,height:t.bottom-t.top}}l.default=e}),98);
__d("getViewportDimensions",["UserAgent"],(function(t,n,r,o,a,i,l){"use strict";var e=(function(){var e=null;return function(){var t=document.body;return t==null?null:((e==null||!t.contains(e))&&(e=document.createElement("div"),e.style.left=Number.MAX_SAFE_INTEGER+"px",e.style.width="100%",e.style.height="100%",e.style.position="fixed",t.appendChild(e)),e)}})();function s(){var e;return document.documentElement&&(e=document.documentElement.clientWidth),e==null&&document.body&&(e=document.body.clientWidth),e||0}function u(){var e;return document.documentElement&&(e=document.documentElement.clientHeight),e==null&&document.body&&(e=document.body.clientHeight),e||0}function c(){return{width:window.innerWidth||s(),height:window.innerHeight||u()}}c.withoutScrollbars=function(){return r("UserAgent").isPlatform("Android")?c():{width:s(),height:u()}},c.layout=function(){var t,n,r=e();return{width:(t=r==null?void 0:r.clientWidth)!=null?t:s(),height:(n=r==null?void 0:r.clientHeight)!=null?n:u()}},l.default=c}),98);
__d("goURIWWW",["URI"],(function(t,n,r,o,a,i,l){"use strict";var e;l.default=(e||(e=r("URI"))).go}),98);
__d("useDebounced",["debounce","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useMemo,d=s.useRef;function m(e,t,n){t===void 0&&(t=100),n===void 0&&(n=!1);var o=d(e),a=d(!0),i=d(null);u(function(){return a.current=!0,i.current&&(i.current(),i.current=null),function(){a.current=!1}},[]),u(function(){o.current=e},[e]);var l=c(function(){return r("debounce")(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];a.current?o.current.apply(o,t):i.current=function(){o.current.apply(o,t)}},t,null,!1,n)},[t,n]);return l}l.default=m}),98);/*FB_PKG_DELIM*/
__d("CPXComposerConstants",[],(function(t,n,r,o,a,i){"use strict";var e=120,l=68,s=90,u=160,c=10,d=4;i.THUMBNAIL_WIDTH=e,i.THUMBNAIL_HEIGHT=l,i.REEL_THUMBNAIL_WIDTH=s,i.REEL_THUMBNAIL_HEIGHT=u,i.NUM_OF_THUMBNAILS=c,i.MAX_NUM_THUMBNAILS=d}),66);
__d("CanvasToBlobImpl",["BlobFactory"],(function(t,n,r,o,a,i){function e(e,t){for(var r=atob(e.substr(e.indexOf(",")+1)),o=new Uint8Array(r.length),a=0;a<r.length;a++)o[a]=r.charCodeAt(a);return n("BlobFactory").getBlob([o],{type:t})}a.exports={getBlob:e}}),null);
__d("VideoThumbnail_UNTYPED",["invariant","vulture"],(function(t,n,r,o,a,i,l){var e=(function(){"use strict";function e(e){this.$1=e}var t=e.prototype;return t.getURL=function(){return this.$1},t.getData=function(){n("vulture")("a1B5XUEMmGR-xYeKTjqzsKYluSg="),l(0,4844)},e.addTextToCanvasContext=function(t,r,o,a,i,l,s,u,c){n("vulture")("qikNWy_gjGUk0GFVslGmB8bCVwk="),t.fillStyle=u,t.textAlign=c,t.font=l+"px "+s;var e=c==="center"?a+i/2:a,d=1,m=r.split("\n");for(var p of m){var _="",f="",g=p.split(" ");for(var h of g){f+=h;var y=t.measureText(f).width,C=t.measureText(h).width;if(C>i){_.length>0&&(t.fillText(_,e,o+l*d),d++);var b="",v="";for(var S of h){v+=S;var R=t.measureText(v).width;R>i?(t.fillText(b,e,o+l*d),b=S,v=S,d++):b=v}_=b+" ",f=b+" "}else y>i?(t.fillText(_,e,o+l*d),_=h+" ",f=h+" ",d++):(f+=" ",_=f)}t.fillText(_,e,o+l*d),d++}return t},e})();a.exports=e}),null);
__d("WebWorker",["invariant","BlobFactory","Bootloader","EventListener","FBLogger","SubscriptionsHandler","TrustedTypesWebWorkerScriptURLPolicy","URI","WebWorkerConfig","XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder","XHRRequest","cr:951783","emptyFunction","err","filterObject","getCrossOriginTransport","getWorkerInitScriptSPINParams","gkx","isSameOrigin","justknobx","memoize","nullthrows","performanceNow"],(function(t,n,r,o,a,i,l){var e,s,u=t.URL||t.webkitURL,c={remove:n("emptyFunction")},d=(function(){"use strict";function r(e){var t=this;this.$2=!1,this.$3=null,this.$4=e,this.__worker=null,this.$5=n("emptyFunction"),this.$6=n("emptyFunction"),this.$7=[],this.$8=[],this.$9=!1,this.$10=new(n("SubscriptionsHandler")),this.$1=n("cr:951783")!==null?n("cr:951783")(function(){t.$9||t.terminate()}):c,n("gkx")("20935")&&setTimeout(function(){!t.$9&&!t.isCurrentState("terminated")&&n("FBLogger")("comet_infra").mustfix("WebWorker (resource: %s) allowCrossPageTransitions must be true on Comet, or you must handle cleaning up your worker.",e.name)},1e3),this.$11("constructed")}var o=r.prototype;return o.setMessageHandler=function(t){return this.$5=t||n("emptyFunction"),this},o.setErrorHandler=function(t){return this.$6=t||n("emptyFunction"),this},o.postMessage=function(t,n){if(!this.isCurrentState("constructed")||l(0,5977),!this.isCurrentState("terminated")||l(0,5978),this.isCurrentState("preparing"))return this.$7.push(this.postMessage.bind(this,t,n)),this;var e={type:"message",message:t};return n?this.getInterfaceableWorker().postMessage(e,n):this.getInterfaceableWorker().postMessage(e),this},o.$12=function(){this.isCurrentState("terminated")||(this.$11("terminated"),this.__worker=null,this.$13(),this.$7=[],this.$8=[],this.$1&&this.$1.remove&&this.$1.remove())},o.terminate=function(){this.isCurrentState("executing")&&this.__worker!=null&&this.__worker.terminate(),this.$12()},o.execute=function(){var e=this;!this.isCurrentState("terminated")||l(0,5979);var t=["preparing","executing"];return t.some(function(t){return e.isCurrentState(t)})?this:(this.$11("preparing"),r.prepareResource(this.$4,this.$14.bind(this)),this)},o.setAllowCrossPageTransition=function(t){return n("gkx")("20935")&&!t&&n("FBLogger")("comet_infra").mustfix("allowAcrossPageTransitions must be true because we dont kill these in Comet."),this.$9=t,this},o.isCurrentState=function(t){return r.states.includes(t)||l(0,5980,t),t===this.$3},o.$14=function(){if(!this.isCurrentState("executing")||l(0,5981),!this.isCurrentState("terminated")){if(this.$4.useInitScript&&n("gkx")("21112")||this.$4.sameOriginURL||this.$4.source||l(0,19837,this.$4.name),this.$4.useInitScript&&n("gkx")("21112")){var e,t=n("nullthrows")((e=n("XCometFBMultiSiteWebWorkerInitScriptControllerRouteBuilder").buildUri({}).addQueryParams(n("getWorkerInitScriptSPINParams")()))==null?void 0:e.toString()),o=new window.URL(this.$4.url,window.location.href).href;if(o==null)throw n("err")("Can't start up worker without a resource url.");this.__worker=this.constructWorker(t,this.$4.name),this.__worker.postMessage({bundleUrl:o,doNotStartBundle:!0,isDev:!1,resource:this.$4,type:"sr-init"})}else this.$4.sameOriginURL?this.__worker=this.constructWorker(this.$4.sameOriginURL):(this.__worker=this.constructWorker(r.evalWorkerURL),this.getInterfaceableWorker().postMessage(this.$4.source));if(this.$15("ping",Date.now()),this.$4.dynamicModules)try{this.$15("defineModules",this.$4.dynamicModules)}catch(e){throw this.terminate(),this.$16("define_error",{message:e.message}),e}this.$17(),this.$11("executing"),this.$7.forEach(function(e){return e()}),this.$7=[],this.$8.forEach(function(e){return e()}),this.$8=[]}},o.$13=function(){this.$10.release()},o.$15=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];this.getInterfaceableWorker().postMessage({type:t,args:n})},o.$16=function(t,o){var e=!(this.$4.useInitScript&&n("gkx")("21112"));r.$16(t,this.$4.name,babelHelpers.extends({},o,{cross_page_transition:!!this.$9,state:this.$3}),e)},r.$18=function(t){return Object.keys(n("filterObject")({object_url:t&&r.$19(),data_url:t&&r.$20(),worker:r.isSupported()},function(e){return!!e}))},o.$17=function(){this.$10.addSubscriptions(n("EventListener").listen(this.getInterfaceableWorker(),"message",this.$21.bind(this)),n("EventListener").listen(this.getInterfaceableWorker(),"error",this.$22.bind(this)))},o.$22=function(t){var e=this.$6(t);!e&&!t.defaultPrevented&&this.$16("exception",{message:t.message})},o.$21=function(n){var e=n.data;switch(e.type){case"message":this.$5(e.message);break;case"pong":this.$2=!0,this.$16("executed",{dt:Math.floor(e.args[1]-e.args[0]),bytes:this.$4.source?this.$4.source.length:-1});break;case"terminate":this.terminate();break;case"haste-error":this.terminate(),this.$16("haste_error",{message:e.message});break;case"console":var r=e.args.shift();["log","error","info","debug","warn"].includes(r)||l(0,5983,r),t.console[r].apply(t.console,e.args);break}},o.$11=function(t){r.states.includes(t)||l(0,5984,t),this.$16("transition",{next_state:t}),this.$3=t},r.prepareResource=function(a,i){if(i===void 0&&(i=n("emptyFunction")),a.sameOriginURL||a.url||a.source||l(0,5985),r.isSupported()||l(0,5986),a.sameOriginURL)i();else if(a.url&&n("isSameOrigin")(new(e||(e=n("URI")))(a.url),new(e||(e=n("URI")))(t.location.href)))a.sameOriginURL=a.url,i();else if(a.source)n("justknobx")._("819")&&n("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",a.name,a.url),r.$23()&&(a.sameOriginURL=r.$24(a.source)),i();else if(n("gkx")("21112")&&a.useInitScript===!0)i();else if(n("justknobx")._("819")&&n("FBLogger")("static_resources").warn("trying to instantiate blob/data Url Worker %s %s",a.name,a.url),a.loading)a.loading.push(i);else{var o=(s||(s=n("performanceNow")))();a.loading=[i],r.$25(a.url,function(e){e?(a.source=e,r.$23()&&(a.sameOriginURL=r.$24(e)),r.$16("prepared",a.name,{dt:Math.floor((s||(s=n("performanceNow")))()-o),bytes:e.length},!1)):r.$16("failed",a.name,{dt:Math.floor((s||(s=n("performanceNow")))()-o),bytes:0},!1),a.loading.forEach(function(e){return e()}),a.loading=!1})}return a},r.releaseResource=function(t){return t.sameOriginURL.indexOf("blob:")===0&&(u.revokeObjectURL&&u.revokeObjectURL(t.sameOriginURL),t.sameOriginURL=null),t},r.isSupported=function(){return f},r.isMessageChannelSupported=function(){return r.areTransferablesSupported()&&!!t.MessageChannel},r.areTransferablesSupported=function(){return r.isSupported()&&g()},r.$25=function(t,r){new(n("XHRRequest"))(t).setTransportBuilder(n("getCrossOriginTransport")).setMethod("GET").setResponseHandler(function(e){r(e)}).setErrorHandler(r.bind(null,null)).send()},r.$24=function(t){if(r.$23()||l(0,5987),r.$19()){var e=n("BlobFactory").getBlob([t],{type:"application/javascript"});return u.createObjectURL(e)}if(r.$20())return"data:application/javascript,"+encodeURIComponent(t)},r.$19=function(){return n("BlobFactory").isSupported()&&p()},r.$20=function(){return _()},r.$23=function(){return r.$19()||r.$20()},r.$16=function(t,o,a,i){n("WebWorkerConfig").logging.enabled&&n("Bootloader").loadModules(["BanzaiLogger"],function(e){e.log(n("WebWorkerConfig").logging.config,babelHelpers.extends({},a,{features_array:r.$18(i),event:t,resource:o}))},"WebWorker")},o.constructWorker=function(t,n){return m(t,n)},o.$26=function(t,n){if(this.isCurrentState("preparing")){this.$8.push(this.$26.bind(this,t,n));return}this.getInterfaceableWorker().postMessage({type:"port",message:t},n)},o.createMessageChannel=function(t,n){var e=new MessageChannel;return this.$26(t,[e.port2].concat(n||[])),e.port1.start(),e.port1},o.getInterfaceableWorker=function(){return this.__worker},r})();d.states=["constructed","preparing","executing","terminated"],d.evalWorkerURL=n("WebWorkerConfig").evalWorkerURL;function m(e,r){return new t.Worker(n("TrustedTypesWebWorkerScriptURLPolicy").createScriptURL(e),r!=null?{name:r}:{})}var p=n("memoize")(function(){var e,t;if(!u||!u.createObjectURL)return!1;try{e=u.createObjectURL(n("BlobFactory").getBlob([""],{type:"application/javascript"}));var r=m(e);r.terminate(),t=!0}catch(e){t=!1}finally{u.revokeObjectURL&&u.revokeObjectURL(e)}return t}),_=n("memoize")(function(){var e;try{var t=m("data:application/javascript,");t.terminate(),e=!0}catch(t){e=!1}return e}),f=!!t.Worker,g=n("memoize")(function(){var e;try{var t=m(d.evalWorkerURL),n=new ArrayBuffer(0);t.postMessage({buffer:n},[n]),t.terminate(),e=!0}catch(t){e=!1}return e});a.exports=d}),null);
__d("dataURLToBlob",["BlobFactory","CanvasToBlobImpl","CanvasToBlobResource","Promise","WebWorker"],(function(t,n,r,o,a,i,l){var e,s=t.URL||t.webkitURL||{};function u(t,a){return!s.createObjectURL||!r("BlobFactory").isSupported?(e||(e=n("Promise"))).reject("Browser doesn't support this feature"):r("WebWorker").isSupported()?new(e||(e=n("Promise")))(function(e,n){var o=new(r("WebWorker"))(r("CanvasToBlobResource")).setMessageHandler(function(t){e(t),o.terminate()}).setErrorHandler(function(e){n(e.message),o.terminate()}).execute().postMessage({dataURL:t,fileType:a})}):(e||(e=n("Promise"))).resolve(o("CanvasToBlobImpl").getBlob(t,a))}l.default=u}),98);
__d("canvasToBlob",["Promise","dataURLToBlob","promiseDone"],(function(t,n,r,o,a,i,l){var e;function s(t,o,a){return new(e||(e=n("Promise")))(function(e,n){if(t.toBlob)t.toBlob(e,o,a);else{var i=t.toDataURL(o,a);r("promiseDone")(r("dataURLToBlob")(i,o).then(function(t){e(t)},n))}})}l.default=s}),98);
__d("CanvasVideoThumbnail",["EventListener","Promise","VideoThumbnail_UNTYPED","canvasToBlob","promiseDone"],(function(t,n,r,o,a,i,l){var e,s=(function(t){function o(e,n,r,o,a,i,l){var s;return o===void 0&&(o=null),a===void 0&&(a=null),i===void 0&&(i=0),l===void 0&&(l=0),s=t.call(this,null)||this,s.$CanvasVideoThumbnail$p_1=e,s.$CanvasVideoThumbnail$p_2=n,s.$CanvasVideoThumbnail$p_3=r,s.$CanvasVideoThumbnail$p_4=o,s.$CanvasVideoThumbnail$p_5=a,s.$CanvasVideoThumbnail$p_6=i,s.$CanvasVideoThumbnail$p_7=l,s.$CanvasVideoThumbnail$p_8=s.$CanvasVideoThumbnail$p_1.toDataURL("image/jpeg"),s}babelHelpers.inheritsLoose(o,t);var a=o.prototype;return a.getCanvas=function(){return this.$CanvasVideoThumbnail$p_1},a.getTime=function(){return this.$CanvasVideoThumbnail$p_3?this.$CanvasVideoThumbnail$p_3:0},a.getURL=function(){return this.$CanvasVideoThumbnail$p_8||(this.$CanvasVideoThumbnail$p_8=this.$CanvasVideoThumbnail$p_1.toDataURL("image/jpeg")),this.$CanvasVideoThumbnail$p_8},a.getData=function(){var t=this,o=document.createElement("canvas"),a=o.getContext("2d"),i=this.$CanvasVideoThumbnail$p_2;return new(e||(e=n("Promise")))(function(e,n){var l=r("EventListener").listen(i,"seeked",function(){l.remove(),t.$CanvasVideoThumbnail$p_9(o,a),r("promiseDone")(r("canvasToBlob")(o,"image/jpeg").then(e,n))});i.currentTime=t.$CanvasVideoThumbnail$p_3})},a.getDataWithText=function(o,a,i,l,s,u,c,d){var t=this,m=document.createElement("canvas"),p=m.getContext("2d"),_=this.$CanvasVideoThumbnail$p_2;return new(e||(e=n("Promise")))(function(e,n){var f=r("EventListener").listen(_,"seeked",function(){f.remove(),p.fillStyle=c,p.textAlign=d,t.$CanvasVideoThumbnail$p_9(m,p),p=r("VideoThumbnail_UNTYPED").addTextToCanvasContext(p,o,a,i,l,s,u,c,d),r("promiseDone")(r("canvasToBlob")(m,"image/jpeg").then(e,n))});_.currentTime=t.$CanvasVideoThumbnail$p_3})},a.$CanvasVideoThumbnail$p_9=function(t,n){var e=this.$CanvasVideoThumbnail$p_2;this.$CanvasVideoThumbnail$p_4||this.$CanvasVideoThumbnail$p_5?(t.width=this.$CanvasVideoThumbnail$p_4?this.$CanvasVideoThumbnail$p_4:e.videoWidth,t.height=this.$CanvasVideoThumbnail$p_5?this.$CanvasVideoThumbnail$p_5:e.videoHeight,this.$CanvasVideoThumbnail$p_10(t,n)):(t.width=e.videoWidth,t.height=e.videoHeight,n.drawImage(e,0,0,t.width,t.height))},a.$CanvasVideoThumbnail$p_10=function(t,n){var e=this.$CanvasVideoThumbnail$p_2,r=this.$CanvasVideoThumbnail$p_6,o=this.$CanvasVideoThumbnail$p_7,a=this.$CanvasVideoThumbnail$p_4?this.$CanvasVideoThumbnail$p_4:t.width,i=this.$CanvasVideoThumbnail$p_5?this.$CanvasVideoThumbnail$p_5:t.height;n.drawImage(e,r,o,a,i,0,0,t.width,t.height)},o})(r("VideoThumbnail_UNTYPED"));l.default=s}),98);
__d("HTMLMediaElementReadyStates",[],(function(t,n,r,o,a,i){var e={HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},l=e;i.default=l}),66);
__d("LSAddMessengerContact",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return r[0]=new t.Map,r[0].set("contact_id",e[0]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTask"),"add_messenger_contact",t.i64.cast([0,308]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))},function(e){return t.resolve(o)}])}e.__sproc_name__="LSContactAddMessengerContactStoredProcedure",e.__tables__=[],a.exports=e}),null);
__d("LSAddMessengerContactStoredProcedure",["LSAddMessengerContact","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSAddMessengerContact"),a.contactId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSInsertNewMediaSend",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.db.table(51).add({offlineAttachmentId:e[0],offlineThreadingId:e[1],inMessageIndex:e[2],attachmentType:e[3],shouldTranscode:e[4],useDoublePhase:e[5],sendByServer:e[6],isSecure:e[7],state:e[4]?t.i64.cast([0,1]):t.i64.cast([0,3])})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMediaSendInsertNewMediaSendStoredProcedure",e.__tables__=["media_send_jobs"],a.exports=e}),null);
__d("LSInsertNewMediaSendStoredProcedure",["LSInsertNewMediaSend","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSInsertNewMediaSend"),a.offlineAttachmentId,a.offlineThreadingId,a.inMessageIndex,a.attachmentType,a.shouldTranscode,a.useDoublePhase,a.sendByServer,a.isSecure);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSLocalApplyOptimisticMessageWithAttachments",["LSArrayGetObjectAt","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticMessage"),e[0],e[1],e[2],e[3],e[4],e[5],e[6],void 0,e[7],e[8],e[9],e[10],void 0,e[12],!0).then(function(e){var t;return t=e,r[0]=t[0],r[1]=t[1],t})},function(o){return r[2]=t.i64.of_int32(e[11].length),t.i64.gt(r[2],t.i64.cast([0,0]))?t.loopAsync(r[2],function(o){return r[3]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[11],r[3]).then(function(e){var t;return t=e,r[4]=t[0],r[5]=t[1],t})},function(n){return r[6]=r[4].get("attachment_fbid"),r[7]=r[4].get("offline_attachment_id"),r[8]=r[4].get("attachment_type"),r[9]=r[4].get("filename"),r[10]=r[4].get("filesize"),r[11]=r[4].get("attachment_index"),r[12]=r[4].get("has_media"),r[13]=r[4].get("has_xma"),r[14]=r[4].get("playable_url"),r[15]=r[4].get("playable_url_mime_type"),r[16]=r[4].get("playable_duration_ms"),r[17]=r[4].get("preview_url"),r[18]=r[4].get("preview_url_mime_type"),r[19]=r[4].get("mini_preview"),r[20]=r[4].get("preview_width"),r[21]=r[4].get("preview_height"),r[22]=r[4].get("xma_layout_type"),r[23]=r[4].get("xmas_template_type"),r[24]=r[4].get("cta1_title"),r[25]=r[4].get("cta2_title"),r[26]=r[4].get("cta3_title"),r[27]=r[4].get("image_url"),r[28]=r[4].get("action_url"),r[29]=r[4].get("title_text"),r[30]=r[4].get("subtitle_text"),r[31]=r[4].get("description_text"),r[32]=r[4].get("source_text"),r[33]=r[4].get("original_file_hash"),r[34]=r[4].get("sound_bite_client_sound_key"),r[35]=r[4].get("sound_bite_visual"),r[36]=r[4].get("ephemeral_media_state"),r[37]=r[4].get("waveform_data"),r[38]=r[4].get("sampling_frequency_hz"),r[17]!==void 0?r[39]=r[17]:r[39]=r[14],t.filter(t.db.table(16).fetch([[[e[1],r[0],r[6]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===r[0]&&n.attachmentFbid===r[6]&&t.i64.gt(n.authorityLevel,t.i64.cast([0,20]))}).next().then(function(n){var o=n.done,a=n.value;return o?t.db.table(16).put({threadKey:e[1],messageId:r[0],attachmentFbid:r[6],timestampMs:r[1],offlineAttachmentId:r[7],attachmentType:r[8],filename:r[9],filesize:r[10],attachmentIndex:r[11],hasMedia:r[12],hasXma:r[13],isSharable:!1,playableUrl:r[14],playableUrlMimeType:r[15],playableDurationMs:r[16],previewUrl:r[39],previewUrlMimeType:r[18],miniPreview:r[19],previewWidth:r[20],previewHeight:r[21],xmaLayoutType:r[22],xmasTemplateType:r[23],cta1Title:r[24],cta2Title:r[25],cta3Title:r[26],imageUrl:r[27],actionUrl:r[28],titleText:r[29],subtitleText:r[30],descriptionText:r[31],sourceText:r[32],ephemeralMediaState:r[36],originalFileHash:r[33],authorityLevel:t.i64.cast([0,20]),samplingFrequencyHz:r[38],waveformData:r[37]}):0})}])}):t.resolve()},function(o){return r[2]=t.i64.of_int32(e[11].length),t.i64.gt(r[2],t.i64.cast([0,0]))?t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[0],r[1],e[3],!1,t.i64.neq(e[6],void 0)):t.resolve()},function(e){var t;return t=[r[0],r[1]],o[0]=t[0],o[1]=t[1],t}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalApplyOptimisticMessageWithAttachmentsStoredProcedure",e.__tables__=["attachments"],a.exports=e}),null);
__d("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure",["LSLocalApplyOptimisticMessageWithAttachments","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSLocalApplyOptimisticMessageWithAttachments"),a.senderId,a.threadKey,a.threadType,a.text,a.snippet,a.snippetHasEmoji,a.stickerId,a.replySourceId,a.replySourceType,a.replySourceTypeV2,a.isForwarded,a.attachments,a.mentionData);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticAcceptMessageRequest",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(n){return r[1]=a.threadSubtype,t.i64.eq(r[1],t.i64.cast([0,75]))?r[0]="interop":r[0]="inbox",t.i64.eq(r[1],t.i64.cast([0,75]))?r[2]=t.i64.cast([-1,4294967277]):r[2]=t.i64.cast([0,0]),t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(n){var o=n.update,i=n.item;return o({folderName:r[0],parentThreadKey:r[2],igFolder:e[1],capabilities:t.i64.and_(a.capabilities,t.i64.cast([-1,4292870143]))})})},function(n){return t.db.table(173).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?0:(n=a.item,r[7]=n.clientThreadPk,t.db.table(276).fetch([[[r[7]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?0:(n=a.item,t.i64.eq(r[2],t.i64.cast([-1,4294967277]))?r[8]=t.i64.cast([0,19]):r[8]=t.i64.cast([0,0]),t.forEach(t.db.table(276).fetch([[[r[7]]]]),function(e){var t=e.update,n=e.item;return t({folderType:r[8]})}))}))})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[3]=t.i64.cast([0,1]):(n=a.item,r[8]=n.syncGroup,t.i64.neq(r[8],void 0)?r[7]=r[8]:r[7]=t.i64.cast([0,1]),r[3]=r[7])})},function(o){return r[5]=new t.Map,r[5].set("thread_key",e[0]),r[5].set("sync_group",r[3]),r[5].set("ig_folder",e[1]),r[6]=t.toJSON(r[5]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"message_request",t.i64.cast([0,66]),r[6],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticAcceptMessageRequestStoredProcedure",e.__tables__=["threads","mi_act_mapping_table","client_threads"],a.exports=e}),null);
__d("LSOptimisticAcceptMessageRequestStoredProcedure",["LSOptimisticAcceptMessageRequest","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticAcceptMessageRequest"),a.threadKey,a.igFolder);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticSendXMAMessageForwardFromSecureThread",["LSArrayGetObjectAt","LSIssueNewTaskWithExtraOperationsAndGetTaskID","LSLocalApplyOptimisticMessage","LSSetMessageDisplayedContentTypes","LSUpdateOptimisticAttachmentPreview"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(a){return t.sequence([function(o){return t.storedProcedure(n("LSLocalApplyOptimisticMessage"),e[0],e[1],e[2],e[3],void 0,void 0,void 0,void 0,void 0,void 0,t.i64.cast([0,3]),e[4],void 0,void 0,!0).then(function(e){var t;return t=e,r[0]=t[0],r[1]=t[1],t})},function(o){return r[3]=t.i64.of_int32(e[6].length),t.i64.gt(r[3],t.i64.cast([0,0]))?t.loopAsync(r[3],function(o){return r[4]=o,t.sequence([function(o){return t.nativeTypeOperation("Array",n("LSArrayGetObjectAt"),e[6],r[4]).then(function(e){var t;return t=e,r[5]=t[0],r[6]=t[1],t})},function(o){return r[7]=r[5].get("attachment_fbid"),r[8]=r[5].get("offline_attachment_id"),r[9]=r[5].get("attachment_type"),r[10]=r[5].get("filename"),r[11]=r[5].get("filesize"),r[12]=r[5].get("attachment_index"),r[13]=r[5].get("has_media"),r[14]=r[5].get("has_xma"),r[15]=r[5].get("playable_url"),r[16]=r[5].get("playable_url_mime_type"),r[17]=r[5].get("playable_duration_ms"),r[18]=r[5].get("preview_url"),r[19]=r[5].get("preview_url_mime_type"),r[20]=r[5].get("mini_preview"),r[21]=r[5].get("preview_width"),r[22]=r[5].get("preview_height"),r[23]=r[5].get("xma_layout_type"),r[24]=r[5].get("xmas_template_type"),r[25]=r[5].get("cta1_title"),r[26]=r[5].get("cta2_title"),r[27]=r[5].get("cta3_title"),r[28]=r[5].get("image_url"),r[29]=r[5].get("action_url"),r[30]=r[5].get("title_text"),r[31]=r[5].get("subtitle_text"),r[32]=r[5].get("description_text"),r[33]=r[5].get("source_text"),r[34]=r[5].get("original_file_hash"),r[35]=r[5].get("sound_bite_client_sound_key"),r[36]=r[5].get("sound_bite_visual"),r[37]=r[5].get("ephemeral_media_state"),t.sequence([function(n){return t.forEach(t.filter(t.db.table(16).fetch([[[e[1],r[0],r[7]]]]),function(n){return t.i64.eq(n.threadKey,e[1])&&t.i64.eq(t.i64.cast([0,0]),t.i64.cast([0,0]))&&n.messageId===r[0]&&n.attachmentFbid===r[7]&&t.i64.lt(n.authorityLevel,t.i64.cast([0,20]))}),function(e){return e.delete()})},function(n){return t.db.table(16).add({threadKey:e[1],messageId:r[0],attachmentFbid:r[7],timestampMs:r[1],offlineAttachmentId:r[8],attachmentType:r[9],filename:r[10],filesize:r[11],attachmentIndex:r[12],hasMedia:r[13],hasXma:r[14],isSharable:!1,playableUrl:r[15],playableUrlMimeType:r[16],playableDurationMs:r[17],previewUrl:r[18],previewUrlMimeType:r[19],miniPreview:r[20],previewWidth:r[21],previewHeight:r[22],xmaLayoutType:r[23],xmasTemplateType:r[24],cta1Title:r[25],cta2Title:r[26],cta3Title:r[27],imageUrl:r[28],actionUrl:r[29],titleText:r[30],subtitleText:r[31],descriptionText:r[32],sourceText:r[33],ephemeralMediaState:r[37],originalFileHash:r[34],authorityLevel:t.i64.cast([0,20])})},function(o){return t.storedProcedure(n("LSSetMessageDisplayedContentTypes"),e[1],r[0],r[1],e[3],!1,!1)},function(o){return t.storedProcedure(n("LSUpdateOptimisticAttachmentPreview"),e[1],r[0],r[7],r[15],void 0,void 0,r[16],r[18],void 0,void 0,r[19],r[21],r[22],r[30])}])}])}):t.resolve()},function(o){return t.storedProcedure(n("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),t.i64.to_string(e[1]),t.i64.cast([0,46]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,1]),void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0])).then(function(e){var t;return t=e,r[2]=t[0],t})},function(n){return t.db.table(31).add({taskId:r[2],threadKey:e[1],offlineThreadingId:r[0],threadAttributionSource:e[5],sendType:t.i64.cast([0,11]),markThreadRead:!1})},function(e){return o[0]=r[0]}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure",e.__tables__=["attachments","messages_optimistic_context"],a.exports=e}),null);
__d("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure",["LSOptimisticSendXMAMessageForwardFromSecureThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticSendXMAMessageForwardFromSecureThread"),a.senderId,a.threadKey,a.threadType,a.text,a.isForwarded,a.source,a.attachments);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWDocumentPreProcess",["WABlobToArrayBuffer","WATagsLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WATagsLogger").TAGS(["MAWDocumentPreProcess"]);async function c(t){return u.DEV(e||(e=babelHelpers.taggedTemplateLiteralLoose(["start document preprocess"]))),Promise.resolve({file:t,filename:t.name,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(t),type:"document"})}function d(e){u.DEV(s||(s=babelHelpers.taggedTemplateLiteralLoose(["start optimistic document preprocess"])));var n=t.URL.createObjectURL(e);return Promise.resolve({file:e,filename:e.name,type:"document",url:n})}l.documentPreprocess=c,l.optimisticDocumentPreprocess=d}),98);
__d("MAWDownloadMediaInWorkerDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MAWDownloadMediaInWorker").__setRef("MAWDownloadMediaInWorkerDeferred");function s(t){e.onReady(function(e){return e.maybeDownloadMediaInWorker(t)})}function u(t){e.onReady(function(e){return e.downloadMediaInWorker(t)})}function c(t){e.onReady(function(e){return e.maybeDownloadMediaInWorkerWithPlaintextHash(t)})}function d(t){e.onReady(function(e){return e.maybeBulkDownloadMediaInWorker(t)})}l.maybeDownloadMediaInWorker=s,l.downloadMediaInWorker=u,l.maybeDownloadMediaInWorkerWithPlaintextHash=c,l.maybeBulkDownloadMediaInWorker=d}),98);
__d("MAWFetchXMABlob",["FBLogger","Promise"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var o=t.descriptionForLogging,a=t.url,i=t.xmaContentType;return a==null||a===""?(e||(e=n("Promise"))).resolve():window.fetch(a).then(function(e){return e.blob()}).catch(function(t){return r("FBLogger")("messenger_web_sharing").mustfix("Error fetching url in xma share from %s, with XMA content type %s and error %s",o,i,t),(e||(e=n("Promise"))).resolve()})}l.fetchBlob=s}),98);
__d("MAWFetchXMADataUtils",["FBLogger","LSXmaContentType","MAWFetchXMABlob","MAWGetImageSpec","MAWParseXMAFBConfig","WAArmadilloXMA.pb","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e={failed_to_fetch_blob_for_xma_share:"Failed to fetch blob xma data for MAWShareAttachent",failed_to_fetch_json_for_xma_share:"Failed execute MAWShareAttachment_LinkPreviewQuery for MAWShareAttachent",failed_to_parse_json_for_xma_share:"Failed to fetch blob xma data for MAWShareAttachent"};function s(e){var t=Object.entries(r("LSXmaContentType")).find(function(t){var n=t[0],r=t[1];return e===r&&o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE[n]!=null}),n=t!=null?o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE[t[0]]:void 0;if(n!==void 0)return o("MAWParseXMAFBConfig").isFBSupportedTargetType({fbTargetType:n,silentExposure:!0})?n:(r("FBLogger")("messenger_web_sharing").mustfix("Unsupported XMA Target Type in sending path: "+n),o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE)}async function u(e,t){var n=e.favicon_blob,r=e.header_image_blob,a=e.overlayIconGlyph,i=e.preview_blob,l=i==null?void 0:new File([i],"preview",{type:i.type}),s=n==null?void 0:new File([n],"favicon",{type:n.type}),u=r==null?void 0:new File([r],"header",{type:r.type});o("sendToSentQPLLogger").markSendToSentPoint(t,"preview_favicon_spec_start");var c=a===o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE?Promise.resolve({height:2,width:2}):l!=null?o("MAWGetImageSpec").getImageSpec_DEPRECATED(l):Promise.resolve(),d=s!=null?o("MAWGetImageSpec").getImageSpec_DEPRECATED(s):Promise.resolve(),m=u!=null?o("MAWGetImageSpec").getImageSpec_DEPRECATED(u):Promise.resolve(),p=await Promise.all([c,d,m]),_=p[0],f=p[1],g=p[2];o("sendToSentQPLLogger").markSendToSentPoint(t,"preview_favicon_spec_ready");var h=l==null||_==null?void 0:{file:l,height:_.height,width:_.width},y=s==null||f==null?void 0:{file:s,height:f.height,width:f.width},C=u==null||g==null?void 0:{file:u,height:g.height,width:g.width};return{faviconFileArgs:y,headerImageFileArgs:C,previewFileArgs:h}}async function c(t,n,a,i,l,s){var u=await Promise.all([[(t==null?void 0:t.startsWith("ls"))===!0?null:t,"favicon"],[n,"image"],[a,"preview"],[i,"header_image"]].map(function(e){return o("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"MAWFetchXMAData_"+e[1],url:e[0],xmaContentType:s}).then(function(e){return e!=null?e:void 0})})).catch(function(t){return l.forEach(function(e){o("sendToSentQPLLogger").markSendToSentFail(e,"failed_to_fetch_blob_for_xma_share")}),r("FBLogger")("messenger_web_sharing").catching(t).mustfix(e.failed_to_fetch_blob_for_xma_share),[void 0,void 0,void 0,void 0]}),c=u[0],d=u[1],m=u[2],p=u[3];return[c,d,m,p]}l.XMA_DATA_ERRORS=e,l.convertXmaContentTypeToMessageType=s,l.makeXMAFileArgs=u,l.getPreviewBlobs=c}),98);
__d("MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9840669832713841"}),null);
__d("MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql",["MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"url"}],t=[{alias:null,args:[{fields:[{kind:"Variable",name:"url",variableName:"url"}],kind:"ObjectValue",name:"params"}],concreteType:"XFBXMAPreviewData",kind:"LinkedField",name:"xma_preview_data",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_receiver_fetch_supported",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_public",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"post_id",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"default_cta_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"subtitle_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title_text",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"xma_content_type",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"favicon_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"header_image_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"preview_url",storageKey:null},{alias:null,args:null,concreteType:"XFBXMAPreviewDataCtaDataConnection",kind:"LinkedField",name:"cta_data",plural:!1,selections:[{alias:null,args:null,concreteType:"XFBXMACtaData",kind:"LinkedField",name:"nodes",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"cta_title",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_action_url",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"cta_native_url",storageKey:null}],storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",selections:t,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",selections:t},params:{id:n("MAWFetchXMAData_fetchXmaPreviewDataQuery_facebookRelayOperation"),metadata:{},name:"MAWFetchXMAData_fetchXmaPreviewDataQuery",operationKind:"query",text:null}}})();a.exports=e}),null);
__d("MAWUnshimUrl",["CometLinkShimUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e!=null){var t=o("CometLinkShimUtils").getLinkShimInfo(e,void 0,void 0,void 0,void 0,void 0,!0);return t.shimmed?t.unshimmedHref:e}}l.unshimUrl=e}),98);
__d("MAWFetchXMAData",["fbt","CometRelay","ConstUriUtils","FBLogger","LSXmaContentType","MAWFetchXMADataUtils","MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql","MAWUnshimUrl","MSGDataclassTypes.flow","WAArmadilloXMA.pb","getJSEnumSafe","isFacebookURI","isStringNullOrEmpty","justknobx","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l,s){"use strict";var e;function u(e,t){var n;return t.forEach(function(e){o("sendToSentQPLLogger").addSendToSentAnnotations(e,{string:{xma_data_result:"private"}})}),{defaultCTA:{actionUrl:o("MAWUnshimUrl").unshimUrl(e),buttonType:(n=o("WAArmadilloXMA.pb")).EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:o("MAWUnshimUrl").unshimUrl(e),title:s._(/*BTDS*/"_j[\"Private post\",\"599d20d959e0009397c73fb9edb426dd\",1]").toString()},linkType:"internal",overlayIconGlyph:n.EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE,preview_blob:void 0,title_text:s._(/*BTDS*/"Facebook").toString(),transportLayerForLogging:"sender_copy",xma_message_type:n.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE,xmaTargetTypeForLogging:n.EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE}}function c(t,r){return o("CometRelay").fetchQuery(t,e!==void 0?e:e=n("MAWFetchXMAData_fetchXmaPreviewDataQuery.graphql"),{url:r}).toPromise()}async function d(e,t,n){var a,i,l,s,d,m,p=await c(e,t).catch(function(e){n.forEach(function(t){o("sendToSentQPLLogger").markSendToSentFail(t,"failed_to_fetch_json_for_xma_share",e)}),r("FBLogger")("messenger_web_sharing").catching(e).mustfix(o("MAWFetchXMADataUtils").XMA_DATA_ERRORS.failed_to_fetch_json_for_xma_share)});n.forEach(function(e){o("sendToSentQPLLogger").markSendToSentPoint(e,"fetch_json_for_xma_share_end")});var _=p==null?void 0:p.xma_preview_data;if(_==null)return n.forEach(function(e){o("sendToSentQPLLogger").addSendToSentAnnotations(e,{string:{xma_data_result:"empty"}})}),u(t,n);if(_.is_public!==!0)return u(t,n);n.forEach(function(e){o("sendToSentQPLLogger").addSendToSentAnnotations(e,{string:{xma_data_result:"public"}})});var f={defaultCTA:{actionUrl:o("MAWUnshimUrl").unshimUrl(t),buttonType:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:o("MAWUnshimUrl").unshimUrl(t),title:(a=_.default_cta_title)!=null?a:void 0},linkType:"internal",title_text:(i=(l=_.title_text)!=null?l:_.header_title)!=null?i:void 0},g=r("getJSEnumSafe")(r("LSXmaContentType"),_.xma_content_type),h=o("MAWFetchXMADataUtils").convertXmaContentTypeToMessageType(g),y=_.post_id,C=_.is_receiver_fetch_supported===!0;if(C&&y!=null){var b={__typename:"XMSGMsgrXmaContentRefDataclass",action_type:o("MSGDataclassTypes.flow").XmsgMsgrXmaActionType.Share,content_type:o("MSGDataclassTypes.flow").XmsgMsgrReceiverFetchContentType.Statusupdate,fetch_params:{__typename:"XMSGMsgrReceiverFetchXmaStatusUpdateFetchParams",post_id:y},xma_content_type:r("getJSEnumSafe")(r("LSXmaContentType"),_.xma_content_type),xma_layout_type:o("MSGDataclassTypes.flow").XmsgMsgrReceiverFetchXmaLayoutType.Single};return babelHelpers.extends({},f,{contentRef:JSON.stringify(b),transportLayerForLogging:"receiver_fetch",xma_message_type:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_RECEIVER_FETCH,xmaTargetTypeForLogging:h})}var v=await o("MAWFetchXMADataUtils").getPreviewBlobs(_.favicon_url,null,_.preview_url,_.header_image_url,n,g),S=v[0],R=v[1],L=v[2],E=v[3];return babelHelpers.extends({},f,{ctas:(s=_.cta_data)==null||(s=s.nodes)==null?void 0:s.map(function(e){var t,n=o("MAWUnshimUrl").unshimUrl(r("isStringNullOrEmpty")(e.cta_action_url)?void 0:e.cta_action_url),a=o("MAWUnshimUrl").unshimUrl(r("isStringNullOrEmpty")(e.cta_native_url)?void 0:e.cta_native_url);return{actionUrl:n,buttonType:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,ctaType:"xma_web_url",nativeUrl:a,title:(t=e.cta_title)!=null?t:void 0}}),favicon_blob:S!=null?S:void 0,header_image_blob:E!=null?E:void 0,header_title:r("isStringNullOrEmpty")(_.title_text)?void 0:(d=_.header_title)!=null?d:void 0,preview_blob:L!=null?L:void 0,subtitle_text:(m=_.subtitle_text)!=null?m:void 0,transportLayerForLogging:"sender_copy",xma_message_type:h,xmaTargetTypeForLogging:h})}function m(e,t,n){var a,i=o("ConstUriUtils").getUri(t),l=i==null||(a=i.setSubDomain("www"))==null?void 0:a.toString();if(l==null)return Promise.resolve({linkType:"unknown",transportLayerForLogging:"sender_copy",xmaTargetTypeForLogging:null});var s=o("MAWUnshimUrl").unshimUrl(t);if(s!=null){var u=o("ConstUriUtils").getUri(s);if(u!=null&&!r("isFacebookURI")(u)&&r("justknobx")._("5006"))return Promise.resolve({linkType:"external",transportLayerForLogging:"sender_copy",xma_message_type:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,xmaTargetTypeForLogging:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE})}return n.forEach(function(e){o("sendToSentQPLLogger").markSendToSentPoint(e,"fetch_json_for_xma_share_start")}),d(e,l,n)}l.fetchXMAData=m}),226);
__d("MAWThreadMappingUtils",["FBLogger","LSMessagingThreadTypeUtil","MAWJids","MAWMiActOnActThreadReadyInstrumentation","ReQL","ReQLSubscribe","err","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e=3e4;async function s(e,t){var n=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.threads).getKeyRange(t));return n==null?(r("FBLogger")("messenger_web").mustfix("[onActThreadReady] Thread is not ready to be used."),null):o("LSMessagingThreadTypeUtil").isGroup(n.threadType)}function u(e,t){return Promise.all([s(e,t),o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.mi_act_mapping_table).getKeyRange(t))]).then(function(e){var t=e[0],n=e[1];return n==null||t==null?(r("FBLogger")("messenger_web").mustfix("[onActThreadReady] Thread is not ready to be used."),null):o("MAWJids").convertIntJidToChatJid(n.jid,t)})}function c(e,t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.mi_act_mapping_table).getKeyRange(t)).then(function(e){return e==null?(r("FBLogger")("messenger_web").mustfix("[onActThreadReady] Thread is not ready to be used."),null):e.jid})}async function d(t,n,a){var i,l=null,c=(i=o("MAWMiActOnActThreadReadyInstrumentation")).getOnActThreadReadyInstanceKey(a);i.startQPL(c,a,n,"getChatJidOnceInThreadMappingTable"),i.addPointQPL(c,"get_existing_int_jid_from_mapping_table_start");var d=await u(t.tables,n);if(i.addPointQPL(c,"get_existing_int_jid_from_mapping_table_end"),d!=null)return o("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(c),Promise.resolve(d);var m=await s(t.tables,n);if(m==null)throw o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(c,"thread_not_ready_to_be_used"),r("FBLogger")("messenger_web").mustfixThrow("Thread is not ready to be used.");return o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(c,"subscribe_to_mapping_table_start"),new Promise(function(a,i){var s=o("ReQL").fromTableDescending(t.tables.mi_act_mapping_table).getKeyRange(n),u=o("ReQLSubscribe").subscribeToFirst(s,function(e){e!=null&&(l!=null&&window.clearTimeout(l),u(),o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(c,"subscribe_to_mapping_table_end"),o("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(c),a(o("MAWJids").convertIntJidToChatJid(e.jid,m)))});l=r("setTimeout")(function(){u(),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(c,"subscribe_to_mapping_table_timeout"),i(r("err")("Timeout waiting for int jid to be populated in mapping table."))},e)})}async function m(t,n,a){var i,l=null,s=(i=o("MAWMiActOnActThreadReadyInstrumentation")).getOnActThreadReadyInstanceKey(a);i.startQPL(s,a,n,"getIntJidOnceInThreadMappingTable"),i.addPointQPL(s,"get_existing_int_jid_from_mapping_table_start");var u=await c(t.tables,n);return i.addPointQPL(s,"get_existing_int_jid_from_mapping_table_end"),u!=null?(o("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(s),Promise.resolve(u)):(o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(s,"subscribe_to_mapping_table_start"),new Promise(function(a,i){var u=o("ReQL").fromTableDescending(t.tables.mi_act_mapping_table).getKeyRange(n),c=o("ReQLSubscribe").subscribeToFirst(u,function(e){e!=null&&(l!=null&&window.clearTimeout(l),c(),o("MAWMiActOnActThreadReadyInstrumentation").addPointQPL(s,"subscribe_to_mapping_table_end"),o("MAWMiActOnActThreadReadyInstrumentation").endSuccessQPL(s),a(e.jid))});l=r("setTimeout")(function(){c(),o("MAWMiActOnActThreadReadyInstrumentation").endFailureQPL(s,"subscribe_to_mapping_table_timeout"),i(r("err")("Timeout waiting for int jid to be populated in mapping table."))},e)}))}l.isThreadGroup=s,l.getChatJidFromMappingTable=u,l.getIntJidFromMappingTable=c,l.getChatJidOnceInThreadMappingTable=d,l.getIntJidOnceInThreadMappingTable=m}),98);
__d("MAWGetProtocolMsgIdByMsgIdInUI",["I64","LSDatabaseSingleton","MAWBridgeSendAndReceive","MAWMpsGating","MAWThreadMappingUtils","MAWUserJidWrapper","WAJids","WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=o("WAJids").createJidUtils({platform:"msgr"});async function c(t){var n=await(e||(e=o("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue();return n.runInTransaction(async function(e){var n=await e.messages.index("messageId").get(t);if(n==null)return null;var r=await o("MAWThreadMappingUtils").getChatJidFromMappingTable(e,n.threadKey);if(r!=null)return{author:u.toUserJid((s||(s=o("I64"))).to_float(n.senderId).toString()),chat:r,externalId:o("WAStanzaUtils").toStanzaId(n.offlineThreadingId)}},"readonly",void 0,void 0,i.id+":33")}var d=async function(t){if(o("MAWMpsGating").isFullMpsEnabled())return c(t);if(o("MAWMpsGating").isMpsMessageRendering()){var e=await c(t);return e!=null&&o("MAWUserJidWrapper").getMyUserJid()===e.author?{author:"@me",chat:e.chat,externalId:e.externalId}:e}return m(t)},m=function(t){return o("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:t})};l.getProtocolMsgIdByMsgIdUI=d}),98);
__d("MAWSendFileMsgTypes",["WAStanzaUtils"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return e}function s(e){return o("WAStanzaUtils").toStanzaId(e)}l.toOfflineAttachmentIDFromStanzaId=e,l.toOfflineAttachmentIDFromString=s}),98);
__d("MAWSecureAttachmentGroupingUtils",["I64","LSIntEnum","MAWSendFileMsgTypes","MessagingAttachmentType","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=t.reduce(function(t,n){return(e||(e=o("I64"))).equal(n.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))?t.mediaStagingsImage.push(n):t.mediaStagingsOther.push(n),t},{mediaStagingsImage:[],mediaStagingsOther:[]}),a=n.mediaStagingsImage,i=n.mediaStagingsOther;return[].concat(a,i)}function c(t){var n=new Map,a=t.filter(function(t){return(e||(e=o("I64"))).equal(t.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))}),i=a.length;if(i>1){var l=r("uuidv4")();a.forEach(function(e,t){n.set(o("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(e.offlineAttachmentId),{groupId:l,groupIndex:t,groupSize:i})})}return n}function d(e){var t=new Map,n=e.length;if(n>1){var o=r("uuidv4")();e.forEach(function(e,r){t.set(e,{groupId:o,groupIndex:r,groupSize:n})})}return t}l.orderMediaStagingsForGrouping=u,l.generateMediaGroupMetadataForMediaStagings=c,l.generateMediaGroupMetadataForMessageIds=d}),98);
__d("MAWForwardMessage",["MAWBridgeSendAndReceive","MAWCreateOneToOneThread","MAWExternalId","MAWGetEphemeralSettings","MAWGetProtocolMsgIdByMsgIdInUI","MAWMessageSendReporter","MAWMiActOnActThreadReady","MAWSecureAttachmentGroupingUtils","MAWThreadId","WAResultOrError","qpl"],(function(t,n,r,o,a,i,l){"use strict";async function e(e,t,n,r){var a=await o("MAWThreadId").isSecureThreadKey(e.tables,t);if(!a){var i=await o("MAWCreateOneToOneThread").call(e,t,void 0,"MAWForwardMessage",r),l=i.jid;return n(l,!0)}var s=await o("MAWMiActOnActThreadReady").waitForACTThreadReady(e.tables,t,"MAWForwardMessage"),u=s.chatJid;return n(u,!1)}function s(e,t,n,r,o,a){return c(e,t,n,r,o,void 0,a)}async function u(e,t,n,r,a){var i=o("MAWSecureAttachmentGroupingUtils").generateMediaGroupMetadataForMessageIds(n);await Promise.allSettled([n.map(function(n){return c(e,t,n,r,a,i.get(n))})])}function c(t,n,a,i,l,s,u){var c=o("MAWExternalId").generateExternalId();return e(t,n,function(e,d){return o("MAWGetProtocolMsgIdByMsgIdInUI").getProtocolMsgIdByMsgIdUI(a).then(function(a){return a!=null?o("MAWGetEphemeralSettings").getEphemeralSetting(e,n).then(function(n){var m=o("MAWBridgeSendAndReceive").sendAndReceive("backend","forwardMsg",{args:{args:{mediaGroupMetadata:s,source:i},chatJid:e,ephemeralSetting:n!=null?n:void 0,externalId:c,isFirstMsg:d,protocolMsgId:a,textWithSubstitutions:u},qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:l});return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:e,externalId:c},m,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:l},t)}):o("WAResultOrError").makeResult({description:"unexpected null protocolMsgId",messageType:"fixMe"})})},l)}l.maybeCreateNewThreadAndCallback=e,l.forwardMessage=s,l.forwardMessageBatch=u}),98);
__d("MAWForwardMessageFromSecureThread.react",["FBLogger","I64","LSFactory","LSHotEmojiSize","LSInsertNewMediaSendStoredProcedure","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure","LSMailboxType","LSMarkSubJobCompletedV2StoredProcedure","LSOptimisticSendMessageV2StoredProcedure","LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure","LSShape","LSVec","MAWAudioUtils","MAWBridgeSendAndReceive","MAWDbMedia","MAWMpsGating","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","MessagePowerUp","MessagingAttachmentType","OfflineThreadingId","ReQL","WAHashUtils","cr:2472","cr:332","getErrorSafe","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(){return o("MAWMpsGating").isMpsMessageRendering()};function c(t,n,r){return{action_url:void 0,attachment_fbid:n,attachment_index:(e||(e=o("I64"))).zero,attachment_type:t.attachmentType,cta1_title:void 0,cta2_title:void 0,cta3_title:void 0,description_text:void 0,filename:t.filename,filesize:void 0,has_media:!0,has_xma:!1,image_url:void 0,mini_preview:void 0,offline_attachment_id:n,original_file_hash:void 0,playable_duration_ms:t.playableDurationMs,playable_url:URL.createObjectURL(r),playable_url_mime_type:r.type,preview_height:void 0,preview_url:void 0,preview_url_mime_type:void 0,preview_width:void 0,source_text:void 0,subtitle_text:void 0,title_text:void 0,waveform_data:t.waveformData,xma_layout_type:void 0,xmas_template_type:void 0}}function d(t,n,r,a){var i;return{action_url:(i=n==null?void 0:n.actionUrl)!=null?i:n==null?void 0:n.nativeUrl,attachment_fbid:r,attachment_index:(e||(e=o("I64"))).zero,attachment_type:t.attachmentType,cta1_title:t.cta1Title,cta2_title:t.cta2Title,cta3_title:t.cta3Title,description_text:t.descriptionText,filename:t.filename,filesize:t.filesize,has_media:!1,has_xma:!0,image_url:void 0,mini_preview:void 0,offline_attachment_id:r,original_file_hash:void 0,playable_duration_ms:void 0,playable_url:a!=null?URL.createObjectURL(a):void 0,playable_url_mime_type:a==null?void 0:a.type,preview_height:void 0,preview_url:a!=null?URL.createObjectURL(a):void 0,preview_url_mime_type:a==null?void 0:a.type,preview_width:void 0,source_text:t.sourceText,subtitle_text:t.subtitleText,title_text:t.titleText,xma_layout_type:t.xmaLayoutType,xmas_template_type:t.xmasTemplateType}}function m(e,t,n,a,i,l,s,u){var c=r("LSFactory")(u);return r("LSOptimisticSendXMAMessageForwardFromSecureThreadStoredProcedure")(c,{attachments:r("LSVec").ofArray([o("LSShape").ofRecord(l)]),isForwarded:i,senderId:e,source:s,text:a!=null?a:void 0,threadKey:t,threadType:n}).then(function(){return Promise.resolve()})}function p(e,t){if(t!=null)return{amplitudes:t.split(",").map(parseFloat),sampling_freq:e!=null?e:o("MAWAudioUtils").WAVEFORM_SAMPLE_RATE}}function _(t,n,a,l,u,c,d,m,_){var f=r("LSFactory")(m);return r("LSLocalApplyOptimisticMessageWithAttachmentsStoredProcedure")(f,{attachments:r("LSVec").ofArray([o("LSShape").ofRecord(n)]),isForwarded:c,senderId:d,threadKey:u,threadType:l}).then(function(t){var n=t[0],r=t[1];return m.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:void 0,markThreadRead:!1,messageId:void 0,offlineThreadingId:n,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(e||(e=o("I64"))).of_string(n),threadAttributionSource:_,threadKey:u}).then(function(){return Promise.resolve(n)})}).then(function(t){var a=n.attachment_fbid;return r("LSInsertNewMediaSendStoredProcedure")(f,{attachmentType:n.attachment_type,inMessageIndex:(e||(e=o("I64"))).zero,isSecure:!1,offlineAttachmentId:a,offlineThreadingId:t,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1}).then(function(){return Promise.resolve([t,a])})}).then(function(l){var u=l[0],c=l[1],d=function(a,l){l==null||l.length===0||r("promiseDone")(t.runInTransaction(function(t){var n=r("LSFactory")(t);return r("LSMarkSubJobCompletedV2StoredProcedure")(n,{fbid:(e||(e=o("I64"))).of_string(l),offlineAttachmentId:c}).then(function(){return o("MWPOpenComposerUtils").resumeSendJob(n,u)})},"readwrite",void 0,void 0,i.id+":227"))};return o("MWPComposerMediaUploadUtil").startUpload(void 0,void 0,d,void 0,(e||(e=o("I64"))).equal(n.attachment_type,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO)),[a],[c],void 0,void 0,p(n.sampling_frequency_hz,n.waveform_data),void 0,void 0)})}async function f(t,a,l,f,g,h,y,C,b){if(h!=null){var v=h.attachmentType;if(!((e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE))||(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))))throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var S=null;if(!(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))&&(isFinite(h.attachmentFbid)?S=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(h.attachmentFbid,10))}):S=await o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:o("WAHashUtils").stringToPlaintextHash(h.attachmentFbid)}).then(function(e){return n("cr:332")!=null&&n("cr:332").runBlobReadAndCompareResult({fileName:h.attachmentFbid,idbBlob:e}),e}),S==null))return;await t.runInTransaction(function(i){switch(!0){case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO)):{var R;if(S==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");var L=new File([S],"mediaForwardedFromSecureThread",{type:S.type}),E=o("OfflineThreadingId").createOfflineThreadingID(),k=o("MWPComposerMediaUploadUtil").getAudioAttachment(E,L,(e||(e=o("I64"))).to_int32((R=h.playableDurationMs)!=null?R:(e||(e=o("I64"))).zero)/1e3,p(h.samplingFrequencyHz!=null?(e||(e=o("I64"))).to_int32(h.samplingFrequencyHz):void 0,h.waveformData));return _(t,k,L,l,a,g,y,i,C)}case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)):{var I;return o("ReQL").firstAsync(o("ReQL").fromTableDescending(i.attachment_ctas).getKeyRange((I=h.defaultCtaId)!=null?I:(e||(e=o("I64"))).zero)).then(function(e){var t,a=h.xmaPreviewFbid;if(a==null)return r("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is null when forwarding XMA"),Promise.resolve([e,void 0]);if(u())t=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:"MAWForwardMessageFromSecureThread",plaintextHash:o("WAHashUtils").stringToPlaintextHash(a)}).then(function(e){return n("cr:332")!=null&&n("cr:332").runBlobReadAndCompareResult({fileName:h.attachmentFbid,idbBlob:e}),e});else try{t=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:"MAWForwardMessageFromSecureThread",mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(a,10))})}catch(t){var i=r("getErrorSafe")(t);return r("FBLogger")("messenger_web_sharing").mustfix("XMA preview fbid is not a valid mediaId when forwarding XMA %s",i.message),Promise.resolve([e,void 0])}return t.then(function(t){return Promise.resolve([e,t])}).catch(function(t){return r("FBLogger")("messenger_web_sharing").catching(t).warn("Unable to getBlobDataUrlByXMAId, from MAWForwardMessageFromSecureThread"),Promise.resolve([e,void 0])})}).then(function(e){var t=e[0],r=e[1],s=null;r!=null&&(s=new File([r],"xmaForwardedFromSecureThread",{type:r.type}));var u=o("OfflineThreadingId").createOfflineThreadingID(),c=d(h,t,u,s),p=f.text,_=n("cr:2472")==null||p==null?p:n("cr:2472").unvault(p);return m(y,a,l,b!=null?b:_,g,c,C,i)})}case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)):case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)):case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)):case(e||(e=o("I64"))).equal(v,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)):{var T;if(S==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("Blob can not be null for MessagingAttachmentType.AUDIO");var D=new File([S],(T=h.filename)!=null?T:"mediaForwardedFromSecureThread",{type:S.type}),x=o("OfflineThreadingId").createOfflineThreadingID(),$=c(h,x,D);return _(t,$,D,l,a,g,y,i,C)}default:throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type")}},"readwrite",void 0,void 0,i.id+":342")}else{var R=f.text;if(R==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this type");var L=n("cr:2472")==null?R:n("cr:2472").unvault(R),E=L==="\u{1F44D}"&&f.hotEmojiSize!=null&&(e||(e=o("I64"))).equal(f.hotEmojiSize,(s||(s=o("LSIntEnum"))).ofNumber(r("LSHotEmojiSize").SMALL)),k=E?(e||(e=o("I64"))).of_string("369239263222822"):void 0;await t.runInTransaction(function(e){return r("LSOptimisticSendMessageV2StoredProcedure")(r("LSFactory")(e),{extraSendMessageParams:o("LSShape").ofRecord({calculate_denormalizations:!1,is_forwarded:g,mark_read:!1,power_up_style:(s||(s=o("LSIntEnum"))).ofNumber(r("MessagePowerUp").NONE),source:C,sticker_id:k}),mailboxType:s.ofNumber(r("LSMailboxType").MESSENGER),senderId:y,text:E?void 0:b!=null?b:L,threadKey:a,threadType:l})},"readwrite",void 0,void 0,i.id+":553")}}l.getMediaAttachment=c,l.uploadAndSendMediaToOpenThread=_,l.forwardMessage=f}),98);
__d("VideoFrameBuffer",["HTMLMediaElementReadyStates","getErrorSafe"],(function(t,n,r,o,a,i,l){var e=(function(){function e(e,t,n,r,o,a,i){r===void 0&&(r=null),o===void 0&&(o=null),a===void 0&&(a=null),i===void 0&&(i=null),this.$2=t,this.$1=e,this.$3=n||"contain",this.$6=r,this.$7=o,this.$8=a,this.$9=i}var t=e.prototype;return t.updateFrameBuffer=function(){if(this.$4&&(this.$1.width=this.$4,this.$4=null),this.$5&&(this.$1.height=this.$5,this.$5=null),!(this.$2.readyState<r("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)){var e=this.$1.clientWidth||this.$1.width,t=this.$1.clientHeight||this.$1.height,n=e,o=t,a=this.$2.videoWidth/this.$2.videoHeight,i=n/o;this.$3==="cover"&&(i*=-1,a*=-1),i>a?n=o*a:i<a&&(o=n/a);var l=this.$1.getContext("2d");if(l instanceof window.CanvasRenderingContext2D)try{if(this.$6||this.$7){var s,u,c,d;l.drawImage(this.$2,(s=this.$8)!=null?s:0,(u=this.$9)!=null?u:0,(c=this.$6)!=null?c:e,(d=this.$7)!=null?d:t,0,0,e,t)}else l.drawImage(this.$2,(e-n)/2,(t-o)/2,n,o)}catch(e){var m=r("getErrorSafe")(e);if(m.name!=="NS_ERROR_NOT_AVAILABLE")throw m}}},t.getDOMNode=function(){return this.$1},t.updateDimensions=function(t,n){this.$4=t,this.$5=n},e})();l.default=e}),98);
__d("generateVideoThumbnails",["CPXComposerConstants","CanvasVideoThumbnail","HTMLMediaElementReadyStates","Promise","VideoFrameBuffer","cr:909281"],(function(t,n,r,o,a,i,l){var e,s=.5625;function u(t,o,a,i,l,s,u,f,g,h){return l===void 0&&(l="contain"),s===void 0&&(s=0),u===void 0&&(u=null),f===void 0&&(f=null),g===void 0&&(g=null),h===void 0&&(h=null),new(e||(e=n("Promise")))(function(e,y){var C=document.createElement("canvas"),b=[],v=0,S=t.duration-s;h!=null&&(S=Math.min(S,h));var R=S/i,L=null,E=null,k,I=f!=null?f:c(u,o),T=g!=null?g:d(u,a),D=m(u,o),x=p(u,a);C.width=I!=null?I:o,C.height=T!=null?T:a;var $=new(r("VideoFrameBuffer"))(C,t,l,I,T,D,x);$.updateFrameBuffer();var P=function(){$.updateFrameBuffer();var e=new(r("CanvasVideoThumbnail"))(C,t,s+(v-1)*R,I,T,D,x);b.push(e),(!L||e.getURL().length>L.getURL().length)&&(L=e,E=_(u,t)),M()},N=function(){if(t.readyState>=r("HTMLMediaElementReadyStates").HAVE_CURRENT_DATA)P();else if(n("cr:909281")!==null)var e=n("cr:909281").listen(t,"loadeddata",function(){e.remove(),P()});else t.addEventListener("loadeddata",P,{once:!0})},M=function(){v===0&&(n("cr:909281")!==null?k=n("cr:909281").listen(t,"seeked",N):t.addEventListener("seeked",N)),v<i?(t.currentTime=s+v*R,v++):(n("cr:909281")!==null?k&&k.remove():t.removeEventListener("seeked",N),e({thumbnails:b,selectedThumbnail:L,croppedThumbnailUri:E}))};if(t.videoWidth===0||t.videoHeight===0){y();return}M()})}function c(e,t){if(e&&e.spherical){if(e.stereoMode==="left-right")return t/2;if(e.projectionType==="cubemap")return t/3}return null}function d(e,t){return e&&e.spherical&&(e.stereoMode==="top-bottom"||e.projectionType==="cubemap")?t/2:null}function m(e,t){return e&&e.spherical&&e.projectionType==="cubemap"?t/3:0}function p(e,t){return e&&e.spherical&&e.projectionType==="cubemap"?t/2:0}function _(e,t){var n=t.videoWidth!=null&&t.videoHeight!=null?t.videoWidth/t.videoHeight:s,r=n<1;if(e==null&&!r){var a=document.createElement("canvas"),i=a.getContext("2d"),l=t.videoWidth,u=t.videoHeight;a.width=l,a.height=u,i.drawImage(t,0,0,l,u);var c=document.createElement("canvas"),d,m;n>=1&&n<1.2?(d=l*(o("CPXComposerConstants").REEL_THUMBNAIL_WIDTH/o("CPXComposerConstants").REEL_THUMBNAIL_HEIGHT),m=u):(d=u,m=l),c.width=d,c.height=m;var p=c.getContext("2d");return p.drawImage(a,0,0,l,u,0,0,d,m),c.toDataURL("image/jpeg")}return null}l.default=u}),98);
__d("MAWVideoUtils",["FBLogger","MAWImageUtils","Promise","generateVideoThumbnails"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var a=document.body;if(!a)return new(e||(e=n("Promise")))(function(e,t){return t("Unable to find DOM body, please use this util only in DOM environment.")});var i=document.createElement("video");return new(e||(e=n("Promise")))(function(o,l){i.setAttribute("style","display: none"),i.setAttribute("src",URL.createObjectURL(t)),i.addEventListener("loadedmetadata",function(t){var a=t.currentTarget;if(a instanceof HTMLVideoElement){var s=a.duration,u=a.videoHeight,c=a.videoWidth,d=r("generateVideoThumbnails")(i,c,u,1);o((e||(e=n("Promise"))).all([d,c,u,Math.round(s)]))}else l("EventTarget returned for event should be HTMLVideoElement")}),i.addEventListener("error",function(e){l("Unable to load video")}),a.appendChild(i)}).then(function(e){var t=e[0],n=e[1],r=e[2],l=e[3];return a.removeChild(i),o("MAWImageUtils").canvasToBlob(t.thumbnails[0].getCanvas(),o("MAWImageUtils").TYPE_JPEG,!0).then(function(e){return e.arrayBuffer().then(function(e){return{duration:l,height:r,jpegThumbnail:e,width:n}})})}).catch(function(e){throw a.removeChild(i),r("FBLogger")("messenger_web").mustfixThrow(e)})}function u(t){var o=document.body;if(!o)return new(e||(e=n("Promise")))(function(e,t){return t("Unable to find DOM body, please use this util only in DOM environment.")});var a=document.createElement("video");return new(e||(e=n("Promise")))(function(e,n){a.setAttribute("style","display: none"),a.setAttribute("src",URL.createObjectURL(t)),a.addEventListener("loadedmetadata",function(t){var r=t.currentTarget;if(r instanceof HTMLVideoElement){var o=r.duration,a=r.videoHeight,i=r.videoWidth;e({duration:Math.round(o),height:a,width:i})}else n("EventTarget returned for event should be HTMLVideoElement")}),a.addEventListener("error",function(e){n("Unable to load video")}),o.appendChild(a)}).catch(function(e){throw o.removeChild(a),r("FBLogger")("messenger_web").mustfixThrow(e)})}l.getVideoThumbnailUrlAndSpec=s,l.getVideoThumbnailSpec=u}),98);
__d("MAWFowardMessageFromOpenThread",["FBLogger","I64","LSIntEnum","MAWAudioUtils","MAWBridgeSendAndReceive","MAWDocumentPreProcess","MAWFetchXMABlob","MAWFetchXMAData","MAWFetchXMADataUtils","MAWForwardMessage","MAWGetEphemeralSettings","MAWGetImageSpec","MAWImagePreProcess","MAWMessageSendReporter","MAWUnshimUrl","MAWVault","MAWVideoUtils","MessagingAttachmentType","ReQL","WAArmadilloXMA.pb","WABlobToArrayBuffer","gkx","qpl","sendToSentQPLLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u="369239263222822",c="369239343222814",d="369239383222810";function m(e){return e===u||e===c||e===d}function p(e,t){return Promise.all([o("MAWGetImageSpec").getImageSpec_DEPRECATED(e),Promise.resolve(e),t.arrayBuffer(),o("MAWGetImageSpec").getImageSpec_DEPRECATED(t)]).then(async function(e){var t=e[0],n=e[1],r=e[2],a=e[3];return{file:n,imageSpec:t,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(n),thumbnailUrlAndSpec:{duration:void 0,height:a.height,jpegThumbnail:r,width:a.width},type:"image"}})}function _(e){return o("MAWVideoUtils").getVideoThumbnailUrlAndSpec(e).then(async function(t){return{file:e,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(e),thumbnailUrlAndSpec:t,type:"video"}})}async function f(e,t){var n=await o("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"MAWFowardMessageFromOpenThread",url:e}),r=n==null?void 0:new File([n],t,{type:n.type}),a=r!=null?await o("MAWGetImageSpec").getImageSpec_DEPRECATED(r):null;return r!=null&&a!=null?{file:r,height:a.height,width:a.width}:void 0}async function g(e,t,n){var r,a,i=await o("ReQL").firstAsync(o("ReQL").fromTableAscending(n.tables.attachment_ctas).getKeyRange(e));return i==null||t==null&&i.actionUrl==null?null:{actionUrl:(r=i==null?void 0:i.actionUrl)!=null?r:void 0,buttonType:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:(a=i==null?void 0:i.actionUrl)!=null?a:void 0,title:t!=null?t:void 0}}async function h(e,t,n,a){var i=await y(t,n);if((i==null?void 0:i.actionUrl)==null)throw o("sendToSentQPLLogger").markSendToSentFail(a,"null_xma_url"),r("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads without a defaultCTA and actionUrl");var l=await o("MAWFetchXMAData").fetchXMAData(e,i.actionUrl,[a]);if(l.linkType==="unknown")throw o("sendToSentQPLLogger").markSendToSentFail(a,"unknown_xma_link_type"),r("FBLogger")("messenger_web_sharing").mustfixThrow("Cannot forward XMA to secure threads with an unknown link type");return l.linkType==="external"?b(t,i,n,l):C(l,a)}async function y(e,t){var n=e.actionUrl,r=e.defaultCtaId,a=e.defaultCtaTitle;if(r==null)return null;var i=await g(r,a,t);return i!=null?i:{actionUrl:n!=null?n:void 0,buttonType:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:n!=null?n:void 0,title:a!=null?a:void 0}}async function C(e,t){var n=await o("MAWFetchXMADataUtils").makeXMAFileArgs(e,t),r=e.contentRef,a=e.ctas,i=e.defaultCTA,l=e.overlayIconGlyph,s=e.subtitle_text,u=e.title_text,c=e.xma_message_type,d={contentRef:r,ctas:a,defaultCTA:i,overlayIconGlyph:l,subtitleText:s,titleText:u};return babelHelpers.extends({},n,{xmaArgs:d,xmaMessageType:c!=null?c:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE})}async function b(t,n,r,a){var i=t.attachmentCta1Id,l=t.attachmentCta2Id,s=t.attachmentCta3Id,u=t.cta1Title,c=t.cta2Title,d=t.cta3Title,m=t.faviconUrl,p=t.headerImageUrl,_=t.headerTitle,h=t.maxSubtitleNumOfLines,y=t.maxTitleNumOfLines,C=t.previewUrl,b=t.subtitleText,v=t.titleText,S=await Promise.all([[m,"favicon"],[p,"headerImage"],[C,"preview"]].map(function(e){return f(e[0],e[1])})),R=S[0],L=S[1],E=S[2],k=[];if(i!=null){var I=await g(i,u,r);I!=null&&k.push(I)}if(l!=null){var T=await g(l,c,r);T!=null&&k.push(T)}if(s!=null){var D=await g(s,d,r);D!=null&&k.push(D)}var x={contentRef:a.contentRef,ctas:k.map(function(e){return babelHelpers.extends({},e,{actionUrl:o("MAWUnshimUrl").unshimUrl(e.actionUrl),nativeUrl:o("MAWUnshimUrl").unshimUrl(e.nativeUrl)})}),defaultCTA:babelHelpers.extends({},n,{actionUrl:o("MAWUnshimUrl").unshimUrl(n.actionUrl),nativeUrl:o("MAWUnshimUrl").unshimUrl(n.nativeUrl)}),headerTitle:_,maxSubtitleNumOfLines:(e||(e=o("I64"))).to_int32(h!=null?h:(e||(e=o("I64"))).zero),maxTitleNumOfLines:e.to_int32(y!=null?y:(e||(e=o("I64"))).zero),overlayIconGlyph:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE,subtitleText:b,titleText:v};return{faviconFileArgs:R,headerFileArgs:L,previewFileArgs:E,xmaArgs:x,xmaMessageType:a.xma_message_type}}function v(t){var n=t.attachmentType,a=t.filename,i=t.playableDurationMs,l=t.playableUrl,u=t.playableUrlMimeType,c=t.previewUrl,d=t.previewUrlMimeType;if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE))||(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE))){if(l==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this attachment");var m=(e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE));if(c!=null){var f=m?c+"&":l,g=m?c+"&":c;return Promise.all([window.fetch(f).then(function(e){return e.blob()}),window.fetch(g).then(function(e){return e.blob()})]).then(function(t){var a=t[0],i=t[1],l=new File([a],"mediaForwardedFromOpenThread",{type:m?d:u}),c=new File([i],"previewForwardedFromOpenThread",{type:d});if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)))return p(l,c);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)))return _(l);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)))return p(l,c);throw r("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}var h=m?l+"&":l;return window.fetch(h).then(function(e){return e.blob()}).then(function(t){if(m&&u==="video/mp4")throw r("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is only mp4 url for gif");var i=new File([t],a!=null?a:"mediaForwardedFromOpenThread",{type:u});if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)))return o("MAWImagePreProcess").imagePreprocess(i,!1);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)))return _(i);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)))return o("MAWDocumentPreProcess").documentPreprocess(i);if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)))return Promise.all([o("MAWImagePreProcess").getJpegThumbnailInfo(i,400),o("MAWGetImageSpec").getImageSpec_DEPRECATED(i),Promise.resolve(i)]).then(async function(e){var t=e[0],n=e[1],r=e[2];return{file:r,imageSpec:n,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(r),thumbnailUrlAndSpec:t,type:"image"}});throw r("FBLogger")("messenger_web_sharing").mustfixThrow("shouldn't have this error in forward message from open thread")})}if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO))){if(l!=null)return window.fetch(l+"&").then(function(e){return e.blob()}).then(async function(n){var a=new File([n],"mediaForwardedFromOpenThread",{type:u}),l,s=t.waveformData;if(s!=null&&s!==""&&r("gkx")("20216")){var c=s.split(",").map(Number);if(c.every(function(e){return!Number.isNaN(e)})){var d=o("MAWAudioUtils").normalizeWaveformAmplitudes(c);l=new Uint8Array(d).buffer}else r("FBLogger")("messenger_web_sharing").warn("Waveform data is invalid. Forwarding skipped.")}return{durations:(e||(e=o("I64"))).to_int32(i!=null?i:(e||(e=o("I64"))).zero)/1e3,file:a,isPtt:!0,plaintext:await o("WABlobToArrayBuffer").blobToArrayBuffer(a),type:"audio",waveform:l}});throw r("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no playableUrl for this audio attachment")}if((e||(e=o("I64"))).equal(n,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER))){if(l==null&&c==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("If you see this error, there is no url for this sticker");return l!=null?c!=null?Promise.all([window.fetch(l).then(function(e){return e.blob()}),window.fetch(c).then(function(e){return e.blob()})]).then(function(e){var t=e[0],n=e[1],r=new File([t],"mediaForwardedFromOpenThread",{type:u}),o=new File([n],"previewForwardedFromOpenThread",{type:d});return p(r,o)}):window.fetch(l).then(function(e){return e.blob()}).then(function(e){var t=new File([e],"mediaForwardedFromOpenThread",{type:u});return p(t,t)}):window.fetch(c).then(function(e){return e.blob()}).then(function(e){return o("MAWImagePreProcess").imagePreprocess(new File([e],"previewForwardedFromOpenThread",{type:d}),!0)})}throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding other media types. Received attachment %d",(s||(s=o("LSIntEnum"))).toNumber(n))}function S(t,n,a,i,l,u,c,d,p){return o("MAWForwardMessage").maybeCreateNewThreadAndCallback(n,a,function(_,f){var g=o("MAWGetEphemeralSettings").getEphemeralSetting(_,a),y=f;return g.then(function(a){if(u!=null){if(m(u.attachmentFbid)){var f=o("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:"\u{1F44D}",ephemeralSetting:a!=null?a:void 0,isFirstMsg:y,isForwarded:l,source:c,specialTextSize:1},chatJid:_,externalId:p,qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d});return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:_,externalId:p},f,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d},n)}return(e||(e=o("I64"))).equal(u.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))?h(t,u,n,d).then(function(e){var t=e.faviconFileArgs,l=e.headerFileArgs,s=e.previewFileArgs,u=e.xmaArgs,c=e.xmaMessageType,m=i.text,f=o("MAWBridgeSendAndReceive").sendAndReceive("backend","sendXMAShareMsg",{args:{content:m!=null&&o("MAWVault").isVaulted(m)?o("MAWVault").unvault(m):m,ephemeralSetting:a!=null?a:void 0,isFirstMsg:y,isForwarded:!0,xmaMessageType:c!=null?c:o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.FB_FEED_SHARE},chatJid:_,faviconFile:t,headerFile:l,previewFile:s,qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d,xmaArgs:u,xmaMsgExternalId:p});return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:_,externalId:p},f,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d},n)}):v(u).then(async function(e){var t,i;switch(e.type){case"image":{var s=e.imageSpec,u=e.thumbnailUrlAndSpec;i={args:{ephemeralSetting:a!=null?a:void 0,height:s.height,isFirstMsg:y,isForwarded:l,jpegThumbnail:u==null?void 0:u.jpegThumbnail,jpegThumbnailHeight:u==null?void 0:u.height,jpegThumbnailWidth:u==null?void 0:u.width,source:c,width:s.width},attachmentType:"image",chatJid:_,externalId:p};break}case"video":{var m=e.thumbnailUrlAndSpec;i={args:{duration:m.duration,ephemeralSetting:a!=null?a:void 0,height:m.height,isFirstMsg:y,isForwarded:l,jpegThumbnail:m.jpegThumbnail,jpegThumbnailHeight:m.height,jpegThumbnailWidth:m.width,source:c,width:m.width},attachmentType:"video",chatJid:_,externalId:p};break}case"audio":{var f=e.durations,g=e.isPtt,h=e.waveform;i={args:{duration:Math.round(f),ephemeralSetting:a!=null?a:void 0,isFirstMsg:y,isForwarded:l,isPtt:g,source:c,waveform:h},attachmentType:"audio",chatJid:_,externalId:p};break}case"document":{i={args:{ephemeralSetting:a!=null?a:void 0,filename:e.filename,isFirstMsg:y,isForwarded:l,source:c},attachmentType:"application",chatJid:_,externalId:p};break}}if(i==null)throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this attachment type: %s",e.type);var C=o("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMediaMsgV2",babelHelpers.extends({},i,{mimeType:e.file.type,plaintext:(t=e.plaintext)!=null?t:await o("WABlobToArrayBuffer").blobToArrayBuffer(e.file),qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d}));return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:_,externalId:p},C,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d},n)})}var g=i.text;if(g!=null){var C=o("MAWBridgeSendAndReceive").sendAndReceive("backend","sendMsg",{args:{content:o("MAWVault").isVaulted(g)?o("MAWVault").unvault(g):g,ephemeralSetting:a!=null?a:void 0,isFirstMsg:y,isForwarded:l,source:c},chatJid:_,externalId:p,qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d});return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:_,externalId:p},C,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:d},n)}throw r("FBLogger")("messenger_web_sharing").mustfixThrow("We do not support forwarding this types")})},d)}l.downloadMediaByUrl=v,l.forwardMessage=S}),98);
__d("MAWGetAttachmentThumbnailBlob",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","Promise","PromiseAnnotate","WAHashUtils","interaction-tracing","isStringNullOrEmpty","nullthrows","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=new Map,p=new Map;function _(e,t){m.set(e,{TAG:"done",url:t})}function f(e,t,n,a){var i;if(e==null)return r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId because attachment is null, from %s",t),n==null||n.endFail("attachment_is_null",{string:{description:t}}),"";if((u||(u=o("I64"))).equal(e.authorityLevel,(c||(c=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))){var l,s=h(e);return s==null||s.length===0?(r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId because optimistic attachment url is null or empty, from %s",t),n==null||n.endFail("no_optimistic_attachment_url",{string:{description:t}}),""):(n==null||n.addPoint("return_optimistic",{string:{description:t}}),p.set((l=e.offlineAttachmentId)!=null?l:e.attachmentFbid,s),s)}var _=a!=null?a:e.attachmentFbid,f=m.get(_),g=p.get((i=e.offlineAttachmentId)!=null?i:e.attachmentFbid);if(f!=null){if(f.TAG==="loading"){if(g!=null)return g;throw f.urlPromise}var b=r("isStringNullOrEmpty")(f.url);return b&&(n==null||n.addPoint("attachment_state_preview_url_is_null_or_empty",{string:{description:t}})),f.url}var v=isFinite(e.attachmentFbid)?C(e.attachmentFbid,t,n,_):y(e.attachmentFbid,t,n,_);if(m.set(_,{TAG:"loading",urlPromise:v}),g!=null)return g;throw(d||(d=o("PromiseAnnotate"))).setDisplayName(v,"MAWGetAttachmentThumbnailBlob.getThumbnailBlobDataUrl"),v}function g(e,t,n,r){var a=r!=null?r:e,i=m.get(a);if(i!=null){if(i.TAG==="loading")throw i.urlPromise;return i.url}var l=isFinite(e)?C(e,t,n,a):y(e,t,n,a);throw m.set(a,{TAG:"loading",urlPromise:l}),(d||(d=o("PromiseAnnotate"))).setDisplayName(l,"MAWGetAttachmentThumbnailBlob.getThumbnailBlobByAttachmentId"),l}function h(e){return e==null?void 0:e.previewUrl}function y(t,a,i,l){i==null||i.addPoint("fetch_thumbnail_blob_from_backend_start",{string:{description:a}});var u=r("interaction-tracing").InteractionTracingCore.getPendingInteractions(),c=(s||(s=r("performanceNow")))(),d=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getThumbnailBlobDataUrlByHashedPlaintextHash",{description:a,plaintextHash:o("WAHashUtils").stringToPlaintextHash(t),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(t){return b(u,c,t?"SUCCESS":"FAIL"),t?i==null||i.addPoint("fetch_thumbnail_blob_from_backend_success",{string:{description:a}}):(i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:"empty-url"}}),r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId, backend returned empty url, from %s",a)),m.set(l,{TAG:"done",url:r("nullthrows")(t)}),i==null||i.addPoint("fetch_thumbnail_blob_url_set_in_cache"),(e||(e=n("Promise"))).resolve()}).catch(function(t){return i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:t.message}}),b(u,c,"FAIL"),m.set(l,{TAG:"done",url:""}),r("FBLogger")("messenger_web_media").catching(t).warn("Unable to getThumbnailBlobDataUrlByHashedPlaintextHash, from %s",a),(e||(e=n("Promise"))).resolve()});return d}function C(t,a,i,l){i==null||i.addPoint("fetch_thumbnail_blob_from_backend_start",{string:{description:a}});var u=r("interaction-tracing").InteractionTracingCore.getPendingInteractions(),c=(s||(s=r("performanceNow")))(),d=o("MAWBridgeSendAndReceive").sendAndReceive("backend","getThumbnailBlobDataUrlByMediaId",{description:a,mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(t,10)),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(t){return b(u,c,t?"SUCCESS":"FAIL"),t?i==null||i.addPoint("fetch_thumbnail_blob_from_backend_success",{string:{description:a}}):(i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:"empty-url"}}),r("FBLogger")("messenger_web_media").warn("Unable to getThumbnailBlobDataUrlByMediaId, backend returned empty url, from %s",a)),m.set(l,{TAG:"done",url:r("nullthrows")(t)}),i==null||i.addPoint("fetch_thumbnail_blob_url_set_in_cache"),(e||(e=n("Promise"))).resolve()}).catch(function(t){return i==null||i.endFail("fetch_thumbnail_blob_from_backend_fail",{string:{description:a,error:t.message}}),b(u,c,"FAIL"),m.set(l,{TAG:"done",url:""}),r("FBLogger")("messenger_web_media").catching(t).warn("Unable to getThumbnailBlobDataUrlByMediaId, from %s",a),(e||(e=n("Promise"))).resolve()});return d}function b(e,t,n){var o=(s||(s=r("performanceNow")))();e.forEach(function(e){e.addSubspan("MAWFetchAttachmentThumbnailBlob","AppTiming",t,o,{action:n,full_duration:(o-t)/1e3})})}l.setEagerThumbnailUrl=_,l.getThumbnailBlob_CausesSuspense=f,l.getThumbnailBlobByAttachmentId_CausesSuspense=g}),98);
__d("MAWMediaSetMediaValidatedResult",["LSIntEnum","MAWClientMediaStatusUtils","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){r("promiseDone")(t,function(t){return t.runInTransaction(async function(t){var r=await t.client_media_status.get(n);return r==null?t.client_media_status.add(babelHelpers.extends({id:n,mainMediaStatus:(e||(e=o("LSIntEnum"))).ofNumber(1),mainMediaStatusDetails:"optimistic_with_validation_result",previewMediaStatus:e.ofNumber(1),previewMediaStatusDetails:"optimistic_with_validation_result"},o("MAWClientMediaStatusUtils").getValidationResults(a))):t.client_media_status.put(babelHelpers.extends({},r,{id:n},o("MAWClientMediaStatusUtils").getValidationResults(a)))},"readwrite",void 0,void 0,i.id+":26")})}l.call=s}),98);
__d("useMAWMediaDownloadUIStateDebounced",["react","react-compiler-runtime","useMAWMediaDebouncedState"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(4),n=r("useMAWMediaDebouncedState")(e),a=n[0],i=n[1],l,u;return t[0]!==i||t[1]!==e?(l=function(){i(e,!(e==="loading"||e==="downloaded"))},u=[e,i],t[0]=i,t[1]=e,t[2]=l,t[3]=u):(l=t[2],u=t[3]),s(l,u),a}l.default=u}),98);
__d("useMAWMediaValidationResult",["I64","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","MAWMediaSetMediaValidatedResult","MessagingAttachmentType","WAHashUtils","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=e||(e=o("react")),d=c.useEffect,m=c.useMemo,p=new Set;function _(e,t){var n=o("react-compiler-runtime").c(5),a=r("useAsyncReStore")(),i,l;n[0]!==e||n[1]!==a||n[2]!==t?(i=function(){if(e!=null){var n=(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)),i=s.equal(e.attachmentType,u.ofNumber(r("MessagingAttachmentType").AUDIO)),l=e.attachmentFbid;if(!p.has(l)&&(n||i)){p.add(l);var c=isNaN(l),d=c?o("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaValidationResultByPlainTextHash",{plaintextHash:o("WAHashUtils").stringToPlaintextHash(l),qplInstanceKey:t==null?void 0:t.getInstanceKey()}):o("MAWBridgeSendAndReceive").sendAndReceive("backend","getMediaValidationResultByMediaId",{mediaId:o("MAWDbMedia").convertNumberToMediaId(parseInt(l,10)),qplInstanceKey:t==null?void 0:t.getInstanceKey()});r("promiseDone")(d.then(function(e){if(e!=null){var t=c?o("WAHashUtils").stringToPlaintextHash(l):o("MAWDbMedia").convertNumberToMediaId(parseInt(l,10));o("MAWMediaSetMediaValidatedResult").call(a,t.toString(),e)}}),f)}}},l=[e,a,t],n[0]=e,n[1]=a,n[2]=t,n[3]=i,n[4]=l):(i=n[3],l=n[4]),d(i,l)}function f(){}function g(e,t,n){var a=o("react-compiler-runtime").c(5);_(e);var i,l;a[0]!==e||a[1]!==n||a[2]!==t?(i=function(){if(e!=null){var a=(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO));if(a){var i=n!=null;if(i){var l=n==null?void 0:n.validationResult;l!=null&&(t==null||t.addAnnotations({int:{audio_avg_bits_per_second:l.audioAvgBitsPerSecond,audio_number_of_channels:l.audioNumberOfChannels,audio_sampling_rate:l.audioSamplingRate,video_avg_bits_per_second:l.videoAvgBitsPerSecond,video_calculated_fps:l.videoCalculatedFps,video_duration:l.videoDuration,video_height:l.videoHeight,video_nominal_fps:l.videoNominalFps,video_width:l.videoWidth},string:{audio_stream_type:l.audioStreamType,validated_mime_type:l.validatedMimeType,video_stream_type:l.videoStreamType}}))}}}},l=[e,n,t],a[0]=e,a[1]=n,a[2]=t,a[3]=i,a[4]=l):(i=a[3],l=a[4]),d(i,l);var c;e:{if(e==null){c=null;break e}var m=(s||(s=o("I64"))).equal(e.attachmentType,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO));if(!m){c=null;break e}var p=n!=null;if(!p){c=void 0;break e}var f=n==null?void 0:n.validationResult;if(f==null){c=void 0;break e}c=f}return c}l.default=g}),98);
__d("useMAWMediaDownloadStatus",["MAWMediaDownloadStatusUIState","ReQL","ReQLSuspense","cr:17206","emptyHook","gkx","react","useMAWMediaDownloadUIStateDebounced","useMAWMediaValidationResult","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useMemo,c=n("cr:17206")||{useFetchInitialDownloadStatus:r("emptyHook").thatReturnsNull};function d(t,n,a){var l=(e||(e=r("useReStore")))(),s=a!=null?a:t==null?void 0:t.attachmentFbid,d=o("ReQLSuspense").useFirst(function(){return s!=null?o("ReQL").fromTableAscending(l.tables.client_media_status).getKeyRange(s):o("ReQL").empty()},[l,s],i.id+":48"),m=r("gkx")("18676")?u(function(){return o("MAWMediaDownloadStatusUIState").getNonDebouncedUIStateAndStatus(d,s,t)},[d,s,t]):o("MAWMediaDownloadStatusUIState").getNonDebouncedUIStateAndStatus(d,s,t),p=m.mawMediaStatus,_=m.nonDebouncedUIState,f=m.status,g=r("useMAWMediaDownloadUIStateDebounced")(_),h=r("useMAWMediaValidationResult")(t,n,p);return c.useFetchInitialDownloadStatus({attachment:t,mediaRenderQpl:n,mediaStatus:f,statusKey:s}),{status:f,uiState:g,validationResult:h}}l.default=d}),98);
__d("useShouldShowPlaybackErrorFallback",["MAWVideoAudioPlaybackErrorHandlerUtils","react-compiler-runtime","useMAWMediaDownloadStatus"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("react-compiler-runtime").c(3),a=r("useMAWMediaDownloadStatus")(e,t),i=a.validationResult;if(e==null)return!1;var l;return n[0]!==e||n[1]!==i?(l=o("MAWVideoAudioPlaybackErrorHandlerUtils").isInvalidVideo(e,i),n[0]=e,n[1]=i,n[2]=l):l=n[2],l}l.default=e}),98);
__d("useShouldShowUnsupportedCodecFallback",["MAWVideoAudioPlaybackErrorHandlerUtils","react-compiler-runtime","useMAWMediaDownloadStatus"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=o("react-compiler-runtime").c(3),a=r("useMAWMediaDownloadStatus")(e,t),i=a.validationResult;if(e==null)return!1;var l;return n[0]!==e||n[1]!==i?(l=o("MAWVideoAudioPlaybackErrorHandlerUtils").isUnsupportedVideo(e,i),n[0]=e,n[1]=i,n[2]=l):l=n[2],l}l.default=e}),98);
__d("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense",["cr:5970","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(){return c}function c(e,t,r){var o;return(o=n("cr:5970")==null?void 0:n("cr:5970").getAttachmentBlob_CausesSuspense(e,t,r))!=null?o:""}l.default=u}),98);
__d("MAWVideoAudioPlaybackErrorHandlerUtils",["fbt","BaseMiddot.react","I64","LSIntEnum","MWXLink.react","MessagingAttachmentType","MessengerWebUXLoggerImpl","ReQL","ReQLSuspense","UserAgent","justknobx","react","react-compiler-runtime","useMAWMediaDownloadStatus","useMWV2MediaViewerSecurePlayableUrl_CausesSuspense","useReStore","useShouldShowPlaybackErrorFallback","useShouldShowUnsupportedCodecFallback"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=r("react"));function p(t,n,a){var i,l,u=o("react-compiler-runtime").c(22),d=(i=r("useShouldShowPlaybackErrorFallback")(t,null))!=null?i:!1,p=(l=r("useShouldShowUnsupportedCodecFallback")(t,null))!=null?l:!1,_=o("MessengerWebUXLoggerImpl").useInteractionLogger(),f=r("useMWV2MediaViewerSecurePlayableUrl_CausesSuspense")();if(d){var g;return u[0]===Symbol.for("react.memo_cache_sentinel")?(g={downloadButton:null,mediaStatusText:s._(/*BTDS*/"_j[\"Invalid file format\",\"f90fb65f92ad8ac33f140b8be3c9eed1\",1]"),retryButton:null},u[0]=g):g=u[0],g}if(p){var h=(e||(e=o("I64"))).equal(t.attachmentType,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)),y=e.equal(t.attachmentType,c.ofNumber(r("MessagingAttachmentType").AUDIO));if(h){var C;u[1]!==t||u[2]!==f?(C=f(t,"MAWVideoAudioPlaybackErrorHandlerUtils"),u[1]=t,u[2]=f,u[3]=C):C=u[3];var b=C;if(!b&&r("justknobx")._("4203")){var v;return u[4]===Symbol.for("react.memo_cache_sentinel")?(v={downloadButton:null,mediaStatusText:s._(/*BTDS*/"Error loading file"),retryButton:null},u[4]=v):v=u[4],v}var S;u[5]===Symbol.for("react.memo_cache_sentinel")?(S=m.jsx(r("BaseMiddot.react"),{}),u[5]=S):S=u[5];var R;u[6]!==_?(R=function(){_==null||_({eventName:"click_unsupported_video_download_from_mustache"})},u[6]=_,u[7]=R):R=u[7];var L;u[8]===Symbol.for("react.memo_cache_sentinel")?(L=s._(/*BTDS*/"Download to play"),u[8]=L):L=u[8];var E;u[9]!==b||u[10]!==R?(E=m.jsxs(m.Fragment,{children:[S,m.jsx(r("MWXLink.react"),{download:!0,href:b,onClick:R,children:L})]}),u[9]=b,u[10]=R,u[11]=E):E=u[11];var k=E,I;u[12]===Symbol.for("react.memo_cache_sentinel")?(I=s._(/*BTDS*/"Browser doesn't support this video"),u[12]=I):I=u[12];var T;return u[13]!==k?(T={downloadButton:k,mediaStatusText:I,retryButton:null},u[13]=k,u[14]=T):T=u[14],T}if(y){var D;return u[15]===Symbol.for("react.memo_cache_sentinel")?(D={downloadButton:null,mediaStatusText:s._(/*BTDS*/"Browser doesn't support this audio"),retryButton:null},u[15]=D):D=u[15],D}}var x;u[16]!==n||u[17]!==a?(x=n?m.jsxs(m.Fragment,{children:[m.jsx(r("BaseMiddot.react"),{}),m.jsx(r("MWXLink.react"),{onClick:a,children:s._(/*BTDS*/"Retry")})]}):null,u[16]=n,u[17]=a,u[18]=x):x=u[18];var $=x,P;u[19]===Symbol.for("react.memo_cache_sentinel")?(P=s._(/*BTDS*/"Couldn't download"),u[19]=P):P=u[19];var N;return u[20]!==$?(N={downloadButton:null,mediaStatusText:P,retryButton:$},u[20]=$,u[21]=N):N=u[21],N}function _(t){var n=o("react-compiler-runtime").c(7),a=(u||(u=r("useReStore")))(),l;n[0]!==a.tables.attachments||n[1]!==t.messageId||n[2]!==t.threadKey?(l=function(){return o("ReQL").fromTableAscending(a.tables.attachments).getKeyRange(t.threadKey,t.messageId)},n[0]=a.tables.attachments,n[1]=t.messageId,n[2]=t.threadKey,n[3]=l):l=n[3];var s;n[4]!==a||n[5]!==t?(s=[a,t],n[4]=a,n[5]=t,n[6]=s):s=n[6];var d=o("ReQLSuspense").useFirst(l,s,i.id+":167"),m=r("useMAWMediaDownloadStatus")(d),p=m.validationResult;if(d==null)return!1;var _=(e||(e=o("I64"))).equal(d.attachmentType,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(d.attachmentType,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO));if(!_)return!1;var f=p!=null?p:{},g=f.validatedMimeType;return g==="invalid-mp4"}var f=Object.freeze({Chrome:["H263","Vvc"],Edge:["H263","Vvc"],Firefox:["H263","Vvc","Hevc"],Safari:["H263","Vvc","Av1"]});function g(e){return e==null?!0:r("UserAgent").isBrowser("Chrome")?f.Chrome.includes(e)===!1:r("UserAgent").isBrowser("Firefox")?f.Firefox.includes(e)===!1:r("UserAgent").isBrowser("Edge")?f.Edge.includes(e)===!1:r("UserAgent").isBrowser("Safari")?f.Safari.includes(e)===!1:!0}function h(t,n){var a=t.attachmentType,i=(e||(e=o("I64"))).equal(a,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(a,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO));if(!i)return!1;var l=n!=null?n:{},s=l.validatedMimeType,u=l.videoStreamType;return g(u)===!1||s==="unsupported-video"}function y(t,n){var a=t.attachmentType,i=(e||(e=o("I64"))).equal(a,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO))||(e||(e=o("I64"))).equal(a,(c||(c=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO));if(!i)return!1;var l=n!=null?n:{},s=l.validatedMimeType;return s==="invalid-mp4"}l.useGetMetadataForMediaNotRendered=p,l.useIsInvalidVideoMessage=_,l.isUnsupportedVideo=h,l.isInvalidVideo=y}),226);
__d("MWCMIsSubthreadContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=u.useMemo,p=c({isSubthread:!1});function _(){return d(p)}function f(e){var t=o("react-compiler-runtime").c(5),n=e.children,r=e.isSubthread,a;t[0]!==r?(a={isSubthread:r},t[0]=r,t[1]=a):a=t[1];var i=a,l;return t[2]!==n||t[3]!==i?(l=s.jsx(p.Provider,{value:i,children:n}),t[2]=n,t[3]=i,t[4]=l):l=t[4],l}l.useIsSubthreadContext=_,l.MWCMIsSubthreadContextProvider=f}),98);
__d("MWV2OneToOneThreadBlockedContext.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.createContext,d=u.useContext,m=c(!1);function p(){return d(m)}function _(e){var t=o("react-compiler-runtime").c(3),n=e.blocked,r=e.children,a=m.Provider,i;return t[0]!==n||t[1]!==r?(i=s.jsx(a,{value:n,children:r}),t[0]=n,t[1]=r,t[2]=i):i=t[2],i}l.useIsBlocked=p,l.MWV2OneToOneThreadBlockedContext=_}),98);
__d("MWXIconDownload",["MWXSvgIcon","SVGIcon","cr:22301","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22301")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconShare",["MWXSvgIcon","SVGIcon","cr:22483","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22483")),r("gkx")("23219"));l.default=e}),98);
__d("MWXMAUtils",["I64","LSXmaContentType"],(function(t,n,r,o,a,i,l){"use strict";var e,s=new Set(["xma_rtc_video","xma_rtc_missed_video","xma_rtc_missed_group_video","xma_rtc_ended_video","xma_rtc_new_video_default","xma_rtc_new_video_from_fb_share","xma_rtc_new_video_from_fb_video_share","xma_rtc_new_video_from_cowatch_share","xma_rtc_cowatch_start_video","xma_rtc_audio","xma_rtc_missed_audio","xma_rtc_missed_group_audio","xma_rtc_ended_audio","xma_rtc_new_audio_default","xma_rtc_new_audio_from_fb_share","xma_rtc_new_audio_from_fb_video_share","xma_rtc_new_audio_from_cowatch_share"]);function u(e){return s.has(e)}function c(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_LOCATION_SHARING||(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_LOCATION_SHARING_V2}function d(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_CONTACT||(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_AI_CONTACT}function m(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").FB_POST_MENTION}function p(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").MSG_MEMORIES_SHARE}function _(t){var n=(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero);return n===r("LSXmaContentType").RTC_AUDIO_CALL||n===r("LSXmaContentType").RTC_VIDEO_CALL||n===r("LSXmaContentType").RTC_MISSED_AUDIO_CALL||n===r("LSXmaContentType").RTC_MISSED_VIDEO_CALL||n===r("LSXmaContentType").RTC_GROUP_AUDIO_CALL||n===r("LSXmaContentType").RTC_GROUP_VIDEO_CALL||n===r("LSXmaContentType").RTC_MISSED_GROUP_AUDIO_CALL||n===r("LSXmaContentType").RTC_MISSED_GROUP_VIDEO_CALL||n===r("LSXmaContentType").RTC_ONGOING_AUDIO_CALL||n===r("LSXmaContentType").RTC_ONGOING_VIDEO_CALL}function f(t){return(e||(e=o("I64"))).to_int32(t!=null?t:(e||(e=o("I64"))).zero)===r("LSXmaContentType").FB_STORY_MENTION}function g(e,t){if(e==null)return!1;try{var n,r=JSON.parse(e),o=(n=r.content)==null||(n=n.custom_template_data)==null?void 0:n.__typename;return o!=null&&t.includes(o)}catch(e){return!1}}l.isRTCXMA=u,l.isLocationShareXMA=c,l.isContactShareXMA=d,l.isXMAContentTypeFbPostMention=m,l.isXMAContentTypeMemoriesShare=p,l.isXMAContentTypeRTC=_,l.isStoryMentionXMA=f,l.containsAnyOfXmaTemplateTypes=g}),98);
__d("MessengerDownloadFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M17.75 6.5a1 1 0 0 0-1 1v9.25a.25.25 0 0 1-.25.25h-1.998a1 1 0 0 0-.844 1.537l3.498 5.497a1 1 0 0 0 1.688 0l3.498-5.497A1 1 0 0 0 21.498 17H19.5a.25.25 0 0 1-.25-.25V7.5a1 1 0 0 0-1-1h-.5zM7 28a1 1 0 0 1 1-1h20a1 1 0 0 1 1 1v.5a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1V28z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerShareFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M18.766 4.857a1 1 0 0 0-1.532 0L13.878 8.86a1 1 0 0 0 .766 1.643H16.5a.25.25 0 0 1 .25.25v10.75a1 1 0 0 0 1 1h.5a1 1 0 0 0 1-1v-10.75a.25.25 0 0 1 .25-.25h1.856a1 1 0 0 0 .766-1.643l-3.356-4.002z"}),s.jsx(o("XPlatReactSVG").Path,{d:"M14.75 13.502a1 1 0 0 0-1-1H12.5a4 4 0 0 0-4 4v8.5a4 4 0 0 0 4 4h11a4 4 0 0 0 4-4v-8.5a4 4 0 0 0-4-4h-1.25a1 1 0 0 0-1 1v.5a1 1 0 0 0 1 1h1.25a1.5 1.5 0 0 1 1.5 1.5v8.5a1.5 1.5 0 0 1-1.5 1.5h-11a1.5 1.5 0 0 1-1.5-1.5v-8.5a1.5 1.5 0 0 1 1.5-1.5h1.25a1 1 0 0 0 1-1v-.5z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("acceptMAWMessageRequest",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSOptimisticAcceptMessageRequestStoredProcedure","MAWUpdateLSThreadCapabilities","Promise","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,a,l,u){if(!(!u||l==null)){var c=l[1],d=babelHelpers.extends({},c,{contactViewerRelationship:(s||(s=o("I64"))).of_string("2")});r("promiseDone")(t.runInTransaction(function(t){return(e||(e=n("Promise"))).all([t.contacts.upsert([c.id],d),r("LSAddMessengerContactStoredProcedure")(r("LSFactory")(t),{contactId:c.id}),o("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(t,a.threadKey),r("LSOptimisticAcceptMessageRequestStoredProcedure")(r("LSFactory")(t),{threadKey:a.threadKey})])},"readwrite",void 0,void 0,i.id+":37"))}}l.default=u}),98);
__d("shouldHideMessagingActions",["I64","LSIntEnum","isDeliveryStatusErrorState"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(256))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(65536))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(131072))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(262144))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(524288))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4294967296))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1048576))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(2097152))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(4194304))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(8388608))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(16777216))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(67108864))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(1073741824))}function c(e,t){return!!(r("isDeliveryStatusErrorState")(t)||u(e))}l.default=c}),98);
__d("useClientMediaStatus",["ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(6),a=(e||(e=r("useReStore")))(),l;n[0]!==t?(l=t.filter(c).map(u).join(","),n[0]=t,n[1]=l):l=n[1];var s=l,d,m;n[2]!==a.tables.client_media_status||n[3]!==s?(d=function(){if(s==="")return o("ReQL").empty();var e=s.split(",").map(function(e){return o("ReQL").fromTableAscending(a.tables.client_media_status).getKeyRange(e)});return e.length===0?o("ReQL").empty():e.length===1?e[0]:o("ReQL").union.apply(void 0,e)},m=[s,a.tables.client_media_status],n[2]=a.tables.client_media_status,n[3]=s,n[4]=d,n[5]=m):(d=n[4],m=n[5]);var p=o("ReQLSuspense").useArray(d,m,i.id+":29");return p}function u(e){var t=e.statusKey;return t}function c(e){var t=e.mediaStatus;return t==null}l.default=s}),98);
__d("useMWHasForwardAction",["I64","LSAuthorityLevel","LSBitFlag","LSContactBitOffset","LSIntEnum","LSMessagingThreadTypeUtil","MAWMsg","MWCMIsSubthreadContext.react","MWGenAIUtils","MWMessageDeliveryStatus","MWPThreadCapabilitiesContext","MWV2OneToOneThreadBlockedContext.react","MWXMAUtils","MessagingAttachmentType","gkx","isFeatureLimitEnabled","isMWBumpMessage","mwCMIsAnyCMThread","react-compiler-runtime","shouldHideMessagingActions","useIsReadOnlyFeatureLimitedWithThreadType","useMAWMediaDownloadStatus","useMWFamilyCenterContext","useMWGetOtherUserContact","useMWIsContactRestricted"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a,i,l,u){var c=o("react-compiler-runtime").c(76),d=i===void 0?!1:i,m=u===void 0?!1:u,p=o("MWCMIsSubthreadContext.react").useIsSubthreadContext(),_=p.isSubthread,f;c[0]!==_||c[1]!==t?(f=_&&!o("LSMessagingThreadTypeUtil").isCMSubthread(t),c[0]=_,c[1]=t,c[2]=f):f=c[2];var g=f,h;c[3]!==t?(h=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(t),c[3]=t,c[4]=h):h=c[4];var y=h,C;c[5]!==n.threadKey?(C=o("MWGenAIUtils").isMetaAIThread(n.threadKey),c[5]=n.threadKey,c[6]=C):C=c[6];var b=C,v;c[7]!==t?(v=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t),c[7]=t,c[8]=v):v=c[8];var S=v,R=n.ephemeralDurationInSec,L;c[9]!==R?(L=R!=null?(e||(e=o("I64"))).gt(R,(e||(e=o("I64"))).zero):!1,c[9]=R,c[10]=L):L=c[10];var E=L,k=r("useIsReadOnlyFeatureLimitedWithThreadType")(t)&&(!S||r("isFeatureLimitEnabled")()),I;c[11]!==n.displayedContentTypes?(I=(e||(e=o("I64"))).equal(n.displayedContentTypes,(s||(s=o("LSIntEnum"))).ofNumber(4096)),c[11]=n.displayedContentTypes,c[12]=I):I=c[12];var T=I,D;c[13]!==n.displayedContentTypes?(D=(e||(e=o("I64"))).equal(n.displayedContentTypes,(s||(s=o("LSIntEnum"))).ofNumber(134217728)),c[13]=n.displayedContentTypes,c[14]=D):D=c[14];var x=D,$=o("MWV2OneToOneThreadBlockedContext.react").useIsBlocked(),P;c[15]!==n.displayedContentTypes||c[16]!==n.sendStatusV2?(P=r("shouldHideMessagingActions")(n.displayedContentTypes,o("MWMessageDeliveryStatus").getFromSendStatus(n.sendStatusV2)),c[15]=n.displayedContentTypes,c[16]=n.sendStatusV2,c[17]=P):P=c[17];var N=P,M=r("useMWGetOtherUserContact")(n.threadKey,t,o("LSContactBitOffset").contactCapabilityFields),w=r("useMWIsContactRestricted")(M),A;c[18]!==n.sendStatusV2||c[19]!==t?(A=r("mwCMIsAnyCMThread")(t)&&(e||(e=o("I64"))).equal(n.sendStatusV2,(s||(s=o("LSIntEnum"))).ofNumber(4)),c[18]=n.sendStatusV2,c[19]=t,c[20]=A):A=c[20];var F=A,O;c[21]!==y||c[22]!==n.displayedContentTypes?(O=o("LSBitFlag").has((s||(s=o("LSIntEnum"))).ofNumber(2),n.displayedContentTypes)||y&&o("LSBitFlag").has((s||(s=o("LSIntEnum"))).ofNumber(1024),n.displayedContentTypes)&&r("gkx")("15802"),c[21]=y,c[22]=n.displayedContentTypes,c[23]=O):O=c[23];var B=O,W;c[24]!==n.replyType?(W=r("isMWBumpMessage")(n.replyType),c[24]=n.replyType,c[25]=W):W=c[25];var q=W,U=o("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext(),V=U.messageForwardEnabled,H=o("useMWFamilyCenterContext").useMWFamilyCenterEnforcementsContext(),G=H.familyCenterData,z;c[26]!==a?(z=(a==null?void 0:a.attachmentType)!=null&&((e||(e=o("I64"))).equal(a.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_IMAGE))||(e||(e=o("I64"))).equal(a.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").EPHEMERAL_VIDEO))),c[26]=a,c[27]=z):z=c[27];var j=z,K;c[28]!==a||c[29]!==S?(K=S&&(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isLocationShareXMA(a.xmaContentType),c[28]=a,c[29]=S,c[30]=K):K=c[30];var Q=K,X;c[31]!==a||c[32]!==S?(X=S&&(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isContactShareXMA(a.xmaContentType),c[31]=a,c[32]=S,c[33]=X):X=c[33];var Y=X,J;c[34]!==a||c[35]!==S?(J=S&&(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isXMAContentTypeFbPostMention(a.xmaContentType),c[34]=a,c[35]=S,c[36]=J):J=c[36];var Z=J,ee;c[37]!==a||c[38]!==S?(ee=S&&(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isXMAContentTypeMemoriesShare(a.xmaContentType),c[37]=a,c[38]=S,c[39]=ee):ee=c[39];var te=ee,ne;c[40]!==a?(ne=(a==null?void 0:a.xmaContentType)!=null&&o("MWXMAUtils").isStoryMentionXMA(a.xmaContentType),c[40]=a,c[41]=ne):ne=c[41];var re=ne,oe=r("useMAWMediaDownloadStatus")(a),ae=oe.uiState,ie;c[42]!==a||c[43]!==S||c[44]!==ae?(ie=a!=null&&S&&!(e||(e=o("I64"))).equal(a.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))&&ae!=="downloaded",c[42]=a,c[43]=S,c[44]=ae,c[45]=ie):ie=c[45];var le=ie,se;c[46]!==a||c[47]!==G||c[48]!==F||c[49]!==$||c[50]!==y||c[51]!==q||c[52]!==E||c[53]!==b||c[54]!==le||c[55]!==k||c[56]!==x||c[57]!==w||c[58]!==Y||c[59]!==Z||c[60]!==Q||c[61]!==te||c[62]!==S||c[63]!==T||c[64]!==g||c[65]!==j||c[66]!==re||c[67]!==l||c[68]!==n||c[69]!==V||c[70]!==N||c[71]!==d?(se=(S?!E&&(r("gkx")("18825")||!T&&!x):!0)&&!g&&!$&&!w&&!k&&!n.isUnsent&&!F&&!o("MAWMsg").isPlaceholder(n)&&!q&&V&&(!y||y&&r("gkx")("15802"))&&!d&&(e||(e=o("I64"))).gt(n.authorityLevel,(s||(s=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))&&(a!=null&&(e||(e=o("I64"))).equal(a.attachmentType,(s||(s=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA))&&(a.attachmentCta1Id!=null||a.attachmentCta2Id!=null||a.attachmentCta3Id!=null||a.defaultCtaId!=null)?a.isSharable:!0)&&(l==null||!l.hasMissingMessages&&!l.hasMissingMedia)&&!G.hasActiveMsgrFamilyCenterEnforcement&&!j&&!N&&!le&&!Q&&!Y&&!Z&&!te&&!re&&!o("MWXMAUtils").containsAnyOfXmaTemplateTypes(a==null?void 0:a.xmaDataclass,["XMSGXmaSparkIcebreakerTemplateData","XMSGXmaAiSparkTemplateData"])&&!b,c[46]=a,c[47]=G,c[48]=F,c[49]=$,c[50]=y,c[51]=q,c[52]=E,c[53]=b,c[54]=le,c[55]=k,c[56]=x,c[57]=w,c[58]=Y,c[59]=Z,c[60]=Q,c[61]=te,c[62]=S,c[63]=T,c[64]=g,c[65]=j,c[66]=re,c[67]=l,c[68]=n,c[69]=V,c[70]=N,c[71]=d,c[72]=se):se=c[72];var ue=se,ce=B&&ue&&!m,de;return c[73]!==ue||c[74]!==ce?(de={hasForwardAction:ue,shouldShowForwardAction:ce},c[73]=ue,c[74]=ce,c[75]=de):de=c[75],de}l.default=u}),98);/*FB_PKG_DELIM*/
__d("ChannelShareDialogLoggingContext",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["BROADCAST_CHANNEL_CREATION","THREAD_DETAILS_SHARE_ITEM","THREAD_DETAILS_QUICK_ACTION","CONTEXT_BANNER_QUICK_ACTION"]),l=e;i.default=l}),66);
__d("CometStickerPickerFlyoutTagSelectorRootQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9341116515996575"}),null);
__d("CometStickerPickerGeneratedStickersFlyoutTagSelectorRootQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="30784663477785581"}),null);
__d("CometStickerPickerStickerGeneratedCardQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="23948132428170987"}),null);
__d("FDSContextualMessage.react",["fbt","ix","CometRow.react","CometRowItem.react","FDSIcon.react","FDSTextPairing.react","FbtResultBase","fbicon","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e=["ref","xstyle"],c,d=c||(c=o("react")),m={closeButton:{marginInlineEnd:"x1lxpwgx",marginTop:"x9otpla",$$css:!0},icon:{marginTop:"x1rdy4ex",$$css:!0},root:{borderStartStartRadius:"xw5cjc7",borderStartEndRadius:"x1dmpuos",borderEndEndRadius:"x1vsv7so",borderEndStartRadius:"xau1kf4",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"x1iorvi4",paddingInlineEnd:"x11lfxj5",paddingInlineStart:"x135b78x",paddingBottom:"x1l90r2v",$$css:!0}},p={highlight:{backgroundColor:"xwnonoy",$$css:!0},"highlight-bg":{backgroundColor:"xfmpgtx",$$css:!0},primary:{backgroundColor:"x1jx94hy",$$css:!0},secondary:{backgroundColor:"xlhe6ec",$$css:!0}};function _(t){var n=o("react-compiler-runtime").c(36),a,i,l;n[0]!==t?(i=t.ref,l=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var c=a,_=c.addOnPrimary,f=c.addOnSecondary,g=c.body,h=c.headline,y=c.headlineLineLimit,C=c.icon,b=c.level,v=c.meta,S=c.paddingTop,R=c.testid,L=c.type,E=b===void 0?3:b,k=L===void 0?"primary":L,I=a.onClose!=null?a.onClose:null,T=a.headlineAriaLabel!=null?a.headlineAriaLabel:typeof h=="string"||h instanceof r("FbtResultBase")?h:null,D=p[k],x;n[4]!==D||n[5]!==l?(x=[m.root,D,l],n[4]=D,n[5]=l,n[6]=x):x=n[6];var $;n[7]!==C?($=C!=null?d.jsx(r("CometRowItem.react"),{verticalAlign:"top",children:d.jsx(o("react-strict-dom").html.div,{style:[m.icon],children:C})}):null,n[7]=C,n[8]=$):$=n[8];var P=k==="highlight"?"white":"secondary",N=k==="highlight"?"white":"primary",M=y!=null?y:2,w;n[9]!==g||n[10]!==h||n[11]!==E||n[12]!==P||n[13]!==N||n[14]!==M?(w=d.jsx(r("CometRowItem.react"),{expanding:!0,children:d.jsx(r("FDSTextPairing.react"),{body:g,bodyColor:P,headline:h,headlineColor:N,headlineLineLimit:M,isSemanticHeading:!0,level:E})}),n[9]=g,n[10]=h,n[11]=E,n[12]=P,n[13]=N,n[14]=M,n[15]=w):w=n[15];var A;n[16]!==T||n[17]!==I||n[18]!==k?(A=I!=null?d.jsx(r("CometRowItem.react"),{verticalAlign:"top",children:d.jsx(o("react-strict-dom").html.div,{style:[m.closeButton],children:d.jsx(r("FDSIcon.react"),{"aria-label":T!=null?s._(/*BTDS*/"Dismiss {card name} card",[s._param("card name",T)]):s._(/*BTDS*/"Dismiss card"),color:k==="highlight"?"white":"secondary",icon:o("fbicon")._(u("478232"),16),onPress:I,size:16,testid:void 0})})}):null,n[16]=T,n[17]=I,n[18]=k,n[19]=A):A=n[19];var F;n[20]!==S||n[21]!==A||n[22]!==$||n[23]!==w?(F=d.jsxs(r("CometRow.react"),{paddingTop:S,verticalAlign:"center",children:[$,w,A]}),n[20]=S,n[21]=A,n[22]=$,n[23]=w,n[24]=F):F=n[24];var O;n[25]!==E||n[26]!==v?(O=v!=null&&d.jsx(r("CometRow.react"),{paddingTop:12,children:d.jsx(r("CometRowItem.react"),{children:d.jsx(r("FDSTextPairing.react"),{level:E,meta:v})})}),n[25]=E,n[26]=v,n[27]=O):O=n[27];var B;return n[28]!==_||n[29]!==f||n[30]!==i||n[31]!==F||n[32]!==O||n[33]!==x||n[34]!==R?(B=d.jsxs(o("react-strict-dom").html.div,{"data-testid":void 0,ref:i,style:x,children:[F,_,f,O]}),n[28]=_,n[29]=f,n[30]=i,n[31]=F,n[32]=O,n[33]=x,n[34]=R,n[35]=B):B=n[35],B}l.default=_}),226);
__d("FDSCrossFilled12Icon",["cr:13992"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:13992")}),98);
__d("FDSCrossFilled12PNGIcon.react",["ix","fbicon"],(function(t,n,r,o,a,i,l,s){"use strict";var e=o("fbicon")._(s("478231"),12),u=e;l.default=u}),98);
__d("LSFriendshipStatus",[],(function(t,n,r,o,a,i){var e=Object.freeze({CANNOT_REQUEST:0,ARE_FRIENDS:1,INCOMING_REQUEST:2,OUTGOING_REQUEST:3,CAN_REQUEST:4,UNKNOWN:5});i.default=e}),66);
__d("LSMoveThreadToInboxAndUpdateParent",[],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],n=[],r=[];return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({folderName:"inbox",parentThreadKey:e[1]})})},function(e){return t.resolve(r)}])}e.__sproc_name__="LSMailboxMoveThreadToInboxAndUpdateParentStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSMuteCallsFromThread",["LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[6]=n.syncGroup,t.i64.neq(r[6],void 0)?r[5]=r[6]:r[5]=t.i64.cast([0,1]),r[0]=r[5])})},function(o){return r[2]=new t.Map,r[2].set("thread_key",e[0]),r[2].set("mailbox_type",e[1]),r[2].set("mute_calls_expire_time_ms",e[2]),r[2].set("request_id",e[3]),r[2].set("sync_group",r[0]),r[3]=r[2].get("thread_key"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[3]),t.i64.cast([0,229]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxMuteCallsFromThreadStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSMuteCallsFromThreadStoredProcedure",["LSMuteCallsFromThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSMuteCallsFromThread"),a.threadKey,a.mailboxType,a.muteCallsExpireTimeMs,a.requestId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticMuteThread",["LSIssueNewTaskWithExtraOperationsAndGetTaskID"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.forEach(t.db.table(9).fetch([[[e[0]]]]),function(t){var n=t.update,r=t.item;return n({muteExpireTimeMs:e[2]})})},function(o){return t.storedProcedure(n("LSIssueNewTaskWithExtraOperationsAndGetTaskID"),t.i64.to_string(e[0]),t.i64.cast([0,144]),"",void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),t.i64.cast([0,1]),void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0])).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(32).add({taskId:r[0],threadKey:e[0]})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticMuteThreadStoredProcedure",e.__tables__=["threads","threads_optimistic_context"],a.exports=e}),null);
__d("LSOptimisticMuteThreadStoredProcedure",["LSOptimisticMuteThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticMuteThread"),a.threadKey,a.mailboxType,a.muteExpireTimeMs);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSOptimisticUnarchiveThread",["LSIssueNewError","LSIssueNewTask","LSLocalize","LSMoveThreadToInboxAndUpdateParent"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(o,a){var i=o.done,l=o.value;return i?0:(a=l.item,t.sequence([function(r){return t.storedProcedure(n("LSMoveThreadToInboxAndUpdateParent"),e[0],t.i64.cast([0,0]))},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[7]=n.syncGroup,t.i64.neq(r[7],void 0)?r[6]=r[7]:r[6]=t.i64.cast([0,1]),r[0]=r[6])})},function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[2]=!1:(t=o.item,r[2]=t.errorShouldBeShown)})},function(e){return r[2]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[6]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[7]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[6],r[7],void 0,void 0)}]):t.resolve()},function(o){return r[4]=new t.Map,r[4].set("thread_id",e[0]),r[4].set("sync_group",r[0]),r[5]=t.toJSON(r[4]),t.storedProcedure(n("LSIssueNewTask"),"unarchive_thread",t.i64.cast([0,242]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}]))})},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxOptimisticUnarchiveThreadStoredProcedure",e.__tables__=["threads","user_visible_network_connectivity_error"],a.exports=e}),null);
__d("LSOptimisticUnarchiveThreadStoredProcedure",["LSOptimisticUnarchiveThread","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSOptimisticUnarchiveThread"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSSubmitGenAIBotFeedback",["LSIssueNewTaskWithExtraOperations"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(o){return r[0]=new t.Map,r[0].set("bot_feedback_kind",e[0]),r[0].set("bot_response_id",e[2]),r[0].set("feedback_kind_type",e[0]),r[0].set("bot_id",e[3]),r[0].set("message_id",e[4]),r[1]=t.toJSON(r[0]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),"submit_gen_ai_bot_feedback",t.i64.cast([0,756]),r[1],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))},function(n){return t.db.table(315).fetch([[[e[2]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[2]=t.i64.cast([0,0]):(n=a.item,r[2]=n.feedbackSubmissionStatus)})},function(n){return t.i64.eq(r[2],t.i64.cast([0,0]))?t.db.table(315).add({botResponseId:e[2],feedbackSubmissionStatus:t.i64.cast([0,1]),feedbackKindType:e[0]}):t.forEach(t.db.table(315).fetch([[[e[2]]]]),function(n){var r=n.update,o=n.item;return r({feedbackSubmissionStatus:t.i64.cast([0,1]),feedbackKindType:e[0]})})}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxSubmitGenAIBotFeedbackStoredProcedure",e.__tables__=["ai_bot_feedback_submission_status"],a.exports=e}),null);
__d("LSSubmitGenAIBotFeedbackStoredProcedure",["LSSubmitGenAIBotFeedback","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSSubmitGenAIBotFeedback"),a.botFeedbackKind,a.feedbackKindType,a.botResponseId,a.botId,a.messageId);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWChatLiveLocationDialogQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9800226046700666"}),null);
__d("useSecureThreadJid",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReady","Promise","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useRef;function m(t,a){var l,c=o("react-compiler-runtime").c(13),m=(s||(s=r("useReStore")))(),p=d(),_=(l=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(m.tables.threads,["threadType"]).getKeyRange(t)},[m,t],i.id+":36"))==null?void 0:l.threadType,f;c[0]!==_?(f=_!=null?o("LSMessagingThreadTypeUtil").isArmadilloSecure(_):!1,c[0]=_,c[1]=f):f=c[1];var g=f,h;c[2]!==m.tables||c[3]!==a||c[4]!==g||c[5]!==t?(h=function(){t==null||(u||(u=o("I64"))).equal(t,(u||(u=o("I64"))).zero||!g)||r("promiseDone")(o("MAWMiActOnActThreadReady").onActThreadReady(m.tables,t,"useSecureThreadJid: "+a,function(t,r){return p.current=r,(e||(e=n("Promise"))).resolve()}))},c[2]=m.tables,c[3]=a,c[4]=g,c[5]=t,c[6]=h):h=c[6];var y;c[7]!==m||c[8]!==a||c[9]!==g||c[10]!==t?(y=[m,t,g,a],c[7]=m,c[8]=a,c[9]=g,c[10]=t,c[11]=y):y=c[11],o("Int64Hooks").useEffectInt64(h,y);var C;return c[12]===Symbol.for("react.memo_cache_sentinel")?(C=function(){return p.current},c[12]=C):C=c[12],C}l.default=m}),98);
__d("MAWEphemeralAdminMsgCta.react",["JSResourceForInteraction","MWXLink.react","QPLUserFlow","qpl","react","react-compiler-runtime","useMWXLazyDialog","useSecureThreadJid"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("JSResourceForInteraction")("MAWEphemeralSettingsDialog.react").__setRef("MAWEphemeralAdminMsgCta.react");function c(e){var t=o("react-compiler-runtime").c(9),n=e.threadKey,a=e.title,i=r("useSecureThreadJid")(n,"MAWEphemeralAdminMsgCta"),l;t[0]!==i||t[1]!==n?(l={getThreadJid:i,threadKey:n},t[0]=i,t[1]=n,t[2]=l):l=t[2];var c=l,d=r("useMWXLazyDialog")(u),m=d[0],p;t[3]!==c||t[4]!==m?(p=function(){r("QPLUserFlow").start(r("qpl")._(1056845690,"2034"),{annotations:{string:{action_type:"change_ephemeral_message_duration"}}}),m(c)},t[3]=c,t[4]=m,t[5]=p):p=t[5];var _=p,f;return t[6]!==_||t[7]!==a?(f=s.jsx(r("MWXLink.react"),{onClick:_,children:a}),t[6]=_,t[7]=a,t[8]=f):f=t[8],f}l.default=c}),98);
__d("MAWOfflineQueueState-resolver",["MAWOfflineQueueState"],(function(t,n,r,o,a,i,l){"use strict";function e(){return{read:function(){return o("MAWOfflineQueueState").offlineQueueState.getSnapshot()},subscribe:function(t){return o("MAWOfflineQueueState").offlineQueueState.subscribe(t)}}}l.offlineQueueStats=e}),98);
__d("MAWOptimisticCreateOrDeleteReactionLSDB",["I64","LSAuthorityLevel","MAWTimeUtils","QPLUserFlow","ReQL","WATimeUtils","err","getErrorSafe","qpl","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useCallback;function c(){return u(function(e,t,n,a,l,u){return l.runInTransaction(async function(i){try{var l=await i.reactions.get(e,t,u);return await i.reactions.upsert([e,t,u],{actorId:u,authorityLevel:(s||(s=o("I64"))).of_int32(r("LSAuthorityLevel").OPTIMISTIC),messageId:t,reaction:n!=null?n:"",threadKey:e,timestampMs:o("MAWTimeUtils").toTimestamp(o("WATimeUtils").unixTime()),transportKey:"WhatsApp"}),l}catch(e){var c=r("getErrorSafe")(e);throw r("QPLUserFlow").addPoint(r("qpl")._(1056843664,"1465"),"fail_create_optimistic_reaction",{instanceKey:a}),r("err")("Failed to send or unsend optimistic reaction: "+c.message+" ")}finally{r("QPLUserFlow").addPoint(r("qpl")._(1056843664,"1465"),"create_optimistic_reaction_end",{instanceKey:a})}},"readwrite",void 0,void 0,i.id+":52")},[])}function d(e,t,n,a,l){return e.runInTransaction(function(i){return l.then(function(l){if(l!=null)return i.reactions.upsert([l.threadKey,l.messageId,l.actorId],babelHelpers.extends({},l));var u=o("ReQL").firstAsync(o("ReQL").fromTableAscending(e.tables.reactions).getKeyRange(t,n,a).filter(function(e){return(s||(s=o("I64"))).equal(e.authorityLevel,s.of_int32(r("LSAuthorityLevel").OPTIMISTIC))}));return u.then(function(e){if(e!=null)return i.reactions.delete(e.threadKey,e.messageId,e.actorId)})})},"readwrite",void 0,void 0,i.id+":105")}l.useOptimisticReactionLSDB=c,l.markOptimisticReactionAsFailedLSDB=d}),98);
__d("MAWSendOrRemoveReaction.react",["FBLogger","Int64Hooks","MAWBridgeSendAndReceive","MAWDbMsg","MAWGetProtocolMsgIdByMsgIdInUI","MAWLoggerUtils","MAWMessageSendReporter","MAWMiActOnActThreadReady","MAWOptimisticCreateOrDeleteReactionLSDB","MWPActor.react","QPLUserFlow","WAResultOrError","err","promiseDone","qpl","react-compiler-runtime","sendToSentQPLLogger","useMWLSDefaultThreadSourceAndResetAttribution","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var a=o("react-compiler-runtime").c(9),i;a[0]===Symbol.for("react.memo_cache_sentinel")?(i=o("MAWLoggerUtils").getInstanceKey(),a[0]=i):i=a[0];var l=i,s=o("MWPActor.react").useActor(),u=(e||(e=r("useReStore")))(),c=o("MAWOptimisticCreateOrDeleteReactionLSDB").useOptimisticReactionLSDB(),d=r("useMWLSDefaultThreadSourceAndResetAttribution")(),m,p;return a[1]!==s||a[2]!==c||a[3]!==u||a[4]!==d||a[5]!==n||a[6]!==t?(m=async function(a,i,m,p){var e=o("MAWDbMsg").toMsgId(a);if(n==null||e==null)return o("WAResultOrError").makeError({isRetriable:!1,type:"msg-id-null"});r("QPLUserFlow").start(r("qpl")._(1056843664,"1465"),{instanceKey:l}),r("QPLUserFlow").addPoint(r("qpl")._(1056843664,"1465"),"create_optimistic_reaction_start",{instanceKey:l});var _=d(t),f=c(t,e,i,l,u,s);r("promiseDone")(f);var g=await o("MAWMiActOnActThreadReady").waitForACTThreadReady(u.tables,t,"MAWSendOrRemoveReaction.react"),h=g.chatJid;return o("MAWGetProtocolMsgIdByMsgIdInUI").getProtocolMsgIdByMsgIdUI(e).then(async function(a){if(a==null)return o("WAResultOrError").makeError({isRetriable:!1,type:"protocol-msg-id-null"});var l=o("MAWBridgeSendAndReceive").sendAndReceive("backend","sendReactionMsg",{args:{groupingKey:"",reaction:i,reactToAuthor:n,reactToProtocolMsgId:a,source:_},chatJid:h,externalId:p,qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:m}).catch(function(n){throw r("promiseDone")(o("MAWOptimisticCreateOrDeleteReactionLSDB").markOptimisticReactionAsFailedLSDB(u,t,e,s,f)),n});return o("MAWMessageSendReporter").MAWMessageSendReporter({chatJid:h,externalId:p},l,{qplEventType:r("qpl")._(25313175,"1551"),qplInstanceKey:m},u)}).then(function(e){return r("QPLUserFlow").endSuccess(r("qpl")._(1056843664,"1465"),{instanceKey:l}),o("sendToSentQPLLogger").markSendToSentSuccess(m),(e==null?void 0:e.success)===!1?o("WAResultOrError").makeError(e.error):(e==null?void 0:e.value)!=null?e:o("WAResultOrError").makeResult({description:"removal pending rollout of MAWMessageSendReporterV2",messageType:"fixMe"})}).catch(function(e){throw r("FBLogger")("messenger_web").catching(e).mustfix("Failed to send or unsend optimistic reaction: %s.",e),r("QPLUserFlow").endFailure(r("qpl")._(1056843664,"1465"),"failure",{instanceKey:l}),o("sendToSentQPLLogger").markSendToSentFail(m,"failed_to_send_remove_reaction",e),r("err")("Failed to send or unsend optimistic reaction: "+e+" ")})},p=[n,l,d,t,c,u,s],a[1]=s,a[2]=c,a[3]=u,a[4]=d,a[5]=n,a[6]=t,a[7]=m,a[8]=p):(m=a[7],p=a[8]),o("Int64Hooks").useCallbackInt64(m,p)}l.useSendOrRemoveReaction=s}),98);
__d("MWCMBulkInviteDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{}},root:r("JSResourceForInteraction")("MWCMBulkInviteDialog.react").__setRef("MWCMBulkInviteDialog.entrypoint")};l.default=e}),98);
__d("XGroupsC4GThreadViewControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/groups/{idorvanity}/chats/{thread_id}/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("MWCMLinkShare.react",["fbt","C4gEngagementFalcoEvent","CommunityMessagingEnableState","I64","LSIntEnum","LSThreadBitOffset","MWCMThreadTypes.react","URI","XGroupsC4GThreadViewControllerRouteBuilder","react","react-compiler-runtime","useCommunityFolder","useCopyText","useMWXPushToast"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=u||(u=o("react")),p=u.useMemo;function _(t){var n=o("react-compiler-runtime").c(9),a=t.children,i=t.folder,l=t.thread,u;n[0]!==i.fbGroupId?(u=(d||(d=o("I64"))).to_string(i.fbGroupId),n[0]=i.fbGroupId,n[1]=u):u=n[1];var c=u,m=(d||(d=o("I64"))).to_string(i.folderId),p;n[2]!==l.threadKey?(p=(d||(d=o("I64"))).to_string(l.threadKey),n[2]=l.threadKey,n[3]=p):p=n[3];var _=p,f=r("useMWXPushToast")(),g;n[4]!==c||n[5]!==_?(g=new(e||(e=r("URI")))(r("XGroupsC4GThreadViewControllerRouteBuilder").buildURL({idorvanity:c,thread_id:_})).setDomain("www.facebook.com").toString(),n[4]=c,n[5]=_,n[6]=g):g=n[6];var h=g,y;n[7]!==h?(y={value:h},n[7]=h,n[8]=y):y=n[8];var C=r("useCopyText")(y),b=C[1],v=C[2],S=function(){v(),r("C4gEngagementFalcoEvent").log(function(){return{action:"tap",community_id:m,event:"thread_user_copy_invite_link",group_id:c,source:"copy_link",surface:"thread_settings",thread_id:_}}),f({body:s._(/*BTDS*/"Link copied")})};return a(b,S)}function f(e){return(d||(d=o("I64"))).equal(e!=null?e:(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").ENABLED),(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED))}function g(e){var t=o("react-compiler-runtime").c(2),n=r("useCommunityFolder")(e),a=o("LSThreadBitOffset").has(108,e),i;e:{if(n!=null&&a){var l;t[0]!==n.enableState?(l=f(n.enableState),t[0]=n.enableState,t[1]=l):l=t[1],i=!l;break e}i=!1}return i}function h(e){var t=o("react-compiler-runtime").c(4),n=e.children,a=e.thread,i=r("useCommunityFolder")(a),l=o("MWCMThreadTypes.react").isBroadcastThread(a.threadType),s=o("LSThreadBitOffset").has(108,a)||l;if(i!=null&&s){var u;return t[0]!==n||t[1]!==i||t[2]!==a?(u=m.jsx(_,{folder:i,thread:a,children:n}),t[0]=n,t[1]=i,t[2]=a,t[3]=u):u=t[3],u}return null}l.useShouldShowInviteLink=g,l.MWCMLinkShare=h}),226);
__d("MWCMShortLinkShare.react",["fbt","C4gEngagementFalcoEvent","I64","MWCMLinkShare.react","MetaConfig","ReQL","ReQLSuspense","react","react-compiler-runtime","useCommunityFolder","useCopyText","useMWXPushToast","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=u||(u=o("react"));function m(e){var t=o("react-compiler-runtime").c(12),n=e.children,a=e.communityId,i=e.groupId,l=e.threadKey,u=e.url,c;t[0]!==u?(c={value:u},t[0]=u,t[1]=c):c=t[1];var d=r("useCopyText")(c),m=d[1],p=d[2],_=r("useMWXPushToast")(),f;t[2]!==a||t[3]!==i||t[4]!==p||t[5]!==_||t[6]!==l?(f=function(){p(),r("C4gEngagementFalcoEvent").log(function(){return{action:"tap",community_id:a,event:"thread_user_copy_invite_link",group_id:i,source:"copy_link",surface:"thread_settings",thread_id:l}}),_({body:s._(/*BTDS*/"Link copied")})},t[2]=a,t[3]=i,t[4]=p,t[5]=_,t[6]=l,t[7]=f):f=t[7];var g=f,h;return t[8]!==n||t[9]!==g||t[10]!==m?(h=n(m,g),t[8]=n,t[9]=g,t[10]=m,t[11]=h):h=t[11],h}function p(e){var t=o("react-compiler-runtime").c(9),n=e.children,r=e.folder,a=r.inviteLink,i;t[0]!==r.fbGroupId?(i=(c||(c=o("I64"))).to_string(r.fbGroupId),t[0]=r.fbGroupId,t[1]=i):i=t[1];var l=i,s;t[2]!==r.folderId?(s=(c||(c=o("I64"))).to_string(r.folderId),t[2]=r.folderId,t[3]=s):s=t[3];var u=s;if(a==null)return null;var p;return t[4]!==n||t[5]!==u||t[6]!==l||t[7]!==a?(p=d.jsx(m,{children:n,communityId:u,groupId:l,url:a}),t[4]=n,t[5]=u,t[6]=l,t[7]=a,t[8]=p):p=t[8],p}function _(e){var t=o("react-compiler-runtime").c(3),n=r("useCommunityFolder")(e.thread),a;return t[0]!==n||t[1]!==e?(a=n?d.jsx(f,babelHelpers.extends({},e,{folder:n})):null,t[0]=n,t[1]=e,t[2]=a):a=t[2],a}function f(t){var n,a=o("react-compiler-runtime").c(13),l=t.folder,s=t.children,u=t.thread,p=(e||(e=r("useReStore")))(),_=(n=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(p.tables.threads,["threadInviteLink","threadInvitesEnabledV2"]).getKeyRange(u.threadKey)},[p,u.threadKey],i.id+":116"))!=null?n:{},f=_.threadInviteLink,g=_.threadInvitesEnabledV2,h;a[0]!==g?(h=g!=null&&(c||(c=o("I64"))).equal(g,(c||(c=o("I64"))).of_int32(1)),a[0]=g,a[1]=h):h=a[1];var y=h,C;a[2]!==l.fbGroupId?(C=(c||(c=o("I64"))).to_string(l.fbGroupId),a[2]=l.fbGroupId,a[3]=C):C=a[3];var b=C,v;a[4]!==l.folderId?(v=(c||(c=o("I64"))).to_string(l.folderId),a[4]=l.folderId,a[5]=v):v=a[5];var S=v,R;return a[6]!==s||a[7]!==S||a[8]!==b||a[9]!==y||a[10]!==u||a[11]!==f?(R=y&&f!=null&&f!==""&&r("MetaConfig")._("63")?d.jsx(m,{children:s,communityId:S,groupId:b,url:f}):d.jsx(o("MWCMLinkShare.react").MWCMLinkShare,{children:s,thread:u}),a[6]=s,a[7]=S,a[8]=b,a[9]=y,a[10]=u,a[11]=f,a[12]=R):R=a[12],R}function g(e){var t=o("react-compiler-runtime").c(7),n=e.children,r=e.folder,a=e.thread;if(a==null&&r!=null){var i;return t[0]!==n||t[1]!==r?(i=d.jsx(p,{children:n,folder:r}),t[0]=n,t[1]=r,t[2]=i):i=t[2],i}if(a!=null){var l;return t[3]!==n||t[4]!==r||t[5]!==a?(l=r!=null?d.jsx(f,{children:n,folder:r,thread:a}):d.jsx(_,{children:n,thread:a}),t[3]=n,t[4]=r,t[5]=a,t[6]=l):l=t[6],l}return null}l.default=g}),226);
__d("MWCallingRestrictionDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{}},root:r("JSResourceForInteraction")("MWCallingRestrictionDialog.react").__setRef("MWCallingRestrictionDialog.entrypoint")};l.default=e}),98);
__d("MWChannelInviteDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(){return{}},root:r("JSResourceForInteraction")("MWChannelInviteDialog.react").__setRef("MWChannelInviteDialog.entrypoint")};l.default=e}),98);
__d("MWChatPollStrings",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";var e={addPollOptionLabel:s._(/*BTDS*/"Add option..."),createPollLabel:s._(/*BTDS*/"Create poll"),pollTitleLabel:s._(/*BTDS*/"Ask a question")},u=e;l.default=u}),226);
__d("MWContactDetails",[],(function(t,n,r,o,a,i){"use strict";function e(e){if(e!=null)return e.name}function l(e){if(e!=null){var t=e.firstName;return t!=null?t:e.name}}function s(e){if(e!=null)return e.secondaryName}i.getName=e,i.getShortName=l,i.getSecondaryName=s}),66);
__d("MWEBMobileOnboardingEligibility",["CometErrorBoundary.react","CometPlaceholder.react","gkx","lazyLoadComponent","react","useWAInfraDeviceList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=e.children,n=e.fallback,o=r("useWAInfraDeviceList")(),a=o.some(d)&&r("gkx")("5255");return a?t:n}function d(e){return e.isCurrentDevice&&e.creationTime!=null&&e.creationTime.getTime()>Date.now()-6048e5}function m(e){var t=r("lazyLoadComponent")(e);return function(e){var n=e.fallback,o=e.props;return s.jsx(r("CometErrorBoundary.react"),{fallback:function(){return n},children:s.jsx(r("CometPlaceholder.react"),{fallback:null,name:i.id,children:s.jsx(c,{fallback:n,children:s.jsx(t,babelHelpers.extends({},o))})})})}}l.requireMobileOnboardingIfEligible=m}),98);
__d("MWEBRestoreGapUI.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBEntrypointsKillswitch.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","promiseDone","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWEBBackupState","useMWEBGetUpsellState","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d=u,m=d.useCallback,p=d.useEffect,_=d.useRef,f=r("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreGapUI.react"),g={banner:{backgroundColor:"xlhe6ec",borderStartStartRadius:"x1obq294",borderStartEndRadius:"x5a5i1n",borderEndEndRadius:"xde0f50",borderEndStartRadius:"x15x8krk",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingInlineStart:"x1mfogq2",paddingInlineEnd:"xsfy40s",paddingLeft:null,paddingRight:null,$$css:!0}};function h(){var t=o("react-compiler-runtime").c(21),n=(e||(e=r("useReStore")))(),a;t[0]===Symbol.for("react.memo_cache_sentinel")?(a={entrypoint:r("MWEBEntrypointsKillswitch.enum").IN_THREAD_GAP_UI},t[0]=a):a=t[0];var i=r("useMWEBBackupState")(a),l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l={},t[1]=l):l=t[1];var u=r("useMWXEntryPointDialog")(r("MAWEncryptedBackupsRestoreDialog.entrypoint"),l),d=u[0],m=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),h=m.startFlow,y=r("useMWEBGetUpsellState")(),C=y.isRestoreUpsellsDismissed,b=r("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_GAP_UI,v=_(!1),S=_(!1),R;t[2]!==h||t[3]!==n?(R=function(t){o("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:n,onFetch:function(n){var e=n.ebsmWiped,a=n.firstUpsellTime,i=n.hasEbKeysLocally,l=n.hasEBSM,s=n.hasPDB,u=n.hasUserRestoredBefore,c=n.hasUserRestoredBeforeTemp;h({additionalAnnotations:{eb_session_identifier:a,ebsm_wiped:e,has_eb_keys_locally:i,has_ebsm:l,has_pdb:s,has_user_restored_before:u,has_user_restored_before_temp:c,restore_upsell_first_impression_time:a},event:o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:b}),r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,t),S.current===!1&&(S.current=!0,r("promiseDone")(f.load(),function(e){return e(i)}))}})},t[2]=h,t[3]=n,t[4]=R):R=t[4];var L=R,E;t[5]!==L?(E={onVisible:function(){L("RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_IMPRESSION")}},t[5]=L,t[6]=E):E=t[6];var k=r("useVisibilityObserver")(E),I=i===4&&!C,T,D;if(t[7]!==I||t[8]!==L?(T=function(){v.current===!1&&I&&(v.current=!0,L("RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_MOUNT"))},D=[I,L],t[7]=I,t[8]=L,t[9]=T,t[10]=D):(T=t[9],D=t[10]),p(T,D),!I)return null;var x;t[11]===Symbol.for("react.memo_cache_sentinel")?(x=s._(/*BTDS*/"Messages are missing."),t[11]=x):x=t[11];var $;t[12]!==d||t[13]!==L?($=function(){L("RESTORE_IN_THREAD_GAP_UI_CTA_CLICK"),d({source:b})},t[12]=d,t[13]=L,t[14]=$):$=t[14];var P;t[15]===Symbol.for("react.memo_cache_sentinel")?(P=s._(/*BTDS*/"Restore now"),t[15]=P):P=t[15];var N;t[16]!==$?(N=c.jsx(r("MWXRowItem.react"),{xstyle:g.banner,children:c.jsx(r("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:c.jsxs(c.Fragment,{children:[x," ",c.jsx(r("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:c.jsx(r("MWXLink.react"),{onClick:$,target:"_blank",testid:void 0,children:P})})]})})}),t[16]=$,t[17]=N):N=t[17];var M;return t[18]!==k||t[19]!==N?(M=c.jsx(r("MWXRow.react"),{align:"center",paddingHorizontal:16,paddingVertical:4,ref:k,spacing:0,children:N}),t[18]=k,t[19]=N,t[20]=M):M=t[20],M}l.default=h}),226);
__d("MWEncryptedBackupsDetermineInitialEBState",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("23914");function s(t){var n=t.clientStateData,r=t.hasArmadilloError,o=t.xfb_backup;return!e||r?0:o==null?2:n.length>0?3:4}l.determineInitialEBState=s}),98);
__d("MWGetLSThreadReportingTokenFromThread",["I64","LSMessagingThreadTypeUtil","LSThreadBitOffset"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("LSThreadBitOffset").has(17,t);if(n)return o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType)?window.btoa("message_thread:encrypted"):window.btoa("message_thread:"+(e||(e=o("I64"))).to_string(t.threadKey))}l.default=s}),98);
__d("MWGroupPollLoggerDeferred",["requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e=r("requireDeferred")("MWGroupPollLogger").__setRef("MWGroupPollLoggerDeferred");function s(t,n){e.onReady(function(e){return e.log(t,n)})}l.log=s}),98);
__d("MWGroupPollQPL",["I64","QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(25301969,"2041"),u=r("qpl")._(25301816,"2042"),c=function(n){return function(t){return r("QPLUserFlow").start(n,{annotations:{int:{thread_type:(e||(e=o("I64"))).to_int32(t)}}})}},d=c(s);function m(){r("QPLUserFlow").endCancel(s)}function p(){r("QPLUserFlow").endSuccess(s)}function _(){r("QPLUserFlow").endFailure(s,"failure")}function f(){r("QPLUserFlow").addPoint(s,"on_click_create_poll")}var g=c(u);function h(){r("QPLUserFlow").endCancel(u)}function y(){r("QPLUserFlow").endSuccess(u)}function C(){r("QPLUserFlow").endFailure(u,"failure")}function b(e,t){r("QPLUserFlow").addPoint(u,"on_click_update_poll",{data:{bool:{hasNewOptionsAdded:e,hasVotesChanged:t}}})}l.logCreatePollStart=d,l.logCreatePollCancel=m,l.logCreatePollSuccess=p,l.logCreatePollFail=_,l.logCreatePollConfirmClick=f,l.logUpdatePollStart=g,l.logUpdatePollCancel=h,l.logUpdatePollSuccess=y,l.logUpdatePollFail=C,l.logOnUpdatePollConfirmClick=b}),98);
__d("MWJoinChannelComposerPlaceholder.react",["fbt","$InternalEnum","JSResourceForInteraction","MWXColumn.react","MWXColumnItem.react","MWXGlimmer.react","MWXText.react","lazyLoadComponent","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("lazyLoadComponent")(r("JSResourceForInteraction")("MWBroadcastChannelMemberComposer.react").__setRef("MWJoinChannelComposerPlaceholder.react")),d={buttonGlimmer:{borderStartStartRadius:"x14ldlfn",borderStartEndRadius:"x1b1wa69",borderEndEndRadius:"xws8118",borderEndStartRadius:"x5fzff1",height:"x10w6t97",maxWidth:"x1e4dklr",width:"xh8yej3",$$css:!0},root:{borderTopColor:"x1exxf4d",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0}},m=n("$InternalEnum").Mirrored(["Broadcast","Social"]);function p(e){var t=o("react-compiler-runtime").c(8),n=e.channelType,a=e.threadKey,i;e:{switch(n){case m.Broadcast:{var l;t[0]!==a?(l=u.jsx(c,{isJoined:!1,threadKey:a}),t[0]=a,t[1]=l):l=t[1],i=l;break e}case m.Social:{var p;t[2]===Symbol.for("react.memo_cache_sentinel")?(p=s._(/*BTDS*/"Anyone can find and join this channel. If you join, it will show in your inbox. Members can see info like your Active Status and when you\u2019ve read messages."),t[2]=p):p=t[2],i=p;break e}}i=void 0}var _=i,f;t[3]!==_?(f=u.jsx(r("MWXColumnItem.react"),{children:u.jsx(r("MWXText.react"),{align:"center",type:"meta3",children:_})}),t[3]=_,t[4]=f):f=t[4];var g;t[5]===Symbol.for("react.memo_cache_sentinel")?(g=u.jsx(r("MWXColumnItem.react"),{align:"center",children:u.jsx(r("MWXGlimmer.react"),{index:0,xstyle:d.buttonGlimmer})}),t[5]=g):g=t[5];var h;return t[6]!==f?(h=u.jsxs(r("MWXColumn.react"),{paddingHorizontal:16,paddingVertical:16,spacing:16,xstyle:d.root,children:[f,g]}),t[6]=f,t[7]=h):h=t[7],h}l.ChannelType=m,l.MWJoinChannelComposerPlaceholder=p}),226);
__d("MWLSGroupMembershipDialogQuery$Parameters",["MWLSGroupMembershipDialogQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("MWLSGroupMembershipDialogQuery_facebookRelayOperation"),metadata:{},name:"MWLSGroupMembershipDialogQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("MWLSGroupMembershipDialog.entrypoint",["JSResourceForInteraction","MWLSGroupMembershipDialogQuery$Parameters"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.groupID;return{queries:{queryRef:{parameters:r("MWLSGroupMembershipDialogQuery$Parameters"),variables:{groupID:e}}}}},root:r("JSResourceForInteraction")("MWLSGroupMembershipDialog.react").__setRef("MWLSGroupMembershipDialog.entrypoint")};l.default=e}),98);
__d("MWV2ChatReactionsTooltip.react",["fbt","FBLogger","I64","LSAuthorityLevel","LSClearReactionsV2DetailsAndRangeStoredProcedure","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSVerifyContactRowExistsStoredProcedure","MWLSThread","MWPActor.react","Promise","ReQL","ReQLSuspense","intlSummarizeNumber","promiseDone","react","react-compiler-runtime","react-strict-dom","useIsReactionsV2Enabled","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m,p=m||(m=o("react")),_=m,f=_.useEffect,g=_.useMemo,h=9;function y(e){var t=o("react-compiler-runtime").c(6),n=(u||(u=r("useReStore")))(),a,l;t[0]!==n||t[1]!==e?(a=function(){return e==null?o("ReQL").empty():o("ReQL").fromTableAscending(n.tables.contextual_profile_v1.index("associatedEntityIdAndOwner")).getKeyRange(e)},l=[n,e],t[0]=n,t[1]=e,t[2]=a,t[3]=l):(a=t[2],l=t[3]);var s=o("ReQLSuspense").useArray(a,l,i.id+":47"),c;if(t[4]!==s){c=new Map;for(var m of s){var p=m==null?void 0:m.profileName;p!=null&&c.set((d||(d=o("I64"))).to_string(m.ownerId),p)}t[4]=s,t[5]=c}else c=t[5];var _=c;return _}function C(e){var t=o("react-compiler-runtime").c(6),n=e.messageId,r=e.reactions,a=e.threadKey,i=o("MWLSThread").useThread(a,b),l=o("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a),s;return t[0]!==l||t[1]!==n||t[2]!==i||t[3]!==r||t[4]!==a?(s=l?p.jsx(E,{messageId:n,parentThreadKey:i,reactions:r,threadKey:a}):p.jsx(v,{messageId:n,parentThreadKey:i,reactions:r,threadKey:a}),t[0]=l,t[1]=n,t[2]=i,t[3]=r,t[4]=a,t[5]=s):s=t[5],s}function b(e){return e.parentThreadKey}function v(t){var a=o("react-compiler-runtime").c(21),l=t.messageId,m=t.parentThreadKey,_=t.reactions,g=t.threadKey,C=(u||(u=r("useReStore")))(),b;a[0]!==C.tables.contacts||a[1]!==C.tables.reactions||a[2]!==l||a[3]!==g?(b=function(){return o("ReQL").leftJoin(o("ReQL").fromTableAscending(C.tables.reactions).getKeyRange(g,l),o("ReQL").fromTableAscending(C.tables.contacts))},a[0]=C.tables.contacts,a[1]=C.tables.reactions,a[2]=l,a[3]=g,a[4]=b):b=a[4];var v;a[5]!==C||a[6]!==l||a[7]!==g?(v=[C,g,l],a[5]=C,a[6]=l,a[7]=g,a[8]=v):v=a[8];var E=o("ReQLSuspense").useArray(b,v,i.id+":108"),k=y(m),I,T;a[9]!==C||a[10]!==E?(I=function(){r("promiseDone")(C.runInTransaction(function(t){return(e||(e=n("Promise"))).all(E.map(function(a){var i=a[1];return i!=null?r("LSVerifyContactRowExistsStoredProcedure")(r("LSFactory")(t),{authorityLevel:(c||(c=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:c.ofNumber(r("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:c.ofNumber(r("LSContactIdType").FBID),contactType:c.ofNumber(r("LSContactType").USER),contactViewerRelationship:c.ofNumber(r("LSContactViewerRelationship").UNKNOWN),gender:c.ofNumber(r("LSContactGender").UNKNOWN),id:i.id,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:c.ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN)}):(e||(e=n("Promise"))).resolve()}))},"readwrite",void 0,void 0,i.id+":124"))},T=[C,E],a[9]=C,a[10]=E,a[11]=I,a[12]=T):(I=a[11],T=a[12]),f(I,T);var D;if(a[13]!==k||a[14]!==_||a[15]!==E){var x=new Map(E.map(L)),$=_.map(function(e){var t=(d||(d=o("I64"))).to_string(e.actorId);if(k.has(t))return k.get(t);var n=x.get(t);return n==null?"":n}).filter(R),P=$.length;if(D=$.slice(0,h),P>h){var N=P-h;D.push(s._(/*BTDS*/"_j{\"*\":\"and {count} others\",\"_1\":\"and {count} other\"}",[s._plural(N),s._param("count",String(N))]))}a[13]=k,a[14]=_,a[15]=E,a[16]=D}else D=a[16];var M=D,w;a[17]!==M?(w=M.map(S),a[17]=M,a[18]=w):w=a[18];var A=w,F;return a[19]!==A?(F=p.jsx(o("react-strict-dom").html.div,{children:A}),a[19]=A,a[20]=F):F=a[20],F}function S(e,t){return p.jsx(o("react-strict-dom").html.div,{children:e},String(t))}S.displayName=S.name+" [from "+i.id+"]";function R(e){return e!==""}function L(e){var t=e[1];return t==null&&r("FBLogger")("messenger_web").debug("missing contact for reaction tooltip"),[(d||(d=o("I64"))).to_string(e[0].actorId),t!=null?t.name:s._(/*BTDS*/"Facebook user")]}function E(e){var t,n,a=e.messageId,l=e.parentThreadKey,c=e.reactions,m=e.threadKey,_=(u||(u=r("useReStore")))();f(function(){r("promiseDone")(_.runInTransaction(function(e){return r("LSClearReactionsV2DetailsAndRangeStoredProcedure")(r("LSFactory")(e))},"readwrite",void 0,void 0,i.id+":226")),r("promiseDone")(_.runInTransaction(function(e){return r("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(r("LSFactory")(e),{messageId:a,threadId:m})},"readwrite",void 0,void 0,i.id+":231"))},[_,m,a]);var g=y(l),C=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(_.tables.reactions_v2_details).getKeyRange(m,a).map(function(e){var t;return(t=g.get((d||(d=o("I64"))).to_string(e.reactorId)))!=null?t:e.fullName})},[_,g,m,a],i.id+":242"),b=o("ReQLSuspense").useArray(function(){return o("ReQL").fromTableAscending(_.tables.reactions_v2).getKeyRange(m,a)},[_,m,a],i.id+":255"),v=b?b.map(function(e){return e.viewerIsReactor}):[],S=v.length>0?v.reduce(function(e,t){return e||t}):!1,R=o("MWPActor.react").useActor(),L=o("ReQLSuspense").useFirst(function(){return o("ReQL").fromTableAscending(_.tables.contacts).getKeyRange(R)},[_,R],i.id+":274"),E=b?b.map(function(e){return(d||(d=o("I64"))).to_int32(e.count)}).filter(function(e){return e>0}):[],k=(t=(L==null?void 0:L.id)!=null?g.get((d||(d=o("I64"))).to_string(L.id)):null)!=null?t:L==null?void 0:L.name;JSON.stringify(E)===JSON.stringify([1])&&S&&k!=null&&C.length===0?C.push(k):S&&C[0]!=null&&L&&k!=null&&((n=C[0])==null?void 0:n.toString())!==k&&C.unshift(k);var I=s._(/*BTDS*/"Loading..."),T=C.slice(0,h);if(C.length>h){var D=C.length-h;T.push(s._(/*BTDS*/"_j{\"*\":\"and {count} others\",\"_1\":\"and {count} other\"}",[s._plural(D),s._param("count",String(r("intlSummarizeNumber")(D)))]).toString())}var x=T.length===0?I:T.map(function(e,t){return p.jsx(o("react-strict-dom").html.div,{children:e},String(t))});return p.jsx(o("react-strict-dom").html.div,{children:x})}E.displayName=E.name+" [from "+i.id+"]",l.default=C}),226);
__d("MWMessageReactionsContainer.react",["fbt","I64","MWChatReactionEmoji","MWChatReactionsUtils","MWMultiReactConstants","MWV2ChatReactionsTooltip.react","MWXTooltip.react","intlSummarizeNumber","react","react-compiler-runtime","stylex","useIsReactionDialogEnabled"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=c||(c=o("react")),m={emoji:{alignItems:"x6s0dn4",backgroundColor:"xsrzb8j",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",lineHeight:"x14ju556",$$css:!0},emojiMargin:{marginInlineEnd:"xjn30re",$$css:!0},emojiNum:{color:"xi81zsa",fontSize:"x1ncwhqj",lineHeight:"x14ju556",minWidth:"xdhweic",paddingInlineEnd:"x11lfxj5",paddingInlineStart:"x135b78x",textAlign:"x2b8uid",$$css:!0},emojiRow:{alignItems:"x6s0dn4",backgroundColor:"x2bj2ny",borderStartStartRadius:"x16qb05n",borderStartEndRadius:"xi7iut8",borderEndEndRadius:"x1dm3dyd",borderEndStartRadius:"x1pv694p",boxShadow:"x10vwrwz",display:"x78zum5",justifyContent:"xl56j7k",paddingTop:"x4p5aij",paddingInlineEnd:"x1ccui7m",paddingBottom:"x1j85h84",paddingInlineStart:"x18pi947",textAlign:"xp4054r",$$css:!0},emojiWithCursor:{cursor:"x1ypdohk",$$css:!0},scaleHeartEmoji:{transform:"xhqu4j4",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(28),a=t.count,i=t.countXstyle,l=t.disableReactionDialog,u=t.emojis,c=t.message,p=t.reactions,h=t.reactionsV2,y=t.renderEmojis,C=t.threadKey,b=t.xstyle,v=l===void 0?!1:l,S=c.messageId,R;n[0]!==h?(R=h!=null?h.map(f).reduce(_,0):0,n[0]=h,n[1]=R):R=n[1];var L=R,E=r("useIsReactionDialogEnabled")(C)&&!v,k=L>1?L:a,I=k>1,T;if(n[2]!==u||n[3]!==E||n[4]!==y||n[5]!==I){var D;n[7]!==u.length||n[8]!==E||n[9]!==y||n[10]!==I?(D=function(n,a){var t=I||a!==u.length-1,i=o("MWChatReactionsUtils").isHeart(n[0]);return d.createElement("div",babelHelpers.extends({},(e||(e=r("stylex"))).props(m.emoji,E?m.emojiWithCursor:!1,t?m.emojiMargin:!1),{key:String(a)}),d.jsx("div",babelHelpers.extends({},e.props(i?m.scaleHeartEmoji:!1),{children:y?y(n,16,"messenger_reaction_emoji_"+n[0]):d.jsx(r("MWChatReactionEmoji"),{emoji:n,size:16,testid:void 0})})))},n[7]=u.length,n[8]=E,n[9]=y,n[10]=I,n[11]=D):D=n[11],T=u.map(D),n[2]=u,n[3]=E,n[4]=y,n[5]=I,n[6]=T}else T=n[6];var x=T,$;n[12]!==b?($=(e||(e=r("stylex"))).props(m.emojiRow,b),n[12]=b,n[13]=$):$=n[13];var P;n[14]!==i||n[15]!==k||n[16]!==I?(P=I?d.jsx(g,{countXstyle:i,reactionCount:k}):null,n[14]=i,n[15]=k,n[16]=I,n[17]=P):P=n[17];var N;n[18]!==x||n[19]!==$||n[20]!==P?(N=d.jsxs("div",babelHelpers.extends({},$,{role:"none",children:[x,P]})),n[18]=x,n[19]=$,n[20]=P,n[21]=N):N=n[21];var M=N,w;return n[22]!==E||n[23]!==S||n[24]!==p||n[25]!==M||n[26]!==C?(w=E?d.jsx(r("MWXTooltip.react"),{align:"middle",label:s._(/*BTDS*/"Reactions"),position:"above",tooltip:d.jsx(r("MWV2ChatReactionsTooltip.react"),{messageId:S,reactions:p,threadKey:C}),children:M}):M,n[22]=E,n[23]=S,n[24]=p,n[25]=M,n[26]=C,n[27]=w):w=n[27],w}function _(e,t){return e+t}function f(e){return(u||(u=o("I64"))).to_int32(e.count)}function g(t){var n=o("react-compiler-runtime").c(10),a=t.countXstyle,i=t.reactionCount,l;n[0]!==i?(l=r("intlSummarizeNumber")(i),n[0]=i,n[1]=l):l=n[1];var s=l,u=s.length,c;n[2]!==a?(c=(e||(e=r("stylex")))(m.emojiNum,a),n[2]=a,n[3]=c):c=n[3];var p=u*o("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER,_;n[4]!==p?(_={width:p},n[4]=p,n[5]=_):_=n[5];var f;return n[6]!==s||n[7]!==c||n[8]!==_?(f=d.jsx("div",{className:c,role:"none",style:_,children:s}),n[6]=s,n[7]=c,n[8]=_,n[9]=f):f=n[9],f}l.default=p}),226);
__d("MWMessageRequestSharedTexts.react",["fbt"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return s._(/*BTDS*/"If you reply, {FBFullName} will also be able to call you and see info like your Active Status and when you've read messages.",[s._param("FBFullName",e)])}function u(e){return s._(/*BTDS*/"If you reply, {FBFullName} will be able to message and call you.",[s._param("FBFullName",e)])}function c(e){return s._(/*BTDS*/"I don't want to hear from {name}",[s._param("name",e)])}function d(e){return s._(/*BTDS*/"You can permanently delete the conversation or block {FBShortName} from sending you messages or calls. We won't tell them you've taken these actions.",[s._param("FBShortName",e)])}function m(){return s._(/*BTDS*/"You can open a message request for more info on who sent it. They won't be notified you opened it.")}function p(){return s._(/*BTDS*/"Requests")}l.getFBUserInfoTextMessage=e,l.getFBUserInfoTextMessageForMSplit=u,l.getDefaultInfoTextFooter=c,l.getDeclineUserDialogText=d,l.getMessageRequestHeaderInfoText=m,l.getMessageRequestHeaderTitleText=p}),226);
__d("MWV2ChatText.react",["MWMessageTranslationContext.react","MWUnvaultedText","MWV2ChatTextUtils","MWXMessageListText.react","cr:8839","gkx","isMWBumpMessage","react","react-compiler-runtime","useMWTextRenderers","useStringWithSubstitutions"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(17),a=e.containerThreadKey,i=e.containerThreadType,l=e.hasBlockQuoteStyle,u=e.isSecureMessage,c=e.message,p=e.outgoing,_=l===void 0?!1:l,f=r("useMWTextRenderers")(p,u),g=r("MWMessageTranslationContext.react").useHook(),h=g.shouldShowTranslateOption,y=r("gkx")("4988")&&!h(c.messageId),C=y&&c.translatedText!=null?c.translatedText:c.text,b=o("MWUnvaultedText").useMWUnvaultedText(u,C),v=o("MWV2ChatTextUtils").useRanges(b,c,a,i);if(b==null)return null;if(u&&r("isMWBumpMessage")(c.replyType)){var S;return t[0]!==c||t[1]!==p||t[2]!==v||t[3]!==f||t[4]!==b?(S=s.jsx(m,{message:c,outgoing:p,ranges:v,renderers:f,text:b}),t[0]=c,t[1]=p,t[2]=v,t[3]=f,t[4]=b,t[5]=S):S=t[5],S}var R;t[6]!==_||t[7]!==u||t[8]!==c||t[9]!==p||t[10]!==v||t[11]!==f||t[12]!==b?(R=s.jsx(d,{hasBlockQuoteStyle:_,isSecureMessage:u,message:c,outgoing:p,ranges:v,renderers:f,text:b}),t[6]=_,t[7]=u,t[8]=c,t[9]=p,t[10]=v,t[11]=f,t[12]=b,t[13]=R):R=t[13];var L=R;if(!u&&n("cr:8839")!=null){var E;return t[14]!==L||t[15]!==c?(E=s.jsx(n("cr:8839"),{message:c,children:L}),t[14]=L,t[15]=c,t[16]=E):E=t[16],E}return L}function d(e){var t,n=o("react-compiler-runtime").c(9),a=e.hasBlockQuoteStyle,i=e.isSecureMessage,l=e.message,u=e.outgoing,c=e.ranges,d=e.renderers,m=e.text,p=a===void 0?!1:a,_;if(n[0]!==l.mentionIds){var f,g;_=new Set((f=(g=l.mentionIds)==null||g.split==null?void 0:g.split(","))!=null?f:[]),n[0]=l.mentionIds,n[1]=_}else _=n[1];var h=_,y=(t=o("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(i?m:null,c,h,l.threadKey))!=null?t:{textWithSubstitutions:m,updatedRanges:c},C=y.textWithSubstitutions,b=y.updatedRanges,v;return n[2]!==p||n[3]!==l||n[4]!==u||n[5]!==d||n[6]!==C||n[7]!==b?(v=s.jsx(r("MWXMessageListText.react"),{hasBlockQuoteStyle:p,message:l,outgoing:u,ranges:b,renderers:d,text:C}),n[2]=p,n[3]=l,n[4]=u,n[5]=d,n[6]=C,n[7]=b,n[8]=v):v=n[8],v}function m(e){var t,n=o("react-compiler-runtime").c(6),a=e.message,i=e.outgoing,l=e.ranges,u=e.renderers,c=e.text,d=(t=o("useStringWithSubstitutions").useStringWithSubstitutions(c,a.threadKey))!=null?t:c,m;return n[0]!==a||n[1]!==i||n[2]!==l||n[3]!==u||n[4]!==d?(m=s.jsx(r("MWXMessageListText.react"),{message:a,outgoing:i,ranges:l,renderers:u,text:d}),n[0]=a,n[1]=i,n[2]=l,n[3]=u,n[4]=d,n[5]=m):m=n[5],m}l.default=c}),98);
__d("MWXIconLike",["MWXSvgIcon","SVGIcon","cr:22384","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22384")),r("gkx")("23219"));l.default=e}),98);
__d("useMWV2SubmitFeedbackAction",["LSFactory","LSIntEnum","LSSubmitGenAIBotFeedbackStoredProcedure","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(t,n,a,l){var u=o("react-compiler-runtime").c(6),c=(e||(e=r("useReStore")))(),d;return u[0]!==n||u[1]!==a||u[2]!==t||u[3]!==c||u[4]!==l?(d=function(u){r("promiseDone")(c.runInTransaction(function(e){return r("LSSubmitGenAIBotFeedbackStoredProcedure")(r("LSFactory")(e),{botFeedbackKind:(s||(s=o("LSIntEnum"))).ofNumber(u),botId:a,botResponseId:t||"",feedbackKindType:s.ofNumber(u),messageId:l})},"readwrite",void 0,void 0,i.id+":33"),n)},u[0]=n,u[1]=a,u[2]=t,u[3]=c,u[4]=l,u[5]=d):d=u[5],d}l.default=d}),98);
__d("useUGCAgentsSubmitFeedbackMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9600826256672927"}),null);
__d("useUGCAgentsSubmitFeedbackMutation.graphql",["useUGCAgentsSubmitFeedbackMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"input"}],t=[{alias:null,args:[{kind:"Variable",name:"data",variableName:"input"}],kind:"ScalarField",name:"xfb_gen_ai_persona_submit_feedback",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"useUGCAgentsSubmitFeedbackMutation",selections:t,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"useUGCAgentsSubmitFeedbackMutation",selections:t},params:{id:n("useUGCAgentsSubmitFeedbackMutation_facebookRelayOperation"),metadata:{},name:"useUGCAgentsSubmitFeedbackMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("useUGCAgentsSubmitFeedbackMutation",["fbt","BotFeedbackKind","FBLogger","RelayHooks","XFBBotFeedbackKind.facebook","cdsPushToast","objectEntries","react","react-compiler-runtime","useUGCAgentsSubmitFeedbackMutation.graphql"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=(u||(u=o("react"))).useCallback,d=e!==void 0?e:e=n("useUGCAgentsSubmitFeedbackMutation.graphql"),m=function(t){var e=r("objectEntries")(r("BotFeedbackKind")).find(function(e){var n=e[0],r=e[1];return r===t});if(e==null){r("FBLogger")("ugc_personas").mustfix("ugc_personas_could_not_convert_bot_feedback_kind_type");return}var n=r("XFBBotFeedbackKind.facebook").cast(e[0]);if(n==null){r("FBLogger")("ugc_personas").mustfix("ugc_personas_could_not_cast_bot_feedback_kind_type");return}return n};function p(e,t){var n=o("react-compiler-runtime").c(4),a=o("RelayHooks").useMutation(d),i=a[0],l;return n[0]!==t||n[1]!==i||n[2]!==e?(l=function(a){var n;e==null||e.setIsFeedbackSubmitted(!0);var l=m(a);l&&i({onCompleted:function(n){t()},onError:function(n){r("FBLogger")("ugc_personas").event("ugc_personas_submit_feedback_error").catching(n),o("cdsPushToast").pushToast({message:s._(/*BTDS*/"Something went wrong when submitting feedback. Please try again later.")}),e==null||e.setIsFeedbackSubmitted(!1)},variables:{input:{bot_feedback_kind:l,response_id:(n=e==null?void 0:e.responseId)!=null?n:"",surface:"AI_STUDIO_WEB"}}})},n[0]=t,n[1]=i,n[2]=e,n[3]=l):l=n[3],l}l.default=p}),226);
__d("useGenAiNegativeFeedback",["fbt","JSResourceForInteraction","handleMWV2NoMessageOrTurn","react-compiler-runtime","useGenAiFeedbackSubmittedToast","useMWV2SubmitFeedbackAction","useMWXLazyDialog","useUGCAgentsSubmitFeedbackMutation"],(function(t,n,r,o,a,i,l,s){"use strict";var e=r("JSResourceForInteraction")("MWV2SubmitNegativeFeedbackDialog.react").__setRef("useGenAiNegativeFeedback");function u(t,n){var a=o("react-compiler-runtime").c(11),i=r("useGenAiFeedbackSubmittedToast")(t,n),l="";if(t){var u;l=(u=t.botResponseId)!=null?u:""}else n?l=n.responseId:r("handleMWV2NoMessageOrTurn")();var c=r("useMWV2SubmitFeedbackAction")(l,i,t==null?void 0:t.threadKey,t==null?void 0:t.messageId),d=r("useUGCAgentsSubmitFeedbackMutation")(n,i),m;a[0]!==t||a[1]!==c||a[2]!==d||a[3]!==n?(t?m=c:n?m=d:r("handleMWV2NoMessageOrTurn")(),a[0]=t,a[1]=c,a[2]=d,a[3]=n,a[4]=m):m=a[4];var p=r("useMWXLazyDialog")(e),_=p[0],f;a[5]===Symbol.for("react.memo_cache_sentinel")?(f=s._(/*BTDS*/"Bad response"),a[5]=f):f=a[5];var g=f,h;if(a[6]!==t||a[7]!==m||a[8]!==_||a[9]!==n){var y=function(){return _({message:t,onSubmit:m,turn:n})};h=[y,g],a[6]=t,a[7]=m,a[8]=_,a[9]=n,a[10]=h}else h=a[10];return h}l.default=u}),226);
__d("MWV2NegativeFeedbackButton.react",["BaseView.react","MWMessageActionButton.react","MWXIconLike","handleMWV2NoMessageOrTurn","react","react-compiler-runtime","useGenAiNegativeFeedback"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={container:{marginInlineEnd:"x14z9mp",transform:"x19jd1h0",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(3),n=e.message,a=e.turn,i=r("useGenAiNegativeFeedback")(n,a),l=i[0],c=i[1];if(!n&&!a)return r("handleMWV2NoMessageOrTurn")(),null;var d;return t[0]!==l||t[1]!==c?(d=s.jsx(r("BaseView.react"),{xstyle:u.container,children:s.jsx(r("MWMessageActionButton.react"),{icon:r("MWXIconLike"),label:c,onPress:l,testid:void 0})}),t[0]=l,t[1]=c,t[2]=d):d=t[2],d}l.default=c}),98);
__d("useGenAiPositiveFeedback",["fbt","BotFeedbackKind","MWMessageListLoggingContext","MessengerWebUXLogger","handleMWV2NoMessageOrTurn","react","useGenAiFeedbackSubmittedToast","useMWV2SubmitFeedbackAction","useUGCAgentsSubmitFeedbackMutation"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=u.useCallback,d=u.useMemo;function m(e,t){var n="";if(e){var a;n=(a=e.botResponseId)!=null?a:""}else t?n=t.responseId:r("handleMWV2NoMessageOrTurn")();var i=r("useGenAiFeedbackSubmittedToast")(e,t),l=r("useMWV2SubmitFeedbackAction")(n,i,e==null?void 0:e.threadKey,e==null?void 0:e.messageId),u=r("useUGCAgentsSubmitFeedbackMutation")(t,i),m;e?m=l:t?m=u:r("handleMWV2NoMessageOrTurn")();var p=o("MWMessageListLoggingContext").useFlowInstanceId(),_=d(function(){return{extraData:{botResponseId:n},flowInstanceId:p.current}},[n,p]),f=r("MessengerWebUXLogger").useInteractionLogger(),g=c(function(){m(r("BotFeedbackKind").BOT_FEEDBACK_POSITIVE),f==null||f(babelHelpers.extends({eventName:"submit_positive_feedback"},_))},[m,f,_]),h=s._(/*BTDS*/"Good response");return[g,h]}l.default=m}),226);
__d("MWV2PositiveFeedbackButton.react",["BaseView.react","MWMessageActionButton.react","MWXIconLike","handleMWV2NoMessageOrTurn","react","react-compiler-runtime","useGenAiPositiveFeedback"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={container:{marginInlineEnd:"x14z9mp",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(3),n=e.message,a=e.turn,i=r("useGenAiPositiveFeedback")(n,a),l=i[0],c=i[1];if(!n&&!a)return r("handleMWV2NoMessageOrTurn")(),null;var d;return t[0]!==l||t[1]!==c?(d=s.jsx(r("BaseView.react"),{xstyle:u.container,children:s.jsx(r("MWMessageActionButton.react"),{icon:r("MWXIconLike"),label:c,onPress:l,testid:void 0})}),t[0]=l,t[1]=c,t[2]=d):d=t[2],d}l.default=c}),98);
__d("MWWorkForeignEntityTypeUtils",["I64","LSContactWorkForeignEntityType","LSIntEnum"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){return(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactWorkForeignEntityType").NOT_FOREIGN))||(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactWorkForeignEntityType").UNKNOWN))?"NOT_FOREIGN":(e||(e=o("I64"))).equal(t,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactWorkForeignEntityType").NOT_FOREIGN_LIMITED))?"LIMITED":"FOREIGN"}l.getWorkForeignEntityType=u}),98);
__d("MWXHScroll.react",["fbt","BaseHScroll.react","CometTrackingNodeProvider.react","Locale","MWXCircleButton.react","MWXIconChevronLeft","MWXIconChevronRight","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e=["arrowSize","buttonFocusable","nextButtonLabel","prevButtonLabel"],u,c=u||(u=o("react")),d=u.useCallback,m=o("Locale").isRTL(),p=s._(/*BTDS*/"Next items"),_=s._(/*BTDS*/"Previous items");function f(t){var n=o("react-compiler-runtime").c(18),a,i,l,s,u;n[0]!==t?(a=t.arrowSize,i=t.buttonFocusable,s=t.nextButtonLabel,u=t.prevButtonLabel,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=u):(a=n[1],i=n[2],l=n[3],s=n[4],u=n[5]);var d=s===void 0?p:s,f=u===void 0?_:u,g;n[6]!==a||n[7]!==i||n[8]!==f?(g=function(t,n){return c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:419,children:c.jsx(r("MWXCircleButton.react"),{"aria-label":f,color:"secondary",disabled:n,focusable:i,icon:r(m?"MWXIconChevronRight":"MWXIconChevronLeft"),onPress:t,size:a,testid:void 0,type:"overlay-raised"})})},n[6]=a,n[7]=i,n[8]=f,n[9]=g):g=n[9];var h=g,y;n[10]!==a||n[11]!==i||n[12]!==d?(y=function(t,n){return c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:420,children:c.jsx(r("MWXCircleButton.react"),{"aria-label":d,color:"secondary",disabled:n,focusable:i,icon:r(m?"MWXIconChevronLeft":"MWXIconChevronRight"),onPress:t,size:a,testid:void 0,type:"overlay-raised"})})},n[10]=a,n[11]=i,n[12]=d,n[13]=y):y=n[13];var C=y,b;return n[14]!==C||n[15]!==h||n[16]!==l?(b=c.jsx(o("BaseHScroll.react").HScrollContainer,babelHelpers.extends({},l,{nextButton:C,prevButton:h})),n[14]=C,n[15]=h,n[16]=l,n[17]=b):b=n[17],b}l.Container=f,l.Child=o("BaseHScroll.react").HScrollChild}),226);
__d("MWXIconFaceHappy",["MWXSvgIcon","SVGIcon","cr:22315","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22315")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconForwardAction",["MWXSvgIcon","SVGIcon","cr:22337","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22337")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconLink",["MWXSvgIcon","SVGIcon","cr:22385","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22385")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconMessage",["MWXSvgIcon","SVGIcon","cr:22398","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22398")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconPencil",["MWXSvgIcon","SVGIcon","cr:22423","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22423")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconPhoto",["MWXSvgIcon","SVGIcon","cr:22435","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22435")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconPlusCircle",["MWXSvgIcon","SVGIcon","cr:22438","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22438")),r("gkx")("23219"));l.default=e}),98);
__d("MessengerBellFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M18 7a6.569 6.569 0 0 1 6.467 5.414l1.367 7.658a3 3 0 0 0 .832 1.594l.92.92a1.414 1.414 0 0 1-1 2.414H9.414a1.414 1.414 0 0 1-1-2.414l.92-.92a3 3 0 0 0 .832-1.594l1.367-7.658A6.569 6.569 0 0 1 18 7zM15.5 27c-.276 0-.504.226-.459.498a3 3 0 0 0 5.918 0c.045-.273-.183-.498-.459-.498h-5z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerCamcorderFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M9 9.5a4 4 0 0 0-4 4v9a4 4 0 0 0 4 4h10a4 4 0 0 0 4-4v-9a4 4 0 0 0-4-4H9zM25.829 21.532l3.723 1.861A1 1 0 0 0 31 22.5V13.5a1 1 0 0 0-1.448-.894l-3.723 1.861A1.5 1.5 0 0 0 25 15.81v4.38a1.5 1.5 0 0 0 .829 1.342z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerFaceHappyFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm-5.25-13c0-1.25.563-2 1.5-2 .938 0 1.5.75 1.5 2s-.563 2-1.5 2c-.938 0-1.5-.75-1.5-2zm7.5 0c0-1.25.563-2 1.5-2 .938 0 1.5.75 1.5 2s-.563 2-1.5 2c-.938 0-1.5-.75-1.5-2zm-7.52 5.464a1 1 0 0 1 1.41-.12 5.963 5.963 0 0 0 3.856 1.406c1.47 0 2.813-.528 3.856-1.406a1 1 0 1 1 1.288 1.53 7.962 7.962 0 0 1-5.144 1.876 7.962 7.962 0 0 1-5.144-1.877 1 1 0 0 1-.121-1.409z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerForwardActionFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M17.99 24.4c0 1.278 1.336 2.04 2.334 1.332l9.004-6.399c.89-.633.89-2.028 0-2.661l-9.004-6.398c-.998-.71-2.334.053-2.334 1.33v3.147c0 .138-.114.25-.252.251-7 .076-11.741 3.317-11.742 10.986 0 .594.41 1.012 1.033 1.012.46 0 .844-.265 1.114-1.083 1.129-3.409 4.431-4.87 9.595-4.916a.25.25 0 0 1 .252.249v3.15z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerForwardFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"m30.22 19.497-10.5 7.198c-1.163.797-2.722-.06-2.722-1.497v-2.954a.25.25 0 0 0-.25-.25H8.001A2 2 0 0 1 6 19.996v-3.997A2 2 0 0 1 8 14h8.748a.25.25 0 0 0 .25-.25v-2.948c0-1.437 1.559-2.294 2.722-1.497l10.5 7.197c1.04.713 1.04 2.283 0 2.995z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerMessageFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M29 17.504c0 6.103-4.606 10.57-11 10.57-1.065 0-2.08-.095-3.032-.327a4.26 4.26 0 0 0-2.39.09L8.91 28.962c-.59.202-1.164-.372-.964-.985l.729-2.411a3.007 3.007 0 0 0-.291-2.5C7.414 21.484 7 19.596 7 17.504v-.002c0-6.103 4.607-10.498 11-10.498S29 11.399 29 17.502v.002z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPhoneFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M25.753 28.2c1.07-.357 1.816-1.275 2.423-2.225a2.05 2.05 0 0 0 .037-2.151 4.998 4.998 0 0 0-.723-.963 11.594 11.594 0 0 0-2.888-2.112c-.58-.299-1.272-.212-1.808.159l-2.098 1.452a.472.472 0 0 1-.437.055 11.557 11.557 0 0 1-4.045-2.63 11.554 11.554 0 0 1-2.63-4.044.472.472 0 0 1 .056-.437l1.453-2.098c.37-.536.457-1.228.158-1.807A11.587 11.587 0 0 0 13.14 8.51a4.995 4.995 0 0 0-.963-.723 2.05 2.05 0 0 0-2.15.037c-.951.607-1.87 1.353-2.225 2.424-1.174 3.527 1.187 8.461 5.338 12.613 4.152 4.151 9.086 6.512 12.614 5.338z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPhotoFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M13.5 16.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M7 12v12a4 4 0 0 0 4 4h14a4 4 0 0 0 4-4V12a4 4 0 0 0-4-4H11a4 4 0 0 0-4 4zm18-1.5H11A1.5 1.5 0 0 0 9.5 12v9.546a.25.25 0 0 0 .375.217L15 18.803a6 6 0 0 1 6 0l5.125 2.96a.25.25 0 0 0 .375-.217V12a1.5 1.5 0 0 0-1.5-1.5z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPlusCircleFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm-1-16a1 1 0 1 1 2 0v3.75c0 .138.112.25.25.25H23a1 1 0 1 1 0 2h-3.75a.25.25 0 0 0-.25.25V23a1 1 0 1 1-2 0v-3.75a.25.25 0 0 0-.25-.25H13a1 1 0 1 1 0-2h3.75a.25.25 0 0 0 .25-.25V13z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerWebPollConstants",[],(function(t,n,r,o,a,i){a.exports={POLL_COMPOSER_MAX_OPTIONS:10,POLL_MAX_OPTIONS:200,POLL_MAX_OPTION_LENGTH:140,POLL_MAX_QUESTION_LENGTH:200,POLL_MIN_OPTIONS:2}}),null);
__d("RecoverableViolation.react",["FBLogger","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef;function d(e){var t=o("react-compiler-runtime").c(4),n=e.errorMessage,a=e.errorObject,i=e.projectName,l=c(!1),s;return t[0]!==n||t[1]!==a||t[2]!==i?(s=function(){if(!l.current){var e=r("FBLogger")(i);(a==null?void 0:a.error)!=null?e.catching(a.error):e.blameToPreviousFrame(),e.mustfix(n),l.current=!0}},t[0]=n,t[1]=a,t[2]=i,t[3]=s):s=t[3],u(s,void 0),null}l.default=d}),98);
__d("getLSContactHref",["CurrentEnvironment","I64","LSContactBlockedByViewerStatus","LSContactTypeExact","LSIntEnum","MWLSContactTypeExactUtils","XCometVanityURLControllerRouteBuilder"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=t.blockedByViewerStatus,a=t.contactTypeExact,i=t.id,l=t.secondaryName;if((e||(e=o("I64"))).to_int32(n)!==r("LSContactBlockedByViewerStatus").FULLY_BLOCKED&&!(e||(e=o("I64"))).equal(a,(s||(s=o("LSIntEnum"))).ofNumber(r("LSContactTypeExact").MESSENGER_ONLY_NOT_ALLOWED_ON_FB))){var u=o("MWLSContactTypeExactUtils").isIgContact(a);return l!=null&&u?"https://www.instagram.com/"+l:(r("CurrentEnvironment").facebookdotcom?"":"https://www.facebook.com")+r("XCometVanityURLControllerRouteBuilder").buildUri({vanity:(e||(e=o("I64"))).to_string(i)}).toString()}}l.default=u}),98);
__d("getMWV2HeaderSettingsPopoverTooltip",["fbt","LSMessagingThreadTypeUtil"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){var t=e.threadType,n=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(t);return n?s._(/*BTDS*/"_j[\"Channel settings\",\"f580546da084946da3d6f61e3cc636da\",1]"):s._(/*BTDS*/"Chat settings")}l.default=e}),226);
__d("useEncryptedBackupsProcessStatePreLoaded_query.graphql",[],(function(t,n,r,o,a,i){"use strict";var e={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useEncryptedBackupsProcessStatePreLoaded_query",selections:[{alias:null,args:null,concreteType:"XFBEncryptedBackup",kind:"LinkedField",name:"xfb_backup",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,kind:"ScalarField",name:"backup_state",storageKey:null}]}],storageKey:null},action:"THROW",path:"viewer"}],type:"Query",abstractKey:null};a.exports=e}),null);
__d("useEncryptedBackupsProcessStatePreLoaded",["CometRelay","I64","LSAuthorityLevel","LSIntEnum","MWEncryptedBackupsDetermineInitialEBState","ReQL","ReQLSuspense","isMWEBEntrypointEnabled","react-compiler-runtime","useEncryptedBackupsProcessStatePreLoaded_query.graphql","useMAWHasUserVisibleErrors","useMAWUnsupportedBrowserNUX","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c;function d(t){var a=o("react-compiler-runtime").c(10),l=t.entrypoint,s=t.query,u=o("CometRelay").useFragment(e!==void 0?e:e=n("useEncryptedBackupsProcessStatePreLoaded_query.graphql"),s),d=(c||(c=r("useReStore")))(),p;a[0]!==d||a[1]!==(u==null?void 0:u.viewer.backup_state)?(p=function(){return(u==null?void 0:u.viewer.backup_state)==null?o("ReQL").fromTableAscending(d.tables.secure_encrypted_backups_client_state).filter(m):o("ReQL").empty()},a[0]=d,a[1]=u==null?void 0:u.viewer.backup_state,a[2]=p):p=a[2];var _=u==null?void 0:u.viewer.backup_state,f;a[3]!==d||a[4]!==_?(f=[d,_],a[3]=d,a[4]=_,a[5]=f):f=a[5];var g=o("ReQLSuspense").useArray(p,f,i.id+":57"),h=o("useMAWUnsupportedBrowserNUX").useMAWUnsupportedBrowserNUX(),y=h.shouldHideEBFlow,C=r("useMAWHasUserVisibleErrors")(),b=y||C;if(!r("isMWEBEntrypointEnabled")(l))return 0;var v;return a[6]!==g||a[7]!==b||a[8]!==u?(v=(u==null?void 0:u.viewer.backup_state)!=null?u.viewer.backup_state:o("MWEncryptedBackupsDetermineInitialEBState").determineInitialEBState({clientStateData:g,hasArmadilloError:b,xfb_backup:u==null?void 0:u.xfb_backup}),a[6]=g,a[7]=b,a[8]=u,a[9]=v):v=a[9],v}function m(e){var t=e.authorityLevel;return(s||(s=o("I64"))).equal(t,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").AUTHORITATIVE))}l.default=d}),98);
__d("useMAWGetUserVisibleErrors",["MAWIssueNewUserVisibleErrors","Promise","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useCallback;function d(){var t=o("react-compiler-runtime").c(10),a=(s||(s=r("useReStore")))(),l;t[0]!==a.tables.user_visible_errors?(l=function(){return o("ReQL").fromTableDescending(a.tables.user_visible_errors).filter(m)},t[0]=a.tables.user_visible_errors,t[1]=l):l=t[1];var u;t[2]!==a?(u=[a],t[2]=a,t[3]=u):u=t[3];var c=o("ReQLSuspense").useFirst(l,u,i.id+":37"),d;t[4]!==a||t[5]!==c?(d=function(){return c!=null&&c.errorId!=null?o("MAWIssueNewUserVisibleErrors").deleteUserVisibleError(a,c.errorId):(e||(e=n("Promise"))).resolve()},t[4]=a,t[5]=c,t[6]=d):d=t[6];var p=d,_;return t[7]!==p||t[8]!==c?(_=[c,p],t[7]=p,t[8]=c,t[9]=_):_=t[9],_}function m(e){var t=e.presentationStyle;return t==="banner"}l.default=d}),98);
__d("useMAWOfflineQueueLoadingIndicatorShown",["useCometRouterState"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e===void 0?!1:e,n=r("useCometRouterState")(),o=n==null?void 0:n.main.route.tabKey;return o==="messenger"||!t}l.default=e}),98);
__d("useMAWOfflineQueueLoadingIndicatorThreadJid",["I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWJids","ReQL","WAJids","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=(u||(u=o("react"))).useState;function d(t,n){var a=o("react-compiler-runtime").c(7),i=(e||(e=r("useReStore")))(),l=c(null),u=l[0],d=l[1],m;a[0]!==n?(m=n!=null?o("LSMessagingThreadTypeUtil").isGroup(n):!1,a[0]=n,a[1]=m):m=a[1];var p=m,_,f;return a[2]!==i||a[3]!==p||a[4]!==t?(_=function(){t!=null&&r("promiseDone")(o("ReQL").firstAsync(o("ReQL").fromTableAscending(i.tables.mi_act_mapping_table).getKeyRange(t)),function(e){if(e!=null){var t=(s||(s=o("I64"))).to_string(e.jid),n=p===!0?o("WAJids").toGroupJid(t):o("MAWJids").toUserJid(t);d(n)}})},f=[i,d,t,p],a[2]=i,a[3]=p,a[4]=t,a[5]=_,a[6]=f):(_=a[5],f=a[6]),o("Int64Hooks").useEffectInt64(_,f),u}l.default=d}),98);
__d("useMAWOfflineQueueStateQuery.graphql",["MAWOfflineQueueState-resolver"],(function(t,n,r,o,a,i){"use strict";var e={fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMAWOfflineQueueStateQuery",selections:[{kind:"ClientExtension",selections:[{alias:null,args:null,fragment:null,kind:"RelayLiveResolver",name:"offlineQueueStats",resolverModule:n("MAWOfflineQueueState-resolver").offlineQueueStats,path:"offlineQueueStats"}]}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMAWOfflineQueueStateQuery",selections:[{kind:"ClientExtension",selections:[{name:"offlineQueueStats",args:null,fragment:null,kind:"RelayResolver",storageKey:null,isOutputType:!0}]}]},params:{cacheID:"84004270b2ffca123b6b78124755ac6f",id:null,metadata:{},name:"useMAWOfflineQueueStateQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("useMAWOfflineQueueState",["CometRelay","MAWOfflineQueueState","gkx","react","react-compiler-runtime","useMAWOfflineQueueStateQuery.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useSyncExternalStore;function c(){return u(o("MAWOfflineQueueState").offlineQueueState.subscribe,o("MAWOfflineQueueState").offlineQueueState.getSnapshot)}function d(){var t,r=o("react-compiler-runtime").c(2),a,i;r[0]===Symbol.for("react.memo_cache_sentinel")?(a=e!==void 0?e:e=n("useMAWOfflineQueueStateQuery.graphql"),i={},r[0]=a,r[1]=i):(a=r[0],i=r[1]);var l=o("CometRelay").useClientQuery(a,i);return(t=l.offlineQueueStats)!=null?t:o("MAWOfflineQueueState").EMPTY_STATE}var m=r("gkx")("12254")?d:c;l.useMAWOfflineQueueState=m}),98);
__d("useMWChatUnmuteThread",["I64","LSFactory","LSIntEnum","LSMailboxType","LSMuteCallsFromThreadStoredProcedure","LSOptimisticMuteThreadStoredProcedure","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback;function m(){var t=o("react-compiler-runtime").c(2),n=(e||(e=r("useReStore")))(),a=(s||(s=o("I64"))).zero,l;return t[0]!==n?(l=function(t){if((s||(s=o("I64"))).equal(t.muteExpireTimeMs,a)||r("promiseDone")(n.runInTransaction(function(e){return r("LSOptimisticMuteThreadStoredProcedure")(r("LSFactory")(e),{mailboxType:(u||(u=o("LSIntEnum"))).ofNumber(r("LSMailboxType").MESSENGER),muteExpireTimeMs:(s||(s=o("I64"))).zero,threadKey:t.threadKey})},"readwrite",void 0,void 0,i.id+":36")),!(s||(s=o("I64"))).equal(t.muteCallsExpireTimeMs,a)){r("promiseDone")(n.runInTransaction(function(e){return r("LSMuteCallsFromThreadStoredProcedure")(r("LSFactory")(e),{mailboxType:(u||(u=o("LSIntEnum"))).ofNumber(r("LSMailboxType").MESSENGER),muteCallsExpireTimeMs:(s||(s=o("I64"))).zero,threadKey:t.threadKey})},"readwrite",void 0,void 0,i.id+":49"));return}},t[0]=n,t[1]=l):l=t[1],l}l.default=m}),98);
__d("useMWHasAppealableMessageSendFeatureLimit",["I64","LSFeatureLimitsType","LSIntEnum","ReQL","ReQLSuspense","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c||(c=o("react"))).useCallback;function m(){var t=o("react-compiler-runtime").c(6),n=(e||(e=r("useReStore")))(),a;t[0]!==n.tables.feature_limits?(a=function(){return o("ReQL").fromTableAscending(n.tables.feature_limits).filter(p)},t[0]=n.tables.feature_limits,t[1]=a):a=t[1];var l;t[2]!==n?(l=[n],t[2]=n,t[3]=l):l=t[3];var s=o("ReQLSuspense").useFirst(a,l,i.id+":25"),u;return t[4]!==s?(u=function(){return s!=null},t[4]=s,t[5]=u):u=t[5],u}function p(e){return(s||(s=o("I64"))).equal(e.type_,(u||(u=o("LSIntEnum"))).ofNumber(r("LSFeatureLimitsType").MESSENGER_APPEALABLE_MESSAGE_SEND))}l.default=m}),98);
__d("useMWLSUnarchiveThread",["LSFactory","LSOptimisticUnarchiveThreadStoredProcedure","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t=o("react-compiler-runtime").c(2),n=(e||(e=r("useReStore")))(),a;return t[0]!==n?(a=function(t){r("promiseDone")(n.runInTransaction(function(e){return r("LSOptimisticUnarchiveThreadStoredProcedure")(r("LSFactory")(e),{threadKey:t})},"readwrite",void 0,void 0,i.id+":25"))},t[0]=n,t[1]=a):a=t[1],a}l.default=c}),98);
__d("useMWV2StartGroupCall",["I64","Int64Hooks","JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","MWCallingRestrictionDialog.entrypoint","ZenonProductConnectFunnel","getRTCCallStateOfLSRTCCallState","react-compiler-runtime","useMWXEntryPointDialog","useMWXLazyDialog","useRTWebCometStartCallCallback"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n,a){var i=o("react-compiler-runtime").c(12),l=r("useRTWebCometStartCallCallback")(),u;i[0]===Symbol.for("react.memo_cache_sentinel")?(u=r("JSResourceForInteraction")("MWChatRestrictedUserInGroupInterstitialDialog.react").__setRef("useMWV2StartGroupCall"),i[0]=u):u=i[0];var c=r("useMWXLazyDialog")(u),d=c[0],m;i[1]===Symbol.for("react.memo_cache_sentinel")?(m=r("JSResourceForInteraction")("MWGroupCallBlockedUserInGroupInterstitialDialog.react").__setRef("useMWV2StartGroupCall"),i[1]=m):m=i[1];var p=r("useMWXLazyDialog")(m),_=p[0],f;i[2]===Symbol.for("react.memo_cache_sentinel")?(f={},i[2]=f):f=i[2];var g=r("useMWXEntryPointDialog")(r("MWCallingRestrictionDialog.entrypoint"),f),h=g[0],y,C;return i[3]!==n||i[4]!==t||i[5]!==_||i[6]!==h||i[7]!==d||i[8]!==l||i[9]!==a?(y=function(u){var i,c=u.jid,m=u.ongoingCallServerInfoData,p=u.otherParticipantId,f=u.restrictedUsers,g=u.blockedUsers,y=u.partialThread,C=u.hasAppealableMessageSendFeatureLimit,b=f===void 0?[]:f,v=g===void 0?[]:g,S=y.ongoingCallState,R=y.threadKey,L=y.threadType,E=C===void 0?!1:C;t();var k=(i=o("LSMessagingThreadTypeUtil").isGroup(L))!=null?i:!1,I=k&&b.length>0,T=k&&v.length>0,D={existingCall:m!=null?{call_state:r("getRTCCallStateOfLSRTCCallState")((e||(e=o("LSIntEnum"))).unwrapIntEnum(S),(e||(e=o("LSIntEnum"))).unwrapIntEnum(L)),initiator_fbid:null,server_info_data:m}:null,isE2eeMandated:o("LSMessagingThreadTypeUtil").isArmadilloSecure(L),mediaType:n,thread:{e2eeThreadID:c!=null?(s||(s=o("I64"))).to_string(c):void 0,id:(s||(s=o("I64"))).to_string(R),secureOneToOneThreadPeerId:p!=null&&(s||(s=o("I64"))).equal(L,(e||(e=o("LSIntEnum"))).ofNumber(15))?(s||(s=o("I64"))).to_string(p):void 0,type:(e||(e=o("LSIntEnum"))).unwrapIntEnum(L)},trigger:a};return T?_({blockedUsers:v,onContinue:function(){return l(D)},threadKey:R}):I?d({onContinue:function(){return l(D)},restrictedUsers:b}):E?h({trigger:n==="audio"?"in_thread_voice_call":"in_thread_video_call"}):(r("ZenonProductConnectFunnel").setUITriggered(),l(D))},C=[t,n,a,l,_,d,h],i[3]=n,i[4]=t,i[5]=_,i[6]=h,i[7]=d,i[8]=l,i[9]=a,i[10]=y,i[11]=C):(y=i[10],C=i[11]),o("Int64Hooks").useCallbackInt64(y,C)}l.default=u}),98);
__d("useMWReQLStartGroupCall",["Actor","I64","Int64Hooks","LSContactBitOffset","ReQL","promiseDone","react-compiler-runtime","useAsyncReStore","useBlockedUserInterstitial","useMWHasAppealableMessageSendFeatureLimit","useMWV2StartGroupCall"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e,t,n,a){var i=o("react-compiler-runtime").c(9),l=e.ongoingCallState,s=e.threadKey,p=e.threadType,_=r("useAsyncReStore")(),f=o("Actor").useActor(),g=f[0],h=r("useMWV2StartGroupCall")(t,n,a),y=r("useMWHasAppealableMessageSendFeatureLimit")(),C,b;return i[0]!==y||i[1]!==g||i[2]!==_||i[3]!==l||i[4]!==h||i[5]!==s||i[6]!==p?(C=function(){r("promiseDone")(_,async function(e){var t,n=await Promise.all([(t=o("ReQL")).firstAsync(t.fromTableAscending(e.tables.mi_act_mapping_table).getKeyRange(s).map(u)),t.firstAsync(d(e,s,g)),t.firstAsync(m(e,s)),t.toArrayAsync(c(e,s)),t.toArrayAsync(await o("useBlockedUserInterstitial").getBlockedUserQuery(e,s,p)),y()]),r=n[0],a=n[1],i=n[2],_=n[3],f=n[4],C=n[5];h({blockedUsers:f,hasAppealableMessageSendFeatureLimit:C,jid:r,ongoingCallServerInfoData:i,otherParticipantId:a,partialThread:{ongoingCallState:l,threadKey:s,threadType:p},restrictedUsers:_})})},b=[_,s,g,p,y,h,l],i[0]=y,i[1]=g,i[2]=_,i[3]=l,i[4]=h,i[5]=s,i[6]=p,i[7]=C,i[8]=b):(C=i[7],b=i[8]),o("Int64Hooks").useCallbackInt64(C,b)}function u(e){return e.jid}var c=function(t,n){return o("ReQL").mergeJoin(o("ReQL").fromTableAscending(t.tables.participants).getKeyRange(n).take(20),o("ReQL").fromTableAscending(t.tables.contacts)).filter(function(e){var t,n=e[0],r=e[1];return(t=o("LSContactBitOffset").has(66,r))!=null?t:!1}).map(function(e){var t=e[0],n=e[1];return n})},d=function(n,r,a){return o("ReQL").fromTableAscending(n.tables.participants).getKeyRange(r).filter(function(t){return!(e||(e=o("I64"))).equal(t.contactId,e.of_string(a))}).map(function(e){return e.contactId})},m=function(t,n){return o("ReQL").fromTableAscending(t.tables.rtc_ongoing_calls_on_threads_v2).getKeyRange(n).map(function(e){return e.ongoingCallServerInfoData})};l.default=s}),98);
__d("useShowPersistentGenAIFeedbackButtons",["ReQL","ReQLSuspense","react-compiler-runtime","useGenAIFeedbackSubmissionStatus","useIsGenAiFeedbackEnabled","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,a){var l=o("react-compiler-runtime").c(6),s=(e||(e=r("useReStore")))(),u=r("useIsGenAiFeedbackEnabled")(n,a),c;l[0]!==s.tables.messages||l[1]!==t?(c=function(){return o("ReQL").fromTableDescending(s.tables.messages.index("threadKeyPrimarySortKeySecondarySortKeyBotResponseId"),["botResponseId"]).getKeyRange(t)},l[0]=s.tables.messages,l[1]=t,l[2]=c):c=l[2];var d;l[3]!==s||l[4]!==t?(d=[s,t],l[3]=s,l[4]=t,l[5]=d):d=l[5];var m=o("ReQLSuspense").useFirst(c,d,i.id+":43"),p=r("useGenAIFeedbackSubmissionStatus")(n);return u&&(m==null?void 0:m.botResponseId)===n&&p==null}l.default=s}),98);/*FB_PKG_DELIM*/
__d("AddOnStartOverride.react",["react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","xstyle"],s,u,c=u||(u=o("react"));function d(t){var n=o("react-compiler-runtime").c(10),a,i,l;n[0]!==t?(a=t.ref,l=t.xstyle,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var u;n[4]!==l?(u=(s||(s=r("stylex"))).props(l),n[4]=l,n[5]=u):u=n[5];var d;return n[6]!==a||n[7]!==i||n[8]!==u?(d=c.jsx("div",babelHelpers.extends({},i,{ref:a},u)),n[6]=a,n[7]=i,n[8]=u,n[9]=d):d=n[9],d}l.default=d}),98);
__d("FDSCheckmarkFilled24Icon",["cr:13975"],(function(t,n,r,o,a,i,l){"use strict";l.default=n("cr:13975")}),98);
__d("GroupsCometChatsChannelInviteLinkQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="30001991716058719"}),null);
__d("GroupsCometChatsChannelInviteLinkQuery$Parameters",["GroupsCometChatsChannelInviteLinkQuery_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e={kind:"PreloadableConcreteRequest",params:{id:n("GroupsCometChatsChannelInviteLinkQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometChatsChannelInviteLinkQuery",operationKind:"query",text:null}};a.exports=e}),null);
__d("GroupsCometChatsChannelInviteLink.entrypoint",["GroupsCometChatsChannelInviteLinkQuery$Parameters","JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){var e=t.threadID;return{queries:{queryReference:{parameters:r("GroupsCometChatsChannelInviteLinkQuery$Parameters"),variables:{threadID:e}}}}},root:r("JSResourceForInteraction")("GroupsCometChatsChannelInviteLink.react").__setRef("GroupsCometChatsChannelInviteLink.entrypoint")};l.default=e}),98);
__d("LSLocalOptimisticDeleteCommunityChannel",["LSDeleteThread","LSGetViewerFBID","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(r){return t.storedProcedure(n("LSDeleteThread"),e[0],!1)},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[0]=t[0],t})},function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[1]=t.i64.cast([0,1]):(n=a.item,r[7]=n.syncGroup,t.i64.neq(r[7],void 0)?r[6]=r[7]:r[6]=t.i64.cast([0,1]),r[1]=r[6])})},function(o){return r[3]=new t.Map,r[3].set("thread_key",e[0]),r[3].set("actor_id",r[0]),r[3].set("sync_group",r[1]),r[4]=r[3].get("actor_id"),r[5]=t.toJSON(r[3]),t.storedProcedure(n("LSIssueNewTask"),t.i64.to_string(r[4]),t.i64.cast([0,366]),r[5],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalOptimisticDeleteCommunityChannelStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSLocalOptimisticDeleteCommunityChannelStoredProcedure",["LSLocalOptimisticDeleteCommunityChannel","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSLocalOptimisticDeleteCommunityChannel"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSLocalOptimisticDeleteDiscoverableChat",["LSDeleteThread","LSGetViewerFBID","LSIssueNewTask"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(n){return t.db.table(9).fetch([[[e[0]]]]).next().then(function(e,n){var o=e.done,a=e.value;return o?r[0]=t.i64.cast([0,1]):(n=a.item,r[6]=n.syncGroup,t.i64.neq(r[6],void 0)?r[5]=r[6]:r[5]=t.i64.cast([0,1]),r[0]=r[5])})},function(r){return t.storedProcedure(n("LSDeleteThread"),e[0],!1)},function(e){return t.storedProcedure(n("LSGetViewerFBID")).then(function(e){var t;return t=e,r[2]=t[0],t})},function(o){return r[3]=new t.Map,r[3].set("thread_key",e[0]),r[3].set("actor_id",r[2]),r[3].set("sync_group",r[0]),r[4]=t.toJSON(r[3]),t.storedProcedure(n("LSIssueNewTask"),"expr_delete_public_chat",t.i64.cast([0,110004]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxLocalOptimisticDeleteDiscoverableChatStoredProcedure",e.__tables__=["threads"],a.exports=e}),null);
__d("LSLocalOptimisticDeleteDiscoverableChatStoredProcedure",["LSLocalOptimisticDeleteDiscoverableChat","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSLocalOptimisticDeleteDiscoverableChat"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("LSReportCommunityChannel",["LSIssueNewError","LSIssueNewTaskWithExtraOperations","LSLocalize"],(function(t,n,r,o,a,i){function e(){var e=arguments,t=e[e.length-1],r=[],o=[];return t.sequence([function(o){return t.sequence([function(e){return t.sortBy(t.db.table(115).fetch(),[["timestampMs","DESC"]]).next().then(function(e,t){var n=e.done,o=e.value;return n?r[0]=!1:(t=o.item,r[0]=t.errorShouldBeShown)})},function(e){return r[0]===!0?t.sequence([function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,2285622730]),void 0).then(function(e){return r[5]=e})},function(e){return n("LSLocalize").localizeV2Async(t.i64.cast([0,1919524925]),void 0).then(function(e){return r[6]=e})},function(e){return t.storedProcedure(n("LSIssueNewError"),void 0,t.i64.cast([0,1545093]),r[5],r[6],void 0,void 0)}]):t.resolve()},function(o){return r[2]=new t.Map,r[2].set("thread_key",e[0]),r[3]=r[2].get("thread_key"),r[4]=t.toJSON(r[2]),t.storedProcedure(n("LSIssueNewTaskWithExtraOperations"),t.i64.to_string(r[3]),t.i64.cast([0,371]),r[4],void 0,void 0,t.i64.cast([0,0]),t.i64.cast([0,0]),void 0,void 0,t.i64.cast([0,0]),void 0,t.i64.cast([0,0]))}])},function(e){return t.resolve(o)}])}e.__sproc_name__="LSMailboxReportCommunityChannelStoredProcedure",e.__tables__=["user_visible_network_connectivity_error"],a.exports=e}),null);
__d("LSReportCommunityChannelStoredProcedure",["LSReportCommunityChannel","LSSynchronousPromise","Promise","cr:8709"],(function(t,n,r,o,a,i,l){var e;function s(t,a){var i=t.storedProcedure(r("LSReportCommunityChannel"),a.threadKey);return(e||(e=n("Promise"))).resolve(o("LSSynchronousPromise").maybeExtractValueIfSynchronousPromise(i))}l.default=s}),98);
__d("MAWEndToEndEncryptionKeysDialog.entrypoint",["JSResourceForInteraction"],(function(t,n,r,o,a,i,l){"use strict";var e={getPreloadProps:function(t){return{queries:{}}},root:r("JSResourceForInteraction")("MAWEndToEndEncryptionKeysDialog.react").__setRef("MAWEndToEndEncryptionKeysDialog.entrypoint")};l.default=e}),98);
__d("MAWRemoveGroupParticipantsUtils",["fbt","I64","LSFactory","LSIntEnum","LSIssueNewErrorStoredProcedure","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MAWBridgeSendAndReceive","MAWJobDefinitions","MAWTimedJob","Promise","ReQL","WAJids","WAJobOrchestratorTypes","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c;function d(t,a,l){return function(d){return t.runInTransaction(function(t){return o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.mi_act_mapping_table).getKeyRange(a)).then(function(i){if(i==null)return(c||(c=n("Promise"))).resolve();var m=(e||(e=o("I64"))).to_string(i.jid),p=o("WAJids").toGroupJid(m),_;return r("gkx")("1800")?_=o("MAWBridgeSendAndReceive").sendAndReceive("backend","removeGroupParticipants",{group:p,users:[(e||(e=o("I64"))).to_string(d)]}):_=o("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(o("MAWJobDefinitions").jobSerializers.removeGroupParticipants(p,[(e||(e=o("I64"))).to_string(d)],{priority:o("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION})),_.then(function(e){if(e.success)return l?r("LSOptimisticRemoveThreadStoredProcedure")(r("LSFactory")(t),{removeType:(u||(u=o("LSIntEnum"))).ofNumber(r("LSThreadRemoveType").ARCHIVE_THREAD),threadKey:a}):(c||(c=n("Promise"))).resolve();var i=s._(/*BTDS*/"Couldn't remove member from group").toString();return r("LSIssueNewErrorStoredProcedure")(r("LSFactory")(t),{errorBodyText:i,errorTitleText:i})})})},"readwrite",void 0,void 0,i.id+":38")}}function m(e,t){return d(e,t,!1)}function p(e,t){return d(e,t,!1)}function _(e,t){return d(e,t,!0)}l.createRemoveParticipantCallbackFromThreadKey=m,l.createRemoveParticipantCallback=p,l.createLeaveGroupCallback=_}),226);
__d("MDSList.react",["BaseList.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(6),a,i;n[0]!==t?(a=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;return n[3]!==a||n[4]!==i?(l=u.jsx(r("BaseList.react"),babelHelpers.extends({ref:a},i)),n[3]=a,n[4]=i,n[5]=l):l=n[5],l}var d=c;l.default=d}),98);
__d("MDSMultiStepDialogClosingHeader.react",["FDSMultiStepDialogCloseContext","MDSDialogHeader.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(3),n=u(r("FDSMultiStepDialogCloseContext")),a;return t[0]!==n||t[1]!==e?(a=s.jsx(r("MDSDialogHeader.react"),babelHelpers.extends({},e,{onClose:n})),t[0]=n,t[1]=e,t[2]=a):a=t[2],a}l.default=c}),98);
__d("MDSMultiStepDialogPushPageProvider.react",["BaseHeadingContextWrapper.react","CometHideLayerOnEscape.react","FDSMultiStepDialogCloseContext","FDSMultiStepDialogPushPageContext.react","MDSMultiStepDialogClosingHeader.react","emptyFunction","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useEffect,m=u.useId,p=u.useMemo,_=u.useState;function f(e){var t=e.children,n=e.pushAriaProps,a=e.pushPageBase,l=e.buttonType,u=e.closeButtonTestId,f=e.onClose,g=f===void 0?r("emptyFunction"):f,h=e.withCloseButton,y=h===void 0?!1:h,C=p(function(){function e(e){var t,o=e.children,a=e.initialTitle,i=a===void 0?null:a,c=e.labelledBy,p=e.onBack,f=e.onCloseButtonPress,h=e.onReturn,C=e.withoutBackButton,b=C===void 0?!1:C,v=e.withoutCloseButton,S=v===void 0?!1:v,R=_(i),L=R[0],E=R[1],k=m(),I=c!=null?c:k,T=s.jsx(r("MDSMultiStepDialogClosingHeader.react"),{backButtonType:l,closeButtonTestId:u,closeButtonType:l,id:I,onBack:p?p(h):h,title:L,withBackButton:!b,withCloseButton:S?!1:y});return d(function(){return n(typeof L=="string"?{title:L}:{labelledBy:I})},[I,L]),s.jsxs(r("CometHideLayerOnEscape.react"),{onHide:b?r("emptyFunction"):(t=p==null?void 0:p(h))!=null?t:h,children:[f!=null?s.jsx(r("FDSMultiStepDialogCloseContext").Provider,{value:f(g),children:T}):T,s.jsx(r("BaseHeadingContextWrapper.react"),{children:o(E)})]})}return e.displayName=e.name+" [from "+i.id+"]",e},[l,u,g,y,n]),b=c(function(e,t){var n=t===void 0?{}:t,r=n.labelledBy,i=n.onBack,l=n.title,u=n.withoutBackButton,c=u===void 0?!1:u,d=n.withoutCloseButton,m=d===void 0?!1:d;a(function(t){var n=t.onReturn;return s.jsx(o("FDSMultiStepDialogPushPageContext.react").FDSMultiStepDialogPushPageContext.Provider,{value:b,children:s.jsx(C,{initialTitle:l,labelledBy:r,onBack:i,onReturn:n,withoutBackButton:c,withoutCloseButton:m,children:function(r){return s.jsx(e,{onReturn:n,setTitle:r})}})})})},[C,a]);return s.jsx(o("FDSMultiStepDialogPushPageContext.react").FDSMultiStepDialogPushPageContext.Provider,{value:b,children:t(b)})}f.displayName=f.name+" [from "+i.id+"]",l.default=f}),98);
__d("useAXLabelForMultiStepDialog",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useMemo,d=s.useState,m={"aria-label":void 0,labelledBy:void 0,title:void 0};function p(e,t){var n=o("react-compiler-runtime").c(7),r;n[0]!==t?(r=[t],n[0]=t,n[1]=r):r=n[1];var a=d(r),i=a[0],l=a[1],s=i[e],u;n[2]===Symbol.for("react.memo_cache_sentinel")?(u=function(t){var e=babelHelpers.extends({},m,t);l(function(t){return[].concat(t,[e])});var n=function(){l(function(t){return t.filter(function(t){return t!==e})})};return n},n[2]=u):u=n[2];var c=u,p;n[3]!==s?(p=s!=null?s:{},n[3]=s,n[4]=p):p=n[4];var _;return n[5]!==p?(_={ariaProps:p,pushAriaProps:c},n[5]=p,n[6]=_):_=n[6],_}l.useAXLabelForMultiStepDialog=p}),98);
__d("MDSMultiStepDialog.react",["BaseHeadingContextWrapper.react","BaseMultiStepContainer.react","FBLogger","FDSMultiStepDialogCloseContext","MDSDialogContainerLegacy.react","MDSDialogPageLoadingState.react","MDSMultiStepDialogClosingHeader.react","MDSMultiStepDialogPushPageProvider.react","emptyFunction","react","react-compiler-runtime","useAXLabelForMultiStepDialog","useIsCometOnMobile"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","buttonType","children","closeButtonTestId","onClose","onPageChange","size","title","withCloseButton","fallback"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useState;function p(t){var n=o("react-compiler-runtime").c(44),a,i,l,s,c,d,p,_,f,g,h;n[0]!==t?(c=t.ref,a=t.buttonType,i=t.children,p=t.closeButtonTestId,_=t.onClose,d=t.onPageChange,f=t.size,h=t.title,g=t.withCloseButton,s=t.fallback,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d,n[7]=p,n[8]=_,n[9]=f,n[10]=g,n[11]=h):(a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6],p=n[7],_=n[8],f=n[9],g=n[10],h=n[11]);var y=p===void 0?"close-button":p,C=_===void 0?r("emptyFunction"):_,b=f===void 0?"small":f,v=g===void 0?!1:g,S=r("useIsCometOnMobile")(),R=b==="content-mobile-safe"&&!S?"content":b;v===!0&&C==null&&r("FBLogger")("messenger_comet").mustfix("MDSMultiStepDialog: withCloseButton is set to true without being provided an onClose handler. Please provide an onClose handler, or set withCloseButton to false");var L=m(0),E=L[0],k=L[1],I=l["aria-label"],T;n[12]!==l.labelledBy||n[13]!==I||n[14]!==h?(T={"aria-label":I,labelledBy:l.labelledBy,title:h},n[12]=l.labelledBy,n[13]=I,n[14]=h,n[15]=T):T=n[15];var D=o("useAXLabelForMultiStepDialog").useAXLabelForMultiStepDialog(E,T),x=D.ariaProps,$=D.pushAriaProps,P;n[16]!==d?(P=function(t){k(t),d==null||d(t)},n[16]=d,n[17]=P):P=n[17];var N=P,M;n[18]!==s?(M=s!=null?s:u.jsx(r("MDSDialogPageLoadingState.react"),{}),n[18]=s,n[19]=M):M=n[19];var w=R==="content",A;n[20]!==a||n[21]!==i||n[22]!==y||n[23]!==C||n[24]!==$||n[25]!==h||n[26]!==v?(A=function(t){return u.jsxs(u.Fragment,{children:[u.jsx(r("MDSMultiStepDialogClosingHeader.react"),{backButtonType:a,closeButtonTestId:y,closeButtonType:a,title:h,withBackButton:!1,withCloseButton:v}),u.jsx(r("BaseHeadingContextWrapper.react"),{children:u.jsx(r("MDSMultiStepDialogPushPageProvider.react"),{buttonType:a,closeButtonTestId:y,onClose:C,pushAriaProps:$,pushPageBase:t,withCloseButton:v,children:i})})]})},n[20]=a,n[21]=i,n[22]=y,n[23]=C,n[24]=$,n[25]=h,n[26]=v,n[27]=A):A=n[27];var F;n[28]!==c||n[29]!==N||n[30]!==A||n[31]!==M||n[32]!==w?(F=u.jsx(r("BaseMultiStepContainer.react"),{fallback:M,fitContentWidth:w,onPageChange:N,ref:c,children:A}),n[28]=c,n[29]=N,n[30]=A,n[31]=M,n[32]=w,n[33]=F):F=n[33];var O;n[34]!==C||n[35]!==F?(O=u.jsx(r("FDSMultiStepDialogCloseContext").Provider,{value:C,children:F}),n[34]=C,n[35]=F,n[36]=O):O=n[36];var B;return n[37]!==x||n[38]!==l||n[39]!==C||n[40]!==b||n[41]!==O||n[42]!==h?(B=u.jsx(r("MDSDialogContainerLegacy.react"),babelHelpers.extends({onClose:C,size:b,title:h},l,x,{children:O})),n[37]=x,n[38]=l,n[39]=C,n[40]=b,n[41]=O,n[42]=h,n[43]=B):B=n[43],B}l.default=p}),98);
__d("MWBReportingLogger",["QuickPerformanceLogger","qpl"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("qpl")._(190461e3,"3093");function u(t){(e||(e=r("QuickPerformanceLogger"))).markerStart(s),e.markerAnnotate(s,{string:{entrypoint:t}})}function c(t,n){(e||(e=r("QuickPerformanceLogger"))).markerAnnotate(s,{string:babelHelpers.extends({step:t},n!=null?{selected_tag:String(n)}:{})})}function d(t){(e||(e=r("QuickPerformanceLogger"))).markerEnd(s,t?2:3)}l.logReportingStart=u,l.logReportingStep=c,l.logReportingEnd=d}),98);
__d("MWBlockUtils",["FBLogger","LSClearTablesStoredProcedure","LSFactory","Promise","promiseDone","react","react-compiler-runtime","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t=o("react-compiler-runtime").c(2),a=r("useAsyncReStore")(),i;return t[0]!==a?(i=function(){(e||(e=n("Promise"))).resolve(a).then(m).catch(d)},t[0]=a,t[1]=i):i=t[1],i}function d(e){return r("FBLogger")("search").warn("Error occurred while clearing search tables",e)}function m(e){r("promiseDone")(e.runInTransaction(p,"readwrite",void 0,void 0,i.id+":26"))}function p(e){return r("LSClearTablesStoredProcedure")(r("LSFactory")(e))}l.useClearSearchTables=c}),98);
__d("MWCMChannelLinkShareTrigger.react",["GroupsCometChatsChannelInviteLink.entrypoint","I64","react","react-compiler-runtime","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(9),n=e.children,a=e.threadKey,i;t[0]!==a?(i=(s||(s=o("I64"))).to_string(a),t[0]=a,t[1]=i):i=t[1];var l;t[2]!==i?(l={threadID:i},t[2]=i,t[3]=l):l=t[3];var u=r("useMWXEntryPointDialog")(r("GroupsCometChatsChannelInviteLink.entrypoint"),l),c=u[0],d;t[4]!==c?(d=function(){return c({})},t[4]=c,t[5]=d):d=t[5];var m;return t[6]!==n||t[7]!==d?(m=n(d),t[6]=n,t[7]=d,t[8]=m):m=t[8],m}l.default=c}),98);
__d("MWCMPauseChatLogger",["$InternalEnum","I64","gkx","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=r("requireDeferred")("GroupsCometChatsEngagementLoggerWithDefaultExport").__setRef("MWCMPauseChatLogger"),u=n("$InternalEnum")({INBOX:"messenger_dot_com",CHAT_TAB:"comet_www_chat",COMET_INBOX:"comet_www_inbox",FULLSCREEN_CHAT:"comet_www_fullscreen_chat"});function c(e){var t=r("gkx")("23433"),n=null;return e!=null&&(e==="Inbox"?n=t?u.INBOX:u.COMET_INBOX:e==="ChatTab"?n=u.CHAT_TAB:e==="FullscreenChat"&&(n=u.FULLSCREEN_CHAT)),n}function d(t){var n=t.action,r=t.clientExtras,a=t.displayContext,i=t.event,l=t.parentSurface,u=t.source,d=t.surface,m=t.threadId,p=c(a);s.onReady(function(t){return t.log({action:n,client_extras:p!=null?babelHelpers.extends({},r,{entry_point:p}):babelHelpers.extends({},r),event:i,parent_surface:l,source:u,surface:d,thread_id:(e||(e=o("I64"))).to_string(m)})})}l.getEntrypoint=c,l.logPauseEvent=d}),98);
__d("MWChatEncryptedBackupOnCloseContext",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(){r("FBLogger")("messenger_web_trust").warn("setOnCloseSkipConfirmation called outside of a provider")}var c=s.createContext({onCloseSkipConfirmation:null,setOnCloseSkipConfirmation:u});l.default=c}),98);
__d("MWChatEncryptedBackupResetContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({isEncryptedBackupResetStartedRef:null,isEncryptedBackupResetUserJourneyStartedRef:null});l.default=u}),98);
__d("MWChatEncryptedBackupsDismissalDialogContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({isDismissedDisabled:!1,setIsDismissedDisabled:function(){}});l.default=u}),98);
__d("MWChatEncryptedBackupsSetIsDialogPersistedContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({setIsDialogPersisted:function(){}});l.default=u}),98);
__d("MWDialogContentTypeValues",["gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=r("gkx")("23219")?4:3,s=r("gkx")("23219")?"headlineEmphasized4":"headlineEmphasized2",u=r("gkx")("23219")?"body4":"body3",c=r("gkx")("23219")?"bodyLink4":"bodyLink3",d=r("gkx")("23219")?"meta4":"meta3";l.textPairingLevel=e,l.textHeadlineType=s,l.textBodyType=u,l.textBodyLinkType=c,l.textMetaType=d}),98);
__d("MWEBFlowSourceContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({source:null});l.default=u}),98);
__d("MWEBFlowSourceContextProvider.react",["MWEBFlowSourceContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.source,i;t[0]!==a?(i={source:a},t[0]=a,t[1]=i):i=t[1];var l=i,u;return t[2]!==n||t[3]!==l?(u=s.jsx(r("MWEBFlowSourceContext").Provider,{value:l,children:n}),t[2]=n,t[3]=l,t[4]=u):u=t[4],u}l.default=c}),98);
__d("MWEBHasSeenAutoRestoreNoticeContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({hasSeenNotice:!1});l.default=u}),98);
__d("MWEBHasSeenAutoRestoreNoticeContextProvider.react",["MWEBHasSeenAutoRestoreNoticeContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useMemo;function c(e){var t=o("react-compiler-runtime").c(5),n=e.children,a=e.hasSeenNotice,i;t[0]!==a?(i={hasSeenNotice:a},t[0]=a,t[1]=i):i=t[1];var l=i,u;return t[2]!==n||t[3]!==l?(u=s.jsx(r("MWEBHasSeenAutoRestoreNoticeContext").Provider,{value:l,children:n}),t[2]=n,t[3]=l,t[4]=u):u=t[4],u}l.default=c}),98);
__d("MWEBOTCDialogStepDeferred.react",["deferredLoadComponent","react","react-compiler-runtime","requireDeferredForDisplay"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferredForDisplay")("MWEncryptedBackupsInsertOTCStep.react").__setRef("MWEBOTCDialogStepDeferred.react"));function c(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=s.jsx(u,babelHelpers.extends({},e)),t[0]=e,t[1]=n):n=t[1],n}l.default=c}),98);
__d("MWEBOTCInterstitialIllustration.react",["ix","CometImageFromIXValue.react","gkx","react","react-compiler-runtime","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("gkx")("23433");function d(e){var t=o("react-compiler-runtime").c(7),n=e.alt,a=e.ref,i=e.xstyle,l=r("useCurrentDisplayMode")(),d=l==="dark",m;t[0]!==d?(m=s(c?d?"925480":"925482":"414641"),t[0]=d,t[1]=m):m=t[1];var p=m,_;return t[2]!==n||t[3]!==a||t[4]!==p||t[5]!==i?(_=u.jsx(r("CometImageFromIXValue.react"),{alt:n,ref:a,source:p,xstyle:i}),t[2]=n,t[3]=a,t[4]=p,t[5]=i,t[6]=_):_=t[6],_}l.default=d}),98);
__d("MWEBQPResetPIN.react",["ix","CometImageFromIXValue.react","gkx","react","react-compiler-runtime","useCurrentDisplayMode"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=r("gkx")("23433");function d(e){var t=o("react-compiler-runtime").c(9),n=e.alt,a=e.ref,i=e.xstyle,l=r("useCurrentDisplayMode")(),d=l==="dark",m;t[0]!==d?(m=s(d?"901817":"901819"),t[0]=d,t[1]=m):m=t[1];var p=m,_;t[2]!==p?(_=c?p:s("421459"),t[2]=p,t[3]=_):_=t[3];var f=_,g;return t[4]!==n||t[5]!==a||t[6]!==f||t[7]!==i?(g=u.jsx(r("CometImageFromIXValue.react"),{alt:n,ref:a,source:f,xstyle:i}),t[4]=n,t[5]=a,t[6]=f,t[7]=i,t[8]=g):g=t[8],g}l.default=d}),98);
__d("MWEBVirtualDevicesContext.react",["FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext,c=s.createContext(null);function d(){var e=u(c);if(e==null)throw r("FBLogger")("messenger_web_product").mustfixThrow("useEBVirtualDevices must be used inside MWEBVirtualDevicesContext");return e}l.MWEBVirtualDevicesContext=c,l.useMWEBVirtualDevices=d}),98);
__d("MWEncryptedBackupsForgotRCStep",["deferredLoadComponent","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=r("deferredLoadComponent")(r("requireDeferred")("MWChatEncryptedBackupsGenerateNewRecoveryCodeInstruction.react").__setRef("MWEncryptedBackupsForgotRCStep"));function c(e){var t=e.onClose,n=e.onComplete,r=e.pushPage;r(function(){return s.jsx(u,{onClose:t,onComplete:n,pushPage:r})})}l.pushForgotRCPage=c}),98);
__d("MWEncryptedBackupsOtcRestoreSteps",["MWEBOTCDialogStepDeferred.react","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=e.onClose,n=e.onOtcComplete,o=e.onSkip,a=e.pushPage;a(function(){return s.jsx(r("MWEBOTCDialogStepDeferred.react"),{onClose:t,onComplete:n,onSkip:o,pushPage:a})})}l.pushByOneTimeCodePage=u}),98);
__d("MWWellbeingQPLLogStartAndCancelUtils",["QPLUserFlow","qpl"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n=r("qpl")._(756626838,"231");r("QPLUserFlow").start(n),r("QPLUserFlow").addAnnotations(n,{bool:{is_restricted:e},string:{entry_point:t.toString()}})}function s(){r("QPLUserFlow").endCancel(r("qpl")._(756626838,"231"))}function u(e,t){var n=r("qpl")._(756614954,"380");r("QPLUserFlow").start(n),r("QPLUserFlow").addAnnotations(n,{string:{entry_point:e.toString(),source:t.toString()}})}function c(){r("QPLUserFlow").endCancel(r("qpl")._(756614954,"380"))}l.logRestrictStart=e,l.logRestrictCancel=s,l.logBlockStart=u,l.logBlockCancel=c}),98);
__d("MWInboxInfoBlockMessages.react",["fbt","FBLogger","I64","JSResourceForInteraction","LSContactBlockedByViewerStatus","LSIntEnum","MWPBumpEntityKey","MWWellbeingQPLLogStartAndCancelUtils","ReQL","ReQLSuspense","react","react-compiler-runtime","useMWXLazyDialog","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=d||(d=o("react")),p=r("JSResourceForInteraction")("MWChatBlockActionDialog.react").__setRef("MWInboxInfoBlockMessages.react"),_=r("JSResourceForInteraction")("MWChatMutualBlockPreventionDialog.react").__setRef("MWInboxInfoBlockMessages.react");function f(t){var n=o("react-compiler-runtime").c(32),a=t.children,l=t.contactId,d=t.loggingEntryPoint,m=t.loggingSource,f=t.loggingSourceOwner,y=t.thread,C=(e||(e=r("useReStore")))(),b;n[0]!==l||n[1]!==C.tables.contacts?(b=function(){return o("ReQL").fromTableAscending(C.tables.contacts,["blockedByViewerStatus","name"]).getKeyRange(l)},n[0]=l,n[1]=C.tables.contacts,n[2]=b):b=n[2];var v;n[3]!==l||n[4]!==C?(v=[C,l],n[3]=l,n[4]=C,n[5]=v):v=n[5];var S=o("ReQLSuspense").useFirst(b,v,i.id+":51"),R,L;n[6]!==l||n[7]!==C.tables.supervision_edge?(R=function(){return o("ReQL").fromTableAscending(C.tables.supervision_edge,["targetUserType"]).getKeyRange(l)},L=[l,C.tables.supervision_edge],n[6]=l,n[7]=C.tables.supervision_edge,n[8]=R,n[9]=L):(R=n[8],L=n[9]);var E=o("ReQLSuspense").useFirst(R,L,i.id+":59"),k=r("useMWXLazyDialog")(_),I=k[0],T;n[10]!==(S==null?void 0:S.name)||n[11]!==l||n[12]!==d||n[13]!==m||n[14]!==f||n[15]!==I||n[16]!==(E==null?void 0:E.targetUserType)||n[17]!==y?(T=function(){var e=S==null?void 0:S.name,t=E==null?void 0:E.targetUserType;if(t==null||e==null)throw r("FBLogger")("messenger_web").mustfixThrow("invalid target user supervision type or user name");return I({loggingEntryPoint:d,loggingSource:m,loggingSourceOwner:f,name:e,otherUserId:l,supervisionType:t,threadKey:y.threadKey},h)},n[10]=S==null?void 0:S.name,n[11]=l,n[12]=d,n[13]=m,n[14]=f,n[15]=I,n[16]=E==null?void 0:E.targetUserType,n[17]=y,n[18]=T):T=n[18];var D=T,x=r("useMWXLazyDialog")(p),$=x[0],P;n[19]!==l||n[20]!==d||n[21]!==m||n[22]!==f||n[23]!==$||n[24]!==y?(P=function(){o("MWWellbeingQPLLogStartAndCancelUtils").logBlockStart(d,m),o("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_wellbeing","block_click");var e={loggingData:{entryPoint:d,requestId:void 0,source:m,sourceOwner:f},targetFBID:(u||(u=o("I64"))).to_string(l),thread:y};return $(e,g)},n[19]=l,n[20]=d,n[21]=m,n[22]=f,n[23]=$,n[24]=y,n[25]=P):P=n[25];var N=P;if(S==null)return null;var M;if(n[26]!==S||n[27]!==a||n[28]!==D||n[29]!==N||n[30]!==E){var w=S!=null?(u||(u=o("I64"))).equal(S.blockedByViewerStatus,(c||(c=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED)):!1,A=S!=null?(u||(u=o("I64"))).equal(S.blockedByViewerStatus,(c||(c=o("LSIntEnum"))).ofNumber(r("LSContactBlockedByViewerStatus").FULLY_BLOCKED)):!1,F=w||A?s._(/*BTDS*/"Unblock"):s._(/*BTDS*/"Block"),O=E!=null?D:N;M=a(O,F,A||w),n[26]=S,n[27]=a,n[28]=D,n[29]=N,n[30]=E,n[31]=M}else M=n[31];return M}function g(){}function h(){}l.default=f}),226);
__d("MWLSThreadCapabilities",["I64","LSBitOffset","LSIntEnum","LSThreadBitOffset","MWThreadKey.react","ReQL","ReQLSuspense","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=(c=o("LSBitOffset")).set((u||(u=o("LSIntEnum"))).ofNumber(38),o("LSBitOffset").set(u.ofNumber(30),o("LSBitOffset").set(u.ofNumber(10),o("LSBitOffset").set(u.ofNumber(25),o("LSBitOffset").set(u.ofNumber(24),o("LSBitOffset").set(u.ofNumber(23),o("LSBitOffset").set(u.ofNumber(20),o("LSBitOffset").set(u.ofNumber(18),o("LSBitOffset").set(u.ofNumber(15),o("LSBitOffset").set(u.ofNumber(14),o("LSBitOffset").set(u.ofNumber(8),o("LSBitOffset").set(u.ofNumber(55),o("LSBitOffset").set(u.ofNumber(4),o("LSBitOffset").set(u.ofNumber(3),o("LSBitOffset").set(u.ofNumber(2),o("LSBitOffset").set(u.ofNumber(1),o("LSBitOffset").set(u.ofNumber(0),o("LSBitOffset").empty))))))))))))))))),m={capabilities:d,capabilities2:o("LSBitOffset").empty,capabilities3:o("LSBitOffset").empty,capabilities4:o("LSBitOffset").empty,capabilities5:o("LSBitOffset").empty};function p(){var t=o("react-compiler-runtime").c(10),n=(e||(e=r("useReStore")))(),a=o("MWThreadKey.react").useMWThreadKeyMemoized(),l,s;t[0]!==n||t[1]!==a?(l=function(){return a!=null?o("ReQL").fromTableAscending(n.tables.threads,o("LSThreadBitOffset").threadCapabilityFields).getKeyRange(a):o("ReQL").empty()},s=[a,n],t[0]=n,t[1]=a,t[2]=l,t[3]=s):(l=t[2],s=t[3]);var u=o("ReQLSuspense").useFirst(l,s,i.id+":126");if(u!=null){var c=u.capabilities,d=u.capabilities2,p=u.capabilities3,_=u.capabilities4,f=u.capabilities5,g;return t[4]!==c||t[5]!==d||t[6]!==p||t[7]!==_||t[8]!==f?(g={capabilities:c,capabilities2:d,capabilities3:p,capabilities4:_,capabilities5:f},t[4]=c,t[5]=d,t[6]=p,t[7]=_,t[8]=f,t[9]=g):g=t[9],g}return m}function _(e,t){var n=(s||(s=o("I64"))).ge(e,(s||(s=o("I64"))).of_string("64"))?(s||(s=o("I64"))).mod_(e,(s||(s=o("I64"))).of_string("64")):e,r=(s||(s=o("I64"))).lsl_(s.one,s.to_int32(n));return s.equal(s.and_(t,r),r)}function f(e){var t=e.capabilities2;return _((u||(u=o("LSIntEnum"))).ofNumber(88),t)}function g(e){var t=e.capabilities2;return _((u||(u=o("LSIntEnum"))).ofNumber(172),t)}function h(e){var t=e.capabilities4;return _((u||(u=o("LSIntEnum"))).ofNumber(238),t)}function y(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(7),t)}function C(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(9),t)}function b(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(6),t)}function v(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(35),t)}function S(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(24),t)}function R(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(25),t)}function L(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(27),t)}function E(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(60),t)}function k(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(32),t)}function I(e){var t=e.capabilities2;return _((u||(u=o("LSIntEnum"))).ofNumber(95),t)}function T(e){var t=e.capabilities;return _((u||(u=o("LSIntEnum"))).ofNumber(19),t)}function D(e){var t=e.capabilities2;return _((u||(u=o("LSIntEnum"))).ofNumber(85),t)}function x(e){var t=e.capabilities2;return _((u||(u=o("LSIntEnum"))).ofNumber(108),t)}function $(e){var t=e.capabilities2;return _((u||(u=o("LSIntEnum"))).ofNumber(74),t)}function P(){var e=o("react-compiler-runtime").c(2),t=p(),n;return e[0]!==t?(n=E(t),e[0]=t,e[1]=n):n=e[1],n}l.useCapabilities=p,l.canReportChatToAdmin=f,l.canPinMessage=g,l.canSwitchVoice=h,l.canCustomizeEmoji=y,l.canCustomizeNicknames=C,l.canCustomizeTheme=b,l.canCreateGroup=v,l.canRtcVideoCall=S,l.canRtcVoiceCall=R,l.canAddMember=L,l.canCustomizeThreadName=E,l.canIgnoreMessages=k,l.canSeeSharedLinks=I,l.canMuteThread=T,l.canRestrict=D,l.canCopyInviteLink=x,l.canDeleteThread=$,l.useCanCustomizeThreadNameCapability=P}),98);
__d("MWQPLLogUtils",["QPLUserFlow","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useRef,u=1e4;function c(e,t){var n=o("react-compiler-runtime").c(2),r=d(e,t),a=r.hasLoggedSuccess,i=r.logFunc,l=m(e),s=l.hasLoggedFailure,u=l.logFail,c=p(i,u,a,s),_;return n[0]!==c?(_=function(){c()},n[0]=c,n[1]=_):_=n[1],_}function d(e,t){var n=s(!1),o=function(){n.current===!1&&(r("QPLUserFlow").endSuccess(e),n.current=!0)},a=t(o);return{hasLoggedSuccess:n,logFunc:a}}function m(e){var t=o("react-compiler-runtime").c(2),n=s(!1),a;if(t[0]!==e){var i=function(){r("QPLUserFlow").endFailure(e,"failed"),n.current=!0};a={hasLoggedFailure:n,logFail:i},t[0]=e,t[1]=a}else a=t[1];return a}function p(e,t,n,r){var a=o("react-compiler-runtime").c(5),i;return a[0]!==r||a[1]!==t||a[2]!==e||a[3]!==n?(i=function(){e(),window.setTimeout(function(){n.current===!1&&r.current===!1&&t()},u)},a[0]=r,a[1]=t,a[2]=e,a[3]=n,a[4]=i):i=a[4],i}l.useLogEnd=c}),98);
__d("MWWellbeingQPLLogEndUtils",["I64","LSContactBitOffset","LSContactBlockedByViewerStatus","MWQPLLogUtils","QPLUserFlow","ReQL","qpl","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(e){var t=o("react-compiler-runtime").c(4),n=(s||(s=r("useReStore")))(),a;t[0]!==e||t[1]!==n.tables.contacts?(a=function(r){return(function(){o("ReQL").fromTableAscending(n.tables.contacts).getKeyRange(e).subscribe(function(e,t){t.operation==="put"&&o("LSContactBitOffset").has(66,t.value)&&r()})})},t[0]=e,t[1]=n.tables.contacts,t[2]=a):a=t[2];var i=a,l;return t[3]===Symbol.for("react.memo_cache_sentinel")?(l=r("qpl")._(756626838,"231"),t[3]=l):l=t[3],o("MWQPLLogUtils").useLogEnd(l,i)}function c(t,n){var a=o("react-compiler-runtime").c(6),i;a[0]!==n?(i=r("qpl")._(756614954,"380"),r("QPLUserFlow").addAnnotations(i,{bool:{is_blocked:n}}),a[0]=n,a[1]=i):i=a[1];var l=(s||(s=r("useReStore")))(),u;a[2]!==t||a[3]!==l.tables.contacts||a[4]!==n?(u=function(i){return(function(){o("ReQL").fromTableAscending(l.tables.contacts).getKeyRange(t).subscribe(function(t,a){if(a.operation==="put"){var l=n&&(e||(e=o("I64"))).equal(a.value.blockedByViewerStatus,(e||(e=o("I64"))).of_int32(r("LSContactBlockedByViewerStatus").UNBLOCKED)),s=!n&&((e||(e=o("I64"))).equal(a.value.blockedByViewerStatus,(e||(e=o("I64"))).of_int32(r("LSContactBlockedByViewerStatus").MESSAGE_BLOCKED))||(e||(e=o("I64"))).equal(a.value.blockedByViewerStatus,(e||(e=o("I64"))).of_int32(r("LSContactBlockedByViewerStatus").FULLY_BLOCKED)));(l||s)&&i()}})})},a[2]=t,a[3]=l.tables.contacts,a[4]=n,a[5]=u):u=a[5];var c=u;return o("MWQPLLogUtils").useLogEnd(i,c)}l.useLogRestrictEnd=u,l.useLogBlockEnd=c}),98);
__d("MWXDialogPage.react",["cr:2384","cr:6810","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","hasTextOnlyContent"],s=["scrollAreaFocusProps"],u,c=u||(u=o("react")),d={cometPageContent:{paddingBottom:"xwib8y2",paddingInlineEnd:"xv54qhq",paddingInlineStart:"xf7dkkf",$$css:!0}};function m(t){var r=o("react-compiler-runtime").c(16),a,i,l;if(r[0]!==t?(i=t.children,l=t.hasTextOnlyContent,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l):(a=r[1],i=r[2],l=r[3]),n("cr:6810")!=null){var u;if(r[4]!==a){var m=a,p=m.scrollAreaFocusProps,_=babelHelpers.objectWithoutPropertiesLoose(m,s);u=_,r[4]=a,r[5]=u}else u=r[5];var f;r[6]===Symbol.for("react.memo_cache_sentinel")?(f=[d.cometPageContent],r[6]=f):f=r[6];var g;r[7]!==i?(g=c.jsx(o("react-strict-dom").html.div,{style:f,children:i}),r[7]=i,r[8]=g):g=r[8];var h;return r[9]!==u||r[10]!==g?(h=c.jsx(n("cr:6810"),babelHelpers.extends({},u,{children:g})),r[9]=u,r[10]=g,r[11]=h):h=r[11],h}if(n("cr:2384")!=null){var y;return r[12]!==a||r[13]!==i||r[14]!==l?(y=c.jsx(n("cr:2384"),babelHelpers.extends({hasTextOnlyContent:l},a,{children:i})),r[12]=a,r[13]=i,r[14]=l,r[15]=y):y=r[15],y}return null}l.default=m}),98);
__d("MWXDialogPageLegacy.react",["cr:6308","cr:6309","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref","callToActionGroupDirection","callToActionGroupLayout","children","includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(19),a,i,l,s,c,d;r[0]!==t?(s=t.ref,c=t.callToActionGroupDirection,a=t.callToActionGroupLayout,i=t.children,d=t.includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION,l=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l,r[4]=s,r[5]=c,r[6]=d):(a=r[1],i=r[2],l=r[3],s=r[4],c=r[5],d=r[6]);var m=c===void 0?"backward":c,p=d===void 0?!0:d;if(n("cr:6308")){var _;return r[7]!==m||r[8]!==a||r[9]!==i||r[10]!==p||r[11]!==l||r[12]!==s?(_=u.jsx(n("cr:6308"),babelHelpers.extends({callToActionGroupDirection:m,callToActionGroupLayout:a,includeFDSContentPadding_REMOVE_THIS_AFTER_CONTENT_PADDING_MIGRATION:p},l,{ref:s,children:i})),r[7]=m,r[8]=a,r[9]=i,r[10]=p,r[11]=l,r[12]=s,r[13]=_):_=r[13],_}if(n("cr:6309")){var f;return r[14]!==m||r[15]!==i||r[16]!==l||r[17]!==s?(f=u.jsx(n("cr:6309"),babelHelpers.extends({callToActionGroupDirection:m,ref:s},l,{children:i})),r[14]=m,r[15]=i,r[16]=l,r[17]=s,r[18]=f):f=r[18],f}return null}l.default=c}),98);
__d("MWXDivider.react",["BaseDivider.react"],(function(t,n,r,o,a,i,l){"use strict";l.default=r("BaseDivider.react")}),98);
__d("MWXIconCalendar",["MWXSvgIcon","SVGIcon","cr:22243","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22243")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconEye",["MWXSvgIcon","SVGIcon","cr:22311","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22311")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconMenuItemLink",["MWXSvgIcon","SVGIcon","cr:22721","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgMenuItemIcon(o("SVGIcon").svgIcon(n("cr:22721")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconMenuItemPauseChat",["MWXSvgIcon","SVGIcon","cr:22754","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgMenuItemIcon(o("SVGIcon").svgIcon(n("cr:22754")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconMenuItemResumeChat",["MWXSvgIcon","SVGIcon","cr:22797","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgMenuItemIcon(o("SVGIcon").svgIcon(n("cr:22797")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconMenuItemTrash",["MWXSvgIcon","SVGIcon","cr:22843","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgMenuItemIcon(o("SVGIcon").svgIcon(n("cr:22843")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconMobile",["MWXSvgIcon","SVGIcon","cr:22406","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22406")),r("gkx")("23219"));l.default=e}),98);
__d("MWXList.react",["cr:6150","cr:6324","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","ref"],s=["aria-label","aria-labelledby","variant"],u,c=u||(u=o("react"));function d(t){var r=o("react-compiler-runtime").c(16),a,i,l;if(r[0]!==t?(i=t.children,l=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l):(a=r[1],i=r[2],l=r[3]),n("cr:6324")!=null){var u=i,d,m;if(r[4]!==a){var p=a,_=p["aria-label"],f=p["aria-labelledby"],g=p.variant,h=babelHelpers.objectWithoutPropertiesLoose(p,s);m=_,d=h,r[4]=a,r[5]=d,r[6]=m}else d=r[5],m=r[6];var y;return r[7]!==u||r[8]!==d||r[9]!==m||r[10]!==l?(y=c.jsx(n("cr:6324"),babelHelpers.extends({},d,{children:u,label:m,ref:l})),r[7]=u,r[8]=d,r[9]=m,r[10]=l,r[11]=y):y=r[11],y}if(n("cr:6150")!=null){var C=i,b;return r[12]!==a||r[13]!==C||r[14]!==l?(b=c.jsx(n("cr:6150"),babelHelpers.extends({},a,{children:C,ref:l})),r[12]=a,r[13]=C,r[14]=l,r[15]=b):b=r[15],b}return null}l.default=d}),98);
__d("MWXListCell.react",["AddOnEndOverride.react","AddOnStartOverride.react","MWXDivider.react","cr:2201","cr:43","react","react-compiler-runtime","xplatToDOMRef"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["addOnBottom","addOnEnd","addOnStart","content","hasBottomDivider","size"],u,c=u||(u=o("react"));function d(t){var a=o("react-compiler-runtime").c(36),i,l;a[0]!==t?(l=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l):(i=a[1],l=a[2]);var u,d,m,p,_,f,g;if(a[3]!==i){var h=i;u=h.addOnBottom,d=h.addOnEnd,m=h.addOnStart,p=h.content,g=h.hasBottomDivider,f=h.size,_=babelHelpers.objectWithoutPropertiesLoose(h,s),a[3]=i,a[4]=u,a[5]=d,a[6]=m,a[7]=p,a[8]=_,a[9]=f,a[10]=g}else u=a[4],d=a[5],m=a[6],p=a[7],_=a[8],f=a[9],g=a[10];var y=g===void 0?!1:g;if(n("cr:43")!=null){var C;a[11]!==d?(C=d!=null?c.jsx(r("AddOnEndOverride.react"),{children:d}):void 0,a[11]=d,a[12]=C):C=a[12];var b;a[13]!==m?(b=m!=null?c.jsx(r("AddOnStartOverride.react"),{children:m}):void 0,a[13]=m,a[14]=b):b=a[14];var v;return a[15]!==u||a[16]!==p||a[17]!==y||a[18]!==l||a[19]!==_||a[20]!==C||a[21]!==b?(v=c.jsx(n("cr:43"),babelHelpers.extends({addOnBottom:u,addOnEnd:C,addOnStart:b,addOnStartMarginTop:0,content:p,contentPaddingHorizontal:8,hasBottomDivider:y,level:4,paddingVertical:8},_,{ref:l})),a[15]=u,a[16]=p,a[17]=y,a[18]=l,a[19]=_,a[20]=C,a[21]=b,a[22]=v):v=a[22],v}if(n("cr:2201")!=null){var S=f!=null?f:"medium",R;a[23]!==y?(R=y?c.jsx(r("MWXDivider.react"),{}):void 0,a[23]=y,a[24]=R):R=a[24];var L;a[25]!==l?(L=o("xplatToDOMRef").xplatToDOMRef(l),a[25]=l,a[26]=L):L=a[26];var E;return a[27]!==u||a[28]!==d||a[29]!==m||a[30]!==p||a[31]!==_||a[32]!==S||a[33]!==R||a[34]!==L?(E=c.jsx(n("cr:2201"),babelHelpers.extends({addOnBottom:u,addOnEnd:d,addOnStart:m,content:p,size:S},_,{addOnFooter:R,ref:L})),a[27]=u,a[28]=d,a[29]=m,a[30]=p,a[31]=_,a[32]=S,a[33]=R,a[34]=L,a[35]=E):E=a[35],E}return null}var m=d;l.default=m}),98);
__d("MWXMultiStepDialogHeader.react",["cr:73","cr:8246","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["buttonType","iconCssSelectorId","withoutBackButton","withoutHeaderBottomBorder"],s,u=s||(s=o("react"));function c(t){var r=o("react-compiler-runtime").c(16),a,i,l,s,c;if(r[0]!==t?(a=t.buttonType,i=t.iconCssSelectorId,s=t.withoutBackButton,c=t.withoutHeaderBottomBorder,l=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i,r[3]=l,r[4]=s,r[5]=c):(a=r[1],i=r[2],l=r[3],s=r[4],c=r[5]),n("cr:8246")){var d;return r[6]!==a||r[7]!==i||r[8]!==l||r[9]!==s||r[10]!==c?(d=u.jsx(n("cr:8246"),babelHelpers.extends({buttonType:a,iconCssSelectorId:i,withoutBackButton:s,withoutHeaderBottomBorder:c},l)),r[6]=a,r[7]=i,r[8]=l,r[9]=s,r[10]=c,r[11]=d):d=r[11],d}if(n("cr:73")){var m=!s,p;return r[12]!==a||r[13]!==l||r[14]!==m?(p=u.jsx(n("cr:73"),babelHelpers.extends({backButtonType:a,closeButtonType:a,withBackButton:m},l)),r[12]=a,r[13]=l,r[14]=m,r[15]=p):p=r[15],p}return null}l.default=c}),98);
__d("MWXMultiStepDialog_DEPRECATED.react",["cr:12314","cr:7741","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["ref"],s=["iconCssSelectorId","withDeprecatedStyles","withoutHeaderBottomBorder"],u,c=u||(u=o("react"));function d(t){var r=o("react-compiler-runtime").c(11),a,i;r[0]!==t?(i=t.ref,a=babelHelpers.objectWithoutPropertiesLoose(t,e),r[0]=t,r[1]=a,r[2]=i):(a=r[1],i=r[2]);var l;if(r[3]!==a){var u=a,d=u.iconCssSelectorId,m=u.withDeprecatedStyles,p=u.withoutHeaderBottomBorder,_=babelHelpers.objectWithoutPropertiesLoose(u,s);l=_,r[3]=a,r[4]=l}else l=r[4];if(n("cr:7741")!=null){var f;return r[5]!==a||r[6]!==i?(f=c.jsx(n("cr:7741"),babelHelpers.extends({},a,{ref:i})),r[5]=a,r[6]=i,r[7]=f):f=r[7],f}if(n("cr:12314")!=null){var g;return r[8]!==l||r[9]!==i?(g=c.jsx(n("cr:12314"),babelHelpers.extends({},l,{ref:i})),r[8]=l,r[9]=i,r[10]=g):g=r[10],g}return null}l.default=d}),98);
__d("MessengerBoxFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M8 7.5a1 1 0 0 0-1 1V10a1 1 0 0 0 1 1h20a1 1 0 0 0 1-1V8.5a1 1 0 0 0-1-1H8z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M9 13.5a.5.5 0 0 1 .5-.5h17a.5.5 0 0 1 .5.5v12a3 3 0 0 1-3 3H12a3 3 0 0 1-3-3v-12zm4.5 3.25c0-.69.56-1.25 1.25-1.25h6.5a1.25 1.25 0 1 1 0 2.5h-6.5c-.69 0-1.25-.56-1.25-1.25z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerCalendarFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M11 7.5a1.5 1.5 0 0 1 3 0V8a.5.5 0 0 0 .5.5h7A.5.5 0 0 0 22 8v-.5a1.5 1.5 0 0 1 3 0V8c0 .276.225.497.499.53A4 4 0 0 1 29 12.5a1 1 0 0 1-1 1H8a1 1 0 0 1-1-1 4 4 0 0 1 3.501-3.97c.274-.033.499-.254.499-.53v-.5zM8 15.5a1 1 0 0 0-1 1v8a4 4 0 0 0 4 4h14a4 4 0 0 0 4-4v-8a1 1 0 0 0-1-1H8z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerChatResumeFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M25.515 14.014c.69.04 1.307-.531 1.122-1.196C25.502 8.734 21.807 6 17 6 11.188 6 7 9.996 7 15.544v.002c0 1.9.376 3.618 1.257 5.056.416.68.513 1.513.265 2.273l-.662 2.191c-.182.558.339 1.08.876.897l3.335-1.024a3.873 3.873 0 0 1 2.172-.081c.223.054.45.1.68.139.66.11 1.173-.515 1.114-1.181a9 9 0 0 1 9.478-9.801z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M32 23a7 7 0 1 1-14 0 7 7 0 0 1 14 0zm-9.625-2.692v5.415c0 .403.424.665.784.485l5.417-2.708c.399-.2.399-.77 0-.969l-5.417-2.707a.542.542 0 0 0-.784.484z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerLeaveFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M21.498 14.75a1 1 0 0 0 1-1V12a4 4 0 0 0-4-4h-6.5a4 4 0 0 0-4 4v12a4 4 0 0 0 4 4h6.5a4 4 0 0 0 4-4v-1.75a1 1 0 0 0-1-1h-.5a1 1 0 0 0-1 1V24a1.5 1.5 0 0 1-1.5 1.5h-6.5a1.5 1.5 0 0 1-1.5-1.5V12a1.5 1.5 0 0 1 1.5-1.5h6.5a1.5 1.5 0 0 1 1.5 1.5v1.75a1 1 0 0 0 1 1h.5z"}),s.jsx(o("XPlatReactSVG").Path,{d:"M14.498 16.75h9.752a.25.25 0 0 0 .25-.25v-1.858a1 1 0 0 1 1.643-.766l4.002 3.356a1 1 0 0 1 0 1.532l-4.002 3.357a1 1 0 0 1-1.643-.767V19.5a.25.25 0 0 0-.25-.25h-9.752a1 1 0 0 1-1-1v-.5a1 1 0 0 1 1-1z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerLinkFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M21.996 19.317c-1.405 1.406-3.747 1.408-5.23-.075a1.25 1.25 0 0 0-1.768 1.768c2.423 2.424 6.348 2.494 8.766.076l3.462-3.461c2.418-2.418 2.348-6.344-.076-8.767-2.423-2.424-6.348-2.494-8.766-.076l-.557.557a1.25 1.25 0 0 0 1.769 1.768l.556-.556c1.406-1.406 3.747-1.408 5.23.075 1.483 1.483 1.48 3.825.075 5.23l-3.461 3.461z"}),s.jsx(o("XPlatReactSVG").Path,{d:"M14.012 16.69c1.406-1.405 3.747-1.407 5.23.076a1.25 1.25 0 0 0 1.768-1.768c-2.423-2.424-6.348-2.493-8.766-.076l-3.462 3.462c-2.418 2.418-2.348 6.343.076 8.766 2.423 2.424 6.349 2.494 8.767.076l.556-.557a1.25 1.25 0 1 0-1.768-1.768l-.557.556c-1.405 1.406-3.747 1.408-5.23-.075-1.483-1.483-1.48-3.824-.075-5.23l3.461-3.461z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerTrashFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M20.882 7c.685 0 1.312.387 1.618 1 .306.613.933 1 1.618 1H27a1 1 0 0 1 1 1v.5a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1h2.882c.685 0 1.312-.387 1.618-1 .306-.613.933-1 1.618-1h5.764zM10.601 13.5a1 1 0 0 0-.995 1.096l1.132 11.693A3 3 0 0 0 13.724 29h8.552a3 3 0 0 0 2.986-2.711l1.132-11.693a1 1 0 0 0-.995-1.096H10.6z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("PAKECleanupSessionReasonEnum",[],(function(t,n,r,o,a,i){var e=Object.freeze({FLOW_ABANDONED:0,TIMEOUT:1});i.default=e}),66);
__d("UserMobileEBState",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["UNKNOWN","NO_MOBILE","UNTRUSTED_MOBILE","TRUSTED_MOBILE"]);i.UserMobileEBState=e}),66);
__d("queryMWLSOtherParticipantContact",["I64","LSMessagingThreadTypeUtil","ReQL"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n,r,a,i){var l=o("LSMessagingThreadTypeUtil").isOneToOne(r);return l?o("ReQL").leftJoin(o("ReQL").fromTableAscending(t.tables.participants,["contactId"]).getKeyRange(n).filter(function(t){return!(e||(e=o("I64"))).equal(t.contactId,a)}).take(1),o("ReQL").fromTableAscending(t.tables.contacts,i)).map(function(e){var t=e[0],n=e[1];return n}):o("ReQL").empty()}l.default=s}),98);
__d("useCometHomeChatSettingsQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="10047966748599340"}),null);
__d("useEncryptedBackupsQplImpressionRef",["QPLUserFlow","react-compiler-runtime","useVisibilityObserver"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n,a){var i=o("react-compiler-runtime").c(5),l;return i[0]!==a||i[1]!==e||i[2]!==n||i[3]!==t?(l={onVisible:function(){r("QPLUserFlow").addPoint(e,t,{instanceKey:n}),a==null||a()}},i[0]=a,i[1]=e,i[2]=n,i[3]=t,i[4]=l):l=i[4],r("useVisibilityObserver")(l)}l.default=e}),98);
__d("useWAInfraMobileDeviceList",["cr:8431","react","react-compiler-runtime","useWAInfraDeviceList"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo;function u(){var e=o("react-compiler-runtime").c(3),t=r("useWAInfraDeviceList")(),a;e[0]!==t?(a=t.filter(c),e[0]=t,e[1]=a):a=e[1];var i=a;if(n("cr:8431")){var l;return e[2]===Symbol.for("react.memo_cache_sentinel")?(l=[n("cr:8431")],e[2]=l):l=e[2],l}return i}function c(e){var t;return e.platform==="Messenger"&&!["Mac OS X","Windows"].includes(e.manufacturer)&&!["Chrome","Safari","Firefox","Edge","System Product Name"].includes(e.model)&&!(e.manufacturer==="Apple"&&(t=e.model)!=null&&t.includes("Mac"))}l.default=u}),98);
__d("useGetUserMobileEBState",["MAWOneTimeCodeGating","UserMobileEBState","cr:12343","gkx","react-compiler-runtime","useWAInfraMobileDeviceList"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(7),t=r("useWAInfraMobileDeviceList")(),a=n("cr:12343")(),i=a.hasOtcEligibleDevices;if(i){var l;return e[0]===Symbol.for("react.memo_cache_sentinel")?(l={state:o("UserMobileEBState").UserMobileEBState.TRUSTED_MOBILE},e[0]=l):l=e[0],l}var u=o("MAWOneTimeCodeGating").isOneTimeCodeEnabled()&&i,c=t.length===0&&r("gkx")("14456");if(c){var d;return e[1]===Symbol.for("react.memo_cache_sentinel")?(d={state:o("UserMobileEBState").UserMobileEBState.NO_MOBILE},e[1]=d):d=e[1],d}var m=t.length>0&&!u,p=m&&r("gkx")("14456");if(p){var _;e[2]!==t?(_=t.map(s),e[2]=t,e[3]=_):_=e[3];var f;return e[4]!==_?(f={deviceInfoList:_,state:o("UserMobileEBState").UserMobileEBState.UNTRUSTED_MOBILE},e[4]=_,e[5]=f):f=e[5],f}var g;return e[6]===Symbol.for("react.memo_cache_sentinel")?(g={state:o("UserMobileEBState").UserMobileEBState.UNKNOWN},e[6]=g):g=e[6],g}function s(e){return{lastSeen:e.lastSeen,model:e.model,platform:e.platform}}l.default=e}),98);
__d("useHasGroupLimitBeenReachedForThread",["I64","Int64Hooks","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWGroupLimitConfig","MWXacGating","ReQL","ReQLSuspense","isMWXacGroupThread","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t,n){var a,l=o("react-compiler-runtime").c(24),u;l[0]!==n?(u=n===void 0?[]:n,l[0]=n,l[1]=u):u=l[1];var d=u,m=(s||(s=r("useReStore")))(),p;l[2]!==m.tables.threads||l[3]!==t?(p=function(){return o("ReQL").fromTableAscending(m.tables.threads,["memberCount","threadType"].concat(o("LSThreadBitOffset").threadCapabilityFields)).getKeyRange(t)},l[2]=m.tables.threads,l[3]=t,l[4]=p):p=l[4];var _;l[5]!==m||l[6]!==t?(_=[m,t],l[5]=m,l[6]=t,l[7]=_):_=l[7];var f=o("ReQLSuspense").useFirst(p,_,i.id+":31"),g;l[8]!==f?(g=(f==null?void 0:f.memberCount)!=null?(e||(e=o("I64"))).to_int32(f.memberCount):0,l[8]=f,l[9]=g):g=l[9];var h=g,y=h+((a=d==null?void 0:d.length)!=null?a:0),C,b;l[10]!==d||l[11]!==f?(C=function(){var e=(d!=null?d:[]).some(c);return f==null?!1:o("MWXacGating").isGroupsEnabled()?r("isMWXacGroupThread")({capabilities:f.capabilities,capabilities2:f.capabilities2,capabilities3:f.capabilities3,capabilities4:f.capabilities4,capabilities5:f.capabilities5,threadType:f.threadType})||e:!1},b=[f,d],l[10]=d,l[11]=f,l[12]=C,l[13]=b):(C=l[12],b=l[13]);var v=o("Int64Hooks").useMemoInt64(C,b);if(f==null){var S;return l[14]===Symbol.for("react.memo_cache_sentinel")?(S=[!1,!1],l[14]=S):S=l[14],S}var R;l[15]!==v||l[16]!==f||l[17]!==y?(R=v?y>=o("MWGroupLimitConfig").gxac:o("LSMessagingThreadTypeUtil").isArmadilloSecure(f.threadType)?y>=o("MWGroupLimitConfig").armadillo():y>=o("MWGroupLimitConfig").nonGxac,l[15]=v,l[16]=f,l[17]=y,l[18]=R):R=l[18];var L=R,E;l[19]!==y?(E=o("MWXacGating").isGroupsEnabled()&&y>=o("MWGroupLimitConfig").gxac,l[19]=y,l[20]=E):E=l[20];var k=E,I;return l[21]!==L||l[22]!==k?(I=[L,k],l[21]=L,l[22]=k,l[23]=I):I=l[23],I}function c(e){return e.isInstagramAccount}l.default=u}),98);
__d("useLogDeleteChannelFailed",["LSMessagingThreadTypeUtil","QuickPerformanceLogger","emptyFunction","qpl","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(e){var t=o("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(e),n=d;return t?n:r("emptyFunction")}function d(){(e||(e=r("QuickPerformanceLogger"))).markerEnd(r("qpl")._(975844490,"1761"),3)}l.default=c}),98);
__d("useMWCMGetReportCommunityDialogTriggerHook",["fbt","I64","Int64Hooks","LSFactory","LSIntEnum","LSInternetConnectionState","LSReportCommunityChannelStoredProcedure","ReQL","ReQLSuspense","promiseDone","react","react-compiler-runtime","useMWXConfirmationDialog","useMWXPushToast","useReStore"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=(d||(d=o("react"))).useCallback;function p(t){var n=o("react-compiler-runtime").c(14),a=(e||(e=r("useReStore")))(),l;n[0]!==a.tables.connectivity_status?(l=function(){return o("ReQL").fromTableAscending(a.tables.connectivity_status)},n[0]=a.tables.connectivity_status,n[1]=l):l=n[1];var d;n[2]!==a?(d=[a],n[2]=a,n[3]=d):d=n[3];var m=o("ReQLSuspense").useFirst(l,d,i.id+":34"),p=r("useMWXPushToast")(),_;n[4]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"You've reported this chat to the group admins."),n[4]=_):_=n[4];var f=_,g,h;n[5]!==m||n[6]!==a||n[7]!==p||n[8]!==t?(g=function(){r("promiseDone")(a.runInTransaction(function(e){return r("LSReportCommunityChannelStoredProcedure")(r("LSFactory")(e),{threadKey:t})},"readwrite",void 0,void 0,i.id+":47"),function(){(m==null||(u||(u=o("I64"))).equal(m.internetConnectionState,(c||(c=o("LSIntEnum"))).ofNumber(r("LSInternetConnectionState").CONNECTED)))&&p({body:f})})},h=[a,t,m,p,f],n[5]=m,n[6]=a,n[7]=p,n[8]=t,n[9]=g,n[10]=h):(g=n[9],h=n[10]);var y=o("Int64Hooks").useCallbackInt64(g,h),C=r("useMWXConfirmationDialog")(),b;return n[11]!==y||n[12]!==C?(b=function(t){return C({body:s._(/*BTDS*/"If you report this chat, it will be sent to group admins for review."),cancel:s._(/*BTDS*/"Cancel"),confirm:s._(/*BTDS*/"Report"),title:s._(/*BTDS*/"Report chat to group admins?")},function(){y(),t==null||t()},function(){t==null||t()})},n[11]=y,n[12]=C,n[13]=b):b=n[13],b}l.default=p}),226);
__d("useMWChatEncryptedBackupsAddDevice",["EBMainThreadEBDBApiDeferred","EBSMAPI","Promise","promiseDone","react","react-compiler-runtime","requireDeferred","useAsyncReStore"],(function(t,n,r,o,a,i,l){"use strict";var e=["onStart"],s,u,c=u||(u=o("react")),d=c.useCallback,m=c.useRef,p=c.useState,_=r("requireDeferred")("MAWEncryptedBackupsClearRecoveryCode").__setRef("useMWChatEncryptedBackupsAddDevice"),f=r("requireDeferred")("mwEBAddDevice").__setRef("useMWChatEncryptedBackupsAddDevice");function g(t){var a=o("react-compiler-runtime").c(12),i=t.environment,l=t.hsmFleetMigrationResetPIN,u=t.onComplete,c=t.onFailure,d=t.onInvalidRecoveryCode,g=t.onStart,b=p(!1),v=b[0],S=b[1],R;a[0]===Symbol.for("react.memo_cache_sentinel")?(R=function(){S(!1)},a[0]=R):R=a[0];var L=R,E=r("useAsyncReStore")(),k=m(""),I;a[1]!==E||a[2]!==i||a[3]!==l||a[4]!==u||a[5]!==c||a[6]!==d||a[7]!==g?(I=function(o,a){k.current=a||"",r("promiseDone")((s||(s=n("Promise"))).all([E,_.load(),f.load().then(C)]),function(t){var n=t[0],a=t[1],s=t[2],m=a.encryptedBackupsClearRecoveryCode;return r("promiseDone")(m(n),function(){var t={onFailure:function(t){L(),c(t)},onInvalidRecoveryCode:function(){L(),d()},onStart:function(){S(!0),g==null||g()},onSuccess:function(){r("promiseDone")(r("EBSMAPI").fetchBackupIds("useMWChatEncryptedBackupsAddDevice")),L(),u(),l&&k.current!==""&&l(k.current)},recoveryCode:o,storage:n};t.onStart();var a=t.onStart,m=babelHelpers.objectWithoutPropertiesLoose(t,e);return s(babelHelpers.extends({},m,{environment:i,trackAddingDevice:y,trackOverprompting:h}))})})},a[1]=E,a[2]=i,a[3]=l,a[4]=u,a[5]=c,a[6]=d,a[7]=g,a[8]=I):I=a[8];var T=I,D;return a[9]!==v||a[10]!==T?(D=[T,v],a[9]=v,a[10]=T,a[11]=D):D=a[11],D}function h(e){return o("EBMainThreadEBDBApiDeferred").trackOverprompting(e)}function y(){return o("EBMainThreadEBDBApiDeferred").addNewDevice()}function C(e){return e.EBAddDevice}l.default=g}),98);
__d("useMWNavigateAfterLeavingGroup",["I64","Int64Hooks","MWInboxCommunityThreadsRouteBuilder","XCometGroupDiscussionControllerRouteBuilder","getFirstReadThread","promiseDone","react-compiler-runtime","useAsyncReStore","useCometRouterDispatcher","useCommunityFolder","useMWNavigation","useTopMostRouteCometEntityKey"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(){var e=r("useTopMostRouteCometEntityKey")();if(e==null)return!1;var t=e.entity_type,n=e.section;return n==="CHATS"&&t==="group"}function u(t,n){var a,i=o("react-compiler-runtime").c(19),l=r("useAsyncReStore")(),u=(a=t==null?void 0:t.parentThreadKey)!=null?a:(e||(e=o("I64"))).zero,c;i[0]!==u||i[1]!==t?(c=t!=null?t:{parentThreadKey:u},i[0]=u,i[1]=t,i[2]=c):c=i[2];var d=r("useCommunityFolder")(c),m=r("useCometRouterDispatcher")(),p=s(),_=r("useMWNavigation")(),f;i[3]!==l||i[4]!==m||i[5]!==n||i[6]!==d||i[7]!==p||i[8]!==_||i[9]!==(t==null?void 0:t.parentThreadKey)?(f=function(){if((t==null?void 0:t.parentThreadKey)!=null){if(d!=null){if(m==null)return;var a=p?r("XCometGroupDiscussionControllerRouteBuilder").buildURL({idorvanity:(e||(e=o("I64"))).to_string(d.fbGroupId)}):o("MWInboxCommunityThreadsRouteBuilder").buildURLWithoutThread({folder_id:(e||(e=o("I64"))).to_string(d.folderId)});m.go(a,{});return}r("promiseDone")(l,function(e){r("promiseDone")(r("getFirstReadThread")(e,t==null?void 0:t.parentThreadKey).then(function(e){var t;if(e!=null)return _.openInbox({clientThreadKey:e.clientThreadKey,threadKey:e.threadKey,threadType:e.threadType},"afterLeavingGroup",void 0,void 0,n);(t=document.querySelector("#left-sidebar-button-chats"))==null||t.focus()}))})}},i[3]=l,i[4]=m,i[5]=n,i[6]=d,i[7]=p,i[8]=_,i[9]=t==null?void 0:t.parentThreadKey,i[10]=f):f=i[10];var g=t==null?void 0:t.parentThreadKey,h;return i[11]!==l||i[12]!==m||i[13]!==n||i[14]!==d||i[15]!==p||i[16]!==_||i[17]!==g?(h=[g,d,l,m,p,_,n],i[11]=l,i[12]=m,i[13]=n,i[14]=d,i[15]=p,i[16]=_,i[17]=g,i[18]=h):h=i[18],o("Int64Hooks").useCallbackInt64(f,h)}l.default=u}),98);
__d("useMWDeleteThreadAndMaybeNavigate",["I64","Int64Hooks","LSFactory","LSIntEnum","LSLocalOptimisticDeleteCommunityChannelStoredProcedure","LSLocalOptimisticDeleteDiscoverableChatStoredProcedure","LSMessagingThreadTypeUtil","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MWChatStateActions","MWChatStateV2.react","MessengerWebUXLogger","Promise","QPLUserFlow","Random","WebUserFlowLoggingDataContextProvider.react","mwCMIsAnyCMThread","promiseDone","qpl","react","react-compiler-runtime","useLogDeleteChannelFailed","useMWNavigateAfterLeavingGroup","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(d||(d=o("react"))).useContext;function p(t,a,l){var d=o("react-compiler-runtime").c(20),p=(s||(s=r("useReStore")))(),_=r("useMWNavigateAfterLeavingGroup")(t,l),f=o("MWChatStateV2.react").useDispatch(),g;d[0]!==t.threadType?(g=r("mwCMIsAnyCMThread")(t.threadType),d[0]=t.threadType,d[1]=g):g=d[1];var h=g,y;d[2]!==t.threadType?(y=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(t.threadType),d[2]=t.threadType,d[3]=y):y=d[3];var C=y,b=r("useLogDeleteChannelFailed")(t.threadKey),v;d[4]!==t.threadType?(v=o("LSMessagingThreadTypeUtil").isCMSubthread(t.threadType),d[4]=t.threadType,d[5]=v):v=d[5];var S=v,R=r("MessengerWebUXLogger").useInteractionLogger(),L=m(o("WebUserFlowLoggingDataContextProvider.react").WebUserFlowLoggingDataContext),E=L.loggingDataRef,k,I;return d[6]!==p||d[7]!==f||d[8]!==S||d[9]!==h||d[10]!==C||d[11]!==b||d[12]!==R||d[13]!==E||d[14]!==_||d[15]!==a||d[16]!==t.threadKey||d[17]!==t.threadType?(k=function(){var l=r("qpl")._(25308751,"2014"),s=Date.now()+(Math.round(o("Random").random()*1e4)+1e4);r("QPLUserFlow").start(l,{annotations:{string:{action_type:"delete",thread_type:(u||(u=o("I64"))).to_string(t.threadType)}},instanceKey:s});var d=babelHelpers.extends({},E.current,{eventType:"backend"});r("promiseDone")(p.runInTransaction(function(e){return h||S?r("LSLocalOptimisticDeleteCommunityChannelStoredProcedure")(r("LSFactory")(e),{threadKey:t.threadKey}):C?r("LSLocalOptimisticDeleteDiscoverableChatStoredProcedure")(r("LSFactory")(e),{threadKey:t.threadKey}):r("LSOptimisticRemoveThreadStoredProcedure")(r("LSFactory")(e),{removeType:(c||(c=o("LSIntEnum"))).ofNumber(r("LSThreadRemoveType").DELETE_THREAD),threadKey:t.threadKey})},"readwrite",void 0,void 0,i.id+":84").catch(function(e){b(),R==null||R(babelHelpers.extends({},d,{eventName:"thread_delete_failure"})),r("QPLUserFlow").endFailure(l,e,{instanceKey:s})}).then(function(){return a&&_(),f(o("MWChatStateActions").closeTabByThreadKey(Date.now(),t.threadKey)),R==null||R(babelHelpers.extends({},d,{eventName:"thread_delete_success"})),r("QPLUserFlow").endSuccess(l,{instanceKey:s}),(e||(e=n("Promise"))).resolve()}))},I=[t.threadType,t.threadKey,E,p,h,S,C,b,R,a,f,_],d[6]=p,d[7]=f,d[8]=S,d[9]=h,d[10]=C,d[11]=b,d[12]=R,d[13]=E,d[14]=_,d[15]=a,d[16]=t.threadKey,d[17]=t.threadType,d[18]=k,d[19]=I):(k=d[18],I=d[19]),o("Int64Hooks").useCallbackInt64(k,I)}l.default=p}),98);
__d("useMWEBFlowSourceContext",["FBLogger","MWChatEncryptedBackupsQPLSource.enum","MWEBFlowSourceContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext;function d(){var e=o("react-compiler-runtime").c(2),t=c(r("MWEBFlowSourceContext")),n=t.source,a;return e[0]!==n?(a=function(){return n==null?(r("FBLogger")("wmi_eb").mustfix("[labyrinth][web] source is null. Did you wrap your flow with MWEBFlowSourceContextProvider?"),r("MWChatEncryptedBackupsQPLSource.enum").UNKNOWN):n},e[0]=n,e[1]=a):a=e[1],a}l.default=d}),98);
__d("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9618790408209960"}),null);
__d("useMWEBSetHasSeenNoticeMutation.graphql",["useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"SetHasSeenEbAutoRestoreNoticeResponsePayload",kind:"LinkedField",name:"set_has_seen_eb_auto_restore_notice",plural:!1,selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useMWEBSetHasSeenNoticeMutation",selections:e,type:"Mutation",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"useMWEBSetHasSeenNoticeMutation",selections:e},params:{id:n("useMWEBSetHasSeenNoticeMutation_facebookRelayOperation"),metadata:{},name:"useMWEBSetHasSeenNoticeMutation",operationKind:"mutation",text:null}}})();a.exports=e}),null);
__d("useMWEBSetHasSeenNotice",["CometRelay","react","react-compiler-runtime","useMWEBSetHasSeenNoticeMutation.graphql"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(s||(s=o("react"))).useCallback;function c(){var t=o("react-compiler-runtime").c(3),r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=e!==void 0?e:e=n("useMWEBSetHasSeenNoticeMutation.graphql"),t[0]=r):r=t[0];var a=o("CometRelay").useMutation(r),i=a[0],l;return t[1]!==i?(l=function(){i({variables:{}})},t[1]=i,t[2]=l):l=t[2],l}l.default=c}),98);
__d("useMWEBAutoRestoreNoticeStep",["MWChatEncryptedBackupsDismissalDialogContext","MWChatEncryptedBackupsLogging","MWChatEncryptedBackupsQPLEvents","MWEBUseLocalStorage","MWEncryptedBackupsLocalStorageEntryEnum","QPLUserFlow","ReQL","ReQLSuspense","deferredLoadComponent","react","react-compiler-runtime","requireDeferred","useLabyrinthLogging","useMWEBFlowSourceContext","useMWEBSetHasSeenNotice","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=e||(e=r("react")),m=c.useCallback,p=c.useContext,_=r("deferredLoadComponent")(r("requireDeferred")("MWEBAutoRestoreNoticeDialogStep.react").__setRef("useMWEBAutoRestoreNoticeStep"));function f(){var e=o("react-compiler-runtime").c(10),t=o("useLabyrinthLogging").useLabyrinthLoggingFlow(),n=t.startFlow,a=p(r("MWChatEncryptedBackupsDismissalDialogContext")),l=a.setIsDismissedDisabled,u=r("useMWEBFlowSourceContext")(),c=(s||(s=r("useReStore")))(),m;e[0]!==c.tables.auto_restore_opt_out?(m=function(){return o("ReQL").fromTableAscending(c.tables.auto_restore_opt_out)},e[0]=c.tables.auto_restore_opt_out,e[1]=m):m=e[1];var f;e[2]!==c?(f=[c],e[2]=c,e[3]=f):f=e[3];var h=o("ReQLSuspense").useArray(m,f,i.id+":55"),y=r("useMWEBSetHasSeenNotice")(),C;return e[4]!==h||e[5]!==u||e[6]!==y||e[7]!==l||e[8]!==n?(C=function(t){var e=t.hasSeenNotice,a=t.onNextStep,i=t.pushPage,s=h.filter(g).length>0,c=function(){o("MWChatEncryptedBackupsLogging").endSuccess({event:o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent}),a()};if(n({event:o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,source:u()}),s){r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_OUT"),c();return}if(r("QPLUserFlow").addPoint(o("MWChatEncryptedBackupsQPLEvents").restoreWithAutoRestoreConsentQplEvent,"AUTO_RESTORE_NOTICE_SCREEN_OPTED_IN"),o("MWEBUseLocalStorage").mwEBCreateLocalStorageEntry(r("MWEncryptedBackupsLocalStorageEntryEnum").ENCRYPTED_BACKUPS_REMEMBER_BROWSER_CONSENT),e){c();return}l(!0),y(),i(function(){return d.jsx(_,{onComplete:c,pushPage:i})},{withoutBackButton:!0,withoutCloseButton:!0})},e[4]=h,e[5]=u,e[6]=y,e[7]=l,e[8]=n,e[9]=C):C=e[9],C}function g(e){return e.optOutKey===r("MWEncryptedBackupsLocalStorageEntryEnum").MW_EB_HAS_OPTED_OUT_OF_AUTO_RESTORE}l.default=f}),98);
__d("useMWInboxInfoFRX",["CometFRX.entrypoint","MWGetLSThreadReportingTokenFromThread","MWReportingUtils","MessengerWebUXLogger","cr:2580","useMWXEntryPointDialog"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t=e.entryPoint,a=e.messagingEntrypoint,i=e.onPress,l=e.thread,s=l.threadKey,u=l.threadType,c=r("MWGetLSThreadReportingTokenFromThread")(l),d=o("MWReportingUtils").useGetNFXStoryLocationType(u),m=c!=null?{entryPoint:t!=null?t:"report_button",id:c,location:d}:null,p=r("useMWXEntryPointDialog")(r("CometFRX.entrypoint"),m),_=p[0],f=r("MessengerWebUXLogger").useInteractionLogger();return function(){_({threadKey:s}),n("cr:2580")&&a!=null&&n("cr:2580")({threadKey:s,threadType:u},"report_thread",a),f==null||f({eventName:"report_thread",threadKey:l.threadKey,threadType:l.threadType}),i==null||i()}}l.default=e}),98);
__d("useMWIsViewerThreadAdmin.react",["MWPActor.react","ReQL","ReQLSuspense","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t){var n,r=o("react-compiler-runtime").c(8),a=o("MWPActor.react").useActor(),l;r[0]!==a||r[1]!==e.tables.participants||r[2]!==t?(l=function(){return o("ReQL").fromTableAscending(e.tables.participants,["isAdmin"]).getKeyRange(t,a)},r[0]=a,r[1]=e.tables.participants,r[2]=t,r[3]=l):l=r[3];var s;r[4]!==a||r[5]!==e||r[6]!==t?(s=[e,t,a],r[4]=a,r[5]=e,r[6]=t,r[7]=s):s=r[7];var u=o("ReQLSuspense").useFirst(l,s,i.id+":23");return(n=u==null?void 0:u.isAdmin)!=null?n:!1}l.default=e}),98);
__d("useMWLSCanLeaveGroup",["I64","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s;function u(t){var n=o("react-compiler-runtime").c(2),r;n[0]!==t.parentThreadKey?(r=(e||(e=o("I64"))).equal(t.parentThreadKey,(s||(s=o("LSIntEnum"))).ofNumber(-10)),n[0]=t.parentThreadKey,n[1]=r):r=n[1];var a=r;return o("LSMessagingThreadTypeUtil").isGroup(t.threadType)&&o("LSThreadBitOffset").has(28,t)?!a:!1}l.default=u}),98);
__d("useMWPRemoveFromGroup",["LSFactory","LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure","LSVec","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(3),a=(e||(e=r("useReStore")))(),l;return n[0]!==a||n[1]!==t?(l=function(n){return a.runInTransaction(function(e){return r("LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure")(r("LSFactory")(e),{contactIds:r("LSVec").ofArray([n]),threadKey:t})},"readwrite",void 0,void 0,i.id+":24")},n[0]=a,n[1]=t,n[2]=l):l=n[2],l}l.default=s}),98);
__d("useMWLSConfirmRemoveFromGroup",["fbt","BroadcastChannelQPL","CommunityMessagingEnableState","I64","Int64Hooks","JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWChatStateV2.react","MWChatStateV2Types","MWPActor.react","ReQL","ReQLSuspense","cr:9761","promiseDone","react","react-compiler-runtime","useCommunityFolder","useMWPRemoveFromGroup","useMWXConfirmationDialog","useMWXLazyDialog","useReStore","useShouldShowMessagingEntrypointInCometRoot"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d,m=(d||(d=o("react"))).useCallback,p=r("JSResourceForInteraction")("MWCMLeaveThreadUpsellDialog.react").__setRef("useMWLSConfirmRemoveFromGroup");function _(e){var t=o("react-compiler-runtime").c(5),n=o("MWChatStateV2.react").useDispatch(),a=r("useShouldShowMessagingEntrypointInCometRoot")("CHAT"),i,l;return t[0]!==n||t[1]!==a||t[2]!==e?(i=function(){if(a)return n([{tabConfig:{shouldFocus:!1},threadKey:e,type:o("MWChatStateV2Types").MWChatStateActionsType.UpdateTabByThreadKey,updater:f}])},l=[n,e,a],t[0]=n,t[1]=a,t[2]=e,t[3]=i,t[4]=l):(i=t[3],l=t[4]),o("Int64Hooks").useCallbackInt64(i,l)}function f(e){return{clientForcedMinimizeWatermark:e.clientForcedMinimizeWatermark,closeWatermark:Date.now(),minimizeWatermark:e.minimizeWatermark,openFlyoutWatermark:e.openFlyoutWatermark,openWatermark:e.openWatermark,tabId:e.tabId,tabType:e.tabType}}function g(t,a,l,d,m){var f=o("react-compiler-runtime").c(64),g=(e||(e=r("useReStore")))(),C=e(),b;f[0]!==t.threadType?(b=o("LSMessagingThreadTypeUtil").isArmadilloSecure(t.threadType),f[0]=t.threadType,f[1]=b):b=f[1];var v=b,S=o("MWPActor.react").useActor(),R=r("useCommunityFolder")(t),L=_(t.threadKey),E=r("useMWXConfirmationDialog")(),k=r("useMWXLazyDialog")(p),I=k[0],T;f[2]!==(R==null?void 0:R.fbGroupId)||f[3]!==I||f[4]!==t?(T=function(n,r,o){I({groupId:R==null?void 0:R.fbGroupId,onCancel:o==null?void 0:o(),onLeaveGroup:r,thread:t},y)},f[2]=R==null?void 0:R.fbGroupId,f[3]=I,f[4]=t,f[5]=T):T=f[5],R==null||R.fbGroupId;var D=T,x;f[6]!==C.tables.participants||f[7]!==t.threadKey?(x=function(){return o("ReQL").fromTableAscending(C.tables.participants).getKeyRange(t.threadKey).filter(h)},f[6]=C.tables.participants,f[7]=t.threadKey,f[8]=x):x=f[8];var $;f[9]!==C||f[10]!==t.threadKey?($=[C,t.threadKey],f[9]=C,f[10]=t.threadKey,f[11]=$):$=f[11];var P=o("ReQLSuspense").useArray(x,$,i.id+":136"),N;f[12]!==t.threadType?(N=o("LSMessagingThreadTypeUtil").isJoinedDiscoverablePublicBroadcastChannel(t.threadType),f[12]=t.threadType,f[13]=N):N=f[13];var M=N,w=o("BroadcastChannelQPL").useLogLeaveChannelFailed(M),A=o("BroadcastChannelQPL").useLogLeaveChannelSuccess(M),F=o("BroadcastChannelQPL").useLogLeaveChannelCanceled(M),O=o("BroadcastChannelQPL").useLogLeaveChannelConfirmClick(M),B;if(f[14]!==S||f[15]!==P[0]||f[16]!==P.length){if(P.length!==1)B=!1;else{var W=P[0];B=(u||(u=o("I64"))).equal(W.contactId,S)}f[14]=S,f[15]=P[0],f[16]=P.length,f[17]=B}else B=f[17];var q=r("useMWPRemoveFromGroup")(t.threadKey),U;f[18]!==S||f[19]!==v||f[20]!==w||f[21]!==q||f[22]!==C||f[23]!==t.threadKey?(n("cr:9761")==null||!v?U=function(){return q(S).catch(function(e){w()})}:U=n("cr:9761").createLeaveGroupCallback(C,t.threadKey),f[18]=S,f[19]=v,f[20]=w,f[21]=q,f[22]=C,f[23]=t.threadKey,f[24]=U):U=f[24];var V;f[25]!==t.threadType?(V=o("MWCMThreadTypes.react").isJoinedCMThread(t.threadType),f[25]=t.threadType,f[26]=V):V=f[26];var H=V,G;f[27]!==t.threadType?(G=o("LSMessagingThreadTypeUtil").isJoinedSocialChannel(t.threadType),f[27]=t.threadType,f[28]=G):G=f[28];var z=G,j=z||M,K;f[29]!==R?(K=(R==null?void 0:R.enableState)!=null?(u||(u=o("I64"))).equal(R.enableState,(c||(c=o("LSIntEnum"))).ofNumber(r("CommunityMessagingEnableState").DISABLE_REQUESTED)):!1,f[29]=R,f[30]=K):K=f[30];var Q=K,X;f[31]!==H||f[32]!==Q||f[33]!==l||f[34]!==t?(X=H&&o("LSThreadBitOffset").has(148,t)&&(!l||Q),f[31]=H,f[32]=Q,f[33]=l,f[34]=t,f[35]=X):X=f[35];var Y=X,J;f[36]!==S||f[37]!==Y||f[38]!==L||f[39]!==g||f[40]!==v||f[41]!==H||f[42]!==Q||f[43]!==z||f[44]!==F||f[45]!==O||f[46]!==A||f[47]!==d||f[48]!==U||f[49]!==m||f[50]!==l||f[51]!==a||f[52]!==j||f[53]!==E||f[54]!==D||f[55]!==t.threadKey||f[56]!==B?(J=function(n){var e;if(H)e=l&&!Q?{body:s._(/*BTDS*/"You are the last participant in this chat. If you leave this chat, the chat and all its content will be permanently deleted from the group."),cancel:s._(/*BTDS*/"Cancel"),confirm:s._(/*BTDS*/"Delete chat"),title:s._(/*BTDS*/"Leave and delete chat?")}:{body:s._(/*BTDS*/"Leaving means you can't send messages in this chat and won't receive notifications for it. You can rejoin at any time."),cancel:s._(/*BTDS*/"Cancel"),confirm:s._(/*BTDS*/"Leave chat"),title:s._(/*BTDS*/"Leave chat?")};else if(B){var i=v?s._(/*BTDS*/"An admin can add or remove group members. If you leave without choosing an admin, a group member will be selected to be admin."):z?s._(/*BTDS*/"This conversation will be archived, and you won't get any messages"):s._(/*BTDS*/"You can choose a new admin from the people listed under Members. If you leave the group without choosing a new admin, the most senior group member will become the admin.");e={body:i,cancel:s._(/*BTDS*/"Cancel"),confirm:z?s._(/*BTDS*/"Leave channel"):s._(/*BTDS*/"Leave group"),title:s._(/*BTDS*/"Leave without choosing an admin?")}}else e={body:j?s._(/*BTDS*/"This channel will be removed from your chats. You'll need to rejoin to receive new messages."):s._(/*BTDS*/"You will stop receiving messages from this conversation and people will see that you left."),cancel:s._(/*BTDS*/"Cancel"),confirm:j?s._(/*BTDS*/"Leave channel"):s._(/*BTDS*/"Leave group"),title:j?s._(/*BTDS*/"Leave channel?"):s._(/*BTDS*/"Leave group chat?")};var u=Y?D:E;return u(e,function(){n(),m==null||m(),O(),r("promiseDone")(U(S)),L();var e=o("ReQL").fromTableAscending(g.tables.threads).getKeyRange(t.threadKey).subscribe(function(t,n){n.operation==="delete"&&(A(),e())});if(a){d();return}else return},function(){F(),m==null||m()})},f[36]=S,f[37]=Y,f[38]=L,f[39]=g,f[40]=v,f[41]=H,f[42]=Q,f[43]=z,f[44]=F,f[45]=O,f[46]=A,f[47]=d,f[48]=U,f[49]=m,f[50]=l,f[51]=a,f[52]=j,f[53]=E,f[54]=D,f[55]=t.threadKey,f[56]=B,f[57]=J):J=f[57];var Z=J,ee;f[58]!==H||f[59]!==j?(ee=H?s._(/*BTDS*/"Leave chat"):j?s._(/*BTDS*/"Leave channel"):s._(/*BTDS*/"Leave group"),f[58]=H,f[59]=j,f[60]=ee):ee=f[60];var te=ee,ne;return f[61]!==Z||f[62]!==te?(ne=[Z,te],f[61]=Z,f[62]=te,f[63]=ne):ne=f[63],ne}function h(e){return e.isAdmin===!0}function y(){}l.default=g}),226);
__d("useMWMessengerResetBlockOrRestrictWC",["I64","Promise","ReQL","WebStorage","getWarningCardStorageKey","promiseDone","react","react-compiler-runtime","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=(d||(d=o("react"))).useCallback;function p(t){var o=(c||(c=r("WebStorage"))).getLocalStorage();o!=null&&r("promiseDone")(t.then(function(t){return t.forEach(function(e){var t=r("getWarningCardStorageKey")(e);return o.removeItem(t)}),(e||(e=n("Promise"))).resolve()}))}function _(){var e=o("react-compiler-runtime").c(2),t=(u||(u=r("useReStore")))(),n;return e[0]!==t.tables.participants?(n=function(n){return p(o("ReQL").toArrayAsync(o("ReQL").fromTableAscending(t.tables.participants).filter(function(e){return(s||(s=o("I64"))).equal(e.contactId,n)}).map(f)))},e[0]=t.tables.participants,e[1]=n):n=e[1],n}function f(e){return e.threadKey}l.default=_}),98);
__d("useMWPIsThreadMuted",["I64","ServerTime","clearTimeout","react","react-compiler-runtime","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useEffect,d=u.useState;function m(e){var t=Math.min((s||(s=o("I64"))).to_float(e.muteExpireTimeMs),s.to_float(e.muteCallsExpireTimeMs)),n=Math.max(s.to_float(e.muteExpireTimeMs),s.to_float(e.muteCallsExpireTimeMs));return t===-1?-1:n}function p(e){return e<=-1?!0:e>o("ServerTime").getMillis()}function _(e){var t=o("react-compiler-runtime").c(5),n=m(e),a;t[0]!==n?(a=function(){return p(n)},t[0]=n,t[1]=a):a=t[1];var i=d(a),l=i[0],s=i[1],u,_;return t[2]!==n?(u=function(){var e=p(n);s(e);var t=n===-1;if(e&&!t){var a=r("setTimeout")(function(){s(!1)},n-o("ServerTime").getMillis());return(function(){r("clearTimeout")(a)})}},_=[n,s],t[2]=n,t[3]=u,t[4]=_):(u=t[3],_=t[4]),c(u,_),l}l.default=_}),98);
__d("usePopPage",["BaseMultiPageViewContext","FBLogger","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useContext;function d(){var e,t=c(r("BaseMultiPageViewContext")),n=m;return t==null?n:(e=t.popPage)!=null?e:null}function m(){r("FBLogger")("BaseMultiPageView").mustfix("usePopPage can only be used inside BaseMultiPageView.")}l.default=d}),98);
__d("usePushPage",["BaseMultiPageEntryPointImpl.react","BaseMultiPageViewContext","FBLogger","react","react-compiler-runtime","useCometRelayEntrypointContextualEnvironmentProvider","usePageEntryPointPrerenderer"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useCallback,d=u.useContext;function m(e,t,n){var a=o("react-compiler-runtime").c(9),i=n===void 0?"button":n,l=r("useCometRelayEntrypointContextualEnvironmentProvider")(),u=d(r("BaseMultiPageViewContext")),c=r("usePageEntryPointPrerenderer")(e,t,i),m=c[0],p=c[1],_;a[0]!==u||a[1]!==l||a[2]!==m||a[3]!==e||a[4]!==t?(_=function(o,a){var n=a===void 0?{}:a,i=n.fallback,c=n.pageKey;if(u==null)throw r("FBLogger")("BaseMultiPageView").blameToPreviousFrame().mustfixThrow("usePushPage can only be used inside BaseMultiPageView.");t!=null&&m(function(n){return u.pushPage(function(){return s.jsx(r("BaseMultiPageEntryPointImpl.react"),{entryPoint:e,environmentProvider:l,fallback:i!=null?i:u.fallback,loadedEntryPoint:n,otherProps:o,placeholderComponent:u.placeholderComponent,preloadParams:t})},{pageKey:c})})},a[0]=u,a[1]=l,a[2]=m,a[3]=e,a[4]=t,a[5]=_):_=a[5];var f=_,g;return a[6]!==p||a[7]!==f?(g=[f,p],a[6]=p,a[7]=f,a[8]=g):g=a[8],g}l.default=m}),98);/*FB_PKG_DELIM*/
__d("MSGRVideoMetadataProvider",["MediaPlaybackCompoundEventUtils","MediaPlaybackMetadataProvider","getVideoBrowserTabId"],(function(t,n,r,o,a,i,l){"use strict";function e(){return{getErrorMetadata:o("MediaPlaybackMetadataProvider").getSNAPLErrorMetadataCommon,getRequiredMetadata:function(t){var e=t.coreVideoPlayerMetaData,n=t.logDataAdditions,a=t.loggingMetaData,i=t.state,l=e.adClientToken==null?"organic":"paid",s=o("MediaPlaybackCompoundEventUtils").getMediaPlaybackAttributionIDV2Root(a),u=o("MediaPlaybackMetadataProvider").getSNAPLRequiredMetadataCommon(i,e,a,n),c=o("MediaPlaybackMetadataProvider").getSNAPLTagMetadataCommon(i,e,a),d=babelHelpers.extends({},u,{author_id:void 0,browser_tab_id:r("getVideoBrowserTabId")(),current_watching_module:"",encrypted_logging_policy:"encrypted_only",media_id:"-1",nav_chain:c.attribution_id_v2,persistent_id:e.videoFBID,sessionizer_nav_chain:s,tracking_token:void 0,tracking_type:l,trackings:void 0});return d},getTagMetadata:function(t){var e=t.coreVideoPlayerMetaData,n=t.logDataAdditions,r=t.loggingMetaData,a=t.state,i=o("MediaPlaybackMetadataProvider").getSNAPLTagMetadataCommon(a,e,r),l=babelHelpers.extends({},i,{video_chaining_depth_level:n.video_chaining_depth_level,video_chaining_parent_video_id:n.video_chaining_parent_video_id,video_chaining_session_id:n.video_chaining_session_id});return l}}}l.creatMSGRVideoMetadataProvider=e}),98);
__d("CometVideoPlayerLoggingConfigForMWChat",["CometVideoPlayerLoggingConfigForDisabledLogging","MSGRVideoMetadataProvider","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(e){return(e==null?void 0:e.disableLogging)===!0?o("CometVideoPlayerLoggingConfigForDisabledLogging").createCometVideoPlayerLoggingConfigForDisabledLogging():{loggingToSNAPLCreateMetadataProvider:o("MSGRVideoMetadataProvider").creatMSGRVideoMetadataProvider,loggingToSNAPLEnabled:(e==null?void 0:e.withMWChatSNAPLGK)===!0?r("gkx")("12325"):void 0}}l.createCometVideoPlayerLoggingConfigForMWChat=e}),98);
__d("FDSBlurredBackgroundImage.react",["CometBackgroundImage.react","XPlatReactEnvironment","react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e=["xstyle"],s,u=s||(s=o("react")),c={imageContainer:{filter:"xtea3wc",height:"xu1mrb",$$css:!0},imageContainerVR:{transform:"x15f76sd",$$css:!0},imageContainerWeb:{transform:"x1yyh9jt",width:"x1jx8tsq",$$css:!0},root:{alignItems:"x6s0dn4",display:"x78zum5",height:"x5yr21d",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",width:"xh8yej3",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(11),a,i;n[0]!==t?(i=t.xstyle,a=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]);var l;n[3]!==i?(l=[c.root,i],n[3]=i,n[4]=l):l=n[4];var s;n[5]===Symbol.for("react.memo_cache_sentinel")?(s=[c.imageContainer,o("XPlatReactEnvironment").isWeb()?c.imageContainerWeb:c.imageContainerVR],n[5]=s):s=n[5];var d;n[6]!==a?(d=u.jsx(o("react-strict-dom").html.div,{style:s,children:u.jsx(r("CometBackgroundImage.react"),babelHelpers.extends({},a))}),n[6]=a,n[7]=d):d=n[7];var m;return n[8]!==l||n[9]!==d?(m=u.jsx(o("react-strict-dom").html.div,{style:l,children:d}),n[8]=l,n[9]=d,n[10]=m):m=n[10],m}l.default=d}),98);
__d("FDSImageCover.react",["BaseImage_DEPRECATED.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["alt","loading","onError","onLoad","src","style"],s,u=s||(s=o("react")),c=s,d=c.useCallback,m=c.useRef,p=c.useState,_=(function(){var e=document.documentElement;return e==null?!0:"objectFit"in e.style})();function f(t){var n=o("react-compiler-runtime").c(21),a,i,l,s,c,d;if(n[0]!==t){var _=t.alt,f=t.loading,g=t.onError,h=t.onLoad,y=t.src,C=t.style,b=babelHelpers.objectWithoutPropertiesLoose(t,e);a=f,i=g,l=h,s=y,c=C,d=b,n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=s,n[5]=c,n[6]=d}else a=n[1],i=n[2],l=n[3],s=n[4],c=n[5],d=n[6];var v=p(null),S=v[0],R=v[1],L=m(),E;n[7]!==l?(E=function(){var e=L.current;e==null||!(e instanceof HTMLImageElement)||typeof e.src!="string"||(R(e.src),l!=null&&l())},n[7]=l,n[8]=E):E=n[8];var k=E;if(S!=null){var I;n[9]===Symbol.for("react.memo_cache_sentinel")?(I="x1rg5ohu x5yr21d xl1xv1r xh8yej3",n[9]=I):I=n[9];var T="url("+S+")",D=c,x;return n[10]!==T||n[11]!==D?(x=u.jsx("div",{className:I,style:babelHelpers.extends({backgroundImage:T,backgroundPosition:"center center",backgroundSize:"cover"},D)}),n[10]=T,n[11]=D,n[12]=x):x=n[12],x}var $;n[13]===Symbol.for("react.memo_cache_sentinel")?($="xqtp20y xnalus7",n[13]=$):$=n[13];var P=a||void 0,N;return n[14]!==k||n[15]!==i||n[16]!==s||n[17]!==c||n[18]!==P||n[19]!==d?(N=u.jsx(r("BaseImage_DEPRECATED.react"),babelHelpers.extends({},d,{className:$,loading:P,onError:i,onLoad:k,ref:L,src:s,style:c})),n[14]=k,n[15]=i,n[16]=s,n[17]=c,n[18]=P,n[19]=d,n[20]=N):N=n[20],N}function g(e){var t=o("react-compiler-runtime").c(3),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n="x1rg5ohu x5yr21d xl1xv1r xh8yej3",t[0]=n):n=t[0];var a;return t[1]!==e?(a=u.jsx(r("BaseImage_DEPRECATED.react"),babelHelpers.extends({className:n},e)),t[1]=e,t[2]=a):a=t[2],a}var h=_?g:f;l.default=h}),98);
__d("InformTreatmentTitle",["$InternalEnum"],(function(t,n,r,o,a,i){var e=n("$InternalEnum")({MISINFORMATION:"misinformation",FALSE_NEWS:"false_news",MISLEADING_NEWS:"misleading_news",MISSING_CONTEXT:"missing_context",ALTERED_MEDIA:"altered_media",AI_GENERATED_CONTENT:"ai_generated_content"}),l=e;i.default=l}),66);
__d("MAWAttachmentBlob.react",["FBLogger","I64","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","MAWDbMedia","Promise","PromiseAnnotate","WAHashUtils","WAMediaQplHelper","cr:332","interaction-tracing","performanceNow"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d,m=new Map,p=new Map;function _(e,t){m.set(e,{TAG:1,value:t})}function f(e){var t=m.get(e);return t!=null&&t.TAG===1}function g(t,a,i,l){var s=l!=null?l:t,u=m.get(s);if(u!=null){if(u.TAG===0)throw u.value;return u.value}i==null||i.addPoint("fetch_data_blob_from_backend_start",{string:{fetch_by:isFinite(t)?"mediaId":"hashedPlaintextHash"}});var p=r("interaction-tracing").InteractionTracingCore.getPendingInteractions(),_=(d||(d=r("performanceNow")))(),f=isFinite(t)?o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByMediaId",{description:a,mediaId:o("MAWDbMedia").convertNumberToMediaId(Number.parseInt(t,10)),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(e){return i==null||i.addPoint("fetch_data_blob_from_backend_success",{string:{blob_size_bucket:e!=null?o("WAMediaQplHelper").convertIntegerSizeToStringBucket(e.size):void 0,description:a,fetch_by:"mediaId"}}),b(p,_,e!=null?"SUCCESS":"FAIL"),m.set(s,{TAG:1,value:e!=null?URL.createObjectURL(e):""}),i==null||i.addPoint("fetch_data_blob_url_set_in_cache"),(c||(c=n("Promise"))).resolve()}).catch(function(e){return i==null||i.endFail("fetch_data_blob_from_backend_fail",{string:{description:a,error:e.message,fetch_by:"mediaId"}}),b(p,_,"FAIL"),m.set(s,{TAG:1,value:""}),r("FBLogger")("messenger_web_media").catching(e).mustfix("Unable to getBlobUrlByMediaId"),(c||(c=n("Promise"))).resolve()}):o("MAWBridgeSendAndReceive").sendAndReceive("backend","getBlobDataUrlByHashedPlaintextHash",{description:a,plaintextHash:o("WAHashUtils").stringToPlaintextHash(t),qplInstanceKey:i==null?void 0:i.getInstanceKey()}).then(function(e){return i==null||i.addPoint("fetch_data_blob_from_backend_success",{string:{blob_size_bucket:e!=null?o("WAMediaQplHelper").convertIntegerSizeToStringBucket(e.size):void 0,description:a,fetch_by:"hashedPlaintextHash"}}),b(p,_,e!=null?"SUCCESS":"FAIL"),m.set(s,{TAG:1,value:e!=null?URL.createObjectURL(e):""}),i==null||i.addPoint("fetch_data_blob_url_set_in_cache"),n("cr:332")!=null&&n("cr:332").runBlobReadAndCompareResult({fileName:t,idbBlob:e}),(c||(c=n("Promise"))).resolve()}).catch(function(e){return i==null||i.endFail("fetch_data_blob_from_backend_fail",{string:{description:a,error:e.message,fetch_by:"hashedPlaintextHash"}}),b(p,_,"FAIL"),m.set(s,{TAG:1,value:""}),r("FBLogger")("messenger_web_media").catching(e).mustfix("Unable to getBlobDataUrlByHashedPlaintextHash"),(c||(c=n("Promise"))).resolve()});throw(e||(e=o("PromiseAnnotate"))).setDisplayName(f,"MAWAttachmentBlob.getBlobDataUrl"),m.set(s,{TAG:0,value:f}),f}function h(e,t,n){if(e==null)return r("FBLogger")("messenger_web_media").warn("Unable to getAttachmentBlob because attachment is null, from %s",t),n==null||n.endFail("attachment_is_null",{string:{description:t}}),"";if((s||(s=o("I64"))).equal(e.authorityLevel,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))){var a,i=(a=C(e))!=null?a:"";return i==null||i.length===0?(r("FBLogger")("messenger_web_media").warn("Unable to getAttachmentBlob because optimistic attachment url is null or empty, from %s",t),n==null||n.endFail("no_optimistic_attachment_url",{string:{description:t}}),""):(n==null||n.addPoint("return_optimistic",{string:{description:t}}),i)}return g(e.attachmentFbid,t,n)}function y(e,t,n,a,i){var l="fetch_"+t+"_xma_blob",c={string:{description:n}};if(e==null)return a==null||a.endFail(l+"_attachment_is_null",c),"";if((s||(s=o("I64"))).equal(e.authorityLevel,(u||(u=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").OPTIMISTIC))&&t==="preview"){var d=C(e);return d==null||d.length===0?(r("FBLogger")("messenger_web_media").mustfix("Unable to getInfoUrlXMA because optimistic attachment url is null or empty, from %s",n),a==null||a.endFail(l+"_no_optimistic_attachment_url",c),""):(a==null||a.addPoint(l+"_return_optimistic",c),d)}var m=i!=null?i:e.attachmentFbid+t,_=p.get(m);if(_!=null){if(_.TAG===0)throw _.value;return _.value}var f;switch(t){case"preview":f=e.xmaPreviewFbid;break;case"header":f=e.xmaHeaderImageFbid;break;case"favicon":f=e.xmaFaviconFbid;break}if(f==null)throw r("FBLogger")("messenger_web_media").mustfixThrow("Failed to getInfoUrlXMA because xma does not have required data. xmaId is %s, info type is %s, from %s",e.attachmentFbid,t,n);return g(f,n,a)}function C(e){return e==null?void 0:e.previewUrl}function b(e,t,n){var o=(d||(d=r("performanceNow")))();e.forEach(function(e){e.addSubspan("MAWFetchAttachmentBlob","AppTiming",t,o,{action:n,full_duration:(o-t)/1e3})})}l.setEagerAttachmentUrl=_,l.isEagerAttachmentUrlDone=f,l.getAttachmentBlobNonOptional_CausesSuspense=g,l.getAttachmentBlob_CausesSuspense=h,l.getInfoUrlXMA_CausesSuspense=y}),98);
__d("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType",["WAArmadilloXMA.pb","WALogger"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){switch(t){case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.MEDIA_LABEL:return"media_label";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.POST_LABEL:return"post_label";case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.NONE:return null;case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.WARNING:case o("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE:default:return o("WALogger").ERROR(e||(e=babelHelpers.taggedTemplateLiteralLoose(["[labyrinth_web] Not a valid ExtendedContentOverlayIconGlyph: ",""])),t),"warning_screens"}}l.convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType=s}),98);
__d("MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9834610223284602"}),null);
__d("MWAnimatedImageControlsUtilCometSettingsQuery.graphql",["MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"VideoSettings",kind:"LinkedField",name:"video_settings",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"autoplay_setting_www",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWAnimatedImageControlsUtilCometSettingsQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWAnimatedImageControlsUtilCometSettingsQuery",selections:e},params:{id:n("MWAnimatedImageControlsUtilCometSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWAnimatedImageControlsUtilCometSettingsQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation",[],(function(t,n,r,o,a,i){a.exports="9439828062807168"}),null);
__d("MWAnimatedImageControlsUtilMWSettingsQuery.graphql",["MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation","relay-runtime"],(function(t,n,r,o,a,i){"use strict";var e=(function(){var e=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"msgr_gif_autoplay",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWAnimatedImageControlsUtilMWSettingsQuery",selections:e,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWAnimatedImageControlsUtilMWSettingsQuery",selections:e},params:{id:n("MWAnimatedImageControlsUtilMWSettingsQuery_facebookRelayOperation"),metadata:{},name:"MWAnimatedImageControlsUtilMWSettingsQuery",operationKind:"query",text:null}}})();n("relay-runtime").PreloadableQueryRegistry.set(e.params.id,e),a.exports=e}),null);
__d("MWAnimatedImageControlsUtil",["$InternalEnum","CometRelay","MWAnimatedImageControlsUtilCometSettingsQuery.graphql","MWAnimatedImageControlsUtilMWSettingsQuery.graphql","MetaConfig","gkx","promiseDone","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=u||(u=o("react")),d=c.useEffect,m=c.useState,p=n("$InternalEnum").Mirrored(["NOT_FETCHED_YET","OFF","ON"]);function _(){var e=o("react-compiler-runtime").c(3),t=o("CometRelay").useRelayEnvironment(),n=m(null),a=n[0],i=n[1],l=r("gkx")("20836"),s,u;if(e[0]!==t?(s=function(){l||r("promiseDone")(f(t).then(i))},u=[t,l],e[0]=t,e[1]=s,e[2]=u):(s=e[1],u=e[2]),d(s,u),l)return p.ON;switch(a){case null:return p.NOT_FETCHED_YET;case!0:return p.ON;case!1:return p.OFF;default:return p.NOT_FETCHED_YET}}async function f(t){var a=r("MetaConfig")._("37");if(a){var i,l=await o("CometRelay").fetchQuery(t,e!==void 0?e:e=n("MWAnimatedImageControlsUtilMWSettingsQuery.graphql"),{}).toPromise();return(l==null||(i=l.viewer)==null?void 0:i.msgr_gif_autoplay)==="ON"}else{var u,c=await o("CometRelay").fetchQuery(t,s!==void 0?s:s=n("MWAnimatedImageControlsUtilCometSettingsQuery.graphql"),{}).toPromise(),d=c==null||(u=c.viewer)==null||(u=u.video_settings)==null?void 0:u.autoplay_setting_www;return d==="on"}}l.MWAutoplayAnimationsSetting=p,l.useGetMessengerAutoplaySetting=_}),98);
__d("useGetMediaGroupStyles",["MWLSThreadDisplayContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useMemo,u=180,c=120;function d(e,t){var n=o("react-compiler-runtime").c(40),r=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",a=null,i;if(t===2&&r){var l;n[0]===Symbol.for("react.memo_cache_sentinel")?(l="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1isuwpm xq1dxzn",n[0]=l):l=n[0],a=l}else if(t===2&&!r){var s;n[1]===Symbol.for("react.memo_cache_sentinel")?(s="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1en3kgc xafpxmx",n[1]=s):s=n[1],a=s}else if(t===3&&r){var d;n[2]===Symbol.for("react.memo_cache_sentinel")?(d="x78zum5 xdt5ytf x6ikm8r x10wlt62 xu3xrit xq1dxzn",n[2]=d):d=n[2],a=d}else if(t===3&&!r){var m;n[3]===Symbol.for("react.memo_cache_sentinel")?(m="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1egiwwb xafpxmx",n[3]=m):m=n[3],a=m}else if(t===4&&r){var p;n[4]===Symbol.for("react.memo_cache_sentinel")?(p="x78zum5 xdt5ytf x6ikm8r x10wlt62 x89wwaf xh6lk7j xdj266r",n[4]=p):p=n[4],a=p}else if(t===4&&!r){var _;n[5]===Symbol.for("react.memo_cache_sentinel")?(_="x78zum5 xdt5ytf x6ikm8r x10wlt62 x1gyaxfs xt4sqew xdj266r",n[5]=_):_=n[5],a=_}if(r){var f;n[6]===Symbol.for("react.memo_cache_sentinel")?(f="x6s0dn4 x1exxf4d xpv9jar x1nb4dca x1nmn18 xpilrb4 x1lun4ml x1xn7y0n x1uxb8k9 x1vmbcc8 x16xm01d x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x78zum5 xl56j7k x6ikm8r x10wlt62 x10l6tqk x1wkxgih x1mu601j x2aouup xi3av73 x1i9suas xygnafs",n[6]=f):f=n[6],i=f}else{var g;n[7]===Symbol.for("react.memo_cache_sentinel")?(g="x6s0dn4 x1exxf4d xpv9jar x1nb4dca x1nmn18 xpilrb4 x1lun4ml x1xn7y0n x1uxb8k9 x1vmbcc8 x16xm01d x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x78zum5 x1b51vyi xl56j7k x19aweqf x1e4dklr x1shn012 xfb3i0g x6ikm8r x10wlt62 x10l6tqk xzjbwwf",n[7]=g):g=n[7],i=g}var h;n[8]===Symbol.for("react.memo_cache_sentinel")?(h=[{bottom:0,left:17},{bottom:6,left:8,transform:"rotate(-4deg)"},{bottom:12,right:8,transform:"rotate(4deg)"},{bottom:18,left:8,transform:"rotate(-4deg)"}],n[8]=h):h=n[8];var y=e?null:0,C=e?0:null,b;n[9]!==y||n[10]!==C?(b={left:y,right:C,top:0},n[9]=y,n[10]=C,n[11]=b):b=n[11];var v=e?0:null,S=e?null:0,R=r?100:160,L;n[12]!==v||n[13]!==S||n[14]!==R?(L={left:v,right:S,top:R},n[12]=v,n[13]=S,n[14]=R,n[15]=L):L=n[15];var E=e?null:0,k=e?0:null,I;n[16]!==E||n[17]!==k?(I={bottom:0,left:E,right:k},n[16]=E,n[17]=k,n[18]=I):I=n[18];var T;n[19]!==I||n[20]!==b||n[21]!==L?(T=[b,L,I],n[19]=I,n[20]=b,n[21]=L,n[22]=T):T=n[22];var D=e?0:null,x=e?null:0,$;n[23]!==D||n[24]!==x?($={left:D,right:x,top:0},n[23]=D,n[24]=x,n[25]=$):$=n[25];var P=e?null:0,N=e?0:null,M;n[26]!==P||n[27]!==N?(M={bottom:0,left:P,right:N},n[26]=P,n[27]=N,n[28]=M):M=n[28];var w;n[29]!==$||n[30]!==M?(w=[$,M],n[29]=$,n[30]=M,n[31]=w):w=n[31];var A;n[32]!==T||n[33]!==w?(A={fourImageTile:h,threeImageTile:T,twoImageTile:w},n[32]=T,n[33]=w,n[34]=A):A=n[34];var F=A,O=t===2?F.twoImageTile:t===3?F.threeImageTile:F.fourImageTile,B=r?c:u,W;return n[35]!==a||n[36]!==O||n[37]!==B||n[38]!==i?(W={containerStyles:a,coordinations:O,imageSize:B,wrapperStyles:i},n[35]=a,n[36]=O,n[37]=B,n[38]=i,n[39]=W):W=n[39],W}function m(e,t,n){var r=o("react-compiler-runtime").c(4),a=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",i=1,l=1;if(e!==!0||t===0||n===0){var s;return r[0]===Symbol.for("react.memo_cache_sentinel")?(s={resizeRatio:1,scaleRatio:1},r[0]=s):s=r[0],s}e===!0&&t!=null&&n!=null&&(t>=n?i=Math.ceil((a?c:u)/n):i=Math.ceil((a?c:u)/t)),e===!0&&i===1&&t!=null&&n!=null&&(l=t>n?t/n:n/t);var d;return r[1]!==i||r[2]!==l?(d={resizeRatio:i,scaleRatio:l},r[1]=i,r[2]=l,r[3]=d):d=r[3],d}l.IMAGE_SIZE=u,l.IMAGE_SIZE_CHAT_TAB=c,l.useGetMediaGroupStyles=d,l.useGetMediaGroupTileImageRatios=m}),98);
__d("MWMessageListImageSizingUtils",["justknobx","useGetMediaGroupStyles"],(function(t,n,r,o,a,i,l){"use strict";function e(e,t,n){return n===!0?{maxHeight:t==="Inbox"?o("useGetMediaGroupStyles").IMAGE_SIZE:o("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB,maxWidth:t==="Inbox"?o("useGetMediaGroupStyles").IMAGE_SIZE:o("useGetMediaGroupStyles").IMAGE_SIZE_CHAT_TAB}:t!=="Inbox"&&t!=="ChatTab"||e&&!r("justknobx")._("5036")?{maxHeight:200,maxWidth:480}:{maxHeight:t==="Inbox"?r("justknobx")._("2546"):r("justknobx")._("2547"),maxWidth:t==="Inbox"?r("justknobx")._("2548"):r("justknobx")._("2549")}}l.getMaxPreviewHeightAndWidth=e}),98);
__d("MWXIconEyeCross",["MWXSvgIcon","SVGIcon","cr:22310","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22310")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconInfoCircle",["MWXSvgIcon","SVGIcon","cr:22371","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22371")),r("gkx")("23219"));l.default=e}),98);
__d("MessengerWellbeingInformTreatmentFalcoEventLogger",["$InternalEnum","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";function e(e){if(e==null)throw new TypeError("Cannot destructure "+e)}var s=r("requireDeferred")("MwbCmInformTreatmentEventFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger"),u=r("requireDeferred")("MwbInformTreatmentShownImpressionFalcoEvent").__setRef("MessengerWellbeingInformTreatmentFalcoEventLogger"),c=n("$InternalEnum")({AI_GENERATED_CONTENT:"ai_generated_content",MISINFORMATION:"misinformation"});function d(t){var n=babelHelpers.extends({},(e(t),t));s.onReady(function(e){return e.log(function(){return babelHelpers.extends({},n)})})}function m(t){var n=babelHelpers.extends({},(e(t),t));u.onReady(function(e){return e.log(function(){return babelHelpers.extends({},n)})})}l.MWInformTreatmentEventName=c,l.logForCM=d,l.logForPrivateChats=m}),98);
__d("useMWInformTreatmentFalcoEventLogger",["I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MWLSThread","MessengerWellbeingInformTreatmentFalcoEventLogger","ReQL","ReQLSuspense","react-compiler-runtime","useCommunityFolder","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u;function c(t){var n,a=o("react-compiler-runtime").c(32),l=t.message,c=(u||(u=r("useReStore")))(),d=o("MWLSThread").useThreadExn(l.threadKey),m=r("useCommunityFolder")(d),p=(n=m==null?void 0:m.fbGroupId)!=null?n:(e||(e=o("I64"))).zero,_;a[0]!==d.threadType?(_=o("LSMessagingThreadTypeUtil").isPublicCMThread(d.threadType),a[0]=d.threadType,a[1]=_):_=a[1];var f=_,g;a[2]!==d?(g=o("LSMessagingThreadTypeUtil").isOpenFnFThread(d),a[2]=d,a[3]=g):g=a[3];var h=g,y;a[4]!==l.displayedContentTypes?(y=(e||(e=o("I64"))).equal(l.displayedContentTypes,(s||(s=o("LSIntEnum"))).ofNumber(1)),a[4]=l.displayedContentTypes,a[5]=y):y=a[5];var C=!y,b,v;a[6]!==c.tables.attachments||a[7]!==C||a[8]!==l.messageId||a[9]!==l.threadKey?(b=function(){return C?o("ReQL").fromTableAscending(c.tables.attachments).getKeyRange(l.threadKey,l.messageId):o("ReQL").empty()},v=[C,c.tables.attachments,l.threadKey,l.messageId],a[6]=c.tables.attachments,a[7]=C,a[8]=l.messageId,a[9]=l.threadKey,a[10]=b,a[11]=v):(b=a[10],v=a[11]);var S=o("ReQLSuspense").useFirst(b,v,i.id+":63"),R;a[12]!==(S==null?void 0:S.attachmentFbid)||a[13]!==p||a[14]!==h||a[15]!==f||a[16]!==l.isForwarded||a[17]!==l.messageId||a[18]!==l.threadKey||a[19]!==d.threadSubtype||a[20]!==d.threadType?(R=function(n,r){if(f)o("MessengerWellbeingInformTreatmentFalcoEventLogger").logForCM({attachment_id:S==null?void 0:S.attachmentFbid,event_name:n,group_id:(e||(e=o("I64"))).to_string(p),inform_treatment:r!=null?{name:r.name,type:r.type}:void 0,is_forward:l.isForwarded,message_id:l.messageId,thread_id:e.to_string(l.threadKey),thread_subtype:d.threadSubtype!=null?(s||(s=o("LSIntEnum"))).unwrapIntEnum(d.threadSubtype):void 0});else if(h&&n==="impression"){var t;o("MessengerWellbeingInformTreatmentFalcoEventLogger").logForPrivateChats({inform_treatment_name:r!=null?r==null?void 0:r.name:void 0,inform_treatment_type:(t=r==null?void 0:r.type)!=null?t:void 0,thread_type:(s||(s=o("LSIntEnum"))).unwrapIntEnum(d.threadType)})}},a[12]=S==null?void 0:S.attachmentFbid,a[13]=p,a[14]=h,a[15]=f,a[16]=l.isForwarded,a[17]=l.messageId,a[18]=l.threadKey,a[19]=d.threadSubtype,a[20]=d.threadType,a[21]=R):R=a[21];var L=S==null?void 0:S.attachmentFbid,E;return a[22]!==p||a[23]!==h||a[24]!==f||a[25]!==l.isForwarded||a[26]!==l.messageId||a[27]!==l.threadKey||a[28]!==L||a[29]!==d.threadSubtype||a[30]!==d.threadType?(E=[L,p,h,f,l.isForwarded,l.messageId,l.threadKey,d.threadSubtype,d.threadType],a[22]=p,a[23]=h,a[24]=f,a[25]=l.isForwarded,a[26]=l.messageId,a[27]=l.threadKey,a[28]=L,a[29]=d.threadSubtype,a[30]=d.threadType,a[31]=E):E=a[31],o("Int64Hooks").useCallbackInt64(R,E)}l.default=c}),98);
__d("MWInformedTreatment.react",["fbt","FDSBlurredBackgroundImage.react","LSMessagingThreadTypeUtil","MWXColumn.react","MWXColumnItem.react","MWXIconEyeCross","MWXIconInfoCircle","MWXIconStrict.react","MWXImage.react","MWXText.react","MessengerWebUXLogger","ReQL","ReQLSuspense","gkx","qex","react","react-compiler-runtime","useMWInformTreatmentFalcoEventLogger","useMergeRefs","useReStore","useSinglePartialViewImpression"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=u||(u=o("react")),d="0px 4px 14px 0px rgba(0, 0, 0, 0.08)",m="rgba(255, 145, 16, 0.00)",p={overlay:{paddingTop:"xexx8yu",paddingInlineEnd:"x2vl965",paddingBottom:"x18d9i69",paddingInlineStart:"xe2zdcy",width:"xh8yej3",$$css:!0},post:{flexGrow:"x1iyjqo2",height:"x5yr21d",objectFit:"xl1xv1r",width:"xh8yej3",$$css:!0}},_={AI_GENERATED_CONTENT:{icon:r("MWXIconInfoCircle"),text:s._(/*BTDS*/"AI info")},ALTERED_MEDIA:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Altered media")},ALTERED_PHOTO:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Altered photo")},CRUEL:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Cruel content")},FALSE_NEWS:{icon:r("MWXIconInfoCircle"),text:s._(/*BTDS*/"False information")},MISLEADING_NEWS:{icon:r("MWXIconInfoCircle"),text:s._(/*BTDS*/"Partly false")},MISSING_CONTEXT:{icon:r("MWXIconInfoCircle"),text:s._(/*BTDS*/"Missing context")},SENSITIVE:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Sensitive content")},VIOLENCE:{icon:r("MWXIconEyeCross"),text:s._(/*BTDS*/"Sensitive content")}},f=s._(/*BTDS*/"View post for more info");function g(e,t,n,a){if(a==null||e==null||t==null||n==null)return!1;var i=e==="ai_generated_content",l=a!=null&&o("LSMessagingThreadTypeUtil").isArmadilloSecure(a),s=a!=null&&o("LSMessagingThreadTypeUtil").isPublicCMThread(a);return i?r("qex")._("1581")===!0:l||s}function h(e){switch(e){case"ai_generated_content":return"ai_generated_content";case"misinformation":return"misleading_news";case"misleading_news":return"missing_context";case"missing_context":return"altered_media";case"altered_media":return"altered_media";case"false_news":return"false_news";default:return null}}function y(t){var n=o("react-compiler-runtime").c(34),a=t.dimension,l=t.gatingTitle,s=t.gatingType,u=t.isXMA,d=t.mediaRenderQpl,m=t.messageId,g=t.previewUrl,y=t.xstyle,v=u===void 0?!1:u,S=g===void 0?"":g,R=(e||(e=r("useReStore")))(),L;n[0]!==R.tables.messages||n[1]!==m?(L=function(){return o("ReQL").fromTableAscending(R.tables.messages.index("messageId")).getKeyRange(m)},n[0]=R.tables.messages,n[1]=m,n[2]=L):L=n[2];var E;n[3]!==R||n[4]!==m?(E=[R,m],n[3]=R,n[4]=m,n[5]=E):E=n[5];var k=o("ReQLSuspense").useFirstExn(L,E,i.id+":252"),I=r("gkx")("23219"),T=b,D;n[6]===Symbol.for("react.memo_cache_sentinel")?(D=function(t){var e,n=T(t);return n==null||((e=_[n])==null?void 0:e.icon)==null?r("MWXIconEyeCross"):_[n].icon},n[6]=D):D=n[6];var x=D,$;n[7]===Symbol.for("react.memo_cache_sentinel")?($=function(t){var e,n=T(t);return n==null||((e=_[n])==null?void 0:e.text)==null?null:_[n].text},n[7]=$):$=n[7];var P=$,N;n[8]!==l||n[9]!==v?(N=function(t){switch(t){case"warning_screens":return c.jsx("div",{className:"xbudbmw x10l6tqk xwa60dl x11lhmoz xh8yej3",children:c.jsxs(r("MWXColumn.react"),{spacing:12,verticalAlign:"center",children:[c.jsx(r("MWXColumnItem.react"),{align:"center",children:c.jsx(r("MWXIconStrict.react"),{color:"white",icon:x(l),size:32})}),c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"center",color:"white",numberOfLines:1,type:I?"bodyLink3":"bodyLink4",children:P(l)})}),v?c.jsx(r("MWXColumnItem.react"),{children:c.jsx(r("MWXText.react"),{align:"center",color:"white",type:I?"meta3":"meta4",children:f})}):null]})});case"media_label":case"post_label":return c.jsxs("div",{className:"x6s0dn4 x1gevrdp x1fk37vd x1bmkqan xqb0rpr xsdp72b x12ol6y4 x180vkcf x1khw62d x709u02 x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu x178xt8z x1lun4ml xso031l xpilrb4 xe80o0v x1ihrfj4 x78zum5 x10w6t97 x9q68il xyqdw3p x2vl965 xg8j3zb x25sj25 x10l6tqk xpse7mg x1tk7jg1 xuxw1ft x1vvkbs",children:[c.jsx(r("MWXIconStrict.react"),{color:"white",icon:x(l),size:24}),c.jsx(r("MWXText.react"),{align:"center",color:"white",type:I?"bodyLink3":"bodyLink4",children:P(l)})]});default:return null}},n[8]=l,n[9]=v,n[10]=N):N=n[10];var M=N,w=C,A;n[11]!==a||n[12]!==d||n[13]!==S||n[14]!==y?(A=function(t){switch(t){case"media_label":case"post_label":return c.jsx("div",{style:a,children:c.jsx(r("MWXImage.react"),{alt:"",onError:function(){return d==null?void 0:d.endFail("load-image-error")},onLoad:function(){return d==null?void 0:d.endSuccess()},src:S,xstyle:p.post})});case"warning_screens":default:return c.jsxs("div",{style:a,children:[c.jsx(r("FDSBlurredBackgroundImage.react"),{alt:"",onError:function(){return d==null?void 0:d.endFail("load-image-error")},onLoad:function(){return d==null?void 0:d.endSuccess()},src:S,xstyle:[p.post,y,p.overlay]}),c.jsx("div",{className:"x18l40ae x1ey2m1c xtea3wc xtijo5x x1o0tod x47corl x10l6tqk x13vifvy"})]})}},n[11]=a,n[12]=d,n[13]=S,n[14]=y,n[15]=A):A=n[15];var F=A,O;n[16]===Symbol.for("react.memo_cache_sentinel")?(O={eventName:"inform_treatment_chat_impression"},n[16]=O):O=n[16];var B=r("MessengerWebUXLogger").useImpressionLoggerRef(O),W;n[17]!==k?(W={message:k},n[17]=k,n[18]=W):W=n[18];var q=r("useMWInformTreatmentFalcoEventLogger")(W),U;n[19]!==l||n[20]!==s||n[21]!==q?(U={onImpressionStart:function(){var e=h(l),t=w(s.toLocaleLowerCase());e!=null&&t!=null&&q("impression",{name:e,type:t})}},n[19]=l,n[20]=s,n[21]=q,n[22]=U):U=n[22];var V=r("useSinglePartialViewImpression")(U),H=r("useMergeRefs")(B,V),G;n[23]===Symbol.for("react.memo_cache_sentinel")?(G={className:"x78zum5 x5yr21d x1n2onr6 xh8yej3"},n[23]=G):G=n[23];var z;n[24]!==s||n[25]!==F?(z=F(s.toLocaleLowerCase()),n[24]=s,n[25]=F,n[26]=z):z=n[26];var j;n[27]!==s||n[28]!==M?(j=M(s.toLocaleLowerCase()),n[27]=s,n[28]=M,n[29]=j):j=n[29];var K;return n[30]!==H||n[31]!==z||n[32]!==j?(K=c.jsxs("div",babelHelpers.extends({},G,{ref:H,children:[z,j]})),n[30]=H,n[31]=z,n[32]=j,n[33]=K):K=n[33],K}function C(e){switch(e){case"warning_screens":case"media_label":case"post_label":return e;default:return null}}function b(e){var t=Object.keys(_).find(function(t){return t===e.toUpperCase()});return t}l.checkIsInformedTreatmentVisible=g,l.getEventTitle=h,l.MWInformedTreatment=y}),226);
__d("MWXIconHd",["MWXSvgIcon","SVGIcon","cr:22362","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22362")),r("gkx")("23219"));l.default=e}),98);
__d("MWXMessageBubbleCornerStyles.react",[],(function(t,n,r,o,a,i,l){"use strict";var e={flatBottom:{borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",$$css:!0},flatTop:{borderStartEndRadius:"x1ga7v0g",borderStartStartRadius:"x15mokao",$$css:!0},rounded:{borderStartStartRadius:"xaymx6s",borderStartEndRadius:"x1lu5o8o",borderEndEndRadius:"x1ou5ly4",borderEndStartRadius:"xofb2d2",$$css:!0}},s={connectBottom:{borderEndStartRadius:"x1pczhz8",$$css:!0},connectTop:{borderStartStartRadius:"xjwep3j",$$css:!0}},u={connectBottom:{borderEndEndRadius:"x1wcsgtt",$$css:!0},connectTop:{borderStartEndRadius:"x1t39747",$$css:!0}};function c(t){var n,r,o,a,i,l=(n=t==null?void 0:t.align)!=null?n:"left",c=(r=t==null?void 0:t.connectBottom)!=null?r:!1,d=(o=t==null?void 0:t.connectTop)!=null?o:!1,m=(a=t==null?void 0:t.flatten)!=null?a:"none",p=(i=t==null?void 0:t.corners)!=null?i:"round",_=l==="right"?u:s;return[p==="round"&&e.rounded,d&&_.connectTop,c&&_.connectBottom,(m==="all"||m==="bottom")&&e.flatBottom,(m==="all"||m==="top")&&e.flatTop]}l.getMWXBubbleCornerStyles=c}),98);
__d("MWXAspectRatioContainer.react",["react","react-compiler-runtime","react-strict-dom"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={position:"x1n2onr6",width:"xh8yej3",$$css:!0},c={child:{height:"x5yr21d",insetInlineStart:"x1o0tod",left:null,right:null,position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",$$css:!0},childInner:{maxHeight:"xmz0i5r",maxWidth:"x193iq5w",$$css:!0},flex:{display:"x78zum5",maxWidth:"x193iq5w",$$css:!0},inner:function(t){return[u,{paddingBottom:t!=null?"xjqpyvm":t,$$css:!0},{"--x-paddingBottom":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},outer:function(t,n,r){return[{maxHeight:r!=null?"x1jols5v":r,maxWidth:n!=null?"xf68679":n,width:t!=null?"x5lhr3w":t,$$css:!0},{"--x-maxHeight":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(r),"--x-maxWidth":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(n),"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]}};function d(e){var t=o("react-compiler-runtime").c(22),n=e.children,r=e.height,a=e.maxHeight,i=e.maxWidth,l=e.width,u=l/r,d=i!=null&&a!=null?"min("+i+"px, "+a*u+"px)":a!=null?a*u+"px":i,m;t[0]===Symbol.for("react.memo_cache_sentinel")?(m=[c.flex],t[0]=m):m=t[0];var p;t[1]!==a||t[2]!==d||t[3]!==l?(p=c.outer(l,d!=null?d:"initial",a!=null?a:"initial"),t[1]=a,t[2]=d,t[3]=l,t[4]=p):p=t[4];var _;t[5]!==p?(_=[p],t[5]=p,t[6]=_):_=t[6];var f;t[7]!==u?(f=c.inner(100/u+"%"),t[7]=u,t[8]=f):f=t[8];var g;t[9]!==f?(g=[f],t[9]=f,t[10]=g):g=t[10];var h;t[11]===Symbol.for("react.memo_cache_sentinel")?(h=[c.child],t[11]=h):h=t[11];var y;t[12]!==n?(y=n==null?void 0:n(c.childInner),t[12]=n,t[13]=y):y=t[13];var C;t[14]!==y?(C=s.jsx(o("react-strict-dom").html.div,{style:h,children:y}),t[14]=y,t[15]=C):C=t[15];var b;t[16]!==g||t[17]!==C?(b=s.jsx(o("react-strict-dom").html.div,{style:g,children:C}),t[16]=g,t[17]=C,t[18]=b):b=t[18];var v;return t[19]!==_||t[20]!==b?(v=s.jsx(o("react-strict-dom").html.div,{style:m,children:s.jsx(o("react-strict-dom").html.div,{style:_,children:b})}),t[19]=_,t[20]=b,t[21]=v):v=t[21],v}l.default=d}),98);
__d("MWXMessageImage.react",["BaseImage.react","FDSBlurredBackgroundImage.react","MWXAspectRatioContainer.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e=["children","height","maxHeight","maxWidth","renderImagePlaceholder","shouldBlur","width","xstyle"],s,u,c=u||(u=o("react")),d={container:function(t){return[{maxWidth:t!=null?"xf68679":t,$$css:!0},{"--x-maxWidth":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t)}]},image:{display:"x1lliihq",maxWidth:"x193iq5w",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(24),a,i,l,u,m,p,_,f,g;n[0]!==t?(a=t.children,i=t.height,u=t.maxHeight,m=t.maxWidth,p=t.renderImagePlaceholder,_=t.shouldBlur,f=t.width,g=t.xstyle,l=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l,n[4]=u,n[5]=m,n[6]=p,n[7]=_,n[8]=f,n[9]=g):(a=n[1],i=n[2],l=n[3],u=n[4],m=n[5],p=n[6],_=n[7],f=n[8],g=n[9]);var h;if(n[10]!==i||n[11]!==l||n[12]!==u||n[13]!==m||n[14]!==p||n[15]!==_||n[16]!==f){var y;h=f==null||i==null?c.jsx("div",babelHelpers.extends({},(s||(s=r("stylex"))).props(d.container(m)),{children:(y=p==null?void 0:p())!=null?y:c.jsx(r("BaseImage.react"),babelHelpers.extends({},l,{objectFit:"contain",style:{maxHeight:u+"px"},xstyle:d.image}))})):c.jsx(r("MWXAspectRatioContainer.react"),{height:i,maxHeight:u,maxWidth:m,width:f,children:function(t){var e;return(e=p==null?void 0:p())!=null?e:_!==!0?c.jsx(r("BaseImage.react"),babelHelpers.extends({height:i,width:f,xstyle:t},l)):c.jsx(r("FDSBlurredBackgroundImage.react"),babelHelpers.extends({xstyle:t},l))}}),n[10]=i,n[11]=l,n[12]=u,n[13]=m,n[14]=p,n[15]=_,n[16]=f,n[17]=h}else h=n[17];var C=h,b;n[18]!==g?(b=(s||(s=r("stylex"))).props(g),n[18]=g,n[19]=b):b=n[19];var v;return n[20]!==a||n[21]!==C||n[22]!==b?(v=c.jsxs("div",babelHelpers.extends({},b,{children:[C,a]})),n[20]=a,n[21]=C,n[22]=b,n[23]=v):v=n[23],v}l.default=m}),98);
__d("MWPMessageListImage.react",["LSMessagingThreadTypeUtil","MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType","MWInformedTreatment.react","MWLSThread","MWXIconHd","MWXIconStrict.react","MWXImage.react","MWXMessageBubbleCornerStyles.react","MWXMessageImage.react","MWXPressable.react","MWXThreadThemeColor","ReQL","ReQLSuspense","gkx","react","react-compiler-runtime","stylex","useMWInformTreatmentFalcoEventLogger","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e=["attachment","connectBottom","connectTop","outgoing","overlayAlign","overlayHeight","overlayWidth","xstyle"],s,u,c,d=c||(c=o("react")),m=c,p=m.useCallback,_=m.useState,f={left:"",right:"",position:"x10l6tqk",top:"xuivejd",$$css:!0},g={height:"x16ye13r",insetInlineStart:"xbudbmw",left:"",right:"",position:"x10l6tqk",top:"xwa60dl",transform:"x11lhmoz",width:"x5lhr3w",$$css:!0},h={appAttr:{alignItems:"x6s0dn4",borderBottomWidth:"xso031l",borderTopColor:"x1pdss0j",borderInlineEndColor:"x1593r2a",borderBottomColor:"x81c4ja",borderInlineStartColor:"xewde0t",borderInlineEndWidth:"x1lun4ml",borderInlineStartWidth:"xpilrb4",borderTopStyle:"x13fuv20",borderInlineEndStyle:"x18b5jzi",borderBottomStyle:"x1q0q8m5",borderInlineStartStyle:"x1t7ytsu",borderTopWidth:"x972fbf",boxSizing:"x9f619",display:"x78zum5",lineHeight:"x1rfph6h",paddingTop:"x1iorvi4",paddingInlineEnd:"x1icxu4v",paddingBottom:"xjkvuk6",paddingInlineStart:"x25sj25",$$css:!0},appIcon:{borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",height:"xlup9mm",marginInlineEnd:"xbelrpt",objectFit:"x19kjcj4",width:"x1kky2od",$$css:!0},hdOverlay:function(t){return[f,{insetInlineEnd:(t==="end"?"10px":void 0)!=null?"xqxgn94":t==="end"?"10px":void 0,insetInlineStart:(t==="start"?"10px":void 0)!=null?"x1lxsm33":t==="start"?"10px":void 0,$$css:!0},{"--x-insetInlineEnd":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t==="end"?"10px":void 0),"--x-insetInlineStart":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t==="start"?"10px":void 0)}]},hdOverlayContainer:function(t,n){return[g,{"--x-height":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(t!=null?t+"px":"100%"),"--x-width":(function(e){return typeof e=="number"?e+"px":e!=null?e:void 0})(n!=null?n+"px":"100%")}]},pressable:{alignItems:"x6s0dn4",display:"x78zum5",flexShrink:"xs83m0k",justifyContent:"xl56j7k",maxHeight:"xmz0i5r",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",marginTop:"xdj266r",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1lziwak",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}};function y(e){var t=o("react-compiler-runtime").c(18),n=e.attachment,a=e.connectBottom,i=e.connectTop,l=e.outgoing,u=e.xstyle,c,m,p,_;if(t[0]!==n||t[1]!==a||t[2]!==i||t[3]!==l||t[4]!==u){p=Symbol.for("react.early_return_sentinel");e:{var f=o("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:l===!0?"right":"left",connectBottom:a,connectTop:i,flatten:"top"}),g=n;if(c=g.attributionAppName,c==null){p=null;break e}_=g.attributionAppIcon,m=(s||(s=r("stylex"))).props(h.appAttr,u,f)}t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=u,t[5]=c,t[6]=m,t[7]=p,t[8]=_}else c=t[5],m=t[6],p=t[7],_=t[8];if(p!==Symbol.for("react.early_return_sentinel"))return p;var y;t[9]!==_?(y=_!=null?d.jsx(r("MWXImage.react"),{alt:"",src:_,xstyle:h.appIcon}):null,t[9]=_,t[10]=y):y=t[10];var C;t[11]===Symbol.for("react.memo_cache_sentinel")?(C={className:"xzsf02u x1nxh6w3 x13faqbe"},t[11]=C):C=t[11];var b;t[12]!==c?(b=d.jsx("span",babelHelpers.extends({},C,{children:c})),t[12]=c,t[13]=b):b=t[13];var v;return t[14]!==m||t[15]!==y||t[16]!==b?(v=d.jsxs("div",babelHelpers.extends({},m,{children:[y,b]})),t[14]=m,t[15]=y,t[16]=b,t[17]=v):v=t[17],v}function C(e){var t=o("react-compiler-runtime").c(11),n=e.attachment,a=e.overlayAlign,i=e.overlayHeight,l=e.overlayWidth,u=a===void 0?"end":a,c=n,m=c.isHd===!0;if(!m)return null;var p;t[0]!==i||t[1]!==l?(p=(s||(s=r("stylex"))).props(h.hdOverlayContainer(i,l)),t[0]=i,t[1]=l,t[2]=p):p=t[2];var _;t[3]!==u?(_=(s||(s=r("stylex"))).props(h.hdOverlay(u)),t[3]=u,t[4]=_):_=t[4];var f;t[5]===Symbol.for("react.memo_cache_sentinel")?(f=d.jsx(r("MWXIconStrict.react"),{color:o("MWXThreadThemeColor").mwxThreadThemeColor("rgba(255,255,255,0.7)"),icon:r("MWXIconHd"),size:18}),t[5]=f):f=t[5];var g;t[6]!==_?(g=d.jsx("div",babelHelpers.extends({},_,{"data-testid":void 0,children:f})),t[6]=_,t[7]=g):g=t[7];var y;return t[8]!==p||t[9]!==g?(y=d.jsx("div",babelHelpers.extends({},p,{children:g})),t[8]=p,t[9]=g,t[10]=y):y=t[10],y}function b(e){var t,n=o("react-compiler-runtime").c(26),a=e.attachment,l=e.height,s=e.setIsBlurredImageVisible,c=e.width,m=(u||(u=r("useReStore")))(),p;n[0]!==a.messageId||n[1]!==m.tables.messages?(p=function(){return o("ReQL").fromTableAscending(m.tables.messages.index("messageId")).getKeyRange(a.messageId)},n[0]=a.messageId,n[1]=m.tables.messages,n[2]=p):p=n[2];var _;n[3]!==a.messageId||n[4]!==m?(_=[a.messageId,m],n[3]=a.messageId,n[4]=m,n[5]=_):_=n[5];var f=o("ReQLSuspense").useFirstExn(p,_,i.id+":170"),g;n[6]!==f?(g={message:f},n[6]=f,n[7]=g):g=n[7];var y=r("useMWInformTreatmentFalcoEventLogger")(g),C=(t=o("MWLSThread").useThread(a.threadKey,v))!=null?t:{isSecureThread:!1,threadType:null},b=C.isSecureThread,S=C.threadType,R=a.gatingTitle,L=a.gatingType,E=a.previewUrl,k;n[8]!==L||n[9]!==b?(k=b?o("MAWConvertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType").convertExtendedContentOverlayIconGlyphToInformTreatmentRenderingType(parseInt(L,10)):L,n[8]=L,n[9]=b,n[10]=k):k=n[10];var I=k,T=o("MWInformedTreatment.react").checkIsInformedTreatmentVisible(R,I,E,S);if(I==null||R==null||!T)return null;var D=I==="warning_screens",x=l+"px",$=c!=null?c+"px":"100%",P;n[11]!==x||n[12]!==$?(P={height:x,width:$},n[11]=x,n[12]=$,n[13]=P):P=n[13];var N;n[14]!==a.messageId||n[15]!==R||n[16]!==I||n[17]!==E||n[18]!==P?(N=d.jsx(o("MWInformedTreatment.react").MWInformedTreatment,{dimension:P,gatingTitle:R,gatingType:I,mediaRenderQpl:null,messageId:a.messageId,previewUrl:E}),n[14]=a.messageId,n[15]=R,n[16]=I,n[17]=E,n[18]=P,n[19]=N):N=n[19];var M=N,w;return n[20]!==R||n[21]!==D||n[22]!==M||n[23]!==y||n[24]!==s?(w=D?d.jsx(r("MWXPressable.react"),{onPress:function(){var e=o("MWInformedTreatment.react").getEventTitle(R);s(!0),e!=null&&y("tap_to_reveal",{name:e,type:"warning_screens"})},overlayRadius:"normal",xstyle:h.pressable,children:M}):M,n[20]=R,n[21]=D,n[22]=M,n[23]=y,n[24]=s,n[25]=w):w=n[25],w}function v(e){return{isSecureThread:o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType),threadType:e.threadType}}function S(t){var n,a=o("react-compiler-runtime").c(38),i,l,s,u,c,m,p,f,g;a[0]!==t?(i=t.attachment,l=t.connectBottom,s=t.connectTop,c=t.outgoing,m=t.overlayAlign,p=t.overlayHeight,f=t.overlayWidth,g=t.xstyle,u=babelHelpers.objectWithoutPropertiesLoose(t,e),a[0]=t,a[1]=i,a[2]=l,a[3]=s,a[4]=u,a[5]=c,a[6]=m,a[7]=p,a[8]=f,a[9]=g):(i=a[1],l=a[2],s=a[3],u=a[4],c=a[5],m=a[6],p=a[7],f=a[8],g=a[9]);var v=i.attributionAppName!=null,S=c===!0?"right":"left",L=v===!0?"bottom":"none",E;a[10]!==l||a[11]!==s||a[12]!==S||a[13]!==L?(E=o("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:S,connectBottom:l,connectTop:s,flatten:L}),a[10]=l,a[11]=s,a[12]=S,a[13]=L,a[14]=E):E=a[14];var k=E,I=_(!1),T=I[0],D=I[1],x=(n=o("MWLSThread").useThread(i.threadKey,R))!=null?n:!1,$=r("gkx")("179"),P=i.gatingTitle==="misinformation"||i.gatingTitle==="misleading_news"||i.gatingTitle==="missing_context"||i.gatingTitle==="missing_context"||i.gatingTitle==="altered_media"||i.gatingTitle==="false_news",N=P&&$,M=!T&&i.gatingTitle!=null&&i.gatingType!=null&&x&&!N,w;a[15]!==i||a[16]!==u?(w=function(){var e=u,t=e.height,n=e.maxHeight,r=e.maxWidth,o=e.width;return d.jsx(b,{attachment:i,height:t!=null?Math.min(t,n):n,setIsBlurredImageVisible:D,width:o!=null&&r!=null?Math.min(o,r):o!=null?o:r})},a[15]=i,a[16]=u,a[17]=w):w=a[17];var A=w,F=M?A:void 0,O;a[18]!==k||a[19]!==g?(O=[h.root,g,k],a[18]=k,a[19]=g,a[20]=O):O=a[20];var B;a[21]!==i||a[22]!==l||a[23]!==s||a[24]!==c||a[25]!==g?(B=d.jsx(y,{attachment:i,connectBottom:l,connectTop:s,outgoing:c,xstyle:g}),a[21]=i,a[22]=l,a[23]=s,a[24]=c,a[25]=g,a[26]=B):B=a[26];var W;a[27]!==i||a[28]!==m||a[29]!==p||a[30]!==f?(W=d.jsx(C,{attachment:i,overlayAlign:m,overlayHeight:p,overlayWidth:f}),a[27]=i,a[28]=m,a[29]=p,a[30]=f,a[31]=W):W=a[31];var q;return a[32]!==u||a[33]!==F||a[34]!==O||a[35]!==B||a[36]!==W?(q=d.jsxs(r("MWXMessageImage.react"),babelHelpers.extends({renderImagePlaceholder:F,xstyle:O},u,{children:[B,W]})),a[32]=u,a[33]=F,a[34]=O,a[35]=B,a[36]=W,a[37]=q):q=a[37],q}function R(e){return o("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)||o("LSMessagingThreadTypeUtil").isPublicCMThread(e.threadType)}l.MWPMessageListImageAppAttribution=y,l.MWPMessageListImageHdWatermark=C,l.InformedTreatment=b,l.MWPMessageListImage=S}),98);
__d("MWV2AttachmentLoadingPlaceholder.react",["InteractionTracingMetrics","MWXAspectRatioContainer.react","MWXGlimmer.react","MWXMessageBubbleCornerStyles.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect,c={glimmer:{display:"x1lliihq",height:"x5yr21d",width:"xh8yej3",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(21),n=e.connectBottom,a=e.connectTop,i=e.descriptionForLogging,l=e.hasAppAttribution,d=e.hasCornerStyles,m=e.height,p=e.maxHeight,_=e.maxWidth,f=e.mediaRenderQpl,g=e.outgoing,h=e.width,y=e.xstyle,C=d===void 0?!0:d,b=p===void 0?200:p,v=_===void 0?480:_,S,R;if(t[0]!==i||t[1]!==m||t[2]!==f||t[3]!==h?(S=function(){var e={string:{call_site:i}};return h!=null&&m!=null?f==null||f.addPoint("render-loading-placeholder",e):f==null||f.addPoint("render-loading-placeholder-null-dimensions",e),r("InteractionTracingMetrics").currentInteractionLogger().forEach(function(e){r("InteractionTracingMetrics").addMarkerPoint(e.traceId,"render-attachment-loading-placeholder","AppTiming",void 0,{call_site:i})}),(function(){f==null||f.addPoint("unmount-loading-placeholder",e),r("InteractionTracingMetrics").currentInteractionLogger().forEach(function(e){r("InteractionTracingMetrics").addMarkerPoint(e.traceId,"unmount-attachment-loading-placeholder","AppTiming",void 0,{call_site:i})})})},R=[m,f,h,i],t[0]=i,t[1]=m,t[2]=f,t[3]=h,t[4]=S,t[5]=R):(S=t[4],R=t[5]),u(S,R),h==null||m==null)return null;var L=g===!0?"right":"left",E=l===!0?"bottom":"none",k;t[6]!==n||t[7]!==a||t[8]!==L||t[9]!==E?(k=o("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:L,connectBottom:n,connectTop:a,flatten:E}),t[6]=n,t[7]=a,t[8]=L,t[9]=E,t[10]=k):k=t[10];var I=k,T;t[11]!==I||t[12]!==C||t[13]!==y?(T=function(t){return s.jsx(r("MWXGlimmer.react"),{index:1,xstyle:[t,c.glimmer,C===!0&&I,y]})},t[11]=I,t[12]=C,t[13]=y,t[14]=T):T=t[14];var D;return t[15]!==m||t[16]!==b||t[17]!==v||t[18]!==T||t[19]!==h?(D=s.jsx("div",{"data-testid":void 0,children:s.jsx(r("MWXAspectRatioContainer.react"),{height:m,maxHeight:b,maxWidth:v,width:h,children:T})}),t[15]=m,t[16]=b,t[17]=v,t[18]=T,t[19]=h,t[20]=D):D=t[20],D}l.default=d}),98);
__d("MWXIconPause",["MWXSvgIcon","SVGIcon","cr:22421","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22421")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconPlay",["MWXSvgIcon","SVGIcon","cr:22437","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22437")),r("gkx")("23219"));l.default=e}),98);
__d("MWXIconReplay",["MWXSvgIcon","SVGIcon","cr:22459","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22459")),r("gkx")("23219"));l.default=e}),98);
__d("MWVideoPlayerPlayButton.react",["fbt","MWXIconPause","MWXIconPlay","MWXIconReplay","MWXIconStrict.react","MWXPressable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c={buttonLarge:{height:"xdd8jsf",marginTop:"xuqeo79",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x1vvjuq3",width:"xvni27",$$css:!0},buttonSmall:{height:"xxk0z11",marginTop:"x7wgvq7",marginInlineEnd:"x14z9mp",marginBottom:"xat24cr",marginInlineStart:"x18xomjl",width:"xvy4d1p",$$css:!0},circleButton:{backgroundColor:"x18l40ae",borderStartStartRadius:"x1c9tyrk",borderStartEndRadius:"xeusxvb",borderEndEndRadius:"x1pahc9y",borderEndStartRadius:"x1ertn4p",opacity:"x1hc1fzr",$$css:!0},clickable:{cursor:"x1ypdohk",$$css:!0},container:{alignItems:"x6s0dn4",display:"x78zum5",insetInlineStart:"xbudbmw",left:null,right:null,justifyContent:"xl56j7k",position:"x10l6tqk",top:"xwa60dl",$$css:!0}};function d(e){var t=o("react-compiler-runtime").c(9),n=e.alt,a=e.isVisible,i=e.onClick,l=e.size,d=e.type,m=l===void 0?"LARGE":l,p=d===void 0?"PLAY":d,_;e:switch(p){case"PAUSE":{_=r("MWXIconPause");break e}case"REPLAY":{_=r("MWXIconReplay");break e}case"PLAY":default:_=r("MWXIconPlay")}var f=m==="LARGE"?24:12,g;t[0]!==_||t[1]!==f?(g=u.jsx(r("MWXIconStrict.react"),{color:"white",icon:_,size:f}),t[0]=_,t[1]=f,t[2]=g):g=t[2];var h=g,y;t[3]!==n||t[4]!==h||t[5]!==a||t[6]!==i||t[7]!==m?(y=a?i!=null?u.jsx(r("MWXPressable.react"),{display:"inline",label:n!=null?n:s._(/*BTDS*/"Play video"),onPress:i,overlayDisabled:!0,xstyle:[c.circleButton,c.container,c.clickable,m==="LARGE"&&c.buttonLarge,m==="SMALL"&&c.buttonSmall],children:h}):u.jsx("div",babelHelpers.extends({},{0:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl"},2:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl xdd8jsf xuqeo79 x14z9mp xat24cr x1vvjuq3 xvni27"},1:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p"},3:{className:"x18l40ae x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1hc1fzr x6s0dn4 x78zum5 xbudbmw xl56j7k x10l6tqk xwa60dl xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p"}}[(m==="LARGE")<<1|(m==="SMALL")<<0],{children:h})):null,t[3]=n,t[4]=h,t[5]=a,t[6]=i,t[7]=m,t[8]=y):y=t[8];var C=y;return C}l.default=d}),226);
__d("appendParamToUrl",[],(function(t,n,r,o,a,i){"use strict";function e(e,t,n){var r=new URL(e);return r.searchParams.set(t,n),r.toString()}i.default=e}),66);
__d("useMWMediaViewerOpenQPLLogger",["qpl","react","react-compiler-runtime","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback,u=r("requireDeferred")("QPLUserFlow").__setRef("useMWMediaViewerOpenQPLLogger"),c=r("qpl")._(25298743,"1403"),d=6e3*10;function m(){var e=o("react-compiler-runtime").c(1),t=f,n=_,r=p,a;return e[0]===Symbol.for("react.memo_cache_sentinel")?(a={endCancel:r,endSuccess:n,startFlow:t},e[0]=a):a=e[0],a}function p(e){u.onReadyImmediately(function(t){t.endCancel(c,{cancelReason:e})})}function _(e){u.onReadyImmediately(function(t){t.endSuccess(c,{annotations:e})})}function f(e){var t=e.attachmentType,n=e.entryPoint,r=e.isSecure,o={attachmentType:t,entryPoint:n,isSecure:(r!=null?r:!1).toString()};u.onReadyImmediately(function(e){e.start(c,{annotations:{string:babelHelpers.extends({},o)},cancelOnUnload:!0,timeoutInMs:d})})}l.useMWMediaViewerOpenQPLLogger=m}),98);
__d("useMWV2FocusRowAfterClosingPushView",["MWV2MessageRowIsRowFocusedContext.react","react","react-compiler-runtime","useCometRouterState","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useContext,c=s.useLayoutEffect;function d(){var e=o("react-compiler-runtime").c(12),t=u(o("MWV2MessageRowIsRowFocusedContext.react").context),n=t.isDialogOpened,a=t.setIsDialogOpened,i=t.setFocused,l=r("useCometRouterState")(),s;if(e[0]!==l){if(l==null)s=0;else{var d=l.pushViewStack;s=d==null?0:d.length}e[0]=l,e[1]=s}else s=e[1];var _=r("usePrevious")(s),f;e[2]!==n||e[3]!==s||e[4]!==_||e[5]!==i||e[6]!==a?(f=function(){if(_!=null){n===!0&&_>0&&s===0&&(a(p),i(m));return}},e[2]=n,e[3]=s,e[4]=_,e[5]=i,e[6]=a,e[7]=f):f=e[7];var g;return e[8]!==n||e[9]!==s||e[10]!==_?(g=[n,_,s],e[8]=n,e[9]=s,e[10]=_,e[11]=g):g=e[11],c(f,g),a}function m(){return!0}function p(){return!1}l.default=d}),98);
__d("MWV2MediaViewerContainer.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(12),n=e.actions,r=e.children,a=e.fallbackHeader,i=e.hideActions,l=i===void 0?!1:i,u;t[0]===Symbol.for("react.memo_cache_sentinel")?(u={className:"x1qjc9v5 xal61yo x9f619 x78zum5 xdt5ytf x1iyjqo2 x5yr21d x6ikm8r x10wlt62 x1n2onr6 x87ps6o xh8yej3 x1uvtmcs"},t[0]=u):u=t[0];var c;t[1]!==l?(c={0:{className:"xdg88n9 x10l6tqk x1tk7jg1"},1:{className:"xdg88n9 x10l6tqk x1tk7jg1 x1s85apg"}}[!!l<<0],t[1]=l,t[2]=c):c=t[2];var d;t[3]!==n||t[4]!==c?(d=s.jsx("div",babelHelpers.extends({},c,{children:n})),t[3]=n,t[4]=c,t[5]=d):d=t[5];var m;t[6]!==a?(m=a!=null&&s.jsx("div",{className:"xzwoauc x10l6tqk xfr5jun",children:a}),t[6]=a,t[7]=m):m=t[7];var p;return t[8]!==r||t[9]!==d||t[10]!==m?(p=s.jsxs("div",babelHelpers.extends({},u,{"data-testid":void 0,children:[r,d,m]})),t[8]=r,t[9]=d,t[10]=m,t[11]=p):p=t[11],p}l.default=u}),98);
__d("MWV2MediaViewerActionButton.react",["MWXCircleButton.react","MWXTooltip.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["label","ref"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(11),a,i,l;n[0]!==t?(a=t.label,l=t.ref,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var s=r("gkx")("17009"),c;n[4]!==a||n[5]!==i||n[6]!==l?(c=u.jsx(r("MWXCircleButton.react"),babelHelpers.extends({"aria-label":a,size:s?40:36,type:s?"overlay":"dark-overlay"},i,{ref:l})),n[4]=a,n[5]=i,n[6]=l,n[7]=c):c=n[7];var d;return n[8]!==a||n[9]!==c?(d=u.jsx(r("MWXTooltip.react"),{tooltip:a,children:c}),n[8]=a,n[9]=c,n[10]=d):d=n[10],d}l.default=c}),98);
__d("MWV2MediaViewerCloseControl.react",["fbt","MWV2MediaViewerActionButton.react","MWXIconCross","MWXRowItem.react","emptyFunction","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=s._(/*BTDS*/"Close");function d(e){var t=o("react-compiler-runtime").c(7),n=e.onClose,a;t[0]!==n?(a={0:{},1:{className:"xlshs6z"}}[(n==null)<<0],t[0]=n,t[1]=a):a=t[1];var i=n!=null?n:r("emptyFunction"),l;t[2]!==i?(l=u.jsx(r("MWV2MediaViewerActionButton.react"),{icon:r("MWXIconCross"),label:c,onPress:i}),t[2]=i,t[3]=l):l=t[3];var s;return t[4]!==a||t[5]!==l?(s=u.jsx(r("MWXRowItem.react"),{children:u.jsx("div",babelHelpers.extends({},a,{children:l}))}),t[4]=a,t[5]=l,t[6]=s):s=t[6],s}l.default=d}),226);
__d("MWV2MediaViewerControlsFallback.react",["MWV2MediaViewerCloseControl.react","MWXRow.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(2),n=e.onClose,a;return t[0]!==n?(a=s.jsx(r("MWXRow.react"),{paddingTop:0,spacing:8,children:s.jsx(r("MWV2MediaViewerCloseControl.react"),{onClose:n})}),t[0]=n,t[1]=a):a=t[1],a}l.default=u}),98);
__d("MWV2MediaViewerFallback.react",["MWV2MediaViewerContainer.react","MWV2MediaViewerControlsFallback.react","gkx","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(7),n=e.onClose,a=r("gkx")("17009"),i;t[0]!==n?(i=!a&&s.jsx(r("MWV2MediaViewerControlsFallback.react"),{onClose:n}),t[0]=n,t[1]=i):i=t[1];var l;t[2]!==n?(l=a&&s.jsx(r("MWV2MediaViewerControlsFallback.react"),{onClose:n}),t[2]=n,t[3]=l):l=t[3];var u;return t[4]!==i||t[5]!==l?(u=s.jsx(r("MWV2MediaViewerContainer.react"),{actions:i,fallbackHeader:l,children:null}),t[4]=i,t[5]=l,t[6]=u):u=t[6],u}l.default=u}),98);
__d("useMWV2MediaViewerShowDialog",["JSResourceForInteraction","MWV2MediaViewerFallback.react","react","react-compiler-runtime","useMWXLazyDialog"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useEffect;function c(e){return s.jsx(r("MWV2MediaViewerFallback.react"),{onClose:e})}c.displayName=c.name+" [from "+i.id+"]";function d(e){var t=o("react-compiler-runtime").c(8),n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=r("JSResourceForInteraction")("MWV2MediaViewer.react").__setRef("useMWV2MediaViewerShowDialog"),t[0]=n):n=t[0];var a=r("useMWXLazyDialog")(n,c),i=a[0],l=a[1],s,d;t[1]!==e||t[2]!==l?(s=function(){e||l()},d=[l,e],t[1]=e,t[2]=l,t[3]=s,t[4]=d):(s=t[3],d=t[4]),u(s,d);var m;return t[5]!==l||t[6]!==i?(m=[i,l],t[5]=l,t[6]=i,t[7]=m):m=t[7],m}l.default=d}),98);
__d("XCometMessengerMediaControllerRouteBuilder",["jsRouteBuilder"],(function(t,n,r,o,a,i,l){var e=r("jsRouteBuilder")("/messenger_media/",Object.freeze({}),void 0),s=e;l.default=s}),98);
__d("useMWV2MediaViewerURL",["I64","Int64Hooks","XCometMessengerMediaControllerRouteBuilder","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){var n=o("react-compiler-runtime").c(3),a,i;return n[0]!==t?(a=function(){return t==null?null:r("XCometMessengerMediaControllerRouteBuilder").buildURL({attachment_id:t.attachmentFbid,message_id:t.messageId,thread_id:(e||(e=o("I64"))).to_string(t.threadKey)})},i=[t],n[0]=t,n[1]=a,n[2]=i):(a=n[1],i=n[2]),o("Int64Hooks").useMemoInt64(a,i)}l.default=s}),98);
__d("MWAnimatedImageThumbnailWithPlayButton.react",["fbt","$InternalEnum","CometHeroHoldTrigger.react","CometPlaceholder.react","I64","LSAuthorityLevel","LSIntEnum","MAWAttachmentBlob.react","MAWImageUtils","MAWThreadCutover","MWAnimatedImageControlsUtil","MWLSThreadDisplayContext","MWMessageListImageSizingUtils","MWPMessageListImage.react","MWV2AttachmentLoadingPlaceholder.react","MWV2LogMessageClick","MWVideoPlayerPlayButton.react","MWXAspectRatioContainer.react","MWXImage.react","MWXMessageBubbleCornerStyles.react","MWXPressable.react","appendParamToUrl","gkx","justknobx","promiseDone","react","react-compiler-runtime","useAsyncReStore","useMWMediaViewerOpenQPLLogger","useMWV2FocusRowAfterClosingPushView","useMWV2MediaViewerShowDialog","useMWV2MediaViewerURL"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c,d=e||(e=o("react")),m=e,p=m.useCallback,_=m.useEffect,f=m.useState,g=25,h={imageWithAppAttribution:{borderEndEndRadius:"x16uus16",borderEndStartRadius:"xbiv7yw",bottom:"x1ey2m1c",position:"x1n2onr6",$$css:!0},wrapper:{display:"x1lliihq",$$css:!0},wrapperForAppAttribution:{marginBottom:"x1ibc7va",$$css:!0},wrapperReplyImage:{cursor:"x1ypdohk",$$css:!0}},y=n("$InternalEnum").Mirrored(["Composer","GIFPicker","MediaViewer","Thread"]);function C(e){var t=o("react-compiler-runtime").c(2),n;return t[0]!==e?(n=d.jsx(r("CometPlaceholder.react"),{fallback:null,name:"MWAnimatedImageThumbnailWithPlayButton",children:d.jsx(b,babelHelpers.extends({},e))}),t[0]=e,t[1]=n):n=t[1],n}function b(e){var t,n,a=e.altText,i=e.connectBottom,l=e.connectTop,m=e.dbAttachment,g=e.entryPoint,C=e.gifPreviewUrl,b=e.isReplyImage,v=b===void 0?!1:b,S=e.isSecure,R=e.mediaRenderQpl,L=e.message,E=e.onPlay,k=e.onPress,I=e.outgoing,T=e.previewHeight,D=e.previewWidth,x=e.sourceURL,$=e.testid,P=r("useAsyncReStore")(),N=o("MWAnimatedImageControlsUtil").useGetMessengerAutoplaySetting(),M=f(null),w=M[0],A=M[1],F=r("useMWV2MediaViewerURL")(m),O=o("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),B=o("MWMessageListImageSizingUtils").getMaxPreviewHeightAndWidth(S!=null?S:!0,O!=null?O:void 0,!1),W=B.maxHeight,q=B.maxWidth,U=p(function(){R==null||R.endSuccess({bool:{thumbnail_generated_for_gif:!0}})},[R]),V=p(function(){R==null||R.endFail("gif-thumbnail-render-failed")},[R]),H=m!=null&&m.previewUrl==null&&S!==!1?o("MAWAttachmentBlob.react").getAttachmentBlob_CausesSuspense(m,"gifToBlob",R):void 0,G=r("useMWV2FocusRowAfterClosingPushView")(),z=r("useMWV2MediaViewerShowDialog")(!1),j=z[0],K=o("useMWMediaViewerOpenQPLLogger").useMWMediaViewerOpenQPLLogger(),Q=K.startFlow,X=g===y.Thread,Y=g===y.Composer,J=g===y.MediaViewer,Z=g===y.GIFPicker;_(function(){var e=null;async function t(){R==null||R.addPoint("gif-thumbnail-generation-started");var t=C;if(t==null)if(m==null&&x!=null)t=x;else try{(m==null?void 0:m.previewUrl)!=null?t=m==null?void 0:m.previewUrl:H!=null&&(t=H)}catch(e){return null}if(t==null)return null;var n=/^(?:data|blob):/.test(t);n||(t=r("appendParamToUrl")(t,"not-from-cache-please",""));var a=r("gkx")("12666"),i=await o("MAWImageUtils").generateGIFThumbnail(t,T,D,a);if(R==null||R.addPoint("gif-thumbnail-generation-completed"),i!=null){R==null||R.addPoint("gif-thumbnail-generation-completed-successfully");var l=new Blob([i.jpegThumbnail]);e=URL.createObjectURL(l),A(e)}}return t().catch(function(){R==null||R.endFail("gif-thumbnail-generation-failed"),A(null)}),function(){e!=null&&URL.revokeObjectURL(e)}},[m,C,R,T,D,x,H]);var ee=r("justknobx")._("3133"),te=o("MAWThreadCutover").useIsCutoverOpenThread(L==null?void 0:L.threadKey)&&ee,ne=S===!1&&!te&&X&&L!=null&&(u||(u=o("I64"))).gt(L.authorityLevel,(c||(c=o("LSIntEnum"))).ofNumber(r("LSAuthorityLevel").CLIENT_PARTIAL))?{passthroughProps:{origSrc:m==null?void 0:m.previewUrl},url:F}:void 0,re=function(){if(L!=null&&r("promiseDone")(P,function(e){o("MWV2LogMessageClick").log(e,L,28)}),Q({attachmentType:"IMAGE",entryPoint:"thread_view",isSecure:S}),G(function(){return!0}),m!=null&&(S===!0||te))return j({attachment:m},function(){})},oe=(m==null?void 0:m.attributionAppName)!=null,ae=o("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:I===!0?"right":"left",connectBottom:i,connectTop:l});if(T==null||D==null)return null;var ie=(t=m==null?void 0:m.accessibilitySummaryText)!=null?t:a,le=s._(/*BTDS*/"Tap to play GIF {gif_alt_text}",[s._param("gif_alt_text",(n=m==null?void 0:m.accessibilitySummaryText)!=null?n:a)]);if(X){var se;ie=s._(/*BTDS*/"Open GIF {gif_alt_text}",[s._param("gif_alt_text",(se=m==null?void 0:m.accessibilitySummaryText)!=null?se:a)])}else if(Z){var ue;ie=s._(/*BTDS*/"Send GIF {gif_alt_text}",[s._param("gif_alt_text",(ue=m==null?void 0:m.accessibilitySummaryText)!=null?ue:a)])}else if(J){var ce,de;ie=(ce=(de=m==null?void 0:m.accessibilitySummaryText)!=null?de:a)!=null?ce:s._(/*BTDS*/"GIF")}var me=v||J;return d.jsx(r("MWXPressable.react"),{"aria-label":ie,cursorDisabled:me,disabled:me,display:"block",linkProps:ne,onPress:me?void 0:X?re:k,testid:void 0,xstyle:[h.wrapper,oe&&h.wrapperForAppAttribution,v&&h.wrapperReplyImage],children:d.jsx(r("MWXAspectRatioContainer.react"),{height:T,maxHeight:X?W:T,maxWidth:X?q:D,width:D,children:function(t){var e;return d.jsxs(d.Fragment,{children:[w==null?d.jsxs(d.Fragment,{children:[d.jsx(r("MWV2AttachmentLoadingPlaceholder.react"),{connectBottom:i,connectTop:l,descriptionForLogging:"MAWSecureGIFAttachment.NoGIFThumbnail",hasAppAttribution:oe,hasCornerStyles:X,height:T,maxHeight:X?W:T,maxWidth:X?q:D,mediaRenderQpl:R,outgoing:I,width:D,xstyle:[t,X&&ae,oe&&h.imageWithAppAttribution]}),d.jsx(r("CometHeroHoldTrigger.react"),{description:"MAWSecureGIFAttachment.NoGIFThumbnail",hold:!0})]}):d.jsx(r("MWXImage.react"),{alt:(e=m==null?void 0:m.accessibilitySummaryText)!=null?e:a,height:T,onError:V,onLoad:U,src:w,width:D,xstyle:[t,X&&ae,oe&&h.imageWithAppAttribution]}),m!=null&&oe&&X&&d.jsx("div",{className:"x1f1lzrh x10l6tqk xh8yej3",children:d.jsx(o("MWPMessageListImage.react").MWPMessageListImageAppAttribution,{attachment:m,connectBottom:i,connectTop:l,outgoing:I})}),N===o("MWAnimatedImageControlsUtil").MWAutoplayAnimationsSetting.OFF&&d.jsx(r("MWVideoPlayerPlayButton.react"),{alt:le,isVisible:!0,onClick:v?void 0:E,size:v||Y?"SMALL":"LARGE"})]})}})})}b.displayName=b.name+" [from "+i.id+"]",l.AnimatedImageEntryPoint=y,l.MWAnimatedImageThumbnailWithPlayButton=C}),226);
__d("MWVideoPlayerControllerContext.react",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({ref:{current:null}});l.default=u}),98);
__d("MWXIconChevronLeft",["MWXSvgIcon","SVGIcon","cr:22266","gkx"],(function(t,n,r,o,a,i,l){"use strict";var e=o("MWXSvgIcon").mwxSvgIcon(o("SVGIcon").svgIcon(n("cr:22266")),r("gkx")("23219"));l.default=e}),98);
__d("MWXVideoStatusListener.react",["getErrorNameFromMediaErrorCode","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useEffect;function u(e){var t=o("react-compiler-runtime").c(5),n=e.onError,a=e.onLoad,i=e.videoRef,l,u;return t[0]!==n||t[1]!==a||t[2]!==i?(l=function(){var e=i==null?void 0:i.current,t=function(){a==null||a()},o=function(t){var e=t.currentTarget,o=e.error,a=r("getErrorNameFromMediaErrorCode")(o==null?void 0:o.code);n==null||n(a)};if((e==null?void 0:e.readyState)!=null&&e.readyState>=2){t();return}return e==null||e.addEventListener("canplay",t),e==null||e.addEventListener("error",o),(function(){e==null||e.removeEventListener("canplay",t),e==null||e.removeEventListener("error",o)})},u=[n,a,i],t[0]=n,t[1]=a,t[2]=i,t[3]=l,t[4]=u):(l=t[3],u=t[4]),s(l,u),null}l.default=u}),98);
__d("MessengerChevronRightFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M14.116 27.134a1.25 1.25 0 0 1 0-1.768l7.19-7.19a.25.25 0 0 0 0-.353l-7.19-7.19a1.25 1.25 0 0 1 1.768-1.767l8.25 8.25a1.25 1.25 0 0 1 0 1.768l-8.25 8.25a1.25 1.25 0 0 1-1.768 0z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerEyeCrossFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M20.292 10.405c.399-.4.23-1.075-.322-1.19A9.722 9.722 0 0 0 18 9c-4.057 0-9.486 3.07-12.577 7.62a2.451 2.451 0 0 0 0 2.76c.605.889 1.298 1.722 2.054 2.487a.962.962 0 0 0 1.366-.013L11.697 19c.214-.215.315-.515.306-.818a6 6 0 0 1 6.18-6.18c.302.01.602-.09.817-.305l1.292-1.292z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"m19.803 14.429 1.464-1.463 2.404-2.404 3.196-3.196a1.25 1.25 0 1 1 1.768 1.768l-2.13 2.13a.777.777 0 0 0 .087 1.16c1.51 1.168 2.893 2.59 3.985 4.197a2.451 2.451 0 0 1 0 2.758C27.487 23.93 22.057 27 18 27c-1.541 0-3.28-.443-5.014-1.242a1.039 1.039 0 0 0-1.171.196l-2.681 2.681a1.25 1.25 0 1 1-1.768-1.768l2.762-2.761 2.838-2.84 1.463-1.462 5.374-5.375zm3.54.84c-.144-.284-.52-.323-.745-.098l-.77.77a.544.544 0 0 0-.108.586 4 4 0 0 1-5.193 5.193.543.543 0 0 0-.586.108l-.77.77c-.225.225-.185.6.097.746a6 6 0 0 0 8.075-8.075z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerHdFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M21 19.75c0 .138.112.25.25.25h1.25a2 2 0 1 0 0-4h-1.25a.25.25 0 0 0-.25.25v3.5z"}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M10 9a4 4 0 0 0-4 4v10a4 4 0 0 0 4 4h16a4 4 0 0 0 4-4V13a4 4 0 0 0-4-4H10zm0 5.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v2.25c0 .138.112.25.25.25h2.5a.25.25 0 0 0 .25-.25V14.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-2.25a.25.25 0 0 0-.25-.25h-2.5a.25.25 0 0 0-.25.25v2.25a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-7zm9.5-.5a.5.5 0 0 0-.5.5v7a.5.5 0 0 0 .5.5h3a4 4 0 0 0 0-8h-3z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerInfoCircleFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{fillRule:"evenodd",clipRule:"evenodd",d:"M18 29c6.075 0 11-4.925 11-11S24.075 7 18 7 7 11.925 7 18s4.925 11 11 11zm1.75-16.25a1.75 1.75 0 1 1-3.5 0 1.75 1.75 0 0 1 3.5 0zM16.5 17.5a1 1 0 0 1 1-1h1a1 1 0 0 1 1 1V24a1 1 0 0 1-1 1h-1a1 1 0 0 1-1-1v-6.5z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPauseFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M11 8.5A1.5 1.5 0 0 0 9.5 10v16a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5V10A1.5 1.5 0 0 0 15 8.5h-4zM21 8.5a1.5 1.5 0 0 0-1.5 1.5v16a1.5 1.5 0 0 0 1.5 1.5h4a1.5 1.5 0 0 0 1.5-1.5V10A1.5 1.5 0 0 0 25 8.5h-4z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerPlayFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M10 25.498V10.502a1.5 1.5 0 0 1 2.17-1.342l14.997 7.498c1.105.553 1.105 2.13 0 2.684L12.17 26.84A1.5 1.5 0 0 1 10 25.498z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("MessengerReplayFilled.svg.react",["XPlatReactSVG","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){return s.jsxs(o("XPlatReactSVG").Svg,babelHelpers.extends({viewBox:"0 0 36 36",fill:"currentColor",width:"1em",height:"1em",title:e.title},e,{children:[e.children!=null&&s.jsx(o("XPlatReactSVG").Defs,{children:e.children}),s.jsx(o("XPlatReactSVG").Path,{d:"M11.192 12.314c.532.339.618 1.08.255 1.596a8 8 0 1 0 6.803-3.406.245.245 0 0 0-.25.246v1.415a.833.833 0 0 1-1.28.703l-4.582-2.915a.833.833 0 0 1 0-1.406l4.581-2.915A.833.833 0 0 1 18 6.335V7.75c0 .138.113.25.25.253 5.684.133 10.25 4.782 10.25 10.497 0 2.33-.758 4.481-2.042 6.223a10.534 10.534 0 0 1-4.453 3.486l-.005.002a10.468 10.468 0 0 1-5.074.735C11.632 28.408 7.5 23.936 7.5 18.5c0-2.33.758-4.481 2.042-6.223.293-.398.846-.474 1.264-.209l.386.246z"})]}))}u.displayName=u.name+" [from "+i.id+"]",u._isSVG=!0;var c=u;l.default=c}),98);
__d("getOwnObjectValues",[],(function(t,n,r,o,a,i){function e(e){return Object.keys(e).map(function(t){return e[t]})}i.default=e}),66);
__d("getVideoPlayerUserFacingErrorMessageFromError",["fbt","gkx"],(function(t,n,r,o,a,i,l,s){"use strict";function e(e){return r("gkx")("24345")&&e.message.toLowerCase().indexOf("audio_renderer_error")>=0}function u(e){return e.message.indexOf("DEVICE_CERTIFICATE_REVOKED")>=0}function c(e){return e.name.indexOf("VideoImplementationsDashManifestUnsupportedCodecs")>=0||e.name.indexOf("VideoImplementationsMediaSourceUnsupported")>=0}function d(e){return e.name==="OZ_NETWORK"&&e.message.includes("CDN URL expired")}function m(t){var n=null;return e(t)?n=s._(/*BTDS*/"Audio renderer error: Please restart your computer."):u(t)?n=s._(/*BTDS*/"This video is DRM-protected, but your device certificate appears to be revoked. Please make sure your browser is up to date, and try again."):c(t)?n=s._(/*BTDS*/"This video cannot be played in the browser, operating system, or hardware you're using."):d(t)&&(n=s._(/*BTDS*/"This video content isn't available right now.")),n}l.default=m}),226);
__d("VideoPlayerX.react",["VideoPlayerErrorBoundary.react","VideoPlayerXImpl.react","defaultErrorBoundaryFallback","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn","errorBoundaryFallback"],s,u=s||(s=o("react"));function c(t){var n=o("react-compiler-runtime").c(10),a,i,l;n[0]!==t?(l=t.doNotRenderErrorBoundaryIUnderstandIMustProvideMyOwn,a=t.errorBoundaryFallback,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var s=l===void 0?!1:l,c=i.videoPlayerSpherical!=null,d;n[4]!==i||n[5]!==c?(d=u.jsx(r("VideoPlayerXImpl.react"),babelHelpers.extends({VideoPlayerShakaPerformanceLoggerClass:null,isSpherical:c},i)),n[4]=i,n[5]=c,n[6]=d):d=n[6];var m=d;if(s)return m;var p=a!=null?a:r("defaultErrorBoundaryFallback"),_;return n[7]!==m||n[8]!==p?(_=u.jsx(r("VideoPlayerErrorBoundary.react"),{description:"VideoPlayerX",fallback:p,children:m}),n[7]=m,n[8]=p,n[9]=_):_=n[9],_}l.default=c}),98);/*FB_PKG_DELIM*/
__d("CometNotificationsRootContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={isNotificationsRoute:!1,source:null},c=s.createContext(u);l.default=c}),98);
__d("CometVideoPictureInPictureManagerContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).createContext,u=s({openPipPlayer:function(){},setController:function(){},setPipPortableVideoID:function(){}}),c=s({hasNextChainedVideo:!1,isPipEnabled:!1,setHasNextChainedVideo:function(){},setSkippedFromPipPlayer:function(){},skippedFromPipPlayer:!1});function d(){return!1}function m(){return!1}l.CometVideoPictureInPictureManagerAPIContext=u,l.CometVideoPictureInPictureManagerContext=c,l.isInPictureInPictureExp=d,l.isInPictureInPictureExpControlGroup=m}),98);
__d("PlaybackSpeedExperiments",["CurrentUser","gkx"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("gkx")("26216")}function s(){return!1}function u(){return!!(e()||s())}function c(){return s(),!1}function d(){return r("CurrentUser").getID()!=="0"}function m(){return e()?!1:s()?!0:(c(),!1)}function p(){return!0}l.enableWwwPlaybackSpeedControl=u,l.isInCometHeadroomTest=c,l.enableCometPlaybackSpeedControl=d,l.enableCometPlaybackSpeedControlNUX=m,l.enablePlaybackSpeedLogging=p}),98);
__d("VideoControlsContainerFocusedContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(!1);l.default=u}),98);
__d("VideoHomeTypedLiteLogger",["generateLiteTypedLogger"],(function(t,n,r,o,a,i){"use strict";a.exports=n("generateLiteTypedLogger")("logger:VideoHomeLoggerConfig")}),null);
__d("VideoPlayerControlsHiddenContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext(!1);l.default=u}),98);
__d("VideoPlayerControlIcon.react",["BaseFocusRing.react","BaseTooltip.react","CometPressable.react","CometTooltipImpl.react","FDSIcon.react","VideoPlayerControlsHiddenContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e=["tooltipOffsetY","children"],s=["color","disabled","icon","label","tooltip","tooltipAlign","tooltipImpl","tooltipOffsetY"],u,c=u||(u=o("react")),d=u.useContext,m={default:{backgroundColor:"xjbqb8w",borderTop:"x76ihet",borderInlineEnd:"xtmcdsl",borderBottom:"x112ta8",borderInlineStart:"x4gj9lk",cursor:"x1ypdohk",display:"x1rg5ohu",height:"x1qx5ct2",marginTop:"x1k70j0n",marginInlineEnd:"xbelrpt",marginBottom:"xzueoph",marginInlineStart:"xdzw4kq",opacity:"x1iy03kw",outline:"x1a2a7pz",paddingTop:"xexx8yu",paddingInlineEnd:"xyri2b",paddingBottom:"x18d9i69",paddingInlineStart:"x1c1uobl",":hover_opacity":"x1o7uuvo",$$css:!0},disabled:{cursor:"xt0e3qv",opacity:"xbyyjgo",":hover_opacity":"xj34u2y",$$css:!0},dropShadow:{filter:"x1qo4wvw",$$css:!0}};function p(t){var n=o("react-compiler-runtime").c(21),a,i,l;n[0]!==t?(l=t.tooltipOffsetY,a=t.children,i=babelHelpers.objectWithoutPropertiesLoose(t,e),n[0]=t,n[1]=a,n[2]=i,n[3]=l):(a=n[1],i=n[2],l=n[3]);var s=Math.min(0,l!=null?l:0),u;n[4]===Symbol.for("react.memo_cache_sentinel")?(u="xuk3077 x78zum5 x14atkfc",n[4]=u):u=n[4];var d;n[5]!==s?(d={marginTop:s},n[5]=s,n[6]=d):d=n[6];var m;n[7]===Symbol.for("react.memo_cache_sentinel")?(m="xuk3077 x78zum5 x14atkfc",n[7]=m):m=n[7];var p=-s,_;n[8]!==p?(_={paddingTop:p},n[8]=p,n[9]=_):_=n[9];var f;n[10]!==a?(f=typeof a=="function"?a(void 0):a,n[10]=a,n[11]=f):f=n[11];var g;n[12]!==_||n[13]!==f?(g=c.jsx("span",{className:m,style:_,children:f}),n[12]=_,n[13]=f,n[14]=g):g=n[14];var h;n[15]!==i||n[16]!==g?(h=c.jsx(r("BaseTooltip.react"),babelHelpers.extends({},i,{children:g})),n[15]=i,n[16]=g,n[17]=h):h=n[17];var y;return n[18]!==d||n[19]!==h?(y=c.jsx("span",{className:u,style:d,children:h}),n[18]=d,n[19]=h,n[20]=y):y=n[20],y}function _(e){var t=o("react-compiler-runtime").c(23),n,a,i,l,u,_,f,g,h;t[0]!==e?(u=e.color,a=e.disabled,i=e.icon,l=e.label,_=e.tooltip,f=e.tooltipAlign,g=e.tooltipImpl,h=e.tooltipOffsetY,n=babelHelpers.objectWithoutPropertiesLoose(e,s),t[0]=e,t[1]=n,t[2]=a,t[3]=i,t[4]=l,t[5]=u,t[6]=_,t[7]=f,t[8]=g,t[9]=h):(n=t[1],a=t[2],i=t[3],l=t[4],u=t[5],_=t[6],f=t[7],g=t[8],h=t[9]);var y=u===void 0?"white":u,C=_===void 0?null:_,b=f===void 0?"start":f,v=d(r("VideoPlayerControlsHiddenContext")),S=g!=null?g:r("CometTooltipImpl.react"),R;t[10]!==n||t[11]!==y||t[12]!==a||t[13]!==i||t[14]!==v||t[15]!==l?(R=c.jsx(r("BaseFocusRing.react"),{children:function(t){return c.jsx(r("CometPressable.react"),babelHelpers.extends({},n,{disabled:a,display:"inline",label:l,overlayDisabled:!0,testid:void 0,xstyle:[m.default,a===!0&&m.disabled,t,v===!0&&m.dropShadow],children:c.jsx(r("FDSIcon.react"),{color:y,icon:i,size:20})}))}}),t[10]=n,t[11]=y,t[12]=a,t[13]=i,t[14]=v,t[15]=l,t[16]=R):R=t[16];var L;return t[17]!==S||t[18]!==R||t[19]!==C||t[20]!==b||t[21]!==h?(L=c.jsx(p,{align:b,position:"above",tooltip:C,tooltipImpl:S,tooltipOffsetY:h,children:R}),t[17]=S,t[18]=R,t[19]=C,t[20]=b,t[21]=h,t[22]=L):L=t[22],L}l.default=_}),98);
__d("VideoPlayerControlsBottomRowAddOnContext",["react","react-compiler-runtime","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e,c=u.useContext,d=u.useEffect,m=u.useState,p=s.createContext(null);function _(e){var t=o("react-compiler-runtime").c(3),n=e.children,a=r("useStable")(f),i;return t[0]!==n||t[1]!==a?(i=s.jsx(p.Provider,{value:a,children:n}),t[0]=n,t[1]=a,t[2]=i):i=t[2],i}function f(){var e=null,t=null,n=null;return{getBottomRowAddOn:function(){return t},initialize:function(o){n=function(n){t=n,o(n)},e!=null&&(n(e),e=null)},setBottomRowAddOn:function(r){if(n==null){e=r;return}n(r)}}}function g(e){var t=o("react-compiler-runtime").c(3),n=c(p),r=m(e),a=r[0],i=r[1],l,s;return t[0]!==n?(l=function(){n!=null&&n.initialize(i)},s=[n],t[0]=n,t[1]=l,t[2]=s):(l=t[1],s=t[2]),d(l,s),a}function h(e){var t=o("react-compiler-runtime").c(4),n=c(p),r,a;t[0]!==e||t[1]!==n?(r=function(){n!=null&&n.setBottomRowAddOn(e)},a=[e,n],t[0]=e,t[1]=n,t[2]=r,t[3]=a):(r=t[2],a=t[3]),d(r,a)}l.VideoPlayerControlsBottomRowAddOnContext=p,l.VideoPlayerControlsBottomRowAddOnContextProvider=_,l.useVideoPlayerControlsBottomRowAddOn=g,l.useSetVideoPlayerControlsBottomRowAddOn=h}),98);
__d("VideoPlayerControlsContainerOverlay.react",["CometErrorBoundary.react","FocusWithinHandler.react","VideoControlsContainerFocusedContext","VideoPlayerControlsBottomRowAddOnContext","VideoPlayerControlsHiddenContext","VideoPlayerHooks","react","react-compiler-runtime","stylex","useResizeObserver"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useEffect,p=d.useState,_=44,f={backgroundGradient:{backgroundImage:"x11v4dcs",bottom:"x1ey2m1c",position:"x10l6tqk",transitionDuration:"x1d8287x",transitionProperty:"x6o7n8i",transitionTimingFunction:"xl405pv",width:"xh8yej3",zIndex:"x8knxv4",$$css:!0},hidden:{opacity:"xg01cxk",pointerEvents:"x47corl",visibility:"xlshs6z",$$css:!0},visible:{opacity:"x1hc1fzr",$$css:!0}};function g(t){var n=o("react-compiler-runtime").c(18),a=t.children,i=t.height,l=t.initialBottomRowAddOn,s=t.isBackgroundVisible,d=t.isVisible,g=t.xstyle,h=l===void 0?null:l,y=p(0),C=y[0],b=y[1],v;n[0]===Symbol.for("react.memo_cache_sentinel")?(v=function(t){b(t.height)},n[0]=v):v=n[0];var S=r("useResizeObserver")(v),R=o("VideoPlayerControlsBottomRowAddOnContext").useVideoPlayerControlsBottomRowAddOn(h),L=(u||(u=o("VideoPlayerHooks"))).useVideoPlayerCaptionsReservationActions(),E=L.release,k=L.reserve,I=i!=null?i:_,T,D;n[1]!==I||n[2]!==s||n[3]!==d||n[4]!==E||n[5]!==k?(T=function(){if(d||s){var e=k({location:"bottom",size:I});return(function(){E(e)})}},D=[d,s,k,E,I],n[1]=I,n[2]=s,n[3]=d,n[4]=E,n[5]=k,n[6]=T,n[7]=D):(T=n[6],D=n[7]),m(T,D);var x=s===!1||d===!1,$=s===!0||d===!0,P;return n[8]!==R||n[9]!==C||n[10]!==S||n[11]!==a||n[12]!==I||n[13]!==x||n[14]!==$||n[15]!==d||n[16]!==g?(P=c.jsx(r("FocusWithinHandler.react"),{children:function(n,o){return c.jsx(r("VideoControlsContainerFocusedContext").Provider,{value:o,children:c.jsxs("div",babelHelpers.extends({},{0:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h"},4:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np"},2:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h xg01cxk x47corl xlshs6z"},6:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np xg01cxk x47corl xlshs6z"},1:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x1hc1fzr"},5:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np x1hc1fzr"},3:{className:"x1ey2m1c x1q0g3np x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x47corl xlshs6z x1hc1fzr"},7:{className:"x1ey2m1c x10l6tqk x1d8287x x6o7n8i xl405pv xh8yej3 x11uqc5h x6s0dn4 xzt5al7 x78zum5 x1q0g3np x47corl xlshs6z x1hc1fzr"}}[(R==null)<<2|(d===!1)<<1|(d===!0)<<0],{"data-testid":void 0,children:[c.jsx("div",{className:(e||(e=r("stylex")))(f.backgroundGradient,x&&f.hidden,$&&f.visible,g),style:{height:I+C}}),c.jsx(r("VideoPlayerControlsHiddenContext").Provider,{value:x,children:R==null?a:c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"x6s0dn4 xzt5al7 x78zum5 x1q0g3np",children:a}),c.jsx(r("CometErrorBoundary.react"),{children:c.jsx("div",{ref:S,children:R})})]})})]}))})}}),n[8]=R,n[9]=C,n[10]=S,n[11]=a,n[12]=I,n[13]=x,n[14]=$,n[15]=d,n[16]=g,n[17]=P):P=n[17],P}l.default=g}),98);
__d("VideoPlayerControlsGroups.react",["VideoControlsContainerFocusedContext","VideoPlayerControlsHiddenContext","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=e.useContext;function c(e){var t=o("react-compiler-runtime").c(10),n=e.children,a=e.isVisible,i=e.noPaddingEnd,l=e.noPaddingStart,c=a===void 0?!0:a,d=i===void 0?!1:i,m=l===void 0?!1:l,p=u(r("VideoControlsContainerFocusedContext")),_=c||p,f=u(r("VideoPlayerControlsHiddenContext")),g;t[0]!==_||t[1]!==d||t[2]!==m?(g={0:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 xaso8d8 x1fmh03i x47corl"},4:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xaso8d8 xyri2b x1fmh03i x47corl"},2:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 x1c1uobl x1fmh03i x47corl"},6:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xyri2b x1c1uobl x1fmh03i x47corl"},1:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 xaso8d8 x1hc1fzr"},5:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xaso8d8 xyri2b x1hc1fzr"},3:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x1gabggj x18d9i69 x1c1uobl x1hc1fzr"},7:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 xexx8yu x18d9i69 xyri2b x1c1uobl x1hc1fzr"}}[!!d<<2|!!m<<1|!!_<<0],t[0]=_,t[1]=d,t[2]=m,t[3]=g):g=t[3];var h=f||!_,y;t[4]!==n||t[5]!==h?(y=s.jsx(r("VideoPlayerControlsHiddenContext").Provider,{value:h,children:n}),t[4]=n,t[5]=h,t[6]=y):y=t[6];var C;return t[7]!==g||t[8]!==y?(C=s.jsx("div",babelHelpers.extends({},g,{children:y})),t[7]=g,t[8]=y,t[9]=C):C=t[9],C}function d(e){var t=o("react-compiler-runtime").c(8),n=e.children,a=e.isVisible,i=a===void 0?!0:a,l=u(r("VideoControlsContainerFocusedContext")),c=i||l,d=u(r("VideoPlayerControlsHiddenContext")),m;t[0]!==c?(m={0:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 x1iyjqo2 x1fmh03i x47corl"},1:{className:"x6s0dn4 x78zum5 x1q0g3np x2lah0s xozqiw3 x1iyjqo2 x1hc1fzr"}}[!!c<<0],t[0]=c,t[1]=m):m=t[1];var p=d||!c,_;t[2]!==n||t[3]!==p?(_=s.jsx(r("VideoPlayerControlsHiddenContext").Provider,{value:p,children:n}),t[2]=n,t[3]=p,t[4]=_):_=t[4];var f;return t[5]!==m||t[6]!==_?(f=s.jsx("div",babelHelpers.extends({},m,{children:_})),t[5]=m,t[6]=_,t[7]=f):f=t[7],f}l.Contracted=c,l.Expanded=d}),98);
__d("VideoPlayerDefaultControlsProperties",["$InternalEnum"],(function(t,n,r,o,a,i){"use strict";var e=n("$InternalEnum").Mirrored(["SAME_AS_OTHER_CONTROLS","SEPARATE_FROM_OTHER_CONTROLS"]),l=n("$InternalEnum")({VIDEO_CAPTIONS_MENU:"video_captions_menu",VIDEO_SETTINGS_MENU:"video_settings_menu"});i.MutedButtonVisibility=e,i.VideoMenuType=l}),66);
__d("VideoPlayerInstreamAdsStateHooks",["createVideoStateHook"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e=o("createVideoStateHook")).createVideoStateHook(),u=s.stateHook,c=s.valueHook,d=[];function m(){return u(d)}function p(){return c(d)}var _=e.createVideoStateHook(),f=_.stateHook,g=_.valueHook,h=null;function y(){return f(h)}function C(){return g(h)}var b=e.createVideoStateHook(),v=b.setterHook,S=b.valueHook,R=!0;function L(){return v(R)}function E(){return S(R)}var k=e.createVideoStateHook(),I=k.stateHook,T=k.valueHook,D="INIT";function x(){return I(D)}function $(){return T(D)}var P=e.createVideoStateHook(),N=P.stateHook,M=P.valueHook,w=!0;function A(){return N(w)}function F(){return M(w)}var O=e.createVideoStateHook(),B=O.stateHook,W=O.valueHook,q=null;function U(){return B(q)}function V(){return W(q)}var H=e.createVideoStateHook(),G=H.stateHook,z=null;function j(){return G(z)}var K=e.createVideoStateHook(),Q=K.stateHook,X=null;function Y(){return Q(X)}var J=e.createVideoStateHook(),Z=J.stateHook,ee=null;function te(){return Z(ee)}var ne=e.createVideoStateHook(),re=ne.stateHook,oe=null;function ae(){return re(oe)}var ie=e.createVideoStateHook(),le=ie.stateHook,se=0;function ue(){return le(se)}var ce=e.createVideoStateHook(),de=ce.stateHook,me=!1;function pe(){return de(me)}var _e=e.createVideoStateHook(),fe=_e.stateHook,ge=_e.valueHook,he=null;function ye(){return fe(he)}function Ce(){return ge(he)}var be=e.createVideoStateHook(),ve=be.stateHook,Se=be.valueHook,Re=null;function Le(){return ve(Re)}function Ee(){return Se(Re)}function ke(){var e=$();return e==="STARTING_INDICATOR"||e==="START"||e==="START_AD"||e==="PLAY_NI_VIDEO"}l.useInstreamAdsMidRollsState=m,l.useInstreamAdsMidRollsValue=p,l.useInstreamAdsPostRollState=y,l.useInstreamAdsPostRollValue=C,l.useInstreamAdsPostRollEndedOrSkippedStateSetter=L,l.useInstreamAdsPostRollEndedOrSkippedStateValue=E,l.useInstreamAdsState=x,l.useInstreamAdsStateValue=$,l.useInstreamAdsIsEmptyState=A,l.useInstreamAdsIsEmptyStateValue=F,l.useInstreamAdsCurrentInsertionState=U,l.useInstreamAdsCurrentInsertionStateValue=V,l.useStartIndicatorBeginningTimeState=j,l.useAdBreaksTimeOffsetBeginningState=Y,l.useInstreamAdsExtraFieldsState=te,l.useInstreamAdsHideAdBehaviorState=ae,l.useUnifiedSchedulerLastFetchTimeState=ue,l.useWaitingForAdFetchState=pe,l.useInstreamAdsFeedContextCardState=ye,l.useInstreamAdsFeedContextCardStateValue=Ce,l.useInstreamAdsFullScreenContextCardState=Le,l.useInstreamAdsFullScreenContextCardStateValue=Ee,l.useInstreamAdsIsStart=ke}),98);
__d("VideoPlayerInteractionOverlay.react",["VideoPlayerHooks","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d={hiddenCursor:{cursor:"xjfk50j",$$css:!0},pointer:{cursor:"x1ypdohk",$$css:!0},root:{bottom:"x1ey2m1c",boxSizing:"x9f619",insetInlineEnd:"xtijo5x",insetInlineStart:"x1o0tod",position:"x10l6tqk",top:"x13vifvy",$$css:!0}};function m(t){var n=o("react-compiler-runtime").c(14),a=t.children,i=t.pressInteraction,l=t.ref,s=t.style,m=t.xstyle,p=i==null?void 0:i.handler,_=i==null?void 0:i.onPressStart,f=i==null?void 0:i.onMouseEnter,g=i==null?void 0:i.onMouseLeave,h=(u||(u=o("VideoPlayerHooks"))).useIsFullscreen(),y=u.useIsMouseIdle(),C;n[0]!==h||n[1]!==y||n[2]!==p||n[3]!==m?(C=(e||(e=r("stylex")))(d.root,!!p&&d.pointer,h&&y&&d.hiddenCursor,m),n[0]=h,n[1]=y,n[2]=p,n[3]=m,n[4]=C):C=n[4];var b;return n[5]!==a||n[6]!==f||n[7]!==g||n[8]!==p||n[9]!==_||n[10]!==l||n[11]!==s||n[12]!==C?(b=c.jsx("div",{className:C,onClick:p,onMouseEnter:f,onMouseLeave:g,onPointerDown:_,ref:l,role:"presentation",style:s,children:a}),n[5]=a,n[6]=f,n[7]=g,n[8]=p,n[9]=_,n[10]=l,n[11]=s,n[12]=C,n[13]=b):b=n[13],b}var p=m;l.VideoPlayerInteractionOverlay=p}),98);
__d("VideoPlayerLiveRewindControlContext",["react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.createContext({cachedLiveRewindTimestamp:null,onLiveRewindControlEvent:function(){}});l.default=u}),98);
__d("VideoPlayerPlayButton.react",["fbt","ix","CometImage.react","CometPressable.react","CometTrackingNodeProvider.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){switch(e){case"LARGE":return u("352839");case"MEDIUM":return u("101640");case"SMALL":return u("354763")}}function m(e){var t=o("react-compiler-runtime").c(13),n=e.iconSize,a=e.isVisible,i=e.onClick,l=n===void 0?"LARGE":n,u;t[0]!==l?(u=d(l),t[0]=l,t[1]=u):u=t[1];var m;t[2]!==u?(m=c.jsx(r("CometImage.react"),{src:u}),t[2]=u,t[3]=m):m=t[3];var p=m,_;t[4]!==p||t[5]!==i?(_=i!=null?c.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:592,children:c.jsx(r("CometPressable.react"),{display:"inline",label:s._(/*BTDS*/"Play video"),onPress:i,overlayDisabled:!0,testid:void 0,children:p})}):p,t[4]=p,t[5]=i,t[6]=_):_=t[6];var f=_,g;t[7]!==l||t[8]!==a?(g={0:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},8:{className:"xy75621 xafmxuu x14z9mp xat24cr x1ob4rv2 xni59qk x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},4:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},12:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},2:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},10:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},6:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},14:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x1hc1fzr x10l6tqk xwa60dl"},1:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},9:{className:"xy75621 xafmxuu x14z9mp xat24cr x1ob4rv2 xni59qk x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},5:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},13:{className:"xsdox4t xs9mwh0 x14z9mp xat24cr xwqyzqf x1useyqa x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},3:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},11:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},7:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"},15:{className:"xxk0z11 x7wgvq7 x14z9mp xat24cr x18xomjl xvy4d1p x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xbudbmw x10l6tqk xwa60dl xg01cxk xlshs6z"}}[(l==="LARGE")<<3|(l==="MEDIUM")<<2|(l==="SMALL")<<1|!a<<0],t[7]=l,t[8]=a,t[9]=g):g=t[9];var h;return t[10]!==f||t[11]!==g?(h=c.jsx("i",babelHelpers.extends({},g,{children:f})),t[10]=f,t[11]=g,t[12]=h):h=t[12],h}l.default=m}),226);
__d("VideoPlayerPlaybackControlBase.react",["fbt","ix","FBLogger","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react"));function d(e){var t=o("react-compiler-runtime").c(14),n=e.onPress,a=e.playbackIcon,i=e.showTooltip,l=e.useOutlineIcons,d=i===void 0?!0:i,m,p;e:switch(a){case"pause":{var _;t[0]===Symbol.for("react.memo_cache_sentinel")?(_=s._(/*BTDS*/"Pause"),t[0]=_):_=t[0],m=_;var f;t[1]!==l?(f=l===!0?o("fbicon")._(u("497677"),20):o("fbicon")._(u("497675"),20),t[1]=l,t[2]=f):f=t[2],p=f;break e}case"replay":{var g;t[3]===Symbol.for("react.memo_cache_sentinel")?(g=s._(/*BTDS*/"Replay"),t[3]=g):g=t[3],m=g;var h;t[4]!==l?(h=l===!0?o("fbicon")._(u("534222"),20):o("fbicon")._(u("534219"),20),t[4]=l,t[5]=h):h=t[5],p=h;break e}case"play":{var y;t[6]===Symbol.for("react.memo_cache_sentinel")?(y=s._(/*BTDS*/"Play"),t[6]=y):y=t[6],m=y;var C;t[7]!==l?(C=l===!0?o("fbicon")._(u("484866"),20):o("fbicon")._(u("484863"),20),t[7]=l,t[8]=C):C=t[8],p=C;break e}default:throw r("FBLogger")("comet_video_player").mustfixThrow("The playback icon is unsupported %s",a)}var b=d?m:null,v;return t[9]!==p||t[10]!==m||t[11]!==n||t[12]!==b?(v=c.jsx(r("VideoPlayerControlIcon.react"),{icon:p,label:m,onPress:n,tooltip:b}),t[9]=p,t[10]=m,t[11]=n,t[12]=b,t[13]=v):v=t[13],v}l.default=d}),226);
__d("useFeedClickEventHandler",["react","react-compiler-runtime","useStoryClickEventLogger"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useCallback;function u(e,t){var n=o("react-compiler-runtime").c(4),a=r("useStoryClickEventLogger")(),i;return n[0]!==t||n[1]!==a||n[2]!==e?(i=function(r){e&&e(r);var n=r.type;if(n==="click"||n==="contextmenu"||n==="mousedown"&&typeof r.button=="number"&&(r.button===1||r.button===2)||n==="keydown"&&(r.key==="Enter"||r.key===" ")){var o=typeof r.button=="number"?r.button:0;a(r.timeStamp,o,t)}},n[0]=t,n[1]=a,n[2]=e,n[3]=i):i=n[3],i}l.default=u}),98);
__d("useRouteProductAttribution",["CometRouteProductAttributionContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){return s(r("CometRouteProductAttributionContext"))}l.default=u}),98);
__d("useMinifiedProductAttribution",["CometProductAttribution","react-compiler-runtime","useRouteProductAttribution"],(function(t,n,r,o,a,i,l){"use strict";function e(){var e=o("react-compiler-runtime").c(2),t=r("useRouteProductAttribution")(),n;return e[0]!==t?(n=t!=null?o("CometProductAttribution").minifyProductAttributionV2(t):null,e[0]=t,e[1]=n):n=e[1],n}l.default=e}),98);
__d("useVideoPlayerControllerSubscriptionHavingController",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(e,t){var n=o("react-compiler-runtime").c(9),r;n[0]!==e||n[1]!==t?(r=function(){return t(e,null)},n[0]=e,n[1]=t,n[2]=r):r=n[2];var a=d(r),i=a[0],l=a[1],s=c(t),m,p;n[3]!==t?(m=function(){s.current=t},p=[t],n[3]=t,n[4]=m,n[5]=p):(m=n[4],p=n[5]),u(m,p);var _,f;return n[6]!==e?(_=function(){l(function(t){return s.current(e,t)});var t=e.subscribe(function(){l(function(t){return s.current(e,t)})});return(function(){t.remove()})},f=[e],n[6]=e,n[7]=_,n[8]=f):(_=n[7],f=n[8]),u(_,f),i}l.default=m}),98);
__d("useVideoPlayerControllerSubscription",["VideoPlayerHooks","useVideoPlayerControllerSubscriptionHavingController"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t){return r("useVideoPlayerControllerSubscriptionHavingController")((e||(e=o("VideoPlayerHooks"))).useController(),t)}l.default=s}),98);
__d("VideoPlayerPlaybackControl.react",["CometTrackingNodeProvider.react","VideoHomeTypedLiteLogger","VideoPlayerHooks","VideoPlayerPlaybackControlBase.react","react","react-compiler-runtime","useFeedClickEventHandler","useMinifiedProductAttribution","useVideoPlayerControllerSubscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useEffect;function d(e){var t=o("react-compiler-runtime").c(14),n=e.isNPC,a=e.showTooltip,i=e.unmuteOnPlay,l=e.useOutlineIcons,d=n===void 0?!1:n,p=a===void 0?!0:a,_=i===void 0?!1:i,f,g;t[0]!==d?(f=function(){d&&r("VideoHomeTypedLiteLogger").log({event:"npc_control_playback_button_impression"})},g=[d],t[0]=d,t[1]=f,t[2]=g):(f=t[1],g=t[2]),c(f,g);var h=r("useVideoPlayerControllerSubscription")(m),y=h.showPauseButton,C=h.showReplayButton,b=(s||(s=o("VideoPlayerHooks"))).useController(),v=r("useMinifiedProductAttribution")(),S;t[3]!==b||t[4]!==d||t[5]!==v||t[6]!==y||t[7]!==_?(S=function(){d&&r("VideoHomeTypedLiteLogger").log({attribution_id_v2:v,click_point:"npc_control_playback_button",event:"click",event_target:"video"}),y?b.pause("user_initiated"):(_&&b.setMuted(!1,"user_initiated"),b.play("user_initiated"))},t[3]=b,t[4]=d,t[5]=v,t[6]=y,t[7]=_,t[8]=S):S=t[8];var R=r("useFeedClickEventHandler")(S),L=y?"pause":C?"replay":"play",E;return t[9]!==R||t[10]!==L||t[11]!==p||t[12]!==l?(E=u.jsx(r("CometTrackingNodeProvider.react"),{trackingNode:592,children:u.jsx(r("VideoPlayerPlaybackControlBase.react"),{onPress:R,playbackIcon:L,showTooltip:p,useOutlineIcons:l})}),t[9]=R,t[10]=L,t[11]=p,t[12]=l,t[13]=E):E=t[13],E}function m(e,t){var n=e.getCurrentState(),r=n.ended,o=n.paused,a=n.playing,i=n.stalling,l=e.getPlayheadPosition(),s=n.duration,u=!o&&(a||i),c=!a&&r&&l>=s;return t!=null&&t.showPauseButton===u&&t.showReplayButton===c?t:{showPauseButton:u,showReplayButton:c}}l.default=d}),98);
__d("getFormattedTimestamp",["DateConsts"],(function(t,n,r,o,a,i,l){"use strict";function e(e){var t="",n=e;isNaN(n)?n=0:n<0&&(n*=-1,t="-");var r=Math.floor(n/o("DateConsts").SEC_PER_HOUR),a=Math.floor((n-r*o("DateConsts").SEC_PER_HOUR)/o("DateConsts").SEC_PER_MIN),i=Math.round(n-r*o("DateConsts").SEC_PER_HOUR-a*o("DateConsts").SEC_PER_MIN);i===o("DateConsts").SEC_PER_MIN&&(i=0,a++),a===o("DateConsts").MIN_PER_HOUR&&(a=0,r++);var l=("0"+i).slice(-2);if(r===0)return""+t+a+":"+l;var s=("0"+a).slice(-2);return""+t+r+":"+s+":"+l}l.default=e}),98);
__d("VideoPlayerPlaybackTimerBase.react",["getFormattedTimestamp","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(11),n=e.currentTime,a=e.duration,i,l;t[0]===Symbol.for("react.memo_cache_sentinel")?(i={className:"x14ctfv x1rg5ohu x1pg5gke xss6m8b x7h9g57 xf6vk7d xpcyujq x9hgts1 x2b8uid x27saw0 x3ajldb"},l={className:"x1s688f x15hfatp"},t[0]=i,t[1]=l):(i=t[0],l=t[1]);var u;t[2]!==n?(u=r("getFormattedTimestamp")(n),t[2]=n,t[3]=u):u=t[3];var c;t[4]!==u?(c=s.jsx("span",babelHelpers.extends({},l,{children:u})),t[4]=u,t[5]=c):c=t[5];var d;t[6]!==a?(d=a!=null&&s.jsxs(s.Fragment,{children:[s.jsx("span",{children:" / "}),s.jsx("span",{children:r("getFormattedTimestamp")(a)})]}),t[6]=a,t[7]=d):d=t[7];var m;return t[8]!==c||t[9]!==d?(m=s.jsxs("div",babelHelpers.extends({},i,{children:[c,d]})),t[8]=c,t[9]=d,t[10]=m):m=t[10],m}l.default=u}),98);
__d("useLiveRewindUtils",["VideoPlayerHooks","VideoPlayerLiveRewindControlContext","react","react-compiler-runtime","useVideoPlayerControllerSubscription"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=u.useCallback,d=u.useContext,m=10,p=10;function _(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=r!=null&&(e=r.end(r.length()-1))!=null?e:0,a=Math.min(t.getPlayheadPosition()+m,o);a===o?(t.setIsLiveRewindActive(!1),t.seek(o)):t.seek(a),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function f(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=(e=r==null?void 0:r.start(0))!=null?e:0,a=Math.max(t.getPlayheadPosition()-p,o);t.seek(a),t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function g(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=r!=null&&(e=r.end(r.length()-1))!=null?e:0;t.seek(o),t.play("user_initiated"),t.setIsLiveRewindActive(!1),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function h(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=(e=r==null?void 0:r.start(0))!=null?e:0;t.seek(o),t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function y(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){t.play("user_initiated"),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function C(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){t.pause("user_initiated"),t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function b(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(){var e,r=t.getCurrentState().seekableRanges,o=(e=r==null?void 0:r.start(0))!=null?e:0;t.seek(o),t.setIsLiveRewindActive(!0),t.play("user_initiated"),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function v(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useController(),n=d(r("VideoPlayerLiveRewindControlContext")),a;return e[0]!==n||e[1]!==t?(a=function(r){var e,o,a=t.getCurrentState().seekableRanges,i=(e=a==null?void 0:a.start(0))!=null?e:0,l=a!=null&&(o=a.end(a.length()-1))!=null?o:0,s=Math.min(i+r,l);t.scrubEnd(s),s===l?t.setIsLiveRewindActive(!1):t.setIsLiveRewindActive(!0),n.onLiveRewindControlEvent()},e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function S(){return r("useVideoPlayerControllerSubscription")(R)}function R(e){var t,n;return(t=(n=e.getCurrentState().seekableRanges)==null?void 0:n.start(0))!=null?t:0}l.useLiveRewindForward=_,l.useLiveRewindBack=f,l.useLiveRewindLive=g,l.useLiveRewindStart=h,l.useLiveRewindPlay=y,l.useLiveRewindPause=C,l.useLiveRewindReplay=b,l.useLiveRewindScrub=v,l.useLiveRewindSeekableStartTime=S}),98);
__d("VideoPlayerPlaybackTimer.react",["VideoPlayerHooks","VideoPlayerPlaybackTimerBase.react","react","react-compiler-runtime","useLiveRewindUtils"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=_,d=function(t,n){return t-n.duration};function m(){var e=o("react-compiler-runtime").c(2),t=o("useLiveRewindUtils").useLiveRewindSeekableStartTime(),n=(s||(s=o("VideoPlayerHooks"))).useCurrentTimeThrottled(200),a=s.useCurrentTimeThrottled(1e3,d),i=s.useIsLiveRewindActive(),l=i?a:n-t,c;return e[0]!==l?(c=u.jsx(r("VideoPlayerPlaybackTimerBase.react"),{currentTime:l,duration:null}),e[0]=l,e[1]=c):c=e[1],c}function p(){var e=o("react-compiler-runtime").c(3),t=(s||(s=o("VideoPlayerHooks"))).useDuration(),n=s.useCurrentTimeThrottled(200),a;return e[0]!==n||e[1]!==t?(a=u.jsx(r("VideoPlayerPlaybackTimerBase.react"),{currentTime:n,duration:t}),e[0]=n,e[1]=t,e[2]=a):a=e[2],a}function _(){var e=o("react-compiler-runtime").c(2),t=(s||(s=o("VideoPlayerHooks"))).useIsLive();if(t){var n;return e[0]===Symbol.for("react.memo_cache_sentinel")?(n=u.jsx(m,{}),e[0]=n):n=e[0],n}else{var r;return e[1]===Symbol.for("react.memo_cache_sentinel")?(r=u.jsx(p,{}),e[1]=r):r=e[1],r}}var f=c;l.default=f}),98);
__d("VideoPlayerPointerDrag",["react","react-compiler-runtime","useResizeObserver","useStable"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useRef,d=s.useState;function m(){var e=o("react-compiler-runtime").c(5),t=c(null),n=c(null),a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=function(r,o){t.current=o.getBoundingClientRect(),n.current=o},e[0]=a):a=e[0];var i=r("useResizeObserver")(a),l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=function(){return function(){var e=n.current;e?t.current=e.getBoundingClientRect():t.current=null}},e[1]=l):l=e[1];var s=r("useStable")(l),u;return e[2]!==s||e[3]!==i?(u={invalidateRootRect:s,rootRectRef:t,rootSizeRefCallback:i},e[2]=s,e[3]=i,e[4]=u):u=e[4],u}function p(e,t){if(t==null)return null;var n=Math.max(0,Math.min(t.width,e.clientX-t.left)),r=Math.max(0,Math.min(t.height,e.clientY-t.top));return{ratioX:t.width>0?n/t.width:0,ratioY:t.height>0?r/t.height:0}}function _(e,t){var n=e.changedTouches;if(t==null||!n)return null;for(var r=0;r<n.length;++r){var o=n[r];if(o.identifier===t)return{clientX:o.clientX,clientY:o.clientY}}return null}function f(e,t){var n=e;switch(t.type){case"start":n=babelHelpers.extends({},e,{clientX:t.clientX,clientY:t.clientY,dragState:"dragging",lastEffect:e.dragState==="idle"?"start":e.lastEffect});break;case"move":if(e.dragState!=="dragging")break;n={clientX:t.clientX,clientY:t.clientY,dragState:"dragging",lastEffect:e.dragState==="idle"?"start":"move"};break;case"end":if(e.dragState!=="dragging")break;n={clientX:t.clientX,clientY:t.clientY,dragState:"idle",lastEffect:e.dragState==="idle"?e.lastEffect:"end"};break;case"cancel":if(e.dragState!=="dragging")break;n={clientX:e.clientX,clientY:e.clientY,dragState:"idle",lastEffect:e.dragState==="idle"?e.lastEffect:"cancel"};break;default:break}return n.dragState!==e.dragState||n.lastEffect!==e.lastEffect||n.clientX!==e.clientX||n.clientY!==e.clientY?n:e}var g={clientX:0,clientY:0,dragState:"idle",lastEffect:null},h=function(){return window.navigator.userAgent.indexOf("MSIE")>=0};function y(e,t,n){var r=g,o=null,a=null,i=function(n){r=f(r,n),e(r)},l=function(n){i({clientX:n.clientX,clientY:n.clientY,type:"move"});var e=t.current.onDragMoveSync;e==null||e(r)},s=function(n){o&&o(),i({clientX:n.clientX,clientY:n.clientY,type:"end"});var e=t.current.onDragEndSync;e==null||e(r)},u=function(){o&&o(),i({type:"cancel"});var e=t.current.onDragCancelSync;e==null||e(r)},c=function(o){var e=_(o,n.current);if(e!=null){i({clientX:e.clientX,clientY:e.clientY,type:"move"});var a=t.current.onDragMoveSync;a==null||a(r)}},d=function(o){var e=_(o,n.current);if(e!=null){a&&a(),i({clientX:e.clientX,clientY:e.clientY,type:"end"});var l=t.current.onDragEndSync;l==null||l(r)}},m=d;return{destroy:function(){o&&o(),a&&a()},onMouseDown:function(n){h()||n.preventDefault(),i({clientX:n.clientX,clientY:n.clientY,type:"start"});var e=t.current.onDragStartSync;e==null||e(r),o||(window.addEventListener("mousemove",l),window.addEventListener("mouseup",s),window.addEventListener("blur",u),window.addEventListener("mouseleave",u),o=function(){o=null,window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",s),window.removeEventListener("blur",u),window.removeEventListener("mouseleave",u)})},onTouchStart:function(o){o.preventDefault();var e=o.changedTouches[0];e!=null&&(n.current=e.identifier);var l=_(o,n.current);if(l!=null){i({clientX:l.clientX,clientY:l.clientY,type:"start"});var s=t.current.onDragStartSync;s==null||s(r),a||(window.addEventListener("touchmove",c),window.addEventListener("touchend",d),window.addEventListener("touchcancel",m),window.addEventListener("blur",u),a=function(){a=null,window.removeEventListener("touchmove",c),window.removeEventListener("touchend",d),window.removeEventListener("touchcancel",m),window.removeEventListener("blur",u)})}}}}function C(e,t){var n=o("react-compiler-runtime").c(4),r,a;n[0]!==t||n[1]!==e?(r=function(){var n=t.current,r=n.onDragCancel,o=n.onDragEnd,a=n.onDragMove,i=n.onDragStart;switch(e.lastEffect){case"start":{i(e);return}case"move":{a(e);return}case"end":{o(e);return}case"cancel":{r(e);return}}},a=[e,t],n[0]=t,n[1]=e,n[2]=r,n[3]=a):(r=n[2],a=n[3]),u(r,a)}function b(e,t,n){var a=o("react-compiler-runtime").c(13),i=d(g),l=i[0],s=i[1],c;a[0]!==e||a[1]!==t?(c=function(){return y(s,e,t)},a[0]=e,a[1]=t,a[2]=c):c=a[2];var m=r("useStable")(c),p=m.destroy,_=m.onMouseDown,f=m.onTouchStart,h,C;a[3]!==p?(h=function(){return p},C=[p],a[3]=p,a[4]=h,a[5]=C):(h=a[4],C=a[5]),u(h,C);var b;a[6]!==_||a[7]!==f||a[8]!==(n==null?void 0:n.hasTouchEvents)?(b={onClick:function(t){t.stopPropagation(),t.preventDefault()},onMouseDown:_,onTouchStart:(n==null?void 0:n.hasTouchEvents)===!0?f:void 0},a[6]=_,a[7]=f,a[8]=n==null?void 0:n.hasTouchEvents,a[9]=b):b=a[9];var v;return a[10]!==l||a[11]!==b?(v={dragState:l,rootProps:b},a[10]=l,a[11]=b,a[12]=v):v=a[12],v}function v(e,t){var n=o("react-compiler-runtime").c(7),r=c(e),a=c(null),i,l;n[0]!==e?(i=function(){r.current=e},l=[e],n[0]=e,n[1]=i,n[2]=l):(i=n[1],l=n[2]),u(i,l);var s=b(r,a,t),d=s.dragState,m=s.rootProps;C(d,r);var p=d.dragState==="dragging",_;return n[3]!==d||n[4]!==m||n[5]!==p?(_={dragState:d,isDragging:p,rootProps:m},n[3]=d,n[4]=m,n[5]=p,n[6]=_):_=n[6],_}l.usePointerDragResizeObserver=m,l.computePointerOffsetRatio=p,l.usePointerDrag=v}),98);
__d("VideoPlayerSliderNub.react",["react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react"));function u(e){var t=o("react-compiler-runtime").c(4),n=e.isVisible,r;t[0]!==n?(r={0:{className:"x14hiurz x1g7gg9k x16h6fyj x1eoefnw x10eyzkn x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf x1nqv1ya x1s85apg xdk7pt x1x862rh x1rdy4ex x10l6tqk x3m8u43 x1xc55vz x1vjfegm"},1:{className:"x14hiurz x1g7gg9k x16h6fyj x1eoefnw x10eyzkn x1c9tyrk xeusxvb x1pahc9y x1ertn4p x13fuv20 x18b5jzi x1q0q8m5 x1t7ytsu xamhcws x1alpsbp xlxy82 xyumdvf x1nqv1ya xdk7pt x1x862rh x1rdy4ex x10l6tqk x3m8u43 x1xc55vz x1vjfegm x1lliihq"}}[!!n<<0],t[0]=n,t[1]=r):r=t[1];var a;return t[2]!==r?(a=s.jsx("div",babelHelpers.extends({},r,{"data-testid":void 0})),t[2]=r,t[3]=a):a=t[3],a}l.default=u}),98);
__d("VideoPlayerScrubberBaseContentDefault.react",["CometVisualCompletionAttributes","VideoPlayerSliderNub.react","react","react-compiler-runtime","stylex"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=s||(s=o("react")),c={liveRewindTimePlayed:{backgroundColor:"xh1tjdi",$$css:!0},liveTimePlayed:{backgroundColor:"x1ciooss",$$css:!0},timelineBackground:{backgroundColor:"x1rwy58d",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",boxShadow:"xpdb0fs",height:"xuoj239",textShadow:"xd9u3wd",userSelect:"x87ps6o",$$css:!0},timelineBuffered:{height:"xuoj239",position:"x10l6tqk",$$css:!0},timelineBufferedBackground:{backgroundColor:"x17j41np",$$css:!0},timelinePlayed:{backgroundColor:"x1evw4sf",borderStartStartRadius:"xr9e8f9",borderStartEndRadius:"x1e4oeot",borderEndEndRadius:"x1ui04y5",borderEndStartRadius:"x6en5u8",height:"xuoj239",position:"x10l6tqk",userSelect:"x87ps6o",$$css:!0}};function d(t){var n=o("react-compiler-runtime").c(30),a=t.bufferedRatio,i=t.isLive,l=t.isLiveRewindActive,s=t.isNubVisible,d=t.playedRatio,m=t.timelineBackgroundXStyle,p=t.timelineBufferedXStyle,_=t.timelinePlayedXStyle,f;n[0]!==m?(f=(e||(e=r("stylex"))).props(c.timelineBackground,m),n[0]=m,n[1]=f):f=n[1];var g;n[2]!==i||n[3]!==p?(g=(e||(e=r("stylex")))(c.timelineBuffered,!i&&c.timelineBufferedBackground,p),n[2]=i,n[3]=p,n[4]=g):g=n[4];var h=100*a,y;n[5]!==h?(y=h.toFixed(5),n[5]=h,n[6]=y):y=n[6];var C=y+"%",b;n[7]!==C?(b={width:C},n[7]=C,n[8]=b):b=n[8];var v;n[9]!==g||n[10]!==b?(v=u.jsx("div",babelHelpers.extends({className:g},r("CometVisualCompletionAttributes").IGNORE,{style:b})),n[9]=g,n[10]=b,n[11]=v):v=n[11];var S;n[12]!==i||n[13]!==l||n[14]!==_?(S=(e||(e=r("stylex")))(c.timelinePlayed,i&&!l&&c.liveTimePlayed,i&&l&&c.liveRewindTimePlayed,_),n[12]=i,n[13]=l,n[14]=_,n[15]=S):S=n[15];var R=100*d,L;n[16]!==R?(L=R.toFixed(5),n[16]=R,n[17]=L):L=n[17];var E=L+"%",k;n[18]!==E?(k={width:E},n[18]=E,n[19]=k):k=n[19];var I;n[20]!==s?(I=u.jsx(r("VideoPlayerSliderNub.react"),{isVisible:s}),n[20]=s,n[21]=I):I=n[21];var T;n[22]!==k||n[23]!==I||n[24]!==S?(T=u.jsx("div",babelHelpers.extends({className:S},r("CometVisualCompletionAttributes").IGNORE,{style:k,children:I})),n[22]=k,n[23]=I,n[24]=S,n[25]=T):T=n[25];var D;return n[26]!==f||n[27]!==T||n[28]!==v?(D=u.jsxs("div",babelHelpers.extends({},f,{children:[v,T]})),n[26]=f,n[27]=T,n[28]=v,n[29]=D):D=n[29],D}l.default=d}),98);
__d("VideoPlayerUserInteractionCounter",["FBLogger","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useCallback,c=s.useEffect,d=s.useRef,m=s.useState;function p(e,t,n){var a=o("react-compiler-runtime").c(12),i=d(e),l,s;a[0]!==e?(l=function(){if(e!==i.current)throw r("FBLogger")("comet_video_player").mustfixThrow("User interaction name should not change between renders ('%s' -> '%s').",i.current,e)},s=[e],a[0]=e,a[1]=l,a[2]=s):(l=a[1],s=a[2]),c(l,s);var u=d(n),m,p;a[3]!==n?(m=function(){u.current=n},p=[n],a[3]=n,a[4]=m,a[5]=p):(m=a[4],p=a[5]),c(m,p);var _=r("usePrevious")(t),f=d(!1),g,h;a[6]!==t||a[7]!==_?(g=function(){var e=i.current,n=u.current;n&&(_===null||t!==_)&&(t?(f.current=!0,n({name:e,type:"started"})):_!==null&&(f.current=!1,n({name:e,type:"ended"})))},h=[t,_],a[6]=t,a[7]=_,a[8]=g,a[9]=h):(g=a[8],h=a[9]),c(g,h);var y,C;a[10]===Symbol.for("react.memo_cache_sentinel")?(y=function(){var e=i.current,t=u.current;return(function(){t&&f.current&&t({name:e,type:"ended"})})},C=[],a[10]=y,a[11]=C):(y=a[10],C=a[11]),c(y,C)}function _(){var e=o("react-compiler-runtime").c(4),t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Set,e[0]=t):t=e[0];var n=d(t),r=m(0),a=r[0],i=r[1],l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l=function(t){var e=n.current;t.type==="started"||t.type==="happening"?(e.add(t.name),i(e.size)):t.type==="ended"&&(e.delete(t.name),i(e.size))},e[1]=l):l=e[1];var s=l,u;return e[2]!==a?(u={ongoingInteractionsCount:a,onUserInteraction:s},e[2]=a,e[3]=u):u=e[3],u}l.useVideoPlayerUserInteraction=p,l.useVideoPlayerUserInteractionCounter=_}),98);
__d("useVideoPlayerScrubberState",["VideoPlayerPointerDrag","react","react-compiler-runtime","usePrevious"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u=s.useEffect,c=s.useState;function d(e,t){return Math.min(e>0?t/e:0,1)}function m(e){var t=o("react-compiler-runtime").c(41),n=e.bufferEnd,a=e.currentTime,i=e.duration,l=e.onScrubCancel,s=e.onScrubEnd,m=e.onScrubStart,p=e.supportsTouch,_=o("VideoPlayerPointerDrag").usePointerDragResizeObserver(),f=_.invalidateRootRect,g=_.rootRectRef,h=_.rootSizeRefCallback,y=c(0),C=y[0],b=y[1],v=c(!1),S=v[0],R=v[1],L=r("usePrevious")(a),E,k;t[0]!==a||t[1]!==L?(E=function(){a!==L&&R(!1)},k=[a,L],t[0]=a,t[1]=L,t[2]=E,t[3]=k):(E=t[2],k=t[3]),u(E,k);var I;t[4]!==l?(I=function(t){l()},t[4]=l,t[5]=I):I=t[5];var T;t[6]!==i||t[7]!==l||t[8]!==s||t[9]!==g?(T=function(t){var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,g.current);if(!e){l();return}b(e.ratioX);var n=e.ratioX*i;s(n)},t[6]=i,t[7]=l,t[8]=s,t[9]=g,t[10]=T):T=t[10];var D;t[11]===Symbol.for("react.memo_cache_sentinel")?(D=function(){R(!0)},t[11]=D):D=t[11];var x;t[12]!==g?(x=function(t){var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,g.current);e&&b(e.ratioX)},t[12]=g,t[13]=x):x=t[13];var $;t[14]!==f||t[15]!==m||t[16]!==g?($=function(t){f();var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,g.current);e&&(b(e.ratioX),m())},t[14]=f,t[15]=m,t[16]=g,t[17]=$):$=t[17];var P;t[18]!==I||t[19]!==T||t[20]!==x||t[21]!==$?(P={onDragCancel:I,onDragEnd:T,onDragEndSync:D,onDragMove:x,onDragStart:$},t[18]=I,t[19]=T,t[20]=x,t[21]=$,t[22]=P):P=t[22];var N=p===!0,M;t[23]!==N?(M={hasTouchEvents:N},t[23]=N,t[24]=M):M=t[24];var w=o("VideoPlayerPointerDrag").usePointerDrag(P,M),A=w.isDragging,F=w.rootProps,O;t[25]!==n||t[26]!==i?(O=d(i,n),t[25]=n,t[26]=i,t[27]=O):O=t[27];var B=O,W;t[28]!==a||t[29]!==i?(W=d(i,a),t[28]=a,t[29]=i,t[30]=W):W=t[30];var q=W,U;return t[31]!==B||t[32]!==q||t[33]!==f||t[34]!==A||t[35]!==S||t[36]!==C||t[37]!==F||t[38]!==g||t[39]!==h?(U={bufferedRatio:B,currentPlayedRatio:q,invalidateRootRect:f,isDragging:A,isWaitingForSeek:S,pointerOffsetRatio:C,rootProps:F,rootRectRef:g,rootSizeRefCallback:h},t[31]=B,t[32]=q,t[33]=f,t[34]=A,t[35]=S,t[36]=C,t[37]=F,t[38]=g,t[39]=h,t[40]=U):U=t[40],U}l.default=m}),98);
__d("VideoPlayerScrubberBase.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","VideoPlayerScrubberBaseContentDefault.react","VideoPlayerUserInteractionCounter","react","react-compiler-runtime","useVideoPlayerScrubberState"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useCallback,m=c.useMemo,p=c.useState;function _(e){var t=o("react-compiler-runtime").c(86),n=e.bufferEnd,a=e.currentTime,i=e.disableKeyCommands,l=e.duration,c=e.hideNub,d=e.isLive,m=e.isLiveRewindActive,_=e.keyLeftDescription,f=e.keyRightDescription,g=e.onScrubCancel,h=e.onScrubEnd,y=e.onScrubStart,C=e.onUserInteraction,b=e.playFromBeginningImpl,v=e.renderScrubber,S=e.renderTooltip,R=e.skipBackwardImpl,L=e.skipForwardImpl,E=e.skipToEndImpl,k=e.supportsTouch,I=e.timelineBackgroundXStyle,T=e.timelineBufferedXStyle,D=e.timelinePlayedXStyle,x=e.withoutVerticalPadding,$=c===void 0?!1:c,P=x===void 0?!1:x,N=p(!1),M=N[0],w=N[1],A=p(0),F=A[0],O=A[1],B=p(null),W=B[0],q=B[1],U;t[0]!==n||t[1]!==a||t[2]!==l||t[3]!==g||t[4]!==h||t[5]!==y||t[6]!==k?(U={bufferEnd:n,currentTime:a,duration:l,onScrubCancel:g,onScrubEnd:h,onScrubStart:y,supportsTouch:k},t[0]=n,t[1]=a,t[2]=l,t[3]=g,t[4]=h,t[5]=y,t[6]=k,t[7]=U):U=t[7];var V=r("useVideoPlayerScrubberState")(U),H=V.bufferedRatio,G=V.currentPlayedRatio,z=V.invalidateRootRect,j=V.isDragging,K=V.isWaitingForSeek,Q=V.pointerOffsetRatio,X=V.rootProps,Y=V.rootRectRef,J=V.rootSizeRefCallback,Z;t[8]===Symbol.for("react.memo_cache_sentinel")?(Z=function(){w(!0)},t[8]=Z):Z=t[8];var ee=Z,te;t[9]===Symbol.for("react.memo_cache_sentinel")?(te=function(){w(!1)},t[9]=te):te=t[9];var ne=te,re;t[10]!==l||t[11]!==z||t[12]!==Y?(re=function(t){if(z(),Y.current!=null){var e=Y.current.left,n=Y.current.width,r=Math.max(0,Math.min(n,t.clientX-e)),o=n>0?r/n:0,a=Number.isFinite(l)&&l>0?l*o:null;O(t.clientX-e),q(a)}},t[10]=l,t[11]=z,t[12]=Y,t[13]=re):re=t[13];var oe=re,ae=M||j;o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_scrubber",ae,C);var ie=M||j||K,le=j||K?Q:d&&!m?1:G,se;t[14]!==i||t[15]!==_||t[16]!==f||t[17]!==b||t[18]!==R||t[19]!==L||t[20]!==E?(se=i===!0?[]:[{command:{key:r("CometKeys").RIGHT},description:f,handler:L},{command:{key:r("CometKeys").LEFT},description:_,handler:R},{command:{key:r("CometKeys").HOME},description:s._(/*BTDS*/"Play from beginning"),handler:b},{command:{key:r("CometKeys").END},description:s._(/*BTDS*/"Skip to end"),handler:E}],t[14]=i,t[15]=_,t[16]=f,t[17]=b,t[18]=R,t[19]=L,t[20]=E,t[21]=se):se=t[21];var ue=se,ce=!$&&ie,de,me,pe,_e,fe,ge,he,ye,Ce,be,ve,Se,Re,Le,Ee,ke,Ie;if(t[22]!==H||t[23]!==ue||t[24]!==a||t[25]!==l||t[26]!==M||t[27]!==d||t[28]!==m||t[29]!==oe||t[30]!==le||t[31]!==v||t[32]!==X||t[33]!==J||t[34]!==ce||t[35]!==I||t[36]!==T||t[37]!==D||t[38]!==W||t[39]!==P){var Te={bufferedRatio:H,duration:l,hoveringPositionSec:W,isHovering:M,isLive:d,isLiveRewindActive:m,isNubVisible:ce,playedRatio:le,timelineBackgroundXStyle:I,timelineBufferedXStyle:T,timelinePlayedXStyle:D};de=r("CometComponentWithKeyCommands.react"),ke=ue,Ie=X,t[57]===Symbol.for("react.memo_cache_sentinel")?(me=s._(/*BTDS*/"Change Position"),t[57]=me):me=t[57],pe="horizontal",_e=l,fe="0",ge=a,t[58]!==P?(he={0:"x1ypdohk x1y1aw1k xyri2b xwib8y2 x1c1uobl x1n2onr6 x87ps6o xh8yej3",1:"x1ypdohk xyri2b x1c1uobl x1n2onr6 x87ps6o xh8yej3 x18d9i69 xexx8yu"}[!!P<<0],t[58]=P,t[59]=he):he=t[59],ye="video_player_scrubber",Ce=ee,be=ne,ve=oe,Se=J,Re="slider",Le=0,Ee=v!=null?v(Te):u.jsx(r("VideoPlayerScrubberBaseContentDefault.react"),babelHelpers.extends({},Te)),t[22]=H,t[23]=ue,t[24]=a,t[25]=l,t[26]=M,t[27]=d,t[28]=m,t[29]=oe,t[30]=le,t[31]=v,t[32]=X,t[33]=J,t[34]=ce,t[35]=I,t[36]=T,t[37]=D,t[38]=W,t[39]=P,t[40]=de,t[41]=me,t[42]=pe,t[43]=_e,t[44]=fe,t[45]=ge,t[46]=he,t[47]=ye,t[48]=Ce,t[49]=be,t[50]=ve,t[51]=Se,t[52]=Re,t[53]=Le,t[54]=Ee,t[55]=ke,t[56]=Ie}else de=t[40],me=t[41],pe=t[42],_e=t[43],fe=t[44],ge=t[45],he=t[46],ye=t[47],Ce=t[48],be=t[49],ve=t[50],Se=t[51],Re=t[52],Le=t[53],Ee=t[54],ke=t[55],Ie=t[56];var De;t[60]!==M||t[61]!==S||t[62]!==F||t[63]!==W?(De=S!=null&&W!=null&&M&&u.jsx("div",{className:"xfqi8uc x10l6tqk",style:{left:F},children:S(W)}),t[60]=M,t[61]=S,t[62]=F,t[63]=W,t[64]=De):De=t[64];var xe;t[65]!==me||t[66]!==pe||t[67]!==_e||t[68]!==fe||t[69]!==ge||t[70]!==he||t[71]!==ye||t[72]!==Ce||t[73]!==be||t[74]!==ve||t[75]!==Se||t[76]!==Re||t[77]!==Le||t[78]!==Ee||t[79]!==De||t[80]!==Ie?(xe=u.jsxs("div",babelHelpers.extends({},Ie,{"aria-label":me,"aria-orientation":pe,"aria-valuemax":_e,"aria-valuemin":fe,"aria-valuenow":ge,className:he,"data-testid":void 0,onMouseEnter:Ce,onMouseLeave:be,onMouseMove:ve,ref:Se,role:Re,tabIndex:Le,children:[Ee,De]})),t[65]=me,t[66]=pe,t[67]=_e,t[68]=fe,t[69]=ge,t[70]=he,t[71]=ye,t[72]=Ce,t[73]=be,t[74]=ve,t[75]=Se,t[76]=Re,t[77]=Le,t[78]=Ee,t[79]=De,t[80]=Ie,t[81]=xe):xe=t[81];var $e;return t[82]!==de||t[83]!==ke||t[84]!==xe?($e=u.jsx(de,{commandConfigs:ke,children:xe}),t[82]=de,t[83]=ke,t[84]=xe,t[85]=$e):$e=t[85],$e}l.default=_}),226);
__d("VideoPlayerScrubber.react",["fbt","VideoPlayerHooks","VideoPlayerScrubberBase.react","react","react-compiler-runtime","useLiveRewindUtils"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u,c=e||(e=o("react")),d=e.useCallback;function m(){return(u||(u=o("VideoPlayerHooks"))).useCurrentTimeThrottled(200)}function p(e){var t=o("react-compiler-runtime").c(48),n=e.onUserInteraction,a=e.renderScrubber,i=e.renderTooltip,l=m(),d=(u||(u=o("VideoPlayerHooks"))).useDuration(),p=u.useController(),_=u.useBufferEnd(),f=u.useIsLive(),g=u.useIsLiveRewindActive(),h=o("useLiveRewindUtils").useLiveRewindScrub(),y=o("useLiveRewindUtils").useLiveRewindForward(),C=o("useLiveRewindUtils").useLiveRewindBack(),b=o("useLiveRewindUtils").useLiveRewindStart(),v=o("useLiveRewindUtils").useLiveRewindLive(),S=o("useLiveRewindUtils").useLiveRewindSeekableStartTime();f&&(d=d-S,l=l-S);var R;t[0]!==p||t[1]!==d||t[2]!==f||t[3]!==y?(R=function(){if(f)y();else{var e=p.getPlayheadPosition()+5;e>=d?p.seek(d-.01):p.seek(e)}},t[0]=p,t[1]=d,t[2]=f,t[3]=y,t[4]=R):R=t[4];var L=R,E;t[5]!==f?(E=f?s._(/*BTDS*/"Fast forward 10 seconds"):s._(/*BTDS*/"Fast forward 5 seconds"),t[5]=f,t[6]=E):E=t[6];var k=E,I;t[7]!==p||t[8]!==f||t[9]!==C?(I=function(){if(f)C();else{var e=p.getPlayheadPosition()-5;e<0?p.seek(0):p.seek(e)}},t[7]=p,t[8]=f,t[9]=C,t[10]=I):I=t[10];var T=I,D;t[11]!==f?(D=f?s._(/*BTDS*/"Rewind 10 seconds"):s._(/*BTDS*/"Rewind 5 seconds"),t[11]=f,t[12]=D):D=t[12];var x=D,$;t[13]!==p||t[14]!==f||t[15]!==b?($=function(){f?b():p.seek(0)},t[13]=p,t[14]=f,t[15]=b,t[16]=$):$=t[16];var P=$,N;t[17]!==p||t[18]!==d||t[19]!==f||t[20]!==v?(N=function(){f?v():p.seek(d-.01)},t[17]=p,t[18]=d,t[19]=f,t[20]=v,t[21]=N):N=t[21];var M=N,w;t[22]!==p?(w=function(){p.scrubEnd(null)},t[22]=p,t[23]=w):w=t[23];var A=w,F;t[24]!==p?(F=function(){p.scrubBegin()},t[24]=p,t[25]=F):F=t[25];var O=F,B;t[26]!==p||t[27]!==f||t[28]!==h?(B=function(t){f?h(t):p.scrubEnd(t)},t[26]=p,t[27]=f,t[28]=h,t[29]=B):B=t[29];var W=B,q;return t[30]!==_||t[31]!==l||t[32]!==d||t[33]!==f||t[34]!==g||t[35]!==M||t[36]!==x||t[37]!==k||t[38]!==n||t[39]!==P||t[40]!==a||t[41]!==i||t[42]!==A||t[43]!==W||t[44]!==O||t[45]!==T||t[46]!==L?(q=c.jsx(r("VideoPlayerScrubberBase.react"),{bufferEnd:_,currentTime:l,duration:d,isLive:f,isLiveRewindActive:g,keyLeftDescription:x,keyRightDescription:k,onScrubCancel:A,onScrubEnd:W,onScrubStart:O,onUserInteraction:n,playFromBeginningImpl:P,renderScrubber:a,renderTooltip:i,skipBackwardImpl:T,skipForwardImpl:L,skipToEndImpl:M}),t[30]=_,t[31]=l,t[32]=d,t[33]=f,t[34]=g,t[35]=M,t[36]=x,t[37]=k,t[38]=n,t[39]=P,t[40]=a,t[41]=i,t[42]=A,t[43]=W,t[44]=O,t[45]=T,t[46]=L,t[47]=q):q=t[47],q}l.default=p}),226);
__d("VideoPlayerSmallPlayButton.react",["fbt","CometImage.react","CometPressable.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react"));function c(e){var t=o("react-compiler-runtime").c(8),n=e.isVisible,a=e.onClick,i;t[0]===Symbol.for("react.memo_cache_sentinel")?(i=u.jsx(r("CometImage.react"),{src:"/images/video/play_48dp.png"}),t[0]=i):i=t[0];var l=i,c;t[1]!==a?(c=a!=null?u.jsx(r("CometPressable.react"),{display:"inline",label:s._(/*BTDS*/"Play video"),onPress:a,overlayDisabled:!0,children:l}):l,t[1]=a,t[2]=c):c=t[2];var d=c,m;t[3]!==n?(m={0:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xsdox4t xbudbmw xs9mwh0 x14z9mp xat24cr xwqyzqf x1hc1fzr x10l6tqk xwa60dl x1useyqa"},1:{className:"x1c9tyrk xeusxvb x1pahc9y x1ertn4p x1ypdohk xsdox4t xbudbmw xs9mwh0 x14z9mp xat24cr xwqyzqf x10l6tqk xwa60dl x1useyqa xg01cxk xlshs6z"}}[!n<<0],t[3]=n,t[4]=m):m=t[4];var p;return t[5]!==d||t[6]!==m?(p=u.jsx("i",babelHelpers.extends({},m,{children:d})),t[5]=d,t[6]=m,t[7]=p):p=t[7],p}l.default=c}),226);
__d("VideoPlayerVolumeControlBase.react",["fbt","ix","FocusWithinHandler.react","VideoPlayerControlIcon.react","fbicon","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s,u){"use strict";var e,c=e||(e=o("react")),d=e.useState,m=.33,p=.66;function _(e){var t=o("react-compiler-runtime").c(18),n=e.audioAvailabilityUI,a=e.isMuted,i=e.onMouseEnter,l=e.onMouseLeave,_=e.onSetMuted,f=e.onUserInteraction,g=e.renderVolumeSlider,h=e.useOutlineIcons,y=e.volume,C=h===void 0?!1:h,b=!a&&y>0,v;t[0]!==n||t[1]!==b||t[2]!==C||t[3]!==y?(n!=null&&n.shouldShowNullIcon?v=C?o("fbicon")._(u("944795"),20):o("fbicon")._(u("944792"),20):b?y<=m?v=C?o("fbicon")._(u("1146252"),20):o("fbicon")._(u("1104387"),20):y<=p?v=C?o("fbicon")._(u("1104392"),20):o("fbicon")._(u("1104390"),20):v=C?o("fbicon")._(u("564393"),20):o("fbicon")._(u("564390"),20):v=C?o("fbicon")._(u("564399"),20):o("fbicon")._(u("564396"),20),t[0]=n,t[1]=b,t[2]=C,t[3]=y,t[4]=v):v=t[4];var S=d(!1),R=S[0],L=S[1],E;t[5]!==a?(E=a?s._(/*BTDS*/"Unmute"):s._(/*BTDS*/"Mute"),t[5]=a,t[6]=E):E=t[6];var k=E,I;return t[7]!==n||t[8]!==v||t[9]!==a||t[10]!==R||t[11]!==k||t[12]!==i||t[13]!==l||t[14]!==_||t[15]!==f||t[16]!==g?(I=c.jsx(r("FocusWithinHandler.react"),{children:function(t,o){return c.jsxs("div",{className:"x1ypdohk x1rg5ohu xhsvlbd xyamay9 x1icxu4v x10b6aqq x25sj25 x1n2onr6",onMouseEnter:i,onMouseLeave:l,children:[n!=null&&n.shouldDisableVolumeControl?null:c.jsx("div",{className:"xk7dvq3 x9f619 x1o0tod x1yrsyyn x1icxu4v x10b6aqq x25sj25 x10l6tqk xh8yej3",children:g({focusVisible:o,onVisibilityChange:L})}),c.jsx(r("VideoPlayerControlIcon.react"),{icon:v,label:k,onPress:function(){n&&n.onVolumeControlPress(),n!=null&&n.shouldDisableVolumeControl||_(!a,"user_initiated"),f&&f({name:"video_mute_button",type:"happened"})},tooltip:n!=null?n.tooltipContent:null,tooltipAlign:"end",tooltipImpl:n!=null?n.tooltipImpl:null,tooltipOffsetY:R?-80:0})]})}}),t[7]=n,t[8]=v,t[9]=a,t[10]=R,t[11]=k,t[12]=i,t[13]=l,t[14]=_,t[15]=f,t[16]=g,t[17]=I):I=t[17],I}l.default=_}),226);
__d("VideoPlayerVolumeSliderBase.react",["fbt","CometComponentWithKeyCommands.react","CometKeys","VideoPlayerPointerDrag","VideoPlayerSliderNub.react","VideoPlayerUserInteractionCounter","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l,s){"use strict";var e,u=e||(e=o("react")),c=e,d=c.useEffect,m=c.useMemo,p=c.useRef,_=c.useState;function f(e){var t=o("react-compiler-runtime").c(65),n=e.isHovering,a=e.isMuted,i=e.onChangeVolumeDown,l=e.onChangeVolumeUp,c=e.onSetMuted,m=e.onSetVolume,f=e.onUserInteraction,g=e.onVisibilityChange,h=e.showBackgroundOverlay,y=e.volume,C=h===void 0?!1:h,b=o("VideoPlayerPointerDrag").usePointerDragResizeObserver(),v=b.invalidateRootRect,S=b.rootRectRef,R=b.rootSizeRefCallback,L=p(y),E=p(a),k=a?0:y,I=_(k),T=I[0],D=I[1],x;t[0]!==a||t[1]!==c||t[2]!==m||t[3]!==S?(x=function(t){var e=o("VideoPlayerPointerDrag").computePointerOffsetRatio(t,S.current);if(e){var n=Math.max(0,Math.min(1,1-e.ratioY));D(n),m(n),a&&c(!1,"user_initiated")}},t[0]=a,t[1]=c,t[2]=m,t[3]=S,t[4]=x):x=t[4];var $=x,P;t[5]!==c||t[6]!==m?(P=function(t){D(L.current),m(L.current),c(E.current,"user_initiated")},t[5]=c,t[6]=m,t[7]=P):P=t[7];var N,M;t[8]!==$?(N=function(t){$(t)},M=function(t){$(t)},t[8]=$,t[9]=N,t[10]=M):(N=t[9],M=t[10]);var w;t[11]!==v||t[12]!==a||t[13]!==$||t[14]!==y||t[15]!==k?(w=function(t){v(),L.current=y,E.current=a,D(k),$(t)},t[11]=v,t[12]=a,t[13]=$,t[14]=y,t[15]=k,t[16]=w):w=t[16];var A;t[17]!==P||t[18]!==N||t[19]!==M||t[20]!==w?(A={onDragCancel:P,onDragEnd:N,onDragMove:M,onDragStart:w},t[17]=P,t[18]=N,t[19]=M,t[20]=w,t[21]=A):A=t[21];var F=o("VideoPlayerPointerDrag").usePointerDrag(A),O=F.isDragging,B=F.rootProps,W=O?T:k,q=n||O,U=p(q),V,H;t[22]!==q||t[23]!==g?(V=function(){U.current!==q&&g&&g(q),U.current=q},H=[g,q],t[22]=q,t[23]=g,t[24]=V,t[25]=H):(V=t[24],H=t[25]),d(V,H);var G=q;o("VideoPlayerUserInteractionCounter").useVideoPlayerUserInteraction("video_volume_slider",G,f);var z,j;t[26]===Symbol.for("react.memo_cache_sentinel")?(z={key:r("CometKeys").UP},j=s._(/*BTDS*/"Increase volume"),t[26]=z,t[27]=j):(z=t[26],j=t[27]);var K;t[28]!==l?(K={command:z,description:j,handler:function(){l()}},t[28]=l,t[29]=K):K=t[29];var Q,X;t[30]===Symbol.for("react.memo_cache_sentinel")?(Q={key:r("CometKeys").DOWN},X=s._(/*BTDS*/"Decrease volume"),t[30]=Q,t[31]=X):(Q=t[30],X=t[31]);var Y;t[32]!==i?(Y={command:Q,description:X,handler:function(){i()}},t[32]=i,t[33]=Y):Y=t[33];var J;t[34]!==K||t[35]!==Y?(J=[K,Y],t[34]=K,t[35]=Y,t[36]=J):J=t[36];var Z=J,ee;t[37]===Symbol.for("react.memo_cache_sentinel")?(ee=s._(/*BTDS*/"Change volume"),t[37]=ee):ee=t[37];var te;t[38]!==q?(te={0:"x1ypdohk xng8ra xg01cxk x47corl x1n2onr6 x1d8287x x19991ni xl405pv x1td3qas x1ja2u2z",1:"x1ypdohk xng8ra x1n2onr6 x1d8287x x19991ni xl405pv x1td3qas x1ja2u2z x1hc1fzr x67bb7w"}[!!q<<0],t[38]=q,t[39]=te):te=t[39];var ne;t[40]!==q||t[41]!==C?(ne=q&&C&&u.jsx("div",{className:"x1f4ngb1 x1obq294 x5a5i1n xde0f50 x15x8krk xi2lk0m x1f889gz xaoy8p5 x1iorvi4 xjkvuk6 x135b78x x11lfxj5 x10l6tqk x1v4kod4"}),t[40]=q,t[41]=C,t[42]=ne):ne=t[42];var re;t[43]===Symbol.for("react.memo_cache_sentinel")?(re={className:"x18fn2jl xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c xng8ra xi5uv41 x10l6tqk x1xc55vz"},t[43]=re):re=t[43];var oe;t[44]!==C?(oe={0:"xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c x10l6tqk xh8yej3 x1spa7qu",1:"xjwep3j x1t39747 x1wcsgtt x1pczhz8 x1ey2m1c x10l6tqk xh8yej3 x14hiurz"}[!!C<<0],t[44]=C,t[45]=oe):oe=t[45];var ae=W*100+"%",ie;t[46]!==ae?(ie={height:ae},t[46]=ae,t[47]=ie):ie=t[47];var le;t[48]===Symbol.for("react.memo_cache_sentinel")?(le={className:"x1c7jfne x1f4buv5 x1n2onr6"},t[48]=le):le=t[48];var se;t[49]!==q?(se=u.jsx("div",babelHelpers.extends({},le,{children:u.jsx(r("VideoPlayerSliderNub.react"),{isVisible:q})})),t[49]=q,t[50]=se):se=t[50];var ue;t[51]!==oe||t[52]!==ie||t[53]!==se?(ue=u.jsx("div",babelHelpers.extends({},re,{children:u.jsx("div",{className:oe,style:ie,children:se})})),t[51]=oe,t[52]=ie,t[53]=se,t[54]=ue):ue=t[54];var ce;t[55]!==B||t[56]!==R||t[57]!==te||t[58]!==ne||t[59]!==ue||t[60]!==y?(ce=u.jsxs("div",babelHelpers.extends({},B,{"aria-label":ee,"aria-orientation":"vertical","aria-valuemax":1,"aria-valuemin":0,"aria-valuenow":y,className:te,ref:R,role:"slider",tabIndex:0,children:[ne,ue]})),t[55]=B,t[56]=R,t[57]=te,t[58]=ne,t[59]=ue,t[60]=y,t[61]=ce):ce=t[61];var de;return t[62]!==Z||t[63]!==ce?(de=u.jsx(r("CometComponentWithKeyCommands.react"),{commandConfigs:Z,children:ce}),t[62]=Z,t[63]=ce,t[64]=de):de=t[64],de}l.default=f}),226);
__d("VideoPlayerVolumeSlider.react",["VideoPlayerHooks","VideoPlayerVolumeSliderBase.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(21),n=e.isHovering,a=e.onUserInteraction,i=e.onVisibilityChange,l=e.showBackgroundOverlay,c=l===void 0?!1:l,d=(s||(s=o("VideoPlayerHooks"))).useController(),m=s.useMuted(),p=s.useVolume(),_;t[0]!==d?(_=function(t){d.setVolume(t)},t[0]=d,t[1]=_):_=t[1];var f=_,g;t[2]!==d?(g=function(t,n){d.setMuted(t,n)},t[2]=d,t[3]=g):g=t[3];var h=g,y;t[4]!==d?(y=function(t){var e=d.getCurrentState(),n=Math.max(0,Math.min(1,e.volume+t));d.setVolume(n),n===0?d.setMuted(!0,"user_initiated"):e.muted&&d.setMuted(!1,"user_initiated")},t[4]=d,t[5]=y):y=t[5];var C=y,b;t[6]!==C?(b=function(){C(.05)},t[6]=C,t[7]=b):b=t[7];var v=b,S;t[8]!==C?(S=function(){C(-.05)},t[8]=C,t[9]=S):S=t[9];var R=S,L;return t[10]!==R||t[11]!==v||t[12]!==n||t[13]!==m||t[14]!==a||t[15]!==i||t[16]!==h||t[17]!==f||t[18]!==c||t[19]!==p?(L=u.jsx(r("VideoPlayerVolumeSliderBase.react"),{isHovering:n,isMuted:m,onChangeVolumeDown:R,onChangeVolumeUp:v,onSetMuted:h,onSetVolume:f,onUserInteraction:a,onVisibilityChange:i,showBackgroundOverlay:c,volume:p}),t[10]=R,t[11]=v,t[12]=n,t[13]=m,t[14]=a,t[15]=i,t[16]=h,t[17]=f,t[18]=c,t[19]=p,t[20]=L):L=t[20],L}l.default=d}),98);
__d("VideoPlayerVolumeControl.react",["VideoPlayerHooks","VideoPlayerVolumeControlBase.react","VideoPlayerVolumeSlider.react","cr:1826284","react","react-compiler-runtime","useEmptyFunction"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c=s||(s=o("react")),d=s,m=d.useCallback,p=d.useState,_=(e=n("cr:1826284"))!=null?e:r("useEmptyFunction");function f(e){var t=o("react-compiler-runtime").c(16),n=e.onUserInteraction,a=e.showBackgroundOverlay,i=e.useOutlineIcons,l=a===void 0?!1:a,s=i===void 0?!1:i,d=p(!1),m=d[0],f=d[1],g=(u||(u=o("VideoPlayerHooks"))).useController(),h=u.useMuted(),y=u.useVolume(),C;t[0]===Symbol.for("react.memo_cache_sentinel")?(C=function(){f(!0)},t[0]=C):C=t[0];var b=C,v;t[1]===Symbol.for("react.memo_cache_sentinel")?(v=function(){f(!1)},t[1]=v):v=t[1];var S=v,R;t[2]!==g?(R=function(t,n){g.setMuted(t,n)},t[2]=g,t[3]=R):R=t[3];var L=R,E=!h&&y>0,k=_({canPlayerProduceSound:E,isHovering:m})||null,I;t[4]!==m||t[5]!==n||t[6]!==l?(I=function(t){var e=t.focusVisible,o=t.onVisibilityChange;return c.jsx(r("VideoPlayerVolumeSlider.react"),{isHovering:m||e,onUserInteraction:n,onVisibilityChange:o,showBackgroundOverlay:l})},t[4]=m,t[5]=n,t[6]=l,t[7]=I):I=t[7];var T;return t[8]!==k||t[9]!==h||t[10]!==n||t[11]!==L||t[12]!==I||t[13]!==s||t[14]!==y?(T=c.jsx(r("VideoPlayerVolumeControlBase.react"),{audioAvailabilityUI:k,isMuted:h,onMouseEnter:b,onMouseLeave:S,onSetMuted:L,onUserInteraction:n,renderVolumeSlider:I,useOutlineIcons:s,volume:y}),t[8]=k,t[9]=h,t[10]=n,t[11]=L,t[12]=I,t[13]=s,t[14]=y,t[15]=T):T=t[15],T}l.default=f}),98);
__d("useParentRoute",["CometRouterParentRouteContext","react"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){return s(r("CometRouterParentRouteContext"))}l.default=u}),98);
__d("usePlayerOriginRouteTracePolicy",["CometNotificationsRootContext","CometRouteRenderType","react","useCometRouteTracePolicy","useCometRouterState","useParentRoute","useRoutePassthroughProps"],(function(t,n,r,o,a,i,l){"use strict";var e,s=(e||(e=o("react"))).useContext;function u(){var e,t=s(r("CometNotificationsRootContext")),n=t.isNotificationsRoute,a=r("useCometRouteTracePolicy")(),i=o("CometRouteRenderType").useIsPushView(),l=r("useParentRoute")(),u=r("useCometRouterState")(),c=r("useRoutePassthroughProps")();if((c==null?void 0:c.isARLTW)===!0)return"comet.watch.arltw";var d=a==="comet.videos.tahoe",m=a==="comet.stories.viewer",p=a==="comet.reels.home"||a==="comet.reels.unified.player";if(i){if(d)return"unknown";if(m)return a;if(p&&(l==null?void 0:l.tracePolicy)==null&&u!=null){var _,f=u.main,g=u.pushViewStack,h=g&&g.length>1?g[g.length-2]:f,y=h.route;return(_=y.tracePolicy)!=null?_:a}}return n&&!d?a:(e=l==null?void 0:l.tracePolicy)!=null?e:a}l.default=u}),98);
__d("useVideoPlayerHasStartedPlayingAtLeastOnce",["VideoPlayerHooks","createVideoStateHook","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=(e||(e=o("react"))).useEffect,c=o("createVideoStateHook").createVideoStateHook(null),d=c.stateHook;function m(){var e=o("react-compiler-runtime").c(4),t=d(!1),n=t[0],r=t[1],a=(s||(s=o("VideoPlayerHooks"))).usePlaying(),i,l;return e[0]!==a||e[1]!==r?(i=function(){a&&r(!0)},l=[a,r],e[0]=a,e[1]=r,e[2]=i,e[3]=l):(i=e[2],l=e[3]),u(i,l),n}l.default=m}),98);
__d("useVideoPlayerBigPlayButtonOverlay",["VideoPlayerHooks","VideoPlayerPlayButton.react","VideoPlayerSmallPlayButton.react","react","react-compiler-runtime","useVideoPlayerHasStartedPlayingAtLeastOnce"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e.useCallback;function d(e){var t=o("react-compiler-runtime").c(13),n;t[0]!==e?(n=e===void 0?{}:e,t[0]=e,t[1]=n):n=t[1];var a=n,i=a.buttonSize,l=a.forceVisible,c=a.overrideInteraction,d=a.shouldUnmute,m=i===void 0?"large":i,p=r("useVideoPlayerHasStartedPlayingAtLeastOnce")(),_=(s||(s=o("VideoPlayerHooks"))).usePaused(),f=s.useLastMuteReason(),g=s.useController(),h;t[2]!==g||t[3]!==f||t[4]!==d?(h=function(){g.play("user_initiated"),d===!0&&f!=="user_initiated"&&g.setMuted(!1,"product_initiated")},t[2]=g,t[3]=f,t[4]=d,t[5]=h):h=t[5];var y=h,C=c!=null?c.handler:y,b=l===!0||l===!1?l:!p&&_,v;t[6]!==b||t[7]!==m||t[8]!==C?(v=m==="small"?u.jsx(r("VideoPlayerSmallPlayButton.react"),{isVisible:b,onClick:C}):u.jsx(r("VideoPlayerPlayButton.react"),{isVisible:b,onClick:C}),t[6]=b,t[7]=m,t[8]=C,t[9]=v):v=t[9];var S=v,R;return t[10]!==S||t[11]!==b?(R={bigPlayButtonElement:S,bigPlayButtonIsVisible:b},t[10]=S,t[11]=b,t[12]=R):R=t[12],R}l.default=d}),98);